<?xml version="1.0" encoding="utf-8"?>
<HTTPSnapshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="4">
  <HTTPTask id="100" hostname="banking.megasol.se" path="/login.mws" url="http://banking.megasol.se/login.mws" ip="62.109.53.196" port="80" connectionId="12" origin="Primary" frame="1" startDateTime="2019-01-03T14:43:14.808+05:30" startTime="517316687" endTime="517317718">
    <HTTPRequest method="POST">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Host" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YmFua2luZy5tZWdhc29sLnNl</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>OTI=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cache-Control" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bWF4LWFnZT0w</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Origin" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cDovL2JhbmtpbmcubWVnYXNvbC5zZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Upgrade-Insecure-Requests" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Type" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVk</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzcxLjAuMzU3OC45OCBTYWZhcmkvNTM3LjM2</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>dGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Referer" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cDovL2JhbmtpbmcubWVnYXNvbC5zZS8=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="11">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cookie" index="12">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Y29ybmljaGVuZXRfRk5CTD1BQkQ5N0JGMC04ODE0LTQ2NzAtQUVGQy0yNTk2QjUyRDA1Qzg=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>UE9TVCAvbG9naW4ubXdzIEhUVFAvMS4xDQpIb3N0OiBiYW5raW5nLm1lZ2Fzb2wuc2UNCkNvbm5lY3Rpb246IGtlZXAtYWxpdmUNCkNvbnRlbnQtTGVuZ3RoOiA5Mg0KQ2FjaGUtQ29udHJvbDogbWF4LWFnZT0wDQpPcmlnaW46IGh0dHA6Ly9iYW5raW5nLm1lZ2Fzb2wuc2UNClVwZ3JhZGUtSW5zZWN1cmUtUmVxdWVzdHM6IDENCkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvNzEuMC4zNTc4Ljk4IFNhZmFyaS81MzcuMzYNCkFjY2VwdDogdGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOA0KUmVmZXJlcjogaHR0cDovL2JhbmtpbmcubWVnYXNvbC5zZS8NCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUyxlbjtxPTAuOQ0KQ29va2llOiBjb3JuaWNoZW5ldF9GTkJMPUFCRDk3QkYwLTg4MTQtNDY3MC1BRUZDLTI1OTZCNTJEMDVDOA0KDQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
        <HTTPCookies>
          <HTTPHeaderEntity name="cornichenet_FNBL" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QUJEOTdCRjAtODgxNC00NjcwLUFFRkMtMjU5NkI1MkQwNUM4</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
        </HTTPCookies>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>YWN0aW9uPWxvZ2luJmxvZ2ludG9rZW49NURTMEdaV05LJmRmX3VzZXJuYW1lPURFTU8mSWRsZVRpbWU9OTAwJmRmX3Bhc3N3b3JkPWRlbW8mTGFuZ3VhZ2U9RU4=</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
    </HTTPRequest>
    <HTTPResponse>
      <contentLenght>11181</contentLenght>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Cache-Control" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bm8tc3RvcmUsIG5vLWNhY2hlLCBtdXN0LXJldmFsaWRhdGUscG9zdC1jaGVjaz0wLCBwcmUtY2hlY2s9MA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Pragma" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bm8tY2FjaGU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Type" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>dGV4dC9odG1s</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Expires" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Server" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TWljcm9zb2Z0LUlJUy84LjU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Set-Cookie" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SWRsZVRpbWU9OTAwOyBwYXRoPS8=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Set-Cookie" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Y29ybmljaGVuZXRfRk5CTD1BQkQ5N0JGMC04ODE0LTQ2NzAtQUVGQy0yNTk2QjUyRDA1Qzg7IHBhdGg9Lw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-Powered-By" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QVNQLk5FVA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VGh1LCAwMyBKYW4gMjAxOSAwOToxMDo0MiBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MTExODE=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDYWNoZS1Db250cm9sOiBuby1zdG9yZSwgbm8tY2FjaGUsIG11c3QtcmV2YWxpZGF0ZSxwb3N0LWNoZWNrPTAsIHByZS1jaGVjaz0wDQpQcmFnbWE6IG5vLWNhY2hlDQpDb250ZW50LVR5cGU6IHRleHQvaHRtbA0KRXhwaXJlczogMA0KU2VydmVyOiBNaWNyb3NvZnQtSUlTLzguNQ0KU2V0LUNvb2tpZTogSWRsZVRpbWU9OTAwOyBwYXRoPS8NClNldC1Db29raWU6IGNvcm5pY2hlbmV0X0ZOQkw9QUJEOTdCRjAtODgxNC00NjcwLUFFRkMtMjU5NkI1MkQwNUM4OyBwYXRoPS8NClgtUG93ZXJlZC1CeTogQVNQLk5FVA0KRGF0ZTogVGh1LCAwMyBKYW4gMjAxOSAwOToxMDo0MiBHTVQNCkNvbnRlbnQtTGVuZ3RoOiAxMTE4MQ0KDQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>DQo8IURPQ1RZUEUgSFRNTCBQVUJMSUMgIi0vL1czQy8vRFREIEhUTUwgNC4wMSBUcmFuc2l0aW9uYWwvL0VOIj4NCg0KPGh0bWw+DQo8aGVhZD4NCjx0aXRsZT5lTmV3czwvdGl0bGU+DQo8bWV0YSBodHRwLWVxdWl2PSJjYWNoZS1jb250cm9sIiBjb250ZW50PSJubyBjYWNoZSI+DQo8bWV0YSBodHRwLWVxdWl2PSJwcmFnbWEiIGNvbnRlbnQ9Im5vIGNhY2hlIj4NCjxtZXRhIGh0dHAtZXF1aXY9IkNvbnRlbnQtVHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PUlTTy04ODU5LTEiPg0KPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiB0eXBlPSJ0ZXh0L2NzcyIgaHJlZj0ic3R5bGUvZGV0YWlsc3R5bGUuY3NzP3ZlcnNpb249OCI+DQo8c2NyaXB0IHNyYz0ianMvY29tbW9uLmpzIiBsYW5ndWFnZT0iamF2YXNjcmlwdCIgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij48L3NjcmlwdD4NCjxzY3JpcHQgc3JjPSJqcy9tZW51LmpzIiBsYW5ndWFnZT0iamF2YXNjcmlwdCIgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij48L3NjcmlwdD4NCjxzY3JpcHQgc3JjPSJqcy9wcm90b3R5cGUuanMiIGxhbmd1YWdlPSJqYXZhc2NyaXB0IiB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPjwvc2NyaXB0Pg0KDQoNCjxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij4NCglmdW5jdGlvbiBoZWxwKCkNCgl7DQoJCXZhciBsZWZ0PShzY3JlZW4uYXZhaWxXaWR0aC01MDApLzI7DQoJCXZhciB0b3A9KHNjcmVlbi5hdmFpbEhlaWdodC0xNTApLzI7DQoJCXdpbmRvdy5vcGVuKCJlbi9vZHJldm5ld3NfaGVscC5odG1sIiwiSGVscCIsInJlc2l6YWJsZT15ZXMsc2Nyb2xsYmFycz15ZXMsdG9vbGJhcj1ubyxsb2NhdGlvbj1ubyxkaXJlY3Rvcmllcz1ubyxzdGF0dXM9bm8sbWVudWJhcj1ubyxjb3B5aGlzdG9yeT1ubyx3aWR0aD01MDAsaGVpZ2h0PTE1MCxsZWZ0PSIrbGVmdCsiLHRvcD0iK3RvcCk7DQoJfQ0KPC9zY3JpcHQ+DQo8L2hlYWQ+DQoNCjxib2R5IGNsYXNzPSJib2R5dGV4dCI+DQoNCg0KPHRhYmxlIGNsYXNzPSJncmlkIj4NCgkNCgk8dHI+DQoJCTx0ZCBjbGFzcz0ibWVudWNvbHVtbiI+PGRpdiBjbGFzcz0ibWVudSIgaWQ9Im1lbnVDb250YWluZXIiPg0KCTxkaXYgY2xhc3M9Im1lbnVDb21wb25lbnQiIHN0eWxlPSJoZWlnaHQ6IDM3cHg7Ij4NCiAgICAJPGEgaHJlZj0iZU5ld3MubXdzIj48aW1nIGJvcmRlcj0iMCIgc3JjPSJpbWFnZXMvbWVudXRvcC5naWYiIHdpZHRoPSIxMDUiIGFsdD0iIj48L2E+DQogICAgPC9kaXY+DQoNCiAgICA8ZGl2IGNsYXNzPSJtZW51Q29tcG9uZW50IiBzdHlsZT0iaGVpZ2h0OiA1cHg7Ij48L2Rpdj4NCg0KICAgIDwhLS0gQUNDT1VOVFMgKDEpIC0tPgkNCiAgICA8ZGl2IGNsYXNzPSJtZW51Q29tcG9uZW50IG1lbnVoZWFkIj4NCjxhIGhyZWY9ImphdmFzY3JpcHQ6c2VsZWN0SGVhZGluZygxKTsiPkFjY291bnRzPC9hPg0KPC9kaXY+DQoNCiAgICA8ZGl2IGlkPSJoZWFkaW5nXzEiIGNsYXNzPSJtZW51Q29tcG9uZW50Ij4NCiAgICAJPGRpdiBjbGFzcz0ibWVudXRleHQiPjxhIGhyZWY9IkFjY291bnREZXBvc2l0Lm13cyI+RGVwb3NpdCBub3RpZmljYXRpb248L2E+PC9kaXY+DQogICAgICAgIDxkaXYgY2xhc3M9Im1lbnV0ZXh0Ij48YSBocmVmPSJBY2NvdW50UHJvZmlsZS5td3MiPlByb2ZpbGU8L2E+PC9kaXY+DQogICAgICAgIDxkaXYgY2xhc3M9Im1lbnV0ZXh0Ij48YSBocmVmPSJQcmVkZWZpbmVkQWNjb3VudE1haW50Lm13cyI+UHJlZGVmaW5lZCBhY2NvdW50PC9hPjwvZGl2Pg0KICAgICAgICA8ZGl2IGNsYXNzPSJtZW51dGV4dCI+PGEgaHJlZj0iQWNjb3VudFN1bW1hcnkubXdzIj5TdW1tYXJpZXM8L2Rpdj4NCiAgICAgICAgPGRpdiBjbGFzcz0ibWVudXRleHQiPjxhIGhyZWY9IkFjY291bnRTdGF0ZW1lbnQubXdzIj5TdGF0ZW1lbnRzPC9hPjwvZGl2Pg0KICAgICAgIAk8ZGl2IGNsYXNzPSJtZW51dGV4dCI+PGEgaHJlZj0iQWNjb3VudFBvcnRmb2xpby5td3MiPlBvcnRmb2xpbzwvYT48L2Rpdj4NCiAgICAgICAgPGRpdiBjbGFzcz0ibWVudXRleHQiPjxhIGhyZWY9IlBlbmRpbmdTaWduYXRvcnkubXdzIj5TaWduYXR1cmVzPC9hPjwvZGl2Pg0KDQogICAgICAgIDxkaXYgY2xhc3M9Im1lbnV0ZXh0Ij48YSBocmVmPSJBY2NvdW50T3Blbi5td3MiPk9wZW48L2E+PC9kaXY+DQogICAgPC9kaXY+DQogICAgPGRpdiBjbGFzcz0ibWVudUNvbXBvbmVudCIgc3R5bGU9ImhlaWdodDogM3B4OyI+PCEtLSAtLT48L2Rpdj4NCg0KCTwhLS0gSU5WRVNUTUVOVFMgKDIpIC0tPg0KICAgIDxkaXYgY2xhc3M9Im1lbnVDb21wb25lbnQgbWVudWhlYWQiPg0KPGEgaHJlZj0iamF2YXNjcmlwdDpzZWxlY3RIZWFkaW5nKDIpOyI+SW52ZXN0bWVudHM8L2E+DQo8L2Rpdj4NCg0KICAgIDxkaXYgaWQ9ImhlYWRpbmdfMiIgY2xhc3M9Im1lbnVDb21wb25lbnQiIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+DQogICAgICAgIDxkaXYgY2xhc3M9Im1lbnV0ZXh0Ij48YSBocmVmPSJQcm9kdWN0SW52ZXN0bWVudC5td3MiPlRlcm0gZGVwb3NpdHM8L2E+PC9kaXY+DQogICAgPC9kaXY+DQogICAgPGRpdiBjbGFzcz0ibWVudUNvbXBvbmVudCIgc3R5bGU9ImhlaWdodDogM3B4OyI+PCEtLSAtLT48L2Rpdj4NCg0KPCEtLSBFU0NST1cgKDExKSAtLT4JDQogICAgPGRpdiBjbGFzcz0ibWVudUNvbXBvbmVudCBtZW51aGVhZCI+DQo8YSBocmVmPSJqYXZhc2NyaXB0OnNlbGVjdEhlYWRpbmcoMTEpOyI+RXNjcm93PC9hPg0KPC9kaXY+DQoNCiAgICA8ZGl2IGlkPSJoZWFkaW5nXzExIiBjbGFzcz0ibWVudUNvbXBvbmVudCIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7Ij4NCgkJPGRpdiBjbGFzcz0ibWVudXRleHQiPjxhIGhyZWY9IkVzY3Jvd1JlcXVlc3QubXdzIj5QYXltZW50IHJlcXVlc3Q8L2E+PC9kaXY+DQoJCTxkaXYgY2xhc3M9Im1lbnV0ZXh0Ij48YSBocmVmPSJFc2Nyb3dBdXRob3Jpc2UubXdzIj5BdXRob3Jpc2U8L2E+PC9kaXY+DQoJCTxkaXYgY2xhc3M9Im1lbnV0ZXh0Ij48YSBocmVmPSJFc2Nyb3dTaGlwcGluZy5td3MiPlNoaXBwaW5nPC9hPjwvZGl2Pg0KCQk8ZGl2IGNsYXNzPSJtZW51dGV4dCI+PGEgaHJlZj0iRXNjcm93SGlzdG9yeS5td3MiPlJldmlldzwvYT48L2Rpdj4NCiAgICA8L2Rpdj4NCiAgCTxkaXYgY2xhc3M9Im1lbnVDb21wb25lbnQiIHN0eWxlPSJoZWlnaHQ6IDNweDsiPjwvZGl2Pg0KDQogICAgPCEtLSBNWSBDQVJEUyAoMykgLS0+DQoJPGRpdiBjbGFzcz0ibWVudUNvbXBvbmVudCBtZW51aGVhZCI+DQo8YSBocmVmPSJqYXZhc2NyaXB0OnNlbGVjdEhlYWRpbmcoMyk7Ij5NeSBDYXJkczwvYT4NCjwvZGl2Pg0KDQogICAgPGRpdiBpZD0iaGVhZGluZ18zIiBjbGFzcz0ibWVudUNvbXBvbmVudCIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7Ij4NCgkJPGRpdiBjbGFzcz0ibWVudXRleHQiPjxhIGhyZWY9IkFjdGl2YXRlQ2FyZC5td3MiPkFjdGl2YXRlIGNhcmQ8L2E+PC9kaXY+DQoJCQ0KCQkNCgkJDQoJPC9kaXY+DQogICAgPGRpdiBjbGFzcz0ibWVudUNvbXBvbmVudCIgc3R5bGU9ImhlaWdodDogM3B4OyI+PC9kaXY+DQoJDQogICAgPCEtLSBUUkFOU0ZFUlMgKDQpIC0tPg0KICAgIDxkaXYgY2xhc3M9Im1lbnVDb21wb25lbnQgbWVudWhlYWQiPg0KPGEgaHJlZj0iamF2YXNjcmlwdDpzZWxlY3RIZWFkaW5nKDQpOyI+VHJhbnNmZXJzPC9hPg0KPC9kaXY+DQoNCiAgICA8ZGl2IGlkPSJoZWFkaW5nXzQiIGNsYXNzPSJtZW51Q29tcG9uZW50IiBzdHlsZT0iZGlzcGxheTogbm9uZTsiPg0KCQk8ZGl2IGNsYXNzPSJtZW51dGV4dCI+PGEgaHJlZj0iUGF5UHJlZGVmaW5lZEFjY291bnQubXdzIj5CYW5rIHdpdGhkcmF3YWw8L2E+PC9kaXY+DQoJCTxkaXYgY2xhc3M9Im1lbnV0ZXh0Ij48YSBocmVmPSJQYXlPd25BY2NvdW50Lm13cyI+T3duIGFjY291bnQ8L2E+PC9kaXY+DQoJCTxkaXYgY2xhc3M9Im1lbnV0ZXh0Ij48YSBocmVmPSJQYXlPdGhlckNsaWVudC5td3MiPk90aGVyIGNsaWVudDwvYT48L2Rpdj4NCgkJDQoJCTxkaXYgY2xhc3M9Im1lbnV0ZXh0Ij48YSBocmVmPSJDYXJkRGVwb3NpdF9WMy5td3MiPkZ1bmQgYnkgY2FyZDwvYT48L2Rpdj4NCiAgICA8L2Rpdj4NCiAgCTxkaXYgY2xhc3M9Im1lbnVDb21wb25lbnQiIHN0eWxlPSJoZWlnaHQ6IDNweDsiPjwvZGl2Pg0KDQogICAgPCEtLSBQQVlNRU5UUyg1KSAtLT4NCiAgCTxkaXYgY2xhc3M9Im1lbnVDb21wb25lbnQgbWVudWhlYWQiPg0KPGEgaHJlZj0iamF2YXNjcmlwdDpzZWxlY3RIZWFkaW5nKDUpOyI+UGF5bWVudHM8L2E+DQo8L2Rpdj4NCg0KICAgIDxkaXYgaWQ9ImhlYWRpbmdfNSIgY2xhc3M9Im1lbnVDb21wb25lbnQiIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+DQoJCTxkaXYgY2xhc3M9Im1lbnV0ZXh0Ij48YSBocmVmPSJQYXlXaXJlVHJhbnNmZXIubXdzIj5XaXJlIHRyYW5zZmVyPC9hPjwvZGl2Pg0KCQk8ZGl2IGNsYXNzPSJtZW51dGV4dCI+PGEgaHJlZj0iUGF5QmFua0RyYWZ0Lm13cyI+QmFua2VyJ3MgZHJhZnQ8L2E+PC9kaXY+DQogIAk8L2Rpdj4NCiAgICA8ZGl2IGNsYXNzPSJtZW51Q29tcG9uZW50IiBzdHlsZT0iaGVpZ2h0OiAzcHg7Ij48L2Rpdj4NCg0KICAgIDwhLS0gQ0FMQ1VDTEFUT1JTICg2KSAtLT4NCiAgICA8ZGl2IGNsYXNzPSJtZW51Q29tcG9uZW50IG1lbnVoZWFkIj4NCjxhIGhyZWY9ImphdmFzY3JpcHQ6c2VsZWN0SGVhZGluZyg2KTsiPkNhbGN1bGF0b3JzPC9hPg0KPC9kaXY+DQoNCgk8ZGl2IGlkPSJoZWFkaW5nXzYiIGNsYXNzPSJtZW51Q29tcG9uZW50IiBzdHlsZT0iZGlzcGxheTogbm9uZTsiPg0KICAgIAk8ZGl2IGNsYXNzPSJtZW51dGV4dCI+PGEgaHJlZj0iQ3VycmVuY3lDb252ZXJ0Lm13cyI+Q3VycmVuY2llczwvYT48L2Rpdj4NCgkJPGRpdiBjbGFzcz0ibWVudXRleHQiPjxhIGhyZWY9IkxvYW5DYWxjdWxhdG9yLm13cyI+TG9hbnM8L2E+PC9kaXY+DQoJCTxkaXYgY2xhc3M9Im1lbnV0ZXh0Ij48YSBocmVmPSJGWFJhdGVzLm13cyI+RlggUmF0ZXM8L2E+PC9kaXY+DQoJCTxkaXYgY2xhc3M9Im1lbnV0ZXh0Ij48YSBocmVmPSJIb2xpZGF5cy5td3MiPkhvbGlkYXlzPC9hPjwvZGl2Pg0KICAgIDwvZGl2Pg0KICAJPGRpdiBjbGFzcz0ibWVudUNvbXBvbmVudCIgc3R5bGU9ImhlaWdodDogM3B4OyI+PC9kaXY+DQoNCiAgICA8IS0tIFNUQU5ESU5HIE9SREVSUyAoNykgLS0+DQogICAgPGRpdiBjbGFzcz0ibWVudUNvbXBvbmVudCBtZW51aGVhZCI+DQo8YSBocmVmPSJqYXZhc2NyaXB0OnNlbGVjdEhlYWRpbmcoNyk7Ij5TdGFuZGluZyBvcmRlcnM8L2E+DQo8L2Rpdj4NCg0KICAgIDxkaXYgaWQ9ImhlYWRpbmdfNyIgY2xhc3M9Im1lbnVDb21wb25lbnQiIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+DQogICAgICAgIDxkaXYgY2xhc3M9Im1lbnV0ZXh0Ij48YSBocmVmPSJTdE9yZGVyT3duQWNjb3VudC5td3MiPk93biBhY2NvdW50PC9hPjwvZGl2Pg0KCQk8ZGl2IGNsYXNzPSJtZW51dGV4dCI+PGEgaHJlZj0iU3RPcmRlck90aGVyQ2xpZW50Lm13cyI+T3RoZXIgY2xpZW50PC9hPjwvZGl2Pg0KIAkJPGRpdiBjbGFzcz0ibWVudXRleHQiPjxhIGhyZWY9IlN0T3JkZXJQcmVkZWZpbmVkQWNjb3VudC5td3MiPlByZWRlZmluZWQgQWNjb3VudDwvYT48L2Rpdj4NCgkJPGRpdiBjbGFzcz0ibWVudXRleHQiPjxhIGhyZWY9IlN0T3JkZXJXaXJlVHJhbnNmZXIubXdzIj5XaXJlIHRyYW5zZmVyPC9hPjwvZGl2Pg0KCQk8ZGl2IGNsYXNzPSJtZW51dGV4dCI+PGEgaHJlZj0iU3RPcmRlckJhbmtEcmFmdC5td3MiPkJhbmtlcidzIGRyYWZ0PC9hPjwvZGl2Pg0KICAgIDwvZGl2Pg0KICAJPGRpdiBjbGFzcz0ibWVudUNvbXBvbmVudCIgc3R5bGU9ImhlaWdodDogM3B4OyI+PC9kaXY+DQoNCiAgICA8IS0tIFJlZmVycmFscyAoOCkgLS0+DQogICAgPGRpdiBjbGFzcz0ibWVudUNvbXBvbmVudCBtZW51aGVhZCI+DQo8YSBocmVmPSJqYXZhc2NyaXB0OnNlbGVjdEhlYWRpbmcoOCk7Ij5SZWZlcnJhbHM8L2E+DQo8L2Rpdj4NCg0KICAgIDxkaXYgaWQ9ImhlYWRpbmdfOCIgY2xhc3M9Im1lbnVDb21wb25lbnQiIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+DQoJCTxkaXYgY2xhc3M9Im1lbnV0ZXh0Ij48YSBocmVmPSJBZ2VudFJlZmVycmFsU3VtbWFyeS5td3MiIGNsYXNzPSJtZW51Ij5SZWZlcnJhbHMgLSBTdW1tYXJ5PC9hPjwvZGl2Pg0KCQk8ZGl2IGNsYXNzPSJtZW51dGV4dCI+PGEgaHJlZj0iQWdlbnRSZWZlcnJhbERldGFpbGVkLm13cyIgY2xhc3M9Im1lbnUiPlJlZmVycmFscyAtIERldGFpbGVkPC9hPjwvZGl2Pg0KCQk8ZGl2IGNsYXNzPSJtZW51dGV4dCI+PGEgaHJlZj0iQWdlbnRSZWZlcnJhbENvbW1pc3Npb25zLm13cyIgY2xhc3M9Im1lbnUiPkNvbW1pc3Npb25zPC9hPjwvZGl2Pg0KCQk8ZGl2IGNsYXNzPSJtZW51dGV4dCI+PGEgaHJlZj0iQWdlbnRSZWZlcnJhbENvbW1pc3Npb25TdW1tYXJ5Lm13cyIgY2xhc3M9Im1lbnUiPkRvd25saW5lPC9hPjwvZGl2Pg0KCQk8ZGl2IGNsYXNzPSJtZW51dGV4dCI+PGEgaHJlZj0iQWdlbnRDbGllbnRQb3J0Zm9saW8ubXdzIiBjbGFzcz0ibWVudSI+Q2xpZW50IHBvcnRmb2xpbzwvYT48L2Rpdj4NCgkJDQogCQk8L2Rpdj4NCiAgCTxkaXYgY2xhc3M9Im1lbnVDb21wb25lbnQiIHN0eWxlPSJoZWlnaHQ6IDNweDsiPjwvZGl2Pg0KDQogICAgPCEtLSBNQUlMQk9YICg5KSAtLT4NCiAgICA8ZGl2IGNsYXNzPSJtZW51Q29tcG9uZW50IG1lbnVoZWFkIj4NCjxhIGhyZWY9ImphdmFzY3JpcHQ6c2VsZWN0SGVhZGluZyg5KTsiPk1haWxib3ggKDE0MTk4KTwvYT4NCjwvZGl2Pg0KDQogICAgPGRpdiBpZD0iaGVhZGluZ185IiBjbGFzcz0ibWVudUNvbXBvbmVudCIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7Ij4NCgkJPGRpdiBjbGFzcz0ibWVudXRleHQiPjxhIGhyZWY9Ik1haWxib3gubXdzIj5OZXcgbWVzc2FnZTwvYT48L2Rpdj4NCgkJPGRpdiBjbGFzcz0ibWVudXRleHQiPjxhIGhyZWY9Ik1haWxJbmJveC5td3MiPjxiPkluYm94Jm5ic3A7KDE0MTk4KTwvYj48L2E+PC9kaXY+DQoJCTxkaXYgY2xhc3M9Im1lbnV0ZXh0Ij48YSBocmVmPSJNYWlsT3V0Ym94Lm13cyI+T3V0Ym94PC9hPjwvZGl2Pg0KCQk8ZGl2IGNsYXNzPSJtZW51dGV4dCI+PGEgaHJlZj0iQnVkZHlMaXN0Lm13cyI+QnVkZHkgbGlzdCA8L2E+PC9kaXY+DQogCTwvZGl2Pg0KICAJPGRpdiBjbGFzcz0ibWVudUNvbXBvbmVudCIgc3R5bGU9ImhlaWdodDogM3B4OyI+PC9kaXY+DQoNCiAgICA8IS0tIE9USEVSICgxMCkgLS0+DQogICAgPGRpdiBjbGFzcz0ibWVudUNvbXBvbmVudCBtZW51aGVhZCI+DQo8YSBocmVmPSJqYXZhc2NyaXB0OnNlbGVjdEhlYWRpbmcoMTApOyI+T3RoZXI8L2E+DQo8L2Rpdj4NCg0KICAgIDxkaXYgaWQ9ImhlYWRpbmdfMTAiIGNsYXNzPSJtZW51Q29tcG9uZW50IiBzdHlsZT0iZGlzcGxheTogbm9uZTsiPg0KCQk8ZGl2IGNsYXNzPSJtZW51dGV4dCI+PGEgaHJlZj0iQWNjZXNzTG9nLm13cyI+QWNjZXNzIGxvZzwvYT48L2Rpdj4NCgkJPGRpdiBjbGFzcz0ibWVudXRleHQiPjxhIGhyZWY9IkNoYW5nZUVudGl0eS5td3MiPkNoYW5nZSBjbGllbnQ8L2E+PC9kaXY+DQoJCTxkaXYgY2xhc3M9Im1lbnV0ZXh0Ij48YSBocmVmPSJDaGFuZ2VQYXNzd29yZC5td3MiPkNoYW5nZSBsb2ctaW48L2E+PC9kaXY+DQoJCTxkaXYgY2xhc3M9Im1lbnV0ZXh0Ij48YSBocmVmPSJTdWJVc2Vycy5td3MiPlN1Yi11c2VyczwvYT48L2Rpdj4NCgkJPGRpdiBjbGFzcz0ibWVudXRleHQiPjxhIGhyZWY9IkRvY3VtZW50cy5td3MiPkRvY3VtZW50czwvYT48L2Rpdj4NCgkJPGRpdiBjbGFzcz0ibWVudXRleHQiPjxhIGhyZWY9ImVOZXdzLm13cyI+ZU5ld3M8L2E+PC9kaXY+DQoJCTxkaXYgY2xhc3M9Im1lbnV0ZXh0Ij48YSBocmVmPSJGYXEubXdzIj5GQVEnczwvYT48L2Rpdj4NCgkJDQogIAk8L2Rpdj4NCiAgCTxkaXYgY2xhc3M9Im1lbnVDb21wb25lbnQiIHN0eWxlPSJoZWlnaHQ6IDNweDsiPjwvZGl2Pg0KCTxkaXYgY2xhc3M9Im1lbnVDb21wb25lbnQgbWVudWhlYWQiPjxhIGhyZWY9IkxvZ291dC5td3MiPkxvZyBvdXQ8L2E+PC9kaXY+DQogIAk8ZGl2IGNsYXNzPSJtZW51Q29tcG9uZW50IiBzdHlsZT0iaGVpZ2h0OiAzcHg7Ij48L2Rpdj4NCiAgCTxkaXYgY2xhc3M9Im1lbnVDb21wb25lbnQiIHN0eWxlPSJoZWlnaHQ6IDZweDsiPg0KICAgIAk8aW1nIGJvcmRlcj0iMCIgc3JjPSJpbWFnZXMvbWVudWJvdHRvbS5naWYiIHdpZHRoPSIxMDUiIGFsdD0iIj4NCiAgICA8L2Rpdj4NCjwvZGl2PjwvdGQ+DQoJCTx0ZCBjbGFzcz0iY29udGVudGNvbHVtbiI+DQoJCQk8IS0tIFRoZSBjdXN0b20gcGFydCBvZiBldmVyeSBodG1sIHBhZ2Ugc3RhcnRzIGhlcmUhISEgLS0+DQoJCQk8dGFibGUgYm9yZGVyPSIwIiBjZWxscGFkZGluZz0iMyIgY2VsbHNwYWNpbmc9IjAiIHdpZHRoPSIxMDAlIj4NCgkJCQk8dHI+PHRkIGNvbHNwYW49IjMiPg0KCQkJCTx0YWJsZSBib3JkZXI9IjAiIGNlbGxwYWRkaW5nPSIwIiBjZWxsc3BhY2luZz0iMCIgd2lkdGg9IjEwMCUiPjx0cj4NCgkJCQkJPHRkIGNsYXNzPSJoZWFkZXJibGFjayIgaGVpZ2h0PSIzNSIgdmFsaWduPSJtaWRkbGUiPk90aGVyIC8gTmV3czwvdGQ+DQoJCQkJCTx0ZCBhbGlnbj0icmlnaHQiIGNsYXNzPSJ0ZXh0IiB2YWxpZ249InRvcCI+MjAxOS0wMS0wMzxicj5DaGFybGVzIFdpbmRzb3I8L3RkPg0KCQkJCQk8dGQgYWxpZ249InJpZ2h0IiBjbGFzcz0idGV4dCIgdmFsaWduPSJ0b3AiIHdpZHRoPSIzJSI+PGEgaHJlZj0iamF2YXNjcmlwdDpoZWxwKCkiPjxpbWcgc3JjPSJpbWFnZXMvaGVscC5naWYiIGFsdD0iIiBuYW1lPSJoZWxwIiBpZD0iaGVscCIgd2lkdGg9IjE0IiBoZWlnaHQ9IjE2IiBib3JkZXI9IjAiPjwvYT48L3RkPjwvdHI+DQoJCQkJPC90YWJsZT4NCgkJCQk8L3RkPjwvdHI+DQoJCQkJPHRyPjx0ZCBjb2xzcGFuPSIzIiBjbGFzcz0ic3ViamVjdHdoaXRlYmx1ZSI+TGF0ZXN0IG5ld3M8L3RkPjwvdHI+DQoJCQkJPHRyPjx0ZCBjb2xzcGFuPSIzIiBoZWlnaHQ9IjYiPjwvdGQ+PC90cj4NCgkJCQkNCg0KCQkJCTx0cj4NCgkJCQkJCQkJPHRkIGFsaWduPSJsZWZ0IiBjb2xzcGFuPSIzIiBjbGFzcz0idGV4dGdyZXkiPjxiPjIwMTYtMDktMDYgLSZuYnNwO1dvcmsgb24gQ29ybmljaGUgMjAxNyBpcyBwcm9ncmVzc2luZzo8L2I+IDxmb250IGNvbG9yPXJlZD5XZSBhcmUgcGxlYXNlZCB0byByZXBvcnQgdGhhdCBtb3N0IG9mIHRoZSBtYWpvciBkZWNpc2lvbi1tYWtpbmcgd2l0aCByZWdhcmRzIHRvIHRoZSBuZXcgQ29ybmljaGUgaGFzIGJlZW4gY29tcGxldGVkIGFuZCB0aGUgZnJhbWV3b3JrcyB1c2VkIHRvIHByb2R1Y2UgYW5kIHRlc3QgdGhlIG1vZHVsZXMgYXJlIHdlbGwgdW5kZXJ3YXkuIFdoaWxlIHdlIGNhbm5vdCBnaXZlIGEgZmlybSBkZWxpdmVyeSBkYXRlIGZvciB0aGUgY29tcGxldGUgcHJvZHVjdCwgbWFueSBvZiB0aGUgYmFja2dyb3VuZCBhY3Rpdml0aWVzIG9mIENvcm5pY2hlIGFyZSBub3cgbWFuYWdlZCByb3V0aW5lbHkgYnkgdGhlIG5ldyBDb3JuaWNoZSBTZXJ2ZXIuIFRoaXMgcHJvdmlkZXMgYmV0dGVyIHNwZWVkIGFuZCBhIG1vcmUgZmxleGlibGUgYXBwcm9hY2ggaW4gdGhlIGZ1dHVyZS48L2ZvbnQ+PC90ZD4NCgkJCQkJCQk8L3RyPg0KCQkJCQkNCg0KCQkJCTx0cj4NCgkJCQkJCQkJPHRkIGFsaWduPSJsZWZ0IiBjb2xzcGFuPSIzIiBjbGFzcz0idGV4dCI+PGI+MjAxMy0xMC0wMiAtJm5ic3A7SW50ZXJuYXRpb25hbCBjb21wbGlhbmNlIHJlZ3VsYXRpb25zIHRvIGdldCB0b3VnaGVyOjwvYj4gQmFua3MgYXJlIGZhY2luZyBhIHJpc2luZyBsZWdhbCByZXF1aXJlbWVudCBmcm9tIGdvdmVybm1lbnRzIHRvIG5vdCBvbmx5ICJrbm93IHlvdXIgY3VzdG9tZXIiIGJ1dCBhbHNvIHRvIGtub3cgd2hvIGlzIG1ha2luZyBwYXltZW50cyB0byBhIGN1c3RvbWVyIGFuZCB0byB3aG9tIHRoZSBjdXN0b21lciBpcyBtYWtpbmcgcGF5bWVudHMuIEFzIGEgcmVzdWx0LCBiYW5raW5nIHNvZnR3YXJlIHN5c3RlbXMgYXJlIGJlaW5nIHVwZ3JhZGVkIGFjcm9zcyB0aGUgaW5kdXN0cnkgdG8gcmVxdWlyZSByZXBvcnRpbmcgdG8gdGhlIGJhbmsgb2YgYWxsIGluY29taW5nIGZ1bmRzIGJlZm9yZSB0aGV5IGV2ZW4gYXJyaXZlIGF0IHRoZSBiYW5rLjxwPk91ciA8Yj5EZXBvc2l0IE5vdGlmaWNhdGlvbjwvYj4gYWxsb3dzIHlvdSB0byBjb21wbHkgd2l0aCBsZWdhbCByZXF1aXJlbWVudHMgaW4gdGhpcyByZXNwZWN0LiBJZiBzb21lb25lIHdhbnRzIHRvIHNlbmQgZnVuZHMgdG8geW91LCBlbnN1cmUgdGhhdCB5b3UgaGF2ZSBhdXRob3Jpc2VkIGl0IGFuZCBjb21wbGV0ZWQgYSBkZXBvc2l0IG5vdGlmaWNhdGlvbiBkZWZpbmluZyB3aG8gdGhlIHBheW9yIGlzIEJFRk9SRSB0aGUgZnVuZHMgYXJlIHNlbnQgdG8gdGhlIGJhbmsuPHA+SWYgeW91IGRvIG5vdCBkbyB0aGlzLCB0aGVuIG5vIG1hdHRlciB3aGVyZSB5b3UgYmFuayB0aGVyZSBpcyBhIGhpZ2ggcmlzayB0aGF0IHRoZSBmdW5kcyB3aWxsIGJlIHJlZnVzZWQgYW5kIHJldHVybmVkIGZyb20gd2hlbmNlIHRoZXkgY2FtZS4gVGhpcyBpcyBvbmUgcGFydCBvZiB0aGUgaW50ZXJuYXRpb25hbCBmaWdodCBhZ2FpbnN0IG1vbmV5IGxhdW5kZXJpbmcgb2YgdGhlIHByb2NlZWRzIG9mIGNyaW1lIGFuZCB0aGUgcHJldmVudGlvbiBvZiB0aGUgZnVuZGluZyBvZiB0ZXJyb3Jpc20uPC90ZD4NCgkJCQkJCQk8L3RyPg0KCQkJCQkNCg0KCQkJCTx0cj48dGQgY29sc3Bhbj0iMyIgY2xhc3M9InRleHQiPjwvdGQ+PC90cj4NCgkJCTwvdGFibGU+DQoJCQk8IS0tIFRoZSBjdXN0b20gcGFydCBvZiBldmVyeSBodG1sIHBhZ2Ugc3RvcHMgaGVyZSEhISAtLT4NCgkJPC90ZD4NCgk8L3RyPg0KCTx0cj4NCgkJPHRkIGNvbHNwYW49IjIiIGNsYXNzPSJmb290ZXJjb250YWluZXIiPjxzcGFuIGNsYXNzPSJjb3B5cmlnaHRibHVlIj5Db3B5cmlnaHQgJmNvcHk7Jm5ic3A7PGEgdGFyZ2V0PSJfYmxhbmsiIGhyZWY9Imh0dHA6Ly93d3cubWVnYXNvbC5zZSIgY2xhc3M9IkNvcHlyaWdodCI+TWVnYXNvbCBUZWNobm9sb2dpZXM8L2E+IDIwMDAtMjAxOTwvc3Bhbj4mbmJzcDs8c3BhbiBjbGFzcz0iY29weXJpZ2h0cmVkIj5BbGwgUmlnaHRzIFJlc2VydmVkIENvcm5pY2hlTmV0PC9zcGFuPjwvdGQ+DQoJPC90cj4NCjwvdGFibGU+DQoNCg0KPC9ib2R5Pg0KPC9odG1sPg0K</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
      <TcpPackets>
        <PacketInfo time="517317718" offset="0" length="1380" />
        <PacketInfo time="517317734" offset="1380" length="2920" />
        <PacketInfo time="517317734" offset="4300" length="1220" />
        <PacketInfo time="517317890" offset="5520" length="1460" />
        <PacketInfo time="517317890" offset="6980" length="1300" />
        <PacketInfo time="517317890" offset="8280" length="1460" />
        <PacketInfo time="517317906" offset="9740" length="1460" />
        <PacketInfo time="517317968" offset="11200" length="352" />
      </TcpPackets>
    </HTTPResponse>
    <HTTPTask id="119" hostname="banking.megasol.se" path="/js/common.js" url="http://banking.megasol.se/js/common.js" ip="62.109.53.196" port="80" connectionId="14" origin="HTML" frame="1" startDateTime="2019-01-03T14:43:15.123+05:30" startTime="517317859" endTime="517318218">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="Host" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YmFua2luZy5tZWdhc29sLnNl</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzcxLjAuMzU3OC45OCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cDovL2JhbmtpbmcubWVnYXNvbC5zZS9sb2dpbi5td3M=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cookie" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y29ybmljaGVuZXRfRk5CTD1BQkQ5N0JGMC04ODE0LTQ2NzAtQUVGQy0yNTk2QjUyRDA1Qzg7IElkbGVUaW1lPTkwMA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIC9qcy9jb21tb24uanMgSFRUUC8xLjENCkhvc3Q6IGJhbmtpbmcubWVnYXNvbC5zZQ0KQ29ubmVjdGlvbjoga2VlcC1hbGl2ZQ0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzcxLjAuMzU3OC45OCBTYWZhcmkvNTM3LjM2DQpBY2NlcHQ6ICovKg0KUmVmZXJlcjogaHR0cDovL2JhbmtpbmcubWVnYXNvbC5zZS9sb2dpbi5td3MNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUyxlbjtxPTAuOQ0KQ29va2llOiBjb3JuaWNoZW5ldF9GTkJMPUFCRDk3QkYwLTg4MTQtNDY3MC1BRUZDLTI1OTZCNTJEMDVDODsgSWRsZVRpbWU9OTAwDQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="cornichenet_FNBL" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>QUJEOTdCRjAtODgxNC00NjcwLUFFRkMtMjU5NkI1MkQwNUM4</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="IdleTime" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>OTAw</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>1018</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Content-Type" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Last-Modified" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAyOCBKdW4gMjAxOCAxOToyNDozNiBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ETag" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IjA3MjU2YTYxNWZkNDE6MCI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Server" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TWljcm9zb2Z0LUlJUy84LjU=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Powered-By" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QVNQLk5FVA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAwMyBKYW4gMjAxOSAwOToxMDo0MiBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTAxOA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2phdmFzY3JpcHQNCkxhc3QtTW9kaWZpZWQ6IFRodSwgMjggSnVuIDIwMTggMTk6MjQ6MzYgR01UDQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KRVRhZzogIjA3MjU2YTYxNWZkNDE6MCINClNlcnZlcjogTWljcm9zb2Z0LUlJUy84LjUNClgtUG93ZXJlZC1CeTogQVNQLk5FVA0KRGF0ZTogVGh1LCAwMyBKYW4gMjAxOSAwOToxMDo0MiBHTVQNCkNvbnRlbnQtTGVuZ3RoOiAxMDE4DQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>LyoqDQogKiBAYXV0aG9yIEVyaWsgVPZybnF1aXN0DQogKi8NCg0KZnVuY3Rpb24gZ2V0Q2hlY2tlZFZhbHVlKHJhZGlvT2JqKSB7DQoJaWYoIXJhZGlvT2JqKQ0KCQlyZXR1cm4gIiI7DQoJdmFyIHJhZGlvTGVuZ3RoID0gcmFkaW9PYmoubGVuZ3RoOw0KCWlmKHJhZGlvTGVuZ3RoID09IHVuZGVmaW5lZCkNCgkJaWYocmFkaW9PYmouY2hlY2tlZCkNCgkJCXJldHVybiByYWRpb09iai52YWx1ZTsNCgkJZWxzZQ0KCQkJcmV0dXJuICIiOw0KCWZvcih2YXIgaSA9IDA7IGkgPCByYWRpb0xlbmd0aDsgaSsrKSB7DQoJCWlmKHJhZGlvT2JqW2ldLmNoZWNrZWQpIHsNCgkJCXJldHVybiByYWRpb09ialtpXS52YWx1ZTsNCgkJfQ0KCX0NCglyZXR1cm4gIiI7DQp9DQoNCmZ1bmN0aW9uIHNldENoZWNrZWRWYWx1ZShyYWRpb09iaiwgbmV3VmFsdWUpDQp7DQoJaWYoIXJhZGlvT2JqKQ0KCQlyZXR1cm47DQoJdmFyIHJhZGlvTGVuZ3RoID0gcmFkaW9PYmoubGVuZ3RoOw0KCWlmKHJhZGlvTGVuZ3RoID09IHVuZGVmaW5lZCkgew0KCQlyYWRpb09iai5jaGVja2VkID0gKHJhZGlvT2JqLnZhbHVlID09IG5ld1ZhbHVlLnRvU3RyaW5nKCkpOw0KCQlyZXR1cm47DQoJfQ0KCWZvcih2YXIgaSA9IDA7IGkgPCByYWRpb0xlbmd0aDsgaSsrKSB7DQoJCXJhZGlvT2JqW2ldLmNoZWNrZWQgPSBmYWxzZTsNCgkJaWYocmFkaW9PYmpbaV0udmFsdWUgPT0gbmV3VmFsdWUudG9TdHJpbmcoKSkgew0KCQkJcmFkaW9PYmpbaV0uY2hlY2tlZCA9IHRydWU7DQoJCX0NCgl9DQp9DQoNCmZ1bmN0aW9uIHNldENsaWVudE5hbWUoY2xpZW50TmFtZU9iamVjdCkgew0KCW5ldyBBamF4LlJlcXVlc3QoJ0dldENsaWVudE5hbWUubXdzJywgew0KCQltZXRob2Q6ICdnZXQnLA0KCQlvblN1Y2Nlc3M6IGZ1bmN0aW9uKHRyYW5zcG9ydCl7DQoJCQl2YXIganNvbiA9IHRyYW5zcG9ydC5yZXNwb25zZVRleHQuZXZhbEpTT04oKTsNCgkJCWNsaWVudE5hbWVPYmplY3QudXBkYXRlKGpzb24uY2xpZW50TmFtZSk7DQoJCX0NCgl9KTsNCn0NCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <TcpPackets>
          <PacketInfo time="517318218" offset="0" length="259" />
          <PacketInfo time="517318265" offset="259" length="1018" />
        </TcpPackets>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="121" hostname="banking.megasol.se" path="/images/menubottom.gif" url="http://banking.megasol.se/images/menubottom.gif" ip="62.109.53.196" port="80" connectionId="12" origin="HTML" frame="1" startDateTime="2019-01-03T14:43:15.154+05:30" startTime="517318031" endTime="517318234">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="Host" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YmFua2luZy5tZWdhc29sLnNl</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzcxLjAuMzU3OC45OCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aW1hZ2Uvd2VicCxpbWFnZS9hcG5nLGltYWdlLyosKi8qO3E9MC44</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cDovL2JhbmtpbmcubWVnYXNvbC5zZS9sb2dpbi5td3M=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cookie" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y29ybmljaGVuZXRfRk5CTD1BQkQ5N0JGMC04ODE0LTQ2NzAtQUVGQy0yNTk2QjUyRDA1Qzg7IElkbGVUaW1lPTkwMA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIC9pbWFnZXMvbWVudWJvdHRvbS5naWYgSFRUUC8xLjENCkhvc3Q6IGJhbmtpbmcubWVnYXNvbC5zZQ0KQ29ubmVjdGlvbjoga2VlcC1hbGl2ZQ0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzcxLjAuMzU3OC45OCBTYWZhcmkvNTM3LjM2DQpBY2NlcHQ6IGltYWdlL3dlYnAsaW1hZ2UvYXBuZyxpbWFnZS8qLCovKjtxPTAuOA0KUmVmZXJlcjogaHR0cDovL2JhbmtpbmcubWVnYXNvbC5zZS9sb2dpbi5td3MNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUyxlbjtxPTAuOQ0KQ29va2llOiBjb3JuaWNoZW5ldF9GTkJMPUFCRDk3QkYwLTg4MTQtNDY3MC1BRUZDLTI1OTZCNTJEMDVDODsgSWRsZVRpbWU9OTAwDQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="cornichenet_FNBL" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>QUJEOTdCRjAtODgxNC00NjcwLUFFRkMtMjU5NkI1MkQwNUM4</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="IdleTime" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>OTAw</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>64</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Content-Type" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aW1hZ2UvZ2lm</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Last-Modified" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAyOCBKdW4gMjAxOCAxOToyNDozNiBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ETag" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IjA3MjU2YTYxNWZkNDE6MCI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Server" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TWljcm9zb2Z0LUlJUy84LjU=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Powered-By" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QVNQLk5FVA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAwMyBKYW4gMjAxOSAwOToxMDo0MiBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NjQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IGltYWdlL2dpZg0KTGFzdC1Nb2RpZmllZDogVGh1LCAyOCBKdW4gMjAxOCAxOToyNDozNiBHTVQNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpFVGFnOiAiMDcyNTZhNjE1ZmQ0MTowIg0KU2VydmVyOiBNaWNyb3NvZnQtSUlTLzguNQ0KWC1Qb3dlcmVkLUJ5OiBBU1AuTkVUDQpEYXRlOiBUaHUsIDAzIEphbiAyMDE5IDA5OjEwOjQyIEdNVA0KQ29udGVudC1MZW5ndGg6IDY0DQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0lGODlhaQAGAIAAAO/v7wAAACH5BAAAAAAALAAAAABpAAYAAAIXhI+py+0Po5y02ouz3rz7D4biSJbmWQAAOw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <TcpPackets>
          <PacketInfo time="517318234" offset="0" length="308" />
        </TcpPackets>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="123" hostname="banking.megasol.se" path="/js/menu.js" url="http://banking.megasol.se/js/menu.js" ip="62.109.53.196" port="80" connectionId="15" origin="HTML" frame="1" startDateTime="2019-01-03T14:43:15.239+05:30" startTime="517317875" endTime="517318250">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="Host" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YmFua2luZy5tZWdhc29sLnNl</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzcxLjAuMzU3OC45OCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cDovL2JhbmtpbmcubWVnYXNvbC5zZS9sb2dpbi5td3M=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cookie" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y29ybmljaGVuZXRfRk5CTD1BQkQ5N0JGMC04ODE0LTQ2NzAtQUVGQy0yNTk2QjUyRDA1Qzg7IElkbGVUaW1lPTkwMA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIC9qcy9tZW51LmpzIEhUVFAvMS4xDQpIb3N0OiBiYW5raW5nLm1lZ2Fzb2wuc2UNCkNvbm5lY3Rpb246IGtlZXAtYWxpdmUNClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS83MS4wLjM1NzguOTggU2FmYXJpLzUzNy4zNg0KQWNjZXB0OiAqLyoNClJlZmVyZXI6IGh0dHA6Ly9iYW5raW5nLm1lZ2Fzb2wuc2UvbG9naW4ubXdzDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjkNCkNvb2tpZTogY29ybmljaGVuZXRfRk5CTD1BQkQ5N0JGMC04ODE0LTQ2NzAtQUVGQy0yNTk2QjUyRDA1Qzg7IElkbGVUaW1lPTkwMA0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="cornichenet_FNBL" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>QUJEOTdCRjAtODgxNC00NjcwLUFFRkMtMjU5NkI1MkQwNUM4</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="IdleTime" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>OTAw</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>1278</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Content-Type" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Last-Modified" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAyOCBKdW4gMjAxOCAxOToyNDozNiBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ETag" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IjA3MjU2YTYxNWZkNDE6MCI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Server" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TWljcm9zb2Z0LUlJUy84LjU=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Powered-By" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QVNQLk5FVA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAwMyBKYW4gMjAxOSAwOToxMDo0MiBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTI3OA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2phdmFzY3JpcHQNCkxhc3QtTW9kaWZpZWQ6IFRodSwgMjggSnVuIDIwMTggMTk6MjQ6MzYgR01UDQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KRVRhZzogIjA3MjU2YTYxNWZkNDE6MCINClNlcnZlcjogTWljcm9zb2Z0LUlJUy84LjUNClgtUG93ZXJlZC1CeTogQVNQLk5FVA0KRGF0ZTogVGh1LCAwMyBKYW4gMjAxOSAwOToxMDo0MiBHTVQNCkNvbnRlbnQtTGVuZ3RoOiAxMjc4DQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ly8gSmF2YVNjcmlwdCBEb2N1bWVudA0KZnVuY3Rpb24gc2VsZWN0SGVhZGluZyhhY3RpdmVoZWFkaW5nKQ0Kew0KCS8vIE5vdGlmeSB0aGUgc2VydmVyIHRoYXQgYSBuZXcgaGVhZGluZyBpcyBhY3RpdmUhDQoJbmV3IEFqYXguUmVxdWVzdCgnc2V0aGVhZGluZy5td3MnLCB7DQogIAltZXRob2Q6ICdnZXQnLA0KCSAgcGFyYW1ldGVyczoge2hlYWRpbmc6IGFjdGl2ZWhlYWRpbmd9DQogIH0pOw0KDQoJdmFyIGhlYWRpbmdzID0gMjANCgl2YXIgZGlzcGxheSA9ICcnDQoNCgkvLyBMb29wIHRocm91Z2ggYWxsIGhlYWRpbmdzDQoJZm9yIChoZWFkaW5nPTE7IGhlYWRpbmc8PWhlYWRpbmdzOyBoZWFkaW5nKyspew0KCQlpZiAoaGVhZGluZyA9PSBhY3RpdmVoZWFkaW5nKQ0KCQkJZGlzcGxheSA9ICcnDQoJCWVsc2UNCgkJCWRpc3BsYXkgPSAnbm9uZScNCgkJCQ0KCQlvYmogPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVhZGluZ18nICsgaGVhZGluZyk7DQoJCWlmKG9iaiAhPSBudWxsKQ0KCQkJb2JqLnN0eWxlLmRpc3BsYXkgPSBkaXNwbGF5Ow0KCX0NCn0NCg0KZnVuY3Rpb24gc2VsZWN0SGVhZGluZ192MShhY3RpdmVoZWFkaW5nKQ0Kew0KCS8vIE5vdGlmeSB0aGUgc2VydmVyIHRoYXQgYSBuZXcgaGVhZGluZyBpcyBhY3RpdmUhDQoJbmV3IEFqYXguUmVxdWVzdCgnc2V0aGVhZGluZy5td3MnLCB7DQogIAltZXRob2Q6ICdnZXQnLA0KCSAgcGFyYW1ldGVyczoge2hlYWRpbmc6IGFjdGl2ZWhlYWRpbmd9DQogIH0pOw0KDQoJdmFyIGhlYWRpbmdzID0gMjANCgl2YXIgcm93cyA9IDIwDQoJdmFyIGRpc3BsYXkgPSAnJw0KDQoJLy8gTG9vcCB0aHJvdWdoIGFsbCBoZWFkaW5ncw0KCWZvciAoaGVhZGluZz0xOyBoZWFkaW5nPD1oZWFkaW5nczsgaGVhZGluZysrKXsNCgkJaWYgKGhlYWRpbmcgPT0gYWN0aXZlaGVhZGluZykNCgkJCWRpc3BsYXkgPSAnJw0KCQllbHNlDQoJCQlkaXNwbGF5ID0gJ25vbmUnDQoJCQkNCgkJZm9yIChyb3c9MTsgcm93PD1yb3dzOyByb3crKyl7DQoJCQlvYmogPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibWVudV8iICsgaGVhZGluZyArICJzIiArIHJvdyApOw0KCQ0KCQkJLy8gVmVyaWZ5IHRoYXQgdGhlIG9iamVjdCByZWFsbHkgZXhpc3RzDQoJCQlpZiAob2JqICE9IG51bGwpIHsNCgkJCQkvLyBPYmogaXMgYSByb3cgc28NCgkJCQlmb3IgKGkgPSAwOyBpIDwgb2JqLmNlbGxzLmxlbmd0aDsgaSsrKQ0KCQkJCXsNCgkJCQkJb2JqLnN0eWxlLmRpc3BsYXk9ZGlzcGxheTsNCgkJCQl9DQoJCQl9DQoJCX0NCgl9DQp9</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <TcpPackets>
          <PacketInfo time="517318234" offset="0" length="1537" />
        </TcpPackets>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="125" hostname="banking.megasol.se" path="/js/prototype.js" url="http://banking.megasol.se/js/prototype.js" ip="62.109.53.196" port="80" connectionId="16" origin="HTML" frame="1" startDateTime="2019-01-03T14:43:15.292+05:30" startTime="517317875" endTime="517318265">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="Host" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YmFua2luZy5tZWdhc29sLnNl</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzcxLjAuMzU3OC45OCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cDovL2JhbmtpbmcubWVnYXNvbC5zZS9sb2dpbi5td3M=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cookie" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y29ybmljaGVuZXRfRk5CTD1BQkQ5N0JGMC04ODE0LTQ2NzAtQUVGQy0yNTk2QjUyRDA1Qzg7IElkbGVUaW1lPTkwMA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIC9qcy9wcm90b3R5cGUuanMgSFRUUC8xLjENCkhvc3Q6IGJhbmtpbmcubWVnYXNvbC5zZQ0KQ29ubmVjdGlvbjoga2VlcC1hbGl2ZQ0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzcxLjAuMzU3OC45OCBTYWZhcmkvNTM3LjM2DQpBY2NlcHQ6ICovKg0KUmVmZXJlcjogaHR0cDovL2JhbmtpbmcubWVnYXNvbC5zZS9sb2dpbi5td3MNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUyxlbjtxPTAuOQ0KQ29va2llOiBjb3JuaWNoZW5ldF9GTkJMPUFCRDk3QkYwLTg4MTQtNDY3MC1BRUZDLTI1OTZCNTJEMDVDODsgSWRsZVRpbWU9OTAwDQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="cornichenet_FNBL" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>QUJEOTdCRjAtODgxNC00NjcwLUFFRkMtMjU5NkI1MkQwNUM4</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="IdleTime" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>OTAw</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>199803</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Content-Type" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Last-Modified" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAyOCBKdW4gMjAxOCAxOToyNDozNiBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ETag" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IjA3MjU2YTYxNWZkNDE6MCI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Server" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TWljcm9zb2Z0LUlJUy84LjU=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Powered-By" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QVNQLk5FVA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAwMyBKYW4gMjAxOSAwOToxMDo0MiBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTk5ODAz</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2phdmFzY3JpcHQNCkxhc3QtTW9kaWZpZWQ6IFRodSwgMjggSnVuIDIwMTggMTk6MjQ6MzYgR01UDQpBY2NlcHQtUmFuZ2VzOiBieXRlcw0KRVRhZzogIjA3MjU2YTYxNWZkNDE6MCINClNlcnZlcjogTWljcm9zb2Z0LUlJUy84LjUNClgtUG93ZXJlZC1CeTogQVNQLk5FVA0KRGF0ZTogVGh1LCAwMyBKYW4gMjAxOSAwOToxMDo0MiBHTVQNCkNvbnRlbnQtTGVuZ3RoOiAxOTk4MDMNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>LyogIFByb3RvdHlwZSBKYXZhU2NyaXB0IGZyYW1ld29yaywgdmVyc2lvbiAxLjcuMwogKiAgKGMpIDIwMDUtMjAxMCBTYW0gU3RlcGhlbnNvbgogKgogKiAgUHJvdG90eXBlIGlzIGZyZWVseSBkaXN0cmlidXRhYmxlIHVuZGVyIHRoZSB0ZXJtcyBvZiBhbiBNSVQtc3R5bGUgbGljZW5zZS4KICogIEZvciBkZXRhaWxzLCBzZWUgdGhlIFByb3RvdHlwZSB3ZWIgc2l0ZTogaHR0cDovL3d3dy5wcm90b3R5cGVqcy5vcmcvCiAqCiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwoKdmFyIFByb3RvdHlwZSA9IHsKCiAgVmVyc2lvbjogJzEuNy4zJywKCiAgQnJvd3NlcjogKGZ1bmN0aW9uKCl7CiAgICB2YXIgdWEgPSBuYXZpZ2F0b3IudXNlckFnZW50OwogICAgdmFyIGlzT3BlcmEgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwod2luZG93Lm9wZXJhKSA9PSAnW29iamVjdCBPcGVyYV0nOwogICAgcmV0dXJuIHsKICAgICAgSUU6ICAgICAgICAgICAgICEhd2luZG93LmF0dGFjaEV2ZW50ICYmICFpc09wZXJhLAogICAgICBPcGVyYTogICAgICAgICAgaXNPcGVyYSwKICAgICAgV2ViS2l0OiAgICAgICAgIHVhLmluZGV4T2YoJ0FwcGxlV2ViS2l0LycpID4gLTEsCiAgICAgIEdlY2tvOiAgICAgICAgICB1YS5pbmRleE9mKCdHZWNrbycpID4gLTEgJiYgdWEuaW5kZXhPZignS0hUTUwnKSA9PT0gLTEsCiAgICAgIE1vYmlsZVNhZmFyaTogICAvQXBwbGUuKk1vYmlsZS8udGVzdCh1YSkKICAgIH0KICB9KSgpLAoKICBCcm93c2VyRmVhdHVyZXM6IHsKICAgIFhQYXRoOiAhIWRvY3VtZW50LmV2YWx1YXRlLAoKICAgIFNlbGVjdG9yc0FQSTogISFkb2N1bWVudC5xdWVyeVNlbGVjdG9yLAoKICAgIEVsZW1lbnRFeHRlbnNpb25zOiAoZnVuY3Rpb24oKSB7CiAgICAgIHZhciBjb25zdHJ1Y3RvciA9IHdpbmRvdy5FbGVtZW50IHx8IHdpbmRvdy5IVE1MRWxlbWVudDsKICAgICAgcmV0dXJuICEhKGNvbnN0cnVjdG9yICYmIGNvbnN0cnVjdG9yLnByb3RvdHlwZSk7CiAgICB9KSgpLAogICAgU3BlY2lmaWNFbGVtZW50RXh0ZW5zaW9uczogKGZ1bmN0aW9uKCkgewogICAgICBpZiAodHlwZW9mIHdpbmRvdy5IVE1MRGl2RWxlbWVudCAhPT0gJ3VuZGVmaW5lZCcpCiAgICAgICAgcmV0dXJuIHRydWU7CgogICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksCiAgICAgICAgICBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9ybScpLAogICAgICAgICAgaXNTdXBwb3J0ZWQgPSBmYWxzZTsKCiAgICAgIGlmIChkaXZbJ19fcHJvdG9fXyddICYmIChkaXZbJ19fcHJvdG9fXyddICE9PSBmb3JtWydfX3Byb3RvX18nXSkpIHsKICAgICAgICBpc1N1cHBvcnRlZCA9IHRydWU7CiAgICAgIH0KCiAgICAgIGRpdiA9IGZvcm0gPSBudWxsOwoKICAgICAgcmV0dXJuIGlzU3VwcG9ydGVkOwogICAgfSkoKQogIH0sCgogIFNjcmlwdEZyYWdtZW50OiAnPHNjcmlwdFtePl0qPihbXFxTXFxzXSo/KTxcL3NjcmlwdFxccyo+JywKICBKU09ORmlsdGVyOiAvXlwvXCotc2VjdXJlLShbXHNcU10qKVwqXC9ccyokLywKCiAgZW1wdHlGdW5jdGlvbjogZnVuY3Rpb24oKSB7IH0sCgogIEs6IGZ1bmN0aW9uKHgpIHsgcmV0dXJuIHggfQp9OwoKaWYgKFByb3RvdHlwZS5Ccm93c2VyLk1vYmlsZVNhZmFyaSkKICBQcm90b3R5cGUuQnJvd3NlckZlYXR1cmVzLlNwZWNpZmljRWxlbWVudEV4dGVuc2lvbnMgPSBmYWxzZTsKLyogQmFzZWQgb24gQWxleCBBcm5lbGwncyBpbmhlcml0YW5jZSBpbXBsZW1lbnRhdGlvbi4gKi8KCnZhciBDbGFzcyA9IChmdW5jdGlvbigpIHsKCiAgdmFyIElTX0RPTlRFTlVNX0JVR0dZID0gKGZ1bmN0aW9uKCl7CiAgICBmb3IgKHZhciBwIGluIHsgdG9TdHJpbmc6IDEgfSkgewogICAgICBpZiAocCA9PT0gJ3RvU3RyaW5nJykgcmV0dXJuIGZhbHNlOwogICAgfQogICAgcmV0dXJuIHRydWU7CiAgfSkoKTsKCiAgZnVuY3Rpb24gc3ViY2xhc3MoKSB7fTsKICBmdW5jdGlvbiBjcmVhdGUoKSB7CiAgICB2YXIgcGFyZW50ID0gbnVsbCwgcHJvcGVydGllcyA9ICRBKGFyZ3VtZW50cyk7CiAgICBpZiAoT2JqZWN0LmlzRnVuY3Rpb24ocHJvcGVydGllc1swXSkpCiAgICAgIHBhcmVudCA9IHByb3BlcnRpZXMuc2hpZnQoKTsKCiAgICBmdW5jdGlvbiBrbGFzcygpIHsKICAgICAgdGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CgogICAgT2JqZWN0LmV4dGVuZChrbGFzcywgQ2xhc3MuTWV0aG9kcyk7CiAgICBrbGFzcy5zdXBlcmNsYXNzID0gcGFyZW50OwogICAga2xhc3Muc3ViY2xhc3NlcyA9IFtdOwoKICAgIGlmIChwYXJlbnQpIHsKICAgICAgc3ViY2xhc3MucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsKICAgICAga2xhc3MucHJvdG90eXBlID0gbmV3IHN1YmNsYXNzOwogICAgICBwYXJlbnQuc3ViY2xhc3Nlcy5wdXNoKGtsYXNzKTsKICAgIH0KCiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gcHJvcGVydGllcy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykKICAgICAga2xhc3MuYWRkTWV0aG9kcyhwcm9wZXJ0aWVzW2ldKTsKCiAgICBpZiAoIWtsYXNzLnByb3RvdHlwZS5pbml0aWFsaXplKQogICAgICBrbGFzcy5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IFByb3RvdHlwZS5lbXB0eUZ1bmN0aW9uOwoKICAgIGtsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGtsYXNzOwogICAgcmV0dXJuIGtsYXNzOwogIH0KCiAgZnVuY3Rpb24gYWRkTWV0aG9kcyhzb3VyY2UpIHsKICAgIHZhciBhbmNlc3RvciAgID0gdGhpcy5zdXBlcmNsYXNzICYmIHRoaXMuc3VwZXJjbGFzcy5wcm90b3R5cGUsCiAgICAgICAgcHJvcGVydGllcyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7CgogICAgaWYgKElTX0RPTlRFTlVNX0JVR0dZKSB7CiAgICAgIGlmIChzb3VyY2UudG9TdHJpbmcgIT0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZykKICAgICAgICBwcm9wZXJ0aWVzLnB1c2goInRvU3RyaW5nIik7CiAgICAgIGlmIChzb3VyY2UudmFsdWVPZiAhPSBPYmplY3QucHJvdG90eXBlLnZhbHVlT2YpCiAgICAgICAgcHJvcGVydGllcy5wdXNoKCJ2YWx1ZU9mIik7CiAgICB9CgogICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IHByb3BlcnRpZXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIHByb3BlcnR5ID0gcHJvcGVydGllc1tpXSwgdmFsdWUgPSBzb3VyY2VbcHJvcGVydHldOwogICAgICBpZiAoYW5jZXN0b3IgJiYgT2JqZWN0LmlzRnVuY3Rpb24odmFsdWUpICYmCiAgICAgICAgICB2YWx1ZS5hcmd1bWVudE5hbWVzKClbMF0gPT0gIiRzdXBlciIpIHsKICAgICAgICB2YXIgbWV0aG9kID0gdmFsdWU7CiAgICAgICAgdmFsdWUgPSAoZnVuY3Rpb24obSkgewogICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgeyByZXR1cm4gYW5jZXN0b3JbbV0uYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfTsKICAgICAgICB9KShwcm9wZXJ0eSkud3JhcChtZXRob2QpOwoKICAgICAgICB2YWx1ZS52YWx1ZU9mID0gKGZ1bmN0aW9uKG1ldGhvZCkgewogICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgeyByZXR1cm4gbWV0aG9kLnZhbHVlT2YuY2FsbChtZXRob2QpOyB9OwogICAgICAgIH0pKG1ldGhvZCk7CgogICAgICAgIHZhbHVlLnRvU3RyaW5nID0gKGZ1bmN0aW9uKG1ldGhvZCkgewogICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgeyByZXR1cm4gbWV0aG9kLnRvU3RyaW5nLmNhbGwobWV0aG9kKTsgfTsKICAgICAgICB9KShtZXRob2QpOwogICAgICB9CiAgICAgIHRoaXMucHJvdG90eXBlW3Byb3BlcnR5XSA9IHZhbHVlOwogICAgfQoKICAgIHJldHVybiB0aGlzOwogIH0KCiAgcmV0dXJuIHsKICAgIGNyZWF0ZTogY3JlYXRlLAogICAgTWV0aG9kczogewogICAgICBhZGRNZXRob2RzOiBhZGRNZXRob2RzCiAgICB9CiAgfTsKfSkoKTsKKGZ1bmN0aW9uKCkgewoKICB2YXIgX3RvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZywKICAgICAgX2hhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSwKICAgICAgTlVMTF9UWVBFID0gJ051bGwnLAogICAgICBVTkRFRklORURfVFlQRSA9ICdVbmRlZmluZWQnLAogICAgICBCT09MRUFOX1RZUEUgPSAnQm9vbGVhbicsCiAgICAgIE5VTUJFUl9UWVBFID0gJ051bWJlcicsCiAgICAgIFNUUklOR19UWVBFID0gJ1N0cmluZycsCiAgICAgIE9CSkVDVF9UWVBFID0gJ09iamVjdCcsCiAgICAgIEZVTkNUSU9OX0NMQVNTID0gJ1tvYmplY3QgRnVuY3Rpb25dJywKICAgICAgQk9PTEVBTl9DTEFTUyA9ICdbb2JqZWN0IEJvb2xlYW5dJywKICAgICAgTlVNQkVSX0NMQVNTID0gJ1tvYmplY3QgTnVtYmVyXScsCiAgICAgIFNUUklOR19DTEFTUyA9ICdbb2JqZWN0IFN0cmluZ10nLAogICAgICBBUlJBWV9DTEFTUyA9ICdbb2JqZWN0IEFycmF5XScsCiAgICAgIERBVEVfQ0xBU1MgPSAnW29iamVjdCBEYXRlXScsCiAgICAgIE5BVElWRV9KU09OX1NUUklOR0lGWV9TVVBQT1JUID0gd2luZG93LkpTT04gJiYKICAgICAgICB0eXBlb2YgSlNPTi5zdHJpbmdpZnkgPT09ICdmdW5jdGlvbicgJiYKICAgICAgICBKU09OLnN0cmluZ2lmeSgwKSA9PT0gJzAnICYmCiAgICAgICAgdHlwZW9mIEpTT04uc3RyaW5naWZ5KFByb3RvdHlwZS5LKSA9PT0gJ3VuZGVmaW5lZCc7CgoKCiAgdmFyIERPTlRfRU5VTVMgPSBbJ3RvU3RyaW5nJywgJ3RvTG9jYWxlU3RyaW5nJywgJ3ZhbHVlT2YnLAogICAnaGFzT3duUHJvcGVydHknLCAnaXNQcm90b3R5cGVPZicsICdwcm9wZXJ0eUlzRW51bWVyYWJsZScsICdjb25zdHJ1Y3RvciddOwoKICB2YXIgSVNfRE9OVEVOVU1fQlVHR1kgPSAoZnVuY3Rpb24oKXsKICAgIGZvciAodmFyIHAgaW4geyB0b1N0cmluZzogMSB9KSB7CiAgICAgIGlmIChwID09PSAndG9TdHJpbmcnKSByZXR1cm4gZmFsc2U7CiAgICB9CiAgICByZXR1cm4gdHJ1ZTsKICB9KSgpOwoKICBmdW5jdGlvbiBUeXBlKG8pIHsKICAgIHN3aXRjaChvKSB7CiAgICAgIGNhc2UgbnVsbDogcmV0dXJuIE5VTExfVFlQRTsKICAgICAgY2FzZSAodm9pZCAwKTogcmV0dXJuIFVOREVGSU5FRF9UWVBFOwogICAgfQogICAgdmFyIHR5cGUgPSB0eXBlb2YgbzsKICAgIHN3aXRjaCh0eXBlKSB7CiAgICAgIGNhc2UgJ2Jvb2xlYW4nOiByZXR1cm4gQk9PTEVBTl9UWVBFOwogICAgICBjYXNlICdudW1iZXInOiAgcmV0dXJuIE5VTUJFUl9UWVBFOwogICAgICBjYXNlICdzdHJpbmcnOiAgcmV0dXJuIFNUUklOR19UWVBFOwogICAgfQogICAgcmV0dXJuIE9CSkVDVF9UWVBFOwogIH0KCiAgZnVuY3Rpb24gZXh0ZW5kKGRlc3RpbmF0aW9uLCBzb3VyY2UpIHsKICAgIGZvciAodmFyIHByb3BlcnR5IGluIHNvdXJjZSkKICAgICAgZGVzdGluYXRpb25bcHJvcGVydHldID0gc291cmNlW3Byb3BlcnR5XTsKICAgIHJldHVybiBkZXN0aW5hdGlvbjsKICB9CgogIGZ1bmN0aW9uIGluc3BlY3Qob2JqZWN0KSB7CiAgICB0cnkgewogICAgICBpZiAoaXNVbmRlZmluZWQob2JqZWN0KSkgcmV0dXJuICd1bmRlZmluZWQnOwogICAgICBpZiAob2JqZWN0ID09PSBudWxsKSByZXR1cm4gJ251bGwnOwogICAgICByZXR1cm4gb2JqZWN0Lmluc3BlY3QgPyBvYmplY3QuaW5zcGVjdCgpIDogU3RyaW5nKG9iamVjdCk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIGlmIChlIGluc3RhbmNlb2YgUmFuZ2VFcnJvcikgcmV0dXJuICcuLi4nOwogICAgICB0aHJvdyBlOwogICAgfQogIH0KCiAgZnVuY3Rpb24gdG9KU09OKHZhbHVlKSB7CiAgICByZXR1cm4gU3RyKCcnLCB7ICcnOiB2YWx1ZSB9LCBbXSk7CiAgfQoKICBmdW5jdGlvbiBTdHIoa2V5LCBob2xkZXIsIHN0YWNrKSB7CiAgICB2YXIgdmFsdWUgPSBob2xkZXJba2V5XTsKICAgIGlmIChUeXBlKHZhbHVlKSA9PT0gT0JKRUNUX1RZUEUgJiYgdHlwZW9mIHZhbHVlLnRvSlNPTiA9PT0gJ2Z1bmN0aW9uJykgewogICAgICB2YWx1ZSA9IHZhbHVlLnRvSlNPTihrZXkpOwogICAgfQoKICAgIHZhciBfY2xhc3MgPSBfdG9TdHJpbmcuY2FsbCh2YWx1ZSk7CgogICAgc3dpdGNoIChfY2xhc3MpIHsKICAgICAgY2FzZSBOVU1CRVJfQ0xBU1M6CiAgICAgIGNhc2UgQk9PTEVBTl9DTEFTUzoKICAgICAgY2FzZSBTVFJJTkdfQ0xBU1M6CiAgICAgICAgdmFsdWUgPSB2YWx1ZS52YWx1ZU9mKCk7CiAgICB9CgogICAgc3dpdGNoICh2YWx1ZSkgewogICAgICBjYXNlIG51bGw6IHJldHVybiAnbnVsbCc7CiAgICAgIGNhc2UgdHJ1ZTogcmV0dXJuICd0cnVlJzsKICAgICAgY2FzZSBmYWxzZTogcmV0dXJuICdmYWxzZSc7CiAgICB9CgogICAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7CiAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgY2FzZSAnc3RyaW5nJzoKICAgICAgICByZXR1cm4gdmFsdWUuaW5zcGVjdCh0cnVlKTsKICAgICAgY2FzZSAnbnVtYmVyJzoKICAgICAgICByZXR1cm4gaXNGaW5pdGUodmFsdWUpID8gU3RyaW5nKHZhbHVlKSA6ICdudWxsJzsKICAgICAgY2FzZSAnb2JqZWN0JzoKCiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IHN0YWNrLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBpZiAoc3RhY2tbaV0gPT09IHZhbHVlKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkN5Y2xpYyByZWZlcmVuY2UgdG8gJyIgKyB2YWx1ZSArICInIGluIG9iamVjdCIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBzdGFjay5wdXNoKHZhbHVlKTsKCiAgICAgICAgdmFyIHBhcnRpYWwgPSBbXTsKICAgICAgICBpZiAoX2NsYXNzID09PSBBUlJBWV9DTEFTUykgewogICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IHZhbHVlLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHZhciBzdHIgPSBTdHIoaSwgdmFsdWUsIHN0YWNrKTsKICAgICAgICAgICAgcGFydGlhbC5wdXNoKHR5cGVvZiBzdHIgPT09ICd1bmRlZmluZWQnID8gJ251bGwnIDogc3RyKTsKICAgICAgICAgIH0KICAgICAgICAgIHBhcnRpYWwgPSAnWycgKyBwYXJ0aWFsLmpvaW4oJywnKSArICddJzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh2YWx1ZSk7CiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICAgICAgICB2YXIga2V5ID0ga2V5c1tpXSwgc3RyID0gU3RyKGtleSwgdmFsdWUsIHN0YWNrKTsKICAgICAgICAgICAgaWYgKHR5cGVvZiBzdHIgIT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgICAgIHBhcnRpYWwucHVzaChrZXkuaW5zcGVjdCh0cnVlKSsgJzonICsgc3RyKTsKICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHBhcnRpYWwgPSAneycgKyBwYXJ0aWFsLmpvaW4oJywnKSArICd9JzsKICAgICAgICB9CiAgICAgICAgc3RhY2sucG9wKCk7CiAgICAgICAgcmV0dXJuIHBhcnRpYWw7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBzdHJpbmdpZnkob2JqZWN0KSB7CiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkob2JqZWN0KTsKICB9CgogIGZ1bmN0aW9uIHRvUXVlcnlTdHJpbmcob2JqZWN0KSB7CiAgICByZXR1cm4gJEgob2JqZWN0KS50b1F1ZXJ5U3RyaW5nKCk7CiAgfQoKICBmdW5jdGlvbiB0b0hUTUwob2JqZWN0KSB7CiAgICByZXR1cm4gb2JqZWN0ICYmIG9iamVjdC50b0hUTUwgPyBvYmplY3QudG9IVE1MKCkgOiBTdHJpbmcuaW50ZXJwcmV0KG9iamVjdCk7CiAgfQoKICBmdW5jdGlvbiBrZXlzKG9iamVjdCkgewogICAgaWYgKFR5cGUob2JqZWN0KSAhPT0gT0JKRUNUX1RZUEUpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigpOyB9CiAgICB2YXIgcmVzdWx0cyA9IFtdOwogICAgZm9yICh2YXIgcHJvcGVydHkgaW4gb2JqZWN0KSB7CiAgICAgIGlmIChfaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KSkKICAgICAgICByZXN1bHRzLnB1c2gocHJvcGVydHkpOwogICAgfQoKICAgIGlmIChJU19ET05URU5VTV9CVUdHWSkgewogICAgICBmb3IgKHZhciBpID0gMDsgcHJvcGVydHkgPSBET05UX0VOVU1TW2ldOyBpKyspIHsKICAgICAgICBpZiAoX2hhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSkpCiAgICAgICAgICByZXN1bHRzLnB1c2gocHJvcGVydHkpOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHJlc3VsdHM7CiAgfQoKICBmdW5jdGlvbiB2YWx1ZXMob2JqZWN0KSB7CiAgICB2YXIgcmVzdWx0cyA9IFtdOwogICAgZm9yICh2YXIgcHJvcGVydHkgaW4gb2JqZWN0KQogICAgICByZXN1bHRzLnB1c2gob2JqZWN0W3Byb3BlcnR5XSk7CiAgICByZXR1cm4gcmVzdWx0czsKICB9CgogIGZ1bmN0aW9uIGNsb25lKG9iamVjdCkgewogICAgcmV0dXJuIGV4dGVuZCh7IH0sIG9iamVjdCk7CiAgfQoKICBmdW5jdGlvbiBpc0VsZW1lbnQob2JqZWN0KSB7CiAgICByZXR1cm4gISEob2JqZWN0ICYmIG9iamVjdC5ub2RlVHlwZSA9PSAxKTsKICB9CgogIGZ1bmN0aW9uIGlzQXJyYXkob2JqZWN0KSB7CiAgICByZXR1cm4gX3RvU3RyaW5nLmNhbGwob2JqZWN0KSA9PT0gQVJSQVlfQ0xBU1M7CiAgfQoKICB2YXIgaGFzTmF0aXZlSXNBcnJheSA9ICh0eXBlb2YgQXJyYXkuaXNBcnJheSA9PSAnZnVuY3Rpb24nKQogICAgJiYgQXJyYXkuaXNBcnJheShbXSkgJiYgIUFycmF5LmlzQXJyYXkoe30pOwoKICBpZiAoaGFzTmF0aXZlSXNBcnJheSkgewogICAgaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7CiAgfQoKICBmdW5jdGlvbiBpc0hhc2gob2JqZWN0KSB7CiAgICByZXR1cm4gb2JqZWN0IGluc3RhbmNlb2YgSGFzaDsKICB9CgogIGZ1bmN0aW9uIGlzRnVuY3Rpb24ob2JqZWN0KSB7CiAgICByZXR1cm4gX3RvU3RyaW5nLmNhbGwob2JqZWN0KSA9PT0gRlVOQ1RJT05fQ0xBU1M7CiAgfQoKICBmdW5jdGlvbiBpc1N0cmluZyhvYmplY3QpIHsKICAgIHJldHVybiBfdG9TdHJpbmcuY2FsbChvYmplY3QpID09PSBTVFJJTkdfQ0xBU1M7CiAgfQoKICBmdW5jdGlvbiBpc051bWJlcihvYmplY3QpIHsKICAgIHJldHVybiBfdG9TdHJpbmcuY2FsbChvYmplY3QpID09PSBOVU1CRVJfQ0xBU1M7CiAgfQoKICBmdW5jdGlvbiBpc0RhdGUob2JqZWN0KSB7CiAgICByZXR1cm4gX3RvU3RyaW5nLmNhbGwob2JqZWN0KSA9PT0gREFURV9DTEFTUzsKICB9CgogIGZ1bmN0aW9uIGlzVW5kZWZpbmVkKG9iamVjdCkgewogICAgcmV0dXJuIHR5cGVvZiBvYmplY3QgPT09ICJ1bmRlZmluZWQiOwogIH0KCiAgZXh0ZW5kKE9iamVjdCwgewogICAgZXh0ZW5kOiAgICAgICAgZXh0ZW5kLAogICAgaW5zcGVjdDogICAgICAgaW5zcGVjdCwKICAgIHRvSlNPTjogICAgICAgIE5BVElWRV9KU09OX1NUUklOR0lGWV9TVVBQT1JUID8gc3RyaW5naWZ5IDogdG9KU09OLAogICAgdG9RdWVyeVN0cmluZzogdG9RdWVyeVN0cmluZywKICAgIHRvSFRNTDogICAgICAgIHRvSFRNTCwKICAgIGtleXM6ICAgICAgICAgIE9iamVjdC5rZXlzIHx8IGtleXMsCiAgICB2YWx1ZXM6ICAgICAgICB2YWx1ZXMsCiAgICBjbG9uZTogICAgICAgICBjbG9uZSwKICAgIGlzRWxlbWVudDogICAgIGlzRWxlbWVudCwKICAgIGlzQXJyYXk6ICAgICAgIGlzQXJyYXksCiAgICBpc0hhc2g6ICAgICAgICBpc0hhc2gsCiAgICBpc0Z1bmN0aW9uOiAgICBpc0Z1bmN0aW9uLAogICAgaXNTdHJpbmc6ICAgICAgaXNTdHJpbmcsCiAgICBpc051bWJlcjogICAgICBpc051bWJlciwKICAgIGlzRGF0ZTogICAgICAgIGlzRGF0ZSwKICAgIGlzVW5kZWZpbmVkOiAgIGlzVW5kZWZpbmVkCiAgfSk7Cn0pKCk7Ck9iamVjdC5leHRlbmQoRnVuY3Rpb24ucHJvdG90eXBlLCAoZnVuY3Rpb24oKSB7CiAgdmFyIHNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlOwoKICBmdW5jdGlvbiB1cGRhdGUoYXJyYXksIGFyZ3MpIHsKICAgIHZhciBhcnJheUxlbmd0aCA9IGFycmF5Lmxlbmd0aCwgbGVuZ3RoID0gYXJncy5sZW5ndGg7CiAgICB3aGlsZSAobGVuZ3RoLS0pIGFycmF5W2FycmF5TGVuZ3RoICsgbGVuZ3RoXSA9IGFyZ3NbbGVuZ3RoXTsKICAgIHJldHVybiBhcnJheTsKICB9CgogIGZ1bmN0aW9uIG1lcmdlKGFycmF5LCBhcmdzKSB7CiAgICBhcnJheSA9IHNsaWNlLmNhbGwoYXJyYXksIDApOwogICAgcmV0dXJuIHVwZGF0ZShhcnJheSwgYXJncyk7CiAgfQoKICBmdW5jdGlvbiBhcmd1bWVudE5hbWVzKCkgewogICAgdmFyIG5hbWVzID0gdGhpcy50b1N0cmluZygpLm1hdGNoKC9eW1xzXChdKmZ1bmN0aW9uW14oXSpcKChbXildKilcKS8pWzFdCiAgICAgIC5yZXBsYWNlKC9cL1wvLio/W1xyXG5dfFwvXCooPzoufFtcclxuXSkqP1wqXC8vZywgJycpCiAgICAgIC5yZXBsYWNlKC9ccysvZywgJycpLnNwbGl0KCcsJyk7CiAgICByZXR1cm4gbmFtZXMubGVuZ3RoID09IDEgJiYgIW5hbWVzWzBdID8gW10gOiBuYW1lczsKICB9CgoKICBmdW5jdGlvbiBiaW5kKGNvbnRleHQpIHsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMiAmJiBPYmplY3QuaXNVbmRlZmluZWQoYXJndW1lbnRzWzBdKSkKICAgICAgcmV0dXJuIHRoaXM7CgogICAgaWYgKCFPYmplY3QuaXNGdW5jdGlvbih0aGlzKSkKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiVGhlIG9iamVjdCBpcyBub3QgY2FsbGFibGUuIik7CgogICAgdmFyIG5vcCA9IGZ1bmN0aW9uKCkge307CiAgICB2YXIgX19tZXRob2QgPSB0aGlzLCBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOwoKICAgIHZhciBib3VuZCA9IGZ1bmN0aW9uKCkgewogICAgICB2YXIgYSA9IG1lcmdlKGFyZ3MsIGFyZ3VtZW50cyk7CiAgICAgIHZhciBjID0gdGhpcyBpbnN0YW5jZW9mIGJvdW5kID8gdGhpcyA6IGNvbnRleHQ7CiAgICAgIHJldHVybiBfX21ldGhvZC5hcHBseShjLCBhKTsKICAgIH07CgogICAgbm9wLnByb3RvdHlwZSAgID0gdGhpcy5wcm90b3R5cGU7CiAgICBib3VuZC5wcm90b3R5cGUgPSBuZXcgbm9wKCk7CgogICAgcmV0dXJuIGJvdW5kOwogIH0KCiAgZnVuY3Rpb24gYmluZEFzRXZlbnRMaXN0ZW5lcihjb250ZXh0KSB7CiAgICB2YXIgX19tZXRob2QgPSB0aGlzLCBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOwogICAgcmV0dXJuIGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgIHZhciBhID0gdXBkYXRlKFtldmVudCB8fCB3aW5kb3cuZXZlbnRdLCBhcmdzKTsKICAgICAgcmV0dXJuIF9fbWV0aG9kLmFwcGx5KGNvbnRleHQsIGEpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gY3VycnkoKSB7CiAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiB0aGlzOwogICAgdmFyIF9fbWV0aG9kID0gdGhpcywgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTsKICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgdmFyIGEgPSBtZXJnZShhcmdzLCBhcmd1bWVudHMpOwogICAgICByZXR1cm4gX19tZXRob2QuYXBwbHkodGhpcywgYSk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBkZWxheSh0aW1lb3V0KSB7CiAgICB2YXIgX19tZXRob2QgPSB0aGlzLCBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOwogICAgdGltZW91dCA9IHRpbWVvdXQgKiAxMDAwOwogICAgcmV0dXJuIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gX19tZXRob2QuYXBwbHkoX19tZXRob2QsIGFyZ3MpOwogICAgfSwgdGltZW91dCk7CiAgfQoKICBmdW5jdGlvbiBkZWZlcigpIHsKICAgIHZhciBhcmdzID0gdXBkYXRlKFswLjAxXSwgYXJndW1lbnRzKTsKICAgIHJldHVybiB0aGlzLmRlbGF5LmFwcGx5KHRoaXMsIGFyZ3MpOwogIH0KCiAgZnVuY3Rpb24gd3JhcCh3cmFwcGVyKSB7CiAgICB2YXIgX19tZXRob2QgPSB0aGlzOwogICAgcmV0dXJuIGZ1bmN0aW9uKCkgewogICAgICB2YXIgYSA9IHVwZGF0ZShbX19tZXRob2QuYmluZCh0aGlzKV0sIGFyZ3VtZW50cyk7CiAgICAgIHJldHVybiB3cmFwcGVyLmFwcGx5KHRoaXMsIGEpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gbWV0aG9kaXplKCkgewogICAgaWYgKHRoaXMuX21ldGhvZGl6ZWQpIHJldHVybiB0aGlzLl9tZXRob2RpemVkOwogICAgdmFyIF9fbWV0aG9kID0gdGhpczsKICAgIHJldHVybiB0aGlzLl9tZXRob2RpemVkID0gZnVuY3Rpb24oKSB7CiAgICAgIHZhciBhID0gdXBkYXRlKFt0aGlzXSwgYXJndW1lbnRzKTsKICAgICAgcmV0dXJuIF9fbWV0aG9kLmFwcGx5KG51bGwsIGEpOwogICAgfTsKICB9CgogIHZhciBleHRlbnNpb25zID0gewogICAgYXJndW1lbnROYW1lczogICAgICAgYXJndW1lbnROYW1lcywKICAgIGJpbmRBc0V2ZW50TGlzdGVuZXI6IGJpbmRBc0V2ZW50TGlzdGVuZXIsCiAgICBjdXJyeTogICAgICAgICAgICAgICBjdXJyeSwKICAgIGRlbGF5OiAgICAgICAgICAgICAgIGRlbGF5LAogICAgZGVmZXI6ICAgICAgICAgICAgICAgZGVmZXIsCiAgICB3cmFwOiAgICAgICAgICAgICAgICB3cmFwLAogICAgbWV0aG9kaXplOiAgICAgICAgICAgbWV0aG9kaXplCiAgfTsKCiAgaWYgKCFGdW5jdGlvbi5wcm90b3R5cGUuYmluZCkKICAgIGV4dGVuc2lvbnMuYmluZCA9IGJpbmQ7CgogIHJldHVybiBleHRlbnNpb25zOwp9KSgpKTsKCgoKKGZ1bmN0aW9uKHByb3RvKSB7CgoKICBmdW5jdGlvbiB0b0lTT1N0cmluZygpIHsKICAgIHJldHVybiB0aGlzLmdldFVUQ0Z1bGxZZWFyKCkgKyAnLScgKwogICAgICAodGhpcy5nZXRVVENNb250aCgpICsgMSkudG9QYWRkZWRTdHJpbmcoMikgKyAnLScgKwogICAgICB0aGlzLmdldFVUQ0RhdGUoKS50b1BhZGRlZFN0cmluZygyKSArICdUJyArCiAgICAgIHRoaXMuZ2V0VVRDSG91cnMoKS50b1BhZGRlZFN0cmluZygyKSArICc6JyArCiAgICAgIHRoaXMuZ2V0VVRDTWludXRlcygpLnRvUGFkZGVkU3RyaW5nKDIpICsgJzonICsKICAgICAgdGhpcy5nZXRVVENTZWNvbmRzKCkudG9QYWRkZWRTdHJpbmcoMikgKyAnWic7CiAgfQoKCiAgZnVuY3Rpb24gdG9KU09OKCkgewogICAgcmV0dXJuIHRoaXMudG9JU09TdHJpbmcoKTsKICB9CgogIGlmICghcHJvdG8udG9JU09TdHJpbmcpIHByb3RvLnRvSVNPU3RyaW5nID0gdG9JU09TdHJpbmc7CiAgaWYgKCFwcm90by50b0pTT04pIHByb3RvLnRvSlNPTiA9IHRvSlNPTjsKCn0pKERhdGUucHJvdG90eXBlKTsKCgpSZWdFeHAucHJvdG90eXBlLm1hdGNoID0gUmVnRXhwLnByb3RvdHlwZS50ZXN0OwoKUmVnRXhwLmVzY2FwZSA9IGZ1bmN0aW9uKHN0cikgewogIHJldHVybiBTdHJpbmcoc3RyKS5yZXBsYWNlKC8oWy4qKz9ePSE6JHt9KCl8W1xdXC9cXF0pL2csICdcXCQxJyk7Cn07CnZhciBQZXJpb2RpY2FsRXhlY3V0ZXIgPSBDbGFzcy5jcmVhdGUoewogIGluaXRpYWxpemU6IGZ1bmN0aW9uKGNhbGxiYWNrLCBmcmVxdWVuY3kpIHsKICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjazsKICAgIHRoaXMuZnJlcXVlbmN5ID0gZnJlcXVlbmN5OwogICAgdGhpcy5jdXJyZW50bHlFeGVjdXRpbmcgPSBmYWxzZTsKCiAgICB0aGlzLnJlZ2lzdGVyQ2FsbGJhY2soKTsKICB9LAoKICByZWdpc3RlckNhbGxiYWNrOiBmdW5jdGlvbigpIHsKICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbCh0aGlzLm9uVGltZXJFdmVudC5iaW5kKHRoaXMpLCB0aGlzLmZyZXF1ZW5jeSAqIDEwMDApOwogIH0sCgogIGV4ZWN1dGU6IGZ1bmN0aW9uKCkgewogICAgdGhpcy5jYWxsYmFjayh0aGlzKTsKICB9LAoKICBzdG9wOiBmdW5jdGlvbigpIHsKICAgIGlmICghdGhpcy50aW1lcikgcmV0dXJuOwogICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTsKICAgIHRoaXMudGltZXIgPSBudWxsOwogIH0sCgogIG9uVGltZXJFdmVudDogZnVuY3Rpb24oKSB7CiAgICBpZiAoIXRoaXMuY3VycmVudGx5RXhlY3V0aW5nKSB7CiAgICAgIHRyeSB7CiAgICAgICAgdGhpcy5jdXJyZW50bHlFeGVjdXRpbmcgPSB0cnVlOwogICAgICAgIHRoaXMuZXhlY3V0ZSgpOwogICAgICAgIHRoaXMuY3VycmVudGx5RXhlY3V0aW5nID0gZmFsc2U7CiAgICAgIH0gY2F0Y2goZSkgewogICAgICAgIHRoaXMuY3VycmVudGx5RXhlY3V0aW5nID0gZmFsc2U7CiAgICAgICAgdGhyb3cgZTsKICAgICAgfQogICAgfQogIH0KfSk7Ck9iamVjdC5leHRlbmQoU3RyaW5nLCB7CiAgaW50ZXJwcmV0OiBmdW5jdGlvbih2YWx1ZSkgewogICAgcmV0dXJuIHZhbHVlID09IG51bGwgPyAnJyA6IFN0cmluZyh2YWx1ZSk7CiAgfSwKICBzcGVjaWFsQ2hhcjogewogICAgJ1xiJzogJ1xcYicsCiAgICAnXHQnOiAnXFx0JywKICAgICdcbic6ICdcXG4nLAogICAgJ1xmJzogJ1xcZicsCiAgICAnXHInOiAnXFxyJywKICAgICdcXCc6ICdcXFxcJwogIH0KfSk7CgpPYmplY3QuZXh0ZW5kKFN0cmluZy5wcm90b3R5cGUsIChmdW5jdGlvbigpIHsKICB2YXIgTkFUSVZFX0pTT05fUEFSU0VfU1VQUE9SVCA9IHdpbmRvdy5KU09OICYmCiAgICB0eXBlb2YgSlNPTi5wYXJzZSA9PT0gJ2Z1bmN0aW9uJyAmJgogICAgSlNPTi5wYXJzZSgneyJ0ZXN0IjogdHJ1ZX0nKS50ZXN0OwoKICBmdW5jdGlvbiBwcmVwYXJlUmVwbGFjZW1lbnQocmVwbGFjZW1lbnQpIHsKICAgIGlmIChPYmplY3QuaXNGdW5jdGlvbihyZXBsYWNlbWVudCkpIHJldHVybiByZXBsYWNlbWVudDsKICAgIHZhciB0ZW1wbGF0ZSA9IG5ldyBUZW1wbGF0ZShyZXBsYWNlbWVudCk7CiAgICByZXR1cm4gZnVuY3Rpb24obWF0Y2gpIHsgcmV0dXJuIHRlbXBsYXRlLmV2YWx1YXRlKG1hdGNoKSB9OwogIH0KCiAgZnVuY3Rpb24gaXNOb25FbXB0eVJlZ0V4cChyZWdleHApIHsKICAgIHJldHVybiByZWdleHAuc291cmNlICYmIHJlZ2V4cC5zb3VyY2UgIT09ICcoPzopJzsKICB9CgoKICBmdW5jdGlvbiBnc3ViKHBhdHRlcm4sIHJlcGxhY2VtZW50KSB7CiAgICB2YXIgcmVzdWx0ID0gJycsIHNvdXJjZSA9IHRoaXMsIG1hdGNoOwogICAgcmVwbGFjZW1lbnQgPSBwcmVwYXJlUmVwbGFjZW1lbnQocmVwbGFjZW1lbnQpOwoKICAgIGlmIChPYmplY3QuaXNTdHJpbmcocGF0dGVybikpCiAgICAgIHBhdHRlcm4gPSBSZWdFeHAuZXNjYXBlKHBhdHRlcm4pOwoKICAgIGlmICghKHBhdHRlcm4ubGVuZ3RoIHx8IGlzTm9uRW1wdHlSZWdFeHAocGF0dGVybikpKSB7CiAgICAgIHJlcGxhY2VtZW50ID0gcmVwbGFjZW1lbnQoJycpOwogICAgICByZXR1cm4gcmVwbGFjZW1lbnQgKyBzb3VyY2Uuc3BsaXQoJycpLmpvaW4ocmVwbGFjZW1lbnQpICsgcmVwbGFjZW1lbnQ7CiAgICB9CgogICAgd2hpbGUgKHNvdXJjZS5sZW5ndGggPiAwKSB7CiAgICAgIG1hdGNoID0gc291cmNlLm1hdGNoKHBhdHRlcm4pCiAgICAgIGlmIChtYXRjaCAmJiBtYXRjaFswXS5sZW5ndGggPiAwKSB7CiAgICAgICAgcmVzdWx0ICs9IHNvdXJjZS5zbGljZSgwLCBtYXRjaC5pbmRleCk7CiAgICAgICAgcmVzdWx0ICs9IFN0cmluZy5pbnRlcnByZXQocmVwbGFjZW1lbnQobWF0Y2gpKTsKICAgICAgICBzb3VyY2UgID0gc291cmNlLnNsaWNlKG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXN1bHQgKz0gc291cmNlLCBzb3VyY2UgPSAnJzsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHJlc3VsdDsKICB9CgogIGZ1bmN0aW9uIHN1YihwYXR0ZXJuLCByZXBsYWNlbWVudCwgY291bnQpIHsKICAgIHJlcGxhY2VtZW50ID0gcHJlcGFyZVJlcGxhY2VtZW50KHJlcGxhY2VtZW50KTsKICAgIGNvdW50ID0gT2JqZWN0LmlzVW5kZWZpbmVkKGNvdW50KSA/IDEgOiBjb3VudDsKCiAgICByZXR1cm4gdGhpcy5nc3ViKHBhdHRlcm4sIGZ1bmN0aW9uKG1hdGNoKSB7CiAgICAgIGlmICgtLWNvdW50IDwgMCkgcmV0dXJuIG1hdGNoWzBdOwogICAgICByZXR1cm4gcmVwbGFjZW1lbnQobWF0Y2gpOwogICAgfSk7CiAgfQoKICBmdW5jdGlvbiBzY2FuKHBhdHRlcm4sIGl0ZXJhdG9yKSB7CiAgICB0aGlzLmdzdWIocGF0dGVybiwgaXRlcmF0b3IpOwogICAgcmV0dXJuIFN0cmluZyh0aGlzKTsKICB9CgogIGZ1bmN0aW9uIHRydW5jYXRlKGxlbmd0aCwgdHJ1bmNhdGlvbikgewogICAgbGVuZ3RoID0gbGVuZ3RoIHx8IDMwOwogICAgdHJ1bmNhdGlvbiA9IE9iamVjdC5pc1VuZGVmaW5lZCh0cnVuY2F0aW9uKSA/ICcuLi4nIDogdHJ1bmNhdGlvbjsKICAgIHJldHVybiB0aGlzLmxlbmd0aCA+IGxlbmd0aCA/CiAgICAgIHRoaXMuc2xpY2UoMCwgbGVuZ3RoIC0gdHJ1bmNhdGlvbi5sZW5ndGgpICsgdHJ1bmNhdGlvbiA6IFN0cmluZyh0aGlzKTsKICB9CgogIGZ1bmN0aW9uIHN0cmlwKCkgewogICAgcmV0dXJuIHRoaXMucmVwbGFjZSgvXlxzKy8sICcnKS5yZXBsYWNlKC9ccyskLywgJycpOwogIH0KCiAgZnVuY3Rpb24gc3RyaXBUYWdzKCkgewogICAgcmV0dXJuIHRoaXMucmVwbGFjZSgvPFx3KyhccysoIlteIl0qInwnW14nXSonfFtePl0pKyk/KFwvKT8+fDxcL1x3Kz4vZ2ksICcnKTsKICB9CgogIGZ1bmN0aW9uIHN0cmlwU2NyaXB0cygpIHsKICAgIHJldHVybiB0aGlzLnJlcGxhY2UobmV3IFJlZ0V4cChQcm90b3R5cGUuU2NyaXB0RnJhZ21lbnQsICdpbWcnKSwgJycpOwogIH0KCiAgZnVuY3Rpb24gZXh0cmFjdFNjcmlwdHMoKSB7CiAgICB2YXIgbWF0Y2hBbGwgPSBuZXcgUmVnRXhwKFByb3RvdHlwZS5TY3JpcHRGcmFnbWVudCwgJ2ltZycpLAogICAgICAgIG1hdGNoT25lID0gbmV3IFJlZ0V4cChQcm90b3R5cGUuU2NyaXB0RnJhZ21lbnQsICdpbScpOwogICAgcmV0dXJuICh0aGlzLm1hdGNoKG1hdGNoQWxsKSB8fCBbXSkubWFwKGZ1bmN0aW9uKHNjcmlwdFRhZykgewogICAgICByZXR1cm4gKHNjcmlwdFRhZy5tYXRjaChtYXRjaE9uZSkgfHwgWycnLCAnJ10pWzFdOwogICAgfSk7CiAgfQoKICBmdW5jdGlvbiBldmFsU2NyaXB0cygpIHsKICAgIHJldHVybiB0aGlzLmV4dHJhY3RTY3JpcHRzKCkubWFwKGZ1bmN0aW9uKHNjcmlwdCkgeyByZXR1cm4gZXZhbChzY3JpcHQpOyB9KTsKICB9CgogIGZ1bmN0aW9uIGVzY2FwZUhUTUwoKSB7CiAgICByZXR1cm4gdGhpcy5yZXBsYWNlKC8mL2csJyZhbXA7JykucmVwbGFjZSgvPC9nLCcmbHQ7JykucmVwbGFjZSgvPi9nLCcmZ3Q7Jyk7CiAgfQoKICBmdW5jdGlvbiB1bmVzY2FwZUhUTUwoKSB7CiAgICByZXR1cm4gdGhpcy5zdHJpcFRhZ3MoKS5yZXBsYWNlKC8mbHQ7L2csJzwnKS5yZXBsYWNlKC8mZ3Q7L2csJz4nKS5yZXBsYWNlKC8mYW1wOy9nLCcmJyk7CiAgfQoKCiAgZnVuY3Rpb24gdG9RdWVyeVBhcmFtcyhzZXBhcmF0b3IpIHsKICAgIHZhciBtYXRjaCA9IHRoaXMuc3RyaXAoKS5tYXRjaCgvKFtePyNdKikoIy4qKT8kLyk7CiAgICBpZiAoIW1hdGNoKSByZXR1cm4geyB9OwoKICAgIHJldHVybiBtYXRjaFsxXS5zcGxpdChzZXBhcmF0b3IgfHwgJyYnKS5pbmplY3QoeyB9LCBmdW5jdGlvbihoYXNoLCBwYWlyKSB7CiAgICAgIGlmICgocGFpciA9IHBhaXIuc3BsaXQoJz0nKSlbMF0pIHsKICAgICAgICB2YXIga2V5ID0gZGVjb2RlVVJJQ29tcG9uZW50KHBhaXIuc2hpZnQoKSksCiAgICAgICAgICAgIHZhbHVlID0gcGFpci5sZW5ndGggPiAxID8gcGFpci5qb2luKCc9JykgOiBwYWlyWzBdOwoKICAgICAgICBpZiAodmFsdWUgIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICB2YWx1ZSA9IHZhbHVlLmdzdWIoJysnLCAnICcpOwogICAgICAgICAgdmFsdWUgPSBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGtleSBpbiBoYXNoKSB7CiAgICAgICAgICBpZiAoIU9iamVjdC5pc0FycmF5KGhhc2hba2V5XSkpIGhhc2hba2V5XSA9IFtoYXNoW2tleV1dOwogICAgICAgICAgaGFzaFtrZXldLnB1c2godmFsdWUpOwogICAgICAgIH0KICAgICAgICBlbHNlIGhhc2hba2V5XSA9IHZhbHVlOwogICAgICB9CiAgICAgIHJldHVybiBoYXNoOwogICAgfSk7CiAgfQoKICBmdW5jdGlvbiB0b0FycmF5KCkgewogICAgcmV0dXJuIHRoaXMuc3BsaXQoJycpOwogIH0KCiAgZnVuY3Rpb24gc3VjYygpIHsKICAgIHJldHVybiB0aGlzLnNsaWNlKDAsIHRoaXMubGVuZ3RoIC0gMSkgKwogICAgICBTdHJpbmcuZnJvbUNoYXJDb2RlKHRoaXMuY2hhckNvZGVBdCh0aGlzLmxlbmd0aCAtIDEpICsgMSk7CiAgfQoKICBmdW5jdGlvbiB0aW1lcyhjb3VudCkgewogICAgcmV0dXJuIGNvdW50IDwgMSA/ICcnIDogbmV3IEFycmF5KGNvdW50ICsgMSkuam9pbih0aGlzKTsKICB9CgogIGZ1bmN0aW9uIGNhbWVsaXplKCkgewogICAgcmV0dXJuIHRoaXMucmVwbGFjZSgvLSsoLik/L2csIGZ1bmN0aW9uKG1hdGNoLCBjaHIpIHsKICAgICAgcmV0dXJuIGNociA/IGNoci50b1VwcGVyQ2FzZSgpIDogJyc7CiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIGNhcGl0YWxpemUoKSB7CiAgICByZXR1cm4gdGhpcy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHRoaXMuc3Vic3RyaW5nKDEpLnRvTG93ZXJDYXNlKCk7CiAgfQoKICBmdW5jdGlvbiB1bmRlcnNjb3JlKCkgewogICAgcmV0dXJuIHRoaXMucmVwbGFjZSgvOjovZywgJy8nKQogICAgICAgICAgICAgICAucmVwbGFjZSgvKFtBLVpdKykoW0EtWl1bYS16XSkvZywgJyQxXyQyJykKICAgICAgICAgICAgICAgLnJlcGxhY2UoLyhbYS16XGRdKShbQS1aXSkvZywgJyQxXyQyJykKICAgICAgICAgICAgICAgLnJlcGxhY2UoLy0vZywgJ18nKQogICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKTsKICB9CgogIGZ1bmN0aW9uIGRhc2hlcml6ZSgpIHsKICAgIHJldHVybiB0aGlzLnJlcGxhY2UoL18vZywgJy0nKTsKICB9CgogIGZ1bmN0aW9uIGluc3BlY3QodXNlRG91YmxlUXVvdGVzKSB7CiAgICB2YXIgZXNjYXBlZFN0cmluZyA9IHRoaXMucmVwbGFjZSgvW1x4MDAtXHgxZlxcXS9nLCBmdW5jdGlvbihjaGFyYWN0ZXIpIHsKICAgICAgaWYgKGNoYXJhY3RlciBpbiBTdHJpbmcuc3BlY2lhbENoYXIpIHsKICAgICAgICByZXR1cm4gU3RyaW5nLnNwZWNpYWxDaGFyW2NoYXJhY3Rlcl07CiAgICAgIH0KICAgICAgcmV0dXJuICdcXHUwMCcgKyBjaGFyYWN0ZXIuY2hhckNvZGVBdCgpLnRvUGFkZGVkU3RyaW5nKDIsIDE2KTsKICAgIH0pOwogICAgaWYgKHVzZURvdWJsZVF1b3RlcykgcmV0dXJuICciJyArIGVzY2FwZWRTdHJpbmcucmVwbGFjZSgvIi9nLCAnXFwiJykgKyAnIic7CiAgICByZXR1cm4gIiciICsgZXNjYXBlZFN0cmluZy5yZXBsYWNlKC8nL2csICdcXFwnJykgKyAiJyI7CiAgfQoKICBmdW5jdGlvbiB1bmZpbHRlckpTT04oZmlsdGVyKSB7CiAgICByZXR1cm4gdGhpcy5yZXBsYWNlKGZpbHRlciB8fCBQcm90b3R5cGUuSlNPTkZpbHRlciwgJyQxJyk7CiAgfQoKICBmdW5jdGlvbiBpc0pTT04oKSB7CiAgICB2YXIgc3RyID0gdGhpczsKICAgIGlmIChzdHIuYmxhbmsoKSkgcmV0dXJuIGZhbHNlOwogICAgc3RyID0gc3RyLnJlcGxhY2UoL1xcKD86WyJcXFwvYmZucnRdfHVbMC05YS1mQS1GXXs0fSkvZywgJ0AnKTsKICAgIHN0ciA9IHN0ci5yZXBsYWNlKC8iW14iXFxcblxyXSoifHRydWV8ZmFsc2V8bnVsbHwtP1xkKyg/OlwuXGQqKT8oPzpbZUVdWytcLV0/XGQrKT8vZywgJ10nKTsKICAgIHN0ciA9IHN0ci5yZXBsYWNlKC8oPzpefDp8LCkoPzpccypcWykrL2csICcnKTsKICAgIHJldHVybiAoL15bXF0sOnt9XHNdKiQvKS50ZXN0KHN0cik7CiAgfQoKICBmdW5jdGlvbiBldmFsSlNPTihzYW5pdGl6ZSkgewogICAgdmFyIGpzb24gPSB0aGlzLnVuZmlsdGVySlNPTigpLAogICAgICAgIGN4ID0gL1tcdTAwYWRcdTA2MDAtXHUwNjA0XHUwNzBmXHUxN2I0XHUxN2I1XHUyMDBjLVx1MjAwZlx1MjAyOC1cdTIwMmZcdTIwNjAtXHUyMDZmXHVmZWZmXHVmZmYwLVx1ZmZmZlx1MDAwMF0vZzsKICAgIGlmIChjeC50ZXN0KGpzb24pKSB7CiAgICAgIGpzb24gPSBqc29uLnJlcGxhY2UoY3gsIGZ1bmN0aW9uIChhKSB7CiAgICAgICAgcmV0dXJuICdcXHUnICsgKCcwMDAwJyArIGEuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikpLnNsaWNlKC00KTsKICAgICAgfSk7CiAgICB9CiAgICB0cnkgewogICAgICBpZiAoIXNhbml0aXplIHx8IGpzb24uaXNKU09OKCkpIHJldHVybiBldmFsKCcoJyArIGpzb24gKyAnKScpOwogICAgfSBjYXRjaCAoZSkgeyB9CiAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoJ0JhZGx5IGZvcm1lZCBKU09OIHN0cmluZzogJyArIHRoaXMuaW5zcGVjdCgpKTsKICB9CgogIGZ1bmN0aW9uIHBhcnNlSlNPTigpIHsKICAgIHZhciBqc29uID0gdGhpcy51bmZpbHRlckpTT04oKTsKICAgIHJldHVybiBKU09OLnBhcnNlKGpzb24pOwogIH0KCiAgZnVuY3Rpb24gaW5jbHVkZShwYXR0ZXJuKSB7CiAgICByZXR1cm4gdGhpcy5pbmRleE9mKHBhdHRlcm4pID4gLTE7CiAgfQoKICBmdW5jdGlvbiBzdGFydHNXaXRoKHBhdHRlcm4sIHBvc2l0aW9uKSB7CiAgICBwb3NpdGlvbiA9IE9iamVjdC5pc051bWJlcihwb3NpdGlvbikgPyBwb3NpdGlvbiA6IDA7CiAgICByZXR1cm4gdGhpcy5sYXN0SW5kZXhPZihwYXR0ZXJuLCBwb3NpdGlvbikgPT09IHBvc2l0aW9uOwogIH0KCiAgZnVuY3Rpb24gZW5kc1dpdGgocGF0dGVybiwgcG9zaXRpb24pIHsKICAgIHBhdHRlcm4gPSBTdHJpbmcocGF0dGVybik7CiAgICBwb3NpdGlvbiA9IE9iamVjdC5pc051bWJlcihwb3NpdGlvbikgPyBwb3NpdGlvbiA6IHRoaXMubGVuZ3RoOwogICAgaWYgKHBvc2l0aW9uIDwgMCkgcG9zaXRpb24gPSAwOwogICAgaWYgKHBvc2l0aW9uID4gdGhpcy5sZW5ndGgpIHBvc2l0aW9uID0gdGhpcy5sZW5ndGg7CiAgICB2YXIgZCA9IHBvc2l0aW9uIC0gcGF0dGVybi5sZW5ndGg7CiAgICByZXR1cm4gZCA+PSAwICYmIHRoaXMuaW5kZXhPZihwYXR0ZXJuLCBkKSA9PT0gZDsKICB9CgogIGZ1bmN0aW9uIGVtcHR5KCkgewogICAgcmV0dXJuIHRoaXMgPT0gJyc7CiAgfQoKICBmdW5jdGlvbiBibGFuaygpIHsKICAgIHJldHVybiAvXlxzKiQvLnRlc3QodGhpcyk7CiAgfQoKICBmdW5jdGlvbiBpbnRlcnBvbGF0ZShvYmplY3QsIHBhdHRlcm4pIHsKICAgIHJldHVybiBuZXcgVGVtcGxhdGUodGhpcywgcGF0dGVybikuZXZhbHVhdGUob2JqZWN0KTsKICB9CgogIHJldHVybiB7CiAgICBnc3ViOiAgICAgICAgICAgZ3N1YiwKICAgIHN1YjogICAgICAgICAgICBzdWIsCiAgICBzY2FuOiAgICAgICAgICAgc2NhbiwKICAgIHRydW5jYXRlOiAgICAgICB0cnVuY2F0ZSwKICAgIHN0cmlwOiAgICAgICAgICBTdHJpbmcucHJvdG90eXBlLnRyaW0gfHwgc3RyaXAsCiAgICBzdHJpcFRhZ3M6ICAgICAgc3RyaXBUYWdzLAogICAgc3RyaXBTY3JpcHRzOiAgIHN0cmlwU2NyaXB0cywKICAgIGV4dHJhY3RTY3JpcHRzOiBleHRyYWN0U2NyaXB0cywKICAgIGV2YWxTY3JpcHRzOiAgICBldmFsU2NyaXB0cywKICAgIGVzY2FwZUhUTUw6ICAgICBlc2NhcGVIVE1MLAogICAgdW5lc2NhcGVIVE1MOiAgIHVuZXNjYXBlSFRNTCwKICAgIHRvUXVlcnlQYXJhbXM6ICB0b1F1ZXJ5UGFyYW1zLAogICAgcGFyc2VRdWVyeTogICAgIHRvUXVlcnlQYXJhbXMsCiAgICB0b0FycmF5OiAgICAgICAgdG9BcnJheSwKICAgIHN1Y2M6ICAgICAgICAgICBzdWNjLAogICAgdGltZXM6ICAgICAgICAgIHRpbWVzLAogICAgY2FtZWxpemU6ICAgICAgIGNhbWVsaXplLAogICAgY2FwaXRhbGl6ZTogICAgIGNhcGl0YWxpemUsCiAgICB1bmRlcnNjb3JlOiAgICAgdW5kZXJzY29yZSwKICAgIGRhc2hlcml6ZTogICAgICBkYXNoZXJpemUsCiAgICBpbnNwZWN0OiAgICAgICAgaW5zcGVjdCwKICAgIHVuZmlsdGVySlNPTjogICB1bmZpbHRlckpTT04sCiAgICBpc0pTT046ICAgICAgICAgaXNKU09OLAogICAgZXZhbEpTT046ICAgICAgIE5BVElWRV9KU09OX1BBUlNFX1NVUFBPUlQgPyBwYXJzZUpTT04gOiBldmFsSlNPTiwKICAgIGluY2x1ZGU6ICAgICAgICBpbmNsdWRlLAogICAgc3RhcnRzV2l0aDogICAgIFN0cmluZy5wcm90b3R5cGUuc3RhcnRzV2l0aCB8fCBzdGFydHNXaXRoLAogICAgZW5kc1dpdGg6ICAgICAgIFN0cmluZy5wcm90b3R5cGUuZW5kc1dpdGggfHwgZW5kc1dpdGgsCiAgICBlbXB0eTogICAgICAgICAgZW1wdHksCiAgICBibGFuazogICAgICAgICAgYmxhbmssCiAgICBpbnRlcnBvbGF0ZTogICAgaW50ZXJwb2xhdGUKICB9Owp9KSgpKTsKCnZhciBUZW1wbGF0ZSA9IENsYXNzLmNyZWF0ZSh7CiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24odGVtcGxhdGUsIHBhdHRlcm4pIHsKICAgIHRoaXMudGVtcGxhdGUgPSB0ZW1wbGF0ZS50b1N0cmluZygpOwogICAgdGhpcy5wYXR0ZXJuID0gcGF0dGVybiB8fCBUZW1wbGF0ZS5QYXR0ZXJuOwogIH0sCgogIGV2YWx1YXRlOiBmdW5jdGlvbihvYmplY3QpIHsKICAgIGlmIChvYmplY3QgJiYgT2JqZWN0LmlzRnVuY3Rpb24ob2JqZWN0LnRvVGVtcGxhdGVSZXBsYWNlbWVudHMpKQogICAgICBvYmplY3QgPSBvYmplY3QudG9UZW1wbGF0ZVJlcGxhY2VtZW50cygpOwoKICAgIHJldHVybiB0aGlzLnRlbXBsYXRlLmdzdWIodGhpcy5wYXR0ZXJuLCBmdW5jdGlvbihtYXRjaCkgewogICAgICBpZiAob2JqZWN0ID09IG51bGwpIHJldHVybiAobWF0Y2hbMV0gKyAnJyk7CgogICAgICB2YXIgYmVmb3JlID0gbWF0Y2hbMV0gfHwgJyc7CiAgICAgIGlmIChiZWZvcmUgPT0gJ1xcJykgcmV0dXJuIG1hdGNoWzJdOwoKICAgICAgdmFyIGN0eCA9IG9iamVjdCwgZXhwciA9IG1hdGNoWzNdLAogICAgICAgICAgcGF0dGVybiA9IC9eKFteLltdK3xcWygoPzouKj9bXlxcXSk/KVxdKShcLnxcW3wkKS87CgogICAgICBtYXRjaCA9IHBhdHRlcm4uZXhlYyhleHByKTsKICAgICAgaWYgKG1hdGNoID09IG51bGwpIHJldHVybiBiZWZvcmU7CgogICAgICB3aGlsZSAobWF0Y2ggIT0gbnVsbCkgewogICAgICAgIHZhciBjb21wID0gbWF0Y2hbMV0uc3RhcnRzV2l0aCgnWycpID8gbWF0Y2hbMl0ucmVwbGFjZSgvXFxcXF0vZywgJ10nKSA6IG1hdGNoWzFdOwogICAgICAgIGN0eCA9IGN0eFtjb21wXTsKICAgICAgICBpZiAobnVsbCA9PSBjdHggfHwgJycgPT0gbWF0Y2hbM10pIGJyZWFrOwogICAgICAgIGV4cHIgPSBleHByLnN1YnN0cmluZygnWycgPT0gbWF0Y2hbM10gPyBtYXRjaFsxXS5sZW5ndGggOiBtYXRjaFswXS5sZW5ndGgpOwogICAgICAgIG1hdGNoID0gcGF0dGVybi5leGVjKGV4cHIpOwogICAgICB9CgogICAgICByZXR1cm4gYmVmb3JlICsgU3RyaW5nLmludGVycHJldChjdHgpOwogICAgfSk7CiAgfQp9KTsKVGVtcGxhdGUuUGF0dGVybiA9IC8oXnwufFxyfFxuKSgjXHsoLio/KVx9KS87Cgp2YXIgJGJyZWFrID0geyB9OwoKdmFyIEVudW1lcmFibGUgPSAoZnVuY3Rpb24oKSB7CiAgZnVuY3Rpb24gZWFjaChpdGVyYXRvciwgY29udGV4dCkgewogICAgdHJ5IHsKICAgICAgdGhpcy5fZWFjaChpdGVyYXRvciwgY29udGV4dCk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIGlmIChlICE9ICRicmVhaykgdGhyb3cgZTsKICAgIH0KICAgIHJldHVybiB0aGlzOwogIH0KCiAgZnVuY3Rpb24gZWFjaFNsaWNlKG51bWJlciwgaXRlcmF0b3IsIGNvbnRleHQpIHsKICAgIHZhciBpbmRleCA9IC1udW1iZXIsIHNsaWNlcyA9IFtdLCBhcnJheSA9IHRoaXMudG9BcnJheSgpOwogICAgaWYgKG51bWJlciA8IDEpIHJldHVybiBhcnJheTsKICAgIHdoaWxlICgoaW5kZXggKz0gbnVtYmVyKSA8IGFycmF5Lmxlbmd0aCkKICAgICAgc2xpY2VzLnB1c2goYXJyYXkuc2xpY2UoaW5kZXgsIGluZGV4K251bWJlcikpOwogICAgcmV0dXJuIHNsaWNlcy5jb2xsZWN0KGl0ZXJhdG9yLCBjb250ZXh0KTsKICB9CgogIGZ1bmN0aW9uIGFsbChpdGVyYXRvciwgY29udGV4dCkgewogICAgaXRlcmF0b3IgPSBpdGVyYXRvciB8fCBQcm90b3R5cGUuSzsKICAgIHZhciByZXN1bHQgPSB0cnVlOwogICAgdGhpcy5lYWNoKGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkgewogICAgICByZXN1bHQgPSByZXN1bHQgJiYgISFpdGVyYXRvci5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCwgdGhpcyk7CiAgICAgIGlmICghcmVzdWx0KSB0aHJvdyAkYnJlYWs7CiAgICB9LCB0aGlzKTsKICAgIHJldHVybiByZXN1bHQ7CiAgfQoKICBmdW5jdGlvbiBhbnkoaXRlcmF0b3IsIGNvbnRleHQpIHsKICAgIGl0ZXJhdG9yID0gaXRlcmF0b3IgfHwgUHJvdG90eXBlLks7CiAgICB2YXIgcmVzdWx0ID0gZmFsc2U7CiAgICB0aGlzLmVhY2goZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7CiAgICAgIGlmIChyZXN1bHQgPSAhIWl0ZXJhdG9yLmNhbGwoY29udGV4dCwgdmFsdWUsIGluZGV4LCB0aGlzKSkKICAgICAgICB0aHJvdyAkYnJlYWs7CiAgICB9LCB0aGlzKTsKICAgIHJldHVybiByZXN1bHQ7CiAgfQoKICBmdW5jdGlvbiBjb2xsZWN0KGl0ZXJhdG9yLCBjb250ZXh0KSB7CiAgICBpdGVyYXRvciA9IGl0ZXJhdG9yIHx8IFByb3RvdHlwZS5LOwogICAgdmFyIHJlc3VsdHMgPSBbXTsKICAgIHRoaXMuZWFjaChmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHsKICAgICAgcmVzdWx0cy5wdXNoKGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgdmFsdWUsIGluZGV4LCB0aGlzKSk7CiAgICB9LCB0aGlzKTsKICAgIHJldHVybiByZXN1bHRzOwogIH0KCiAgZnVuY3Rpb24gZGV0ZWN0KGl0ZXJhdG9yLCBjb250ZXh0KSB7CiAgICB2YXIgcmVzdWx0OwogICAgdGhpcy5lYWNoKGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkgewogICAgICBpZiAoaXRlcmF0b3IuY2FsbChjb250ZXh0LCB2YWx1ZSwgaW5kZXgsIHRoaXMpKSB7CiAgICAgICAgcmVzdWx0ID0gdmFsdWU7CiAgICAgICAgdGhyb3cgJGJyZWFrOwogICAgICB9CiAgICB9LCB0aGlzKTsKICAgIHJldHVybiByZXN1bHQ7CiAgfQoKICBmdW5jdGlvbiBmaW5kQWxsKGl0ZXJhdG9yLCBjb250ZXh0KSB7CiAgICB2YXIgcmVzdWx0cyA9IFtdOwogICAgdGhpcy5lYWNoKGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkgewogICAgICBpZiAoaXRlcmF0b3IuY2FsbChjb250ZXh0LCB2YWx1ZSwgaW5kZXgsIHRoaXMpKQogICAgICAgIHJlc3VsdHMucHVzaCh2YWx1ZSk7CiAgICB9LCB0aGlzKTsKICAgIHJldHVybiByZXN1bHRzOwogIH0KCiAgZnVuY3Rpb24gZ3JlcChmaWx0ZXIsIGl0ZXJhdG9yLCBjb250ZXh0KSB7CiAgICBpdGVyYXRvciA9IGl0ZXJhdG9yIHx8IFByb3RvdHlwZS5LOwogICAgdmFyIHJlc3VsdHMgPSBbXTsKCiAgICBpZiAoT2JqZWN0LmlzU3RyaW5nKGZpbHRlcikpCiAgICAgIGZpbHRlciA9IG5ldyBSZWdFeHAoUmVnRXhwLmVzY2FwZShmaWx0ZXIpKTsKCiAgICB0aGlzLmVhY2goZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7CiAgICAgIGlmIChmaWx0ZXIubWF0Y2godmFsdWUpKQogICAgICAgIHJlc3VsdHMucHVzaChpdGVyYXRvci5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCwgdGhpcykpOwogICAgfSwgdGhpcyk7CiAgICByZXR1cm4gcmVzdWx0czsKICB9CgogIGZ1bmN0aW9uIGluY2x1ZGUob2JqZWN0KSB7CiAgICBpZiAoT2JqZWN0LmlzRnVuY3Rpb24odGhpcy5pbmRleE9mKSAmJiB0aGlzLmluZGV4T2Yob2JqZWN0KSAhPSAtMSkKICAgICAgcmV0dXJuIHRydWU7CgogICAgdmFyIGZvdW5kID0gZmFsc2U7CiAgICB0aGlzLmVhY2goZnVuY3Rpb24odmFsdWUpIHsKICAgICAgaWYgKHZhbHVlID09IG9iamVjdCkgewogICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICB0aHJvdyAkYnJlYWs7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIGZvdW5kOwogIH0KCiAgZnVuY3Rpb24gaW5Hcm91cHNPZihudW1iZXIsIGZpbGxXaXRoKSB7CiAgICBmaWxsV2l0aCA9IE9iamVjdC5pc1VuZGVmaW5lZChmaWxsV2l0aCkgPyBudWxsIDogZmlsbFdpdGg7CiAgICByZXR1cm4gdGhpcy5lYWNoU2xpY2UobnVtYmVyLCBmdW5jdGlvbihzbGljZSkgewogICAgICB3aGlsZShzbGljZS5sZW5ndGggPCBudW1iZXIpIHNsaWNlLnB1c2goZmlsbFdpdGgpOwogICAgICByZXR1cm4gc2xpY2U7CiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIGluamVjdChtZW1vLCBpdGVyYXRvciwgY29udGV4dCkgewogICAgdGhpcy5lYWNoKGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkgewogICAgICBtZW1vID0gaXRlcmF0b3IuY2FsbChjb250ZXh0LCBtZW1vLCB2YWx1ZSwgaW5kZXgsIHRoaXMpOwogICAgfSwgdGhpcyk7CiAgICByZXR1cm4gbWVtbzsKICB9CgogIGZ1bmN0aW9uIGludm9rZShtZXRob2QpIHsKICAgIHZhciBhcmdzID0gJEEoYXJndW1lbnRzKS5zbGljZSgxKTsKICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbih2YWx1ZSkgewogICAgICByZXR1cm4gdmFsdWVbbWV0aG9kXS5hcHBseSh2YWx1ZSwgYXJncyk7CiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIG1heChpdGVyYXRvciwgY29udGV4dCkgewogICAgaXRlcmF0b3IgPSBpdGVyYXRvciB8fCBQcm90b3R5cGUuSzsKICAgIHZhciByZXN1bHQ7CiAgICB0aGlzLmVhY2goZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7CiAgICAgIHZhbHVlID0gaXRlcmF0b3IuY2FsbChjb250ZXh0LCB2YWx1ZSwgaW5kZXgsIHRoaXMpOwogICAgICBpZiAocmVzdWx0ID09IG51bGwgfHwgdmFsdWUgPj0gcmVzdWx0KQogICAgICAgIHJlc3VsdCA9IHZhbHVlOwogICAgfSwgdGhpcyk7CiAgICByZXR1cm4gcmVzdWx0OwogIH0KCiAgZnVuY3Rpb24gbWluKGl0ZXJhdG9yLCBjb250ZXh0KSB7CiAgICBpdGVyYXRvciA9IGl0ZXJhdG9yIHx8IFByb3RvdHlwZS5LOwogICAgdmFyIHJlc3VsdDsKICAgIHRoaXMuZWFjaChmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHsKICAgICAgdmFsdWUgPSBpdGVyYXRvci5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCwgdGhpcyk7CiAgICAgIGlmIChyZXN1bHQgPT0gbnVsbCB8fCB2YWx1ZSA8IHJlc3VsdCkKICAgICAgICByZXN1bHQgPSB2YWx1ZTsKICAgIH0sIHRoaXMpOwogICAgcmV0dXJuIHJlc3VsdDsKICB9CgogIGZ1bmN0aW9uIHBhcnRpdGlvbihpdGVyYXRvciwgY29udGV4dCkgewogICAgaXRlcmF0b3IgPSBpdGVyYXRvciB8fCBQcm90b3R5cGUuSzsKICAgIHZhciB0cnVlcyA9IFtdLCBmYWxzZXMgPSBbXTsKICAgIHRoaXMuZWFjaChmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHsKICAgICAgKGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgdmFsdWUsIGluZGV4LCB0aGlzKSA/CiAgICAgICAgdHJ1ZXMgOiBmYWxzZXMpLnB1c2godmFsdWUpOwogICAgfSwgdGhpcyk7CiAgICByZXR1cm4gW3RydWVzLCBmYWxzZXNdOwogIH0KCiAgZnVuY3Rpb24gcGx1Y2socHJvcGVydHkpIHsKICAgIHZhciByZXN1bHRzID0gW107CiAgICB0aGlzLmVhY2goZnVuY3Rpb24odmFsdWUpIHsKICAgICAgcmVzdWx0cy5wdXNoKHZhbHVlW3Byb3BlcnR5XSk7CiAgICB9KTsKICAgIHJldHVybiByZXN1bHRzOwogIH0KCiAgZnVuY3Rpb24gcmVqZWN0KGl0ZXJhdG9yLCBjb250ZXh0KSB7CiAgICB2YXIgcmVzdWx0cyA9IFtdOwogICAgdGhpcy5lYWNoKGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkgewogICAgICBpZiAoIWl0ZXJhdG9yLmNhbGwoY29udGV4dCwgdmFsdWUsIGluZGV4LCB0aGlzKSkKICAgICAgICByZXN1bHRzLnB1c2godmFsdWUpOwogICAgfSwgdGhpcyk7CiAgICByZXR1cm4gcmVzdWx0czsKICB9CgogIGZ1bmN0aW9uIHNvcnRCeShpdGVyYXRvciwgY29udGV4dCkgewogICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkgewogICAgICByZXR1cm4gewogICAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgICBjcml0ZXJpYTogaXRlcmF0b3IuY2FsbChjb250ZXh0LCB2YWx1ZSwgaW5kZXgsIHRoaXMpCiAgICAgIH07CiAgICB9LCB0aGlzKS5zb3J0KGZ1bmN0aW9uKGxlZnQsIHJpZ2h0KSB7CiAgICAgIHZhciBhID0gbGVmdC5jcml0ZXJpYSwgYiA9IHJpZ2h0LmNyaXRlcmlhOwogICAgICByZXR1cm4gYSA8IGIgPyAtMSA6IGEgPiBiID8gMSA6IDA7CiAgICB9KS5wbHVjaygndmFsdWUnKTsKICB9CgogIGZ1bmN0aW9uIHRvQXJyYXkoKSB7CiAgICByZXR1cm4gdGhpcy5tYXAoKTsKICB9CgogIGZ1bmN0aW9uIHppcCgpIHsKICAgIHZhciBpdGVyYXRvciA9IFByb3RvdHlwZS5LLCBhcmdzID0gJEEoYXJndW1lbnRzKTsKICAgIGlmIChPYmplY3QuaXNGdW5jdGlvbihhcmdzLmxhc3QoKSkpCiAgICAgIGl0ZXJhdG9yID0gYXJncy5wb3AoKTsKCiAgICB2YXIgY29sbGVjdGlvbnMgPSBbdGhpc10uY29uY2F0KGFyZ3MpLm1hcCgkQSk7CiAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7CiAgICAgIHJldHVybiBpdGVyYXRvcihjb2xsZWN0aW9ucy5wbHVjayhpbmRleCkpOwogICAgfSk7CiAgfQoKICBmdW5jdGlvbiBzaXplKCkgewogICAgcmV0dXJuIHRoaXMudG9BcnJheSgpLmxlbmd0aDsKICB9CgogIGZ1bmN0aW9uIGluc3BlY3QoKSB7CiAgICByZXR1cm4gJyM8RW51bWVyYWJsZTonICsgdGhpcy50b0FycmF5KCkuaW5zcGVjdCgpICsgJz4nOwogIH0KCgoKCgoKCgoKICByZXR1cm4gewogICAgZWFjaDogICAgICAgZWFjaCwKICAgIGVhY2hTbGljZTogIGVhY2hTbGljZSwKICAgIGFsbDogICAgICAgIGFsbCwKICAgIGV2ZXJ5OiAgICAgIGFsbCwKICAgIGFueTogICAgICAgIGFueSwKICAgIHNvbWU6ICAgICAgIGFueSwKICAgIGNvbGxlY3Q6ICAgIGNvbGxlY3QsCiAgICBtYXA6ICAgICAgICBjb2xsZWN0LAogICAgZGV0ZWN0OiAgICAgZGV0ZWN0LAogICAgZmluZEFsbDogICAgZmluZEFsbCwKICAgIHNlbGVjdDogICAgIGZpbmRBbGwsCiAgICBmaWx0ZXI6ICAgICBmaW5kQWxsLAogICAgZ3JlcDogICAgICAgZ3JlcCwKICAgIGluY2x1ZGU6ICAgIGluY2x1ZGUsCiAgICBtZW1iZXI6ICAgICBpbmNsdWRlLAogICAgaW5Hcm91cHNPZjogaW5Hcm91cHNPZiwKICAgIGluamVjdDogICAgIGluamVjdCwKICAgIGludm9rZTogICAgIGludm9rZSwKICAgIG1heDogICAgICAgIG1heCwKICAgIG1pbjogICAgICAgIG1pbiwKICAgIHBhcnRpdGlvbjogIHBhcnRpdGlvbiwKICAgIHBsdWNrOiAgICAgIHBsdWNrLAogICAgcmVqZWN0OiAgICAgcmVqZWN0LAogICAgc29ydEJ5OiAgICAgc29ydEJ5LAogICAgdG9BcnJheTogICAgdG9BcnJheSwKICAgIGVudHJpZXM6ICAgIHRvQXJyYXksCiAgICB6aXA6ICAgICAgICB6aXAsCiAgICBzaXplOiAgICAgICBzaXplLAogICAgaW5zcGVjdDogICAgaW5zcGVjdCwKICAgIGZpbmQ6ICAgICAgIGRldGVjdAogIH07Cn0pKCk7CgpmdW5jdGlvbiAkQShpdGVyYWJsZSkgewogIGlmICghaXRlcmFibGUpIHJldHVybiBbXTsKICBpZiAoJ3RvQXJyYXknIGluIE9iamVjdChpdGVyYWJsZSkpIHJldHVybiBpdGVyYWJsZS50b0FycmF5KCk7CiAgdmFyIGxlbmd0aCA9IGl0ZXJhYmxlLmxlbmd0aCB8fCAwLCByZXN1bHRzID0gbmV3IEFycmF5KGxlbmd0aCk7CiAgd2hpbGUgKGxlbmd0aC0tKSByZXN1bHRzW2xlbmd0aF0gPSBpdGVyYWJsZVtsZW5ndGhdOwogIHJldHVybiByZXN1bHRzOwp9CgoKZnVuY3Rpb24gJHcoc3RyaW5nKSB7CiAgaWYgKCFPYmplY3QuaXNTdHJpbmcoc3RyaW5nKSkgcmV0dXJuIFtdOwogIHN0cmluZyA9IHN0cmluZy5zdHJpcCgpOwogIHJldHVybiBzdHJpbmcgPyBzdHJpbmcuc3BsaXQoL1xzKy8pIDogW107Cn0KCkFycmF5LmZyb20gPSAkQTsKCgooZnVuY3Rpb24oKSB7CiAgdmFyIGFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGUsCiAgICAgIHNsaWNlID0gYXJyYXlQcm90by5zbGljZSwKICAgICAgX2VhY2ggPSBhcnJheVByb3RvLmZvckVhY2g7IC8vIHVzZSBuYXRpdmUgYnJvd3NlciBKUyAxLjYgaW1wbGVtZW50YXRpb24gaWYgYXZhaWxhYmxlCgogIGZ1bmN0aW9uIGVhY2goaXRlcmF0b3IsIGNvbnRleHQpIHsKICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSB0aGlzLmxlbmd0aCA+Pj4gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgIGlmIChpIGluIHRoaXMpIGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgdGhpc1tpXSwgaSwgdGhpcyk7CiAgICB9CiAgfQogIGlmICghX2VhY2gpIF9lYWNoID0gZWFjaDsKCiAgZnVuY3Rpb24gY2xlYXIoKSB7CiAgICB0aGlzLmxlbmd0aCA9IDA7CiAgICByZXR1cm4gdGhpczsKICB9CgogIGZ1bmN0aW9uIGZpcnN0KCkgewogICAgcmV0dXJuIHRoaXNbMF07CiAgfQoKICBmdW5jdGlvbiBsYXN0KCkgewogICAgcmV0dXJuIHRoaXNbdGhpcy5sZW5ndGggLSAxXTsKICB9CgogIGZ1bmN0aW9uIGNvbXBhY3QoKSB7CiAgICByZXR1cm4gdGhpcy5zZWxlY3QoZnVuY3Rpb24odmFsdWUpIHsKICAgICAgcmV0dXJuIHZhbHVlICE9IG51bGw7CiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIGZsYXR0ZW4oKSB7CiAgICByZXR1cm4gdGhpcy5pbmplY3QoW10sIGZ1bmN0aW9uKGFycmF5LCB2YWx1ZSkgewogICAgICBpZiAoT2JqZWN0LmlzQXJyYXkodmFsdWUpKQogICAgICAgIHJldHVybiBhcnJheS5jb25jYXQodmFsdWUuZmxhdHRlbigpKTsKICAgICAgYXJyYXkucHVzaCh2YWx1ZSk7CiAgICAgIHJldHVybiBhcnJheTsKICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gd2l0aG91dCgpIHsKICAgIHZhciB2YWx1ZXMgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7CiAgICByZXR1cm4gdGhpcy5zZWxlY3QoZnVuY3Rpb24odmFsdWUpIHsKICAgICAgcmV0dXJuICF2YWx1ZXMuaW5jbHVkZSh2YWx1ZSk7CiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIHJldmVyc2UoaW5saW5lKSB7CiAgICByZXR1cm4gKGlubGluZSA9PT0gZmFsc2UgPyB0aGlzLnRvQXJyYXkoKSA6IHRoaXMpLl9yZXZlcnNlKCk7CiAgfQoKICBmdW5jdGlvbiB1bmlxKHNvcnRlZCkgewogICAgcmV0dXJuIHRoaXMuaW5qZWN0KFtdLCBmdW5jdGlvbihhcnJheSwgdmFsdWUsIGluZGV4KSB7CiAgICAgIGlmICgwID09IGluZGV4IHx8IChzb3J0ZWQgPyBhcnJheS5sYXN0KCkgIT0gdmFsdWUgOiAhYXJyYXkuaW5jbHVkZSh2YWx1ZSkpKQogICAgICAgIGFycmF5LnB1c2godmFsdWUpOwogICAgICByZXR1cm4gYXJyYXk7CiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIGludGVyc2VjdChhcnJheSkgewogICAgcmV0dXJuIHRoaXMudW5pcSgpLmZpbmRBbGwoZnVuY3Rpb24oaXRlbSkgewogICAgICByZXR1cm4gYXJyYXkuaW5kZXhPZihpdGVtKSAhPT0gLTE7CiAgICB9KTsKICB9CgoKICBmdW5jdGlvbiBjbG9uZSgpIHsKICAgIHJldHVybiBzbGljZS5jYWxsKHRoaXMsIDApOwogIH0KCiAgZnVuY3Rpb24gc2l6ZSgpIHsKICAgIHJldHVybiB0aGlzLmxlbmd0aDsKICB9CgogIGZ1bmN0aW9uIGluc3BlY3QoKSB7CiAgICByZXR1cm4gJ1snICsgdGhpcy5tYXAoT2JqZWN0Lmluc3BlY3QpLmpvaW4oJywgJykgKyAnXSc7CiAgfQoKICBmdW5jdGlvbiBpbmRleE9mKGl0ZW0sIGkpIHsKICAgIGlmICh0aGlzID09IG51bGwpIHRocm93IG5ldyBUeXBlRXJyb3IoKTsKCiAgICB2YXIgYXJyYXkgPSBPYmplY3QodGhpcyksIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCA+Pj4gMDsKICAgIGlmIChsZW5ndGggPT09IDApIHJldHVybiAtMTsKCiAgICBpID0gTnVtYmVyKGkpOwogICAgaWYgKGlzTmFOKGkpKSB7CiAgICAgIGkgPSAwOwogICAgfSBlbHNlIGlmIChpICE9PSAwICYmIGlzRmluaXRlKGkpKSB7CiAgICAgIGkgPSAoaSA+IDAgPyAxIDogLTEpICogTWF0aC5mbG9vcihNYXRoLmFicyhpKSk7CiAgICB9CgogICAgaWYgKGkgPiBsZW5ndGgpIHJldHVybiAtMTsKCiAgICB2YXIgayA9IGkgPj0gMCA/IGkgOiBNYXRoLm1heChsZW5ndGggLSBNYXRoLmFicyhpKSwgMCk7CiAgICBmb3IgKDsgayA8IGxlbmd0aDsgaysrKQogICAgICBpZiAoayBpbiBhcnJheSAmJiBhcnJheVtrXSA9PT0gaXRlbSkgcmV0dXJuIGs7CiAgICByZXR1cm4gLTE7CiAgfQoKCiAgZnVuY3Rpb24gbGFzdEluZGV4T2YoaXRlbSwgaSkgewogICAgaWYgKHRoaXMgPT0gbnVsbCkgdGhyb3cgbmV3IFR5cGVFcnJvcigpOwoKICAgIHZhciBhcnJheSA9IE9iamVjdCh0aGlzKSwgbGVuZ3RoID0gYXJyYXkubGVuZ3RoID4+PiAwOwogICAgaWYgKGxlbmd0aCA9PT0gMCkgcmV0dXJuIC0xOwoKICAgIGlmICghT2JqZWN0LmlzVW5kZWZpbmVkKGkpKSB7CiAgICAgIGkgPSBOdW1iZXIoaSk7CiAgICAgIGlmIChpc05hTihpKSkgewogICAgICAgIGkgPSAwOwogICAgICB9IGVsc2UgaWYgKGkgIT09IDAgJiYgaXNGaW5pdGUoaSkpIHsKICAgICAgICBpID0gKGkgPiAwID8gMSA6IC0xKSAqIE1hdGguZmxvb3IoTWF0aC5hYnMoaSkpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBpID0gbGVuZ3RoOwogICAgfQoKICAgIHZhciBrID0gaSA+PSAwID8gTWF0aC5taW4oaSwgbGVuZ3RoIC0gMSkgOgogICAgIGxlbmd0aCAtIE1hdGguYWJzKGkpOwoKICAgIGZvciAoOyBrID49IDA7IGstLSkKICAgICAgaWYgKGsgaW4gYXJyYXkgJiYgYXJyYXlba10gPT09IGl0ZW0pIHJldHVybiBrOwogICAgcmV0dXJuIC0xOwogIH0KCiAgZnVuY3Rpb24gY29uY2F0KF8pIHsKICAgIHZhciBhcnJheSA9IFtdLCBpdGVtcyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSwgaXRlbSwgbiA9IDA7CiAgICBpdGVtcy51bnNoaWZ0KHRoaXMpOwogICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGl0ZW1zLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgIGl0ZW0gPSBpdGVtc1tpXTsKICAgICAgaWYgKE9iamVjdC5pc0FycmF5KGl0ZW0pICYmICEoJ2NhbGxlZScgaW4gaXRlbSkpIHsKICAgICAgICBmb3IgKHZhciBqID0gMCwgYXJyYXlMZW5ndGggPSBpdGVtLmxlbmd0aDsgaiA8IGFycmF5TGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGlmIChqIGluIGl0ZW0pIGFycmF5W25dID0gaXRlbVtqXTsKICAgICAgICAgIG4rKzsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYXJyYXlbbisrXSA9IGl0ZW07CiAgICAgIH0KICAgIH0KICAgIGFycmF5Lmxlbmd0aCA9IG47CiAgICByZXR1cm4gYXJyYXk7CiAgfQoKCiAgZnVuY3Rpb24gd3JhcE5hdGl2ZShtZXRob2QpIHsKICAgIHJldHVybiBmdW5jdGlvbigpIHsKICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm4gbWV0aG9kLmNhbGwodGhpcywgUHJvdG90eXBlLkspOwogICAgICB9IGVsc2UgaWYgKGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7CiAgICAgICAgYXJncy51bnNoaWZ0KFByb3RvdHlwZS5LKTsKICAgICAgICByZXR1cm4gbWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3MpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBtZXRob2QuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQogICAgfTsKICB9CgoKICBmdW5jdGlvbiBtYXAoaXRlcmF0b3IpIHsKICAgIGlmICh0aGlzID09IG51bGwpIHRocm93IG5ldyBUeXBlRXJyb3IoKTsKICAgIGl0ZXJhdG9yID0gaXRlcmF0b3IgfHwgUHJvdG90eXBlLks7CgogICAgdmFyIG9iamVjdCA9IE9iamVjdCh0aGlzKTsKICAgIHZhciByZXN1bHRzID0gW10sIGNvbnRleHQgPSBhcmd1bWVudHNbMV0sIG4gPSAwOwoKICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBvYmplY3QubGVuZ3RoID4+PiAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgaWYgKGkgaW4gb2JqZWN0KSB7CiAgICAgICAgcmVzdWx0c1tuXSA9IGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgb2JqZWN0W2ldLCBpLCBvYmplY3QpOwogICAgICB9CiAgICAgIG4rKzsKICAgIH0KICAgIHJlc3VsdHMubGVuZ3RoID0gbjsKICAgIHJldHVybiByZXN1bHRzOwogIH0KCiAgaWYgKGFycmF5UHJvdG8ubWFwKSB7CiAgICBtYXAgPSB3cmFwTmF0aXZlKEFycmF5LnByb3RvdHlwZS5tYXApOwogIH0KCiAgZnVuY3Rpb24gZmlsdGVyKGl0ZXJhdG9yKSB7CiAgICBpZiAodGhpcyA9PSBudWxsIHx8ICFPYmplY3QuaXNGdW5jdGlvbihpdGVyYXRvcikpCiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTsKCiAgICB2YXIgb2JqZWN0ID0gT2JqZWN0KHRoaXMpOwogICAgdmFyIHJlc3VsdHMgPSBbXSwgY29udGV4dCA9IGFyZ3VtZW50c1sxXSwgdmFsdWU7CgogICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IG9iamVjdC5sZW5ndGggPj4+IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICBpZiAoaSBpbiBvYmplY3QpIHsKICAgICAgICB2YWx1ZSA9IG9iamVjdFtpXTsKICAgICAgICBpZiAoaXRlcmF0b3IuY2FsbChjb250ZXh0LCB2YWx1ZSwgaSwgb2JqZWN0KSkgewogICAgICAgICAgcmVzdWx0cy5wdXNoKHZhbHVlKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiByZXN1bHRzOwogIH0KCiAgaWYgKGFycmF5UHJvdG8uZmlsdGVyKSB7CiAgICBmaWx0ZXIgPSBBcnJheS5wcm90b3R5cGUuZmlsdGVyOwogIH0KCiAgZnVuY3Rpb24gc29tZShpdGVyYXRvcikgewogICAgaWYgKHRoaXMgPT0gbnVsbCkgdGhyb3cgbmV3IFR5cGVFcnJvcigpOwogICAgaXRlcmF0b3IgPSBpdGVyYXRvciB8fCBQcm90b3R5cGUuSzsKICAgIHZhciBjb250ZXh0ID0gYXJndW1lbnRzWzFdOwoKICAgIHZhciBvYmplY3QgPSBPYmplY3QodGhpcyk7CiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gb2JqZWN0Lmxlbmd0aCA+Pj4gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgIGlmIChpIGluIG9iamVjdCAmJiBpdGVyYXRvci5jYWxsKGNvbnRleHQsIG9iamVjdFtpXSwgaSwgb2JqZWN0KSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgaWYgKGFycmF5UHJvdG8uc29tZSkgewogICAgc29tZSA9IHdyYXBOYXRpdmUoQXJyYXkucHJvdG90eXBlLnNvbWUpOwogIH0KCiAgZnVuY3Rpb24gZXZlcnkoaXRlcmF0b3IpIHsKICAgIGlmICh0aGlzID09IG51bGwpIHRocm93IG5ldyBUeXBlRXJyb3IoKTsKICAgIGl0ZXJhdG9yID0gaXRlcmF0b3IgfHwgUHJvdG90eXBlLks7CiAgICB2YXIgY29udGV4dCA9IGFyZ3VtZW50c1sxXTsKCiAgICB2YXIgb2JqZWN0ID0gT2JqZWN0KHRoaXMpOwogICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IG9iamVjdC5sZW5ndGggPj4+IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICBpZiAoaSBpbiBvYmplY3QgJiYgIWl0ZXJhdG9yLmNhbGwoY29udGV4dCwgb2JqZWN0W2ldLCBpLCBvYmplY3QpKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHRydWU7CiAgfQoKICBpZiAoYXJyYXlQcm90by5ldmVyeSkgewogICAgZXZlcnkgPSB3cmFwTmF0aXZlKEFycmF5LnByb3RvdHlwZS5ldmVyeSk7CiAgfQoKCiAgT2JqZWN0LmV4dGVuZChhcnJheVByb3RvLCBFbnVtZXJhYmxlKTsKCiAgaWYgKGFycmF5UHJvdG8uZW50cmllcyA9PT0gRW51bWVyYWJsZS5lbnRyaWVzKSB7CiAgICBkZWxldGUgYXJyYXlQcm90by5lbnRyaWVzOwogIH0KCiAgaWYgKCFhcnJheVByb3RvLl9yZXZlcnNlKQogICAgYXJyYXlQcm90by5fcmV2ZXJzZSA9IGFycmF5UHJvdG8ucmV2ZXJzZTsKCiAgT2JqZWN0LmV4dGVuZChhcnJheVByb3RvLCB7CiAgICBfZWFjaDogICAgIF9lYWNoLAoKICAgIG1hcDogICAgICAgbWFwLAogICAgY29sbGVjdDogICBtYXAsCiAgICBzZWxlY3Q6ICAgIGZpbHRlciwKICAgIGZpbHRlcjogICAgZmlsdGVyLAogICAgZmluZEFsbDogICBmaWx0ZXIsCiAgICBzb21lOiAgICAgIHNvbWUsCiAgICBhbnk6ICAgICAgIHNvbWUsCiAgICBldmVyeTogICAgIGV2ZXJ5LAogICAgYWxsOiAgICAgICBldmVyeSwKCiAgICBjbGVhcjogICAgIGNsZWFyLAogICAgZmlyc3Q6ICAgICBmaXJzdCwKICAgIGxhc3Q6ICAgICAgbGFzdCwKICAgIGNvbXBhY3Q6ICAgY29tcGFjdCwKICAgIGZsYXR0ZW46ICAgZmxhdHRlbiwKICAgIHdpdGhvdXQ6ICAgd2l0aG91dCwKICAgIHJldmVyc2U6ICAgcmV2ZXJzZSwKICAgIHVuaXE6ICAgICAgdW5pcSwKICAgIGludGVyc2VjdDogaW50ZXJzZWN0LAogICAgY2xvbmU6ICAgICBjbG9uZSwKICAgIHRvQXJyYXk6ICAgY2xvbmUsCiAgICBzaXplOiAgICAgIHNpemUsCiAgICBpbnNwZWN0OiAgIGluc3BlY3QKICB9KTsKCiAgdmFyIENPTkNBVF9BUkdVTUVOVFNfQlVHR1kgPSAoZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gW10uY29uY2F0KGFyZ3VtZW50cylbMF1bMF0gIT09IDE7CiAgfSkoMSwyKTsKCiAgaWYgKENPTkNBVF9BUkdVTUVOVFNfQlVHR1kpIGFycmF5UHJvdG8uY29uY2F0ID0gY29uY2F0OwoKICBpZiAoIWFycmF5UHJvdG8uaW5kZXhPZikgYXJyYXlQcm90by5pbmRleE9mID0gaW5kZXhPZjsKICBpZiAoIWFycmF5UHJvdG8ubGFzdEluZGV4T2YpIGFycmF5UHJvdG8ubGFzdEluZGV4T2YgPSBsYXN0SW5kZXhPZjsKfSkoKTsKZnVuY3Rpb24gJEgob2JqZWN0KSB7CiAgcmV0dXJuIG5ldyBIYXNoKG9iamVjdCk7Cn07Cgp2YXIgSGFzaCA9IENsYXNzLmNyZWF0ZShFbnVtZXJhYmxlLCAoZnVuY3Rpb24oKSB7CiAgZnVuY3Rpb24gaW5pdGlhbGl6ZShvYmplY3QpIHsKICAgIHRoaXMuX29iamVjdCA9IE9iamVjdC5pc0hhc2gob2JqZWN0KSA/IG9iamVjdC50b09iamVjdCgpIDogT2JqZWN0LmNsb25lKG9iamVjdCk7CiAgfQoKCiAgZnVuY3Rpb24gX2VhY2goaXRlcmF0b3IsIGNvbnRleHQpIHsKICAgIHZhciBpID0gMDsKICAgIGZvciAodmFyIGtleSBpbiB0aGlzLl9vYmplY3QpIHsKICAgICAgdmFyIHZhbHVlID0gdGhpcy5fb2JqZWN0W2tleV0sIHBhaXIgPSBba2V5LCB2YWx1ZV07CiAgICAgIHBhaXIua2V5ID0ga2V5OwogICAgICBwYWlyLnZhbHVlID0gdmFsdWU7CiAgICAgIGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgcGFpciwgaSk7CiAgICAgIGkrKzsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHNldChrZXksIHZhbHVlKSB7CiAgICByZXR1cm4gdGhpcy5fb2JqZWN0W2tleV0gPSB2YWx1ZTsKICB9CgogIGZ1bmN0aW9uIGdldChrZXkpIHsKICAgIGlmICh0aGlzLl9vYmplY3Rba2V5XSAhPT0gT2JqZWN0LnByb3RvdHlwZVtrZXldKQogICAgICByZXR1cm4gdGhpcy5fb2JqZWN0W2tleV07CiAgfQoKICBmdW5jdGlvbiB1bnNldChrZXkpIHsKICAgIHZhciB2YWx1ZSA9IHRoaXMuX29iamVjdFtrZXldOwogICAgZGVsZXRlIHRoaXMuX29iamVjdFtrZXldOwogICAgcmV0dXJuIHZhbHVlOwogIH0KCiAgZnVuY3Rpb24gdG9PYmplY3QoKSB7CiAgICByZXR1cm4gT2JqZWN0LmNsb25lKHRoaXMuX29iamVjdCk7CiAgfQoKCgogIGZ1bmN0aW9uIGtleXMoKSB7CiAgICByZXR1cm4gdGhpcy5wbHVjaygna2V5Jyk7CiAgfQoKICBmdW5jdGlvbiB2YWx1ZXMoKSB7CiAgICByZXR1cm4gdGhpcy5wbHVjaygndmFsdWUnKTsKICB9CgogIGZ1bmN0aW9uIGluZGV4KHZhbHVlKSB7CiAgICB2YXIgbWF0Y2ggPSB0aGlzLmRldGVjdChmdW5jdGlvbihwYWlyKSB7CiAgICAgIHJldHVybiBwYWlyLnZhbHVlID09PSB2YWx1ZTsKICAgIH0pOwogICAgcmV0dXJuIG1hdGNoICYmIG1hdGNoLmtleTsKICB9CgogIGZ1bmN0aW9uIG1lcmdlKG9iamVjdCkgewogICAgcmV0dXJuIHRoaXMuY2xvbmUoKS51cGRhdGUob2JqZWN0KTsKICB9CgogIGZ1bmN0aW9uIHVwZGF0ZShvYmplY3QpIHsKICAgIHJldHVybiBuZXcgSGFzaChvYmplY3QpLmluamVjdCh0aGlzLCBmdW5jdGlvbihyZXN1bHQsIHBhaXIpIHsKICAgICAgcmVzdWx0LnNldChwYWlyLmtleSwgcGFpci52YWx1ZSk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIHRvUXVlcnlQYWlyKGtleSwgdmFsdWUpIHsKICAgIGlmIChPYmplY3QuaXNVbmRlZmluZWQodmFsdWUpKSByZXR1cm4ga2V5OwoKICAgIHZhbHVlID0gU3RyaW5nLmludGVycHJldCh2YWx1ZSk7CgogICAgdmFsdWUgPSB2YWx1ZS5nc3ViKC8oXHIpP1xuLywgJ1xyXG4nKTsKICAgIHZhbHVlID0gZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKTsKICAgIHZhbHVlID0gdmFsdWUuZ3N1YigvJTIwLywgJysnKTsKICAgIHJldHVybiBrZXkgKyAnPScgKyB2YWx1ZTsKICB9CgogIGZ1bmN0aW9uIHRvUXVlcnlTdHJpbmcoKSB7CiAgICByZXR1cm4gdGhpcy5pbmplY3QoW10sIGZ1bmN0aW9uKHJlc3VsdHMsIHBhaXIpIHsKICAgICAgdmFyIGtleSA9IGVuY29kZVVSSUNvbXBvbmVudChwYWlyLmtleSksIHZhbHVlcyA9IHBhaXIudmFsdWU7CgogICAgICBpZiAodmFsdWVzICYmIHR5cGVvZiB2YWx1ZXMgPT0gJ29iamVjdCcpIHsKICAgICAgICBpZiAoT2JqZWN0LmlzQXJyYXkodmFsdWVzKSkgewogICAgICAgICAgdmFyIHF1ZXJ5VmFsdWVzID0gW107CiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdmFsdWVzLmxlbmd0aCwgdmFsdWU7IGkgPCBsZW47IGkrKykgewogICAgICAgICAgICB2YWx1ZSA9IHZhbHVlc1tpXTsKICAgICAgICAgICAgcXVlcnlWYWx1ZXMucHVzaCh0b1F1ZXJ5UGFpcihrZXksIHZhbHVlKSk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gcmVzdWx0cy5jb25jYXQocXVlcnlWYWx1ZXMpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHJlc3VsdHMucHVzaCh0b1F1ZXJ5UGFpcihrZXksIHZhbHVlcykpOwogICAgICByZXR1cm4gcmVzdWx0czsKICAgIH0pLmpvaW4oJyYnKTsKICB9CgogIGZ1bmN0aW9uIGluc3BlY3QoKSB7CiAgICByZXR1cm4gJyM8SGFzaDp7JyArIHRoaXMubWFwKGZ1bmN0aW9uKHBhaXIpIHsKICAgICAgcmV0dXJuIHBhaXIubWFwKE9iamVjdC5pbnNwZWN0KS5qb2luKCc6ICcpOwogICAgfSkuam9pbignLCAnKSArICd9Pic7CiAgfQoKICBmdW5jdGlvbiBjbG9uZSgpIHsKICAgIHJldHVybiBuZXcgSGFzaCh0aGlzKTsKICB9CgogIHJldHVybiB7CiAgICBpbml0aWFsaXplOiAgICAgICAgICAgICBpbml0aWFsaXplLAogICAgX2VhY2g6ICAgICAgICAgICAgICAgICAgX2VhY2gsCiAgICBzZXQ6ICAgICAgICAgICAgICAgICAgICBzZXQsCiAgICBnZXQ6ICAgICAgICAgICAgICAgICAgICBnZXQsCiAgICB1bnNldDogICAgICAgICAgICAgICAgICB1bnNldCwKICAgIHRvT2JqZWN0OiAgICAgICAgICAgICAgIHRvT2JqZWN0LAogICAgdG9UZW1wbGF0ZVJlcGxhY2VtZW50czogdG9PYmplY3QsCiAgICBrZXlzOiAgICAgICAgICAgICAgICAgICBrZXlzLAogICAgdmFsdWVzOiAgICAgICAgICAgICAgICAgdmFsdWVzLAogICAgaW5kZXg6ICAgICAgICAgICAgICAgICAgaW5kZXgsCiAgICBtZXJnZTogICAgICAgICAgICAgICAgICBtZXJnZSwKICAgIHVwZGF0ZTogICAgICAgICAgICAgICAgIHVwZGF0ZSwKICAgIHRvUXVlcnlTdHJpbmc6ICAgICAgICAgIHRvUXVlcnlTdHJpbmcsCiAgICBpbnNwZWN0OiAgICAgICAgICAgICAgICBpbnNwZWN0LAogICAgdG9KU09OOiAgICAgICAgICAgICAgICAgdG9PYmplY3QsCiAgICBjbG9uZTogICAgICAgICAgICAgICAgICBjbG9uZQogIH07Cn0pKCkpOwoKSGFzaC5mcm9tID0gJEg7Ck9iamVjdC5leHRlbmQoTnVtYmVyLnByb3RvdHlwZSwgKGZ1bmN0aW9uKCkgewogIGZ1bmN0aW9uIHRvQ29sb3JQYXJ0KCkgewogICAgcmV0dXJuIHRoaXMudG9QYWRkZWRTdHJpbmcoMiwgMTYpOwogIH0KCiAgZnVuY3Rpb24gc3VjYygpIHsKICAgIHJldHVybiB0aGlzICsgMTsKICB9CgogIGZ1bmN0aW9uIHRpbWVzKGl0ZXJhdG9yLCBjb250ZXh0KSB7CiAgICAkUigwLCB0aGlzLCB0cnVlKS5lYWNoKGl0ZXJhdG9yLCBjb250ZXh0KTsKICAgIHJldHVybiB0aGlzOwogIH0KCiAgZnVuY3Rpb24gdG9QYWRkZWRTdHJpbmcobGVuZ3RoLCByYWRpeCkgewogICAgdmFyIHN0cmluZyA9IHRoaXMudG9TdHJpbmcocmFkaXggfHwgMTApOwogICAgcmV0dXJuICcwJy50aW1lcyhsZW5ndGggLSBzdHJpbmcubGVuZ3RoKSArIHN0cmluZzsKICB9CgogIGZ1bmN0aW9uIGFicygpIHsKICAgIHJldHVybiBNYXRoLmFicyh0aGlzKTsKICB9CgogIGZ1bmN0aW9uIHJvdW5kKCkgewogICAgcmV0dXJuIE1hdGgucm91bmQodGhpcyk7CiAgfQoKICBmdW5jdGlvbiBjZWlsKCkgewogICAgcmV0dXJuIE1hdGguY2VpbCh0aGlzKTsKICB9CgogIGZ1bmN0aW9uIGZsb29yKCkgewogICAgcmV0dXJuIE1hdGguZmxvb3IodGhpcyk7CiAgfQoKICByZXR1cm4gewogICAgdG9Db2xvclBhcnQ6ICAgIHRvQ29sb3JQYXJ0LAogICAgc3VjYzogICAgICAgICAgIHN1Y2MsCiAgICB0aW1lczogICAgICAgICAgdGltZXMsCiAgICB0b1BhZGRlZFN0cmluZzogdG9QYWRkZWRTdHJpbmcsCiAgICBhYnM6ICAgICAgICAgICAgYWJzLAogICAgcm91bmQ6ICAgICAgICAgIHJvdW5kLAogICAgY2VpbDogICAgICAgICAgIGNlaWwsCiAgICBmbG9vcjogICAgICAgICAgZmxvb3IKICB9Owp9KSgpKTsKCmZ1bmN0aW9uICRSKHN0YXJ0LCBlbmQsIGV4Y2x1c2l2ZSkgewogIHJldHVybiBuZXcgT2JqZWN0UmFuZ2Uoc3RhcnQsIGVuZCwgZXhjbHVzaXZlKTsKfQoKdmFyIE9iamVjdFJhbmdlID0gQ2xhc3MuY3JlYXRlKEVudW1lcmFibGUsIChmdW5jdGlvbigpIHsKICBmdW5jdGlvbiBpbml0aWFsaXplKHN0YXJ0LCBlbmQsIGV4Y2x1c2l2ZSkgewogICAgdGhpcy5zdGFydCA9IHN0YXJ0OwogICAgdGhpcy5lbmQgPSBlbmQ7CiAgICB0aGlzLmV4Y2x1c2l2ZSA9IGV4Y2x1c2l2ZTsKICB9CgogIGZ1bmN0aW9uIF9lYWNoKGl0ZXJhdG9yLCBjb250ZXh0KSB7CiAgICB2YXIgdmFsdWUgPSB0aGlzLnN0YXJ0LCBpOwogICAgZm9yIChpID0gMDsgdGhpcy5pbmNsdWRlKHZhbHVlKTsgaSsrKSB7CiAgICAgIGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgdmFsdWUsIGkpOwogICAgICB2YWx1ZSA9IHZhbHVlLnN1Y2MoKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGluY2x1ZGUodmFsdWUpIHsKICAgIGlmICh2YWx1ZSA8IHRoaXMuc3RhcnQpCiAgICAgIHJldHVybiBmYWxzZTsKICAgIGlmICh0aGlzLmV4Y2x1c2l2ZSkKICAgICAgcmV0dXJuIHZhbHVlIDwgdGhpcy5lbmQ7CiAgICByZXR1cm4gdmFsdWUgPD0gdGhpcy5lbmQ7CiAgfQoKICByZXR1cm4gewogICAgaW5pdGlhbGl6ZTogaW5pdGlhbGl6ZSwKICAgIF9lYWNoOiAgICAgIF9lYWNoLAogICAgaW5jbHVkZTogICAgaW5jbHVkZQogIH07Cn0pKCkpOwoKCgp2YXIgQWJzdHJhY3QgPSB7IH07CgoKdmFyIFRyeSA9IHsKICB0aGVzZTogZnVuY3Rpb24oKSB7CiAgICB2YXIgcmV0dXJuVmFsdWU7CgogICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICB2YXIgbGFtYmRhID0gYXJndW1lbnRzW2ldOwogICAgICB0cnkgewogICAgICAgIHJldHVyblZhbHVlID0gbGFtYmRhKCk7CiAgICAgICAgYnJlYWs7CiAgICAgIH0gY2F0Y2ggKGUpIHsgfQogICAgfQoKICAgIHJldHVybiByZXR1cm5WYWx1ZTsKICB9Cn07Cgp2YXIgQWpheCA9IHsKICBnZXRUcmFuc3BvcnQ6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIFRyeS50aGVzZSgKICAgICAgZnVuY3Rpb24oKSB7cmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdCgpfSwKICAgICAgZnVuY3Rpb24oKSB7cmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KCdNc3htbDIuWE1MSFRUUCcpfSwKICAgICAgZnVuY3Rpb24oKSB7cmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KCdNaWNyb3NvZnQuWE1MSFRUUCcpfQogICAgKSB8fCBmYWxzZTsKICB9LAoKICBhY3RpdmVSZXF1ZXN0Q291bnQ6IDAKfTsKCkFqYXguUmVzcG9uZGVycyA9IHsKICByZXNwb25kZXJzOiBbXSwKCiAgX2VhY2g6IGZ1bmN0aW9uKGl0ZXJhdG9yLCBjb250ZXh0KSB7CiAgICB0aGlzLnJlc3BvbmRlcnMuX2VhY2goaXRlcmF0b3IsIGNvbnRleHQpOwogIH0sCgogIHJlZ2lzdGVyOiBmdW5jdGlvbihyZXNwb25kZXIpIHsKICAgIGlmICghdGhpcy5pbmNsdWRlKHJlc3BvbmRlcikpCiAgICAgIHRoaXMucmVzcG9uZGVycy5wdXNoKHJlc3BvbmRlcik7CiAgfSwKCiAgdW5yZWdpc3RlcjogZnVuY3Rpb24ocmVzcG9uZGVyKSB7CiAgICB0aGlzLnJlc3BvbmRlcnMgPSB0aGlzLnJlc3BvbmRlcnMud2l0aG91dChyZXNwb25kZXIpOwogIH0sCgogIGRpc3BhdGNoOiBmdW5jdGlvbihjYWxsYmFjaywgcmVxdWVzdCwgdHJhbnNwb3J0LCBqc29uKSB7CiAgICB0aGlzLmVhY2goZnVuY3Rpb24ocmVzcG9uZGVyKSB7CiAgICAgIGlmIChPYmplY3QuaXNGdW5jdGlvbihyZXNwb25kZXJbY2FsbGJhY2tdKSkgewogICAgICAgIHRyeSB7CiAgICAgICAgICByZXNwb25kZXJbY2FsbGJhY2tdLmFwcGx5KHJlc3BvbmRlciwgW3JlcXVlc3QsIHRyYW5zcG9ydCwganNvbl0pOwogICAgICAgIH0gY2F0Y2ggKGUpIHsgfQogICAgICB9CiAgICB9KTsKICB9Cn07CgpPYmplY3QuZXh0ZW5kKEFqYXguUmVzcG9uZGVycywgRW51bWVyYWJsZSk7CgpBamF4LlJlc3BvbmRlcnMucmVnaXN0ZXIoewogIG9uQ3JlYXRlOiAgIGZ1bmN0aW9uKCkgeyBBamF4LmFjdGl2ZVJlcXVlc3RDb3VudCsrIH0sCiAgb25Db21wbGV0ZTogZnVuY3Rpb24oKSB7IEFqYXguYWN0aXZlUmVxdWVzdENvdW50LS0gfQp9KTsKQWpheC5CYXNlID0gQ2xhc3MuY3JlYXRlKHsKICBpbml0aWFsaXplOiBmdW5jdGlvbihvcHRpb25zKSB7CiAgICB0aGlzLm9wdGlvbnMgPSB7CiAgICAgIG1ldGhvZDogICAgICAgJ3Bvc3QnLAogICAgICBhc3luY2hyb25vdXM6IHRydWUsCiAgICAgIGNvbnRlbnRUeXBlOiAgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsCiAgICAgIGVuY29kaW5nOiAgICAgJ1VURi04JywKICAgICAgcGFyYW1ldGVyczogICAnJywKICAgICAgZXZhbEpTT046ICAgICB0cnVlLAogICAgICBldmFsSlM6ICAgICAgIHRydWUKICAgIH07CiAgICBPYmplY3QuZXh0ZW5kKHRoaXMub3B0aW9ucywgb3B0aW9ucyB8fCB7IH0pOwoKICAgIHRoaXMub3B0aW9ucy5tZXRob2QgPSB0aGlzLm9wdGlvbnMubWV0aG9kLnRvTG93ZXJDYXNlKCk7CgogICAgaWYgKE9iamVjdC5pc0hhc2godGhpcy5vcHRpb25zLnBhcmFtZXRlcnMpKQogICAgICB0aGlzLm9wdGlvbnMucGFyYW1ldGVycyA9IHRoaXMub3B0aW9ucy5wYXJhbWV0ZXJzLnRvT2JqZWN0KCk7CiAgfQp9KTsKQWpheC5SZXF1ZXN0ID0gQ2xhc3MuY3JlYXRlKEFqYXguQmFzZSwgewogIF9jb21wbGV0ZTogZmFsc2UsCgogIGluaXRpYWxpemU6IGZ1bmN0aW9uKCRzdXBlciwgdXJsLCBvcHRpb25zKSB7CiAgICAkc3VwZXIob3B0aW9ucyk7CiAgICB0aGlzLnRyYW5zcG9ydCA9IEFqYXguZ2V0VHJhbnNwb3J0KCk7CiAgICB0aGlzLnJlcXVlc3QodXJsKTsKICB9LAoKICByZXF1ZXN0OiBmdW5jdGlvbih1cmwpIHsKICAgIHRoaXMudXJsID0gdXJsOwogICAgdGhpcy5tZXRob2QgPSB0aGlzLm9wdGlvbnMubWV0aG9kOwogICAgdmFyIHBhcmFtcyA9IE9iamVjdC5pc1N0cmluZyh0aGlzLm9wdGlvbnMucGFyYW1ldGVycykgPwogICAgICAgICAgdGhpcy5vcHRpb25zLnBhcmFtZXRlcnMgOgogICAgICAgICAgT2JqZWN0LnRvUXVlcnlTdHJpbmcodGhpcy5vcHRpb25zLnBhcmFtZXRlcnMpOwoKICAgIGlmICghWydnZXQnLCAncG9zdCddLmluY2x1ZGUodGhpcy5tZXRob2QpKSB7CiAgICAgIHBhcmFtcyArPSAocGFyYW1zID8gJyYnIDogJycpICsgIl9tZXRob2Q9IiArIHRoaXMubWV0aG9kOwogICAgICB0aGlzLm1ldGhvZCA9ICdwb3N0JzsKICAgIH0KCiAgICBpZiAocGFyYW1zICYmIHRoaXMubWV0aG9kID09PSAnZ2V0JykgewogICAgICB0aGlzLnVybCArPSAodGhpcy51cmwuaW5jbHVkZSgnPycpID8gJyYnIDogJz8nKSArIHBhcmFtczsKICAgIH0KCiAgICB0aGlzLnBhcmFtZXRlcnMgPSBwYXJhbXMudG9RdWVyeVBhcmFtcygpOwoKICAgIHRyeSB7CiAgICAgIHZhciByZXNwb25zZSA9IG5ldyBBamF4LlJlc3BvbnNlKHRoaXMpOwogICAgICBpZiAodGhpcy5vcHRpb25zLm9uQ3JlYXRlKSB0aGlzLm9wdGlvbnMub25DcmVhdGUocmVzcG9uc2UpOwogICAgICBBamF4LlJlc3BvbmRlcnMuZGlzcGF0Y2goJ29uQ3JlYXRlJywgdGhpcywgcmVzcG9uc2UpOwoKICAgICAgdGhpcy50cmFuc3BvcnQub3Blbih0aGlzLm1ldGhvZC50b1VwcGVyQ2FzZSgpLCB0aGlzLnVybCwKICAgICAgICB0aGlzLm9wdGlvbnMuYXN5bmNocm9ub3VzKTsKCiAgICAgIGlmICh0aGlzLm9wdGlvbnMuYXN5bmNocm9ub3VzKSB0aGlzLnJlc3BvbmRUb1JlYWR5U3RhdGUuYmluZCh0aGlzKS5kZWZlcigxKTsKCiAgICAgIHRoaXMudHJhbnNwb3J0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IHRoaXMub25TdGF0ZUNoYW5nZS5iaW5kKHRoaXMpOwogICAgICB0aGlzLnNldFJlcXVlc3RIZWFkZXJzKCk7CgogICAgICB0aGlzLmJvZHkgPSB0aGlzLm1ldGhvZCA9PSAncG9zdCcgPyAodGhpcy5vcHRpb25zLnBvc3RCb2R5IHx8IHBhcmFtcykgOiBudWxsOwogICAgICB0aGlzLnRyYW5zcG9ydC5zZW5kKHRoaXMuYm9keSk7CgogICAgICAvKiBGb3JjZSBGaXJlZm94IHRvIGhhbmRsZSByZWFkeSBzdGF0ZSA0IGZvciBzeW5jaHJvbm91cyByZXF1ZXN0cyAqLwogICAgICBpZiAoIXRoaXMub3B0aW9ucy5hc3luY2hyb25vdXMgJiYgdGhpcy50cmFuc3BvcnQub3ZlcnJpZGVNaW1lVHlwZSkKICAgICAgICB0aGlzLm9uU3RhdGVDaGFuZ2UoKTsKCiAgICB9CiAgICBjYXRjaCAoZSkgewogICAgICB0aGlzLmRpc3BhdGNoRXhjZXB0aW9uKGUpOwogICAgfQogIH0sCgogIG9uU3RhdGVDaGFuZ2U6IGZ1bmN0aW9uKCkgewogICAgdmFyIHJlYWR5U3RhdGUgPSB0aGlzLnRyYW5zcG9ydC5yZWFkeVN0YXRlOwogICAgaWYgKHJlYWR5U3RhdGUgPiAxICYmICEoKHJlYWR5U3RhdGUgPT0gNCkgJiYgdGhpcy5fY29tcGxldGUpKQogICAgICB0aGlzLnJlc3BvbmRUb1JlYWR5U3RhdGUodGhpcy50cmFuc3BvcnQucmVhZHlTdGF0ZSk7CiAgfSwKCiAgc2V0UmVxdWVzdEhlYWRlcnM6IGZ1bmN0aW9uKCkgewogICAgdmFyIGhlYWRlcnMgPSB7CiAgICAgICdYLVJlcXVlc3RlZC1XaXRoJzogJ1hNTEh0dHBSZXF1ZXN0JywKICAgICAgJ1gtUHJvdG90eXBlLVZlcnNpb24nOiBQcm90b3R5cGUuVmVyc2lvbiwKICAgICAgJ0FjY2VwdCc6ICd0ZXh0L2phdmFzY3JpcHQsIHRleHQvaHRtbCwgYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCwgKi8qJwogICAgfTsKCiAgICBpZiAodGhpcy5tZXRob2QgPT0gJ3Bvc3QnKSB7CiAgICAgIGhlYWRlcnNbJ0NvbnRlbnQtdHlwZSddID0gdGhpcy5vcHRpb25zLmNvbnRlbnRUeXBlICsKICAgICAgICAodGhpcy5vcHRpb25zLmVuY29kaW5nID8gJzsgY2hhcnNldD0nICsgdGhpcy5vcHRpb25zLmVuY29kaW5nIDogJycpOwoKICAgICAgLyogRm9yY2UgIkNvbm5lY3Rpb246IGNsb3NlIiBmb3Igb2xkZXIgTW96aWxsYSBicm93c2VycyB0byB3b3JrCiAgICAgICAqIGFyb3VuZCBhIGJ1ZyB3aGVyZSBYTUxIdHRwUmVxdWVzdCBzZW5kcyBhbiBpbmNvcnJlY3QKICAgICAgICogQ29udGVudC1sZW5ndGggaGVhZGVyLiBTZWUgTW96aWxsYSBCdWd6aWxsYSAjMjQ2NjUxLgogICAgICAgKi8KICAgICAgaWYgKHRoaXMudHJhbnNwb3J0Lm92ZXJyaWRlTWltZVR5cGUgJiYKICAgICAgICAgIChuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9HZWNrb1wvKFxkezR9KS8pIHx8IFswLDIwMDVdKVsxXSA8IDIwMDUpCiAgICAgICAgICAgIGhlYWRlcnNbJ0Nvbm5lY3Rpb24nXSA9ICdjbG9zZSc7CiAgICB9CgogICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMucmVxdWVzdEhlYWRlcnMgPT0gJ29iamVjdCcpIHsKICAgICAgdmFyIGV4dHJhcyA9IHRoaXMub3B0aW9ucy5yZXF1ZXN0SGVhZGVyczsKCiAgICAgIGlmIChPYmplY3QuaXNGdW5jdGlvbihleHRyYXMucHVzaCkpCiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGV4dHJhcy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkgKz0gMikKICAgICAgICAgIGhlYWRlcnNbZXh0cmFzW2ldXSA9IGV4dHJhc1tpKzFdOwogICAgICBlbHNlCiAgICAgICAgJEgoZXh0cmFzKS5lYWNoKGZ1bmN0aW9uKHBhaXIpIHsgaGVhZGVyc1twYWlyLmtleV0gPSBwYWlyLnZhbHVlIH0pOwogICAgfQoKICAgIGZvciAodmFyIG5hbWUgaW4gaGVhZGVycykKICAgICAgaWYgKGhlYWRlcnNbbmFtZV0gIT0gbnVsbCkKICAgICAgICB0aGlzLnRyYW5zcG9ydC5zZXRSZXF1ZXN0SGVhZGVyKG5hbWUsIGhlYWRlcnNbbmFtZV0pOwogIH0sCgogIHN1Y2Nlc3M6IGZ1bmN0aW9uKCkgewogICAgdmFyIHN0YXR1cyA9IHRoaXMuZ2V0U3RhdHVzKCk7CiAgICByZXR1cm4gIXN0YXR1cyB8fCAoc3RhdHVzID49IDIwMCAmJiBzdGF0dXMgPCAzMDApIHx8IHN0YXR1cyA9PSAzMDQ7CiAgfSwKCiAgZ2V0U3RhdHVzOiBmdW5jdGlvbigpIHsKICAgIHRyeSB7CiAgICAgIGlmICh0aGlzLnRyYW5zcG9ydC5zdGF0dXMgPT09IDEyMjMpIHJldHVybiAyMDQ7CiAgICAgIHJldHVybiB0aGlzLnRyYW5zcG9ydC5zdGF0dXMgfHwgMDsKICAgIH0gY2F0Y2ggKGUpIHsgcmV0dXJuIDAgfQogIH0sCgogIHJlc3BvbmRUb1JlYWR5U3RhdGU6IGZ1bmN0aW9uKHJlYWR5U3RhdGUpIHsKICAgIHZhciBzdGF0ZSA9IEFqYXguUmVxdWVzdC5FdmVudHNbcmVhZHlTdGF0ZV0sIHJlc3BvbnNlID0gbmV3IEFqYXguUmVzcG9uc2UodGhpcyk7CgogICAgaWYgKHN0YXRlID09ICdDb21wbGV0ZScpIHsKICAgICAgdHJ5IHsKICAgICAgICB0aGlzLl9jb21wbGV0ZSA9IHRydWU7CiAgICAgICAgKHRoaXMub3B0aW9uc1snb24nICsgcmVzcG9uc2Uuc3RhdHVzXQogICAgICAgICB8fCB0aGlzLm9wdGlvbnNbJ29uJyArICh0aGlzLnN1Y2Nlc3MoKSA/ICdTdWNjZXNzJyA6ICdGYWlsdXJlJyldCiAgICAgICAgIHx8IFByb3RvdHlwZS5lbXB0eUZ1bmN0aW9uKShyZXNwb25zZSwgcmVzcG9uc2UuaGVhZGVySlNPTik7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICB0aGlzLmRpc3BhdGNoRXhjZXB0aW9uKGUpOwogICAgICB9CgogICAgICB2YXIgY29udGVudFR5cGUgPSByZXNwb25zZS5nZXRIZWFkZXIoJ0NvbnRlbnQtdHlwZScpOwogICAgICBpZiAodGhpcy5vcHRpb25zLmV2YWxKUyA9PSAnZm9yY2UnCiAgICAgICAgICB8fCAodGhpcy5vcHRpb25zLmV2YWxKUyAmJiB0aGlzLmlzU2FtZU9yaWdpbigpICYmIGNvbnRlbnRUeXBlCiAgICAgICAgICAmJiBjb250ZW50VHlwZS5tYXRjaCgvXlxzKih0ZXh0fGFwcGxpY2F0aW9uKVwvKHgtKT8oamF2YXxlY21hKXNjcmlwdCg7LiopP1xzKiQvaSkpKQogICAgICAgIHRoaXMuZXZhbFJlc3BvbnNlKCk7CiAgICB9CgogICAgdHJ5IHsKICAgICAgKHRoaXMub3B0aW9uc1snb24nICsgc3RhdGVdIHx8IFByb3RvdHlwZS5lbXB0eUZ1bmN0aW9uKShyZXNwb25zZSwgcmVzcG9uc2UuaGVhZGVySlNPTik7CiAgICAgIEFqYXguUmVzcG9uZGVycy5kaXNwYXRjaCgnb24nICsgc3RhdGUsIHRoaXMsIHJlc3BvbnNlLCByZXNwb25zZS5oZWFkZXJKU09OKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdGhpcy5kaXNwYXRjaEV4Y2VwdGlvbihlKTsKICAgIH0KCiAgICBpZiAoc3RhdGUgPT0gJ0NvbXBsZXRlJykgewogICAgICB0aGlzLnRyYW5zcG9ydC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBQcm90b3R5cGUuZW1wdHlGdW5jdGlvbjsKICAgIH0KICB9LAoKICBpc1NhbWVPcmlnaW46IGZ1bmN0aW9uKCkgewogICAgdmFyIG0gPSB0aGlzLnVybC5tYXRjaCgvXlxzKmh0dHBzPzpcL1wvW15cL10qLyk7CiAgICByZXR1cm4gIW0gfHwgKG1bMF0gPT0gJyN7cHJvdG9jb2x9Ly8je2RvbWFpbn0je3BvcnR9Jy5pbnRlcnBvbGF0ZSh7CiAgICAgIHByb3RvY29sOiBsb2NhdGlvbi5wcm90b2NvbCwKICAgICAgZG9tYWluOiBkb2N1bWVudC5kb21haW4sCiAgICAgIHBvcnQ6IGxvY2F0aW9uLnBvcnQgPyAnOicgKyBsb2NhdGlvbi5wb3J0IDogJycKICAgIH0pKTsKICB9LAoKICBnZXRIZWFkZXI6IGZ1bmN0aW9uKG5hbWUpIHsKICAgIHRyeSB7CiAgICAgIHJldHVybiB0aGlzLnRyYW5zcG9ydC5nZXRSZXNwb25zZUhlYWRlcihuYW1lKSB8fCBudWxsOwogICAgfSBjYXRjaCAoZSkgeyByZXR1cm4gbnVsbDsgfQogIH0sCgogIGV2YWxSZXNwb25zZTogZnVuY3Rpb24oKSB7CiAgICB0cnkgewogICAgICByZXR1cm4gZXZhbCgodGhpcy50cmFuc3BvcnQucmVzcG9uc2VUZXh0IHx8ICcnKS51bmZpbHRlckpTT04oKSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHRoaXMuZGlzcGF0Y2hFeGNlcHRpb24oZSk7CiAgICB9CiAgfSwKCiAgZGlzcGF0Y2hFeGNlcHRpb246IGZ1bmN0aW9uKGV4Y2VwdGlvbikgewogICAgKHRoaXMub3B0aW9ucy5vbkV4Y2VwdGlvbiB8fCBQcm90b3R5cGUuZW1wdHlGdW5jdGlvbikodGhpcywgZXhjZXB0aW9uKTsKICAgIEFqYXguUmVzcG9uZGVycy5kaXNwYXRjaCgnb25FeGNlcHRpb24nLCB0aGlzLCBleGNlcHRpb24pOwogIH0KfSk7CgpBamF4LlJlcXVlc3QuRXZlbnRzID0KICBbJ1VuaW5pdGlhbGl6ZWQnLCAnTG9hZGluZycsICdMb2FkZWQnLCAnSW50ZXJhY3RpdmUnLCAnQ29tcGxldGUnXTsKCgoKCgoKCgpBamF4LlJlc3BvbnNlID0gQ2xhc3MuY3JlYXRlKHsKICBpbml0aWFsaXplOiBmdW5jdGlvbihyZXF1ZXN0KXsKICAgIHRoaXMucmVxdWVzdCA9IHJlcXVlc3Q7CiAgICB2YXIgdHJhbnNwb3J0ICA9IHRoaXMudHJhbnNwb3J0ICA9IHJlcXVlc3QudHJhbnNwb3J0LAogICAgICAgIHJlYWR5U3RhdGUgPSB0aGlzLnJlYWR5U3RhdGUgPSB0cmFuc3BvcnQucmVhZHlTdGF0ZTsKCiAgICBpZiAoKHJlYWR5U3RhdGUgPiAyICYmICFQcm90b3R5cGUuQnJvd3Nlci5JRSkgfHwgcmVhZHlTdGF0ZSA9PSA0KSB7CiAgICAgIHRoaXMuc3RhdHVzICAgICAgID0gdGhpcy5nZXRTdGF0dXMoKTsKICAgICAgdGhpcy5zdGF0dXNUZXh0ICAgPSB0aGlzLmdldFN0YXR1c1RleHQoKTsKICAgICAgdGhpcy5yZXNwb25zZVRleHQgPSBTdHJpbmcuaW50ZXJwcmV0KHRyYW5zcG9ydC5yZXNwb25zZVRleHQpOwogICAgICB0aGlzLmhlYWRlckpTT04gICA9IHRoaXMuX2dldEhlYWRlckpTT04oKTsKICAgIH0KCiAgICBpZiAocmVhZHlTdGF0ZSA9PSA0KSB7CiAgICAgIHZhciB4bWwgPSB0cmFuc3BvcnQucmVzcG9uc2VYTUw7CiAgICAgIHRoaXMucmVzcG9uc2VYTUwgID0gT2JqZWN0LmlzVW5kZWZpbmVkKHhtbCkgPyBudWxsIDogeG1sOwogICAgICB0aGlzLnJlc3BvbnNlSlNPTiA9IHRoaXMuX2dldFJlc3BvbnNlSlNPTigpOwogICAgfQogIH0sCgogIHN0YXR1czogICAgICAwLAoKICBzdGF0dXNUZXh0OiAnJywKCiAgZ2V0U3RhdHVzOiBBamF4LlJlcXVlc3QucHJvdG90eXBlLmdldFN0YXR1cywKCiAgZ2V0U3RhdHVzVGV4dDogZnVuY3Rpb24oKSB7CiAgICB0cnkgewogICAgICByZXR1cm4gdGhpcy50cmFuc3BvcnQuc3RhdHVzVGV4dCB8fCAnJzsKICAgIH0gY2F0Y2ggKGUpIHsgcmV0dXJuICcnIH0KICB9LAoKICBnZXRIZWFkZXI6IEFqYXguUmVxdWVzdC5wcm90b3R5cGUuZ2V0SGVhZGVyLAoKICBnZXRBbGxIZWFkZXJzOiBmdW5jdGlvbigpIHsKICAgIHRyeSB7CiAgICAgIHJldHVybiB0aGlzLmdldEFsbFJlc3BvbnNlSGVhZGVycygpOwogICAgfSBjYXRjaCAoZSkgeyByZXR1cm4gbnVsbCB9CiAgfSwKCiAgZ2V0UmVzcG9uc2VIZWFkZXI6IGZ1bmN0aW9uKG5hbWUpIHsKICAgIHJldHVybiB0aGlzLnRyYW5zcG9ydC5nZXRSZXNwb25zZUhlYWRlcihuYW1lKTsKICB9LAoKICBnZXRBbGxSZXNwb25zZUhlYWRlcnM6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHRoaXMudHJhbnNwb3J0LmdldEFsbFJlc3BvbnNlSGVhZGVycygpOwogIH0sCgogIF9nZXRIZWFkZXJKU09OOiBmdW5jdGlvbigpIHsKICAgIHZhciBqc29uID0gdGhpcy5nZXRIZWFkZXIoJ1gtSlNPTicpOwogICAgaWYgKCFqc29uKSByZXR1cm4gbnVsbDsKCiAgICB0cnkgewogICAgICBqc29uID0gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShqc29uKSk7CiAgICB9IGNhdGNoKGUpIHsKICAgIH0KCiAgICB0cnkgewogICAgICByZXR1cm4ganNvbi5ldmFsSlNPTih0aGlzLnJlcXVlc3Qub3B0aW9ucy5zYW5pdGl6ZUpTT04gfHwKICAgICAgICAhdGhpcy5yZXF1ZXN0LmlzU2FtZU9yaWdpbigpKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdGhpcy5yZXF1ZXN0LmRpc3BhdGNoRXhjZXB0aW9uKGUpOwogICAgfQogIH0sCgogIF9nZXRSZXNwb25zZUpTT046IGZ1bmN0aW9uKCkgewogICAgdmFyIG9wdGlvbnMgPSB0aGlzLnJlcXVlc3Qub3B0aW9uczsKICAgIGlmICghb3B0aW9ucy5ldmFsSlNPTiB8fCAob3B0aW9ucy5ldmFsSlNPTiAhPSAnZm9yY2UnICYmCiAgICAgICEodGhpcy5nZXRIZWFkZXIoJ0NvbnRlbnQtdHlwZScpIHx8ICcnKS5pbmNsdWRlKCdhcHBsaWNhdGlvbi9qc29uJykpIHx8CiAgICAgICAgdGhpcy5yZXNwb25zZVRleHQuYmxhbmsoKSkKICAgICAgICAgIHJldHVybiBudWxsOwogICAgdHJ5IHsKICAgICAgcmV0dXJuIHRoaXMucmVzcG9uc2VUZXh0LmV2YWxKU09OKG9wdGlvbnMuc2FuaXRpemVKU09OIHx8CiAgICAgICAgIXRoaXMucmVxdWVzdC5pc1NhbWVPcmlnaW4oKSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHRoaXMucmVxdWVzdC5kaXNwYXRjaEV4Y2VwdGlvbihlKTsKICAgIH0KICB9Cn0pOwoKQWpheC5VcGRhdGVyID0gQ2xhc3MuY3JlYXRlKEFqYXguUmVxdWVzdCwgewogIGluaXRpYWxpemU6IGZ1bmN0aW9uKCRzdXBlciwgY29udGFpbmVyLCB1cmwsIG9wdGlvbnMpIHsKICAgIHRoaXMuY29udGFpbmVyID0gewogICAgICBzdWNjZXNzOiAoY29udGFpbmVyLnN1Y2Nlc3MgfHwgY29udGFpbmVyKSwKICAgICAgZmFpbHVyZTogKGNvbnRhaW5lci5mYWlsdXJlIHx8IChjb250YWluZXIuc3VjY2VzcyA/IG51bGwgOiBjb250YWluZXIpKQogICAgfTsKCiAgICBvcHRpb25zID0gT2JqZWN0LmNsb25lKG9wdGlvbnMpOwogICAgdmFyIG9uQ29tcGxldGUgPSBvcHRpb25zLm9uQ29tcGxldGU7CiAgICBvcHRpb25zLm9uQ29tcGxldGUgPSAoZnVuY3Rpb24ocmVzcG9uc2UsIGpzb24pIHsKICAgICAgdGhpcy51cGRhdGVDb250ZW50KHJlc3BvbnNlLnJlc3BvbnNlVGV4dCk7CiAgICAgIGlmIChPYmplY3QuaXNGdW5jdGlvbihvbkNvbXBsZXRlKSkgb25Db21wbGV0ZShyZXNwb25zZSwganNvbik7CiAgICB9KS5iaW5kKHRoaXMpOwoKICAgICRzdXBlcih1cmwsIG9wdGlvbnMpOwogIH0sCgogIHVwZGF0ZUNvbnRlbnQ6IGZ1bmN0aW9uKHJlc3BvbnNlVGV4dCkgewogICAgdmFyIHJlY2VpdmVyID0gdGhpcy5jb250YWluZXJbdGhpcy5zdWNjZXNzKCkgPyAnc3VjY2VzcycgOiAnZmFpbHVyZSddLAogICAgICAgIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7CgogICAgaWYgKCFvcHRpb25zLmV2YWxTY3JpcHRzKSByZXNwb25zZVRleHQgPSByZXNwb25zZVRleHQuc3RyaXBTY3JpcHRzKCk7CgogICAgaWYgKHJlY2VpdmVyID0gJChyZWNlaXZlcikpIHsKICAgICAgaWYgKG9wdGlvbnMuaW5zZXJ0aW9uKSB7CiAgICAgICAgaWYgKE9iamVjdC5pc1N0cmluZyhvcHRpb25zLmluc2VydGlvbikpIHsKICAgICAgICAgIHZhciBpbnNlcnRpb24gPSB7IH07IGluc2VydGlvbltvcHRpb25zLmluc2VydGlvbl0gPSByZXNwb25zZVRleHQ7CiAgICAgICAgICByZWNlaXZlci5pbnNlcnQoaW5zZXJ0aW9uKTsKICAgICAgICB9CiAgICAgICAgZWxzZSBvcHRpb25zLmluc2VydGlvbihyZWNlaXZlciwgcmVzcG9uc2VUZXh0KTsKICAgICAgfQogICAgICBlbHNlIHJlY2VpdmVyLnVwZGF0ZShyZXNwb25zZVRleHQpOwogICAgfQogIH0KfSk7CgpBamF4LlBlcmlvZGljYWxVcGRhdGVyID0gQ2xhc3MuY3JlYXRlKEFqYXguQmFzZSwgewogIGluaXRpYWxpemU6IGZ1bmN0aW9uKCRzdXBlciwgY29udGFpbmVyLCB1cmwsIG9wdGlvbnMpIHsKICAgICRzdXBlcihvcHRpb25zKTsKICAgIHRoaXMub25Db21wbGV0ZSA9IHRoaXMub3B0aW9ucy5vbkNvbXBsZXRlOwoKICAgIHRoaXMuZnJlcXVlbmN5ID0gKHRoaXMub3B0aW9ucy5mcmVxdWVuY3kgfHwgMik7CiAgICB0aGlzLmRlY2F5ID0gKHRoaXMub3B0aW9ucy5kZWNheSB8fCAxKTsKCiAgICB0aGlzLnVwZGF0ZXIgPSB7IH07CiAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjsKICAgIHRoaXMudXJsID0gdXJsOwoKICAgIHRoaXMuc3RhcnQoKTsKICB9LAoKICBzdGFydDogZnVuY3Rpb24oKSB7CiAgICB0aGlzLm9wdGlvbnMub25Db21wbGV0ZSA9IHRoaXMudXBkYXRlQ29tcGxldGUuYmluZCh0aGlzKTsKICAgIHRoaXMub25UaW1lckV2ZW50KCk7CiAgfSwKCiAgc3RvcDogZnVuY3Rpb24oKSB7CiAgICB0aGlzLnVwZGF0ZXIub3B0aW9ucy5vbkNvbXBsZXRlID0gdW5kZWZpbmVkOwogICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpOwogICAgKHRoaXMub25Db21wbGV0ZSB8fCBQcm90b3R5cGUuZW1wdHlGdW5jdGlvbikuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9LAoKICB1cGRhdGVDb21wbGV0ZTogZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgIGlmICh0aGlzLm9wdGlvbnMuZGVjYXkpIHsKICAgICAgdGhpcy5kZWNheSA9IChyZXNwb25zZS5yZXNwb25zZVRleHQgPT0gdGhpcy5sYXN0VGV4dCA/CiAgICAgICAgdGhpcy5kZWNheSAqIHRoaXMub3B0aW9ucy5kZWNheSA6IDEpOwoKICAgICAgdGhpcy5sYXN0VGV4dCA9IHJlc3BvbnNlLnJlc3BvbnNlVGV4dDsKICAgIH0KICAgIHRoaXMudGltZXIgPSB0aGlzLm9uVGltZXJFdmVudC5iaW5kKHRoaXMpLmRlbGF5KHRoaXMuZGVjYXkgKiB0aGlzLmZyZXF1ZW5jeSk7CiAgfSwKCiAgb25UaW1lckV2ZW50OiBmdW5jdGlvbigpIHsKICAgIHRoaXMudXBkYXRlciA9IG5ldyBBamF4LlVwZGF0ZXIodGhpcy5jb250YWluZXIsIHRoaXMudXJsLCB0aGlzLm9wdGlvbnMpOwogIH0KfSk7CgooZnVuY3Rpb24oR0xPQkFMKSB7CgogIHZhciBVTkRFRklORUQ7CiAgdmFyIFNMSUNFID0gQXJyYXkucHJvdG90eXBlLnNsaWNlOwoKICB2YXIgRElWID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CgoKICBmdW5jdGlvbiAkKGVsZW1lbnQpIHsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkgewogICAgICBmb3IgKHZhciBpID0gMCwgZWxlbWVudHMgPSBbXSwgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKQogICAgICAgIGVsZW1lbnRzLnB1c2goJChhcmd1bWVudHNbaV0pKTsKICAgICAgcmV0dXJuIGVsZW1lbnRzOwogICAgfQoKICAgIGlmIChPYmplY3QuaXNTdHJpbmcoZWxlbWVudCkpCiAgICAgIGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50KTsKICAgIHJldHVybiBFbGVtZW50LmV4dGVuZChlbGVtZW50KTsKICB9CgogIEdMT0JBTC4kID0gJDsKCgogIGlmICghR0xPQkFMLk5vZGUpIEdMT0JBTC5Ob2RlID0ge307CgogIGlmICghR0xPQkFMLk5vZGUuRUxFTUVOVF9OT0RFKSB7CiAgICBPYmplY3QuZXh0ZW5kKEdMT0JBTC5Ob2RlLCB7CiAgICAgIEVMRU1FTlRfTk9ERTogICAgICAgICAgICAgICAgMSwKICAgICAgQVRUUklCVVRFX05PREU6ICAgICAgICAgICAgICAyLAogICAgICBURVhUX05PREU6ICAgICAgICAgICAgICAgICAgIDMsCiAgICAgIENEQVRBX1NFQ1RJT05fTk9ERTogICAgICAgICAgNCwKICAgICAgRU5USVRZX1JFRkVSRU5DRV9OT0RFOiAgICAgICA1LAogICAgICBFTlRJVFlfTk9ERTogICAgICAgICAgICAgICAgIDYsCiAgICAgIFBST0NFU1NJTkdfSU5TVFJVQ1RJT05fTk9ERTogNywKICAgICAgQ09NTUVOVF9OT0RFOiAgICAgICAgICAgICAgICA4LAogICAgICBET0NVTUVOVF9OT0RFOiAgICAgICAgICAgICAgIDksCiAgICAgIERPQ1VNRU5UX1RZUEVfTk9ERTogICAgICAgICAxMCwKICAgICAgRE9DVU1FTlRfRlJBR01FTlRfTk9ERTogICAgIDExLAogICAgICBOT1RBVElPTl9OT0RFOiAgICAgICAgICAgICAgMTIKICAgIH0pOwogIH0KCiAgdmFyIEVMRU1FTlRfQ0FDSEUgPSB7fTsKCiAgZnVuY3Rpb24gc2hvdWxkVXNlQ3JlYXRpb25DYWNoZSh0YWdOYW1lLCBhdHRyaWJ1dGVzKSB7CiAgICBpZiAodGFnTmFtZSA9PT0gJ3NlbGVjdCcpIHJldHVybiBmYWxzZTsKICAgIGlmICgndHlwZScgaW4gYXR0cmlidXRlcykgcmV0dXJuIGZhbHNlOwogICAgcmV0dXJuIHRydWU7CiAgfQoKICB2YXIgSEFTX0VYVEVOREVEX0NSRUFURV9FTEVNRU5UX1NZTlRBWCA9IChmdW5jdGlvbigpewogICAgdHJ5IHsKICAgICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnPGlucHV0IG5hbWU9IngiPicpOwogICAgICByZXR1cm4gZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW5wdXQnICYmIGVsLm5hbWUgPT09ICd4JzsKICAgIH0KICAgIGNhdGNoKGVycikgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfSkoKTsKCgogIHZhciBvbGRFbGVtZW50ID0gR0xPQkFMLkVsZW1lbnQ7CiAgZnVuY3Rpb24gRWxlbWVudCh0YWdOYW1lLCBhdHRyaWJ1dGVzKSB7CiAgICBhdHRyaWJ1dGVzID0gYXR0cmlidXRlcyB8fCB7fTsKICAgIHRhZ05hbWUgPSB0YWdOYW1lLnRvTG93ZXJDYXNlKCk7CgogICAgaWYgKEhBU19FWFRFTkRFRF9DUkVBVEVfRUxFTUVOVF9TWU5UQVggJiYgYXR0cmlidXRlcy5uYW1lKSB7CiAgICAgIHRhZ05hbWUgPSAnPCcgKyB0YWdOYW1lICsgJyBuYW1lPSInICsgYXR0cmlidXRlcy5uYW1lICsgJyI+JzsKICAgICAgZGVsZXRlIGF0dHJpYnV0ZXMubmFtZTsKICAgICAgcmV0dXJuIEVsZW1lbnQud3JpdGVBdHRyaWJ1dGUoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKSwgYXR0cmlidXRlcyk7CiAgICB9CgogICAgaWYgKCFFTEVNRU5UX0NBQ0hFW3RhZ05hbWVdKQogICAgICBFTEVNRU5UX0NBQ0hFW3RhZ05hbWVdID0gRWxlbWVudC5leHRlbmQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKSk7CgogICAgdmFyIG5vZGUgPSBzaG91bGRVc2VDcmVhdGlvbkNhY2hlKHRhZ05hbWUsIGF0dHJpYnV0ZXMpID8KICAgICBFTEVNRU5UX0NBQ0hFW3RhZ05hbWVdLmNsb25lTm9kZShmYWxzZSkgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpOwoKICAgIHJldHVybiBFbGVtZW50LndyaXRlQXR0cmlidXRlKG5vZGUsIGF0dHJpYnV0ZXMpOwogIH0KCiAgR0xPQkFMLkVsZW1lbnQgPSBFbGVtZW50OwoKICBPYmplY3QuZXh0ZW5kKEdMT0JBTC5FbGVtZW50LCBvbGRFbGVtZW50IHx8IHt9KTsKICBpZiAob2xkRWxlbWVudCkgR0xPQkFMLkVsZW1lbnQucHJvdG90eXBlID0gb2xkRWxlbWVudC5wcm90b3R5cGU7CgogIEVsZW1lbnQuTWV0aG9kcyA9IHsgQnlUYWc6IHt9LCBTaW11bGF0ZWQ6IHt9IH07CgogIHZhciBtZXRob2RzID0ge307CgogIHZhciBJTlNQRUNUX0FUVFJJQlVURVMgPSB7IGlkOiAnaWQnLCBjbGFzc05hbWU6ICdjbGFzcycgfTsKICBmdW5jdGlvbiBpbnNwZWN0KGVsZW1lbnQpIHsKICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOwogICAgdmFyIHJlc3VsdCA9ICc8JyArIGVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpOwoKICAgIHZhciBhdHRyaWJ1dGUsIHZhbHVlOwogICAgZm9yICh2YXIgcHJvcGVydHkgaW4gSU5TUEVDVF9BVFRSSUJVVEVTKSB7CiAgICAgIGF0dHJpYnV0ZSA9IElOU1BFQ1RfQVRUUklCVVRFU1twcm9wZXJ0eV07CiAgICAgIHZhbHVlID0gKGVsZW1lbnRbcHJvcGVydHldIHx8ICcnKS50b1N0cmluZygpOwogICAgICBpZiAodmFsdWUpIHJlc3VsdCArPSAnICcgKyBhdHRyaWJ1dGUgKyAnPScgKyB2YWx1ZS5pbnNwZWN0KHRydWUpOwogICAgfQoKICAgIHJldHVybiByZXN1bHQgKyAnPic7CiAgfQoKICBtZXRob2RzLmluc3BlY3QgPSBpbnNwZWN0OwoKCiAgZnVuY3Rpb24gdmlzaWJsZShlbGVtZW50KSB7CiAgICByZXR1cm4gJChlbGVtZW50KS5nZXRTdHlsZSgnZGlzcGxheScpICE9PSAnbm9uZSc7CiAgfQoKICBmdW5jdGlvbiB0b2dnbGUoZWxlbWVudCwgYm9vbCkgewogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7CiAgICBpZiAodHlwZW9mIGJvb2wgIT09ICdib29sZWFuJykKICAgICAgYm9vbCA9ICFFbGVtZW50LnZpc2libGUoZWxlbWVudCk7CiAgICBFbGVtZW50W2Jvb2wgPyAnc2hvdycgOiAnaGlkZSddKGVsZW1lbnQpOwoKICAgIHJldHVybiBlbGVtZW50OwogIH0KCiAgZnVuY3Rpb24gaGlkZShlbGVtZW50KSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgIHJldHVybiBlbGVtZW50OwogIH0KCiAgZnVuY3Rpb24gc2hvdyhlbGVtZW50KSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICcnOwogICAgcmV0dXJuIGVsZW1lbnQ7CiAgfQoKCiAgT2JqZWN0LmV4dGVuZChtZXRob2RzLCB7CiAgICB2aXNpYmxlOiB2aXNpYmxlLAogICAgdG9nZ2xlOiAgdG9nZ2xlLAogICAgaGlkZTogICAgaGlkZSwKICAgIHNob3c6ICAgIHNob3cKICB9KTsKCgogIGZ1bmN0aW9uIHJlbW92ZShlbGVtZW50KSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKICAgIGVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbGVtZW50KTsKICAgIHJldHVybiBlbGVtZW50OwogIH0KCiAgdmFyIFNFTEVDVF9FTEVNRU5UX0lOTkVSSFRNTF9CVUdHWSA9IChmdW5jdGlvbigpewogICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2VsZWN0IiksCiAgICAgICAgaXNCdWdneSA9IHRydWU7CiAgICBlbC5pbm5lckhUTUwgPSAiPG9wdGlvbiB2YWx1ZT1cInRlc3RcIj50ZXN0PC9vcHRpb24+IjsKICAgIGlmIChlbC5vcHRpb25zICYmIGVsLm9wdGlvbnNbMF0pIHsKICAgICAgaXNCdWdneSA9IGVsLm9wdGlvbnNbMF0ubm9kZU5hbWUudG9VcHBlckNhc2UoKSAhPT0gIk9QVElPTiI7CiAgICB9CiAgICBlbCA9IG51bGw7CiAgICByZXR1cm4gaXNCdWdneTsKICB9KSgpOwoKICB2YXIgVEFCTEVfRUxFTUVOVF9JTk5FUkhUTUxfQlVHR1kgPSAoZnVuY3Rpb24oKXsKICAgIHRyeSB7CiAgICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRhYmxlIik7CiAgICAgIGlmIChlbCAmJiBlbC50Qm9kaWVzKSB7CiAgICAgICAgZWwuaW5uZXJIVE1MID0gIjx0Ym9keT48dHI+PHRkPnRlc3Q8L3RkPjwvdHI+PC90Ym9keT4iOwogICAgICAgIHZhciBpc0J1Z2d5ID0gdHlwZW9mIGVsLnRCb2RpZXNbMF0gPT0gInVuZGVmaW5lZCI7CiAgICAgICAgZWwgPSBudWxsOwogICAgICAgIHJldHVybiBpc0J1Z2d5OwogICAgICB9CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0pKCk7CgogIHZhciBMSU5LX0VMRU1FTlRfSU5ORVJIVE1MX0JVR0dZID0gKGZ1bmN0aW9uKCkgewogICAgdHJ5IHsKICAgICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgIGVsLmlubmVySFRNTCA9ICI8bGluayAvPiI7CiAgICAgIHZhciBpc0J1Z2d5ID0gKGVsLmNoaWxkTm9kZXMubGVuZ3RoID09PSAwKTsKICAgICAgZWwgPSBudWxsOwogICAgICByZXR1cm4gaXNCdWdneTsKICAgIH0gY2F0Y2goZSkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICB9KSgpOwoKICB2YXIgQU5ZX0lOTkVSSFRNTF9CVUdHWSA9IFNFTEVDVF9FTEVNRU5UX0lOTkVSSFRNTF9CVUdHWSB8fAogICBUQUJMRV9FTEVNRU5UX0lOTkVSSFRNTF9CVUdHWSB8fCBMSU5LX0VMRU1FTlRfSU5ORVJIVE1MX0JVR0dZOwoKICB2YXIgU0NSSVBUX0VMRU1FTlRfUkVKRUNUU19URVhUTk9ERV9BUFBFTkRJTkcgPSAoZnVuY3Rpb24gKCkgewogICAgdmFyIHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKSwKICAgICAgICBpc0J1Z2d5ID0gZmFsc2U7CiAgICB0cnkgewogICAgICBzLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCIiKSk7CiAgICAgIGlzQnVnZ3kgPSAhcy5maXJzdENoaWxkIHx8CiAgICAgICAgcy5maXJzdENoaWxkICYmIHMuZmlyc3RDaGlsZC5ub2RlVHlwZSAhPT0gMzsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgaXNCdWdneSA9IHRydWU7CiAgICB9CiAgICBzID0gbnVsbDsKICAgIHJldHVybiBpc0J1Z2d5OwogIH0pKCk7CgogIGZ1bmN0aW9uIHVwZGF0ZShlbGVtZW50LCBjb250ZW50KSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKCiAgICB2YXIgZGVzY2VuZGFudHMgPSBlbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCcqJyksCiAgICAgaSA9IGRlc2NlbmRhbnRzLmxlbmd0aDsKICAgIHdoaWxlIChpLS0pIHB1cmdlRWxlbWVudChkZXNjZW5kYW50c1tpXSk7CgogICAgaWYgKGNvbnRlbnQgJiYgY29udGVudC50b0VsZW1lbnQpCiAgICAgIGNvbnRlbnQgPSBjb250ZW50LnRvRWxlbWVudCgpOwoKICAgIGlmIChPYmplY3QuaXNFbGVtZW50KGNvbnRlbnQpKQogICAgICByZXR1cm4gZWxlbWVudC51cGRhdGUoKS5pbnNlcnQoY29udGVudCk7CgoKICAgIGNvbnRlbnQgPSBPYmplY3QudG9IVE1MKGNvbnRlbnQpOwogICAgdmFyIHRhZ05hbWUgPSBlbGVtZW50LnRhZ05hbWUudG9VcHBlckNhc2UoKTsKCiAgICBpZiAodGFnTmFtZSA9PT0gJ1NDUklQVCcgJiYgU0NSSVBUX0VMRU1FTlRfUkVKRUNUU19URVhUTk9ERV9BUFBFTkRJTkcpIHsKICAgICAgZWxlbWVudC50ZXh0ID0gY29udGVudDsKICAgICAgcmV0dXJuIGVsZW1lbnQ7CiAgICB9CgogICAgaWYgKEFOWV9JTk5FUkhUTUxfQlVHR1kpIHsKICAgICAgaWYgKHRhZ05hbWUgaW4gSU5TRVJUSU9OX1RSQU5TTEFUSU9OUy50YWdzKSB7CiAgICAgICAgd2hpbGUgKGVsZW1lbnQuZmlyc3RDaGlsZCkKICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQoZWxlbWVudC5maXJzdENoaWxkKTsKCiAgICAgICAgdmFyIG5vZGVzID0gZ2V0Q29udGVudEZyb21Bbm9ueW1vdXNFbGVtZW50KHRhZ05hbWUsIGNvbnRlbnQuc3RyaXBTY3JpcHRzKCkpOwogICAgICAgIGZvciAodmFyIGkgPSAwLCBub2RlOyBub2RlID0gbm9kZXNbaV07IGkrKykKICAgICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQobm9kZSk7CgogICAgICB9IGVsc2UgaWYgKExJTktfRUxFTUVOVF9JTk5FUkhUTUxfQlVHR1kgJiYgT2JqZWN0LmlzU3RyaW5nKGNvbnRlbnQpICYmIGNvbnRlbnQuaW5kZXhPZignPGxpbmsnKSA+IC0xKSB7CiAgICAgICAgd2hpbGUgKGVsZW1lbnQuZmlyc3RDaGlsZCkKICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQoZWxlbWVudC5maXJzdENoaWxkKTsKCiAgICAgICAgdmFyIG5vZGVzID0gZ2V0Q29udGVudEZyb21Bbm9ueW1vdXNFbGVtZW50KHRhZ05hbWUsCiAgICAgICAgIGNvbnRlbnQuc3RyaXBTY3JpcHRzKCksIHRydWUpOwoKICAgICAgICBmb3IgKHZhciBpID0gMCwgbm9kZTsgbm9kZSA9IG5vZGVzW2ldOyBpKyspCiAgICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKG5vZGUpOwogICAgICB9IGVsc2UgewogICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gY29udGVudC5zdHJpcFNjcmlwdHMoKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSBjb250ZW50LnN0cmlwU2NyaXB0cygpOwogICAgfQoKICAgIGNvbnRlbnQuZXZhbFNjcmlwdHMuYmluZChjb250ZW50KS5kZWZlcigpOwogICAgcmV0dXJuIGVsZW1lbnQ7CiAgfQoKICBmdW5jdGlvbiByZXBsYWNlKGVsZW1lbnQsIGNvbnRlbnQpIHsKICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOwoKICAgIGlmIChjb250ZW50ICYmIGNvbnRlbnQudG9FbGVtZW50KSB7CiAgICAgIGNvbnRlbnQgPSBjb250ZW50LnRvRWxlbWVudCgpOwogICAgfSBlbHNlIGlmICghT2JqZWN0LmlzRWxlbWVudChjb250ZW50KSkgewogICAgICBjb250ZW50ID0gT2JqZWN0LnRvSFRNTChjb250ZW50KTsKICAgICAgdmFyIHJhbmdlID0gZWxlbWVudC5vd25lckRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7CiAgICAgIHJhbmdlLnNlbGVjdE5vZGUoZWxlbWVudCk7CiAgICAgIGNvbnRlbnQuZXZhbFNjcmlwdHMuYmluZChjb250ZW50KS5kZWZlcigpOwogICAgICBjb250ZW50ID0gcmFuZ2UuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KGNvbnRlbnQuc3RyaXBTY3JpcHRzKCkpOwogICAgfQoKICAgIGVsZW1lbnQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoY29udGVudCwgZWxlbWVudCk7CiAgICByZXR1cm4gZWxlbWVudDsKICB9CgogIHZhciBJTlNFUlRJT05fVFJBTlNMQVRJT05TID0gewogICAgYmVmb3JlOiBmdW5jdGlvbihlbGVtZW50LCBub2RlKSB7CiAgICAgIGVsZW1lbnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobm9kZSwgZWxlbWVudCk7CiAgICB9LAogICAgdG9wOiBmdW5jdGlvbihlbGVtZW50LCBub2RlKSB7CiAgICAgIGVsZW1lbnQuaW5zZXJ0QmVmb3JlKG5vZGUsIGVsZW1lbnQuZmlyc3RDaGlsZCk7CiAgICB9LAogICAgYm90dG9tOiBmdW5jdGlvbihlbGVtZW50LCBub2RlKSB7CiAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQobm9kZSk7CiAgICB9LAogICAgYWZ0ZXI6IGZ1bmN0aW9uKGVsZW1lbnQsIG5vZGUpIHsKICAgICAgZWxlbWVudC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCBlbGVtZW50Lm5leHRTaWJsaW5nKTsKICAgIH0sCgogICAgdGFnczogewogICAgICBUQUJMRTogIFsnPHRhYmxlPicsICAgICAgICAgICAgICAgICc8L3RhYmxlPicsICAgICAgICAgICAgICAgICAgIDFdLAogICAgICBUQk9EWTogIFsnPHRhYmxlPjx0Ym9keT4nLCAgICAgICAgICc8L3Rib2R5PjwvdGFibGU+JywgICAgICAgICAgIDJdLAogICAgICBUUjogICAgIFsnPHRhYmxlPjx0Ym9keT48dHI+JywgICAgICc8L3RyPjwvdGJvZHk+PC90YWJsZT4nLCAgICAgIDNdLAogICAgICBURDogICAgIFsnPHRhYmxlPjx0Ym9keT48dHI+PHRkPicsICc8L3RkPjwvdHI+PC90Ym9keT48L3RhYmxlPicsIDRdLAogICAgICBTRUxFQ1Q6IFsnPHNlbGVjdD4nLCAgICAgICAgICAgICAgICc8L3NlbGVjdD4nLCAgICAgICAgICAgICAgICAgIDFdCiAgICB9CiAgfTsKCiAgdmFyIHRhZ3MgPSBJTlNFUlRJT05fVFJBTlNMQVRJT05TLnRhZ3M7CgogIE9iamVjdC5leHRlbmQodGFncywgewogICAgVEhFQUQ6IHRhZ3MuVEJPRFksCiAgICBURk9PVDogdGFncy5UQk9EWSwKICAgIFRIOiAgICB0YWdzLlRECiAgfSk7CgogIGZ1bmN0aW9uIHJlcGxhY2VfSUUoZWxlbWVudCwgY29udGVudCkgewogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7CiAgICBpZiAoY29udGVudCAmJiBjb250ZW50LnRvRWxlbWVudCkKICAgICAgY29udGVudCA9IGNvbnRlbnQudG9FbGVtZW50KCk7CiAgICBpZiAoT2JqZWN0LmlzRWxlbWVudChjb250ZW50KSkgewogICAgICBlbGVtZW50LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGNvbnRlbnQsIGVsZW1lbnQpOwogICAgICByZXR1cm4gZWxlbWVudDsKICAgIH0KCiAgICBjb250ZW50ID0gT2JqZWN0LnRvSFRNTChjb250ZW50KTsKICAgIHZhciBwYXJlbnQgPSBlbGVtZW50LnBhcmVudE5vZGUsIHRhZ05hbWUgPSBwYXJlbnQudGFnTmFtZS50b1VwcGVyQ2FzZSgpOwoKICAgIGlmICh0YWdOYW1lIGluIElOU0VSVElPTl9UUkFOU0xBVElPTlMudGFncykgewogICAgICB2YXIgbmV4dFNpYmxpbmcgPSBFbGVtZW50Lm5leHQoZWxlbWVudCk7CiAgICAgIHZhciBmcmFnbWVudHMgPSBnZXRDb250ZW50RnJvbUFub255bW91c0VsZW1lbnQoCiAgICAgICB0YWdOYW1lLCBjb250ZW50LnN0cmlwU2NyaXB0cygpKTsKCiAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChlbGVtZW50KTsKCiAgICAgIHZhciBpdGVyYXRvcjsKICAgICAgaWYgKG5leHRTaWJsaW5nKQogICAgICAgIGl0ZXJhdG9yID0gZnVuY3Rpb24obm9kZSkgeyBwYXJlbnQuaW5zZXJ0QmVmb3JlKG5vZGUsIG5leHRTaWJsaW5nKSB9OwogICAgICBlbHNlCiAgICAgICAgaXRlcmF0b3IgPSBmdW5jdGlvbihub2RlKSB7IHBhcmVudC5hcHBlbmRDaGlsZChub2RlKTsgfQoKICAgICAgZnJhZ21lbnRzLmVhY2goaXRlcmF0b3IpOwogICAgfSBlbHNlIHsKICAgICAgZWxlbWVudC5vdXRlckhUTUwgPSBjb250ZW50LnN0cmlwU2NyaXB0cygpOwogICAgfQoKICAgIGNvbnRlbnQuZXZhbFNjcmlwdHMuYmluZChjb250ZW50KS5kZWZlcigpOwogICAgcmV0dXJuIGVsZW1lbnQ7CiAgfQoKICBpZiAoJ291dGVySFRNTCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KQogICAgcmVwbGFjZSA9IHJlcGxhY2VfSUU7CgogIGZ1bmN0aW9uIGlzQ29udGVudChjb250ZW50KSB7CiAgICBpZiAoT2JqZWN0LmlzVW5kZWZpbmVkKGNvbnRlbnQpIHx8IGNvbnRlbnQgPT09IG51bGwpIHJldHVybiBmYWxzZTsKCiAgICBpZiAoT2JqZWN0LmlzU3RyaW5nKGNvbnRlbnQpIHx8IE9iamVjdC5pc051bWJlcihjb250ZW50KSkgcmV0dXJuIHRydWU7CiAgICBpZiAoT2JqZWN0LmlzRWxlbWVudChjb250ZW50KSkgcmV0dXJuIHRydWU7CiAgICBpZiAoY29udGVudC50b0VsZW1lbnQgfHwgY29udGVudC50b0hUTUwpIHJldHVybiB0cnVlOwoKICAgIHJldHVybiBmYWxzZTsKICB9CgogIGZ1bmN0aW9uIGluc2VydENvbnRlbnRBdChlbGVtZW50LCBjb250ZW50LCBwb3NpdGlvbikgewogICAgcG9zaXRpb24gICA9IHBvc2l0aW9uLnRvTG93ZXJDYXNlKCk7CiAgICB2YXIgbWV0aG9kID0gSU5TRVJUSU9OX1RSQU5TTEFUSU9OU1twb3NpdGlvbl07CgogICAgaWYgKGNvbnRlbnQgJiYgY29udGVudC50b0VsZW1lbnQpIGNvbnRlbnQgPSBjb250ZW50LnRvRWxlbWVudCgpOwogICAgaWYgKE9iamVjdC5pc0VsZW1lbnQoY29udGVudCkpIHsKICAgICAgbWV0aG9kKGVsZW1lbnQsIGNvbnRlbnQpOwogICAgICByZXR1cm4gZWxlbWVudDsKICAgIH0KCiAgICBjb250ZW50ID0gT2JqZWN0LnRvSFRNTChjb250ZW50KTsKICAgIHZhciB0YWdOYW1lID0gKChwb3NpdGlvbiA9PT0gJ2JlZm9yZScgfHwgcG9zaXRpb24gPT09ICdhZnRlcicpID8KICAgICBlbGVtZW50LnBhcmVudE5vZGUgOiBlbGVtZW50KS50YWdOYW1lLnRvVXBwZXJDYXNlKCk7CgogICAgdmFyIGNoaWxkTm9kZXMgPSBnZXRDb250ZW50RnJvbUFub255bW91c0VsZW1lbnQodGFnTmFtZSwgY29udGVudC5zdHJpcFNjcmlwdHMoKSk7CgogICAgaWYgKHBvc2l0aW9uID09PSAndG9wJyB8fCBwb3NpdGlvbiA9PT0gJ2FmdGVyJykgY2hpbGROb2Rlcy5yZXZlcnNlKCk7CgogICAgZm9yICh2YXIgaSA9IDAsIG5vZGU7IG5vZGUgPSBjaGlsZE5vZGVzW2ldOyBpKyspCiAgICAgIG1ldGhvZChlbGVtZW50LCBub2RlKTsKCiAgICBjb250ZW50LmV2YWxTY3JpcHRzLmJpbmQoY29udGVudCkuZGVmZXIoKTsKICB9CgogIGZ1bmN0aW9uIGluc2VydChlbGVtZW50LCBpbnNlcnRpb25zKSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKCiAgICBpZiAoaXNDb250ZW50KGluc2VydGlvbnMpKQogICAgICBpbnNlcnRpb25zID0geyBib3R0b206IGluc2VydGlvbnMgfTsKCiAgICBmb3IgKHZhciBwb3NpdGlvbiBpbiBpbnNlcnRpb25zKQogICAgICBpbnNlcnRDb250ZW50QXQoZWxlbWVudCwgaW5zZXJ0aW9uc1twb3NpdGlvbl0sIHBvc2l0aW9uKTsKCiAgICByZXR1cm4gZWxlbWVudDsKICB9CgogIGZ1bmN0aW9uIHdyYXAoZWxlbWVudCwgd3JhcHBlciwgYXR0cmlidXRlcykgewogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7CgogICAgaWYgKE9iamVjdC5pc0VsZW1lbnQod3JhcHBlcikpIHsKICAgICAgJCh3cmFwcGVyKS53cml0ZUF0dHJpYnV0ZShhdHRyaWJ1dGVzIHx8IHt9KTsKICAgIH0gZWxzZSBpZiAoT2JqZWN0LmlzU3RyaW5nKHdyYXBwZXIpKSB7CiAgICAgIHdyYXBwZXIgPSBuZXcgRWxlbWVudCh3cmFwcGVyLCBhdHRyaWJ1dGVzKTsKICAgIH0gZWxzZSB7CiAgICAgIHdyYXBwZXIgPSBuZXcgRWxlbWVudCgnZGl2Jywgd3JhcHBlcik7CiAgICB9CgogICAgaWYgKGVsZW1lbnQucGFyZW50Tm9kZSkKICAgICAgZWxlbWVudC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZCh3cmFwcGVyLCBlbGVtZW50KTsKCiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGVsZW1lbnQpOwoKICAgIHJldHVybiB3cmFwcGVyOwogIH0KCiAgZnVuY3Rpb24gY2xlYW5XaGl0ZXNwYWNlKGVsZW1lbnQpIHsKICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOwogICAgdmFyIG5vZGUgPSBlbGVtZW50LmZpcnN0Q2hpbGQ7CgogICAgd2hpbGUgKG5vZGUpIHsKICAgICAgdmFyIG5leHROb2RlID0gbm9kZS5uZXh0U2libGluZzsKICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IE5vZGUuVEVYVF9OT0RFICYmICEvXFMvLnRlc3Qobm9kZS5ub2RlVmFsdWUpKQogICAgICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQobm9kZSk7CiAgICAgIG5vZGUgPSBuZXh0Tm9kZTsKICAgIH0KICAgIHJldHVybiBlbGVtZW50OwogIH0KCiAgZnVuY3Rpb24gZW1wdHkoZWxlbWVudCkgewogICAgcmV0dXJuICQoZWxlbWVudCkuaW5uZXJIVE1MLmJsYW5rKCk7CiAgfQoKICBmdW5jdGlvbiBnZXRDb250ZW50RnJvbUFub255bW91c0VsZW1lbnQodGFnTmFtZSwgaHRtbCwgZm9yY2UpIHsKICAgIHZhciB0ID0gSU5TRVJUSU9OX1RSQU5TTEFUSU9OUy50YWdzW3RhZ05hbWVdLCBkaXYgPSBESVY7CgogICAgdmFyIHdvcmthcm91bmQgPSAhIXQ7CiAgICBpZiAoIXdvcmthcm91bmQgJiYgZm9yY2UpIHsKICAgICAgd29ya2Fyb3VuZCA9IHRydWU7CiAgICAgIHQgPSBbJycsICcnLCAwXTsKICAgIH0KCiAgICBpZiAod29ya2Fyb3VuZCkgewogICAgICBkaXYuaW5uZXJIVE1MID0gJyYjMTYwOycgKyB0WzBdICsgaHRtbCArIHRbMV07CiAgICAgIGRpdi5yZW1vdmVDaGlsZChkaXYuZmlyc3RDaGlsZCk7CiAgICAgIGZvciAodmFyIGkgPSB0WzJdOyBpLS07ICkKICAgICAgICBkaXYgPSBkaXYuZmlyc3RDaGlsZDsKICAgIH0gZWxzZSB7CiAgICAgIGRpdi5pbm5lckhUTUwgPSBodG1sOwogICAgfQoKICAgIHJldHVybiAkQShkaXYuY2hpbGROb2Rlcyk7CiAgfQoKICBmdW5jdGlvbiBjbG9uZShlbGVtZW50LCBkZWVwKSB7CiAgICBpZiAoIShlbGVtZW50ID0gJChlbGVtZW50KSkpIHJldHVybjsKICAgIHZhciBjbG9uZSA9IGVsZW1lbnQuY2xvbmVOb2RlKGRlZXApOwogICAgaWYgKCFIQVNfVU5JUVVFX0lEX1BST1BFUlRZKSB7CiAgICAgIGNsb25lLl9wcm90b3R5cGVVSUQgPSBVTkRFRklORUQ7CiAgICAgIGlmIChkZWVwKSB7CiAgICAgICAgdmFyIGRlc2NlbmRhbnRzID0gRWxlbWVudC5zZWxlY3QoY2xvbmUsICcqJyksCiAgICAgICAgIGkgPSBkZXNjZW5kYW50cy5sZW5ndGg7CiAgICAgICAgd2hpbGUgKGktLSkKICAgICAgICAgIGRlc2NlbmRhbnRzW2ldLl9wcm90b3R5cGVVSUQgPSBVTkRFRklORUQ7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBFbGVtZW50LmV4dGVuZChjbG9uZSk7CiAgfQoKICBmdW5jdGlvbiBwdXJnZUVsZW1lbnQoZWxlbWVudCkgewogICAgdmFyIHVpZCA9IGdldFVuaXF1ZUVsZW1lbnRJRChlbGVtZW50KTsKICAgIGlmICh1aWQpIHsKICAgICAgRWxlbWVudC5zdG9wT2JzZXJ2aW5nKGVsZW1lbnQpOwogICAgICBpZiAoIUhBU19VTklRVUVfSURfUFJPUEVSVFkpCiAgICAgICAgZWxlbWVudC5fcHJvdG90eXBlVUlEID0gVU5ERUZJTkVEOwogICAgICBkZWxldGUgRWxlbWVudC5TdG9yYWdlW3VpZF07CiAgICB9CiAgfQoKICBmdW5jdGlvbiBwdXJnZUNvbGxlY3Rpb24oZWxlbWVudHMpIHsKICAgIHZhciBpID0gZWxlbWVudHMubGVuZ3RoOwogICAgd2hpbGUgKGktLSkKICAgICAgcHVyZ2VFbGVtZW50KGVsZW1lbnRzW2ldKTsKICB9CgogIGZ1bmN0aW9uIHB1cmdlQ29sbGVjdGlvbl9JRShlbGVtZW50cykgewogICAgdmFyIGkgPSBlbGVtZW50cy5sZW5ndGgsIGVsZW1lbnQsIHVpZDsKICAgIHdoaWxlIChpLS0pIHsKICAgICAgZWxlbWVudCA9IGVsZW1lbnRzW2ldOwogICAgICB1aWQgPSBnZXRVbmlxdWVFbGVtZW50SUQoZWxlbWVudCk7CiAgICAgIGRlbGV0ZSBFbGVtZW50LlN0b3JhZ2VbdWlkXTsKICAgICAgZGVsZXRlIEV2ZW50LmNhY2hlW3VpZF07CiAgICB9CiAgfQoKICBpZiAoSEFTX1VOSVFVRV9JRF9QUk9QRVJUWSkgewogICAgcHVyZ2VDb2xsZWN0aW9uID0gcHVyZ2VDb2xsZWN0aW9uX0lFOwogIH0KCgogIGZ1bmN0aW9uIHB1cmdlKGVsZW1lbnQpIHsKICAgIGlmICghKGVsZW1lbnQgPSAkKGVsZW1lbnQpKSkgcmV0dXJuOwogICAgcHVyZ2VFbGVtZW50KGVsZW1lbnQpOwoKICAgIHZhciBkZXNjZW5kYW50cyA9IGVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJyonKSwKICAgICBpID0gZGVzY2VuZGFudHMubGVuZ3RoOwoKICAgIHdoaWxlIChpLS0pIHB1cmdlRWxlbWVudChkZXNjZW5kYW50c1tpXSk7CgogICAgcmV0dXJuIG51bGw7CiAgfQoKICBPYmplY3QuZXh0ZW5kKG1ldGhvZHMsIHsKICAgIHJlbW92ZTogIHJlbW92ZSwKICAgIHVwZGF0ZTogIHVwZGF0ZSwKICAgIHJlcGxhY2U6IHJlcGxhY2UsCiAgICBpbnNlcnQ6ICBpbnNlcnQsCiAgICB3cmFwOiAgICB3cmFwLAogICAgY2xlYW5XaGl0ZXNwYWNlOiBjbGVhbldoaXRlc3BhY2UsCiAgICBlbXB0eTogICBlbXB0eSwKICAgIGNsb25lOiAgIGNsb25lLAogICAgcHVyZ2U6ICAgcHVyZ2UKICB9KTsKCgoKICBmdW5jdGlvbiByZWN1cnNpdmVseUNvbGxlY3QoZWxlbWVudCwgcHJvcGVydHksIG1heGltdW1MZW5ndGgpIHsKICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOwogICAgbWF4aW11bUxlbmd0aCA9IG1heGltdW1MZW5ndGggfHwgLTE7CiAgICB2YXIgZWxlbWVudHMgPSBbXTsKCiAgICB3aGlsZSAoZWxlbWVudCA9IGVsZW1lbnRbcHJvcGVydHldKSB7CiAgICAgIGlmIChlbGVtZW50Lm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSkKICAgICAgICBlbGVtZW50cy5wdXNoKEVsZW1lbnQuZXh0ZW5kKGVsZW1lbnQpKTsKCiAgICAgIGlmIChlbGVtZW50cy5sZW5ndGggPT09IG1heGltdW1MZW5ndGgpIGJyZWFrOwogICAgfQoKICAgIHJldHVybiBlbGVtZW50czsKICB9CgoKICBmdW5jdGlvbiBhbmNlc3RvcnMoZWxlbWVudCkgewogICAgcmV0dXJuIHJlY3Vyc2l2ZWx5Q29sbGVjdChlbGVtZW50LCAncGFyZW50Tm9kZScpOwogIH0KCiAgZnVuY3Rpb24gZGVzY2VuZGFudHMoZWxlbWVudCkgewogICAgcmV0dXJuIEVsZW1lbnQuc2VsZWN0KGVsZW1lbnQsICcqJyk7CiAgfQoKICBmdW5jdGlvbiBmaXJzdERlc2NlbmRhbnQoZWxlbWVudCkgewogICAgZWxlbWVudCA9ICQoZWxlbWVudCkuZmlyc3RDaGlsZDsKICAgIHdoaWxlIChlbGVtZW50ICYmIGVsZW1lbnQubm9kZVR5cGUgIT09IE5vZGUuRUxFTUVOVF9OT0RFKQogICAgICBlbGVtZW50ID0gZWxlbWVudC5uZXh0U2libGluZzsKCiAgICByZXR1cm4gJChlbGVtZW50KTsKICB9CgogIGZ1bmN0aW9uIGltbWVkaWF0ZURlc2NlbmRhbnRzKGVsZW1lbnQpIHsKICAgIHZhciByZXN1bHRzID0gW10sIGNoaWxkID0gJChlbGVtZW50KS5maXJzdENoaWxkOwoKICAgIHdoaWxlIChjaGlsZCkgewogICAgICBpZiAoY2hpbGQubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFKQogICAgICAgIHJlc3VsdHMucHVzaChFbGVtZW50LmV4dGVuZChjaGlsZCkpOwoKICAgICAgY2hpbGQgPSBjaGlsZC5uZXh0U2libGluZzsKICAgIH0KCiAgICByZXR1cm4gcmVzdWx0czsKICB9CgogIGZ1bmN0aW9uIHByZXZpb3VzU2libGluZ3MoZWxlbWVudCkgewogICAgcmV0dXJuIHJlY3Vyc2l2ZWx5Q29sbGVjdChlbGVtZW50LCAncHJldmlvdXNTaWJsaW5nJyk7CiAgfQoKICBmdW5jdGlvbiBuZXh0U2libGluZ3MoZWxlbWVudCkgewogICAgcmV0dXJuIHJlY3Vyc2l2ZWx5Q29sbGVjdChlbGVtZW50LCAnbmV4dFNpYmxpbmcnKTsKICB9CgogIGZ1bmN0aW9uIHNpYmxpbmdzKGVsZW1lbnQpIHsKICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOwogICAgdmFyIHByZXZpb3VzID0gcHJldmlvdXNTaWJsaW5ncyhlbGVtZW50KSwKICAgICBuZXh0ID0gbmV4dFNpYmxpbmdzKGVsZW1lbnQpOwogICAgcmV0dXJuIHByZXZpb3VzLnJldmVyc2UoKS5jb25jYXQobmV4dCk7CiAgfQoKICBmdW5jdGlvbiBtYXRjaChlbGVtZW50LCBzZWxlY3RvcikgewogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7CgogICAgaWYgKE9iamVjdC5pc1N0cmluZyhzZWxlY3RvcikpCiAgICAgIHJldHVybiBQcm90b3R5cGUuU2VsZWN0b3IubWF0Y2goZWxlbWVudCwgc2VsZWN0b3IpOwoKICAgIHJldHVybiBzZWxlY3Rvci5tYXRjaChlbGVtZW50KTsKICB9CgoKICBmdW5jdGlvbiBfcmVjdXJzaXZlbHlGaW5kKGVsZW1lbnQsIHByb3BlcnR5LCBleHByZXNzaW9uLCBpbmRleCkgewogICAgZWxlbWVudCA9ICQoZWxlbWVudCksIGV4cHJlc3Npb24gPSBleHByZXNzaW9uIHx8IDAsIGluZGV4ID0gaW5kZXggfHwgMDsKICAgIGlmIChPYmplY3QuaXNOdW1iZXIoZXhwcmVzc2lvbikpIHsKICAgICAgaW5kZXggPSBleHByZXNzaW9uLCBleHByZXNzaW9uID0gbnVsbDsKICAgIH0KCiAgICB3aGlsZSAoZWxlbWVudCA9IGVsZW1lbnRbcHJvcGVydHldKSB7CiAgICAgIGlmIChlbGVtZW50Lm5vZGVUeXBlICE9PSAxKSBjb250aW51ZTsKICAgICAgaWYgKGV4cHJlc3Npb24gJiYgIVByb3RvdHlwZS5TZWxlY3Rvci5tYXRjaChlbGVtZW50LCBleHByZXNzaW9uKSkKICAgICAgICBjb250aW51ZTsKICAgICAgaWYgKC0taW5kZXggPj0gMCkgY29udGludWU7CgogICAgICByZXR1cm4gRWxlbWVudC5leHRlbmQoZWxlbWVudCk7CiAgICB9CiAgfQoKCiAgZnVuY3Rpb24gdXAoZWxlbWVudCwgZXhwcmVzc2lvbiwgaW5kZXgpIHsKICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOwoKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSByZXR1cm4gJChlbGVtZW50LnBhcmVudE5vZGUpOwogICAgcmV0dXJuIF9yZWN1cnNpdmVseUZpbmQoZWxlbWVudCwgJ3BhcmVudE5vZGUnLCBleHByZXNzaW9uLCBpbmRleCk7CiAgfQoKICBmdW5jdGlvbiBkb3duKGVsZW1lbnQsIGV4cHJlc3Npb24sIGluZGV4KSB7CiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkgcmV0dXJuIGZpcnN0RGVzY2VuZGFudChlbGVtZW50KTsKICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpLCBleHByZXNzaW9uID0gZXhwcmVzc2lvbiB8fCAwLCBpbmRleCA9IGluZGV4IHx8IDA7CgogICAgaWYgKE9iamVjdC5pc051bWJlcihleHByZXNzaW9uKSkKICAgICAgaW5kZXggPSBleHByZXNzaW9uLCBleHByZXNzaW9uID0gJyonOwoKICAgIHZhciBub2RlID0gUHJvdG90eXBlLlNlbGVjdG9yLnNlbGVjdChleHByZXNzaW9uLCBlbGVtZW50KVtpbmRleF07CiAgICByZXR1cm4gRWxlbWVudC5leHRlbmQobm9kZSk7CiAgfQoKICBmdW5jdGlvbiBwcmV2aW91cyhlbGVtZW50LCBleHByZXNzaW9uLCBpbmRleCkgewogICAgcmV0dXJuIF9yZWN1cnNpdmVseUZpbmQoZWxlbWVudCwgJ3ByZXZpb3VzU2libGluZycsIGV4cHJlc3Npb24sIGluZGV4KTsKICB9CgogIGZ1bmN0aW9uIG5leHQoZWxlbWVudCwgZXhwcmVzc2lvbiwgaW5kZXgpIHsKICAgIHJldHVybiBfcmVjdXJzaXZlbHlGaW5kKGVsZW1lbnQsICduZXh0U2libGluZycsIGV4cHJlc3Npb24sIGluZGV4KTsKICB9CgogIGZ1bmN0aW9uIHNlbGVjdChlbGVtZW50KSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKICAgIHZhciBleHByZXNzaW9ucyA9IFNMSUNFLmNhbGwoYXJndW1lbnRzLCAxKS5qb2luKCcsICcpOwogICAgcmV0dXJuIFByb3RvdHlwZS5TZWxlY3Rvci5zZWxlY3QoZXhwcmVzc2lvbnMsIGVsZW1lbnQpOwogIH0KCiAgZnVuY3Rpb24gYWRqYWNlbnQoZWxlbWVudCkgewogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7CiAgICB2YXIgZXhwcmVzc2lvbnMgPSBTTElDRS5jYWxsKGFyZ3VtZW50cywgMSkuam9pbignLCAnKTsKICAgIHZhciBzaWJsaW5ncyA9IEVsZW1lbnQuc2libGluZ3MoZWxlbWVudCksIHJlc3VsdHMgPSBbXTsKICAgIGZvciAodmFyIGkgPSAwLCBzaWJsaW5nOyBzaWJsaW5nID0gc2libGluZ3NbaV07IGkrKykgewogICAgICBpZiAoUHJvdG90eXBlLlNlbGVjdG9yLm1hdGNoKHNpYmxpbmcsIGV4cHJlc3Npb25zKSkKICAgICAgICByZXN1bHRzLnB1c2goc2libGluZyk7CiAgICB9CgogICAgcmV0dXJuIHJlc3VsdHM7CiAgfQoKICBmdW5jdGlvbiBkZXNjZW5kYW50T2ZfRE9NKGVsZW1lbnQsIGFuY2VzdG9yKSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KSwgYW5jZXN0b3IgPSAkKGFuY2VzdG9yKTsKICAgIGlmICghZWxlbWVudCB8fCAhYW5jZXN0b3IpIHJldHVybiBmYWxzZTsKICAgIHdoaWxlIChlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlKQogICAgICBpZiAoZWxlbWVudCA9PT0gYW5jZXN0b3IpIHJldHVybiB0cnVlOwogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgZnVuY3Rpb24gZGVzY2VuZGFudE9mX2NvbnRhaW5zKGVsZW1lbnQsIGFuY2VzdG9yKSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KSwgYW5jZXN0b3IgPSAkKGFuY2VzdG9yKTsKICAgIGlmICghZWxlbWVudCB8fCAhYW5jZXN0b3IpIHJldHVybiBmYWxzZTsKICAgIGlmICghYW5jZXN0b3IuY29udGFpbnMpIHJldHVybiBkZXNjZW5kYW50T2ZfRE9NKGVsZW1lbnQsIGFuY2VzdG9yKTsKICAgIHJldHVybiBhbmNlc3Rvci5jb250YWlucyhlbGVtZW50KSAmJiBhbmNlc3RvciAhPT0gZWxlbWVudDsKICB9CgogIGZ1bmN0aW9uIGRlc2NlbmRhbnRPZl9jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihlbGVtZW50LCBhbmNlc3RvcikgewogICAgZWxlbWVudCA9ICQoZWxlbWVudCksIGFuY2VzdG9yID0gJChhbmNlc3Rvcik7CiAgICBpZiAoIWVsZW1lbnQgfHwgIWFuY2VzdG9yKSByZXR1cm4gZmFsc2U7CiAgICByZXR1cm4gKGVsZW1lbnQuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYW5jZXN0b3IpICYgOCkgPT09IDg7CiAgfQoKICB2YXIgZGVzY2VuZGFudE9mOwogIGlmIChESVYuY29tcGFyZURvY3VtZW50UG9zaXRpb24pIHsKICAgIGRlc2NlbmRhbnRPZiA9IGRlc2NlbmRhbnRPZl9jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjsKICB9IGVsc2UgaWYgKERJVi5jb250YWlucykgewogICAgZGVzY2VuZGFudE9mID0gZGVzY2VuZGFudE9mX2NvbnRhaW5zOwogIH0gZWxzZSB7CiAgICBkZXNjZW5kYW50T2YgPSBkZXNjZW5kYW50T2ZfRE9NOwogIH0KCgogIE9iamVjdC5leHRlbmQobWV0aG9kcywgewogICAgcmVjdXJzaXZlbHlDb2xsZWN0OiAgIHJlY3Vyc2l2ZWx5Q29sbGVjdCwKICAgIGFuY2VzdG9yczogICAgICAgICAgICBhbmNlc3RvcnMsCiAgICBkZXNjZW5kYW50czogICAgICAgICAgZGVzY2VuZGFudHMsCiAgICBmaXJzdERlc2NlbmRhbnQ6ICAgICAgZmlyc3REZXNjZW5kYW50LAogICAgaW1tZWRpYXRlRGVzY2VuZGFudHM6IGltbWVkaWF0ZURlc2NlbmRhbnRzLAogICAgcHJldmlvdXNTaWJsaW5nczogICAgIHByZXZpb3VzU2libGluZ3MsCiAgICBuZXh0U2libGluZ3M6ICAgICAgICAgbmV4dFNpYmxpbmdzLAogICAgc2libGluZ3M6ICAgICAgICAgICAgIHNpYmxpbmdzLAogICAgbWF0Y2g6ICAgICAgICAgICAgICAgIG1hdGNoLAogICAgdXA6ICAgICAgICAgICAgICAgICAgIHVwLAogICAgZG93bjogICAgICAgICAgICAgICAgIGRvd24sCiAgICBwcmV2aW91czogICAgICAgICAgICAgcHJldmlvdXMsCiAgICBuZXh0OiAgICAgICAgICAgICAgICAgbmV4dCwKICAgIHNlbGVjdDogICAgICAgICAgICAgICBzZWxlY3QsCiAgICBhZGphY2VudDogICAgICAgICAgICAgYWRqYWNlbnQsCiAgICBkZXNjZW5kYW50T2Y6ICAgICAgICAgZGVzY2VuZGFudE9mLAoKICAgIGdldEVsZW1lbnRzQnlTZWxlY3Rvcjogc2VsZWN0LAoKICAgIGNoaWxkRWxlbWVudHM6ICAgICAgICAgaW1tZWRpYXRlRGVzY2VuZGFudHMKICB9KTsKCgogIHZhciBpZENvdW50ZXIgPSAxOwogIGZ1bmN0aW9uIGlkZW50aWZ5KGVsZW1lbnQpIHsKICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOwogICAgdmFyIGlkID0gRWxlbWVudC5yZWFkQXR0cmlidXRlKGVsZW1lbnQsICdpZCcpOwogICAgaWYgKGlkKSByZXR1cm4gaWQ7CgogICAgZG8geyBpZCA9ICdhbm9ueW1vdXNfZWxlbWVudF8nICsgaWRDb3VudGVyKysgfSB3aGlsZSAoJChpZCkpOwoKICAgIEVsZW1lbnQud3JpdGVBdHRyaWJ1dGUoZWxlbWVudCwgJ2lkJywgaWQpOwogICAgcmV0dXJuIGlkOwogIH0KCgogIGZ1bmN0aW9uIHJlYWRBdHRyaWJ1dGUoZWxlbWVudCwgbmFtZSkgewogICAgcmV0dXJuICQoZWxlbWVudCkuZ2V0QXR0cmlidXRlKG5hbWUpOwogIH0KCiAgZnVuY3Rpb24gcmVhZEF0dHJpYnV0ZV9JRShlbGVtZW50LCBuYW1lKSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKCiAgICB2YXIgdGFibGUgPSBBVFRSSUJVVEVfVFJBTlNMQVRJT05TLnJlYWQ7CiAgICBpZiAodGFibGUudmFsdWVzW25hbWVdKQogICAgICByZXR1cm4gdGFibGUudmFsdWVzW25hbWVdKGVsZW1lbnQsIG5hbWUpOwoKICAgIGlmICh0YWJsZS5uYW1lc1tuYW1lXSkgbmFtZSA9IHRhYmxlLm5hbWVzW25hbWVdOwoKICAgIGlmIChuYW1lLmluY2x1ZGUoJzonKSkgewogICAgICBpZiAoIWVsZW1lbnQuYXR0cmlidXRlcyB8fCAhZWxlbWVudC5hdHRyaWJ1dGVzW25hbWVdKSByZXR1cm4gbnVsbDsKICAgICAgcmV0dXJuIGVsZW1lbnQuYXR0cmlidXRlc1tuYW1lXS52YWx1ZTsKICAgIH0KCiAgICByZXR1cm4gZWxlbWVudC5nZXRBdHRyaWJ1dGUobmFtZSk7CiAgfQoKICBmdW5jdGlvbiByZWFkQXR0cmlidXRlX09wZXJhKGVsZW1lbnQsIG5hbWUpIHsKICAgIGlmIChuYW1lID09PSAndGl0bGUnKSByZXR1cm4gZWxlbWVudC50aXRsZTsKICAgIHJldHVybiBlbGVtZW50LmdldEF0dHJpYnV0ZShuYW1lKTsKICB9CgogIHZhciBQUk9CTEVNQVRJQ19BVFRSSUJVVEVfUkVBRElORyA9IChmdW5jdGlvbigpIHsKICAgIERJVi5zZXRBdHRyaWJ1dGUoJ29uY2xpY2snLCBbXSk7CiAgICB2YXIgdmFsdWUgPSBESVYuZ2V0QXR0cmlidXRlKCdvbmNsaWNrJyk7CiAgICB2YXIgaXNGdW5jdGlvbiA9IE9iamVjdC5pc0FycmF5KHZhbHVlKTsKICAgIERJVi5yZW1vdmVBdHRyaWJ1dGUoJ29uY2xpY2snKTsKICAgIHJldHVybiBpc0Z1bmN0aW9uOwogIH0pKCk7CgogIGlmIChQUk9CTEVNQVRJQ19BVFRSSUJVVEVfUkVBRElORykgewogICAgcmVhZEF0dHJpYnV0ZSA9IHJlYWRBdHRyaWJ1dGVfSUU7CiAgfSBlbHNlIGlmIChQcm90b3R5cGUuQnJvd3Nlci5PcGVyYSkgewogICAgcmVhZEF0dHJpYnV0ZSA9IHJlYWRBdHRyaWJ1dGVfT3BlcmE7CiAgfQoKCiAgZnVuY3Rpb24gd3JpdGVBdHRyaWJ1dGUoZWxlbWVudCwgbmFtZSwgdmFsdWUpIHsKICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOwogICAgdmFyIGF0dHJpYnV0ZXMgPSB7fSwgdGFibGUgPSBBVFRSSUJVVEVfVFJBTlNMQVRJT05TLndyaXRlOwoKICAgIGlmICh0eXBlb2YgbmFtZSA9PT0gJ29iamVjdCcpIHsKICAgICAgYXR0cmlidXRlcyA9IG5hbWU7CiAgICB9IGVsc2UgewogICAgICBhdHRyaWJ1dGVzW25hbWVdID0gT2JqZWN0LmlzVW5kZWZpbmVkKHZhbHVlKSA/IHRydWUgOiB2YWx1ZTsKICAgIH0KCiAgICBmb3IgKHZhciBhdHRyIGluIGF0dHJpYnV0ZXMpIHsKICAgICAgbmFtZSA9IHRhYmxlLm5hbWVzW2F0dHJdIHx8IGF0dHI7CiAgICAgIHZhbHVlID0gYXR0cmlidXRlc1thdHRyXTsKICAgICAgaWYgKHRhYmxlLnZhbHVlc1thdHRyXSkgewogICAgICAgIHZhbHVlID0gdGFibGUudmFsdWVzW2F0dHJdKGVsZW1lbnQsIHZhbHVlKTsKICAgICAgICBpZiAoT2JqZWN0LmlzVW5kZWZpbmVkKHZhbHVlKSkgY29udGludWU7CiAgICAgIH0KICAgICAgaWYgKHZhbHVlID09PSBmYWxzZSB8fCB2YWx1ZSA9PT0gbnVsbCkKICAgICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShuYW1lKTsKICAgICAgZWxzZSBpZiAodmFsdWUgPT09IHRydWUpCiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUobmFtZSwgbmFtZSk7CiAgICAgIGVsc2UgZWxlbWVudC5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpOwogICAgfQoKICAgIHJldHVybiBlbGVtZW50OwogIH0KCiAgdmFyIFBST0JMRU1BVElDX0hBU19BVFRSSUJVVEVfV0lUSF9DSEVDS0JPWEVTID0gKGZ1bmN0aW9uICgpIHsKICAgIGlmICghSEFTX0VYVEVOREVEX0NSRUFURV9FTEVNRU5UX1NZTlRBWCkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICB2YXIgY2hlY2tib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCc8aW5wdXQgdHlwZT0iY2hlY2tib3giPicpOwogICAgY2hlY2tib3guY2hlY2tlZCA9IHRydWU7CiAgICB2YXIgbm9kZSA9IGNoZWNrYm94LmdldEF0dHJpYnV0ZU5vZGUoJ2NoZWNrZWQnKTsKICAgIHJldHVybiAhbm9kZSB8fCAhbm9kZS5zcGVjaWZpZWQ7CiAgfSkoKTsKCiAgZnVuY3Rpb24gaGFzQXR0cmlidXRlKGVsZW1lbnQsIGF0dHJpYnV0ZSkgewogICAgYXR0cmlidXRlID0gQVRUUklCVVRFX1RSQU5TTEFUSU9OUy5oYXNbYXR0cmlidXRlXSB8fCBhdHRyaWJ1dGU7CiAgICB2YXIgbm9kZSA9ICQoZWxlbWVudCkuZ2V0QXR0cmlidXRlTm9kZShhdHRyaWJ1dGUpOwogICAgcmV0dXJuICEhKG5vZGUgJiYgbm9kZS5zcGVjaWZpZWQpOwogIH0KCiAgZnVuY3Rpb24gaGFzQXR0cmlidXRlX0lFKGVsZW1lbnQsIGF0dHJpYnV0ZSkgewogICAgaWYgKGF0dHJpYnV0ZSA9PT0gJ2NoZWNrZWQnKSB7CiAgICAgIHJldHVybiBlbGVtZW50LmNoZWNrZWQ7CiAgICB9CiAgICByZXR1cm4gaGFzQXR0cmlidXRlKGVsZW1lbnQsIGF0dHJpYnV0ZSk7CiAgfQoKICBHTE9CQUwuRWxlbWVudC5NZXRob2RzLlNpbXVsYXRlZC5oYXNBdHRyaWJ1dGUgPQogICBQUk9CTEVNQVRJQ19IQVNfQVRUUklCVVRFX1dJVEhfQ0hFQ0tCT1hFUyA/CiAgIGhhc0F0dHJpYnV0ZV9JRSA6IGhhc0F0dHJpYnV0ZTsKCiAgZnVuY3Rpb24gY2xhc3NOYW1lcyhlbGVtZW50KSB7CiAgICByZXR1cm4gbmV3IEVsZW1lbnQuQ2xhc3NOYW1lcyhlbGVtZW50KTsKICB9CgogIHZhciByZWdFeHBDYWNoZSA9IHt9OwogIGZ1bmN0aW9uIGdldFJlZ0V4cEZvckNsYXNzTmFtZShjbGFzc05hbWUpIHsKICAgIGlmIChyZWdFeHBDYWNoZVtjbGFzc05hbWVdKSByZXR1cm4gcmVnRXhwQ2FjaGVbY2xhc3NOYW1lXTsKCiAgICB2YXIgcmUgPSBuZXcgUmVnRXhwKCIoXnxcXHMrKSIgKyBjbGFzc05hbWUgKyAiKFxccyt8JCkiKTsKICAgIHJlZ0V4cENhY2hlW2NsYXNzTmFtZV0gPSByZTsKICAgIHJldHVybiByZTsKICB9CgogIGZ1bmN0aW9uIGhhc0NsYXNzTmFtZShlbGVtZW50LCBjbGFzc05hbWUpIHsKICAgIGlmICghKGVsZW1lbnQgPSAkKGVsZW1lbnQpKSkgcmV0dXJuOwoKICAgIHZhciBlbGVtZW50Q2xhc3NOYW1lID0gZWxlbWVudC5jbGFzc05hbWU7CgogICAgaWYgKGVsZW1lbnRDbGFzc05hbWUubGVuZ3RoID09PSAwKSByZXR1cm4gZmFsc2U7CiAgICBpZiAoZWxlbWVudENsYXNzTmFtZSA9PT0gY2xhc3NOYW1lKSByZXR1cm4gdHJ1ZTsKCiAgICByZXR1cm4gZ2V0UmVnRXhwRm9yQ2xhc3NOYW1lKGNsYXNzTmFtZSkudGVzdChlbGVtZW50Q2xhc3NOYW1lKTsKICB9CgogIGZ1bmN0aW9uIGFkZENsYXNzTmFtZShlbGVtZW50LCBjbGFzc05hbWUpIHsKICAgIGlmICghKGVsZW1lbnQgPSAkKGVsZW1lbnQpKSkgcmV0dXJuOwoKICAgIGlmICghaGFzQ2xhc3NOYW1lKGVsZW1lbnQsIGNsYXNzTmFtZSkpCiAgICAgIGVsZW1lbnQuY2xhc3NOYW1lICs9IChlbGVtZW50LmNsYXNzTmFtZSA/ICcgJyA6ICcnKSArIGNsYXNzTmFtZTsKCiAgICByZXR1cm4gZWxlbWVudDsKICB9CgogIGZ1bmN0aW9uIHJlbW92ZUNsYXNzTmFtZShlbGVtZW50LCBjbGFzc05hbWUpIHsKICAgIGlmICghKGVsZW1lbnQgPSAkKGVsZW1lbnQpKSkgcmV0dXJuOwoKICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gZWxlbWVudC5jbGFzc05hbWUucmVwbGFjZSgKICAgICBnZXRSZWdFeHBGb3JDbGFzc05hbWUoY2xhc3NOYW1lKSwgJyAnKS5zdHJpcCgpOwoKICAgIHJldHVybiBlbGVtZW50OwogIH0KCiAgZnVuY3Rpb24gdG9nZ2xlQ2xhc3NOYW1lKGVsZW1lbnQsIGNsYXNzTmFtZSwgYm9vbCkgewogICAgaWYgKCEoZWxlbWVudCA9ICQoZWxlbWVudCkpKSByZXR1cm47CgogICAgaWYgKE9iamVjdC5pc1VuZGVmaW5lZChib29sKSkKICAgICAgYm9vbCA9ICFoYXNDbGFzc05hbWUoZWxlbWVudCwgY2xhc3NOYW1lKTsKCiAgICB2YXIgbWV0aG9kID0gRWxlbWVudFtib29sID8gJ2FkZENsYXNzTmFtZScgOiAncmVtb3ZlQ2xhc3NOYW1lJ107CiAgICByZXR1cm4gbWV0aG9kKGVsZW1lbnQsIGNsYXNzTmFtZSk7CiAgfQoKICB2YXIgQVRUUklCVVRFX1RSQU5TTEFUSU9OUyA9IHt9OwoKICB2YXIgY2xhc3NQcm9wID0gJ2NsYXNzTmFtZScsIGZvclByb3AgPSAnZm9yJzsKCiAgRElWLnNldEF0dHJpYnV0ZShjbGFzc1Byb3AsICd4Jyk7CiAgaWYgKERJVi5jbGFzc05hbWUgIT09ICd4JykgewogICAgRElWLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAneCcpOwogICAgaWYgKERJVi5jbGFzc05hbWUgPT09ICd4JykKICAgICAgY2xhc3NQcm9wID0gJ2NsYXNzJzsKICB9CgogIHZhciBMQUJFTCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7CiAgTEFCRUwuc2V0QXR0cmlidXRlKGZvclByb3AsICd4Jyk7CiAgaWYgKExBQkVMLmh0bWxGb3IgIT09ICd4JykgewogICAgTEFCRUwuc2V0QXR0cmlidXRlKCdodG1sRm9yJywgJ3gnKTsKICAgIGlmIChMQUJFTC5odG1sRm9yID09PSAneCcpCiAgICAgIGZvclByb3AgPSAnaHRtbEZvcic7CiAgfQogIExBQkVMID0gbnVsbDsKCiAgZnVuY3Rpb24gX2dldEF0dHIoZWxlbWVudCwgYXR0cmlidXRlKSB7CiAgICByZXR1cm4gZWxlbWVudC5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlKTsKICB9CgogIGZ1bmN0aW9uIF9nZXRBdHRyMihlbGVtZW50LCBhdHRyaWJ1dGUpIHsKICAgIHJldHVybiBlbGVtZW50LmdldEF0dHJpYnV0ZShhdHRyaWJ1dGUsIDIpOwogIH0KCiAgZnVuY3Rpb24gX2dldEF0dHJOb2RlKGVsZW1lbnQsIGF0dHJpYnV0ZSkgewogICAgdmFyIG5vZGUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZU5vZGUoYXR0cmlidXRlKTsKICAgIHJldHVybiBub2RlID8gbm9kZS52YWx1ZSA6ICcnOwogIH0KCiAgZnVuY3Rpb24gX2dldEZsYWcoZWxlbWVudCwgYXR0cmlidXRlKSB7CiAgICByZXR1cm4gJChlbGVtZW50KS5oYXNBdHRyaWJ1dGUoYXR0cmlidXRlKSA/IGF0dHJpYnV0ZSA6IG51bGw7CiAgfQoKICBESVYub25jbGljayA9IFByb3RvdHlwZS5lbXB0eUZ1bmN0aW9uOwogIHZhciBvbmNsaWNrVmFsdWUgPSBESVYuZ2V0QXR0cmlidXRlKCdvbmNsaWNrJyk7CgogIHZhciBfZ2V0RXY7CgogIGlmIChTdHJpbmcob25jbGlja1ZhbHVlKS5pbmRleE9mKCd7JykgPiAtMSkgewogICAgX2dldEV2ID0gZnVuY3Rpb24oZWxlbWVudCwgYXR0cmlidXRlKSB7CiAgICAgIHZhciB2YWx1ZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZSk7CiAgICAgIGlmICghdmFsdWUpIHJldHVybiBudWxsOwogICAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7CiAgICAgIHZhbHVlID0gdmFsdWUuc3BsaXQoJ3snKVsxXTsKICAgICAgdmFsdWUgPSB2YWx1ZS5zcGxpdCgnfScpWzBdOwogICAgICByZXR1cm4gdmFsdWUuc3RyaXAoKTsKICAgIH07CiAgfQogIGVsc2UgaWYgKG9uY2xpY2tWYWx1ZSA9PT0gJycpIHsKICAgIF9nZXRFdiA9IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHJpYnV0ZSkgewogICAgICB2YXIgdmFsdWUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShhdHRyaWJ1dGUpOwogICAgICBpZiAoIXZhbHVlKSByZXR1cm4gbnVsbDsKICAgICAgcmV0dXJuIHZhbHVlLnN0cmlwKCk7CiAgICB9OwogIH0KCiAgQVRUUklCVVRFX1RSQU5TTEFUSU9OUy5yZWFkID0gewogICAgbmFtZXM6IHsKICAgICAgJ2NsYXNzJzogICAgIGNsYXNzUHJvcCwKICAgICAgJ2NsYXNzTmFtZSc6IGNsYXNzUHJvcCwKICAgICAgJ2Zvcic6ICAgICAgIGZvclByb3AsCiAgICAgICdodG1sRm9yJzogICBmb3JQcm9wCiAgICB9LAoKICAgIHZhbHVlczogewogICAgICBzdHlsZTogZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgIHJldHVybiBlbGVtZW50LnN0eWxlLmNzc1RleHQudG9Mb3dlckNhc2UoKTsKICAgICAgfSwKICAgICAgdGl0bGU6IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICByZXR1cm4gZWxlbWVudC50aXRsZTsKICAgICAgfQogICAgfQogIH07CgogIEFUVFJJQlVURV9UUkFOU0xBVElPTlMud3JpdGUgPSB7CiAgICBuYW1lczogewogICAgICBjbGFzc05hbWU6ICAgJ2NsYXNzJywKICAgICAgaHRtbEZvcjogICAgICdmb3InLAogICAgICBjZWxscGFkZGluZzogJ2NlbGxQYWRkaW5nJywKICAgICAgY2VsbHNwYWNpbmc6ICdjZWxsU3BhY2luZycKICAgIH0sCgogICAgdmFsdWVzOiB7CiAgICAgIGNoZWNrZWQ6IGZ1bmN0aW9uKGVsZW1lbnQsIHZhbHVlKSB7CiAgICAgICAgdmFsdWUgPSAhIXZhbHVlOwogICAgICAgIGVsZW1lbnQuY2hlY2tlZCA9IHZhbHVlOwogICAgICAgIHJldHVybiB2YWx1ZSA/ICdjaGVja2VkJyA6IG51bGw7CiAgICAgIH0sCgogICAgICBzdHlsZTogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWUpIHsKICAgICAgICBlbGVtZW50LnN0eWxlLmNzc1RleHQgPSB2YWx1ZSA/IHZhbHVlIDogJyc7CiAgICAgIH0KICAgIH0KICB9OwoKICBBVFRSSUJVVEVfVFJBTlNMQVRJT05TLmhhcyA9IHsgbmFtZXM6IHt9IH07CgogIE9iamVjdC5leHRlbmQoQVRUUklCVVRFX1RSQU5TTEFUSU9OUy53cml0ZS5uYW1lcywKICAgQVRUUklCVVRFX1RSQU5TTEFUSU9OUy5yZWFkLm5hbWVzKTsKCiAgdmFyIENBTUVMX0NBU0VEX0FUVFJJQlVURV9OQU1FUyA9ICR3KCdjb2xTcGFuIHJvd1NwYW4gdkFsaWduIGRhdGVUaW1lICcgKwogICAnYWNjZXNzS2V5IHRhYkluZGV4IGVuY1R5cGUgbWF4TGVuZ3RoIHJlYWRPbmx5IGxvbmdEZXNjIGZyYW1lQm9yZGVyJyk7CgogIGZvciAodmFyIGkgPSAwLCBhdHRyOyBhdHRyID0gQ0FNRUxfQ0FTRURfQVRUUklCVVRFX05BTUVTW2ldOyBpKyspIHsKICAgIEFUVFJJQlVURV9UUkFOU0xBVElPTlMud3JpdGUubmFtZXNbYXR0ci50b0xvd2VyQ2FzZSgpXSA9IGF0dHI7CiAgICBBVFRSSUJVVEVfVFJBTlNMQVRJT05TLmhhcy5uYW1lc1thdHRyLnRvTG93ZXJDYXNlKCldICAgPSBhdHRyOwogIH0KCiAgT2JqZWN0LmV4dGVuZChBVFRSSUJVVEVfVFJBTlNMQVRJT05TLnJlYWQudmFsdWVzLCB7CiAgICBocmVmOiAgICAgICAgX2dldEF0dHIyLAogICAgc3JjOiAgICAgICAgIF9nZXRBdHRyMiwKICAgIHR5cGU6ICAgICAgICBfZ2V0QXR0ciwKICAgIGFjdGlvbjogICAgICBfZ2V0QXR0ck5vZGUsCiAgICBkaXNhYmxlZDogICAgX2dldEZsYWcsCiAgICBjaGVja2VkOiAgICAgX2dldEZsYWcsCiAgICByZWFkb25seTogICAgX2dldEZsYWcsCiAgICBtdWx0aXBsZTogICAgX2dldEZsYWcsCiAgICBvbmxvYWQ6ICAgICAgX2dldEV2LAogICAgb251bmxvYWQ6ICAgIF9nZXRFdiwKICAgIG9uY2xpY2s6ICAgICBfZ2V0RXYsCiAgICBvbmRibGNsaWNrOiAgX2dldEV2LAogICAgb25tb3VzZWRvd246IF9nZXRFdiwKICAgIG9ubW91c2V1cDogICBfZ2V0RXYsCiAgICBvbm1vdXNlb3ZlcjogX2dldEV2LAogICAgb25tb3VzZW1vdmU6IF9nZXRFdiwKICAgIG9ubW91c2VvdXQ6ICBfZ2V0RXYsCiAgICBvbmZvY3VzOiAgICAgX2dldEV2LAogICAgb25ibHVyOiAgICAgIF9nZXRFdiwKICAgIG9ua2V5cHJlc3M6ICBfZ2V0RXYsCiAgICBvbmtleWRvd246ICAgX2dldEV2LAogICAgb25rZXl1cDogICAgIF9nZXRFdiwKICAgIG9uc3VibWl0OiAgICBfZ2V0RXYsCiAgICBvbnJlc2V0OiAgICAgX2dldEV2LAogICAgb25zZWxlY3Q6ICAgIF9nZXRFdiwKICAgIG9uY2hhbmdlOiAgICBfZ2V0RXYKICB9KTsKCgogIE9iamVjdC5leHRlbmQobWV0aG9kcywgewogICAgaWRlbnRpZnk6ICAgICAgICBpZGVudGlmeSwKICAgIHJlYWRBdHRyaWJ1dGU6ICAgcmVhZEF0dHJpYnV0ZSwKICAgIHdyaXRlQXR0cmlidXRlOiAgd3JpdGVBdHRyaWJ1dGUsCiAgICBjbGFzc05hbWVzOiAgICAgIGNsYXNzTmFtZXMsCiAgICBoYXNDbGFzc05hbWU6ICAgIGhhc0NsYXNzTmFtZSwKICAgIGFkZENsYXNzTmFtZTogICAgYWRkQ2xhc3NOYW1lLAogICAgcmVtb3ZlQ2xhc3NOYW1lOiByZW1vdmVDbGFzc05hbWUsCiAgICB0b2dnbGVDbGFzc05hbWU6IHRvZ2dsZUNsYXNzTmFtZQogIH0pOwoKCiAgZnVuY3Rpb24gbm9ybWFsaXplU3R5bGVOYW1lKHN0eWxlKSB7CiAgICBpZiAoc3R5bGUgPT09ICdmbG9hdCcgfHwgc3R5bGUgPT09ICdzdHlsZUZsb2F0JykKICAgICAgcmV0dXJuICdjc3NGbG9hdCc7CiAgICByZXR1cm4gc3R5bGUuY2FtZWxpemUoKTsKICB9CgogIGZ1bmN0aW9uIG5vcm1hbGl6ZVN0eWxlTmFtZV9JRShzdHlsZSkgewogICAgaWYgKHN0eWxlID09PSAnZmxvYXQnIHx8IHN0eWxlID09PSAnY3NzRmxvYXQnKQogICAgICByZXR1cm4gJ3N0eWxlRmxvYXQnOwogICAgcmV0dXJuIHN0eWxlLmNhbWVsaXplKCk7CiAgfQoKICBmdW5jdGlvbiBzZXRTdHlsZShlbGVtZW50LCBzdHlsZXMpIHsKICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOwogICAgdmFyIGVsZW1lbnRTdHlsZSA9IGVsZW1lbnQuc3R5bGUsIG1hdGNoOwoKICAgIGlmIChPYmplY3QuaXNTdHJpbmcoc3R5bGVzKSkgewogICAgICBlbGVtZW50U3R5bGUuY3NzVGV4dCArPSAnOycgKyBzdHlsZXM7CiAgICAgIGlmIChzdHlsZXMuaW5jbHVkZSgnb3BhY2l0eScpKSB7CiAgICAgICAgdmFyIG9wYWNpdHkgPSBzdHlsZXMubWF0Y2goL29wYWNpdHk6XHMqKFxkP1wuP1xkKikvKVsxXTsKICAgICAgICBFbGVtZW50LnNldE9wYWNpdHkoZWxlbWVudCwgb3BhY2l0eSk7CiAgICAgIH0KICAgICAgcmV0dXJuIGVsZW1lbnQ7CiAgICB9CgogICAgZm9yICh2YXIgcHJvcGVydHkgaW4gc3R5bGVzKSB7CiAgICAgIGlmIChwcm9wZXJ0eSA9PT0gJ29wYWNpdHknKSB7CiAgICAgICAgRWxlbWVudC5zZXRPcGFjaXR5KGVsZW1lbnQsIHN0eWxlc1twcm9wZXJ0eV0pOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciB2YWx1ZSA9IHN0eWxlc1twcm9wZXJ0eV07CiAgICAgICAgaWYgKHByb3BlcnR5ID09PSAnZmxvYXQnIHx8IHByb3BlcnR5ID09PSAnY3NzRmxvYXQnKSB7CiAgICAgICAgICBwcm9wZXJ0eSA9IE9iamVjdC5pc1VuZGVmaW5lZChlbGVtZW50U3R5bGUuc3R5bGVGbG9hdCkgPwogICAgICAgICAgICdjc3NGbG9hdCcgOiAnc3R5bGVGbG9hdCc7CiAgICAgICAgfQogICAgICAgIGVsZW1lbnRTdHlsZVtwcm9wZXJ0eV0gPSB2YWx1ZTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBlbGVtZW50OwogIH0KCgogIGZ1bmN0aW9uIGdldFN0eWxlKGVsZW1lbnQsIHN0eWxlKSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKICAgIHN0eWxlID0gbm9ybWFsaXplU3R5bGVOYW1lKHN0eWxlKTsKCiAgICB2YXIgdmFsdWUgPSBlbGVtZW50LnN0eWxlW3N0eWxlXTsKICAgIGlmICghdmFsdWUgfHwgdmFsdWUgPT09ICdhdXRvJykgewogICAgICB2YXIgY3NzID0gZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50LCBudWxsKTsKICAgICAgdmFsdWUgPSBjc3MgPyBjc3Nbc3R5bGVdIDogbnVsbDsKICAgIH0KCiAgICBpZiAoc3R5bGUgPT09ICdvcGFjaXR5JykgcmV0dXJuIHZhbHVlID8gcGFyc2VGbG9hdCh2YWx1ZSkgOiAxLjA7CiAgICByZXR1cm4gdmFsdWUgPT09ICdhdXRvJyA/IG51bGwgOiB2YWx1ZTsKICB9CgogIGZ1bmN0aW9uIGdldFN0eWxlX09wZXJhKGVsZW1lbnQsIHN0eWxlKSB7CiAgICBzd2l0Y2ggKHN0eWxlKSB7CiAgICAgIGNhc2UgJ2hlaWdodCc6IGNhc2UgJ3dpZHRoJzoKICAgICAgICBpZiAoIUVsZW1lbnQudmlzaWJsZShlbGVtZW50KSkgcmV0dXJuIG51bGw7CgogICAgICAgIHZhciBkaW0gPSBwYXJzZUludChnZXRTdHlsZShlbGVtZW50LCBzdHlsZSksIDEwKTsKCiAgICAgICAgaWYgKGRpbSAhPT0gZWxlbWVudFsnb2Zmc2V0JyArIHN0eWxlLmNhcGl0YWxpemUoKV0pCiAgICAgICAgICByZXR1cm4gZGltICsgJ3B4JzsKCiAgICAgICAgcmV0dXJuIEVsZW1lbnQubWVhc3VyZShlbGVtZW50LCBzdHlsZSk7CgogICAgICBkZWZhdWx0OiByZXR1cm4gZ2V0U3R5bGUoZWxlbWVudCwgc3R5bGUpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gZ2V0U3R5bGVfSUUoZWxlbWVudCwgc3R5bGUpIHsKICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOwogICAgc3R5bGUgPSBub3JtYWxpemVTdHlsZU5hbWVfSUUoc3R5bGUpOwoKICAgIHZhciB2YWx1ZSA9IGVsZW1lbnQuc3R5bGVbc3R5bGVdOwogICAgaWYgKCF2YWx1ZSAmJiBlbGVtZW50LmN1cnJlbnRTdHlsZSkgewogICAgICB2YWx1ZSA9IGVsZW1lbnQuY3VycmVudFN0eWxlW3N0eWxlXTsKICAgIH0KCiAgICBpZiAoc3R5bGUgPT09ICdvcGFjaXR5JykgewogICAgICBpZiAoIVNUQU5EQVJEX0NTU19PUEFDSVRZX1NVUFBPUlRFRCkKICAgICAgICByZXR1cm4gZ2V0T3BhY2l0eV9JRShlbGVtZW50KTsKICAgICAgZWxzZSByZXR1cm4gdmFsdWUgPyBwYXJzZUZsb2F0KHZhbHVlKSA6IDEuMDsKICAgIH0KCiAgICBpZiAodmFsdWUgPT09ICdhdXRvJykgewogICAgICBpZiAoKHN0eWxlID09PSAnd2lkdGgnIHx8IHN0eWxlID09PSAnaGVpZ2h0JykgJiYgRWxlbWVudC52aXNpYmxlKGVsZW1lbnQpKQogICAgICAgIHJldHVybiBFbGVtZW50Lm1lYXN1cmUoZWxlbWVudCwgc3R5bGUpICsgJ3B4JzsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgcmV0dXJuIHZhbHVlOwogIH0KCiAgZnVuY3Rpb24gc3RyaXBBbHBoYUZyb21GaWx0ZXJfSUUoZmlsdGVyKSB7CiAgICByZXR1cm4gKGZpbHRlciB8fCAnJykucmVwbGFjZSgvYWxwaGFcKFteXCldKlwpL2dpLCAnJyk7CiAgfQoKICBmdW5jdGlvbiBoYXNMYXlvdXRfSUUoZWxlbWVudCkgewogICAgaWYgKCFlbGVtZW50LmN1cnJlbnRTdHlsZSB8fCAhZWxlbWVudC5jdXJyZW50U3R5bGUuaGFzTGF5b3V0KQogICAgICBlbGVtZW50LnN0eWxlLnpvb20gPSAxOwogICAgcmV0dXJuIGVsZW1lbnQ7CiAgfQoKICB2YXIgU1RBTkRBUkRfQ1NTX09QQUNJVFlfU1VQUE9SVEVEID0gKGZ1bmN0aW9uKCkgewogICAgRElWLnN0eWxlLmNzc1RleHQgPSAib3BhY2l0eTouNTUiOwogICAgcmV0dXJuIC9eMC41NS8udGVzdChESVYuc3R5bGUub3BhY2l0eSk7CiAgfSkoKTsKCiAgZnVuY3Rpb24gc2V0T3BhY2l0eShlbGVtZW50LCB2YWx1ZSkgewogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7CiAgICBpZiAodmFsdWUgPT0gMSB8fCB2YWx1ZSA9PT0gJycpIHZhbHVlID0gJyc7CiAgICBlbHNlIGlmICh2YWx1ZSA8IDAuMDAwMDEpIHZhbHVlID0gMDsKICAgIGVsZW1lbnQuc3R5bGUub3BhY2l0eSA9IHZhbHVlOwogICAgcmV0dXJuIGVsZW1lbnQ7CiAgfQoKICBmdW5jdGlvbiBzZXRPcGFjaXR5X0lFKGVsZW1lbnQsIHZhbHVlKSB7CiAgICBpZiAoU1RBTkRBUkRfQ1NTX09QQUNJVFlfU1VQUE9SVEVEKQogICAgICByZXR1cm4gc2V0T3BhY2l0eShlbGVtZW50LCB2YWx1ZSk7CgogICAgZWxlbWVudCA9IGhhc0xheW91dF9JRSgkKGVsZW1lbnQpKTsKICAgIHZhciBmaWx0ZXIgPSBFbGVtZW50LmdldFN0eWxlKGVsZW1lbnQsICdmaWx0ZXInKSwKICAgICBzdHlsZSA9IGVsZW1lbnQuc3R5bGU7CgogICAgaWYgKHZhbHVlID09IDEgfHwgdmFsdWUgPT09ICcnKSB7CiAgICAgIGZpbHRlciA9IHN0cmlwQWxwaGFGcm9tRmlsdGVyX0lFKGZpbHRlcik7CiAgICAgIGlmIChmaWx0ZXIpIHN0eWxlLmZpbHRlciA9IGZpbHRlcjsKICAgICAgZWxzZSBzdHlsZS5yZW1vdmVBdHRyaWJ1dGUoJ2ZpbHRlcicpOwogICAgICByZXR1cm4gZWxlbWVudDsKICAgIH0KCiAgICBpZiAodmFsdWUgPCAwLjAwMDAxKSB2YWx1ZSA9IDA7CgogICAgc3R5bGUuZmlsdGVyID0gc3RyaXBBbHBoYUZyb21GaWx0ZXJfSUUoZmlsdGVyKSArCiAgICAgJyBhbHBoYShvcGFjaXR5PScgKyAodmFsdWUgKiAxMDApICsgJyknOwoKICAgIHJldHVybiBlbGVtZW50OwogIH0KCgogIGZ1bmN0aW9uIGdldE9wYWNpdHkoZWxlbWVudCkgewogICAgcmV0dXJuIEVsZW1lbnQuZ2V0U3R5bGUoZWxlbWVudCwgJ29wYWNpdHknKTsKICB9CgogIGZ1bmN0aW9uIGdldE9wYWNpdHlfSUUoZWxlbWVudCkgewogICAgaWYgKFNUQU5EQVJEX0NTU19PUEFDSVRZX1NVUFBPUlRFRCkKICAgICAgcmV0dXJuIGdldE9wYWNpdHkoZWxlbWVudCk7CgogICAgdmFyIGZpbHRlciA9IEVsZW1lbnQuZ2V0U3R5bGUoZWxlbWVudCwgJ2ZpbHRlcicpOwogICAgaWYgKGZpbHRlci5sZW5ndGggPT09IDApIHJldHVybiAxLjA7CiAgICB2YXIgbWF0Y2ggPSAoZmlsdGVyIHx8ICcnKS5tYXRjaCgvYWxwaGFcKG9wYWNpdHk9KC4qKVwpL2kpOwogICAgaWYgKG1hdGNoICYmIG1hdGNoWzFdKSByZXR1cm4gcGFyc2VGbG9hdChtYXRjaFsxXSkgLyAxMDA7CiAgICByZXR1cm4gMS4wOwogIH0KCgogIE9iamVjdC5leHRlbmQobWV0aG9kcywgewogICAgc2V0U3R5bGU6ICAgc2V0U3R5bGUsCiAgICBnZXRTdHlsZTogICBnZXRTdHlsZSwKICAgIHNldE9wYWNpdHk6IHNldE9wYWNpdHksCiAgICBnZXRPcGFjaXR5OiBnZXRPcGFjaXR5CiAgfSk7CgogIGlmICgnc3R5bGVGbG9hdCcgaW4gRElWLnN0eWxlKSB7CiAgICBtZXRob2RzLmdldFN0eWxlID0gZ2V0U3R5bGVfSUU7CiAgICBtZXRob2RzLnNldE9wYWNpdHkgPSBzZXRPcGFjaXR5X0lFOwogICAgbWV0aG9kcy5nZXRPcGFjaXR5ID0gZ2V0T3BhY2l0eV9JRTsKICB9CgogIHZhciBVSUQgPSAwOwoKICBHTE9CQUwuRWxlbWVudC5TdG9yYWdlID0geyBVSUQ6IDEgfTsKCiAgZnVuY3Rpb24gZ2V0VW5pcXVlRWxlbWVudElEKGVsZW1lbnQpIHsKICAgIGlmIChlbGVtZW50ID09PSB3aW5kb3cpIHJldHVybiAwOwoKICAgIGlmICh0eXBlb2YgZWxlbWVudC5fcHJvdG90eXBlVUlEID09PSAndW5kZWZpbmVkJykKICAgICAgZWxlbWVudC5fcHJvdG90eXBlVUlEID0gRWxlbWVudC5TdG9yYWdlLlVJRCsrOwogICAgcmV0dXJuIGVsZW1lbnQuX3Byb3RvdHlwZVVJRDsKICB9CgogIGZ1bmN0aW9uIGdldFVuaXF1ZUVsZW1lbnRJRF9JRShlbGVtZW50KSB7CiAgICBpZiAoZWxlbWVudCA9PT0gd2luZG93KSByZXR1cm4gMDsKICAgIGlmIChlbGVtZW50ID09IGRvY3VtZW50KSByZXR1cm4gMTsKICAgIHJldHVybiBlbGVtZW50LnVuaXF1ZUlEOwogIH0KCiAgdmFyIEhBU19VTklRVUVfSURfUFJPUEVSVFkgPSAoJ3VuaXF1ZUlEJyBpbiBESVYpOwogIGlmIChIQVNfVU5JUVVFX0lEX1BST1BFUlRZKQogICAgZ2V0VW5pcXVlRWxlbWVudElEID0gZ2V0VW5pcXVlRWxlbWVudElEX0lFOwoKICBmdW5jdGlvbiBnZXRTdG9yYWdlKGVsZW1lbnQpIHsKICAgIGlmICghKGVsZW1lbnQgPSAkKGVsZW1lbnQpKSkgcmV0dXJuOwoKICAgIHZhciB1aWQgPSBnZXRVbmlxdWVFbGVtZW50SUQoZWxlbWVudCk7CgogICAgaWYgKCFFbGVtZW50LlN0b3JhZ2VbdWlkXSkKICAgICAgRWxlbWVudC5TdG9yYWdlW3VpZF0gPSAkSCgpOwoKICAgIHJldHVybiBFbGVtZW50LlN0b3JhZ2VbdWlkXTsKICB9CgogIGZ1bmN0aW9uIHN0b3JlKGVsZW1lbnQsIGtleSwgdmFsdWUpIHsKICAgIGlmICghKGVsZW1lbnQgPSAkKGVsZW1lbnQpKSkgcmV0dXJuOwogICAgdmFyIHN0b3JhZ2UgPSBnZXRTdG9yYWdlKGVsZW1lbnQpOwogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHsKICAgICAgc3RvcmFnZS51cGRhdGUoa2V5KTsKICAgIH0gZWxzZSB7CiAgICAgIHN0b3JhZ2Uuc2V0KGtleSwgdmFsdWUpOwogICAgfQogICAgcmV0dXJuIGVsZW1lbnQ7CiAgfQoKICBmdW5jdGlvbiByZXRyaWV2ZShlbGVtZW50LCBrZXksIGRlZmF1bHRWYWx1ZSkgewogICAgaWYgKCEoZWxlbWVudCA9ICQoZWxlbWVudCkpKSByZXR1cm47CiAgICB2YXIgc3RvcmFnZSA9IGdldFN0b3JhZ2UoZWxlbWVudCksIHZhbHVlID0gc3RvcmFnZS5nZXQoa2V5KTsKCiAgICBpZiAoT2JqZWN0LmlzVW5kZWZpbmVkKHZhbHVlKSkgewogICAgICBzdG9yYWdlLnNldChrZXksIGRlZmF1bHRWYWx1ZSk7CiAgICAgIHZhbHVlID0gZGVmYXVsdFZhbHVlOwogICAgfQoKICAgIHJldHVybiB2YWx1ZTsKICB9CgoKICBPYmplY3QuZXh0ZW5kKG1ldGhvZHMsIHsKICAgIGdldFN0b3JhZ2U6IGdldFN0b3JhZ2UsCiAgICBzdG9yZTogICAgICBzdG9yZSwKICAgIHJldHJpZXZlOiAgIHJldHJpZXZlCiAgfSk7CgoKICB2YXIgTWV0aG9kcyA9IHt9LCBCeVRhZyA9IEVsZW1lbnQuTWV0aG9kcy5CeVRhZywKICAgRiA9IFByb3RvdHlwZS5Ccm93c2VyRmVhdHVyZXM7CgogIGlmICghRi5FbGVtZW50RXh0ZW5zaW9ucyAmJiAoJ19fcHJvdG9fXycgaW4gRElWKSkgewogICAgR0xPQkFMLkhUTUxFbGVtZW50ID0ge307CiAgICBHTE9CQUwuSFRNTEVsZW1lbnQucHJvdG90eXBlID0gRElWWydfX3Byb3RvX18nXTsKICAgIEYuRWxlbWVudEV4dGVuc2lvbnMgPSB0cnVlOwogIH0KCiAgZnVuY3Rpb24gY2hlY2tFbGVtZW50UHJvdG90eXBlRGVmaWNpZW5jeSh0YWdOYW1lKSB7CiAgICBpZiAodHlwZW9mIHdpbmRvdy5FbGVtZW50ID09PSAndW5kZWZpbmVkJykgcmV0dXJuIGZhbHNlOwogICAgaWYgKCFIQVNfRVhURU5ERURfQ1JFQVRFX0VMRU1FTlRfU1lOVEFYKSByZXR1cm4gZmFsc2U7CiAgICB2YXIgcHJvdG8gPSB3aW5kb3cuRWxlbWVudC5wcm90b3R5cGU7CiAgICBpZiAocHJvdG8pIHsKICAgICAgdmFyIGlkID0gJ18nICsgKE1hdGgucmFuZG9tKCkgKyAnJykuc2xpY2UoMiksCiAgICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSk7CiAgICAgIHByb3RvW2lkXSA9ICd4JzsKICAgICAgdmFyIGlzQnVnZ3kgPSAoZWxbaWRdICE9PSAneCcpOwogICAgICBkZWxldGUgcHJvdG9baWRdOwogICAgICBlbCA9IG51bGw7CiAgICAgIHJldHVybiBpc0J1Z2d5OwogICAgfQoKICAgIHJldHVybiBmYWxzZTsKICB9CgogIHZhciBIVE1MT0JKRUNURUxFTUVOVF9QUk9UT1RZUEVfQlVHR1kgPQogICBjaGVja0VsZW1lbnRQcm90b3R5cGVEZWZpY2llbmN5KCdvYmplY3QnKTsKCiAgZnVuY3Rpb24gZXh0ZW5kRWxlbWVudFdpdGgoZWxlbWVudCwgbWV0aG9kcykgewogICAgZm9yICh2YXIgcHJvcGVydHkgaW4gbWV0aG9kcykgewogICAgICB2YXIgdmFsdWUgPSBtZXRob2RzW3Byb3BlcnR5XTsKICAgICAgaWYgKE9iamVjdC5pc0Z1bmN0aW9uKHZhbHVlKSAmJiAhKHByb3BlcnR5IGluIGVsZW1lbnQpKQogICAgICAgIGVsZW1lbnRbcHJvcGVydHldID0gdmFsdWUubWV0aG9kaXplKCk7CiAgICB9CiAgfQoKICB2YXIgRVhURU5ERUQgPSB7fTsKICBmdW5jdGlvbiBlbGVtZW50SXNFeHRlbmRlZChlbGVtZW50KSB7CiAgICB2YXIgdWlkID0gZ2V0VW5pcXVlRWxlbWVudElEKGVsZW1lbnQpOwogICAgcmV0dXJuICh1aWQgaW4gRVhURU5ERUQpOwogIH0KCiAgZnVuY3Rpb24gZXh0ZW5kKGVsZW1lbnQpIHsKICAgIGlmICghZWxlbWVudCB8fCBlbGVtZW50SXNFeHRlbmRlZChlbGVtZW50KSkgcmV0dXJuIGVsZW1lbnQ7CiAgICBpZiAoZWxlbWVudC5ub2RlVHlwZSAhPT0gTm9kZS5FTEVNRU5UX05PREUgfHwgZWxlbWVudCA9PSB3aW5kb3cpCiAgICAgIHJldHVybiBlbGVtZW50OwoKICAgIHZhciBtZXRob2RzID0gT2JqZWN0LmNsb25lKE1ldGhvZHMpLAogICAgIHRhZ05hbWUgPSBlbGVtZW50LnRhZ05hbWUudG9VcHBlckNhc2UoKTsKCiAgICBpZiAoQnlUYWdbdGFnTmFtZV0pIE9iamVjdC5leHRlbmQobWV0aG9kcywgQnlUYWdbdGFnTmFtZV0pOwoKICAgIGV4dGVuZEVsZW1lbnRXaXRoKGVsZW1lbnQsIG1ldGhvZHMpOwogICAgRVhURU5ERURbZ2V0VW5pcXVlRWxlbWVudElEKGVsZW1lbnQpXSA9IHRydWU7CiAgICByZXR1cm4gZWxlbWVudDsKICB9CgogIGZ1bmN0aW9uIGV4dGVuZF9JRTgoZWxlbWVudCkgewogICAgaWYgKCFlbGVtZW50IHx8IGVsZW1lbnRJc0V4dGVuZGVkKGVsZW1lbnQpKSByZXR1cm4gZWxlbWVudDsKCiAgICB2YXIgdCA9IGVsZW1lbnQudGFnTmFtZTsKICAgIGlmICh0ICYmICgvXig/Om9iamVjdHxhcHBsZXR8ZW1iZWQpJC9pLnRlc3QodCkpKSB7CiAgICAgIGV4dGVuZEVsZW1lbnRXaXRoKGVsZW1lbnQsIEVsZW1lbnQuTWV0aG9kcyk7CiAgICAgIGV4dGVuZEVsZW1lbnRXaXRoKGVsZW1lbnQsIEVsZW1lbnQuTWV0aG9kcy5TaW11bGF0ZWQpOwogICAgICBleHRlbmRFbGVtZW50V2l0aChlbGVtZW50LCBFbGVtZW50Lk1ldGhvZHMuQnlUYWdbdC50b1VwcGVyQ2FzZSgpXSk7CiAgICB9CgogICAgcmV0dXJuIGVsZW1lbnQ7CiAgfQoKICBpZiAoRi5TcGVjaWZpY0VsZW1lbnRFeHRlbnNpb25zKSB7CiAgICBleHRlbmQgPSBIVE1MT0JKRUNURUxFTUVOVF9QUk9UT1RZUEVfQlVHR1kgPyBleHRlbmRfSUU4IDogUHJvdG90eXBlLks7CiAgfQoKICBmdW5jdGlvbiBhZGRNZXRob2RzVG9UYWdOYW1lKHRhZ05hbWUsIG1ldGhvZHMpIHsKICAgIHRhZ05hbWUgPSB0YWdOYW1lLnRvVXBwZXJDYXNlKCk7CiAgICBpZiAoIUJ5VGFnW3RhZ05hbWVdKSBCeVRhZ1t0YWdOYW1lXSA9IHt9OwogICAgT2JqZWN0LmV4dGVuZChCeVRhZ1t0YWdOYW1lXSwgbWV0aG9kcyk7CiAgfQoKICBmdW5jdGlvbiBtZXJnZU1ldGhvZHMoZGVzdGluYXRpb24sIG1ldGhvZHMsIG9ubHlJZkFic2VudCkgewogICAgaWYgKE9iamVjdC5pc1VuZGVmaW5lZChvbmx5SWZBYnNlbnQpKSBvbmx5SWZBYnNlbnQgPSBmYWxzZTsKICAgIGZvciAodmFyIHByb3BlcnR5IGluIG1ldGhvZHMpIHsKICAgICAgdmFyIHZhbHVlID0gbWV0aG9kc1twcm9wZXJ0eV07CiAgICAgIGlmICghT2JqZWN0LmlzRnVuY3Rpb24odmFsdWUpKSBjb250aW51ZTsKICAgICAgaWYgKCFvbmx5SWZBYnNlbnQgfHwgIShwcm9wZXJ0eSBpbiBkZXN0aW5hdGlvbikpCiAgICAgICAgZGVzdGluYXRpb25bcHJvcGVydHldID0gdmFsdWUubWV0aG9kaXplKCk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBmaW5kRE9NQ2xhc3ModGFnTmFtZSkgewogICAgdmFyIGtsYXNzOwogICAgdmFyIHRyYW5zID0gewogICAgICAiT1BUR1JPVVAiOiAiT3B0R3JvdXAiLCAiVEVYVEFSRUEiOiAiVGV4dEFyZWEiLCAiUCI6ICJQYXJhZ3JhcGgiLAogICAgICAiRklFTERTRVQiOiAiRmllbGRTZXQiLCAiVUwiOiAiVUxpc3QiLCAiT0wiOiAiT0xpc3QiLCAiREwiOiAiRExpc3QiLAogICAgICAiRElSIjogIkRpcmVjdG9yeSIsICJIMSI6ICJIZWFkaW5nIiwgIkgyIjogIkhlYWRpbmciLCAiSDMiOiAiSGVhZGluZyIsCiAgICAgICJINCI6ICJIZWFkaW5nIiwgIkg1IjogIkhlYWRpbmciLCAiSDYiOiAiSGVhZGluZyIsICJRIjogIlF1b3RlIiwKICAgICAgIklOUyI6ICJNb2QiLCAiREVMIjogIk1vZCIsICJBIjogIkFuY2hvciIsICJJTUciOiAiSW1hZ2UiLCAiQ0FQVElPTiI6CiAgICAgICJUYWJsZUNhcHRpb24iLCAiQ09MIjogIlRhYmxlQ29sIiwgIkNPTEdST1VQIjogIlRhYmxlQ29sIiwgIlRIRUFEIjoKICAgICAgIlRhYmxlU2VjdGlvbiIsICJURk9PVCI6ICJUYWJsZVNlY3Rpb24iLCAiVEJPRFkiOiAiVGFibGVTZWN0aW9uIiwgIlRSIjoKICAgICAgIlRhYmxlUm93IiwgIlRIIjogIlRhYmxlQ2VsbCIsICJURCI6ICJUYWJsZUNlbGwiLCAiRlJBTUVTRVQiOgogICAgICAiRnJhbWVTZXQiLCAiSUZSQU1FIjogIklGcmFtZSIKICAgIH07CiAgICBpZiAodHJhbnNbdGFnTmFtZV0pIGtsYXNzID0gJ0hUTUwnICsgdHJhbnNbdGFnTmFtZV0gKyAnRWxlbWVudCc7CiAgICBpZiAod2luZG93W2tsYXNzXSkgcmV0dXJuIHdpbmRvd1trbGFzc107CiAgICBrbGFzcyA9ICdIVE1MJyArIHRhZ05hbWUgKyAnRWxlbWVudCc7CiAgICBpZiAod2luZG93W2tsYXNzXSkgcmV0dXJuIHdpbmRvd1trbGFzc107CiAgICBrbGFzcyA9ICdIVE1MJyArIHRhZ05hbWUuY2FwaXRhbGl6ZSgpICsgJ0VsZW1lbnQnOwogICAgaWYgKHdpbmRvd1trbGFzc10pIHJldHVybiB3aW5kb3dba2xhc3NdOwoKICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKSwKICAgICBwcm90byA9IGVsZW1lbnRbJ19fcHJvdG9fXyddIHx8IGVsZW1lbnQuY29uc3RydWN0b3IucHJvdG90eXBlOwoKICAgIGVsZW1lbnQgPSBudWxsOwogICAgcmV0dXJuIHByb3RvOwogIH0KCiAgZnVuY3Rpb24gYWRkTWV0aG9kcyhtZXRob2RzKSB7CiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgYWRkRm9ybU1ldGhvZHMoKTsKCiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgewogICAgICB2YXIgdGFnTmFtZSA9IG1ldGhvZHM7CiAgICAgIG1ldGhvZHMgPSBhcmd1bWVudHNbMV07CiAgICB9CgogICAgaWYgKCF0YWdOYW1lKSB7CiAgICAgIE9iamVjdC5leHRlbmQoRWxlbWVudC5NZXRob2RzLCBtZXRob2RzIHx8IHt9KTsKICAgIH0gZWxzZSB7CiAgICAgIGlmIChPYmplY3QuaXNBcnJheSh0YWdOYW1lKSkgewogICAgICAgIGZvciAodmFyIGkgPSAwLCB0YWc7IHRhZyA9IHRhZ05hbWVbaV07IGkrKykKICAgICAgICAgIGFkZE1ldGhvZHNUb1RhZ05hbWUodGFnLCBtZXRob2RzKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBhZGRNZXRob2RzVG9UYWdOYW1lKHRhZ05hbWUsIG1ldGhvZHMpOwogICAgICB9CiAgICB9CgogICAgdmFyIEVMRU1FTlRfUFJPVE9UWVBFID0gd2luZG93LkhUTUxFbGVtZW50ID8gSFRNTEVsZW1lbnQucHJvdG90eXBlIDoKICAgICBFbGVtZW50LnByb3RvdHlwZTsKCiAgICBpZiAoRi5FbGVtZW50RXh0ZW5zaW9ucykgewogICAgICBtZXJnZU1ldGhvZHMoRUxFTUVOVF9QUk9UT1RZUEUsIEVsZW1lbnQuTWV0aG9kcyk7CiAgICAgIG1lcmdlTWV0aG9kcyhFTEVNRU5UX1BST1RPVFlQRSwgRWxlbWVudC5NZXRob2RzLlNpbXVsYXRlZCwgdHJ1ZSk7CiAgICB9CgogICAgaWYgKEYuU3BlY2lmaWNFbGVtZW50RXh0ZW5zaW9ucykgewogICAgICBmb3IgKHZhciB0YWcgaW4gRWxlbWVudC5NZXRob2RzLkJ5VGFnKSB7CiAgICAgICAgdmFyIGtsYXNzID0gZmluZERPTUNsYXNzKHRhZyk7CiAgICAgICAgaWYgKE9iamVjdC5pc1VuZGVmaW5lZChrbGFzcykpIGNvbnRpbnVlOwogICAgICAgIG1lcmdlTWV0aG9kcyhrbGFzcy5wcm90b3R5cGUsIEJ5VGFnW3RhZ10pOwogICAgICB9CiAgICB9CgogICAgT2JqZWN0LmV4dGVuZChFbGVtZW50LCBFbGVtZW50Lk1ldGhvZHMpOwogICAgT2JqZWN0LmV4dGVuZChFbGVtZW50LCBFbGVtZW50Lk1ldGhvZHMuU2ltdWxhdGVkKTsKICAgIGRlbGV0ZSBFbGVtZW50LkJ5VGFnOwogICAgZGVsZXRlIEVsZW1lbnQuU2ltdWxhdGVkOwoKICAgIEVsZW1lbnQuZXh0ZW5kLnJlZnJlc2goKTsKCiAgICBFTEVNRU5UX0NBQ0hFID0ge307CiAgfQoKICBPYmplY3QuZXh0ZW5kKEdMT0JBTC5FbGVtZW50LCB7CiAgICBleHRlbmQ6ICAgICBleHRlbmQsCiAgICBhZGRNZXRob2RzOiBhZGRNZXRob2RzCiAgfSk7CgogIGlmIChleHRlbmQgPT09IFByb3RvdHlwZS5LKSB7CiAgICBHTE9CQUwuRWxlbWVudC5leHRlbmQucmVmcmVzaCA9IFByb3RvdHlwZS5lbXB0eUZ1bmN0aW9uOwogIH0gZWxzZSB7CiAgICBHTE9CQUwuRWxlbWVudC5leHRlbmQucmVmcmVzaCA9IGZ1bmN0aW9uKCkgewogICAgICBpZiAoUHJvdG90eXBlLkJyb3dzZXJGZWF0dXJlcy5FbGVtZW50RXh0ZW5zaW9ucykgcmV0dXJuOwogICAgICBPYmplY3QuZXh0ZW5kKE1ldGhvZHMsIEVsZW1lbnQuTWV0aG9kcyk7CiAgICAgIE9iamVjdC5leHRlbmQoTWV0aG9kcywgRWxlbWVudC5NZXRob2RzLlNpbXVsYXRlZCk7CgogICAgICBFWFRFTkRFRCA9IHt9OwogICAgfTsKICB9CgogIGZ1bmN0aW9uIGFkZEZvcm1NZXRob2RzKCkgewogICAgT2JqZWN0LmV4dGVuZChGb3JtLCBGb3JtLk1ldGhvZHMpOwogICAgT2JqZWN0LmV4dGVuZChGb3JtLkVsZW1lbnQsIEZvcm0uRWxlbWVudC5NZXRob2RzKTsKICAgIE9iamVjdC5leHRlbmQoRWxlbWVudC5NZXRob2RzLkJ5VGFnLCB7CiAgICAgICJGT1JNIjogICAgIE9iamVjdC5jbG9uZShGb3JtLk1ldGhvZHMpLAogICAgICAiSU5QVVQiOiAgICBPYmplY3QuY2xvbmUoRm9ybS5FbGVtZW50Lk1ldGhvZHMpLAogICAgICAiU0VMRUNUIjogICBPYmplY3QuY2xvbmUoRm9ybS5FbGVtZW50Lk1ldGhvZHMpLAogICAgICAiVEVYVEFSRUEiOiBPYmplY3QuY2xvbmUoRm9ybS5FbGVtZW50Lk1ldGhvZHMpLAogICAgICAiQlVUVE9OIjogICBPYmplY3QuY2xvbmUoRm9ybS5FbGVtZW50Lk1ldGhvZHMpCiAgICB9KTsKICB9CgogIEVsZW1lbnQuYWRkTWV0aG9kcyhtZXRob2RzKTsKCiAgZnVuY3Rpb24gZGVzdHJveUNhY2hlX0lFKCkgewogICAgRElWID0gbnVsbDsKICAgIEVMRU1FTlRfQ0FDSEUgPSBudWxsOwogIH0KCiAgaWYgKHdpbmRvdy5hdHRhY2hFdmVudCkKICAgIHdpbmRvdy5hdHRhY2hFdmVudCgnb251bmxvYWQnLCBkZXN0cm95Q2FjaGVfSUUpOwoKfSkodGhpcyk7CihmdW5jdGlvbigpIHsKCiAgZnVuY3Rpb24gdG9EZWNpbWFsKHBjdFN0cmluZykgewogICAgdmFyIG1hdGNoID0gcGN0U3RyaW5nLm1hdGNoKC9eKFxkKyklPyQvaSk7CiAgICBpZiAoIW1hdGNoKSByZXR1cm4gbnVsbDsKICAgIHJldHVybiAoTnVtYmVyKG1hdGNoWzFdKSAvIDEwMCk7CiAgfQoKICBmdW5jdGlvbiBnZXRSYXdTdHlsZShlbGVtZW50LCBzdHlsZSkgewogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7CgogICAgdmFyIHZhbHVlID0gZWxlbWVudC5zdHlsZVtzdHlsZV07CiAgICBpZiAoIXZhbHVlIHx8IHZhbHVlID09PSAnYXV0bycpIHsKICAgICAgdmFyIGNzcyA9IGRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCwgbnVsbCk7CiAgICAgIHZhbHVlID0gY3NzID8gY3NzW3N0eWxlXSA6IG51bGw7CiAgICB9CgogICAgaWYgKHN0eWxlID09PSAnb3BhY2l0eScpIHJldHVybiB2YWx1ZSA/IHBhcnNlRmxvYXQodmFsdWUpIDogMS4wOwogICAgcmV0dXJuIHZhbHVlID09PSAnYXV0bycgPyBudWxsIDogdmFsdWU7CiAgfQoKICBmdW5jdGlvbiBnZXRSYXdTdHlsZV9JRShlbGVtZW50LCBzdHlsZSkgewogICAgdmFyIHZhbHVlID0gZWxlbWVudC5zdHlsZVtzdHlsZV07CiAgICBpZiAoIXZhbHVlICYmIGVsZW1lbnQuY3VycmVudFN0eWxlKSB7CiAgICAgIHZhbHVlID0gZWxlbWVudC5jdXJyZW50U3R5bGVbc3R5bGVdOwogICAgfQogICAgcmV0dXJuIHZhbHVlOwogIH0KCiAgZnVuY3Rpb24gZ2V0Q29udGVudFdpZHRoKGVsZW1lbnQsIGNvbnRleHQpIHsKICAgIHZhciBib3hXaWR0aCA9IGVsZW1lbnQub2Zmc2V0V2lkdGg7CgogICAgdmFyIGJsID0gZ2V0UGl4ZWxWYWx1ZShlbGVtZW50LCAnYm9yZGVyTGVmdFdpZHRoJywgIGNvbnRleHQpIHx8IDA7CiAgICB2YXIgYnIgPSBnZXRQaXhlbFZhbHVlKGVsZW1lbnQsICdib3JkZXJSaWdodFdpZHRoJywgY29udGV4dCkgfHwgMDsKICAgIHZhciBwbCA9IGdldFBpeGVsVmFsdWUoZWxlbWVudCwgJ3BhZGRpbmdMZWZ0JywgICAgICBjb250ZXh0KSB8fCAwOwogICAgdmFyIHByID0gZ2V0UGl4ZWxWYWx1ZShlbGVtZW50LCAncGFkZGluZ1JpZ2h0JywgICAgIGNvbnRleHQpIHx8IDA7CgogICAgcmV0dXJuIGJveFdpZHRoIC0gYmwgLSBiciAtIHBsIC0gcHI7CiAgfQoKICBpZiAoIU9iamVjdC5pc1VuZGVmaW5lZChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY3VycmVudFN0eWxlKSAmJiAhUHJvdG90eXBlLkJyb3dzZXIuT3BlcmEpIHsKICAgIGdldFJhd1N0eWxlID0gZ2V0UmF3U3R5bGVfSUU7CiAgfQoKCiAgZnVuY3Rpb24gZ2V0UGl4ZWxWYWx1ZSh2YWx1ZSwgcHJvcGVydHksIGNvbnRleHQpIHsKICAgIHZhciBlbGVtZW50ID0gbnVsbDsKICAgIGlmIChPYmplY3QuaXNFbGVtZW50KHZhbHVlKSkgewogICAgICBlbGVtZW50ID0gdmFsdWU7CiAgICAgIHZhbHVlID0gZ2V0UmF3U3R5bGUoZWxlbWVudCwgcHJvcGVydHkpOwogICAgfQoKICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCBPYmplY3QuaXNVbmRlZmluZWQodmFsdWUpKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIGlmICgoL14oPzotKT9cZCsoXC5cZCspPyhweCk/JC9pKS50ZXN0KHZhbHVlKSkgewogICAgICByZXR1cm4gd2luZG93LnBhcnNlRmxvYXQodmFsdWUpOwogICAgfQoKICAgIHZhciBpc1BlcmNlbnRhZ2UgPSB2YWx1ZS5pbmNsdWRlKCclJyksIGlzVmlld3BvcnQgPSAoY29udGV4dCA9PT0gZG9jdW1lbnQudmlld3BvcnQpOwoKICAgIGlmICgvXGQvLnRlc3QodmFsdWUpICYmIGVsZW1lbnQgJiYgZWxlbWVudC5ydW50aW1lU3R5bGUgJiYgIShpc1BlcmNlbnRhZ2UgJiYgaXNWaWV3cG9ydCkpIHsKICAgICAgdmFyIHN0eWxlID0gZWxlbWVudC5zdHlsZS5sZWZ0LCByU3R5bGUgPSBlbGVtZW50LnJ1bnRpbWVTdHlsZS5sZWZ0OwogICAgICBlbGVtZW50LnJ1bnRpbWVTdHlsZS5sZWZ0ID0gZWxlbWVudC5jdXJyZW50U3R5bGUubGVmdDsKICAgICAgZWxlbWVudC5zdHlsZS5sZWZ0ID0gdmFsdWUgfHwgMDsKICAgICAgdmFsdWUgPSBlbGVtZW50LnN0eWxlLnBpeGVsTGVmdDsKICAgICAgZWxlbWVudC5zdHlsZS5sZWZ0ID0gc3R5bGU7CiAgICAgIGVsZW1lbnQucnVudGltZVN0eWxlLmxlZnQgPSByU3R5bGU7CgogICAgICByZXR1cm4gdmFsdWU7CiAgICB9CgogICAgaWYgKGVsZW1lbnQgJiYgaXNQZXJjZW50YWdlKSB7CiAgICAgIGNvbnRleHQgPSBjb250ZXh0IHx8IGVsZW1lbnQucGFyZW50Tm9kZTsKICAgICAgdmFyIGRlY2ltYWwgPSB0b0RlY2ltYWwodmFsdWUpLCB3aG9sZSA9IG51bGw7CgogICAgICB2YXIgaXNIb3Jpem9udGFsID0gcHJvcGVydHkuaW5jbHVkZSgnbGVmdCcpIHx8IHByb3BlcnR5LmluY2x1ZGUoJ3JpZ2h0JykgfHwKICAgICAgIHByb3BlcnR5LmluY2x1ZGUoJ3dpZHRoJyk7CgogICAgICB2YXIgaXNWZXJ0aWNhbCAgID0gcHJvcGVydHkuaW5jbHVkZSgndG9wJykgfHwgcHJvcGVydHkuaW5jbHVkZSgnYm90dG9tJykgfHwKICAgICAgICBwcm9wZXJ0eS5pbmNsdWRlKCdoZWlnaHQnKTsKCiAgICAgIGlmIChjb250ZXh0ID09PSBkb2N1bWVudC52aWV3cG9ydCkgewogICAgICAgIGlmIChpc0hvcml6b250YWwpIHsKICAgICAgICAgIHdob2xlID0gZG9jdW1lbnQudmlld3BvcnQuZ2V0V2lkdGgoKTsKICAgICAgICB9IGVsc2UgaWYgKGlzVmVydGljYWwpIHsKICAgICAgICAgIHdob2xlID0gZG9jdW1lbnQudmlld3BvcnQuZ2V0SGVpZ2h0KCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmIChpc0hvcml6b250YWwpIHsKICAgICAgICAgIHdob2xlID0gJChjb250ZXh0KS5tZWFzdXJlKCd3aWR0aCcpOwogICAgICAgIH0gZWxzZSBpZiAoaXNWZXJ0aWNhbCkgewogICAgICAgICAgd2hvbGUgPSAkKGNvbnRleHQpLm1lYXN1cmUoJ2hlaWdodCcpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuICh3aG9sZSA9PT0gbnVsbCkgPyAwIDogd2hvbGUgKiBkZWNpbWFsOwogICAgfQoKICAgIHJldHVybiAwOwogIH0KCiAgZnVuY3Rpb24gdG9DU1NQaXhlbHMobnVtYmVyKSB7CiAgICBpZiAoT2JqZWN0LmlzU3RyaW5nKG51bWJlcikgJiYgbnVtYmVyLmVuZHNXaXRoKCdweCcpKQogICAgICByZXR1cm4gbnVtYmVyOwogICAgcmV0dXJuIG51bWJlciArICdweCc7CiAgfQoKICBmdW5jdGlvbiBpc0Rpc3BsYXllZChlbGVtZW50KSB7CiAgICB3aGlsZSAoZWxlbWVudCAmJiBlbGVtZW50LnBhcmVudE5vZGUpIHsKICAgICAgdmFyIGRpc3BsYXkgPSBlbGVtZW50LmdldFN0eWxlKCdkaXNwbGF5Jyk7CiAgICAgIGlmIChkaXNwbGF5ID09PSAnbm9uZScpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgZWxlbWVudCA9ICQoZWxlbWVudC5wYXJlbnROb2RlKTsKICAgIH0KICAgIHJldHVybiB0cnVlOwogIH0KCiAgdmFyIGhhc0xheW91dCA9IFByb3RvdHlwZS5LOwogIGlmICgnY3VycmVudFN0eWxlJyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpIHsKICAgIGhhc0xheW91dCA9IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgaWYgKCFlbGVtZW50LmN1cnJlbnRTdHlsZS5oYXNMYXlvdXQpIHsKICAgICAgICBlbGVtZW50LnN0eWxlLnpvb20gPSAxOwogICAgICB9CiAgICAgIHJldHVybiBlbGVtZW50OwogICAgfTsKICB9CgogIGZ1bmN0aW9uIGNzc05hbWVGb3Ioa2V5KSB7CiAgICBpZiAoa2V5LmluY2x1ZGUoJ2JvcmRlcicpKSBrZXkgPSBrZXkgKyAnLXdpZHRoJzsKICAgIHJldHVybiBrZXkuY2FtZWxpemUoKTsKICB9CgogIEVsZW1lbnQuTGF5b3V0ID0gQ2xhc3MuY3JlYXRlKEhhc2gsIHsKICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCRzdXBlciwgZWxlbWVudCwgcHJlQ29tcHV0ZSkgewogICAgICAkc3VwZXIoKTsKICAgICAgdGhpcy5lbGVtZW50ID0gJChlbGVtZW50KTsKCiAgICAgIEVsZW1lbnQuTGF5b3V0LlBST1BFUlRJRVMuZWFjaCggZnVuY3Rpb24ocHJvcGVydHkpIHsKICAgICAgICB0aGlzLl9zZXQocHJvcGVydHksIG51bGwpOwogICAgICB9LCB0aGlzKTsKCiAgICAgIGlmIChwcmVDb21wdXRlKSB7CiAgICAgICAgdGhpcy5fcHJlQ29tcHV0aW5nID0gdHJ1ZTsKICAgICAgICB0aGlzLl9iZWdpbigpOwogICAgICAgIEVsZW1lbnQuTGF5b3V0LlBST1BFUlRJRVMuZWFjaCggdGhpcy5fY29tcHV0ZSwgdGhpcyApOwogICAgICAgIHRoaXMuX2VuZCgpOwogICAgICAgIHRoaXMuX3ByZUNvbXB1dGluZyA9IGZhbHNlOwogICAgICB9CiAgICB9LAoKICAgIF9zZXQ6IGZ1bmN0aW9uKHByb3BlcnR5LCB2YWx1ZSkgewogICAgICByZXR1cm4gSGFzaC5wcm90b3R5cGUuc2V0LmNhbGwodGhpcywgcHJvcGVydHksIHZhbHVlKTsKICAgIH0sCgogICAgc2V0OiBmdW5jdGlvbihwcm9wZXJ0eSwgdmFsdWUpIHsKICAgICAgdGhyb3cgIlByb3BlcnRpZXMgb2YgRWxlbWVudC5MYXlvdXQgYXJlIHJlYWQtb25seS4iOwogICAgfSwKCiAgICBnZXQ6IGZ1bmN0aW9uKCRzdXBlciwgcHJvcGVydHkpIHsKICAgICAgdmFyIHZhbHVlID0gJHN1cGVyKHByb3BlcnR5KTsKICAgICAgcmV0dXJuIHZhbHVlID09PSBudWxsID8gdGhpcy5fY29tcHV0ZShwcm9wZXJ0eSkgOiB2YWx1ZTsKICAgIH0sCgogICAgX2JlZ2luOiBmdW5jdGlvbigpIHsKICAgICAgaWYgKHRoaXMuX2lzUHJlcGFyZWQoKSkgcmV0dXJuOwoKICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQ7CiAgICAgIGlmIChpc0Rpc3BsYXllZChlbGVtZW50KSkgewogICAgICAgIHRoaXMuX3NldFByZXBhcmVkKHRydWUpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKCiAgICAgIHZhciBvcmlnaW5hbFN0eWxlcyA9IHsKICAgICAgICBwb3NpdGlvbjogICBlbGVtZW50LnN0eWxlLnBvc2l0aW9uICAgfHwgJycsCiAgICAgICAgd2lkdGg6ICAgICAgZWxlbWVudC5zdHlsZS53aWR0aCAgICAgIHx8ICcnLAogICAgICAgIHZpc2liaWxpdHk6IGVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eSB8fCAnJywKICAgICAgICBkaXNwbGF5OiAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgICAgfHwgJycKICAgICAgfTsKCiAgICAgIGVsZW1lbnQuc3RvcmUoJ3Byb3RvdHlwZV9vcmlnaW5hbF9zdHlsZXMnLCBvcmlnaW5hbFN0eWxlcyk7CgogICAgICB2YXIgcG9zaXRpb24gPSBnZXRSYXdTdHlsZShlbGVtZW50LCAncG9zaXRpb24nKSwgd2lkdGggPSBlbGVtZW50Lm9mZnNldFdpZHRoOwoKICAgICAgaWYgKHdpZHRoID09PSAwIHx8IHdpZHRoID09PSBudWxsKSB7CiAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICB3aWR0aCA9IGVsZW1lbnQub2Zmc2V0V2lkdGg7CiAgICAgIH0KCiAgICAgIHZhciBjb250ZXh0ID0gKHBvc2l0aW9uID09PSAnZml4ZWQnKSA/IGRvY3VtZW50LnZpZXdwb3J0IDoKICAgICAgIGVsZW1lbnQucGFyZW50Tm9kZTsKCiAgICAgIHZhciB0ZW1wU3R5bGVzID0gewogICAgICAgIHZpc2liaWxpdHk6ICdoaWRkZW4nLAogICAgICAgIGRpc3BsYXk6ICAgICdibG9jaycKICAgICAgfTsKCiAgICAgIGlmIChwb3NpdGlvbiAhPT0gJ2ZpeGVkJykgdGVtcFN0eWxlcy5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7CgogICAgICBlbGVtZW50LnNldFN0eWxlKHRlbXBTdHlsZXMpOwoKICAgICAgdmFyIHBvc2l0aW9uZWRXaWR0aCA9IGVsZW1lbnQub2Zmc2V0V2lkdGgsIG5ld1dpZHRoOwogICAgICBpZiAod2lkdGggJiYgKHBvc2l0aW9uZWRXaWR0aCA9PT0gd2lkdGgpKSB7CiAgICAgICAgbmV3V2lkdGggPSBnZXRDb250ZW50V2lkdGgoZWxlbWVudCwgY29udGV4dCk7CiAgICAgIH0gZWxzZSBpZiAocG9zaXRpb24gPT09ICdhYnNvbHV0ZScgfHwgcG9zaXRpb24gPT09ICdmaXhlZCcpIHsKICAgICAgICBuZXdXaWR0aCA9IGdldENvbnRlbnRXaWR0aChlbGVtZW50LCBjb250ZXh0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgcGFyZW50ID0gZWxlbWVudC5wYXJlbnROb2RlLCBwTGF5b3V0ID0gJChwYXJlbnQpLmdldExheW91dCgpOwoKICAgICAgICBuZXdXaWR0aCA9IHBMYXlvdXQuZ2V0KCd3aWR0aCcpIC0KICAgICAgICAgdGhpcy5nZXQoJ21hcmdpbi1sZWZ0JykgLQogICAgICAgICB0aGlzLmdldCgnYm9yZGVyLWxlZnQnKSAtCiAgICAgICAgIHRoaXMuZ2V0KCdwYWRkaW5nLWxlZnQnKSAtCiAgICAgICAgIHRoaXMuZ2V0KCdwYWRkaW5nLXJpZ2h0JykgLQogICAgICAgICB0aGlzLmdldCgnYm9yZGVyLXJpZ2h0JykgLQogICAgICAgICB0aGlzLmdldCgnbWFyZ2luLXJpZ2h0Jyk7CiAgICAgIH0KCiAgICAgIGVsZW1lbnQuc2V0U3R5bGUoeyB3aWR0aDogbmV3V2lkdGggKyAncHgnIH0pOwoKICAgICAgdGhpcy5fc2V0UHJlcGFyZWQodHJ1ZSk7CiAgICB9LAoKICAgIF9lbmQ6IGZ1bmN0aW9uKCkgewogICAgICB2YXIgZWxlbWVudCA9IHRoaXMuZWxlbWVudDsKICAgICAgdmFyIG9yaWdpbmFsU3R5bGVzID0gZWxlbWVudC5yZXRyaWV2ZSgncHJvdG90eXBlX29yaWdpbmFsX3N0eWxlcycpOwogICAgICBlbGVtZW50LnN0b3JlKCdwcm90b3R5cGVfb3JpZ2luYWxfc3R5bGVzJywgbnVsbCk7CiAgICAgIGVsZW1lbnQuc2V0U3R5bGUob3JpZ2luYWxTdHlsZXMpOwogICAgICB0aGlzLl9zZXRQcmVwYXJlZChmYWxzZSk7CiAgICB9LAoKICAgIF9jb21wdXRlOiBmdW5jdGlvbihwcm9wZXJ0eSkgewogICAgICB2YXIgQ09NUFVUQVRJT05TID0gRWxlbWVudC5MYXlvdXQuQ09NUFVUQVRJT05TOwogICAgICBpZiAoIShwcm9wZXJ0eSBpbiBDT01QVVRBVElPTlMpKSB7CiAgICAgICAgdGhyb3cgIlByb3BlcnR5IG5vdCBmb3VuZC4iOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5fc2V0KHByb3BlcnR5LCBDT01QVVRBVElPTlNbcHJvcGVydHldLmNhbGwodGhpcywgdGhpcy5lbGVtZW50KSk7CiAgICB9LAoKICAgIF9pc1ByZXBhcmVkOiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5yZXRyaWV2ZSgncHJvdG90eXBlX2VsZW1lbnRfbGF5b3V0X3ByZXBhcmVkJywgZmFsc2UpOwogICAgfSwKCiAgICBfc2V0UHJlcGFyZWQ6IGZ1bmN0aW9uKGJvb2wpIHsKICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5zdG9yZSgncHJvdG90eXBlX2VsZW1lbnRfbGF5b3V0X3ByZXBhcmVkJywgYm9vbCk7CiAgICB9LAoKICAgIHRvT2JqZWN0OiBmdW5jdGlvbigpIHsKICAgICAgdmFyIGFyZ3MgPSAkQShhcmd1bWVudHMpOwogICAgICB2YXIga2V5cyA9IChhcmdzLmxlbmd0aCA9PT0gMCkgPyBFbGVtZW50LkxheW91dC5QUk9QRVJUSUVTIDoKICAgICAgIGFyZ3Muam9pbignICcpLnNwbGl0KCcgJyk7CiAgICAgIHZhciBvYmogPSB7fTsKICAgICAga2V5cy5lYWNoKCBmdW5jdGlvbihrZXkpIHsKICAgICAgICBpZiAoIUVsZW1lbnQuTGF5b3V0LlBST1BFUlRJRVMuaW5jbHVkZShrZXkpKSByZXR1cm47CiAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5nZXQoa2V5KTsKICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCkgb2JqW2tleV0gPSB2YWx1ZTsKICAgICAgfSwgdGhpcyk7CiAgICAgIHJldHVybiBvYmo7CiAgICB9LAoKICAgIHRvSGFzaDogZnVuY3Rpb24oKSB7CiAgICAgIHZhciBvYmogPSB0aGlzLnRvT2JqZWN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIHJldHVybiBuZXcgSGFzaChvYmopOwogICAgfSwKCiAgICB0b0NTUzogZnVuY3Rpb24oKSB7CiAgICAgIHZhciBhcmdzID0gJEEoYXJndW1lbnRzKTsKICAgICAgdmFyIGtleXMgPSAoYXJncy5sZW5ndGggPT09IDApID8gRWxlbWVudC5MYXlvdXQuUFJPUEVSVElFUyA6CiAgICAgICBhcmdzLmpvaW4oJyAnKS5zcGxpdCgnICcpOwogICAgICB2YXIgY3NzID0ge307CgogICAgICBrZXlzLmVhY2goIGZ1bmN0aW9uKGtleSkgewogICAgICAgIGlmICghRWxlbWVudC5MYXlvdXQuUFJPUEVSVElFUy5pbmNsdWRlKGtleSkpIHJldHVybjsKICAgICAgICBpZiAoRWxlbWVudC5MYXlvdXQuQ09NUE9TSVRFX1BST1BFUlRJRVMuaW5jbHVkZShrZXkpKSByZXR1cm47CgogICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuZ2V0KGtleSk7CiAgICAgICAgaWYgKHZhbHVlICE9IG51bGwpIGNzc1tjc3NOYW1lRm9yKGtleSldID0gdmFsdWUgKyAncHgnOwogICAgICB9LCB0aGlzKTsKICAgICAgcmV0dXJuIGNzczsKICAgIH0sCgogICAgaW5zcGVjdDogZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiAiIzxFbGVtZW50LkxheW91dD4iOwogICAgfQogIH0pOwoKICBPYmplY3QuZXh0ZW5kKEVsZW1lbnQuTGF5b3V0LCB7CiAgICBQUk9QRVJUSUVTOiAkdygnaGVpZ2h0IHdpZHRoIHRvcCBsZWZ0IHJpZ2h0IGJvdHRvbSBib3JkZXItbGVmdCBib3JkZXItcmlnaHQgYm9yZGVyLXRvcCBib3JkZXItYm90dG9tIHBhZGRpbmctbGVmdCBwYWRkaW5nLXJpZ2h0IHBhZGRpbmctdG9wIHBhZGRpbmctYm90dG9tIG1hcmdpbi10b3AgbWFyZ2luLWJvdHRvbSBtYXJnaW4tbGVmdCBtYXJnaW4tcmlnaHQgcGFkZGluZy1ib3gtd2lkdGggcGFkZGluZy1ib3gtaGVpZ2h0IGJvcmRlci1ib3gtd2lkdGggYm9yZGVyLWJveC1oZWlnaHQgbWFyZ2luLWJveC13aWR0aCBtYXJnaW4tYm94LWhlaWdodCcpLAoKICAgIENPTVBPU0lURV9QUk9QRVJUSUVTOiAkdygncGFkZGluZy1ib3gtd2lkdGggcGFkZGluZy1ib3gtaGVpZ2h0IG1hcmdpbi1ib3gtd2lkdGggbWFyZ2luLWJveC1oZWlnaHQgYm9yZGVyLWJveC13aWR0aCBib3JkZXItYm94LWhlaWdodCcpLAoKICAgIENPTVBVVEFUSU9OUzogewogICAgICAnaGVpZ2h0JzogZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgIGlmICghdGhpcy5fcHJlQ29tcHV0aW5nKSB0aGlzLl9iZWdpbigpOwoKICAgICAgICB2YXIgYkhlaWdodCA9IHRoaXMuZ2V0KCdib3JkZXItYm94LWhlaWdodCcpOwogICAgICAgIGlmIChiSGVpZ2h0IDw9IDApIHsKICAgICAgICAgIGlmICghdGhpcy5fcHJlQ29tcHV0aW5nKSB0aGlzLl9lbmQoKTsKICAgICAgICAgIHJldHVybiAwOwogICAgICAgIH0KCiAgICAgICAgdmFyIGJUb3AgPSB0aGlzLmdldCgnYm9yZGVyLXRvcCcpLAogICAgICAgICBiQm90dG9tID0gdGhpcy5nZXQoJ2JvcmRlci1ib3R0b20nKTsKCiAgICAgICAgdmFyIHBUb3AgPSB0aGlzLmdldCgncGFkZGluZy10b3AnKSwKICAgICAgICAgcEJvdHRvbSA9IHRoaXMuZ2V0KCdwYWRkaW5nLWJvdHRvbScpOwoKICAgICAgICBpZiAoIXRoaXMuX3ByZUNvbXB1dGluZykgdGhpcy5fZW5kKCk7CgogICAgICAgIHJldHVybiBiSGVpZ2h0IC0gYlRvcCAtIGJCb3R0b20gLSBwVG9wIC0gcEJvdHRvbTsKICAgICAgfSwKCiAgICAgICd3aWR0aCc6IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICBpZiAoIXRoaXMuX3ByZUNvbXB1dGluZykgdGhpcy5fYmVnaW4oKTsKCiAgICAgICAgdmFyIGJXaWR0aCA9IHRoaXMuZ2V0KCdib3JkZXItYm94LXdpZHRoJyk7CiAgICAgICAgaWYgKGJXaWR0aCA8PSAwKSB7CiAgICAgICAgICBpZiAoIXRoaXMuX3ByZUNvbXB1dGluZykgdGhpcy5fZW5kKCk7CiAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CgogICAgICAgIHZhciBiTGVmdCA9IHRoaXMuZ2V0KCdib3JkZXItbGVmdCcpLAogICAgICAgICBiUmlnaHQgPSB0aGlzLmdldCgnYm9yZGVyLXJpZ2h0Jyk7CgogICAgICAgIHZhciBwTGVmdCA9IHRoaXMuZ2V0KCdwYWRkaW5nLWxlZnQnKSwKICAgICAgICAgcFJpZ2h0ID0gdGhpcy5nZXQoJ3BhZGRpbmctcmlnaHQnKTsKCiAgICAgICAgaWYgKCF0aGlzLl9wcmVDb21wdXRpbmcpIHRoaXMuX2VuZCgpOwogICAgICAgIHJldHVybiBiV2lkdGggLSBiTGVmdCAtIGJSaWdodCAtIHBMZWZ0IC0gcFJpZ2h0OwogICAgICB9LAoKICAgICAgJ3BhZGRpbmctYm94LWhlaWdodCc6IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICB2YXIgaGVpZ2h0ID0gdGhpcy5nZXQoJ2hlaWdodCcpLAogICAgICAgICBwVG9wID0gdGhpcy5nZXQoJ3BhZGRpbmctdG9wJyksCiAgICAgICAgIHBCb3R0b20gPSB0aGlzLmdldCgncGFkZGluZy1ib3R0b20nKTsKCiAgICAgICAgcmV0dXJuIGhlaWdodCArIHBUb3AgKyBwQm90dG9tOwogICAgICB9LAoKICAgICAgJ3BhZGRpbmctYm94LXdpZHRoJzogZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0KCd3aWR0aCcpLAogICAgICAgICBwTGVmdCA9IHRoaXMuZ2V0KCdwYWRkaW5nLWxlZnQnKSwKICAgICAgICAgcFJpZ2h0ID0gdGhpcy5nZXQoJ3BhZGRpbmctcmlnaHQnKTsKCiAgICAgICAgcmV0dXJuIHdpZHRoICsgcExlZnQgKyBwUmlnaHQ7CiAgICAgIH0sCgogICAgICAnYm9yZGVyLWJveC1oZWlnaHQnOiBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgaWYgKCF0aGlzLl9wcmVDb21wdXRpbmcpIHRoaXMuX2JlZ2luKCk7CiAgICAgICAgdmFyIGhlaWdodCA9IGVsZW1lbnQub2Zmc2V0SGVpZ2h0OwogICAgICAgIGlmICghdGhpcy5fcHJlQ29tcHV0aW5nKSB0aGlzLl9lbmQoKTsKICAgICAgICByZXR1cm4gaGVpZ2h0OwogICAgICB9LAoKICAgICAgJ2JvcmRlci1ib3gtd2lkdGgnOiBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgaWYgKCF0aGlzLl9wcmVDb21wdXRpbmcpIHRoaXMuX2JlZ2luKCk7CiAgICAgICAgdmFyIHdpZHRoID0gZWxlbWVudC5vZmZzZXRXaWR0aDsKICAgICAgICBpZiAoIXRoaXMuX3ByZUNvbXB1dGluZykgdGhpcy5fZW5kKCk7CiAgICAgICAgcmV0dXJuIHdpZHRoOwogICAgICB9LAoKICAgICAgJ21hcmdpbi1ib3gtaGVpZ2h0JzogZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgIHZhciBiSGVpZ2h0ID0gdGhpcy5nZXQoJ2JvcmRlci1ib3gtaGVpZ2h0JyksCiAgICAgICAgIG1Ub3AgPSB0aGlzLmdldCgnbWFyZ2luLXRvcCcpLAogICAgICAgICBtQm90dG9tID0gdGhpcy5nZXQoJ21hcmdpbi1ib3R0b20nKTsKCiAgICAgICAgaWYgKGJIZWlnaHQgPD0gMCkgcmV0dXJuIDA7CgogICAgICAgIHJldHVybiBiSGVpZ2h0ICsgbVRvcCArIG1Cb3R0b207CiAgICAgIH0sCgogICAgICAnbWFyZ2luLWJveC13aWR0aCc6IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICB2YXIgYldpZHRoID0gdGhpcy5nZXQoJ2JvcmRlci1ib3gtd2lkdGgnKSwKICAgICAgICAgbUxlZnQgPSB0aGlzLmdldCgnbWFyZ2luLWxlZnQnKSwKICAgICAgICAgbVJpZ2h0ID0gdGhpcy5nZXQoJ21hcmdpbi1yaWdodCcpOwoKICAgICAgICBpZiAoYldpZHRoIDw9IDApIHJldHVybiAwOwoKICAgICAgICByZXR1cm4gYldpZHRoICsgbUxlZnQgKyBtUmlnaHQ7CiAgICAgIH0sCgogICAgICAndG9wJzogZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgIHZhciBvZmZzZXQgPSBlbGVtZW50LnBvc2l0aW9uZWRPZmZzZXQoKTsKICAgICAgICByZXR1cm4gb2Zmc2V0LnRvcDsKICAgICAgfSwKCiAgICAgICdib3R0b20nOiBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgdmFyIG9mZnNldCA9IGVsZW1lbnQucG9zaXRpb25lZE9mZnNldCgpLAogICAgICAgICBwYXJlbnQgPSBlbGVtZW50LmdldE9mZnNldFBhcmVudCgpLAogICAgICAgICBwSGVpZ2h0ID0gcGFyZW50Lm1lYXN1cmUoJ2hlaWdodCcpOwoKICAgICAgICB2YXIgbUhlaWdodCA9IHRoaXMuZ2V0KCdib3JkZXItYm94LWhlaWdodCcpOwoKICAgICAgICByZXR1cm4gcEhlaWdodCAtIG1IZWlnaHQgLSBvZmZzZXQudG9wOwogICAgICB9LAoKICAgICAgJ2xlZnQnOiBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgdmFyIG9mZnNldCA9IGVsZW1lbnQucG9zaXRpb25lZE9mZnNldCgpOwogICAgICAgIHJldHVybiBvZmZzZXQubGVmdDsKICAgICAgfSwKCiAgICAgICdyaWdodCc6IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICB2YXIgb2Zmc2V0ID0gZWxlbWVudC5wb3NpdGlvbmVkT2Zmc2V0KCksCiAgICAgICAgIHBhcmVudCA9IGVsZW1lbnQuZ2V0T2Zmc2V0UGFyZW50KCksCiAgICAgICAgIHBXaWR0aCA9IHBhcmVudC5tZWFzdXJlKCd3aWR0aCcpOwoKICAgICAgICB2YXIgbVdpZHRoID0gdGhpcy5nZXQoJ2JvcmRlci1ib3gtd2lkdGgnKTsKCiAgICAgICAgcmV0dXJuIHBXaWR0aCAtIG1XaWR0aCAtIG9mZnNldC5sZWZ0OwogICAgICB9LAoKICAgICAgJ3BhZGRpbmctdG9wJzogZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgIHJldHVybiBnZXRQaXhlbFZhbHVlKGVsZW1lbnQsICdwYWRkaW5nVG9wJyk7CiAgICAgIH0sCgogICAgICAncGFkZGluZy1ib3R0b20nOiBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgcmV0dXJuIGdldFBpeGVsVmFsdWUoZWxlbWVudCwgJ3BhZGRpbmdCb3R0b20nKTsKICAgICAgfSwKCiAgICAgICdwYWRkaW5nLWxlZnQnOiBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgcmV0dXJuIGdldFBpeGVsVmFsdWUoZWxlbWVudCwgJ3BhZGRpbmdMZWZ0Jyk7CiAgICAgIH0sCgogICAgICAncGFkZGluZy1yaWdodCc6IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICByZXR1cm4gZ2V0UGl4ZWxWYWx1ZShlbGVtZW50LCAncGFkZGluZ1JpZ2h0Jyk7CiAgICAgIH0sCgogICAgICAnYm9yZGVyLXRvcCc6IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICByZXR1cm4gZ2V0UGl4ZWxWYWx1ZShlbGVtZW50LCAnYm9yZGVyVG9wV2lkdGgnKTsKICAgICAgfSwKCiAgICAgICdib3JkZXItYm90dG9tJzogZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgIHJldHVybiBnZXRQaXhlbFZhbHVlKGVsZW1lbnQsICdib3JkZXJCb3R0b21XaWR0aCcpOwogICAgICB9LAoKICAgICAgJ2JvcmRlci1sZWZ0JzogZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgIHJldHVybiBnZXRQaXhlbFZhbHVlKGVsZW1lbnQsICdib3JkZXJMZWZ0V2lkdGgnKTsKICAgICAgfSwKCiAgICAgICdib3JkZXItcmlnaHQnOiBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgcmV0dXJuIGdldFBpeGVsVmFsdWUoZWxlbWVudCwgJ2JvcmRlclJpZ2h0V2lkdGgnKTsKICAgICAgfSwKCiAgICAgICdtYXJnaW4tdG9wJzogZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgIHJldHVybiBnZXRQaXhlbFZhbHVlKGVsZW1lbnQsICdtYXJnaW5Ub3AnKTsKICAgICAgfSwKCiAgICAgICdtYXJnaW4tYm90dG9tJzogZnVuY3Rpb24oZWxlbWVudCkgewogICAgICAgIHJldHVybiBnZXRQaXhlbFZhbHVlKGVsZW1lbnQsICdtYXJnaW5Cb3R0b20nKTsKICAgICAgfSwKCiAgICAgICdtYXJnaW4tbGVmdCc6IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICByZXR1cm4gZ2V0UGl4ZWxWYWx1ZShlbGVtZW50LCAnbWFyZ2luTGVmdCcpOwogICAgICB9LAoKICAgICAgJ21hcmdpbi1yaWdodCc6IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICByZXR1cm4gZ2V0UGl4ZWxWYWx1ZShlbGVtZW50LCAnbWFyZ2luUmlnaHQnKTsKICAgICAgfQogICAgfQogIH0pOwoKICBpZiAoJ2dldEJvdW5kaW5nQ2xpZW50UmVjdCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSB7CiAgICBPYmplY3QuZXh0ZW5kKEVsZW1lbnQuTGF5b3V0LkNPTVBVVEFUSU9OUywgewogICAgICAncmlnaHQnOiBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgdmFyIHBhcmVudCA9IGhhc0xheW91dChlbGVtZW50LmdldE9mZnNldFBhcmVudCgpKTsKICAgICAgICB2YXIgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksCiAgICAgICAgIHBSZWN0ID0gcGFyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwoKICAgICAgICByZXR1cm4gKHBSZWN0LnJpZ2h0IC0gcmVjdC5yaWdodCkucm91bmQoKTsKICAgICAgfSwKCiAgICAgICdib3R0b20nOiBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgdmFyIHBhcmVudCA9IGhhc0xheW91dChlbGVtZW50LmdldE9mZnNldFBhcmVudCgpKTsKICAgICAgICB2YXIgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksCiAgICAgICAgIHBSZWN0ID0gcGFyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwoKICAgICAgICByZXR1cm4gKHBSZWN0LmJvdHRvbSAtIHJlY3QuYm90dG9tKS5yb3VuZCgpOwogICAgICB9CiAgICB9KTsKICB9CgogIEVsZW1lbnQuT2Zmc2V0ID0gQ2xhc3MuY3JlYXRlKHsKICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKGxlZnQsIHRvcCkgewogICAgICB0aGlzLmxlZnQgPSBsZWZ0LnJvdW5kKCk7CiAgICAgIHRoaXMudG9wICA9IHRvcC5yb3VuZCgpOwoKICAgICAgdGhpc1swXSA9IHRoaXMubGVmdDsKICAgICAgdGhpc1sxXSA9IHRoaXMudG9wOwogICAgfSwKCiAgICByZWxhdGl2ZVRvOiBmdW5jdGlvbihvZmZzZXQpIHsKICAgICAgcmV0dXJuIG5ldyBFbGVtZW50Lk9mZnNldCgKICAgICAgICB0aGlzLmxlZnQgLSBvZmZzZXQubGVmdCwKICAgICAgICB0aGlzLnRvcCAgLSBvZmZzZXQudG9wCiAgICAgICk7CiAgICB9LAoKICAgIGluc3BlY3Q6IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gIiM8RWxlbWVudC5PZmZzZXQgbGVmdDogI3tsZWZ0fSB0b3A6ICN7dG9wfT4iLmludGVycG9sYXRlKHRoaXMpOwogICAgfSwKCiAgICB0b1N0cmluZzogZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiAiWyN7bGVmdH0sICN7dG9wfV0iLmludGVycG9sYXRlKHRoaXMpOwogICAgfSwKCiAgICB0b0FycmF5OiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIFt0aGlzLmxlZnQsIHRoaXMudG9wXTsKICAgIH0KICB9KTsKCiAgZnVuY3Rpb24gZ2V0TGF5b3V0KGVsZW1lbnQsIHByZUNvbXB1dGUpIHsKICAgIHJldHVybiBuZXcgRWxlbWVudC5MYXlvdXQoZWxlbWVudCwgcHJlQ29tcHV0ZSk7CiAgfQoKICBmdW5jdGlvbiBtZWFzdXJlKGVsZW1lbnQsIHByb3BlcnR5KSB7CiAgICByZXR1cm4gJChlbGVtZW50KS5nZXRMYXlvdXQoKS5nZXQocHJvcGVydHkpOwogIH0KCiAgZnVuY3Rpb24gZ2V0SGVpZ2h0KGVsZW1lbnQpIHsKICAgIHJldHVybiBFbGVtZW50LmdldERpbWVuc2lvbnMoZWxlbWVudCkuaGVpZ2h0OwogIH0KCiAgZnVuY3Rpb24gZ2V0V2lkdGgoZWxlbWVudCkgewogICAgcmV0dXJuIEVsZW1lbnQuZ2V0RGltZW5zaW9ucyhlbGVtZW50KS53aWR0aDsKICB9CgogIGZ1bmN0aW9uIGdldERpbWVuc2lvbnMoZWxlbWVudCkgewogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7CiAgICB2YXIgZGlzcGxheSA9IEVsZW1lbnQuZ2V0U3R5bGUoZWxlbWVudCwgJ2Rpc3BsYXknKTsKCiAgICBpZiAoZGlzcGxheSAmJiBkaXNwbGF5ICE9PSAnbm9uZScpIHsKICAgICAgcmV0dXJuIHsgd2lkdGg6IGVsZW1lbnQub2Zmc2V0V2lkdGgsIGhlaWdodDogZWxlbWVudC5vZmZzZXRIZWlnaHQgfTsKICAgIH0KCiAgICB2YXIgc3R5bGUgPSBlbGVtZW50LnN0eWxlOwogICAgdmFyIG9yaWdpbmFsU3R5bGVzID0gewogICAgICB2aXNpYmlsaXR5OiBzdHlsZS52aXNpYmlsaXR5LAogICAgICBwb3NpdGlvbjogICBzdHlsZS5wb3NpdGlvbiwKICAgICAgZGlzcGxheTogICAgc3R5bGUuZGlzcGxheQogICAgfTsKCiAgICB2YXIgbmV3U3R5bGVzID0gewogICAgICB2aXNpYmlsaXR5OiAnaGlkZGVuJywKICAgICAgZGlzcGxheTogICAgJ2Jsb2NrJwogICAgfTsKCiAgICBpZiAob3JpZ2luYWxTdHlsZXMucG9zaXRpb24gIT09ICdmaXhlZCcpCiAgICAgIG5ld1N0eWxlcy5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7CgogICAgRWxlbWVudC5zZXRTdHlsZShlbGVtZW50LCBuZXdTdHlsZXMpOwoKICAgIHZhciBkaW1lbnNpb25zID0gewogICAgICB3aWR0aDogIGVsZW1lbnQub2Zmc2V0V2lkdGgsCiAgICAgIGhlaWdodDogZWxlbWVudC5vZmZzZXRIZWlnaHQKICAgIH07CgogICAgRWxlbWVudC5zZXRTdHlsZShlbGVtZW50LCBvcmlnaW5hbFN0eWxlcyk7CgogICAgcmV0dXJuIGRpbWVuc2lvbnM7CiAgfQoKICBmdW5jdGlvbiBnZXRPZmZzZXRQYXJlbnQoZWxlbWVudCkgewogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7CgogICAgZnVuY3Rpb24gc2VsZk9yQm9keShlbGVtZW50KSB7CiAgICAgIHJldHVybiBpc0h0bWwoZWxlbWVudCkgPyAkKGRvY3VtZW50LmJvZHkpIDogJChlbGVtZW50KTsKICAgIH0KCiAgICBpZiAoaXNEb2N1bWVudChlbGVtZW50KSB8fCBpc0RldGFjaGVkKGVsZW1lbnQpIHx8IGlzQm9keShlbGVtZW50KSB8fCBpc0h0bWwoZWxlbWVudCkpCiAgICAgIHJldHVybiAkKGRvY3VtZW50LmJvZHkpOwoKICAgIHZhciBpc0lubGluZSA9IChFbGVtZW50LmdldFN0eWxlKGVsZW1lbnQsICdkaXNwbGF5JykgPT09ICdpbmxpbmUnKTsKICAgIGlmICghaXNJbmxpbmUgJiYgZWxlbWVudC5vZmZzZXRQYXJlbnQpIHJldHVybiBzZWxmT3JCb2R5KGVsZW1lbnQub2Zmc2V0UGFyZW50KTsKCiAgICB3aGlsZSAoKGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudE5vZGUpICYmIGVsZW1lbnQgIT09IGRvY3VtZW50LmJvZHkpIHsKICAgICAgaWYgKEVsZW1lbnQuZ2V0U3R5bGUoZWxlbWVudCwgJ3Bvc2l0aW9uJykgIT09ICdzdGF0aWMnKSB7CiAgICAgICAgcmV0dXJuIHNlbGZPckJvZHkoZWxlbWVudCk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gJChkb2N1bWVudC5ib2R5KTsKICB9CgoKICBmdW5jdGlvbiBjdW11bGF0aXZlT2Zmc2V0KGVsZW1lbnQpIHsKICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOwogICAgdmFyIHZhbHVlVCA9IDAsIHZhbHVlTCA9IDA7CiAgICBpZiAoZWxlbWVudC5wYXJlbnROb2RlKSB7CiAgICAgIGRvIHsKICAgICAgICB2YWx1ZVQgKz0gZWxlbWVudC5vZmZzZXRUb3AgIHx8IDA7CiAgICAgICAgdmFsdWVMICs9IGVsZW1lbnQub2Zmc2V0TGVmdCB8fCAwOwogICAgICAgIGVsZW1lbnQgPSBlbGVtZW50Lm9mZnNldFBhcmVudDsKICAgICAgfSB3aGlsZSAoZWxlbWVudCk7CiAgICB9CiAgICByZXR1cm4gbmV3IEVsZW1lbnQuT2Zmc2V0KHZhbHVlTCwgdmFsdWVUKTsKICB9CgogIGZ1bmN0aW9uIHBvc2l0aW9uZWRPZmZzZXQoZWxlbWVudCkgewogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7CgogICAgdmFyIGxheW91dCA9IGVsZW1lbnQuZ2V0TGF5b3V0KCk7CgogICAgdmFyIHZhbHVlVCA9IDAsIHZhbHVlTCA9IDA7CiAgICBkbyB7CiAgICAgIHZhbHVlVCArPSBlbGVtZW50Lm9mZnNldFRvcCAgfHwgMDsKICAgICAgdmFsdWVMICs9IGVsZW1lbnQub2Zmc2V0TGVmdCB8fCAwOwogICAgICBlbGVtZW50ID0gZWxlbWVudC5vZmZzZXRQYXJlbnQ7CiAgICAgIGlmIChlbGVtZW50KSB7CiAgICAgICAgaWYgKGlzQm9keShlbGVtZW50KSkgYnJlYWs7CiAgICAgICAgdmFyIHAgPSBFbGVtZW50LmdldFN0eWxlKGVsZW1lbnQsICdwb3NpdGlvbicpOwogICAgICAgIGlmIChwICE9PSAnc3RhdGljJykgYnJlYWs7CiAgICAgIH0KICAgIH0gd2hpbGUgKGVsZW1lbnQpOwoKICAgIHZhbHVlTCAtPSBsYXlvdXQuZ2V0KCdtYXJnaW4tbGVmdCcpOwogICAgdmFsdWVUIC09IGxheW91dC5nZXQoJ21hcmdpbi10b3AnKTsKCiAgICByZXR1cm4gbmV3IEVsZW1lbnQuT2Zmc2V0KHZhbHVlTCwgdmFsdWVUKTsKICB9CgogIGZ1bmN0aW9uIGN1bXVsYXRpdmVTY3JvbGxPZmZzZXQoZWxlbWVudCkgewogICAgdmFyIHZhbHVlVCA9IDAsIHZhbHVlTCA9IDA7CiAgICBkbyB7CiAgICAgIGlmIChlbGVtZW50ID09PSBkb2N1bWVudC5ib2R5KSB7CiAgICAgICAgdmFyIGJvZHlTY3JvbGxOb2RlID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IHx8IGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZSB8fCBkb2N1bWVudC5ib2R5OwogICAgICAgIHZhbHVlVCArPSAhT2JqZWN0LmlzVW5kZWZpbmVkKHdpbmRvdy5wYWdlWU9mZnNldCkgPyB3aW5kb3cucGFnZVlPZmZzZXQgOiBib2R5U2Nyb2xsTm9kZS5zY3JvbGxUb3AgfHwgMDsKICAgICAgICB2YWx1ZUwgKz0gIU9iamVjdC5pc1VuZGVmaW5lZCh3aW5kb3cucGFnZVhPZmZzZXQpID8gd2luZG93LnBhZ2VYT2Zmc2V0IDogYm9keVNjcm9sbE5vZGUuc2Nyb2xsTGVmdCB8fCAwOwogICAgICAgIGJyZWFrOwogICAgICB9IGVsc2UgewogICAgICAgIHZhbHVlVCArPSBlbGVtZW50LnNjcm9sbFRvcCAgfHwgMDsKICAgICAgICB2YWx1ZUwgKz0gZWxlbWVudC5zY3JvbGxMZWZ0IHx8IDA7CiAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTsKICAgICAgfQogICAgfSB3aGlsZSAoZWxlbWVudCk7CiAgICByZXR1cm4gbmV3IEVsZW1lbnQuT2Zmc2V0KHZhbHVlTCwgdmFsdWVUKTsKICB9CgogIGZ1bmN0aW9uIHZpZXdwb3J0T2Zmc2V0KGZvckVsZW1lbnQpIHsKICAgIHZhciB2YWx1ZVQgPSAwLCB2YWx1ZUwgPSAwLCBkb2NCb2R5ID0gZG9jdW1lbnQuYm9keTsKCiAgICBmb3JFbGVtZW50ID0gJChmb3JFbGVtZW50KTsKICAgIHZhciBlbGVtZW50ID0gZm9yRWxlbWVudDsKICAgIGRvIHsKICAgICAgdmFsdWVUICs9IGVsZW1lbnQub2Zmc2V0VG9wICB8fCAwOwogICAgICB2YWx1ZUwgKz0gZWxlbWVudC5vZmZzZXRMZWZ0IHx8IDA7CiAgICAgIGlmIChlbGVtZW50Lm9mZnNldFBhcmVudCA9PSBkb2NCb2R5ICYmCiAgICAgICAgRWxlbWVudC5nZXRTdHlsZShlbGVtZW50LCAncG9zaXRpb24nKSA9PSAnYWJzb2x1dGUnKSBicmVhazsKICAgIH0gd2hpbGUgKGVsZW1lbnQgPSBlbGVtZW50Lm9mZnNldFBhcmVudCk7CgogICAgZWxlbWVudCA9IGZvckVsZW1lbnQ7CiAgICBkbyB7CiAgICAgIGlmIChlbGVtZW50ICE9IGRvY0JvZHkpIHsKICAgICAgICB2YWx1ZVQgLT0gZWxlbWVudC5zY3JvbGxUb3AgIHx8IDA7CiAgICAgICAgdmFsdWVMIC09IGVsZW1lbnQuc2Nyb2xsTGVmdCB8fCAwOwogICAgICB9CiAgICB9IHdoaWxlIChlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlKTsKICAgIHJldHVybiBuZXcgRWxlbWVudC5PZmZzZXQodmFsdWVMLCB2YWx1ZVQpOwogIH0KCiAgZnVuY3Rpb24gYWJzb2x1dGl6ZShlbGVtZW50KSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKCiAgICBpZiAoRWxlbWVudC5nZXRTdHlsZShlbGVtZW50LCAncG9zaXRpb24nKSA9PT0gJ2Fic29sdXRlJykgewogICAgICByZXR1cm4gZWxlbWVudDsKICAgIH0KCiAgICB2YXIgb2Zmc2V0UGFyZW50ID0gZ2V0T2Zmc2V0UGFyZW50KGVsZW1lbnQpOwogICAgdmFyIGVPZmZzZXQgPSBlbGVtZW50LnZpZXdwb3J0T2Zmc2V0KCksCiAgICAgcE9mZnNldCA9IG9mZnNldFBhcmVudC52aWV3cG9ydE9mZnNldCgpOwoKICAgIHZhciBvZmZzZXQgPSBlT2Zmc2V0LnJlbGF0aXZlVG8ocE9mZnNldCk7CiAgICB2YXIgbGF5b3V0ID0gZWxlbWVudC5nZXRMYXlvdXQoKTsKCiAgICBlbGVtZW50LnN0b3JlKCdwcm90b3R5cGVfYWJzb2x1dGl6ZV9vcmlnaW5hbF9zdHlsZXMnLCB7CiAgICAgIHBvc2l0aW9uOiBlbGVtZW50LmdldFN0eWxlKCdwb3NpdGlvbicpLAogICAgICBsZWZ0OiAgICAgZWxlbWVudC5nZXRTdHlsZSgnbGVmdCcpLAogICAgICB0b3A6ICAgICAgZWxlbWVudC5nZXRTdHlsZSgndG9wJyksCiAgICAgIHdpZHRoOiAgICBlbGVtZW50LmdldFN0eWxlKCd3aWR0aCcpLAogICAgICBoZWlnaHQ6ICAgZWxlbWVudC5nZXRTdHlsZSgnaGVpZ2h0JykKICAgIH0pOwoKICAgIGVsZW1lbnQuc2V0U3R5bGUoewogICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJywKICAgICAgdG9wOiAgICBvZmZzZXQudG9wICsgJ3B4JywKICAgICAgbGVmdDogICBvZmZzZXQubGVmdCArICdweCcsCiAgICAgIHdpZHRoOiAgbGF5b3V0LmdldCgnd2lkdGgnKSArICdweCcsCiAgICAgIGhlaWdodDogbGF5b3V0LmdldCgnaGVpZ2h0JykgKyAncHgnCiAgICB9KTsKCiAgICByZXR1cm4gZWxlbWVudDsKICB9CgogIGZ1bmN0aW9uIHJlbGF0aXZpemUoZWxlbWVudCkgewogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7CiAgICBpZiAoRWxlbWVudC5nZXRTdHlsZShlbGVtZW50LCAncG9zaXRpb24nKSA9PT0gJ3JlbGF0aXZlJykgewogICAgICByZXR1cm4gZWxlbWVudDsKICAgIH0KCiAgICB2YXIgb3JpZ2luYWxTdHlsZXMgPQogICAgIGVsZW1lbnQucmV0cmlldmUoJ3Byb3RvdHlwZV9hYnNvbHV0aXplX29yaWdpbmFsX3N0eWxlcycpOwoKICAgIGlmIChvcmlnaW5hbFN0eWxlcykgZWxlbWVudC5zZXRTdHlsZShvcmlnaW5hbFN0eWxlcyk7CiAgICByZXR1cm4gZWxlbWVudDsKICB9CgoKICBmdW5jdGlvbiBzY3JvbGxUbyhlbGVtZW50KSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKICAgIHZhciBwb3MgPSBFbGVtZW50LmN1bXVsYXRpdmVPZmZzZXQoZWxlbWVudCk7CiAgICB3aW5kb3cuc2Nyb2xsVG8ocG9zLmxlZnQsIHBvcy50b3ApOwogICAgcmV0dXJuIGVsZW1lbnQ7CiAgfQoKCiAgZnVuY3Rpb24gbWFrZVBvc2l0aW9uZWQoZWxlbWVudCkgewogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7CiAgICB2YXIgcG9zaXRpb24gPSBFbGVtZW50LmdldFN0eWxlKGVsZW1lbnQsICdwb3NpdGlvbicpLCBzdHlsZXMgPSB7fTsKICAgIGlmIChwb3NpdGlvbiA9PT0gJ3N0YXRpYycgfHwgIXBvc2l0aW9uKSB7CiAgICAgIHN0eWxlcy5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7CiAgICAgIGlmIChQcm90b3R5cGUuQnJvd3Nlci5PcGVyYSkgewogICAgICAgIHN0eWxlcy50b3AgID0gMDsKICAgICAgICBzdHlsZXMubGVmdCA9IDA7CiAgICAgIH0KICAgICAgRWxlbWVudC5zZXRTdHlsZShlbGVtZW50LCBzdHlsZXMpOwogICAgICBFbGVtZW50LnN0b3JlKGVsZW1lbnQsICdwcm90b3R5cGVfbWFkZV9wb3NpdGlvbmVkJywgdHJ1ZSk7CiAgICB9CiAgICByZXR1cm4gZWxlbWVudDsKICB9CgogIGZ1bmN0aW9uIHVuZG9Qb3NpdGlvbmVkKGVsZW1lbnQpIHsKICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOwogICAgdmFyIHN0b3JhZ2UgPSBFbGVtZW50LmdldFN0b3JhZ2UoZWxlbWVudCksCiAgICAgbWFkZVBvc2l0aW9uZWQgPSBzdG9yYWdlLmdldCgncHJvdG90eXBlX21hZGVfcG9zaXRpb25lZCcpOwoKICAgIGlmIChtYWRlUG9zaXRpb25lZCkgewogICAgICBzdG9yYWdlLnVuc2V0KCdwcm90b3R5cGVfbWFkZV9wb3NpdGlvbmVkJyk7CiAgICAgIEVsZW1lbnQuc2V0U3R5bGUoZWxlbWVudCwgewogICAgICAgIHBvc2l0aW9uOiAnJywKICAgICAgICB0b3A6ICAgICAgJycsCiAgICAgICAgYm90dG9tOiAgICcnLAogICAgICAgIGxlZnQ6ICAgICAnJywKICAgICAgICByaWdodDogICAgJycKICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gZWxlbWVudDsKICB9CgogIGZ1bmN0aW9uIG1ha2VDbGlwcGluZyhlbGVtZW50KSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKCiAgICB2YXIgc3RvcmFnZSA9IEVsZW1lbnQuZ2V0U3RvcmFnZShlbGVtZW50KSwKICAgICBtYWRlQ2xpcHBpbmcgPSBzdG9yYWdlLmdldCgncHJvdG90eXBlX21hZGVfY2xpcHBpbmcnKTsKCiAgICBpZiAoT2JqZWN0LmlzVW5kZWZpbmVkKG1hZGVDbGlwcGluZykpIHsKICAgICAgdmFyIG92ZXJmbG93ID0gRWxlbWVudC5nZXRTdHlsZShlbGVtZW50LCAnb3ZlcmZsb3cnKTsKICAgICAgc3RvcmFnZS5zZXQoJ3Byb3RvdHlwZV9tYWRlX2NsaXBwaW5nJywgb3ZlcmZsb3cpOwogICAgICBpZiAob3ZlcmZsb3cgIT09ICdoaWRkZW4nKQogICAgICAgIGVsZW1lbnQuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJzsKICAgIH0KCiAgICByZXR1cm4gZWxlbWVudDsKICB9CgogIGZ1bmN0aW9uIHVuZG9DbGlwcGluZyhlbGVtZW50KSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKICAgIHZhciBzdG9yYWdlID0gRWxlbWVudC5nZXRTdG9yYWdlKGVsZW1lbnQpLAogICAgIG92ZXJmbG93ID0gc3RvcmFnZS5nZXQoJ3Byb3RvdHlwZV9tYWRlX2NsaXBwaW5nJyk7CgogICAgaWYgKCFPYmplY3QuaXNVbmRlZmluZWQob3ZlcmZsb3cpKSB7CiAgICAgIHN0b3JhZ2UudW5zZXQoJ3Byb3RvdHlwZV9tYWRlX2NsaXBwaW5nJyk7CiAgICAgIGVsZW1lbnQuc3R5bGUub3ZlcmZsb3cgPSBvdmVyZmxvdyB8fCAnJzsKICAgIH0KCiAgICByZXR1cm4gZWxlbWVudDsKICB9CgogIGZ1bmN0aW9uIGNsb25lUG9zaXRpb24oZWxlbWVudCwgc291cmNlLCBvcHRpb25zKSB7CiAgICBvcHRpb25zID0gT2JqZWN0LmV4dGVuZCh7CiAgICAgIHNldExlZnQ6ICAgIHRydWUsCiAgICAgIHNldFRvcDogICAgIHRydWUsCiAgICAgIHNldFdpZHRoOiAgIHRydWUsCiAgICAgIHNldEhlaWdodDogIHRydWUsCiAgICAgIG9mZnNldFRvcDogIDAsCiAgICAgIG9mZnNldExlZnQ6IDAKICAgIH0sIG9wdGlvbnMgfHwge30pOwoKICAgIHZhciBkb2NFbCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKCiAgICBzb3VyY2UgID0gJChzb3VyY2UpOwogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7CiAgICB2YXIgcCwgZGVsdGEsIGxheW91dCwgc3R5bGVzID0ge307CgogICAgaWYgKG9wdGlvbnMuc2V0TGVmdCB8fCBvcHRpb25zLnNldFRvcCkgewogICAgICBwID0gRWxlbWVudC52aWV3cG9ydE9mZnNldChzb3VyY2UpOwogICAgICBkZWx0YSA9IFswLCAwXTsKICAgICAgaWYgKEVsZW1lbnQuZ2V0U3R5bGUoZWxlbWVudCwgJ3Bvc2l0aW9uJykgPT09ICdhYnNvbHV0ZScpIHsKICAgICAgICB2YXIgcGFyZW50ID0gRWxlbWVudC5nZXRPZmZzZXRQYXJlbnQoZWxlbWVudCk7CiAgICAgICAgaWYgKHBhcmVudCAhPT0gZG9jdW1lbnQuYm9keSkgZGVsdGEgPSBFbGVtZW50LnZpZXdwb3J0T2Zmc2V0KHBhcmVudCk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBwYWdlU2Nyb2xsWFkoKSB7CiAgICAgIHZhciB4ID0gMCwgeSA9IDA7CiAgICAgIGlmIChPYmplY3QuaXNOdW1iZXIod2luZG93LnBhZ2VYT2Zmc2V0KSkgewogICAgICAgIHggPSB3aW5kb3cucGFnZVhPZmZzZXQ7CiAgICAgICAgeSA9IHdpbmRvdy5wYWdlWU9mZnNldDsKICAgICAgfSBlbHNlIGlmIChkb2N1bWVudC5ib2R5ICYmIChkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3ApKSB7CiAgICAgICAgeCA9IGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdDsKICAgICAgICB5ID0gZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7CiAgICAgIH0gZWxzZSBpZiAoZG9jRWwgJiYgKGRvY0VsLnNjcm9sbExlZnQgfHwgZG9jRWwuc2Nyb2xsVG9wKSkgewogICAgICAgIHggPSBkb2NFbC5zY3JvbGxMZWZ0OwogICAgICAgIHkgPSBkb2NFbC5zY3JvbGxUb3A7CiAgICAgIH0KICAgICAgcmV0dXJuIHsgeDogeCwgeTogeSB9OwogICAgfQoKICAgIHZhciBwYWdlWFkgPSBwYWdlU2Nyb2xsWFkoKTsKCgogICAgaWYgKG9wdGlvbnMuc2V0V2lkdGggfHwgb3B0aW9ucy5zZXRIZWlnaHQpIHsKICAgICAgbGF5b3V0ID0gRWxlbWVudC5nZXRMYXlvdXQoc291cmNlKTsKICAgIH0KCiAgICBpZiAob3B0aW9ucy5zZXRMZWZ0KQogICAgICBzdHlsZXMubGVmdCA9IChwWzBdICsgcGFnZVhZLnggLSBkZWx0YVswXSArIG9wdGlvbnMub2Zmc2V0TGVmdCkgKyAncHgnOwogICAgaWYgKG9wdGlvbnMuc2V0VG9wKQogICAgICBzdHlsZXMudG9wICA9IChwWzFdICsgcGFnZVhZLnkgLSBkZWx0YVsxXSArIG9wdGlvbnMub2Zmc2V0VG9wKSAgKyAncHgnOwoKICAgIHZhciBjdXJyZW50TGF5b3V0ID0gZWxlbWVudC5nZXRMYXlvdXQoKTsKCiAgICBpZiAob3B0aW9ucy5zZXRXaWR0aCkgewogICAgICBzdHlsZXMud2lkdGggPSBsYXlvdXQuZ2V0KCd3aWR0aCcpICArICdweCc7CiAgICB9CiAgICBpZiAob3B0aW9ucy5zZXRIZWlnaHQpIHsKICAgICAgc3R5bGVzLmhlaWdodCA9IGxheW91dC5nZXQoJ2hlaWdodCcpICsgJ3B4JzsKICAgIH0KCiAgICByZXR1cm4gRWxlbWVudC5zZXRTdHlsZShlbGVtZW50LCBzdHlsZXMpOwogIH0KCgogIGlmIChQcm90b3R5cGUuQnJvd3Nlci5JRSkgewogICAgZ2V0T2Zmc2V0UGFyZW50ID0gZ2V0T2Zmc2V0UGFyZW50LndyYXAoCiAgICAgIGZ1bmN0aW9uKHByb2NlZWQsIGVsZW1lbnQpIHsKICAgICAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKCiAgICAgICAgaWYgKGlzRG9jdW1lbnQoZWxlbWVudCkgfHwgaXNEZXRhY2hlZChlbGVtZW50KSB8fCBpc0JvZHkoZWxlbWVudCkgfHwgaXNIdG1sKGVsZW1lbnQpKQogICAgICAgICAgcmV0dXJuICQoZG9jdW1lbnQuYm9keSk7CgogICAgICAgIHZhciBwb3NpdGlvbiA9IGVsZW1lbnQuZ2V0U3R5bGUoJ3Bvc2l0aW9uJyk7CiAgICAgICAgaWYgKHBvc2l0aW9uICE9PSAnc3RhdGljJykgcmV0dXJuIHByb2NlZWQoZWxlbWVudCk7CgogICAgICAgIGVsZW1lbnQuc2V0U3R5bGUoeyBwb3NpdGlvbjogJ3JlbGF0aXZlJyB9KTsKICAgICAgICB2YXIgdmFsdWUgPSBwcm9jZWVkKGVsZW1lbnQpOwogICAgICAgIGVsZW1lbnQuc2V0U3R5bGUoeyBwb3NpdGlvbjogcG9zaXRpb24gfSk7CiAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICB9CiAgICApOwoKICAgIHBvc2l0aW9uZWRPZmZzZXQgPSBwb3NpdGlvbmVkT2Zmc2V0LndyYXAoZnVuY3Rpb24ocHJvY2VlZCwgZWxlbWVudCkgewogICAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKICAgICAgaWYgKCFlbGVtZW50LnBhcmVudE5vZGUpIHJldHVybiBuZXcgRWxlbWVudC5PZmZzZXQoMCwgMCk7CiAgICAgIHZhciBwb3NpdGlvbiA9IGVsZW1lbnQuZ2V0U3R5bGUoJ3Bvc2l0aW9uJyk7CiAgICAgIGlmIChwb3NpdGlvbiAhPT0gJ3N0YXRpYycpIHJldHVybiBwcm9jZWVkKGVsZW1lbnQpOwoKICAgICAgdmFyIG9mZnNldFBhcmVudCA9IGVsZW1lbnQuZ2V0T2Zmc2V0UGFyZW50KCk7CiAgICAgIGlmIChvZmZzZXRQYXJlbnQgJiYgb2Zmc2V0UGFyZW50LmdldFN0eWxlKCdwb3NpdGlvbicpID09PSAnZml4ZWQnKQogICAgICAgIGhhc0xheW91dChvZmZzZXRQYXJlbnQpOwoKICAgICAgZWxlbWVudC5zZXRTdHlsZSh7IHBvc2l0aW9uOiAncmVsYXRpdmUnIH0pOwogICAgICB2YXIgdmFsdWUgPSBwcm9jZWVkKGVsZW1lbnQpOwogICAgICBlbGVtZW50LnNldFN0eWxlKHsgcG9zaXRpb246IHBvc2l0aW9uIH0pOwogICAgICByZXR1cm4gdmFsdWU7CiAgICB9KTsKICB9IGVsc2UgaWYgKFByb3RvdHlwZS5Ccm93c2VyLldlYmtpdCkgewogICAgY3VtdWxhdGl2ZU9mZnNldCA9IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgZWxlbWVudCA9ICQoZWxlbWVudCk7CiAgICAgIHZhciB2YWx1ZVQgPSAwLCB2YWx1ZUwgPSAwOwogICAgICBkbyB7CiAgICAgICAgdmFsdWVUICs9IGVsZW1lbnQub2Zmc2V0VG9wICB8fCAwOwogICAgICAgIHZhbHVlTCArPSBlbGVtZW50Lm9mZnNldExlZnQgfHwgMDsKICAgICAgICBpZiAoZWxlbWVudC5vZmZzZXRQYXJlbnQgPT0gZG9jdW1lbnQuYm9keSkgewogICAgICAgICAgaWYgKEVsZW1lbnQuZ2V0U3R5bGUoZWxlbWVudCwgJ3Bvc2l0aW9uJykgPT0gJ2Fic29sdXRlJykgYnJlYWs7CiAgICAgICAgfQoKICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5vZmZzZXRQYXJlbnQ7CiAgICAgIH0gd2hpbGUgKGVsZW1lbnQpOwoKICAgICAgcmV0dXJuIG5ldyBFbGVtZW50Lk9mZnNldCh2YWx1ZUwsIHZhbHVlVCk7CiAgICB9OwogIH0KCgogIEVsZW1lbnQuYWRkTWV0aG9kcyh7CiAgICBnZXRMYXlvdXQ6ICAgICAgICAgICAgICBnZXRMYXlvdXQsCiAgICBtZWFzdXJlOiAgICAgICAgICAgICAgICBtZWFzdXJlLAogICAgZ2V0V2lkdGg6ICAgICAgICAgICAgICAgZ2V0V2lkdGgsCiAgICBnZXRIZWlnaHQ6ICAgICAgICAgICAgICBnZXRIZWlnaHQsCiAgICBnZXREaW1lbnNpb25zOiAgICAgICAgICBnZXREaW1lbnNpb25zLAogICAgZ2V0T2Zmc2V0UGFyZW50OiAgICAgICAgZ2V0T2Zmc2V0UGFyZW50LAogICAgY3VtdWxhdGl2ZU9mZnNldDogICAgICAgY3VtdWxhdGl2ZU9mZnNldCwKICAgIHBvc2l0aW9uZWRPZmZzZXQ6ICAgICAgIHBvc2l0aW9uZWRPZmZzZXQsCiAgICBjdW11bGF0aXZlU2Nyb2xsT2Zmc2V0OiBjdW11bGF0aXZlU2Nyb2xsT2Zmc2V0LAogICAgdmlld3BvcnRPZmZzZXQ6ICAgICAgICAgdmlld3BvcnRPZmZzZXQsCiAgICBhYnNvbHV0aXplOiAgICAgICAgICAgICBhYnNvbHV0aXplLAogICAgcmVsYXRpdml6ZTogICAgICAgICAgICAgcmVsYXRpdml6ZSwKICAgIHNjcm9sbFRvOiAgICAgICAgICAgICAgIHNjcm9sbFRvLAogICAgbWFrZVBvc2l0aW9uZWQ6ICAgICAgICAgbWFrZVBvc2l0aW9uZWQsCiAgICB1bmRvUG9zaXRpb25lZDogICAgICAgICB1bmRvUG9zaXRpb25lZCwKICAgIG1ha2VDbGlwcGluZzogICAgICAgICAgIG1ha2VDbGlwcGluZywKICAgIHVuZG9DbGlwcGluZzogICAgICAgICAgIHVuZG9DbGlwcGluZywKICAgIGNsb25lUG9zaXRpb246ICAgICAgICAgIGNsb25lUG9zaXRpb24KICB9KTsKCiAgZnVuY3Rpb24gaXNCb2R5KGVsZW1lbnQpIHsKICAgIHJldHVybiBlbGVtZW50Lm5vZGVOYW1lLnRvVXBwZXJDYXNlKCkgPT09ICdCT0RZJzsKICB9CgogIGZ1bmN0aW9uIGlzSHRtbChlbGVtZW50KSB7CiAgICByZXR1cm4gZWxlbWVudC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpID09PSAnSFRNTCc7CiAgfQoKICBmdW5jdGlvbiBpc0RvY3VtZW50KGVsZW1lbnQpIHsKICAgIHJldHVybiBlbGVtZW50Lm5vZGVUeXBlID09PSBOb2RlLkRPQ1VNRU5UX05PREU7CiAgfQoKICBmdW5jdGlvbiBpc0RldGFjaGVkKGVsZW1lbnQpIHsKICAgIHJldHVybiBlbGVtZW50ICE9PSBkb2N1bWVudC5ib2R5ICYmCiAgICAgIUVsZW1lbnQuZGVzY2VuZGFudE9mKGVsZW1lbnQsIGRvY3VtZW50LmJvZHkpOwogIH0KCiAgaWYgKCdnZXRCb3VuZGluZ0NsaWVudFJlY3QnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkgewogICAgRWxlbWVudC5hZGRNZXRob2RzKHsKICAgICAgdmlld3BvcnRPZmZzZXQ6IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKICAgICAgICBpZiAoaXNEZXRhY2hlZChlbGVtZW50KSkgcmV0dXJuIG5ldyBFbGVtZW50Lk9mZnNldCgwLCAwKTsKCiAgICAgICAgdmFyIHJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLAogICAgICAgICBkb2NFbCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKICAgICAgICByZXR1cm4gbmV3IEVsZW1lbnQuT2Zmc2V0KHJlY3QubGVmdCAtIGRvY0VsLmNsaWVudExlZnQsCiAgICAgICAgIHJlY3QudG9wIC0gZG9jRWwuY2xpZW50VG9wKTsKICAgICAgfQogICAgfSk7CiAgfQoKCn0pKCk7CgooZnVuY3Rpb24oKSB7CgogIHZhciBJU19PTERfT1BFUkEgPSBQcm90b3R5cGUuQnJvd3Nlci5PcGVyYSAmJgogICAod2luZG93LnBhcnNlRmxvYXQod2luZG93Lm9wZXJhLnZlcnNpb24oKSkgPCA5LjUpOwogIHZhciBST09UID0gbnVsbDsKICBmdW5jdGlvbiBnZXRSb290RWxlbWVudCgpIHsKICAgIGlmIChST09UKSByZXR1cm4gUk9PVDsKICAgIFJPT1QgPSBJU19PTERfT1BFUkEgPyBkb2N1bWVudC5ib2R5IDogZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OwogICAgcmV0dXJuIFJPT1Q7CiAgfQoKICBmdW5jdGlvbiBnZXREaW1lbnNpb25zKCkgewogICAgcmV0dXJuIHsgd2lkdGg6IHRoaXMuZ2V0V2lkdGgoKSwgaGVpZ2h0OiB0aGlzLmdldEhlaWdodCgpIH07CiAgfQoKICBmdW5jdGlvbiBnZXRXaWR0aCgpIHsKICAgIHJldHVybiBnZXRSb290RWxlbWVudCgpLmNsaWVudFdpZHRoOwogIH0KCiAgZnVuY3Rpb24gZ2V0SGVpZ2h0KCkgewogICAgcmV0dXJuIGdldFJvb3RFbGVtZW50KCkuY2xpZW50SGVpZ2h0OwogIH0KCiAgZnVuY3Rpb24gZ2V0U2Nyb2xsT2Zmc2V0cygpIHsKICAgIHZhciB4ID0gd2luZG93LnBhZ2VYT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0IHx8CiAgICAgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0OwogICAgdmFyIHkgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fAogICAgIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOwoKICAgIHJldHVybiBuZXcgRWxlbWVudC5PZmZzZXQoeCwgeSk7CiAgfQoKICBkb2N1bWVudC52aWV3cG9ydCA9IHsKICAgIGdldERpbWVuc2lvbnM6ICAgIGdldERpbWVuc2lvbnMsCiAgICBnZXRXaWR0aDogICAgICAgICBnZXRXaWR0aCwKICAgIGdldEhlaWdodDogICAgICAgIGdldEhlaWdodCwKICAgIGdldFNjcm9sbE9mZnNldHM6IGdldFNjcm9sbE9mZnNldHMKICB9OwoKfSkoKTsKd2luZG93LiQkID0gZnVuY3Rpb24oKSB7CiAgdmFyIGV4cHJlc3Npb24gPSAkQShhcmd1bWVudHMpLmpvaW4oJywgJyk7CiAgcmV0dXJuIFByb3RvdHlwZS5TZWxlY3Rvci5zZWxlY3QoZXhwcmVzc2lvbiwgZG9jdW1lbnQpOwp9OwoKUHJvdG90eXBlLlNlbGVjdG9yID0gKGZ1bmN0aW9uKCkgewoKICBmdW5jdGlvbiBzZWxlY3QoKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ01ldGhvZCAiUHJvdG90eXBlLlNlbGVjdG9yLnNlbGVjdCIgbXVzdCBiZSBkZWZpbmVkLicpOwogIH0KCiAgZnVuY3Rpb24gbWF0Y2goKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ01ldGhvZCAiUHJvdG90eXBlLlNlbGVjdG9yLm1hdGNoIiBtdXN0IGJlIGRlZmluZWQuJyk7CiAgfQoKICBmdW5jdGlvbiBmaW5kKGVsZW1lbnRzLCBleHByZXNzaW9uLCBpbmRleCkgewogICAgaW5kZXggPSBpbmRleCB8fCAwOwogICAgdmFyIG1hdGNoID0gUHJvdG90eXBlLlNlbGVjdG9yLm1hdGNoLCBsZW5ndGggPSBlbGVtZW50cy5sZW5ndGgsIG1hdGNoSW5kZXggPSAwLCBpOwoKICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICBpZiAobWF0Y2goZWxlbWVudHNbaV0sIGV4cHJlc3Npb24pICYmIGluZGV4ID09IG1hdGNoSW5kZXgrKykgewogICAgICAgIHJldHVybiBFbGVtZW50LmV4dGVuZChlbGVtZW50c1tpXSk7CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIGV4dGVuZEVsZW1lbnRzKGVsZW1lbnRzKSB7CiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZWxlbWVudHMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgRWxlbWVudC5leHRlbmQoZWxlbWVudHNbaV0pOwogICAgfQogICAgcmV0dXJuIGVsZW1lbnRzOwogIH0KCgogIHZhciBLID0gUHJvdG90eXBlLks7CgogIHJldHVybiB7CiAgICBzZWxlY3Q6IHNlbGVjdCwKICAgIG1hdGNoOiBtYXRjaCwKICAgIGZpbmQ6IGZpbmQsCiAgICBleHRlbmRFbGVtZW50czogKEVsZW1lbnQuZXh0ZW5kID09PSBLKSA/IEsgOiBleHRlbmRFbGVtZW50cywKICAgIGV4dGVuZEVsZW1lbnQ6IEVsZW1lbnQuZXh0ZW5kCiAgfTsKfSkoKTsKUHJvdG90eXBlLl9vcmlnaW5hbF9wcm9wZXJ0eSA9IHdpbmRvdy5TaXp6bGU7Cgo7KGZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBmYWtlRGVmaW5lKGZuKSB7CiAgICBQcm90b3R5cGUuX2FjdHVhbF9zaXp6bGUgPSBmbigpOwogIH0KICBmYWtlRGVmaW5lLmFtZCA9IHRydWU7CgogIGlmICh0eXBlb2YgZGVmaW5lICE9PSAndW5kZWZpbmVkJyAmJiBkZWZpbmUuYW1kKSB7CiAgICBQcm90b3R5cGUuX29yaWdpbmFsX2RlZmluZSA9IGRlZmluZTsKICAgIFByb3RvdHlwZS5fYWN0dWFsX3NpenpsZSA9IG51bGw7CiAgICB3aW5kb3cuZGVmaW5lID0gZmFrZURlZmluZTsKICB9Cn0pKCk7CgovKiEKICogU2l6emxlIENTUyBTZWxlY3RvciBFbmdpbmUgdjEuMTAuMTgKICogaHR0cDovL3NpenpsZWpzLmNvbS8KICoKICogQ29weXJpZ2h0IDIwMTMgalF1ZXJ5IEZvdW5kYXRpb24sIEluYy4gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycwogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UKICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZQogKgogKiBEYXRlOiAyMDE0LTAyLTA1CiAqLwooZnVuY3Rpb24oIHdpbmRvdyApIHsKCnZhciBpLAoJc3VwcG9ydCwKCUV4cHIsCglnZXRUZXh0LAoJaXNYTUwsCgljb21waWxlLAoJc2VsZWN0LAoJb3V0ZXJtb3N0Q29udGV4dCwKCXNvcnRJbnB1dCwKCWhhc0R1cGxpY2F0ZSwKCglzZXREb2N1bWVudCwKCWRvY3VtZW50LAoJZG9jRWxlbSwKCWRvY3VtZW50SXNIVE1MLAoJcmJ1Z2d5UVNBLAoJcmJ1Z2d5TWF0Y2hlcywKCW1hdGNoZXMsCgljb250YWlucywKCglleHBhbmRvID0gInNpenpsZSIgKyAtKG5ldyBEYXRlKCkpLAoJcHJlZmVycmVkRG9jID0gd2luZG93LmRvY3VtZW50LAoJZGlycnVucyA9IDAsCglkb25lID0gMCwKCWNsYXNzQ2FjaGUgPSBjcmVhdGVDYWNoZSgpLAoJdG9rZW5DYWNoZSA9IGNyZWF0ZUNhY2hlKCksCgljb21waWxlckNhY2hlID0gY3JlYXRlQ2FjaGUoKSwKCXNvcnRPcmRlciA9IGZ1bmN0aW9uKCBhLCBiICkgewoJCWlmICggYSA9PT0gYiApIHsKCQkJaGFzRHVwbGljYXRlID0gdHJ1ZTsKCQl9CgkJcmV0dXJuIDA7Cgl9LAoKCXN0cnVuZGVmaW5lZCA9IHR5cGVvZiB1bmRlZmluZWQsCglNQVhfTkVHQVRJVkUgPSAxIDw8IDMxLAoKCWhhc093biA9ICh7fSkuaGFzT3duUHJvcGVydHksCglhcnIgPSBbXSwKCXBvcCA9IGFyci5wb3AsCglwdXNoX25hdGl2ZSA9IGFyci5wdXNoLAoJcHVzaCA9IGFyci5wdXNoLAoJc2xpY2UgPSBhcnIuc2xpY2UsCglpbmRleE9mID0gYXJyLmluZGV4T2YgfHwgZnVuY3Rpb24oIGVsZW0gKSB7CgkJdmFyIGkgPSAwLAoJCQlsZW4gPSB0aGlzLmxlbmd0aDsKCQlmb3IgKCA7IGkgPCBsZW47IGkrKyApIHsKCQkJaWYgKCB0aGlzW2ldID09PSBlbGVtICkgewoJCQkJcmV0dXJuIGk7CgkJCX0KCQl9CgkJcmV0dXJuIC0xOwoJfSwKCglib29sZWFucyA9ICJjaGVja2VkfHNlbGVjdGVkfGFzeW5jfGF1dG9mb2N1c3xhdXRvcGxheXxjb250cm9sc3xkZWZlcnxkaXNhYmxlZHxoaWRkZW58aXNtYXB8bG9vcHxtdWx0aXBsZXxvcGVufHJlYWRvbmx5fHJlcXVpcmVkfHNjb3BlZCIsCgoKCXdoaXRlc3BhY2UgPSAiW1xceDIwXFx0XFxyXFxuXFxmXSIsCgljaGFyYWN0ZXJFbmNvZGluZyA9ICIoPzpcXFxcLnxbXFx3LV18W15cXHgwMC1cXHhhMF0pKyIsCgoJaWRlbnRpZmllciA9IGNoYXJhY3RlckVuY29kaW5nLnJlcGxhY2UoICJ3IiwgIncjIiApLAoKCWF0dHJpYnV0ZXMgPSAiXFxbIiArIHdoaXRlc3BhY2UgKyAiKigiICsgY2hhcmFjdGVyRW5jb2RpbmcgKyAiKSIgKyB3aGl0ZXNwYWNlICsKCQkiKig/OihbKl4kfCF+XT89KSIgKyB3aGl0ZXNwYWNlICsgIiooPzooWydcIl0pKCg/OlxcXFwufFteXFxcXF0pKj8pXFwzfCgiICsgaWRlbnRpZmllciArICIpfCl8KSIgKyB3aGl0ZXNwYWNlICsgIipcXF0iLAoKCXBzZXVkb3MgPSAiOigiICsgY2hhcmFjdGVyRW5jb2RpbmcgKyAiKSg/OlxcKCgoWydcIl0pKCg/OlxcXFwufFteXFxcXF0pKj8pXFwzfCgoPzpcXFxcLnxbXlxcXFwoKVtcXF1dfCIgKyBhdHRyaWJ1dGVzLnJlcGxhY2UoIDMsIDggKSArICIpKil8LiopXFwpfCkiLAoKCXJ0cmltID0gbmV3IFJlZ0V4cCggIl4iICsgd2hpdGVzcGFjZSArICIrfCgoPzpefFteXFxcXF0pKD86XFxcXC4pKikiICsgd2hpdGVzcGFjZSArICIrJCIsICJnIiApLAoKCXJjb21tYSA9IG5ldyBSZWdFeHAoICJeIiArIHdoaXRlc3BhY2UgKyAiKiwiICsgd2hpdGVzcGFjZSArICIqIiApLAoJcmNvbWJpbmF0b3JzID0gbmV3IFJlZ0V4cCggIl4iICsgd2hpdGVzcGFjZSArICIqKFs+K35dfCIgKyB3aGl0ZXNwYWNlICsgIikiICsgd2hpdGVzcGFjZSArICIqIiApLAoKCXJhdHRyaWJ1dGVRdW90ZXMgPSBuZXcgUmVnRXhwKCAiPSIgKyB3aGl0ZXNwYWNlICsgIiooW15cXF0nXCJdKj8pIiArIHdoaXRlc3BhY2UgKyAiKlxcXSIsICJnIiApLAoKCXJwc2V1ZG8gPSBuZXcgUmVnRXhwKCBwc2V1ZG9zICksCglyaWRlbnRpZmllciA9IG5ldyBSZWdFeHAoICJeIiArIGlkZW50aWZpZXIgKyAiJCIgKSwKCgltYXRjaEV4cHIgPSB7CgkJIklEIjogbmV3IFJlZ0V4cCggIl4jKCIgKyBjaGFyYWN0ZXJFbmNvZGluZyArICIpIiApLAoJCSJDTEFTUyI6IG5ldyBSZWdFeHAoICJeXFwuKCIgKyBjaGFyYWN0ZXJFbmNvZGluZyArICIpIiApLAoJCSJUQUciOiBuZXcgUmVnRXhwKCAiXigiICsgY2hhcmFjdGVyRW5jb2RpbmcucmVwbGFjZSggInciLCAidyoiICkgKyAiKSIgKSwKCQkiQVRUUiI6IG5ldyBSZWdFeHAoICJeIiArIGF0dHJpYnV0ZXMgKSwKCQkiUFNFVURPIjogbmV3IFJlZ0V4cCggIl4iICsgcHNldWRvcyApLAoJCSJDSElMRCI6IG5ldyBSZWdFeHAoICJeOihvbmx5fGZpcnN0fGxhc3R8bnRofG50aC1sYXN0KS0oY2hpbGR8b2YtdHlwZSkoPzpcXCgiICsgd2hpdGVzcGFjZSArCgkJCSIqKGV2ZW58b2RkfCgoWystXXwpKFxcZCopbnwpIiArIHdoaXRlc3BhY2UgKyAiKig/OihbKy1dfCkiICsgd2hpdGVzcGFjZSArCgkJCSIqKFxcZCspfCkpIiArIHdoaXRlc3BhY2UgKyAiKlxcKXwpIiwgImkiICksCgkJImJvb2wiOiBuZXcgUmVnRXhwKCAiXig/OiIgKyBib29sZWFucyArICIpJCIsICJpIiApLAoJCSJuZWVkc0NvbnRleHQiOiBuZXcgUmVnRXhwKCAiXiIgKyB3aGl0ZXNwYWNlICsgIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcKCIgKwoJCQl3aGl0ZXNwYWNlICsgIiooKD86LVxcZCk/XFxkKikiICsgd2hpdGVzcGFjZSArICIqXFwpfCkoPz1bXi1dfCQpIiwgImkiICkKCX0sCgoJcmlucHV0cyA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksCglyaGVhZGVyID0gL15oXGQkL2ksCgoJcm5hdGl2ZSA9IC9eW157XStce1xzKlxbbmF0aXZlIFx3LywKCglycXVpY2tFeHByID0gL14oPzojKFtcdy1dKyl8KFx3Kyl8XC4oW1x3LV0rKSkkLywKCglyc2libGluZyA9IC9bK35dLywKCXJlc2NhcGUgPSAvJ3xcXC9nLAoKCXJ1bmVzY2FwZSA9IG5ldyBSZWdFeHAoICJcXFxcKFtcXGRhLWZdezEsNn0iICsgd2hpdGVzcGFjZSArICI/fCgiICsgd2hpdGVzcGFjZSArICIpfC4pIiwgImlnIiApLAoJZnVuZXNjYXBlID0gZnVuY3Rpb24oIF8sIGVzY2FwZWQsIGVzY2FwZWRXaGl0ZXNwYWNlICkgewoJCXZhciBoaWdoID0gIjB4IiArIGVzY2FwZWQgLSAweDEwMDAwOwoJCXJldHVybiBoaWdoICE9PSBoaWdoIHx8IGVzY2FwZWRXaGl0ZXNwYWNlID8KCQkJZXNjYXBlZCA6CgkJCWhpZ2ggPCAwID8KCQkJCVN0cmluZy5mcm9tQ2hhckNvZGUoIGhpZ2ggKyAweDEwMDAwICkgOgoJCQkJU3RyaW5nLmZyb21DaGFyQ29kZSggaGlnaCA+PiAxMCB8IDB4RDgwMCwgaGlnaCAmIDB4M0ZGIHwgMHhEQzAwICk7Cgl9OwoKdHJ5IHsKCXB1c2guYXBwbHkoCgkJKGFyciA9IHNsaWNlLmNhbGwoIHByZWZlcnJlZERvYy5jaGlsZE5vZGVzICkpLAoJCXByZWZlcnJlZERvYy5jaGlsZE5vZGVzCgkpOwoJYXJyWyBwcmVmZXJyZWREb2MuY2hpbGROb2Rlcy5sZW5ndGggXS5ub2RlVHlwZTsKfSBjYXRjaCAoIGUgKSB7CglwdXNoID0geyBhcHBseTogYXJyLmxlbmd0aCA/CgoJCWZ1bmN0aW9uKCB0YXJnZXQsIGVscyApIHsKCQkJcHVzaF9uYXRpdmUuYXBwbHkoIHRhcmdldCwgc2xpY2UuY2FsbChlbHMpICk7CgkJfSA6CgoJCWZ1bmN0aW9uKCB0YXJnZXQsIGVscyApIHsKCQkJdmFyIGogPSB0YXJnZXQubGVuZ3RoLAoJCQkJaSA9IDA7CgkJCXdoaWxlICggKHRhcmdldFtqKytdID0gZWxzW2krK10pICkge30KCQkJdGFyZ2V0Lmxlbmd0aCA9IGogLSAxOwoJCX0KCX07Cn0KCmZ1bmN0aW9uIFNpenpsZSggc2VsZWN0b3IsIGNvbnRleHQsIHJlc3VsdHMsIHNlZWQgKSB7Cgl2YXIgbWF0Y2gsIGVsZW0sIG0sIG5vZGVUeXBlLAoJCWksIGdyb3Vwcywgb2xkLCBuaWQsIG5ld0NvbnRleHQsIG5ld1NlbGVjdG9yOwoKCWlmICggKCBjb250ZXh0ID8gY29udGV4dC5vd25lckRvY3VtZW50IHx8IGNvbnRleHQgOiBwcmVmZXJyZWREb2MgKSAhPT0gZG9jdW1lbnQgKSB7CgkJc2V0RG9jdW1lbnQoIGNvbnRleHQgKTsKCX0KCgljb250ZXh0ID0gY29udGV4dCB8fCBkb2N1bWVudDsKCXJlc3VsdHMgPSByZXN1bHRzIHx8IFtdOwoKCWlmICggIXNlbGVjdG9yIHx8IHR5cGVvZiBzZWxlY3RvciAhPT0gInN0cmluZyIgKSB7CgkJcmV0dXJuIHJlc3VsdHM7Cgl9CgoJaWYgKCAobm9kZVR5cGUgPSBjb250ZXh0Lm5vZGVUeXBlKSAhPT0gMSAmJiBub2RlVHlwZSAhPT0gOSApIHsKCQlyZXR1cm4gW107Cgl9CgoJaWYgKCBkb2N1bWVudElzSFRNTCAmJiAhc2VlZCApIHsKCgkJaWYgKCAobWF0Y2ggPSBycXVpY2tFeHByLmV4ZWMoIHNlbGVjdG9yICkpICkgewoJCQlpZiAoIChtID0gbWF0Y2hbMV0pICkgewoJCQkJaWYgKCBub2RlVHlwZSA9PT0gOSApIHsKCQkJCQllbGVtID0gY29udGV4dC5nZXRFbGVtZW50QnlJZCggbSApOwoJCQkJCWlmICggZWxlbSAmJiBlbGVtLnBhcmVudE5vZGUgKSB7CgkJCQkJCWlmICggZWxlbS5pZCA9PT0gbSApIHsKCQkJCQkJCXJlc3VsdHMucHVzaCggZWxlbSApOwoJCQkJCQkJcmV0dXJuIHJlc3VsdHM7CgkJCQkJCX0KCQkJCQl9IGVsc2UgewoJCQkJCQlyZXR1cm4gcmVzdWx0czsKCQkJCQl9CgkJCQl9IGVsc2UgewoJCQkJCWlmICggY29udGV4dC5vd25lckRvY3VtZW50ICYmIChlbGVtID0gY29udGV4dC5vd25lckRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCBtICkpICYmCgkJCQkJCWNvbnRhaW5zKCBjb250ZXh0LCBlbGVtICkgJiYgZWxlbS5pZCA9PT0gbSApIHsKCQkJCQkJcmVzdWx0cy5wdXNoKCBlbGVtICk7CgkJCQkJCXJldHVybiByZXN1bHRzOwoJCQkJCX0KCQkJCX0KCgkJCX0gZWxzZSBpZiAoIG1hdGNoWzJdICkgewoJCQkJcHVzaC5hcHBseSggcmVzdWx0cywgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggc2VsZWN0b3IgKSApOwoJCQkJcmV0dXJuIHJlc3VsdHM7CgoJCQl9IGVsc2UgaWYgKCAobSA9IG1hdGNoWzNdKSAmJiBzdXBwb3J0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgJiYgY29udGV4dC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICkgewoJCQkJcHVzaC5hcHBseSggcmVzdWx0cywgY29udGV4dC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCBtICkgKTsKCQkJCXJldHVybiByZXN1bHRzOwoJCQl9CgkJfQoKCQlpZiAoIHN1cHBvcnQucXNhICYmICghcmJ1Z2d5UVNBIHx8ICFyYnVnZ3lRU0EudGVzdCggc2VsZWN0b3IgKSkgKSB7CgkJCW5pZCA9IG9sZCA9IGV4cGFuZG87CgkJCW5ld0NvbnRleHQgPSBjb250ZXh0OwoJCQluZXdTZWxlY3RvciA9IG5vZGVUeXBlID09PSA5ICYmIHNlbGVjdG9yOwoKCQkJaWYgKCBub2RlVHlwZSA9PT0gMSAmJiBjb250ZXh0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgIT09ICJvYmplY3QiICkgewoJCQkJZ3JvdXBzID0gdG9rZW5pemUoIHNlbGVjdG9yICk7CgoJCQkJaWYgKCAob2xkID0gY29udGV4dC5nZXRBdHRyaWJ1dGUoImlkIikpICkgewoJCQkJCW5pZCA9IG9sZC5yZXBsYWNlKCByZXNjYXBlLCAiXFwkJiIgKTsKCQkJCX0gZWxzZSB7CgkJCQkJY29udGV4dC5zZXRBdHRyaWJ1dGUoICJpZCIsIG5pZCApOwoJCQkJfQoJCQkJbmlkID0gIltpZD0nIiArIG5pZCArICInXSAiOwoKCQkJCWkgPSBncm91cHMubGVuZ3RoOwoJCQkJd2hpbGUgKCBpLS0gKSB7CgkJCQkJZ3JvdXBzW2ldID0gbmlkICsgdG9TZWxlY3RvciggZ3JvdXBzW2ldICk7CgkJCQl9CgkJCQluZXdDb250ZXh0ID0gcnNpYmxpbmcudGVzdCggc2VsZWN0b3IgKSAmJiB0ZXN0Q29udGV4dCggY29udGV4dC5wYXJlbnROb2RlICkgfHwgY29udGV4dDsKCQkJCW5ld1NlbGVjdG9yID0gZ3JvdXBzLmpvaW4oIiwiKTsKCQkJfQoKCQkJaWYgKCBuZXdTZWxlY3RvciApIHsKCQkJCXRyeSB7CgkJCQkJcHVzaC5hcHBseSggcmVzdWx0cywKCQkJCQkJbmV3Q29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKCBuZXdTZWxlY3RvciApCgkJCQkJKTsKCQkJCQlyZXR1cm4gcmVzdWx0czsKCQkJCX0gY2F0Y2gocXNhRXJyb3IpIHsKCQkJCX0gZmluYWxseSB7CgkJCQkJaWYgKCAhb2xkICkgewoJCQkJCQljb250ZXh0LnJlbW92ZUF0dHJpYnV0ZSgiaWQiKTsKCQkJCQl9CgkJCQl9CgkJCX0KCQl9Cgl9CgoJcmV0dXJuIHNlbGVjdCggc2VsZWN0b3IucmVwbGFjZSggcnRyaW0sICIkMSIgKSwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApOwp9CgovKioKICogQ3JlYXRlIGtleS12YWx1ZSBjYWNoZXMgb2YgbGltaXRlZCBzaXplCiAqIEByZXR1cm5zIHtGdW5jdGlvbihzdHJpbmcsIE9iamVjdCl9IFJldHVybnMgdGhlIE9iamVjdCBkYXRhIGFmdGVyIHN0b3JpbmcgaXQgb24gaXRzZWxmIHdpdGgKICoJcHJvcGVydHkgbmFtZSB0aGUgKHNwYWNlLXN1ZmZpeGVkKSBzdHJpbmcgYW5kIChpZiB0aGUgY2FjaGUgaXMgbGFyZ2VyIHRoYW4gRXhwci5jYWNoZUxlbmd0aCkKICoJZGVsZXRpbmcgdGhlIG9sZGVzdCBlbnRyeQogKi8KZnVuY3Rpb24gY3JlYXRlQ2FjaGUoKSB7Cgl2YXIga2V5cyA9IFtdOwoKCWZ1bmN0aW9uIGNhY2hlKCBrZXksIHZhbHVlICkgewoJCWlmICgga2V5cy5wdXNoKCBrZXkgKyAiICIgKSA+IEV4cHIuY2FjaGVMZW5ndGggKSB7CgkJCWRlbGV0ZSBjYWNoZVsga2V5cy5zaGlmdCgpIF07CgkJfQoJCXJldHVybiAoY2FjaGVbIGtleSArICIgIiBdID0gdmFsdWUpOwoJfQoJcmV0dXJuIGNhY2hlOwp9CgovKioKICogTWFyayBhIGZ1bmN0aW9uIGZvciBzcGVjaWFsIHVzZSBieSBTaXp6bGUKICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIG1hcmsKICovCmZ1bmN0aW9uIG1hcmtGdW5jdGlvbiggZm4gKSB7CglmblsgZXhwYW5kbyBdID0gdHJ1ZTsKCXJldHVybiBmbjsKfQoKLyoqCiAqIFN1cHBvcnQgdGVzdGluZyB1c2luZyBhbiBlbGVtZW50CiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFBhc3NlZCB0aGUgY3JlYXRlZCBkaXYgYW5kIGV4cGVjdHMgYSBib29sZWFuIHJlc3VsdAogKi8KZnVuY3Rpb24gYXNzZXJ0KCBmbiApIHsKCXZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCgl0cnkgewoJCXJldHVybiAhIWZuKCBkaXYgKTsKCX0gY2F0Y2ggKGUpIHsKCQlyZXR1cm4gZmFsc2U7Cgl9IGZpbmFsbHkgewoJCWlmICggZGl2LnBhcmVudE5vZGUgKSB7CgkJCWRpdi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBkaXYgKTsKCQl9CgkJZGl2ID0gbnVsbDsKCX0KfQoKLyoqCiAqIEFkZHMgdGhlIHNhbWUgaGFuZGxlciBmb3IgYWxsIG9mIHRoZSBzcGVjaWZpZWQgYXR0cnMKICogQHBhcmFtIHtTdHJpbmd9IGF0dHJzIFBpcGUtc2VwYXJhdGVkIGxpc3Qgb2YgYXR0cmlidXRlcwogKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyIFRoZSBtZXRob2QgdGhhdCB3aWxsIGJlIGFwcGxpZWQKICovCmZ1bmN0aW9uIGFkZEhhbmRsZSggYXR0cnMsIGhhbmRsZXIgKSB7Cgl2YXIgYXJyID0gYXR0cnMuc3BsaXQoInwiKSwKCQlpID0gYXR0cnMubGVuZ3RoOwoKCXdoaWxlICggaS0tICkgewoJCUV4cHIuYXR0ckhhbmRsZVsgYXJyW2ldIF0gPSBoYW5kbGVyOwoJfQp9CgovKioKICogQ2hlY2tzIGRvY3VtZW50IG9yZGVyIG9mIHR3byBzaWJsaW5ncwogKiBAcGFyYW0ge0VsZW1lbnR9IGEKICogQHBhcmFtIHtFbGVtZW50fSBiCiAqIEByZXR1cm5zIHtOdW1iZXJ9IFJldHVybnMgbGVzcyB0aGFuIDAgaWYgYSBwcmVjZWRlcyBiLCBncmVhdGVyIHRoYW4gMCBpZiBhIGZvbGxvd3MgYgogKi8KZnVuY3Rpb24gc2libGluZ0NoZWNrKCBhLCBiICkgewoJdmFyIGN1ciA9IGIgJiYgYSwKCQlkaWZmID0gY3VyICYmIGEubm9kZVR5cGUgPT09IDEgJiYgYi5ub2RlVHlwZSA9PT0gMSAmJgoJCQkoIH5iLnNvdXJjZUluZGV4IHx8IE1BWF9ORUdBVElWRSApIC0KCQkJKCB+YS5zb3VyY2VJbmRleCB8fCBNQVhfTkVHQVRJVkUgKTsKCglpZiAoIGRpZmYgKSB7CgkJcmV0dXJuIGRpZmY7Cgl9CgoJaWYgKCBjdXIgKSB7CgkJd2hpbGUgKCAoY3VyID0gY3VyLm5leHRTaWJsaW5nKSApIHsKCQkJaWYgKCBjdXIgPT09IGIgKSB7CgkJCQlyZXR1cm4gLTE7CgkJCX0KCQl9Cgl9CgoJcmV0dXJuIGEgPyAxIDogLTE7Cn0KCi8qKgogKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG8gdXNlIGluIHBzZXVkb3MgZm9yIGlucHV0IHR5cGVzCiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlCiAqLwpmdW5jdGlvbiBjcmVhdGVJbnB1dFBzZXVkbyggdHlwZSApIHsKCXJldHVybiBmdW5jdGlvbiggZWxlbSApIHsKCQl2YXIgbmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKCQlyZXR1cm4gbmFtZSA9PT0gImlucHV0IiAmJiBlbGVtLnR5cGUgPT09IHR5cGU7Cgl9Owp9CgovKioKICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciBidXR0b25zCiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlCiAqLwpmdW5jdGlvbiBjcmVhdGVCdXR0b25Qc2V1ZG8oIHR5cGUgKSB7CglyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7CgkJdmFyIG5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CgkJcmV0dXJuIChuYW1lID09PSAiaW5wdXQiIHx8IG5hbWUgPT09ICJidXR0b24iKSAmJiBlbGVtLnR5cGUgPT09IHR5cGU7Cgl9Owp9CgovKioKICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciBwb3NpdGlvbmFscwogKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbgogKi8KZnVuY3Rpb24gY3JlYXRlUG9zaXRpb25hbFBzZXVkbyggZm4gKSB7CglyZXR1cm4gbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBhcmd1bWVudCApIHsKCQlhcmd1bWVudCA9ICthcmd1bWVudDsKCQlyZXR1cm4gbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWVkLCBtYXRjaGVzICkgewoJCQl2YXIgaiwKCQkJCW1hdGNoSW5kZXhlcyA9IGZuKCBbXSwgc2VlZC5sZW5ndGgsIGFyZ3VtZW50ICksCgkJCQlpID0gbWF0Y2hJbmRleGVzLmxlbmd0aDsKCgkJCXdoaWxlICggaS0tICkgewoJCQkJaWYgKCBzZWVkWyAoaiA9IG1hdGNoSW5kZXhlc1tpXSkgXSApIHsKCQkJCQlzZWVkW2pdID0gIShtYXRjaGVzW2pdID0gc2VlZFtqXSk7CgkJCQl9CgkJCX0KCQl9KTsKCX0pOwp9CgovKioKICogQ2hlY2tzIGEgbm9kZSBmb3IgdmFsaWRpdHkgYXMgYSBTaXp6bGUgY29udGV4dAogKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0PX0gY29udGV4dAogKiBAcmV0dXJucyB7RWxlbWVudHxPYmplY3R8Qm9vbGVhbn0gVGhlIGlucHV0IG5vZGUgaWYgYWNjZXB0YWJsZSwgb3RoZXJ3aXNlIGEgZmFsc3kgdmFsdWUKICovCmZ1bmN0aW9uIHRlc3RDb250ZXh0KCBjb250ZXh0ICkgewoJcmV0dXJuIGNvbnRleHQgJiYgdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgIT09IHN0cnVuZGVmaW5lZCAmJiBjb250ZXh0Owp9CgpzdXBwb3J0ID0gU2l6emxlLnN1cHBvcnQgPSB7fTsKCi8qKgogKiBEZXRlY3RzIFhNTCBub2RlcwogKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0fSBlbGVtIEFuIGVsZW1lbnQgb3IgYSBkb2N1bWVudAogKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZmYgZWxlbSBpcyBhIG5vbi1IVE1MIFhNTCBub2RlCiAqLwppc1hNTCA9IFNpenpsZS5pc1hNTCA9IGZ1bmN0aW9uKCBlbGVtICkgewoJdmFyIGRvY3VtZW50RWxlbWVudCA9IGVsZW0gJiYgKGVsZW0ub3duZXJEb2N1bWVudCB8fCBlbGVtKS5kb2N1bWVudEVsZW1lbnQ7CglyZXR1cm4gZG9jdW1lbnRFbGVtZW50ID8gZG9jdW1lbnRFbGVtZW50Lm5vZGVOYW1lICE9PSAiSFRNTCIgOiBmYWxzZTsKfTsKCi8qKgogKiBTZXRzIGRvY3VtZW50LXJlbGF0ZWQgdmFyaWFibGVzIG9uY2UgYmFzZWQgb24gdGhlIGN1cnJlbnQgZG9jdW1lbnQKICogQHBhcmFtIHtFbGVtZW50fE9iamVjdH0gW2RvY10gQW4gZWxlbWVudCBvciBkb2N1bWVudCBvYmplY3QgdG8gdXNlIHRvIHNldCB0aGUgZG9jdW1lbnQKICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY3VycmVudCBkb2N1bWVudAogKi8Kc2V0RG9jdW1lbnQgPSBTaXp6bGUuc2V0RG9jdW1lbnQgPSBmdW5jdGlvbiggbm9kZSApIHsKCXZhciBoYXNDb21wYXJlLAoJCWRvYyA9IG5vZGUgPyBub2RlLm93bmVyRG9jdW1lbnQgfHwgbm9kZSA6IHByZWZlcnJlZERvYywKCQlwYXJlbnQgPSBkb2MuZGVmYXVsdFZpZXc7CgoJaWYgKCBkb2MgPT09IGRvY3VtZW50IHx8IGRvYy5ub2RlVHlwZSAhPT0gOSB8fCAhZG9jLmRvY3VtZW50RWxlbWVudCApIHsKCQlyZXR1cm4gZG9jdW1lbnQ7Cgl9CgoJZG9jdW1lbnQgPSBkb2M7Cglkb2NFbGVtID0gZG9jLmRvY3VtZW50RWxlbWVudDsKCglkb2N1bWVudElzSFRNTCA9ICFpc1hNTCggZG9jICk7CgoJaWYgKCBwYXJlbnQgJiYgcGFyZW50ICE9PSBwYXJlbnQudG9wICkgewoJCWlmICggcGFyZW50LmFkZEV2ZW50TGlzdGVuZXIgKSB7CgkJCXBhcmVudC5hZGRFdmVudExpc3RlbmVyKCAidW5sb2FkIiwgZnVuY3Rpb24oKSB7CgkJCQlzZXREb2N1bWVudCgpOwoJCQl9LCBmYWxzZSApOwoJCX0gZWxzZSBpZiAoIHBhcmVudC5hdHRhY2hFdmVudCApIHsKCQkJcGFyZW50LmF0dGFjaEV2ZW50KCAib251bmxvYWQiLCBmdW5jdGlvbigpIHsKCQkJCXNldERvY3VtZW50KCk7CgkJCX0pOwoJCX0KCX0KCgkvKiBBdHRyaWJ1dGVzCgktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovCgoJc3VwcG9ydC5hdHRyaWJ1dGVzID0gYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7CgkJZGl2LmNsYXNzTmFtZSA9ICJpIjsKCQlyZXR1cm4gIWRpdi5nZXRBdHRyaWJ1dGUoImNsYXNzTmFtZSIpOwoJfSk7CgoJLyogZ2V0RWxlbWVudChzKUJ5KgoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLwoKCXN1cHBvcnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgPSBhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHsKCQlkaXYuYXBwZW5kQ2hpbGQoIGRvYy5jcmVhdGVDb21tZW50KCIiKSApOwoJCXJldHVybiAhZGl2LmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RoOwoJfSk7CgoJc3VwcG9ydC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lID0gcm5hdGl2ZS50ZXN0KCBkb2MuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSApICYmIGFzc2VydChmdW5jdGlvbiggZGl2ICkgewoJCWRpdi5pbm5lckhUTUwgPSAiPGRpdiBjbGFzcz0nYSc+PC9kaXY+PGRpdiBjbGFzcz0nYSBpJz48L2Rpdj4iOwoKCQlkaXYuZmlyc3RDaGlsZC5jbGFzc05hbWUgPSAiaSI7CgkJcmV0dXJuIGRpdi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJpIikubGVuZ3RoID09PSAyOwoJfSk7CgoJc3VwcG9ydC5nZXRCeUlkID0gYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7CgkJZG9jRWxlbS5hcHBlbmRDaGlsZCggZGl2ICkuaWQgPSBleHBhbmRvOwoJCXJldHVybiAhZG9jLmdldEVsZW1lbnRzQnlOYW1lIHx8ICFkb2MuZ2V0RWxlbWVudHNCeU5hbWUoIGV4cGFuZG8gKS5sZW5ndGg7Cgl9KTsKCglpZiAoIHN1cHBvcnQuZ2V0QnlJZCApIHsKCQlFeHByLmZpbmRbIklEIl0gPSBmdW5jdGlvbiggaWQsIGNvbnRleHQgKSB7CgkJCWlmICggdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQgIT09IHN0cnVuZGVmaW5lZCAmJiBkb2N1bWVudElzSFRNTCApIHsKCQkJCXZhciBtID0gY29udGV4dC5nZXRFbGVtZW50QnlJZCggaWQgKTsKCQkJCXJldHVybiBtICYmIG0ucGFyZW50Tm9kZSA/IFttXSA6IFtdOwoJCQl9CgkJfTsKCQlFeHByLmZpbHRlclsiSUQiXSA9IGZ1bmN0aW9uKCBpZCApIHsKCQkJdmFyIGF0dHJJZCA9IGlkLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7CgkJCXJldHVybiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCXJldHVybiBlbGVtLmdldEF0dHJpYnV0ZSgiaWQiKSA9PT0gYXR0cklkOwoJCQl9OwoJCX07Cgl9IGVsc2UgewoJCWRlbGV0ZSBFeHByLmZpbmRbIklEIl07CgoJCUV4cHIuZmlsdGVyWyJJRCJdID0gIGZ1bmN0aW9uKCBpZCApIHsKCQkJdmFyIGF0dHJJZCA9IGlkLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7CgkJCXJldHVybiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCXZhciBub2RlID0gdHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlTm9kZSAhPT0gc3RydW5kZWZpbmVkICYmIGVsZW0uZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTsKCQkJCXJldHVybiBub2RlICYmIG5vZGUudmFsdWUgPT09IGF0dHJJZDsKCQkJfTsKCQl9OwoJfQoKCUV4cHIuZmluZFsiVEFHIl0gPSBzdXBwb3J0LmdldEVsZW1lbnRzQnlUYWdOYW1lID8KCQlmdW5jdGlvbiggdGFnLCBjb250ZXh0ICkgewoJCQlpZiAoIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lICE9PSBzdHJ1bmRlZmluZWQgKSB7CgkJCQlyZXR1cm4gY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggdGFnICk7CgkJCX0KCQl9IDoKCQlmdW5jdGlvbiggdGFnLCBjb250ZXh0ICkgewoJCQl2YXIgZWxlbSwKCQkJCXRtcCA9IFtdLAoJCQkJaSA9IDAsCgkJCQlyZXN1bHRzID0gY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggdGFnICk7CgoJCQlpZiAoIHRhZyA9PT0gIioiICkgewoJCQkJd2hpbGUgKCAoZWxlbSA9IHJlc3VsdHNbaSsrXSkgKSB7CgkJCQkJaWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICkgewoJCQkJCQl0bXAucHVzaCggZWxlbSApOwoJCQkJCX0KCQkJCX0KCgkJCQlyZXR1cm4gdG1wOwoJCQl9CgkJCXJldHVybiByZXN1bHRzOwoJCX07CgoJRXhwci5maW5kWyJDTEFTUyJdID0gc3VwcG9ydC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICYmIGZ1bmN0aW9uKCBjbGFzc05hbWUsIGNvbnRleHQgKSB7CgkJaWYgKCB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICE9PSBzdHJ1bmRlZmluZWQgJiYgZG9jdW1lbnRJc0hUTUwgKSB7CgkJCXJldHVybiBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIGNsYXNzTmFtZSApOwoJCX0KCX07CgoJLyogUVNBL21hdGNoZXNTZWxlY3RvcgoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLwoKCglyYnVnZ3lNYXRjaGVzID0gW107CgoJcmJ1Z2d5UVNBID0gW107CgoJaWYgKCAoc3VwcG9ydC5xc2EgPSBybmF0aXZlLnRlc3QoIGRvYy5xdWVyeVNlbGVjdG9yQWxsICkpICkgewoJCWFzc2VydChmdW5jdGlvbiggZGl2ICkgewoJCQlkaXYuaW5uZXJIVE1MID0gIjxzZWxlY3QgdD0nJz48b3B0aW9uIHNlbGVjdGVkPScnPjwvb3B0aW9uPjwvc2VsZWN0PiI7CgoJCQlpZiAoIGRpdi5xdWVyeVNlbGVjdG9yQWxsKCJbdF49JyddIikubGVuZ3RoICkgewoJCQkJcmJ1Z2d5UVNBLnB1c2goICJbKl4kXT0iICsgd2hpdGVzcGFjZSArICIqKD86Jyd8XCJcIikiICk7CgkJCX0KCgkJCWlmICggIWRpdi5xdWVyeVNlbGVjdG9yQWxsKCJbc2VsZWN0ZWRdIikubGVuZ3RoICkgewoJCQkJcmJ1Z2d5UVNBLnB1c2goICJcXFsiICsgd2hpdGVzcGFjZSArICIqKD86dmFsdWV8IiArIGJvb2xlYW5zICsgIikiICk7CgkJCX0KCgkJCWlmICggIWRpdi5xdWVyeVNlbGVjdG9yQWxsKCI6Y2hlY2tlZCIpLmxlbmd0aCApIHsKCQkJCXJidWdneVFTQS5wdXNoKCI6Y2hlY2tlZCIpOwoJCQl9CgkJfSk7CgoJCWFzc2VydChmdW5jdGlvbiggZGl2ICkgewoJCQl2YXIgaW5wdXQgPSBkb2MuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKCQkJaW5wdXQuc2V0QXR0cmlidXRlKCAidHlwZSIsICJoaWRkZW4iICk7CgkJCWRpdi5hcHBlbmRDaGlsZCggaW5wdXQgKS5zZXRBdHRyaWJ1dGUoICJuYW1lIiwgIkQiICk7CgoJCQlpZiAoIGRpdi5xdWVyeVNlbGVjdG9yQWxsKCJbbmFtZT1kXSIpLmxlbmd0aCApIHsKCQkJCXJidWdneVFTQS5wdXNoKCAibmFtZSIgKyB3aGl0ZXNwYWNlICsgIipbKl4kfCF+XT89IiApOwoJCQl9CgoJCQlpZiAoICFkaXYucXVlcnlTZWxlY3RvckFsbCgiOmVuYWJsZWQiKS5sZW5ndGggKSB7CgkJCQlyYnVnZ3lRU0EucHVzaCggIjplbmFibGVkIiwgIjpkaXNhYmxlZCIgKTsKCQkJfQoKCQkJZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoIiosOngiKTsKCQkJcmJ1Z2d5UVNBLnB1c2goIiwuKjoiKTsKCQl9KTsKCX0KCglpZiAoIChzdXBwb3J0Lm1hdGNoZXNTZWxlY3RvciA9IHJuYXRpdmUudGVzdCggKG1hdGNoZXMgPSBkb2NFbGVtLndlYmtpdE1hdGNoZXNTZWxlY3RvciB8fAoJCWRvY0VsZW0ubW96TWF0Y2hlc1NlbGVjdG9yIHx8CgkJZG9jRWxlbS5vTWF0Y2hlc1NlbGVjdG9yIHx8CgkJZG9jRWxlbS5tc01hdGNoZXNTZWxlY3RvcikgKSkgKSB7CgoJCWFzc2VydChmdW5jdGlvbiggZGl2ICkgewoJCQlzdXBwb3J0LmRpc2Nvbm5lY3RlZE1hdGNoID0gbWF0Y2hlcy5jYWxsKCBkaXYsICJkaXYiICk7CgoJCQltYXRjaGVzLmNhbGwoIGRpdiwgIltzIT0nJ106eCIgKTsKCQkJcmJ1Z2d5TWF0Y2hlcy5wdXNoKCAiIT0iLCBwc2V1ZG9zICk7CgkJfSk7Cgl9CgoJcmJ1Z2d5UVNBID0gcmJ1Z2d5UVNBLmxlbmd0aCAmJiBuZXcgUmVnRXhwKCByYnVnZ3lRU0Euam9pbigifCIpICk7CglyYnVnZ3lNYXRjaGVzID0gcmJ1Z2d5TWF0Y2hlcy5sZW5ndGggJiYgbmV3IFJlZ0V4cCggcmJ1Z2d5TWF0Y2hlcy5qb2luKCJ8IikgKTsKCgkvKiBDb250YWlucwoJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLwoJaGFzQ29tcGFyZSA9IHJuYXRpdmUudGVzdCggZG9jRWxlbS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiApOwoKCWNvbnRhaW5zID0gaGFzQ29tcGFyZSB8fCBybmF0aXZlLnRlc3QoIGRvY0VsZW0uY29udGFpbnMgKSA/CgkJZnVuY3Rpb24oIGEsIGIgKSB7CgkJCXZhciBhZG93biA9IGEubm9kZVR5cGUgPT09IDkgPyBhLmRvY3VtZW50RWxlbWVudCA6IGEsCgkJCQlidXAgPSBiICYmIGIucGFyZW50Tm9kZTsKCQkJcmV0dXJuIGEgPT09IGJ1cCB8fCAhISggYnVwICYmIGJ1cC5ub2RlVHlwZSA9PT0gMSAmJiAoCgkJCQlhZG93bi5jb250YWlucyA/CgkJCQkJYWRvd24uY29udGFpbnMoIGJ1cCApIDoKCQkJCQlhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uICYmIGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGJ1cCApICYgMTYKCQkJKSk7CgkJfSA6CgkJZnVuY3Rpb24oIGEsIGIgKSB7CgkJCWlmICggYiApIHsKCQkJCXdoaWxlICggKGIgPSBiLnBhcmVudE5vZGUpICkgewoJCQkJCWlmICggYiA9PT0gYSApIHsKCQkJCQkJcmV0dXJuIHRydWU7CgkJCQkJfQoJCQkJfQoJCQl9CgkJCXJldHVybiBmYWxzZTsKCQl9OwoKCS8qIFNvcnRpbmcKCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8KCglzb3J0T3JkZXIgPSBoYXNDb21wYXJlID8KCWZ1bmN0aW9uKCBhLCBiICkgewoKCQlpZiAoIGEgPT09IGIgKSB7CgkJCWhhc0R1cGxpY2F0ZSA9IHRydWU7CgkJCXJldHVybiAwOwoJCX0KCgkJdmFyIGNvbXBhcmUgPSAhYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiAtICFiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uOwoJCWlmICggY29tcGFyZSApIHsKCQkJcmV0dXJuIGNvbXBhcmU7CgkJfQoKCQljb21wYXJlID0gKCBhLm93bmVyRG9jdW1lbnQgfHwgYSApID09PSAoIGIub3duZXJEb2N1bWVudCB8fCBiICkgPwoJCQlhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBiICkgOgoKCQkJMTsKCgkJaWYgKCBjb21wYXJlICYgMSB8fAoJCQkoIXN1cHBvcnQuc29ydERldGFjaGVkICYmIGIuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGEgKSA9PT0gY29tcGFyZSkgKSB7CgoJCQlpZiAoIGEgPT09IGRvYyB8fCBhLm93bmVyRG9jdW1lbnQgPT09IHByZWZlcnJlZERvYyAmJiBjb250YWlucyhwcmVmZXJyZWREb2MsIGEpICkgewoJCQkJcmV0dXJuIC0xOwoJCQl9CgkJCWlmICggYiA9PT0gZG9jIHx8IGIub3duZXJEb2N1bWVudCA9PT0gcHJlZmVycmVkRG9jICYmIGNvbnRhaW5zKHByZWZlcnJlZERvYywgYikgKSB7CgkJCQlyZXR1cm4gMTsKCQkJfQoKCQkJcmV0dXJuIHNvcnRJbnB1dCA/CgkJCQkoIGluZGV4T2YuY2FsbCggc29ydElucHV0LCBhICkgLSBpbmRleE9mLmNhbGwoIHNvcnRJbnB1dCwgYiApICkgOgoJCQkJMDsKCQl9CgoJCXJldHVybiBjb21wYXJlICYgNCA/IC0xIDogMTsKCX0gOgoJZnVuY3Rpb24oIGEsIGIgKSB7CgkJaWYgKCBhID09PSBiICkgewoJCQloYXNEdXBsaWNhdGUgPSB0cnVlOwoJCQlyZXR1cm4gMDsKCQl9CgoJCXZhciBjdXIsCgkJCWkgPSAwLAoJCQlhdXAgPSBhLnBhcmVudE5vZGUsCgkJCWJ1cCA9IGIucGFyZW50Tm9kZSwKCQkJYXAgPSBbIGEgXSwKCQkJYnAgPSBbIGIgXTsKCgkJaWYgKCAhYXVwIHx8ICFidXAgKSB7CgkJCXJldHVybiBhID09PSBkb2MgPyAtMSA6CgkJCQliID09PSBkb2MgPyAxIDoKCQkJCWF1cCA/IC0xIDoKCQkJCWJ1cCA/IDEgOgoJCQkJc29ydElucHV0ID8KCQkJCSggaW5kZXhPZi5jYWxsKCBzb3J0SW5wdXQsIGEgKSAtIGluZGV4T2YuY2FsbCggc29ydElucHV0LCBiICkgKSA6CgkJCQkwOwoKCQl9IGVsc2UgaWYgKCBhdXAgPT09IGJ1cCApIHsKCQkJcmV0dXJuIHNpYmxpbmdDaGVjayggYSwgYiApOwoJCX0KCgkJY3VyID0gYTsKCQl3aGlsZSAoIChjdXIgPSBjdXIucGFyZW50Tm9kZSkgKSB7CgkJCWFwLnVuc2hpZnQoIGN1ciApOwoJCX0KCQljdXIgPSBiOwoJCXdoaWxlICggKGN1ciA9IGN1ci5wYXJlbnROb2RlKSApIHsKCQkJYnAudW5zaGlmdCggY3VyICk7CgkJfQoKCQl3aGlsZSAoIGFwW2ldID09PSBicFtpXSApIHsKCQkJaSsrOwoJCX0KCgkJcmV0dXJuIGkgPwoJCQlzaWJsaW5nQ2hlY2soIGFwW2ldLCBicFtpXSApIDoKCgkJCWFwW2ldID09PSBwcmVmZXJyZWREb2MgPyAtMSA6CgkJCWJwW2ldID09PSBwcmVmZXJyZWREb2MgPyAxIDoKCQkJMDsKCX07CgoJcmV0dXJuIGRvYzsKfTsKClNpenpsZS5tYXRjaGVzID0gZnVuY3Rpb24oIGV4cHIsIGVsZW1lbnRzICkgewoJcmV0dXJuIFNpenpsZSggZXhwciwgbnVsbCwgbnVsbCwgZWxlbWVudHMgKTsKfTsKClNpenpsZS5tYXRjaGVzU2VsZWN0b3IgPSBmdW5jdGlvbiggZWxlbSwgZXhwciApIHsKCWlmICggKCBlbGVtLm93bmVyRG9jdW1lbnQgfHwgZWxlbSApICE9PSBkb2N1bWVudCApIHsKCQlzZXREb2N1bWVudCggZWxlbSApOwoJfQoKCWV4cHIgPSBleHByLnJlcGxhY2UoIHJhdHRyaWJ1dGVRdW90ZXMsICI9JyQxJ10iICk7CgoJaWYgKCBzdXBwb3J0Lm1hdGNoZXNTZWxlY3RvciAmJiBkb2N1bWVudElzSFRNTCAmJgoJCSggIXJidWdneU1hdGNoZXMgfHwgIXJidWdneU1hdGNoZXMudGVzdCggZXhwciApICkgJiYKCQkoICFyYnVnZ3lRU0EgICAgIHx8ICFyYnVnZ3lRU0EudGVzdCggZXhwciApICkgKSB7CgoJCXRyeSB7CgkJCXZhciByZXQgPSBtYXRjaGVzLmNhbGwoIGVsZW0sIGV4cHIgKTsKCgkJCWlmICggcmV0IHx8IHN1cHBvcnQuZGlzY29ubmVjdGVkTWF0Y2ggfHwKCQkJCQllbGVtLmRvY3VtZW50ICYmIGVsZW0uZG9jdW1lbnQubm9kZVR5cGUgIT09IDExICkgewoJCQkJcmV0dXJuIHJldDsKCQkJfQoJCX0gY2F0Y2goZSkge30KCX0KCglyZXR1cm4gU2l6emxlKCBleHByLCBkb2N1bWVudCwgbnVsbCwgW2VsZW1dICkubGVuZ3RoID4gMDsKfTsKClNpenpsZS5jb250YWlucyA9IGZ1bmN0aW9uKCBjb250ZXh0LCBlbGVtICkgewoJaWYgKCAoIGNvbnRleHQub3duZXJEb2N1bWVudCB8fCBjb250ZXh0ICkgIT09IGRvY3VtZW50ICkgewoJCXNldERvY3VtZW50KCBjb250ZXh0ICk7Cgl9CglyZXR1cm4gY29udGFpbnMoIGNvbnRleHQsIGVsZW0gKTsKfTsKClNpenpsZS5hdHRyID0gZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7CglpZiAoICggZWxlbS5vd25lckRvY3VtZW50IHx8IGVsZW0gKSAhPT0gZG9jdW1lbnQgKSB7CgkJc2V0RG9jdW1lbnQoIGVsZW0gKTsKCX0KCgl2YXIgZm4gPSBFeHByLmF0dHJIYW5kbGVbIG5hbWUudG9Mb3dlckNhc2UoKSBdLAoJCXZhbCA9IGZuICYmIGhhc093bi5jYWxsKCBFeHByLmF0dHJIYW5kbGUsIG5hbWUudG9Mb3dlckNhc2UoKSApID8KCQkJZm4oIGVsZW0sIG5hbWUsICFkb2N1bWVudElzSFRNTCApIDoKCQkJdW5kZWZpbmVkOwoKCXJldHVybiB2YWwgIT09IHVuZGVmaW5lZCA/CgkJdmFsIDoKCQlzdXBwb3J0LmF0dHJpYnV0ZXMgfHwgIWRvY3VtZW50SXNIVE1MID8KCQkJZWxlbS5nZXRBdHRyaWJ1dGUoIG5hbWUgKSA6CgkJCSh2YWwgPSBlbGVtLmdldEF0dHJpYnV0ZU5vZGUobmFtZSkpICYmIHZhbC5zcGVjaWZpZWQgPwoJCQkJdmFsLnZhbHVlIDoKCQkJCW51bGw7Cn07CgpTaXp6bGUuZXJyb3IgPSBmdW5jdGlvbiggbXNnICkgewoJdGhyb3cgbmV3IEVycm9yKCAiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogIiArIG1zZyApOwp9OwoKLyoqCiAqIERvY3VtZW50IHNvcnRpbmcgYW5kIHJlbW92aW5nIGR1cGxpY2F0ZXMKICogQHBhcmFtIHtBcnJheUxpa2V9IHJlc3VsdHMKICovClNpenpsZS51bmlxdWVTb3J0ID0gZnVuY3Rpb24oIHJlc3VsdHMgKSB7Cgl2YXIgZWxlbSwKCQlkdXBsaWNhdGVzID0gW10sCgkJaiA9IDAsCgkJaSA9IDA7CgoJaGFzRHVwbGljYXRlID0gIXN1cHBvcnQuZGV0ZWN0RHVwbGljYXRlczsKCXNvcnRJbnB1dCA9ICFzdXBwb3J0LnNvcnRTdGFibGUgJiYgcmVzdWx0cy5zbGljZSggMCApOwoJcmVzdWx0cy5zb3J0KCBzb3J0T3JkZXIgKTsKCglpZiAoIGhhc0R1cGxpY2F0ZSApIHsKCQl3aGlsZSAoIChlbGVtID0gcmVzdWx0c1tpKytdKSApIHsKCQkJaWYgKCBlbGVtID09PSByZXN1bHRzWyBpIF0gKSB7CgkJCQlqID0gZHVwbGljYXRlcy5wdXNoKCBpICk7CgkJCX0KCQl9CgkJd2hpbGUgKCBqLS0gKSB7CgkJCXJlc3VsdHMuc3BsaWNlKCBkdXBsaWNhdGVzWyBqIF0sIDEgKTsKCQl9Cgl9CgoJc29ydElucHV0ID0gbnVsbDsKCglyZXR1cm4gcmVzdWx0czsKfTsKCi8qKgogKiBVdGlsaXR5IGZ1bmN0aW9uIGZvciByZXRyaWV2aW5nIHRoZSB0ZXh0IHZhbHVlIG9mIGFuIGFycmF5IG9mIERPTSBub2RlcwogKiBAcGFyYW0ge0FycmF5fEVsZW1lbnR9IGVsZW0KICovCmdldFRleHQgPSBTaXp6bGUuZ2V0VGV4dCA9IGZ1bmN0aW9uKCBlbGVtICkgewoJdmFyIG5vZGUsCgkJcmV0ID0gIiIsCgkJaSA9IDAsCgkJbm9kZVR5cGUgPSBlbGVtLm5vZGVUeXBlOwoKCWlmICggIW5vZGVUeXBlICkgewoJCXdoaWxlICggKG5vZGUgPSBlbGVtW2krK10pICkgewoJCQlyZXQgKz0gZ2V0VGV4dCggbm9kZSApOwoJCX0KCX0gZWxzZSBpZiAoIG5vZGVUeXBlID09PSAxIHx8IG5vZGVUeXBlID09PSA5IHx8IG5vZGVUeXBlID09PSAxMSApIHsKCQlpZiAoIHR5cGVvZiBlbGVtLnRleHRDb250ZW50ID09PSAic3RyaW5nIiApIHsKCQkJcmV0dXJuIGVsZW0udGV4dENvbnRlbnQ7CgkJfSBlbHNlIHsKCQkJZm9yICggZWxlbSA9IGVsZW0uZmlyc3RDaGlsZDsgZWxlbTsgZWxlbSA9IGVsZW0ubmV4dFNpYmxpbmcgKSB7CgkJCQlyZXQgKz0gZ2V0VGV4dCggZWxlbSApOwoJCQl9CgkJfQoJfSBlbHNlIGlmICggbm9kZVR5cGUgPT09IDMgfHwgbm9kZVR5cGUgPT09IDQgKSB7CgkJcmV0dXJuIGVsZW0ubm9kZVZhbHVlOwoJfQoKCXJldHVybiByZXQ7Cn07CgpFeHByID0gU2l6emxlLnNlbGVjdG9ycyA9IHsKCgljYWNoZUxlbmd0aDogNTAsCgoJY3JlYXRlUHNldWRvOiBtYXJrRnVuY3Rpb24sCgoJbWF0Y2g6IG1hdGNoRXhwciwKCglhdHRySGFuZGxlOiB7fSwKCglmaW5kOiB7fSwKCglyZWxhdGl2ZTogewoJCSI+IjogeyBkaXI6ICJwYXJlbnROb2RlIiwgZmlyc3Q6IHRydWUgfSwKCQkiICI6IHsgZGlyOiAicGFyZW50Tm9kZSIgfSwKCQkiKyI6IHsgZGlyOiAicHJldmlvdXNTaWJsaW5nIiwgZmlyc3Q6IHRydWUgfSwKCQkifiI6IHsgZGlyOiAicHJldmlvdXNTaWJsaW5nIiB9Cgl9LAoKCXByZUZpbHRlcjogewoJCSJBVFRSIjogZnVuY3Rpb24oIG1hdGNoICkgewoJCQltYXRjaFsxXSA9IG1hdGNoWzFdLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7CgoJCQltYXRjaFszXSA9ICggbWF0Y2hbNF0gfHwgbWF0Y2hbNV0gfHwgIiIgKS5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApOwoKCQkJaWYgKCBtYXRjaFsyXSA9PT0gIn49IiApIHsKCQkJCW1hdGNoWzNdID0gIiAiICsgbWF0Y2hbM10gKyAiICI7CgkJCX0KCgkJCXJldHVybiBtYXRjaC5zbGljZSggMCwgNCApOwoJCX0sCgoJCSJDSElMRCI6IGZ1bmN0aW9uKCBtYXRjaCApIHsKCQkJLyogbWF0Y2hlcyBmcm9tIG1hdGNoRXhwclsiQ0hJTEQiXQoJCQkJMSB0eXBlIChvbmx5fG50aHwuLi4pCgkJCQkyIHdoYXQgKGNoaWxkfG9mLXR5cGUpCgkJCQkzIGFyZ3VtZW50IChldmVufG9kZHxcZCp8XGQqbihbKy1dXGQrKT98Li4uKQoJCQkJNCB4bi1jb21wb25lbnQgb2YgeG4reSBhcmd1bWVudCAoWystXT9cZCpufCkKCQkJCTUgc2lnbiBvZiB4bi1jb21wb25lbnQKCQkJCTYgeCBvZiB4bi1jb21wb25lbnQKCQkJCTcgc2lnbiBvZiB5LWNvbXBvbmVudAoJCQkJOCB5IG9mIHktY29tcG9uZW50CgkJCSovCgkJCW1hdGNoWzFdID0gbWF0Y2hbMV0udG9Mb3dlckNhc2UoKTsKCgkJCWlmICggbWF0Y2hbMV0uc2xpY2UoIDAsIDMgKSA9PT0gIm50aCIgKSB7CgkJCQlpZiAoICFtYXRjaFszXSApIHsKCQkJCQlTaXp6bGUuZXJyb3IoIG1hdGNoWzBdICk7CgkJCQl9CgoJCQkJbWF0Y2hbNF0gPSArKCBtYXRjaFs0XSA/IG1hdGNoWzVdICsgKG1hdGNoWzZdIHx8IDEpIDogMiAqICggbWF0Y2hbM10gPT09ICJldmVuIiB8fCBtYXRjaFszXSA9PT0gIm9kZCIgKSApOwoJCQkJbWF0Y2hbNV0gPSArKCAoIG1hdGNoWzddICsgbWF0Y2hbOF0gKSB8fCBtYXRjaFszXSA9PT0gIm9kZCIgKTsKCgkJCX0gZWxzZSBpZiAoIG1hdGNoWzNdICkgewoJCQkJU2l6emxlLmVycm9yKCBtYXRjaFswXSApOwoJCQl9CgoJCQlyZXR1cm4gbWF0Y2g7CgkJfSwKCgkJIlBTRVVETyI6IGZ1bmN0aW9uKCBtYXRjaCApIHsKCQkJdmFyIGV4Y2VzcywKCQkJCXVucXVvdGVkID0gIW1hdGNoWzVdICYmIG1hdGNoWzJdOwoKCQkJaWYgKCBtYXRjaEV4cHJbIkNISUxEIl0udGVzdCggbWF0Y2hbMF0gKSApIHsKCQkJCXJldHVybiBudWxsOwoJCQl9CgoJCQlpZiAoIG1hdGNoWzNdICYmIG1hdGNoWzRdICE9PSB1bmRlZmluZWQgKSB7CgkJCQltYXRjaFsyXSA9IG1hdGNoWzRdOwoKCQkJfSBlbHNlIGlmICggdW5xdW90ZWQgJiYgcnBzZXVkby50ZXN0KCB1bnF1b3RlZCApICYmCgkJCQkoZXhjZXNzID0gdG9rZW5pemUoIHVucXVvdGVkLCB0cnVlICkpICYmCgkJCQkoZXhjZXNzID0gdW5xdW90ZWQuaW5kZXhPZiggIikiLCB1bnF1b3RlZC5sZW5ndGggLSBleGNlc3MgKSAtIHVucXVvdGVkLmxlbmd0aCkgKSB7CgoJCQkJbWF0Y2hbMF0gPSBtYXRjaFswXS5zbGljZSggMCwgZXhjZXNzICk7CgkJCQltYXRjaFsyXSA9IHVucXVvdGVkLnNsaWNlKCAwLCBleGNlc3MgKTsKCQkJfQoKCQkJcmV0dXJuIG1hdGNoLnNsaWNlKCAwLCAzICk7CgkJfQoJfSwKCglmaWx0ZXI6IHsKCgkJIlRBRyI6IGZ1bmN0aW9uKCBub2RlTmFtZVNlbGVjdG9yICkgewoJCQl2YXIgbm9kZU5hbWUgPSBub2RlTmFtZVNlbGVjdG9yLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICkudG9Mb3dlckNhc2UoKTsKCQkJcmV0dXJuIG5vZGVOYW1lU2VsZWN0b3IgPT09ICIqIiA/CgkJCQlmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH0gOgoJCQkJZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQkJcmV0dXJuIGVsZW0ubm9kZU5hbWUgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBub2RlTmFtZTsKCQkJCX07CgkJfSwKCgkJIkNMQVNTIjogZnVuY3Rpb24oIGNsYXNzTmFtZSApIHsKCQkJdmFyIHBhdHRlcm4gPSBjbGFzc0NhY2hlWyBjbGFzc05hbWUgKyAiICIgXTsKCgkJCXJldHVybiBwYXR0ZXJuIHx8CgkJCQkocGF0dGVybiA9IG5ldyBSZWdFeHAoICIoXnwiICsgd2hpdGVzcGFjZSArICIpIiArIGNsYXNzTmFtZSArICIoIiArIHdoaXRlc3BhY2UgKyAifCQpIiApKSAmJgoJCQkJY2xhc3NDYWNoZSggY2xhc3NOYW1lLCBmdW5jdGlvbiggZWxlbSApIHsKCQkJCQlyZXR1cm4gcGF0dGVybi50ZXN0KCB0eXBlb2YgZWxlbS5jbGFzc05hbWUgPT09ICJzdHJpbmciICYmIGVsZW0uY2xhc3NOYW1lIHx8IHR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZSAhPT0gc3RydW5kZWZpbmVkICYmIGVsZW0uZ2V0QXR0cmlidXRlKCJjbGFzcyIpIHx8ICIiICk7CgkJCQl9KTsKCQl9LAoKCQkiQVRUUiI6IGZ1bmN0aW9uKCBuYW1lLCBvcGVyYXRvciwgY2hlY2sgKSB7CgkJCXJldHVybiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCXZhciByZXN1bHQgPSBTaXp6bGUuYXR0ciggZWxlbSwgbmFtZSApOwoKCQkJCWlmICggcmVzdWx0ID09IG51bGwgKSB7CgkJCQkJcmV0dXJuIG9wZXJhdG9yID09PSAiIT0iOwoJCQkJfQoJCQkJaWYgKCAhb3BlcmF0b3IgKSB7CgkJCQkJcmV0dXJuIHRydWU7CgkJCQl9CgoJCQkJcmVzdWx0ICs9ICIiOwoKCQkJCXJldHVybiBvcGVyYXRvciA9PT0gIj0iID8gcmVzdWx0ID09PSBjaGVjayA6CgkJCQkJb3BlcmF0b3IgPT09ICIhPSIgPyByZXN1bHQgIT09IGNoZWNrIDoKCQkJCQlvcGVyYXRvciA9PT0gIl49IiA/IGNoZWNrICYmIHJlc3VsdC5pbmRleE9mKCBjaGVjayApID09PSAwIDoKCQkJCQlvcGVyYXRvciA9PT0gIio9IiA/IGNoZWNrICYmIHJlc3VsdC5pbmRleE9mKCBjaGVjayApID4gLTEgOgoJCQkJCW9wZXJhdG9yID09PSAiJD0iID8gY2hlY2sgJiYgcmVzdWx0LnNsaWNlKCAtY2hlY2subGVuZ3RoICkgPT09IGNoZWNrIDoKCQkJCQlvcGVyYXRvciA9PT0gIn49IiA/ICggIiAiICsgcmVzdWx0ICsgIiAiICkuaW5kZXhPZiggY2hlY2sgKSA+IC0xIDoKCQkJCQlvcGVyYXRvciA9PT0gInw9IiA/IHJlc3VsdCA9PT0gY2hlY2sgfHwgcmVzdWx0LnNsaWNlKCAwLCBjaGVjay5sZW5ndGggKyAxICkgPT09IGNoZWNrICsgIi0iIDoKCQkJCQlmYWxzZTsKCQkJfTsKCQl9LAoKCQkiQ0hJTEQiOiBmdW5jdGlvbiggdHlwZSwgd2hhdCwgYXJndW1lbnQsIGZpcnN0LCBsYXN0ICkgewoJCQl2YXIgc2ltcGxlID0gdHlwZS5zbGljZSggMCwgMyApICE9PSAibnRoIiwKCQkJCWZvcndhcmQgPSB0eXBlLnNsaWNlKCAtNCApICE9PSAibGFzdCIsCgkJCQlvZlR5cGUgPSB3aGF0ID09PSAib2YtdHlwZSI7CgoJCQlyZXR1cm4gZmlyc3QgPT09IDEgJiYgbGFzdCA9PT0gMCA/CgoJCQkJZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQkJcmV0dXJuICEhZWxlbS5wYXJlbnROb2RlOwoJCQkJfSA6CgoJCQkJZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHsKCQkJCQl2YXIgY2FjaGUsIG91dGVyQ2FjaGUsIG5vZGUsIGRpZmYsIG5vZGVJbmRleCwgc3RhcnQsCgkJCQkJCWRpciA9IHNpbXBsZSAhPT0gZm9yd2FyZCA/ICJuZXh0U2libGluZyIgOiAicHJldmlvdXNTaWJsaW5nIiwKCQkJCQkJcGFyZW50ID0gZWxlbS5wYXJlbnROb2RlLAoJCQkJCQluYW1lID0gb2ZUeXBlICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSwKCQkJCQkJdXNlQ2FjaGUgPSAheG1sICYmICFvZlR5cGU7CgoJCQkJCWlmICggcGFyZW50ICkgewoKCQkJCQkJaWYgKCBzaW1wbGUgKSB7CgkJCQkJCQl3aGlsZSAoIGRpciApIHsKCQkJCQkJCQlub2RlID0gZWxlbTsKCQkJCQkJCQl3aGlsZSAoIChub2RlID0gbm9kZVsgZGlyIF0pICkgewoJCQkJCQkJCQlpZiAoIG9mVHlwZSA/IG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZSA6IG5vZGUubm9kZVR5cGUgPT09IDEgKSB7CgkJCQkJCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQkJCQkJCX0KCQkJCQkJCQl9CgkJCQkJCQkJc3RhcnQgPSBkaXIgPSB0eXBlID09PSAib25seSIgJiYgIXN0YXJ0ICYmICJuZXh0U2libGluZyI7CgkJCQkJCQl9CgkJCQkJCQlyZXR1cm4gdHJ1ZTsKCQkJCQkJfQoKCQkJCQkJc3RhcnQgPSBbIGZvcndhcmQgPyBwYXJlbnQuZmlyc3RDaGlsZCA6IHBhcmVudC5sYXN0Q2hpbGQgXTsKCgkJCQkJCWlmICggZm9yd2FyZCAmJiB1c2VDYWNoZSApIHsKCQkJCQkJCW91dGVyQ2FjaGUgPSBwYXJlbnRbIGV4cGFuZG8gXSB8fCAocGFyZW50WyBleHBhbmRvIF0gPSB7fSk7CgkJCQkJCQljYWNoZSA9IG91dGVyQ2FjaGVbIHR5cGUgXSB8fCBbXTsKCQkJCQkJCW5vZGVJbmRleCA9IGNhY2hlWzBdID09PSBkaXJydW5zICYmIGNhY2hlWzFdOwoJCQkJCQkJZGlmZiA9IGNhY2hlWzBdID09PSBkaXJydW5zICYmIGNhY2hlWzJdOwoJCQkJCQkJbm9kZSA9IG5vZGVJbmRleCAmJiBwYXJlbnQuY2hpbGROb2Rlc1sgbm9kZUluZGV4IF07CgoJCQkJCQkJd2hpbGUgKCAobm9kZSA9ICsrbm9kZUluZGV4ICYmIG5vZGUgJiYgbm9kZVsgZGlyIF0gfHwKCgkJCQkJCQkJKGRpZmYgPSBub2RlSW5kZXggPSAwKSB8fCBzdGFydC5wb3AoKSkgKSB7CgoJCQkJCQkJCWlmICggbm9kZS5ub2RlVHlwZSA9PT0gMSAmJiArK2RpZmYgJiYgbm9kZSA9PT0gZWxlbSApIHsKCQkJCQkJCQkJb3V0ZXJDYWNoZVsgdHlwZSBdID0gWyBkaXJydW5zLCBub2RlSW5kZXgsIGRpZmYgXTsKCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJfQoJCQkJCQkJfQoKCQkJCQkJfSBlbHNlIGlmICggdXNlQ2FjaGUgJiYgKGNhY2hlID0gKGVsZW1bIGV4cGFuZG8gXSB8fCAoZWxlbVsgZXhwYW5kbyBdID0ge30pKVsgdHlwZSBdKSAmJiBjYWNoZVswXSA9PT0gZGlycnVucyApIHsKCQkJCQkJCWRpZmYgPSBjYWNoZVsxXTsKCgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl3aGlsZSAoIChub2RlID0gKytub2RlSW5kZXggJiYgbm9kZSAmJiBub2RlWyBkaXIgXSB8fAoJCQkJCQkJCShkaWZmID0gbm9kZUluZGV4ID0gMCkgfHwgc3RhcnQucG9wKCkpICkgewoKCQkJCQkJCQlpZiAoICggb2ZUeXBlID8gbm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lIDogbm9kZS5ub2RlVHlwZSA9PT0gMSApICYmICsrZGlmZiApIHsKCQkJCQkJCQkJaWYgKCB1c2VDYWNoZSApIHsKCQkJCQkJCQkJCShub2RlWyBleHBhbmRvIF0gfHwgKG5vZGVbIGV4cGFuZG8gXSA9IHt9KSlbIHR5cGUgXSA9IFsgZGlycnVucywgZGlmZiBdOwoJCQkJCQkJCQl9CgoJCQkJCQkJCQlpZiAoIG5vZGUgPT09IGVsZW0gKSB7CgkJCQkJCQkJCQlicmVhazsKCQkJCQkJCQkJfQoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJfQoKCQkJCQkJZGlmZiAtPSBsYXN0OwoJCQkJCQlyZXR1cm4gZGlmZiA9PT0gZmlyc3QgfHwgKCBkaWZmICUgZmlyc3QgPT09IDAgJiYgZGlmZiAvIGZpcnN0ID49IDAgKTsKCQkJCQl9CgkJCQl9OwoJCX0sCgoJCSJQU0VVRE8iOiBmdW5jdGlvbiggcHNldWRvLCBhcmd1bWVudCApIHsKCQkJdmFyIGFyZ3MsCgkJCQlmbiA9IEV4cHIucHNldWRvc1sgcHNldWRvIF0gfHwgRXhwci5zZXRGaWx0ZXJzWyBwc2V1ZG8udG9Mb3dlckNhc2UoKSBdIHx8CgkJCQkJU2l6emxlLmVycm9yKCAidW5zdXBwb3J0ZWQgcHNldWRvOiAiICsgcHNldWRvICk7CgoJCQlpZiAoIGZuWyBleHBhbmRvIF0gKSB7CgkJCQlyZXR1cm4gZm4oIGFyZ3VtZW50ICk7CgkJCX0KCgkJCWlmICggZm4ubGVuZ3RoID4gMSApIHsKCQkJCWFyZ3MgPSBbIHBzZXVkbywgcHNldWRvLCAiIiwgYXJndW1lbnQgXTsKCQkJCXJldHVybiBFeHByLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoIHBzZXVkby50b0xvd2VyQ2FzZSgpICkgPwoJCQkJCW1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgbWF0Y2hlcyApIHsKCQkJCQkJdmFyIGlkeCwKCQkJCQkJCW1hdGNoZWQgPSBmbiggc2VlZCwgYXJndW1lbnQgKSwKCQkJCQkJCWkgPSBtYXRjaGVkLmxlbmd0aDsKCQkJCQkJd2hpbGUgKCBpLS0gKSB7CgkJCQkJCQlpZHggPSBpbmRleE9mLmNhbGwoIHNlZWQsIG1hdGNoZWRbaV0gKTsKCQkJCQkJCXNlZWRbIGlkeCBdID0gISggbWF0Y2hlc1sgaWR4IF0gPSBtYXRjaGVkW2ldICk7CgkJCQkJCX0KCQkJCQl9KSA6CgkJCQkJZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQkJCXJldHVybiBmbiggZWxlbSwgMCwgYXJncyApOwoJCQkJCX07CgkJCX0KCgkJCXJldHVybiBmbjsKCQl9Cgl9LAoKCXBzZXVkb3M6IHsKCQkibm90IjogbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWxlY3RvciApIHsKCQkJdmFyIGlucHV0ID0gW10sCgkJCQlyZXN1bHRzID0gW10sCgkJCQltYXRjaGVyID0gY29tcGlsZSggc2VsZWN0b3IucmVwbGFjZSggcnRyaW0sICIkMSIgKSApOwoKCQkJcmV0dXJuIG1hdGNoZXJbIGV4cGFuZG8gXSA/CgkJCQltYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlZWQsIG1hdGNoZXMsIGNvbnRleHQsIHhtbCApIHsKCQkJCQl2YXIgZWxlbSwKCQkJCQkJdW5tYXRjaGVkID0gbWF0Y2hlciggc2VlZCwgbnVsbCwgeG1sLCBbXSApLAoJCQkJCQlpID0gc2VlZC5sZW5ndGg7CgoJCQkJCXdoaWxlICggaS0tICkgewoJCQkJCQlpZiAoIChlbGVtID0gdW5tYXRjaGVkW2ldKSApIHsKCQkJCQkJCXNlZWRbaV0gPSAhKG1hdGNoZXNbaV0gPSBlbGVtKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0pIDoKCQkJCWZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7CgkJCQkJaW5wdXRbMF0gPSBlbGVtOwoJCQkJCW1hdGNoZXIoIGlucHV0LCBudWxsLCB4bWwsIHJlc3VsdHMgKTsKCQkJCQlyZXR1cm4gIXJlc3VsdHMucG9wKCk7CgkJCQl9OwoJCX0pLAoKCQkiaGFzIjogbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWxlY3RvciApIHsKCQkJcmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkgewoJCQkJcmV0dXJuIFNpenpsZSggc2VsZWN0b3IsIGVsZW0gKS5sZW5ndGggPiAwOwoJCQl9OwoJCX0pLAoKCQkiY29udGFpbnMiOiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHRleHQgKSB7CgkJCXJldHVybiBmdW5jdGlvbiggZWxlbSApIHsKCQkJCXJldHVybiAoIGVsZW0udGV4dENvbnRlbnQgfHwgZWxlbS5pbm5lclRleHQgfHwgZ2V0VGV4dCggZWxlbSApICkuaW5kZXhPZiggdGV4dCApID4gLTE7CgkJCX07CgkJfSksCgoJCSJsYW5nIjogbWFya0Z1bmN0aW9uKCBmdW5jdGlvbiggbGFuZyApIHsKCQkJaWYgKCAhcmlkZW50aWZpZXIudGVzdChsYW5nIHx8ICIiKSApIHsKCQkJCVNpenpsZS5lcnJvciggInVuc3VwcG9ydGVkIGxhbmc6ICIgKyBsYW5nICk7CgkJCX0KCQkJbGFuZyA9IGxhbmcucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKS50b0xvd2VyQ2FzZSgpOwoJCQlyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7CgkJCQl2YXIgZWxlbUxhbmc7CgkJCQlkbyB7CgkJCQkJaWYgKCAoZWxlbUxhbmcgPSBkb2N1bWVudElzSFRNTCA/CgkJCQkJCWVsZW0ubGFuZyA6CgkJCQkJCWVsZW0uZ2V0QXR0cmlidXRlKCJ4bWw6bGFuZyIpIHx8IGVsZW0uZ2V0QXR0cmlidXRlKCJsYW5nIikpICkgewoKCQkJCQkJZWxlbUxhbmcgPSBlbGVtTGFuZy50b0xvd2VyQ2FzZSgpOwoJCQkJCQlyZXR1cm4gZWxlbUxhbmcgPT09IGxhbmcgfHwgZWxlbUxhbmcuaW5kZXhPZiggbGFuZyArICItIiApID09PSAwOwoJCQkJCX0KCQkJCX0gd2hpbGUgKCAoZWxlbSA9IGVsZW0ucGFyZW50Tm9kZSkgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApOwoJCQkJcmV0dXJuIGZhbHNlOwoJCQl9OwoJCX0pLAoKCQkidGFyZ2V0IjogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCXZhciBoYXNoID0gd2luZG93LmxvY2F0aW9uICYmIHdpbmRvdy5sb2NhdGlvbi5oYXNoOwoJCQlyZXR1cm4gaGFzaCAmJiBoYXNoLnNsaWNlKCAxICkgPT09IGVsZW0uaWQ7CgkJfSwKCgkJInJvb3QiOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJcmV0dXJuIGVsZW0gPT09IGRvY0VsZW07CgkJfSwKCgkJImZvY3VzIjogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCXJldHVybiBlbGVtID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICYmICghZG9jdW1lbnQuaGFzRm9jdXMgfHwgZG9jdW1lbnQuaGFzRm9jdXMoKSkgJiYgISEoZWxlbS50eXBlIHx8IGVsZW0uaHJlZiB8fCB+ZWxlbS50YWJJbmRleCk7CgkJfSwKCgkJImVuYWJsZWQiOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJcmV0dXJuIGVsZW0uZGlzYWJsZWQgPT09IGZhbHNlOwoJCX0sCgoJCSJkaXNhYmxlZCI6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQlyZXR1cm4gZWxlbS5kaXNhYmxlZCA9PT0gdHJ1ZTsKCQl9LAoKCQkiY2hlY2tlZCI6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQl2YXIgbm9kZU5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CgkJCXJldHVybiAobm9kZU5hbWUgPT09ICJpbnB1dCIgJiYgISFlbGVtLmNoZWNrZWQpIHx8IChub2RlTmFtZSA9PT0gIm9wdGlvbiIgJiYgISFlbGVtLnNlbGVjdGVkKTsKCQl9LAoKCQkic2VsZWN0ZWQiOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJaWYgKCBlbGVtLnBhcmVudE5vZGUgKSB7CgkJCQllbGVtLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleDsKCQkJfQoKCQkJcmV0dXJuIGVsZW0uc2VsZWN0ZWQgPT09IHRydWU7CgkJfSwKCgkJImVtcHR5IjogZnVuY3Rpb24oIGVsZW0gKSB7CgkJCWZvciAoIGVsZW0gPSBlbGVtLmZpcnN0Q2hpbGQ7IGVsZW07IGVsZW0gPSBlbGVtLm5leHRTaWJsaW5nICkgewoJCQkJaWYgKCBlbGVtLm5vZGVUeXBlIDwgNiApIHsKCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQl9CgkJCX0KCQkJcmV0dXJuIHRydWU7CgkJfSwKCgkJInBhcmVudCI6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQlyZXR1cm4gIUV4cHIucHNldWRvc1siZW1wdHkiXSggZWxlbSApOwoJCX0sCgoJCSJoZWFkZXIiOiBmdW5jdGlvbiggZWxlbSApIHsKCQkJcmV0dXJuIHJoZWFkZXIudGVzdCggZWxlbS5ub2RlTmFtZSApOwoJCX0sCgoJCSJpbnB1dCI6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQlyZXR1cm4gcmlucHV0cy50ZXN0KCBlbGVtLm5vZGVOYW1lICk7CgkJfSwKCgkJImJ1dHRvbiI6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQl2YXIgbmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKCQkJcmV0dXJuIG5hbWUgPT09ICJpbnB1dCIgJiYgZWxlbS50eXBlID09PSAiYnV0dG9uIiB8fCBuYW1lID09PSAiYnV0dG9uIjsKCQl9LAoKCQkidGV4dCI6IGZ1bmN0aW9uKCBlbGVtICkgewoJCQl2YXIgYXR0cjsKCQkJcmV0dXJuIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gImlucHV0IiAmJgoJCQkJZWxlbS50eXBlID09PSAidGV4dCIgJiYKCgkJCQkoIChhdHRyID0gZWxlbS5nZXRBdHRyaWJ1dGUoInR5cGUiKSkgPT0gbnVsbCB8fCBhdHRyLnRvTG93ZXJDYXNlKCkgPT09ICJ0ZXh0IiApOwoJCX0sCgoJCSJmaXJzdCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oKSB7CgkJCXJldHVybiBbIDAgXTsKCQl9KSwKCgkJImxhc3QiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCApIHsKCQkJcmV0dXJuIFsgbGVuZ3RoIC0gMSBdOwoJCX0pLAoKCQkiZXEiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCwgYXJndW1lbnQgKSB7CgkJCXJldHVybiBbIGFyZ3VtZW50IDwgMCA/IGFyZ3VtZW50ICsgbGVuZ3RoIDogYXJndW1lbnQgXTsKCQl9KSwKCgkJImV2ZW4iOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCApIHsKCQkJdmFyIGkgPSAwOwoJCQlmb3IgKCA7IGkgPCBsZW5ndGg7IGkgKz0gMiApIHsKCQkJCW1hdGNoSW5kZXhlcy5wdXNoKCBpICk7CgkJCX0KCQkJcmV0dXJuIG1hdGNoSW5kZXhlczsKCQl9KSwKCgkJIm9kZCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoICkgewoJCQl2YXIgaSA9IDE7CgkJCWZvciAoIDsgaSA8IGxlbmd0aDsgaSArPSAyICkgewoJCQkJbWF0Y2hJbmRleGVzLnB1c2goIGkgKTsKCQkJfQoJCQlyZXR1cm4gbWF0Y2hJbmRleGVzOwoJCX0pLAoKCQkibHQiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCwgYXJndW1lbnQgKSB7CgkJCXZhciBpID0gYXJndW1lbnQgPCAwID8gYXJndW1lbnQgKyBsZW5ndGggOiBhcmd1bWVudDsKCQkJZm9yICggOyAtLWkgPj0gMDsgKSB7CgkJCQltYXRjaEluZGV4ZXMucHVzaCggaSApOwoJCQl9CgkJCXJldHVybiBtYXRjaEluZGV4ZXM7CgkJfSksCgoJCSJndCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoLCBhcmd1bWVudCApIHsKCQkJdmFyIGkgPSBhcmd1bWVudCA8IDAgPyBhcmd1bWVudCArIGxlbmd0aCA6IGFyZ3VtZW50OwoJCQlmb3IgKCA7ICsraSA8IGxlbmd0aDsgKSB7CgkJCQltYXRjaEluZGV4ZXMucHVzaCggaSApOwoJCQl9CgkJCXJldHVybiBtYXRjaEluZGV4ZXM7CgkJfSkKCX0KfTsKCkV4cHIucHNldWRvc1sibnRoIl0gPSBFeHByLnBzZXVkb3NbImVxIl07Cgpmb3IgKCBpIGluIHsgcmFkaW86IHRydWUsIGNoZWNrYm94OiB0cnVlLCBmaWxlOiB0cnVlLCBwYXNzd29yZDogdHJ1ZSwgaW1hZ2U6IHRydWUgfSApIHsKCUV4cHIucHNldWRvc1sgaSBdID0gY3JlYXRlSW5wdXRQc2V1ZG8oIGkgKTsKfQpmb3IgKCBpIGluIHsgc3VibWl0OiB0cnVlLCByZXNldDogdHJ1ZSB9ICkgewoJRXhwci5wc2V1ZG9zWyBpIF0gPSBjcmVhdGVCdXR0b25Qc2V1ZG8oIGkgKTsKfQoKZnVuY3Rpb24gc2V0RmlsdGVycygpIHt9CnNldEZpbHRlcnMucHJvdG90eXBlID0gRXhwci5maWx0ZXJzID0gRXhwci5wc2V1ZG9zOwpFeHByLnNldEZpbHRlcnMgPSBuZXcgc2V0RmlsdGVycygpOwoKZnVuY3Rpb24gdG9rZW5pemUoIHNlbGVjdG9yLCBwYXJzZU9ubHkgKSB7Cgl2YXIgbWF0Y2hlZCwgbWF0Y2gsIHRva2VucywgdHlwZSwKCQlzb0ZhciwgZ3JvdXBzLCBwcmVGaWx0ZXJzLAoJCWNhY2hlZCA9IHRva2VuQ2FjaGVbIHNlbGVjdG9yICsgIiAiIF07CgoJaWYgKCBjYWNoZWQgKSB7CgkJcmV0dXJuIHBhcnNlT25seSA/IDAgOiBjYWNoZWQuc2xpY2UoIDAgKTsKCX0KCglzb0ZhciA9IHNlbGVjdG9yOwoJZ3JvdXBzID0gW107CglwcmVGaWx0ZXJzID0gRXhwci5wcmVGaWx0ZXI7CgoJd2hpbGUgKCBzb0ZhciApIHsKCgkJaWYgKCAhbWF0Y2hlZCB8fCAobWF0Y2ggPSByY29tbWEuZXhlYyggc29GYXIgKSkgKSB7CgkJCWlmICggbWF0Y2ggKSB7CgkJCQlzb0ZhciA9IHNvRmFyLnNsaWNlKCBtYXRjaFswXS5sZW5ndGggKSB8fCBzb0ZhcjsKCQkJfQoJCQlncm91cHMucHVzaCggKHRva2VucyA9IFtdKSApOwoJCX0KCgkJbWF0Y2hlZCA9IGZhbHNlOwoKCQlpZiAoIChtYXRjaCA9IHJjb21iaW5hdG9ycy5leGVjKCBzb0ZhciApKSApIHsKCQkJbWF0Y2hlZCA9IG1hdGNoLnNoaWZ0KCk7CgkJCXRva2Vucy5wdXNoKHsKCQkJCXZhbHVlOiBtYXRjaGVkLAoJCQkJdHlwZTogbWF0Y2hbMF0ucmVwbGFjZSggcnRyaW0sICIgIiApCgkJCX0pOwoJCQlzb0ZhciA9IHNvRmFyLnNsaWNlKCBtYXRjaGVkLmxlbmd0aCApOwoJCX0KCgkJZm9yICggdHlwZSBpbiBFeHByLmZpbHRlciApIHsKCQkJaWYgKCAobWF0Y2ggPSBtYXRjaEV4cHJbIHR5cGUgXS5leGVjKCBzb0ZhciApKSAmJiAoIXByZUZpbHRlcnNbIHR5cGUgXSB8fAoJCQkJKG1hdGNoID0gcHJlRmlsdGVyc1sgdHlwZSBdKCBtYXRjaCApKSkgKSB7CgkJCQltYXRjaGVkID0gbWF0Y2guc2hpZnQoKTsKCQkJCXRva2Vucy5wdXNoKHsKCQkJCQl2YWx1ZTogbWF0Y2hlZCwKCQkJCQl0eXBlOiB0eXBlLAoJCQkJCW1hdGNoZXM6IG1hdGNoCgkJCQl9KTsKCQkJCXNvRmFyID0gc29GYXIuc2xpY2UoIG1hdGNoZWQubGVuZ3RoICk7CgkJCX0KCQl9CgoJCWlmICggIW1hdGNoZWQgKSB7CgkJCWJyZWFrOwoJCX0KCX0KCglyZXR1cm4gcGFyc2VPbmx5ID8KCQlzb0Zhci5sZW5ndGggOgoJCXNvRmFyID8KCQkJU2l6emxlLmVycm9yKCBzZWxlY3RvciApIDoKCQkJdG9rZW5DYWNoZSggc2VsZWN0b3IsIGdyb3VwcyApLnNsaWNlKCAwICk7Cn0KCmZ1bmN0aW9uIHRvU2VsZWN0b3IoIHRva2VucyApIHsKCXZhciBpID0gMCwKCQlsZW4gPSB0b2tlbnMubGVuZ3RoLAoJCXNlbGVjdG9yID0gIiI7Cglmb3IgKCA7IGkgPCBsZW47IGkrKyApIHsKCQlzZWxlY3RvciArPSB0b2tlbnNbaV0udmFsdWU7Cgl9CglyZXR1cm4gc2VsZWN0b3I7Cn0KCmZ1bmN0aW9uIGFkZENvbWJpbmF0b3IoIG1hdGNoZXIsIGNvbWJpbmF0b3IsIGJhc2UgKSB7Cgl2YXIgZGlyID0gY29tYmluYXRvci5kaXIsCgkJY2hlY2tOb25FbGVtZW50cyA9IGJhc2UgJiYgZGlyID09PSAicGFyZW50Tm9kZSIsCgkJZG9uZU5hbWUgPSBkb25lKys7CgoJcmV0dXJuIGNvbWJpbmF0b3IuZmlyc3QgPwoJCWZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7CgkJCXdoaWxlICggKGVsZW0gPSBlbGVtWyBkaXIgXSkgKSB7CgkJCQlpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgfHwgY2hlY2tOb25FbGVtZW50cyApIHsKCQkJCQlyZXR1cm4gbWF0Y2hlciggZWxlbSwgY29udGV4dCwgeG1sICk7CgkJCQl9CgkJCX0KCQl9IDoKCgkJZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHsKCQkJdmFyIG9sZENhY2hlLCBvdXRlckNhY2hlLAoJCQkJbmV3Q2FjaGUgPSBbIGRpcnJ1bnMsIGRvbmVOYW1lIF07CgoJCQlpZiAoIHhtbCApIHsKCQkJCXdoaWxlICggKGVsZW0gPSBlbGVtWyBkaXIgXSkgKSB7CgkJCQkJaWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7CgkJCQkJCWlmICggbWF0Y2hlciggZWxlbSwgY29udGV4dCwgeG1sICkgKSB7CgkJCQkJCQlyZXR1cm4gdHJ1ZTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfSBlbHNlIHsKCQkJCXdoaWxlICggKGVsZW0gPSBlbGVtWyBkaXIgXSkgKSB7CgkJCQkJaWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7CgkJCQkJCW91dGVyQ2FjaGUgPSBlbGVtWyBleHBhbmRvIF0gfHwgKGVsZW1bIGV4cGFuZG8gXSA9IHt9KTsKCQkJCQkJaWYgKCAob2xkQ2FjaGUgPSBvdXRlckNhY2hlWyBkaXIgXSkgJiYKCQkJCQkJCW9sZENhY2hlWyAwIF0gPT09IGRpcnJ1bnMgJiYgb2xkQ2FjaGVbIDEgXSA9PT0gZG9uZU5hbWUgKSB7CgoJCQkJCQkJcmV0dXJuIChuZXdDYWNoZVsgMiBdID0gb2xkQ2FjaGVbIDIgXSk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQlvdXRlckNhY2hlWyBkaXIgXSA9IG5ld0NhY2hlOwoKCQkJCQkJCWlmICggKG5ld0NhY2hlWyAyIF0gPSBtYXRjaGVyKCBlbGVtLCBjb250ZXh0LCB4bWwgKSkgKSB7CgkJCQkJCQkJcmV0dXJuIHRydWU7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0KCQl9Owp9CgpmdW5jdGlvbiBlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKSB7CglyZXR1cm4gbWF0Y2hlcnMubGVuZ3RoID4gMSA/CgkJZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHsKCQkJdmFyIGkgPSBtYXRjaGVycy5sZW5ndGg7CgkJCXdoaWxlICggaS0tICkgewoJCQkJaWYgKCAhbWF0Y2hlcnNbaV0oIGVsZW0sIGNvbnRleHQsIHhtbCApICkgewoJCQkJCXJldHVybiBmYWxzZTsKCQkJCX0KCQkJfQoJCQlyZXR1cm4gdHJ1ZTsKCQl9IDoKCQltYXRjaGVyc1swXTsKfQoKZnVuY3Rpb24gbXVsdGlwbGVDb250ZXh0cyggc2VsZWN0b3IsIGNvbnRleHRzLCByZXN1bHRzICkgewoJdmFyIGkgPSAwLAoJCWxlbiA9IGNvbnRleHRzLmxlbmd0aDsKCWZvciAoIDsgaSA8IGxlbjsgaSsrICkgewoJCVNpenpsZSggc2VsZWN0b3IsIGNvbnRleHRzW2ldLCByZXN1bHRzICk7Cgl9CglyZXR1cm4gcmVzdWx0czsKfQoKZnVuY3Rpb24gY29uZGVuc2UoIHVubWF0Y2hlZCwgbWFwLCBmaWx0ZXIsIGNvbnRleHQsIHhtbCApIHsKCXZhciBlbGVtLAoJCW5ld1VubWF0Y2hlZCA9IFtdLAoJCWkgPSAwLAoJCWxlbiA9IHVubWF0Y2hlZC5sZW5ndGgsCgkJbWFwcGVkID0gbWFwICE9IG51bGw7CgoJZm9yICggOyBpIDwgbGVuOyBpKysgKSB7CgkJaWYgKCAoZWxlbSA9IHVubWF0Y2hlZFtpXSkgKSB7CgkJCWlmICggIWZpbHRlciB8fCBmaWx0ZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApICkgewoJCQkJbmV3VW5tYXRjaGVkLnB1c2goIGVsZW0gKTsKCQkJCWlmICggbWFwcGVkICkgewoJCQkJCW1hcC5wdXNoKCBpICk7CgkJCQl9CgkJCX0KCQl9Cgl9CgoJcmV0dXJuIG5ld1VubWF0Y2hlZDsKfQoKZnVuY3Rpb24gc2V0TWF0Y2hlciggcHJlRmlsdGVyLCBzZWxlY3RvciwgbWF0Y2hlciwgcG9zdEZpbHRlciwgcG9zdEZpbmRlciwgcG9zdFNlbGVjdG9yICkgewoJaWYgKCBwb3N0RmlsdGVyICYmICFwb3N0RmlsdGVyWyBleHBhbmRvIF0gKSB7CgkJcG9zdEZpbHRlciA9IHNldE1hdGNoZXIoIHBvc3RGaWx0ZXIgKTsKCX0KCWlmICggcG9zdEZpbmRlciAmJiAhcG9zdEZpbmRlclsgZXhwYW5kbyBdICkgewoJCXBvc3RGaW5kZXIgPSBzZXRNYXRjaGVyKCBwb3N0RmluZGVyLCBwb3N0U2VsZWN0b3IgKTsKCX0KCXJldHVybiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlZWQsIHJlc3VsdHMsIGNvbnRleHQsIHhtbCApIHsKCQl2YXIgdGVtcCwgaSwgZWxlbSwKCQkJcHJlTWFwID0gW10sCgkJCXBvc3RNYXAgPSBbXSwKCQkJcHJlZXhpc3RpbmcgPSByZXN1bHRzLmxlbmd0aCwKCgkJCWVsZW1zID0gc2VlZCB8fCBtdWx0aXBsZUNvbnRleHRzKCBzZWxlY3RvciB8fCAiKiIsIGNvbnRleHQubm9kZVR5cGUgPyBbIGNvbnRleHQgXSA6IGNvbnRleHQsIFtdICksCgoJCQltYXRjaGVySW4gPSBwcmVGaWx0ZXIgJiYgKCBzZWVkIHx8ICFzZWxlY3RvciApID8KCQkJCWNvbmRlbnNlKCBlbGVtcywgcHJlTWFwLCBwcmVGaWx0ZXIsIGNvbnRleHQsIHhtbCApIDoKCQkJCWVsZW1zLAoKCQkJbWF0Y2hlck91dCA9IG1hdGNoZXIgPwoJCQkJcG9zdEZpbmRlciB8fCAoIHNlZWQgPyBwcmVGaWx0ZXIgOiBwcmVleGlzdGluZyB8fCBwb3N0RmlsdGVyICkgPwoKCQkJCQlbXSA6CgoJCQkJCXJlc3VsdHMgOgoJCQkJbWF0Y2hlckluOwoKCQlpZiAoIG1hdGNoZXIgKSB7CgkJCW1hdGNoZXIoIG1hdGNoZXJJbiwgbWF0Y2hlck91dCwgY29udGV4dCwgeG1sICk7CgkJfQoKCQlpZiAoIHBvc3RGaWx0ZXIgKSB7CgkJCXRlbXAgPSBjb25kZW5zZSggbWF0Y2hlck91dCwgcG9zdE1hcCApOwoJCQlwb3N0RmlsdGVyKCB0ZW1wLCBbXSwgY29udGV4dCwgeG1sICk7CgoJCQlpID0gdGVtcC5sZW5ndGg7CgkJCXdoaWxlICggaS0tICkgewoJCQkJaWYgKCAoZWxlbSA9IHRlbXBbaV0pICkgewoJCQkJCW1hdGNoZXJPdXRbIHBvc3RNYXBbaV0gXSA9ICEobWF0Y2hlckluWyBwb3N0TWFwW2ldIF0gPSBlbGVtKTsKCQkJCX0KCQkJfQoJCX0KCgkJaWYgKCBzZWVkICkgewoJCQlpZiAoIHBvc3RGaW5kZXIgfHwgcHJlRmlsdGVyICkgewoJCQkJaWYgKCBwb3N0RmluZGVyICkgewoJCQkJCXRlbXAgPSBbXTsKCQkJCQlpID0gbWF0Y2hlck91dC5sZW5ndGg7CgkJCQkJd2hpbGUgKCBpLS0gKSB7CgkJCQkJCWlmICggKGVsZW0gPSBtYXRjaGVyT3V0W2ldKSApIHsKCQkJCQkJCXRlbXAucHVzaCggKG1hdGNoZXJJbltpXSA9IGVsZW0pICk7CgkJCQkJCX0KCQkJCQl9CgkJCQkJcG9zdEZpbmRlciggbnVsbCwgKG1hdGNoZXJPdXQgPSBbXSksIHRlbXAsIHhtbCApOwoJCQkJfQoKCQkJCWkgPSBtYXRjaGVyT3V0Lmxlbmd0aDsKCQkJCXdoaWxlICggaS0tICkgewoJCQkJCWlmICggKGVsZW0gPSBtYXRjaGVyT3V0W2ldKSAmJgoJCQkJCQkodGVtcCA9IHBvc3RGaW5kZXIgPyBpbmRleE9mLmNhbGwoIHNlZWQsIGVsZW0gKSA6IHByZU1hcFtpXSkgPiAtMSApIHsKCgkJCQkJCXNlZWRbdGVtcF0gPSAhKHJlc3VsdHNbdGVtcF0gPSBlbGVtKTsKCQkJCQl9CgkJCQl9CgkJCX0KCgkJfSBlbHNlIHsKCQkJbWF0Y2hlck91dCA9IGNvbmRlbnNlKAoJCQkJbWF0Y2hlck91dCA9PT0gcmVzdWx0cyA/CgkJCQkJbWF0Y2hlck91dC5zcGxpY2UoIHByZWV4aXN0aW5nLCBtYXRjaGVyT3V0Lmxlbmd0aCApIDoKCQkJCQltYXRjaGVyT3V0CgkJCSk7CgkJCWlmICggcG9zdEZpbmRlciApIHsKCQkJCXBvc3RGaW5kZXIoIG51bGwsIHJlc3VsdHMsIG1hdGNoZXJPdXQsIHhtbCApOwoJCQl9IGVsc2UgewoJCQkJcHVzaC5hcHBseSggcmVzdWx0cywgbWF0Y2hlck91dCApOwoJCQl9CgkJfQoJfSk7Cn0KCmZ1bmN0aW9uIG1hdGNoZXJGcm9tVG9rZW5zKCB0b2tlbnMgKSB7Cgl2YXIgY2hlY2tDb250ZXh0LCBtYXRjaGVyLCBqLAoJCWxlbiA9IHRva2Vucy5sZW5ndGgsCgkJbGVhZGluZ1JlbGF0aXZlID0gRXhwci5yZWxhdGl2ZVsgdG9rZW5zWzBdLnR5cGUgXSwKCQlpbXBsaWNpdFJlbGF0aXZlID0gbGVhZGluZ1JlbGF0aXZlIHx8IEV4cHIucmVsYXRpdmVbIiAiXSwKCQlpID0gbGVhZGluZ1JlbGF0aXZlID8gMSA6IDAsCgoJCW1hdGNoQ29udGV4dCA9IGFkZENvbWJpbmF0b3IoIGZ1bmN0aW9uKCBlbGVtICkgewoJCQlyZXR1cm4gZWxlbSA9PT0gY2hlY2tDb250ZXh0OwoJCX0sIGltcGxpY2l0UmVsYXRpdmUsIHRydWUgKSwKCQltYXRjaEFueUNvbnRleHQgPSBhZGRDb21iaW5hdG9yKCBmdW5jdGlvbiggZWxlbSApIHsKCQkJcmV0dXJuIGluZGV4T2YuY2FsbCggY2hlY2tDb250ZXh0LCBlbGVtICkgPiAtMTsKCQl9LCBpbXBsaWNpdFJlbGF0aXZlLCB0cnVlICksCgkJbWF0Y2hlcnMgPSBbIGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7CgkJCXJldHVybiAoICFsZWFkaW5nUmVsYXRpdmUgJiYgKCB4bWwgfHwgY29udGV4dCAhPT0gb3V0ZXJtb3N0Q29udGV4dCApICkgfHwgKAoJCQkJKGNoZWNrQ29udGV4dCA9IGNvbnRleHQpLm5vZGVUeXBlID8KCQkJCQltYXRjaENvbnRleHQoIGVsZW0sIGNvbnRleHQsIHhtbCApIDoKCQkJCQltYXRjaEFueUNvbnRleHQoIGVsZW0sIGNvbnRleHQsIHhtbCApICk7CgkJfSBdOwoKCWZvciAoIDsgaSA8IGxlbjsgaSsrICkgewoJCWlmICggKG1hdGNoZXIgPSBFeHByLnJlbGF0aXZlWyB0b2tlbnNbaV0udHlwZSBdKSApIHsKCQkJbWF0Y2hlcnMgPSBbIGFkZENvbWJpbmF0b3IoZWxlbWVudE1hdGNoZXIoIG1hdGNoZXJzICksIG1hdGNoZXIpIF07CgkJfSBlbHNlIHsKCQkJbWF0Y2hlciA9IEV4cHIuZmlsdGVyWyB0b2tlbnNbaV0udHlwZSBdLmFwcGx5KCBudWxsLCB0b2tlbnNbaV0ubWF0Y2hlcyApOwoKCQkJaWYgKCBtYXRjaGVyWyBleHBhbmRvIF0gKSB7CgkJCQlqID0gKytpOwoJCQkJZm9yICggOyBqIDwgbGVuOyBqKysgKSB7CgkJCQkJaWYgKCBFeHByLnJlbGF0aXZlWyB0b2tlbnNbal0udHlwZSBdICkgewoJCQkJCQlicmVhazsKCQkJCQl9CgkJCQl9CgkJCQlyZXR1cm4gc2V0TWF0Y2hlcigKCQkJCQlpID4gMSAmJiBlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKSwKCQkJCQlpID4gMSAmJiB0b1NlbGVjdG9yKAoJCQkJCQl0b2tlbnMuc2xpY2UoIDAsIGkgLSAxICkuY29uY2F0KHsgdmFsdWU6IHRva2Vuc1sgaSAtIDIgXS50eXBlID09PSAiICIgPyAiKiIgOiAiIiB9KQoJCQkJCSkucmVwbGFjZSggcnRyaW0sICIkMSIgKSwKCQkJCQltYXRjaGVyLAoJCQkJCWkgPCBqICYmIG1hdGNoZXJGcm9tVG9rZW5zKCB0b2tlbnMuc2xpY2UoIGksIGogKSApLAoJCQkJCWogPCBsZW4gJiYgbWF0Y2hlckZyb21Ub2tlbnMoICh0b2tlbnMgPSB0b2tlbnMuc2xpY2UoIGogKSkgKSwKCQkJCQlqIDwgbGVuICYmIHRvU2VsZWN0b3IoIHRva2VucyApCgkJCQkpOwoJCQl9CgkJCW1hdGNoZXJzLnB1c2goIG1hdGNoZXIgKTsKCQl9Cgl9CgoJcmV0dXJuIGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApOwp9CgpmdW5jdGlvbiBtYXRjaGVyRnJvbUdyb3VwTWF0Y2hlcnMoIGVsZW1lbnRNYXRjaGVycywgc2V0TWF0Y2hlcnMgKSB7Cgl2YXIgYnlTZXQgPSBzZXRNYXRjaGVycy5sZW5ndGggPiAwLAoJCWJ5RWxlbWVudCA9IGVsZW1lbnRNYXRjaGVycy5sZW5ndGggPiAwLAoJCXN1cGVyTWF0Y2hlciA9IGZ1bmN0aW9uKCBzZWVkLCBjb250ZXh0LCB4bWwsIHJlc3VsdHMsIG91dGVybW9zdCApIHsKCQkJdmFyIGVsZW0sIGosIG1hdGNoZXIsCgkJCQltYXRjaGVkQ291bnQgPSAwLAoJCQkJaSA9ICIwIiwKCQkJCXVubWF0Y2hlZCA9IHNlZWQgJiYgW10sCgkJCQlzZXRNYXRjaGVkID0gW10sCgkJCQljb250ZXh0QmFja3VwID0gb3V0ZXJtb3N0Q29udGV4dCwKCQkJCWVsZW1zID0gc2VlZCB8fCBieUVsZW1lbnQgJiYgRXhwci5maW5kWyJUQUciXSggIioiLCBvdXRlcm1vc3QgKSwKCQkJCWRpcnJ1bnNVbmlxdWUgPSAoZGlycnVucyArPSBjb250ZXh0QmFja3VwID09IG51bGwgPyAxIDogTWF0aC5yYW5kb20oKSB8fCAwLjEpLAoJCQkJbGVuID0gZWxlbXMubGVuZ3RoOwoKCQkJaWYgKCBvdXRlcm1vc3QgKSB7CgkJCQlvdXRlcm1vc3RDb250ZXh0ID0gY29udGV4dCAhPT0gZG9jdW1lbnQgJiYgY29udGV4dDsKCQkJfQoKCQkJZm9yICggOyBpICE9PSBsZW4gJiYgKGVsZW0gPSBlbGVtc1tpXSkgIT0gbnVsbDsgaSsrICkgewoJCQkJaWYgKCBieUVsZW1lbnQgJiYgZWxlbSApIHsKCQkJCQlqID0gMDsKCQkJCQl3aGlsZSAoIChtYXRjaGVyID0gZWxlbWVudE1hdGNoZXJzW2orK10pICkgewoJCQkJCQlpZiAoIG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApICkgewoJCQkJCQkJcmVzdWx0cy5wdXNoKCBlbGVtICk7CgkJCQkJCQlicmVhazsKCQkJCQkJfQoJCQkJCX0KCQkJCQlpZiAoIG91dGVybW9zdCApIHsKCQkJCQkJZGlycnVucyA9IGRpcnJ1bnNVbmlxdWU7CgkJCQkJfQoJCQkJfQoKCQkJCWlmICggYnlTZXQgKSB7CgkJCQkJaWYgKCAoZWxlbSA9ICFtYXRjaGVyICYmIGVsZW0pICkgewoJCQkJCQltYXRjaGVkQ291bnQtLTsKCQkJCQl9CgoJCQkJCWlmICggc2VlZCApIHsKCQkJCQkJdW5tYXRjaGVkLnB1c2goIGVsZW0gKTsKCQkJCQl9CgkJCQl9CgkJCX0KCgkJCW1hdGNoZWRDb3VudCArPSBpOwoJCQlpZiAoIGJ5U2V0ICYmIGkgIT09IG1hdGNoZWRDb3VudCApIHsKCQkJCWogPSAwOwoJCQkJd2hpbGUgKCAobWF0Y2hlciA9IHNldE1hdGNoZXJzW2orK10pICkgewoJCQkJCW1hdGNoZXIoIHVubWF0Y2hlZCwgc2V0TWF0Y2hlZCwgY29udGV4dCwgeG1sICk7CgkJCQl9CgoJCQkJaWYgKCBzZWVkICkgewoJCQkJCWlmICggbWF0Y2hlZENvdW50ID4gMCApIHsKCQkJCQkJd2hpbGUgKCBpLS0gKSB7CgkJCQkJCQlpZiAoICEodW5tYXRjaGVkW2ldIHx8IHNldE1hdGNoZWRbaV0pICkgewoJCQkJCQkJCXNldE1hdGNoZWRbaV0gPSBwb3AuY2FsbCggcmVzdWx0cyApOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoKCQkJCQlzZXRNYXRjaGVkID0gY29uZGVuc2UoIHNldE1hdGNoZWQgKTsKCQkJCX0KCgkJCQlwdXNoLmFwcGx5KCByZXN1bHRzLCBzZXRNYXRjaGVkICk7CgoJCQkJaWYgKCBvdXRlcm1vc3QgJiYgIXNlZWQgJiYgc2V0TWF0Y2hlZC5sZW5ndGggPiAwICYmCgkJCQkJKCBtYXRjaGVkQ291bnQgKyBzZXRNYXRjaGVycy5sZW5ndGggKSA+IDEgKSB7CgoJCQkJCVNpenpsZS51bmlxdWVTb3J0KCByZXN1bHRzICk7CgkJCQl9CgkJCX0KCgkJCWlmICggb3V0ZXJtb3N0ICkgewoJCQkJZGlycnVucyA9IGRpcnJ1bnNVbmlxdWU7CgkJCQlvdXRlcm1vc3RDb250ZXh0ID0gY29udGV4dEJhY2t1cDsKCQkJfQoKCQkJcmV0dXJuIHVubWF0Y2hlZDsKCQl9OwoKCXJldHVybiBieVNldCA/CgkJbWFya0Z1bmN0aW9uKCBzdXBlck1hdGNoZXIgKSA6CgkJc3VwZXJNYXRjaGVyOwp9Cgpjb21waWxlID0gU2l6emxlLmNvbXBpbGUgPSBmdW5jdGlvbiggc2VsZWN0b3IsIG1hdGNoIC8qIEludGVybmFsIFVzZSBPbmx5ICovICkgewoJdmFyIGksCgkJc2V0TWF0Y2hlcnMgPSBbXSwKCQllbGVtZW50TWF0Y2hlcnMgPSBbXSwKCQljYWNoZWQgPSBjb21waWxlckNhY2hlWyBzZWxlY3RvciArICIgIiBdOwoKCWlmICggIWNhY2hlZCApIHsKCQlpZiAoICFtYXRjaCApIHsKCQkJbWF0Y2ggPSB0b2tlbml6ZSggc2VsZWN0b3IgKTsKCQl9CgkJaSA9IG1hdGNoLmxlbmd0aDsKCQl3aGlsZSAoIGktLSApIHsKCQkJY2FjaGVkID0gbWF0Y2hlckZyb21Ub2tlbnMoIG1hdGNoW2ldICk7CgkJCWlmICggY2FjaGVkWyBleHBhbmRvIF0gKSB7CgkJCQlzZXRNYXRjaGVycy5wdXNoKCBjYWNoZWQgKTsKCQkJfSBlbHNlIHsKCQkJCWVsZW1lbnRNYXRjaGVycy5wdXNoKCBjYWNoZWQgKTsKCQkJfQoJCX0KCgkJY2FjaGVkID0gY29tcGlsZXJDYWNoZSggc2VsZWN0b3IsIG1hdGNoZXJGcm9tR3JvdXBNYXRjaGVycyggZWxlbWVudE1hdGNoZXJzLCBzZXRNYXRjaGVycyApICk7CgoJCWNhY2hlZC5zZWxlY3RvciA9IHNlbGVjdG9yOwoJfQoJcmV0dXJuIGNhY2hlZDsKfTsKCi8qKgogKiBBIGxvdy1sZXZlbCBzZWxlY3Rpb24gZnVuY3Rpb24gdGhhdCB3b3JrcyB3aXRoIFNpenpsZSdzIGNvbXBpbGVkCiAqICBzZWxlY3RvciBmdW5jdGlvbnMKICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IHNlbGVjdG9yIEEgc2VsZWN0b3Igb3IgYSBwcmUtY29tcGlsZWQKICogIHNlbGVjdG9yIGZ1bmN0aW9uIGJ1aWx0IHdpdGggU2l6emxlLmNvbXBpbGUKICogQHBhcmFtIHtFbGVtZW50fSBjb250ZXh0CiAqIEBwYXJhbSB7QXJyYXl9IFtyZXN1bHRzXQogKiBAcGFyYW0ge0FycmF5fSBbc2VlZF0gQSBzZXQgb2YgZWxlbWVudHMgdG8gbWF0Y2ggYWdhaW5zdAogKi8Kc2VsZWN0ID0gU2l6emxlLnNlbGVjdCA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApIHsKCXZhciBpLCB0b2tlbnMsIHRva2VuLCB0eXBlLCBmaW5kLAoJCWNvbXBpbGVkID0gdHlwZW9mIHNlbGVjdG9yID09PSAiZnVuY3Rpb24iICYmIHNlbGVjdG9yLAoJCW1hdGNoID0gIXNlZWQgJiYgdG9rZW5pemUoIChzZWxlY3RvciA9IGNvbXBpbGVkLnNlbGVjdG9yIHx8IHNlbGVjdG9yKSApOwoKCXJlc3VsdHMgPSByZXN1bHRzIHx8IFtdOwoKCWlmICggbWF0Y2gubGVuZ3RoID09PSAxICkgewoKCQl0b2tlbnMgPSBtYXRjaFswXSA9IG1hdGNoWzBdLnNsaWNlKCAwICk7CgkJaWYgKCB0b2tlbnMubGVuZ3RoID4gMiAmJiAodG9rZW4gPSB0b2tlbnNbMF0pLnR5cGUgPT09ICJJRCIgJiYKCQkJCXN1cHBvcnQuZ2V0QnlJZCAmJiBjb250ZXh0Lm5vZGVUeXBlID09PSA5ICYmIGRvY3VtZW50SXNIVE1MICYmCgkJCQlFeHByLnJlbGF0aXZlWyB0b2tlbnNbMV0udHlwZSBdICkgewoKCQkJY29udGV4dCA9ICggRXhwci5maW5kWyJJRCJdKCB0b2tlbi5tYXRjaGVzWzBdLnJlcGxhY2UocnVuZXNjYXBlLCBmdW5lc2NhcGUpLCBjb250ZXh0ICkgfHwgW10gKVswXTsKCQkJaWYgKCAhY29udGV4dCApIHsKCQkJCXJldHVybiByZXN1bHRzOwoKCQkJfSBlbHNlIGlmICggY29tcGlsZWQgKSB7CgkJCQljb250ZXh0ID0gY29udGV4dC5wYXJlbnROb2RlOwoJCQl9CgoJCQlzZWxlY3RvciA9IHNlbGVjdG9yLnNsaWNlKCB0b2tlbnMuc2hpZnQoKS52YWx1ZS5sZW5ndGggKTsKCQl9CgoJCWkgPSBtYXRjaEV4cHJbIm5lZWRzQ29udGV4dCJdLnRlc3QoIHNlbGVjdG9yICkgPyAwIDogdG9rZW5zLmxlbmd0aDsKCQl3aGlsZSAoIGktLSApIHsKCQkJdG9rZW4gPSB0b2tlbnNbaV07CgoJCQlpZiAoIEV4cHIucmVsYXRpdmVbICh0eXBlID0gdG9rZW4udHlwZSkgXSApIHsKCQkJCWJyZWFrOwoJCQl9CgkJCWlmICggKGZpbmQgPSBFeHByLmZpbmRbIHR5cGUgXSkgKSB7CgkJCQlpZiAoIChzZWVkID0gZmluZCgKCQkJCQl0b2tlbi5tYXRjaGVzWzBdLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICksCgkJCQkJcnNpYmxpbmcudGVzdCggdG9rZW5zWzBdLnR5cGUgKSAmJiB0ZXN0Q29udGV4dCggY29udGV4dC5wYXJlbnROb2RlICkgfHwgY29udGV4dAoJCQkJKSkgKSB7CgoJCQkJCXRva2Vucy5zcGxpY2UoIGksIDEgKTsKCQkJCQlzZWxlY3RvciA9IHNlZWQubGVuZ3RoICYmIHRvU2VsZWN0b3IoIHRva2VucyApOwoJCQkJCWlmICggIXNlbGVjdG9yICkgewoJCQkJCQlwdXNoLmFwcGx5KCByZXN1bHRzLCBzZWVkICk7CgkJCQkJCXJldHVybiByZXN1bHRzOwoJCQkJCX0KCgkJCQkJYnJlYWs7CgkJCQl9CgkJCX0KCQl9Cgl9CgoJKCBjb21waWxlZCB8fCBjb21waWxlKCBzZWxlY3RvciwgbWF0Y2ggKSApKAoJCXNlZWQsCgkJY29udGV4dCwKCQkhZG9jdW1lbnRJc0hUTUwsCgkJcmVzdWx0cywKCQlyc2libGluZy50ZXN0KCBzZWxlY3RvciApICYmIHRlc3RDb250ZXh0KCBjb250ZXh0LnBhcmVudE5vZGUgKSB8fCBjb250ZXh0CgkpOwoJcmV0dXJuIHJlc3VsdHM7Cn07CgoKc3VwcG9ydC5zb3J0U3RhYmxlID0gZXhwYW5kby5zcGxpdCgiIikuc29ydCggc29ydE9yZGVyICkuam9pbigiIikgPT09IGV4cGFuZG87CgpzdXBwb3J0LmRldGVjdER1cGxpY2F0ZXMgPSAhIWhhc0R1cGxpY2F0ZTsKCnNldERvY3VtZW50KCk7CgpzdXBwb3J0LnNvcnREZXRhY2hlZCA9IGFzc2VydChmdW5jdGlvbiggZGl2MSApIHsKCXJldHVybiBkaXYxLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSApICYgMTsKfSk7CgppZiAoICFhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHsKCWRpdi5pbm5lckhUTUwgPSAiPGEgaHJlZj0nIyc+PC9hPiI7CglyZXR1cm4gZGl2LmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJocmVmIikgPT09ICIjIiA7Cn0pICkgewoJYWRkSGFuZGxlKCAidHlwZXxocmVmfGhlaWdodHx3aWR0aCIsIGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHsKCQlpZiAoICFpc1hNTCApIHsKCQkJcmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lLCBuYW1lLnRvTG93ZXJDYXNlKCkgPT09ICJ0eXBlIiA/IDEgOiAyICk7CgkJfQoJfSk7Cn0KCmlmICggIXN1cHBvcnQuYXR0cmlidXRlcyB8fCAhYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7CglkaXYuaW5uZXJIVE1MID0gIjxpbnB1dC8+IjsKCWRpdi5maXJzdENoaWxkLnNldEF0dHJpYnV0ZSggInZhbHVlIiwgIiIgKTsKCXJldHVybiBkaXYuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoICJ2YWx1ZSIgKSA9PT0gIiI7Cn0pICkgewoJYWRkSGFuZGxlKCAidmFsdWUiLCBmdW5jdGlvbiggZWxlbSwgbmFtZSwgaXNYTUwgKSB7CgkJaWYgKCAhaXNYTUwgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAiaW5wdXQiICkgewoJCQlyZXR1cm4gZWxlbS5kZWZhdWx0VmFsdWU7CgkJfQoJfSk7Cn0KCmlmICggIWFzc2VydChmdW5jdGlvbiggZGl2ICkgewoJcmV0dXJuIGRpdi5nZXRBdHRyaWJ1dGUoImRpc2FibGVkIikgPT0gbnVsbDsKfSkgKSB7CglhZGRIYW5kbGUoIGJvb2xlYW5zLCBmdW5jdGlvbiggZWxlbSwgbmFtZSwgaXNYTUwgKSB7CgkJdmFyIHZhbDsKCQlpZiAoICFpc1hNTCApIHsKCQkJcmV0dXJuIGVsZW1bIG5hbWUgXSA9PT0gdHJ1ZSA/IG5hbWUudG9Mb3dlckNhc2UoKSA6CgkJCQkJKHZhbCA9IGVsZW0uZ2V0QXR0cmlidXRlTm9kZSggbmFtZSApKSAmJiB2YWwuc3BlY2lmaWVkID8KCQkJCQl2YWwudmFsdWUgOgoJCQkJbnVsbDsKCQl9Cgl9KTsKfQoKaWYgKCB0eXBlb2YgZGVmaW5lID09PSAiZnVuY3Rpb24iICYmIGRlZmluZS5hbWQgKSB7CglkZWZpbmUoZnVuY3Rpb24oKSB7IHJldHVybiBTaXp6bGU7IH0pOwp9IGVsc2UgaWYgKCB0eXBlb2YgbW9kdWxlICE9PSAidW5kZWZpbmVkIiAmJiBtb2R1bGUuZXhwb3J0cyApIHsKCW1vZHVsZS5leHBvcnRzID0gU2l6emxlOwp9IGVsc2UgewoJd2luZG93LlNpenpsZSA9IFNpenpsZTsKfQoKfSkoIHdpbmRvdyApOwoKOyhmdW5jdGlvbigpIHsKICBpZiAodHlwZW9mIFNpenpsZSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgIHJldHVybjsKICB9CgogIGlmICh0eXBlb2YgZGVmaW5lICE9PSAndW5kZWZpbmVkJyAmJiBkZWZpbmUuYW1kKSB7CiAgICB3aW5kb3cuU2l6emxlID0gUHJvdG90eXBlLl9hY3R1YWxfc2l6emxlOwogICAgd2luZG93LmRlZmluZSA9IFByb3RvdHlwZS5fb3JpZ2luYWxfZGVmaW5lOwogICAgZGVsZXRlIFByb3RvdHlwZS5fYWN0dWFsX3NpenpsZTsKICAgIGRlbGV0ZSBQcm90b3R5cGUuX29yaWdpbmFsX2RlZmluZTsKICB9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7CiAgICB3aW5kb3cuU2l6emxlID0gbW9kdWxlLmV4cG9ydHM7CiAgICBtb2R1bGUuZXhwb3J0cyA9IHt9OwogIH0KfSkoKTsKCjsoZnVuY3Rpb24oZW5naW5lKSB7CiAgdmFyIGV4dGVuZEVsZW1lbnRzID0gUHJvdG90eXBlLlNlbGVjdG9yLmV4dGVuZEVsZW1lbnRzOwoKICBmdW5jdGlvbiBzZWxlY3Qoc2VsZWN0b3IsIHNjb3BlKSB7CiAgICByZXR1cm4gZXh0ZW5kRWxlbWVudHMoZW5naW5lKHNlbGVjdG9yLCBzY29wZSB8fCBkb2N1bWVudCkpOwogIH0KCiAgZnVuY3Rpb24gbWF0Y2goZWxlbWVudCwgc2VsZWN0b3IpIHsKICAgIHJldHVybiBlbmdpbmUubWF0Y2hlcyhzZWxlY3RvciwgW2VsZW1lbnRdKS5sZW5ndGggPT0gMTsKICB9CgogIFByb3RvdHlwZS5TZWxlY3Rvci5lbmdpbmUgPSBlbmdpbmU7CiAgUHJvdG90eXBlLlNlbGVjdG9yLnNlbGVjdCA9IHNlbGVjdDsKICBQcm90b3R5cGUuU2VsZWN0b3IubWF0Y2ggPSBtYXRjaDsKfSkoU2l6emxlKTsKCndpbmRvdy5TaXp6bGUgPSBQcm90b3R5cGUuX29yaWdpbmFsX3Byb3BlcnR5OwpkZWxldGUgUHJvdG90eXBlLl9vcmlnaW5hbF9wcm9wZXJ0eTsKCnZhciBGb3JtID0gewogIHJlc2V0OiBmdW5jdGlvbihmb3JtKSB7CiAgICBmb3JtID0gJChmb3JtKTsKICAgIGZvcm0ucmVzZXQoKTsKICAgIHJldHVybiBmb3JtOwogIH0sCgogIHNlcmlhbGl6ZUVsZW1lbnRzOiBmdW5jdGlvbihlbGVtZW50cywgb3B0aW9ucykgewogICAgaWYgKHR5cGVvZiBvcHRpb25zICE9ICdvYmplY3QnKSBvcHRpb25zID0geyBoYXNoOiAhIW9wdGlvbnMgfTsKICAgIGVsc2UgaWYgKE9iamVjdC5pc1VuZGVmaW5lZChvcHRpb25zLmhhc2gpKSBvcHRpb25zLmhhc2ggPSB0cnVlOwogICAgdmFyIGtleSwgdmFsdWUsIHN1Ym1pdHRlZCA9IGZhbHNlLCBzdWJtaXQgPSBvcHRpb25zLnN1Ym1pdCwgYWNjdW11bGF0b3IsIGluaXRpYWw7CgogICAgaWYgKG9wdGlvbnMuaGFzaCkgewogICAgICBpbml0aWFsID0ge307CiAgICAgIGFjY3VtdWxhdG9yID0gZnVuY3Rpb24ocmVzdWx0LCBrZXksIHZhbHVlKSB7CiAgICAgICAgaWYgKGtleSBpbiByZXN1bHQpIHsKICAgICAgICAgIGlmICghT2JqZWN0LmlzQXJyYXkocmVzdWx0W2tleV0pKSByZXN1bHRba2V5XSA9IFtyZXN1bHRba2V5XV07CiAgICAgICAgICByZXN1bHRba2V5XSA9IHJlc3VsdFtrZXldLmNvbmNhdCh2YWx1ZSk7CiAgICAgICAgfSBlbHNlIHJlc3VsdFtrZXldID0gdmFsdWU7CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgfTsKICAgIH0gZWxzZSB7CiAgICAgIGluaXRpYWwgPSAnJzsKICAgICAgYWNjdW11bGF0b3IgPSBmdW5jdGlvbihyZXN1bHQsIGtleSwgdmFsdWVzKSB7CiAgICAgICAgaWYgKCFPYmplY3QuaXNBcnJheSh2YWx1ZXMpKSB7dmFsdWVzID0gW3ZhbHVlc107fQogICAgICAgIGlmICghdmFsdWVzLmxlbmd0aCkge3JldHVybiByZXN1bHQ7fQogICAgICAgIHZhciBlbmNvZGVkS2V5ID0gZW5jb2RlVVJJQ29tcG9uZW50KGtleSkuZ3N1YigvJTIwLywgJysnKTsKICAgICAgICByZXR1cm4gcmVzdWx0ICsgKHJlc3VsdCA/ICImIiA6ICIiKSArIHZhbHVlcy5tYXAoZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICB2YWx1ZSA9IHZhbHVlLmdzdWIoLyhccik/XG4vLCAnXHJcbicpOwogICAgICAgICAgdmFsdWUgPSBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpOwogICAgICAgICAgdmFsdWUgPSB2YWx1ZS5nc3ViKC8lMjAvLCAnKycpOwogICAgICAgICAgcmV0dXJuIGVuY29kZWRLZXkgKyAiPSIgKyB2YWx1ZTsKICAgICAgICB9KS5qb2luKCImIik7CiAgICAgIH07CiAgICB9CgogICAgcmV0dXJuIGVsZW1lbnRzLmluamVjdChpbml0aWFsLCBmdW5jdGlvbihyZXN1bHQsIGVsZW1lbnQpIHsKICAgICAgaWYgKCFlbGVtZW50LmRpc2FibGVkICYmIGVsZW1lbnQubmFtZSkgewogICAgICAgIGtleSA9IGVsZW1lbnQubmFtZTsgdmFsdWUgPSAkKGVsZW1lbnQpLmdldFZhbHVlKCk7CiAgICAgICAgaWYgKHZhbHVlICE9IG51bGwgJiYgZWxlbWVudC50eXBlICE9ICdmaWxlJyAmJiAoZWxlbWVudC50eXBlICE9ICdzdWJtaXQnIHx8ICghc3VibWl0dGVkICYmCiAgICAgICAgICAgIHN1Ym1pdCAhPT0gZmFsc2UgJiYgKCFzdWJtaXQgfHwga2V5ID09IHN1Ym1pdCkgJiYgKHN1Ym1pdHRlZCA9IHRydWUpKSkpIHsKICAgICAgICAgIHJlc3VsdCA9IGFjY3VtdWxhdG9yKHJlc3VsdCwga2V5LCB2YWx1ZSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9KTsKICB9Cn07CgpGb3JtLk1ldGhvZHMgPSB7CiAgc2VyaWFsaXplOiBmdW5jdGlvbihmb3JtLCBvcHRpb25zKSB7CiAgICByZXR1cm4gRm9ybS5zZXJpYWxpemVFbGVtZW50cyhGb3JtLmdldEVsZW1lbnRzKGZvcm0pLCBvcHRpb25zKTsKICB9LAoKCiAgZ2V0RWxlbWVudHM6IGZ1bmN0aW9uKGZvcm0pIHsKICAgIHZhciBlbGVtZW50cyA9ICQoZm9ybSkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJyonKTsKICAgIHZhciBlbGVtZW50LCByZXN1bHRzID0gW10sIHNlcmlhbGl6ZXJzID0gRm9ybS5FbGVtZW50LlNlcmlhbGl6ZXJzOwoKICAgIGZvciAodmFyIGkgPSAwOyBlbGVtZW50ID0gZWxlbWVudHNbaV07IGkrKykgewogICAgICBpZiAoc2VyaWFsaXplcnNbZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCldKQogICAgICAgIHJlc3VsdHMucHVzaChFbGVtZW50LmV4dGVuZChlbGVtZW50KSk7CiAgICB9CiAgICByZXR1cm4gcmVzdWx0czsKICB9LAoKICBnZXRJbnB1dHM6IGZ1bmN0aW9uKGZvcm0sIHR5cGVOYW1lLCBuYW1lKSB7CiAgICBmb3JtID0gJChmb3JtKTsKICAgIHZhciBpbnB1dHMgPSBmb3JtLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpbnB1dCcpOwoKICAgIGlmICghdHlwZU5hbWUgJiYgIW5hbWUpIHJldHVybiAkQShpbnB1dHMpLm1hcChFbGVtZW50LmV4dGVuZCk7CgogICAgZm9yICh2YXIgaSA9IDAsIG1hdGNoaW5nSW5wdXRzID0gW10sIGxlbmd0aCA9IGlucHV0cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICB2YXIgaW5wdXQgPSBpbnB1dHNbaV07CiAgICAgIGlmICgodHlwZU5hbWUgJiYgaW5wdXQudHlwZSAhPSB0eXBlTmFtZSkgfHwgKG5hbWUgJiYgaW5wdXQubmFtZSAhPSBuYW1lKSkKICAgICAgICBjb250aW51ZTsKICAgICAgbWF0Y2hpbmdJbnB1dHMucHVzaChFbGVtZW50LmV4dGVuZChpbnB1dCkpOwogICAgfQoKICAgIHJldHVybiBtYXRjaGluZ0lucHV0czsKICB9LAoKICBkaXNhYmxlOiBmdW5jdGlvbihmb3JtKSB7CiAgICBmb3JtID0gJChmb3JtKTsKICAgIEZvcm0uZ2V0RWxlbWVudHMoZm9ybSkuaW52b2tlKCdkaXNhYmxlJyk7CiAgICByZXR1cm4gZm9ybTsKICB9LAoKICBlbmFibGU6IGZ1bmN0aW9uKGZvcm0pIHsKICAgIGZvcm0gPSAkKGZvcm0pOwogICAgRm9ybS5nZXRFbGVtZW50cyhmb3JtKS5pbnZva2UoJ2VuYWJsZScpOwogICAgcmV0dXJuIGZvcm07CiAgfSwKCiAgZmluZEZpcnN0RWxlbWVudDogZnVuY3Rpb24oZm9ybSkgewogICAgdmFyIGVsZW1lbnRzID0gJChmb3JtKS5nZXRFbGVtZW50cygpLmZpbmRBbGwoZnVuY3Rpb24oZWxlbWVudCkgewogICAgICByZXR1cm4gJ2hpZGRlbicgIT0gZWxlbWVudC50eXBlICYmICFlbGVtZW50LmRpc2FibGVkOwogICAgfSk7CiAgICB2YXIgZmlyc3RCeUluZGV4ID0gZWxlbWVudHMuZmluZEFsbChmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgIHJldHVybiBlbGVtZW50Lmhhc0F0dHJpYnV0ZSgndGFiSW5kZXgnKSAmJiBlbGVtZW50LnRhYkluZGV4ID49IDA7CiAgICB9KS5zb3J0QnkoZnVuY3Rpb24oZWxlbWVudCkgeyByZXR1cm4gZWxlbWVudC50YWJJbmRleCB9KS5maXJzdCgpOwoKICAgIHJldHVybiBmaXJzdEJ5SW5kZXggPyBmaXJzdEJ5SW5kZXggOiBlbGVtZW50cy5maW5kKGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgcmV0dXJuIC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhKSQvaS50ZXN0KGVsZW1lbnQudGFnTmFtZSk7CiAgICB9KTsKICB9LAoKICBmb2N1c0ZpcnN0RWxlbWVudDogZnVuY3Rpb24oZm9ybSkgewogICAgZm9ybSA9ICQoZm9ybSk7CiAgICB2YXIgZWxlbWVudCA9IGZvcm0uZmluZEZpcnN0RWxlbWVudCgpOwogICAgaWYgKGVsZW1lbnQpIGVsZW1lbnQuYWN0aXZhdGUoKTsKICAgIHJldHVybiBmb3JtOwogIH0sCgogIHJlcXVlc3Q6IGZ1bmN0aW9uKGZvcm0sIG9wdGlvbnMpIHsKICAgIGZvcm0gPSAkKGZvcm0pLCBvcHRpb25zID0gT2JqZWN0LmNsb25lKG9wdGlvbnMgfHwgeyB9KTsKCiAgICB2YXIgcGFyYW1zID0gb3B0aW9ucy5wYXJhbWV0ZXJzLCBhY3Rpb24gPSBmb3JtLnJlYWRBdHRyaWJ1dGUoJ2FjdGlvbicpIHx8ICcnOwogICAgaWYgKGFjdGlvbi5ibGFuaygpKSBhY3Rpb24gPSB3aW5kb3cubG9jYXRpb24uaHJlZjsKICAgIG9wdGlvbnMucGFyYW1ldGVycyA9IGZvcm0uc2VyaWFsaXplKHRydWUpOwoKICAgIGlmIChwYXJhbXMpIHsKICAgICAgaWYgKE9iamVjdC5pc1N0cmluZyhwYXJhbXMpKSBwYXJhbXMgPSBwYXJhbXMudG9RdWVyeVBhcmFtcygpOwogICAgICBPYmplY3QuZXh0ZW5kKG9wdGlvbnMucGFyYW1ldGVycywgcGFyYW1zKTsKICAgIH0KCiAgICBpZiAoZm9ybS5oYXNBdHRyaWJ1dGUoJ21ldGhvZCcpICYmICFvcHRpb25zLm1ldGhvZCkKICAgICAgb3B0aW9ucy5tZXRob2QgPSBmb3JtLm1ldGhvZDsKCiAgICByZXR1cm4gbmV3IEFqYXguUmVxdWVzdChhY3Rpb24sIG9wdGlvbnMpOwogIH0KfTsKCi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwoKCkZvcm0uRWxlbWVudCA9IHsKICBmb2N1czogZnVuY3Rpb24oZWxlbWVudCkgewogICAgJChlbGVtZW50KS5mb2N1cygpOwogICAgcmV0dXJuIGVsZW1lbnQ7CiAgfSwKCiAgc2VsZWN0OiBmdW5jdGlvbihlbGVtZW50KSB7CiAgICAkKGVsZW1lbnQpLnNlbGVjdCgpOwogICAgcmV0dXJuIGVsZW1lbnQ7CiAgfQp9OwoKRm9ybS5FbGVtZW50Lk1ldGhvZHMgPSB7CgogIHNlcmlhbGl6ZTogZnVuY3Rpb24oZWxlbWVudCkgewogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7CiAgICBpZiAoIWVsZW1lbnQuZGlzYWJsZWQgJiYgZWxlbWVudC5uYW1lKSB7CiAgICAgIHZhciB2YWx1ZSA9IGVsZW1lbnQuZ2V0VmFsdWUoKTsKICAgICAgaWYgKHZhbHVlICE9IHVuZGVmaW5lZCkgewogICAgICAgIHZhciBwYWlyID0geyB9OwogICAgICAgIHBhaXJbZWxlbWVudC5uYW1lXSA9IHZhbHVlOwogICAgICAgIHJldHVybiBPYmplY3QudG9RdWVyeVN0cmluZyhwYWlyKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuICcnOwogIH0sCgogIGdldFZhbHVlOiBmdW5jdGlvbihlbGVtZW50KSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKICAgIHZhciBtZXRob2QgPSBlbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKTsKICAgIHJldHVybiBGb3JtLkVsZW1lbnQuU2VyaWFsaXplcnNbbWV0aG9kXShlbGVtZW50KTsKICB9LAoKICBzZXRWYWx1ZTogZnVuY3Rpb24oZWxlbWVudCwgdmFsdWUpIHsKICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOwogICAgdmFyIG1ldGhvZCA9IGVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpOwogICAgRm9ybS5FbGVtZW50LlNlcmlhbGl6ZXJzW21ldGhvZF0oZWxlbWVudCwgdmFsdWUpOwogICAgcmV0dXJuIGVsZW1lbnQ7CiAgfSwKCiAgY2xlYXI6IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICQoZWxlbWVudCkudmFsdWUgPSAnJzsKICAgIHJldHVybiBlbGVtZW50OwogIH0sCgogIHByZXNlbnQ6IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgIHJldHVybiAkKGVsZW1lbnQpLnZhbHVlICE9ICcnOwogIH0sCgogIGFjdGl2YXRlOiBmdW5jdGlvbihlbGVtZW50KSB7CiAgICBlbGVtZW50ID0gJChlbGVtZW50KTsKICAgIHRyeSB7CiAgICAgIGVsZW1lbnQuZm9jdXMoKTsKICAgICAgaWYgKGVsZW1lbnQuc2VsZWN0ICYmIChlbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKSAhPSAnaW5wdXQnIHx8CiAgICAgICAgICAhKC9eKD86YnV0dG9ufHJlc2V0fHN1Ym1pdCkkL2kudGVzdChlbGVtZW50LnR5cGUpKSkpCiAgICAgICAgZWxlbWVudC5zZWxlY3QoKTsKICAgIH0gY2F0Y2ggKGUpIHsgfQogICAgcmV0dXJuIGVsZW1lbnQ7CiAgfSwKCiAgZGlzYWJsZTogZnVuY3Rpb24oZWxlbWVudCkgewogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7CiAgICBlbGVtZW50LmRpc2FibGVkID0gdHJ1ZTsKICAgIHJldHVybiBlbGVtZW50OwogIH0sCgogIGVuYWJsZTogZnVuY3Rpb24oZWxlbWVudCkgewogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7CiAgICBlbGVtZW50LmRpc2FibGVkID0gZmFsc2U7CiAgICByZXR1cm4gZWxlbWVudDsKICB9Cn07CgovKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KCnZhciBGaWVsZCA9IEZvcm0uRWxlbWVudDsKCnZhciAkRiA9IEZvcm0uRWxlbWVudC5NZXRob2RzLmdldFZhbHVlOwoKLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCgpGb3JtLkVsZW1lbnQuU2VyaWFsaXplcnMgPSAoZnVuY3Rpb24oKSB7CiAgZnVuY3Rpb24gaW5wdXQoZWxlbWVudCwgdmFsdWUpIHsKICAgIHN3aXRjaCAoZWxlbWVudC50eXBlLnRvTG93ZXJDYXNlKCkpIHsKICAgICAgY2FzZSAnY2hlY2tib3gnOgogICAgICBjYXNlICdyYWRpbyc6CiAgICAgICAgcmV0dXJuIGlucHV0U2VsZWN0b3IoZWxlbWVudCwgdmFsdWUpOwogICAgICBkZWZhdWx0OgogICAgICAgIHJldHVybiB2YWx1ZVNlbGVjdG9yKGVsZW1lbnQsIHZhbHVlKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGlucHV0U2VsZWN0b3IoZWxlbWVudCwgdmFsdWUpIHsKICAgIGlmIChPYmplY3QuaXNVbmRlZmluZWQodmFsdWUpKQogICAgICByZXR1cm4gZWxlbWVudC5jaGVja2VkID8gZWxlbWVudC52YWx1ZSA6IG51bGw7CiAgICBlbHNlIGVsZW1lbnQuY2hlY2tlZCA9ICEhdmFsdWU7CiAgfQoKICBmdW5jdGlvbiB2YWx1ZVNlbGVjdG9yKGVsZW1lbnQsIHZhbHVlKSB7CiAgICBpZiAoT2JqZWN0LmlzVW5kZWZpbmVkKHZhbHVlKSkgcmV0dXJuIGVsZW1lbnQudmFsdWU7CiAgICBlbHNlIGVsZW1lbnQudmFsdWUgPSB2YWx1ZTsKICB9CgogIGZ1bmN0aW9uIHNlbGVjdChlbGVtZW50LCB2YWx1ZSkgewogICAgaWYgKE9iamVjdC5pc1VuZGVmaW5lZCh2YWx1ZSkpCiAgICAgIHJldHVybiAoZWxlbWVudC50eXBlID09PSAnc2VsZWN0LW9uZScgPyBzZWxlY3RPbmUgOiBzZWxlY3RNYW55KShlbGVtZW50KTsKCiAgICB2YXIgb3B0LCBjdXJyZW50VmFsdWUsIHNpbmdsZSA9ICFPYmplY3QuaXNBcnJheSh2YWx1ZSk7CiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZWxlbWVudC5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICBvcHQgPSBlbGVtZW50Lm9wdGlvbnNbaV07CiAgICAgIGN1cnJlbnRWYWx1ZSA9IHRoaXMub3B0aW9uVmFsdWUob3B0KTsKICAgICAgaWYgKHNpbmdsZSkgewogICAgICAgIGlmIChjdXJyZW50VmFsdWUgPT0gdmFsdWUpIHsKICAgICAgICAgIG9wdC5zZWxlY3RlZCA9IHRydWU7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CiAgICAgIGVsc2Ugb3B0LnNlbGVjdGVkID0gdmFsdWUuaW5jbHVkZShjdXJyZW50VmFsdWUpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gc2VsZWN0T25lKGVsZW1lbnQpIHsKICAgIHZhciBpbmRleCA9IGVsZW1lbnQuc2VsZWN0ZWRJbmRleDsKICAgIHJldHVybiBpbmRleCA+PSAwID8gb3B0aW9uVmFsdWUoZWxlbWVudC5vcHRpb25zW2luZGV4XSkgOiBudWxsOwogIH0KCiAgZnVuY3Rpb24gc2VsZWN0TWFueShlbGVtZW50KSB7CiAgICB2YXIgdmFsdWVzLCBsZW5ndGggPSBlbGVtZW50Lmxlbmd0aDsKICAgIGlmICghbGVuZ3RoKSByZXR1cm4gbnVsbDsKCiAgICBmb3IgKHZhciBpID0gMCwgdmFsdWVzID0gW107IGkgPCBsZW5ndGg7IGkrKykgewogICAgICB2YXIgb3B0ID0gZWxlbWVudC5vcHRpb25zW2ldOwogICAgICBpZiAob3B0LnNlbGVjdGVkKSB2YWx1ZXMucHVzaChvcHRpb25WYWx1ZShvcHQpKTsKICAgIH0KICAgIHJldHVybiB2YWx1ZXM7CiAgfQoKICBmdW5jdGlvbiBvcHRpb25WYWx1ZShvcHQpIHsKICAgIHJldHVybiBFbGVtZW50Lmhhc0F0dHJpYnV0ZShvcHQsICd2YWx1ZScpID8gb3B0LnZhbHVlIDogb3B0LnRleHQ7CiAgfQoKICByZXR1cm4gewogICAgaW5wdXQ6ICAgICAgICAgaW5wdXQsCiAgICBpbnB1dFNlbGVjdG9yOiBpbnB1dFNlbGVjdG9yLAogICAgdGV4dGFyZWE6ICAgICAgdmFsdWVTZWxlY3RvciwKICAgIHNlbGVjdDogICAgICAgIHNlbGVjdCwKICAgIHNlbGVjdE9uZTogICAgIHNlbGVjdE9uZSwKICAgIHNlbGVjdE1hbnk6ICAgIHNlbGVjdE1hbnksCiAgICBvcHRpb25WYWx1ZTogICBvcHRpb25WYWx1ZSwKICAgIGJ1dHRvbjogICAgICAgIHZhbHVlU2VsZWN0b3IKICB9Owp9KSgpOwoKLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCgoKQWJzdHJhY3QuVGltZWRPYnNlcnZlciA9IENsYXNzLmNyZWF0ZShQZXJpb2RpY2FsRXhlY3V0ZXIsIHsKICBpbml0aWFsaXplOiBmdW5jdGlvbigkc3VwZXIsIGVsZW1lbnQsIGZyZXF1ZW5jeSwgY2FsbGJhY2spIHsKICAgICRzdXBlcihjYWxsYmFjaywgZnJlcXVlbmN5KTsKICAgIHRoaXMuZWxlbWVudCAgID0gJChlbGVtZW50KTsKICAgIHRoaXMubGFzdFZhbHVlID0gdGhpcy5nZXRWYWx1ZSgpOwogIH0sCgogIGV4ZWN1dGU6IGZ1bmN0aW9uKCkgewogICAgdmFyIHZhbHVlID0gdGhpcy5nZXRWYWx1ZSgpOwogICAgaWYgKE9iamVjdC5pc1N0cmluZyh0aGlzLmxhc3RWYWx1ZSkgJiYgT2JqZWN0LmlzU3RyaW5nKHZhbHVlKSA/CiAgICAgICAgdGhpcy5sYXN0VmFsdWUgIT0gdmFsdWUgOiBTdHJpbmcodGhpcy5sYXN0VmFsdWUpICE9IFN0cmluZyh2YWx1ZSkpIHsKICAgICAgdGhpcy5jYWxsYmFjayh0aGlzLmVsZW1lbnQsIHZhbHVlKTsKICAgICAgdGhpcy5sYXN0VmFsdWUgPSB2YWx1ZTsKICAgIH0KICB9Cn0pOwoKRm9ybS5FbGVtZW50Lk9ic2VydmVyID0gQ2xhc3MuY3JlYXRlKEFic3RyYWN0LlRpbWVkT2JzZXJ2ZXIsIHsKICBnZXRWYWx1ZTogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gRm9ybS5FbGVtZW50LmdldFZhbHVlKHRoaXMuZWxlbWVudCk7CiAgfQp9KTsKCkZvcm0uT2JzZXJ2ZXIgPSBDbGFzcy5jcmVhdGUoQWJzdHJhY3QuVGltZWRPYnNlcnZlciwgewogIGdldFZhbHVlOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiBGb3JtLnNlcmlhbGl6ZSh0aGlzLmVsZW1lbnQpOwogIH0KfSk7CgovKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KCkFic3RyYWN0LkV2ZW50T2JzZXJ2ZXIgPSBDbGFzcy5jcmVhdGUoewogIGluaXRpYWxpemU6IGZ1bmN0aW9uKGVsZW1lbnQsIGNhbGxiYWNrKSB7CiAgICB0aGlzLmVsZW1lbnQgID0gJChlbGVtZW50KTsKICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjazsKCiAgICB0aGlzLmxhc3RWYWx1ZSA9IHRoaXMuZ2V0VmFsdWUoKTsKICAgIGlmICh0aGlzLmVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09ICdmb3JtJykKICAgICAgdGhpcy5yZWdpc3RlckZvcm1DYWxsYmFja3MoKTsKICAgIGVsc2UKICAgICAgdGhpcy5yZWdpc3RlckNhbGxiYWNrKHRoaXMuZWxlbWVudCk7CiAgfSwKCiAgb25FbGVtZW50RXZlbnQ6IGZ1bmN0aW9uKCkgewogICAgdmFyIHZhbHVlID0gdGhpcy5nZXRWYWx1ZSgpOwogICAgaWYgKHRoaXMubGFzdFZhbHVlICE9IHZhbHVlKSB7CiAgICAgIHRoaXMuY2FsbGJhY2sodGhpcy5lbGVtZW50LCB2YWx1ZSk7CiAgICAgIHRoaXMubGFzdFZhbHVlID0gdmFsdWU7CiAgICB9CiAgfSwKCiAgcmVnaXN0ZXJGb3JtQ2FsbGJhY2tzOiBmdW5jdGlvbigpIHsKICAgIEZvcm0uZ2V0RWxlbWVudHModGhpcy5lbGVtZW50KS5lYWNoKHRoaXMucmVnaXN0ZXJDYWxsYmFjaywgdGhpcyk7CiAgfSwKCiAgcmVnaXN0ZXJDYWxsYmFjazogZnVuY3Rpb24oZWxlbWVudCkgewogICAgaWYgKGVsZW1lbnQudHlwZSkgewogICAgICBzd2l0Y2ggKGVsZW1lbnQudHlwZS50b0xvd2VyQ2FzZSgpKSB7CiAgICAgICAgY2FzZSAnY2hlY2tib3gnOgogICAgICAgIGNhc2UgJ3JhZGlvJzoKICAgICAgICAgIEV2ZW50Lm9ic2VydmUoZWxlbWVudCwgJ2NsaWNrJywgdGhpcy5vbkVsZW1lbnRFdmVudC5iaW5kKHRoaXMpKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICBFdmVudC5vYnNlcnZlKGVsZW1lbnQsICdjaGFuZ2UnLCB0aGlzLm9uRWxlbWVudEV2ZW50LmJpbmQodGhpcykpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KICB9Cn0pOwoKRm9ybS5FbGVtZW50LkV2ZW50T2JzZXJ2ZXIgPSBDbGFzcy5jcmVhdGUoQWJzdHJhY3QuRXZlbnRPYnNlcnZlciwgewogIGdldFZhbHVlOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiBGb3JtLkVsZW1lbnQuZ2V0VmFsdWUodGhpcy5lbGVtZW50KTsKICB9Cn0pOwoKRm9ybS5FdmVudE9ic2VydmVyID0gQ2xhc3MuY3JlYXRlKEFic3RyYWN0LkV2ZW50T2JzZXJ2ZXIsIHsKICBnZXRWYWx1ZTogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gRm9ybS5zZXJpYWxpemUodGhpcy5lbGVtZW50KTsKICB9Cn0pOwooZnVuY3Rpb24oR0xPQkFMKSB7CiAgdmFyIERJViA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogIHZhciBkb2NFbCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKICB2YXIgTU9VU0VFTlRFUl9NT1VTRUxFQVZFX0VWRU5UU19TVVBQT1JURUQgPSAnb25tb3VzZWVudGVyJyBpbiBkb2NFbAogICAmJiAnb25tb3VzZWxlYXZlJyBpbiBkb2NFbDsKCiAgdmFyIEV2ZW50ID0gewogICAgS0VZX0JBQ0tTUEFDRTogOCwKICAgIEtFWV9UQUI6ICAgICAgIDksCiAgICBLRVlfUkVUVVJOOiAgIDEzLAogICAgS0VZX0VTQzogICAgICAyNywKICAgIEtFWV9MRUZUOiAgICAgMzcsCiAgICBLRVlfVVA6ICAgICAgIDM4LAogICAgS0VZX1JJR0hUOiAgICAzOSwKICAgIEtFWV9ET1dOOiAgICAgNDAsCiAgICBLRVlfREVMRVRFOiAgIDQ2LAogICAgS0VZX0hPTUU6ICAgICAzNiwKICAgIEtFWV9FTkQ6ICAgICAgMzUsCiAgICBLRVlfUEFHRVVQOiAgIDMzLAogICAgS0VZX1BBR0VET1dOOiAzNCwKICAgIEtFWV9JTlNFUlQ6ICAgNDUKICB9OwoKCiAgdmFyIGlzSUVMZWdhY3lFdmVudCA9IGZ1bmN0aW9uKGV2ZW50KSB7IHJldHVybiBmYWxzZTsgfTsKCiAgaWYgKHdpbmRvdy5hdHRhY2hFdmVudCkgewogICAgaWYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7CiAgICAgIGlzSUVMZWdhY3lFdmVudCA9IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgcmV0dXJuICEoZXZlbnQgaW5zdGFuY2VvZiB3aW5kb3cuRXZlbnQpOwogICAgICB9OwogICAgfSBlbHNlIHsKICAgICAgaXNJRUxlZ2FjeUV2ZW50ID0gZnVuY3Rpb24oZXZlbnQpIHsgcmV0dXJuIHRydWU7IH07CiAgICB9CiAgfQoKICB2YXIgX2lzQnV0dG9uOwoKICBmdW5jdGlvbiBfaXNCdXR0b25Gb3JET01FdmVudHMoZXZlbnQsIGNvZGUpIHsKICAgIHJldHVybiBldmVudC53aGljaCA/IChldmVudC53aGljaCA9PT0gY29kZSArIDEpIDogKGV2ZW50LmJ1dHRvbiA9PT0gY29kZSk7CiAgfQoKICB2YXIgbGVnYWN5QnV0dG9uTWFwID0geyAwOiAxLCAxOiA0LCAyOiAyIH07CiAgZnVuY3Rpb24gX2lzQnV0dG9uRm9yTGVnYWN5RXZlbnRzKGV2ZW50LCBjb2RlKSB7CiAgICByZXR1cm4gZXZlbnQuYnV0dG9uID09PSBsZWdhY3lCdXR0b25NYXBbY29kZV07CiAgfQoKICBmdW5jdGlvbiBfaXNCdXR0b25Gb3JXZWJLaXQoZXZlbnQsIGNvZGUpIHsKICAgIHN3aXRjaCAoY29kZSkgewogICAgICBjYXNlIDA6IHJldHVybiBldmVudC53aGljaCA9PSAxICYmICFldmVudC5tZXRhS2V5OwogICAgICBjYXNlIDE6IHJldHVybiBldmVudC53aGljaCA9PSAyIHx8IChldmVudC53aGljaCA9PSAxICYmIGV2ZW50Lm1ldGFLZXkpOwogICAgICBjYXNlIDI6IHJldHVybiBldmVudC53aGljaCA9PSAzOwogICAgICBkZWZhdWx0OiByZXR1cm4gZmFsc2U7CiAgICB9CiAgfQoKICBpZiAod2luZG93LmF0dGFjaEV2ZW50KSB7CiAgICBpZiAoIXdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7CiAgICAgIF9pc0J1dHRvbiA9IF9pc0J1dHRvbkZvckxlZ2FjeUV2ZW50czsKICAgIH0gZWxzZSB7CiAgICAgIF9pc0J1dHRvbiA9IGZ1bmN0aW9uKGV2ZW50LCBjb2RlKSB7CiAgICAgICAgcmV0dXJuIGlzSUVMZWdhY3lFdmVudChldmVudCkgPyBfaXNCdXR0b25Gb3JMZWdhY3lFdmVudHMoZXZlbnQsIGNvZGUpIDoKICAgICAgICAgX2lzQnV0dG9uRm9yRE9NRXZlbnRzKGV2ZW50LCBjb2RlKTsKICAgICAgfQogICAgfQogIH0gZWxzZSBpZiAoUHJvdG90eXBlLkJyb3dzZXIuV2ViS2l0KSB7CiAgICBfaXNCdXR0b24gPSBfaXNCdXR0b25Gb3JXZWJLaXQ7CiAgfSBlbHNlIHsKICAgIF9pc0J1dHRvbiA9IF9pc0J1dHRvbkZvckRPTUV2ZW50czsKICB9CgogIGZ1bmN0aW9uIGlzTGVmdENsaWNrKGV2ZW50KSAgIHsgcmV0dXJuIF9pc0J1dHRvbihldmVudCwgMCkgfQoKICBmdW5jdGlvbiBpc01pZGRsZUNsaWNrKGV2ZW50KSB7IHJldHVybiBfaXNCdXR0b24oZXZlbnQsIDEpIH0KCiAgZnVuY3Rpb24gaXNSaWdodENsaWNrKGV2ZW50KSAgeyByZXR1cm4gX2lzQnV0dG9uKGV2ZW50LCAyKSB9CgogIGZ1bmN0aW9uIGVsZW1lbnQoZXZlbnQpIHsKICAgIHJldHVybiBFbGVtZW50LmV4dGVuZChfZWxlbWVudChldmVudCkpOwogIH0KCiAgZnVuY3Rpb24gX2VsZW1lbnQoZXZlbnQpIHsKICAgIGV2ZW50ID0gRXZlbnQuZXh0ZW5kKGV2ZW50KTsKCiAgICB2YXIgbm9kZSA9IGV2ZW50LnRhcmdldCwgdHlwZSA9IGV2ZW50LnR5cGUsCiAgICAgY3VycmVudFRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7CgogICAgaWYgKGN1cnJlbnRUYXJnZXQgJiYgY3VycmVudFRhcmdldC50YWdOYW1lKSB7CiAgICAgIGlmICh0eXBlID09PSAnbG9hZCcgfHwgdHlwZSA9PT0gJ2Vycm9yJyB8fAogICAgICAgICh0eXBlID09PSAnY2xpY2snICYmIGN1cnJlbnRUYXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW5wdXQnCiAgICAgICAgICAmJiBjdXJyZW50VGFyZ2V0LnR5cGUgPT09ICdyYWRpbycpKQogICAgICAgICAgICBub2RlID0gY3VycmVudFRhcmdldDsKICAgIH0KCiAgICByZXR1cm4gbm9kZS5ub2RlVHlwZSA9PSBOb2RlLlRFWFRfTk9ERSA/IG5vZGUucGFyZW50Tm9kZSA6IG5vZGU7CiAgfQoKICBmdW5jdGlvbiBmaW5kRWxlbWVudChldmVudCwgZXhwcmVzc2lvbikgewogICAgdmFyIGVsZW1lbnQgPSBfZWxlbWVudChldmVudCksIHNlbGVjdG9yID0gUHJvdG90eXBlLlNlbGVjdG9yOwogICAgaWYgKCFleHByZXNzaW9uKSByZXR1cm4gRWxlbWVudC5leHRlbmQoZWxlbWVudCk7CiAgICB3aGlsZSAoZWxlbWVudCkgewogICAgICBpZiAoT2JqZWN0LmlzRWxlbWVudChlbGVtZW50KSAmJiBzZWxlY3Rvci5tYXRjaChlbGVtZW50LCBleHByZXNzaW9uKSkKICAgICAgICByZXR1cm4gRWxlbWVudC5leHRlbmQoZWxlbWVudCk7CiAgICAgIGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBwb2ludGVyKGV2ZW50KSB7CiAgICByZXR1cm4geyB4OiBwb2ludGVyWChldmVudCksIHk6IHBvaW50ZXJZKGV2ZW50KSB9OwogIH0KCiAgZnVuY3Rpb24gcG9pbnRlclgoZXZlbnQpIHsKICAgIHZhciBkb2NFbGVtZW50ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LAogICAgIGJvZHkgPSBkb2N1bWVudC5ib2R5IHx8IHsgc2Nyb2xsTGVmdDogMCB9OwoKICAgIHJldHVybiBldmVudC5wYWdlWCB8fCAoZXZlbnQuY2xpZW50WCArCiAgICAgIChkb2NFbGVtZW50LnNjcm9sbExlZnQgfHwgYm9keS5zY3JvbGxMZWZ0KSAtCiAgICAgIChkb2NFbGVtZW50LmNsaWVudExlZnQgfHwgMCkpOwogIH0KCiAgZnVuY3Rpb24gcG9pbnRlclkoZXZlbnQpIHsKICAgIHZhciBkb2NFbGVtZW50ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LAogICAgIGJvZHkgPSBkb2N1bWVudC5ib2R5IHx8IHsgc2Nyb2xsVG9wOiAwIH07CgogICAgcmV0dXJuICBldmVudC5wYWdlWSB8fCAoZXZlbnQuY2xpZW50WSArCiAgICAgICAoZG9jRWxlbWVudC5zY3JvbGxUb3AgfHwgYm9keS5zY3JvbGxUb3ApIC0KICAgICAgIChkb2NFbGVtZW50LmNsaWVudFRvcCB8fCAwKSk7CiAgfQoKCiAgZnVuY3Rpb24gc3RvcChldmVudCkgewogICAgRXZlbnQuZXh0ZW5kKGV2ZW50KTsKICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKCiAgICBldmVudC5zdG9wcGVkID0gdHJ1ZTsKICB9CgoKICBFdmVudC5NZXRob2RzID0gewogICAgaXNMZWZ0Q2xpY2s6ICAgaXNMZWZ0Q2xpY2ssCiAgICBpc01pZGRsZUNsaWNrOiBpc01pZGRsZUNsaWNrLAogICAgaXNSaWdodENsaWNrOiAgaXNSaWdodENsaWNrLAoKICAgIGVsZW1lbnQ6ICAgICBlbGVtZW50LAogICAgZmluZEVsZW1lbnQ6IGZpbmRFbGVtZW50LAoKICAgIHBvaW50ZXI6ICBwb2ludGVyLAogICAgcG9pbnRlclg6IHBvaW50ZXJYLAogICAgcG9pbnRlclk6IHBvaW50ZXJZLAoKICAgIHN0b3A6IHN0b3AKICB9OwoKICB2YXIgbWV0aG9kcyA9IE9iamVjdC5rZXlzKEV2ZW50Lk1ldGhvZHMpLmluamVjdCh7IH0sIGZ1bmN0aW9uKG0sIG5hbWUpIHsKICAgIG1bbmFtZV0gPSBFdmVudC5NZXRob2RzW25hbWVdLm1ldGhvZGl6ZSgpOwogICAgcmV0dXJuIG07CiAgfSk7CgogIGlmICh3aW5kb3cuYXR0YWNoRXZlbnQpIHsKICAgIGZ1bmN0aW9uIF9yZWxhdGVkVGFyZ2V0KGV2ZW50KSB7CiAgICAgIHZhciBlbGVtZW50OwogICAgICBzd2l0Y2ggKGV2ZW50LnR5cGUpIHsKICAgICAgICBjYXNlICdtb3VzZW92ZXInOgogICAgICAgIGNhc2UgJ21vdXNlZW50ZXInOgogICAgICAgICAgZWxlbWVudCA9IGV2ZW50LmZyb21FbGVtZW50OwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnbW91c2VvdXQnOgogICAgICAgIGNhc2UgJ21vdXNlbGVhdmUnOgogICAgICAgICAgZWxlbWVudCA9IGV2ZW50LnRvRWxlbWVudDsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgICByZXR1cm4gRWxlbWVudC5leHRlbmQoZWxlbWVudCk7CiAgICB9CgogICAgdmFyIGFkZGl0aW9uYWxNZXRob2RzID0gewogICAgICBzdG9wUHJvcGFnYXRpb246IGZ1bmN0aW9uKCkgeyB0aGlzLmNhbmNlbEJ1YmJsZSA9IHRydWUgfSwKICAgICAgcHJldmVudERlZmF1bHQ6ICBmdW5jdGlvbigpIHsgdGhpcy5yZXR1cm5WYWx1ZSA9IGZhbHNlIH0sCiAgICAgIGluc3BlY3Q6IGZ1bmN0aW9uKCkgeyByZXR1cm4gJ1tvYmplY3QgRXZlbnRdJyB9CiAgICB9OwoKICAgIEV2ZW50LmV4dGVuZCA9IGZ1bmN0aW9uKGV2ZW50LCBlbGVtZW50KSB7CiAgICAgIGlmICghZXZlbnQpIHJldHVybiBmYWxzZTsKCiAgICAgIGlmICghaXNJRUxlZ2FjeUV2ZW50KGV2ZW50KSkgcmV0dXJuIGV2ZW50OwoKICAgICAgaWYgKGV2ZW50Ll9leHRlbmRlZEJ5UHJvdG90eXBlKSByZXR1cm4gZXZlbnQ7CiAgICAgIGV2ZW50Ll9leHRlbmRlZEJ5UHJvdG90eXBlID0gUHJvdG90eXBlLmVtcHR5RnVuY3Rpb247CgogICAgICB2YXIgcG9pbnRlciA9IEV2ZW50LnBvaW50ZXIoZXZlbnQpOwoKICAgICAgT2JqZWN0LmV4dGVuZChldmVudCwgewogICAgICAgIHRhcmdldDogZXZlbnQuc3JjRWxlbWVudCB8fCBlbGVtZW50LAogICAgICAgIHJlbGF0ZWRUYXJnZXQ6IF9yZWxhdGVkVGFyZ2V0KGV2ZW50KSwKICAgICAgICBwYWdlWDogIHBvaW50ZXIueCwKICAgICAgICBwYWdlWTogIHBvaW50ZXIueQogICAgICB9KTsKCiAgICAgIE9iamVjdC5leHRlbmQoZXZlbnQsIG1ldGhvZHMpOwogICAgICBPYmplY3QuZXh0ZW5kKGV2ZW50LCBhZGRpdGlvbmFsTWV0aG9kcyk7CgogICAgICByZXR1cm4gZXZlbnQ7CiAgICB9OwogIH0gZWxzZSB7CiAgICBFdmVudC5leHRlbmQgPSBQcm90b3R5cGUuSzsKICB9CgogIGlmICh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcikgewogICAgRXZlbnQucHJvdG90eXBlID0gd2luZG93LkV2ZW50LnByb3RvdHlwZSB8fCBkb2N1bWVudC5jcmVhdGVFdmVudCgnSFRNTEV2ZW50cycpLl9fcHJvdG9fXzsKICAgIE9iamVjdC5leHRlbmQoRXZlbnQucHJvdG90eXBlLCBtZXRob2RzKTsKICB9CgogIHZhciBFVkVOVF9UUkFOU0xBVElPTlMgPSB7CiAgICBtb3VzZWVudGVyOiAnbW91c2VvdmVyJywKICAgIG1vdXNlbGVhdmU6ICdtb3VzZW91dCcKICB9OwoKICBmdW5jdGlvbiBnZXRET01FdmVudE5hbWUoZXZlbnROYW1lKSB7CiAgICByZXR1cm4gRVZFTlRfVFJBTlNMQVRJT05TW2V2ZW50TmFtZV0gfHwgZXZlbnROYW1lOwogIH0KCiAgaWYgKE1PVVNFRU5URVJfTU9VU0VMRUFWRV9FVkVOVFNfU1VQUE9SVEVEKQogICAgZ2V0RE9NRXZlbnROYW1lID0gUHJvdG90eXBlLks7CgogIGZ1bmN0aW9uIGdldFVuaXF1ZUVsZW1lbnRJRChlbGVtZW50KSB7CiAgICBpZiAoZWxlbWVudCA9PT0gd2luZG93KSByZXR1cm4gMDsKCiAgICBpZiAodHlwZW9mIGVsZW1lbnQuX3Byb3RvdHlwZVVJRCA9PT0gJ3VuZGVmaW5lZCcpCiAgICAgIGVsZW1lbnQuX3Byb3RvdHlwZVVJRCA9IEVsZW1lbnQuU3RvcmFnZS5VSUQrKzsKICAgIHJldHVybiBlbGVtZW50Ll9wcm90b3R5cGVVSUQ7CiAgfQoKICBmdW5jdGlvbiBnZXRVbmlxdWVFbGVtZW50SURfSUUoZWxlbWVudCkgewogICAgaWYgKGVsZW1lbnQgPT09IHdpbmRvdykgcmV0dXJuIDA7CiAgICBpZiAoZWxlbWVudCA9PSBkb2N1bWVudCkgcmV0dXJuIDE7CiAgICByZXR1cm4gZWxlbWVudC51bmlxdWVJRDsKICB9CgogIGlmICgndW5pcXVlSUQnIGluIERJVikKICAgIGdldFVuaXF1ZUVsZW1lbnRJRCA9IGdldFVuaXF1ZUVsZW1lbnRJRF9JRTsKCiAgZnVuY3Rpb24gaXNDdXN0b21FdmVudChldmVudE5hbWUpIHsKICAgIHJldHVybiBldmVudE5hbWUuaW5jbHVkZSgnOicpOwogIH0KCiAgRXZlbnQuX2lzQ3VzdG9tRXZlbnQgPSBpc0N1c3RvbUV2ZW50OwoKICBmdW5jdGlvbiBnZXRPckNyZWF0ZVJlZ2lzdHJ5Rm9yKGVsZW1lbnQsIHVpZCkgewogICAgdmFyIENBQ0hFID0gR0xPQkFMLkV2ZW50LmNhY2hlOwogICAgaWYgKE9iamVjdC5pc1VuZGVmaW5lZCh1aWQpKQogICAgICB1aWQgPSBnZXRVbmlxdWVFbGVtZW50SUQoZWxlbWVudCk7CiAgICBpZiAoIUNBQ0hFW3VpZF0pIENBQ0hFW3VpZF0gPSB7IGVsZW1lbnQ6IGVsZW1lbnQgfTsKICAgIHJldHVybiBDQUNIRVt1aWRdOwogIH0KCiAgZnVuY3Rpb24gZGVzdHJveVJlZ2lzdHJ5Rm9yRWxlbWVudChlbGVtZW50LCB1aWQpIHsKICAgIGlmIChPYmplY3QuaXNVbmRlZmluZWQodWlkKSkKICAgICAgdWlkID0gZ2V0VW5pcXVlRWxlbWVudElEKGVsZW1lbnQpOwogICAgZGVsZXRlIEdMT0JBTC5FdmVudC5jYWNoZVt1aWRdOwogIH0KCgogIGZ1bmN0aW9uIHJlZ2lzdGVyKGVsZW1lbnQsIGV2ZW50TmFtZSwgaGFuZGxlcikgewogICAgdmFyIHJlZ2lzdHJ5ID0gZ2V0T3JDcmVhdGVSZWdpc3RyeUZvcihlbGVtZW50KTsKICAgIGlmICghcmVnaXN0cnlbZXZlbnROYW1lXSkgcmVnaXN0cnlbZXZlbnROYW1lXSA9IFtdOwogICAgdmFyIGVudHJpZXMgPSByZWdpc3RyeVtldmVudE5hbWVdOwoKICAgIHZhciBpID0gZW50cmllcy5sZW5ndGg7CiAgICB3aGlsZSAoaS0tKQogICAgICBpZiAoZW50cmllc1tpXS5oYW5kbGVyID09PSBoYW5kbGVyKSByZXR1cm4gbnVsbDsKCiAgICB2YXIgdWlkID0gZ2V0VW5pcXVlRWxlbWVudElEKGVsZW1lbnQpOwogICAgdmFyIHJlc3BvbmRlciA9IEdMT0JBTC5FdmVudC5fY3JlYXRlUmVzcG9uZGVyKHVpZCwgZXZlbnROYW1lLCBoYW5kbGVyKTsKICAgIHZhciBlbnRyeSA9IHsKICAgICAgcmVzcG9uZGVyOiByZXNwb25kZXIsCiAgICAgIGhhbmRsZXI6ICAgaGFuZGxlcgogICAgfTsKCiAgICBlbnRyaWVzLnB1c2goZW50cnkpOwogICAgcmV0dXJuIGVudHJ5OwogIH0KCiAgZnVuY3Rpb24gdW5yZWdpc3RlcihlbGVtZW50LCBldmVudE5hbWUsIGhhbmRsZXIpIHsKICAgIHZhciByZWdpc3RyeSA9IGdldE9yQ3JlYXRlUmVnaXN0cnlGb3IoZWxlbWVudCk7CiAgICB2YXIgZW50cmllcyA9IHJlZ2lzdHJ5W2V2ZW50TmFtZV0gfHwgW107CgogICAgdmFyIGkgPSBlbnRyaWVzLmxlbmd0aCwgZW50cnk7CiAgICB3aGlsZSAoaS0tKSB7CiAgICAgIGlmIChlbnRyaWVzW2ldLmhhbmRsZXIgPT09IGhhbmRsZXIpIHsKICAgICAgICBlbnRyeSA9IGVudHJpZXNbaV07CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoZW50cnkpIHsKICAgICAgdmFyIGluZGV4ID0gZW50cmllcy5pbmRleE9mKGVudHJ5KTsKICAgICAgZW50cmllcy5zcGxpY2UoaW5kZXgsIDEpOwogICAgfQoKICAgIGlmIChlbnRyaWVzLmxlbmd0aCA9PT0gMCkgewogICAgICBkZWxldGUgcmVnaXN0cnlbZXZlbnROYW1lXTsKICAgICAgaWYgKE9iamVjdC5rZXlzKHJlZ2lzdHJ5KS5sZW5ndGggPT09IDEgJiYgKCdlbGVtZW50JyBpbiByZWdpc3RyeSkpCiAgICAgICAgZGVzdHJveVJlZ2lzdHJ5Rm9yRWxlbWVudChlbGVtZW50KTsKICAgIH0KCiAgICByZXR1cm4gZW50cnk7CiAgfQoKCiAgZnVuY3Rpb24gb2JzZXJ2ZShlbGVtZW50LCBldmVudE5hbWUsIGhhbmRsZXIpIHsKICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOwogICAgdmFyIGVudHJ5ID0gcmVnaXN0ZXIoZWxlbWVudCwgZXZlbnROYW1lLCBoYW5kbGVyKTsKCiAgICBpZiAoZW50cnkgPT09IG51bGwpIHJldHVybiBlbGVtZW50OwoKICAgIHZhciByZXNwb25kZXIgPSBlbnRyeS5yZXNwb25kZXI7CiAgICBpZiAoaXNDdXN0b21FdmVudChldmVudE5hbWUpKQogICAgICBvYnNlcnZlQ3VzdG9tRXZlbnQoZWxlbWVudCwgZXZlbnROYW1lLCByZXNwb25kZXIpOwogICAgZWxzZQogICAgICBvYnNlcnZlU3RhbmRhcmRFdmVudChlbGVtZW50LCBldmVudE5hbWUsIHJlc3BvbmRlcik7CgogICAgcmV0dXJuIGVsZW1lbnQ7CiAgfQoKICBmdW5jdGlvbiBvYnNlcnZlU3RhbmRhcmRFdmVudChlbGVtZW50LCBldmVudE5hbWUsIHJlc3BvbmRlcikgewogICAgdmFyIGFjdHVhbEV2ZW50TmFtZSA9IGdldERPTUV2ZW50TmFtZShldmVudE5hbWUpOwogICAgaWYgKGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcikgewogICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoYWN0dWFsRXZlbnROYW1lLCByZXNwb25kZXIsIGZhbHNlKTsKICAgIH0gZWxzZSB7CiAgICAgIGVsZW1lbnQuYXR0YWNoRXZlbnQoJ29uJyArIGFjdHVhbEV2ZW50TmFtZSwgcmVzcG9uZGVyKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIG9ic2VydmVDdXN0b21FdmVudChlbGVtZW50LCBldmVudE5hbWUsIHJlc3BvbmRlcikgewogICAgaWYgKGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcikgewogICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RhdGFhdmFpbGFibGUnLCByZXNwb25kZXIsIGZhbHNlKTsKICAgIH0gZWxzZSB7CiAgICAgIGVsZW1lbnQuYXR0YWNoRXZlbnQoJ29uZGF0YWF2YWlsYWJsZScsIHJlc3BvbmRlcik7CiAgICAgIGVsZW1lbnQuYXR0YWNoRXZlbnQoJ29ubG9zZWNhcHR1cmUnLCAgIHJlc3BvbmRlcik7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBzdG9wT2JzZXJ2aW5nKGVsZW1lbnQsIGV2ZW50TmFtZSwgaGFuZGxlcikgewogICAgZWxlbWVudCA9ICQoZWxlbWVudCk7CiAgICB2YXIgaGFuZGxlckdpdmVuID0gIU9iamVjdC5pc1VuZGVmaW5lZChoYW5kbGVyKSwKICAgICBldmVudE5hbWVHaXZlbiA9ICFPYmplY3QuaXNVbmRlZmluZWQoZXZlbnROYW1lKTsKCiAgICBpZiAoIWV2ZW50TmFtZUdpdmVuICYmICFoYW5kbGVyR2l2ZW4pIHsKICAgICAgc3RvcE9ic2VydmluZ0VsZW1lbnQoZWxlbWVudCk7CiAgICAgIHJldHVybiBlbGVtZW50OwogICAgfQoKICAgIGlmICghaGFuZGxlckdpdmVuKSB7CiAgICAgIHN0b3BPYnNlcnZpbmdFdmVudE5hbWUoZWxlbWVudCwgZXZlbnROYW1lKTsKICAgICAgcmV0dXJuIGVsZW1lbnQ7CiAgICB9CgogICAgdmFyIGVudHJ5ID0gdW5yZWdpc3RlcihlbGVtZW50LCBldmVudE5hbWUsIGhhbmRsZXIpOwoKICAgIGlmICghZW50cnkpIHJldHVybiBlbGVtZW50OwogICAgcmVtb3ZlRXZlbnQoZWxlbWVudCwgZXZlbnROYW1lLCBlbnRyeS5yZXNwb25kZXIpOwogICAgcmV0dXJuIGVsZW1lbnQ7CiAgfQoKICBmdW5jdGlvbiBzdG9wT2JzZXJ2aW5nU3RhbmRhcmRFdmVudChlbGVtZW50LCBldmVudE5hbWUsIHJlc3BvbmRlcikgewogICAgdmFyIGFjdHVhbEV2ZW50TmFtZSA9IGdldERPTUV2ZW50TmFtZShldmVudE5hbWUpOwogICAgaWYgKGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcikgewogICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoYWN0dWFsRXZlbnROYW1lLCByZXNwb25kZXIsIGZhbHNlKTsKICAgIH0gZWxzZSB7CiAgICAgIGVsZW1lbnQuZGV0YWNoRXZlbnQoJ29uJyArIGFjdHVhbEV2ZW50TmFtZSwgcmVzcG9uZGVyKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHN0b3BPYnNlcnZpbmdDdXN0b21FdmVudChlbGVtZW50LCBldmVudE5hbWUsIHJlc3BvbmRlcikgewogICAgaWYgKGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcikgewogICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RhdGFhdmFpbGFibGUnLCByZXNwb25kZXIsIGZhbHNlKTsKICAgIH0gZWxzZSB7CiAgICAgIGVsZW1lbnQuZGV0YWNoRXZlbnQoJ29uZGF0YWF2YWlsYWJsZScsIHJlc3BvbmRlcik7CiAgICAgIGVsZW1lbnQuZGV0YWNoRXZlbnQoJ29ubG9zZWNhcHR1cmUnLCAgIHJlc3BvbmRlcik7CiAgICB9CiAgfQoKCgogIGZ1bmN0aW9uIHN0b3BPYnNlcnZpbmdFbGVtZW50KGVsZW1lbnQpIHsKICAgIHZhciB1aWQgPSBnZXRVbmlxdWVFbGVtZW50SUQoZWxlbWVudCksIHJlZ2lzdHJ5ID0gR0xPQkFMLkV2ZW50LmNhY2hlW3VpZF07CiAgICBpZiAoIXJlZ2lzdHJ5KSByZXR1cm47CgogICAgZGVzdHJveVJlZ2lzdHJ5Rm9yRWxlbWVudChlbGVtZW50LCB1aWQpOwoKICAgIHZhciBlbnRyaWVzLCBpOwogICAgZm9yICh2YXIgZXZlbnROYW1lIGluIHJlZ2lzdHJ5KSB7CiAgICAgIGlmIChldmVudE5hbWUgPT09ICdlbGVtZW50JykgY29udGludWU7CgogICAgICBlbnRyaWVzID0gcmVnaXN0cnlbZXZlbnROYW1lXTsKICAgICAgaSA9IGVudHJpZXMubGVuZ3RoOwogICAgICB3aGlsZSAoaS0tKQogICAgICAgIHJlbW92ZUV2ZW50KGVsZW1lbnQsIGV2ZW50TmFtZSwgZW50cmllc1tpXS5yZXNwb25kZXIpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gc3RvcE9ic2VydmluZ0V2ZW50TmFtZShlbGVtZW50LCBldmVudE5hbWUpIHsKICAgIHZhciByZWdpc3RyeSA9IGdldE9yQ3JlYXRlUmVnaXN0cnlGb3IoZWxlbWVudCk7CiAgICB2YXIgZW50cmllcyA9IHJlZ2lzdHJ5W2V2ZW50TmFtZV07CiAgICBpZiAoZW50cmllcykgewogICAgICBkZWxldGUgcmVnaXN0cnlbZXZlbnROYW1lXTsKICAgIH0KCiAgICBlbnRyaWVzID0gZW50cmllcyB8fCBbXTsKCiAgICB2YXIgaSA9IGVudHJpZXMubGVuZ3RoOwogICAgd2hpbGUgKGktLSkKICAgICAgcmVtb3ZlRXZlbnQoZWxlbWVudCwgZXZlbnROYW1lLCBlbnRyaWVzW2ldLnJlc3BvbmRlcik7CgogICAgZm9yICh2YXIgbmFtZSBpbiByZWdpc3RyeSkgewogICAgICBpZiAobmFtZSA9PT0gJ2VsZW1lbnQnKSBjb250aW51ZTsKICAgICAgcmV0dXJuOyAvLyBUaGVyZSBpcyBhbm90aGVyIHJlZ2lzdGVyZWQgZXZlbnQKICAgIH0KCiAgICBkZXN0cm95UmVnaXN0cnlGb3JFbGVtZW50KGVsZW1lbnQpOwogIH0KCgogIGZ1bmN0aW9uIHJlbW92ZUV2ZW50KGVsZW1lbnQsIGV2ZW50TmFtZSwgaGFuZGxlcikgewogICAgaWYgKGlzQ3VzdG9tRXZlbnQoZXZlbnROYW1lKSkKICAgICAgc3RvcE9ic2VydmluZ0N1c3RvbUV2ZW50KGVsZW1lbnQsIGV2ZW50TmFtZSwgaGFuZGxlcik7CiAgICBlbHNlCiAgICAgIHN0b3BPYnNlcnZpbmdTdGFuZGFyZEV2ZW50KGVsZW1lbnQsIGV2ZW50TmFtZSwgaGFuZGxlcik7CiAgfQoKCgogIGZ1bmN0aW9uIGdldEZpcmVUYXJnZXQoZWxlbWVudCkgewogICAgaWYgKGVsZW1lbnQgIT09IGRvY3VtZW50KSByZXR1cm4gZWxlbWVudDsKICAgIGlmIChkb2N1bWVudC5jcmVhdGVFdmVudCAmJiAhZWxlbWVudC5kaXNwYXRjaEV2ZW50KQogICAgICByZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OwogICAgcmV0dXJuIGVsZW1lbnQ7CiAgfQoKICBmdW5jdGlvbiBmaXJlKGVsZW1lbnQsIGV2ZW50TmFtZSwgbWVtbywgYnViYmxlKSB7CiAgICBlbGVtZW50ID0gZ2V0RmlyZVRhcmdldCgkKGVsZW1lbnQpKTsKICAgIGlmIChPYmplY3QuaXNVbmRlZmluZWQoYnViYmxlKSkgYnViYmxlID0gdHJ1ZTsKICAgIG1lbW8gPSBtZW1vIHx8IHt9OwoKICAgIHZhciBldmVudCA9IGZpcmVFdmVudChlbGVtZW50LCBldmVudE5hbWUsIG1lbW8sIGJ1YmJsZSk7CiAgICByZXR1cm4gRXZlbnQuZXh0ZW5kKGV2ZW50KTsKICB9CgogIGZ1bmN0aW9uIGZpcmVFdmVudF9ET00oZWxlbWVudCwgZXZlbnROYW1lLCBtZW1vLCBidWJibGUpIHsKICAgIHZhciBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdIVE1MRXZlbnRzJyk7CiAgICBldmVudC5pbml0RXZlbnQoJ2RhdGFhdmFpbGFibGUnLCBidWJibGUsIHRydWUpOwoKICAgIGV2ZW50LmV2ZW50TmFtZSA9IGV2ZW50TmFtZTsKICAgIGV2ZW50Lm1lbW8gPSBtZW1vOwoKICAgIGVsZW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7CiAgICByZXR1cm4gZXZlbnQ7CiAgfQoKICBmdW5jdGlvbiBmaXJlRXZlbnRfSUUoZWxlbWVudCwgZXZlbnROYW1lLCBtZW1vLCBidWJibGUpIHsKICAgIHZhciBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50T2JqZWN0KCk7CiAgICBldmVudC5ldmVudFR5cGUgPSBidWJibGUgPyAnb25kYXRhYXZhaWxhYmxlJyA6ICdvbmxvc2VjYXB0dXJlJzsKCiAgICBldmVudC5ldmVudE5hbWUgPSBldmVudE5hbWU7CiAgICBldmVudC5tZW1vID0gbWVtbzsKCiAgICBlbGVtZW50LmZpcmVFdmVudChldmVudC5ldmVudFR5cGUsIGV2ZW50KTsKICAgIHJldHVybiBldmVudDsKICB9CgogIHZhciBmaXJlRXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCA/IGZpcmVFdmVudF9ET00gOiBmaXJlRXZlbnRfSUU7CgoKCiAgRXZlbnQuSGFuZGxlciA9IENsYXNzLmNyZWF0ZSh7CiAgICBpbml0aWFsaXplOiBmdW5jdGlvbihlbGVtZW50LCBldmVudE5hbWUsIHNlbGVjdG9yLCBjYWxsYmFjaykgewogICAgICB0aGlzLmVsZW1lbnQgICA9ICQoZWxlbWVudCk7CiAgICAgIHRoaXMuZXZlbnROYW1lID0gZXZlbnROYW1lOwogICAgICB0aGlzLnNlbGVjdG9yICA9IHNlbGVjdG9yOwogICAgICB0aGlzLmNhbGxiYWNrICA9IGNhbGxiYWNrOwogICAgICB0aGlzLmhhbmRsZXIgICA9IHRoaXMuaGFuZGxlRXZlbnQuYmluZCh0aGlzKTsKICAgIH0sCgoKICAgIHN0YXJ0OiBmdW5jdGlvbigpIHsKICAgICAgRXZlbnQub2JzZXJ2ZSh0aGlzLmVsZW1lbnQsIHRoaXMuZXZlbnROYW1lLCB0aGlzLmhhbmRsZXIpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0sCgogICAgc3RvcDogZnVuY3Rpb24oKSB7CiAgICAgIEV2ZW50LnN0b3BPYnNlcnZpbmcodGhpcy5lbGVtZW50LCB0aGlzLmV2ZW50TmFtZSwgdGhpcy5oYW5kbGVyKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9LAoKICAgIGhhbmRsZUV2ZW50OiBmdW5jdGlvbihldmVudCkgewogICAgICB2YXIgZWxlbWVudCA9IEV2ZW50LmZpbmRFbGVtZW50KGV2ZW50LCB0aGlzLnNlbGVjdG9yKTsKICAgICAgaWYgKGVsZW1lbnQpIHRoaXMuY2FsbGJhY2suY2FsbCh0aGlzLmVsZW1lbnQsIGV2ZW50LCBlbGVtZW50KTsKICAgIH0KICB9KTsKCiAgZnVuY3Rpb24gb24oZWxlbWVudCwgZXZlbnROYW1lLCBzZWxlY3RvciwgY2FsbGJhY2spIHsKICAgIGVsZW1lbnQgPSAkKGVsZW1lbnQpOwogICAgaWYgKE9iamVjdC5pc0Z1bmN0aW9uKHNlbGVjdG9yKSAmJiBPYmplY3QuaXNVbmRlZmluZWQoY2FsbGJhY2spKSB7CiAgICAgIGNhbGxiYWNrID0gc2VsZWN0b3IsIHNlbGVjdG9yID0gbnVsbDsKICAgIH0KCiAgICByZXR1cm4gbmV3IEV2ZW50LkhhbmRsZXIoZWxlbWVudCwgZXZlbnROYW1lLCBzZWxlY3RvciwgY2FsbGJhY2spLnN0YXJ0KCk7CiAgfQoKICBPYmplY3QuZXh0ZW5kKEV2ZW50LCBFdmVudC5NZXRob2RzKTsKCiAgT2JqZWN0LmV4dGVuZChFdmVudCwgewogICAgZmlyZTogICAgICAgICAgZmlyZSwKICAgIG9ic2VydmU6ICAgICAgIG9ic2VydmUsCiAgICBzdG9wT2JzZXJ2aW5nOiBzdG9wT2JzZXJ2aW5nLAogICAgb246ICAgICAgICAgICAgb24KICB9KTsKCiAgRWxlbWVudC5hZGRNZXRob2RzKHsKICAgIGZpcmU6ICAgICAgICAgIGZpcmUsCgogICAgb2JzZXJ2ZTogICAgICAgb2JzZXJ2ZSwKCiAgICBzdG9wT2JzZXJ2aW5nOiBzdG9wT2JzZXJ2aW5nLAoKICAgIG9uOiAgICAgICAgICAgIG9uCiAgfSk7CgogIE9iamVjdC5leHRlbmQoZG9jdW1lbnQsIHsKICAgIGZpcmU6ICAgICAgICAgIGZpcmUubWV0aG9kaXplKCksCgogICAgb2JzZXJ2ZTogICAgICAgb2JzZXJ2ZS5tZXRob2RpemUoKSwKCiAgICBzdG9wT2JzZXJ2aW5nOiBzdG9wT2JzZXJ2aW5nLm1ldGhvZGl6ZSgpLAoKICAgIG9uOiAgICAgICAgICAgIG9uLm1ldGhvZGl6ZSgpLAoKICAgIGxvYWRlZDogICAgICAgIGZhbHNlCiAgfSk7CgogIGlmIChHTE9CQUwuRXZlbnQpIE9iamVjdC5leHRlbmQod2luZG93LkV2ZW50LCBFdmVudCk7CiAgZWxzZSBHTE9CQUwuRXZlbnQgPSBFdmVudDsKCiAgR0xPQkFMLkV2ZW50LmNhY2hlID0ge307CgogIGZ1bmN0aW9uIGRlc3Ryb3lDYWNoZV9JRSgpIHsKICAgIEdMT0JBTC5FdmVudC5jYWNoZSA9IG51bGw7CiAgfQoKICBpZiAod2luZG93LmF0dGFjaEV2ZW50KQogICAgd2luZG93LmF0dGFjaEV2ZW50KCdvbnVubG9hZCcsIGRlc3Ryb3lDYWNoZV9JRSk7CgogIERJViA9IG51bGw7CiAgZG9jRWwgPSBudWxsOwp9KSh0aGlzKTsKCihmdW5jdGlvbihHTE9CQUwpIHsKICAvKiBDb2RlIGZvciBjcmVhdGluZyBsZWFrLWZyZWUgZXZlbnQgcmVzcG9uZGVycyBpcyBiYXNlZCBvbiB3b3JrIGJ5CiAgIEpvaG4tRGF2aWQgRGFsdG9uLiAqLwoKICB2YXIgZG9jRWwgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7CiAgdmFyIE1PVVNFRU5URVJfTU9VU0VMRUFWRV9FVkVOVFNfU1VQUE9SVEVEID0gJ29ubW91c2VlbnRlcicgaW4gZG9jRWwKICAgICYmICdvbm1vdXNlbGVhdmUnIGluIGRvY0VsOwoKICBmdW5jdGlvbiBpc1NpbXVsYXRlZE1vdXNlRW50ZXJMZWF2ZUV2ZW50KGV2ZW50TmFtZSkgewogICAgcmV0dXJuICFNT1VTRUVOVEVSX01PVVNFTEVBVkVfRVZFTlRTX1NVUFBPUlRFRCAmJgogICAgIChldmVudE5hbWUgPT09ICdtb3VzZWVudGVyJyB8fCBldmVudE5hbWUgPT09ICdtb3VzZWxlYXZlJyk7CiAgfQoKICBmdW5jdGlvbiBjcmVhdGVSZXNwb25kZXIodWlkLCBldmVudE5hbWUsIGhhbmRsZXIpIHsKICAgIGlmIChFdmVudC5faXNDdXN0b21FdmVudChldmVudE5hbWUpKQogICAgICByZXR1cm4gY3JlYXRlUmVzcG9uZGVyRm9yQ3VzdG9tRXZlbnQodWlkLCBldmVudE5hbWUsIGhhbmRsZXIpOwogICAgaWYgKGlzU2ltdWxhdGVkTW91c2VFbnRlckxlYXZlRXZlbnQoZXZlbnROYW1lKSkKICAgICAgcmV0dXJuIGNyZWF0ZU1vdXNlRW50ZXJMZWF2ZVJlc3BvbmRlcih1aWQsIGV2ZW50TmFtZSwgaGFuZGxlcik7CgogICAgcmV0dXJuIGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgIGlmICghRXZlbnQuY2FjaGUpIHJldHVybjsKCiAgICAgIHZhciBlbGVtZW50ID0gRXZlbnQuY2FjaGVbdWlkXS5lbGVtZW50OwogICAgICBFdmVudC5leHRlbmQoZXZlbnQsIGVsZW1lbnQpOwogICAgICBoYW5kbGVyLmNhbGwoZWxlbWVudCwgZXZlbnQpOwogICAgfTsKICB9CgogIGZ1bmN0aW9uIGNyZWF0ZVJlc3BvbmRlckZvckN1c3RvbUV2ZW50KHVpZCwgZXZlbnROYW1lLCBoYW5kbGVyKSB7CiAgICByZXR1cm4gZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgdmFyIGNhY2hlID0gRXZlbnQuY2FjaGVbdWlkXTsKICAgICAgdmFyIGVsZW1lbnQgPSAgY2FjaGUgJiYgY2FjaGUuZWxlbWVudDsKCiAgICAgIGlmIChPYmplY3QuaXNVbmRlZmluZWQoZXZlbnQuZXZlbnROYW1lKSkKICAgICAgICByZXR1cm4gZmFsc2U7CgogICAgICBpZiAoZXZlbnQuZXZlbnROYW1lICE9PSBldmVudE5hbWUpCiAgICAgICAgcmV0dXJuIGZhbHNlOwoKICAgICAgRXZlbnQuZXh0ZW5kKGV2ZW50LCBlbGVtZW50KTsKICAgICAgaGFuZGxlci5jYWxsKGVsZW1lbnQsIGV2ZW50KTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiBjcmVhdGVNb3VzZUVudGVyTGVhdmVSZXNwb25kZXIodWlkLCBldmVudE5hbWUsIGhhbmRsZXIpIHsKICAgIHJldHVybiBmdW5jdGlvbihldmVudCkgewogICAgICB2YXIgZWxlbWVudCA9IEV2ZW50LmNhY2hlW3VpZF0uZWxlbWVudDsKCiAgICAgIEV2ZW50LmV4dGVuZChldmVudCwgZWxlbWVudCk7CiAgICAgIHZhciBwYXJlbnQgPSBldmVudC5yZWxhdGVkVGFyZ2V0OwoKICAgICAgd2hpbGUgKHBhcmVudCAmJiBwYXJlbnQgIT09IGVsZW1lbnQpIHsKICAgICAgICB0cnkgeyBwYXJlbnQgPSBwYXJlbnQucGFyZW50Tm9kZTsgfQogICAgICAgIGNhdGNoKGUpIHsgcGFyZW50ID0gZWxlbWVudDsgfQogICAgICB9CgogICAgICBpZiAocGFyZW50ID09PSBlbGVtZW50KSByZXR1cm47CiAgICAgIGhhbmRsZXIuY2FsbChlbGVtZW50LCBldmVudCk7CiAgICB9CiAgfQoKICBHTE9CQUwuRXZlbnQuX2NyZWF0ZVJlc3BvbmRlciA9IGNyZWF0ZVJlc3BvbmRlcjsKICBkb2NFbCA9IG51bGw7Cn0pKHRoaXMpOwoKKGZ1bmN0aW9uKEdMT0JBTCkgewogIC8qIFN1cHBvcnQgZm9yIHRoZSBET01Db250ZW50TG9hZGVkIGV2ZW50IGlzIGJhc2VkIG9uIHdvcmsgYnkgRGFuIFdlYmIsCiAgICAgTWF0dGhpYXMgTWlsbGVyLCBEZWFuIEVkd2FyZHMsIEpvaG4gUmVzaWcsIGFuZCBEaWVnbyBQZXJpbmkuICovCgogIHZhciBUSU1FUjsKCiAgZnVuY3Rpb24gZmlyZUNvbnRlbnRMb2FkZWRFdmVudCgpIHsKICAgIGlmIChkb2N1bWVudC5sb2FkZWQpIHJldHVybjsKICAgIGlmIChUSU1FUikgd2luZG93LmNsZWFyVGltZW91dChUSU1FUik7CiAgICBkb2N1bWVudC5sb2FkZWQgPSB0cnVlOwogICAgZG9jdW1lbnQuZmlyZSgnZG9tOmxvYWRlZCcpOwogIH0KCiAgZnVuY3Rpb24gY2hlY2tSZWFkeVN0YXRlKCkgewogICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScpIHsKICAgICAgZG9jdW1lbnQuZGV0YWNoRXZlbnQoJ29ucmVhZHlzdGF0ZWNoYW5nZScsIGNoZWNrUmVhZHlTdGF0ZSk7CiAgICAgIGZpcmVDb250ZW50TG9hZGVkRXZlbnQoKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIHBvbGxEb1Njcm9sbCgpIHsKICAgIHRyeSB7CiAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbCgnbGVmdCcpOwogICAgfSBjYXRjaCAoZSkgewogICAgICBUSU1FUiA9IHBvbGxEb1Njcm9sbC5kZWZlcigpOwogICAgICByZXR1cm47CiAgICB9CgogICAgZmlyZUNvbnRlbnRMb2FkZWRFdmVudCgpOwogIH0KCgogIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnKSB7CiAgICBmaXJlQ29udGVudExvYWRlZEV2ZW50KCk7CiAgICByZXR1cm47CiAgfQoKICBpZiAoZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcikgewogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZpcmVDb250ZW50TG9hZGVkRXZlbnQsIGZhbHNlKTsKICB9IGVsc2UgewogICAgZG9jdW1lbnQuYXR0YWNoRXZlbnQoJ29ucmVhZHlzdGF0ZWNoYW5nZScsIGNoZWNrUmVhZHlTdGF0ZSk7CiAgICBpZiAod2luZG93ID09IHRvcCkgVElNRVIgPSBwb2xsRG9TY3JvbGwuZGVmZXIoKTsKICB9CgogIEV2ZW50Lm9ic2VydmUod2luZG93LCAnbG9hZCcsIGZpcmVDb250ZW50TG9hZGVkRXZlbnQpOwp9KSh0aGlzKTsKCgpFbGVtZW50LmFkZE1ldGhvZHMoKTsKLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIERFUFJFQ0FURUQgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCgpIYXNoLnRvUXVlcnlTdHJpbmcgPSBPYmplY3QudG9RdWVyeVN0cmluZzsKCnZhciBUb2dnbGUgPSB7IGRpc3BsYXk6IEVsZW1lbnQudG9nZ2xlIH07CgpFbGVtZW50LmFkZE1ldGhvZHMoewogIGNoaWxkT2Y6IEVsZW1lbnQuTWV0aG9kcy5kZXNjZW5kYW50T2YKfSk7Cgp2YXIgSW5zZXJ0aW9uID0gewogIEJlZm9yZTogZnVuY3Rpb24oZWxlbWVudCwgY29udGVudCkgewogICAgcmV0dXJuIEVsZW1lbnQuaW5zZXJ0KGVsZW1lbnQsIHtiZWZvcmU6Y29udGVudH0pOwogIH0sCgogIFRvcDogZnVuY3Rpb24oZWxlbWVudCwgY29udGVudCkgewogICAgcmV0dXJuIEVsZW1lbnQuaW5zZXJ0KGVsZW1lbnQsIHt0b3A6Y29udGVudH0pOwogIH0sCgogIEJvdHRvbTogZnVuY3Rpb24oZWxlbWVudCwgY29udGVudCkgewogICAgcmV0dXJuIEVsZW1lbnQuaW5zZXJ0KGVsZW1lbnQsIHtib3R0b206Y29udGVudH0pOwogIH0sCgogIEFmdGVyOiBmdW5jdGlvbihlbGVtZW50LCBjb250ZW50KSB7CiAgICByZXR1cm4gRWxlbWVudC5pbnNlcnQoZWxlbWVudCwge2FmdGVyOmNvbnRlbnR9KTsKICB9Cn07Cgp2YXIgJGNvbnRpbnVlID0gbmV3IEVycm9yKCcidGhyb3cgJGNvbnRpbnVlIiBpcyBkZXByZWNhdGVkLCB1c2UgInJldHVybiIgaW5zdGVhZCcpOwoKdmFyIFBvc2l0aW9uID0gewogIGluY2x1ZGVTY3JvbGxPZmZzZXRzOiBmYWxzZSwKCiAgcHJlcGFyZTogZnVuY3Rpb24oKSB7CiAgICB0aGlzLmRlbHRhWCA9ICB3aW5kb3cucGFnZVhPZmZzZXQKICAgICAgICAgICAgICAgIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0CiAgICAgICAgICAgICAgICB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQKICAgICAgICAgICAgICAgIHx8IDA7CiAgICB0aGlzLmRlbHRhWSA9ICB3aW5kb3cucGFnZVlPZmZzZXQKICAgICAgICAgICAgICAgIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AKICAgICAgICAgICAgICAgIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wCiAgICAgICAgICAgICAgICB8fCAwOwogIH0sCgogIHdpdGhpbjogZnVuY3Rpb24oZWxlbWVudCwgeCwgeSkgewogICAgaWYgKHRoaXMuaW5jbHVkZVNjcm9sbE9mZnNldHMpCiAgICAgIHJldHVybiB0aGlzLndpdGhpbkluY2x1ZGluZ1Njcm9sbG9mZnNldHMoZWxlbWVudCwgeCwgeSk7CiAgICB0aGlzLnhjb21wID0geDsKICAgIHRoaXMueWNvbXAgPSB5OwogICAgdGhpcy5vZmZzZXQgPSBFbGVtZW50LmN1bXVsYXRpdmVPZmZzZXQoZWxlbWVudCk7CgogICAgcmV0dXJuICh5ID49IHRoaXMub2Zmc2V0WzFdICYmCiAgICAgICAgICAgIHkgPCAgdGhpcy5vZmZzZXRbMV0gKyBlbGVtZW50Lm9mZnNldEhlaWdodCAmJgogICAgICAgICAgICB4ID49IHRoaXMub2Zmc2V0WzBdICYmCiAgICAgICAgICAgIHggPCAgdGhpcy5vZmZzZXRbMF0gKyBlbGVtZW50Lm9mZnNldFdpZHRoKTsKICB9LAoKICB3aXRoaW5JbmNsdWRpbmdTY3JvbGxvZmZzZXRzOiBmdW5jdGlvbihlbGVtZW50LCB4LCB5KSB7CiAgICB2YXIgb2Zmc2V0Y2FjaGUgPSBFbGVtZW50LmN1bXVsYXRpdmVTY3JvbGxPZmZzZXQoZWxlbWVudCk7CgogICAgdGhpcy54Y29tcCA9IHggKyBvZmZzZXRjYWNoZVswXSAtIHRoaXMuZGVsdGFYOwogICAgdGhpcy55Y29tcCA9IHkgKyBvZmZzZXRjYWNoZVsxXSAtIHRoaXMuZGVsdGFZOwogICAgdGhpcy5vZmZzZXQgPSBFbGVtZW50LmN1bXVsYXRpdmVPZmZzZXQoZWxlbWVudCk7CgogICAgcmV0dXJuICh0aGlzLnljb21wID49IHRoaXMub2Zmc2V0WzFdICYmCiAgICAgICAgICAgIHRoaXMueWNvbXAgPCAgdGhpcy5vZmZzZXRbMV0gKyBlbGVtZW50Lm9mZnNldEhlaWdodCAmJgogICAgICAgICAgICB0aGlzLnhjb21wID49IHRoaXMub2Zmc2V0WzBdICYmCiAgICAgICAgICAgIHRoaXMueGNvbXAgPCAgdGhpcy5vZmZzZXRbMF0gKyBlbGVtZW50Lm9mZnNldFdpZHRoKTsKICB9LAoKICBvdmVybGFwOiBmdW5jdGlvbihtb2RlLCBlbGVtZW50KSB7CiAgICBpZiAoIW1vZGUpIHJldHVybiAwOwogICAgaWYgKG1vZGUgPT0gJ3ZlcnRpY2FsJykKICAgICAgcmV0dXJuICgodGhpcy5vZmZzZXRbMV0gKyBlbGVtZW50Lm9mZnNldEhlaWdodCkgLSB0aGlzLnljb21wKSAvCiAgICAgICAgZWxlbWVudC5vZmZzZXRIZWlnaHQ7CiAgICBpZiAobW9kZSA9PSAnaG9yaXpvbnRhbCcpCiAgICAgIHJldHVybiAoKHRoaXMub2Zmc2V0WzBdICsgZWxlbWVudC5vZmZzZXRXaWR0aCkgLSB0aGlzLnhjb21wKSAvCiAgICAgICAgZWxlbWVudC5vZmZzZXRXaWR0aDsKICB9LAoKCiAgY3VtdWxhdGl2ZU9mZnNldDogRWxlbWVudC5NZXRob2RzLmN1bXVsYXRpdmVPZmZzZXQsCgogIHBvc2l0aW9uZWRPZmZzZXQ6IEVsZW1lbnQuTWV0aG9kcy5wb3NpdGlvbmVkT2Zmc2V0LAoKICBhYnNvbHV0aXplOiBmdW5jdGlvbihlbGVtZW50KSB7CiAgICBQb3NpdGlvbi5wcmVwYXJlKCk7CiAgICByZXR1cm4gRWxlbWVudC5hYnNvbHV0aXplKGVsZW1lbnQpOwogIH0sCgogIHJlbGF0aXZpemU6IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgIFBvc2l0aW9uLnByZXBhcmUoKTsKICAgIHJldHVybiBFbGVtZW50LnJlbGF0aXZpemUoZWxlbWVudCk7CiAgfSwKCiAgcmVhbE9mZnNldDogRWxlbWVudC5NZXRob2RzLmN1bXVsYXRpdmVTY3JvbGxPZmZzZXQsCgogIG9mZnNldFBhcmVudDogRWxlbWVudC5NZXRob2RzLmdldE9mZnNldFBhcmVudCwKCiAgcGFnZTogRWxlbWVudC5NZXRob2RzLnZpZXdwb3J0T2Zmc2V0LAoKICBjbG9uZTogZnVuY3Rpb24oc291cmNlLCB0YXJnZXQsIG9wdGlvbnMpIHsKICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHsgfTsKICAgIHJldHVybiBFbGVtZW50LmNsb25lUG9zaXRpb24odGFyZ2V0LCBzb3VyY2UsIG9wdGlvbnMpOwogIH0KfTsKCi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwoKaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lID0gZnVuY3Rpb24oaW5zdGFuY2VNZXRob2RzKXsKICBmdW5jdGlvbiBpdGVyKG5hbWUpIHsKICAgIHJldHVybiBuYW1lLmJsYW5rKCkgPyBudWxsIDogIltjb250YWlucyhjb25jYXQoJyAnLCBAY2xhc3MsICcgJyksICcgIiArIG5hbWUgKyAiICcpXSI7CiAgfQoKICBpbnN0YW5jZU1ldGhvZHMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSA9IFByb3RvdHlwZS5Ccm93c2VyRmVhdHVyZXMuWFBhdGggPwogIGZ1bmN0aW9uKGVsZW1lbnQsIGNsYXNzTmFtZSkgewogICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lLnRvU3RyaW5nKCkuc3RyaXAoKTsKICAgIHZhciBjb25kID0gL1xzLy50ZXN0KGNsYXNzTmFtZSkgPyAkdyhjbGFzc05hbWUpLm1hcChpdGVyKS5qb2luKCcnKSA6IGl0ZXIoY2xhc3NOYW1lKTsKICAgIHJldHVybiBjb25kID8gZG9jdW1lbnQuX2dldEVsZW1lbnRzQnlYUGF0aCgnLi8vKicgKyBjb25kLCBlbGVtZW50KSA6IFtdOwogIH0gOiBmdW5jdGlvbihlbGVtZW50LCBjbGFzc05hbWUpIHsKICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZS50b1N0cmluZygpLnN0cmlwKCk7CiAgICB2YXIgZWxlbWVudHMgPSBbXSwgY2xhc3NOYW1lcyA9ICgvXHMvLnRlc3QoY2xhc3NOYW1lKSA/ICR3KGNsYXNzTmFtZSkgOiBudWxsKTsKICAgIGlmICghY2xhc3NOYW1lcyAmJiAhY2xhc3NOYW1lKSByZXR1cm4gZWxlbWVudHM7CgogICAgdmFyIG5vZGVzID0gJChlbGVtZW50KS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnKicpOwogICAgY2xhc3NOYW1lID0gJyAnICsgY2xhc3NOYW1lICsgJyAnOwoKICAgIGZvciAodmFyIGkgPSAwLCBjaGlsZCwgY247IGNoaWxkID0gbm9kZXNbaV07IGkrKykgewogICAgICBpZiAoY2hpbGQuY2xhc3NOYW1lICYmIChjbiA9ICcgJyArIGNoaWxkLmNsYXNzTmFtZSArICcgJykgJiYgKGNuLmluY2x1ZGUoY2xhc3NOYW1lKSB8fAogICAgICAgICAgKGNsYXNzTmFtZXMgJiYgY2xhc3NOYW1lcy5hbGwoZnVuY3Rpb24obmFtZSkgewogICAgICAgICAgICByZXR1cm4gIW5hbWUudG9TdHJpbmcoKS5ibGFuaygpICYmIGNuLmluY2x1ZGUoJyAnICsgbmFtZSArICcgJyk7CiAgICAgICAgICB9KSkpKQogICAgICAgIGVsZW1lbnRzLnB1c2goRWxlbWVudC5leHRlbmQoY2hpbGQpKTsKICAgIH0KICAgIHJldHVybiBlbGVtZW50czsKICB9OwoKICByZXR1cm4gZnVuY3Rpb24oY2xhc3NOYW1lLCBwYXJlbnRFbGVtZW50KSB7CiAgICByZXR1cm4gJChwYXJlbnRFbGVtZW50IHx8IGRvY3VtZW50LmJvZHkpLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoY2xhc3NOYW1lKTsKICB9Owp9KEVsZW1lbnQuTWV0aG9kcyk7CgovKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KCkVsZW1lbnQuQ2xhc3NOYW1lcyA9IENsYXNzLmNyZWF0ZSgpOwpFbGVtZW50LkNsYXNzTmFtZXMucHJvdG90eXBlID0gewogIGluaXRpYWxpemU6IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgIHRoaXMuZWxlbWVudCA9ICQoZWxlbWVudCk7CiAgfSwKCiAgX2VhY2g6IGZ1bmN0aW9uKGl0ZXJhdG9yLCBjb250ZXh0KSB7CiAgICB0aGlzLmVsZW1lbnQuY2xhc3NOYW1lLnNwbGl0KC9ccysvKS5zZWxlY3QoZnVuY3Rpb24obmFtZSkgewogICAgICByZXR1cm4gbmFtZS5sZW5ndGggPiAwOwogICAgfSkuX2VhY2goaXRlcmF0b3IsIGNvbnRleHQpOwogIH0sCgogIHNldDogZnVuY3Rpb24oY2xhc3NOYW1lKSB7CiAgICB0aGlzLmVsZW1lbnQuY2xhc3NOYW1lID0gY2xhc3NOYW1lOwogIH0sCgogIGFkZDogZnVuY3Rpb24oY2xhc3NOYW1lVG9BZGQpIHsKICAgIGlmICh0aGlzLmluY2x1ZGUoY2xhc3NOYW1lVG9BZGQpKSByZXR1cm47CiAgICB0aGlzLnNldCgkQSh0aGlzKS5jb25jYXQoY2xhc3NOYW1lVG9BZGQpLmpvaW4oJyAnKSk7CiAgfSwKCiAgcmVtb3ZlOiBmdW5jdGlvbihjbGFzc05hbWVUb1JlbW92ZSkgewogICAgaWYgKCF0aGlzLmluY2x1ZGUoY2xhc3NOYW1lVG9SZW1vdmUpKSByZXR1cm47CiAgICB0aGlzLnNldCgkQSh0aGlzKS53aXRob3V0KGNsYXNzTmFtZVRvUmVtb3ZlKS5qb2luKCcgJykpOwogIH0sCgogIHRvU3RyaW5nOiBmdW5jdGlvbigpIHsKICAgIHJldHVybiAkQSh0aGlzKS5qb2luKCcgJyk7CiAgfQp9OwoKT2JqZWN0LmV4dGVuZChFbGVtZW50LkNsYXNzTmFtZXMucHJvdG90eXBlLCBFbnVtZXJhYmxlKTsKCi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLwoKKGZ1bmN0aW9uKCkgewogIHdpbmRvdy5TZWxlY3RvciA9IENsYXNzLmNyZWF0ZSh7CiAgICBpbml0aWFsaXplOiBmdW5jdGlvbihleHByZXNzaW9uKSB7CiAgICAgIHRoaXMuZXhwcmVzc2lvbiA9IGV4cHJlc3Npb24uc3RyaXAoKTsKICAgIH0sCgogICAgZmluZEVsZW1lbnRzOiBmdW5jdGlvbihyb290RWxlbWVudCkgewogICAgICByZXR1cm4gUHJvdG90eXBlLlNlbGVjdG9yLnNlbGVjdCh0aGlzLmV4cHJlc3Npb24sIHJvb3RFbGVtZW50KTsKICAgIH0sCgogICAgbWF0Y2g6IGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgcmV0dXJuIFByb3RvdHlwZS5TZWxlY3Rvci5tYXRjaChlbGVtZW50LCB0aGlzLmV4cHJlc3Npb24pOwogICAgfSwKCiAgICB0b1N0cmluZzogZnVuY3Rpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLmV4cHJlc3Npb247CiAgICB9LAoKICAgIGluc3BlY3Q6IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gIiM8U2VsZWN0b3I6ICIgKyB0aGlzLmV4cHJlc3Npb24gKyAiPiI7CiAgICB9CiAgfSk7CgogIE9iamVjdC5leHRlbmQoU2VsZWN0b3IsIHsKICAgIG1hdGNoRWxlbWVudHM6IGZ1bmN0aW9uKGVsZW1lbnRzLCBleHByZXNzaW9uKSB7CiAgICAgIHZhciBtYXRjaCA9IFByb3RvdHlwZS5TZWxlY3Rvci5tYXRjaCwKICAgICAgICAgIHJlc3VsdHMgPSBbXTsKCiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBlbGVtZW50cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgewogICAgICAgIHZhciBlbGVtZW50ID0gZWxlbWVudHNbaV07CiAgICAgICAgaWYgKG1hdGNoKGVsZW1lbnQsIGV4cHJlc3Npb24pKSB7CiAgICAgICAgICByZXN1bHRzLnB1c2goRWxlbWVudC5leHRlbmQoZWxlbWVudCkpOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gcmVzdWx0czsKICAgIH0sCgogICAgZmluZEVsZW1lbnQ6IGZ1bmN0aW9uKGVsZW1lbnRzLCBleHByZXNzaW9uLCBpbmRleCkgewogICAgICBpbmRleCA9IGluZGV4IHx8IDA7CiAgICAgIHZhciBtYXRjaEluZGV4ID0gMCwgZWxlbWVudDsKICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgICAgZWxlbWVudCA9IGVsZW1lbnRzW2ldOwogICAgICAgIGlmIChQcm90b3R5cGUuU2VsZWN0b3IubWF0Y2goZWxlbWVudCwgZXhwcmVzc2lvbikgJiYgaW5kZXggPT09IG1hdGNoSW5kZXgrKykgewogICAgICAgICAgcmV0dXJuIEVsZW1lbnQuZXh0ZW5kKGVsZW1lbnQpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICBmaW5kQ2hpbGRFbGVtZW50czogZnVuY3Rpb24oZWxlbWVudCwgZXhwcmVzc2lvbnMpIHsKICAgICAgdmFyIHNlbGVjdG9yID0gZXhwcmVzc2lvbnMudG9BcnJheSgpLmpvaW4oJywgJyk7CiAgICAgIHJldHVybiBQcm90b3R5cGUuU2VsZWN0b3Iuc2VsZWN0KHNlbGVjdG9yLCBlbGVtZW50IHx8IGRvY3VtZW50KTsKICAgIH0KICB9KTsKfSkoKTsK</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <TcpPackets>
          <PacketInfo time="517318250" offset="0" length="5520" />
          <PacketInfo time="517318421" offset="5520" length="1380" />
          <PacketInfo time="517318421" offset="6900" length="1460" />
          <PacketInfo time="517318421" offset="8360" length="1300" />
          <PacketInfo time="517318968" offset="9660" length="1380" />
          <PacketInfo time="517319296" offset="11040" length="1380" />
          <PacketInfo time="517319296" offset="12420" length="1460" />
          <PacketInfo time="517319312" offset="13880" length="1300" />
          <PacketInfo time="517319468" offset="15180" length="1460" />
          <PacketInfo time="517319468" offset="16640" length="5840" />
          <PacketInfo time="517319484" offset="22480" length="5120" />
          <PacketInfo time="517319640" offset="27600" length="1460" />
          <PacketInfo time="517319640" offset="29060" length="5520" />
          <PacketInfo time="517319640" offset="34580" length="1300" />
          <PacketInfo time="517319812" offset="35880" length="1460" />
          <PacketInfo time="517319812" offset="37340" length="4220" />
          <PacketInfo time="517319812" offset="41560" length="2680" />
          <PacketInfo time="517319828" offset="44240" length="1300" />
          <PacketInfo time="517319984" offset="45540" length="1380" />
          <PacketInfo time="517319984" offset="46920" length="1460" />
          <PacketInfo time="517319984" offset="48380" length="4060" />
          <PacketInfo time="517320453" offset="52440" length="1380" />
          <PacketInfo time="517320796" offset="53820" length="1460" />
          <PacketInfo time="517320812" offset="55280" length="4380" />
          <PacketInfo time="517320828" offset="59660" length="6580" />
          <PacketInfo time="517320968" offset="66240" length="1460" />
          <PacketInfo time="517320968" offset="67700" length="4060" />
          <PacketInfo time="517320984" offset="71760" length="1380" />
          <PacketInfo time="517321156" offset="73140" length="1380" />
          <PacketInfo time="517321156" offset="74520" length="1460" />
          <PacketInfo time="517321171" offset="75980" length="4060" />
          <PacketInfo time="517321343" offset="80040" length="1380" />
          <PacketInfo time="517321359" offset="81420" length="2760" />
          <PacketInfo time="517321828" offset="84180" length="1380" />
          <PacketInfo time="517322171" offset="85560" length="1460" />
          <PacketInfo time="517322171" offset="87020" length="2884" />
          <PacketInfo time="517322171" offset="89904" length="2556" />
          <PacketInfo time="517322640" offset="92460" length="1460" />
          <PacketInfo time="517322656" offset="93920" length="4060" />
          <PacketInfo time="517323031" offset="97980" length="1460" />
          <PacketInfo time="517323031" offset="99440" length="2760" />
          <PacketInfo time="517323031" offset="102200" length="2680" />
          <PacketInfo time="517323171" offset="104880" length="2760" />
          <PacketInfo time="517323171" offset="107640" length="1380" />
          <PacketInfo time="517323656" offset="109020" length="1380" />
          <PacketInfo time="517323984" offset="110400" length="1460" />
          <PacketInfo time="517323984" offset="111860" length="4060" />
          <PacketInfo time="517324140" offset="115920" length="1460" />
          <PacketInfo time="517324140" offset="117380" length="1300" />
          <PacketInfo time="517324156" offset="118680" length="1380" />
          <PacketInfo time="517324203" offset="120060" length="1380" />
          <PacketInfo time="517324312" offset="121440" length="1380" />
          <PacketInfo time="517324312" offset="122820" length="1460" />
          <PacketInfo time="517324328" offset="124280" length="1300" />
          <PacketInfo time="517324328" offset="125580" length="2760" />
          <PacketInfo time="517324656" offset="128340" length="1380" />
          <PacketInfo time="517324671" offset="129720" length="1460" />
          <PacketInfo time="517324671" offset="131180" length="5440" />
          <PacketInfo time="517325015" offset="136620" length="1460" />
          <PacketInfo time="517325015" offset="138080" length="1460" />
          <PacketInfo time="517325031" offset="139540" length="2920" />
          <PacketInfo time="517325031" offset="142460" length="1460" />
          <PacketInfo time="517325031" offset="143920" length="3740" />
          <PacketInfo time="517325156" offset="147660" length="1380" />
          <PacketInfo time="517325156" offset="149040" length="1460" />
          <PacketInfo time="517325171" offset="150500" length="1300" />
          <PacketInfo time="517325687" offset="151800" length="1380" />
          <PacketInfo time="517325968" offset="153180" length="1380" />
          <PacketInfo time="517325984" offset="154560" length="2920" />
          <PacketInfo time="517325984" offset="157480" length="3980" />
          <PacketInfo time="517326156" offset="161460" length="1460" />
          <PacketInfo time="517326156" offset="162920" length="2760" />
          <PacketInfo time="517326171" offset="165680" length="1300" />
          <PacketInfo time="517326640" offset="166980" length="1380" />
          <PacketInfo time="517326968" offset="168360" length="1380" />
          <PacketInfo time="517326968" offset="169740" length="1460" />
          <PacketInfo time="517326984" offset="171200" length="1300" />
          <PacketInfo time="517327453" offset="172500" length="1460" />
          <PacketInfo time="517327453" offset="173960" length="2680" />
          <PacketInfo time="517327937" offset="176640" length="1380" />
          <PacketInfo time="517328140" offset="178020" length="1460" />
          <PacketInfo time="517328156" offset="179480" length="2680" />
          <PacketInfo time="517328343" offset="182160" length="1460" />
          <PacketInfo time="517328359" offset="183620" length="4060" />
          <PacketInfo time="517328546" offset="187680" length="1460" />
          <PacketInfo time="517328546" offset="189140" length="1300" />
          <PacketInfo time="517328546" offset="190440" length="1460" />
          <PacketInfo time="517328562" offset="191900" length="1300" />
          <PacketInfo time="517328734" offset="193200" length="1380" />
          <PacketInfo time="517328734" offset="194580" length="1460" />
          <PacketInfo time="517328750" offset="196040" length="1300" />
          <PacketInfo time="517328750" offset="197340" length="1460" />
          <PacketInfo time="517328750" offset="198800" length="1264" />
        </TcpPackets>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="131" hostname="banking.megasol.se" path="/images/help.gif" url="http://banking.megasol.se/images/help.gif" ip="62.109.53.196" port="80" connectionId="14" origin="HTML" frame="1" startDateTime="2019-01-03T14:43:15.392+05:30" startTime="517318296" endTime="517318484">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="Host" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YmFua2luZy5tZWdhc29sLnNl</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzcxLjAuMzU3OC45OCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aW1hZ2Uvd2VicCxpbWFnZS9hcG5nLGltYWdlLyosKi8qO3E9MC44</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cDovL2JhbmtpbmcubWVnYXNvbC5zZS9sb2dpbi5td3M=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cookie" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y29ybmljaGVuZXRfRk5CTD1BQkQ5N0JGMC04ODE0LTQ2NzAtQUVGQy0yNTk2QjUyRDA1Qzg7IElkbGVUaW1lPTkwMA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIC9pbWFnZXMvaGVscC5naWYgSFRUUC8xLjENCkhvc3Q6IGJhbmtpbmcubWVnYXNvbC5zZQ0KQ29ubmVjdGlvbjoga2VlcC1hbGl2ZQ0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzcxLjAuMzU3OC45OCBTYWZhcmkvNTM3LjM2DQpBY2NlcHQ6IGltYWdlL3dlYnAsaW1hZ2UvYXBuZyxpbWFnZS8qLCovKjtxPTAuOA0KUmVmZXJlcjogaHR0cDovL2JhbmtpbmcubWVnYXNvbC5zZS9sb2dpbi5td3MNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUyxlbjtxPTAuOQ0KQ29va2llOiBjb3JuaWNoZW5ldF9GTkJMPUFCRDk3QkYwLTg4MTQtNDY3MC1BRUZDLTI1OTZCNTJEMDVDODsgSWRsZVRpbWU9OTAwDQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="cornichenet_FNBL" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>QUJEOTdCRjAtODgxNC00NjcwLUFFRkMtMjU5NkI1MkQwNUM4</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="IdleTime" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>OTAw</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>127</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Content-Type" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aW1hZ2UvZ2lm</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Last-Modified" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAyOCBKdW4gMjAxOCAxOToyNDozNiBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ETag" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IjA3MjU2YTYxNWZkNDE6MCI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Server" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TWljcm9zb2Z0LUlJUy84LjU=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Powered-By" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QVNQLk5FVA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAwMyBKYW4gMjAxOSAwOToxMDo0MiBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTI3</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IGltYWdlL2dpZg0KTGFzdC1Nb2RpZmllZDogVGh1LCAyOCBKdW4gMjAxOCAxOToyNDozNiBHTVQNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpFVGFnOiAiMDcyNTZhNjE1ZmQ0MTowIg0KU2VydmVyOiBNaWNyb3NvZnQtSUlTLzguNQ0KWC1Qb3dlcmVkLUJ5OiBBU1AuTkVUDQpEYXRlOiBUaHUsIDAzIEphbiAyMDE5IDA5OjEwOjQyIEdNVA0KQ29udGVudC1MZW5ndGg6IDEyNw0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0lGODlhDgAQAKIGANPT06ampk1Npv//TU1NTf///////wAAACH5BAEAAAYALAAAAAAOABAAAANEaLTcZKrIIQuVj9h6d66AIAoAFlHiEArUJwnBK5haNwRwG00FXtKbV8yzCxo/HRHPtaF0HgqHprCAWK+KARSLrXK52wQAOw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <TcpPackets>
          <PacketInfo time="517318484" offset="0" length="372" />
        </TcpPackets>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="159" hostname="banking.megasol.se" path="/style/detailstyle.css?version=8" url="http://banking.megasol.se/style/detailstyle.css?version=8" ip="62.109.53.196" port="80" connectionId="13" origin="HTML" frame="1" startDateTime="2019-01-03T14:43:15.424+05:30" startTime="517317796" endTime="517321171">
      <QueryString>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>dmVyc2lvbj04</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </QueryString>
      <HTTPSplittedQueryStrings>
        <HTTPHeaderEntity name="version" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>OA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
      </HTTPSplittedQueryStrings>
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="Host" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YmFua2luZy5tZWdhc29sLnNl</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzcxLjAuMzU3OC45OCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dGV4dC9jc3MsKi8qO3E9MC4x</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cDovL2JhbmtpbmcubWVnYXNvbC5zZS9sb2dpbi5td3M=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cookie" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y29ybmljaGVuZXRfRk5CTD1BQkQ5N0JGMC04ODE0LTQ2NzAtQUVGQy0yNTk2QjUyRDA1Qzg7IElkbGVUaW1lPTkwMA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIC9zdHlsZS9kZXRhaWxzdHlsZS5jc3M/dmVyc2lvbj04IEhUVFAvMS4xDQpIb3N0OiBiYW5raW5nLm1lZ2Fzb2wuc2UNCkNvbm5lY3Rpb246IGtlZXAtYWxpdmUNClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS83MS4wLjM1NzguOTggU2FmYXJpLzUzNy4zNg0KQWNjZXB0OiB0ZXh0L2NzcywqLyo7cT0wLjENClJlZmVyZXI6IGh0dHA6Ly9iYW5raW5nLm1lZ2Fzb2wuc2UvbG9naW4ubXdzDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjkNCkNvb2tpZTogY29ybmljaGVuZXRfRk5CTD1BQkQ5N0JGMC04ODE0LTQ2NzAtQUVGQy0yNTk2QjUyRDA1Qzg7IElkbGVUaW1lPTkwMA0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="cornichenet_FNBL" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>QUJEOTdCRjAtODgxNC00NjcwLUFFRkMtMjU5NkI1MkQwNUM4</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="IdleTime" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>OTAw</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>7101</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Content-Type" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dGV4dC9jc3M=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Last-Modified" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAyOCBKdW4gMjAxOCAxOToyNDozNiBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ETag" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IjA3MjU2YTYxNWZkNDE6MCI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Server" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TWljcm9zb2Z0LUlJUy84LjU=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Powered-By" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QVNQLk5FVA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAwMyBKYW4gMjAxOSAwOToxMDo0NiBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NzEwMQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IHRleHQvY3NzDQpMYXN0LU1vZGlmaWVkOiBUaHUsIDI4IEp1biAyMDE4IDE5OjI0OjM2IEdNVA0KQWNjZXB0LVJhbmdlczogYnl0ZXMNCkVUYWc6ICIwNzI1NmE2MTVmZDQxOjAiDQpTZXJ2ZXI6IE1pY3Jvc29mdC1JSVMvOC41DQpYLVBvd2VyZWQtQnk6IEFTUC5ORVQNCkRhdGU6IFRodSwgMDMgSmFuIDIwMTkgMDk6MTA6NDYgR01UDQpDb250ZW50LUxlbmd0aDogNzEwMQ0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QGltcG9ydCB1cmwoImJ1dHRvbnMuY3NzP3ZlcnNpb249MSIpOw0KDQouYm9keXRleHQgCXsNCgliYWNrZ3JvdW5kLWNvbG9yOiAjRkZGRkZGOw0KCWNvbG9yOiAjMDAwMDAwOw0KCWZvbnQtZmFtaWx5OiBBcmlhbDsNCglmb250LXNpemU6IDhwdDsNCglmb250LXdlaWdodDogbm9ybWFsOw0KCW1hcmdpbi1sZWZ0OiAycHQ7DQoJbWFyZ2luLXRvcDogMnB0Ow0KfQ0KDQouZ3JpZCB7DQoJYm9yZGVyLXNwYWNpbmc6IDNweDsNCiAgICBib3JkZXItY29sbGFwc2U6IHNlcGFyYXRlOw0KCXdpZHRoOiA3NTVweDsNCn0NCg0KLmNvbnRlbnRjb2x1bW4gew0KCXZlcnRpY2FsLWFsaWduOiB0b3A7DQoJcGFkZGluZzoycHg7DQoJd2lkdGg6IDY1MHB4Ow0KfQ0KDQoubWVudWNvbHVtbiB7DQoJdmVydGljYWwtYWxpZ246IHRvcDsNCglwYWRkaW5nOjJweDsNCgl3aWR0aDogMTA1cHg7DQp9DQoNCi5jb3B5cmlnaHRibHVlCXsNCgljb2xvcjogIzc3ODA5MzsNCglmb250LWZhbWlseTogQXJpYWw7DQoJZm9udC1zaXplOiA3cHQ7DQp9DQouY29weXJpZ2h0cmVkCQl7DQoJY29sb3I6ICNmZjAwMDA7DQoJZm9udC1mYW1pbHk6IEFyaWFsOw0KCWZvbnQtc2l6ZTogN3B0Ow0KfQ0KLmZvcm13aGl0ZW9uZ3JleSAJCXsNCgliYWNrZ3JvdW5kLWNvbG9yOiAjNzU4MTk0Ow0KCWNvbG9yOiAjRkZGRkZGOw0KCWZvbnQtZmFtaWx5OiBBcmlhbDsNCglmb250LXNpemU6IDhwdDsNCglmb250LXdlaWdodDogbm9ybWFsOw0KfQ0KLmhlYWRlcgkJew0KCWNvbG9yOiAjMDAwMDAwOw0KCWZvbnQtZmFtaWx5OiBBcmlhbDsNCglmb250LXNpemU6IDEwcHQ7DQoJZm9udC13ZWlnaHQ6IGJvbGQ7DQp9DQouaGVhZGVyYmxhY2sgCXsNCgljb2xvcjogIzAwMDAwMDsNCglmb250LWZhbWlseTogQXJpYWw7DQoJZm9udC1zaXplOiAxMHB0Ow0KCWZvbnQtd2VpZ2h0OiBib2xkOw0KfQ0KLmhlYWRlcmdyZXkgCXsNCgljb2xvcjogIzk5OTk5OTsNCglmb250LWZhbWlseTogQXJpYWw7DQoJZm9udC1zaXplOiAxMHB0Ow0KCWZvbnQtd2VpZ2h0OiBib2xkOw0KfQ0KLmhlYWRlcndoaXRlIAl7DQoJY29sb3I6ICNGRkZGRkY7DQoJZm9udC1mYW1pbHk6IEFyaWFsOw0KCWZvbnQtc2l6ZTogMTBwdDsNCglmb250LXdlaWdodDogYm9sZDsNCn0NCi5pbnB1dGRlZmluaXRpb24sIC5pbnB1dGRlZmluaXRpb25tZW1vIHsNCgljb2xvcjogIzAwMDAwMDsNCglmb250LWZhbWlseTogQXJpYWw7DQoJZm9udC1zaXplOiA4cHQ7DQp9DQouaW5wdXRkZWZpbml0aW9uZ3JleQl7DQoJYmFja2dyb3VuZC1jb2xvcjogI0VGRUZFRjsNCgljb2xvcjogIzAwMDAwMDsNCglmb250LWZhbWlseTogQXJpYWw7DQoJZm9udC1zaXplOiA4cHQ7DQp9DQoNCi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tIE1FTlUgLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8NCg0KLm1lbnUgCQl7DQoJY29sb3I6ICMwMDAwMDA7DQoJZm9udC1mYW1pbHk6IEFyaWFsOw0KCWZvbnQtc2l6ZTogOXB0Ow0KCWZvbnQtd2VpZ2h0OiBub3JtYWw7DQoJdGV4dC1kZWNvcmF0aW9uOiBub25lOw0KfQ0KDQoubWVudUNvbXBvbmVudCB7DQoJbWFyZ2luOiAwcHg7DQoJcGFkZGluZzogMHB4Ow0KCXdpZHRoOiAxMDVweDsNCglvdmVyZmxvdzogaGlkZGVuOw0KfQ0KDQoNCiNtZW51Q29udGFpbmVyIHsNCgl3aWR0aDogMTA1cHg7DQoJYmFja2dyb3VuZC1jb2xvcjogI0VGRUZFRjsNCglvdmVyZmxvdzogaGlkZGVuOwkNCn0NCg0KDQoubWVudWhlYWQgCXsNCgljb2xvcjogIzAwMDAwMDsNCglmb250LWZhbWlseTogQXJpYWw7DQoJZm9udC1zaXplOiA4cHQ7DQoJZm9udC13ZWlnaHQ6IGJvbGQ7DQoJcGFkZGluZy1sZWZ0OiAzcHg7DQoJcGFkZGluZy10b3A6IDNweDsNCgl0ZXh0LWRlY29yYXRpb246IG5vbmU7DQp9DQoNCi5tZW51aGVhZCBhOnZpc2l0ZWQsIA0KLm1lbnVoZWFkIGE6bGluaywgDQoubWVudWhlYWQgYTphY3RpdmUsDQoubWVudWhlYWQgYSANCiB7DQoJY29sb3I6ICMwMDAwMDA7DQoJZm9udC1mYW1pbHk6IEFyaWFsOw0KCWZvbnQtc2l6ZTogOHB0Ow0KCWZvbnQtd2VpZ2h0OiBib2xkOw0KCXRleHQtZGVjb3JhdGlvbjogbm9uZTsNCn0NCg0KLm1lbnVoZWFkIGE6aG92ZXIgew0KCXRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOw0KfQ0KDQoubWVudXNlbGVjdCAJew0KCWNvbG9yOiAjZDkyYzFiOw0KCWZvbnQtZmFtaWx5OiBBcmlhbDsNCglmb250LXNpemU6IDhwdDsNCn0NCg0KLm1lbnV0ZXh0IAl7DQoJY29sb3I6ICMwMDAwMDA7DQoJZm9udC1mYW1pbHk6IEFyaWFsOw0KCWZvbnQtc2l6ZTogOHB0Ow0KCXBhZGRpbmctbGVmdDogNXB4Ow0KCWZvbnQtd2VpZ2h0OiBub3JtYWw7DQoJdGV4dC1kZWNvcmF0aW9uOiBub25lOw0KfQ0KDQoubWVudXRleHQgYTp2aXNpdGVkLCANCi5tZW51dGV4dCBhOmxpbmssIA0KLm1lbnV0ZXh0IGE6YWN0aXZlLA0KLm1lbnV0ZXh0IGEgDQogew0KCWNvbG9yOiAjMDAwMDAwOw0KCWZvbnQtZmFtaWx5OiBBcmlhbDsNCglmb250LXNpemU6IDhwdDsNCglmb250LXdlaWdodDogbm9ybWFsOw0KCXRleHQtZGVjb3JhdGlvbjogbm9uZTsNCn0NCg0KLm1lbnV0ZXh0IGE6aG92ZXIgew0KCWNvbG9yOiAjZjMwOw0KCWZvbnQtc2l6ZTogOHB0Ow0KCWZvbnQtd2VpZ2h0OiBub3JtYWw7DQoJdGV4dC1kZWNvcmF0aW9uOiBub25lOw0KfQ0KDQoNCg0KDQpBLk1lbnU6bGluayAJCXsNCgljb2xvcjogIzAwMDAwMDsNCglmb250LXNpemU6IDhwdDsNCgkNCn0NCkEuTWVudTphY3RpdmUgCQl7DQoJY29sb3I6ICMwMDAwMDA7DQoJZm9udC1zaXplOiA4cHQ7DQoJZm9udC13ZWlnaHQ6IG5vcm1hbDsNCgl0ZXh0LWRlY29yYXRpb246IG5vbmU7DQp9DQpBLk1lbnU6dmlzaXRlZCAJCXsNCgljb2xvcjogIzAwMDAwMDsNCglmb250LXNpemU6IDhwdDsNCglmb250LXdlaWdodDogbm9ybWFsOw0KCXRleHQtZGVjb3JhdGlvbjogbm9uZTsNCn0NCkEuTWVudTpob3ZlciAJCXsNCgljb2xvcjogI2YzMDsNCglmb250LXNpemU6IDhwdDsNCglmb250LXdlaWdodDogbm9ybWFsOw0KCXRleHQtZGVjb3JhdGlvbjogbm9uZTsNCn0NCg0KDQoNCi5vdmVyZHJhZnQgCQl7DQoJY29sb3I6ICNmZjAwMDA7DQoJZm9udC1mYW1pbHk6IEFyaWFsOw0KCWZvbnQtc2l6ZTogOHB0Ow0KfQ0KLm92ZXJkcmFmdGdyZXkgCQl7DQoJYmFja2dyb3VuZC1jb2xvcjogI0VGRUZFRjsNCgljb2xvcjogI2ZmMDAwMDsNCglmb250LWZhbWlseTogQXJpYWw7DQoJZm9udC1zaXplOiA4cHQ7DQp9DQoub3V0cHV0ZGVmaW5pdGlvbgl7DQoJY29sb3I6ICMzMzMzMzM7DQoJZm9udC1mYW1pbHk6IEFyaWFsOw0KCWZvbnQtc2l6ZTogOXB0Ow0KfQ0KLnN0YXRlbWVudGhlYWRlciAJew0KCWJhY2tncm91bmQtY29sb3I6ICM3NzgwOTM7DQoJY29sb3I6ICNGRkZGRkY7DQoJZm9udC1mYW1pbHk6IEFyaWFsOw0KCWZvbnQtc2l6ZTogOHB0Ow0KfQ0KLnN1YmplY3QgCQl7DQoJY29sb3I6ICMwMDAwMDA7DQoJZm9udC1mYW1pbHk6IEFyaWFsOw0KCWZvbnQtc2l6ZTogOXB0Ow0KCWZvbnQtd2VpZ2h0OiBib2xkOw0KfQ0KLnN1YmplY3RibGFjayAJew0KCWNvbG9yOiAjMDAwMDAwOw0KCWZvbnQtZmFtaWx5OiBBcmlhbDsNCglmb250LXNpemU6IDlwdDsNCglmb250LXdlaWdodDogYm9sZDsNCn0NCi5zdWJqZWN0d2hpdGUgCXsNCgljb2xvcjogI0ZGRkZGRjsNCglmb250LWZhbWlseTogQXJpYWw7DQoJZm9udC1zaXplOiA5cHQ7DQoJZm9udC13ZWlnaHQ6IGJvbGQ7DQp9DQouc3ViamVjdHdoaXRlYmx1ZSAJew0KCWJhY2tncm91bmQtY29sb3I6ICM3NzgwOTM7DQoJY29sb3I6ICNGRkZGRkY7DQoJZm9udC1mYW1pbHk6IEFyaWFsOw0KCWZvbnQtc2l6ZTogOHB0Ow0KCWZvbnQtd2VpZ2h0OiBib2xkOw0KCXBhZGRpbmctYm90dG9tOiAycHQ7DQoJcGFkZGluZy1sZWZ0OiAycHQ7DQoJcGFkZGluZy10b3A6IDJwdDsNCn0NCkEuc3ViamVjdHdoaXRlYmx1ZTpsaW5rIAkJew0KCWNvbG9yOiAjRkZGRkZGOw0KCWZvbnQtc2l6ZTogOHB0Ow0KCWZvbnQtd2VpZ2h0OiBib2xkOw0KCXRleHQtZGVjb3JhdGlvbjogbm9uZTsNCn0NCkEuc3ViamVjdHdoaXRlYmx1ZTphY3RpdmUgCQl7DQoJY29sb3I6ICNGRkZGRkY7DQoJZm9udC1zaXplOiA4cHQ7DQoJZm9udC13ZWlnaHQ6IGJvbGQ7DQoJdGV4dC1kZWNvcmF0aW9uOiBub25lOw0KfQ0KQS5zdWJqZWN0d2hpdGVibHVlOnZpc2l0ZWQgCQl7DQoJY29sb3I6ICNGRkZGRkY7DQoJZm9udC1zaXplOiA4cHQ7DQoJZm9udC13ZWlnaHQ6IGJvbGQ7DQoJdGV4dC1kZWNvcmF0aW9uOiBub25lOw0KfQ0KQS5zdWJqZWN0d2hpdGVibHVlOmhvdmVyIAkJew0KCWNvbG9yOiAjZjMwOw0KCWZvbnQtc2l6ZTogOHB0Ow0KCWZvbnQtd2VpZ2h0OiBib2xkOw0KCXRleHQtZGVjb3JhdGlvbjogbm9uZTsNCn0NCg0KLnRleHQsIC50ZXh0Z3JleSwgLmFtb3VudCwgLmFtb3VudGdyZXkgew0KCWNvbG9yOiAjMDAwMDAwOw0KCWZvbnQtZmFtaWx5OiBBcmlhbDsNCglmb250LXNpemU6IDhwdDsNCglmb250LXdlaWdodDogbm9ybWFsOw0KfQ0KLnRleHRncmV5LCAuYW1vdW50Z3JleQl7DQoJYmFja2dyb3VuZC1jb2xvcjogI0VGRUZFRjsNCn0NCi5hbW91bnQsIC5hbW91bnRncmV5IHsNCgl0ZXh0LWFsaWduOiByaWdodDsNCn0NCg0KLnRleHRncmV5Ym9sZAl7DQoJYmFja2dyb3VuZC1jb2xvcjogI0VGRUZFRjsNCgljb2xvcjogIzAwMDAwMDsNCglmb250LWZhbWlseTogQXJpYWw7DQoJZm9udC1zaXplOiA4cHQ7DQoJZm9udC13ZWlnaHQ6IGJvbGQ7DQp9DQoudGV4dGhpZ2hsaWdodAl7DQoJYmFja2dyb3VuZC1jb2xvcjogI0FEQjBCQzsNCgljb2xvcjogIzAwMDAwMDsNCglmb250LWZhbWlseTogQXJpYWw7DQoJZm9udC1zaXplOiA4cHQ7DQoJZm9udC13ZWlnaHQ6IG5vcm1hbDsNCn0NCi50ZXh0Ym9sZAl7DQoJY29sb3I6ICMwMDAwMDA7DQoJZm9udC1mYW1pbHk6IEFyaWFsOw0KCWZvbnQtc2l6ZTogOHB0Ow0KCWZvbnQtd2VpZ2h0OiBib2xkOw0KfQ0KLnRleHRyZWQJCXsNCgljb2xvcjogI2ZmMDAwMDsNCglmb250LWZhbWlseTogQXJpYWw7DQoJZm9udC1zaXplOiA4cHQ7DQoJZm9udC13ZWlnaHQ6IG5vcm1hbDsNCn0NCi50ZXh0d2hpdGUgCQl7DQoJY29sb3I6ICNGRkZGRkY7DQoJZm9udC1mYW1pbHk6IEFyaWFsOw0KCWZvbnQtc2l6ZTogOHB0Ow0KCWZvbnQtd2VpZ2h0OiBub3JtYWw7DQp9DQoudGV4dGJsdWUJew0KCWNvbG9yOiAjNzc4MDkzOw0KCWZvbnQtZmFtaWx5OiBBcmlhbDsNCglmb250LXNpemU6IDhwdDsNCn0NCi52YWx1ZSAJCXsNCgljb2xvcjogIzAwMDAwMDsNCglmb250LWZhbWlseTogQXJpYWw7DQoJZm9udC1zaXplOiA4cHQ7DQp9DQoudmFsdWVibGFjawl7DQoJY29sb3I6ICMwMDAwMDA7DQoJZm9udC1mYW1pbHk6IEFyaWFsOw0KCWZvbnQtc2l6ZTogOHB0Ow0KfQ0KLnZhbHVlYmx1ZQkJew0KCWNvbG9yOiAjMDAwMGZmOw0KCWZvbnQtZmFtaWx5OiBBcmlhbDsNCglmb250LXNpemU6IDhwdDsNCn0NCi52YWx1ZWdyZXkgCQl7DQoJYmFja2dyb3VuZC1jb2xvcjogI0VGRUZFRjsNCgljb2xvcjogIzAwMDAwMDsNCglmb250LWZhbWlseTogQXJpYWw7DQoJZm9udC1zaXplOiA4cHQ7DQp9DQoudmFsdWVibGFja2dyZXkgCQl7DQoJYmFja2dyb3VuZC1jb2xvcjogI0VGRUZFRjsNCgljb2xvcjogIzAwMDAwMDsNCglmb250LWZhbWlseTogQXJpYWw7DQoJZm9udC1zaXplOiA4cHQ7DQp9DQoudmFsdWVibHVlZ3JleSAJCXsNCgliYWNrZ3JvdW5kLWNvbG9yOiAjRUZFRkVGOw0KCWNvbG9yOiAjMDAwMGZmOw0KCWZvbnQtZmFtaWx5OiBBcmlhbDsNCglmb250LXNpemU6IDhwdDsNCn0NCmxpLm51bWJlciB7DQoJbGlzdC1zdHlsZS10eXBlOmRlY2ltYWw7DQoJbGlzdC1zdHlsZS1wb3NpdGlvbjpvdXRzaWRlOw0KCXBhZGRpbmctYm90dG9tOjFweDsNCn0NCkEgew0KCWNvbG9yOiBibHVlOw0KCWZvbnQtc2l6ZTogOHB0Ow0KCWZvbnQtd2VpZ2h0OiBub3JtYWw7DQp9DQpBOnZpc2l0ZWQgCQl7DQoJY29sb3I6IGJsdWU7DQoJZm9udC1zaXplOiA4cHQ7DQoJZm9udC13ZWlnaHQ6IG5vcm1hbDsNCn0NCg0KQS5Db3B5cmlnaHQ6bGluayAJCXsNCgkJCUNPTE9SOiAjNzc4MDkzOyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IGZvbnQtd2VpZ2h0OiBub3JtYWw7IGZvbnQtc2l6ZTogN3B0DQoJCQl9DQpBLkNvcHlyaWdodDphY3RpdmUgCQl7DQoJCQlDT0xPUjogIzc3ODA5MzsgdGV4dC1kZWNvcmF0aW9uOiBub25lOyBmb250LXdlaWdodDogbm9ybWFsOyBmb250LXNpemU6IDdwdA0KCQkJfQ0KQS5Db3B5cmlnaHQ6dmlzaXRlZCAJCXsNCgkJCUNPTE9SOiAjNzc4MDkzOyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IGZvbnQtd2VpZ2h0OiBub3JtYWw7IGZvbnQtc2l6ZTogN3B0DQoJCQl9DQpBLkNvcHlyaWdodDpob3ZlciAJCXsNCgkJCUNPTE9SOiAjZmYwMDAwOyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IGZvbnQtd2VpZ2h0OiBub3JtYWw7IGZvbnQtc2l6ZTogN3B0DQoJCQl9DQoNCkEudGV4dDpsaW5rIAkJew0KCQkJQ09MT1I6ICMwMDAwMDA7IHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOyBmb250LXdlaWdodDogbm9ybWFsOyBmb250LXNpemU6IDhwdA0KCQkJfQ0KQS50ZXh0OmFjdGl2ZSAJCXsNCgkJCUNPTE9SOiAjMDAwMDAwOyB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsgZm9udC13ZWlnaHQ6IG5vcm1hbDsgZm9udC1zaXplOiA4cHQNCgkJCX0NCkEudGV4dDp2aXNpdGVkIAkJew0KCQkJQ09MT1I6ICMwMDAwMDA7IHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOyBmb250LXdlaWdodDogbm9ybWFsOyBmb250LXNpemU6IDhwdA0KCQkJfQ0KQS50ZXh0OmhvdmVyIAkJew0KCQkJQ09MT1I6ICNmMzAwMDA7IHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOyBmb250LXdlaWdodDogbm9ybWFsOyBmb250LXNpemU6IDhwdA0KCQkJfQ0KDQp1bC5saXN0IHsNCgltYXJnaW4tYm90dG9tOiAwcHg7DQp9DQouUElMX3BhZ2VIZWFkZXIgew0KCUZPTlQtV0VJR0hUOiBib2xkOyBGT05ULVNJWkU6IDEycHQ7IENPTE9SOiAjOGE5MGIyOyBGT05ULUZBTUlMWTogdmVyZGFuYTsgVEVYVC1BTElHTjogY2VudGVyDQp9DQouUElMX21haW50ZXh0IHsNCglGT05ULVNJWkU6IDhwdDsgRk9OVC1GQU1JTFk6IHZlcmRhbmENCn0NCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <TcpPackets>
          <PacketInfo time="517321156" offset="0" length="1705" />
          <PacketInfo time="517321187" offset="1705" length="3815" />
          <PacketInfo time="517321359" offset="5520" length="1380" />
          <PacketInfo time="517321406" offset="6900" length="446" />
        </TcpPackets>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="163" hostname="banking.megasol.se" path="/images/menutop.gif" url="http://banking.megasol.se/images/menutop.gif" ip="62.109.53.196" port="80" connectionId="17" origin="HTML" frame="1" startDateTime="2019-01-03T14:43:15.455+05:30" startTime="517317890" endTime="517321250">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="Host" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YmFua2luZy5tZWdhc29sLnNl</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzcxLjAuMzU3OC45OCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aW1hZ2Uvd2VicCxpbWFnZS9hcG5nLGltYWdlLyosKi8qO3E9MC44</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cDovL2JhbmtpbmcubWVnYXNvbC5zZS9sb2dpbi5td3M=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cookie" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y29ybmljaGVuZXRfRk5CTD1BQkQ5N0JGMC04ODE0LTQ2NzAtQUVGQy0yNTk2QjUyRDA1Qzg7IElkbGVUaW1lPTkwMA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIC9pbWFnZXMvbWVudXRvcC5naWYgSFRUUC8xLjENCkhvc3Q6IGJhbmtpbmcubWVnYXNvbC5zZQ0KQ29ubmVjdGlvbjoga2VlcC1hbGl2ZQ0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzcxLjAuMzU3OC45OCBTYWZhcmkvNTM3LjM2DQpBY2NlcHQ6IGltYWdlL3dlYnAsaW1hZ2UvYXBuZyxpbWFnZS8qLCovKjtxPTAuOA0KUmVmZXJlcjogaHR0cDovL2JhbmtpbmcubWVnYXNvbC5zZS9sb2dpbi5td3MNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUyxlbjtxPTAuOQ0KQ29va2llOiBjb3JuaWNoZW5ldF9GTkJMPUFCRDk3QkYwLTg4MTQtNDY3MC1BRUZDLTI1OTZCNTJEMDVDODsgSWRsZVRpbWU9OTAwDQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="cornichenet_FNBL" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>QUJEOTdCRjAtODgxNC00NjcwLUFFRkMtMjU5NkI1MkQwNUM4</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="IdleTime" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>OTAw</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>2563</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Content-Type" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aW1hZ2UvZ2lm</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Last-Modified" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAyOCBKdW4gMjAxOCAxOToyNDozNiBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ETag" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IjA3MjU2YTYxNWZkNDE6MCI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Server" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TWljcm9zb2Z0LUlJUy84LjU=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Powered-By" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QVNQLk5FVA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAwMyBKYW4gMjAxOSAwOToxMDo0NiBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MjU2Mw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IGltYWdlL2dpZg0KTGFzdC1Nb2RpZmllZDogVGh1LCAyOCBKdW4gMjAxOCAxOToyNDozNiBHTVQNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpFVGFnOiAiMDcyNTZhNjE1ZmQ0MTowIg0KU2VydmVyOiBNaWNyb3NvZnQtSUlTLzguNQ0KWC1Qb3dlcmVkLUJ5OiBBU1AuTkVUDQpEYXRlOiBUaHUsIDAzIEphbiAyMDE5IDA5OjEwOjQ2IEdNVA0KQ29udGVudC1MZW5ndGg6IDI1NjMNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0lGODlhaQAlAOYAABAkTjZHaxktVTJEaA8jThsvVx4xWR8yWiM2XDlKbTpLbRcrVDhJbDtMbjdIazNFaRouVhQoUTVGahUpUgwhS/Lz9S0/ZEFScyg6YDBCZiE0Wyw+Yw0iTHF9lkNUdHWBmQsgSyQ3XX2In/z8/YKMoltphuzu8eLl6n6JoMzQ2T5OcGVyjfT1915siD9QcvX2+LS6yPv7/Nfa4ff4+Vhmg2d0j9TY393g5ujq7mFuikVVdunr75yktf7//urs8E5dfObp7Wl2kLa8yVRjgf7+/kdXd5Cardzf5Uxce6KquklZeEtbevHy9XqFnVJhf+/w86qywGx5kri+y6euvf39/VBffjxNb5SesN/i5661w73Dzurs7/j5+r/Ez8vP2dDU3fr6+zpLbuXn7IqUqOTm69rd46+2xMLH0rC3xcbL1djb4sfM1kNTdPn6+7K5x/j4+djc4vv8/BYqUxImUC9AZSY4Xyo8Yf///wofSgAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAAAAAAALAAAAABpACUAAAf/gD09WCt0eIeIiYqLjI0gIBQcBAQAc3MRcnILAhAFBgcaCCF1dXZ2GxZ0dAMDDxIBDgwJCgoNtAkMDgESD6yqFhumpCE6H0CCPUJyjczNzpCSlJVzE5qcnp+hpBimG6oZra+wsrW2uLq7vRm/phikCAgHdlo9WwXO+PmI0JMAlRHVNnXKJopUt1R0wLkal2CWLQXnAgToNeBXMDvDEGg4YAADEBH6QjaDFEmapWpyBAjw9GGAtjrcTn1jJaGFlCANy0HMJZHXgHV0LLR7F49jASNIRCpdxM8kQDkaaPyw8+EOmiUXVjjghmqmqw537lyx9TDiRF+qLmbcaKBAgRYe/5bKxUNSkr+TmerAuKNizJ0UToRUuNBt5oBXYO+8uNDAHM90P9nZcVcnRNG2EKrEnau06d2nmwYcmWLkjhcSO2rERKgQcdjBjXeik8AK6EV3ltm6FfBjM2d9j0pSsoQp5cokYZPvoFNYFasHEhPDhoirpzqLkzMeMAqBt+/f+Dz/C3gNRfKwU0zZYR0u+ms2jmfXTju0jkaObVX2Bp8veLRpxanklg5GXGGEETzkcJBzrUjkQGJMmBORT0ABI0xl92EmwAL7MaPCCh3koMMiLpTQQRQjLlKAiUEMUUA/AEywxApNBKHEQJ9gAAtMplhQxAckkNBBAw4m9sIYY6Dww/9svSQQBQpCVkFZhhougMR3iSAwBRnJ+SBEEATg4YQbQCS3BRoDJPLBGlSEFUcaRmAAQBRdmJAcEEk4kI0WR5QRhCkDXKEGEWFx4UUSbDCQ2HllJAHZGF68kdwJPDiQG3cbynFlI12EJcYV5t3RBh0AfBEWD0YcERYZBhzSAaF3uNHBDWF9gICqd2RhhA9hnbEBKLzegcJ6PCQnxBVthDWEooXyIMUIYWXBCw1P3EHFFFdwgR48+BXQ3QJyLIElIjHcQcQQFCAA7R0SzFFGWC6AYIGpdzSBhwBnhJUEABQIERYJGGBxBwslCFBEmXd8EMoJYTVhBwPV3kGCA0ogTEP/AtJd0BehJvSSQ7Um0GBHFJKykOFuAmQibiMz3FGBC3jUsW4Ac8gALx5y7CVszClYmwMF/f6LAa0Ec0KvCAs3bEcCL4SVwwBLWKyAdC4w8EG5O/TSgp0+iIzBFnfEcJm3mco47iEtDxZzWCcgEIHNd1yAxwI6g1RHzyOsEIm/EttBdMEQ2BCWCKIwfIcIG4TR9B0rPIAE2CM4gfFrFzDQBNasbH2HDyW4s8MdYOhWgEqZRKDE2XikLXcdT2ghtwBwy0334DzfkXckUgycwAB/ryT44YUPvkEDi68gARJYHEGCCglU5XLVV9+xw0+ad+056NtVKccEpqOuOh4EDHAP/x4QxD533bXnLQkPPCQwRxhEt9DJ7yKMYrgIFhAflvEKDPEDOc57mQM+AC0cUI9rNLgeGIwyupRtbw6nY5nL5KaI8oVFdui7m+1WIIkFRMASCoifW36HAvsNjg76Y5yDyNG817hggOXCwTqqRwNSfC4GmAIX9yDovQkuwoJxOx/tNJg3GF0CfgNrgSdISArDoYAOVlhcDVbokAC6IAAEvIMM6VC9H9RBB0ywlgHy48AJWCKCjPheBc03u8OlbwX9IE4DRGgAJtbBiVCUIkNoYQWqYTGGqtAcE0gQhZ7d4Qja2yEAitBDta3xgkJ0IxFr4JQJzDGJY2QiBvCoAj3Gwv8hDZCOCv6oRVWUwE7mSo4MnJBISyyykRRMBBAxOES8URJAcrgkC1rwCSbagZNS/CQtGiNKCUQPB0E55R1m0IUk8KAFDNCeHD44h1dKUG0UkAMHDjHLSNrNlnehhhysQLQc9DIsKOCGEzPQybDUwAEJuIALYlPMYyYTgZXhCAbIpsMP+oOR15QbAtTAAzuQj40ZBOd4xllOUPyOBKZYpwsWFwQG/CAFaViBLUT5gGMCQ5k+cIJGJMADGTSwdK4kAEDT6MM6hGUNKUPo4EAwyWmgRAUN1cBDI/qvDEw0LBWtwudw8IPJucwKHY2hUEA6hHjkiwrf2p4/AaBSWMZsZgD/gBvM2igCmoLzEgHB6cBycAAE7HQDhiPBAH56B5xUwWJGrUADBnDMYChzB07YSLXAQLppppQAOkCdtiqggquG5QHuCktScoZOChAxCHhJiQoExoIchOKsXJLYAC7QsjvUIAFvDQsNmOWyuR7TFMp8Ag228zm+9rOaVAUs6ipgLiPIwQIzwwNy7qAGCRyAbySgAAboBVnQCMAFDOPCCkSxUwtktgkPUAEcwuIFJQwBB6Il7QvCkIHomcAUkzUXDDLwNXOV0ZVU5UBgG7ECVCaHCCkw6ANwdR4xlIACIdACE0yQg0tkQiUN+EIFgFCC4B2hCt4IIxZoAJ0aIKy+TmBA/xCYUIETKKC7L82OCMIYljYRIQ2v9cck1Is6PBQBClkwgxmg0IQ5IGIBJMhCirPAAwtEAgBh8N8BjAuBAyyhBUOwAwLq4KwSrIcOUJBCDhYSACSYQQtd6IIWkqCDXFygBlEowU9KIAUoMCA7dSjBFIRAZjSQ4ACZMCNsCcABCqyXP3TxDHH+uxJPgKIgpTgFQp5DxWFShycUwg5GMKSbqCoytm3WQVLgLB6wWgNHZR0yj46ckPbsMTZmCTQdbvMOtrRyzWymwBBAwh//xNG/j7ZzKEaR566soj3CrMUtAE0RQa8lhyit5ogpAAIRiGF8v2m0OAWCjTtvozmt6TOmH2CjaaGAmVtj5KdUQd3mCIihB1DYZrCF8xnyDOTOrF5QpRfySYfMGh21DopaCM3AvlIT0RQAABSQ4YUh1GEudTGJOI1T7JfExBuVPoyy42OdyASlPtzC9aEnYYcSpEAQgQAAOw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <TcpPackets>
          <PacketInfo time="517321250" offset="0" length="246" />
          <PacketInfo time="517321250" offset="246" length="2563" />
        </TcpPackets>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="170" hostname="banking.megasol.se" path="/style/buttons.css?version=1" url="http://banking.megasol.se/style/buttons.css?version=1" ip="62.109.53.196" port="80" connectionId="13" origin="HTML" frame="1" startDateTime="2019-01-03T14:43:15.492+05:30" startTime="517321421" endTime="517321609">
      <QueryString>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>dmVyc2lvbj0x</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </QueryString>
      <HTTPSplittedQueryStrings>
        <HTTPHeaderEntity name="version" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
      </HTTPSplittedQueryStrings>
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="Host" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YmFua2luZy5tZWdhc29sLnNl</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzcxLjAuMzU3OC45OCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dGV4dC9jc3MsKi8qO3E9MC4x</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Referer" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cDovL2JhbmtpbmcubWVnYXNvbC5zZS9sb2dpbi5td3M=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cookie" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Y29ybmljaGVuZXRfRk5CTD1BQkQ5N0JGMC04ODE0LTQ2NzAtQUVGQy0yNTk2QjUyRDA1Qzg7IElkbGVUaW1lPTkwMA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIC9zdHlsZS9idXR0b25zLmNzcz92ZXJzaW9uPTEgSFRUUC8xLjENCkhvc3Q6IGJhbmtpbmcubWVnYXNvbC5zZQ0KQ29ubmVjdGlvbjoga2VlcC1hbGl2ZQ0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzcxLjAuMzU3OC45OCBTYWZhcmkvNTM3LjM2DQpBY2NlcHQ6IHRleHQvY3NzLCovKjtxPTAuMQ0KUmVmZXJlcjogaHR0cDovL2JhbmtpbmcubWVnYXNvbC5zZS9sb2dpbi5td3MNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUyxlbjtxPTAuOQ0KQ29va2llOiBjb3JuaWNoZW5ldF9GTkJMPUFCRDk3QkYwLTg4MTQtNDY3MC1BRUZDLTI1OTZCNTJEMDVDODsgSWRsZVRpbWU9OTAwDQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="cornichenet_FNBL" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>QUJEOTdCRjAtODgxNC00NjcwLUFFRkMtMjU5NkI1MkQwNUM4</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
            <HTTPHeaderEntity name="IdleTime" index="1">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>OTAw</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>1525</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Content-Type" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dGV4dC9jc3M=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Last-Modified" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAyOCBKdW4gMjAxOCAxOToyNDozNiBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ETag" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IjA3MjU2YTYxNWZkNDE6MCI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Server" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TWljcm9zb2Z0LUlJUy84LjU=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Powered-By" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QVNQLk5FVA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VGh1LCAwMyBKYW4gMjAxOSAwOToxMDo0NiBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTUyNQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IHRleHQvY3NzDQpMYXN0LU1vZGlmaWVkOiBUaHUsIDI4IEp1biAyMDE4IDE5OjI0OjM2IEdNVA0KQWNjZXB0LVJhbmdlczogYnl0ZXMNCkVUYWc6ICIwNzI1NmE2MTVmZDQxOjAiDQpTZXJ2ZXI6IE1pY3Jvc29mdC1JSVMvOC41DQpYLVBvd2VyZWQtQnk6IEFTUC5ORVQNCkRhdGU6IFRodSwgMDMgSmFuIDIwMTkgMDk6MTA6NDYgR01UDQpDb250ZW50LUxlbmd0aDogMTUyNQ0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>DQovKkdFTkVSQUwqLw0KZGl2LmJ1dHRvbiwgZGl2LmJpZ2J1dHRvbiwgZGl2Lmh1Z2VidXR0b24NCnsNCglmbG9hdDogbGVmdDsNCgloZWlnaHQ6IDIxcHg7DQoJbWFyZ2luOiAwIDAgMCAwOw0KfQ0KDQphLmJ1dHRvbiwgYS5idXR0b246bGluaywgYS5idXR0b246dmlzaXRlZCwgYS5idXR0b246YWN0aXZlLCBhLmJpZ2J1dHRvbiwgYS5iaWdidXR0b246bGluaywgYS5iaWdidXR0b246dmlzaXRlZCwgYS5iaWdidXR0b246YWN0aXZlLCBhLmh1Z2VidXR0b24sIGEuaHVnZWJ1dHRvbjpsaW5rLCBhLmh1Z2VidXR0b246dmlzaXRlZCwgYS5odWdlYnV0dG9uOmFjdGl2ZQ0Kew0KCWRpc3BsYXk6YmxvY2s7DQoJbWFyZ2luOjA7IA0KCXBhZGRpbmc6MDsNCgloZWlnaHQ6MTAwJTsNCglvdmVyZmxvdzpoaWRkZW47DQoJDQoJdGV4dC1kZWNvcmF0aW9uOm5vbmU7DQoJZm9udC1mYW1pbHk6QXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZjsNCglmb250LXdlaWdodDpib2xkOw0KCWZvbnQtc2l6ZTogOHB0Ow0KCQ0KCWxpbmUtaGVpZ2h0OjIxcHg7DQoJdGV4dC1hbGlnbjpjZW50ZXI7DQoJY29sb3I6IzAwMDAwMDsNCn0NCg0KYS5idXR0b246aG92ZXIsIGEuYmlnYnV0dG9uOmhvdmVyLCBhLmh1Z2VidXR0b246aG92ZXINCnsNCgliYWNrZ3JvdW5kLWltYWdlOiBub25lOw0KCWNvbG9yOiNDQzAwMDA7DQp9DQoNCi8qTk9STUFMKi8NCmRpdi5idXR0b24NCnsNCgliYWNrZ3JvdW5kOiB1cmwoJy4uL2ltYWdlcy9idXR0b24uZ2lmJykgLTgwcHggMCBuby1yZXBlYXQ7DQoJbWFyZ2luLXJpZ2h0OiAxNXB4Ow0KCXdpZHRoOiA4MHB4Ow0KfQ0KDQphLmJ1dHRvbiwgYS5idXR0b246dmlzaXRlZCwgYS5idXR0b246YWN0aXZlDQp7DQoJd2lkdGg6ODBweDsNCgliYWNrZ3JvdW5kOiB1cmwoJy4uL2ltYWdlcy9idXR0b24uZ2lmJykgdG9wIGxlZnQgbm8tcmVwZWF0Ow0KfQ0KDQovKipCSUcgQlVUVE9OKiovDQpkaXYuYmlnYnV0dG9uDQp7DQoJYmFja2dyb3VuZDogdXJsKCcuLi9pbWFnZXMvYmlnYnV0dG9uLmdpZicpIC0xMTVweCAwIG5vLXJlcGVhdDsNCgltYXJnaW4tcmlnaHQ6IDE1cHg7DQoJd2lkdGg6IDExNXB4OyANCn0NCg0KYS5iaWdidXR0b24sIGEuYmlnYnV0dG9uOnZpc2l0ZWQsIGEuYmlnYnV0dG9uOmFjdGl2ZQ0Kew0KCXdpZHRoOjExNXB4Ow0KCWJhY2tncm91bmQ6IHVybCgnLi4vaW1hZ2VzL2JpZ2J1dHRvbi5naWYnKSB0b3AgbGVmdCBuby1yZXBlYXQ7DQp9DQoNCi8qKkhVR0UgQlVUVE9OKiovDQpkaXYuaHVnZWJ1dHRvbg0Kew0KCWJhY2tncm91bmQ6IHVybCgnLi4vaW1hZ2VzL2h1Z2VidXR0b24uZ2lmJykgLTE1MHB4IDAgbm8tcmVwZWF0Ow0KCW1hcmdpbi1yaWdodDogMTVweDsNCgl3aWR0aDogMTUwcHg7IA0KfQ0KDQphLmh1Z2VidXR0b24sIGEuaHVnZWJ1dHRvbjp2aXNpdGVkLCBhLmh1Z2VidXR0b246YWN0aXZlDQp7DQoJd2lkdGg6MTUwcHg7DQoJYmFja2dyb3VuZDogdXJsKCcuLi9pbWFnZXMvaHVnZWJ1dHRvbi5naWYnKSB0b3AgbGVmdCBuby1yZXBlYXQ7DQp9DQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
        <TcpPackets>
          <PacketInfo time="517321593" offset="0" length="245" />
          <PacketInfo time="517321609" offset="245" length="1525" />
        </TcpPackets>
      </HTTPResponse>
    </HTTPTask>
  </HTTPTask>
</HTTPSnapshot>