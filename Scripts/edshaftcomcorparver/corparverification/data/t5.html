AUI.add("liferay-dockbar-keyboard-interaction",function(c){var g=c.Object;var e="activeDescendant";var b="dropdown";var d="open";var a="key";var k="liferaydockbarkeyboardinteraction";var h=".dockbar-item";var f=".dockbar-item > a";var i=".dockbar-item a";var j=c.Component.create({EXTENDS:c.Plugin.Base,NAME:k,NS:k,prototype:{initializer:function(){var l=this;l._host=l.get("host");l._initHostFocusManager();l._initMenuItemHandlers()},_handleDownKeyPress:function(n){var l=this;n.preventDefault();l._host.all(h).removeClass(d);var m=n.currentTarget.ancestor(h);if(m.hasClass(b)){m.addClass(d)}},_handleLeftRightKeyPress:function(r){var n=this;var q=n._host.all(h);q.removeClass(d);var p=q.size()-1;var m=1;if(r.isKey("LEFT")){m=-1}var o=r.currentTarget.ancestor(h);var s=q.indexOf(o)+m;if(s<0){s=p}else{if(s>p){s=0}}var l=q.item(s).one("a");n.hostFocusManager.focus(l)},_handleTabKeyPress:function(l){l.currentTarget.all(h).removeClass(d)},_handleUpKeyPress:function(n){var l=this;n.preventDefault();l._host.all(h).removeClass(d);var o=l.hostFocusManager;var m=o.get(e)-1;if(m<0){m=o._lastNodeIndex}g.some(o._descendantsMap,function(r,p,s){if(r===m){var q=c.one("#"+p).ancestor(h);if(q.hasClass(b)){q.addClass(d)}return true}})},_handleUpDownKeyPress:function(m){var l=this;var n="_handleDownKeyPress";if(m.isKey("UP")){n="_handleUpKeyPress"}l[n](m)},_initHostFocusManager:function(){var l=this;var m=l._host;m.plug(c.Plugin.NodeFocusManager,{descendants:i,keys:{next:"down:40",previous:"down:38"}});m.focusManager.after("focusedChange",function(o){var n=this;if(!o.newVal){n.set(e,0)}});l.hostFocusManager=m.focusManager},_initMenuItemHandlers:function(){var l=this;var m=l._host;m.delegate(a,l._handleUpDownKeyPress,"down:38,40",f,l);m.delegate(a,l._handleLeftRightKeyPress,"down:37,39",i,l);m.delegate(a,l._handleTabKeyPress,"down:9")}}});Liferay.DockbarKeyboardInteraction=j},"",{requires:["node-focusmanager","plugin"]});