<?xml version="1.0" encoding="utf-8"?>
<HTTPSnapshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="4">
  <HTTPTask id="98" hostname="nopc.shaft.com" path="/EmployeeDetails.aspx" url="http://nopc.shaft.com/EmployeeDetails.aspx" ip="10.10.10.53" port="80" client_ip="192.168.0.24" client_port="16335" connectionId="1828" origin="Primary" encodingType="ANSI" startDateTime="2019-01-04T16:15:53.501+05:30" startTime="26619" endTime="27074" blockedTime="0" dnsTime="0" connectTime="0" sendTime="0" waitTime="0" receiveTime="0" sslNegotiateTime="0" responseBodySize="0">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Referer" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cDovL25vcGMuc2hhZnQuY29tL01haW4uYXNweA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzcxLjAuMzU3OC45OCBTYWZhcmkvNTM3LjM2</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bm9wYy5zaGFmdC5jb20=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cookie" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QVNQLk5FVF9TZXNzaW9uSWQ9MjN0bmxyMjA1Y2RxZWdxbmxtZWZ0Ynlo</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC9FbXBsb3llZURldGFpbHMuYXNweCBIVFRQLzEuMQ0KUmVmZXJlcjogaHR0cDovL25vcGMuc2hhZnQuY29tL01haW4uYXNweA0KQWNjZXB0LUxhbmd1YWdlOiBlbi1VUyxlbjtxPTAuOQ0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzcxLjAuMzU3OC45OCBTYWZhcmkvNTM3LjM2DQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkFjY2VwdDogKi8qDQpDb25uZWN0aW9uOiBLZWVwLUFsaXZlDQpIb3N0OiBub3BjLnNoYWZ0LmNvbQ0KQ29va2llOiBBU1AuTkVUX1Nlc3Npb25JZD0yM3RubHIyMDVjZHFlZ3FubG1lZnRieWgNCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
        <HTTPCookies>
          <HTTPHeaderEntity name="ASP.NET_SessionId" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MjN0bmxyMjA1Y2RxZWdxbmxtZWZ0Ynlo</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
        </HTTPCookies>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <contentLenght>27404</contentLenght>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Cache-Control" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>cHJpdmF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Type" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>dGV4dC9odG1sOyBjaGFyc2V0PXV0Zi04</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Encoding" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Vary" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Server" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TWljcm9zb2Z0LUlJUy8xMC4w</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-AspNet-Version" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>NC4wLjMwMzE5</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-Powered-By" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QVNQLk5FVA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>RnJpLCAwNCBKYW4gMjAxOSAxMDo0NjoxOSBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Mjc0MDQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDYWNoZS1Db250cm9sOiBwcml2YXRlDQpDb250ZW50LVR5cGU6IHRleHQvaHRtbDsgY2hhcnNldD11dGYtOA0KQ29udGVudC1FbmNvZGluZzogZ3ppcA0KVmFyeTogQWNjZXB0LUVuY29kaW5nDQpTZXJ2ZXI6IE1pY3Jvc29mdC1JSVMvMTAuMA0KWC1Bc3BOZXQtVmVyc2lvbjogNC4wLjMwMzE5DQpYLVBvd2VyZWQtQnk6IEFTUC5ORVQNCkRhdGU6IEZyaSwgMDQgSmFuIDIwMTkgMTA6NDY6MTkgR01UDQpDb250ZW50LUxlbmd0aDogMjc0MDQNCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>DQo8IURPQ1RZUEUgaHRtbCBQVUJMSUMgIi0vL1czQy8vRFREIFhIVE1MIDEuMCBUcmFuc2l0aW9uYWwvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvVFIveGh0bWwxL0RURC94aHRtbDEtdHJhbnNpdGlvbmFsLmR0ZCI+DQo8aHRtbCB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCI+DQo8aGVhZD48dGl0bGU+DQoJRW1wbG95ZWUgRGV0YWlscw0KPC90aXRsZT48bGluayBocmVmPSIvV2ViUmVzb3VyY2UuYXhkP2Q9anRMRVd0MzNZNjhsVnozZEw3bzBoREk1YUZ2UkxzRkhEUzJBMmJwdzFLZWlUWFFrTC1nUkh1dEFURmJMaFlNMzRmeC16SC13LU85bjdiTzI2SlE5SndmdDVabjRHU2c4Sm1GZk1feHliOGFKYkd5SWJ3c0lPZVJudXF4Z2M5YWJsTXdta0FyN0w4NDBUYTdBbGlxdFlBMiZhbXA7dD02MzQ4NTk2MDY3ODAwMDAwMDAiIHR5cGU9InRleHQvY3NzIiByZWw9InN0eWxlc2hlZXQiIGNsYXNzPSJUZWxlcmlrX3N0eWxlc2hlZXQiIC8+PGxpbmsgaHJlZj0iL1dlYlJlc291cmNlLmF4ZD9kPXk4WFMxc1FreUNhVU5IZ3dLSDY3ZGVmWUVTOXBwbXFOWDY4RkJPdGxDUFpFUloyb2hoYjlHVUVhaFFQR28xWEc5blBTTF85V3lOQ3lrTTgwY2JidGoybGxITmZmWWVIMGNkcFBkX0N4NVUweGhhc25udktaQllEeFpMbWFrb3FaN094ekl2NTBxUTlzb3ljOTBqZGc2Z3ItTU02MWItT3lCMFdZbzBKR1Vnb3BwVzhRT1ItVlBCTzFDN1QzeXdYeTAmYW1wO3Q9NjM0ODU5NjA2NzgwMDAwMDAwIiB0eXBlPSJ0ZXh0L2NzcyIgcmVsPSJzdHlsZXNoZWV0IiBjbGFzcz0iVGVsZXJpa19zdHlsZXNoZWV0IiAvPjxsaW5rIGhyZWY9Ii9XZWJSZXNvdXJjZS5heGQ/ZD1uNE9xUXZVVFBNWVp3UktiTElsM0FPS1JfNXJRWEJNLVVnbHlEa0FKenVyVXp0VE8zYkFRLTFDdE9jTlFVVVVDNkk2Z0I2aUJRR2NBbzhYQXVHQjZoMG5iUlQ4U1JOMVpBSkNWb25xU0EzcUJLV00tRVAzSmhxMXlkME1Fd1I0eG5jT3JBTGRvVmZZbk84VXFKMlVLWEEyJmFtcDt0PTYzNDg1OTYwNjc4MDAwMDAwMCIgdHlwZT0idGV4dC9jc3MiIHJlbD0ic3R5bGVzaGVldCIgY2xhc3M9IlRlbGVyaWtfc3R5bGVzaGVldCIgLz48bGluayBocmVmPSIvV2ViUmVzb3VyY2UuYXhkP2Q9ODRob3RtclM1MklseW1qZDFyYkJBdV9ETVRPc3VMOWVJRFVScWpZdmM4aGtObWppdThNWEJNeEs0RXZFWTJBVEI1YVVGTEdkdVFrb21TaXM2eVpybDIwVWU5Znl3TmEzaDdIZFNza0s2LVB2UVFoa0EtaDN4dmEyZzVtSVFyQUhIT3Nkd21XeEp4WHd4dlNBRm44dlZsUzhlVE9MUlVVVjRPUVQyZi1aaE5xX0FodEtLbDJQenBGMks5TVlzX2pUMCZhbXA7dD02MzQ4NTk2MDY3ODAwMDAwMDAiIHR5cGU9InRleHQvY3NzIiByZWw9InN0eWxlc2hlZXQiIGNsYXNzPSJUZWxlcmlrX3N0eWxlc2hlZXQiIC8+PGxpbmsgaHJlZj0iL1dlYlJlc291cmNlLmF4ZD9kPUotbDhoLXVlVE9YX0hrdEJSdktyZkV4cURtUXFKLTJoeE9YZDBPWHFQXzBtWm5LSnpZN0VvVUJkQjl1NHlEclpFRDFkVkN4UkpYLTVjLXJ4TjhYc1BrQ0pIeEV1Q01xcm1uWkpzSXhnMUhtR1k1cjEyaXBTeDFqR2gxcVo2Q0RxY05uUzM2NmVheFJlR1ROSTBWU0xxZzImYW1wO3Q9NjM0ODU5NjA2NzgwMDAwMDAwIiB0eXBlPSJ0ZXh0L2NzcyIgcmVsPSJzdHlsZXNoZWV0IiBjbGFzcz0iVGVsZXJpa19zdHlsZXNoZWV0IiAvPjxsaW5rIGhyZWY9Ii9XZWJSZXNvdXJjZS5heGQ/ZD1fT01iYjV2R2NIR0hyX3NEMFgzRGpWbXFHMnA3aTBNemNYRkYwUXpRcFhJejF4SHdBWkxKN29MZlRqMndTVm1oTzdFYTNFMXVBbF9xTVBYTzNGR2JSR1l5Xy10S1QycTk5OWFkMndfb2hqOWctU2cwbWV4cFV4R3A5aU5wbmw1aDVuaTBuVV9GY3JCV3dienhfdXM2NTRxbE9Jc2dORWt6c3Bab2V6NlplclFyYWxHMzlqd0Y1VzVWdmZVODhUcGkwJmFtcDt0PTYzNDg1OTYwNjc4MDAwMDAwMCIgdHlwZT0idGV4dC9jc3MiIHJlbD0ic3R5bGVzaGVldCIgY2xhc3M9IlRlbGVyaWtfc3R5bGVzaGVldCIgLz48bGluayBocmVmPSIvV2ViUmVzb3VyY2UuYXhkP2Q9eGpmbkFtWGxpTEdCdWtHVjQ2TnFoaFI1dlp1WTRrOHNieEtUOGZCOVdPQnpBRHVKX19VcUpIMTA5SUZHWGFjUjhQX1liQkV4VW5XZkpxbWx1N1BoUzZrYnl2bW5ZT0xYNmpyeXJDQWVzRm5uZXBPMklGb2RFV0pvVlRtdEJvWktsQ3gxREJzSkx2ZXJNUXg3Mk9Vbk1nMiZhbXA7dD02MzQ4NTk2MDY3ODAwMDAwMDAiIHR5cGU9InRleHQvY3NzIiByZWw9InN0eWxlc2hlZXQiIGNsYXNzPSJUZWxlcmlrX3N0eWxlc2hlZXQiIC8+PGxpbmsgaHJlZj0iL1dlYlJlc291cmNlLmF4ZD9kPVp6b1NReERkM2d3MGN5dXE0TVRmWlNITGlicHJBSHpyV2ctaGt4Wkhzak40WDZmN3FwajR3Sm1ZUVFaZlVGZlowNk9ITFJ5RjRiNlplWDB0NTRTU0pYX3h6YlBrRTdmN2NTRzdUQUgyTHBoUzBPU3l6NDRjX3F5bDlaWFNQM1ZDR2VmUEVaREhZdnlJMWNJYjhDN0hqSkFDa2pBVXdlcjdhVTZxal9vN3F3TmhCNkVQeDd5YTQ1YWd5enhCR0ZzMTAmYW1wO3Q9NjM0ODU5NjA2NzgwMDAwMDAwIiB0eXBlPSJ0ZXh0L2NzcyIgcmVsPSJzdHlsZXNoZWV0IiBjbGFzcz0iVGVsZXJpa19zdHlsZXNoZWV0IiAvPjxsaW5rIGhyZWY9Ii9XZWJSZXNvdXJjZS5heGQ/ZD1RaU1mRnJ5cW9xZkpqMEI4VUJYeHBQWGU2bU01emloR1RTSVd6LXBLTEFSanNJUHMyMEdOVzRYbTlMMjBDc0g5LXpLLTNiNDlhUXpvUWsyT1BnV0NsZTQ1Z1hqWUNRX1E1Yy1LbGoxbmZlcktGRGZlYm9MaWQwTGVTMFlRZ1lEU1JKWHBfZjdUZHRfUWNVT09xbXJlM0EyJmFtcDt0PTYzNDg1OTYwNjc4MDAwMDAwMCIgdHlwZT0idGV4dC9jc3MiIHJlbD0ic3R5bGVzaGVldCIgY2xhc3M9IlRlbGVyaWtfc3R5bGVzaGVldCIgLz48bGluayBocmVmPSIvV2ViUmVzb3VyY2UuYXhkP2Q9MmJPRnNrdkV5N0ZBTWFkWjdpV0dsZTRnSkphT1d5YnItTEVyV09sQld4VzVFZG5ZbmRtUGZlNTh4R1QzaVBzbWpZanFOUVVBUmJkT0l1ZWlaU2pldFcwT3puSlhWeDA1S09hN1YtbTRKZmFJMkZoSzkyQTR1ZFRIRVAzVkZKWFcwMm13eEJEdDQ5Y1NJQmtDQVpILVBlZEdCUGRWWXlaT1hoc0ZCdzJ0U2pfdldjaFNfamJ6RUFfMzNsWDdBSWRUMCZhbXA7dD02MzQ4NTk2MDY3ODAwMDAwMDAiIHR5cGU9InRleHQvY3NzIiByZWw9InN0eWxlc2hlZXQiIGNsYXNzPSJUZWxlcmlrX3N0eWxlc2hlZXQiIC8+PGxpbmsgaHJlZj0iL1dlYlJlc291cmNlLmF4ZD9kPWVjekpmU0ZTOXpqdFV6eDlvTFBaWUxjdkdpNk9aVktYTEZvdHR3NVVUTVBldEZSNjNuRXpKd0F4aXM5SjZ3WUNqZ012NlRGTXFRdzdVWVdFZ0c4U0s2SUd0eDE3TW10ejFHX2hmcW5UOEZycjJlYzlFRUpCU2VGS3NNMFUwaURJSWc1dnRGQm1pLW94R3BMRXBWV3pHdzImYW1wO3Q9NjM0ODU5NjA2NzgwMDAwMDAwIiB0eXBlPSJ0ZXh0L2NzcyIgcmVsPSJzdHlsZXNoZWV0IiBjbGFzcz0iVGVsZXJpa19zdHlsZXNoZWV0IiAvPjxsaW5rIGhyZWY9Ii9XZWJSZXNvdXJjZS5heGQ/ZD1qblpGT2dUN1dkUUIzUlRVR2hnNTJnUmozS0s3M1hXcTRTUkFKTVJJaVZoM25YVWFXdkd2Z1lBYTBwY2RFY0pGZzJWTk1oUGt4Zy1HbmlxWmZqLVQ0TEpXOVVaNDlDTDJLVzJScWduQm5waXhhVXdlNktxUXhaTm1kWl84UTBlMmJnV3VXVUg5UUh4Q2w0Zm9SY09weE1Fcy0tcFNOenNlaC1iZHE0WlZDN3J1b0ZuTWF2bkdQaDc3aG45bmVKRVIwJmFtcDt0PTYzNDg1OTYwNjc4MDAwMDAwMCIgdHlwZT0idGV4dC9jc3MiIHJlbD0ic3R5bGVzaGVldCIgY2xhc3M9IlRlbGVyaWtfc3R5bGVzaGVldCIgLz48bGluayBocmVmPSIvV2ViUmVzb3VyY2UuYXhkP2Q9aXV4Yll2VHd0T25qT2kxdmNCWE1Oa0ZZSTVLY1JHcDFuRm5hQ2RFUmNobkltUUI2MUxpOUlzemk2RjUxNi02Nl9UbURjLU5MOG92V1BkODUxNlVJVXpfRUVvX1ktam5JRmJzdDFUQnoyTmttZ3hwVDhsakNWclVKUEZuOWlmSFVhaktOOHpaYk0yWXByS2x1anJrd3pnMiZhbXA7dD02MzQ4NTk2MDY3ODAwMDAwMDAiIHR5cGU9InRleHQvY3NzIiByZWw9InN0eWxlc2hlZXQiIGNsYXNzPSJUZWxlcmlrX3N0eWxlc2hlZXQiIC8+PGxpbmsgaHJlZj0iL1dlYlJlc291cmNlLmF4ZD9kPTdNSlkwak5PQWMwMVllLW9wUk1jbjJFVjRPS1Rab2hQWWt6X3BfbTV4eXVUcE10QVhvYlBuUTMwajZfU1hmU0lGX2ZwV3BzRDdRNC1LWlZ2TXJQdWVTMm10bWhYUXdveW5ORWFwdi1JLTYtOWdkNENfWUhFTUljY1hJaTNGMlllS3prRGNIVjdRbFROR192UjRsUlBybmVVT0xFR29Bb0dZXzBkUDN6REFlZDNGb2RhakZiLS1YZWJBMEpXTUpuNDAmYW1wO3Q9NjM0ODU5NjA2NzgwMDAwMDAwIiB0eXBlPSJ0ZXh0L2NzcyIgcmVsPSJzdHlsZXNoZWV0IiBjbGFzcz0iVGVsZXJpa19zdHlsZXNoZWV0IiAvPjxsaW5rIGhyZWY9Ii9XZWJSZXNvdXJjZS5heGQ/ZD1pRVpsOHJHTTJMVmhWSm1MQ1dwaXBFMk5pU2daU1pWcGtfaFdtU0xwZEJPWXFfTS1tM2FkdEdhMXFNR3EwYTZGaWd1eDFmakotWmZSV1p4U0lJTGo4Z1JTbHFlU0VwcFNxTzg1bF94VGdqRjMyZm1ab1hTZHNCMkpRZXl1YVZVWEJtWXJ2bVlfU0ZpRV9JRW44X3pnNWFjd0hEWmNnU0FPbHU5S3JsdTd6Z00xJmFtcDt0PTYzNDg1OTYwNjc4MDAwMDAwMCIgdHlwZT0idGV4dC9jc3MiIHJlbD0ic3R5bGVzaGVldCIgY2xhc3M9IlRlbGVyaWtfc3R5bGVzaGVldCIgLz48L2hlYWQ+DQo8Ym9keT4NCiAgICA8Zm9ybSBuYW1lPSJmb3JtMSIgbWV0aG9kPSJwb3N0IiBhY3Rpb249Ii4vRW1wbG95ZWVEZXRhaWxzLmFzcHgiIGlkPSJmb3JtMSI+DQo8ZGl2Pg0KPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iUmFkU2NyaXB0TWFuYWdlcjFfVFNNIiBpZD0iUmFkU2NyaXB0TWFuYWdlcjFfVFNNIiB2YWx1ZT0iIiAvPg0KPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iX19FVkVOVFRBUkdFVCIgaWQ9Il9fRVZFTlRUQVJHRVQiIHZhbHVlPSIiIC8+DQo8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJfX0VWRU5UQVJHVU1FTlQiIGlkPSJfX0VWRU5UQVJHVU1FTlQiIHZhbHVlPSIiIC8+DQo8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJfX1ZJRVdTVEFURSIgaWQ9Il9fVklFV1NUQVRFIiB2YWx1ZT0iL3dFUER3VUxMVEV5TWpBeU1EWTFOak1QWkJZQ0FnTVBaQllRQWdVUEZDc0FBaFFyQUFNUEZnSWVGMFZ1WVdKc1pVRnFZWGhUYTJsdVVtVnVaR1Z5YVc1bmFHUmtaQkFXQVdZV0FSUXJBQU1QRmdJZkFHaGtaR1FQRmdGbUZnRUZjbFJsYkdWeWFXc3VWMlZpTGxWSkxsSmhaRmRwYm1SdmR5d2dWR1ZzWlhKcGF5NVhaV0l1VlVrc0lGWmxjbk5wYjI0OU1qQXhNaTR6TGpFd01UWXVOREFzSUVOMWJIUjFjbVU5Ym1WMWRISmhiQ3dnVUhWaWJHbGpTMlY1Vkc5clpXNDlNVEl4Wm1GbE56Z3hOalZpWVROa05CWUNaZzhVS3dBRER4WUNId0JvWkdSa1pBSUhEdzhXQWg4QWFCWUNIZ1Z6ZEhsc1pRVU5aR2x6Y0d4aGVUcHViMjVsTzJRQ0N3OFBGZ0lmQUdoa1pBSU5EendyQUE0Q0FCUXJBQUlQRmdZZkFHZ2VDMThoU1hSbGJVTnZkVzUwQWdFZUMxOGhSR0YwWVVKdmRXNWtaMlFYQWdVTFJXUnBkRWx1WkdWNFpYTVdBQVVQVTJWc1pXTjBaV1JKYm1SbGVHVnpGZ0FCRmdJV0N3OENFeFFyQUJNVUt3QUZGZ1FlQ2tobFlXUmxjbFJsZUhSbEhnUnZhVzVrQWdKa1pHUUZEbU5vYTE5RmJYQnNiM2xsWlVsa0ZDc0FCUllHSHdRRkNrVnRjR3h2ZVdWbFNXUWZCUUlESGdoRVlYUmhWSGx3WlJrckFXUmtaQVVLUlcxd2JHOTVaV1ZKWkJRckFBVVdCaDhFQlJSRmJYQnNiM2xsWlVOdlpHVkpia1JsZG1salpSOEZBZ1FmQmhrckFtUmtaQVVVUlcxd2JHOTVaV1ZEYjJSbFNXNUVaWFpwWTJVVUt3QUZGZ1lmQkFVTlJXMXdiRzk1WldVZ1EyOWtaUjhGQWdVZkJoa3JBbVJrWkFVTVJXMXdiRzk1WldWRGIyUmxGQ3NBQlJZR0h3UUZEVVZ0Y0d4dmVXVmxJRTVoYldVZkJRSUdId1laS3dKa1pHUUZERVZ0Y0d4dmVXVmxUbUZ0WlJRckFBVVdCaDhFQlFkRGIyMXdZVzU1SHdVQ0J4OEdHU3NDWkdSa0JReERiMjF3WVc1NVUwNWhiV1VVS3dBRkZnWWZCQVVLUkdWd1lYSjBiV1Z1ZEI4RkFnZ2ZCaGtyQW1Sa1pBVVBSR1Z3WVhKMGJXVnVkRk5PWVcxbEZDc0FCUllHSHdRRkNFTmhkR1ZuYjNKNUh3VUNDUjhHR1NzQ1pHUmtCUTFEWVhSbFoyOXllVk5PWVcxbEZDc0FCUllHSHdRRkMwUmxjMmxuYm1GMGFXOXVId1VDQ2g4R0dTc0NaR1JrQlF0RVpYTnBaMjVoZEdsdmJoUXJBQVVXQmg4RUJRaE1iMk5oZEdsdmJoOEZBZ3NmQmhrckFtUmtaQVVJVEc5allYUnBiMjRVS3dBRkZnWWZCQVVHVTNSaGRIVnpId1VDREI4R0dTc0NaR1JrQlFaVGRHRjBkWE1VS3dBRkZnWWZCQVVPUlcxd2JHOTViV1Z1ZEZSNWNHVWZCUUlOSHdZWkt3SmtaR1FGRDBWdGNHeHZlV1Z0Wlc1MFZIbHdaUlFyQUFVV0JoOEVCUWhTWlhCdmNuUlVieDhGQWc0ZkJoa3JBbVJrWkFVSVVtVndiM0owVkc4VUt3QUZGZ1lmQkdVZkJRSVBId1laS3dGa1pHUUZFVkpsY0c5eWRHbHVaMDFoYm1GblpYSnpGQ3NBQlJZR0h3UmxId1laS3dFZkJRSVFaR1JrQlJGV2FXVjNSbUZ0YVd4NVRXVnRZbVZ5Y3hRckFBVVdCaDhFWlI4RkFoRWZCaGtyQVdSa1pBVVJSVzF3Ykc5NVpXVkViMk4xYldWdWRITVVLd0FGRmdZZkJHVWZCUUlTSHdZWkt3RmtaR1FGQ2tKcGIwUmxkR0ZwYkhNVUt3QUZGZ1FmQkdVZkJRSVRaR1JrQlFwRlpHbDBRMjlzZFcxdUZDc0FCUllFSHdVQ0ZCOEVaV1JrWkFVTVJHVnNaWFJsUTI5c2RXMXVaR1VVS3dBQUN5bDZWR1ZzWlhKcGF5NVhaV0l1VlVrdVIzSnBaRU5vYVd4a1RHOWhaRTF2WkdVc0lGUmxiR1Z5YVdzdVYyVmlMbFZKTENCV1pYSnphVzl1UFRJd01USXVNeTR4TURFMkxqUXdMQ0JEZFd4MGRYSmxQVzVsZFhSeVlXd3NJRkIxWW14cFkwdGxlVlJ2YTJWdVBURXlNV1poWlRjNE1UWTFZbUV6WkRRQlBDc0FCd0FMS1hWVVpXeGxjbWxyTGxkbFlpNVZTUzVIY21sa1JXUnBkRTF2WkdVc0lGUmxiR1Z5YVdzdVYyVmlMbFZKTENCV1pYSnphVzl1UFRJd01USXVNeTR4TURFMkxqUXdMQ0JEZFd4MGRYSmxQVzVsZFhSeVlXd3NJRkIxWW14cFkwdGxlVlJ2YTJWdVBURXlNV1poWlRjNE1UWTFZbUV6WkRRQlpHUVdEQjRJUkdGMFlVdGxlWE1XQUI0TVgybHpabXgwY21sMGJXVjRaeDhDQWdvZUZFbHpRbTkxYm1SVWIwWnZjbmRoY21SUGJteDVhQjRGWHlGRFNWTVhBQjhEWjJSbUZnWm1EeFFyQUFOa1pHUmtBZ0VQRmdRVUt3QUNEeFlNSHdjV0FCOElaeDhDQWdvZkNXZ2ZDaGNBSHdOblpCY0ZCUU5mWm1VRkZpaGJVM1JoZEhWelhTQTlJQ2RYYjNKcmFXNW5KeWtGQmw4aFJGTkpRd0tGQVFVUVEzVnljbVZ1ZEZCaFoyVkpibVJsZUdZRkMxOGhTWFJsYlVOdmRXNTBBZ29GQ0Y4aFVFTnZkVzUwQWc0V0FoNERYM05sRmdJZUFsOWpaaFFyQUFvVUt3QUNGQ3NBQWdVTVJXMXdiRzk1WldWRGIyUmxCUXBGYlhCc2IzbGxaVWxrRkNzQUFnVUNNREVDL0FFVUt3QUNGQ3NBQWdVTVJXMXdiRzk1WldWRGIyUmxCUXBGYlhCc2IzbGxaVWxrRkNzQUFnVUJNUUtSQWhRckFBSVVLd0FDQlF4RmJYQnNiM2xsWlVOdlpHVUZDa1Z0Y0d4dmVXVmxTV1FVS3dBQ0JRRXlBcFFDRkNzQUFoUXJBQUlGREVWdGNHeHZlV1ZsUTI5a1pRVUtSVzF3Ykc5NVpXVkpaQlFyQUFJRkJEQXdNVEFDNndFVUt3QUNGQ3NBQWdVTVJXMXdiRzk1WldWRGIyUmxCUXBGYlhCc2IzbGxaVWxrRkNzQUFnVURNREV3QXI4QkZDc0FBaFFyQUFJRkRFVnRjR3h2ZVdWbFEyOWtaUVVLUlcxd2JHOTVaV1ZKWkJRckFBSUZBekF4TVFMOUFSUXJBQUlVS3dBQ0JReEZiWEJzYjNsbFpVTnZaR1VGQ2tWdGNHeHZlV1ZsU1dRVUt3QUNCUU14TWpNQzlnRVVLd0FDRkNzQUFnVU1SVzF3Ykc5NVpXVkRiMlJsQlFwRmJYQnNiM2xsWlVsa0ZDc0FBZ1VETWpBeEF0UUJGQ3NBQWhRckFBSUZERVZ0Y0d4dmVXVmxRMjlrWlFVS1JXMXdiRzk1WldWSlpCUXJBQUlGQXpJd013TFdBUlFyQUFJVUt3QUNCUXhGYlhCc2IzbGxaVU52WkdVRkNrVnRjR3h2ZVdWbFNXUVVLd0FDQlFNeU9EQUNtZ0VXRTJSa1pHUmtaR1JrWkdSa1pHUmtaR1JrWkdRV0FtWVBaQllzWmc5a0ZnaG1EMlFXQW1ZUER4WUNIZ1JVWlhoMFpXUVdDZ0lCRHc4V0FoOE5CV0k4YVcxbklITjBlV3hsUFNKaWIzSmtaWEk2TUhCNE8zWmxjblJwWTJGc0xXRnNhV2R1T20xcFpHUnNaVHNpSUdGc2REMGlJaUJ6Y21NOUlrbHRZV2RsY3k5QlpHUlNaV052Y21RdVoybG1JaTgrUVdSa0lFNWxkeUJGYlhCc2IzbGxaV1JrQWdjUER4WUNIdzBGZHp4cGJXY2djM1I1YkdVOUltSnZjbVJsY2pvd2NIZzdkbVZ5ZEdsallXd3RZV3hwWjI0NmJXbGtaR3hsT3lJZ1lXeDBQU0lpSUhOeVl6MGlTV052Ym5NdmFXMXdiM0owTFdWdGNHeHZlV1ZsTFdSbGRHRnBiSE11Y0c1bklpQXZQa2x0Y0c5eWRDQkZiWEJzYjNsbFpTQkVaWFJoYVd4elpHUUNDUThQRmdJZkRRV0JBVHhwYldjZ2MzUjViR1U5SW1KdmNtUmxjam93Y0hnN2RtVnlkR2xqWVd3dFlXeHBaMjQ2Yldsa1pHeGxPeUlnWVd4MFBTSWlJQ0J6Y21NOUlrbGpiMjV6TDJsdGNHOXlkQzFsYlhCc2IzbGxaUzFrWlhSaGFXeHpMbkJ1WnlJZ0x6NUpiWEJ2Y25RZ1JXMXdiRzk1WldVZ1VHVnljMjl1WVd3Z1JHVjBZV2xzYzJSa0Fnc1BEeFlDSHcwRmRUeHBiV2NnYzNSNWJHVTlJbUp2Y21SbGNqb3djSGc3ZG1WeWRHbGpZV3d0WVd4cFoyNDZiV2xrWkd4bE95SWdZV3gwUFNJaUlITnlZejBpU1dOdmJuTXZaWGh3YjNKMExXVnRjR3h2ZVdWbExXeGxZWFpsTG5CdVp5SWdMejVGZUhCdmNuUWdSVzF3Ykc5NVpXVWdSR1YwWVdsc2MyUmtBZzBQRHhZQ0h3MEZmanhwYldjZ2MzUjViR1U5SW1KdmNtUmxjam93Y0hnN2RtVnlkR2xqWVd3dFlXeHBaMjQ2Yldsa1pHeGxPeUlnWVd4MFBTSWlJSE55WXowaVNXTnZibk12Wlhod2IzSjBMV1Z0Y0d4dmVXVmxMV3hsWVhabExuQnVaeUlnTHo1RmVIQnZjblFnUlcxd2JHOTVaV1VnVUdWeWMyOXVZV3dnUkdWMFlXbHNjMlJrQWdFUER4WUNIZ2RXYVhOcFlteGxhR1FXQW1ZUER4WUNIZ3BEYjJ4MWJXNVRjR0Z1QWc5a0ZnSm1EMlFXQWdJQkQyUVdBZ0lCRDJRV0NHWVBaQllFWmc4UEZnSWVFVlZ6WlZOMVltMXBkRUpsYUdGMmFXOXlhR1JrQWdJUER4WUNIeEJvWkdRQ0FROWtGZ0ptRHc4V0JCNElRM056UTJ4aGMzTUZEWEpuUTNWeWNtVnVkRkJoWjJVZUJGOGhVMElDQW1Sa0FnSVBaQllFWmc4UEZnSWZFR2hrWkFJQ0R3OFdBaDhRYUdSa0FnTVBEeFlFSHhFRkVISm5WM0poY0NCeVowRmtkbEJoY25RZkVnSUNaQllDQWdFUEZDc0FBZzhXRWg0WlVtVm5hWE4wWlhKWGFYUm9VMk55YVhCMFRXRnVZV2RsY21jZUZVVnVZV0pzWlVWdFltVmtaR1ZrVTJOeWFYQjBjMmNlSEU5dVEyeHBaVzUwVTJWc1pXTjBaV1JKYm1SbGVFTm9ZVzVuWldRRkxsUmxiR1Z5YVdzdVYyVmlMbFZKTGtkeWFXUXVRMmhoYm1kbFVHRm5aVk5wZW1WRGIyMWliMGhoYm1Sc1pYSWVIRVZ1WVdKc1pVVnRZbVZrWkdWa1FtRnpaVk4wZVd4bGMyaGxaWFJuSHdObkhoTkZibUZpYkdWRmJXSmxaR1JsWkZOcmFXNXpaeDRUWTJGamFHVmtVMlZzWldOMFpXUldZV3gxWldRZkVnS0FBaDRGVjJsa2RHZ2JBQUFBQUFBQVIwQUJBQUFBWkE4VUt3QUZGQ3NBQWc4V0JoOE5CUUl4TUI0RlZtRnNkV1VGQWpFd0hnaFRaV3hsWTNSbFpHY1dBaDRRYjNkdVpYSlVZV0pzWlZacFpYZEpaQVVUUjNKcFpGOUZiWEJzYjNsbFpWOWpkR3d3TUdRVUt3QUNEeFlHSHcwRkFqVXdIeG9GQWpVd0h4dG9GZ0lmSEFVVFIzSnBaRjlGYlhCc2IzbGxaVjlqZEd3d01HUVVLd0FDRHhZR0h3MEZBekV3TUI4YUJRTXhNREFmRzJnV0FoOGNCUk5IY21sa1gwVnRjR3h2ZVdWbFgyTjBiREF3WkJRckFBSVBGZ1lmRFFVRE5UQXdIeG9GQXpVd01COGJhQllDSHh3RkUwZHlhV1JmUlcxd2JHOTVaV1ZmWTNSc01EQmtGQ3NBQWc4V0JoOE5CUVF6TURBd0h4b0ZCRE13TURBZkcyZ1dBaDhjQlJOSGNtbGtYMFZ0Y0d4dmVXVmxYMk4wYkRBd1pBOFVLd0VGWm1abVptWVdBUVY0VkdWc1pYSnBheTVYWldJdVZVa3VVbUZrUTI5dFltOUNiM2hKZEdWdExDQlVaV3hsY21sckxsZGxZaTVWU1N3Z1ZtVnljMmx2YmoweU1ERXlMak11TVRBeE5pNDBNQ3dnUTNWc2RIVnlaVDF1WlhWMGNtRnNMQ0JRZFdKc2FXTkxaWGxVYjJ0bGJqMHhNakZtWVdVM09ERTJOV0poTTJRMEZnNW1EdzhXQkI4UkJRbHlZMkpJWldGa1pYSWZFZ0lDWkdRQ0FROFBGZ1FmRVFVSmNtTmlSbTl2ZEdWeUh4SUNBbVJrQWdJUER4WUdIdzBGQWpFd0h4b0ZBakV3SHh0bkZnSWZIQVVUUjNKcFpGOUZiWEJzYjNsbFpWOWpkR3d3TUdRQ0F3OFBGZ1lmRFFVQ05UQWZHZ1VDTlRBZkcyZ1dBaDhjQlJOSGNtbGtYMFZ0Y0d4dmVXVmxYMk4wYkRBd1pBSUVEdzhXQmg4TkJRTXhNREFmR2dVRE1UQXdIeHRvRmdJZkhBVVRSM0pwWkY5RmJYQnNiM2xsWlY5amRHd3dNR1FDQlE4UEZnWWZEUVVETlRBd0h4b0ZBelV3TUI4YmFCWUNIeHdGRTBkeWFXUmZSVzF3Ykc5NVpXVmZZM1JzTURCa0FnWVBEeFlHSHcwRkJETXdNREFmR2dVRU16QXdNQjhiYUJZQ0h4d0ZFMGR5YVdSZlJXMXdiRzk1WldWZlkzUnNNREJrQWdJUFpCWVNaZzhQRmdRZkRRVUdKbTVpYzNBN0h3NW9aR1FDQVE4UEZnUWZEUVVHSm01aWMzQTdIdzVvWkdRQ0FnOFBGZ0lmRFFVR0ptNWljM0E3WkdRQ0R3OFBGZ0lmRFFVR0ptNWljM0E3WkdRQ0VBOFBGZ0lmRFFVR0ptNWljM0E3WkdRQ0VROFBGZ0lmRFFVR0ptNWljM0E3WkdRQ0VnOFBGZ0lmRFFVR0ptNWljM0E3WkdRQ0V3OFBGZ0lmRFFVR0ptNWljM0E3WkdRQ0ZBOFBGZ0lmRFFVR0ptNWljM0E3WkdRQ0F3OWtGaXBtRHc4V0JCOE5CUVltYm1KemNEc2ZEbWhrWkFJQkR3OFdCQjhOQlFZbWJtSnpjRHNmRG1oa1pBSUNEdzhXQWg4TkJRWW1ibUp6Y0R0a1pBSUREdzlrRmdJZkFRVVRkMmhwZEdVdGMzQmhZMlU2Ym05M2NtRndPeFlFWmc4UFpCWUNIZ3B2Ym10bGVYQnlaWE56QlNkcFppZ29aWFpsYm5RdWEyVjVRMjlrWlNBOVBTQXhNeWtwSUhKbGRIVnliaUJtWVd4elpUdGtBZ0VQRHhZQ0h4Qm9aR1FDQkE4UFpCWUNId0VGRTNkb2FYUmxMWE53WVdObE9tNXZkM0poY0RzV0JHWVBEMlFXQWg4ZEJTZHBaaWdvWlhabGJuUXVhMlY1UTI5a1pTQTlQU0F4TXlrcElISmxkSFZ5YmlCbVlXeHpaVHRrQWdFUER4WUNIeEJvWkdRQ0JROFBaQllDSHdFRkUzZG9hWFJsTFhOd1lXTmxPbTV2ZDNKaGNEc1dCR1lQRDJRV0FoOGRCU2RwWmlnb1pYWmxiblF1YTJWNVEyOWtaU0E5UFNBeE15a3BJSEpsZEhWeWJpQm1ZV3h6WlR0a0FnRVBEeFlDSHhCb1pHUUNCZzhQWkJZQ0h3RUZFM2RvYVhSbExYTndZV05sT201dmQzSmhjRHNXQkdZUEQyUVdBaDhkQlNkcFppZ29aWFpsYm5RdWEyVjVRMjlrWlNBOVBTQXhNeWtwSUhKbGRIVnliaUJtWVd4elpUdGtBZ0VQRHhZQ0h4Qm9aR1FDQnc4UFpCWUNId0VGRTNkb2FYUmxMWE53WVdObE9tNXZkM0poY0RzV0JHWVBEMlFXQWg4ZEJTZHBaaWdvWlhabGJuUXVhMlY1UTI5a1pTQTlQU0F4TXlrcElISmxkSFZ5YmlCbVlXeHpaVHRrQWdFUER4WUNIeEJvWkdRQ0NBOFBaQllDSHdFRkUzZG9hWFJsTFhOd1lXTmxPbTV2ZDNKaGNEc1dCR1lQRDJRV0FoOGRCU2RwWmlnb1pYWmxiblF1YTJWNVEyOWtaU0E5UFNBeE15a3BJSEpsZEhWeWJpQm1ZV3h6WlR0a0FnRVBEeFlDSHhCb1pHUUNDUThQWkJZQ0h3RUZFM2RvYVhSbExYTndZV05sT201dmQzSmhjRHNXQkdZUEQyUVdBaDhkQlNkcFppZ29aWFpsYm5RdWEyVjVRMjlrWlNBOVBTQXhNeWtwSUhKbGRIVnliaUJtWVd4elpUdGtBZ0VQRHhZQ0h4Qm9aR1FDQ2c4UFpCWUNId0VGRTNkb2FYUmxMWE53WVdObE9tNXZkM0poY0RzV0JHWVBEMlFXQWg4ZEJTZHBaaWdvWlhabGJuUXVhMlY1UTI5a1pTQTlQU0F4TXlrcElISmxkSFZ5YmlCbVlXeHpaVHRrQWdFUER4WUNIeEJvWkdRQ0N3OFBaQllDSHdFRkUzZG9hWFJsTFhOd1lXTmxPbTV2ZDNKaGNEc1dCR1lQRDJRV0FoOGRCU2RwWmlnb1pYWmxiblF1YTJWNVEyOWtaU0E5UFNBeE15a3BJSEpsZEhWeWJpQm1ZV3h6WlR0a0FnRVBEeFlDSHhCb1pHUUNEQThQWkJZQ0h3RUZFM2RvYVhSbExYTndZV05sT201dmQzSmhjRHNXQkdZUEQyUVdBaDhkQlNkcFppZ29aWFpsYm5RdWEyVjVRMjlrWlNBOVBTQXhNeWtwSUhKbGRIVnliaUJtWVd4elpUdGtBZ0VQRHhZQ0h4Qm9aR1FDRFE4UFpCWUNId0VGRTNkb2FYUmxMWE53WVdObE9tNXZkM0poY0RzV0JHWVBEMlFXQWg4ZEJTZHBaaWdvWlhabGJuUXVhMlY1UTI5a1pTQTlQU0F4TXlrcElISmxkSFZ5YmlCbVlXeHpaVHRrQWdFUER4WUNIeEJvWkdRQ0RnOFBaQllDSHdFRkUzZG9hWFJsTFhOd1lXTmxPbTV2ZDNKaGNEc1dCR1lQRDJRV0FoOGRCU2RwWmlnb1pYWmxiblF1YTJWNVEyOWtaU0E5UFNBeE15a3BJSEpsZEhWeWJpQm1ZV3h6WlR0a0FnRVBEeFlDSHhCb1pHUUNEdzhQRmdJZkRRVUdKbTVpYzNBN1pHUUNFQThQRmdJZkRRVUdKbTVpYzNBN1pHUUNFUThQRmdJZkRRVUdKbTVpYzNBN1pHUUNFZzhQRmdJZkRRVUdKbTVpYzNBN1pHUUNFdzhQRmdJZkRRVUdKbTVpYzNBN1pHUUNGQThQRmdJZkRRVUdKbTVpYzNBN1pHUUNBUTlrRmdSbUQyUVdLbVlQRHhZQ0h3MEZCaVp1WW5Od08yUmtBZ0VQRHhZQ0h3MEZCaVp1WW5Od08yUmtBZ0lQRHhZQ0h3MEZCaVp1WW5Od08yUmtBZ01QRHhZQ0h3MEZCaVp1WW5Od08yUmtBZ1FQRHhZQ0h3MEZCaVp1WW5Od08yUmtBZ1VQRHhZQ0h3MEZCaVp1WW5Od08yUmtBZ1lQRHhZQ0h3MEZCaVp1WW5Od08yUmtBZ2NQRHhZQ0h3MEZCaVp1WW5Od08yUmtBZ2dQRHhZQ0h3MEZCaVp1WW5Od08yUmtBZ2tQRHhZQ0h3MEZCaVp1WW5Od08yUmtBZ29QRHhZQ0h3MEZCaVp1WW5Od08yUmtBZ3NQRHhZQ0h3MEZCaVp1WW5Od08yUmtBZ3dQRHhZQ0h3MEZCaVp1WW5Od08yUmtBZzBQRHhZQ0h3MEZCaVp1WW5Od08yUmtBZzRQRHhZQ0h3MEZCaVp1WW5Od08yUmtBZzhQRHhZQ0h3MEZCaVp1WW5Od08yUmtBaEFQRHhZQ0h3MEZCaVp1WW5Od08yUmtBaEVQRHhZQ0h3MEZCaVp1WW5Od08yUmtBaElQRHhZQ0h3MEZCaVp1WW5Od08yUmtBaE1QRHhZQ0h3MEZCaVp1WW5Od08yUmtBaFFQRHhZQ0h3MEZCaVp1WW5Od08yUmtBZ0VQWkJZQ1pnOFBGZ0lmRHdJUFpCWUNaZzlrRmdJQ0FROWtGZ0lDQVE5a0ZnaG1EMlFXQkdZUER4WUNIeEJvWkdRQ0FnOFBGZ0lmRUdoa1pBSUJEMlFXQW1ZUER4WUVIeEVGRFhKblEzVnljbVZ1ZEZCaFoyVWZFZ0lDWkdRQ0FnOWtGZ1JtRHc4V0FoOFFhR1JrQWdJUER4WUNIeEJvWkdRQ0F3OFBGZ1FmRVFVUWNtZFhjbUZ3SUhKblFXUjJVR0Z5ZEI4U0FnSmtGZ0lDQVE4VUt3QUNEeFlZSHhObkh4Um5IdzBGQWpFd0h4VUZMbFJsYkdWeWFXc3VWMlZpTGxWSkxrZHlhV1F1UTJoaGJtZGxVR0ZuWlZOcGVtVkRiMjFpYjBoaGJtUnNaWElmRm1jZUJGTnJhVzRGQ2s5bVptbGpaVEl3TURjZkEyY2ZGMmNmQUdnZkdHUWZFZ0tBQWg4Wkd3QUFBQUFBQUVkQUFRQUFBR1FQRkNzQUJSUXJBQUlQRmdZZkRRVUNNVEFmR2dVQ01UQWZHMmNXQWg4Y0JSTkhjbWxrWDBWdGNHeHZlV1ZsWDJOMGJEQXdaQlFyQUFJUEZnWWZEUVVDTlRBZkdnVUNOVEFmRzJnV0FoOGNCUk5IY21sa1gwVnRjR3h2ZVdWbFgyTjBiREF3WkJRckFBSVBGZ1lmRFFVRE1UQXdIeG9GQXpFd01COGJhQllDSHh3RkUwZHlhV1JmUlcxd2JHOTVaV1ZmWTNSc01EQmtGQ3NBQWc4V0JoOE5CUU0xTURBZkdnVUROVEF3SHh0b0ZnSWZIQVVUUjNKcFpGOUZiWEJzYjNsbFpWOWpkR3d3TUdRVUt3QUNEeFlHSHcwRkJETXdNREFmR2dVRU16QXdNQjhiYUJZQ0h4d0ZFMGR5YVdSZlJXMXdiRzk1WldWZlkzUnNNREJrRHhRckFRVm1abVptWmhZQkJYaFVaV3hsY21sckxsZGxZaTVWU1M1U1lXUkRiMjFpYjBKdmVFbDBaVzBzSUZSbGJHVnlhV3N1VjJWaUxsVkpMQ0JXWlhKemFXOXVQVEl3TVRJdU15NHhNREUyTGpRd0xDQkRkV3gwZFhKbFBXNWxkWFJ5WVd3c0lGQjFZbXhwWTB0bGVWUnZhMlZ1UFRFeU1XWmhaVGM0TVRZMVltRXpaRFFXRG1ZUER4WUVIeEVGQ1hKallraGxZV1JsY2g4U0FnSmtaQUlCRHc4V0JCOFJCUWx5WTJKR2IyOTBaWElmRWdJQ1pHUUNBZzhQRmdZZkRRVUNNVEFmR2dVQ01UQWZHMmNXQWg4Y0JSTkhjbWxrWDBWdGNHeHZlV1ZsWDJOMGJEQXdaQUlERHc4V0JoOE5CUUkxTUI4YUJRSTFNQjhiYUJZQ0h4d0ZFMGR5YVdSZlJXMXdiRzk1WldWZlkzUnNNREJrQWdRUER4WUdIdzBGQXpFd01COGFCUU14TURBZkcyZ1dBaDhjQlJOSGNtbGtYMFZ0Y0d4dmVXVmxYMk4wYkRBd1pBSUZEdzhXQmg4TkJRTTFNREFmR2dVRE5UQXdIeHRvRmdJZkhBVVRSM0pwWkY5RmJYQnNiM2xsWlY5amRHd3dNR1FDQmc4UEZnWWZEUVVFTXpBd01COGFCUVF6TURBd0h4dG9GZ0lmSEFVVFIzSnBaRjlGYlhCc2IzbGxaVjlqZEd3d01HUUNBZzhQRmdJZUJGOXBhV2dGQVRCa0ZpWm1EdzhXQWg4T2FHUVdBbVlQRHhZQ0h4Qm9aR1FDQVE4UEZnUWZEUVVHSm01aWMzQTdIdzVvWkdRQ0F3OFBGZ0lmRFFVRE1qVXlaR1FDQkE4UEZnSWZEUVVDTVRGa1pBSUZEMlFXQW1ZUER4WUVIdzBGQWpBeEhnZFViMjlzVkdsd0JRSXdNV1JrQWdZUER4WUNIdzBGQkhWelpYSmtaQUlIRHc4V0FoOE5CUU5DSmxOa1pBSUlEdzhXQWg4TkJRZEVaV1poZFd4MFpHUUNDUThQRmdJZkRRVUhSR1ZtWVhWc2RHUmtBZ29QRHhZQ0h3MEZCaVp1WW5Od08yUmtBZ3NQRHhZQ0h3MEZCaVp1WW5Od08yUmtBZ3dQRHhZQ0h3MEZCMWR2Y210cGJtZGtaQUlORHc4V0FoOE5CUVltYm1KemNEdGtaQUlPRHc4V0FoOE5CUVltYm1KemNEdGtaQUlQRDJRV0FtWVBEeFlDSGd0T1lYWnBaMkYwWlZWeWJBVlVVbVZ3YjNKMGFXNW5UV0Z1WVdkbGNreHBjM1F1WVhOd2VEOUZiWEJzYjNsbFpVbGtQVEkxTWlaRmJYQnNiM2xsWlVOdlpHVTlNREVtUlcxd2JHOTVaV1ZPWVcxbFBYVnpaWEltVW1Wd2IzSjBWRzg5WkdRQ0VBOWtGZ0ptRHc4V0FoOGhCVXhGYlhCc2IzbGxaVVpoYldGcGJIbEVaWFJoYVd4ekxtRnpjSGcvUlcxd2JHOTVaV1ZKWkQweU5USW1SVzF3Ykc5NVpXVkRiMlJsUFRBeEprVnRjR3h2ZVdWbFRtRnRaVDExYzJWeVpHUUNFUTlrRmdKbUR3OFdBaDhoQlVkRmJYQnNiM2xsWlVSdlkzVnRaVzUwY3k1aGMzQjRQMFZ0Y0d4dmVXVmxTV1E5TWpVeUprVnRjR3h2ZVdWbFEyOWtaVDB3TVNaRmJYQnNiM2xsWlU1aGJXVTlkWE5sY21Sa0FoSVBaQllDWmc4UEZnSWZJUVZPUlcxd2JHOTVaV1ZDYVc5RVpYUmhhV3h6TG1GemNIZy9SVzF3Ykc5NVpXVkpaRDB5TlRJbVJXMXdiRzk1WldWRGIyUmxQVEF4SmtWdGNHeHZlV1ZsUTI5a1pVbHVSR1YyYVdObFBURXhaR1FDRXc4UEZnSWZEV1ZrRmdJQ0FROFBaQllFSGdSb2NtVm1CUk5xWVhaaGMyTnlhWEIwT25admFXUW9NQ2s3SGdkdmJtTnNhV05yQlI5eVpYUjFjbTRnVTJodmQwVmthWFJHYjNKdEtDY3lOVEluTENjd0p5azdaQUlERDJRV0FtWVBEeFlDSHc1b1pHUUNCQThQRmdJZkh3VUJNV1FXSm1ZUER4WUNIdzVvWkJZQ1pnOFBGZ0lmRUdoa1pBSUJEdzhXQkI4TkJRWW1ibUp6Y0RzZkRtaGtaQUlERHc4V0FoOE5CUU15TnpOa1pBSUVEdzhXQWg4TkJRTXlNekZrWkFJRkQyUVdBbVlQRHhZRUh3MEZBVEVmSUFVQk1XUmtBZ1lQRHhZQ0h3MEZCSFZrWVdsa1pBSUhEdzhXQWg4TkJRTkNKbE5rWkFJSUR3OFdBaDhOQlFKUVZHUmtBZ2tQRHhZQ0h3MEZCMFJsWm1GMWJIUmtaQUlLRHc4V0FoOE5CUVltYm1KemNEdGtaQUlMRHc4V0FoOE5CUVltYm1KemNEdGtaQUlNRHc4V0FoOE5CUWRYYjNKcmFXNW5aR1FDRFE4UEZnSWZEUVVHSm01aWMzQTdaR1FDRGc4UEZnSWZEUVVHSm01aWMzQTdaR1FDRHc5a0ZnSm1EdzhXQWg4aEJWTlNaWEJ2Y25ScGJtZE5ZVzVoWjJWeVRHbHpkQzVoYzNCNFAwVnRjR3h2ZVdWbFNXUTlNamN6SmtWdGNHeHZlV1ZsUTI5a1pUMHhKa1Z0Y0d4dmVXVmxUbUZ0WlQxMVpHRnBKbEpsY0c5eWRGUnZQV1JrQWhBUFpCWUNaZzhQRmdJZklRVkxSVzF3Ykc5NVpXVkdZVzFoYVd4NVJHVjBZV2xzY3k1aGMzQjRQMFZ0Y0d4dmVXVmxTV1E5TWpjekprVnRjR3h2ZVdWbFEyOWtaVDB4SmtWdGNHeHZlV1ZsVG1GdFpUMTFaR0ZwWkdRQ0VROWtGZ0ptRHc4V0FoOGhCVVpGYlhCc2IzbGxaVVJ2WTNWdFpXNTBjeTVoYzNCNFAwVnRjR3h2ZVdWbFNXUTlNamN6SmtWdGNHeHZlV1ZsUTI5a1pUMHhKa1Z0Y0d4dmVXVmxUbUZ0WlQxMVpHRnBaR1FDRWc5a0ZnSm1EdzhXQWg4aEJVNUZiWEJzYjNsbFpVSnBiMFJsZEdGcGJITXVZWE53ZUQ5RmJYQnNiM2xsWlVsa1BUSTNNeVpGYlhCc2IzbGxaVU52WkdVOU1TWkZiWEJzYjNsbFpVTnZaR1ZKYmtSbGRtbGpaVDB5TXpGa1pBSVREdzhXQWg4TlpXUVdBZ0lCRHc5a0ZnUWZJZ1VUYW1GMllYTmpjbWx3ZERwMmIybGtLREFwT3g4akJSOXlaWFIxY200Z1UyaHZkMFZrYVhSR2IzSnRLQ2N5TnpNbkxDY3hKeWs3WkFJRkQyUVdBbVlQRHhZQ0h3NW9aR1FDQmc4UEZnSWZId1VCTW1RV0ptWVBEeFlDSHc1b1pCWUNaZzhQRmdJZkVHaGtaQUlCRHc4V0JCOE5CUVltYm1KemNEc2ZEbWhrWkFJRER3OFdBaDhOQlFNeU56WmtaQUlFRHc4V0FoOE5CUVExTXk0eVpHUUNCUTlrRmdKbUR3OFdCQjhOQlFFeUh5QUZBVEprWkFJR0R3OFdBaDhOQlFaamFHRnBkSFZrWkFJSER3OFdBaDhOQlFOQ0psTmtaQUlJRHc4V0FoOE5CUWRFWldaaGRXeDBaR1FDQ1E4UEZnSWZEUVVIUkdWbVlYVnNkR1JrQWdvUER4WUNIdzBGQmladVluTndPMlJrQWdzUER4WUNIdzBGQmladVluTndPMlJrQWd3UER4WUNIdzBGQjFkdmNtdHBibWRrWkFJTkR3OFdBaDhOQlFZbWJtSnpjRHRrWkFJT0R3OFdBaDhOQlFZbWJtSnpjRHRrWkFJUEQyUVdBbVlQRHhZQ0h5RUZWVkpsY0c5eWRHbHVaMDFoYm1GblpYSk1hWE4wTG1GemNIZy9SVzF3Ykc5NVpXVkpaRDB5TnpZbVJXMXdiRzk1WldWRGIyUmxQVEltUlcxd2JHOTVaV1ZPWVcxbFBXTm9ZV2wwZFNaU1pYQnZjblJVYnoxa1pBSVFEMlFXQW1ZUER4WUNIeUVGVFVWdGNHeHZlV1ZsUm1GdFlXbHNlVVJsZEdGcGJITXVZWE53ZUQ5RmJYQnNiM2xsWlVsa1BUSTNOaVpGYlhCc2IzbGxaVU52WkdVOU1pWkZiWEJzYjNsbFpVNWhiV1U5WTJoaGFYUjFaR1FDRVE5a0ZnSm1EdzhXQWg4aEJVaEZiWEJzYjNsbFpVUnZZM1Z0Wlc1MGN5NWhjM0I0UDBWdGNHeHZlV1ZsU1dROU1qYzJKa1Z0Y0d4dmVXVmxRMjlrWlQweUprVnRjR3h2ZVdWbFRtRnRaVDFqYUdGcGRIVmtaQUlTRDJRV0FtWVBEeFlDSHlFRlQwVnRjR3h2ZVdWbFFtbHZSR1YwWVdsc2N5NWhjM0I0UDBWdGNHeHZlV1ZsU1dROU1qYzJKa1Z0Y0d4dmVXVmxRMjlrWlQweUprVnRjR3h2ZVdWbFEyOWtaVWx1UkdWMmFXTmxQVFV6TGpKa1pBSVREdzhXQWg4TlpXUVdBZ0lCRHc5a0ZnUWZJZ1VUYW1GMllYTmpjbWx3ZERwMmIybGtLREFwT3g4akJSOXlaWFIxY200Z1UyaHZkMFZrYVhSR2IzSnRLQ2N5TnpZbkxDY3lKeWs3WkFJSEQyUVdBbVlQRHhZQ0h3NW9aR1FDQ0E4UEZnSWZId1VCTTJRV0ptWVBEeFlDSHc1b1pCWUNaZzhQRmdJZkVHaGtaQUlCRHc4V0JCOE5CUVltYm1KemNEc2ZEbWhrWkFJRER3OFdBaDhOQlFNeU16VmtaQUlFRHc4V0FoOE5CUVV3TURFd01HUmtBZ1VQWkJZQ1pnOFBGZ1FmRFFVRU1EQXhNQjhnQlFRd01ERXdaR1FDQmc4UEZnSWZEUVVFVW1GcWRXUmtBZ2NQRHhZQ0h3MEZCR050Y0hsa1pBSUlEdzhXQWg4TkJRZEVaV1poZFd4MFpHUUNDUThQRmdJZkRRVUhSR1ZtWVhWc2RHUmtBZ29QRHhZQ0h3MEZCaVp1WW5Od08yUmtBZ3NQRHhZQ0h3MEZCaVp1WW5Od08yUmtBZ3dQRHhZQ0h3MEZCMWR2Y210cGJtZGtaQUlORHc4V0FoOE5CUVltYm1KemNEdGtaQUlPRHc4V0FoOE5CUVltYm1KemNEdGtaQUlQRDJRV0FtWVBEeFlDSHlFRlZsSmxjRzl5ZEdsdVowMWhibUZuWlhKTWFYTjBMbUZ6Y0hnL1JXMXdiRzk1WldWSlpEMHlNelVtUlcxd2JHOTVaV1ZEYjJSbFBUQXdNVEFtUlcxd2JHOTVaV1ZPWVcxbFBWSmhhblVtVW1Wd2IzSjBWRzg5WkdRQ0VBOWtGZ0ptRHc4V0FoOGhCVTVGYlhCc2IzbGxaVVpoYldGcGJIbEVaWFJoYVd4ekxtRnpjSGcvUlcxd2JHOTVaV1ZKWkQweU16VW1SVzF3Ykc5NVpXVkRiMlJsUFRBd01UQW1SVzF3Ykc5NVpXVk9ZVzFsUFZKaGFuVmtaQUlSRDJRV0FtWVBEeFlDSHlFRlNVVnRjR3h2ZVdWbFJHOWpkVzFsYm5SekxtRnpjSGcvUlcxd2JHOTVaV1ZKWkQweU16VW1SVzF3Ykc5NVpXVkRiMlJsUFRBd01UQW1SVzF3Ykc5NVpXVk9ZVzFsUFZKaGFuVmtaQUlTRDJRV0FtWVBEeFlDSHlFRlUwVnRjR3h2ZVdWbFFtbHZSR1YwWVdsc2N5NWhjM0I0UDBWdGNHeHZlV1ZsU1dROU1qTTFKa1Z0Y0d4dmVXVmxRMjlrWlQwd01ERXdKa1Z0Y0d4dmVXVmxRMjlrWlVsdVJHVjJhV05sUFRBd01UQXdaR1FDRXc4UEZnSWZEV1ZrRmdJQ0FROFBaQllFSHlJRkUycGhkbUZ6WTNKcGNIUTZkbTlwWkNnd0tUc2ZJd1VmY21WMGRYSnVJRk5vYjNkRlpHbDBSbTl5YlNnbk1qTTFKeXduTXljcE8yUUNDUTlrRmdKbUR3OFdBaDhPYUdSa0Fnb1BEeFlDSHg4RkFUUmtGaVptRHc4V0FoOE9hR1FXQW1ZUER4WUNIeEJvWkdRQ0FROFBGZ1FmRFFVR0ptNWljM0E3SHc1b1pHUUNBdzhQRmdJZkRRVURNVGt4WkdRQ0JBOFBGZ0lmRFFVRk9UUTVNakZrWkFJRkQyUVdBbVlQRHhZRUh3MEZBekF4TUI4Z0JRTXdNVEJrWkFJR0R3OFdBaDhOQlFWbVlYcGhiR1JrQWdjUER4WUNIdzBGQTBJbVUyUmtBZ2dQRHhZQ0h3MEZCMFJsWm1GMWJIUmtaQUlKRHc4V0FoOE5CUWRFWldaaGRXeDBaR1FDQ2c4UEZnSWZEUVVHSm01aWMzQTdaR1FDQ3c4UEZnSWZEUVVHSm01aWMzQTdaR1FDREE4UEZnSWZEUVVIVjI5eWEybHVaMlJrQWcwUER4WUNIdzBGQmladVluTndPMlJrQWc0UER4WUNIdzBGQmladVluTndPMlJrQWc4UFpCWUNaZzhQRmdJZklRVldVbVZ3YjNKMGFXNW5UV0Z1WVdkbGNreHBjM1F1WVhOd2VEOUZiWEJzYjNsbFpVbGtQVEU1TVNaRmJYQnNiM2xsWlVOdlpHVTlNREV3SmtWdGNHeHZlV1ZsVG1GdFpUMW1ZWHBoYkNaU1pYQnZjblJVYnoxa1pBSVFEMlFXQW1ZUER4WUNIeUVGVGtWdGNHeHZlV1ZsUm1GdFlXbHNlVVJsZEdGcGJITXVZWE53ZUQ5RmJYQnNiM2xsWlVsa1BURTVNU1pGYlhCc2IzbGxaVU52WkdVOU1ERXdKa1Z0Y0d4dmVXVmxUbUZ0WlQxbVlYcGhiR1JrQWhFUFpCWUNaZzhQRmdJZklRVkpSVzF3Ykc5NVpXVkViMk4xYldWdWRITXVZWE53ZUQ5RmJYQnNiM2xsWlVsa1BURTVNU1pGYlhCc2IzbGxaVU52WkdVOU1ERXdKa1Z0Y0d4dmVXVmxUbUZ0WlQxbVlYcGhiR1JrQWhJUFpCWUNaZzhQRmdJZklRVlNSVzF3Ykc5NVpXVkNhVzlFWlhSaGFXeHpMbUZ6Y0hnL1JXMXdiRzk1WldWSlpEMHhPVEVtUlcxd2JHOTVaV1ZEYjJSbFBUQXhNQ1pGYlhCc2IzbGxaVU52WkdWSmJrUmxkbWxqWlQwNU5Ea3lNV1JrQWhNUER4WUNIdzFsWkJZQ0FnRVBEMlFXQkI4aUJSTnFZWFpoYzJOeWFYQjBPblp2YVdRb01DazdIeU1GSDNKbGRIVnliaUJUYUc5M1JXUnBkRVp2Y20wb0p6RTVNU2NzSnpRbktUdGtBZ3NQWkJZQ1pnOFBGZ0lmRG1oa1pBSU1EdzhXQWg4ZkJRRTFaQlltWmc4UEZnSWZEbWhrRmdKbUR3OFdBaDhRYUdSa0FnRVBEeFlFSHcwRkJpWnVZbk53T3g4T2FHUmtBZ01QRHhZQ0h3MEZBekkxTTJSa0FnUVBEeFlDSHcwRkF6RXlNV1JrQWdVUFpCWUNaZzhQRmdRZkRRVURNREV4SHlBRkF6QXhNV1JrQWdZUER4WUNIdzBGQ1hSbFkyZ2dkWE5sY21Sa0FnY1BEeFlDSHcwRkEwSW1VMlJrQWdnUER4WUNIdzBGQjBSbFptRjFiSFJrWkFJSkR3OFdBaDhOQlFkRVpXWmhkV3gwWkdRQ0NnOFBGZ0lmRFFVR0ptNWljM0E3WkdRQ0N3OFBGZ0lmRFFVR0ptNWljM0E3WkdRQ0RBOFBGZ0lmRFFVSFYyOXlhMmx1WjJSa0FnMFBEeFlDSHcwRkJpWnVZbk53TzJSa0FnNFBEeFlDSHcwRkJpWnVZbk53TzJSa0FnOFBaQllDWmc4UEZnSWZJUVZhVW1Wd2IzSjBhVzVuVFdGdVlXZGxja3hwYzNRdVlYTndlRDlGYlhCc2IzbGxaVWxrUFRJMU15WkZiWEJzYjNsbFpVTnZaR1U5TURFeEprVnRjR3h2ZVdWbFRtRnRaVDEwWldOb0lIVnpaWEltVW1Wd2IzSjBWRzg5WkdRQ0VBOWtGZ0ptRHc4V0FoOGhCVkpGYlhCc2IzbGxaVVpoYldGcGJIbEVaWFJoYVd4ekxtRnpjSGcvUlcxd2JHOTVaV1ZKWkQweU5UTW1SVzF3Ykc5NVpXVkRiMlJsUFRBeE1TWkZiWEJzYjNsbFpVNWhiV1U5ZEdWamFDQjFjMlZ5WkdRQ0VROWtGZ0ptRHc4V0FoOGhCVTFGYlhCc2IzbGxaVVJ2WTNWdFpXNTBjeTVoYzNCNFAwVnRjR3h2ZVdWbFNXUTlNalV6SmtWdGNHeHZlV1ZsUTI5a1pUMHdNVEVtUlcxd2JHOTVaV1ZPWVcxbFBYUmxZMmdnZFhObGNtUmtBaElQWkJZQ1pnOFBGZ0lmSVFWUVJXMXdiRzk1WldWQ2FXOUVaWFJoYVd4ekxtRnpjSGcvUlcxd2JHOTVaV1ZKWkQweU5UTW1SVzF3Ykc5NVpXVkRiMlJsUFRBeE1TWkZiWEJzYjNsbFpVTnZaR1ZKYmtSbGRtbGpaVDB4TWpGa1pBSVREdzhXQWg4TlpXUVdBZ0lCRHc5a0ZnUWZJZ1VUYW1GMllYTmpjbWx3ZERwMmIybGtLREFwT3g4akJSOXlaWFIxY200Z1UyaHZkMFZrYVhSR2IzSnRLQ2N5TlRNbkxDYzFKeWs3WkFJTkQyUVdBbVlQRHhZQ0h3NW9aR1FDRGc4UEZnSWZId1VCTm1RV0ptWVBEeFlDSHc1b1pCWUNaZzhQRmdJZkVHaGtaQUlCRHc4V0JCOE5CUVltYm1KemNEc2ZEbWhrWkFJRER3OFdBaDhOQlFNeU5EWmtaQUlFRHc4V0FoOE5CUU15TXpSa1pBSUZEMlFXQW1ZUER4WUVIdzBGQXpFeU14OGdCUU14TWpOa1pBSUdEdzhXQWg4TkJRaGhZMmg1ZFhSb2JtUmtBZ2NQRHhZQ0h3MEZBMEltVTJSa0FnZ1BEeFlDSHcwRkFsQlVaR1FDQ1E4UEZnSWZEUVVIUkdWbVlYVnNkR1JrQWdvUER4WUNIdzBGQmladVluTndPMlJrQWdzUER4WUNIdzBGQmladVluTndPMlJrQWd3UER4WUNIdzBGQjFkdmNtdHBibWRrWkFJTkR3OFdBaDhOQlFZbWJtSnpjRHRrWkFJT0R3OFdBaDhOQlFZbWJtSnpjRHRrWkFJUEQyUVdBbVlQRHhZQ0h5RUZXVkpsY0c5eWRHbHVaMDFoYm1GblpYSk1hWE4wTG1GemNIZy9SVzF3Ykc5NVpXVkpaRDB5TkRZbVJXMXdiRzk1WldWRGIyUmxQVEV5TXlaRmJYQnNiM2xsWlU1aGJXVTlZV05vZVhWMGFHNG1VbVZ3YjNKMFZHODlaR1FDRUE5a0ZnSm1EdzhXQWg4aEJWRkZiWEJzYjNsbFpVWmhiV0ZwYkhsRVpYUmhhV3h6TG1GemNIZy9SVzF3Ykc5NVpXVkpaRDB5TkRZbVJXMXdiRzk1WldWRGIyUmxQVEV5TXlaRmJYQnNiM2xsWlU1aGJXVTlZV05vZVhWMGFHNWtaQUlSRDJRV0FtWVBEeFlDSHlFRlRFVnRjR3h2ZVdWbFJHOWpkVzFsYm5SekxtRnpjSGcvUlcxd2JHOTVaV1ZKWkQweU5EWW1SVzF3Ykc5NVpXVkRiMlJsUFRFeU15WkZiWEJzYjNsbFpVNWhiV1U5WVdOb2VYVjBhRzVrWkFJU0QyUVdBbVlQRHhZQ0h5RUZVRVZ0Y0d4dmVXVmxRbWx2UkdWMFlXbHNjeTVoYzNCNFAwVnRjR3h2ZVdWbFNXUTlNalEySmtWdGNHeHZlV1ZsUTI5a1pUMHhNak1tUlcxd2JHOTVaV1ZEYjJSbFNXNUVaWFpwWTJVOU1qTTBaR1FDRXc4UEZnSWZEV1ZrRmdJQ0FROFBaQllFSHlJRkUycGhkbUZ6WTNKcGNIUTZkbTlwWkNnd0tUc2ZJd1VmY21WMGRYSnVJRk5vYjNkRlpHbDBSbTl5YlNnbk1qUTJKeXduTmljcE8yUUNEdzlrRmdKbUR3OFdBaDhPYUdSa0FoQVBEeFlDSHg4RkFUZGtGaVptRHc4V0FoOE9hR1FXQW1ZUER4WUNIeEJvWkdRQ0FROFBGZ1FmRFFVR0ptNWljM0E3SHc1b1pHUUNBdzhQRmdJZkRRVURNakV5WkdRQ0JBOFBGZ0lmRFFVRmRqTXdPVGhrWkFJRkQyUVdBbVlQRHhZRUh3MEZBekl3TVI4Z0JRTXlNREZrWkFJR0R3OFdBaDhOQlFWMlpXNWhkR1JrQWdjUER4WUNIdzBGQTBJbVUyUmtBZ2dQRHhZQ0h3MEZCMFJsWm1GMWJIUmtaQUlKRHc4V0FoOE5CUWRFWldaaGRXeDBaR1FDQ2c4UEZnSWZEUVVHSm01aWMzQTdaR1FDQ3c4UEZnSWZEUVVHSm01aWMzQTdaR1FDREE4UEZnSWZEUVVIVjI5eWEybHVaMlJrQWcwUER4WUNIdzBGQmladVluTndPMlJrQWc0UER4WUNIdzBGQmladVluTndPMlJrQWc4UFpCWUNaZzhQRmdJZklRVldVbVZ3YjNKMGFXNW5UV0Z1WVdkbGNreHBjM1F1WVhOd2VEOUZiWEJzYjNsbFpVbGtQVEl4TWlaRmJYQnNiM2xsWlVOdlpHVTlNakF4SmtWdGNHeHZlV1ZsVG1GdFpUMTJaVzVoZENaU1pYQnZjblJVYnoxa1pBSVFEMlFXQW1ZUER4WUNIeUVGVGtWdGNHeHZlV1ZsUm1GdFlXbHNlVVJsZEdGcGJITXVZWE53ZUQ5RmJYQnNiM2xsWlVsa1BUSXhNaVpGYlhCc2IzbGxaVU52WkdVOU1qQXhKa1Z0Y0d4dmVXVmxUbUZ0WlQxMlpXNWhkR1JrQWhFUFpCWUNaZzhQRmdJZklRVkpSVzF3Ykc5NVpXVkViMk4xYldWdWRITXVZWE53ZUQ5RmJYQnNiM2xsWlVsa1BUSXhNaVpGYlhCc2IzbGxaVU52WkdVOU1qQXhKa1Z0Y0d4dmVXVmxUbUZ0WlQxMlpXNWhkR1JrQWhJUFpCWUNaZzhQRmdJZklRVlNSVzF3Ykc5NVpXVkNhVzlFWlhSaGFXeHpMbUZ6Y0hnL1JXMXdiRzk1WldWSlpEMHlNVEltUlcxd2JHOTVaV1ZEYjJSbFBUSXdNU1pGYlhCc2IzbGxaVU52WkdWSmJrUmxkbWxqWlQxMk16QTVPR1JrQWhNUER4WUNIdzFsWkJZQ0FnRVBEMlFXQkI4aUJSTnFZWFpoYzJOeWFYQjBPblp2YVdRb01DazdIeU1GSDNKbGRIVnliaUJUYUc5M1JXUnBkRVp2Y20wb0p6SXhNaWNzSnpjbktUdGtBaEVQWkJZQ1pnOFBGZ0lmRG1oa1pBSVNEdzhXQWg4ZkJRRTRaQlltWmc4UEZnSWZEbWhrRmdKbUR3OFdBaDhRYUdSa0FnRVBEeFlFSHcwRkJpWnVZbk53T3g4T2FHUmtBZ01QRHhZQ0h3MEZBekl4TkdSa0FnUVBEeFlDSHcwRkJuWnVNekF5T1dSa0FnVVBaQllDWmc4UEZnUWZEUVVETWpBekh5QUZBekl3TTJSa0FnWVBEeFlDSHcwRkJYWmxibTVyWkdRQ0J3OFBGZ0lmRFFVRFFpWlRaR1FDQ0E4UEZnSWZEUVVIUkdWbVlYVnNkR1JrQWdrUER4WUNIdzBGQjBSbFptRjFiSFJrWkFJS0R3OFdBaDhOQlFZbWJtSnpjRHRrWkFJTER3OFdBaDhOQlFZbWJtSnpjRHRrWkFJTUR3OFdBaDhOQlFkWGIzSnJhVzVuWkdRQ0RROFBGZ0lmRFFVR0ptNWljM0E3WkdRQ0RnOFBGZ0lmRFFVR0ptNWljM0E3WkdRQ0R3OWtGZ0ptRHc4V0FoOGhCVlpTWlhCdmNuUnBibWROWVc1aFoyVnlUR2x6ZEM1aGMzQjRQMFZ0Y0d4dmVXVmxTV1E5TWpFMEprVnRjR3h2ZVdWbFEyOWtaVDB5TURNbVJXMXdiRzk1WldWT1lXMWxQWFpsYm01ckpsSmxjRzl5ZEZSdlBXUmtBaEFQWkJZQ1pnOFBGZ0lmSVFWT1JXMXdiRzk1WldWR1lXMWhhV3g1UkdWMFlXbHNjeTVoYzNCNFAwVnRjR3h2ZVdWbFNXUTlNakUwSmtWdGNHeHZlV1ZsUTI5a1pUMHlNRE1tUlcxd2JHOTVaV1ZPWVcxbFBYWmxibTVyWkdRQ0VROWtGZ0ptRHc4V0FoOGhCVWxGYlhCc2IzbGxaVVJ2WTNWdFpXNTBjeTVoYzNCNFAwVnRjR3h2ZVdWbFNXUTlNakUwSmtWdGNHeHZlV1ZsUTI5a1pUMHlNRE1tUlcxd2JHOTVaV1ZPWVcxbFBYWmxibTVyWkdRQ0VnOWtGZ0ptRHc4V0FoOGhCVk5GYlhCc2IzbGxaVUpwYjBSbGRHRnBiSE11WVhOd2VEOUZiWEJzYjNsbFpVbGtQVEl4TkNaRmJYQnNiM2xsWlVOdlpHVTlNakF6SmtWdGNHeHZlV1ZsUTI5a1pVbHVSR1YyYVdObFBYWnVNekF5T1dSa0FoTVBEeFlDSHcxbFpCWUNBZ0VQRDJRV0JCOGlCUk5xWVhaaGMyTnlhWEIwT25admFXUW9NQ2s3SHlNRkgzSmxkSFZ5YmlCVGFHOTNSV1JwZEVadmNtMG9Kekl4TkNjc0p6Z25LVHRrQWhNUFpCWUNaZzhQRmdJZkRtaGtaQUlVRHc4V0FoOGZCUUU1WkJZbVpnOFBGZ0lmRG1oa0ZnSm1EdzhXQWg4UWFHUmtBZ0VQRHhZRUh3MEZCaVp1WW5Od094OE9hR1JrQWdNUER4WUNIdzBGQXpFMU5HUmtBZ1FQRHhZQ0h3MEZBMkZpWTJSa0FnVVBaQllDWmc4UEZnUWZEUVVETWpnd0h5QUZBekk0TUdSa0FnWVBEeFlDSHcwRkJuWmhiWE5vYVdSa0FnY1BEeFlDSHcwRkEwSW1VMlJrQWdnUER4WUNIdzBGQjBSbFptRjFiSFJrWkFJSkR3OFdBaDhOQlFkRVpXWmhkV3gwWkdRQ0NnOFBGZ0lmRFFVR0ptNWljM0E3WkdRQ0N3OFBGZ0lmRFFVR0ptNWljM0E3WkdRQ0RBOFBGZ0lmRFFVSFYyOXlhMmx1WjJSa0FnMFBEeFlDSHcwRkJpWnVZbk53TzJSa0FnNFBEeFlDSHcwRkJpWnVZbk53TzJSa0FnOFBaQllDWmc4UEZnSWZJUVZYVW1Wd2IzSjBhVzVuVFdGdVlXZGxja3hwYzNRdVlYTndlRDlGYlhCc2IzbGxaVWxrUFRFMU5DWkZiWEJzYjNsbFpVTnZaR1U5TWpnd0prVnRjR3h2ZVdWbFRtRnRaVDEyWVcxemFHa21VbVZ3YjNKMFZHODlaR1FDRUE5a0ZnSm1EdzhXQWg4aEJVOUZiWEJzYjNsbFpVWmhiV0ZwYkhsRVpYUmhhV3h6TG1GemNIZy9SVzF3Ykc5NVpXVkpaRDB4TlRRbVJXMXdiRzk1WldWRGIyUmxQVEk0TUNaRmJYQnNiM2xsWlU1aGJXVTlkbUZ0YzJocFpHUUNFUTlrRmdKbUR3OFdBaDhoQlVwRmJYQnNiM2xsWlVSdlkzVnRaVzUwY3k1aGMzQjRQMFZ0Y0d4dmVXVmxTV1E5TVRVMEprVnRjR3h2ZVdWbFEyOWtaVDB5T0RBbVJXMXdiRzk1WldWT1lXMWxQWFpoYlhOb2FXUmtBaElQWkJZQ1pnOFBGZ0lmSVFWUVJXMXdiRzk1WldWQ2FXOUVaWFJoYVd4ekxtRnpjSGcvUlcxd2JHOTVaV1ZKWkQweE5UUW1SVzF3Ykc5NVpXVkRiMlJsUFRJNE1DWkZiWEJzYjNsbFpVTnZaR1ZKYmtSbGRtbGpaVDFoWW1Oa1pBSVREdzhXQWg4TlpXUVdBZ0lCRHc5a0ZnUWZJZ1VUYW1GMllYTmpjbWx3ZERwMmIybGtLREFwT3g4akJSOXlaWFIxY200Z1UyaHZkMFZrYVhSR2IzSnRLQ2N4TlRRbkxDYzVKeWs3WkFJVkQyUVdBbVlQRHhZQ0h3NW9aR1FDQWc4VUt3QUNGQ3NBQWhRckFBSVBGZ1FmQUdnZkhnVUtUMlptYVdObE1qQXdOMlFRRmhKbUFnRUNBZ0lEQWdRQ0JRSUdBZ2NDQ0FJSkFnb0NDd0lNQWcwQ0RnSVBBaEFDRVJZU0ZDc0FBZzlrRmdRZUVHTnZiSFZ0YmxWdWFYRjFaVTVoYldWbEhnZDBZV0pzWlVsRVpXUVVLd0FDRDJRV0JCOGtaUjhsWldRVUt3QUNEMlFXQkI4a1pSOGxaV1FVS3dBQ0QyUVdCQjhrWlI4bFpXUVVLd0FDRDJRV0JCOGtaUjhsWldRVUt3QUNEMlFXQkI4a1pSOGxaV1FVS3dBQ0QyUVdCQjhrWlI4bFpXUVVLd0FDRDJRV0JCOGtaUjhsWldRVUt3QUNEMlFXQkI4a1pSOGxaV1FVS3dBQ0QyUVdCQjhrWlI4bFpXUVVLd0FDRDJRV0JCOGtaUjhsWldRVUt3QUNEMlFXQkI4a1pSOGxaV1FVS3dBQ0QyUVdCQjhrWlI4bFpXUVVLd0FDRDJRV0JCOGtaUjhsWldRVUt3QUNEMlFXQkI4a1pSOGxaV1FVS3dBQ0QyUVdCQjhrWlI4bFpXUVVLd0FDRDJRV0JCOGtaUjhsWldRVUt3QUNEMlFXQkI4a1pSOGxaV1FQRmhKbVptWm1abVptWm1abVptWm1abVptWm1ZV0FRVjBWR1ZzWlhKcGF5NVhaV0l1VlVrdVVtRmtUV1Z1ZFVsMFpXMHNJRlJsYkdWeWFXc3VWMlZpTGxWSkxDQldaWEp6YVc5dVBUSXdNVEl1TXk0eE1ERTJMalF3TENCRGRXeDBkWEpsUFc1bGRYUnlZV3dzSUZCMVlteHBZMHRsZVZSdmEyVnVQVEV5TVdaaFpUYzRNVFkxWW1FelpEUmtaQllrWmc4UFpCWUVIeVJsSHlWbFpBSUJEdzlrRmdRZkpHVWZKV1ZrQWdJUEQyUVdCQjhrWlI4bFpXUUNBdzhQWkJZRUh5UmxIeVZsWkFJRUR3OWtGZ1FmSkdVZkpXVmtBZ1VQRDJRV0JCOGtaUjhsWldRQ0JnOFBaQllFSHlSbEh5VmxaQUlIRHc5a0ZnUWZKR1VmSldWa0FnZ1BEMlFXQkI4a1pSOGxaV1FDQ1E4UFpCWUVIeVJsSHlWbFpBSUtEdzlrRmdRZkpHVWZKV1ZrQWdzUEQyUVdCQjhrWlI4bFpXUUNEQThQWkJZRUh5UmxIeVZsWkFJTkR3OWtGZ1FmSkdVZkpXVmtBZzRQRDJRV0JCOGtaUjhsWldRQ0R3OFBaQllFSHlSbEh5VmxaQUlRRHc5a0ZnUWZKR1VmSldWa0FoRVBEMlFXQkI4a1pSOGxaV1FDRHc4VUt3QUNGQ3NBQWhRckFBSVBGZ0lmQUdoa0VCWU9aZ0lCQWdJQ0F3SUVBZ1VDQmdJSEFnZ0NDUUlLQWdzQ0RBSU5GZzRVS3dBQ1pHUVVLd0FDWkdRVUt3QUNaR1FVS3dBQ1pHUVVLd0FDWkdRVUt3QUNaR1FVS3dBQ1pHUVVLd0FDWkdRVUt3QUNaR1FVS3dBQ1pHUVVLd0FDWkdRVUt3QUNaR1FVS3dBQ1pHUVVLd0FDWkdRUEZnNW1abVptWm1abVptWm1abVptWmhZQkJYUlVaV3hsY21sckxsZGxZaTVWU1M1U1lXUk5aVzUxU1hSbGJTd2dWR1ZzWlhKcGF5NVhaV0l1VlVrc0lGWmxjbk5wYjI0OU1qQXhNaTR6TGpFd01UWXVOREFzSUVOMWJIUjFjbVU5Ym1WMWRISmhiQ3dnVUhWaWJHbGpTMlY1Vkc5clpXNDlNVEl4Wm1GbE56Z3hOalZpWVROa05HUmtaQUlSRHhRckFBTVBGZ0lmQUdoa1pHUVdBbVlQWkJZQ0FnRVBaQllDWmc5a0ZnSUNCUTg4S3dBRUFRQVBGZ0lmQUdoa1pBSVREeFFyQUFNUEZnSWZBR2hrWkdRV0FtWVBaQllDQWdFUFpCWUNaZzlrRmdRQ0F3OFVLd0FDRHhZQ0h3Qm9aR1FXQkdZUER4WUVIeEVGQ1hKallraGxZV1JsY2g4U0FnSmtaQUlCRHc4V0JCOFJCUWx5WTJKR2IyOTBaWElmRWdJQ1pHUUNCUTg4S3dBRUFRQVBGZ0lmQUdoa1pBSVZEeFFyQUFNUEZnSWZBR2hrWkdSa0dBUUZIbDlmUTI5dWRISnZiSE5TWlhGMWFYSmxVRzl6ZEVKaFkydExaWGxmWHhZaUJSRlNZV1JYYVc1a2IzZE5ZVzVoWjJWeU1RVU9WWE5sY2t4cGMzUkVhV0ZzYjJjRkRrWnZjbTFFWldOdmNtRjBiM0l4QlExSGNtbGtYMFZ0Y0d4dmVXVmxCVHhIY21sa1gwVnRjR3h2ZVdWbEpHTjBiREF3SkdOMGJEQXlKR04wYkRBeUpHTm9hMTlGYlhCc2IzbGxaVWxrVTJWc1pXTjBRMmhsWTJ0Q2IzZ0ZNRWR5YVdSZlJXMXdiRzk1WldVa1kzUnNNREFrWTNSc01ETWtZM1JzTURFa1VHRm5aVk5wZW1WRGIyMWliMEp2ZUFVMlIzSnBaRjlGYlhCc2IzbGxaU1JqZEd3d01DUmpkR3d3TkNSamFHdGZSVzF3Ykc5NVpXVkpaRk5sYkdWamRFTm9aV05yUW05NEJTbEhjbWxrWDBWdGNHeHZlV1ZsSkdOMGJEQXdKR04wYkRBMEpHZGlZMFJsYkdWMFpVTnZiSFZ0YmdVMlIzSnBaRjlGYlhCc2IzbGxaU1JqZEd3d01DUmpkR3d3TmlSamFHdGZSVzF3Ykc5NVpXVkpaRk5sYkdWamRFTm9aV05yUW05NEJTbEhjbWxrWDBWdGNHeHZlV1ZsSkdOMGJEQXdKR04wYkRBMkpHZGlZMFJsYkdWMFpVTnZiSFZ0YmdVMlIzSnBaRjlGYlhCc2IzbGxaU1JqZEd3d01DUmpkR3d3T0NSamFHdGZSVzF3Ykc5NVpXVkpaRk5sYkdWamRFTm9aV05yUW05NEJTbEhjbWxrWDBWdGNHeHZlV1ZsSkdOMGJEQXdKR04wYkRBNEpHZGlZMFJsYkdWMFpVTnZiSFZ0YmdVMlIzSnBaRjlGYlhCc2IzbGxaU1JqZEd3d01DUmpkR3d4TUNSamFHdGZSVzF3Ykc5NVpXVkpaRk5sYkdWamRFTm9aV05yUW05NEJTbEhjbWxrWDBWdGNHeHZlV1ZsSkdOMGJEQXdKR04wYkRFd0pHZGlZMFJsYkdWMFpVTnZiSFZ0YmdVMlIzSnBaRjlGYlhCc2IzbGxaU1JqZEd3d01DUmpkR3d4TWlSamFHdGZSVzF3Ykc5NVpXVkpaRk5sYkdWamRFTm9aV05yUW05NEJTbEhjbWxrWDBWdGNHeHZlV1ZsSkdOMGJEQXdKR04wYkRFeUpHZGlZMFJsYkdWMFpVTnZiSFZ0YmdVMlIzSnBaRjlGYlhCc2IzbGxaU1JqZEd3d01DUmpkR3d4TkNSamFHdGZSVzF3Ykc5NVpXVkpaRk5sYkdWamRFTm9aV05yUW05NEJTbEhjbWxrWDBWdGNHeHZlV1ZsSkdOMGJEQXdKR04wYkRFMEpHZGlZMFJsYkdWMFpVTnZiSFZ0YmdVMlIzSnBaRjlGYlhCc2IzbGxaU1JqZEd3d01DUmpkR3d4TmlSamFHdGZSVzF3Ykc5NVpXVkpaRk5sYkdWamRFTm9aV05yUW05NEJTbEhjbWxrWDBWdGNHeHZlV1ZsSkdOMGJEQXdKR04wYkRFMkpHZGlZMFJsYkdWMFpVTnZiSFZ0YmdVMlIzSnBaRjlGYlhCc2IzbGxaU1JqZEd3d01DUmpkR3d4T0NSamFHdGZSVzF3Ykc5NVpXVkpaRk5sYkdWamRFTm9aV05yUW05NEJTbEhjbWxrWDBWdGNHeHZlV1ZsSkdOMGJEQXdKR04wYkRFNEpHZGlZMFJsYkdWMFpVTnZiSFZ0YmdVMlIzSnBaRjlGYlhCc2IzbGxaU1JqZEd3d01DUmpkR3d5TUNSamFHdGZSVzF3Ykc5NVpXVkpaRk5sYkdWamRFTm9aV05yUW05NEJTbEhjbWxrWDBWdGNHeHZlV1ZsSkdOMGJEQXdKR04wYkRJd0pHZGlZMFJsYkdWMFpVTnZiSFZ0YmdVMlIzSnBaRjlGYlhCc2IzbGxaU1JqZEd3d01DUmpkR3d5TWlSamFHdGZSVzF3Ykc5NVpXVkpaRk5sYkdWamRFTm9aV05yUW05NEJTbEhjbWxrWDBWdGNHeHZlV1ZsSkdOMGJEQXdKR04wYkRJeUpHZGlZMFJsYkdWMFpVTnZiSFZ0YmdVV1IzSnBaRjlGYlhCc2IzbGxaU1J5Wm14MFRXVnVkUVVJVW1Ga1RXVnVkVEVGRlZkdVpGOUZiWEJzYjNsbFpWTmxkRTl3ZEdsdmJnVW5WMjVrWDBWdGNHeHZlV1ZsVTJWMFQzQjBhVzl1SkVNa1luUnVYME5vWVc1blpWWmhiSFZsQlJaWGJtUmZSVzF3Ykc5NVpXVlRaWFJQY0hScGIyNHlCU2hYYm1SZlJXMXdiRzk1WldWVFpYUlBjSFJwYjI0eUpFTWtaSEp3WDFObGRFOXdkR2x2Ym5NeUJTTlhibVJmUlcxd2JHOTVaV1ZUWlhSUGNIUnBiMjR5SkVNa1VtRmtRblYwZEc5dU1RVVZTVzF3YjNKMFJXMXdiRzk1WldWRVpYUmhhV3h6QlRCSGNtbGtYMFZ0Y0d4dmVXVmxKR04wYkRBd0pHTjBiREF6SkdOMGJEQXhKRkJoWjJWVGFYcGxRMjl0WW05Q2IzZ1BGQ3NBQWdVQ01UQUZBakV3WkFVd1IzSnBaRjlGYlhCc2IzbGxaU1JqZEd3d01DUmpkR3d3TWlSamRHd3dNU1JRWVdkbFUybDZaVU52YldKdlFtOTREeFFyQUFKbEJRSXhNR1FGS0ZkdVpGOUZiWEJzYjNsbFpWTmxkRTl3ZEdsdmJqSWtReVJrY25CZlUyVjBUM0IwYVc5dWN6SVBGQ3NBQW1WbFpFVDFLVWRuSnpoditUTkhiUG1JY1h4SkdFV3RVNDRZa3NFMmVna2M2ZHFmIiAvPg0KPC9kaXY+DQoNCjxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij4NCi8vPCFbQ0RBVEFbDQp2YXIgdGhlRm9ybSA9IGRvY3VtZW50LmZvcm1zWydmb3JtMSddOw0KaWYgKCF0aGVGb3JtKSB7DQogICAgdGhlRm9ybSA9IGRvY3VtZW50LmZvcm0xOw0KfQ0KZnVuY3Rpb24gX19kb1Bvc3RCYWNrKGV2ZW50VGFyZ2V0LCBldmVudEFyZ3VtZW50KSB7DQogICAgaWYgKCF0aGVGb3JtLm9uc3VibWl0IHx8ICh0aGVGb3JtLm9uc3VibWl0KCkgIT0gZmFsc2UpKSB7DQogICAgICAgIHRoZUZvcm0uX19FVkVOVFRBUkdFVC52YWx1ZSA9IGV2ZW50VGFyZ2V0Ow0KICAgICAgICB0aGVGb3JtLl9fRVZFTlRBUkdVTUVOVC52YWx1ZSA9IGV2ZW50QXJndW1lbnQ7DQogICAgICAgIHRoZUZvcm0uc3VibWl0KCk7DQogICAgfQ0KfQ0KLy9dXT4NCjwvc2NyaXB0Pg0KDQoNCjxzY3JpcHQgc3JjPSIvV2ViUmVzb3VyY2UuYXhkP2Q9SlpoaFFDcWdzQUpEXzJxOXRiZE1HdGJsNV9kNE1NSUtIVUFFX0tVNEdUQ1I4NzFOZU02QTlUd212UU9pRm1OaGtOWDdFNjQ2VGNoUDJPV01aTV9PMG5rVnA2eFBZOEUzTlluTEpkeWEtLVExJmFtcDt0PTYzNjc3NjkyMjc4Mzg4OTQwMyIgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij48L3NjcmlwdD4NCg0KDQo8c2NyaXB0IHNyYz0iL1RlbGVyaWsuV2ViLlVJLldlYlJlc291cmNlLmF4ZD9fVFNNX0hpZGRlbkZpZWxkXz1SYWRTY3JpcHRNYW5hZ2VyMV9UU00mYW1wO2NvbXByZXNzPTEmYW1wO19UU01fQ29tYmluZWRTY3JpcHRzXz0lM2IlM2JTeXN0ZW0uV2ViLkV4dGVuc2lvbnMlMmMrVmVyc2lvbiUzZDQuMC4wLjAlMmMrQ3VsdHVyZSUzZG5ldXRyYWwlMmMrUHVibGljS2V5VG9rZW4lM2QzMWJmMzg1NmFkMzY0ZTM1JTNhZW4tVVMlM2FiNzU4NTI1NC00OTVlLTQzMTEtOTU0NS0xZjkxMDI0N2FjYTUlM2FlYTU5N2Q0YiUzYWIyNTM3OGQyJTNiVGVsZXJpay5XZWIuVUklMmMrVmVyc2lvbiUzZDIwMTIuMy4xMDE2LjQwJTJjK0N1bHR1cmUlM2RuZXV0cmFsJTJjK1B1YmxpY0tleVRva2VuJTNkMTIxZmFlNzgxNjViYTNkNCUzYWVuLVVTJTNhZWVkYzBhOGQtNDhiOC00NmI4LWE2OTktZGU2NmI0YmRlZjFlJTNhMTZlNGU3Y2QlM2FmNzY0NTUwOSUzYTI0ZWUxYmJhJTNhMTk2MjA4NzUlM2E4NzRmOGVhMiUzYWY0NjE5NWQzJTNhNDkwYTlkNGUlM2FiZDhmODVlNCUzYTg2NTI2YmE3JTNhZWQxNmNiZGMlM2E1ODM2NjAyOSUzYTIwMDNkMGI4JTNhMWU3NzEzMjYlM2FhYTI4OGUyZCUzYWUzMzA1MThiJTNhYzg2MThlNDElM2FlNGY4ZjI4OSUzYTcxNjVmNzQiIHR5cGU9InRleHQvamF2YXNjcmlwdCI+PC9zY3JpcHQ+DQo8ZGl2Pg0KDQoJPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iX19WSUVXU1RBVEVHRU5FUkFUT1IiIGlkPSJfX1ZJRVdTVEFURUdFTkVSQVRPUiIgdmFsdWU9IjYyQ0M5RjRBIiAvPg0KCTxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9Il9fRVZFTlRWQUxJREFUSU9OIiBpZD0iX19FVkVOVFZBTElEQVRJT04iIHZhbHVlPSIvd0VkQUZWQi82b1ZaM25QdVZwTnJTLytteHpzZ2M0M29IcDFlVmNMaUNUOEZtQU5XdC9aejZTMERKckVQNTdmZVlqRnYwMGhPaFh0ZG9odkx3d2JRaThBbzU5dlI3TVE0R241d1cyVVV4UC8xYlZpUDJNTlFIMEJEaXJYWjBFU29sNzZmY1hNMkhENUJWdXVURVJCUW5VakhOejRaZzBZZjdaR3l4TzJveCttSUFsWjZKZXVSL0E2NmE3cHdqdWFlNjhrUDZjcGFhMzdYRVRreWQzU2NIRUlQTEhrVGNpTENTYWdhVkZ2a3Qvb2dEVURBUjdVWW10T1h5Wkp1SklpRkQwMURNMm1BWWVnbmVhZ0l1NUxSbXZJb3pWb3BwdFlWSTdxcWRSRDV2U3FVZVRLVmhMNk96QUEvNjJJdUFSY2pKZmU4bEM4TTdqSW8wcWhZL0M0eUlVUUV6QmNxRU1wV3VrMHhoYmJYR2hLWUlBZjlZbWJMZm1SdXRCUHA5Y2t0VS96dzF0Yk9jWjdhY1RWVnJiNHVuTnJ6Y25FL2U1S3VvYWtSTFV2NHdTTTB2Y1ZvMHJFSnRQUktPSi95SkZnWk5UZ3RUaHdCN1U0akRmcHNwcTVlUjRLYWJqd1RqbVl4R2Q4b0ovUlliVERMUUZVR0U5aklRRHcvcVQ4cjV2a3RrNTc1cGJPSWl2MzZ3WVR1WEJZaDFhc1NpcVlVQTl0VkdxWDB0VW5ZdUZVeVhCVDhMdHZVQXpZMzB2NWlGclpod1BtVFJKK3hVQjJJOHJaMUZOWjA4c01Ld1pSaDFuK2dndzhmb2F4S3hBRW1aNjhYVEQxWGh3OXpLNFdUMFcyT2d5MlR0VzZkUWlFRGV5TVhKSHhXQzRJMkNsRERDa1F3RDk4ME9hQVYraVRra09OVUx6NzRQNmwydDFaYVBKK3FPdVMyMlAwaWx0SGN0UDU4eEppcW5YancxRThOUTlTTkJva051V3plRzRxdXNVSWUxU0trSndhczNwQ0J6R1VZT0RtenBmTm16L3BscTZoSG9JNnh2WVJ2Y3hUMXdUWFhTN01yMlZrRE85TjZIY1MvUjZGbmUyNFNFbEtTTmExVlJWeVhiNTM3VlA0YXBldDY3NitjN0JQYUw2SzZ1KzR4Ti9DcHJOa0dCMEFKdkRpYXN2T2Y1TkRadU5sdWZmckI5ZC9GV0pRbGRnZ2JPTFJUSW1nNVR1TElQN3B3Wjl3M3BKOVJpRDVBSEtkRzQ1ZTBuRHMvSnh4N0VYYS9GTkVaaTFuNTNhWkdSN2t3Q2pVQnMrTTNsQnJmRDNxNjlLUmpDaksvbU1qM0poNXdUcVYxRk5ONU5rQjkzRWh2LzB2WGYxV2FZN1lGVlB4bHh4MUpNcUZEUHdmK0lNWG5SRnIzTzZmTHZvd2NkL21uc0pUTCtFeElNZFdRNmVBVTBLV2JOK1VTRjZvOTRaZTBuMy9nRDdNRXFZbW8zdXBQcXEyeXlBVlRRZFVZSXRRcmg1eUsxcG1TdUpDdUh2azQ1aGNFWkJaUWM0Z0pScGlWdXBpV2N4dG8rajM1RW9qamFPQnorZUxuQmZTZ1czNCtxRm9xQ0hjQ1poTm5yQ2xhSlA1LzRZOFZxbzRUOWN0UG16eVRPMW1QWHhuVUI2bjNXbVoyOTJubTRvUUZMbHBoczN0T2l5c3I5QUVycDB4STVhSFI3RjJPUjU2ZW9lcjNRQmlCRmEwRDc4a2dYYU9jTGJjSEdXODAxNDkxMGFsYTU0SEFPeTF5cm8zZ2pBWGl5MXgxZno2YjVYdkZvWU1US0Z1V2dqSmdWSkdERWZubXJDTnZtU1RhU2NWV09qSFZTOExjaVpIT3N5TEtWSzZzeWlYNXBUTitJK09yNGN4cjUycTBwMkppZWNKcmtQUW1yMW9sMWFmS0lFSjJJaTRpQ25BZ0taYm5iUjRFQWNEMlNCU25QQWc0LzBPYXFHLzcrOXcycTZhcU9XbTYrdVBkSm5MQjR0Rm1XMWFsVElKWURvSDczREx4YWRsTG42WGJsWEFOYnh4L3RMVlNyWUtwR2hsZ0hSVFBVNTkxODJ5ZjZNeDhUb0xuRUZtU3NwZ2ZydjFyK3ViMHNjdE9TZ1paZHB0cGl4eHNHWm5keVR1VzVKYjd4bDU2OEFzb3dkZTlRdDhwKzlDcldhZEM3TVZXbVJxRGJKYVFNSXk5WkpEMk9Eblg5WlJaWTJxRXJnbDMycUE5WWtQUUdTY1VyYVh5bkJ3VW1PZm1GM1RpdU4wRDBwUlFWUFZPR2NlV0JmbS9xY1dDdnY5WkdZcDIvdDl5N3d4N2JNTHUvOGJhQ1BFZEZaWk5ibExjOWZIVTZadzhKOHI0SzU1WmNqT3JGVmN4aDRKc1E0bFpQUGpRL2JyM0pnRWNQeGZyRVlQSEFkbGJhUnNYTUFpRGJCaDNXQ0xBQitPOGtEZXRvU0F5dThqYW9kM2NBSmk0QTQ9IiAvPg0KPC9kaXY+DQogICAgPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPg0KLy88IVtDREFUQVsNClN5cy5XZWJGb3Jtcy5QYWdlUmVxdWVzdE1hbmFnZXIuX2luaXRpYWxpemUoJ1JhZFNjcmlwdE1hbmFnZXIxJywgJ2Zvcm0xJywgWyd0V25kX0VtcGxveWVlU2V0T3B0aW9uJEMkVXBkYXRlUGFuZWwyJywnJywndFduZF9FbXBsb3llZVNldE9wdGlvbjIkQyRVcGRhdGVQYW5lbDEnLCcnLCd0R3JpZF9FbXBsb3llZVBhbmVsJywnJywndFJhZEFqYXhNYW5hZ2VyMVNVJywnJ10sIFsnR3JpZF9FbXBsb3llZScsJyddLCBbXSwgOTAsICcnKTsNCi8vXV0+DQo8L3NjcmlwdD4NCg0KICAgIA0KICAgICAgICA8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+DQogICAgICAgICAgICB2YXIgcG9wVXA7DQogICAgICAgICAgICBmdW5jdGlvbiBQb3BVcFNob3dpbmcoc2VuZGVyLCBldmVudEFyZ3MpIHsNCiAgICAgICAgICAgICAgICBwb3BVcCA9IGV2ZW50QXJncy5nZXRfcG9wVXAoKTsNCiAgICAgICAgICAgICAgICBwb3BVcC5zdHlsZS5sZWZ0ID0gIjEwMHB4IjsNCiAgICAgICAgICAgICAgICBwb3BVcC5zdHlsZS50b3AgPSAiMjBweCI7DQogICAgICAgICAgICB9IA0KICAgICAgICA8L3NjcmlwdD4NCiAgICANCiAgICA8ZGl2IGlkPSJSYWRXaW5kb3dNYW5hZ2VyMSIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPg0KCTwhLS0gMjAxMi4zLjEwMTYuNDAgLS0+PGRpdiBpZD0iVXNlckxpc3REaWFsb2ciIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij4NCgkJPGRpdiBpZD0iVXNlckxpc3REaWFsb2dfQyI+DQoNCgkJPC9kaXY+PGlucHV0IGlkPSJVc2VyTGlzdERpYWxvZ19DbGllbnRTdGF0ZSIgbmFtZT0iVXNlckxpc3REaWFsb2dfQ2xpZW50U3RhdGUiIHR5cGU9ImhpZGRlbiIgLz4NCgk8L2Rpdj48ZGl2IGlkPSJSYWRXaW5kb3dNYW5hZ2VyMV9hbGVydHRlbXBsYXRlIiBzdHlsZT0iZGlzcGxheTpub25lOyI+DQoJCTxkaXYgY2xhc3M9InJ3RGlhbG9nUG9wdXAgcmFkYWxlcnQiPgkJCQ0KCQkJPGRpdiBjbGFzcz0icndEaWFsb2dUZXh0Ij4NCgkJCXsxfQkJCQkNCgkJCTwvZGl2Pg0KCQkJDQoJCQk8ZGl2Pg0KCQkJCTxhICBvbmNsaWNrPSIkZmluZCgnezB9JykuY2xvc2UodHJ1ZSk7Ig0KCQkJCWNsYXNzPSJyd1BvcHVwQnV0dG9uIiBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCk7Ij4NCgkJCQkJPHNwYW4gY2xhc3M9InJ3T3V0ZXJTcGFuIj4NCgkJCQkJCTxzcGFuIGNsYXNzPSJyd0lubmVyU3BhbiI+IyNMT0NbT0tdIyM8L3NwYW4+DQoJCQkJCTwvc3Bhbj4NCgkJCQk8L2E+CQkJCQ0KCQkJPC9kaXY+DQoJCTwvZGl2Pg0KCQk8L2Rpdj48ZGl2IGlkPSJSYWRXaW5kb3dNYW5hZ2VyMV9wcm9tcHR0ZW1wbGF0ZSIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPg0KCQkgPGRpdiBjbGFzcz0icndEaWFsb2dQb3B1cCByYWRwcm9tcHQiPgkJCQ0KCQkJICAgIDxkaXYgY2xhc3M9InJ3RGlhbG9nVGV4dCI+DQoJCQkgICAgezF9CQkJCQ0KCQkJICAgIDwvZGl2PgkJDQoJCQkgICAgPGRpdj4NCgkJCQkgICAgPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPg0KCQkJCSAgICBmdW5jdGlvbiBSYWRXaW5kb3dwcm9tcHRfZGV0ZWN0ZW50ZXIoaWQsIGV2LCBpbnB1dCkNCgkJCQkgICAgewkJCQkJCQkNCgkJCQkJICAgIGlmICghZXYpIGV2ID0gd2luZG93LmV2ZW50OyAgICAgICAgICAgICAgICANCgkJCQkJICAgIGlmIChldi5rZXlDb2RlID09IDEzKQ0KCQkJCQkgICAgewkJCQkJCQkJCQkJCQkJCSAgICAgICAgDQoJCQkJCSAgICAgICAgdmFyIGJ1dCA9IGlucHV0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiQSIpWzBdOwkJCQkJICAgICAgICANCgkJCQkJICAgICAgICBpZiAoYnV0KQ0KCQkJCQkJICAgIHsJCQkJCQkJDQoJCQkJCQkJICAgIGlmIChidXQuY2xpY2spIGJ1dC5jbGljaygpOw0KCQkJCQkJCSAgICBlbHNlIGlmIChidXQub25jbGljaykNCgkJCQkJCQkgICAgew0KCQkJCQkJCSAgICAgICAgYnV0LmZvY3VzKCk7IHZhciBjbGljayA9IGJ1dC5vbmNsaWNrOyBidXQub25jbGljayA9IG51bGw7IGlmIChjbGljaykgY2xpY2suY2FsbChidXQpOwkJCQkJCQkgDQoJCQkJCQkJICAgIH0NCgkJCQkJCSAgICB9DQoJCQkJCSAgICAgICByZXR1cm4gZmFsc2U7DQoJCQkJCSAgICB9IA0KCQkJCQkgICAgZWxzZSByZXR1cm4gdHJ1ZTsNCgkJCQkgICAgfQkgDQoJCQkJICAgIDwvc2NyaXB0Pg0KCQkJCSAgICA8aW5wdXQgdGl0bGU9IkVudGVyIFZhbHVlIiBvbmtleWRvd249InJldHVybiBSYWRXaW5kb3dwcm9tcHRfZGV0ZWN0ZW50ZXIoJ3swfScsIGV2ZW50LCB0aGlzKTsiIHR5cGU9InRleHQiICBjbGFzcz0icndEaWFsb2dJbnB1dCIgdmFsdWU9InsyfSIgLz4NCgkJCSAgICA8L2Rpdj4NCgkJCSAgICA8ZGl2Pg0KCQkJCSAgICA8YSBvbmNsaWNrPSIkZmluZCgnezB9JykuY2xvc2UodGhpcy5wYXJlbnROb2RlLnBhcmVudE5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2lucHV0JylbMF0udmFsdWUpOyIJCQkJDQoJCQkJCSAgICBjbGFzcz0icndQb3B1cEJ1dHRvbiIgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApOyIgPjxzcGFuIGNsYXNzPSJyd091dGVyU3BhbiI+PHNwYW4gY2xhc3M9InJ3SW5uZXJTcGFuIj4jI0xPQ1tPS10jIzwvc3Bhbj48L3NwYW4+PC9hPg0KCQkJCSAgICA8YSBvbmNsaWNrPSIkZmluZCgnezB9JykuY2xvc2UobnVsbCk7IiBjbGFzcz0icndQb3B1cEJ1dHRvbiIgIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiPjxzcGFuIGNsYXNzPSJyd091dGVyU3BhbiI+PHNwYW4gY2xhc3M9InJ3SW5uZXJTcGFuIj4jI0xPQ1tDYW5jZWxdIyM8L3NwYW4+PC9zcGFuPjwvYT4NCgkJCSAgICA8L2Rpdj4NCgkJICAgIDwvZGl2PgkJCQkgICAgICAgDQoJCTwvZGl2PjxkaXYgaWQ9IlJhZFdpbmRvd01hbmFnZXIxX2NvbmZpcm10ZW1wbGF0ZSIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPg0KCQk8ZGl2IGNsYXNzPSJyd0RpYWxvZ1BvcHVwIHJhZGNvbmZpcm0iPgkJCQ0KCQkJPGRpdiBjbGFzcz0icndEaWFsb2dUZXh0Ij4NCgkJCXsxfQkJCQkNCgkJCTwvZGl2PgkJCQkJCQ0KCQkJPGRpdj4NCgkJCQk8YSBvbmNsaWNrPSIkZmluZCgnezB9JykuY2xvc2UodHJ1ZSk7IiAgY2xhc3M9InJ3UG9wdXBCdXR0b24iIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiID48c3BhbiBjbGFzcz0icndPdXRlclNwYW4iPjxzcGFuIGNsYXNzPSJyd0lubmVyU3BhbiI+IyNMT0NbT0tdIyM8L3NwYW4+PC9zcGFuPjwvYT4NCgkJCQk8YSBvbmNsaWNrPSIkZmluZCgnezB9JykuY2xvc2UoZmFsc2UpOyIgY2xhc3M9InJ3UG9wdXBCdXR0b24iICBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCk7Ij48c3BhbiBjbGFzcz0icndPdXRlclNwYW4iPjxzcGFuIGNsYXNzPSJyd0lubmVyU3BhbiI+IyNMT0NbQ2FuY2VsXSMjPC9zcGFuPjwvc3Bhbj48L2E+DQoJCQk8L2Rpdj4NCgkJPC9kaXY+CQkNCgkJPC9kaXY+PGlucHV0IGlkPSJSYWRXaW5kb3dNYW5hZ2VyMV9DbGllbnRTdGF0ZSIgbmFtZT0iUmFkV2luZG93TWFuYWdlcjFfQ2xpZW50U3RhdGUiIHR5cGU9ImhpZGRlbiIgLz4NCjwvZGl2Pg0KICAgIDxkaXYgaWQ9IkZvcm1EZWNvcmF0b3IxIiBjbGFzcz0iUmFkRm9ybURlY29yYXRvciIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPg0KCTxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij4KLy88IVtDREFUQVsKaWYgKHR5cGVvZihXZWJGb3JtX0F1dG9Gb2N1cykgIT0gJ3VuZGVmaW5lZCcpDQp7DQoJdmFyIG9sZF9XZWJGb3JtX0F1dG9Gb2N1cyA9IFdlYkZvcm1fQXV0b0ZvY3VzOw0KCVdlYkZvcm1fQXV0b0ZvY3VzID0gZnVuY3Rpb24oYXJnKQ0KCXsNCgkJU3lzLkFwcGxpY2F0aW9uLmFkZF9sb2FkKGZ1bmN0aW9uKCkNCgkJew0KCQkJb2xkX1dlYkZvcm1fQXV0b0ZvY3VzKGFyZyk7DQoJCQlXZWJGb3JtX0F1dG9Gb2N1cyA9IG9sZF9XZWJGb3JtX0F1dG9Gb2N1czsNCgkJfSk7DQoJfQ0KfQ0KaWYgKHR5cGVvZihUZWxlcmlrKSAhPSAndW5kZWZpbmVkJykNCnsNCglpZiAoVGVsZXJpay5XZWIuVUkuUmFkRm9ybURlY29yYXRvcikNCgl7DQoJCVRlbGVyaWsuV2ViLlVJLlJhZEZvcm1EZWNvcmF0b3IuaW5pdGlhbGl6ZVBhZ2UoIkZvcm1EZWNvcmF0b3IxIiwgIiIsICJPZmZpY2UyMDA3IiwgNjU1MzUpOw0KCX0NCn0KLy9dXT4KPC9zY3JpcHQ+PGlucHV0IGlkPSJGb3JtRGVjb3JhdG9yMV9DbGllbnRTdGF0ZSIgbmFtZT0iRm9ybURlY29yYXRvcjFfQ2xpZW50U3RhdGUiIHR5cGU9ImhpZGRlbiIgLz4NCjwvZGl2Pg0KICAgIDxkaXYgaWQ9IlJhZEFqYXhNYW5hZ2VyMVNVIj4NCgk8c3BhbiBpZD0iUmFkQWpheE1hbmFnZXIxIiBzdHlsZT0iZGlzcGxheTpub25lOyI+PC9zcGFuPg0KPC9kaXY+DQogICAgPGRpdiBpZD0iUmFkQWpheExvYWRpbmdQYW5lbDEiIGNsYXNzPSJSYWRBamF4IFJhZEFqYXhfT2ZmaWNlMjAwNyIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPg0KCTxkaXYgY2xhc3M9InJhRGl2Ij4NCg0KCTwvZGl2PjxkaXYgY2xhc3M9InJhQ29sb3IgcmFUcmFuc3AiPg0KDQoJPC9kaXY+DQo8L2Rpdj4NCiAgICA8dGFibGU+DQogICAgICAgIDx0cj4NCiAgICAgICAgICAgIDx0ZCB2YWxpZ249InRvcCI+DQogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgaWQ9InJhZEdyaWRDbGlja2VkUm93SW5kZXgiIG5hbWU9InJhZEdyaWRDbGlja2VkUm93SW5kZXgiIC8+DQogICAgICAgICAgICAgICAgPGRpdiBpZD0iR3JpZF9FbXBsb3llZVBhbmVsIj4NCgk8ZGl2IGlkPSJHcmlkX0VtcGxveWVlIiBjbGFzcz0iUmFkR3JpZCBSYWRHcmlkX09mZmljZTIwMDciIHN0eWxlPSJoZWlnaHQ6NDY1cHg7d2lkdGg6MTMyMHB4OyI+DQoNCgk8dGFibGUgY2xhc3M9InJnTWFzdGVyVGFibGUgcmdDbGlwQ2VsbHMiIGJvcmRlcj0iMCIgaWQ9IkdyaWRfRW1wbG95ZWVfY3RsMDBfVG9wUGFnZXIiIHN0eWxlPSJmb250LXNpemU6OHB0O3dpZHRoOjEwMCU7dGFibGUtbGF5b3V0OmZpeGVkO292ZXJmbG93OmhpZGRlbjtlbXB0eS1jZWxsczpzaG93OyI+DQoJPHRoZWFkPg0KCQk8dHIgY2xhc3M9InJnQ29tbWFuZFJvdyI+DQoJCQk8dGQgY2xhc3M9InJnQ29tbWFuZENlbGwiIGNvbHNwYW49IjE1Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJwYWRkaW5nOiA1cHggNXB4OyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZuYnNwOyZuYnNwOzxhIG9uY2xpY2s9InJldHVybiBTaG93SW5zZXJ0Rm9ybSgpOyIgaWQ9IkdyaWRfRW1wbG95ZWVfY3RsMDBfY3RsMDJfY3RsMDBfYnRuSW5pdEluc2VydCIgaHJlZj0iamF2YXNjcmlwdDpfX2RvUG9zdEJhY2soJiMzOTtHcmlkX0VtcGxveWVlJGN0bDAwJGN0bDAyJGN0bDAwJGJ0bkluaXRJbnNlcnQmIzM5OywmIzM5OyYjMzk7KSI+PGltZyBzdHlsZT0iYm9yZGVyOjBweDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7IiBhbHQ9IiIgc3JjPSJJbWFnZXMvQWRkUmVjb3JkLmdpZiIvPkFkZCBOZXcgRW1wbG95ZWU8L2E+Jm5ic3A7Jm5ic3A7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIG9uY2xpY2s9InJldHVybiBjb25maXJtKCYjMzk7RG8gWW91IHdhbnQgdG8gZGVsZXRlIHRoZSBzZWxlY3RlZCByZWNvcmRzLiYjMzk7KTsiIGlkPSJHcmlkX0VtcGxveWVlX2N0bDAwX2N0bDAyX2N0bDAwX2xua19EZWxldGVTZWxlY3RlZGVtcGxveWVlcyIgaHJlZj0iamF2YXNjcmlwdDpfX2RvUG9zdEJhY2soJiMzOTtHcmlkX0VtcGxveWVlJGN0bDAwJGN0bDAyJGN0bDAwJGxua19EZWxldGVTZWxlY3RlZGVtcGxveWVlcyYjMzk7LCYjMzk7JiMzOTspIj48aW1nIHN0eWxlPSJib3JkZXI6MHB4O3ZlcnRpY2FsLWFsaWduOm1pZGRsZTsiIGFsdD0iIiBzcmM9IkltYWdlcy9EZWxldGUuZ2lmIiAvPkRlbGV0ZSBTZWxlY3RlZCBFbXBsb3llZXM8L2E+Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7Jm5ic3A7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZuYnNwOyZuYnNwOzxhIGlkPSJHcmlkX0VtcGxveWVlX2N0bDAwX2N0bDAyX2N0bDAwX0xpbmtCdXR0b241IiBocmVmPSJqYXZhc2NyaXB0Ol9fZG9Qb3N0QmFjaygmIzM5O0dyaWRfRW1wbG95ZWUkY3RsMDAkY3RsMDIkY3RsMDAkTGlua0J1dHRvbjUmIzM5OywmIzM5OyYjMzk7KSI+PGltZyBzdHlsZT0iYm9yZGVyOjBweDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7IiBhbHQ9IiIgc3JjPSJJY29ucy9lbXBsb3llZXMucG5nIiAvPkFzc2lnbiBSZXBvcnRpbmcgTWFuYWdlcjwvYT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7Jm5ic3A7PGEgb25jbGljaz0icmV0dXJuIFNob3dJbXBvcnRFbXBsb3llZURldGFpbHNGb3JtKCk7IiBpZD0iR3JpZF9FbXBsb3llZV9jdGwwMF9jdGwwMl9jdGwwMF9sbmtfSW1wb3J0RW1wbG95ZWUiIGhyZWY9ImphdmFzY3JpcHQ6X19kb1Bvc3RCYWNrKCYjMzk7R3JpZF9FbXBsb3llZSRjdGwwMCRjdGwwMiRjdGwwMCRsbmtfSW1wb3J0RW1wbG95ZWUmIzM5OywmIzM5OyYjMzk7KSI+PGltZyBzdHlsZT0iYm9yZGVyOjBweDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7IiBhbHQ9IiIgc3JjPSJJY29ucy9pbXBvcnQtZW1wbG95ZWUtZGV0YWlscy5wbmciIC8+SW1wb3J0IEVtcGxveWVlIERldGFpbHM8L2E+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICZuYnNwOyZuYnNwOzxhIG9uY2xpY2s9InJldHVybiBTaG93SW1wb3J0RW1wbG95ZWVPdGhlckRldGFpbHNGb3JtKCk7IiBpZD0iR3JpZF9FbXBsb3llZV9jdGwwMF9jdGwwMl9jdGwwMF9sbmtfSW1wb3J0RW1wbG95ZWVPdGhlciIgaHJlZj0iamF2YXNjcmlwdDpfX2RvUG9zdEJhY2soJiMzOTtHcmlkX0VtcGxveWVlJGN0bDAwJGN0bDAyJGN0bDAwJGxua19JbXBvcnRFbXBsb3llZU90aGVyJiMzOTssJiMzOTsmIzM5OykiPjxpbWcgc3R5bGU9ImJvcmRlcjowcHg7dmVydGljYWwtYWxpZ246bWlkZGxlOyIgYWx0PSIiICBzcmM9Ikljb25zL2ltcG9ydC1lbXBsb3llZS1kZXRhaWxzLnBuZyIgLz5JbXBvcnQgRW1wbG95ZWUgUGVyc29uYWwgRGV0YWlsczwvYT4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJm5ic3A7Jm5ic3A7PGEgb25jbGljaz0icmV0dXJuIFNob3dFeHBvcnRFbXBsb3llZURldGFpbHNGb3JtKCk7IiBpZD0iR3JpZF9FbXBsb3llZV9jdGwwMF9jdGwwMl9jdGwwMF9sbmtfRXhwb3J0RW1wbG95ZWUiIGhyZWY9ImphdmFzY3JpcHQ6X19kb1Bvc3RCYWNrKCYjMzk7R3JpZF9FbXBsb3llZSRjdGwwMCRjdGwwMiRjdGwwMCRsbmtfRXhwb3J0RW1wbG95ZWUmIzM5OywmIzM5OyYjMzk7KSI+PGltZyBzdHlsZT0iYm9yZGVyOjBweDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7IiBhbHQ9IiIgc3JjPSJJY29ucy9leHBvcnQtZW1wbG95ZWUtbGVhdmUucG5nIiAvPkV4cG9ydCBFbXBsb3llZSBEZXRhaWxzPC9hPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmbmJzcDsmbmJzcDs8YSBvbmNsaWNrPSJyZXR1cm4gU2hvd0V4cG9ydEVtcGxveWVlT3RoZXJEZXRhaWxzRm9ybSgpOyIgaWQ9IkdyaWRfRW1wbG95ZWVfY3RsMDBfY3RsMDJfY3RsMDBfbG5rX0V4cG9ydEVtcGxveWVlT3RoZXIiIGhyZWY9ImphdmFzY3JpcHQ6X19kb1Bvc3RCYWNrKCYjMzk7R3JpZF9FbXBsb3llZSRjdGwwMCRjdGwwMiRjdGwwMCRsbmtfRXhwb3J0RW1wbG95ZWVPdGhlciYjMzk7LCYjMzk7JiMzOTspIj48aW1nIHN0eWxlPSJib3JkZXI6MHB4O3ZlcnRpY2FsLWFsaWduOm1pZGRsZTsiIGFsdD0iIiBzcmM9Ikljb25zL2V4cG9ydC1lbXBsb3llZS1sZWF2ZS5wbmciIC8+RXhwb3J0IEVtcGxveWVlIFBlcnNvbmFsIERldGFpbHM8L2E+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICA8L3RkPg0KCQk8L3RyPg0KCTwvdGhlYWQ+PHRib2R5IHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij48dHI+PHRkPjwvdGQ+PC90cj48L3Rib2R5Pg0KPC90YWJsZT4JPGRpdiBpZD0iR3JpZF9FbXBsb3llZV9HcmlkSGVhZGVyIiBjbGFzcz0icmdIZWFkZXJEaXYiIHN0eWxlPSJwYWRkaW5nLXJpZ2h0OjE2cHg7b3ZlcmZsb3c6aGlkZGVuOyI+DQoNCjx0YWJsZSBjbGFzcz0icmdNYXN0ZXJUYWJsZSByZ0NsaXBDZWxscyByZ0NsaXBDZWxscyIgYm9yZGVyPSIwIiBpZD0iR3JpZF9FbXBsb3llZV9jdGwwMF9IZWFkZXIiIHN0eWxlPSJmb250LXNpemU6OHB0O3dpZHRoOjEwMCU7dGFibGUtbGF5b3V0OmZpeGVkO292ZXJmbG93OmhpZGRlbjtlbXB0eS1jZWxsczpzaG93OyI+DQoJPGNvbGdyb3VwPg0KCQk8Y29sIHN0eWxlPSJ3aWR0aDozNXB4IiAvPg0KCQk8Y29sIHN0eWxlPSJkaXNwbGF5Om5vbmU7IiAvPg0KCQk8Y29sIHN0eWxlPSJkaXNwbGF5Om5vbmU7IiAvPg0KCQk8Y29sIHN0eWxlPSJ3aWR0aDoxMTBweCIgLz4NCgkJPGNvbCBzdHlsZT0id2lkdGg6MTEwcHgiIC8+DQoJCTxjb2wgc3R5bGU9IndpZHRoOjExMHB4IiAvPg0KCQk8Y29sIHN0eWxlPSJ3aWR0aDoxMTBweCIgLz4NCgkJPGNvbCBzdHlsZT0id2lkdGg6MTEwcHgiIC8+DQoJCTxjb2wgc3R5bGU9IndpZHRoOjEyMHB4IiAvPg0KCQk8Y29sIHN0eWxlPSJ3aWR0aDo5MHB4IiAvPg0KCQk8Y29sIHN0eWxlPSJ3aWR0aDo5MHB4IiAvPg0KCQk8Y29sIHN0eWxlPSJ3aWR0aDoxMDBweCIgLz4NCgkJPGNvbCBzdHlsZT0id2lkdGg6OTBweDtkaXNwbGF5Om5vbmU7IiAvPg0KCQk8Y29sIHN0eWxlPSJ3aWR0aDoxMDBweCIgLz4NCgkJPGNvbCBzdHlsZT0id2lkdGg6OTBweDtkaXNwbGF5Om5vbmU7IiAvPg0KCQk8Y29sIHN0eWxlPSJ3aWR0aDoxMDBweCIgLz4NCgkJPGNvbCBzdHlsZT0id2lkdGg6NTBweCIgLz4NCgkJPGNvbCBzdHlsZT0id2lkdGg6MzBweCIgLz4NCgkJPGNvbCBzdHlsZT0id2lkdGg6MzBweCIgLz4NCgk8L2NvbGdyb3VwPg0KPHRoZWFkPg0KCQk8dHI+DQoJCQk8dGggc2NvcGU9ImNvbCIgY2xhc3M9InJnSGVhZGVyIHJnQ2hlY2siPjxpbnB1dCBpZD0iR3JpZF9FbXBsb3llZV9jdGwwMF9jdGwwMl9jdGwwMl9jaGtfRW1wbG95ZWVJZFNlbGVjdENoZWNrQm94IiB0eXBlPSJjaGVja2JveCIgbmFtZT0iR3JpZF9FbXBsb3llZSRjdGwwMCRjdGwwMiRjdGwwMiRjaGtfRW1wbG95ZWVJZFNlbGVjdENoZWNrQm94IiBvbmNsaWNrPSIkZmluZCgmcXVvdDtHcmlkX0VtcGxveWVlJnF1b3Q7KS5fc2VsZWN0QWxsUm93cygmcXVvdDtHcmlkX0VtcGxveWVlX2N0bDAwJnF1b3Q7LCAmcXVvdDsmcXVvdDssIGV2ZW50KTsiIC8+PC90aD48dGggc2NvcGU9ImNvbCIgY2xhc3M9InJnSGVhZGVyIiBzdHlsZT0iZGlzcGxheTpub25lOyI+PGEgdGl0bGU9IkNsaWNrIGhlcmUgdG8gc29ydCIgaHJlZj0iamF2YXNjcmlwdDpfX2RvUG9zdEJhY2soJiMzOTtHcmlkX0VtcGxveWVlJGN0bDAwJGN0bDAyJGN0bDAyJGN0bDAwJiMzOTssJiMzOTsmIzM5OykiPkVtcGxveWVlSWQ8L2E+PC90aD48dGggc2NvcGU9ImNvbCIgY2xhc3M9InJnSGVhZGVyIiBzdHlsZT0iZGlzcGxheTpub25lOyI+PGEgdGl0bGU9IkNsaWNrIGhlcmUgdG8gc29ydCIgaHJlZj0iamF2YXNjcmlwdDpfX2RvUG9zdEJhY2soJiMzOTtHcmlkX0VtcGxveWVlJGN0bDAwJGN0bDAyJGN0bDAyJGN0bDAxJiMzOTssJiMzOTsmIzM5OykiPkVtcGxveWVlQ29kZUluRGV2aWNlPC9hPjwvdGg+PHRoIHNjb3BlPSJjb2wiIGNsYXNzPSJyZ0hlYWRlciI+PGEgdGl0bGU9IkNsaWNrIGhlcmUgdG8gc29ydCIgaHJlZj0iamF2YXNjcmlwdDpfX2RvUG9zdEJhY2soJiMzOTtHcmlkX0VtcGxveWVlJGN0bDAwJGN0bDAyJGN0bDAyJGN0bDAyJiMzOTssJiMzOTsmIzM5OykiPkVtcGxveWVlIENvZGU8L2E+PC90aD48dGggc2NvcGU9ImNvbCIgY2xhc3M9InJnSGVhZGVyIj48YSB0aXRsZT0iQ2xpY2sgaGVyZSB0byBzb3J0IiBocmVmPSJqYXZhc2NyaXB0Ol9fZG9Qb3N0QmFjaygmIzM5O0dyaWRfRW1wbG95ZWUkY3RsMDAkY3RsMDIkY3RsMDIkY3RsMDMmIzM5OywmIzM5OyYjMzk7KSI+RW1wbG95ZWUgTmFtZTwvYT48L3RoPjx0aCBzY29wZT0iY29sIiBjbGFzcz0icmdIZWFkZXIiPjxhIHRpdGxlPSJDbGljayBoZXJlIHRvIHNvcnQiIGhyZWY9ImphdmFzY3JpcHQ6X19kb1Bvc3RCYWNrKCYjMzk7R3JpZF9FbXBsb3llZSRjdGwwMCRjdGwwMiRjdGwwMiRjdGwwNCYjMzk7LCYjMzk7JiMzOTspIj5Db21wYW55PC9hPjwvdGg+PHRoIHNjb3BlPSJjb2wiIGNsYXNzPSJyZ0hlYWRlciI+PGEgdGl0bGU9IkNsaWNrIGhlcmUgdG8gc29ydCIgaHJlZj0iamF2YXNjcmlwdDpfX2RvUG9zdEJhY2soJiMzOTtHcmlkX0VtcGxveWVlJGN0bDAwJGN0bDAyJGN0bDAyJGN0bDA1JiMzOTssJiMzOTsmIzM5OykiPkRlcGFydG1lbnQ8L2E+PC90aD48dGggc2NvcGU9ImNvbCIgY2xhc3M9InJnSGVhZGVyIj48YSB0aXRsZT0iQ2xpY2sgaGVyZSB0byBzb3J0IiBocmVmPSJqYXZhc2NyaXB0Ol9fZG9Qb3N0QmFjaygmIzM5O0dyaWRfRW1wbG95ZWUkY3RsMDAkY3RsMDIkY3RsMDIkY3RsMDYmIzM5OywmIzM5OyYjMzk7KSI+Q2F0ZWdvcnk8L2E+PC90aD48dGggc2NvcGU9ImNvbCIgY2xhc3M9InJnSGVhZGVyIj48YSB0aXRsZT0iQ2xpY2sgaGVyZSB0byBzb3J0IiBocmVmPSJqYXZhc2NyaXB0Ol9fZG9Qb3N0QmFjaygmIzM5O0dyaWRfRW1wbG95ZWUkY3RsMDAkY3RsMDIkY3RsMDIkY3RsMDcmIzM5OywmIzM5OyYjMzk7KSI+RGVzaWduYXRpb248L2E+PC90aD48dGggc2NvcGU9ImNvbCIgY2xhc3M9InJnSGVhZGVyIj48YSB0aXRsZT0iQ2xpY2sgaGVyZSB0byBzb3J0IiBocmVmPSJqYXZhc2NyaXB0Ol9fZG9Qb3N0QmFjaygmIzM5O0dyaWRfRW1wbG95ZWUkY3RsMDAkY3RsMDIkY3RsMDIkY3RsMDgmIzM5OywmIzM5OyYjMzk7KSI+TG9jYXRpb248L2E+PC90aD48dGggc2NvcGU9ImNvbCIgY2xhc3M9InJnSGVhZGVyIj48YSB0aXRsZT0iQ2xpY2sgaGVyZSB0byBzb3J0IiBocmVmPSJqYXZhc2NyaXB0Ol9fZG9Qb3N0QmFjaygmIzM5O0dyaWRfRW1wbG95ZWUkY3RsMDAkY3RsMDIkY3RsMDIkY3RsMDkmIzM5OywmIzM5OyYjMzk7KSI+U3RhdHVzPC9hPjwvdGg+PHRoIHNjb3BlPSJjb2wiIGNsYXNzPSJyZ0hlYWRlciI+PGEgdGl0bGU9IkNsaWNrIGhlcmUgdG8gc29ydCIgaHJlZj0iamF2YXNjcmlwdDpfX2RvUG9zdEJhY2soJiMzOTtHcmlkX0VtcGxveWVlJGN0bDAwJGN0bDAyJGN0bDAyJGN0bDEwJiMzOTssJiMzOTsmIzM5OykiPkVtcGxveW1lbnRUeXBlPC9hPjwvdGg+PHRoIHNjb3BlPSJjb2wiIGNsYXNzPSJyZ0hlYWRlciIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPjxhIHRpdGxlPSJDbGljayBoZXJlIHRvIHNvcnQiIGhyZWY9ImphdmFzY3JpcHQ6X19kb1Bvc3RCYWNrKCYjMzk7R3JpZF9FbXBsb3llZSRjdGwwMCRjdGwwMiRjdGwwMiRjdGwxMSYjMzk7LCYjMzk7JiMzOTspIj5SZXBvcnRUbzwvYT48L3RoPjx0aCBzY29wZT0iY29sIiBjbGFzcz0icmdIZWFkZXIiPiZuYnNwOzwvdGg+PHRoIHNjb3BlPSJjb2wiIGNsYXNzPSJyZ0hlYWRlciIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPiZuYnNwOzwvdGg+PHRoIHNjb3BlPSJjb2wiIGNsYXNzPSJyZ0hlYWRlciI+Jm5ic3A7PC90aD48dGggc2NvcGU9ImNvbCIgY2xhc3M9InJnSGVhZGVyIj4mbmJzcDs8L3RoPjx0aCBzY29wZT0iY29sIiBjbGFzcz0icmdIZWFkZXIiPiZuYnNwOzwvdGg+PHRoIHNjb3BlPSJjb2wiIGNsYXNzPSJyZ0hlYWRlciI+Jm5ic3A7PC90aD4NCgkJPC90cj48dHIgY2xhc3M9InJnRmlsdGVyUm93Ij4NCgkJCTx0ZD4mbmJzcDs8L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwO2Rpc3BsYXk6bm9uZTsiPjxpbnB1dCBuYW1lPSJHcmlkX0VtcGxveWVlJGN0bDAwJGN0bDAyJGN0bDAzJEZpbHRlclRleHRCb3hfRW1wbG95ZWVJZCIgdHlwZT0idGV4dCIgc2l6ZT0iMTAiIGlkPSJHcmlkX0VtcGxveWVlX2N0bDAwX2N0bDAyX2N0bDAzX0ZpbHRlclRleHRCb3hfRW1wbG95ZWVJZCIgY2xhc3M9InJnRmlsdGVyQm94IiBhbHQ9IkZpbHRlciBFbXBsb3llZUlkIGNvbHVtbiIgb25rZXlwcmVzcz0iaWYoKGV2ZW50LmtleUNvZGUgPT0gMTMpKSByZXR1cm4gZmFsc2U7IiAvPjxpbnB1dCB0eXBlPSJidXR0b24iIG5hbWU9IkdyaWRfRW1wbG95ZWUkY3RsMDAkY3RsMDIkY3RsMDMkRmlsdGVyX0VtcGxveWVlSWQiIHZhbHVlPSIgIiBvbmNsaWNrPSIkZmluZCgmcXVvdDtHcmlkX0VtcGxveWVlJnF1b3Q7KS5fc2hvd0ZpbHRlck1lbnUoJnF1b3Q7R3JpZF9FbXBsb3llZV9jdGwwMCZxdW90OywgJnF1b3Q7RW1wbG95ZWVJZCZxdW90OywgZXZlbnQpOyByZXR1cm4gZmFsc2U7X19kb1Bvc3RCYWNrKCYjMzk7R3JpZF9FbXBsb3llZSRjdGwwMCRjdGwwMiRjdGwwMyRGaWx0ZXJfRW1wbG95ZWVJZCYjMzk7LCYjMzk7JiMzOTspIiBpZD0iR3JpZF9FbXBsb3llZV9jdGwwMF9jdGwwMl9jdGwwM19GaWx0ZXJfRW1wbG95ZWVJZCIgdGl0bGU9IkZpbHRlciIgY2xhc3M9InJnRmlsdGVyIiAvPjwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7ZGlzcGxheTpub25lOyI+PGlucHV0IG5hbWU9IkdyaWRfRW1wbG95ZWUkY3RsMDAkY3RsMDIkY3RsMDMkRmlsdGVyVGV4dEJveF9FbXBsb3llZUNvZGVJbkRldmljZSIgdHlwZT0idGV4dCIgc2l6ZT0iMTAiIGlkPSJHcmlkX0VtcGxveWVlX2N0bDAwX2N0bDAyX2N0bDAzX0ZpbHRlclRleHRCb3hfRW1wbG95ZWVDb2RlSW5EZXZpY2UiIGNsYXNzPSJyZ0ZpbHRlckJveCIgYWx0PSJGaWx0ZXIgRW1wbG95ZWVDb2RlSW5EZXZpY2UgY29sdW1uIiBvbmtleXByZXNzPSJpZigoZXZlbnQua2V5Q29kZSA9PSAxMykpIHJldHVybiBmYWxzZTsiIC8+PGlucHV0IHR5cGU9ImJ1dHRvbiIgbmFtZT0iR3JpZF9FbXBsb3llZSRjdGwwMCRjdGwwMiRjdGwwMyRGaWx0ZXJfRW1wbG95ZWVDb2RlSW5EZXZpY2UiIHZhbHVlPSIgIiBvbmNsaWNrPSIkZmluZCgmcXVvdDtHcmlkX0VtcGxveWVlJnF1b3Q7KS5fc2hvd0ZpbHRlck1lbnUoJnF1b3Q7R3JpZF9FbXBsb3llZV9jdGwwMCZxdW90OywgJnF1b3Q7RW1wbG95ZWVDb2RlSW5EZXZpY2UmcXVvdDssIGV2ZW50KTsgcmV0dXJuIGZhbHNlO19fZG9Qb3N0QmFjaygmIzM5O0dyaWRfRW1wbG95ZWUkY3RsMDAkY3RsMDIkY3RsMDMkRmlsdGVyX0VtcGxveWVlQ29kZUluRGV2aWNlJiMzOTssJiMzOTsmIzM5OykiIGlkPSJHcmlkX0VtcGxveWVlX2N0bDAwX2N0bDAyX2N0bDAzX0ZpbHRlcl9FbXBsb3llZUNvZGVJbkRldmljZSIgdGl0bGU9IkZpbHRlciIgY2xhc3M9InJnRmlsdGVyIiAvPjwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij48aW5wdXQgbmFtZT0iR3JpZF9FbXBsb3llZSRjdGwwMCRjdGwwMiRjdGwwMyRGaWx0ZXJUZXh0Qm94X0VtcGxveWVlQ29kZSIgdHlwZT0idGV4dCIgc2l6ZT0iMTAiIGlkPSJHcmlkX0VtcGxveWVlX2N0bDAwX2N0bDAyX2N0bDAzX0ZpbHRlclRleHRCb3hfRW1wbG95ZWVDb2RlIiBjbGFzcz0icmdGaWx0ZXJCb3giIGFsdD0iRmlsdGVyIEVtcGxveWVlQ29kZSBjb2x1bW4iIG9ua2V5cHJlc3M9ImlmKChldmVudC5rZXlDb2RlID09IDEzKSkgcmV0dXJuIGZhbHNlOyIgc3R5bGU9IndpZHRoOjgwcHg7IiAvPjxpbnB1dCB0eXBlPSJidXR0b24iIG5hbWU9IkdyaWRfRW1wbG95ZWUkY3RsMDAkY3RsMDIkY3RsMDMkRmlsdGVyX0VtcGxveWVlQ29kZSIgdmFsdWU9IiAiIG9uY2xpY2s9IiRmaW5kKCZxdW90O0dyaWRfRW1wbG95ZWUmcXVvdDspLl9zaG93RmlsdGVyTWVudSgmcXVvdDtHcmlkX0VtcGxveWVlX2N0bDAwJnF1b3Q7LCAmcXVvdDtFbXBsb3llZUNvZGUmcXVvdDssIGV2ZW50KTsgcmV0dXJuIGZhbHNlO19fZG9Qb3N0QmFjaygmIzM5O0dyaWRfRW1wbG95ZWUkY3RsMDAkY3RsMDIkY3RsMDMkRmlsdGVyX0VtcGxveWVlQ29kZSYjMzk7LCYjMzk7JiMzOTspIiBpZD0iR3JpZF9FbXBsb3llZV9jdGwwMF9jdGwwMl9jdGwwM19GaWx0ZXJfRW1wbG95ZWVDb2RlIiB0aXRsZT0iRmlsdGVyIiBjbGFzcz0icmdGaWx0ZXIiIC8+PC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDsiPjxpbnB1dCBuYW1lPSJHcmlkX0VtcGxveWVlJGN0bDAwJGN0bDAyJGN0bDAzJEZpbHRlclRleHRCb3hfRW1wbG95ZWVOYW1lIiB0eXBlPSJ0ZXh0IiBzaXplPSIxMCIgaWQ9IkdyaWRfRW1wbG95ZWVfY3RsMDBfY3RsMDJfY3RsMDNfRmlsdGVyVGV4dEJveF9FbXBsb3llZU5hbWUiIGNsYXNzPSJyZ0ZpbHRlckJveCIgYWx0PSJGaWx0ZXIgRW1wbG95ZWVOYW1lIGNvbHVtbiIgb25rZXlwcmVzcz0iaWYoKGV2ZW50LmtleUNvZGUgPT0gMTMpKSByZXR1cm4gZmFsc2U7IiBzdHlsZT0id2lkdGg6ODBweDsiIC8+PGlucHV0IHR5cGU9ImJ1dHRvbiIgbmFtZT0iR3JpZF9FbXBsb3llZSRjdGwwMCRjdGwwMiRjdGwwMyRGaWx0ZXJfRW1wbG95ZWVOYW1lIiB2YWx1ZT0iICIgb25jbGljaz0iJGZpbmQoJnF1b3Q7R3JpZF9FbXBsb3llZSZxdW90OykuX3Nob3dGaWx0ZXJNZW51KCZxdW90O0dyaWRfRW1wbG95ZWVfY3RsMDAmcXVvdDssICZxdW90O0VtcGxveWVlTmFtZSZxdW90OywgZXZlbnQpOyByZXR1cm4gZmFsc2U7X19kb1Bvc3RCYWNrKCYjMzk7R3JpZF9FbXBsb3llZSRjdGwwMCRjdGwwMiRjdGwwMyRGaWx0ZXJfRW1wbG95ZWVOYW1lJiMzOTssJiMzOTsmIzM5OykiIGlkPSJHcmlkX0VtcGxveWVlX2N0bDAwX2N0bDAyX2N0bDAzX0ZpbHRlcl9FbXBsb3llZU5hbWUiIHRpdGxlPSJGaWx0ZXIiIGNsYXNzPSJyZ0ZpbHRlciIgLz48L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwOyI+PGlucHV0IG5hbWU9IkdyaWRfRW1wbG95ZWUkY3RsMDAkY3RsMDIkY3RsMDMkRmlsdGVyVGV4dEJveF9Db21wYW55U05hbWUiIHR5cGU9InRleHQiIHNpemU9IjEwIiBpZD0iR3JpZF9FbXBsb3llZV9jdGwwMF9jdGwwMl9jdGwwM19GaWx0ZXJUZXh0Qm94X0NvbXBhbnlTTmFtZSIgY2xhc3M9InJnRmlsdGVyQm94IiBhbHQ9IkZpbHRlciBDb21wYW55U05hbWUgY29sdW1uIiBvbmtleXByZXNzPSJpZigoZXZlbnQua2V5Q29kZSA9PSAxMykpIHJldHVybiBmYWxzZTsiIHN0eWxlPSJ3aWR0aDo4MHB4OyIgLz48aW5wdXQgdHlwZT0iYnV0dG9uIiBuYW1lPSJHcmlkX0VtcGxveWVlJGN0bDAwJGN0bDAyJGN0bDAzJEZpbHRlcl9Db21wYW55U05hbWUiIHZhbHVlPSIgIiBvbmNsaWNrPSIkZmluZCgmcXVvdDtHcmlkX0VtcGxveWVlJnF1b3Q7KS5fc2hvd0ZpbHRlck1lbnUoJnF1b3Q7R3JpZF9FbXBsb3llZV9jdGwwMCZxdW90OywgJnF1b3Q7Q29tcGFueVNOYW1lJnF1b3Q7LCBldmVudCk7IHJldHVybiBmYWxzZTtfX2RvUG9zdEJhY2soJiMzOTtHcmlkX0VtcGxveWVlJGN0bDAwJGN0bDAyJGN0bDAzJEZpbHRlcl9Db21wYW55U05hbWUmIzM5OywmIzM5OyYjMzk7KSIgaWQ9IkdyaWRfRW1wbG95ZWVfY3RsMDBfY3RsMDJfY3RsMDNfRmlsdGVyX0NvbXBhbnlTTmFtZSIgdGl0bGU9IkZpbHRlciIgY2xhc3M9InJnRmlsdGVyIiAvPjwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij48aW5wdXQgbmFtZT0iR3JpZF9FbXBsb3llZSRjdGwwMCRjdGwwMiRjdGwwMyRGaWx0ZXJUZXh0Qm94X0RlcGFydG1lbnRTTmFtZSIgdHlwZT0idGV4dCIgc2l6ZT0iMTAiIGlkPSJHcmlkX0VtcGxveWVlX2N0bDAwX2N0bDAyX2N0bDAzX0ZpbHRlclRleHRCb3hfRGVwYXJ0bWVudFNOYW1lIiBjbGFzcz0icmdGaWx0ZXJCb3giIGFsdD0iRmlsdGVyIERlcGFydG1lbnRTTmFtZSBjb2x1bW4iIG9ua2V5cHJlc3M9ImlmKChldmVudC5rZXlDb2RlID09IDEzKSkgcmV0dXJuIGZhbHNlOyIgc3R5bGU9IndpZHRoOjgwcHg7IiAvPjxpbnB1dCB0eXBlPSJidXR0b24iIG5hbWU9IkdyaWRfRW1wbG95ZWUkY3RsMDAkY3RsMDIkY3RsMDMkRmlsdGVyX0RlcGFydG1lbnRTTmFtZSIgdmFsdWU9IiAiIG9uY2xpY2s9IiRmaW5kKCZxdW90O0dyaWRfRW1wbG95ZWUmcXVvdDspLl9zaG93RmlsdGVyTWVudSgmcXVvdDtHcmlkX0VtcGxveWVlX2N0bDAwJnF1b3Q7LCAmcXVvdDtEZXBhcnRtZW50U05hbWUmcXVvdDssIGV2ZW50KTsgcmV0dXJuIGZhbHNlO19fZG9Qb3N0QmFjaygmIzM5O0dyaWRfRW1wbG95ZWUkY3RsMDAkY3RsMDIkY3RsMDMkRmlsdGVyX0RlcGFydG1lbnRTTmFtZSYjMzk7LCYjMzk7JiMzOTspIiBpZD0iR3JpZF9FbXBsb3llZV9jdGwwMF9jdGwwMl9jdGwwM19GaWx0ZXJfRGVwYXJ0bWVudFNOYW1lIiB0aXRsZT0iRmlsdGVyIiBjbGFzcz0icmdGaWx0ZXIiIC8+PC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDsiPjxpbnB1dCBuYW1lPSJHcmlkX0VtcGxveWVlJGN0bDAwJGN0bDAyJGN0bDAzJEZpbHRlclRleHRCb3hfQ2F0ZWdvcnlTTmFtZSIgdHlwZT0idGV4dCIgc2l6ZT0iMTAiIGlkPSJHcmlkX0VtcGxveWVlX2N0bDAwX2N0bDAyX2N0bDAzX0ZpbHRlclRleHRCb3hfQ2F0ZWdvcnlTTmFtZSIgY2xhc3M9InJnRmlsdGVyQm94IiBhbHQ9IkZpbHRlciBDYXRlZ29yeVNOYW1lIGNvbHVtbiIgb25rZXlwcmVzcz0iaWYoKGV2ZW50LmtleUNvZGUgPT0gMTMpKSByZXR1cm4gZmFsc2U7IiBzdHlsZT0id2lkdGg6ODBweDsiIC8+PGlucHV0IHR5cGU9ImJ1dHRvbiIgbmFtZT0iR3JpZF9FbXBsb3llZSRjdGwwMCRjdGwwMiRjdGwwMyRGaWx0ZXJfQ2F0ZWdvcnlTTmFtZSIgdmFsdWU9IiAiIG9uY2xpY2s9IiRmaW5kKCZxdW90O0dyaWRfRW1wbG95ZWUmcXVvdDspLl9zaG93RmlsdGVyTWVudSgmcXVvdDtHcmlkX0VtcGxveWVlX2N0bDAwJnF1b3Q7LCAmcXVvdDtDYXRlZ29yeVNOYW1lJnF1b3Q7LCBldmVudCk7IHJldHVybiBmYWxzZTtfX2RvUG9zdEJhY2soJiMzOTtHcmlkX0VtcGxveWVlJGN0bDAwJGN0bDAyJGN0bDAzJEZpbHRlcl9DYXRlZ29yeVNOYW1lJiMzOTssJiMzOTsmIzM5OykiIGlkPSJHcmlkX0VtcGxveWVlX2N0bDAwX2N0bDAyX2N0bDAzX0ZpbHRlcl9DYXRlZ29yeVNOYW1lIiB0aXRsZT0iRmlsdGVyIiBjbGFzcz0icmdGaWx0ZXIiIC8+PC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDsiPjxpbnB1dCBuYW1lPSJHcmlkX0VtcGxveWVlJGN0bDAwJGN0bDAyJGN0bDAzJEZpbHRlclRleHRCb3hfRGVzaWduYXRpb24iIHR5cGU9InRleHQiIHNpemU9IjEwIiBpZD0iR3JpZF9FbXBsb3llZV9jdGwwMF9jdGwwMl9jdGwwM19GaWx0ZXJUZXh0Qm94X0Rlc2lnbmF0aW9uIiBjbGFzcz0icmdGaWx0ZXJCb3giIGFsdD0iRmlsdGVyIERlc2lnbmF0aW9uIGNvbHVtbiIgb25rZXlwcmVzcz0iaWYoKGV2ZW50LmtleUNvZGUgPT0gMTMpKSByZXR1cm4gZmFsc2U7IiBzdHlsZT0id2lkdGg6ODBweDsiIC8+PGlucHV0IHR5cGU9ImJ1dHRvbiIgbmFtZT0iR3JpZF9FbXBsb3llZSRjdGwwMCRjdGwwMiRjdGwwMyRGaWx0ZXJfRGVzaWduYXRpb24iIHZhbHVlPSIgIiBvbmNsaWNrPSIkZmluZCgmcXVvdDtHcmlkX0VtcGxveWVlJnF1b3Q7KS5fc2hvd0ZpbHRlck1lbnUoJnF1b3Q7R3JpZF9FbXBsb3llZV9jdGwwMCZxdW90OywgJnF1b3Q7RGVzaWduYXRpb24mcXVvdDssIGV2ZW50KTsgcmV0dXJuIGZhbHNlO19fZG9Qb3N0QmFjaygmIzM5O0dyaWRfRW1wbG95ZWUkY3RsMDAkY3RsMDIkY3RsMDMkRmlsdGVyX0Rlc2lnbmF0aW9uJiMzOTssJiMzOTsmIzM5OykiIGlkPSJHcmlkX0VtcGxveWVlX2N0bDAwX2N0bDAyX2N0bDAzX0ZpbHRlcl9EZXNpZ25hdGlvbiIgdGl0bGU9IkZpbHRlciIgY2xhc3M9InJnRmlsdGVyIiAvPjwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij48aW5wdXQgbmFtZT0iR3JpZF9FbXBsb3llZSRjdGwwMCRjdGwwMiRjdGwwMyRGaWx0ZXJUZXh0Qm94X0xvY2F0aW9uIiB0eXBlPSJ0ZXh0IiBzaXplPSIxMCIgaWQ9IkdyaWRfRW1wbG95ZWVfY3RsMDBfY3RsMDJfY3RsMDNfRmlsdGVyVGV4dEJveF9Mb2NhdGlvbiIgY2xhc3M9InJnRmlsdGVyQm94IiBhbHQ9IkZpbHRlciBMb2NhdGlvbiBjb2x1bW4iIG9ua2V5cHJlc3M9ImlmKChldmVudC5rZXlDb2RlID09IDEzKSkgcmV0dXJuIGZhbHNlOyIgc3R5bGU9IndpZHRoOjYwcHg7IiAvPjxpbnB1dCB0eXBlPSJidXR0b24iIG5hbWU9IkdyaWRfRW1wbG95ZWUkY3RsMDAkY3RsMDIkY3RsMDMkRmlsdGVyX0xvY2F0aW9uIiB2YWx1ZT0iICIgb25jbGljaz0iJGZpbmQoJnF1b3Q7R3JpZF9FbXBsb3llZSZxdW90OykuX3Nob3dGaWx0ZXJNZW51KCZxdW90O0dyaWRfRW1wbG95ZWVfY3RsMDAmcXVvdDssICZxdW90O0xvY2F0aW9uJnF1b3Q7LCBldmVudCk7IHJldHVybiBmYWxzZTtfX2RvUG9zdEJhY2soJiMzOTtHcmlkX0VtcGxveWVlJGN0bDAwJGN0bDAyJGN0bDAzJEZpbHRlcl9Mb2NhdGlvbiYjMzk7LCYjMzk7JiMzOTspIiBpZD0iR3JpZF9FbXBsb3llZV9jdGwwMF9jdGwwMl9jdGwwM19GaWx0ZXJfTG9jYXRpb24iIHRpdGxlPSJGaWx0ZXIiIGNsYXNzPSJyZ0ZpbHRlciIgLz48L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwOyI+PGlucHV0IG5hbWU9IkdyaWRfRW1wbG95ZWUkY3RsMDAkY3RsMDIkY3RsMDMkRmlsdGVyVGV4dEJveF9TdGF0dXMiIHR5cGU9InRleHQiIHZhbHVlPSJXb3JraW5nIiBzaXplPSIxMCIgaWQ9IkdyaWRfRW1wbG95ZWVfY3RsMDBfY3RsMDJfY3RsMDNfRmlsdGVyVGV4dEJveF9TdGF0dXMiIGNsYXNzPSJyZ0ZpbHRlckJveCIgYWx0PSJGaWx0ZXIgU3RhdHVzIGNvbHVtbiIgb25rZXlwcmVzcz0iaWYoKGV2ZW50LmtleUNvZGUgPT0gMTMpKSByZXR1cm4gZmFsc2U7IiBzdHlsZT0id2lkdGg6NjBweDsiIC8+PGlucHV0IHR5cGU9ImJ1dHRvbiIgbmFtZT0iR3JpZF9FbXBsb3llZSRjdGwwMCRjdGwwMiRjdGwwMyRGaWx0ZXJfU3RhdHVzIiB2YWx1ZT0iICIgb25jbGljaz0iJGZpbmQoJnF1b3Q7R3JpZF9FbXBsb3llZSZxdW90OykuX3Nob3dGaWx0ZXJNZW51KCZxdW90O0dyaWRfRW1wbG95ZWVfY3RsMDAmcXVvdDssICZxdW90O1N0YXR1cyZxdW90OywgZXZlbnQpOyByZXR1cm4gZmFsc2U7X19kb1Bvc3RCYWNrKCYjMzk7R3JpZF9FbXBsb3llZSRjdGwwMCRjdGwwMiRjdGwwMyRGaWx0ZXJfU3RhdHVzJiMzOTssJiMzOTsmIzM5OykiIGlkPSJHcmlkX0VtcGxveWVlX2N0bDAwX2N0bDAyX2N0bDAzX0ZpbHRlcl9TdGF0dXMiIHRpdGxlPSJGaWx0ZXIiIGNsYXNzPSJyZ0ZpbHRlciIgLz48L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwOyI+PGlucHV0IG5hbWU9IkdyaWRfRW1wbG95ZWUkY3RsMDAkY3RsMDIkY3RsMDMkRmlsdGVyVGV4dEJveF9FbXBsb3llbWVudFR5cGUiIHR5cGU9InRleHQiIHNpemU9IjEwIiBpZD0iR3JpZF9FbXBsb3llZV9jdGwwMF9jdGwwMl9jdGwwM19GaWx0ZXJUZXh0Qm94X0VtcGxveWVtZW50VHlwZSIgY2xhc3M9InJnRmlsdGVyQm94IiBhbHQ9IkZpbHRlciBFbXBsb3llbWVudFR5cGUgY29sdW1uIiBvbmtleXByZXNzPSJpZigoZXZlbnQua2V5Q29kZSA9PSAxMykpIHJldHVybiBmYWxzZTsiIHN0eWxlPSJ3aWR0aDo2MHB4OyIgLz48aW5wdXQgdHlwZT0iYnV0dG9uIiBuYW1lPSJHcmlkX0VtcGxveWVlJGN0bDAwJGN0bDAyJGN0bDAzJEZpbHRlcl9FbXBsb3llbWVudFR5cGUiIHZhbHVlPSIgIiBvbmNsaWNrPSIkZmluZCgmcXVvdDtHcmlkX0VtcGxveWVlJnF1b3Q7KS5fc2hvd0ZpbHRlck1lbnUoJnF1b3Q7R3JpZF9FbXBsb3llZV9jdGwwMCZxdW90OywgJnF1b3Q7RW1wbG95ZW1lbnRUeXBlJnF1b3Q7LCBldmVudCk7IHJldHVybiBmYWxzZTtfX2RvUG9zdEJhY2soJiMzOTtHcmlkX0VtcGxveWVlJGN0bDAwJGN0bDAyJGN0bDAzJEZpbHRlcl9FbXBsb3llbWVudFR5cGUmIzM5OywmIzM5OyYjMzk7KSIgaWQ9IkdyaWRfRW1wbG95ZWVfY3RsMDBfY3RsMDJfY3RsMDNfRmlsdGVyX0VtcGxveWVtZW50VHlwZSIgdGl0bGU9IkZpbHRlciIgY2xhc3M9InJnRmlsdGVyIiAvPjwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7ZGlzcGxheTpub25lOyI+PGlucHV0IG5hbWU9IkdyaWRfRW1wbG95ZWUkY3RsMDAkY3RsMDIkY3RsMDMkRmlsdGVyVGV4dEJveF9SZXBvcnRUbyIgdHlwZT0idGV4dCIgc2l6ZT0iMTAiIGlkPSJHcmlkX0VtcGxveWVlX2N0bDAwX2N0bDAyX2N0bDAzX0ZpbHRlclRleHRCb3hfUmVwb3J0VG8iIGNsYXNzPSJyZ0ZpbHRlckJveCIgYWx0PSJGaWx0ZXIgUmVwb3J0VG8gY29sdW1uIiBvbmtleXByZXNzPSJpZigoZXZlbnQua2V5Q29kZSA9PSAxMykpIHJldHVybiBmYWxzZTsiIHN0eWxlPSJ3aWR0aDo2MHB4OyIgLz48aW5wdXQgdHlwZT0iYnV0dG9uIiBuYW1lPSJHcmlkX0VtcGxveWVlJGN0bDAwJGN0bDAyJGN0bDAzJEZpbHRlcl9SZXBvcnRUbyIgdmFsdWU9IiAiIG9uY2xpY2s9IiRmaW5kKCZxdW90O0dyaWRfRW1wbG95ZWUmcXVvdDspLl9zaG93RmlsdGVyTWVudSgmcXVvdDtHcmlkX0VtcGxveWVlX2N0bDAwJnF1b3Q7LCAmcXVvdDtSZXBvcnRUbyZxdW90OywgZXZlbnQpOyByZXR1cm4gZmFsc2U7X19kb1Bvc3RCYWNrKCYjMzk7R3JpZF9FbXBsb3llZSRjdGwwMCRjdGwwMiRjdGwwMyRGaWx0ZXJfUmVwb3J0VG8mIzM5OywmIzM5OyYjMzk7KSIgaWQ9IkdyaWRfRW1wbG95ZWVfY3RsMDBfY3RsMDJfY3RsMDNfRmlsdGVyX1JlcG9ydFRvIiB0aXRsZT0iRmlsdGVyIiBjbGFzcz0icmdGaWx0ZXIiIC8+PC90ZD48dGQ+Jm5ic3A7PC90ZD48dGQgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPiZuYnNwOzwvdGQ+PHRkPiZuYnNwOzwvdGQ+PHRkPiZuYnNwOzwvdGQ+PHRkPiZuYnNwOzwvdGQ+PHRkPiZuYnNwOzwvdGQ+DQoJCTwvdHI+DQoJPC90aGVhZD48dGJvZHkgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPjx0cj48dGQgY29sc3Bhbj0iMTkiPjwvdGQ+PC90cj48L3Rib2R5Pg0KPC90YWJsZT4NCgk8L2Rpdj4NCgk8ZGl2IGlkPSJHcmlkX0VtcGxveWVlX0dyaWREYXRhIiBjbGFzcz0icmdEYXRhRGl2IiBzdHlsZT0ib3ZlcmZsb3c6YXV0bzt3aWR0aDoxMDAlO2hlaWdodDozMDBweDsiPg0KDQo8dGFibGUgY2xhc3M9InJnTWFzdGVyVGFibGUgcmdDbGlwQ2VsbHMgcmdDbGlwQ2VsbHMiIGJvcmRlcj0iMCIgaWQ9IkdyaWRfRW1wbG95ZWVfY3RsMDAiIHN0eWxlPSJmb250LXNpemU6OHB0O3dpZHRoOjEwMCU7dGFibGUtbGF5b3V0OmZpeGVkO292ZXJmbG93OmhpZGRlbjtlbXB0eS1jZWxsczpzaG93OyI+DQoJPGNvbGdyb3VwPg0KCQk8Y29sIHN0eWxlPSJ3aWR0aDozNXB4IiAvPg0KCQk8Y29sIHN0eWxlPSJkaXNwbGF5Om5vbmU7IiAvPg0KCQk8Y29sIHN0eWxlPSJkaXNwbGF5Om5vbmU7IiAvPg0KCQk8Y29sIHN0eWxlPSJ3aWR0aDoxMTBweCIgLz4NCgkJPGNvbCBzdHlsZT0id2lkdGg6MTEwcHgiIC8+DQoJCTxjb2wgc3R5bGU9IndpZHRoOjExMHB4IiAvPg0KCQk8Y29sIHN0eWxlPSJ3aWR0aDoxMTBweCIgLz4NCgkJPGNvbCBzdHlsZT0id2lkdGg6MTEwcHgiIC8+DQoJCTxjb2wgc3R5bGU9IndpZHRoOjEyMHB4IiAvPg0KCQk8Y29sIHN0eWxlPSJ3aWR0aDo5MHB4IiAvPg0KCQk8Y29sIHN0eWxlPSJ3aWR0aDo5MHB4IiAvPg0KCQk8Y29sIHN0eWxlPSJ3aWR0aDoxMDBweCIgLz4NCgkJPGNvbCBzdHlsZT0id2lkdGg6OTBweDtkaXNwbGF5Om5vbmU7IiAvPg0KCQk8Y29sIHN0eWxlPSJ3aWR0aDoxMDBweCIgLz4NCgkJPGNvbCBzdHlsZT0id2lkdGg6OTBweDtkaXNwbGF5Om5vbmU7IiAvPg0KCQk8Y29sIHN0eWxlPSJ3aWR0aDoxMDBweCIgLz4NCgkJPGNvbCBzdHlsZT0id2lkdGg6NTBweCIgLz4NCgkJPGNvbCBzdHlsZT0id2lkdGg6MzBweCIgLz4NCgkJPGNvbCBzdHlsZT0id2lkdGg6MzBweCIgLz4NCgk8L2NvbGdyb3VwPg0KPHRib2R5Pg0KCTx0ciBjbGFzcz0icmdSb3ciIGlkPSJHcmlkX0VtcGxveWVlX2N0bDAwX18wIiBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwOyI+DQoJCTx0ZD48aW5wdXQgaWQ9IkdyaWRfRW1wbG95ZWVfY3RsMDBfY3RsMDRfY2hrX0VtcGxveWVlSWRTZWxlY3RDaGVja0JveCIgdHlwZT0iY2hlY2tib3giIG5hbWU9IkdyaWRfRW1wbG95ZWUkY3RsMDAkY3RsMDQkY2hrX0VtcGxveWVlSWRTZWxlY3RDaGVja0JveCIgLz48L3RkPjx0ZCBzdHlsZT0iZGlzcGxheTpub25lOyI+MjUyPC90ZD48dGQgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPjExPC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDsiPjxhIHRpdGxlPSIwMSI+MDE8L2E+PC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDsiPnVzZXI8L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwOyI+QiZTPC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDsiPkRlZmF1bHQ8L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwOyI+RGVmYXVsdDwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij4mbmJzcDs8L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwOyI+Jm5ic3A7PC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDsiPldvcmtpbmc8L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwOyI+Jm5ic3A7PC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDtkaXNwbGF5Om5vbmU7Ij4mbmJzcDs8L3RkPjx0ZCBzdHlsZT0iZm9udC1zaXplOjdwdDsiPjxhIGhyZWY9IlJlcG9ydGluZ01hbmFnZXJMaXN0LmFzcHg/RW1wbG95ZWVJZD0yNTImYW1wO0VtcGxveWVlQ29kZT0wMSZhbXA7RW1wbG95ZWVOYW1lPXVzZXImYW1wO1JlcG9ydFRvPSI+UmVwb3J0aW5nIE1hbmFnZXJzPC9hPjwvdGQ+PHRkIHN0eWxlPSJmb250LXNpemU6N3B0O2Rpc3BsYXk6bm9uZTsiPjxhIGhyZWY9IkVtcGxveWVlRmFtYWlseURldGFpbHMuYXNweD9FbXBsb3llZUlkPTI1MiZhbXA7RW1wbG95ZWVDb2RlPTAxJmFtcDtFbXBsb3llZU5hbWU9dXNlciI+VmlldyBGYW1pbHkgTWVtYmVyczwvYT48L3RkPjx0ZCBzdHlsZT0iZm9udC1zaXplOjdwdDsiPjxhIGhyZWY9IkVtcGxveWVlRG9jdW1lbnRzLmFzcHg/RW1wbG95ZWVJZD0yNTImYW1wO0VtcGxveWVlQ29kZT0wMSZhbXA7RW1wbG95ZWVOYW1lPXVzZXIiPkVtcGxveWVlIERvY3VtZW50czwvYT48L3RkPjx0ZCBzdHlsZT0iZm9udC1zaXplOjdwdDsiPjxhIGhyZWY9IkVtcGxveWVlQmlvRGV0YWlscy5hc3B4P0VtcGxveWVlSWQ9MjUyJmFtcDtFbXBsb3llZUNvZGU9MDEmYW1wO0VtcGxveWVlQ29kZUluRGV2aWNlPTExIj5CaW9EZXRhaWxzPC9hPjwvdGQ+PHRkPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGEgaWQ9IkdyaWRfRW1wbG95ZWVfY3RsMDBfY3RsMDRfRWRpdExpbmsiIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiIG9uY2xpY2s9InJldHVybiBTaG93RWRpdEZvcm0oJiMzOTsyNTImIzM5OywmIzM5OzAmIzM5Oyk7Ij48aW1nIHNyYz0iSWNvbnMvZWRpdC1pY29uLmdpZiIgYWx0PSJFZGl0IiBzdHlsZT0iYm9yZGVyLXdpZHRoOjBweDsiIC8+PC9hPg0KICAgICAgICAgICAgICAgICAgICA8L3RkPjx0ZD48aW5wdXQgdHlwZT0iaW1hZ2UiIG5hbWU9IkdyaWRfRW1wbG95ZWUkY3RsMDAkY3RsMDQkZ2JjRGVsZXRlQ29sdW1uIiBpZD0iR3JpZF9FbXBsb3llZV9jdGwwMF9jdGwwNF9nYmNEZWxldGVDb2x1bW4iIHRpdGxlPSJEZWxldGUiIHNyYz0iSW1hZ2VzL2RlbGV0ZVJlY29yZEJ0bi5naWYiIGFsdD0iRGVsZXRlIiBvbmNsaWNrPSJpZighJGZpbmQoJiMzOTtHcmlkX0VtcGxveWVlJiMzOTspLmNvbmZpcm0oJiMzOTtBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgIFJlY29yZD8mIzM5OywgZXZlbnQsICYjMzk7RGVsZXRlJiMzOTssICYjMzk7NDQwcHgmIzM5OywgJiMzOTs3NXB4JiMzOTspKXJldHVybiBmYWxzZTsiIHN0eWxlPSJib3JkZXItd2lkdGg6MHB4OyIgLz48L3RkPg0KCTwvdHI+PHRyIGNsYXNzPSJyZ0FsdFJvdyIgaWQ9IkdyaWRfRW1wbG95ZWVfY3RsMDBfXzEiPg0KCQk8dGQ+PGlucHV0IGlkPSJHcmlkX0VtcGxveWVlX2N0bDAwX2N0bDA2X2Noa19FbXBsb3llZUlkU2VsZWN0Q2hlY2tCb3giIHR5cGU9ImNoZWNrYm94IiBuYW1lPSJHcmlkX0VtcGxveWVlJGN0bDAwJGN0bDA2JGNoa19FbXBsb3llZUlkU2VsZWN0Q2hlY2tCb3giIC8+PC90ZD48dGQgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPjI3MzwvdGQ+PHRkIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij4yMzE8L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwOyI+PGEgdGl0bGU9IjEiPjE8L2E+PC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDsiPnVkYWk8L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwOyI+QiZTPC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDsiPlBUPC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDsiPkRlZmF1bHQ8L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwOyI+Jm5ic3A7PC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDsiPiZuYnNwOzwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij5Xb3JraW5nPC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDsiPiZuYnNwOzwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7ZGlzcGxheTpub25lOyI+Jm5ic3A7PC90ZD48dGQgc3R5bGU9ImZvbnQtc2l6ZTo3cHQ7Ij48YSBocmVmPSJSZXBvcnRpbmdNYW5hZ2VyTGlzdC5hc3B4P0VtcGxveWVlSWQ9MjczJmFtcDtFbXBsb3llZUNvZGU9MSZhbXA7RW1wbG95ZWVOYW1lPXVkYWkmYW1wO1JlcG9ydFRvPSI+UmVwb3J0aW5nIE1hbmFnZXJzPC9hPjwvdGQ+PHRkIHN0eWxlPSJmb250LXNpemU6N3B0O2Rpc3BsYXk6bm9uZTsiPjxhIGhyZWY9IkVtcGxveWVlRmFtYWlseURldGFpbHMuYXNweD9FbXBsb3llZUlkPTI3MyZhbXA7RW1wbG95ZWVDb2RlPTEmYW1wO0VtcGxveWVlTmFtZT11ZGFpIj5WaWV3IEZhbWlseSBNZW1iZXJzPC9hPjwvdGQ+PHRkIHN0eWxlPSJmb250LXNpemU6N3B0OyI+PGEgaHJlZj0iRW1wbG95ZWVEb2N1bWVudHMuYXNweD9FbXBsb3llZUlkPTI3MyZhbXA7RW1wbG95ZWVDb2RlPTEmYW1wO0VtcGxveWVlTmFtZT11ZGFpIj5FbXBsb3llZSBEb2N1bWVudHM8L2E+PC90ZD48dGQgc3R5bGU9ImZvbnQtc2l6ZTo3cHQ7Ij48YSBocmVmPSJFbXBsb3llZUJpb0RldGFpbHMuYXNweD9FbXBsb3llZUlkPTI3MyZhbXA7RW1wbG95ZWVDb2RlPTEmYW1wO0VtcGxveWVlQ29kZUluRGV2aWNlPTIzMSI+QmlvRGV0YWlsczwvYT48L3RkPjx0ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGlkPSJHcmlkX0VtcGxveWVlX2N0bDAwX2N0bDA2X0VkaXRMaW5rIiBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCk7IiBvbmNsaWNrPSJyZXR1cm4gU2hvd0VkaXRGb3JtKCYjMzk7MjczJiMzOTssJiMzOTsxJiMzOTspOyI+PGltZyBzcmM9Ikljb25zL2VkaXQtaWNvbi5naWYiIGFsdD0iRWRpdCIgc3R5bGU9ImJvcmRlci13aWR0aDowcHg7IiAvPjwvYT4NCiAgICAgICAgICAgICAgICAgICAgPC90ZD48dGQ+PGlucHV0IHR5cGU9ImltYWdlIiBuYW1lPSJHcmlkX0VtcGxveWVlJGN0bDAwJGN0bDA2JGdiY0RlbGV0ZUNvbHVtbiIgaWQ9IkdyaWRfRW1wbG95ZWVfY3RsMDBfY3RsMDZfZ2JjRGVsZXRlQ29sdW1uIiB0aXRsZT0iRGVsZXRlIiBzcmM9IkltYWdlcy9kZWxldGVSZWNvcmRCdG4uZ2lmIiBhbHQ9IkRlbGV0ZSIgb25jbGljaz0iaWYoISRmaW5kKCYjMzk7R3JpZF9FbXBsb3llZSYjMzk7KS5jb25maXJtKCYjMzk7QXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzICBSZWNvcmQ/JiMzOTssIGV2ZW50LCAmIzM5O0RlbGV0ZSYjMzk7LCAmIzM5OzQ0MHB4JiMzOTssICYjMzk7NzVweCYjMzk7KSlyZXR1cm4gZmFsc2U7IiBzdHlsZT0iYm9yZGVyLXdpZHRoOjBweDsiIC8+PC90ZD4NCgk8L3RyPjx0ciBjbGFzcz0icmdSb3ciIGlkPSJHcmlkX0VtcGxveWVlX2N0bDAwX18yIiBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwOyI+DQoJCTx0ZD48aW5wdXQgaWQ9IkdyaWRfRW1wbG95ZWVfY3RsMDBfY3RsMDhfY2hrX0VtcGxveWVlSWRTZWxlY3RDaGVja0JveCIgdHlwZT0iY2hlY2tib3giIG5hbWU9IkdyaWRfRW1wbG95ZWUkY3RsMDAkY3RsMDgkY2hrX0VtcGxveWVlSWRTZWxlY3RDaGVja0JveCIgLz48L3RkPjx0ZCBzdHlsZT0iZGlzcGxheTpub25lOyI+Mjc2PC90ZD48dGQgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPjUzLjI8L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwOyI+PGEgdGl0bGU9IjIiPjI8L2E+PC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDsiPmNoYWl0dTwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij5CJlM8L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwOyI+RGVmYXVsdDwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij5EZWZhdWx0PC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDsiPiZuYnNwOzwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij4mbmJzcDs8L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwOyI+V29ya2luZzwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij4mbmJzcDs8L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwO2Rpc3BsYXk6bm9uZTsiPiZuYnNwOzwvdGQ+PHRkIHN0eWxlPSJmb250LXNpemU6N3B0OyI+PGEgaHJlZj0iUmVwb3J0aW5nTWFuYWdlckxpc3QuYXNweD9FbXBsb3llZUlkPTI3NiZhbXA7RW1wbG95ZWVDb2RlPTImYW1wO0VtcGxveWVlTmFtZT1jaGFpdHUmYW1wO1JlcG9ydFRvPSI+UmVwb3J0aW5nIE1hbmFnZXJzPC9hPjwvdGQ+PHRkIHN0eWxlPSJmb250LXNpemU6N3B0O2Rpc3BsYXk6bm9uZTsiPjxhIGhyZWY9IkVtcGxveWVlRmFtYWlseURldGFpbHMuYXNweD9FbXBsb3llZUlkPTI3NiZhbXA7RW1wbG95ZWVDb2RlPTImYW1wO0VtcGxveWVlTmFtZT1jaGFpdHUiPlZpZXcgRmFtaWx5IE1lbWJlcnM8L2E+PC90ZD48dGQgc3R5bGU9ImZvbnQtc2l6ZTo3cHQ7Ij48YSBocmVmPSJFbXBsb3llZURvY3VtZW50cy5hc3B4P0VtcGxveWVlSWQ9Mjc2JmFtcDtFbXBsb3llZUNvZGU9MiZhbXA7RW1wbG95ZWVOYW1lPWNoYWl0dSI+RW1wbG95ZWUgRG9jdW1lbnRzPC9hPjwvdGQ+PHRkIHN0eWxlPSJmb250LXNpemU6N3B0OyI+PGEgaHJlZj0iRW1wbG95ZWVCaW9EZXRhaWxzLmFzcHg/RW1wbG95ZWVJZD0yNzYmYW1wO0VtcGxveWVlQ29kZT0yJmFtcDtFbXBsb3llZUNvZGVJbkRldmljZT01My4yIj5CaW9EZXRhaWxzPC9hPjwvdGQ+PHRkPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGEgaWQ9IkdyaWRfRW1wbG95ZWVfY3RsMDBfY3RsMDhfRWRpdExpbmsiIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiIG9uY2xpY2s9InJldHVybiBTaG93RWRpdEZvcm0oJiMzOTsyNzYmIzM5OywmIzM5OzImIzM5Oyk7Ij48aW1nIHNyYz0iSWNvbnMvZWRpdC1pY29uLmdpZiIgYWx0PSJFZGl0IiBzdHlsZT0iYm9yZGVyLXdpZHRoOjBweDsiIC8+PC9hPg0KICAgICAgICAgICAgICAgICAgICA8L3RkPjx0ZD48aW5wdXQgdHlwZT0iaW1hZ2UiIG5hbWU9IkdyaWRfRW1wbG95ZWUkY3RsMDAkY3RsMDgkZ2JjRGVsZXRlQ29sdW1uIiBpZD0iR3JpZF9FbXBsb3llZV9jdGwwMF9jdGwwOF9nYmNEZWxldGVDb2x1bW4iIHRpdGxlPSJEZWxldGUiIHNyYz0iSW1hZ2VzL2RlbGV0ZVJlY29yZEJ0bi5naWYiIGFsdD0iRGVsZXRlIiBvbmNsaWNrPSJpZighJGZpbmQoJiMzOTtHcmlkX0VtcGxveWVlJiMzOTspLmNvbmZpcm0oJiMzOTtBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgIFJlY29yZD8mIzM5OywgZXZlbnQsICYjMzk7RGVsZXRlJiMzOTssICYjMzk7NDQwcHgmIzM5OywgJiMzOTs3NXB4JiMzOTspKXJldHVybiBmYWxzZTsiIHN0eWxlPSJib3JkZXItd2lkdGg6MHB4OyIgLz48L3RkPg0KCTwvdHI+PHRyIGNsYXNzPSJyZ0FsdFJvdyIgaWQ9IkdyaWRfRW1wbG95ZWVfY3RsMDBfXzMiPg0KCQk8dGQ+PGlucHV0IGlkPSJHcmlkX0VtcGxveWVlX2N0bDAwX2N0bDEwX2Noa19FbXBsb3llZUlkU2VsZWN0Q2hlY2tCb3giIHR5cGU9ImNoZWNrYm94IiBuYW1lPSJHcmlkX0VtcGxveWVlJGN0bDAwJGN0bDEwJGNoa19FbXBsb3llZUlkU2VsZWN0Q2hlY2tCb3giIC8+PC90ZD48dGQgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPjIzNTwvdGQ+PHRkIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij4wMDEwMDwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij48YSB0aXRsZT0iMDAxMCI+MDAxMDwvYT48L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwOyI+UmFqdTwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij5jbXB5PC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDsiPkRlZmF1bHQ8L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwOyI+RGVmYXVsdDwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij4mbmJzcDs8L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwOyI+Jm5ic3A7PC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDsiPldvcmtpbmc8L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwOyI+Jm5ic3A7PC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDtkaXNwbGF5Om5vbmU7Ij4mbmJzcDs8L3RkPjx0ZCBzdHlsZT0iZm9udC1zaXplOjdwdDsiPjxhIGhyZWY9IlJlcG9ydGluZ01hbmFnZXJMaXN0LmFzcHg/RW1wbG95ZWVJZD0yMzUmYW1wO0VtcGxveWVlQ29kZT0wMDEwJmFtcDtFbXBsb3llZU5hbWU9UmFqdSZhbXA7UmVwb3J0VG89Ij5SZXBvcnRpbmcgTWFuYWdlcnM8L2E+PC90ZD48dGQgc3R5bGU9ImZvbnQtc2l6ZTo3cHQ7ZGlzcGxheTpub25lOyI+PGEgaHJlZj0iRW1wbG95ZWVGYW1haWx5RGV0YWlscy5hc3B4P0VtcGxveWVlSWQ9MjM1JmFtcDtFbXBsb3llZUNvZGU9MDAxMCZhbXA7RW1wbG95ZWVOYW1lPVJhanUiPlZpZXcgRmFtaWx5IE1lbWJlcnM8L2E+PC90ZD48dGQgc3R5bGU9ImZvbnQtc2l6ZTo3cHQ7Ij48YSBocmVmPSJFbXBsb3llZURvY3VtZW50cy5hc3B4P0VtcGxveWVlSWQ9MjM1JmFtcDtFbXBsb3llZUNvZGU9MDAxMCZhbXA7RW1wbG95ZWVOYW1lPVJhanUiPkVtcGxveWVlIERvY3VtZW50czwvYT48L3RkPjx0ZCBzdHlsZT0iZm9udC1zaXplOjdwdDsiPjxhIGhyZWY9IkVtcGxveWVlQmlvRGV0YWlscy5hc3B4P0VtcGxveWVlSWQ9MjM1JmFtcDtFbXBsb3llZUNvZGU9MDAxMCZhbXA7RW1wbG95ZWVDb2RlSW5EZXZpY2U9MDAxMDAiPkJpb0RldGFpbHM8L2E+PC90ZD48dGQ+DQogICAgICAgICAgICAgICAgICAgICAgICA8YSBpZD0iR3JpZF9FbXBsb3llZV9jdGwwMF9jdGwxMF9FZGl0TGluayIgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApOyIgb25jbGljaz0icmV0dXJuIFNob3dFZGl0Rm9ybSgmIzM5OzIzNSYjMzk7LCYjMzk7MyYjMzk7KTsiPjxpbWcgc3JjPSJJY29ucy9lZGl0LWljb24uZ2lmIiBhbHQ9IkVkaXQiIHN0eWxlPSJib3JkZXItd2lkdGg6MHB4OyIgLz48L2E+DQogICAgICAgICAgICAgICAgICAgIDwvdGQ+PHRkPjxpbnB1dCB0eXBlPSJpbWFnZSIgbmFtZT0iR3JpZF9FbXBsb3llZSRjdGwwMCRjdGwxMCRnYmNEZWxldGVDb2x1bW4iIGlkPSJHcmlkX0VtcGxveWVlX2N0bDAwX2N0bDEwX2diY0RlbGV0ZUNvbHVtbiIgdGl0bGU9IkRlbGV0ZSIgc3JjPSJJbWFnZXMvZGVsZXRlUmVjb3JkQnRuLmdpZiIgYWx0PSJEZWxldGUiIG9uY2xpY2s9ImlmKCEkZmluZCgmIzM5O0dyaWRfRW1wbG95ZWUmIzM5OykuY29uZmlybSgmIzM5O0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyAgUmVjb3JkPyYjMzk7LCBldmVudCwgJiMzOTtEZWxldGUmIzM5OywgJiMzOTs0NDBweCYjMzk7LCAmIzM5Ozc1cHgmIzM5OykpcmV0dXJuIGZhbHNlOyIgc3R5bGU9ImJvcmRlci13aWR0aDowcHg7IiAvPjwvdGQ+DQoJPC90cj48dHIgY2xhc3M9InJnUm93IiBpZD0iR3JpZF9FbXBsb3llZV9jdGwwMF9fNCIgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDsiPg0KCQk8dGQ+PGlucHV0IGlkPSJHcmlkX0VtcGxveWVlX2N0bDAwX2N0bDEyX2Noa19FbXBsb3llZUlkU2VsZWN0Q2hlY2tCb3giIHR5cGU9ImNoZWNrYm94IiBuYW1lPSJHcmlkX0VtcGxveWVlJGN0bDAwJGN0bDEyJGNoa19FbXBsb3llZUlkU2VsZWN0Q2hlY2tCb3giIC8+PC90ZD48dGQgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPjE5MTwvdGQ+PHRkIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij45NDkyMTwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij48YSB0aXRsZT0iMDEwIj4wMTA8L2E+PC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDsiPmZhemFsPC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDsiPkImUzwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij5EZWZhdWx0PC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDsiPkRlZmF1bHQ8L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwOyI+Jm5ic3A7PC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDsiPiZuYnNwOzwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij5Xb3JraW5nPC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDsiPiZuYnNwOzwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7ZGlzcGxheTpub25lOyI+Jm5ic3A7PC90ZD48dGQgc3R5bGU9ImZvbnQtc2l6ZTo3cHQ7Ij48YSBocmVmPSJSZXBvcnRpbmdNYW5hZ2VyTGlzdC5hc3B4P0VtcGxveWVlSWQ9MTkxJmFtcDtFbXBsb3llZUNvZGU9MDEwJmFtcDtFbXBsb3llZU5hbWU9ZmF6YWwmYW1wO1JlcG9ydFRvPSI+UmVwb3J0aW5nIE1hbmFnZXJzPC9hPjwvdGQ+PHRkIHN0eWxlPSJmb250LXNpemU6N3B0O2Rpc3BsYXk6bm9uZTsiPjxhIGhyZWY9IkVtcGxveWVlRmFtYWlseURldGFpbHMuYXNweD9FbXBsb3llZUlkPTE5MSZhbXA7RW1wbG95ZWVDb2RlPTAxMCZhbXA7RW1wbG95ZWVOYW1lPWZhemFsIj5WaWV3IEZhbWlseSBNZW1iZXJzPC9hPjwvdGQ+PHRkIHN0eWxlPSJmb250LXNpemU6N3B0OyI+PGEgaHJlZj0iRW1wbG95ZWVEb2N1bWVudHMuYXNweD9FbXBsb3llZUlkPTE5MSZhbXA7RW1wbG95ZWVDb2RlPTAxMCZhbXA7RW1wbG95ZWVOYW1lPWZhemFsIj5FbXBsb3llZSBEb2N1bWVudHM8L2E+PC90ZD48dGQgc3R5bGU9ImZvbnQtc2l6ZTo3cHQ7Ij48YSBocmVmPSJFbXBsb3llZUJpb0RldGFpbHMuYXNweD9FbXBsb3llZUlkPTE5MSZhbXA7RW1wbG95ZWVDb2RlPTAxMCZhbXA7RW1wbG95ZWVDb2RlSW5EZXZpY2U9OTQ5MjEiPkJpb0RldGFpbHM8L2E+PC90ZD48dGQ+DQogICAgICAgICAgICAgICAgICAgICAgICA8YSBpZD0iR3JpZF9FbXBsb3llZV9jdGwwMF9jdGwxMl9FZGl0TGluayIgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApOyIgb25jbGljaz0icmV0dXJuIFNob3dFZGl0Rm9ybSgmIzM5OzE5MSYjMzk7LCYjMzk7NCYjMzk7KTsiPjxpbWcgc3JjPSJJY29ucy9lZGl0LWljb24uZ2lmIiBhbHQ9IkVkaXQiIHN0eWxlPSJib3JkZXItd2lkdGg6MHB4OyIgLz48L2E+DQogICAgICAgICAgICAgICAgICAgIDwvdGQ+PHRkPjxpbnB1dCB0eXBlPSJpbWFnZSIgbmFtZT0iR3JpZF9FbXBsb3llZSRjdGwwMCRjdGwxMiRnYmNEZWxldGVDb2x1bW4iIGlkPSJHcmlkX0VtcGxveWVlX2N0bDAwX2N0bDEyX2diY0RlbGV0ZUNvbHVtbiIgdGl0bGU9IkRlbGV0ZSIgc3JjPSJJbWFnZXMvZGVsZXRlUmVjb3JkQnRuLmdpZiIgYWx0PSJEZWxldGUiIG9uY2xpY2s9ImlmKCEkZmluZCgmIzM5O0dyaWRfRW1wbG95ZWUmIzM5OykuY29uZmlybSgmIzM5O0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyAgUmVjb3JkPyYjMzk7LCBldmVudCwgJiMzOTtEZWxldGUmIzM5OywgJiMzOTs0NDBweCYjMzk7LCAmIzM5Ozc1cHgmIzM5OykpcmV0dXJuIGZhbHNlOyIgc3R5bGU9ImJvcmRlci13aWR0aDowcHg7IiAvPjwvdGQ+DQoJPC90cj48dHIgY2xhc3M9InJnQWx0Um93IiBpZD0iR3JpZF9FbXBsb3llZV9jdGwwMF9fNSI+DQoJCTx0ZD48aW5wdXQgaWQ9IkdyaWRfRW1wbG95ZWVfY3RsMDBfY3RsMTRfY2hrX0VtcGxveWVlSWRTZWxlY3RDaGVja0JveCIgdHlwZT0iY2hlY2tib3giIG5hbWU9IkdyaWRfRW1wbG95ZWUkY3RsMDAkY3RsMTQkY2hrX0VtcGxveWVlSWRTZWxlY3RDaGVja0JveCIgLz48L3RkPjx0ZCBzdHlsZT0iZGlzcGxheTpub25lOyI+MjUzPC90ZD48dGQgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPjEyMTwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij48YSB0aXRsZT0iMDExIj4wMTE8L2E+PC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDsiPnRlY2ggdXNlcjwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij5CJlM8L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwOyI+RGVmYXVsdDwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij5EZWZhdWx0PC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDsiPiZuYnNwOzwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij4mbmJzcDs8L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwOyI+V29ya2luZzwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij4mbmJzcDs8L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwO2Rpc3BsYXk6bm9uZTsiPiZuYnNwOzwvdGQ+PHRkIHN0eWxlPSJmb250LXNpemU6N3B0OyI+PGEgaHJlZj0iUmVwb3J0aW5nTWFuYWdlckxpc3QuYXNweD9FbXBsb3llZUlkPTI1MyZhbXA7RW1wbG95ZWVDb2RlPTAxMSZhbXA7RW1wbG95ZWVOYW1lPXRlY2ggdXNlciZhbXA7UmVwb3J0VG89Ij5SZXBvcnRpbmcgTWFuYWdlcnM8L2E+PC90ZD48dGQgc3R5bGU9ImZvbnQtc2l6ZTo3cHQ7ZGlzcGxheTpub25lOyI+PGEgaHJlZj0iRW1wbG95ZWVGYW1haWx5RGV0YWlscy5hc3B4P0VtcGxveWVlSWQ9MjUzJmFtcDtFbXBsb3llZUNvZGU9MDExJmFtcDtFbXBsb3llZU5hbWU9dGVjaCB1c2VyIj5WaWV3IEZhbWlseSBNZW1iZXJzPC9hPjwvdGQ+PHRkIHN0eWxlPSJmb250LXNpemU6N3B0OyI+PGEgaHJlZj0iRW1wbG95ZWVEb2N1bWVudHMuYXNweD9FbXBsb3llZUlkPTI1MyZhbXA7RW1wbG95ZWVDb2RlPTAxMSZhbXA7RW1wbG95ZWVOYW1lPXRlY2ggdXNlciI+RW1wbG95ZWUgRG9jdW1lbnRzPC9hPjwvdGQ+PHRkIHN0eWxlPSJmb250LXNpemU6N3B0OyI+PGEgaHJlZj0iRW1wbG95ZWVCaW9EZXRhaWxzLmFzcHg/RW1wbG95ZWVJZD0yNTMmYW1wO0VtcGxveWVlQ29kZT0wMTEmYW1wO0VtcGxveWVlQ29kZUluRGV2aWNlPTEyMSI+QmlvRGV0YWlsczwvYT48L3RkPjx0ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGlkPSJHcmlkX0VtcGxveWVlX2N0bDAwX2N0bDE0X0VkaXRMaW5rIiBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCk7IiBvbmNsaWNrPSJyZXR1cm4gU2hvd0VkaXRGb3JtKCYjMzk7MjUzJiMzOTssJiMzOTs1JiMzOTspOyI+PGltZyBzcmM9Ikljb25zL2VkaXQtaWNvbi5naWYiIGFsdD0iRWRpdCIgc3R5bGU9ImJvcmRlci13aWR0aDowcHg7IiAvPjwvYT4NCiAgICAgICAgICAgICAgICAgICAgPC90ZD48dGQ+PGlucHV0IHR5cGU9ImltYWdlIiBuYW1lPSJHcmlkX0VtcGxveWVlJGN0bDAwJGN0bDE0JGdiY0RlbGV0ZUNvbHVtbiIgaWQ9IkdyaWRfRW1wbG95ZWVfY3RsMDBfY3RsMTRfZ2JjRGVsZXRlQ29sdW1uIiB0aXRsZT0iRGVsZXRlIiBzcmM9IkltYWdlcy9kZWxldGVSZWNvcmRCdG4uZ2lmIiBhbHQ9IkRlbGV0ZSIgb25jbGljaz0iaWYoISRmaW5kKCYjMzk7R3JpZF9FbXBsb3llZSYjMzk7KS5jb25maXJtKCYjMzk7QXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzICBSZWNvcmQ/JiMzOTssIGV2ZW50LCAmIzM5O0RlbGV0ZSYjMzk7LCAmIzM5OzQ0MHB4JiMzOTssICYjMzk7NzVweCYjMzk7KSlyZXR1cm4gZmFsc2U7IiBzdHlsZT0iYm9yZGVyLXdpZHRoOjBweDsiIC8+PC90ZD4NCgk8L3RyPjx0ciBjbGFzcz0icmdSb3ciIGlkPSJHcmlkX0VtcGxveWVlX2N0bDAwX182IiBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwOyI+DQoJCTx0ZD48aW5wdXQgaWQ9IkdyaWRfRW1wbG95ZWVfY3RsMDBfY3RsMTZfY2hrX0VtcGxveWVlSWRTZWxlY3RDaGVja0JveCIgdHlwZT0iY2hlY2tib3giIG5hbWU9IkdyaWRfRW1wbG95ZWUkY3RsMDAkY3RsMTYkY2hrX0VtcGxveWVlSWRTZWxlY3RDaGVja0JveCIgLz48L3RkPjx0ZCBzdHlsZT0iZGlzcGxheTpub25lOyI+MjQ2PC90ZD48dGQgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPjIzNDwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij48YSB0aXRsZT0iMTIzIj4xMjM8L2E+PC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDsiPmFjaHl1dGhuPC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDsiPkImUzwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij5QVDwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij5EZWZhdWx0PC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDsiPiZuYnNwOzwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij4mbmJzcDs8L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwOyI+V29ya2luZzwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij4mbmJzcDs8L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwO2Rpc3BsYXk6bm9uZTsiPiZuYnNwOzwvdGQ+PHRkIHN0eWxlPSJmb250LXNpemU6N3B0OyI+PGEgaHJlZj0iUmVwb3J0aW5nTWFuYWdlckxpc3QuYXNweD9FbXBsb3llZUlkPTI0NiZhbXA7RW1wbG95ZWVDb2RlPTEyMyZhbXA7RW1wbG95ZWVOYW1lPWFjaHl1dGhuJmFtcDtSZXBvcnRUbz0iPlJlcG9ydGluZyBNYW5hZ2VyczwvYT48L3RkPjx0ZCBzdHlsZT0iZm9udC1zaXplOjdwdDtkaXNwbGF5Om5vbmU7Ij48YSBocmVmPSJFbXBsb3llZUZhbWFpbHlEZXRhaWxzLmFzcHg/RW1wbG95ZWVJZD0yNDYmYW1wO0VtcGxveWVlQ29kZT0xMjMmYW1wO0VtcGxveWVlTmFtZT1hY2h5dXRobiI+VmlldyBGYW1pbHkgTWVtYmVyczwvYT48L3RkPjx0ZCBzdHlsZT0iZm9udC1zaXplOjdwdDsiPjxhIGhyZWY9IkVtcGxveWVlRG9jdW1lbnRzLmFzcHg/RW1wbG95ZWVJZD0yNDYmYW1wO0VtcGxveWVlQ29kZT0xMjMmYW1wO0VtcGxveWVlTmFtZT1hY2h5dXRobiI+RW1wbG95ZWUgRG9jdW1lbnRzPC9hPjwvdGQ+PHRkIHN0eWxlPSJmb250LXNpemU6N3B0OyI+PGEgaHJlZj0iRW1wbG95ZWVCaW9EZXRhaWxzLmFzcHg/RW1wbG95ZWVJZD0yNDYmYW1wO0VtcGxveWVlQ29kZT0xMjMmYW1wO0VtcGxveWVlQ29kZUluRGV2aWNlPTIzNCI+QmlvRGV0YWlsczwvYT48L3RkPjx0ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGlkPSJHcmlkX0VtcGxveWVlX2N0bDAwX2N0bDE2X0VkaXRMaW5rIiBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCk7IiBvbmNsaWNrPSJyZXR1cm4gU2hvd0VkaXRGb3JtKCYjMzk7MjQ2JiMzOTssJiMzOTs2JiMzOTspOyI+PGltZyBzcmM9Ikljb25zL2VkaXQtaWNvbi5naWYiIGFsdD0iRWRpdCIgc3R5bGU9ImJvcmRlci13aWR0aDowcHg7IiAvPjwvYT4NCiAgICAgICAgICAgICAgICAgICAgPC90ZD48dGQ+PGlucHV0IHR5cGU9ImltYWdlIiBuYW1lPSJHcmlkX0VtcGxveWVlJGN0bDAwJGN0bDE2JGdiY0RlbGV0ZUNvbHVtbiIgaWQ9IkdyaWRfRW1wbG95ZWVfY3RsMDBfY3RsMTZfZ2JjRGVsZXRlQ29sdW1uIiB0aXRsZT0iRGVsZXRlIiBzcmM9IkltYWdlcy9kZWxldGVSZWNvcmRCdG4uZ2lmIiBhbHQ9IkRlbGV0ZSIgb25jbGljaz0iaWYoISRmaW5kKCYjMzk7R3JpZF9FbXBsb3llZSYjMzk7KS5jb25maXJtKCYjMzk7QXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzICBSZWNvcmQ/JiMzOTssIGV2ZW50LCAmIzM5O0RlbGV0ZSYjMzk7LCAmIzM5OzQ0MHB4JiMzOTssICYjMzk7NzVweCYjMzk7KSlyZXR1cm4gZmFsc2U7IiBzdHlsZT0iYm9yZGVyLXdpZHRoOjBweDsiIC8+PC90ZD4NCgk8L3RyPjx0ciBjbGFzcz0icmdBbHRSb3ciIGlkPSJHcmlkX0VtcGxveWVlX2N0bDAwX183Ij4NCgkJPHRkPjxpbnB1dCBpZD0iR3JpZF9FbXBsb3llZV9jdGwwMF9jdGwxOF9jaGtfRW1wbG95ZWVJZFNlbGVjdENoZWNrQm94IiB0eXBlPSJjaGVja2JveCIgbmFtZT0iR3JpZF9FbXBsb3llZSRjdGwwMCRjdGwxOCRjaGtfRW1wbG95ZWVJZFNlbGVjdENoZWNrQm94IiAvPjwvdGQ+PHRkIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij4yMTI8L3RkPjx0ZCBzdHlsZT0iZGlzcGxheTpub25lOyI+djMwOTg8L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwOyI+PGEgdGl0bGU9IjIwMSI+MjAxPC9hPjwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij52ZW5hdDwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij5CJlM8L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwOyI+RGVmYXVsdDwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij5EZWZhdWx0PC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDsiPiZuYnNwOzwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij4mbmJzcDs8L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwOyI+V29ya2luZzwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij4mbmJzcDs8L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwO2Rpc3BsYXk6bm9uZTsiPiZuYnNwOzwvdGQ+PHRkIHN0eWxlPSJmb250LXNpemU6N3B0OyI+PGEgaHJlZj0iUmVwb3J0aW5nTWFuYWdlckxpc3QuYXNweD9FbXBsb3llZUlkPTIxMiZhbXA7RW1wbG95ZWVDb2RlPTIwMSZhbXA7RW1wbG95ZWVOYW1lPXZlbmF0JmFtcDtSZXBvcnRUbz0iPlJlcG9ydGluZyBNYW5hZ2VyczwvYT48L3RkPjx0ZCBzdHlsZT0iZm9udC1zaXplOjdwdDtkaXNwbGF5Om5vbmU7Ij48YSBocmVmPSJFbXBsb3llZUZhbWFpbHlEZXRhaWxzLmFzcHg/RW1wbG95ZWVJZD0yMTImYW1wO0VtcGxveWVlQ29kZT0yMDEmYW1wO0VtcGxveWVlTmFtZT12ZW5hdCI+VmlldyBGYW1pbHkgTWVtYmVyczwvYT48L3RkPjx0ZCBzdHlsZT0iZm9udC1zaXplOjdwdDsiPjxhIGhyZWY9IkVtcGxveWVlRG9jdW1lbnRzLmFzcHg/RW1wbG95ZWVJZD0yMTImYW1wO0VtcGxveWVlQ29kZT0yMDEmYW1wO0VtcGxveWVlTmFtZT12ZW5hdCI+RW1wbG95ZWUgRG9jdW1lbnRzPC9hPjwvdGQ+PHRkIHN0eWxlPSJmb250LXNpemU6N3B0OyI+PGEgaHJlZj0iRW1wbG95ZWVCaW9EZXRhaWxzLmFzcHg/RW1wbG95ZWVJZD0yMTImYW1wO0VtcGxveWVlQ29kZT0yMDEmYW1wO0VtcGxveWVlQ29kZUluRGV2aWNlPXYzMDk4Ij5CaW9EZXRhaWxzPC9hPjwvdGQ+PHRkPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGEgaWQ9IkdyaWRfRW1wbG95ZWVfY3RsMDBfY3RsMThfRWRpdExpbmsiIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiIG9uY2xpY2s9InJldHVybiBTaG93RWRpdEZvcm0oJiMzOTsyMTImIzM5OywmIzM5OzcmIzM5Oyk7Ij48aW1nIHNyYz0iSWNvbnMvZWRpdC1pY29uLmdpZiIgYWx0PSJFZGl0IiBzdHlsZT0iYm9yZGVyLXdpZHRoOjBweDsiIC8+PC9hPg0KICAgICAgICAgICAgICAgICAgICA8L3RkPjx0ZD48aW5wdXQgdHlwZT0iaW1hZ2UiIG5hbWU9IkdyaWRfRW1wbG95ZWUkY3RsMDAkY3RsMTgkZ2JjRGVsZXRlQ29sdW1uIiBpZD0iR3JpZF9FbXBsb3llZV9jdGwwMF9jdGwxOF9nYmNEZWxldGVDb2x1bW4iIHRpdGxlPSJEZWxldGUiIHNyYz0iSW1hZ2VzL2RlbGV0ZVJlY29yZEJ0bi5naWYiIGFsdD0iRGVsZXRlIiBvbmNsaWNrPSJpZighJGZpbmQoJiMzOTtHcmlkX0VtcGxveWVlJiMzOTspLmNvbmZpcm0oJiMzOTtBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgIFJlY29yZD8mIzM5OywgZXZlbnQsICYjMzk7RGVsZXRlJiMzOTssICYjMzk7NDQwcHgmIzM5OywgJiMzOTs3NXB4JiMzOTspKXJldHVybiBmYWxzZTsiIHN0eWxlPSJib3JkZXItd2lkdGg6MHB4OyIgLz48L3RkPg0KCTwvdHI+PHRyIGNsYXNzPSJyZ1JvdyIgaWQ9IkdyaWRfRW1wbG95ZWVfY3RsMDBfXzgiIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij4NCgkJPHRkPjxpbnB1dCBpZD0iR3JpZF9FbXBsb3llZV9jdGwwMF9jdGwyMF9jaGtfRW1wbG95ZWVJZFNlbGVjdENoZWNrQm94IiB0eXBlPSJjaGVja2JveCIgbmFtZT0iR3JpZF9FbXBsb3llZSRjdGwwMCRjdGwyMCRjaGtfRW1wbG95ZWVJZFNlbGVjdENoZWNrQm94IiAvPjwvdGQ+PHRkIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij4yMTQ8L3RkPjx0ZCBzdHlsZT0iZGlzcGxheTpub25lOyI+dm4zMDI5PC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDsiPjxhIHRpdGxlPSIyMDMiPjIwMzwvYT48L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwOyI+dmVubms8L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwOyI+QiZTPC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDsiPkRlZmF1bHQ8L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwOyI+RGVmYXVsdDwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij4mbmJzcDs8L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwOyI+Jm5ic3A7PC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDsiPldvcmtpbmc8L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwOyI+Jm5ic3A7PC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDtkaXNwbGF5Om5vbmU7Ij4mbmJzcDs8L3RkPjx0ZCBzdHlsZT0iZm9udC1zaXplOjdwdDsiPjxhIGhyZWY9IlJlcG9ydGluZ01hbmFnZXJMaXN0LmFzcHg/RW1wbG95ZWVJZD0yMTQmYW1wO0VtcGxveWVlQ29kZT0yMDMmYW1wO0VtcGxveWVlTmFtZT12ZW5uayZhbXA7UmVwb3J0VG89Ij5SZXBvcnRpbmcgTWFuYWdlcnM8L2E+PC90ZD48dGQgc3R5bGU9ImZvbnQtc2l6ZTo3cHQ7ZGlzcGxheTpub25lOyI+PGEgaHJlZj0iRW1wbG95ZWVGYW1haWx5RGV0YWlscy5hc3B4P0VtcGxveWVlSWQ9MjE0JmFtcDtFbXBsb3llZUNvZGU9MjAzJmFtcDtFbXBsb3llZU5hbWU9dmVubmsiPlZpZXcgRmFtaWx5IE1lbWJlcnM8L2E+PC90ZD48dGQgc3R5bGU9ImZvbnQtc2l6ZTo3cHQ7Ij48YSBocmVmPSJFbXBsb3llZURvY3VtZW50cy5hc3B4P0VtcGxveWVlSWQ9MjE0JmFtcDtFbXBsb3llZUNvZGU9MjAzJmFtcDtFbXBsb3llZU5hbWU9dmVubmsiPkVtcGxveWVlIERvY3VtZW50czwvYT48L3RkPjx0ZCBzdHlsZT0iZm9udC1zaXplOjdwdDsiPjxhIGhyZWY9IkVtcGxveWVlQmlvRGV0YWlscy5hc3B4P0VtcGxveWVlSWQ9MjE0JmFtcDtFbXBsb3llZUNvZGU9MjAzJmFtcDtFbXBsb3llZUNvZGVJbkRldmljZT12bjMwMjkiPkJpb0RldGFpbHM8L2E+PC90ZD48dGQ+DQogICAgICAgICAgICAgICAgICAgICAgICA8YSBpZD0iR3JpZF9FbXBsb3llZV9jdGwwMF9jdGwyMF9FZGl0TGluayIgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApOyIgb25jbGljaz0icmV0dXJuIFNob3dFZGl0Rm9ybSgmIzM5OzIxNCYjMzk7LCYjMzk7OCYjMzk7KTsiPjxpbWcgc3JjPSJJY29ucy9lZGl0LWljb24uZ2lmIiBhbHQ9IkVkaXQiIHN0eWxlPSJib3JkZXItd2lkdGg6MHB4OyIgLz48L2E+DQogICAgICAgICAgICAgICAgICAgIDwvdGQ+PHRkPjxpbnB1dCB0eXBlPSJpbWFnZSIgbmFtZT0iR3JpZF9FbXBsb3llZSRjdGwwMCRjdGwyMCRnYmNEZWxldGVDb2x1bW4iIGlkPSJHcmlkX0VtcGxveWVlX2N0bDAwX2N0bDIwX2diY0RlbGV0ZUNvbHVtbiIgdGl0bGU9IkRlbGV0ZSIgc3JjPSJJbWFnZXMvZGVsZXRlUmVjb3JkQnRuLmdpZiIgYWx0PSJEZWxldGUiIG9uY2xpY2s9ImlmKCEkZmluZCgmIzM5O0dyaWRfRW1wbG95ZWUmIzM5OykuY29uZmlybSgmIzM5O0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyAgUmVjb3JkPyYjMzk7LCBldmVudCwgJiMzOTtEZWxldGUmIzM5OywgJiMzOTs0NDBweCYjMzk7LCAmIzM5Ozc1cHgmIzM5OykpcmV0dXJuIGZhbHNlOyIgc3R5bGU9ImJvcmRlci13aWR0aDowcHg7IiAvPjwvdGQ+DQoJPC90cj48dHIgY2xhc3M9InJnQWx0Um93IiBpZD0iR3JpZF9FbXBsb3llZV9jdGwwMF9fOSI+DQoJCTx0ZD48aW5wdXQgaWQ9IkdyaWRfRW1wbG95ZWVfY3RsMDBfY3RsMjJfY2hrX0VtcGxveWVlSWRTZWxlY3RDaGVja0JveCIgdHlwZT0iY2hlY2tib3giIG5hbWU9IkdyaWRfRW1wbG95ZWUkY3RsMDAkY3RsMjIkY2hrX0VtcGxveWVlSWRTZWxlY3RDaGVja0JveCIgLz48L3RkPjx0ZCBzdHlsZT0iZGlzcGxheTpub25lOyI+MTU0PC90ZD48dGQgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPmFiYzwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij48YSB0aXRsZT0iMjgwIj4yODA8L2E+PC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDsiPnZhbXNoaTwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij5CJlM8L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwOyI+RGVmYXVsdDwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij5EZWZhdWx0PC90ZD48dGQgc3R5bGU9IndoaXRlLXNwYWNlOm5vd3JhcDsiPiZuYnNwOzwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij4mbmJzcDs8L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwOyI+V29ya2luZzwvdGQ+PHRkIHN0eWxlPSJ3aGl0ZS1zcGFjZTpub3dyYXA7Ij4mbmJzcDs8L3RkPjx0ZCBzdHlsZT0id2hpdGUtc3BhY2U6bm93cmFwO2Rpc3BsYXk6bm9uZTsiPiZuYnNwOzwvdGQ+PHRkIHN0eWxlPSJmb250LXNpemU6N3B0OyI+PGEgaHJlZj0iUmVwb3J0aW5nTWFuYWdlckxpc3QuYXNweD9FbXBsb3llZUlkPTE1NCZhbXA7RW1wbG95ZWVDb2RlPTI4MCZhbXA7RW1wbG95ZWVOYW1lPXZhbXNoaSZhbXA7UmVwb3J0VG89Ij5SZXBvcnRpbmcgTWFuYWdlcnM8L2E+PC90ZD48dGQgc3R5bGU9ImZvbnQtc2l6ZTo3cHQ7ZGlzcGxheTpub25lOyI+PGEgaHJlZj0iRW1wbG95ZWVGYW1haWx5RGV0YWlscy5hc3B4P0VtcGxveWVlSWQ9MTU0JmFtcDtFbXBsb3llZUNvZGU9MjgwJmFtcDtFbXBsb3llZU5hbWU9dmFtc2hpIj5WaWV3IEZhbWlseSBNZW1iZXJzPC9hPjwvdGQ+PHRkIHN0eWxlPSJmb250LXNpemU6N3B0OyI+PGEgaHJlZj0iRW1wbG95ZWVEb2N1bWVudHMuYXNweD9FbXBsb3llZUlkPTE1NCZhbXA7RW1wbG95ZWVDb2RlPTI4MCZhbXA7RW1wbG95ZWVOYW1lPXZhbXNoaSI+RW1wbG95ZWUgRG9jdW1lbnRzPC9hPjwvdGQ+PHRkIHN0eWxlPSJmb250LXNpemU6N3B0OyI+PGEgaHJlZj0iRW1wbG95ZWVCaW9EZXRhaWxzLmFzcHg/RW1wbG95ZWVJZD0xNTQmYW1wO0VtcGxveWVlQ29kZT0yODAmYW1wO0VtcGxveWVlQ29kZUluRGV2aWNlPWFiYyI+QmlvRGV0YWlsczwvYT48L3RkPjx0ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGlkPSJHcmlkX0VtcGxveWVlX2N0bDAwX2N0bDIyX0VkaXRMaW5rIiBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCk7IiBvbmNsaWNrPSJyZXR1cm4gU2hvd0VkaXRGb3JtKCYjMzk7MTU0JiMzOTssJiMzOTs5JiMzOTspOyI+PGltZyBzcmM9Ikljb25zL2VkaXQtaWNvbi5naWYiIGFsdD0iRWRpdCIgc3R5bGU9ImJvcmRlci13aWR0aDowcHg7IiAvPjwvYT4NCiAgICAgICAgICAgICAgICAgICAgPC90ZD48dGQ+PGlucHV0IHR5cGU9ImltYWdlIiBuYW1lPSJHcmlkX0VtcGxveWVlJGN0bDAwJGN0bDIyJGdiY0RlbGV0ZUNvbHVtbiIgaWQ9IkdyaWRfRW1wbG95ZWVfY3RsMDBfY3RsMjJfZ2JjRGVsZXRlQ29sdW1uIiB0aXRsZT0iRGVsZXRlIiBzcmM9IkltYWdlcy9kZWxldGVSZWNvcmRCdG4uZ2lmIiBhbHQ9IkRlbGV0ZSIgb25jbGljaz0iaWYoISRmaW5kKCYjMzk7R3JpZF9FbXBsb3llZSYjMzk7KS5jb25maXJtKCYjMzk7QXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzICBSZWNvcmQ/JiMzOTssIGV2ZW50LCAmIzM5O0RlbGV0ZSYjMzk7LCAmIzM5OzQ0MHB4JiMzOTssICYjMzk7NzVweCYjMzk7KSlyZXR1cm4gZmFsc2U7IiBzdHlsZT0iYm9yZGVyLXdpZHRoOjBweDsiIC8+PC90ZD4NCgk8L3RyPg0KCTwvdGJvZHk+DQoNCjwvdGFibGU+CTwvZGl2Pg0KPHRhYmxlIGNsYXNzPSJyZ01hc3RlclRhYmxlIHJnQ2xpcENlbGxzIHJnQ2xpcENlbGxzIiBib3JkZXI9IjAiIGlkPSJHcmlkX0VtcGxveWVlX2N0bDAwX1BhZ2VyIiBzdHlsZT0iZm9udC1zaXplOjhwdDt3aWR0aDoxMDAlO3RhYmxlLWxheW91dDpmaXhlZDtvdmVyZmxvdzpoaWRkZW47ZW1wdHktY2VsbHM6c2hvdzsiPg0KCTx0ciBjbGFzcz0icmdQYWdlciI+DQoJCTx0ZCBjb2xzcGFuPSIxNSI+PHRhYmxlIHN1bW1hcnk9IkRhdGEgcGFnZXIgd2hpY2ggY29udHJvbHMgb24gd2hpY2ggcGFnZSBpcyB0aGUgUmFkR3JpZCBjb250cm9sLiIgYm9yZGVyPSIwIiBzdHlsZT0id2lkdGg6MTAwJTtib3JkZXItc3BhY2luZzowOyI+DQoJCQk8Y2FwdGlvbj4NCgkJCQk8c3BhbiBzdHlsZT0nZGlzcGxheTogbm9uZSc+RGF0YSBwYWdlcjwvc3Bhbj4NCgkJCTwvY2FwdGlvbj48dGhlYWQ+DQoJCQkJPHRyPg0KCQkJCQk8dGggc2NvcGU9ImNvbCI+PC90aD4NCgkJCQk8L3RyPg0KCQkJPC90aGVhZD48dGJvZHk+DQoJCQkJPHRyPg0KCQkJCQk8dGQgY2xhc3M9InJnU3RhdHVzIj48ZGl2IGlkPSJHcmlkX0VtcGxveWVlX2N0bDAwX2N0bDAzX2N0bDAxX3N0YXR1c1BhbmVsIiBzdHlsZT0idmlzaWJpbGl0eTpoaWRkZW47Ij4NCgkJCQkJCSZuYnNwOw0KCQkJCQk8L2Rpdj48L3RkPjx0ZCBjbGFzcz0icmdQYWdlckNlbGwgTmV4dFByZXZBbmROdW1lcmljIj48ZGl2IGNsYXNzPSJyZ1dyYXAgcmdBcnJQYXJ0MSI+DQoJCQkJCQk8aW5wdXQgdHlwZT0iYnV0dG9uIiBuYW1lPSJHcmlkX0VtcGxveWVlJGN0bDAwJGN0bDAzJGN0bDAxJGN0bDAyIiB2YWx1ZT0iICIgb25jbGljaz0icmV0dXJuIGZhbHNlO19fZG9Qb3N0QmFjaygmIzM5O0dyaWRfRW1wbG95ZWUkY3RsMDAkY3RsMDMkY3RsMDEkY3RsMDImIzM5OywmIzM5OyYjMzk7KSIgdGl0bGU9IkZpcnN0IFBhZ2UiIGNsYXNzPSJyZ1BhZ2VGaXJzdCIgLz4gPGlucHV0IHR5cGU9ImJ1dHRvbiIgbmFtZT0iR3JpZF9FbXBsb3llZSRjdGwwMCRjdGwwMyRjdGwwMSRjdGwwMyIgdmFsdWU9IiAiIG9uY2xpY2s9InJldHVybiBmYWxzZTtfX2RvUG9zdEJhY2soJiMzOTtHcmlkX0VtcGxveWVlJGN0bDAwJGN0bDAzJGN0bDAxJGN0bDAzJiMzOTssJiMzOTsmIzM5OykiIHRpdGxlPSJQcmV2aW91cyBQYWdlIiBjbGFzcz0icmdQYWdlUHJldiIgLz4NCgkJCQkJPC9kaXY+PGRpdiBjbGFzcz0icmdXcmFwIHJnTnVtUGFydCI+DQoJCQkJCQk8YSBvbmNsaWNrPSJyZXR1cm4gZmFsc2U7IiBjbGFzcz0icmdDdXJyZW50UGFnZSIgaHJlZj0iamF2YXNjcmlwdDpfX2RvUG9zdEJhY2soJiMzOTtHcmlkX0VtcGxveWVlJGN0bDAwJGN0bDAzJGN0bDAxJGN0bDA1JiMzOTssJiMzOTsmIzM5OykiPjxzcGFuPjE8L3NwYW4+PC9hPjxhIGhyZWY9ImphdmFzY3JpcHQ6X19kb1Bvc3RCYWNrKCYjMzk7R3JpZF9FbXBsb3llZSRjdGwwMCRjdGwwMyRjdGwwMSRjdGwwNyYjMzk7LCYjMzk7JiMzOTspIj48c3Bhbj4yPC9zcGFuPjwvYT48YSBocmVmPSJqYXZhc2NyaXB0Ol9fZG9Qb3N0QmFjaygmIzM5O0dyaWRfRW1wbG95ZWUkY3RsMDAkY3RsMDMkY3RsMDEkY3RsMDkmIzM5OywmIzM5OyYjMzk7KSI+PHNwYW4+Mzwvc3Bhbj48L2E+PGEgaHJlZj0iamF2YXNjcmlwdDpfX2RvUG9zdEJhY2soJiMzOTtHcmlkX0VtcGxveWVlJGN0bDAwJGN0bDAzJGN0bDAxJGN0bDExJiMzOTssJiMzOTsmIzM5OykiPjxzcGFuPjQ8L3NwYW4+PC9hPjxhIGhyZWY9ImphdmFzY3JpcHQ6X19kb1Bvc3RCYWNrKCYjMzk7R3JpZF9FbXBsb3llZSRjdGwwMCRjdGwwMyRjdGwwMSRjdGwxMyYjMzk7LCYjMzk7JiMzOTspIj48c3Bhbj41PC9zcGFuPjwvYT48YSBocmVmPSJqYXZhc2NyaXB0Ol9fZG9Qb3N0QmFjaygmIzM5O0dyaWRfRW1wbG95ZWUkY3RsMDAkY3RsMDMkY3RsMDEkY3RsMTUmIzM5OywmIzM5OyYjMzk7KSI+PHNwYW4+Njwvc3Bhbj48L2E+PGEgaHJlZj0iamF2YXNjcmlwdDpfX2RvUG9zdEJhY2soJiMzOTtHcmlkX0VtcGxveWVlJGN0bDAwJGN0bDAzJGN0bDAxJGN0bDE3JiMzOTssJiMzOTsmIzM5OykiPjxzcGFuPjc8L3NwYW4+PC9hPjxhIGhyZWY9ImphdmFzY3JpcHQ6X19kb1Bvc3RCYWNrKCYjMzk7R3JpZF9FbXBsb3llZSRjdGwwMCRjdGwwMyRjdGwwMSRjdGwxOSYjMzk7LCYjMzk7JiMzOTspIj48c3Bhbj44PC9zcGFuPjwvYT48YSBocmVmPSJqYXZhc2NyaXB0Ol9fZG9Qb3N0QmFjaygmIzM5O0dyaWRfRW1wbG95ZWUkY3RsMDAkY3RsMDMkY3RsMDEkY3RsMjEmIzM5OywmIzM5OyYjMzk7KSI+PHNwYW4+OTwvc3Bhbj48L2E+PGEgaHJlZj0iamF2YXNjcmlwdDpfX2RvUG9zdEJhY2soJiMzOTtHcmlkX0VtcGxveWVlJGN0bDAwJGN0bDAzJGN0bDAxJGN0bDIzJiMzOTssJiMzOTsmIzM5OykiPjxzcGFuPjEwPC9zcGFuPjwvYT48YSB0aXRsZT0iTmV4dCBQYWdlcyIgaHJlZj0iamF2YXNjcmlwdDpfX2RvUG9zdEJhY2soJiMzOTtHcmlkX0VtcGxveWVlJGN0bDAwJGN0bDAzJGN0bDAxJGN0bDI1JiMzOTssJiMzOTsmIzM5OykiPjxzcGFuPi4uLjwvc3Bhbj48L2E+DQoJCQkJCTwvZGl2PjxkaXYgY2xhc3M9InJnV3JhcCByZ0FyclBhcnQyIj4NCgkJCQkJCTxpbnB1dCB0eXBlPSJidXR0b24iIG5hbWU9IkdyaWRfRW1wbG95ZWUkY3RsMDAkY3RsMDMkY3RsMDEkY3RsMjgiIHZhbHVlPSIgIiBvbmNsaWNrPSJqYXZhc2NyaXB0Ol9fZG9Qb3N0QmFjaygmIzM5O0dyaWRfRW1wbG95ZWUkY3RsMDAkY3RsMDMkY3RsMDEkY3RsMjgmIzM5OywmIzM5OyYjMzk7KSIgdGl0bGU9Ik5leHQgUGFnZSIgY2xhc3M9InJnUGFnZU5leHQiIC8+IDxpbnB1dCB0eXBlPSJidXR0b24iIG5hbWU9IkdyaWRfRW1wbG95ZWUkY3RsMDAkY3RsMDMkY3RsMDEkY3RsMjkiIHZhbHVlPSIgIiBvbmNsaWNrPSJqYXZhc2NyaXB0Ol9fZG9Qb3N0QmFjaygmIzM5O0dyaWRfRW1wbG95ZWUkY3RsMDAkY3RsMDMkY3RsMDEkY3RsMjkmIzM5OywmIzM5OyYjMzk7KSIgdGl0bGU9Ikxhc3QgUGFnZSIgY2xhc3M9InJnUGFnZUxhc3QiIC8+DQoJCQkJCTwvZGl2PjxkaXYgY2xhc3M9InJnV3JhcCByZ0FkdlBhcnQiPg0KCQkJCQkJPHNwYW4gaWQ9IkdyaWRfRW1wbG95ZWVfY3RsMDBfY3RsMDNfY3RsMDFfQ2hhbmdlUGFnZVNpemVMYWJlbCIgY2xhc3M9InJnUGFnZXJMYWJlbCI+UGFnZSBzaXplOjwvc3Bhbj48ZGl2IGlkPSJHcmlkX0VtcGxveWVlX2N0bDAwX2N0bDAzX2N0bDAxX1BhZ2VTaXplQ29tYm9Cb3giIGNsYXNzPSJSYWRDb21ib0JveCBSYWRDb21ib0JveF9PZmZpY2UyMDA3IiBzdHlsZT0id2lkdGg6NDZweDt3aGl0ZS1zcGFjZTpub3JtYWw7Ij4NCgkJCQkJCQk8dGFibGUgc3VtbWFyeT0iY29tYm9ib3giIHN0eWxlPSJib3JkZXItd2lkdGg6MDtib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7d2lkdGg6MTAwJSI+DQoJCQkJCQkJCTx0ciBjbGFzcz0icmNiUmVhZE9ubHkiPg0KCQkJCQkJCQkJPHRkIHN0eWxlPSJ3aWR0aDoxMDAlOyIgY2xhc3M9InJjYklucHV0Q2VsbCByY2JJbnB1dENlbGxMZWZ0Ij48aW5wdXQgbmFtZT0iR3JpZF9FbXBsb3llZSRjdGwwMCRjdGwwMyRjdGwwMSRQYWdlU2l6ZUNvbWJvQm94IiB0eXBlPSJ0ZXh0IiBjbGFzcz0icmNiSW5wdXQgcmFkUHJldmVudERlY29yYXRlIiBpZD0iR3JpZF9FbXBsb3llZV9jdGwwMF9jdGwwM19jdGwwMV9QYWdlU2l6ZUNvbWJvQm94X0lucHV0IiB2YWx1ZT0iMTAiIHJlYWRvbmx5PSJyZWFkb25seSIgLz48L3RkPg0KCQkJCQkJCQkJPHRkIGNsYXNzPSJyY2JBcnJvd0NlbGwgcmNiQXJyb3dDZWxsUmlnaHQiPjxhIGlkPSJHcmlkX0VtcGxveWVlX2N0bDAwX2N0bDAzX2N0bDAxX1BhZ2VTaXplQ29tYm9Cb3hfQXJyb3ciIHN0eWxlPSJvdmVyZmxvdzogaGlkZGVuO2Rpc3BsYXk6IGJsb2NrO3Bvc2l0aW9uOiByZWxhdGl2ZTtvdXRsaW5lOiBub25lOyI+c2VsZWN0PC9hPjwvdGQ+DQoJCQkJCQkJCTwvdHI+DQoJCQkJCQkJPC90YWJsZT4NCgkJCQkJCQk8ZGl2IGNsYXNzPSJyY2JTbGlkZSIgc3R5bGU9InotaW5kZXg6NjAwMDsiPjxkaXYgaWQ9IkdyaWRfRW1wbG95ZWVfY3RsMDBfY3RsMDNfY3RsMDFfUGFnZVNpemVDb21ib0JveF9Ecm9wRG93biIgY2xhc3M9IlJhZENvbWJvQm94RHJvcERvd24gUmFkQ29tYm9Cb3hEcm9wRG93bl9PZmZpY2UyMDA3ICIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPjxkaXYgY2xhc3M9InJjYlNjcm9sbCByY2JXaWR0aCIgc3R5bGU9IndpZHRoOjEwMCU7Ij48dWwgY2xhc3M9InJjYkxpc3QiIHN0eWxlPSJsaXN0LXN0eWxlOm5vbmU7bWFyZ2luOjA7cGFkZGluZzowO3pvb206MTsiPjxsaSBjbGFzcz0icmNiSXRlbSAiPjEwPC9saT48bGkgY2xhc3M9InJjYkl0ZW0gIj41MDwvbGk+PGxpIGNsYXNzPSJyY2JJdGVtICI+MTAwPC9saT48bGkgY2xhc3M9InJjYkl0ZW0gIj41MDA8L2xpPjxsaSBjbGFzcz0icmNiSXRlbSAiPjMwMDA8L2xpPjwvdWw+PC9kaXY+PC9kaXY+PC9kaXY+PGlucHV0IGlkPSJHcmlkX0VtcGxveWVlX2N0bDAwX2N0bDAzX2N0bDAxX1BhZ2VTaXplQ29tYm9Cb3hfQ2xpZW50U3RhdGUiIG5hbWU9IkdyaWRfRW1wbG95ZWVfY3RsMDBfY3RsMDNfY3RsMDFfUGFnZVNpemVDb21ib0JveF9DbGllbnRTdGF0ZSIgdHlwZT0iaGlkZGVuIiAvPg0KCQkJCQkJPC9kaXY+DQoJCQkJCTwvZGl2PjxkaXYgY2xhc3M9InJnV3JhcCByZ0luZm9QYXJ0Ij4NCgkJCQkJCSAmbmJzcDs8c3Ryb25nPjEzMzwvc3Ryb25nPiBpdGVtcyBpbiA8c3Ryb25nPjE0PC9zdHJvbmc+IHBhZ2VzDQoJCQkJCTwvZGl2PjwvdGQ+DQoJCQkJPC90cj4NCgkJCTwvdGJvZHk+DQoJCTwvdGFibGU+PC90ZD4NCgk8L3RyPg0KDQo8L3RhYmxlPjxkaXYgaWQ9IkdyaWRfRW1wbG95ZWVfcmZsdE1lbnUiPg0KCTxkaXYgY2xhc3M9IlJhZE1lbnUgUmFkTWVudV9PZmZpY2UyMDA3IFJhZE1lbnVfQ29udGV4dCBSYWRNZW51X09mZmljZTIwMDdfQ29udGV4dCAgICAiPg0KCQk8dWwgY2xhc3M9InJtQWN0aXZlIHJtVmVydGljYWwgcm1Hcm91cCBybUxldmVsMSI+DQoJCQk8bGkgY2xhc3M9InJtSXRlbSBybUZpcnN0Ij48YSBocmVmPSIjIiBjbGFzcz0icm1MaW5rIj48c3BhbiBjbGFzcz0icm1UZXh0Ij5Ob0ZpbHRlcjwvc3Bhbj48L2E+PC9saT48bGkgY2xhc3M9InJtSXRlbSAiPjxhIGhyZWY9IiMiIGNsYXNzPSJybUxpbmsiPjxzcGFuIGNsYXNzPSJybVRleHQiPkNvbnRhaW5zPC9zcGFuPjwvYT48L2xpPjxsaSBjbGFzcz0icm1JdGVtICI+PGEgaHJlZj0iIyIgY2xhc3M9InJtTGluayI+PHNwYW4gY2xhc3M9InJtVGV4dCI+RG9lc05vdENvbnRhaW48L3NwYW4+PC9hPjwvbGk+PGxpIGNsYXNzPSJybUl0ZW0gIj48YSBocmVmPSIjIiBjbGFzcz0icm1MaW5rIj48c3BhbiBjbGFzcz0icm1UZXh0Ij5TdGFydHNXaXRoPC9zcGFuPjwvYT48L2xpPjxsaSBjbGFzcz0icm1JdGVtICI+PGEgaHJlZj0iIyIgY2xhc3M9InJtTGluayI+PHNwYW4gY2xhc3M9InJtVGV4dCI+RW5kc1dpdGg8L3NwYW4+PC9hPjwvbGk+PGxpIGNsYXNzPSJybUl0ZW0gIj48YSBocmVmPSIjIiBjbGFzcz0icm1MaW5rIj48c3BhbiBjbGFzcz0icm1UZXh0Ij5FcXVhbFRvPC9zcGFuPjwvYT48L2xpPjxsaSBjbGFzcz0icm1JdGVtICI+PGEgaHJlZj0iIyIgY2xhc3M9InJtTGluayI+PHNwYW4gY2xhc3M9InJtVGV4dCI+Tm90RXF1YWxUbzwvc3Bhbj48L2E+PC9saT48bGkgY2xhc3M9InJtSXRlbSAiPjxhIGhyZWY9IiMiIGNsYXNzPSJybUxpbmsiPjxzcGFuIGNsYXNzPSJybVRleHQiPkdyZWF0ZXJUaGFuPC9zcGFuPjwvYT48L2xpPjxsaSBjbGFzcz0icm1JdGVtICI+PGEgaHJlZj0iIyIgY2xhc3M9InJtTGluayI+PHNwYW4gY2xhc3M9InJtVGV4dCI+TGVzc1RoYW48L3NwYW4+PC9hPjwvbGk+PGxpIGNsYXNzPSJybUl0ZW0gIj48YSBocmVmPSIjIiBjbGFzcz0icm1MaW5rIj48c3BhbiBjbGFzcz0icm1UZXh0Ij5HcmVhdGVyVGhhbk9yRXF1YWxUbzwvc3Bhbj48L2E+PC9saT48bGkgY2xhc3M9InJtSXRlbSAiPjxhIGhyZWY9IiMiIGNsYXNzPSJybUxpbmsiPjxzcGFuIGNsYXNzPSJybVRleHQiPkxlc3NUaGFuT3JFcXVhbFRvPC9zcGFuPjwvYT48L2xpPjxsaSBjbGFzcz0icm1JdGVtICI+PGEgaHJlZj0iIyIgY2xhc3M9InJtTGluayI+PHNwYW4gY2xhc3M9InJtVGV4dCI+QmV0d2Vlbjwvc3Bhbj48L2E+PC9saT48bGkgY2xhc3M9InJtSXRlbSAiPjxhIGhyZWY9IiMiIGNsYXNzPSJybUxpbmsiPjxzcGFuIGNsYXNzPSJybVRleHQiPk5vdEJldHdlZW48L3NwYW4+PC9hPjwvbGk+PGxpIGNsYXNzPSJybUl0ZW0gIj48YSBocmVmPSIjIiBjbGFzcz0icm1MaW5rIj48c3BhbiBjbGFzcz0icm1UZXh0Ij5Jc0VtcHR5PC9zcGFuPjwvYT48L2xpPjxsaSBjbGFzcz0icm1JdGVtICI+PGEgaHJlZj0iIyIgY2xhc3M9InJtTGluayI+PHNwYW4gY2xhc3M9InJtVGV4dCI+Tm90SXNFbXB0eTwvc3Bhbj48L2E+PC9saT48bGkgY2xhc3M9InJtSXRlbSAiPjxhIGhyZWY9IiMiIGNsYXNzPSJybUxpbmsiPjxzcGFuIGNsYXNzPSJybVRleHQiPklzTnVsbDwvc3Bhbj48L2E+PC9saT48bGkgY2xhc3M9InJtSXRlbSAiPjxhIGhyZWY9IiMiIGNsYXNzPSJybUxpbmsiPjxzcGFuIGNsYXNzPSJybVRleHQiPk5vdElzTnVsbDwvc3Bhbj48L2E+PC9saT48bGkgY2xhc3M9InJtSXRlbSBybUxhc3QiPjxhIGhyZWY9IiMiIGNsYXNzPSJybUxpbmsiPjxzcGFuIGNsYXNzPSJybVRleHQiPkN1c3RvbTwvc3Bhbj48L2E+PC9saT4NCgkJPC91bD4NCgk8L2Rpdj48aW5wdXQgaWQ9IkdyaWRfRW1wbG95ZWVfcmZsdE1lbnVfQ2xpZW50U3RhdGUiIG5hbWU9IkdyaWRfRW1wbG95ZWVfcmZsdE1lbnVfQ2xpZW50U3RhdGUiIHR5cGU9ImhpZGRlbiIgLz4NCjwvZGl2PjxpbnB1dCBpZD0iR3JpZF9FbXBsb3llZV9DbGllbnRTdGF0ZSIgbmFtZT0iR3JpZF9FbXBsb3llZV9DbGllbnRTdGF0ZSIgdHlwZT0iaGlkZGVuIiAvPg0KCQk8L2Rpdj4NCg0KPC9kaXY+DQogICAgICAgICAgICAgICAgPGRpdiBpZD0iUmFkTWVudTEiPg0KCTxkaXYgY2xhc3M9IlJhZE1lbnUgUmFkTWVudV9PZmZpY2UyMDA3IFJhZE1lbnVfQ29udGV4dCBSYWRNZW51X09mZmljZTIwMDdfQ29udGV4dCBybVJvdW5kZWRDb3JuZXJzIHJtUm91bmRlZENvcm5lcnNfT2ZmaWNlMjAwNyBybVNoYWRvd3MgIj4NCgkJPHVsIGNsYXNzPSJybUFjdGl2ZSBybVZlcnRpY2FsIHJtR3JvdXAgcm1MZXZlbDEiPg0KCQkJPGxpIGNsYXNzPSJybUl0ZW0gcm1GaXJzdCI+PGEgaHJlZj0iIyIgY2xhc3M9InJtTGluayI+PHNwYW4gY2xhc3M9InJtVGV4dCI+VXBkYXRlIENvbXBhbnk8L3NwYW4+PC9hPjwvbGk+PGxpIGNsYXNzPSJybUl0ZW0gIj48YSBocmVmPSIjIiBjbGFzcz0icm1MaW5rIj48c3BhbiBjbGFzcz0icm1UZXh0Ij5VcGRhdGUgRGVwYXJ0bWVudDwvc3Bhbj48L2E+PC9saT48bGkgY2xhc3M9InJtSXRlbSAiPjxhIGhyZWY9IiMiIGNsYXNzPSJybUxpbmsiPjxzcGFuIGNsYXNzPSJybVRleHQiPlVwZGF0ZSBTaGlmdFJvc3Rlcjwvc3Bhbj48L2E+PC9saT48bGkgY2xhc3M9InJtSXRlbSAiPjxhIGhyZWY9IiMiIGNsYXNzPSJybUxpbmsiPjxzcGFuIGNsYXNzPSJybVRleHQiPlVwZGF0ZSBDYXRlZ29yeTwvc3Bhbj48L2E+PC9saT48bGkgY2xhc3M9InJtSXRlbSAiPjxhIGhyZWY9IiMiIGNsYXNzPSJybUxpbmsiPjxzcGFuIGNsYXNzPSJybVRleHQiPlVwZGF0ZSBEZXNpZ25hdGlvbjwvc3Bhbj48L2E+PC9saT48bGkgY2xhc3M9InJtSXRlbSAiPjxhIGhyZWY9IiMiIGNsYXNzPSJybUxpbmsiPjxzcGFuIGNsYXNzPSJybVRleHQiPlVwZGF0ZSBTdGF0dXM8L3NwYW4+PC9hPjwvbGk+PGxpIGNsYXNzPSJybUl0ZW0gIj48YSBocmVmPSIjIiBjbGFzcz0icm1MaW5rIj48c3BhbiBjbGFzcz0icm1UZXh0Ij5VcGRhdGUgRW1wbG95bWVudCBUeXBlPC9zcGFuPjwvYT48L2xpPjxsaSBjbGFzcz0icm1JdGVtICI+PGEgaHJlZj0iIyIgY2xhc3M9InJtTGluayI+PHNwYW4gY2xhc3M9InJtVGV4dCI+VXBkYXRlIEdyYWRlPC9zcGFuPjwvYT48L2xpPjxsaSBjbGFzcz0icm1JdGVtICI+PGEgaHJlZj0iIyIgY2xhc3M9InJtTGluayI+PHNwYW4gY2xhc3M9InJtVGV4dCI+VXBkYXRlIFRlYW08L3NwYW4+PC9hPjwvbGk+PGxpIGNsYXNzPSJybUl0ZW0gIj48YSBocmVmPSIjIiBjbGFzcz0icm1MaW5rIj48c3BhbiBjbGFzcz0icm1UZXh0Ij5VcGRhdGUgU2hpZnQgVHlwZTwvc3Bhbj48L2E+PC9saT48bGkgY2xhc3M9InJtSXRlbSAiPjxhIGhyZWY9IiMiIGNsYXNzPSJybUxpbmsiPjxzcGFuIGNsYXNzPSJybVRleHQiPlVwZGF0ZSBTaGlmdCBHcm91cDwvc3Bhbj48L2E+PC9saT48bGkgY2xhc3M9InJtSXRlbSAiPjxhIGhyZWY9IiMiIGNsYXNzPSJybUxpbmsiPjxzcGFuIGNsYXNzPSJybVRleHQiPlVwZGF0ZSBNdWx0aSBTaGlmdCBHcm91cDwvc3Bhbj48L2E+PC9saT48bGkgY2xhc3M9InJtSXRlbSAiPjxhIGhyZWY9IiMiIGNsYXNzPSJybUxpbmsiPjxzcGFuIGNsYXNzPSJybVRleHQiPlVwZGF0ZSBIb2xpZGF5IEdyb3VwPC9zcGFuPjwvYT48L2xpPjxsaSBjbGFzcz0icm1JdGVtIHJtTGFzdCI+PGEgaHJlZj0iIyIgY2xhc3M9InJtTGluayI+PHNwYW4gY2xhc3M9InJtVGV4dCI+VmlldyBFbXBsb3llZSBIaXN0b3J5PC9zcGFuPjwvYT48L2xpPg0KCQk8L3VsPg0KCTwvZGl2PjxpbnB1dCBpZD0iUmFkTWVudTFfQ2xpZW50U3RhdGUiIG5hbWU9IlJhZE1lbnUxX0NsaWVudFN0YXRlIiB0eXBlPSJoaWRkZW4iIC8+DQo8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJXbmRfRW1wbG95ZWVTZXRPcHRpb24iIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij4NCgk8ZGl2IGlkPSJXbmRfRW1wbG95ZWVTZXRPcHRpb25fQyI+DQoJCQ0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0iV25kX0VtcGxveWVlU2V0T3B0aW9uX0NfVXBkYXRlUGFuZWwyIj4NCgkJCQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGFibGU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0iV25kX0VtcGxveWVlU2V0T3B0aW9uX0NfbGJsX09wdGlvbnMxIj5MYWJlbDwvc3Bhbj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBuYW1lPSJXbmRfRW1wbG95ZWVTZXRPcHRpb24kQyRkcnBfU2V0T3B0aW9ucyIgaWQ9IlduZF9FbXBsb3llZVNldE9wdGlvbl9DX2RycF9TZXRPcHRpb25zIiBzdHlsZT0id2lkdGg6MjAwcHg7Ij4NCg0KCQkJPC9zZWxlY3Q+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNvbHNwYW49IjIiIGFsaWduPSJyaWdodCI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGlkPSJXbmRfRW1wbG95ZWVTZXRPcHRpb25fQ19idG5fQ2hhbmdlVmFsdWUiIGNsYXNzPSJSYWRCdXR0b24gUmFkQnV0dG9uX09mZmljZTIwMDcgcmJTa2lubmVkQnV0dG9uIiBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCkiPjxzcGFuIGNsYXNzPSJyYlByaW1hcnlJY29uIHJiT2siPjwvc3Bhbj48aW5wdXQgY2xhc3M9InJiRGVjb3JhdGVkIHJiUHJpbWFyeSIgdHlwZT0ic3VibWl0IiBuYW1lPSJXbmRfRW1wbG95ZWVTZXRPcHRpb24kQyRidG5fQ2hhbmdlVmFsdWVfaW5wdXQiIGlkPSJXbmRfRW1wbG95ZWVTZXRPcHRpb25fQ19idG5fQ2hhbmdlVmFsdWVfaW5wdXQiIHZhbHVlPSJTYXZlIiAvPjxpbnB1dCBpZD0iV25kX0VtcGxveWVlU2V0T3B0aW9uX0NfYnRuX0NoYW5nZVZhbHVlX0NsaWVudFN0YXRlIiBuYW1lPSJXbmRfRW1wbG95ZWVTZXRPcHRpb25fQ19idG5fQ2hhbmdlVmFsdWVfQ2xpZW50U3RhdGUiIHR5cGU9ImhpZGRlbiIgLz48L2E+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9IlduZF9FbXBsb3llZVNldE9wdGlvbiRDJGhkbl9BY3Rpb25OYW1lIiBpZD0iV25kX0VtcGxveWVlU2V0T3B0aW9uX0NfaGRuX0FjdGlvbk5hbWUiIC8+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgDQoJCTwvZGl2Pg0KICAgICAgICAgICAgICAgICAgICANCgk8L2Rpdj48aW5wdXQgaWQ9IlduZF9FbXBsb3llZVNldE9wdGlvbl9DbGllbnRTdGF0ZSIgbmFtZT0iV25kX0VtcGxveWVlU2V0T3B0aW9uX0NsaWVudFN0YXRlIiB0eXBlPSJoaWRkZW4iIC8+DQo8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJXbmRfRW1wbG95ZWVTZXRPcHRpb24yIiBzdHlsZT0iZGlzcGxheTpub25lOyI+DQoJPGRpdiBpZD0iV25kX0VtcGxveWVlU2V0T3B0aW9uMl9DIj4NCgkJDQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJXbmRfRW1wbG95ZWVTZXRPcHRpb24yX0NfVXBkYXRlUGFuZWwxIj4NCgkJCQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGFibGU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0iV25kX0VtcGxveWVlU2V0T3B0aW9uMl9DX2xibF9PcHRpb25zMiI+TGFiZWw8L3NwYW4+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9IlduZF9FbXBsb3llZVNldE9wdGlvbjJfQ19kcnBfU2V0T3B0aW9uczIiIGNsYXNzPSJSYWRDb21ib0JveCBSYWRDb21ib0JveF9PZmZpY2UyMDA3IiBzdHlsZT0id2lkdGg6MjAwcHg7d2hpdGUtc3BhY2U6bm9ybWFsOyI+DQoJCQkJPHRhYmxlIHN1bW1hcnk9ImNvbWJvYm94IiBzdHlsZT0iYm9yZGVyLXdpZHRoOjA7Ym9yZGVyLWNvbGxhcHNlOmNvbGxhcHNlO3dpZHRoOjEwMCUiPg0KCQkJCQk8dHI+DQoJCQkJCQk8dGQgc3R5bGU9IndpZHRoOjEwMCU7IiBjbGFzcz0icmNiSW5wdXRDZWxsIHJjYklucHV0Q2VsbExlZnQiPjxpbnB1dCBuYW1lPSJXbmRfRW1wbG95ZWVTZXRPcHRpb24yJEMkZHJwX1NldE9wdGlvbnMyIiB0eXBlPSJ0ZXh0IiBjbGFzcz0icmNiSW5wdXQgcmFkUHJldmVudERlY29yYXRlIiBpZD0iV25kX0VtcGxveWVlU2V0T3B0aW9uMl9DX2RycF9TZXRPcHRpb25zMl9JbnB1dCIgdmFsdWU9IiIgLz48L3RkPg0KCQkJCQkJPHRkIGNsYXNzPSJyY2JBcnJvd0NlbGwgcmNiQXJyb3dDZWxsUmlnaHQiPjxhIGlkPSJXbmRfRW1wbG95ZWVTZXRPcHRpb24yX0NfZHJwX1NldE9wdGlvbnMyX0Fycm93IiBzdHlsZT0ib3ZlcmZsb3c6IGhpZGRlbjtkaXNwbGF5OiBibG9jaztwb3NpdGlvbjogcmVsYXRpdmU7b3V0bGluZTogbm9uZTsiPnNlbGVjdDwvYT48L3RkPg0KCQkJCQk8L3RyPg0KCQkJCTwvdGFibGU+DQoJCQkJPGRpdiBjbGFzcz0icmNiU2xpZGUiIHN0eWxlPSJ6LWluZGV4OjYwMDA7Ij48ZGl2IGlkPSJXbmRfRW1wbG95ZWVTZXRPcHRpb24yX0NfZHJwX1NldE9wdGlvbnMyX0Ryb3BEb3duIiBjbGFzcz0iUmFkQ29tYm9Cb3hEcm9wRG93biBSYWRDb21ib0JveERyb3BEb3duX09mZmljZTIwMDcgIiBzdHlsZT0iZGlzcGxheTpub25lOyI+PGRpdiBjbGFzcz0icmNiU2Nyb2xsIHJjYldpZHRoIiBzdHlsZT0id2lkdGg6MTAwJTsiPjwvZGl2PjwvZGl2PjwvZGl2PjxpbnB1dCBpZD0iV25kX0VtcGxveWVlU2V0T3B0aW9uMl9DX2RycF9TZXRPcHRpb25zMl9DbGllbnRTdGF0ZSIgbmFtZT0iV25kX0VtcGxveWVlU2V0T3B0aW9uMl9DX2RycF9TZXRPcHRpb25zMl9DbGllbnRTdGF0ZSIgdHlwZT0iaGlkZGVuIiAvPg0KCQkJPC9kaXY+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNvbHNwYW49IjIiIGFsaWduPSJyaWdodCI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGlkPSJXbmRfRW1wbG95ZWVTZXRPcHRpb24yX0NfUmFkQnV0dG9uMSIgY2xhc3M9IlJhZEJ1dHRvbiBSYWRCdXR0b25fT2ZmaWNlMjAwNyByYlNraW5uZWRCdXR0b24iIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSI+PHNwYW4gY2xhc3M9InJiUHJpbWFyeUljb24gcmJPayI+PC9zcGFuPjxpbnB1dCBjbGFzcz0icmJEZWNvcmF0ZWQgcmJQcmltYXJ5IiB0eXBlPSJzdWJtaXQiIG5hbWU9IlduZF9FbXBsb3llZVNldE9wdGlvbjIkQyRSYWRCdXR0b24xX2lucHV0IiBpZD0iV25kX0VtcGxveWVlU2V0T3B0aW9uMl9DX1JhZEJ1dHRvbjFfaW5wdXQiIHZhbHVlPSJTYXZlIiAvPjxpbnB1dCBpZD0iV25kX0VtcGxveWVlU2V0T3B0aW9uMl9DX1JhZEJ1dHRvbjFfQ2xpZW50U3RhdGUiIG5hbWU9IlduZF9FbXBsb3llZVNldE9wdGlvbjJfQ19SYWRCdXR0b24xX0NsaWVudFN0YXRlIiB0eXBlPSJoaWRkZW4iIC8+PC9hPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RhYmxlPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KCQk8L2Rpdj4NCiAgICAgICAgICAgICAgICAgICAgDQoJPC9kaXY+PGlucHV0IGlkPSJXbmRfRW1wbG95ZWVTZXRPcHRpb24yX0NsaWVudFN0YXRlIiBuYW1lPSJXbmRfRW1wbG95ZWVTZXRPcHRpb24yX0NsaWVudFN0YXRlIiB0eXBlPSJoaWRkZW4iIC8+DQo8L2Rpdj4NCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJJbXBvcnRFbXBsb3llZURldGFpbHMiIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij4NCgk8ZGl2IGlkPSJJbXBvcnRFbXBsb3llZURldGFpbHNfQyI+DQoNCgk8L2Rpdj48aW5wdXQgaWQ9IkltcG9ydEVtcGxveWVlRGV0YWlsc19DbGllbnRTdGF0ZSIgbmFtZT0iSW1wb3J0RW1wbG95ZWVEZXRhaWxzX0NsaWVudFN0YXRlIiB0eXBlPSJoaWRkZW4iIC8+DQo8L2Rpdj4NCiAgICAgICAgICAgIDwvdGQ+DQogICAgICAgIDwvdHI+DQogICAgPC90YWJsZT4NCiAgICANCiAgICAgICAgPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPg0KICAgICAgICAgICAgZnVuY3Rpb24gU2hvd0ltcG9ydEVtcGxveWVlRGV0YWlsc0Zvcm0oKSB7DQogICAgICAgICAgICAgICAgd2luZG93LnJhZG9wZW4oJ0ltcG9ydEVtcGxveWVlRGV0YWlscy5hc3B4P0FjdGlvbk5hbWU9SW1wb3J0RW1wbG95ZWVEZXRhaWxzJywgJ0ltcG9ydEVtcGxveWVlRGV0YWlscycpLnNldFNpemUoNjAwLCAyODApOw0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZ1bmN0aW9uIFNob3dJbXBvcnRFbXBsb3llZU90aGVyRGV0YWlsc0Zvcm0oKSB7DQogICAgICAgICAgICAgICAgd2luZG93LnJhZG9wZW4oJ0ltcG9ydEVtcGxveWVlRGV0YWlscy5hc3B4P0FjdGlvbk5hbWU9SW1wb3J0RW1wbG95ZWVPdGhlckRldGFpbHMnLCAnSW1wb3J0RW1wbG95ZWVEZXRhaWxzJykuc2V0U2l6ZSg2MDAsIDI4MCk7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBmdW5jdGlvbiBTaG93RXhwb3J0RW1wbG95ZWVEZXRhaWxzRm9ybSgpIHsNCiAgICAgICAgICAgICAgICB3aW5kb3cucmFkb3BlbignRXhwb3J0RW1wbG95ZWVEZXRhaWxzLmFzcHg/QWN0aW9uTmFtZT1FeHBvcnRFbXBsb3llZURldGFpbHMnLCAnJykuc2V0U2l6ZSg2MDAsIDI4MCk7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBmdW5jdGlvbiBTaG93RXhwb3J0RW1wbG95ZWVPdGhlckRldGFpbHNGb3JtKCkgew0KICAgICAgICAgICAgICAgIHdpbmRvdy5yYWRvcGVuKCdFeHBvcnRFbXBsb3llZURldGFpbHMuYXNweD9BY3Rpb25OYW1lPUV4cG9ydEVtcGxveWVlT3RoZXJEZXRhaWxzJywgJycpLnNldFNpemUoNjAwLCAyODApOw0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgZnVuY3Rpb24gU2hvd0VkaXRGb3JtKGlkLCByb3dJbmRleCkgew0KICAgICAgICAgICAgICAgIHZhciBncmlkID0gJGZpbmQoIkdyaWRfRW1wbG95ZWUiKTsNCg0KICAgICAgICAgICAgICAgIHZhciByb3dDb250cm9sID0gZ3JpZC5nZXRfbWFzdGVyVGFibGVWaWV3KCkuZ2V0X2RhdGFJdGVtcygpW3Jvd0luZGV4XS5nZXRfZWxlbWVudCgpOw0KICAgICAgICAgICAgICAgIGdyaWQuZ2V0X21hc3RlclRhYmxlVmlldygpLnNlbGVjdEl0ZW0ocm93Q29udHJvbCwgdHJ1ZSk7DQoNCiAgICAgICAgICAgICAgICB3aW5kb3cucmFkb3BlbigiRWRpdEVtcGxveWVlRGV0YWlscy5hc3B4P0VtcGxveWVlSWQ9IiArIGlkLCAiVXNlckxpc3REaWFsb2ciKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBmdW5jdGlvbiBTaG93SW5zZXJ0Rm9ybSgpIHsNCiAgICAgICAgICAgICAgICB3aW5kb3cucmFkb3BlbigiRWRpdEVtcGxveWVlRGV0YWlscy5hc3B4P0VtcGxveWVlSWQ9MCIsICJVc2VyTGlzdERpYWxvZyIpOw0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZ1bmN0aW9uIHJlZnJlc2hHcmlkKCkgew0KICAgICAgICAgICAgICAgICRmaW5kKCJHcmlkX0VtcGxveWVlIikuZ2V0X21hc3RlclRhYmxlVmlldygpLnJlYmluZCgpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBmdW5jdGlvbiBSb3dDb250ZXh0TWVudShzZW5kZXIsIGV2ZW50QXJncykgew0KICAgICAgICAgICAgICAgIHZhciBtZW51ID0gJGZpbmQoIlJhZE1lbnUxIik7DQogICAgICAgICAgICAgICAgdmFyIGV2dCA9IGV2ZW50QXJncy5nZXRfZG9tRXZlbnQoKTsNCg0KICAgICAgICAgICAgICAgIGlmIChldnQudGFyZ2V0LnRhZ05hbWUgPT0gIklOUFVUIiB8fCBldnQudGFyZ2V0LnRhZ05hbWUgPT0gIkEiKSB7DQogICAgICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBldmVudEFyZ3MuZ2V0X2l0ZW1JbmRleEhpZXJhcmNoaWNhbCgpOw0KICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJyYWRHcmlkQ2xpY2tlZFJvd0luZGV4IikudmFsdWUgPSBpbmRleDsNCg0KICAgICAgICAgICAgICAgIHNlbmRlci5nZXRfbWFzdGVyVGFibGVWaWV3KCkuc2VsZWN0SXRlbShzZW5kZXIuZ2V0X21hc3RlclRhYmxlVmlldygpLmdldF9kYXRhSXRlbXMoKVtpbmRleF0uZ2V0X2VsZW1lbnQoKSwgdHJ1ZSk7DQoNCiAgICAgICAgICAgICAgICBtZW51LnNob3coZXZ0KTsNCg0KICAgICAgICAgICAgICAgIGV2dC5jYW5jZWxCdWJibGUgPSB0cnVlOw0KICAgICAgICAgICAgICAgIGV2dC5yZXR1cm5WYWx1ZSA9IGZhbHNlOw0KDQogICAgICAgICAgICAgICAgaWYgKGV2dC5zdG9wUHJvcGFnYXRpb24pIHsNCiAgICAgICAgICAgICAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpOw0KICAgICAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgcG9wVXA7DQogICAgICAgICAgICBmdW5jdGlvbiBQb3BVcFNob3dpbmcoc2VuZGVyLCBldmVudEFyZ3MpIHsNCiAgICAgICAgICAgICAgICBwb3BVcCA9IGV2ZW50QXJncy5nZXRfcG9wVXAoKTsNCiAgICAgICAgICAgICAgICBwb3BVcC5zdHlsZS5sZWZ0ID0gIjEwMHB4IjsNCiAgICAgICAgICAgICAgICBwb3BVcC5zdHlsZS50b3AgPSAiMTBweCI7DQogICAgICAgICAgICB9IA0KICAgICAgICA8L3NjcmlwdD4NCiAgICANCiAgICANCg0KPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPg0KLy88IVtDREFUQVsNClN5cy5BcHBsaWNhdGlvbi5hZGRfaW5pdChmdW5jdGlvbigpIHsNCiAgICAkY3JlYXRlKFRlbGVyaWsuV2ViLlVJLlJhZFdpbmRvdywgeyJfZG9ja01vZGUiOmZhbHNlLCJjbGllbnRTdGF0ZUZpZWxkSUQiOiJVc2VyTGlzdERpYWxvZ19DbGllbnRTdGF0ZSIsImZvcm1JRCI6ImZvcm0xIiwiaGVpZ2h0IjoiNTMwcHgiLCJpY29uVXJsIjoiIiwibGVmdCI6IjE1MHB4IiwibWluaW1pemVJY29uVXJsIjoiIiwibW9kYWwiOnRydWUsIm5hbWUiOiJVc2VyTGlzdERpYWxvZyIsInJlbG9hZE9uU2hvdyI6dHJ1ZSwic2tpbiI6Ik9mZmljZTIwMDciLCJ0aXRsZSI6IkVkaXQvSW5zZXJ0IEVtcGxveWVlIERldGFpbHMiLCJ2aXNpYmxlU3RhdHVzYmFyIjpmYWxzZSwid2lkdGgiOiIxMjAwcHgifSwgbnVsbCwgbnVsbCwgJGdldCgiVXNlckxpc3REaWFsb2ciKSk7DQp9KTsNClN5cy5BcHBsaWNhdGlvbi5hZGRfaW5pdChmdW5jdGlvbigpIHsNCiAgICAkY3JlYXRlKFRlbGVyaWsuV2ViLlVJLlJhZFdpbmRvd01hbmFnZXIsIHsiY2xpZW50U3RhdGVGaWVsZElEIjoiUmFkV2luZG93TWFuYWdlcjFfQ2xpZW50U3RhdGUiLCJmb3JtSUQiOiJmb3JtMSIsImljb25VcmwiOiIiLCJtaW5pbWl6ZUljb25VcmwiOiIiLCJuYW1lIjoiUmFkV2luZG93TWFuYWdlcjEiLCJza2luIjoiT2ZmaWNlMjAwNyIsIndpbmRvd0NvbnRyb2xzIjoiWydVc2VyTGlzdERpYWxvZyddIn0sIG51bGwsIHsiY2hpbGQiOiJVc2VyTGlzdERpYWxvZyJ9LCAkZ2V0KCJSYWRXaW5kb3dNYW5hZ2VyMSIpKTsNCn0pOw0KU3lzLkFwcGxpY2F0aW9uLmFkZF9pbml0KGZ1bmN0aW9uKCkgew0KICAgICRjcmVhdGUoVGVsZXJpay5XZWIuVUkuUmFkRm9ybURlY29yYXRvciwgeyJjbGllbnRTdGF0ZUZpZWxkSUQiOiJGb3JtRGVjb3JhdG9yMV9DbGllbnRTdGF0ZSIsImRlY29yYXRlZENvbnRyb2xzIjo2NTUzNSwiZW5hYmxlUm91bmRlZENvcm5lcnMiOmZhbHNlLCJlbmFibGVkIjp0cnVlLCJza2luIjoiT2ZmaWNlMjAwNyJ9LCBudWxsLCBudWxsLCAkZ2V0KCJGb3JtRGVjb3JhdG9yMSIpKTsNCn0pOw0KU3lzLkFwcGxpY2F0aW9uLmFkZF9pbml0KGZ1bmN0aW9uKCkgew0KICAgICRjcmVhdGUoVGVsZXJpay5XZWIuVUkuUmFkQWpheE1hbmFnZXIsIHsiX3VwZGF0ZVBhbmVscyI6IiIsImFqYXhTZXR0aW5ncyI6W3tJbml0Q29udHJvbElEIDogIkdyaWRfRW1wbG95ZWUiLFVwZGF0ZWRDb250cm9scyA6IFt7Q29udHJvbElEOiJHcmlkX0VtcGxveWVlIixQYW5lbElEOiJSYWRBamF4TG9hZGluZ1BhbmVsMSJ9XX1dLCJjbGllbnRFdmVudHMiOntPblJlcXVlc3RTdGFydDoiIixPblJlc3BvbnNlRW5kOiIifSwiZGVmYXVsdExvYWRpbmdQYW5lbElEIjoiIiwiZW5hYmxlQUpBWCI6dHJ1ZSwiZW5hYmxlSGlzdG9yeSI6ZmFsc2UsImxpbmtzIjpbXSwic3R5bGVzIjpbXSwidW5pcXVlSUQiOiJSYWRBamF4TWFuYWdlcjEiLCJ1cGRhdGVQYW5lbHNSZW5kZXJNb2RlIjowfSwgbnVsbCwgbnVsbCwgJGdldCgiUmFkQWpheE1hbmFnZXIxIikpOw0KfSk7DQpTeXMuQXBwbGljYXRpb24uYWRkX2luaXQoZnVuY3Rpb24oKSB7DQogICAgJGNyZWF0ZShUZWxlcmlrLldlYi5VSS5SYWRBamF4TG9hZGluZ1BhbmVsLCB7ImluaXRpYWxEZWxheVRpbWUiOjAsImlzU3RpY2t5IjpmYWxzZSwibWluRGlzcGxheVRpbWUiOjAsInNraW4iOiJPZmZpY2UyMDA3IiwidHJhbnNwYXJlbmN5IjowLCJ1bmlxdWVJRCI6IlJhZEFqYXhMb2FkaW5nUGFuZWwxIiwiekluZGV4Ijo5MDAwMH0sIG51bGwsIG51bGwsICRnZXQoIlJhZEFqYXhMb2FkaW5nUGFuZWwxIikpOw0KfSk7DQoNCldlYkZvcm1fSW5pdENhbGxiYWNrKCk7U3lzLkFwcGxpY2F0aW9uLmFkZF9pbml0KGZ1bmN0aW9uKCkgew0KICAgICRjcmVhdGUoVGVsZXJpay5XZWIuVUkuUmFkQ29tYm9Cb3gsIHsiX2Ryb3BEb3duV2lkdGgiOjAsIl9oZWlnaHQiOjAsIl9za2luIjoiT2ZmaWNlMjAwNyIsIl90ZXh0IjoiMTAiLCJfdW5pcXVlSWQiOiJHcmlkX0VtcGxveWVlJGN0bDAwJGN0bDAzJGN0bDAxJFBhZ2VTaXplQ29tYm9Cb3giLCJfdmFsdWUiOiIxMCIsImNsaWVudFN0YXRlRmllbGRJRCI6IkdyaWRfRW1wbG95ZWVfY3RsMDBfY3RsMDNfY3RsMDFfUGFnZVNpemVDb21ib0JveF9DbGllbnRTdGF0ZSIsImNvbGxhcHNlQW5pbWF0aW9uIjoie1wiZHVyYXRpb25cIjo0NTB9IiwiZXhwYW5kQW5pbWF0aW9uIjoie1wiZHVyYXRpb25cIjo0NTB9IiwiaXRlbURhdGEiOlt7InZhbHVlIjoiMTAiLCJzZWxlY3RlZCI6dHJ1ZSwiYXR0cmlidXRlcyI6eyJvd25lclRhYmxlVmlld0lkIjoiR3JpZF9FbXBsb3llZV9jdGwwMCJ9fSx7InZhbHVlIjoiNTAiLCJhdHRyaWJ1dGVzIjp7Im93bmVyVGFibGVWaWV3SWQiOiJHcmlkX0VtcGxveWVlX2N0bDAwIn19LHsidmFsdWUiOiIxMDAiLCJhdHRyaWJ1dGVzIjp7Im93bmVyVGFibGVWaWV3SWQiOiJHcmlkX0VtcGxveWVlX2N0bDAwIn19LHsidmFsdWUiOiI1MDAiLCJhdHRyaWJ1dGVzIjp7Im93bmVyVGFibGVWaWV3SWQiOiJHcmlkX0VtcGxveWVlX2N0bDAwIn19LHsidmFsdWUiOiIzMDAwIiwiYXR0cmlidXRlcyI6eyJvd25lclRhYmxlVmlld0lkIjoiR3JpZF9FbXBsb3llZV9jdGwwMCJ9fV0sImxvY2FsaXphdGlvbiI6IntcIkFsbEl0ZW1zQ2hlY2tlZFN0cmluZ1wiOlwiQWxsIGl0ZW1zIGNoZWNrZWRcIixcIkl0ZW1zQ2hlY2tlZFN0cmluZ1wiOlwiaXRlbXMgY2hlY2tlZFwiLFwiQ2hlY2tBbGxTdHJpbmdcIjpcIkNoZWNrIEFsbFwifSIsInNlbGVjdGVkSW5kZXgiOjB9LCB7InNlbGVjdGVkSW5kZXhDaGFuZ2VkIjpUZWxlcmlrLldlYi5VSS5HcmlkLkNoYW5nZVBhZ2VTaXplQ29tYm9IYW5kbGVyfSwgbnVsbCwgJGdldCgiR3JpZF9FbXBsb3llZV9jdGwwMF9jdGwwM19jdGwwMV9QYWdlU2l6ZUNvbWJvQm94IikpOw0KfSk7DQpTeXMuQXBwbGljYXRpb24uYWRkX2luaXQoZnVuY3Rpb24oKSB7DQogICAgJGNyZWF0ZShUZWxlcmlrLldlYi5VSS5SYWRDb250ZXh0TWVudSwgeyJfY2hpbGRMaXN0RWxlbWVudENzc0NsYXNzIjpudWxsLCJfc2tpbiI6Ik9mZmljZTIwMDciLCJjbGlja1RvT3BlbiI6dHJ1ZSwiY2xpZW50U3RhdGVGaWVsZElEIjoiR3JpZF9FbXBsb3llZV9yZmx0TWVudV9DbGllbnRTdGF0ZSIsImNvbGxhcHNlQW5pbWF0aW9uIjoie1wiZHVyYXRpb25cIjo0NTB9IiwiZXhwYW5kQW5pbWF0aW9uIjoie1wiZHVyYXRpb25cIjo0NTB9IiwiaXRlbURhdGEiOlt7ImF0dHJpYnV0ZXMiOnsiY29sdW1uVW5pcXVlTmFtZSI6IiIsInRhYmxlSUQiOiIifSwicG9zdEJhY2siOjAsInZhbHVlIjoiTm9GaWx0ZXIifSx7ImF0dHJpYnV0ZXMiOnsiY29sdW1uVW5pcXVlTmFtZSI6IiIsInRhYmxlSUQiOiIifSwicG9zdEJhY2siOjAsInZhbHVlIjoiQ29udGFpbnMifSx7ImF0dHJpYnV0ZXMiOnsiY29sdW1uVW5pcXVlTmFtZSI6IiIsInRhYmxlSUQiOiIifSwicG9zdEJhY2siOjAsInZhbHVlIjoiRG9lc05vdENvbnRhaW4ifSx7ImF0dHJpYnV0ZXMiOnsiY29sdW1uVW5pcXVlTmFtZSI6IiIsInRhYmxlSUQiOiIifSwicG9zdEJhY2siOjAsInZhbHVlIjoiU3RhcnRzV2l0aCJ9LHsiYXR0cmlidXRlcyI6eyJjb2x1bW5VbmlxdWVOYW1lIjoiIiwidGFibGVJRCI6IiJ9LCJwb3N0QmFjayI6MCwidmFsdWUiOiJFbmRzV2l0aCJ9LHsiYXR0cmlidXRlcyI6eyJjb2x1bW5VbmlxdWVOYW1lIjoiIiwidGFibGVJRCI6IiJ9LCJwb3N0QmFjayI6MCwidmFsdWUiOiJFcXVhbFRvIn0seyJhdHRyaWJ1dGVzIjp7ImNvbHVtblVuaXF1ZU5hbWUiOiIiLCJ0YWJsZUlEIjoiIn0sInBvc3RCYWNrIjowLCJ2YWx1ZSI6Ik5vdEVxdWFsVG8ifSx7ImF0dHJpYnV0ZXMiOnsiY29sdW1uVW5pcXVlTmFtZSI6IiIsInRhYmxlSUQiOiIifSwicG9zdEJhY2siOjAsInZhbHVlIjoiR3JlYXRlclRoYW4ifSx7ImF0dHJpYnV0ZXMiOnsiY29sdW1uVW5pcXVlTmFtZSI6IiIsInRhYmxlSUQiOiIifSwicG9zdEJhY2siOjAsInZhbHVlIjoiTGVzc1RoYW4ifSx7ImF0dHJpYnV0ZXMiOnsiY29sdW1uVW5pcXVlTmFtZSI6IiIsInRhYmxlSUQiOiIifSwicG9zdEJhY2siOjAsInZhbHVlIjoiR3JlYXRlclRoYW5PckVxdWFsVG8ifSx7ImF0dHJpYnV0ZXMiOnsiY29sdW1uVW5pcXVlTmFtZSI6IiIsInRhYmxlSUQiOiIifSwicG9zdEJhY2siOjAsInZhbHVlIjoiTGVzc1RoYW5PckVxdWFsVG8ifSx7ImF0dHJpYnV0ZXMiOnsiY29sdW1uVW5pcXVlTmFtZSI6IiIsInRhYmxlSUQiOiIifSwicG9zdEJhY2siOjAsInZhbHVlIjoiQmV0d2VlbiJ9LHsiYXR0cmlidXRlcyI6eyJjb2x1bW5VbmlxdWVOYW1lIjoiIiwidGFibGVJRCI6IiJ9LCJwb3N0QmFjayI6MCwidmFsdWUiOiJOb3RCZXR3ZWVuIn0seyJhdHRyaWJ1dGVzIjp7ImNvbHVtblVuaXF1ZU5hbWUiOiIiLCJ0YWJsZUlEIjoiIn0sInBvc3RCYWNrIjowLCJ2YWx1ZSI6IklzRW1wdHkifSx7ImF0dHJpYnV0ZXMiOnsiY29sdW1uVW5pcXVlTmFtZSI6IiIsInRhYmxlSUQiOiIifSwicG9zdEJhY2siOjAsInZhbHVlIjoiTm90SXNFbXB0eSJ9LHsiYXR0cmlidXRlcyI6eyJjb2x1bW5VbmlxdWVOYW1lIjoiIiwidGFibGVJRCI6IiJ9LCJwb3N0QmFjayI6MCwidmFsdWUiOiJJc051bGwifSx7ImF0dHJpYnV0ZXMiOnsiY29sdW1uVW5pcXVlTmFtZSI6IiIsInRhYmxlSUQiOiIifSwicG9zdEJhY2siOjAsInZhbHVlIjoiTm90SXNOdWxsIn0seyJhdHRyaWJ1dGVzIjp7ImNvbHVtblVuaXF1ZU5hbWUiOiIiLCJ0YWJsZUlEIjoiIn0sInBvc3RCYWNrIjowLCJ2YWx1ZSI6IkN1c3RvbSJ9XSwidGFyZ2V0cyI6W119LCBudWxsLCBudWxsLCAkZ2V0KCJHcmlkX0VtcGxveWVlX3JmbHRNZW51IikpOw0KfSk7DQpTeXMuQXBwbGljYXRpb24uYWRkX2luaXQoZnVuY3Rpb24oKSB7DQogICAgJGNyZWF0ZShUZWxlcmlrLldlYi5VSS5SYWRHcmlkLCB7IkNsaWVudElEIjoiR3JpZF9FbXBsb3llZSIsIkNsaWVudFNldHRpbmdzIjp7IkFsbG93QXV0b1Njcm9sbE9uRHJhZ0Ryb3AiOnRydWUsIlNob3VsZENyZWF0ZVJvd3MiOnRydWUsIkRhdGFCaW5kaW5nIjp7fSwiU2VsZWN0aW5nIjp7IkNlbGxTZWxlY3Rpb25Nb2RlIjowLCJBbGxvd1Jvd1NlbGVjdCI6dHJ1ZSwiRW5hYmxlRHJhZ1RvU2VsZWN0Um93cyI6dHJ1ZX0sIlNjcm9sbGluZyI6eyJBbGxvd1Njcm9sbCI6dHJ1ZSwiU2F2ZVNjcm9sbFBvc2l0aW9uIjp0cnVlLCJTY3JvbGxIZWlnaHQiOiIzMDBweCIsIlVzZVN0YXRpY0hlYWRlcnMiOnRydWV9LCJSZXNpemluZyI6eyJBbGxvd0NvbHVtblJlc2l6ZSI6dHJ1ZSwiQ2xpcENlbGxDb250ZW50T25SZXNpemUiOnRydWV9LCJDbGllbnRNZXNzYWdlcyI6e30sIktleWJvYXJkTmF2aWdhdGlvblNldHRpbmdzIjp7IkFsbG93QWN0aXZlUm93Q3ljbGUiOmZhbHNlLCJFbmFibGVLZXlib2FyZFNob3J0Y3V0cyI6dHJ1ZSwiRm9jdXNLZXkiOjg5LCJJbml0SW5zZXJ0S2V5Ijo3MywiUmViaW5kS2V5Ijo4MiwiRXhpdEVkaXRJbnNlcnRNb2RlS2V5IjoyNywiVXBkYXRlSW5zZXJ0SXRlbUtleSI6MTMsIkRlbGV0ZUFjdGl2ZVJvdyI6MTI3LCJFeHBhbmREZXRhaWxUYWJsZUtleSI6MzksIkNvbGxhcHNlRGV0YWlsVGFibGVLZXkiOjM3fSwiQW5pbWF0aW9uIjp7fX0sIlNraW4iOiJPZmZpY2UyMDA3IiwiVW5pcXVlSUQiOiJHcmlkX0VtcGxveWVlIiwiX2FjdGl2ZVJvd0luZGV4IjoiIiwiX2NvbnRyb2xUb0ZvY3VzIjoiIiwiX2N1cnJlbnRQYWdlSW5kZXgiOjAsIl9lZGl0SW5kZXhlcyI6IltdIiwiX2VtYmVkZGVkU2tpbiI6dHJ1ZSwiX2dyaWRUYWJsZVZpZXdzRGF0YSI6Ilt7XCJDbGllbnRJRFwiOlwiR3JpZF9FbXBsb3llZV9jdGwwMFwiLFwiVW5pcXVlSURcIjpcIkdyaWRfRW1wbG95ZWUkY3RsMDBcIixcIlBhZ2VTaXplXCI6MTAsXCJQYWdlQ291bnRcIjoxNCxcIkVkaXRNb2RlXCI6XCJFZGl0Rm9ybXNcIixcIkFsbG93UGFnaW5nXCI6dHJ1ZSxcIkN1cnJlbnRQYWdlSW5kZXhcIjowLFwiVmlydHVhbEl0ZW1Db3VudFwiOjAsXCJBbGxvd011bHRpQ29sdW1uU29ydGluZ1wiOmZhbHNlLFwiQWxsb3dOYXR1cmFsU29ydFwiOnRydWUsXCJBbGxvd0ZpbHRlcmluZ0J5Q29sdW1uXCI6dHJ1ZSxcIlBhZ2VCdXR0b25Db3VudFwiOjEwLFwiSGFzRGV0YWlsVGFibGVzXCI6ZmFsc2UsXCJIYXNNdWx0aUhlYWRlcnNcIjpmYWxzZSxcIlBhZ2VyQWx3YXlzVmlzaWJsZVwiOnRydWUsXCJJc0l0ZW1JbnNlcnRlZFwiOmZhbHNlLFwiY2xpZW50RGF0YUtleU5hbWVzXCI6W10sXCJoYXNEZXRhaWxJdGVtVGVtcGxhdGVcIjpmYWxzZSxcIl9kYXRhQmluZFRlbXBsYXRlc1wiOmZhbHNlLFwiX3NlbGVjdGVkSXRlbVN0eWxlXCI6XCJcIixcIl9zZWxlY3RlZEl0ZW1TdHlsZUNsYXNzXCI6XCJyZ1NlbGVjdGVkUm93XCIsXCJpc0ZpbHRlckl0ZW1FeHBhbmRlZFwiOnRydWUsXCJfY29sdW1uc0RhdGFcIjpbe1wiVW5pcXVlTmFtZVwiOlwiY2hrX0VtcGxveWVlSWRcIixcIlJlc2l6YWJsZVwiOnRydWUsXCJSZW9yZGVyYWJsZVwiOnRydWUsXCJTZWxlY3RhYmxlXCI6ZmFsc2UsXCJHcm91cGFibGVcIjpmYWxzZSxcIkNvbHVtblR5cGVcIjpcIkdyaWRDbGllbnRTZWxlY3RDb2x1bW5cIixcIkNvbHVtbkdyb3VwTmFtZVwiOlwiXCIsXCJEYXRhVHlwZU5hbWVcIjpcIlN5c3RlbS5TdHJpbmdcIixcIkZpbHRlckxpc3RPcHRpb25zXCI6MCxcIkN1cnJlbnRGaWx0ZXJGdW5jdGlvblwiOjAsXCJDdXJyZW50RmlsdGVyVmFsdWVcIjpcIlwiLFwiQW5kQ3Vycm5ldEZpbHRlckZ1bmN0aW9uXCI6MCxcIkFuZEN1cnJlbnRGaWx0ZXJWYWx1ZVwiOlwiXCIsXCJDdXJyZW50RmlsdGVyRnVuY3Rpb25OYW1lXCI6XCJOb0ZpbHRlclwiLFwiQW5kQ3VycmVudEZpbHRlckZ1bmN0aW9uTmFtZVwiOlwiTm9GaWx0ZXJcIixcIkJ1dHRvblR5cGVcIjpcIkxpbmtCdXR0b25cIixcIkNvbW1hbmROYW1lXCI6XCJcIixcIkNvbW1hbmRBcmd1bWVudFwiOlwiXCIsXCJUZXh0XCI6XCJcIixcIkRhdGFUZXh0RmllbGRcIjpcIlwiLFwiRGF0YVRleHRGb3JtYXRTdHJpbmdcIjpcIlwiLFwiSW1hZ2VVcmxcIjpcIlwiLFwiRGlzcGxheVwiOnRydWV9LHtcIlVuaXF1ZU5hbWVcIjpcIkVtcGxveWVlSWRcIixcIlJlc2l6YWJsZVwiOnRydWUsXCJSZW9yZGVyYWJsZVwiOnRydWUsXCJTZWxlY3RhYmxlXCI6dHJ1ZSxcIkdyb3VwYWJsZVwiOnRydWUsXCJDb2x1bW5UeXBlXCI6XCJHcmlkQm91bmRDb2x1bW5cIixcIkNvbHVtbkdyb3VwTmFtZVwiOlwiXCIsXCJEYXRhVHlwZU5hbWVcIjpcIlN5c3RlbS5JbnQzMlwiLFwiRmlsdGVyTGlzdE9wdGlvbnNcIjowLFwiQ3VycmVudEZpbHRlckZ1bmN0aW9uXCI6MCxcIkN1cnJlbnRGaWx0ZXJWYWx1ZVwiOlwiXCIsXCJBbmRDdXJybmV0RmlsdGVyRnVuY3Rpb25cIjowLFwiQW5kQ3VycmVudEZpbHRlclZhbHVlXCI6XCJcIixcIkN1cnJlbnRGaWx0ZXJGdW5jdGlvbk5hbWVcIjpcIk5vRmlsdGVyXCIsXCJBbmRDdXJyZW50RmlsdGVyRnVuY3Rpb25OYW1lXCI6XCJOb0ZpbHRlclwiLFwiRGF0YUZpZWxkXCI6XCJFbXBsb3llZUlkXCIsXCJEaXNwbGF5XCI6ZmFsc2V9LHtcIlVuaXF1ZU5hbWVcIjpcIkVtcGxveWVlQ29kZUluRGV2aWNlXCIsXCJSZXNpemFibGVcIjp0cnVlLFwiUmVvcmRlcmFibGVcIjp0cnVlLFwiU2VsZWN0YWJsZVwiOnRydWUsXCJHcm91cGFibGVcIjp0cnVlLFwiQ29sdW1uVHlwZVwiOlwiR3JpZEJvdW5kQ29sdW1uXCIsXCJDb2x1bW5Hcm91cE5hbWVcIjpcIlwiLFwiRGF0YVR5cGVOYW1lXCI6XCJTeXN0ZW0uU3RyaW5nXCIsXCJGaWx0ZXJMaXN0T3B0aW9uc1wiOjAsXCJDdXJyZW50RmlsdGVyRnVuY3Rpb25cIjowLFwiQ3VycmVudEZpbHRlclZhbHVlXCI6XCJcIixcIkFuZEN1cnJuZXRGaWx0ZXJGdW5jdGlvblwiOjAsXCJBbmRDdXJyZW50RmlsdGVyVmFsdWVcIjpcIlwiLFwiQ3VycmVudEZpbHRlckZ1bmN0aW9uTmFtZVwiOlwiTm9GaWx0ZXJcIixcIkFuZEN1cnJlbnRGaWx0ZXJGdW5jdGlvbk5hbWVcIjpcIk5vRmlsdGVyXCIsXCJEYXRhRmllbGRcIjpcIkVtcGxveWVlQ29kZUluRGV2aWNlXCIsXCJEaXNwbGF5XCI6ZmFsc2V9LHtcIlVuaXF1ZU5hbWVcIjpcIkVtcGxveWVlQ29kZVwiLFwiUmVzaXphYmxlXCI6dHJ1ZSxcIlJlb3JkZXJhYmxlXCI6dHJ1ZSxcIlNlbGVjdGFibGVcIjp0cnVlLFwiR3JvdXBhYmxlXCI6dHJ1ZSxcIkNvbHVtblR5cGVcIjpcIkdyaWRIeXBlckxpbmtDb2x1bW5cIixcIkNvbHVtbkdyb3VwTmFtZVwiOlwiXCIsXCJEYXRhVHlwZU5hbWVcIjpcIlN5c3RlbS5TdHJpbmdcIixcIkZpbHRlckxpc3RPcHRpb25zXCI6MCxcIkN1cnJlbnRGaWx0ZXJGdW5jdGlvblwiOjAsXCJDdXJyZW50RmlsdGVyVmFsdWVcIjpcIlwiLFwiQW5kQ3Vycm5ldEZpbHRlckZ1bmN0aW9uXCI6MCxcIkFuZEN1cnJlbnRGaWx0ZXJWYWx1ZVwiOlwiXCIsXCJDdXJyZW50RmlsdGVyRnVuY3Rpb25OYW1lXCI6XCJOb0ZpbHRlclwiLFwiQW5kQ3VycmVudEZpbHRlckZ1bmN0aW9uTmFtZVwiOlwiTm9GaWx0ZXJcIixcIkRhdGFUZXh0RmllbGRcIjpcIkVtcGxveWVlQ29kZVwiLFwiRGF0YVRleHRGb3JtYXRTdHJpbmdcIjpcIlwiLFwiRGF0YU5hdmlnYXRlVXJsRmllbGRzXCI6W10sXCJEYXRhTmF2aWdhdGVVcmxGb3JtYXRTdHJpbmdcIjpcIlwiLFwiRGlzcGxheVwiOnRydWV9LHtcIlVuaXF1ZU5hbWVcIjpcIkVtcGxveWVlTmFtZVwiLFwiUmVzaXphYmxlXCI6dHJ1ZSxcIlJlb3JkZXJhYmxlXCI6dHJ1ZSxcIlNlbGVjdGFibGVcIjp0cnVlLFwiR3JvdXBhYmxlXCI6dHJ1ZSxcIkNvbHVtblR5cGVcIjpcIkdyaWRCb3VuZENvbHVtblwiLFwiQ29sdW1uR3JvdXBOYW1lXCI6XCJcIixcIkRhdGFUeXBlTmFtZVwiOlwiU3lzdGVtLlN0cmluZ1wiLFwiRmlsdGVyTGlzdE9wdGlvbnNcIjowLFwiQ3VycmVudEZpbHRlckZ1bmN0aW9uXCI6MCxcIkN1cnJlbnRGaWx0ZXJWYWx1ZVwiOlwiXCIsXCJBbmRDdXJybmV0RmlsdGVyRnVuY3Rpb25cIjowLFwiQW5kQ3VycmVudEZpbHRlclZhbHVlXCI6XCJcIixcIkN1cnJlbnRGaWx0ZXJGdW5jdGlvbk5hbWVcIjpcIk5vRmlsdGVyXCIsXCJBbmRDdXJyZW50RmlsdGVyRnVuY3Rpb25OYW1lXCI6XCJOb0ZpbHRlclwiLFwiRGF0YUZpZWxkXCI6XCJFbXBsb3llZU5hbWVcIixcIkRpc3BsYXlcIjp0cnVlfSx7XCJVbmlxdWVOYW1lXCI6XCJDb21wYW55U05hbWVcIixcIlJlc2l6YWJsZVwiOnRydWUsXCJSZW9yZGVyYWJsZVwiOnRydWUsXCJTZWxlY3RhYmxlXCI6dHJ1ZSxcIkdyb3VwYWJsZVwiOnRydWUsXCJDb2x1bW5UeXBlXCI6XCJHcmlkQm91bmRDb2x1bW5cIixcIkNvbHVtbkdyb3VwTmFtZVwiOlwiXCIsXCJEYXRhVHlwZU5hbWVcIjpcIlN5c3RlbS5TdHJpbmdcIixcIkZpbHRlckxpc3RPcHRpb25zXCI6MCxcIkN1cnJlbnRGaWx0ZXJGdW5jdGlvblwiOjAsXCJDdXJyZW50RmlsdGVyVmFsdWVcIjpcIlwiLFwiQW5kQ3Vycm5ldEZpbHRlckZ1bmN0aW9uXCI6MCxcIkFuZEN1cnJlbnRGaWx0ZXJWYWx1ZVwiOlwiXCIsXCJDdXJyZW50RmlsdGVyRnVuY3Rpb25OYW1lXCI6XCJOb0ZpbHRlclwiLFwiQW5kQ3VycmVudEZpbHRlckZ1bmN0aW9uTmFtZVwiOlwiTm9GaWx0ZXJcIixcIkRhdGFGaWVsZFwiOlwiQ29tcGFueVNOYW1lXCIsXCJEaXNwbGF5XCI6dHJ1ZX0se1wiVW5pcXVlTmFtZVwiOlwiRGVwYXJ0bWVudFNOYW1lXCIsXCJSZXNpemFibGVcIjp0cnVlLFwiUmVvcmRlcmFibGVcIjp0cnVlLFwiU2VsZWN0YWJsZVwiOnRydWUsXCJHcm91cGFibGVcIjp0cnVlLFwiQ29sdW1uVHlwZVwiOlwiR3JpZEJvdW5kQ29sdW1uXCIsXCJDb2x1bW5Hcm91cE5hbWVcIjpcIlwiLFwiRGF0YVR5cGVOYW1lXCI6XCJTeXN0ZW0uU3RyaW5nXCIsXCJGaWx0ZXJMaXN0T3B0aW9uc1wiOjAsXCJDdXJyZW50RmlsdGVyRnVuY3Rpb25cIjowLFwiQ3VycmVudEZpbHRlclZhbHVlXCI6XCJcIixcIkFuZEN1cnJuZXRGaWx0ZXJGdW5jdGlvblwiOjAsXCJBbmRDdXJyZW50RmlsdGVyVmFsdWVcIjpcIlwiLFwiQ3VycmVudEZpbHRlckZ1bmN0aW9uTmFtZVwiOlwiTm9GaWx0ZXJcIixcIkFuZEN1cnJlbnRGaWx0ZXJGdW5jdGlvbk5hbWVcIjpcIk5vRmlsdGVyXCIsXCJEYXRhRmllbGRcIjpcIkRlcGFydG1lbnRTTmFtZVwiLFwiRGlzcGxheVwiOnRydWV9LHtcIlVuaXF1ZU5hbWVcIjpcIkNhdGVnb3J5U05hbWVcIixcIlJlc2l6YWJsZVwiOnRydWUsXCJSZW9yZGVyYWJsZVwiOnRydWUsXCJTZWxlY3RhYmxlXCI6dHJ1ZSxcIkdyb3VwYWJsZVwiOnRydWUsXCJDb2x1bW5UeXBlXCI6XCJHcmlkQm91bmRDb2x1bW5cIixcIkNvbHVtbkdyb3VwTmFtZVwiOlwiXCIsXCJEYXRhVHlwZU5hbWVcIjpcIlN5c3RlbS5TdHJpbmdcIixcIkZpbHRlckxpc3RPcHRpb25zXCI6MCxcIkN1cnJlbnRGaWx0ZXJGdW5jdGlvblwiOjAsXCJDdXJyZW50RmlsdGVyVmFsdWVcIjpcIlwiLFwiQW5kQ3Vycm5ldEZpbHRlckZ1bmN0aW9uXCI6MCxcIkFuZEN1cnJlbnRGaWx0ZXJWYWx1ZVwiOlwiXCIsXCJDdXJyZW50RmlsdGVyRnVuY3Rpb25OYW1lXCI6XCJOb0ZpbHRlclwiLFwiQW5kQ3VycmVudEZpbHRlckZ1bmN0aW9uTmFtZVwiOlwiTm9GaWx0ZXJcIixcIkRhdGFGaWVsZFwiOlwiQ2F0ZWdvcnlTTmFtZVwiLFwiRGlzcGxheVwiOnRydWV9LHtcIlVuaXF1ZU5hbWVcIjpcIkRlc2lnbmF0aW9uXCIsXCJSZXNpemFibGVcIjp0cnVlLFwiUmVvcmRlcmFibGVcIjp0cnVlLFwiU2VsZWN0YWJsZVwiOnRydWUsXCJHcm91cGFibGVcIjp0cnVlLFwiQ29sdW1uVHlwZVwiOlwiR3JpZEJvdW5kQ29sdW1uXCIsXCJDb2x1bW5Hcm91cE5hbWVcIjpcIlwiLFwiRGF0YVR5cGVOYW1lXCI6XCJTeXN0ZW0uU3RyaW5nXCIsXCJGaWx0ZXJMaXN0T3B0aW9uc1wiOjAsXCJDdXJyZW50RmlsdGVyRnVuY3Rpb25cIjowLFwiQ3VycmVudEZpbHRlclZhbHVlXCI6XCJcIixcIkFuZEN1cnJuZXRGaWx0ZXJGdW5jdGlvblwiOjAsXCJBbmRDdXJyZW50RmlsdGVyVmFsdWVcIjpcIlwiLFwiQ3VycmVudEZpbHRlckZ1bmN0aW9uTmFtZVwiOlwiTm9GaWx0ZXJcIixcIkFuZEN1cnJlbnRGaWx0ZXJGdW5jdGlvbk5hbWVcIjpcIk5vRmlsdGVyXCIsXCJEYXRhRmllbGRcIjpcIkRlc2lnbmF0aW9uXCIsXCJEaXNwbGF5XCI6dHJ1ZX0se1wiVW5pcXVlTmFtZVwiOlwiTG9jYXRpb25cIixcIlJlc2l6YWJsZVwiOnRydWUsXCJSZW9yZGVyYWJsZVwiOnRydWUsXCJTZWxlY3RhYmxlXCI6dHJ1ZSxcIkdyb3VwYWJsZVwiOnRydWUsXCJDb2x1bW5UeXBlXCI6XCJHcmlkQm91bmRDb2x1bW5cIixcIkNvbHVtbkdyb3VwTmFtZVwiOlwiXCIsXCJEYXRhVHlwZU5hbWVcIjpcIlN5c3RlbS5TdHJpbmdcIixcIkZpbHRlckxpc3RPcHRpb25zXCI6MCxcIkN1cnJlbnRGaWx0ZXJGdW5jdGlvblwiOjAsXCJDdXJyZW50RmlsdGVyVmFsdWVcIjpcIlwiLFwiQW5kQ3Vycm5ldEZpbHRlckZ1bmN0aW9uXCI6MCxcIkFuZEN1cnJlbnRGaWx0ZXJWYWx1ZVwiOlwiXCIsXCJDdXJyZW50RmlsdGVyRnVuY3Rpb25OYW1lXCI6XCJOb0ZpbHRlclwiLFwiQW5kQ3VycmVudEZpbHRlckZ1bmN0aW9uTmFtZVwiOlwiTm9GaWx0ZXJcIixcIkRhdGFGaWVsZFwiOlwiTG9jYXRpb25cIixcIkRpc3BsYXlcIjp0cnVlfSx7XCJVbmlxdWVOYW1lXCI6XCJTdGF0dXNcIixcIlJlc2l6YWJsZVwiOnRydWUsXCJSZW9yZGVyYWJsZVwiOnRydWUsXCJTZWxlY3RhYmxlXCI6dHJ1ZSxcIkdyb3VwYWJsZVwiOnRydWUsXCJDb2x1bW5UeXBlXCI6XCJHcmlkQm91bmRDb2x1bW5cIixcIkNvbHVtbkdyb3VwTmFtZVwiOlwiXCIsXCJEYXRhVHlwZU5hbWVcIjpcIlN5c3RlbS5TdHJpbmdcIixcIkZpbHRlckxpc3RPcHRpb25zXCI6MCxcIkN1cnJlbnRGaWx0ZXJGdW5jdGlvblwiOjEsXCJDdXJyZW50RmlsdGVyVmFsdWVcIjpcIldvcmtpbmdcIixcIkFuZEN1cnJuZXRGaWx0ZXJGdW5jdGlvblwiOjAsXCJBbmRDdXJyZW50RmlsdGVyVmFsdWVcIjpcIlwiLFwiQ3VycmVudEZpbHRlckZ1bmN0aW9uTmFtZVwiOlwiQ29udGFpbnNcIixcIkFuZEN1cnJlbnRGaWx0ZXJGdW5jdGlvbk5hbWVcIjpcIk5vRmlsdGVyXCIsXCJEYXRhRmllbGRcIjpcIlN0YXR1c1wiLFwiRGlzcGxheVwiOnRydWV9LHtcIlVuaXF1ZU5hbWVcIjpcIkVtcGxveWVtZW50VHlwZVwiLFwiUmVzaXphYmxlXCI6dHJ1ZSxcIlJlb3JkZXJhYmxlXCI6dHJ1ZSxcIlNlbGVjdGFibGVcIjp0cnVlLFwiR3JvdXBhYmxlXCI6dHJ1ZSxcIkNvbHVtblR5cGVcIjpcIkdyaWRCb3VuZENvbHVtblwiLFwiQ29sdW1uR3JvdXBOYW1lXCI6XCJcIixcIkRhdGFUeXBlTmFtZVwiOlwiU3lzdGVtLlN0cmluZ1wiLFwiRmlsdGVyTGlzdE9wdGlvbnNcIjowLFwiQ3VycmVudEZpbHRlckZ1bmN0aW9uXCI6MCxcIkN1cnJlbnRGaWx0ZXJWYWx1ZVwiOlwiXCIsXCJBbmRDdXJybmV0RmlsdGVyRnVuY3Rpb25cIjowLFwiQW5kQ3VycmVudEZpbHRlclZhbHVlXCI6XCJcIixcIkN1cnJlbnRGaWx0ZXJGdW5jdGlvbk5hbWVcIjpcIk5vRmlsdGVyXCIsXCJBbmRDdXJyZW50RmlsdGVyRnVuY3Rpb25OYW1lXCI6XCJOb0ZpbHRlclwiLFwiRGF0YUZpZWxkXCI6XCJFbXBsb3llbWVudFR5cGVcIixcIkRpc3BsYXlcIjp0cnVlfSx7XCJVbmlxdWVOYW1lXCI6XCJSZXBvcnRUb1wiLFwiUmVzaXphYmxlXCI6dHJ1ZSxcIlJlb3JkZXJhYmxlXCI6dHJ1ZSxcIlNlbGVjdGFibGVcIjp0cnVlLFwiR3JvdXBhYmxlXCI6dHJ1ZSxcIkNvbHVtblR5cGVcIjpcIkdyaWRCb3VuZENvbHVtblwiLFwiQ29sdW1uR3JvdXBOYW1lXCI6XCJcIixcIkRhdGFUeXBlTmFtZVwiOlwiU3lzdGVtLlN0cmluZ1wiLFwiRmlsdGVyTGlzdE9wdGlvbnNcIjowLFwiQ3VycmVudEZpbHRlckZ1bmN0aW9uXCI6MCxcIkN1cnJlbnRGaWx0ZXJWYWx1ZVwiOlwiXCIsXCJBbmRDdXJybmV0RmlsdGVyRnVuY3Rpb25cIjowLFwiQW5kQ3VycmVudEZpbHRlclZhbHVlXCI6XCJcIixcIkN1cnJlbnRGaWx0ZXJGdW5jdGlvbk5hbWVcIjpcIk5vRmlsdGVyXCIsXCJBbmRDdXJyZW50RmlsdGVyRnVuY3Rpb25OYW1lXCI6XCJOb0ZpbHRlclwiLFwiRGF0YUZpZWxkXCI6XCJSZXBvcnRUb1wiLFwiRGlzcGxheVwiOmZhbHNlfSx7XCJVbmlxdWVOYW1lXCI6XCJSZXBvcnRpbmdNYW5hZ2Vyc1wiLFwiUmVzaXphYmxlXCI6dHJ1ZSxcIlJlb3JkZXJhYmxlXCI6dHJ1ZSxcIlNlbGVjdGFibGVcIjp0cnVlLFwiR3JvdXBhYmxlXCI6dHJ1ZSxcIkNvbHVtblR5cGVcIjpcIkdyaWRIeXBlckxpbmtDb2x1bW5cIixcIkNvbHVtbkdyb3VwTmFtZVwiOlwiXCIsXCJEYXRhVHlwZU5hbWVcIjpcIlN5c3RlbS5JbnQzMlwiLFwiRmlsdGVyTGlzdE9wdGlvbnNcIjowLFwiQ3VycmVudEZpbHRlckZ1bmN0aW9uXCI6MCxcIkN1cnJlbnRGaWx0ZXJWYWx1ZVwiOlwiXCIsXCJBbmRDdXJybmV0RmlsdGVyRnVuY3Rpb25cIjowLFwiQW5kQ3VycmVudEZpbHRlclZhbHVlXCI6XCJcIixcIkN1cnJlbnRGaWx0ZXJGdW5jdGlvbk5hbWVcIjpcIk5vRmlsdGVyXCIsXCJBbmRDdXJyZW50RmlsdGVyRnVuY3Rpb25OYW1lXCI6XCJOb0ZpbHRlclwiLFwiRGF0YVRleHRGaWVsZFwiOlwiXCIsXCJEYXRhVGV4dEZvcm1hdFN0cmluZ1wiOlwiXCIsXCJEYXRhTmF2aWdhdGVVcmxGaWVsZHNcIjpbXCJFbXBsb3llZUlkXCIsXCJFbXBsb3llZUNvZGVcIixcIkVtcGxveWVlTmFtZVwiLFwiUmVwb3J0VG9cIl0sXCJUZXh0XCI6XCJSZXBvcnRpbmcgTWFuYWdlcnNcIixcIkRhdGFOYXZpZ2F0ZVVybEZvcm1hdFN0cmluZ1wiOlwiL1JlcG9ydGluZ01hbmFnZXJMaXN0LmFzcHg/RW1wbG95ZWVJZD17MH1cXHUwMDI2RW1wbG95ZWVDb2RlPXsxfVxcdTAwMjZFbXBsb3llZU5hbWU9ezJ9XFx1MDAyNlJlcG9ydFRvPXszfVwiLFwiRGlzcGxheVwiOnRydWV9LHtcIlVuaXF1ZU5hbWVcIjpcIlZpZXdGYW1pbHlNZW1iZXJzXCIsXCJSZXNpemFibGVcIjp0cnVlLFwiUmVvcmRlcmFibGVcIjp0cnVlLFwiU2VsZWN0YWJsZVwiOnRydWUsXCJHcm91cGFibGVcIjp0cnVlLFwiQ29sdW1uVHlwZVwiOlwiR3JpZEh5cGVyTGlua0NvbHVtblwiLFwiQ29sdW1uR3JvdXBOYW1lXCI6XCJcIixcIkRhdGFUeXBlTmFtZVwiOlwiU3lzdGVtLkludDMyXCIsXCJGaWx0ZXJMaXN0T3B0aW9uc1wiOjAsXCJDdXJyZW50RmlsdGVyRnVuY3Rpb25cIjowLFwiQ3VycmVudEZpbHRlclZhbHVlXCI6XCJcIixcIkFuZEN1cnJuZXRGaWx0ZXJGdW5jdGlvblwiOjAsXCJBbmRDdXJyZW50RmlsdGVyVmFsdWVcIjpcIlwiLFwiQ3VycmVudEZpbHRlckZ1bmN0aW9uTmFtZVwiOlwiTm9GaWx0ZXJcIixcIkFuZEN1cnJlbnRGaWx0ZXJGdW5jdGlvbk5hbWVcIjpcIk5vRmlsdGVyXCIsXCJEYXRhVGV4dEZpZWxkXCI6XCJcIixcIkRhdGFUZXh0Rm9ybWF0U3RyaW5nXCI6XCJcIixcIkRhdGFOYXZpZ2F0ZVVybEZpZWxkc1wiOltcIkVtcGxveWVlSWRcIixcIkVtcGxveWVlQ29kZVwiLFwiRW1wbG95ZWVOYW1lXCJdLFwiVGV4dFwiOlwiVmlldyBGYW1pbHkgTWVtYmVyc1wiLFwiRGF0YU5hdmlnYXRlVXJsRm9ybWF0U3RyaW5nXCI6XCIvRW1wbG95ZWVGYW1haWx5RGV0YWlscy5hc3B4P0VtcGxveWVlSWQ9ezB9XFx1MDAyNkVtcGxveWVlQ29kZT17MX1cXHUwMDI2RW1wbG95ZWVOYW1lPXsyfVwiLFwiRGlzcGxheVwiOmZhbHNlfSx7XCJVbmlxdWVOYW1lXCI6XCJFbXBsb3llZURvY3VtZW50c1wiLFwiUmVzaXphYmxlXCI6dHJ1ZSxcIlJlb3JkZXJhYmxlXCI6dHJ1ZSxcIlNlbGVjdGFibGVcIjp0cnVlLFwiR3JvdXBhYmxlXCI6dHJ1ZSxcIkNvbHVtblR5cGVcIjpcIkdyaWRIeXBlckxpbmtDb2x1bW5cIixcIkNvbHVtbkdyb3VwTmFtZVwiOlwiXCIsXCJEYXRhVHlwZU5hbWVcIjpcIlN5c3RlbS5JbnQzMlwiLFwiRmlsdGVyTGlzdE9wdGlvbnNcIjowLFwiQ3VycmVudEZpbHRlckZ1bmN0aW9uXCI6MCxcIkN1cnJlbnRGaWx0ZXJWYWx1ZVwiOlwiXCIsXCJBbmRDdXJybmV0RmlsdGVyRnVuY3Rpb25cIjowLFwiQW5kQ3VycmVudEZpbHRlclZhbHVlXCI6XCJcIixcIkN1cnJlbnRGaWx0ZXJGdW5jdGlvbk5hbWVcIjpcIk5vRmlsdGVyXCIsXCJBbmRDdXJyZW50RmlsdGVyRnVuY3Rpb25OYW1lXCI6XCJOb0ZpbHRlclwiLFwiRGF0YVRleHRGaWVsZFwiOlwiXCIsXCJEYXRhVGV4dEZvcm1hdFN0cmluZ1wiOlwiXCIsXCJEYXRhTmF2aWdhdGVVcmxGaWVsZHNcIjpbXCJFbXBsb3llZUlkXCIsXCJFbXBsb3llZUNvZGVcIixcIkVtcGxveWVlTmFtZVwiXSxcIlRleHRcIjpcIkVtcGxveWVlIERvY3VtZW50c1wiLFwiRGF0YU5hdmlnYXRlVXJsRm9ybWF0U3RyaW5nXCI6XCIvRW1wbG95ZWVEb2N1bWVudHMuYXNweD9FbXBsb3llZUlkPXswfVxcdTAwMjZFbXBsb3llZUNvZGU9ezF9XFx1MDAyNkVtcGxveWVlTmFtZT17Mn1cIixcIkRpc3BsYXlcIjp0cnVlfSx7XCJVbmlxdWVOYW1lXCI6XCJCaW9EZXRhaWxzXCIsXCJSZXNpemFibGVcIjp0cnVlLFwiUmVvcmRlcmFibGVcIjp0cnVlLFwiU2VsZWN0YWJsZVwiOnRydWUsXCJHcm91cGFibGVcIjp0cnVlLFwiQ29sdW1uVHlwZVwiOlwiR3JpZEh5cGVyTGlua0NvbHVtblwiLFwiQ29sdW1uR3JvdXBOYW1lXCI6XCJcIixcIkRhdGFUeXBlTmFtZVwiOlwiU3lzdGVtLkludDMyXCIsXCJGaWx0ZXJMaXN0T3B0aW9uc1wiOjAsXCJDdXJyZW50RmlsdGVyRnVuY3Rpb25cIjowLFwiQ3VycmVudEZpbHRlclZhbHVlXCI6XCJcIixcIkFuZEN1cnJuZXRGaWx0ZXJGdW5jdGlvblwiOjAsXCJBbmRDdXJyZW50RmlsdGVyVmFsdWVcIjpcIlwiLFwiQ3VycmVudEZpbHRlckZ1bmN0aW9uTmFtZVwiOlwiTm9GaWx0ZXJcIixcIkFuZEN1cnJlbnRGaWx0ZXJGdW5jdGlvbk5hbWVcIjpcIk5vRmlsdGVyXCIsXCJEYXRhVGV4dEZpZWxkXCI6XCJcIixcIkRhdGFUZXh0Rm9ybWF0U3RyaW5nXCI6XCJcIixcIkRhdGFOYXZpZ2F0ZVVybEZpZWxkc1wiOltcIkVtcGxveWVlSWRcIixcIkVtcGxveWVlQ29kZVwiLFwiRW1wbG95ZWVDb2RlSW5EZXZpY2VcIl0sXCJUZXh0XCI6XCJCaW9EZXRhaWxzXCIsXCJEYXRhTmF2aWdhdGVVcmxGb3JtYXRTdHJpbmdcIjpcIi9FbXBsb3llZUJpb0RldGFpbHMuYXNweD9FbXBsb3llZUlkPXswfVxcdTAwMjZFbXBsb3llZUNvZGU9ezF9XFx1MDAyNkVtcGxveWVlQ29kZUluRGV2aWNlPXsyfVwiLFwiRGlzcGxheVwiOnRydWV9LHtcIlVuaXF1ZU5hbWVcIjpcIkVkaXRDb2x1bW5cIixcIlJlc2l6YWJsZVwiOnRydWUsXCJSZW9yZGVyYWJsZVwiOnRydWUsXCJTZWxlY3RhYmxlXCI6dHJ1ZSxcIkdyb3VwYWJsZVwiOnRydWUsXCJDb2x1bW5UeXBlXCI6XCJHcmlkVGVtcGxhdGVDb2x1bW5cIixcIkNvbHVtbkdyb3VwTmFtZVwiOlwiXCIsXCJEYXRhVHlwZU5hbWVcIjpcIlN5c3RlbS5TdHJpbmdcIixcIkZpbHRlckxpc3RPcHRpb25zXCI6MCxcIkN1cnJlbnRGaWx0ZXJGdW5jdGlvblwiOjAsXCJDdXJyZW50RmlsdGVyVmFsdWVcIjpcIlwiLFwiQW5kQ3Vycm5ldEZpbHRlckZ1bmN0aW9uXCI6MCxcIkFuZEN1cnJlbnRGaWx0ZXJWYWx1ZVwiOlwiXCIsXCJDdXJyZW50RmlsdGVyRnVuY3Rpb25OYW1lXCI6XCJOb0ZpbHRlclwiLFwiQW5kQ3VycmVudEZpbHRlckZ1bmN0aW9uTmFtZVwiOlwiTm9GaWx0ZXJcIixcIkRhdGFGaWVsZFwiOlwiXCIsXCJEaXNwbGF5XCI6dHJ1ZX0se1wiVW5pcXVlTmFtZVwiOlwiRGVsZXRlQ29sdW1uXCIsXCJSZXNpemFibGVcIjp0cnVlLFwiUmVvcmRlcmFibGVcIjp0cnVlLFwiU2VsZWN0YWJsZVwiOmZhbHNlLFwiR3JvdXBhYmxlXCI6ZmFsc2UsXCJDb2x1bW5UeXBlXCI6XCJHcmlkQnV0dG9uQ29sdW1uXCIsXCJDb2x1bW5Hcm91cE5hbWVcIjpcIlwiLFwiRGF0YVR5cGVOYW1lXCI6XCJTeXN0ZW0uU3RyaW5nXCIsXCJGaWx0ZXJMaXN0T3B0aW9uc1wiOjAsXCJDdXJyZW50RmlsdGVyRnVuY3Rpb25cIjowLFwiQ3VycmVudEZpbHRlclZhbHVlXCI6XCJcIixcIkFuZEN1cnJuZXRGaWx0ZXJGdW5jdGlvblwiOjAsXCJBbmRDdXJyZW50RmlsdGVyVmFsdWVcIjpcIlwiLFwiQ3VycmVudEZpbHRlckZ1bmN0aW9uTmFtZVwiOlwiTm9GaWx0ZXJcIixcIkFuZEN1cnJlbnRGaWx0ZXJGdW5jdGlvbk5hbWVcIjpcIk5vRmlsdGVyXCIsXCJCdXR0b25UeXBlXCI6XCJJbWFnZUJ1dHRvblwiLFwiQ29tbWFuZE5hbWVcIjpcIkRlbGV0ZVwiLFwiQ29tbWFuZEFyZ3VtZW50XCI6XCJcIixcIlRleHRcIjpcIlwiLFwiRGF0YVRleHRGaWVsZFwiOlwiXCIsXCJEYXRhVGV4dEZvcm1hdFN0cmluZ1wiOlwiXCIsXCJJbWFnZVVybFwiOlwiL0ltYWdlcy9kZWxldGVSZWNvcmRCdG4uZ2lmXCIsXCJEaXNwbGF5XCI6dHJ1ZX1dfV0iLCJfbG9hZGluZ1RleHQiOiJMb2FkaW5nLi4uIiwiX21hc3RlckNsaWVudElEIjoiR3JpZF9FbXBsb3llZV9jdGwwMCIsIl9yZWFkeVRleHQiOiJSZWFkeSIsIl9zaG91bGRGb2N1c09uUGFnZSI6ZmFsc2UsIl9zdGF0dXNMYWJlbElEIjoiR3JpZF9FbXBsb3llZV9jdGwwMF9jdGwwM19jdGwwMV9zdGF0dXNQYW5lbCIsImFsbG93TXVsdGlSb3dTZWxlY3Rpb24iOnRydWUsImNsaWVudFN0YXRlRmllbGRJRCI6IkdyaWRfRW1wbG95ZWVfQ2xpZW50U3RhdGUiLCJleHBhbmRJdGVtcyI6e319LCB7InBvcFVwU2hvd2luZyI6UG9wVXBTaG93aW5nLCJyb3dDb250ZXh0TWVudSI6Um93Q29udGV4dE1lbnV9LCBudWxsLCAkZ2V0KCJHcmlkX0VtcGxveWVlIikpOw0KfSk7DQpTeXMuQXBwbGljYXRpb24uYWRkX2luaXQoZnVuY3Rpb24oKSB7DQogICAgJGNyZWF0ZShUZWxlcmlrLldlYi5VSS5SYWRDb250ZXh0TWVudSwgeyJfY2hpbGRMaXN0RWxlbWVudENzc0NsYXNzIjpudWxsLCJfcG9zdEJhY2tSZWZlcmVuY2UiOiJfX2RvUG9zdEJhY2soXHUwMDI3UmFkTWVudTFcdTAwMjcsXHUwMDI3YXJndW1lbnRzXHUwMDI3KSIsIl9za2luIjoiT2ZmaWNlMjAwNyIsImNsaWVudFN0YXRlRmllbGRJRCI6IlJhZE1lbnUxX0NsaWVudFN0YXRlIiwiY29sbGFwc2VBbmltYXRpb24iOiJ7XCJkdXJhdGlvblwiOjQ1MH0iLCJlbmFibGVSb3VuZGVkQ29ybmVycyI6dHJ1ZSwiZW5hYmxlU2hhZG93cyI6dHJ1ZSwiZXhwYW5kQW5pbWF0aW9uIjoie1wiZHVyYXRpb25cIjo0NTB9IiwiaXRlbURhdGEiOlt7fSx7fSx7fSx7fSx7fSx7fSx7fSx7fSx7fSx7fSx7fSx7fSx7fSx7fV0sInRhcmdldHMiOltdfSwgbnVsbCwgbnVsbCwgJGdldCgiUmFkTWVudTEiKSk7DQp9KTsNClN5cy5BcHBsaWNhdGlvbi5hZGRfaW5pdChmdW5jdGlvbigpIHsNCiAgICAkY3JlYXRlKFRlbGVyaWsuV2ViLlVJLlJhZEJ1dHRvbiwgeyJfcG9zdEJhY2tSZWZlcmVuY2UiOiIiLCJjbGllbnRTdGF0ZUZpZWxkSUQiOiJXbmRfRW1wbG95ZWVTZXRPcHRpb25fQ19idG5fQ2hhbmdlVmFsdWVfQ2xpZW50U3RhdGUiLCJpY29uRGF0YSI6e30sImltYWdlRGF0YSI6e30sInRleHQiOiJTYXZlIiwidG9nZ2xlU3RhdGVzRGF0YSI6W10sInVuaXF1ZUdyb3VwTmFtZSI6IiIsInVuaXF1ZUlEIjoiV25kX0VtcGxveWVlU2V0T3B0aW9uJEMkYnRuX0NoYW5nZVZhbHVlIn0sIG51bGwsIG51bGwsICRnZXQoIlduZF9FbXBsb3llZVNldE9wdGlvbl9DX2J0bl9DaGFuZ2VWYWx1ZSIpKTsNCn0pOw0KU3lzLkFwcGxpY2F0aW9uLmFkZF9pbml0KGZ1bmN0aW9uKCkgew0KICAgICRjcmVhdGUoVGVsZXJpay5XZWIuVUkuUmFkV2luZG93LCB7Il9kb2NrTW9kZSI6dHJ1ZSwiYmVoYXZpb3JzIjozNywiY2xpZW50U3RhdGVGaWVsZElEIjoiV25kX0VtcGxveWVlU2V0T3B0aW9uX0NsaWVudFN0YXRlIiwiZm9ybUlEIjoiZm9ybTEiLCJoZWlnaHQiOiIxNTBweCIsImljb25VcmwiOiIiLCJtaW5pbWl6ZUljb25VcmwiOiIiLCJtb2RhbCI6dHJ1ZSwibmFtZSI6IlduZF9FbXBsb3llZVNldE9wdGlvbiIsInNraW4iOiJPZmZpY2UyMDA3IiwidGl0bGUiOiJVcGRhdGUgRW1wbG95ZWUiLCJ3aWR0aCI6IjMzMHB4In0sIG51bGwsIG51bGwsICRnZXQoIlduZF9FbXBsb3llZVNldE9wdGlvbiIpKTsNCn0pOw0KU3lzLkFwcGxpY2F0aW9uLmFkZF9pbml0KGZ1bmN0aW9uKCkgew0KICAgICRjcmVhdGUoVGVsZXJpay5XZWIuVUkuUmFkQ29tYm9Cb3gsIHsiX2Ryb3BEb3duV2lkdGgiOjAsIl9oZWlnaHQiOjAsIl9za2luIjoiT2ZmaWNlMjAwNyIsIl91bmlxdWVJZCI6IlduZF9FbXBsb3llZVNldE9wdGlvbjIkQyRkcnBfU2V0T3B0aW9uczIiLCJhbGxvd0N1c3RvbVRleHQiOnRydWUsImNsaWVudFN0YXRlRmllbGRJRCI6IlduZF9FbXBsb3llZVNldE9wdGlvbjJfQ19kcnBfU2V0T3B0aW9uczJfQ2xpZW50U3RhdGUiLCJjb2xsYXBzZUFuaW1hdGlvbiI6IntcImR1cmF0aW9uXCI6NDUwfSIsImV4cGFuZEFuaW1hdGlvbiI6IntcImR1cmF0aW9uXCI6NDUwfSIsIml0ZW1EYXRhIjpbXSwibG9jYWxpemF0aW9uIjoie1wiQWxsSXRlbXNDaGVja2VkU3RyaW5nXCI6XCJBbGwgaXRlbXMgY2hlY2tlZFwiLFwiSXRlbXNDaGVja2VkU3RyaW5nXCI6XCJpdGVtcyBjaGVja2VkXCIsXCJDaGVja0FsbFN0cmluZ1wiOlwiQ2hlY2sgQWxsXCJ9In0sIG51bGwsIG51bGwsICRnZXQoIlduZF9FbXBsb3llZVNldE9wdGlvbjJfQ19kcnBfU2V0T3B0aW9uczIiKSk7DQp9KTsNClN5cy5BcHBsaWNhdGlvbi5hZGRfaW5pdChmdW5jdGlvbigpIHsNCiAgICAkY3JlYXRlKFRlbGVyaWsuV2ViLlVJLlJhZEJ1dHRvbiwgeyJfcG9zdEJhY2tSZWZlcmVuY2UiOiIiLCJjbGllbnRTdGF0ZUZpZWxkSUQiOiJXbmRfRW1wbG95ZWVTZXRPcHRpb24yX0NfUmFkQnV0dG9uMV9DbGllbnRTdGF0ZSIsImljb25EYXRhIjp7fSwiaW1hZ2VEYXRhIjp7fSwidGV4dCI6IlNhdmUiLCJ0b2dnbGVTdGF0ZXNEYXRhIjpbXSwidW5pcXVlR3JvdXBOYW1lIjoiIiwidW5pcXVlSUQiOiJXbmRfRW1wbG95ZWVTZXRPcHRpb24yJEMkUmFkQnV0dG9uMSJ9LCBudWxsLCBudWxsLCAkZ2V0KCJXbmRfRW1wbG95ZWVTZXRPcHRpb24yX0NfUmFkQnV0dG9uMSIpKTsNCn0pOw0KU3lzLkFwcGxpY2F0aW9uLmFkZF9pbml0KGZ1bmN0aW9uKCkgew0KICAgICRjcmVhdGUoVGVsZXJpay5XZWIuVUkuUmFkV2luZG93LCB7Il9kb2NrTW9kZSI6dHJ1ZSwiYmVoYXZpb3JzIjozNywiY2xpZW50U3RhdGVGaWVsZElEIjoiV25kX0VtcGxveWVlU2V0T3B0aW9uMl9DbGllbnRTdGF0ZSIsImZvcm1JRCI6ImZvcm0xIiwiaGVpZ2h0IjoiMTUwcHgiLCJpY29uVXJsIjoiIiwibWluaW1pemVJY29uVXJsIjoiIiwibW9kYWwiOnRydWUsIm5hbWUiOiJXbmRfRW1wbG95ZWVTZXRPcHRpb24yIiwic2tpbiI6Ik9mZmljZTIwMDciLCJ0aXRsZSI6IlVwZGF0ZSBFbXBsb3llZSIsIndpZHRoIjoiMzUwcHgifSwgbnVsbCwgbnVsbCwgJGdldCgiV25kX0VtcGxveWVlU2V0T3B0aW9uMiIpKTsNCn0pOw0KU3lzLkFwcGxpY2F0aW9uLmFkZF9pbml0KGZ1bmN0aW9uKCkgew0KICAgICRjcmVhdGUoVGVsZXJpay5XZWIuVUkuUmFkV2luZG93LCB7Il9kb2NrTW9kZSI6ZmFsc2UsImJlaGF2aW9ycyI6MSwiY2xpZW50U3RhdGVGaWVsZElEIjoiSW1wb3J0RW1wbG95ZWVEZXRhaWxzX0NsaWVudFN0YXRlIiwiZm9ybUlEIjoiZm9ybTEiLCJpY29uVXJsIjoiIiwibWluaW1pemVJY29uVXJsIjoiIiwibW9kYWwiOnRydWUsIm5hbWUiOiJJbXBvcnRFbXBsb3llZURldGFpbHMiLCJza2luIjoiRGVmYXVsdCIsInRpdGxlIjoiSW1wb3J0IEVtcGxveWVlIERldGFpbHMiLCJ2aXNpYmxlU3RhdHVzYmFyIjpmYWxzZSwidmlzaWJsZVRpdGxlYmFyIjpmYWxzZX0sIG51bGwsIG51bGwsICRnZXQoIkltcG9ydEVtcGxveWVlRGV0YWlscyIpKTsNCn0pOw0KLy9dXT4NCjwvc2NyaXB0Pg0KPC9mb3JtPg0KICAgIDxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0Ij4NCiAgICAgICAgU3lzLldlYkZvcm1zLlBhZ2VSZXF1ZXN0TWFuYWdlci5nZXRJbnN0YW5jZSgpLmFkZF9lbmRSZXF1ZXN0KEVuZFJlcXVlc3RIYW5kbGVyKTsNCiAgICAgICAgZnVuY3Rpb24gRW5kUmVxdWVzdEhhbmRsZXIoc2VuZGVyLCBhcmdzKSB7DQogICAgICAgICAgICBpZiAoYXJncy5nZXRfZXJyb3IoKSAhPSB1bmRlZmluZWQpIHsNCg0KICAgICAgICAgICAgICAgIGFsZXJ0KGFyZ3MuZ2V0X2Vycm9yKCkpOw0KICAgICAgICAgICAgICAgIGFyZ3Muc2V0X2Vycm9ySGFuZGxlZCh0cnVlKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIDwvc2NyaXB0Pg0KPC9ib2R5Pg0KPC9odG1sPg0K</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
    </HTTPResponse>
    <HTTPTask id="99" hostname="nopc.shaft.com" path="/WebResource.axd?d=ZzoSQxDd3gw0cyuq4MTfZSHLibprAHzrWg-hkxZHsjN4X6f7qpj4wJmYQQZfUFfZ06OHLRyF4b6ZeX0t54SSJX_xzbPkE7f7cSG7TAH2LphS0OSyz44c_qyl9ZXSP3VCGefPEZDHYvyI1cIb8C7HjJACkjAUwer7aU6qj_o7qwNhB6EPx7ya45agyzxBGFs10&amp;t=634859606780000000" url="http://nopc.shaft.com/WebResource.axd?d=ZzoSQxDd3gw0cyuq4MTfZSHLibprAHzrWg-hkxZHsjN4X6f7qpj4wJmYQQZfUFfZ06OHLRyF4b6ZeX0t54SSJX_xzbPkE7f7cSG7TAH2LphS0OSyz44c_qyl9ZXSP3VCGefPEZDHYvyI1cIb8C7HjJACkjAUwer7aU6qj_o7qwNhB6EPx7ya45agyzxBGFs10&amp;t=634859606780000000" ip="10.10.10.53" port="80" client_ip="192.168.0.24" client_port="16334" connectionId="1876" origin="HTML" encodingType="ANSI" ordinal="1" startDateTime="2019-01-04T16:15:53.635+05:30" startTime="26758" endTime="26933" blockedTime="0" dnsTime="0" connectTime="0" sendTime="0" waitTime="0" receiveTime="0" sslNegotiateTime="0" responseBodySize="0">
      <QueryString>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>ZD1aem9TUXhEZDNndzBjeXVxNE1UZlpTSExpYnByQUh6cldnLWhreFpIc2pONFg2ZjdxcGo0d0ptWVFRWmZVRmZaMDZPSExSeUY0YjZaZVgwdDU0U1NKWF94emJQa0U3ZjdjU0c3VEFIMkxwaFMwT1N5ejQ0Y19xeWw5WlhTUDNWQ0dlZlBFWkRIWXZ5STFjSWI4QzdIakpBQ2tqQVV3ZXI3YVU2cWpfbzdxd05oQjZFUHg3eWE0NWFneXp4QkdGczEwJnQ9NjM0ODU5NjA2NzgwMDAwMDAw</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </QueryString>
      <HTTPSplittedQueryStrings>
        <HTTPHeaderEntity name="d" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>WnpvU1F4RGQzZ3cwY3l1cTRNVGZaU0hMaWJwckFIenJXZy1oa3haSHNqTjRYNmY3cXBqNHdKbVlRUVpmVUZmWjA2T0hMUnlGNGI2WmVYMHQ1NFNTSlhfeHpiUGtFN2Y3Y1NHN1RBSDJMcGhTME9TeXo0NGNfcXlsOVpYU1AzVkNHZWZQRVpESFl2eUkxY0liOEM3SGpKQUNrakFVd2VyN2FVNnFqX283cXdOaEI2RVB4N3lhNDVhZ3l6eEJHRnMxMA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="t" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>NjM0ODU5NjA2NzgwMDAwMDAw</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
      </HTTPSplittedQueryStrings>
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="Referer" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cDovL25vcGMuc2hhZnQuY29tL0VtcGxveWVlRGV0YWlscy5hc3B4</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzcxLjAuMzU3OC45OCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Host" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm9wYy5zaGFmdC5jb20=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cookie" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QVNQLk5FVF9TZXNzaW9uSWQ9MjN0bmxyMjA1Y2RxZWdxbmxtZWZ0Ynlo</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIC9XZWJSZXNvdXJjZS5heGQ/ZD1aem9TUXhEZDNndzBjeXVxNE1UZlpTSExpYnByQUh6cldnLWhreFpIc2pONFg2ZjdxcGo0d0ptWVFRWmZVRmZaMDZPSExSeUY0YjZaZVgwdDU0U1NKWF94emJQa0U3ZjdjU0c3VEFIMkxwaFMwT1N5ejQ0Y19xeWw5WlhTUDNWQ0dlZlBFWkRIWXZ5STFjSWI4QzdIakpBQ2tqQVV3ZXI3YVU2cWpfbzdxd05oQjZFUHg3eWE0NWFneXp4QkdGczEwJnQ9NjM0ODU5NjA2NzgwMDAwMDAwIEhUVFAvMS4xDQpSZWZlcmVyOiBodHRwOi8vbm9wYy5zaGFmdC5jb20vRW1wbG95ZWVEZXRhaWxzLmFzcHgNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjkNClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS83MS4wLjM1NzguOTggU2FmYXJpLzUzNy4zNg0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpBY2NlcHQ6ICovKg0KQ29ubmVjdGlvbjogS2VlcC1BbGl2ZQ0KSG9zdDogbm9wYy5zaGFmdC5jb20NCkNvb2tpZTogQVNQLk5FVF9TZXNzaW9uSWQ9MjN0bmxyMjA1Y2RxZWdxbmxtZWZ0YnloDQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="ASP.NET_SessionId" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>MjN0bmxyMjA1Y2RxZWdxbmxtZWZ0Ynlo</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>4010</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Cache-Control" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>cHVibGlj</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dGV4dC9jc3M=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Encoding" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Expires" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>U2F0LCAwNCBKYW4gMjAyMCAwNToxMTowMSBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Last-Modified" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW9uLCAxNSBPY3QgMjAxMiAyMzozNDozOCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Vary" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Server" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TWljcm9zb2Z0LUlJUy8xMC4w</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-AspNet-Version" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NC4wLjMwMzE5</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Powered-By" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QVNQLk5FVA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RnJpLCAwNCBKYW4gMjAxOSAxMDo0NjoxOSBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NDAxMA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDYWNoZS1Db250cm9sOiBwdWJsaWMNCkNvbnRlbnQtVHlwZTogdGV4dC9jc3MNCkNvbnRlbnQtRW5jb2Rpbmc6IGd6aXANCkV4cGlyZXM6IFNhdCwgMDQgSmFuIDIwMjAgMDU6MTE6MDEgR01UDQpMYXN0LU1vZGlmaWVkOiBNb24sIDE1IE9jdCAyMDEyIDIzOjM0OjM4IEdNVA0KVmFyeTogQWNjZXB0LUVuY29kaW5nDQpTZXJ2ZXI6IE1pY3Jvc29mdC1JSVMvMTAuMA0KWC1Bc3BOZXQtVmVyc2lvbjogNC4wLjMwMzE5DQpYLVBvd2VyZWQtQnk6IEFTUC5ORVQNCkRhdGU6IEZyaSwgMDQgSmFuIDIwMTkgMTA6NDY6MTkgR01UDQpDb250ZW50LUxlbmd0aDogNDAxMA0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>77u/LlJhZEdyaWRfT2ZmaWNlMjAwN3tib3JkZXI6MXB4IHNvbGlkICM2ODhjYWY7YmFja2dyb3VuZDojZmZmO2NvbG9yOiMzMzN9LlJhZEdyaWRfT2ZmaWNlMjAwNywuUmFkR3JpZF9PZmZpY2UyMDA3IC5yZ01hc3RlclRhYmxlLC5SYWRHcmlkX09mZmljZTIwMDcgLnJnRGV0YWlsVGFibGUsLlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdHcm91cFBhbmVsIHRhYmxlLC5SYWRHcmlkX09mZmljZTIwMDcgLnJnQ29tbWFuZFJvdyB0YWJsZSwuUmFkR3JpZF9PZmZpY2UyMDA3IC5yZ0VkaXRGb3JtIHRhYmxlLC5SYWRHcmlkX09mZmljZTIwMDcgLnJnUGFnZXIgdGFibGUsLkdyaWRUb29sVGlwX09mZmljZTIwMDd7Zm9udDoxMnB4LzE2cHggInNlZ29lIHVpIixhcmlhbCxzYW5zLXNlcmlmfS5SYWRHcmlkX09mZmljZTIwMDcgLnJnSGVhZGVyOmZpcnN0LWNoaWxkLC5SYWRHcmlkX09mZmljZTIwMDcgdGgucmdSZXNpemVDb2w6Zmlyc3QtY2hpbGQsLlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdGaWx0ZXJSb3c+dGQ6Zmlyc3QtY2hpbGQsLlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdSb3c+dGQ6Zmlyc3QtY2hpbGQsLlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdBbHRSb3c+dGQ6Zmlyc3QtY2hpbGR7Ym9yZGVyLWxlZnQtd2lkdGg6MDtwYWRkaW5nLWxlZnQ6OHB4fS5SYWRHcmlkX09mZmljZTIwMDcgLnJnQWRkLC5SYWRHcmlkX09mZmljZTIwMDcgLnJnUmVmcmVzaCwuUmFkR3JpZF9PZmZpY2UyMDA3IC5yZ0VkaXQsLlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdEZWwsLlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdGaWx0ZXIsLlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdQYWdlUHJldiwuUmFkR3JpZF9PZmZpY2UyMDA3IC5yZ1BhZ2VOZXh0LC5SYWRHcmlkX09mZmljZTIwMDcgLnJnUGFnZUZpcnN0LC5SYWRHcmlkX09mZmljZTIwMDcgLnJnUGFnZUxhc3QsLlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdFeHBhbmQsLlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdDb2xsYXBzZSwuUmFkR3JpZF9PZmZpY2UyMDA3IC5yZ1NvcnRBc2MsLlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdTb3J0RGVzYywuUmFkR3JpZF9PZmZpY2UyMDA3IC5yZ1VwZGF0ZSwuUmFkR3JpZF9PZmZpY2UyMDA3IC5yZ0NhbmNlbCwuUmFkR3JpZF9PZmZpY2UyMDA3IC5yZ1VuZ3JvdXAsLlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdFeHBYTFMsLlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdFeHBET0MsLlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdFeHBQREYsLlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdFeHBDU1Z7YmFja2dyb3VuZC1pbWFnZTp1cmwoJ1dlYlJlc291cmNlLmF4ZD9kPW1aQzcycHNPUDhuTl9tSkR0Y1BBVXFSbGZMdzBZMTZUR1dUYTVsQ0MyWW4zNlM4blYxdEw4bEhKcUgwZ3hiTjhHTVpJMU9ISGhRTHN5bzVoeFFadzBpaTFXOFM5UzRKVE1lOXFYZVpSMHhTclZYenRNV2djc2l0aVZ6bTQ2cnpaajlwcTFsOThvcWIxUERVZFdaczB1UWd0T29QX0lUdWZwME1FTk9iZDl6YzEmdD02MzQ4NTk2MDY3ODAwMDAwMDAnKX0uUmFkR3JpZF9PZmZpY2UyMDA3IC5yZ0hlYWRlckRpdntiYWNrZ3JvdW5kOiNkNmU1ZjMgMCAtODA1MHB4IHJlcGVhdC14IHVybCgnV2ViUmVzb3VyY2UuYXhkP2Q9bVpDNzJwc09QOG5OX21KRHRjUEFVcVJsZkx3MFkxNlRHV1RhNWxDQzJZbjM2UzhuVjF0TDhsSEpxSDBneGJOOEdNWkkxT0hIaFFMc3lvNWh4UVp3MGlpMVc4UzlTNEpUTWU5cVhlWlIweFNyVlh6dE1XZ2NzaXRpVnptNDZyelpqOXBxMWw5OG9xYjFQRFVkV1pzMHVRZ3RPb1BfSVR1ZnAwTUVOT2JkOXpjMSZ0PTYzNDg1OTYwNjc4MDAwMDAwMCcpfS5yZ1R3b0xpbmVzIC5yZ0hlYWRlckRpdntiYWNrZ3JvdW5kLXBvc2l0aW9uOjAgLTc1NTBweH0uUmFkR3JpZF9PZmZpY2UyMDA3IC5yZ0hlYWRlciwuUmFkR3JpZF9PZmZpY2UyMDA3IHRoLnJnUmVzaXplQ29sLC5SYWRHcmlkX09mZmljZTIwMDcgLnJnTXVsdGlIZWFkZXJSb3cgdGgucmdIZWFkZXIsLlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdNdWx0aUhlYWRlclJvdyB0aC5yZ1Jlc2l6ZUNvbHtib3JkZXI6c29saWQgIzVkOGNjOTtib3JkZXItd2lkdGg6MCAwIDFweCAxcHg7YmFja2dyb3VuZDowIC0yMzAwcHggcmVwZWF0LXggI2MzZDhmMSB1cmwoJ1dlYlJlc291cmNlLmF4ZD9kPW1aQzcycHNPUDhuTl9tSkR0Y1BBVXFSbGZMdzBZMTZUR1dUYTVsQ0MyWW4zNlM4blYxdEw4bEhKcUgwZ3hiTjhHTVpJMU9ISGhRTHN5bzVoeFFadzBpaTFXOFM5UzRKVE1lOXFYZVpSMHhTclZYenRNV2djc2l0aVZ6bTQ2cnpaajlwcTFsOThvcWIxUERVZFdaczB1UWd0T29QX0lUdWZwME1FTk9iZDl6YzEmdD02MzQ4NTk2MDY3ODAwMDAwMDAnKX0uUmFkR3JpZF9PZmZpY2UyMDA3IHRoLnJnU29ydGVke2JvcmRlci1ib3R0b20tY29sb3I6I2ZmOWIzNTtiYWNrZ3JvdW5kLWNvbG9yOiNmZmNhNWU7YmFja2dyb3VuZC1wb3NpdGlvbjowIC0yNjAwcHh9LlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdIZWFkZXIsLlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdIZWFkZXIgYXtjb2xvcjojMDAxNTZlfS5SYWRHcmlkX09mZmljZTIwMDcgdGgucmdTb3J0ZWQsLlJhZEdyaWRfT2ZmaWNlMjAwNyB0aC5yZ1NvcnRlZCBhe2NvbG9yOiMwMDB9LlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdSb3cgdGQsLlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdBbHRSb3cgdGQsLlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdFZGl0Um93IHRkLC5SYWRHcmlkX09mZmljZTIwMDcgLnJnRm9vdGVyIHRke2JvcmRlci1zdHlsZTpzb2xpZDtib3JkZXItd2lkdGg6MCAwIDFweCAxcHh9LlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdSb3cgdGQsLlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdBbHRSb3cgdGR7Ym9yZGVyLWNvbG9yOiNkMGQ3ZTV9LlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdSb3cgLnJnU29ydGVkLC5SYWRHcmlkX09mZmljZTIwMDcgLnJnQWx0Um93IC5yZ1NvcnRlZHtiYWNrZ3JvdW5kLWNvbG9yOiNmMmYyZjJ9LlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdTZWxlY3RlZFJvdyAucmdTb3J0ZWQsLlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdBY3RpdmVSb3cgLnJnU29ydGVkLC5SYWRHcmlkX09mZmljZTIwMDcgLnJnSG92ZXJlZFJvdyAucmdTb3J0ZWQsLlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdFZGl0Um93IC5yZ1NvcnRlZHtiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50fS5SYWRHcmlkX09mZmljZTIwMDcgLnJnUm93IGEsLlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdBbHRSb3cgYSwuUmFkR3JpZF9PZmZpY2UyMDA3IC5yZ0VkaXRSb3cgYSwuUmFkR3JpZF9PZmZpY2UyMDA3IC5yZ0Zvb3RlciBhLC5SYWRHcmlkX09mZmljZTIwMDcgLnJnRWRpdEZvcm0gYXtjb2xvcjojMDAxNTZlfS5SYWRHcmlkX09mZmljZTIwMDcgLnJnTWFzdGVyVGFibGUgLnJnU2VsZWN0ZWRDZWxsLC5SYWRHcmlkX09mZmljZTIwMDcgLnJnU2VsZWN0ZWRSb3d7YmFja2dyb3VuZDojZmZjYjYwIDAgLTM5MDBweCByZXBlYXQteCB1cmwoJ1dlYlJlc291cmNlLmF4ZD9kPW1aQzcycHNPUDhuTl9tSkR0Y1BBVXFSbGZMdzBZMTZUR1dUYTVsQ0MyWW4zNlM4blYxdEw4bEhKcUgwZ3hiTjhHTVpJMU9ISGhRTHN5bzVoeFFadzBpaTFXOFM5UzRKVE1lOXFYZVpSMHhTclZYenRNV2djc2l0aVZ6bTQ2cnpaajlwcTFsOThvcWIxUERVZFdaczB1UWd0T29QX0lUdWZwME1FTk9iZDl6YzEmdD02MzQ4NTk2MDY3ODAwMDAwMDAnKX0qK2h0bWwgLlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdTZWxlY3RlZFJvdyAucmdTb3J0ZWR7YmFja2dyb3VuZC1jb2xvcjojZmZjYjYwfSogaHRtbCAuUmFkR3JpZF9PZmZpY2UyMDA3IC5yZ1NlbGVjdGVkUm93IC5yZ1NvcnRlZHtiYWNrZ3JvdW5kLWNvbG9yOiNmZmNiNjB9LlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdNYXN0ZXJUYWJsZSAucmdBY3RpdmVDZWxsLC5SYWRHcmlkX09mZmljZTIwMDcgLnJnQWN0aXZlUm93LC5SYWRHcmlkX09mZmljZTIwMDcgLnJnSG92ZXJlZFJvd3tiYWNrZ3JvdW5kOiNlY2Y0ZmZ9KitodG1sIC5SYWRHcmlkX09mZmljZTIwMDcgLnJnQWN0aXZlUm93IC5yZ1NvcnRlZCwqK2h0bWwgLlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdIb3ZlcmVkUm93IC5yZ1NvcnRlZHtiYWNrZ3JvdW5kLWNvbG9yOiNlY2Y0ZmZ9KiBodG1sIC5SYWRHcmlkX09mZmljZTIwMDcgLnJnQWN0aXZlUm93IC5yZ1NvcnRlZCwqIGh0bWwgLlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdIb3ZlcmVkUm93IC5yZ1NvcnRlZHtiYWNrZ3JvdW5kLWNvbG9yOiNlY2Y0ZmZ9LlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdFZGl0Um93e2JhY2tncm91bmQ6I2ZmZTVhZH0qK2h0bWwgLlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdFZGl0Um93IC5yZ1NvcnRlZHtiYWNrZ3JvdW5kLWNvbG9yOiNmZmU1YWR9KiBodG1sIC5SYWRHcmlkX09mZmljZTIwMDcgLnJnRWRpdFJvdyAucmdTb3J0ZWR7YmFja2dyb3VuZC1jb2xvcjojZmZlNWFkfS5SYWRHcmlkX09mZmljZTIwMDcgLnJnU2VsZWN0ZWRSb3cgdGQsLlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdBY3RpdmVSb3cgdGQsLlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdIb3ZlcmVkUm93IHRkLC5SYWRHcmlkX09mZmljZTIwMDcgLnJnRWRpdFJvdyB0ZHtib3JkZXItbGVmdC13aWR0aDowO3BhZGRpbmctbGVmdDo4cHh9LlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdTZWxlY3RlZFJvdyB0ZHtib3JkZXItYm90dG9tLWNvbG9yOiNmZjliMzV9LlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdBY3RpdmVSb3cgdGQsLlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdIb3ZlcmVkUm93IHRkLC5SYWRHcmlkX09mZmljZTIwMDcgLnJnRWRpdFJvdyB0ZHtib3JkZXItYm90dG9tLWNvbG9yOiNkMGQ3ZTV9LlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdEcmFne2JhY2tncm91bmQtaW1hZ2U6dXJsKCdXZWJSZXNvdXJjZS5heGQ/ZD0wTERGNUpCUmh0YWlsVzRpc21WbjVUV3JHUEszWGJJaEpWSjBueTdIeVhRUnFiWmw0bE5GNEdiYnVYeDVhYTVuY2w0MklFQVJZeVdVUjAxVm5jV2pUZkdSWkxaVDdBRjI4TWZOeGJsSXB0SmZyYW5qS09rQ0JSbUIwMUJZZVMxVzlVR1ljRXlkbkJXaVZocFlNVHBnWm9lTFZDem5FbG9rWm9Oc1k1S1loWXMxJnQ9NjM0ODU5NjA2NzgwMDAwMDAwJyl9LlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdGb290ZXJEaXYsLlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdGb290ZXJ7YmFja2dyb3VuZDojOWFiNWRiIDAgLTY1MDBweCByZXBlYXQteCB1cmwoJ1dlYlJlc291cmNlLmF4ZD9kPW1aQzcycHNPUDhuTl9tSkR0Y1BBVXFSbGZMdzBZMTZUR1dUYTVsQ0MyWW4zNlM4blYxdEw4bEhKcUgwZ3hiTjhHTVpJMU9ISGhRTHN5bzVoeFFadzBpaTFXOFM5UzRKVE1lOXFYZVpSMHhTclZYenRNV2djc2l0aVZ6bTQ2cnpaajlwcTFsOThvcWIxUERVZFdaczB1UWd0T29QX0lUdWZwME1FTk9iZDl6YzEmdD02MzQ4NTk2MDY3ODAwMDAwMDAnKX0uUmFkR3JpZF9PZmZpY2UyMDA3IC5yZ0Zvb3RlciB0ZHtib3JkZXItd2lkdGg6MXB4IDA7Ym9yZGVyLWNvbG9yOiM1NjdkYjAgI2ZmZiAjZmZmO3BhZGRpbmctbGVmdDo4cHh9LlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdQYWdlciAucmdTdGF0dXN7Ym9yZGVyOjFweCBzb2xpZDtib3JkZXItd2lkdGg6MXB4IDFweCAwIDA7Ym9yZGVyLWNvbG9yOiM1ZDhjYzkgIzljYjlkY30uUmFkR3JpZF9PZmZpY2UyMDA3IC5yZ1N0YXR1cyBkaXZ7YmFja2dyb3VuZC1pbWFnZTp1cmwoJ1dlYlJlc291cmNlLmF4ZD9kPVBpVmFROTdSaUNnY204RVZVSU1IXzhmSFpYN2JISEhIRE5TdGZ0dC1kaFRzTV9sU3NRcDJtY01aNDFKODhXU1M2cE9ST3BtVlB2UG1PQmJmR3dHblRWV2U1SDNNd3ZzZWdWZ2NuZUFmVkRJZE5zcFlVVF83aERkR2plMno2MXZfeDIxZktsVExqM3ZnM0VkcE9UWll5QUl0MWE5YUFvNGE1ejFkUDBmYzB6X3Q5TTZrMEg4OG9XT3FXLUltakRtUTAmdD02MzQ4NTk2MDY3ODAwMDAwMDAnKX0uUmFkR3JpZF9PZmZpY2UyMDA3IC5yZ1BhZ2Vye2JhY2tncm91bmQ6I2VjZjNmYyAwIC03MDAwcHggcmVwZWF0LXggdXJsKCdXZWJSZXNvdXJjZS5heGQ/ZD1tWkM3MnBzT1A4bk5fbUpEdGNQQVVxUmxmTHcwWTE2VEdXVGE1bENDMlluMzZTOG5WMXRMOGxISnFIMGd4Yk44R01aSTFPSEhoUUxzeW81aHhRWncwaWkxVzhTOVM0SlRNZTlxWGVaUjB4U3JWWHp0TVdnY3NpdGlWem00NnJ6Wmo5cHExbDk4b3FiMVBEVWRXWnMwdVFndE9vUF9JVHVmcDBNRU5PYmQ5emMxJnQ9NjM0ODU5NjA2NzgwMDAwMDAwJyk7Y29sb3I6IzAwMTU2ZX0uUmFkR3JpZF9PZmZpY2UyMDA3IHRkLnJnUGFnZXJDZWxse2JvcmRlci10b3A6MXB4IHNvbGlkICM1ZDhjYzk7Ym9yZGVyLWxlZnQ6MXB4IHNvbGlkICNmZmZ9LlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdJbmZvUGFydHtjb2xvcjojM2U2OWEzfS5SYWRHcmlkX09mZmljZTIwMDcgLnJnUGFnZUZpcnN0e21hcmdpbjowIDNweCAwIDA7YmFja2dyb3VuZC1wb3NpdGlvbjowIC01NTBweH0uUmFkR3JpZF9PZmZpY2UyMDA3IC5yZ1BhZ2VGaXJzdDpob3ZlcntiYWNrZ3JvdW5kLXBvc2l0aW9uOjAgLTYwMHB4fS5SYWRHcmlkX09mZmljZTIwMDcgLnJnUGFnZVByZXZ7bWFyZ2luOjAgM3B4IDAgMDtiYWNrZ3JvdW5kLXBvc2l0aW9uOjAgLTcwMHB4fS5SYWRHcmlkX09mZmljZTIwMDcgLnJnUGFnZVByZXY6aG92ZXJ7YmFja2dyb3VuZC1wb3NpdGlvbjowIC03NTBweH0uUmFkR3JpZF9PZmZpY2UyMDA3IC5yZ1BhZ2VOZXh0e21hcmdpbjowIDAgMCAzcHg7YmFja2dyb3VuZC1wb3NpdGlvbjowIC04NTBweH0uUmFkR3JpZF9PZmZpY2UyMDA3IC5yZ1BhZ2VOZXh0OmhvdmVye2JhY2tncm91bmQtcG9zaXRpb246MCAtOTAwcHh9LlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdQYWdlTGFzdHttYXJnaW46MCAwIDAgM3B4O2JhY2tncm91bmQtcG9zaXRpb246MCAtMTAwMHB4fS5SYWRHcmlkX09mZmljZTIwMDcgLnJnUGFnZUxhc3Q6aG92ZXJ7YmFja2dyb3VuZC1wb3NpdGlvbjowIC0xMDUwcHh9LlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdQYWdlciAucmdQYWdlckJ1dHRvbntib3JkZXItY29sb3I6Izc3OTNiOTtiYWNrZ3JvdW5kOiNlOGYxZmMgcmVwZWF0LXggMCAtMTU1MHB4IHVybCgnV2ViUmVzb3VyY2UuYXhkP2Q9bVpDNzJwc09QOG5OX21KRHRjUEFVcVJsZkx3MFkxNlRHV1RhNWxDQzJZbjM2UzhuVjF0TDhsSEpxSDBneGJOOEdNWkkxT0hIaFFMc3lvNWh4UVp3MGlpMVc4UzlTNEpUTWU5cVhlWlIweFNyVlh6dE1XZ2NzaXRpVnptNDZyelpqOXBxMWw5OG9xYjFQRFVkV1pzMHVRZ3RPb1BfSVR1ZnAwTUVOT2JkOXpjMSZ0PTYzNDg1OTYwNjc4MDAwMDAwMCcpO2NvbG9yOiMwMDE1NmU7Zm9udDoxMnB4LzEycHggInNlZ29lIHVpIixhcmlhbCxzYW5zLXNlcmlmfS5SYWRHcmlkX09mZmljZTIwMDcgLnJnTnVtUGFydCBhOmhvdmVyLC5SYWRHcmlkX09mZmljZTIwMDcgLnJnTnVtUGFydCBhOmhvdmVyIHNwYW4sLlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdOdW1QYXJ0IGEucmdDdXJyZW50UGFnZSwuUmFkR3JpZF9PZmZpY2UyMDA3IC5yZ051bVBhcnQgYS5yZ0N1cnJlbnRQYWdlIHNwYW57YmFja2dyb3VuZDpuby1yZXBlYXQgdXJsKCdXZWJSZXNvdXJjZS5heGQ/ZD1tWkM3MnBzT1A4bk5fbUpEdGNQQVVxUmxmTHcwWTE2VEdXVGE1bENDMlluMzZTOG5WMXRMOGxISnFIMGd4Yk44R01aSTFPSEhoUUxzeW81aHhRWncwaWkxVzhTOVM0SlRNZTlxWGVaUjB4U3JWWHp0TVdnY3NpdGlWem00NnJ6Wmo5cHExbDk4b3FiMVBEVWRXWnMwdVFndE9vUF9JVHVmcDBNRU5PYmQ5emMxJnQ9NjM0ODU5NjA2NzgwMDAwMDAwJyl9LlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdOdW1QYXJ0IGF7Y29sb3I6IzAwMTU2ZX0uUmFkR3JpZF9PZmZpY2UyMDA3IC5yZ051bVBhcnQgYTpob3ZlcntiYWNrZ3JvdW5kLXBvc2l0aW9uOjEwMCUgLTEyNTBweH0uUmFkR3JpZF9PZmZpY2UyMDA3IC5yZ051bVBhcnQgYTpob3ZlciBzcGFue2JhY2tncm91bmQtcG9zaXRpb246MCAtMTE1MHB4fS5SYWRHcmlkX09mZmljZTIwMDcgLnJnTnVtUGFydCBhLnJnQ3VycmVudFBhZ2UsLlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdOdW1QYXJ0IGEucmdDdXJyZW50UGFnZTpob3ZlcntiYWNrZ3JvdW5kLXBvc2l0aW9uOjEwMCUgLTE0NTBweH0uUmFkR3JpZF9PZmZpY2UyMDA3IC5yZ051bVBhcnQgYS5yZ0N1cnJlbnRQYWdlIHNwYW4sLlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdOdW1QYXJ0IGEucmdDdXJyZW50UGFnZTpob3ZlciBzcGFue2JhY2tncm91bmQtcG9zaXRpb246MCAtMTM1MHB4fS5SYWRHcmlkX09mZmljZTIwMDcgLnJnSGVhZGVyIC5yZ1NvcnRBc2N7YmFja2dyb3VuZC1wb3NpdGlvbjozcHggLTE0N3B4O2hlaWdodDoxMHB4fS5SYWRHcmlkX09mZmljZTIwMDcgLnJnSGVhZGVyIC5yZ1NvcnREZXNje2JhY2tncm91bmQtcG9zaXRpb246M3B4IC05NnB4O2hlaWdodDoxMHB4fS5HcmlkUmVvcmRlclRvcF9PZmZpY2UyMDA3LC5HcmlkUmVvcmRlckJvdHRvbV9PZmZpY2UyMDA3e2hlaWdodDoxMnB4O2JhY2tncm91bmQ6MCAwIG5vLXJlcGVhdCB1cmwoJ1dlYlJlc291cmNlLmF4ZD9kPW1aQzcycHNPUDhuTl9tSkR0Y1BBVXFSbGZMdzBZMTZUR1dUYTVsQ0MyWW4zNlM4blYxdEw4bEhKcUgwZ3hiTjhHTVpJMU9ISGhRTHN5bzVoeFFadzBpaTFXOFM5UzRKVE1lOXFYZVpSMHhTclZYenRNV2djc2l0aVZ6bTQ2cnpaajlwcTFsOThvcWIxUERVZFdaczB1UWd0T29QX0lUdWZwME1FTk9iZDl6YzEmdD02MzQ4NTk2MDY3ODAwMDAwMDAnKX0uR3JpZFJlb3JkZXJCb3R0b21fT2ZmaWNlMjAwN3tiYWNrZ3JvdW5kLXBvc2l0aW9uOjAgLTUwcHh9LlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdGaWx0ZXJSb3d7YmFja2dyb3VuZDojZDZlNWYzfS5SYWRHcmlkX09mZmljZTIwMDcgLnJnRmlsdGVyUm93IHRke2JvcmRlcjpzb2xpZCAjOWViNmNlO2JvcmRlci13aWR0aDowIDAgMXB4IDFweH0uUmFkR3JpZF9PZmZpY2UyMDA3IC5yZ0ZpbHRlcntiYWNrZ3JvdW5kLXBvc2l0aW9uOjAgLTMwMHB4fS5SYWRHcmlkX09mZmljZTIwMDcgLnJnRmlsdGVyOmhvdmVye2JhY2tncm91bmQtcG9zaXRpb246MCAtMzUwcHh9LlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdGaWx0ZXJBY3RpdmUsLlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdGaWx0ZXJBY3RpdmU6aG92ZXJ7YmFja2dyb3VuZC1wb3NpdGlvbjowIC00MDBweH0uUmFkR3JpZF9PZmZpY2UyMDA3IC5yZ0ZpbHRlckJveHtib3JkZXItY29sb3I6I2FiYzFkZTtmb250OjEycHggInNlZ29lIHVpIixhcmlhbCxzYW5zLXNlcmlmO2NvbG9yOiMwMDB9LlJhZE1lbnVfT2ZmaWNlMjAwNyAucmdIQ01DbGVhciwuUmFkTWVudV9PZmZpY2UyMDA3IC5yZ0hDTUZpbHRlcntib3JkZXItY29sb3I6I2E3YmVkYiAjN2Q5OGJkICNhM2JhZDg7YmFja2dyb3VuZDojZThmMWZjIGNlbnRlciAtMjNweCByZXBlYXQteCB1cmwoJ1dlYlJlc291cmNlLmF4ZD9kPWIxMENnRW9IMVpfdEtIbVJ1SjIxSkdkM3RyalR5OThQXy00UEJrbmY1UU80U1M3cFBkVnZGcW5sbmtnZFVqZzZTaDUwV3BpTnhNWFIyUVhyR3p5M1JILU1RTGxWU1ljSjdoQ1RPS3FidGhrWFMtbWVBVnZkbmVtZ01BUy02NlhVZmdnNVo2ZlNKTnc4LXB6ZWdZclNLT1JYWW1xV0czS1Q4bFNoMUZwYWVBV3ozYnJXbU4yenVJT0VRTDdnVUxMWTAmdD02MzQ4NTk2MDY3ODAwMDAwMDAnKTtjb2xvcjojMDAxNTZlO2ZvbnQtZmFtaWx5OiJzZWdvZSB1aSIsYXJpYWwsc2Fucy1zZXJpZn0uUmFkTWVudV9PZmZpY2UyMDA3IC5yZ0hDTUNsZWFyOmhvdmVyLC5SYWRNZW51X09mZmljZTIwMDcgLnJnSENNRmlsdGVyOmhvdmVye2JvcmRlci1jb2xvcjojZDhjYTk1ICNiOWEwNzMgI2M2YmE5ZDtiYWNrZ3JvdW5kLXBvc2l0aW9uOmNlbnRlciAtNjdweDtiYWNrZ3JvdW5kLWNvbG9yOiNmZmUxOGE7Y29sb3I6IzAwMH0uR3JpZENvbnRleHRNZW51X09mZmljZTIwMDcgLnJtTGVmdEltYWdle2JhY2tncm91bmQtaW1hZ2U6dXJsKCdXZWJSZXNvdXJjZS5heGQ/ZD1Sbm9ibkZfNG1TZExMc283SHlRUWJIOW1BSUl0djlOZVhuRE9EbzVsYnlJeVBHaXpQb01mU2h3cTFYZGtpNEx3NHRzYUtSS05kUVo1SmF6Q1k5NkhfVC1lYTVvcWFGSWd1T3pIek5aaVFTVHRES3VMVUZScGJCTDJHWHM0RlY4aVdkSnV2T0x5eWZEc3NoN3h1WnJOa0NjaFdCU2FmQ29IMEw0cktXNlU1LU0xJnQ9NjM0ODU5NjA2NzgwMDAwMDAwJyl9LkdyaWRDb250ZXh0TWVudV9PZmZpY2UyMDA3IC5yZ0hDTVNvcnRBc2MgLnJtTGVmdEltYWdle2JhY2tncm91bmQtcG9zaXRpb246MCAwfS5HcmlkQ29udGV4dE1lbnVfT2ZmaWNlMjAwNyAucmdIQ01Tb3J0RGVzYyAucm1MZWZ0SW1hZ2V7YmFja2dyb3VuZC1wb3NpdGlvbjowIC00MHB4fS5HcmlkQ29udGV4dE1lbnVfT2ZmaWNlMjAwNyAucmdIQ01VbnNvcnQgLnJtTGVmdEltYWdle2JhY2tncm91bmQtcG9zaXRpb246MCAtODBweH0uR3JpZENvbnRleHRNZW51X09mZmljZTIwMDcgLnJnSENNR3JvdXAgLnJtTGVmdEltYWdle2JhY2tncm91bmQtcG9zaXRpb246MCAtMTIwcHh9LkdyaWRDb250ZXh0TWVudV9PZmZpY2UyMDA3IC5yZ0hDTVVuZ3JvdXAgLnJtTGVmdEltYWdle2JhY2tncm91bmQtcG9zaXRpb246MCAtMTYwcHh9LkdyaWRDb250ZXh0TWVudV9PZmZpY2UyMDA3IC5yZ0hDTUNvbHMgLnJtTGVmdEltYWdle2JhY2tncm91bmQtcG9zaXRpb246MCAtMjAwcHh9LkdyaWRDb250ZXh0TWVudV9PZmZpY2UyMDA3IC5yZ0hDTUZpbHRlciAucm1MZWZ0SW1hZ2V7YmFja2dyb3VuZC1wb3NpdGlvbjowIC0yNDBweH0uR3JpZENvbnRleHRNZW51X09mZmljZTIwMDcgLnJnSENNVW5maWx0ZXIgLnJtTGVmdEltYWdle2JhY2tncm91bmQtcG9zaXRpb246MCAtMjgwcHh9LlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdHcm91cFBhbmVse2JvcmRlcjowO2JvcmRlci1ib3R0b206MXB4IHNvbGlkICM2ODhjYWY7YmFja2dyb3VuZDojZWNmM2ZjfS5SYWRHcmlkX09mZmljZTIwMDcgLnJnR3JvdXBQYW5lbCB0ZHtib3JkZXI6MDtwYWRkaW5nOjNweCA0cHg7dmVydGljYWwtYWxpZ246bWlkZGxlfS5SYWRHcmlkX09mZmljZTIwMDcgLnJnR3JvdXBQYW5lbCB0ZCB0ZHtwYWRkaW5nOjB9LlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdHcm91cFBhbmVsIC5yZ1NvcnRBc2N7YmFja2dyb3VuZC1wb3NpdGlvbjo0cHggLTE0NHB4fS5SYWRHcmlkX09mZmljZTIwMDcgLnJnR3JvdXBQYW5lbCAucmdTb3J0RGVzY3tiYWNrZ3JvdW5kLXBvc2l0aW9uOjRweCAtOTRweH0uUmFkR3JpZF9PZmZpY2UyMDA3IC5yZ1VuZ3JvdXB7YmFja2dyb3VuZC1wb3NpdGlvbjowIC03NTAwcHh9LlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdHcm91cEl0ZW17Ym9yZGVyOjFweCBzb2xpZCAjNGI3OGNhO2JhY2tncm91bmQ6I2U2ZWJmNSAwIC0xOTAwcHggcmVwZWF0LXggdXJsKCdXZWJSZXNvdXJjZS5heGQ/ZD1tWkM3MnBzT1A4bk5fbUpEdGNQQVVxUmxmTHcwWTE2VEdXVGE1bENDMlluMzZTOG5WMXRMOGxISnFIMGd4Yk44R01aSTFPSEhoUUxzeW81aHhRWncwaWkxVzhTOVM0SlRNZTlxWGVaUjB4U3JWWHp0TVdnY3NpdGlWem00NnJ6Wmo5cHExbDk4b3FiMVBEVWRXWnMwdVFndE9vUF9JVHVmcDBNRU5PYmQ5emMxJnQ9NjM0ODU5NjA2NzgwMDAwMDAwJyk7Y29sb3I6IzAwMTU2ZX0uUmFkR3JpZF9PZmZpY2UyMDA3IC5yZ0dyb3VwSGVhZGVye2JhY2tncm91bmQ6I2Q3ZTZmNztmb250LXNpemU6MS4xZW07bGluZS1oZWlnaHQ6MjFweDtjb2xvcjojNTY3ZGIwfS5SYWRHcmlkX09mZmljZTIwMDcgLnJnR3JvdXBIZWFkZXIgdGR7Ym9yZGVyLXRvcDoxcHggc29saWQgI2ZjZmNmZDtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjNmY5MmIzO3BhZGRpbmctbGVmdDo4cHh9LlJhZEdyaWRfT2ZmaWNlMjAwNyB0ZC5yZ0dyb3VwQ29sLC5SYWRHcmlkX09mZmljZTIwMDcgdGQucmdFeHBhbmRDb2x7YmFja2dyb3VuZDojZDdlNmY3IG5vbmU7Ym9yZGVyLWNvbG9yOiNkN2U2Zjd9LlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdHcm91cEhlYWRlciAucmdFeHBhbmR7YmFja2dyb3VuZC1wb3NpdGlvbjo1cHggLTQ5NXB4fS5SYWRHcmlkX09mZmljZTIwMDcgLnJnR3JvdXBIZWFkZXIgLnJnQ29sbGFwc2V7YmFja2dyb3VuZC1wb3NpdGlvbjozcHggLTkzcHh9LlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdFZGl0Rm9ybXtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZDBkN2U1fS5SYWRHcmlkX09mZmljZTIwMDcgLnJnVXBkYXRle2JhY2tncm91bmQtcG9zaXRpb246MCAtMTgwMHB4fS5SYWRHcmlkX09mZmljZTIwMDcgLnJnQ2FuY2Vse2JhY2tncm91bmQtcG9zaXRpb246MCAtMTg1MHB4fS5SYWRHcmlkX09mZmljZTIwMDcgLnJnRGV0YWlsVGFibGV7Ym9yZGVyLWNvbG9yOiM2ODhjYWZ9LlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdFeHBhbmR7YmFja2dyb3VuZC1wb3NpdGlvbjo1cHggLTQ5NnB4fS5SYWRHcmlkX09mZmljZTIwMDcgLnJnQ29sbGFwc2V7YmFja2dyb3VuZC1wb3NpdGlvbjozcHggLTk0cHh9LlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdDb21tYW5kUm93e2JhY2tncm91bmQ6I2M0ZDlmMSAwIC0yMDk5cHggcmVwZWF0LXggdXJsKCdXZWJSZXNvdXJjZS5heGQ/ZD1tWkM3MnBzT1A4bk5fbUpEdGNQQVVxUmxmTHcwWTE2VEdXVGE1bENDMlluMzZTOG5WMXRMOGxISnFIMGd4Yk44R01aSTFPSEhoUUxzeW81aHhRWncwaWkxVzhTOVM0SlRNZTlxWGVaUjB4U3JWWHp0TVdnY3NpdGlWem00NnJ6Wmo5cHExbDk4b3FiMVBEVWRXWnMwdVFndE9vUF9JVHVmcDBNRU5PYmQ5emMxJnQ9NjM0ODU5NjA2NzgwMDAwMDAwJyk7Y29sb3I6IzMzM30uUmFkR3JpZF9PZmZpY2UyMDA3IC5yZ0NvbW1hbmRDZWxse2JvcmRlcjowO3BhZGRpbmc6MH0uUmFkR3JpZF9PZmZpY2UyMDA3IHRoZWFkIC5yZ0NvbW1hbmRDZWxse2JvcmRlci1ib3R0b206MXB4IHNvbGlkICM2ODhjYWZ9LlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdDb21tYW5kVGFibGUgdGR7Ym9yZGVyOjA7cGFkZGluZzoycHggN3B4fS5SYWRHcmlkX09mZmljZTIwMDcgLnJnQ29tbWFuZFRhYmxle2JvcmRlcjoxcHggc29saWQgIzllYjZjZX0uUmFkR3JpZF9PZmZpY2UyMDA3IC5yZ0NvbW1hbmRSb3cgYXtjb2xvcjojMDAxNTZlO3RleHQtZGVjb3JhdGlvbjpub25lfS5SYWRHcmlkX09mZmljZTIwMDcgLnJnQWRke21hcmdpbi1yaWdodDozcHg7YmFja2dyb3VuZC1wb3NpdGlvbjowIC0xNjUwcHh9LlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdSZWZyZXNoe21hcmdpbi1yaWdodDozcHg7YmFja2dyb3VuZC1wb3NpdGlvbjowIC0xNjAwcHh9LlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdFZGl0e2JhY2tncm91bmQtcG9zaXRpb246MCAtMTcwMHB4fS5SYWRHcmlkX09mZmljZTIwMDcgLnJnRGVse2JhY2tncm91bmQtcG9zaXRpb246MCAtMTc1MHB4fS5SYWRHcmlkX09mZmljZTIwMDcgLnJnRXhwWExTLC5SYWRHcmlkX09mZmljZTIwMDcgLnJnRXhwRE9DLC5SYWRHcmlkX09mZmljZTIwMDcgLnJnRXhwUERGLC5SYWRHcmlkX09mZmljZTIwMDcgLnJnRXhwQ1NWe2JhY2tncm91bmQtaW1hZ2U6dXJsKCdXZWJSZXNvdXJjZS5heGQ/ZD1BaVRJMl9kRmlGRWdhSThQa0JuUzdyc1c4QzZ3dlhNWDRjMzV1bjBVclNaTUJlOTJYYXBTczFmSUhwS3ZzZmlDSjNVV3NyYTFHc2xTS3BXV1JvaldURG5hWndDUFBScThoMjRMQ0Q5eGlQVzhMWk84eC0yRFNuYURNRGZ2N1J1cnc0eXNrRG9kSldjSjNxTzhmRzJCRXpZV2NZQkkxX3E2Q1d6OURoa0MyN0ExJnQ9NjM0ODU5NjA2NzgwMDAwMDAwJyl9LlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdFeHBYTFN7YmFja2dyb3VuZC1wb3NpdGlvbjowIDB9LlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdFeHBET0N7YmFja2dyb3VuZC1wb3NpdGlvbjowIC01MHB4fS5SYWRHcmlkX09mZmljZTIwMDcgLnJnRXhwUERGe2JhY2tncm91bmQtcG9zaXRpb246MCAtMTAwcHh9LlJhZEdyaWRfT2ZmaWNlMjAwNyAucmdFeHBDU1Z7YmFja2dyb3VuZC1wb3NpdGlvbjowIC0xNTBweH0ucmdDZWxsU2VsZWN0b3JBcmVhX09mZmljZTIwMDcsLkdyaWRSb3dTZWxlY3Rvcl9PZmZpY2UyMDA3e2JhY2tncm91bmQ6IzAwMTU2ZX0uR3JpZEl0ZW1Ecm9wSW5kaWNhdG9yX09mZmljZTIwMDd7Ym9yZGVyLXRvcDoxcHggZGFzaGVkICMwMDE1NmV9LkdyaWRUb29sVGlwX09mZmljZTIwMDd7Ym9yZGVyOjFweCBzb2xpZCAjNjE4N2I4O3BhZGRpbmc6M3B4O2JhY2tncm91bmQ6I2Q3ZTNmMjtjb2xvcjojMzMzfS5SYWRHcmlkUlRMX09mZmljZTIwMDcgLnJnSGVhZGVyOmZpcnN0LWNoaWxkLC5SYWRHcmlkUlRMX09mZmljZTIwMDcgdGgucmdSZXNpemVDb2w6Zmlyc3QtY2hpbGQsLlJhZEdyaWRSVExfT2ZmaWNlMjAwNyAucmdGaWx0ZXJSb3c+dGQ6Zmlyc3QtY2hpbGQsLlJhZEdyaWRSVExfT2ZmaWNlMjAwNyAucmdSb3c+dGQ6Zmlyc3QtY2hpbGQsLlJhZEdyaWRSVExfT2ZmaWNlMjAwNyAucmdBbHRSb3c+dGQ6Zmlyc3QtY2hpbGR7Ym9yZGVyLWxlZnQtd2lkdGg6MXB4O3BhZGRpbmctbGVmdDo3cHh9LlJhZEdyaWRSVExfT2ZmaWNlMjAwNyAucmdQYWdlRmlyc3R7YmFja2dyb3VuZC1wb3NpdGlvbjowIC0xMDAwcHh9LlJhZEdyaWRSVExfT2ZmaWNlMjAwNyAucmdQYWdlRmlyc3Q6aG92ZXJ7YmFja2dyb3VuZC1wb3NpdGlvbjowIC0xMDUwcHh9LlJhZEdyaWRSVExfT2ZmaWNlMjAwNyAucmdQYWdlUHJldnttYXJnaW46MCAwIDAgM3B4O2JhY2tncm91bmQtcG9zaXRpb246MCAtODUwcHh9LlJhZEdyaWRSVExfT2ZmaWNlMjAwNyAucmdQYWdlUHJldjpob3ZlcntiYWNrZ3JvdW5kLXBvc2l0aW9uOjAgLTkwMHB4fS5SYWRHcmlkUlRMX09mZmljZTIwMDcgLnJnUGFnZU5leHR7bWFyZ2luOjAgM3B4IDAgMDtiYWNrZ3JvdW5kLXBvc2l0aW9uOjAgLTcwMHB4fS5SYWRHcmlkUlRMX09mZmljZTIwMDcgLnJnUGFnZU5leHQ6aG92ZXJ7YmFja2dyb3VuZC1wb3NpdGlvbjowIC03NTBweH0uUmFkR3JpZFJUTF9PZmZpY2UyMDA3IC5yZ1BhZ2VMYXN0e2JhY2tncm91bmQtcG9zaXRpb246MCAtNTUwcHh9LlJhZEdyaWRSVExfT2ZmaWNlMjAwNyAucmdQYWdlTGFzdDpob3ZlcntiYWNrZ3JvdW5kLXBvc2l0aW9uOjAgLTYwMHB4fS5SYWRHcmlkUlRMX09mZmljZTIwMDcgLnJnR3JvdXBIZWFkZXIgLnJnRXhwYW5ke2JhY2tncm91bmQtcG9zaXRpb246LTIwcHhweCAtNDk1cHh9LlJhZEdyaWRSVExfT2ZmaWNlMjAwNyAucmdFeHBhbmR7YmFja2dyb3VuZC1wb3NpdGlvbjotMjBweCAtNDk2cHh9</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="100" hostname="nopc.shaft.com" path="/WebResource.axd?d=2bOFskvEy7FAMadZ7iWGle4gJJaOWybr-LErWOlBWxW5EdnYndmPfe58xGT3iPsmjYjqNQUARbdOIueiZSjetW0OznJXVx05KOa7V-m4JfaI2FhK92A4udTHEP3VFJXW02mwxBDt49cSIBkCAZH-PedGBPdVYyZOXhsFBw2tSj_vWchS_jbzEA_33lX7AIdT0&amp;t=634859606780000000" url="http://nopc.shaft.com/WebResource.axd?d=2bOFskvEy7FAMadZ7iWGle4gJJaOWybr-LErWOlBWxW5EdnYndmPfe58xGT3iPsmjYjqNQUARbdOIueiZSjetW0OznJXVx05KOa7V-m4JfaI2FhK92A4udTHEP3VFJXW02mwxBDt49cSIBkCAZH-PedGBPdVYyZOXhsFBw2tSj_vWchS_jbzEA_33lX7AIdT0&amp;t=634859606780000000" ip="10.10.10.53" port="80" client_ip="192.168.0.24" client_port="16346" connectionId="1880" origin="HTML" encodingType="ANSI" ordinal="2" startDateTime="2019-01-04T16:15:53.635+05:30" startTime="26758" endTime="27423" blockedTime="0" dnsTime="0" connectTime="0" sendTime="0" waitTime="0" receiveTime="0" sslNegotiateTime="0" responseBodySize="0">
      <QueryString>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>ZD0yYk9Gc2t2RXk3RkFNYWRaN2lXR2xlNGdKSmFPV3lici1MRXJXT2xCV3hXNUVkblluZG1QZmU1OHhHVDNpUHNtallqcU5RVUFSYmRPSXVlaVpTamV0VzBPem5KWFZ4MDVLT2E3Vi1tNEpmYUkyRmhLOTJBNHVkVEhFUDNWRkpYVzAybXd4QkR0NDljU0lCa0NBWkgtUGVkR0JQZFZZeVpPWGhzRkJ3MnRTal92V2NoU19qYnpFQV8zM2xYN0FJZFQwJnQ9NjM0ODU5NjA2NzgwMDAwMDAw</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </QueryString>
      <HTTPSplittedQueryStrings>
        <HTTPHeaderEntity name="d" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MmJPRnNrdkV5N0ZBTWFkWjdpV0dsZTRnSkphT1d5YnItTEVyV09sQld4VzVFZG5ZbmRtUGZlNTh4R1QzaVBzbWpZanFOUVVBUmJkT0l1ZWlaU2pldFcwT3puSlhWeDA1S09hN1YtbTRKZmFJMkZoSzkyQTR1ZFRIRVAzVkZKWFcwMm13eEJEdDQ5Y1NJQmtDQVpILVBlZEdCUGRWWXlaT1hoc0ZCdzJ0U2pfdldjaFNfamJ6RUFfMzNsWDdBSWRUMA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="t" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>NjM0ODU5NjA2NzgwMDAwMDAw</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
      </HTTPSplittedQueryStrings>
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="Referer" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cDovL25vcGMuc2hhZnQuY29tL0VtcGxveWVlRGV0YWlscy5hc3B4</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzcxLjAuMzU3OC45OCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Host" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm9wYy5zaGFmdC5jb20=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cookie" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QVNQLk5FVF9TZXNzaW9uSWQ9MjN0bmxyMjA1Y2RxZWdxbmxtZWZ0Ynlo</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIC9XZWJSZXNvdXJjZS5heGQ/ZD0yYk9Gc2t2RXk3RkFNYWRaN2lXR2xlNGdKSmFPV3lici1MRXJXT2xCV3hXNUVkblluZG1QZmU1OHhHVDNpUHNtallqcU5RVUFSYmRPSXVlaVpTamV0VzBPem5KWFZ4MDVLT2E3Vi1tNEpmYUkyRmhLOTJBNHVkVEhFUDNWRkpYVzAybXd4QkR0NDljU0lCa0NBWkgtUGVkR0JQZFZZeVpPWGhzRkJ3MnRTal92V2NoU19qYnpFQV8zM2xYN0FJZFQwJnQ9NjM0ODU5NjA2NzgwMDAwMDAwIEhUVFAvMS4xDQpSZWZlcmVyOiBodHRwOi8vbm9wYy5zaGFmdC5jb20vRW1wbG95ZWVEZXRhaWxzLmFzcHgNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjkNClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS83MS4wLjM1NzguOTggU2FmYXJpLzUzNy4zNg0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpBY2NlcHQ6ICovKg0KQ29ubmVjdGlvbjogS2VlcC1BbGl2ZQ0KSG9zdDogbm9wYy5zaGFmdC5jb20NCkNvb2tpZTogQVNQLk5FVF9TZXNzaW9uSWQ9MjN0bmxyMjA1Y2RxZWdxbmxtZWZ0YnloDQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="ASP.NET_SessionId" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>MjN0bmxyMjA1Y2RxZWdxbmxtZWZ0Ynlo</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>1701</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Cache-Control" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>cHVibGlj</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dGV4dC9jc3M=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Encoding" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Expires" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>U2F0LCAwNCBKYW4gMjAyMCAwNToxMTowMiBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Last-Modified" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW9uLCAxNSBPY3QgMjAxMiAyMzozNDozOCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Vary" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Server" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TWljcm9zb2Z0LUlJUy8xMC4w</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-AspNet-Version" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NC4wLjMwMzE5</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Powered-By" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QVNQLk5FVA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RnJpLCAwNCBKYW4gMjAxOSAxMDo0NjoyMCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTcwMQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDYWNoZS1Db250cm9sOiBwdWJsaWMNCkNvbnRlbnQtVHlwZTogdGV4dC9jc3MNCkNvbnRlbnQtRW5jb2Rpbmc6IGd6aXANCkV4cGlyZXM6IFNhdCwgMDQgSmFuIDIwMjAgMDU6MTE6MDIgR01UDQpMYXN0LU1vZGlmaWVkOiBNb24sIDE1IE9jdCAyMDEyIDIzOjM0OjM4IEdNVA0KVmFyeTogQWNjZXB0LUVuY29kaW5nDQpTZXJ2ZXI6IE1pY3Jvc29mdC1JSVMvMTAuMA0KWC1Bc3BOZXQtVmVyc2lvbjogNC4wLjMwMzE5DQpYLVBvd2VyZWQtQnk6IEFTUC5ORVQNCkRhdGU6IEZyaSwgMDQgSmFuIDIwMTkgMTA6NDY6MjAgR01UDQpDb250ZW50LUxlbmd0aDogMTcwMQ0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>77u/LlJhZENvbWJvQm94X09mZmljZTIwMDd7Y29sb3I6YmxhY2s7Zm9udDpub3JtYWwgMTJweCAiU2Vnb2UgVUkiLEFyaWFsLEhlbHZldGljYSxzYW5zLXNlcmlmO2xpbmUtaGVpZ2h0OjE2cHh9LlJhZENvbWJvQm94X09mZmljZTIwMDcgLnJjYklucHV0Q2VsbCwuUmFkQ29tYm9Cb3hfT2ZmaWNlMjAwNyAucmNiQXJyb3dDZWxse2JhY2tncm91bmQtaW1hZ2U6dXJsKCdXZWJSZXNvdXJjZS5heGQ/ZD1nTjJRWThqUzBZN0FwcDBycGNLSmhJSnFmdXhGOUUwY2VZS3NxaGNBZ1AyUjRlaElvUVpFNzRSQUVvTl93Zm5xa19IUEZqM0F0MVpHN1dvM1FRWHA4T3B3RTROUURmZTlreUtpb3ZUd1BNZDk4Mm5DVFZGLW1xTDgwSlVZbmZUYVUyS1JLWHhsa3lrcVRYaDFVSDJoc3k2UE9TaTdsRFI5dlJyNjRXM1BwQ3JfNk95S2J4U0RicXQ5T1FDdG91LVEwJnQ9NjM0ODU5NjA2NzgwMDAwMDAwJyk7X2JhY2tncm91bmQtaW1hZ2U6dXJsKCdXZWJSZXNvdXJjZS5heGQ/ZD1EaUcwR1RCREdxX1RCVll5MUlCaTI5b3pyTksyY3JUNlNrVWROOUdFZGlOYVI5ampnWFVWVGVpWXVxZEFQOTJSOFRYbmpOaHJDcDB4OUxCVUduX2JvZzBXeUpLcktoWG1meTBadUhhd2VTdG9ZTERBTVlESFR1c1Fwd09HODltTmMxTy1VdnVTbkUtcE10NWdXcjRWYVE5WFM0YVAyQU9NS1ZzMWdFc1RDNHhBR3pnSWZhaWVOY3BCa3lPMGFxUV8wJnQ9NjM0ODU5NjA2NzgwMDAwMDAwJyl9LlJhZENvbWJvQm94X09mZmljZTIwMDcgLnJjYklucHV0Q2VsbExlZnR7YmFja2dyb3VuZC1wb3NpdGlvbjowIDB9LlJhZENvbWJvQm94X09mZmljZTIwMDcgLnJjYklucHV0Q2VsbFJpZ2h0e2JhY2tncm91bmQtcG9zaXRpb246MTAwJSAwfS5SYWRDb21ib0JveF9PZmZpY2UyMDA3IC5yY2JJbnB1dHtjb2xvcjpibGFjaztmb250Om5vcm1hbCAxMnB4ICJTZWdvZSBVSSIsQXJpYWwsSGVsdmV0aWNhLHNhbnMtc2VyaWY7bGluZS1oZWlnaHQ6MTZweH0uUmFkQ29tYm9Cb3hfT2ZmaWNlMjAwNyAucmNiRW1wdHlNZXNzYWdle2NvbG9yOiM2NjY7Zm9udC1zdHlsZTppdGFsaWN9LlJhZENvbWJvQm94X09mZmljZTIwMDcgLnJjYkFycm93Q2VsbExlZnR7YmFja2dyb3VuZC1wb3NpdGlvbjowIC0xNzZweH0uUmFkQ29tYm9Cb3hfT2ZmaWNlMjAwNyAucmNiQXJyb3dDZWxsUmlnaHR7YmFja2dyb3VuZC1wb3NpdGlvbjotMThweCAtMTc2cHh9LlJhZENvbWJvQm94X09mZmljZTIwMDcgLnJjYkFycm93Q2VsbExlZnQucmNiQXJyb3dDZWxsSGlkZGVue2JhY2tncm91bmQtcG9zaXRpb246MCAwfS5SYWRDb21ib0JveF9PZmZpY2UyMDA3IC5yY2JBcnJvd0NlbGxSaWdodC5yY2JBcnJvd0NlbGxIaWRkZW57YmFja2dyb3VuZC1wb3NpdGlvbjoxMDAlIDB9LlJhZENvbWJvQm94X09mZmljZTIwMDcgLnJjYkhvdmVyZWQgLnJjYklucHV0Q2VsbExlZnR7YmFja2dyb3VuZC1wb3NpdGlvbjowIC0yMnB4fS5SYWRDb21ib0JveF9PZmZpY2UyMDA3IC5yY2JIb3ZlcmVkIC5yY2JJbnB1dENlbGxSaWdodHtiYWNrZ3JvdW5kLXBvc2l0aW9uOjEwMCUgLTIycHh9LlJhZENvbWJvQm94X09mZmljZTIwMDcgLnJjYkhvdmVyZWQgLnJjYklucHV0e2NvbG9yOmJsYWNrfS5SYWRDb21ib0JveF9PZmZpY2UyMDA3IC5yY2JIb3ZlcmVkIC5yY2JBcnJvd0NlbGxMZWZ0e2JhY2tncm91bmQtcG9zaXRpb246LTM2cHggLTE3NnB4fS5SYWRDb21ib0JveF9PZmZpY2UyMDA3IC5yY2JIb3ZlcmVkIC5yY2JBcnJvd0NlbGxSaWdodHtiYWNrZ3JvdW5kLXBvc2l0aW9uOi01NHB4IC0xNzZweH0uUmFkQ29tYm9Cb3hfT2ZmaWNlMjAwNyAucmNiSG92ZXJlZCAucmNiQXJyb3dDZWxsTGVmdC5yY2JBcnJvd0NlbGxIaWRkZW57YmFja2dyb3VuZC1wb3NpdGlvbjowIC0yMnB4fS5SYWRDb21ib0JveF9PZmZpY2UyMDA3IC5yY2JIb3ZlcmVkIC5yY2JBcnJvd0NlbGxSaWdodC5yY2JBcnJvd0NlbGxIaWRkZW57YmFja2dyb3VuZC1wb3NpdGlvbjoxMDAlIC0yMnB4fS5SYWRDb21ib0JveF9PZmZpY2UyMDA3IC5yY2JGb2N1c2VkIC5yY2JJbnB1dENlbGxMZWZ0e2JhY2tncm91bmQtcG9zaXRpb246MCAtNDRweH0uUmFkQ29tYm9Cb3hfT2ZmaWNlMjAwNyAucmNiRm9jdXNlZCAucmNiSW5wdXRDZWxsUmlnaHR7YmFja2dyb3VuZC1wb3NpdGlvbjoxMDAlIC00NHB4fS5SYWRDb21ib0JveF9PZmZpY2UyMDA3IC5yY2JGb2N1c2VkIC5yY2JJbnB1dHtjb2xvcjpibGFja30uUmFkQ29tYm9Cb3hfT2ZmaWNlMjAwNyAucmNiRm9jdXNlZCAucmNiQXJyb3dDZWxsTGVmdHtiYWNrZ3JvdW5kLXBvc2l0aW9uOi03MnB4IC0xNzZweH0uUmFkQ29tYm9Cb3hfT2ZmaWNlMjAwNyAucmNiRm9jdXNlZCAucmNiQXJyb3dDZWxsUmlnaHR7YmFja2dyb3VuZC1wb3NpdGlvbjotOTBweCAtMTc2cHh9LlJhZENvbWJvQm94X09mZmljZTIwMDcgLnJjYkZvY3VzZWQgLnJjYkFycm93Q2VsbExlZnQucmNiQXJyb3dDZWxsSGlkZGVue2JhY2tncm91bmQtcG9zaXRpb246MCAtNDRweH0uUmFkQ29tYm9Cb3hfT2ZmaWNlMjAwNyAucmNiRm9jdXNlZCAucmNiQXJyb3dDZWxsUmlnaHQucmNiQXJyb3dDZWxsSGlkZGVue2JhY2tncm91bmQtcG9zaXRpb246MTAwJSAtNDRweH0uUmFkQ29tYm9Cb3hfT2ZmaWNlMjAwNyAucmNiRGlzYWJsZWQgLnJjYklucHV0Q2VsbExlZnR7YmFja2dyb3VuZC1wb3NpdGlvbjowIC02NnB4fS5SYWRDb21ib0JveF9PZmZpY2UyMDA3IC5yY2JEaXNhYmxlZCAucmNiSW5wdXRDZWxsUmlnaHR7YmFja2dyb3VuZC1wb3NpdGlvbjoxMDAlIC02NnB4fS5SYWRDb21ib0JveF9PZmZpY2UyMDA3IC5yY2JEaXNhYmxlZCAucmNiSW5wdXR7Y29sb3I6IzhkOGQ4ZH0uUmFkQ29tYm9Cb3hfT2ZmaWNlMjAwNyAucmNiRGlzYWJsZWQgLnJjYkFycm93Q2VsbExlZnR7YmFja2dyb3VuZC1wb3NpdGlvbjotMTA4cHggLTE3NnB4fS5SYWRDb21ib0JveF9PZmZpY2UyMDA3IC5yY2JEaXNhYmxlZCAucmNiQXJyb3dDZWxsUmlnaHR7YmFja2dyb3VuZC1wb3NpdGlvbjotMTI2cHggLTE3NnB4fS5SYWRDb21ib0JveF9PZmZpY2UyMDA3IC5yY2JEaXNhYmxlZCAucmNiQXJyb3dDZWxsTGVmdC5yY2JBcnJvd0NlbGxIaWRkZW57YmFja2dyb3VuZC1wb3NpdGlvbjowIC02NnB4fS5SYWRDb21ib0JveF9PZmZpY2UyMDA3IC5yY2JEaXNhYmxlZCAucmNiQXJyb3dDZWxsUmlnaHQucmNiQXJyb3dDZWxsSGlkZGVue2JhY2tncm91bmQtcG9zaXRpb246MTAwJSAtNjZweH0uUmFkQ29tYm9Cb3hfT2ZmaWNlMjAwNyAucmNiUmVhZE9ubHkgLnJjYklucHV0Q2VsbExlZnR7YmFja2dyb3VuZC1wb3NpdGlvbjowIC04OHB4fS5SYWRDb21ib0JveF9PZmZpY2UyMDA3IC5yY2JSZWFkT25seSAucmNiSW5wdXRDZWxsUmlnaHR7YmFja2dyb3VuZC1wb3NpdGlvbjoxMDAlIC04OHB4fS5SYWRDb21ib0JveF9PZmZpY2UyMDA3IC5yY2JSZWFkT25seSAucmNiSW5wdXR7Y29sb3I6IzAwMTU2ZX0uUmFkQ29tYm9Cb3hfT2ZmaWNlMjAwNyAucmNiUmVhZE9ubHkgLnJjYkFycm93Q2VsbExlZnR7YmFja2dyb3VuZC1wb3NpdGlvbjotMTQ0cHggLTE3NnB4fS5SYWRDb21ib0JveF9PZmZpY2UyMDA3IC5yY2JSZWFkT25seSAucmNiQXJyb3dDZWxsUmlnaHR7YmFja2dyb3VuZC1wb3NpdGlvbjotMTYycHggLTE3NnB4fS5SYWRDb21ib0JveF9PZmZpY2UyMDA3IC5yY2JSZWFkT25seSAucmNiQXJyb3dDZWxsTGVmdC5yY2JBcnJvd0NlbGxIaWRkZW57YmFja2dyb3VuZC1wb3NpdGlvbjowIC04OHB4fS5SYWRDb21ib0JveF9PZmZpY2UyMDA3IC5yY2JSZWFkT25seSAucmNiQXJyb3dDZWxsUmlnaHQucmNiQXJyb3dDZWxsSGlkZGVue2JhY2tncm91bmQtcG9zaXRpb246MTAwJSAtODhweH0uUmFkQ29tYm9Cb3hfT2ZmaWNlMjAwNyAucmNiSG92ZXJlZCAucmNiUmVhZE9ubHkgLnJjYklucHV0Q2VsbExlZnR7YmFja2dyb3VuZC1wb3NpdGlvbjowIC0xMTBweH0uUmFkQ29tYm9Cb3hfT2ZmaWNlMjAwNyAucmNiSG92ZXJlZCAucmNiUmVhZE9ubHkgLnJjYklucHV0Q2VsbFJpZ2h0e2JhY2tncm91bmQtcG9zaXRpb246MTAwJSAtMTEwcHh9LlJhZENvbWJvQm94X09mZmljZTIwMDcgLnJjYkhvdmVyZWQgLnJjYlJlYWRPbmx5IC5yY2JJbnB1dHtjb2xvcjpibGFja30uUmFkQ29tYm9Cb3hfT2ZmaWNlMjAwNyAucmNiSG92ZXJlZCAucmNiUmVhZE9ubHkgLnJjYkFycm93Q2VsbExlZnR7YmFja2dyb3VuZC1wb3NpdGlvbjotMTgwcHggLTE3NnB4fS5SYWRDb21ib0JveF9PZmZpY2UyMDA3IC5yY2JIb3ZlcmVkIC5yY2JSZWFkT25seSAucmNiQXJyb3dDZWxsUmlnaHR7YmFja2dyb3VuZC1wb3NpdGlvbjotMTk4cHggLTE3NnB4fS5SYWRDb21ib0JveF9PZmZpY2UyMDA3IC5yY2JIb3ZlcmVkIC5yY2JSZWFkT25seSAucmNiQXJyb3dDZWxsTGVmdC5yY2JBcnJvd0NlbGxIaWRkZW57YmFja2dyb3VuZC1wb3NpdGlvbjowIC0xMTBweH0uUmFkQ29tYm9Cb3hfT2ZmaWNlMjAwNyAucmNiSG92ZXJlZCAucmNiUmVhZE9ubHkgLnJjYkFycm93Q2VsbFJpZ2h0LnJjYkFycm93Q2VsbEhpZGRlbntiYWNrZ3JvdW5kLXBvc2l0aW9uOjEwMCUgLTExMHB4fS5SYWRDb21ib0JveF9PZmZpY2UyMDA3IC5yY2JGb2N1c2VkIC5yY2JSZWFkT25seSAucmNiSW5wdXRDZWxsTGVmdHtiYWNrZ3JvdW5kLXBvc2l0aW9uOjAgLTEzMnB4fS5SYWRDb21ib0JveF9PZmZpY2UyMDA3IC5yY2JGb2N1c2VkIC5yY2JSZWFkT25seSAucmNiSW5wdXRDZWxsUmlnaHR7YmFja2dyb3VuZC1wb3NpdGlvbjoxMDAlIC0xMzJweH0uUmFkQ29tYm9Cb3hfT2ZmaWNlMjAwNyAucmNiRm9jdXNlZCAucmNiUmVhZE9ubHkgLnJjYklucHV0e2NvbG9yOmJsYWNrfS5SYWRDb21ib0JveF9PZmZpY2UyMDA3IC5yY2JGb2N1c2VkIC5yY2JSZWFkT25seSAucmNiQXJyb3dDZWxsTGVmdHtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0yMTZweCAtMTc2cHh9LlJhZENvbWJvQm94X09mZmljZTIwMDcgLnJjYkZvY3VzZWQgLnJjYlJlYWRPbmx5IC5yY2JBcnJvd0NlbGxSaWdodHtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0yMzRweCAtMTc2cHh9LlJhZENvbWJvQm94X09mZmljZTIwMDcgLnJjYkZvY3VzZWQgLnJjYlJlYWRPbmx5IC5yY2JBcnJvd0NlbGxMZWZ0LnJjYkFycm93Q2VsbEhpZGRlbntiYWNrZ3JvdW5kLXBvc2l0aW9uOjAgLTEzMnB4fS5SYWRDb21ib0JveF9PZmZpY2UyMDA3IC5yY2JGb2N1c2VkIC5yY2JSZWFkT25seSAucmNiQXJyb3dDZWxsUmlnaHQucmNiQXJyb3dDZWxsSGlkZGVue2JhY2tncm91bmQtcG9zaXRpb246MTAwJSAtMTMycHh9LlJhZENvbWJvQm94X09mZmljZTIwMDcgLnJjYkRpc2FibGVkIC5yY2JSZWFkT25seSAucmNiSW5wdXRDZWxsTGVmdHtiYWNrZ3JvdW5kLXBvc2l0aW9uOjAgLTE1NHB4fS5SYWRDb21ib0JveF9PZmZpY2UyMDA3IC5yY2JEaXNhYmxlZCAucmNiUmVhZE9ubHkgLnJjYklucHV0Q2VsbFJpZ2h0e2JhY2tncm91bmQtcG9zaXRpb246MTAwJSAtMTU0cHh9LlJhZENvbWJvQm94X09mZmljZTIwMDcgLnJjYkRpc2FibGVkIC5yY2JSZWFkT25seSAucmNiSW5wdXR7Y29sb3I6IzhkOGQ4ZH0uUmFkQ29tYm9Cb3hfT2ZmaWNlMjAwNyAucmNiRGlzYWJsZWQgLnJjYlJlYWRPbmx5IC5yY2JBcnJvd0NlbGxMZWZ0e2JhY2tncm91bmQtcG9zaXRpb246LTI1MnB4IC0xNzZweH0uUmFkQ29tYm9Cb3hfT2ZmaWNlMjAwNyAucmNiRGlzYWJsZWQgLnJjYlJlYWRPbmx5IC5yY2JBcnJvd0NlbGxSaWdodHtiYWNrZ3JvdW5kLXBvc2l0aW9uOi0yNzBweCAtMTc2cHh9LlJhZENvbWJvQm94X09mZmljZTIwMDcgLnJjYkRpc2FibGVkIC5yY2JSZWFkT25seSAucmNiQXJyb3dDZWxsTGVmdC5yY2JBcnJvd0NlbGxIaWRkZW57YmFja2dyb3VuZC1wb3NpdGlvbjowIC0xNTRweH0uUmFkQ29tYm9Cb3hfT2ZmaWNlMjAwNyAucmNiRGlzYWJsZWQgLnJjYlJlYWRPbmx5IC5yY2JBcnJvd0NlbGxSaWdodC5yY2JBcnJvd0NlbGxIaWRkZW57YmFja2dyb3VuZC1wb3NpdGlvbjoxMDAlIC0xNTRweH0uUmFkQ29tYm9Cb3hEcm9wRG93bl9PZmZpY2UyMDA3e2JvcmRlci1jb2xvcjojYWJjMWRlO2NvbG9yOmJsYWNrO2JhY2tncm91bmQ6d2hpdGU7Zm9udDpub3JtYWwgMTJweCAiU2Vnb2UgVUkiLEFyaWFsLEhlbHZldGljYSxzYW5zLXNlcmlmO2xpbmUtaGVpZ2h0OjE2cHh9LlJhZENvbWJvQm94RHJvcERvd25fT2ZmaWNlMjAwNyAucmNiSGVhZGVyLC5SYWRDb21ib0JveERyb3BEb3duX09mZmljZTIwMDcgLnJjYkZvb3Rlcntjb2xvcjpibGFjaztiYWNrZ3JvdW5kLWNvbG9yOiNiY2Q5ZmY7YmFja2dyb3VuZC1pbWFnZTp1cmwoJ1dlYlJlc291cmNlLmF4ZD9kPWdOMlFZOGpTMFk3QXBwMHJwY0tKaElKcWZ1eEY5RTBjZVlLc3FoY0FnUDJSNGVoSW9RWkU3NFJBRW9OX3dmbnFrX0hQRmozQXQxWkc3V28zUVFYcDhPcHdFNE5RRGZlOWt5S2lvdlR3UE1kOTgybkNUVkYtbXFMODBKVVluZlRhVTJLUktYeGxreWtxVFhoMVVIMmhzeTZQT1NpN2xEUjl2UnI2NFczUHBDcl82T3lLYnhTRGJxdDlPUUN0b3UtUTAmdD02MzQ4NTk2MDY3ODAwMDAwMDAnKTtfYmFja2dyb3VuZC1pbWFnZTp1cmwoJ1dlYlJlc291cmNlLmF4ZD9kPURpRzBHVEJER3FfVEJWWXkxSUJpMjlvenJOSzJjclQ2U2tVZE45R0VkaU5hUjlqamdYVVZUZWlZdXFkQVA5MlI4VFhuak5ockNwMHg5TEJVR25fYm9nMFd5SktyS2hYbWZ5MFp1SGF3ZVN0b1lMREFNWURIVHVzUXB3T0c4OW1OYzFPLVV2dVNuRS1wTXQ1Z1dyNFZhUTlYUzRhUDJBT01LVnMxZ0VzVEM0eEFHemdJZmFpZU5jcEJreU8wYXFRXzAmdD02MzQ4NTk2MDY3ODAwMDAwMDAnKTtiYWNrZ3JvdW5kLXBvc2l0aW9uOjAgLTUwMHB4fS5SYWRDb21ib0JveERyb3BEb3duX09mZmljZTIwMDcgLnJjYkhlYWRlcntib3JkZXItYm90dG9tLWNvbG9yOiNhYmMxZGV9LlJhZENvbWJvQm94RHJvcERvd25fT2ZmaWNlMjAwNyAucmNiRm9vdGVye2JvcmRlci10b3AtY29sb3I6I2FiYzFkZX0uUmFkQ29tYm9Cb3hEcm9wRG93bl9PZmZpY2UyMDA3IC5yY2JIb3ZlcmVke2NvbG9yOiMwMDE1NmU7YmFja2dyb3VuZDojZmZlMjdifS5SYWRDb21ib0JveERyb3BEb3duX09mZmljZTIwMDcgLnJjYkxvYWRpbmd7Y29sb3I6IzAwMTU2ZTtiYWNrZ3JvdW5kOiNmZmUyN2J9LlJhZENvbWJvQm94RHJvcERvd25fT2ZmaWNlMjAwNyAucmNiSXRlbSBlbSwuUmFkQ29tYm9Cb3hEcm9wRG93bl9PZmZpY2UyMDA3IC5yY2JIb3ZlcmVkIGVte2NvbG9yOiMwMDE1NmU7YmFja2dyb3VuZDojZmZlMjdifS5SYWRDb21ib0JveERyb3BEb3duX09mZmljZTIwMDcgLnJjYkNoZWNrQWxsSXRlbXN7Y29sb3I6YmxhY2s7YmFja2dyb3VuZC1jb2xvcjojYmNkOWZmfS5SYWRDb21ib0JveERyb3BEb3duX09mZmljZTIwMDcgLnJjYkNoZWNrQWxsSXRlbXNIb3ZlcmVke2NvbG9yOmJsYWNrO2JhY2tncm91bmQtY29sb3I6I2JjZDlmZn0uUmFkQ29tYm9Cb3hEcm9wRG93bl9PZmZpY2UyMDA3IC5yY2JNb3JlUmVzdWx0c3tib3JkZXItdG9wLWNvbG9yOiNhYmMxZGU7Y29sb3I6YmxhY2s7YmFja2dyb3VuZC1jb2xvcjojYmNkOWZmO2JhY2tncm91bmQtcG9zaXRpb246MCAtNTAwcHg7YmFja2dyb3VuZC1pbWFnZTp1cmwoJ1dlYlJlc291cmNlLmF4ZD9kPWdOMlFZOGpTMFk3QXBwMHJwY0tKaElKcWZ1eEY5RTBjZVlLc3FoY0FnUDJSNGVoSW9RWkU3NFJBRW9OX3dmbnFrX0hQRmozQXQxWkc3V28zUVFYcDhPcHdFNE5RRGZlOWt5S2lvdlR3UE1kOTgybkNUVkYtbXFMODBKVVluZlRhVTJLUktYeGxreWtxVFhoMVVIMmhzeTZQT1NpN2xEUjl2UnI2NFczUHBDcl82T3lLYnhTRGJxdDlPUUN0b3UtUTAmdD02MzQ4NTk2MDY3ODAwMDAwMDAnKTtfYmFja2dyb3VuZC1pbWFnZTp1cmwoJ1dlYlJlc291cmNlLmF4ZD9kPURpRzBHVEJER3FfVEJWWXkxSUJpMjlvenJOSzJjclQ2U2tVZE45R0VkaU5hUjlqamdYVVZUZWlZdXFkQVA5MlI4VFhuak5ockNwMHg5TEJVR25fYm9nMFd5SktyS2hYbWZ5MFp1SGF3ZVN0b1lMREFNWURIVHVzUXB3T0c4OW1OYzFPLVV2dVNuRS1wTXQ1Z1dyNFZhUTlYUzRhUDJBT01LVnMxZ0VzVEM0eEFHemdJZmFpZU5jcEJreU8wYXFRXzAmdD02MzQ4NTk2MDY3ODAwMDAwMDAnKX0uUmFkQ29tYm9Cb3hEcm9wRG93bl9PZmZpY2UyMDA3IC5yY2JNb3JlUmVzdWx0cyBhe2JhY2tncm91bmQtaW1hZ2U6dXJsKCdXZWJSZXNvdXJjZS5heGQ/ZD1nTjJRWThqUzBZN0FwcDBycGNLSmhJSnFmdXhGOUUwY2VZS3NxaGNBZ1AyUjRlaElvUVpFNzRSQUVvTl93Zm5xa19IUEZqM0F0MVpHN1dvM1FRWHA4T3B3RTROUURmZTlreUtpb3ZUd1BNZDk4Mm5DVFZGLW1xTDgwSlVZbmZUYVUyS1JLWHhsa3lrcVRYaDFVSDJoc3k2UE9TaTdsRFI5dlJyNjRXM1BwQ3JfNk95S2J4U0RicXQ5T1FDdG91LVEwJnQ9NjM0ODU5NjA2NzgwMDAwMDAwJyk7X2JhY2tncm91bmQtaW1hZ2U6dXJsKCdXZWJSZXNvdXJjZS5heGQ/ZD1EaUcwR1RCREdxX1RCVll5MUlCaTI5b3pyTksyY3JUNlNrVWROOUdFZGlOYVI5ampnWFVWVGVpWXVxZEFQOTJSOFRYbmpOaHJDcDB4OUxCVUduX2JvZzBXeUpLcktoWG1meTBadUhhd2VTdG9ZTERBTVlESFR1c1Fwd09HODltTmMxTy1VdnVTbkUtcE10NWdXcjRWYVE5WFM0YVAyQU9NS1ZzMWdFc1RDNHhBR3pnSWZhaWVOY3BCa3lPMGFxUV8wJnQ9NjM0ODU5NjA2NzgwMDAwMDAwJyk7YmFja2dyb3VuZC1wb3NpdGlvbjotMzA4cHggLTE4MXB4fS5SYWRDb21ib0JveERyb3BEb3duX09mZmljZTIwMDcgLnJjYlNlcGFyYXRvcntjb2xvcjojMDAwO2JhY2tncm91bmQ6I2ZjYzM2NX0=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="101" hostname="nopc.shaft.com" path="/WebResource.axd?d=7MJY0jNOAc01Ye-opRMcn2EV4OKTZohPYkz_p_m5xyuTpMtAXobPnQ30j6_SXfSIF_fpWpsD7Q4-KZVvMrPueS2mtmhXQwoynNEapv-I-6-9gd4C_YHEMIccXIi3F2YeKzkDcHV7QlTNG_vR4lRPrneUOLEGoAoGY_0dP3zDAed3FodajFb--XebA0JWMJn40&amp;t=634859606780000000" url="http://nopc.shaft.com/WebResource.axd?d=7MJY0jNOAc01Ye-opRMcn2EV4OKTZohPYkz_p_m5xyuTpMtAXobPnQ30j6_SXfSIF_fpWpsD7Q4-KZVvMrPueS2mtmhXQwoynNEapv-I-6-9gd4C_YHEMIccXIi3F2YeKzkDcHV7QlTNG_vR4lRPrneUOLEGoAoGY_0dP3zDAed3FodajFb--XebA0JWMJn40&amp;t=634859606780000000" ip="10.10.10.53" port="80" client_ip="192.168.0.24" client_port="16331" connectionId="1888" origin="HTML" encodingType="ANSI" ordinal="3" startDateTime="2019-01-04T16:15:53.635+05:30" startTime="26758" endTime="26913" blockedTime="0" dnsTime="0" connectTime="0" sendTime="0" waitTime="0" receiveTime="0" sslNegotiateTime="0" responseBodySize="0">
      <QueryString>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>ZD03TUpZMGpOT0FjMDFZZS1vcFJNY24yRVY0T0tUWm9oUFlrel9wX201eHl1VHBNdEFYb2JQblEzMGo2X1NYZlNJRl9mcFdwc0Q3UTQtS1pWdk1yUHVlUzJtdG1oWFF3b3luTkVhcHYtSS02LTlnZDRDX1lIRU1JY2NYSWkzRjJZZUt6a0RjSFY3UWxUTkdfdlI0bFJQcm5lVU9MRUdvQW9HWV8wZFAzekRBZWQzRm9kYWpGYi0tWGViQTBKV01KbjQwJnQ9NjM0ODU5NjA2NzgwMDAwMDAw</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </QueryString>
      <HTTPSplittedQueryStrings>
        <HTTPHeaderEntity name="d" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>N01KWTBqTk9BYzAxWWUtb3BSTWNuMkVWNE9LVFpvaFBZa3pfcF9tNXh5dVRwTXRBWG9iUG5RMzBqNl9TWGZTSUZfZnBXcHNEN1E0LUtaVnZNclB1ZVMybXRtaFhRd295bk5FYXB2LUktNi05Z2Q0Q19ZSEVNSWNjWElpM0YyWWVLemtEY0hWN1FsVE5HX3ZSNGxSUHJuZVVPTEVHb0FvR1lfMGRQM3pEQWVkM0ZvZGFqRmItLVhlYkEwSldNSm40MA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="t" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>NjM0ODU5NjA2NzgwMDAwMDAw</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
      </HTTPSplittedQueryStrings>
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="Referer" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cDovL25vcGMuc2hhZnQuY29tL0VtcGxveWVlRGV0YWlscy5hc3B4</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzcxLjAuMzU3OC45OCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Host" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm9wYy5zaGFmdC5jb20=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cookie" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QVNQLk5FVF9TZXNzaW9uSWQ9MjN0bmxyMjA1Y2RxZWdxbmxtZWZ0Ynlo</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIC9XZWJSZXNvdXJjZS5heGQ/ZD03TUpZMGpOT0FjMDFZZS1vcFJNY24yRVY0T0tUWm9oUFlrel9wX201eHl1VHBNdEFYb2JQblEzMGo2X1NYZlNJRl9mcFdwc0Q3UTQtS1pWdk1yUHVlUzJtdG1oWFF3b3luTkVhcHYtSS02LTlnZDRDX1lIRU1JY2NYSWkzRjJZZUt6a0RjSFY3UWxUTkdfdlI0bFJQcm5lVU9MRUdvQW9HWV8wZFAzekRBZWQzRm9kYWpGYi0tWGViQTBKV01KbjQwJnQ9NjM0ODU5NjA2NzgwMDAwMDAwIEhUVFAvMS4xDQpSZWZlcmVyOiBodHRwOi8vbm9wYy5zaGFmdC5jb20vRW1wbG95ZWVEZXRhaWxzLmFzcHgNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjkNClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS83MS4wLjM1NzguOTggU2FmYXJpLzUzNy4zNg0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpBY2NlcHQ6ICovKg0KQ29ubmVjdGlvbjogS2VlcC1BbGl2ZQ0KSG9zdDogbm9wYy5zaGFmdC5jb20NCkNvb2tpZTogQVNQLk5FVF9TZXNzaW9uSWQ9MjN0bmxyMjA1Y2RxZWdxbmxtZWZ0YnloDQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="ASP.NET_SessionId" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>MjN0bmxyMjA1Y2RxZWdxbmxtZWZ0Ynlo</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>1144</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Cache-Control" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>cHVibGlj</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>dGV4dC9jc3M=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Encoding" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Expires" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>U2F0LCAwNCBKYW4gMjAyMCAwNToxMTowMiBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Last-Modified" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW9uLCAxNSBPY3QgMjAxMiAyMzozNDozOCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Vary" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Server" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TWljcm9zb2Z0LUlJUy8xMC4w</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-AspNet-Version" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NC4wLjMwMzE5</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Powered-By" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QVNQLk5FVA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RnJpLCAwNCBKYW4gMjAxOSAxMDo0NjoxOSBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MTE0NA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDYWNoZS1Db250cm9sOiBwdWJsaWMNCkNvbnRlbnQtVHlwZTogdGV4dC9jc3MNCkNvbnRlbnQtRW5jb2Rpbmc6IGd6aXANCkV4cGlyZXM6IFNhdCwgMDQgSmFuIDIwMjAgMDU6MTE6MDIgR01UDQpMYXN0LU1vZGlmaWVkOiBNb24sIDE1IE9jdCAyMDEyIDIzOjM0OjM4IEdNVA0KVmFyeTogQWNjZXB0LUVuY29kaW5nDQpTZXJ2ZXI6IE1pY3Jvc29mdC1JSVMvMTAuMA0KWC1Bc3BOZXQtVmVyc2lvbjogNC4wLjMwMzE5DQpYLVBvd2VyZWQtQnk6IEFTUC5ORVQNCkRhdGU6IEZyaSwgMDQgSmFuIDIwMTkgMTA6NDY6MTkgR01UDQpDb250ZW50LUxlbmd0aDogMTE0NA0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>77u/LlJhZEJ1dHRvbl9PZmZpY2UyMDA3e2ZvbnQtZmFtaWx5OiJTZWdvZSBVSSIsQXJpYWwsSGVsdmV0aWNhLHNhbnMtc2VyaWY7Zm9udC1zaXplOjEycHh9LlJhZEJ1dHRvbl9PZmZpY2UyMDA3IC5yYkRlY29yYXRlZHtmb250LWZhbWlseToiU2Vnb2UgVUkiLEFyaWFsLEhlbHZldGljYSxzYW5zLXNlcmlmO2ZvbnQtc2l6ZToxMnB4fS5SYWRCdXR0b25fT2ZmaWNlMjAwNy5yYlNraW5uZWRCdXR0b24sLlJhZEJ1dHRvbl9PZmZpY2UyMDA3IC5yYkRlY29yYXRlZCwuUmFkQnV0dG9uX09mZmljZTIwMDcucmJWZXJ0aWNhbEJ1dHRvbiwuUmFkQnV0dG9uX09mZmljZTIwMDcucmJWZXJ0aWNhbEJ1dHRvbiAucmJEZWNvcmF0ZWQsLlJhZEJ1dHRvbl9PZmZpY2UyMDA3IC5yYlNwbGl0UmlnaHQsLlJhZEJ1dHRvbl9PZmZpY2UyMDA3IC5yYlNwbGl0TGVmdHtiYWNrZ3JvdW5kLWltYWdlOnVybCgnV2ViUmVzb3VyY2UuYXhkP2Q9WDBmNlZPaUFuQVpabm9pNU9lNENRUGEyUDRUVS12OFJFTWZIenJaRGwwZDd2RTRacGtoLWx2T1FFc2JDaHY5cVNuUW9RZ0lfVk9JS05kWHpGcFpaVklQaksyUXVoSllqcFVBdmVfQ0NvWmdSSUlCZjJUalEybjNwdjhMS043RVVIU2hJalpvZ3dwVVF5dGdaWDdkSVJ2X3JsWXhkNDhJaEhXdThoTlgza2RVYW00Ql91YXJuVWpFNHVfNFN6UF9xMCZ0PTYzNDg1OTYwNjc4MDAwMDAwMCcpO2NvbG9yOiMwMDE1NmV9LlJhZEJ1dHRvbl9PZmZpY2UyMDA3IC5yYlRvZ2dsZUNoZWNrYm94LC5SYWRCdXR0b25fT2ZmaWNlMjAwNyAucmJUb2dnbGVDaGVja2JveENoZWNrZWQsLlJhZEJ1dHRvbl9PZmZpY2UyMDA3IC5yYlRvZ2dsZUNoZWNrYm94RmlsbGVkLC5SYWRCdXR0b25fT2ZmaWNlMjAwNyAucmJUb2dnbGVSYWRpbywuUmFkQnV0dG9uX09mZmljZTIwMDcgLnJiVG9nZ2xlUmFkaW9DaGVja2Vke2JhY2tncm91bmQtaW1hZ2U6dXJsKCdXZWJSZXNvdXJjZS5heGQ/ZD1Oc1JGUEl6cVFhMmpJbENRcVJoRDdNN2t5N2hXNElqd2lCZnkwNG8tWGNNQ1VTUUxIeTl2MnpkeW1OVDJiOEItYjJMeThHYllNZ3VxSjlINTdGY2NlZGxiaGo1Z2RLYlZiQjYyRmdKOWplTmJzZkkzOHc4eW5QU0E5WDNieXBFTnFuemZGYV8tdmtMRnNEVHVOTmQzOFdpVmVmNWpPN29wRUF5UHd4a3ZOXzh6NmlyZWg1OUY1UVhxRmJzaHpFRGEwJnQ9NjM0ODU5NjA2NzgwMDAwMDAwJyl9LlJhZEJ1dHRvbl9PZmZpY2UyMDA3LnJiVG9nZ2xlQnV0dG9uLC5SYWRCdXR0b25fT2ZmaWNlMjAwNy5yYlRvZ2dsZUJ1dHRvbi5yYkRpc2FibGVkOmhvdmVye2NvbG9yOmJsYWNrfS5SYWRCdXR0b25fT2ZmaWNlMjAwNy5yYlRvZ2dsZUJ1dHRvbjpob3Zlcntjb2xvcjpibGFja30uUmFkQnV0dG9uX09mZmljZTIwMDcuUmFkQnV0dG9uLnJiTGlua0J1dHRvbntiYWNrZ3JvdW5kLWNvbG9yOiNkMmUxZjQ7Ym9yZGVyOjFweCBzb2xpZCAjYTdiZWRiO19ib3JkZXI6MXB4IHNvbGlkICNhN2JlZGIhaW1wb3J0YW50O2NvbG9yOiMwMDE1NmV9LlJhZEJ1dHRvbl9PZmZpY2UyMDA3LlJhZEJ1dHRvbi5yYkxpbmtCdXR0b246aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojZmZkNTYzO19ib3JkZXI6MXB4IHNvbGlkICNhN2JlZGIhaW1wb3J0YW50O2NvbG9yOmJsYWNrfS5SYWRCdXR0b25fT2ZmaWNlMjAwNy5yYkxpbmtCdXR0b25DaGVja2VkLC5SYWRCdXR0b25fT2ZmaWNlMjAwNy5yYkxpbmtCdXR0b25DaGVja2VkOmhvdmVye2JhY2tncm91bmQtY29sb3I6I2QyZTFmNDtjb2xvcjojMDAxNTZlO2JvcmRlcjoxcHggc29saWQgI2E3YmVkYn0uUmFkQnV0dG9uX09mZmljZTIwMDcucmJMaW5rQnV0dG9uLnJiRGlzYWJsZWQsLlJhZEJ1dHRvbl9PZmZpY2UyMDA3LnJiTGlua0J1dHRvbi5yYkRpc2FibGVkOmhvdmVye2JhY2tncm91bmQtY29sb3I6I2RkZThmNTtib3JkZXI6MXB4IHNvbGlkICM5ZWJmZGI7Y29sb3I6IzhkOGQ4ZH0uUmFkQnV0dG9uX09mZmljZTIwMDcucmJMaW5rQnV0dG9uOmhvdmVyIC5yYlNwbGl0TGVmdCwuUmFkQnV0dG9uX09mZmljZTIwMDcucmJMaW5rQnV0dG9uOmhvdmVyIC5yYlNwbGl0UmlnaHR7YmFja2dyb3VuZC1jb2xvcjojZDJlMWY0fS5SYWRCdXR0b25fT2ZmaWNlMjAwNy5yYkxpbmtCdXR0b24gLnJiU3BsaXRSaWdodHtib3JkZXItbGVmdDoxcHggc29saWQgI2E3YmVkYn0uUmFkQnV0dG9uX09mZmljZTIwMDcucmJMaW5rQnV0dG9uIC5yYlNwbGl0UmlnaHQ6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojZmZkNTYzO2JvcmRlci1sZWZ0OjFweCBzb2xpZCAjYzZiYTlkfS5SYWRCdXR0b25fT2ZmaWNlMjAwNy5yYkxpbmtCdXR0b24gLnJiU3BsaXRSaWdodDphY3RpdmUsLlJhZEJ1dHRvbl9PZmZpY2UyMDA3LnJiTGlua0J1dHRvbiAucmJTcGxpdFJpZ2h0OmZvY3Vze2JhY2tncm91bmQtY29sb3I6I2Y5OTYzMTtib3JkZXItbGVmdDoxcHggc29saWQgI2M2YmE5ZH0uUmFkQnV0dG9uX09mZmljZTIwMDcucmJMaW5rQnV0dG9uIC5yYlNwbGl0TGVmdHtib3JkZXItcmlnaHQ6MXB4IHNvbGlkICNhN2JlZGJ9LlJhZEJ1dHRvbl9PZmZpY2UyMDA3LnJiTGlua0J1dHRvbiAucmJTcGxpdExlZnQ6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojZmZkNTYzO2JvcmRlci1yaWdodDoxcHggc29saWQgI2M2YmE5ZH0uUmFkQnV0dG9uX09mZmljZTIwMDcucmJMaW5rQnV0dG9uIC5yYlNwbGl0TGVmdDphY3RpdmUsLlJhZEJ1dHRvbl9PZmZpY2UyMDA3LnJiTGlua0J1dHRvbiAucmJTcGxpdExlZnQ6Zm9jdXN7YmFja2dyb3VuZC1jb2xvcjojZjk5NjMxO2JvcmRlci1yaWdodDoxcHggc29saWQgI2M2YmE5ZH0uUmFkQnV0dG9uX09mZmljZTIwMDcucmJMaW5rQnV0dG9uLnJiRGlzYWJsZWQgLnJiU3BsaXRMZWZ0LC5SYWRCdXR0b25fT2ZmaWNlMjAwNy5yYkxpbmtCdXR0b24ucmJEaXNhYmxlZCAucmJTcGxpdExlZnQ6aG92ZXIsLlJhZEJ1dHRvbl9PZmZpY2UyMDA3LnJiTGlua0J1dHRvbi5yYkRpc2FibGVkIC5yYlNwbGl0TGVmdDphY3RpdmUsLlJhZEJ1dHRvbl9PZmZpY2UyMDA3LnJiTGlua0J1dHRvbi5yYkRpc2FibGVkIC5yYlNwbGl0TGVmdDpmb2N1c3tib3JkZXItcmlnaHQ6MXB4IHNvbGlkICM5ZWJmZGJ9LlJhZEJ1dHRvbl9PZmZpY2UyMDA3LnJiTGlua0J1dHRvbi5yYkRpc2FibGVkIC5yYlNwbGl0UmlnaHQsLlJhZEJ1dHRvbl9PZmZpY2UyMDA3LnJiTGlua0J1dHRvbi5yYkRpc2FibGVkIC5yYlNwbGl0UmlnaHQ6aG92ZXIsLlJhZEJ1dHRvbl9PZmZpY2UyMDA3LnJiTGlua0J1dHRvbi5yYkRpc2FibGVkIC5yYlNwbGl0UmlnaHQ6YWN0aXZlLC5SYWRCdXR0b25fT2ZmaWNlMjAwNy5yYkxpbmtCdXR0b24ucmJEaXNhYmxlZCAucmJTcGxpdFJpZ2h0OmZvY3Vze2JvcmRlci1sZWZ0OjFweCBzb2xpZCAjOWViZmRifQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="102" hostname="nopc.shaft.com" path="/Telerik.Web.UI.WebResource.axd?_TSM_HiddenField_=RadScriptManager1_TSM&amp;compress=1&amp;_TSM_CombinedScripts_=%3b%3bSystem.Web.Extensions%2c+Version%3d4.0.0.0%2c+Culture%3dneutral%2c+PublicKeyToken%3d31bf3856ad364e35%3aen-US%3ab7585254-495e-4311-9545-1f910247aca5%3aea597d4b%3ab25378d2%3bTelerik.Web.UI%2c+Version%3d2012.3.1016.40%2c+Culture%3dneutral%2c+PublicKeyToken%3d121fae78165ba3d4%3aen-US%3aeedc0a8d-48b8-46b8-a699-de66b4bdef1e%3a16e4e7cd%3af7645509%3a24ee1bba%3a19620875%3a874f8ea2%3af46195d3%3a490a9d4e%3abd8f85e4%3a86526ba7%3aed16cbdc%3a58366029%3a2003d0b8%3a1e771326%3aaa288e2d%3ae330518b%3ac8618e41%3ae4f8f289%3a7165f74" url="http://nopc.shaft.com/Telerik.Web.UI.WebResource.axd?_TSM_HiddenField_=RadScriptManager1_TSM&amp;compress=1&amp;_TSM_CombinedScripts_=%3b%3bSystem.Web.Extensions%2c+Version%3d4.0.0.0%2c+Culture%3dneutral%2c+PublicKeyToken%3d31bf3856ad364e35%3aen-US%3ab7585254-495e-4311-9545-1f910247aca5%3aea597d4b%3ab25378d2%3bTelerik.Web.UI%2c+Version%3d2012.3.1016.40%2c+Culture%3dneutral%2c+PublicKeyToken%3d121fae78165ba3d4%3aen-US%3aeedc0a8d-48b8-46b8-a699-de66b4bdef1e%3a16e4e7cd%3af7645509%3a24ee1bba%3a19620875%3a874f8ea2%3af46195d3%3a490a9d4e%3abd8f85e4%3a86526ba7%3aed16cbdc%3a58366029%3a2003d0b8%3a1e771326%3aaa288e2d%3ae330518b%3ac8618e41%3ae4f8f289%3a7165f74" ip="10.10.10.53" port="80" client_ip="192.168.0.24" client_port="16336" connectionId="1900" origin="HTML" encodingType="ANSI" ordinal="4" startDateTime="2019-01-04T16:15:53.720+05:30" startTime="26838" endTime="29414" blockedTime="0" dnsTime="0" connectTime="0" sendTime="0" waitTime="0" receiveTime="0" sslNegotiateTime="0" responseBodySize="0">
      <QueryString>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>X1RTTV9IaWRkZW5GaWVsZF89UmFkU2NyaXB0TWFuYWdlcjFfVFNNJmNvbXByZXNzPTEmX1RTTV9Db21iaW5lZFNjcmlwdHNfPSUzYiUzYlN5c3RlbS5XZWIuRXh0ZW5zaW9ucyUyYytWZXJzaW9uJTNkNC4wLjAuMCUyYytDdWx0dXJlJTNkbmV1dHJhbCUyYytQdWJsaWNLZXlUb2tlbiUzZDMxYmYzODU2YWQzNjRlMzUlM2Flbi1VUyUzYWI3NTg1MjU0LTQ5NWUtNDMxMS05NTQ1LTFmOTEwMjQ3YWNhNSUzYWVhNTk3ZDRiJTNhYjI1Mzc4ZDIlM2JUZWxlcmlrLldlYi5VSSUyYytWZXJzaW9uJTNkMjAxMi4zLjEwMTYuNDAlMmMrQ3VsdHVyZSUzZG5ldXRyYWwlMmMrUHVibGljS2V5VG9rZW4lM2QxMjFmYWU3ODE2NWJhM2Q0JTNhZW4tVVMlM2FlZWRjMGE4ZC00OGI4LTQ2YjgtYTY5OS1kZTY2YjRiZGVmMWUlM2ExNmU0ZTdjZCUzYWY3NjQ1NTA5JTNhMjRlZTFiYmElM2ExOTYyMDg3NSUzYTg3NGY4ZWEyJTNhZjQ2MTk1ZDMlM2E0OTBhOWQ0ZSUzYWJkOGY4NWU0JTNhODY1MjZiYTclM2FlZDE2Y2JkYyUzYTU4MzY2MDI5JTNhMjAwM2QwYjglM2ExZTc3MTMyNiUzYWFhMjg4ZTJkJTNhZTMzMDUxOGIlM2FjODYxOGU0MSUzYWU0ZjhmMjg5JTNhNzE2NWY3NA==</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </QueryString>
      <HTTPSplittedQueryStrings>
        <HTTPHeaderEntity name="_TSM_HiddenField_" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>UmFkU2NyaXB0TWFuYWdlcjFfVFNN</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="compress" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="_TSM_CombinedScripts_" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>JTNiJTNiU3lzdGVtLldlYi5FeHRlbnNpb25zJTJjK1ZlcnNpb24lM2Q0LjAuMC4wJTJjK0N1bHR1cmUlM2RuZXV0cmFsJTJjK1B1YmxpY0tleVRva2VuJTNkMzFiZjM4NTZhZDM2NGUzNSUzYWVuLVVTJTNhYjc1ODUyNTQtNDk1ZS00MzExLTk1NDUtMWY5MTAyNDdhY2E1JTNhZWE1OTdkNGIlM2FiMjUzNzhkMiUzYlRlbGVyaWsuV2ViLlVJJTJjK1ZlcnNpb24lM2QyMDEyLjMuMTAxNi40MCUyYytDdWx0dXJlJTNkbmV1dHJhbCUyYytQdWJsaWNLZXlUb2tlbiUzZDEyMWZhZTc4MTY1YmEzZDQlM2Flbi1VUyUzYWVlZGMwYThkLTQ4YjgtNDZiOC1hNjk5LWRlNjZiNGJkZWYxZSUzYTE2ZTRlN2NkJTNhZjc2NDU1MDklM2EyNGVlMWJiYSUzYTE5NjIwODc1JTNhODc0ZjhlYTIlM2FmNDYxOTVkMyUzYTQ5MGE5ZDRlJTNhYmQ4Zjg1ZTQlM2E4NjUyNmJhNyUzYWVkMTZjYmRjJTNhNTgzNjYwMjklM2EyMDAzZDBiOCUzYTFlNzcxMzI2JTNhYWEyODhlMmQlM2FlMzMwNTE4YiUzYWM4NjE4ZTQxJTNhZTRmOGYyODklM2E3MTY1Zjc0</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
      </HTTPSplittedQueryStrings>
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="Referer" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cDovL25vcGMuc2hhZnQuY29tL0VtcGxveWVlRGV0YWlscy5hc3B4</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzcxLjAuMzU3OC45OCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Host" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm9wYy5zaGFmdC5jb20=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cookie" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QVNQLk5FVF9TZXNzaW9uSWQ9MjN0bmxyMjA1Y2RxZWdxbmxtZWZ0Ynlo</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIC9UZWxlcmlrLldlYi5VSS5XZWJSZXNvdXJjZS5heGQ/X1RTTV9IaWRkZW5GaWVsZF89UmFkU2NyaXB0TWFuYWdlcjFfVFNNJmNvbXByZXNzPTEmX1RTTV9Db21iaW5lZFNjcmlwdHNfPSUzYiUzYlN5c3RlbS5XZWIuRXh0ZW5zaW9ucyUyYytWZXJzaW9uJTNkNC4wLjAuMCUyYytDdWx0dXJlJTNkbmV1dHJhbCUyYytQdWJsaWNLZXlUb2tlbiUzZDMxYmYzODU2YWQzNjRlMzUlM2Flbi1VUyUzYWI3NTg1MjU0LTQ5NWUtNDMxMS05NTQ1LTFmOTEwMjQ3YWNhNSUzYWVhNTk3ZDRiJTNhYjI1Mzc4ZDIlM2JUZWxlcmlrLldlYi5VSSUyYytWZXJzaW9uJTNkMjAxMi4zLjEwMTYuNDAlMmMrQ3VsdHVyZSUzZG5ldXRyYWwlMmMrUHVibGljS2V5VG9rZW4lM2QxMjFmYWU3ODE2NWJhM2Q0JTNhZW4tVVMlM2FlZWRjMGE4ZC00OGI4LTQ2YjgtYTY5OS1kZTY2YjRiZGVmMWUlM2ExNmU0ZTdjZCUzYWY3NjQ1NTA5JTNhMjRlZTFiYmElM2ExOTYyMDg3NSUzYTg3NGY4ZWEyJTNhZjQ2MTk1ZDMlM2E0OTBhOWQ0ZSUzYWJkOGY4NWU0JTNhODY1MjZiYTclM2FlZDE2Y2JkYyUzYTU4MzY2MDI5JTNhMjAwM2QwYjglM2ExZTc3MTMyNiUzYWFhMjg4ZTJkJTNhZTMzMDUxOGIlM2FjODYxOGU0MSUzYWU0ZjhmMjg5JTNhNzE2NWY3NCBIVFRQLzEuMQ0KUmVmZXJlcjogaHR0cDovL25vcGMuc2hhZnQuY29tL0VtcGxveWVlRGV0YWlscy5hc3B4DQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC45DQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvNzEuMC4zNTc4Ljk4IFNhZmFyaS81MzcuMzYNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0OiAqLyoNCkNvbm5lY3Rpb246IEtlZXAtQWxpdmUNCkhvc3Q6IG5vcGMuc2hhZnQuY29tDQpDb29raWU6IEFTUC5ORVRfU2Vzc2lvbklkPTIzdG5scjIwNWNkcWVncW5sbWVmdGJ5aA0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="ASP.NET_SessionId" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>MjN0bmxyMjA1Y2RxZWdxbmxtZWZ0Ynlo</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>262326</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Cache-Control" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>cHVibGljLCBtYXgtYWdlPTMxNTE1ODgx</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Type" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YXBwbGljYXRpb24veC1qYXZhc2NyaXB0</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Encoding" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Expires" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>U2F0LCAwNCBKYW4gMjAyMCAwNToxMTowMSBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Last-Modified" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VHVlLCAxNiBPY3QgMjAxMiAwMDowMDowMCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Vary" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>VXNlci1BZ2VudA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Server" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TWljcm9zb2Z0LUlJUy8xMC4w</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-AspNet-Version" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NC4wLjMwMzE5</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Powered-By" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QVNQLk5FVA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RnJpLCAwNCBKYW4gMjAxOSAxMDo0NjoxOSBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MjYyMzI2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDYWNoZS1Db250cm9sOiBwdWJsaWMsIG1heC1hZ2U9MzE1MTU4ODENCkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24veC1qYXZhc2NyaXB0DQpDb250ZW50LUVuY29kaW5nOiBnemlwDQpFeHBpcmVzOiBTYXQsIDA0IEphbiAyMDIwIDA1OjExOjAxIEdNVA0KTGFzdC1Nb2RpZmllZDogVHVlLCAxNiBPY3QgMjAxMiAwMDowMDowMCBHTVQNClZhcnk6IFVzZXItQWdlbnQNClNlcnZlcjogTWljcm9zb2Z0LUlJUy8xMC4wDQpYLUFzcE5ldC1WZXJzaW9uOiA0LjAuMzAzMTkNClgtUG93ZXJlZC1CeTogQVNQLk5FVA0KRGF0ZTogRnJpLCAwNCBKYW4gMjAxOSAxMDo0NjoxOSBHTVQNCkNvbnRlbnQtTGVuZ3RoOiAyNjIzMjYNCg0K</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>LyogU1RBUlQgTWljcm9zb2Z0QWpheC5qcyAqLw0KLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQovLyBDb3B5cmlnaHQgKEMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC4NCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLy8gTWljcm9zb2Z0QWpheC5qcw0KRnVuY3Rpb24uX190eXBlTmFtZT0iRnVuY3Rpb24iO0Z1bmN0aW9uLl9fY2xhc3M9dHJ1ZTtGdW5jdGlvbi5jcmVhdGVDYWxsYmFjaz1mdW5jdGlvbihiLGEpe3JldHVybiBmdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg7aWYoZT4wKXt2YXIgZD1bXTtmb3IodmFyIGM9MDtjPGU7YysrKWRbY109YXJndW1lbnRzW2NdO2RbZV09YTtyZXR1cm4gYi5hcHBseSh0aGlzLGQpfXJldHVybiBiLmNhbGwodGhpcyxhKX19O0Z1bmN0aW9uLmNyZWF0ZURlbGVnYXRlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGIuYXBwbHkoYSxhcmd1bWVudHMpfX07RnVuY3Rpb24uZW1wdHlGdW5jdGlvbj1GdW5jdGlvbi5lbXB0eU1ldGhvZD1mdW5jdGlvbigpe307RnVuY3Rpb24udmFsaWRhdGVQYXJhbWV0ZXJzPWZ1bmN0aW9uKGMsYixhKXtyZXR1cm4gRnVuY3Rpb24uX3ZhbGlkYXRlUGFyYW1zKGMsYixhKX07RnVuY3Rpb24uX3ZhbGlkYXRlUGFyYW1zPWZ1bmN0aW9uKGcsZSxjKXt2YXIgYSxkPWUubGVuZ3RoO2M9Y3x8dHlwZW9mIGM9PT0idW5kZWZpbmVkIjthPUZ1bmN0aW9uLl92YWxpZGF0ZVBhcmFtZXRlckNvdW50KGcsZSxjKTtpZihhKXthLnBvcFN0YWNrRnJhbWUoKTtyZXR1cm4gYX1mb3IodmFyIGI9MCxpPWcubGVuZ3RoO2I8aTtiKyspe3ZhciBmPWVbTWF0aC5taW4oYixkLTEpXSxoPWYubmFtZTtpZihmLnBhcmFtZXRlckFycmF5KWgrPSJbIisoYi1kKzEpKyJdIjtlbHNlIGlmKCFjJiZiPj1kKWJyZWFrO2E9RnVuY3Rpb24uX3ZhbGlkYXRlUGFyYW1ldGVyKGdbYl0sZixoKTtpZihhKXthLnBvcFN0YWNrRnJhbWUoKTtyZXR1cm4gYX19cmV0dXJuIG51bGx9O0Z1bmN0aW9uLl92YWxpZGF0ZVBhcmFtZXRlckNvdW50PWZ1bmN0aW9uKGosZCxpKXt2YXIgYSxjLGI9ZC5sZW5ndGgsZT1qLmxlbmd0aDtpZihlPGIpe3ZhciBmPWI7Zm9yKGE9MDthPGI7YSsrKXt2YXIgZz1kW2FdO2lmKGcub3B0aW9uYWx8fGcucGFyYW1ldGVyQXJyYXkpZi0tfWlmKGU8ZiljPXRydWV9ZWxzZSBpZihpJiZlPmIpe2M9dHJ1ZTtmb3IoYT0wO2E8YjthKyspaWYoZFthXS5wYXJhbWV0ZXJBcnJheSl7Yz1mYWxzZTticmVha319aWYoYyl7dmFyIGg9RXJyb3IucGFyYW1ldGVyQ291bnQoKTtoLnBvcFN0YWNrRnJhbWUoKTtyZXR1cm4gaH1yZXR1cm4gbnVsbH07RnVuY3Rpb24uX3ZhbGlkYXRlUGFyYW1ldGVyPWZ1bmN0aW9uKGMsYSxoKXt2YXIgYixnPWEudHlwZSxsPSEhYS5pbnRlZ2VyLGs9ISFhLmRvbUVsZW1lbnQsbT0hIWEubWF5QmVOdWxsO2I9RnVuY3Rpb24uX3ZhbGlkYXRlUGFyYW1ldGVyVHlwZShjLGcsbCxrLG0saCk7aWYoYil7Yi5wb3BTdGFja0ZyYW1lKCk7cmV0dXJuIGJ9dmFyIGU9YS5lbGVtZW50VHlwZSxmPSEhYS5lbGVtZW50TWF5QmVOdWxsO2lmKGc9PT1BcnJheSYmdHlwZW9mIGMhPT0idW5kZWZpbmVkIiYmYyE9PW51bGwmJihlfHwhZikpe3ZhciBqPSEhYS5lbGVtZW50SW50ZWdlcixpPSEhYS5lbGVtZW50RG9tRWxlbWVudDtmb3IodmFyIGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIG49Y1tkXTtiPUZ1bmN0aW9uLl92YWxpZGF0ZVBhcmFtZXRlclR5cGUobixlLGosaSxmLGgrIlsiK2QrIl0iKTtpZihiKXtiLnBvcFN0YWNrRnJhbWUoKTtyZXR1cm4gYn19fXJldHVybiBudWxsfTtGdW5jdGlvbi5fdmFsaWRhdGVQYXJhbWV0ZXJUeXBlPWZ1bmN0aW9uKGIsYyxrLGosaCxkKXt2YXIgYSxnO2lmKHR5cGVvZiBiPT09InVuZGVmaW5lZCIpaWYoaClyZXR1cm4gbnVsbDtlbHNle2E9RXJyb3IuYXJndW1lbnRVbmRlZmluZWQoZCk7YS5wb3BTdGFja0ZyYW1lKCk7cmV0dXJuIGF9aWYoYj09PW51bGwpaWYoaClyZXR1cm4gbnVsbDtlbHNle2E9RXJyb3IuYXJndW1lbnROdWxsKGQpO2EucG9wU3RhY2tGcmFtZSgpO3JldHVybiBhfWlmKGMmJmMuX19lbnVtKXtpZih0eXBlb2YgYiE9PSJudW1iZXIiKXthPUVycm9yLmFyZ3VtZW50VHlwZShkLE9iamVjdC5nZXRUeXBlKGIpLGMpO2EucG9wU3RhY2tGcmFtZSgpO3JldHVybiBhfWlmKGIlMT09PTApe3ZhciBlPWMucHJvdG90eXBlO2lmKCFjLl9fZmxhZ3N8fGI9PT0wKXtmb3IoZyBpbiBlKWlmKGVbZ109PT1iKXJldHVybiBudWxsfWVsc2V7dmFyIGk9Yjtmb3IoZyBpbiBlKXt2YXIgZj1lW2ddO2lmKGY9PT0wKWNvbnRpbnVlO2lmKChmJmIpPT09ZilpLT1mO2lmKGk9PT0wKXJldHVybiBudWxsfX19YT1FcnJvci5hcmd1bWVudE91dE9mUmFuZ2UoZCxiLFN0cmluZy5mb3JtYXQoU3lzLlJlcy5lbnVtSW52YWxpZFZhbHVlLGIsYy5nZXROYW1lKCkpKTthLnBvcFN0YWNrRnJhbWUoKTtyZXR1cm4gYX1pZihqJiYoIVN5cy5faXNEb21FbGVtZW50KGIpfHxiLm5vZGVUeXBlPT09Mykpe2E9RXJyb3IuYXJndW1lbnQoZCxTeXMuUmVzLmFyZ3VtZW50RG9tRWxlbWVudCk7YS5wb3BTdGFja0ZyYW1lKCk7cmV0dXJuIGF9aWYoYyYmIVN5cy5faXNJbnN0YW5jZU9mVHlwZShjLGIpKXthPUVycm9yLmFyZ3VtZW50VHlwZShkLE9iamVjdC5nZXRUeXBlKGIpLGMpO2EucG9wU3RhY2tGcmFtZSgpO3JldHVybiBhfWlmKGM9PT1OdW1iZXImJmspaWYoYiUxIT09MCl7YT1FcnJvci5hcmd1bWVudE91dE9mUmFuZ2UoZCxiLFN5cy5SZXMuYXJndW1lbnRJbnRlZ2VyKTthLnBvcFN0YWNrRnJhbWUoKTtyZXR1cm4gYX1yZXR1cm4gbnVsbH07RXJyb3IuX190eXBlTmFtZT0iRXJyb3IiO0Vycm9yLl9fY2xhc3M9dHJ1ZTtFcnJvci5jcmVhdGU9ZnVuY3Rpb24oZCxiKXt2YXIgYT1uZXcgRXJyb3IoZCk7YS5tZXNzYWdlPWQ7aWYoYilmb3IodmFyIGMgaW4gYilhW2NdPWJbY107YS5wb3BTdGFja0ZyYW1lKCk7cmV0dXJuIGF9O0Vycm9yLmFyZ3VtZW50PWZ1bmN0aW9uKGEsYyl7dmFyIGI9IlN5cy5Bcmd1bWVudEV4Y2VwdGlvbjogIisoYz9jOlN5cy5SZXMuYXJndW1lbnQpO2lmKGEpYis9IlxuIitTdHJpbmcuZm9ybWF0KFN5cy5SZXMucGFyYW1OYW1lLGEpO3ZhciBkPUVycm9yLmNyZWF0ZShiLHtuYW1lOiJTeXMuQXJndW1lbnRFeGNlcHRpb24iLHBhcmFtTmFtZTphfSk7ZC5wb3BTdGFja0ZyYW1lKCk7cmV0dXJuIGR9O0Vycm9yLmFyZ3VtZW50TnVsbD1mdW5jdGlvbihhLGMpe3ZhciBiPSJTeXMuQXJndW1lbnROdWxsRXhjZXB0aW9uOiAiKyhjP2M6U3lzLlJlcy5hcmd1bWVudE51bGwpO2lmKGEpYis9IlxuIitTdHJpbmcuZm9ybWF0KFN5cy5SZXMucGFyYW1OYW1lLGEpO3ZhciBkPUVycm9yLmNyZWF0ZShiLHtuYW1lOiJTeXMuQXJndW1lbnROdWxsRXhjZXB0aW9uIixwYXJhbU5hbWU6YX0pO2QucG9wU3RhY2tGcmFtZSgpO3JldHVybiBkfTtFcnJvci5hcmd1bWVudE91dE9mUmFuZ2U9ZnVuY3Rpb24oYyxhLGQpe3ZhciBiPSJTeXMuQXJndW1lbnRPdXRPZlJhbmdlRXhjZXB0aW9uOiAiKyhkP2Q6U3lzLlJlcy5hcmd1bWVudE91dE9mUmFuZ2UpO2lmKGMpYis9IlxuIitTdHJpbmcuZm9ybWF0KFN5cy5SZXMucGFyYW1OYW1lLGMpO2lmKHR5cGVvZiBhIT09InVuZGVmaW5lZCImJmEhPT1udWxsKWIrPSJcbiIrU3RyaW5nLmZvcm1hdChTeXMuUmVzLmFjdHVhbFZhbHVlLGEpO3ZhciBlPUVycm9yLmNyZWF0ZShiLHtuYW1lOiJTeXMuQXJndW1lbnRPdXRPZlJhbmdlRXhjZXB0aW9uIixwYXJhbU5hbWU6YyxhY3R1YWxWYWx1ZTphfSk7ZS5wb3BTdGFja0ZyYW1lKCk7cmV0dXJuIGV9O0Vycm9yLmFyZ3VtZW50VHlwZT1mdW5jdGlvbihkLGMsYixlKXt2YXIgYT0iU3lzLkFyZ3VtZW50VHlwZUV4Y2VwdGlvbjogIjtpZihlKWErPWU7ZWxzZSBpZihjJiZiKWErPVN0cmluZy5mb3JtYXQoU3lzLlJlcy5hcmd1bWVudFR5cGVXaXRoVHlwZXMsYy5nZXROYW1lKCksYi5nZXROYW1lKCkpO2Vsc2UgYSs9U3lzLlJlcy5hcmd1bWVudFR5cGU7aWYoZClhKz0iXG4iK1N0cmluZy5mb3JtYXQoU3lzLlJlcy5wYXJhbU5hbWUsZCk7dmFyIGY9RXJyb3IuY3JlYXRlKGEse25hbWU6IlN5cy5Bcmd1bWVudFR5cGVFeGNlcHRpb24iLHBhcmFtTmFtZTpkLGFjdHVhbFR5cGU6YyxleHBlY3RlZFR5cGU6Yn0pO2YucG9wU3RhY2tGcmFtZSgpO3JldHVybiBmfTtFcnJvci5hcmd1bWVudFVuZGVmaW5lZD1mdW5jdGlvbihhLGMpe3ZhciBiPSJTeXMuQXJndW1lbnRVbmRlZmluZWRFeGNlcHRpb246ICIrKGM/YzpTeXMuUmVzLmFyZ3VtZW50VW5kZWZpbmVkKTtpZihhKWIrPSJcbiIrU3RyaW5nLmZvcm1hdChTeXMuUmVzLnBhcmFtTmFtZSxhKTt2YXIgZD1FcnJvci5jcmVhdGUoYix7bmFtZToiU3lzLkFyZ3VtZW50VW5kZWZpbmVkRXhjZXB0aW9uIixwYXJhbU5hbWU6YX0pO2QucG9wU3RhY2tGcmFtZSgpO3JldHVybiBkfTtFcnJvci5mb3JtYXQ9ZnVuY3Rpb24oYSl7dmFyIGM9IlN5cy5Gb3JtYXRFeGNlcHRpb246ICIrKGE/YTpTeXMuUmVzLmZvcm1hdCksYj1FcnJvci5jcmVhdGUoYyx7bmFtZToiU3lzLkZvcm1hdEV4Y2VwdGlvbiJ9KTtiLnBvcFN0YWNrRnJhbWUoKTtyZXR1cm4gYn07RXJyb3IuaW52YWxpZE9wZXJhdGlvbj1mdW5jdGlvbihhKXt2YXIgYz0iU3lzLkludmFsaWRPcGVyYXRpb25FeGNlcHRpb246ICIrKGE/YTpTeXMuUmVzLmludmFsaWRPcGVyYXRpb24pLGI9RXJyb3IuY3JlYXRlKGMse25hbWU6IlN5cy5JbnZhbGlkT3BlcmF0aW9uRXhjZXB0aW9uIn0pO2IucG9wU3RhY2tGcmFtZSgpO3JldHVybiBifTtFcnJvci5ub3RJbXBsZW1lbnRlZD1mdW5jdGlvbihhKXt2YXIgYz0iU3lzLk5vdEltcGxlbWVudGVkRXhjZXB0aW9uOiAiKyhhP2E6U3lzLlJlcy5ub3RJbXBsZW1lbnRlZCksYj1FcnJvci5jcmVhdGUoYyx7bmFtZToiU3lzLk5vdEltcGxlbWVudGVkRXhjZXB0aW9uIn0pO2IucG9wU3RhY2tGcmFtZSgpO3JldHVybiBifTtFcnJvci5wYXJhbWV0ZXJDb3VudD1mdW5jdGlvbihhKXt2YXIgYz0iU3lzLlBhcmFtZXRlckNvdW50RXhjZXB0aW9uOiAiKyhhP2E6U3lzLlJlcy5wYXJhbWV0ZXJDb3VudCksYj1FcnJvci5jcmVhdGUoYyx7bmFtZToiU3lzLlBhcmFtZXRlckNvdW50RXhjZXB0aW9uIn0pO2IucG9wU3RhY2tGcmFtZSgpO3JldHVybiBifTtFcnJvci5wcm90b3R5cGUucG9wU3RhY2tGcmFtZT1mdW5jdGlvbigpe2lmKHR5cGVvZiB0aGlzLnN0YWNrPT09InVuZGVmaW5lZCJ8fHRoaXMuc3RhY2s9PT1udWxsfHx0eXBlb2YgdGhpcy5maWxlTmFtZT09PSJ1bmRlZmluZWQifHx0aGlzLmZpbGVOYW1lPT09bnVsbHx8dHlwZW9mIHRoaXMubGluZU51bWJlcj09PSJ1bmRlZmluZWQifHx0aGlzLmxpbmVOdW1iZXI9PT1udWxsKXJldHVybjt2YXIgYT10aGlzLnN0YWNrLnNwbGl0KCJcbiIpLGM9YVswXSxlPXRoaXMuZmlsZU5hbWUrIjoiK3RoaXMubGluZU51bWJlcjt3aGlsZSh0eXBlb2YgYyE9PSJ1bmRlZmluZWQiJiZjIT09bnVsbCYmYy5pbmRleE9mKGUpPT09LTEpe2Euc2hpZnQoKTtjPWFbMF19dmFyIGQ9YVsxXTtpZih0eXBlb2YgZD09PSJ1bmRlZmluZWQifHxkPT09bnVsbClyZXR1cm47dmFyIGI9ZC5tYXRjaCgvQCguKik6KFxkKykkLyk7aWYodHlwZW9mIGI9PT0idW5kZWZpbmVkInx8Yj09PW51bGwpcmV0dXJuO3RoaXMuZmlsZU5hbWU9YlsxXTt0aGlzLmxpbmVOdW1iZXI9cGFyc2VJbnQoYlsyXSk7YS5zaGlmdCgpO3RoaXMuc3RhY2s9YS5qb2luKCJcbiIpfTtPYmplY3QuX190eXBlTmFtZT0iT2JqZWN0IjtPYmplY3QuX19jbGFzcz10cnVlO09iamVjdC5nZXRUeXBlPWZ1bmN0aW9uKGIpe3ZhciBhPWIuY29uc3RydWN0b3I7aWYoIWF8fHR5cGVvZiBhIT09ImZ1bmN0aW9uInx8IWEuX190eXBlTmFtZXx8YS5fX3R5cGVOYW1lPT09Ik9iamVjdCIpcmV0dXJuIE9iamVjdDtyZXR1cm4gYX07T2JqZWN0LmdldFR5cGVOYW1lPWZ1bmN0aW9uKGEpe3JldHVybiBPYmplY3QuZ2V0VHlwZShhKS5nZXROYW1lKCl9O1N0cmluZy5fX3R5cGVOYW1lPSJTdHJpbmciO1N0cmluZy5fX2NsYXNzPXRydWU7U3RyaW5nLnByb3RvdHlwZS5lbmRzV2l0aD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5zdWJzdHIodGhpcy5sZW5ndGgtYS5sZW5ndGgpPT09YX07U3RyaW5nLnByb3RvdHlwZS5zdGFydHNXaXRoPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnN1YnN0cigwLGEubGVuZ3RoKT09PWF9O1N0cmluZy5wcm90b3R5cGUudHJpbT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlcGxhY2UoL15ccyt8XHMrJC9nLCIiKX07U3RyaW5nLnByb3RvdHlwZS50cmltRW5kPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVwbGFjZSgvXHMrJC8sIiIpfTtTdHJpbmcucHJvdG90eXBlLnRyaW1TdGFydD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlcGxhY2UoL15ccysvLCIiKX07U3RyaW5nLmZvcm1hdD1mdW5jdGlvbigpe3JldHVybiBTdHJpbmcuX3RvRm9ybWF0dGVkU3RyaW5nKGZhbHNlLGFyZ3VtZW50cyl9O1N0cmluZy5fdG9Gb3JtYXR0ZWRTdHJpbmc9ZnVuY3Rpb24obCxqKXt2YXIgYz0iIixlPWpbMF07Zm9yKHZhciBhPTA7dHJ1ZTspe3ZhciBmPWUuaW5kZXhPZigieyIsYSksZD1lLmluZGV4T2YoIn0iLGEpO2lmKGY8MCYmZDwwKXtjKz1lLnNsaWNlKGEpO2JyZWFrfWlmKGQ+MCYmKGQ8Znx8ZjwwKSl7Yys9ZS5zbGljZShhLGQrMSk7YT1kKzI7Y29udGludWV9Yys9ZS5zbGljZShhLGYpO2E9ZisxO2lmKGUuY2hhckF0KGEpPT09InsiKXtjKz0ieyI7YSsrO2NvbnRpbnVlfWlmKGQ8MClicmVhazt2YXIgaD1lLnN1YnN0cmluZyhhLGQpLGc9aC5pbmRleE9mKCI6Iiksaz1wYXJzZUludChnPDA/aDpoLnN1YnN0cmluZygwLGcpLDEwKSsxLGk9ZzwwPyIiOmguc3Vic3RyaW5nKGcrMSksYj1qW2tdO2lmKHR5cGVvZiBiPT09InVuZGVmaW5lZCJ8fGI9PT1udWxsKWI9IiI7aWYoYi50b0Zvcm1hdHRlZFN0cmluZyljKz1iLnRvRm9ybWF0dGVkU3RyaW5nKGkpO2Vsc2UgaWYobCYmYi5sb2NhbGVGb3JtYXQpYys9Yi5sb2NhbGVGb3JtYXQoaSk7ZWxzZSBpZihiLmZvcm1hdCljKz1iLmZvcm1hdChpKTtlbHNlIGMrPWIudG9TdHJpbmcoKTthPWQrMX1yZXR1cm4gY307Qm9vbGVhbi5fX3R5cGVOYW1lPSJCb29sZWFuIjtCb29sZWFuLl9fY2xhc3M9dHJ1ZTtCb29sZWFuLnBhcnNlPWZ1bmN0aW9uKGIpe3ZhciBhPWIudHJpbSgpLnRvTG93ZXJDYXNlKCk7aWYoYT09PSJmYWxzZSIpcmV0dXJuIGZhbHNlO2lmKGE9PT0idHJ1ZSIpcmV0dXJuIHRydWV9O0RhdGUuX190eXBlTmFtZT0iRGF0ZSI7RGF0ZS5fX2NsYXNzPXRydWU7TnVtYmVyLl9fdHlwZU5hbWU9Ik51bWJlciI7TnVtYmVyLl9fY2xhc3M9dHJ1ZTtSZWdFeHAuX190eXBlTmFtZT0iUmVnRXhwIjtSZWdFeHAuX19jbGFzcz10cnVlO2lmKCF3aW5kb3cpdGhpcy53aW5kb3c9dGhpczt3aW5kb3cuVHlwZT1GdW5jdGlvbjtUeXBlLnByb3RvdHlwZS5jYWxsQmFzZU1ldGhvZD1mdW5jdGlvbihhLGQsYil7dmFyIGM9U3lzLl9nZXRCYXNlTWV0aG9kKHRoaXMsYSxkKTtpZighYilyZXR1cm4gYy5hcHBseShhKTtlbHNlIHJldHVybiBjLmFwcGx5KGEsYil9O1R5cGUucHJvdG90eXBlLmdldEJhc2VNZXRob2Q9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gU3lzLl9nZXRCYXNlTWV0aG9kKHRoaXMsYSxiKX07VHlwZS5wcm90b3R5cGUuZ2V0QmFzZVR5cGU9ZnVuY3Rpb24oKXtyZXR1cm4gdHlwZW9mIHRoaXMuX19iYXNlVHlwZT09PSJ1bmRlZmluZWQiP251bGw6dGhpcy5fX2Jhc2VUeXBlfTtUeXBlLnByb3RvdHlwZS5nZXRJbnRlcmZhY2VzPWZ1bmN0aW9uKCl7dmFyIGE9W10sYj10aGlzO3doaWxlKGIpe3ZhciBjPWIuX19pbnRlcmZhY2VzO2lmKGMpZm9yKHZhciBkPTAsZj1jLmxlbmd0aDtkPGY7ZCsrKXt2YXIgZT1jW2RdO2lmKCFBcnJheS5jb250YWlucyhhLGUpKWFbYS5sZW5ndGhdPWV9Yj1iLl9fYmFzZVR5cGV9cmV0dXJuIGF9O1R5cGUucHJvdG90eXBlLmdldE5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdHlwZW9mIHRoaXMuX190eXBlTmFtZT09PSJ1bmRlZmluZWQiPyIiOnRoaXMuX190eXBlTmFtZX07VHlwZS5wcm90b3R5cGUuaW1wbGVtZW50c0ludGVyZmFjZT1mdW5jdGlvbihkKXt0aGlzLnJlc29sdmVJbmhlcml0YW5jZSgpO3ZhciBjPWQuZ2V0TmFtZSgpLGE9dGhpcy5fX2ludGVyZmFjZUNhY2hlO2lmKGEpe3ZhciBlPWFbY107aWYodHlwZW9mIGUhPT0idW5kZWZpbmVkIilyZXR1cm4gZX1lbHNlIGE9dGhpcy5fX2ludGVyZmFjZUNhY2hlPXt9O3ZhciBiPXRoaXM7d2hpbGUoYil7dmFyIGY9Yi5fX2ludGVyZmFjZXM7aWYoZilpZihBcnJheS5pbmRleE9mKGYsZCkhPT0tMSlyZXR1cm4gYVtjXT10cnVlO2I9Yi5fX2Jhc2VUeXBlfXJldHVybiBhW2NdPWZhbHNlfTtUeXBlLnByb3RvdHlwZS5pbmhlcml0c0Zyb209ZnVuY3Rpb24oYil7dGhpcy5yZXNvbHZlSW5oZXJpdGFuY2UoKTt2YXIgYT10aGlzLl9fYmFzZVR5cGU7d2hpbGUoYSl7aWYoYT09PWIpcmV0dXJuIHRydWU7YT1hLl9fYmFzZVR5cGV9cmV0dXJuIGZhbHNlfTtUeXBlLnByb3RvdHlwZS5pbml0aWFsaXplQmFzZT1mdW5jdGlvbihhLGIpe3RoaXMucmVzb2x2ZUluaGVyaXRhbmNlKCk7aWYodGhpcy5fX2Jhc2VUeXBlKWlmKCFiKXRoaXMuX19iYXNlVHlwZS5hcHBseShhKTtlbHNlIHRoaXMuX19iYXNlVHlwZS5hcHBseShhLGIpO3JldHVybiBhfTtUeXBlLnByb3RvdHlwZS5pc0ltcGxlbWVudGVkQnk9ZnVuY3Rpb24oYSl7aWYodHlwZW9mIGE9PT0idW5kZWZpbmVkInx8YT09PW51bGwpcmV0dXJuIGZhbHNlO3ZhciBiPU9iamVjdC5nZXRUeXBlKGEpO3JldHVybiAhIShiLmltcGxlbWVudHNJbnRlcmZhY2UmJmIuaW1wbGVtZW50c0ludGVyZmFjZSh0aGlzKSl9O1R5cGUucHJvdG90eXBlLmlzSW5zdGFuY2VPZlR5cGU9ZnVuY3Rpb24oYSl7cmV0dXJuIFN5cy5faXNJbnN0YW5jZU9mVHlwZSh0aGlzLGEpfTtUeXBlLnByb3RvdHlwZS5yZWdpc3RlckNsYXNzPWZ1bmN0aW9uKGMsYixkKXt0aGlzLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj10aGlzO3RoaXMuX190eXBlTmFtZT1jO3RoaXMuX19jbGFzcz10cnVlO2lmKGIpe3RoaXMuX19iYXNlVHlwZT1iO3RoaXMuX19iYXNlUHJvdG90eXBlUGVuZGluZz10cnVlfVN5cy5fX3VwcGVyQ2FzZVR5cGVzW2MudG9VcHBlckNhc2UoKV09dGhpcztpZihkKXt0aGlzLl9faW50ZXJmYWNlcz1bXTtmb3IodmFyIGE9MixmPWFyZ3VtZW50cy5sZW5ndGg7YTxmO2ErKyl7dmFyIGU9YXJndW1lbnRzW2FdO3RoaXMuX19pbnRlcmZhY2VzLnB1c2goZSl9fXJldHVybiB0aGlzfTtUeXBlLnByb3RvdHlwZS5yZWdpc3RlckludGVyZmFjZT1mdW5jdGlvbihhKXtTeXMuX191cHBlckNhc2VUeXBlc1thLnRvVXBwZXJDYXNlKCldPXRoaXM7dGhpcy5wcm90b3R5cGUuY29uc3RydWN0b3I9dGhpczt0aGlzLl9fdHlwZU5hbWU9YTt0aGlzLl9faW50ZXJmYWNlPXRydWU7cmV0dXJuIHRoaXN9O1R5cGUucHJvdG90eXBlLnJlc29sdmVJbmhlcml0YW5jZT1mdW5jdGlvbigpe2lmKHRoaXMuX19iYXNlUHJvdG90eXBlUGVuZGluZyl7dmFyIGI9dGhpcy5fX2Jhc2VUeXBlO2IucmVzb2x2ZUluaGVyaXRhbmNlKCk7Zm9yKHZhciBhIGluIGIucHJvdG90eXBlKXt2YXIgYz1iLnByb3RvdHlwZVthXTtpZighdGhpcy5wcm90b3R5cGVbYV0pdGhpcy5wcm90b3R5cGVbYV09Y31kZWxldGUgdGhpcy5fX2Jhc2VQcm90b3R5cGVQZW5kaW5nfX07VHlwZS5nZXRSb290TmFtZXNwYWNlcz1mdW5jdGlvbigpe3JldHVybiBBcnJheS5jbG9uZShTeXMuX19yb290TmFtZXNwYWNlcyl9O1R5cGUuaXNDbGFzcz1mdW5jdGlvbihhKXtpZih0eXBlb2YgYT09PSJ1bmRlZmluZWQifHxhPT09bnVsbClyZXR1cm4gZmFsc2U7cmV0dXJuICEhYS5fX2NsYXNzfTtUeXBlLmlzSW50ZXJmYWNlPWZ1bmN0aW9uKGEpe2lmKHR5cGVvZiBhPT09InVuZGVmaW5lZCJ8fGE9PT1udWxsKXJldHVybiBmYWxzZTtyZXR1cm4gISFhLl9faW50ZXJmYWNlfTtUeXBlLmlzTmFtZXNwYWNlPWZ1bmN0aW9uKGEpe2lmKHR5cGVvZiBhPT09InVuZGVmaW5lZCJ8fGE9PT1udWxsKXJldHVybiBmYWxzZTtyZXR1cm4gISFhLl9fbmFtZXNwYWNlfTtUeXBlLnBhcnNlPWZ1bmN0aW9uKHR5cGVOYW1lLG5zKXt2YXIgZm47aWYobnMpe2ZuPVN5cy5fX3VwcGVyQ2FzZVR5cGVzW25zLmdldE5hbWUoKS50b1VwcGVyQ2FzZSgpKyIuIit0eXBlTmFtZS50b1VwcGVyQ2FzZSgpXTtyZXR1cm4gZm58fG51bGx9aWYoIXR5cGVOYW1lKXJldHVybiBudWxsO2lmKCFUeXBlLl9faHRDbGFzc2VzKVR5cGUuX19odENsYXNzZXM9e307Zm49VHlwZS5fX2h0Q2xhc3Nlc1t0eXBlTmFtZV07aWYoIWZuKXtmbj1ldmFsKHR5cGVOYW1lKTtUeXBlLl9faHRDbGFzc2VzW3R5cGVOYW1lXT1mbn1yZXR1cm4gZm59O1R5cGUucmVnaXN0ZXJOYW1lc3BhY2U9ZnVuY3Rpb24oZSl7dmFyIGQ9d2luZG93LGM9ZS5zcGxpdCgiLiIpO2Zvcih2YXIgYj0wO2I8Yy5sZW5ndGg7YisrKXt2YXIgZj1jW2JdLGE9ZFtmXTtpZighYSlhPWRbZl09e307aWYoIWEuX19uYW1lc3BhY2Upe2lmKGI9PT0wJiZlIT09IlN5cyIpU3lzLl9fcm9vdE5hbWVzcGFjZXNbU3lzLl9fcm9vdE5hbWVzcGFjZXMubGVuZ3RoXT1hO2EuX19uYW1lc3BhY2U9dHJ1ZTthLl9fdHlwZU5hbWU9Yy5zbGljZSgwLGIrMSkuam9pbigiLiIpO2EuZ2V0TmFtZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9fdHlwZU5hbWV9fWQ9YX19O1R5cGUuX2NoZWNrRGVwZW5kZW5jeT1mdW5jdGlvbihjLGEpe3ZhciBkPVR5cGUuX3JlZ2lzdGVyU2NyaXB0Ll9zY3JpcHRzLGI9ZD8hIWRbY106ZmFsc2U7aWYodHlwZW9mIGEhPT0idW5kZWZpbmVkIiYmIWIpdGhyb3cgRXJyb3IuaW52YWxpZE9wZXJhdGlvbihTdHJpbmcuZm9ybWF0KFN5cy5SZXMucmVxdWlyZWRTY3JpcHRSZWZlcmVuY2VOb3RJbmNsdWRlZCxhLGMpKTtyZXR1cm4gYn07VHlwZS5fcmVnaXN0ZXJTY3JpcHQ9ZnVuY3Rpb24oYSxjKXt2YXIgYj1UeXBlLl9yZWdpc3RlclNjcmlwdC5fc2NyaXB0cztpZighYilUeXBlLl9yZWdpc3RlclNjcmlwdC5fc2NyaXB0cz1iPXt9O2lmKGJbYV0pdGhyb3cgRXJyb3IuaW52YWxpZE9wZXJhdGlvbihTdHJpbmcuZm9ybWF0KFN5cy5SZXMuc2NyaXB0QWxyZWFkeUxvYWRlZCxhKSk7YlthXT10cnVlO2lmKGMpZm9yKHZhciBkPTAsZj1jLmxlbmd0aDtkPGY7ZCsrKXt2YXIgZT1jW2RdO2lmKCFUeXBlLl9jaGVja0RlcGVuZGVuY3koZSkpdGhyb3cgRXJyb3IuaW52YWxpZE9wZXJhdGlvbihTdHJpbmcuZm9ybWF0KFN5cy5SZXMuc2NyaXB0RGVwZW5kZW5jeU5vdEZvdW5kLGEsZSkpfX07VHlwZS5yZWdpc3Rlck5hbWVzcGFjZSgiU3lzIik7U3lzLl9fdXBwZXJDYXNlVHlwZXM9e307U3lzLl9fcm9vdE5hbWVzcGFjZXM9W1N5c107U3lzLl9pc0luc3RhbmNlT2ZUeXBlPWZ1bmN0aW9uKGMsYil7aWYodHlwZW9mIGI9PT0idW5kZWZpbmVkInx8Yj09PW51bGwpcmV0dXJuIGZhbHNlO2lmKGIgaW5zdGFuY2VvZiBjKXJldHVybiB0cnVlO3ZhciBhPU9iamVjdC5nZXRUeXBlKGIpO3JldHVybiAhIShhPT09Yyl8fGEuaW5oZXJpdHNGcm9tJiZhLmluaGVyaXRzRnJvbShjKXx8YS5pbXBsZW1lbnRzSW50ZXJmYWNlJiZhLmltcGxlbWVudHNJbnRlcmZhY2UoYyl9O1N5cy5fZ2V0QmFzZU1ldGhvZD1mdW5jdGlvbihkLGUsYyl7dmFyIGI9ZC5nZXRCYXNlVHlwZSgpO2lmKGIpe3ZhciBhPWIucHJvdG90eXBlW2NdO3JldHVybiBhIGluc3RhbmNlb2YgRnVuY3Rpb24/YTpudWxsfXJldHVybiBudWxsfTtTeXMuX2lzRG9tRWxlbWVudD1mdW5jdGlvbihhKXt2YXIgYz1mYWxzZTtpZih0eXBlb2YgYS5ub2RlVHlwZSE9PSJudW1iZXIiKXt2YXIgYj1hLm93bmVyRG9jdW1lbnR8fGEuZG9jdW1lbnR8fGE7aWYoYiE9YSl7dmFyIGQ9Yi5kZWZhdWx0Vmlld3x8Yi5wYXJlbnRXaW5kb3c7Yz1kIT1hfWVsc2UgYz10eXBlb2YgYi5ib2R5PT09InVuZGVmaW5lZCJ9cmV0dXJuICFjfTtBcnJheS5fX3R5cGVOYW1lPSJBcnJheSI7QXJyYXkuX19jbGFzcz10cnVlO0FycmF5LmFkZD1BcnJheS5lbnF1ZXVlPWZ1bmN0aW9uKGEsYil7YVthLmxlbmd0aF09Yn07QXJyYXkuYWRkUmFuZ2U9ZnVuY3Rpb24oYSxiKXthLnB1c2guYXBwbHkoYSxiKX07QXJyYXkuY2xlYXI9ZnVuY3Rpb24oYSl7YS5sZW5ndGg9MH07QXJyYXkuY2xvbmU9ZnVuY3Rpb24oYSl7aWYoYS5sZW5ndGg9PT0xKXJldHVybiBbYVswXV07ZWxzZSByZXR1cm4gQXJyYXkuYXBwbHkobnVsbCxhKX07QXJyYXkuY29udGFpbnM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gU3lzLl9pbmRleE9mKGEsYik+PTB9O0FycmF5LmRlcXVldWU9ZnVuY3Rpb24oYSl7cmV0dXJuIGEuc2hpZnQoKX07QXJyYXkuZm9yRWFjaD1mdW5jdGlvbihiLGUsZCl7Zm9yKHZhciBhPTAsZj1iLmxlbmd0aDthPGY7YSsrKXt2YXIgYz1iW2FdO2lmKHR5cGVvZiBjIT09InVuZGVmaW5lZCIpZS5jYWxsKGQsYyxhLGIpfX07QXJyYXkuaW5kZXhPZj1mdW5jdGlvbihhLGMsYil7cmV0dXJuIFN5cy5faW5kZXhPZihhLGMsYil9O0FycmF5Lmluc2VydD1mdW5jdGlvbihhLGIsYyl7YS5zcGxpY2UoYiwwLGMpfTtBcnJheS5wYXJzZT1mdW5jdGlvbih2YWx1ZSl7aWYoIXZhbHVlKXJldHVybiBbXTtyZXR1cm4gZXZhbCh2YWx1ZSl9O0FycmF5LnJlbW92ZT1mdW5jdGlvbihiLGMpe3ZhciBhPVN5cy5faW5kZXhPZihiLGMpO2lmKGE+PTApYi5zcGxpY2UoYSwxKTtyZXR1cm4gYT49MH07QXJyYXkucmVtb3ZlQXQ9ZnVuY3Rpb24oYSxiKXthLnNwbGljZShiLDEpfTtTeXMuX2luZGV4T2Y9ZnVuY3Rpb24oZCxlLGEpe2lmKHR5cGVvZiBlPT09InVuZGVmaW5lZCIpcmV0dXJuIC0xO3ZhciBjPWQubGVuZ3RoO2lmKGMhPT0wKXthPWEtMDtpZihpc05hTihhKSlhPTA7ZWxzZXtpZihpc0Zpbml0ZShhKSlhPWEtYSUxO2lmKGE8MClhPU1hdGgubWF4KDAsYythKX1mb3IodmFyIGI9YTtiPGM7YisrKWlmKHR5cGVvZiBkW2JdIT09InVuZGVmaW5lZCImJmRbYl09PT1lKXJldHVybiBifXJldHVybiAtMX07VHlwZS5fcmVnaXN0ZXJTY3JpcHQuX3NjcmlwdHM9eyJNaWNyb3NvZnRBamF4Q29yZS5qcyI6dHJ1ZSwiTWljcm9zb2Z0QWpheEdsb2JhbGl6YXRpb24uanMiOnRydWUsIk1pY3Jvc29mdEFqYXhTZXJpYWxpemF0aW9uLmpzIjp0cnVlLCJNaWNyb3NvZnRBamF4Q29tcG9uZW50TW9kZWwuanMiOnRydWUsIk1pY3Jvc29mdEFqYXhIaXN0b3J5LmpzIjp0cnVlLCJNaWNyb3NvZnRBamF4TmV0d29yay5qcyI6dHJ1ZSwiTWljcm9zb2Z0QWpheFdlYlNlcnZpY2VzLmpzIjp0cnVlfTtTeXMuSURpc3Bvc2FibGU9ZnVuY3Rpb24oKXt9O1N5cy5JRGlzcG9zYWJsZS5wcm90b3R5cGU9e307U3lzLklEaXNwb3NhYmxlLnJlZ2lzdGVySW50ZXJmYWNlKCJTeXMuSURpc3Bvc2FibGUiKTtTeXMuU3RyaW5nQnVpbGRlcj1mdW5jdGlvbihhKXt0aGlzLl9wYXJ0cz10eXBlb2YgYSE9PSJ1bmRlZmluZWQiJiZhIT09bnVsbCYmYSE9PSIiP1thLnRvU3RyaW5nKCldOltdO3RoaXMuX3ZhbHVlPXt9O3RoaXMuX2xlbj0wfTtTeXMuU3RyaW5nQnVpbGRlci5wcm90b3R5cGU9e2FwcGVuZDpmdW5jdGlvbihhKXt0aGlzLl9wYXJ0c1t0aGlzLl9wYXJ0cy5sZW5ndGhdPWF9LGFwcGVuZExpbmU6ZnVuY3Rpb24oYSl7dGhpcy5fcGFydHNbdGhpcy5fcGFydHMubGVuZ3RoXT10eXBlb2YgYT09PSJ1bmRlZmluZWQifHxhPT09bnVsbHx8YT09PSIiPyJcclxuIjphKyJcclxuIn0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLl9wYXJ0cz1bXTt0aGlzLl92YWx1ZT17fTt0aGlzLl9sZW49MH0saXNFbXB0eTpmdW5jdGlvbigpe2lmKHRoaXMuX3BhcnRzLmxlbmd0aD09PTApcmV0dXJuIHRydWU7cmV0dXJuIHRoaXMudG9TdHJpbmcoKT09PSIifSx0b1N0cmluZzpmdW5jdGlvbihhKXthPWF8fCIiO3ZhciBiPXRoaXMuX3BhcnRzO2lmKHRoaXMuX2xlbiE9PWIubGVuZ3RoKXt0aGlzLl92YWx1ZT17fTt0aGlzLl9sZW49Yi5sZW5ndGh9dmFyIGQ9dGhpcy5fdmFsdWU7aWYodHlwZW9mIGRbYV09PT0idW5kZWZpbmVkIil7aWYoYSE9PSIiKWZvcih2YXIgYz0wO2M8Yi5sZW5ndGg7KWlmKHR5cGVvZiBiW2NdPT09InVuZGVmaW5lZCJ8fGJbY109PT0iInx8YltjXT09PW51bGwpYi5zcGxpY2UoYywxKTtlbHNlIGMrKztkW2FdPXRoaXMuX3BhcnRzLmpvaW4oYSl9cmV0dXJuIGRbYV19fTtTeXMuU3RyaW5nQnVpbGRlci5yZWdpc3RlckNsYXNzKCJTeXMuU3RyaW5nQnVpbGRlciIpO1N5cy5Ccm93c2VyPXt9O1N5cy5Ccm93c2VyLkludGVybmV0RXhwbG9yZXI9e307U3lzLkJyb3dzZXIuRmlyZWZveD17fTtTeXMuQnJvd3Nlci5TYWZhcmk9e307U3lzLkJyb3dzZXIuT3BlcmE9e307U3lzLkJyb3dzZXIuYWdlbnQ9bnVsbDtTeXMuQnJvd3Nlci5oYXNEZWJ1Z2dlclN0YXRlbWVudD1mYWxzZTtTeXMuQnJvd3Nlci5uYW1lPW5hdmlnYXRvci5hcHBOYW1lO1N5cy5Ccm93c2VyLnZlcnNpb249cGFyc2VGbG9hdChuYXZpZ2F0b3IuYXBwVmVyc2lvbik7U3lzLkJyb3dzZXIuZG9jdW1lbnRNb2RlPTA7aWYobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCIgTVNJRSAiKT4tMSl7U3lzLkJyb3dzZXIuYWdlbnQ9U3lzLkJyb3dzZXIuSW50ZXJuZXRFeHBsb3JlcjtTeXMuQnJvd3Nlci52ZXJzaW9uPXBhcnNlRmxvYXQobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvTVNJRSAoXGQrXC5cZCspLylbMV0pO2lmKFN5cy5Ccm93c2VyLnZlcnNpb24+PTgpaWYoZG9jdW1lbnQuZG9jdW1lbnRNb2RlPj03KVN5cy5Ccm93c2VyLmRvY3VtZW50TW9kZT1kb2N1bWVudC5kb2N1bWVudE1vZGU7U3lzLkJyb3dzZXIuaGFzRGVidWdnZXJTdGF0ZW1lbnQ9dHJ1ZX1lbHNlIGlmKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiIEZpcmVmb3gvIik+LTEpe1N5cy5Ccm93c2VyLmFnZW50PVN5cy5Ccm93c2VyLkZpcmVmb3g7U3lzLkJyb3dzZXIudmVyc2lvbj1wYXJzZUZsb2F0KG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0ZpcmVmb3hcLyhcZCtcLlxkKykvKVsxXSk7U3lzLkJyb3dzZXIubmFtZT0iRmlyZWZveCI7U3lzLkJyb3dzZXIuaGFzRGVidWdnZXJTdGF0ZW1lbnQ9dHJ1ZX1lbHNlIGlmKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiIEFwcGxlV2ViS2l0LyIpPi0xKXtTeXMuQnJvd3Nlci5hZ2VudD1TeXMuQnJvd3Nlci5TYWZhcmk7U3lzLkJyb3dzZXIudmVyc2lvbj1wYXJzZUZsb2F0KG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0FwcGxlV2ViS2l0XC8oXGQrKFwuXGQrKT8pLylbMV0pO1N5cy5Ccm93c2VyLm5hbWU9IlNhZmFyaSJ9ZWxzZSBpZihuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIk9wZXJhLyIpPi0xKVN5cy5Ccm93c2VyLmFnZW50PVN5cy5Ccm93c2VyLk9wZXJhO1N5cy5FdmVudEFyZ3M9ZnVuY3Rpb24oKXt9O1N5cy5FdmVudEFyZ3MucmVnaXN0ZXJDbGFzcygiU3lzLkV2ZW50QXJncyIpO1N5cy5FdmVudEFyZ3MuRW1wdHk9bmV3IFN5cy5FdmVudEFyZ3M7U3lzLkNhbmNlbEV2ZW50QXJncz1mdW5jdGlvbigpe1N5cy5DYW5jZWxFdmVudEFyZ3MuaW5pdGlhbGl6ZUJhc2UodGhpcyk7dGhpcy5fY2FuY2VsPWZhbHNlfTtTeXMuQ2FuY2VsRXZlbnRBcmdzLnByb3RvdHlwZT17Z2V0X2NhbmNlbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jYW5jZWx9LHNldF9jYW5jZWw6ZnVuY3Rpb24oYSl7dGhpcy5fY2FuY2VsPWF9fTtTeXMuQ2FuY2VsRXZlbnRBcmdzLnJlZ2lzdGVyQ2xhc3MoIlN5cy5DYW5jZWxFdmVudEFyZ3MiLFN5cy5FdmVudEFyZ3MpO1R5cGUucmVnaXN0ZXJOYW1lc3BhY2UoIlN5cy5VSSIpO1N5cy5fRGVidWc9ZnVuY3Rpb24oKXt9O1N5cy5fRGVidWcucHJvdG90eXBlPXtfYXBwZW5kQ29uc29sZTpmdW5jdGlvbihhKXtpZih0eXBlb2YgRGVidWchPT0idW5kZWZpbmVkIiYmRGVidWcud3JpdGVsbilEZWJ1Zy53cml0ZWxuKGEpO2lmKHdpbmRvdy5jb25zb2xlJiZ3aW5kb3cuY29uc29sZS5sb2cpd2luZG93LmNvbnNvbGUubG9nKGEpO2lmKHdpbmRvdy5vcGVyYSl3aW5kb3cub3BlcmEucG9zdEVycm9yKGEpO2lmKHdpbmRvdy5kZWJ1Z1NlcnZpY2Upd2luZG93LmRlYnVnU2VydmljZS50cmFjZShhKX0sX2FwcGVuZFRyYWNlOmZ1bmN0aW9uKGIpe3ZhciBhPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJUcmFjZUNvbnNvbGUiKTtpZihhJiZhLnRhZ05hbWUudG9VcHBlckNhc2UoKT09PSJURVhUQVJFQSIpYS52YWx1ZSs9YisiXG4ifSxhc3NlcnQ6ZnVuY3Rpb24oYyxhLGIpe2lmKCFjKXthPWImJnRoaXMuYXNzZXJ0LmNhbGxlcj9TdHJpbmcuZm9ybWF0KFN5cy5SZXMuYXNzZXJ0RmFpbGVkQ2FsbGVyLGEsdGhpcy5hc3NlcnQuY2FsbGVyKTpTdHJpbmcuZm9ybWF0KFN5cy5SZXMuYXNzZXJ0RmFpbGVkLGEpO2lmKGNvbmZpcm0oU3RyaW5nLmZvcm1hdChTeXMuUmVzLmJyZWFrSW50b0RlYnVnZ2VyLGEpKSl0aGlzLmZhaWwoYSl9fSxjbGVhclRyYWNlOmZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIlRyYWNlQ29uc29sZSIpO2lmKGEmJmEudGFnTmFtZS50b1VwcGVyQ2FzZSgpPT09IlRFWFRBUkVBIilhLnZhbHVlPSIifSxmYWlsOmZ1bmN0aW9uKG1lc3NhZ2Upe3RoaXMuX2FwcGVuZENvbnNvbGUobWVzc2FnZSk7aWYoU3lzLkJyb3dzZXIuaGFzRGVidWdnZXJTdGF0ZW1lbnQpZXZhbCgiZGVidWdnZXIiKX0sdHJhY2U6ZnVuY3Rpb24oYSl7dGhpcy5fYXBwZW5kQ29uc29sZShhKTt0aGlzLl9hcHBlbmRUcmFjZShhKX0sdHJhY2VEdW1wOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5fdHJhY2VEdW1wKGEsYix0cnVlKX0sX3RyYWNlRHVtcDpmdW5jdGlvbihhLGMsZixiLGQpe2M9Yz9jOiJ0cmFjZUR1bXAiO2I9Yj9iOiIiO2lmKGE9PT1udWxsKXt0aGlzLnRyYWNlKGIrYysiOiBudWxsIik7cmV0dXJufXN3aXRjaCh0eXBlb2YgYSl7Y2FzZSAidW5kZWZpbmVkIjp0aGlzLnRyYWNlKGIrYysiOiBVbmRlZmluZWQiKTticmVhaztjYXNlICJudW1iZXIiOmNhc2UgInN0cmluZyI6Y2FzZSAiYm9vbGVhbiI6dGhpcy50cmFjZShiK2MrIjogIithKTticmVhaztkZWZhdWx0OmlmKERhdGUuaXNJbnN0YW5jZU9mVHlwZShhKXx8UmVnRXhwLmlzSW5zdGFuY2VPZlR5cGUoYSkpe3RoaXMudHJhY2UoYitjKyI6ICIrYS50b1N0cmluZygpKTticmVha31pZighZClkPVtdO2Vsc2UgaWYoQXJyYXkuY29udGFpbnMoZCxhKSl7dGhpcy50cmFjZShiK2MrIjogLi4uIik7cmV0dXJufUFycmF5LmFkZChkLGEpO2lmKGE9PXdpbmRvd3x8YT09PWRvY3VtZW50fHx3aW5kb3cuSFRNTEVsZW1lbnQmJmEgaW5zdGFuY2VvZiBIVE1MRWxlbWVudHx8dHlwZW9mIGEubm9kZU5hbWU9PT0ic3RyaW5nIil7dmFyIGs9YS50YWdOYW1lP2EudGFnTmFtZToiRG9tRWxlbWVudCI7aWYoYS5pZClrKz0iIC0gIithLmlkO3RoaXMudHJhY2UoYitjKyIgeyIraysifSIpfWVsc2V7dmFyIGk9T2JqZWN0LmdldFR5cGVOYW1lKGEpO3RoaXMudHJhY2UoYitjKyh0eXBlb2YgaT09PSJzdHJpbmciPyIgeyIraSsifSI6IiIpKTtpZihiPT09IiJ8fGYpe2IrPSIgICAgIjt2YXIgZSxqLGwsZyxoO2lmKEFycmF5LmlzSW5zdGFuY2VPZlR5cGUoYSkpe2o9YS5sZW5ndGg7Zm9yKGU9MDtlPGo7ZSsrKXRoaXMuX3RyYWNlRHVtcChhW2VdLCJbIitlKyJdIixmLGIsZCl9ZWxzZSBmb3IoZyBpbiBhKXtoPWFbZ107aWYoIUZ1bmN0aW9uLmlzSW5zdGFuY2VPZlR5cGUoaCkpdGhpcy5fdHJhY2VEdW1wKGgsZyxmLGIsZCl9fX1BcnJheS5yZW1vdmUoZCxhKX19fTtTeXMuX0RlYnVnLnJlZ2lzdGVyQ2xhc3MoIlN5cy5fRGVidWciKTtTeXMuRGVidWc9bmV3IFN5cy5fRGVidWc7U3lzLkRlYnVnLmlzRGVidWc9ZmFsc2U7ZnVuY3Rpb24gU3lzJEVudW0kcGFyc2UoYyxlKXt2YXIgYSxiLGk7aWYoZSl7YT10aGlzLl9fbG93ZXJDYXNlVmFsdWVzO2lmKCFhKXt0aGlzLl9fbG93ZXJDYXNlVmFsdWVzPWE9e307dmFyIGc9dGhpcy5wcm90b3R5cGU7Zm9yKHZhciBmIGluIGcpYVtmLnRvTG93ZXJDYXNlKCldPWdbZl19fWVsc2UgYT10aGlzLnByb3RvdHlwZTtpZighdGhpcy5fX2ZsYWdzKXtpPWU/Yy50b0xvd2VyQ2FzZSgpOmM7Yj1hW2kudHJpbSgpXTtpZih0eXBlb2YgYiE9PSJudW1iZXIiKXRocm93IEVycm9yLmFyZ3VtZW50KCJ2YWx1ZSIsU3RyaW5nLmZvcm1hdChTeXMuUmVzLmVudW1JbnZhbGlkVmFsdWUsYyx0aGlzLl9fdHlwZU5hbWUpKTtyZXR1cm4gYn1lbHNle3ZhciBoPShlP2MudG9Mb3dlckNhc2UoKTpjKS5zcGxpdCgiLCIpLGo9MDtmb3IodmFyIGQ9aC5sZW5ndGgtMTtkPj0wO2QtLSl7dmFyIGs9aFtkXS50cmltKCk7Yj1hW2tdO2lmKHR5cGVvZiBiIT09Im51bWJlciIpdGhyb3cgRXJyb3IuYXJndW1lbnQoInZhbHVlIixTdHJpbmcuZm9ybWF0KFN5cy5SZXMuZW51bUludmFsaWRWYWx1ZSxjLnNwbGl0KCIsIilbZF0udHJpbSgpLHRoaXMuX190eXBlTmFtZSkpO2p8PWJ9cmV0dXJuIGp9fWZ1bmN0aW9uIFN5cyRFbnVtJHRvU3RyaW5nKGMpe2lmKHR5cGVvZiBjPT09InVuZGVmaW5lZCJ8fGM9PT1udWxsKXJldHVybiB0aGlzLl9fc3RyaW5nO3ZhciBkPXRoaXMucHJvdG90eXBlLGE7aWYoIXRoaXMuX19mbGFnc3x8Yz09PTApe2ZvcihhIGluIGQpaWYoZFthXT09PWMpcmV0dXJuIGF9ZWxzZXt2YXIgYj10aGlzLl9fc29ydGVkVmFsdWVzO2lmKCFiKXtiPVtdO2ZvcihhIGluIGQpYltiLmxlbmd0aF09e2tleTphLHZhbHVlOmRbYV19O2Iuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLnZhbHVlLWIudmFsdWV9KTt0aGlzLl9fc29ydGVkVmFsdWVzPWJ9dmFyIGU9W10sZz1jO2ZvcihhPWIubGVuZ3RoLTE7YT49MDthLS0pe3ZhciBoPWJbYV0sZj1oLnZhbHVlO2lmKGY9PT0wKWNvbnRpbnVlO2lmKChmJmMpPT09Zil7ZVtlLmxlbmd0aF09aC5rZXk7Zy09ZjtpZihnPT09MClicmVha319aWYoZS5sZW5ndGgmJmc9PT0wKXJldHVybiBlLnJldmVyc2UoKS5qb2luKCIsICIpfXJldHVybiAiIn1UeXBlLnByb3RvdHlwZS5yZWdpc3RlckVudW09ZnVuY3Rpb24oYixjKXtTeXMuX191cHBlckNhc2VUeXBlc1tiLnRvVXBwZXJDYXNlKCldPXRoaXM7Zm9yKHZhciBhIGluIHRoaXMucHJvdG90eXBlKXRoaXNbYV09dGhpcy5wcm90b3R5cGVbYV07dGhpcy5fX3R5cGVOYW1lPWI7dGhpcy5wYXJzZT1TeXMkRW51bSRwYXJzZTt0aGlzLl9fc3RyaW5nPXRoaXMudG9TdHJpbmcoKTt0aGlzLnRvU3RyaW5nPVN5cyRFbnVtJHRvU3RyaW5nO3RoaXMuX19mbGFncz1jO3RoaXMuX19lbnVtPXRydWV9O1R5cGUuaXNFbnVtPWZ1bmN0aW9uKGEpe2lmKHR5cGVvZiBhPT09InVuZGVmaW5lZCJ8fGE9PT1udWxsKXJldHVybiBmYWxzZTtyZXR1cm4gISFhLl9fZW51bX07VHlwZS5pc0ZsYWdzPWZ1bmN0aW9uKGEpe2lmKHR5cGVvZiBhPT09InVuZGVmaW5lZCJ8fGE9PT1udWxsKXJldHVybiBmYWxzZTtyZXR1cm4gISFhLl9fZmxhZ3N9O1N5cy5Db2xsZWN0aW9uQ2hhbmdlPWZ1bmN0aW9uKGUsYSxjLGIsZCl7dGhpcy5hY3Rpb249ZTtpZihhKWlmKCEoYSBpbnN0YW5jZW9mIEFycmF5KSlhPVthXTt0aGlzLm5ld0l0ZW1zPWF8fG51bGw7aWYodHlwZW9mIGMhPT0ibnVtYmVyIiljPS0xO3RoaXMubmV3U3RhcnRpbmdJbmRleD1jO2lmKGIpaWYoIShiIGluc3RhbmNlb2YgQXJyYXkpKWI9W2JdO3RoaXMub2xkSXRlbXM9Ynx8bnVsbDtpZih0eXBlb2YgZCE9PSJudW1iZXIiKWQ9LTE7dGhpcy5vbGRTdGFydGluZ0luZGV4PWR9O1N5cy5Db2xsZWN0aW9uQ2hhbmdlLnJlZ2lzdGVyQ2xhc3MoIlN5cy5Db2xsZWN0aW9uQ2hhbmdlIik7U3lzLk5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkQWN0aW9uPWZ1bmN0aW9uKCl7dGhyb3cgRXJyb3Iubm90SW1wbGVtZW50ZWQoKX07U3lzLk5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkQWN0aW9uLnByb3RvdHlwZT17YWRkOjAscmVtb3ZlOjEscmVzZXQ6Mn07U3lzLk5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkQWN0aW9uLnJlZ2lzdGVyRW51bSgiU3lzLk5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkQWN0aW9uIik7U3lzLk5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkRXZlbnRBcmdzPWZ1bmN0aW9uKGEpe3RoaXMuX2NoYW5nZXM9YTtTeXMuTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRFdmVudEFyZ3MuaW5pdGlhbGl6ZUJhc2UodGhpcyl9O1N5cy5Ob3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEV2ZW50QXJncy5wcm90b3R5cGU9e2dldF9jaGFuZ2VzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoYW5nZXN8fFtdfX07U3lzLk5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkRXZlbnRBcmdzLnJlZ2lzdGVyQ2xhc3MoIlN5cy5Ob3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEV2ZW50QXJncyIsU3lzLkV2ZW50QXJncyk7U3lzLk9ic2VydmVyPWZ1bmN0aW9uKCl7fTtTeXMuT2JzZXJ2ZXIucmVnaXN0ZXJDbGFzcygiU3lzLk9ic2VydmVyIik7U3lzLk9ic2VydmVyLm1ha2VPYnNlcnZhYmxlPWZ1bmN0aW9uKGEpe3ZhciBjPWEgaW5zdGFuY2VvZiBBcnJheSxiPVN5cy5PYnNlcnZlcjtpZihhLnNldFZhbHVlPT09Yi5fb2JzZXJ2ZU1ldGhvZHMuc2V0VmFsdWUpcmV0dXJuIGE7Yi5fYWRkTWV0aG9kcyhhLGIuX29ic2VydmVNZXRob2RzKTtpZihjKWIuX2FkZE1ldGhvZHMoYSxiLl9hcnJheU1ldGhvZHMpO3JldHVybiBhfTtTeXMuT2JzZXJ2ZXIuX2FkZE1ldGhvZHM9ZnVuY3Rpb24oYyxiKXtmb3IodmFyIGEgaW4gYiljW2FdPWJbYV19O1N5cy5PYnNlcnZlci5fYWRkRXZlbnRIYW5kbGVyPWZ1bmN0aW9uKGMsYSxiKXtTeXMuT2JzZXJ2ZXIuX2dldENvbnRleHQoYyx0cnVlKS5ldmVudHMuX2FkZEhhbmRsZXIoYSxiKX07U3lzLk9ic2VydmVyLmFkZEV2ZW50SGFuZGxlcj1mdW5jdGlvbihjLGEsYil7U3lzLk9ic2VydmVyLl9hZGRFdmVudEhhbmRsZXIoYyxhLGIpfTtTeXMuT2JzZXJ2ZXIuX3JlbW92ZUV2ZW50SGFuZGxlcj1mdW5jdGlvbihjLGEsYil7U3lzLk9ic2VydmVyLl9nZXRDb250ZXh0KGMsdHJ1ZSkuZXZlbnRzLl9yZW1vdmVIYW5kbGVyKGEsYil9O1N5cy5PYnNlcnZlci5yZW1vdmVFdmVudEhhbmRsZXI9ZnVuY3Rpb24oYyxhLGIpe1N5cy5PYnNlcnZlci5fcmVtb3ZlRXZlbnRIYW5kbGVyKGMsYSxiKX07U3lzLk9ic2VydmVyLnJhaXNlRXZlbnQ9ZnVuY3Rpb24oYixlLGQpe3ZhciBjPVN5cy5PYnNlcnZlci5fZ2V0Q29udGV4dChiKTtpZighYylyZXR1cm47dmFyIGE9Yy5ldmVudHMuZ2V0SGFuZGxlcihlKTtpZihhKWEoYixkKX07U3lzLk9ic2VydmVyLmFkZFByb3BlcnR5Q2hhbmdlZD1mdW5jdGlvbihiLGEpe1N5cy5PYnNlcnZlci5fYWRkRXZlbnRIYW5kbGVyKGIsInByb3BlcnR5Q2hhbmdlZCIsYSl9O1N5cy5PYnNlcnZlci5yZW1vdmVQcm9wZXJ0eUNoYW5nZWQ9ZnVuY3Rpb24oYixhKXtTeXMuT2JzZXJ2ZXIuX3JlbW92ZUV2ZW50SGFuZGxlcihiLCJwcm9wZXJ0eUNoYW5nZWQiLGEpfTtTeXMuT2JzZXJ2ZXIuYmVnaW5VcGRhdGU9ZnVuY3Rpb24oYSl7U3lzLk9ic2VydmVyLl9nZXRDb250ZXh0KGEsdHJ1ZSkudXBkYXRpbmc9dHJ1ZX07U3lzLk9ic2VydmVyLmVuZFVwZGF0ZT1mdW5jdGlvbihiKXt2YXIgYT1TeXMuT2JzZXJ2ZXIuX2dldENvbnRleHQoYik7aWYoIWF8fCFhLnVwZGF0aW5nKXJldHVybjthLnVwZGF0aW5nPWZhbHNlO3ZhciBkPWEuZGlydHk7YS5kaXJ0eT1mYWxzZTtpZihkKXtpZihiIGluc3RhbmNlb2YgQXJyYXkpe3ZhciBjPWEuY2hhbmdlczthLmNoYW5nZXM9bnVsbDtTeXMuT2JzZXJ2ZXIucmFpc2VDb2xsZWN0aW9uQ2hhbmdlZChiLGMpfVN5cy5PYnNlcnZlci5yYWlzZVByb3BlcnR5Q2hhbmdlZChiLCIiKX19O1N5cy5PYnNlcnZlci5pc1VwZGF0aW5nPWZ1bmN0aW9uKGIpe3ZhciBhPVN5cy5PYnNlcnZlci5fZ2V0Q29udGV4dChiKTtyZXR1cm4gYT9hLnVwZGF0aW5nOmZhbHNlfTtTeXMuT2JzZXJ2ZXIuX3NldFZhbHVlPWZ1bmN0aW9uKGEsaixnKXt2YXIgYixmLGs9YSxkPWouc3BsaXQoIi4iKTtmb3IodmFyIGk9MCxtPWQubGVuZ3RoLTE7aTxtO2krKyl7dmFyIGw9ZFtpXTtiPWFbImdldF8iK2xdO2lmKHR5cGVvZiBiPT09ImZ1bmN0aW9uIilhPWIuY2FsbChhKTtlbHNlIGE9YVtsXTt2YXIgbj10eXBlb2YgYTtpZihhPT09bnVsbHx8bj09PSJ1bmRlZmluZWQiKXRocm93IEVycm9yLmludmFsaWRPcGVyYXRpb24oU3RyaW5nLmZvcm1hdChTeXMuUmVzLm51bGxSZWZlcmVuY2VJblBhdGgsaikpfXZhciBlLGM9ZFttXTtiPWFbImdldF8iK2NdO2Y9YVsic2V0XyIrY107aWYodHlwZW9mIGI9PT0iZnVuY3Rpb24iKWU9Yi5jYWxsKGEpO2Vsc2UgZT1hW2NdO2lmKHR5cGVvZiBmPT09ImZ1bmN0aW9uIilmLmNhbGwoYSxnKTtlbHNlIGFbY109ZztpZihlIT09Zyl7dmFyIGg9U3lzLk9ic2VydmVyLl9nZXRDb250ZXh0KGspO2lmKGgmJmgudXBkYXRpbmcpe2guZGlydHk9dHJ1ZTtyZXR1cm59U3lzLk9ic2VydmVyLnJhaXNlUHJvcGVydHlDaGFuZ2VkKGssZFswXSl9fTtTeXMuT2JzZXJ2ZXIuc2V0VmFsdWU9ZnVuY3Rpb24oYixhLGMpe1N5cy5PYnNlcnZlci5fc2V0VmFsdWUoYixhLGMpfTtTeXMuT2JzZXJ2ZXIucmFpc2VQcm9wZXJ0eUNoYW5nZWQ9ZnVuY3Rpb24oYixhKXtTeXMuT2JzZXJ2ZXIucmFpc2VFdmVudChiLCJwcm9wZXJ0eUNoYW5nZWQiLG5ldyBTeXMuUHJvcGVydHlDaGFuZ2VkRXZlbnRBcmdzKGEpKX07U3lzLk9ic2VydmVyLmFkZENvbGxlY3Rpb25DaGFuZ2VkPWZ1bmN0aW9uKGIsYSl7U3lzLk9ic2VydmVyLl9hZGRFdmVudEhhbmRsZXIoYiwiY29sbGVjdGlvbkNoYW5nZWQiLGEpfTtTeXMuT2JzZXJ2ZXIucmVtb3ZlQ29sbGVjdGlvbkNoYW5nZWQ9ZnVuY3Rpb24oYixhKXtTeXMuT2JzZXJ2ZXIuX3JlbW92ZUV2ZW50SGFuZGxlcihiLCJjb2xsZWN0aW9uQ2hhbmdlZCIsYSl9O1N5cy5PYnNlcnZlci5fY29sbGVjdGlvbkNoYW5nZT1mdW5jdGlvbihkLGMpe3ZhciBhPVN5cy5PYnNlcnZlci5fZ2V0Q29udGV4dChkKTtpZihhJiZhLnVwZGF0aW5nKXthLmRpcnR5PXRydWU7dmFyIGI9YS5jaGFuZ2VzO2lmKCFiKWEuY2hhbmdlcz1iPVtjXTtlbHNlIGIucHVzaChjKX1lbHNle1N5cy5PYnNlcnZlci5yYWlzZUNvbGxlY3Rpb25DaGFuZ2VkKGQsW2NdKTtTeXMuT2JzZXJ2ZXIucmFpc2VQcm9wZXJ0eUNoYW5nZWQoZCwibGVuZ3RoIil9fTtTeXMuT2JzZXJ2ZXIuYWRkPWZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IFN5cy5Db2xsZWN0aW9uQ2hhbmdlKFN5cy5Ob3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbi5hZGQsW2JdLGEubGVuZ3RoKTtBcnJheS5hZGQoYSxiKTtTeXMuT2JzZXJ2ZXIuX2NvbGxlY3Rpb25DaGFuZ2UoYSxjKX07U3lzLk9ic2VydmVyLmFkZFJhbmdlPWZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IFN5cy5Db2xsZWN0aW9uQ2hhbmdlKFN5cy5Ob3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbi5hZGQsYixhLmxlbmd0aCk7QXJyYXkuYWRkUmFuZ2UoYSxiKTtTeXMuT2JzZXJ2ZXIuX2NvbGxlY3Rpb25DaGFuZ2UoYSxjKX07U3lzLk9ic2VydmVyLmNsZWFyPWZ1bmN0aW9uKGEpe3ZhciBiPUFycmF5LmNsb25lKGEpO0FycmF5LmNsZWFyKGEpO1N5cy5PYnNlcnZlci5fY29sbGVjdGlvbkNoYW5nZShhLG5ldyBTeXMuQ29sbGVjdGlvbkNoYW5nZShTeXMuTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRBY3Rpb24ucmVzZXQsbnVsbCwtMSxiLDApKX07U3lzLk9ic2VydmVyLmluc2VydD1mdW5jdGlvbihhLGIsYyl7QXJyYXkuaW5zZXJ0KGEsYixjKTtTeXMuT2JzZXJ2ZXIuX2NvbGxlY3Rpb25DaGFuZ2UoYSxuZXcgU3lzLkNvbGxlY3Rpb25DaGFuZ2UoU3lzLk5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkQWN0aW9uLmFkZCxbY10sYikpfTtTeXMuT2JzZXJ2ZXIucmVtb3ZlPWZ1bmN0aW9uKGEsYil7dmFyIGM9QXJyYXkuaW5kZXhPZihhLGIpO2lmKGMhPT0tMSl7QXJyYXkucmVtb3ZlKGEsYik7U3lzLk9ic2VydmVyLl9jb2xsZWN0aW9uQ2hhbmdlKGEsbmV3IFN5cy5Db2xsZWN0aW9uQ2hhbmdlKFN5cy5Ob3RpZnlDb2xsZWN0aW9uQ2hhbmdlZEFjdGlvbi5yZW1vdmUsbnVsbCwtMSxbYl0sYykpO3JldHVybiB0cnVlfXJldHVybiBmYWxzZX07U3lzLk9ic2VydmVyLnJlbW92ZUF0PWZ1bmN0aW9uKGIsYSl7aWYoYT4tMSYmYTxiLmxlbmd0aCl7dmFyIGM9YlthXTtBcnJheS5yZW1vdmVBdChiLGEpO1N5cy5PYnNlcnZlci5fY29sbGVjdGlvbkNoYW5nZShiLG5ldyBTeXMuQ29sbGVjdGlvbkNoYW5nZShTeXMuTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRBY3Rpb24ucmVtb3ZlLG51bGwsLTEsW2NdLGEpKX19O1N5cy5PYnNlcnZlci5yYWlzZUNvbGxlY3Rpb25DaGFuZ2VkPWZ1bmN0aW9uKGIsYSl7U3lzLk9ic2VydmVyLnJhaXNlRXZlbnQoYiwiY29sbGVjdGlvbkNoYW5nZWQiLG5ldyBTeXMuTm90aWZ5Q29sbGVjdGlvbkNoYW5nZWRFdmVudEFyZ3MoYSkpfTtTeXMuT2JzZXJ2ZXIuX29ic2VydmVNZXRob2RzPXthZGRfcHJvcGVydHlDaGFuZ2VkOmZ1bmN0aW9uKGEpe1N5cy5PYnNlcnZlci5fYWRkRXZlbnRIYW5kbGVyKHRoaXMsInByb3BlcnR5Q2hhbmdlZCIsYSl9LHJlbW92ZV9wcm9wZXJ0eUNoYW5nZWQ6ZnVuY3Rpb24oYSl7U3lzLk9ic2VydmVyLl9yZW1vdmVFdmVudEhhbmRsZXIodGhpcywicHJvcGVydHlDaGFuZ2VkIixhKX0sYWRkRXZlbnRIYW5kbGVyOmZ1bmN0aW9uKGEsYil7U3lzLk9ic2VydmVyLl9hZGRFdmVudEhhbmRsZXIodGhpcyxhLGIpfSxyZW1vdmVFdmVudEhhbmRsZXI6ZnVuY3Rpb24oYSxiKXtTeXMuT2JzZXJ2ZXIuX3JlbW92ZUV2ZW50SGFuZGxlcih0aGlzLGEsYil9LGdldF9pc1VwZGF0aW5nOmZ1bmN0aW9uKCl7cmV0dXJuIFN5cy5PYnNlcnZlci5pc1VwZGF0aW5nKHRoaXMpfSxiZWdpblVwZGF0ZTpmdW5jdGlvbigpe1N5cy5PYnNlcnZlci5iZWdpblVwZGF0ZSh0aGlzKX0sZW5kVXBkYXRlOmZ1bmN0aW9uKCl7U3lzLk9ic2VydmVyLmVuZFVwZGF0ZSh0aGlzKX0sc2V0VmFsdWU6ZnVuY3Rpb24oYixhKXtTeXMuT2JzZXJ2ZXIuX3NldFZhbHVlKHRoaXMsYixhKX0scmFpc2VFdmVudDpmdW5jdGlvbihiLGEpe1N5cy5PYnNlcnZlci5yYWlzZUV2ZW50KHRoaXMsYixhKX0scmFpc2VQcm9wZXJ0eUNoYW5nZWQ6ZnVuY3Rpb24oYSl7U3lzLk9ic2VydmVyLnJhaXNlRXZlbnQodGhpcywicHJvcGVydHlDaGFuZ2VkIixuZXcgU3lzLlByb3BlcnR5Q2hhbmdlZEV2ZW50QXJncyhhKSl9fTtTeXMuT2JzZXJ2ZXIuX2FycmF5TWV0aG9kcz17YWRkX2NvbGxlY3Rpb25DaGFuZ2VkOmZ1bmN0aW9uKGEpe1N5cy5PYnNlcnZlci5fYWRkRXZlbnRIYW5kbGVyKHRoaXMsImNvbGxlY3Rpb25DaGFuZ2VkIixhKX0scmVtb3ZlX2NvbGxlY3Rpb25DaGFuZ2VkOmZ1bmN0aW9uKGEpe1N5cy5PYnNlcnZlci5fcmVtb3ZlRXZlbnRIYW5kbGVyKHRoaXMsImNvbGxlY3Rpb25DaGFuZ2VkIixhKX0sYWRkOmZ1bmN0aW9uKGEpe1N5cy5PYnNlcnZlci5hZGQodGhpcyxhKX0sYWRkUmFuZ2U6ZnVuY3Rpb24oYSl7U3lzLk9ic2VydmVyLmFkZFJhbmdlKHRoaXMsYSl9LGNsZWFyOmZ1bmN0aW9uKCl7U3lzLk9ic2VydmVyLmNsZWFyKHRoaXMpfSxpbnNlcnQ6ZnVuY3Rpb24oYSxiKXtTeXMuT2JzZXJ2ZXIuaW5zZXJ0KHRoaXMsYSxiKX0scmVtb3ZlOmZ1bmN0aW9uKGEpe3JldHVybiBTeXMuT2JzZXJ2ZXIucmVtb3ZlKHRoaXMsYSl9LHJlbW92ZUF0OmZ1bmN0aW9uKGEpe1N5cy5PYnNlcnZlci5yZW1vdmVBdCh0aGlzLGEpfSxyYWlzZUNvbGxlY3Rpb25DaGFuZ2VkOmZ1bmN0aW9uKGEpe1N5cy5PYnNlcnZlci5yYWlzZUV2ZW50KHRoaXMsImNvbGxlY3Rpb25DaGFuZ2VkIixuZXcgU3lzLk5vdGlmeUNvbGxlY3Rpb25DaGFuZ2VkRXZlbnRBcmdzKGEpKX19O1N5cy5PYnNlcnZlci5fZ2V0Q29udGV4dD1mdW5jdGlvbihiLGMpe3ZhciBhPWIuX29ic2VydmVyQ29udGV4dDtpZihhKXJldHVybiBhKCk7aWYoYylyZXR1cm4gKGIuX29ic2VydmVyQ29udGV4dD1TeXMuT2JzZXJ2ZXIuX2NyZWF0ZUNvbnRleHQoKSkoKTtyZXR1cm4gbnVsbH07U3lzLk9ic2VydmVyLl9jcmVhdGVDb250ZXh0PWZ1bmN0aW9uKCl7dmFyIGE9e2V2ZW50czpuZXcgU3lzLkV2ZW50SGFuZGxlckxpc3R9O3JldHVybiBmdW5jdGlvbigpe3JldHVybiBhfX07RGF0ZS5fYXBwZW5kUHJlT3JQb3N0TWF0Y2g9ZnVuY3Rpb24oZSxiKXt2YXIgZD0wLGE9ZmFsc2U7Zm9yKHZhciBjPTAsZz1lLmxlbmd0aDtjPGc7YysrKXt2YXIgZj1lLmNoYXJBdChjKTtzd2l0Y2goZil7Y2FzZSAiJyI6aWYoYSliLmFwcGVuZCgiJyIpO2Vsc2UgZCsrO2E9ZmFsc2U7YnJlYWs7Y2FzZSAiXFwiOmlmKGEpYi5hcHBlbmQoIlxcIik7YT0hYTticmVhaztkZWZhdWx0OmIuYXBwZW5kKGYpO2E9ZmFsc2V9fXJldHVybiBkfTtEYXRlLl9leHBhbmRGb3JtYXQ9ZnVuY3Rpb24oYSxiKXtpZighYiliPSJGIjt2YXIgYz1iLmxlbmd0aDtpZihjPT09MSlzd2l0Y2goYil7Y2FzZSAiZCI6cmV0dXJuIGEuU2hvcnREYXRlUGF0dGVybjtjYXNlICJEIjpyZXR1cm4gYS5Mb25nRGF0ZVBhdHRlcm47Y2FzZSAidCI6cmV0dXJuIGEuU2hvcnRUaW1lUGF0dGVybjtjYXNlICJUIjpyZXR1cm4gYS5Mb25nVGltZVBhdHRlcm47Y2FzZSAiZiI6cmV0dXJuIGEuTG9uZ0RhdGVQYXR0ZXJuKyIgIithLlNob3J0VGltZVBhdHRlcm47Y2FzZSAiRiI6cmV0dXJuIGEuRnVsbERhdGVUaW1lUGF0dGVybjtjYXNlICJNIjpjYXNlICJtIjpyZXR1cm4gYS5Nb250aERheVBhdHRlcm47Y2FzZSAicyI6cmV0dXJuIGEuU29ydGFibGVEYXRlVGltZVBhdHRlcm47Y2FzZSAiWSI6Y2FzZSAieSI6cmV0dXJuIGEuWWVhck1vbnRoUGF0dGVybjtkZWZhdWx0OnRocm93IEVycm9yLmZvcm1hdChTeXMuUmVzLmZvcm1hdEludmFsaWRTdHJpbmcpfWVsc2UgaWYoYz09PTImJmIuY2hhckF0KDApPT09IiUiKWI9Yi5jaGFyQXQoMSk7cmV0dXJuIGJ9O0RhdGUuX2V4cGFuZFllYXI9ZnVuY3Rpb24oYyxhKXt2YXIgZD1uZXcgRGF0ZSxlPURhdGUuX2dldEVyYShkKTtpZihhPDEwMCl7dmFyIGI9RGF0ZS5fZ2V0RXJhWWVhcihkLGMsZSk7YSs9Yi1iJTEwMDtpZihhPmMuQ2FsZW5kYXIuVHdvRGlnaXRZZWFyTWF4KWEtPTEwMH1yZXR1cm4gYX07RGF0ZS5fZ2V0RXJhPWZ1bmN0aW9uKGUsYyl7aWYoIWMpcmV0dXJuIDA7dmFyIGIsZD1lLmdldFRpbWUoKTtmb3IodmFyIGE9MCxmPWMubGVuZ3RoO2E8ZjthKz00KXtiPWNbYSsyXTtpZihiPT09bnVsbHx8ZD49YilyZXR1cm4gYX1yZXR1cm4gMH07RGF0ZS5fZ2V0RXJhWWVhcj1mdW5jdGlvbihkLGIsZSxjKXt2YXIgYT1kLmdldEZ1bGxZZWFyKCk7aWYoIWMmJmIuZXJhcylhLT1iLmVyYXNbZSszXTtyZXR1cm4gYX07RGF0ZS5fZ2V0UGFyc2VSZWdFeHA9ZnVuY3Rpb24oYixlKXtpZighYi5fcGFyc2VSZWdFeHApYi5fcGFyc2VSZWdFeHA9e307ZWxzZSBpZihiLl9wYXJzZVJlZ0V4cFtlXSlyZXR1cm4gYi5fcGFyc2VSZWdFeHBbZV07dmFyIGM9RGF0ZS5fZXhwYW5kRm9ybWF0KGIsZSk7Yz1jLnJlcGxhY2UoLyhbXF5cJFwuXCpcK1w/XHxcW1xdXChcKVx7XH1dKS9nLCJcXFxcJDEiKTt2YXIgYT1uZXcgU3lzLlN0cmluZ0J1aWxkZXIoIl4iKSxqPVtdLGY9MCxpPTAsaD1EYXRlLl9nZXRUb2tlblJlZ0V4cCgpLGQ7d2hpbGUoKGQ9aC5leGVjKGMpKSE9PW51bGwpe3ZhciBsPWMuc2xpY2UoZixkLmluZGV4KTtmPWgubGFzdEluZGV4O2krPURhdGUuX2FwcGVuZFByZU9yUG9zdE1hdGNoKGwsYSk7aWYoaSUyPT09MSl7YS5hcHBlbmQoZFswXSk7Y29udGludWV9c3dpdGNoKGRbMF0pe2Nhc2UgImRkZGQiOmNhc2UgImRkZCI6Y2FzZSAiTU1NTSI6Y2FzZSAiTU1NIjpjYXNlICJnZyI6Y2FzZSAiZyI6YS5hcHBlbmQoIihcXEQrKSIpO2JyZWFrO2Nhc2UgInR0IjpjYXNlICJ0IjphLmFwcGVuZCgiKFxcRCopIik7YnJlYWs7Y2FzZSAieXl5eSI6YS5hcHBlbmQoIihcXGR7NH0pIik7YnJlYWs7Y2FzZSAiZmZmIjphLmFwcGVuZCgiKFxcZHszfSkiKTticmVhaztjYXNlICJmZiI6YS5hcHBlbmQoIihcXGR7Mn0pIik7YnJlYWs7Y2FzZSAiZiI6YS5hcHBlbmQoIihcXGQpIik7YnJlYWs7Y2FzZSAiZGQiOmNhc2UgImQiOmNhc2UgIk1NIjpjYXNlICJNIjpjYXNlICJ5eSI6Y2FzZSAieSI6Y2FzZSAiSEgiOmNhc2UgIkgiOmNhc2UgImhoIjpjYXNlICJoIjpjYXNlICJtbSI6Y2FzZSAibSI6Y2FzZSAic3MiOmNhc2UgInMiOmEuYXBwZW5kKCIoXFxkXFxkPykiKTticmVhaztjYXNlICJ6enoiOmEuYXBwZW5kKCIoWystXT9cXGRcXGQ/OlxcZHsyfSkiKTticmVhaztjYXNlICJ6eiI6Y2FzZSAieiI6YS5hcHBlbmQoIihbKy1dP1xcZFxcZD8pIik7YnJlYWs7Y2FzZSAiLyI6YS5hcHBlbmQoIihcXCIrYi5EYXRlU2VwYXJhdG9yKyIpIil9QXJyYXkuYWRkKGosZFswXSl9RGF0ZS5fYXBwZW5kUHJlT3JQb3N0TWF0Y2goYy5zbGljZShmKSxhKTthLmFwcGVuZCgiJCIpO3ZhciBrPWEudG9TdHJpbmcoKS5yZXBsYWNlKC9ccysvZywiXFxzKyIpLGc9eyJyZWdFeHAiOmssImdyb3VwcyI6an07Yi5fcGFyc2VSZWdFeHBbZV09ZztyZXR1cm4gZ307RGF0ZS5fZ2V0VG9rZW5SZWdFeHA9ZnVuY3Rpb24oKXtyZXR1cm4gL1wvfGRkZGR8ZGRkfGRkfGR8TU1NTXxNTU18TU18TXx5eXl5fHl5fHl8aGh8aHxISHxIfG1tfG18c3N8c3x0dHx0fGZmZnxmZnxmfHp6enx6enx6fGdnfGcvZ307RGF0ZS5wYXJzZUxvY2FsZT1mdW5jdGlvbihhKXtyZXR1cm4gRGF0ZS5fcGFyc2UoYSxTeXMuQ3VsdHVyZUluZm8uQ3VycmVudEN1bHR1cmUsYXJndW1lbnRzKX07RGF0ZS5wYXJzZUludmFyaWFudD1mdW5jdGlvbihhKXtyZXR1cm4gRGF0ZS5fcGFyc2UoYSxTeXMuQ3VsdHVyZUluZm8uSW52YXJpYW50Q3VsdHVyZSxhcmd1bWVudHMpfTtEYXRlLl9wYXJzZT1mdW5jdGlvbihoLGQsaSl7dmFyIGEsYyxiLGYsZSxnPWZhbHNlO2ZvcihhPTEsYz1pLmxlbmd0aDthPGM7YSsrKXtmPWlbYV07aWYoZil7Zz10cnVlO2I9RGF0ZS5fcGFyc2VFeGFjdChoLGYsZCk7aWYoYilyZXR1cm4gYn19aWYoIWcpe2U9ZC5fZ2V0RGF0ZVRpbWVGb3JtYXRzKCk7Zm9yKGE9MCxjPWUubGVuZ3RoO2E8YzthKyspe2I9RGF0ZS5fcGFyc2VFeGFjdChoLGVbYV0sZCk7aWYoYilyZXR1cm4gYn19cmV0dXJuIG51bGx9O0RhdGUuX3BhcnNlRXhhY3Q9ZnVuY3Rpb24odyxELGspe3c9dy50cmltKCk7dmFyIGc9ay5kYXRlVGltZUZvcm1hdCxBPURhdGUuX2dldFBhcnNlUmVnRXhwKGcsRCksQz0obmV3IFJlZ0V4cChBLnJlZ0V4cCkpLmV4ZWModyk7aWYoQz09PW51bGwpcmV0dXJuIG51bGw7dmFyIEI9QS5ncm91cHMseD1udWxsLGU9bnVsbCxjPW51bGwsaj1udWxsLGk9bnVsbCxkPTAsaCxwPTAscT0wLGY9MCxsPW51bGwsdj1mYWxzZTtmb3IodmFyIHM9MCxFPUIubGVuZ3RoO3M8RTtzKyspe3ZhciBhPUNbcysxXTtpZihhKXN3aXRjaChCW3NdKXtjYXNlICJkZCI6Y2FzZSAiZCI6aj1wYXJzZUludChhLDEwKTtpZihqPDF8fGo+MzEpcmV0dXJuIG51bGw7YnJlYWs7Y2FzZSAiTU1NTSI6Yz1rLl9nZXRNb250aEluZGV4KGEpO2lmKGM8MHx8Yz4xMSlyZXR1cm4gbnVsbDticmVhaztjYXNlICJNTU0iOmM9ay5fZ2V0QWJick1vbnRoSW5kZXgoYSk7aWYoYzwwfHxjPjExKXJldHVybiBudWxsO2JyZWFrO2Nhc2UgIk0iOmNhc2UgIk1NIjpjPXBhcnNlSW50KGEsMTApLTE7aWYoYzwwfHxjPjExKXJldHVybiBudWxsO2JyZWFrO2Nhc2UgInkiOmNhc2UgInl5IjplPURhdGUuX2V4cGFuZFllYXIoZyxwYXJzZUludChhLDEwKSk7aWYoZTwwfHxlPjk5OTkpcmV0dXJuIG51bGw7YnJlYWs7Y2FzZSAieXl5eSI6ZT1wYXJzZUludChhLDEwKTtpZihlPDB8fGU+OTk5OSlyZXR1cm4gbnVsbDticmVhaztjYXNlICJoIjpjYXNlICJoaCI6ZD1wYXJzZUludChhLDEwKTtpZihkPT09MTIpZD0wO2lmKGQ8MHx8ZD4xMSlyZXR1cm4gbnVsbDticmVhaztjYXNlICJIIjpjYXNlICJISCI6ZD1wYXJzZUludChhLDEwKTtpZihkPDB8fGQ+MjMpcmV0dXJuIG51bGw7YnJlYWs7Y2FzZSAibSI6Y2FzZSAibW0iOnA9cGFyc2VJbnQoYSwxMCk7aWYocDwwfHxwPjU5KXJldHVybiBudWxsO2JyZWFrO2Nhc2UgInMiOmNhc2UgInNzIjpxPXBhcnNlSW50KGEsMTApO2lmKHE8MHx8cT41OSlyZXR1cm4gbnVsbDticmVhaztjYXNlICJ0dCI6Y2FzZSAidCI6dmFyIHo9YS50b1VwcGVyQ2FzZSgpO3Y9ej09PWcuUE1EZXNpZ25hdG9yLnRvVXBwZXJDYXNlKCk7aWYoIXYmJnohPT1nLkFNRGVzaWduYXRvci50b1VwcGVyQ2FzZSgpKXJldHVybiBudWxsO2JyZWFrO2Nhc2UgImYiOmY9cGFyc2VJbnQoYSwxMCkqMTAwO2lmKGY8MHx8Zj45OTkpcmV0dXJuIG51bGw7YnJlYWs7Y2FzZSAiZmYiOmY9cGFyc2VJbnQoYSwxMCkqMTA7aWYoZjwwfHxmPjk5OSlyZXR1cm4gbnVsbDticmVhaztjYXNlICJmZmYiOmY9cGFyc2VJbnQoYSwxMCk7aWYoZjwwfHxmPjk5OSlyZXR1cm4gbnVsbDticmVhaztjYXNlICJkZGRkIjppPWsuX2dldERheUluZGV4KGEpO2lmKGk8MHx8aT42KXJldHVybiBudWxsO2JyZWFrO2Nhc2UgImRkZCI6aT1rLl9nZXRBYmJyRGF5SW5kZXgoYSk7aWYoaTwwfHxpPjYpcmV0dXJuIG51bGw7YnJlYWs7Y2FzZSAienp6Ijp2YXIgdT1hLnNwbGl0KC86Lyk7aWYodS5sZW5ndGghPT0yKXJldHVybiBudWxsO2g9cGFyc2VJbnQodVswXSwxMCk7aWYoaDwtMTJ8fGg+MTMpcmV0dXJuIG51bGw7dmFyIG09cGFyc2VJbnQodVsxXSwxMCk7aWYobTwwfHxtPjU5KXJldHVybiBudWxsO2w9aCo2MCsoYS5zdGFydHNXaXRoKCItIik/LW06bSk7YnJlYWs7Y2FzZSAieiI6Y2FzZSAienoiOmg9cGFyc2VJbnQoYSwxMCk7aWYoaDwtMTJ8fGg+MTMpcmV0dXJuIG51bGw7bD1oKjYwO2JyZWFrO2Nhc2UgImciOmNhc2UgImdnIjp2YXIgbz1hO2lmKCFvfHwhZy5lcmFzKXJldHVybiBudWxsO289by50b0xvd2VyQ2FzZSgpLnRyaW0oKTtmb3IodmFyIHI9MCxGPWcuZXJhcy5sZW5ndGg7cjxGO3IrPTQpaWYobz09PWcuZXJhc1tyKzFdLnRvTG93ZXJDYXNlKCkpe3g9cjticmVha31pZih4PT09bnVsbClyZXR1cm4gbnVsbH19dmFyIGI9bmV3IERhdGUsdCxuPWcuQ2FsZW5kYXIuY29udmVydDtpZihuKXQ9bi5mcm9tR3JlZ29yaWFuKGIpWzBdO2Vsc2UgdD1iLmdldEZ1bGxZZWFyKCk7aWYoZT09PW51bGwpZT10O2Vsc2UgaWYoZy5lcmFzKWUrPWcuZXJhc1soeHx8MCkrM107aWYoYz09PW51bGwpYz0wO2lmKGo9PT1udWxsKWo9MTtpZihuKXtiPW4udG9HcmVnb3JpYW4oZSxjLGopO2lmKGI9PT1udWxsKXJldHVybiBudWxsfWVsc2V7Yi5zZXRGdWxsWWVhcihlLGMsaik7aWYoYi5nZXREYXRlKCkhPT1qKXJldHVybiBudWxsO2lmKGkhPT1udWxsJiZiLmdldERheSgpIT09aSlyZXR1cm4gbnVsbH1pZih2JiZkPDEyKWQrPTEyO2Iuc2V0SG91cnMoZCxwLHEsZik7aWYobCE9PW51bGwpe3ZhciB5PWIuZ2V0TWludXRlcygpLShsK2IuZ2V0VGltZXpvbmVPZmZzZXQoKSk7Yi5zZXRIb3VycyhiLmdldEhvdXJzKCkrcGFyc2VJbnQoeS82MCwxMCkseSU2MCl9cmV0dXJuIGJ9O0RhdGUucHJvdG90eXBlLmZvcm1hdD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fdG9Gb3JtYXR0ZWRTdHJpbmcoYSxTeXMuQ3VsdHVyZUluZm8uSW52YXJpYW50Q3VsdHVyZSl9O0RhdGUucHJvdG90eXBlLmxvY2FsZUZvcm1hdD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fdG9Gb3JtYXR0ZWRTdHJpbmcoYSxTeXMuQ3VsdHVyZUluZm8uQ3VycmVudEN1bHR1cmUpfTtEYXRlLnByb3RvdHlwZS5fdG9Gb3JtYXR0ZWRTdHJpbmc9ZnVuY3Rpb24oZSxqKXt2YXIgYj1qLmRhdGVUaW1lRm9ybWF0LG49Yi5DYWxlbmRhci5jb252ZXJ0O2lmKCFlfHwhZS5sZW5ndGh8fGU9PT0iaSIpaWYoaiYmai5uYW1lLmxlbmd0aClpZihuKXJldHVybiB0aGlzLl90b0Zvcm1hdHRlZFN0cmluZyhiLkZ1bGxEYXRlVGltZVBhdHRlcm4saik7ZWxzZXt2YXIgcj1uZXcgRGF0ZSh0aGlzLmdldFRpbWUoKSkseD1EYXRlLl9nZXRFcmEodGhpcyxiLmVyYXMpO3Iuc2V0RnVsbFllYXIoRGF0ZS5fZ2V0RXJhWWVhcih0aGlzLGIseCkpO3JldHVybiByLnRvTG9jYWxlU3RyaW5nKCl9ZWxzZSByZXR1cm4gdGhpcy50b1N0cmluZygpO3ZhciBsPWIuZXJhcyxrPWU9PT0icyI7ZT1EYXRlLl9leHBhbmRGb3JtYXQoYixlKTt2YXIgYT1uZXcgU3lzLlN0cmluZ0J1aWxkZXIsYztmdW5jdGlvbiBkKGEpe2lmKGE8MTApcmV0dXJuICIwIithO3JldHVybiBhLnRvU3RyaW5nKCl9ZnVuY3Rpb24gbShhKXtpZihhPDEwKXJldHVybiAiMDAiK2E7aWYoYTwxMDApcmV0dXJuICIwIithO3JldHVybiBhLnRvU3RyaW5nKCl9ZnVuY3Rpb24gdihhKXtpZihhPDEwKXJldHVybiAiMDAwIithO2Vsc2UgaWYoYTwxMDApcmV0dXJuICIwMCIrYTtlbHNlIGlmKGE8MTAwMClyZXR1cm4gIjAiK2E7cmV0dXJuIGEudG9TdHJpbmcoKX12YXIgaCxwLHQ9LyhbXmRdfF4pKGR8ZGQpKFteZF18JCkvZztmdW5jdGlvbiBzKCl7aWYoaHx8cClyZXR1cm4gaDtoPXQudGVzdChlKTtwPXRydWU7cmV0dXJuIGh9dmFyIHE9MCxvPURhdGUuX2dldFRva2VuUmVnRXhwKCksZjtpZighayYmbilmPW4uZnJvbUdyZWdvcmlhbih0aGlzKTtmb3IoO3RydWU7KXt2YXIgdz1vLmxhc3RJbmRleCxpPW8uZXhlYyhlKSx1PWUuc2xpY2UodyxpP2kuaW5kZXg6ZS5sZW5ndGgpO3ErPURhdGUuX2FwcGVuZFByZU9yUG9zdE1hdGNoKHUsYSk7aWYoIWkpYnJlYWs7aWYocSUyPT09MSl7YS5hcHBlbmQoaVswXSk7Y29udGludWV9ZnVuY3Rpb24gZyhhLGIpe2lmKGYpcmV0dXJuIGZbYl07c3dpdGNoKGIpe2Nhc2UgMDpyZXR1cm4gYS5nZXRGdWxsWWVhcigpO2Nhc2UgMTpyZXR1cm4gYS5nZXRNb250aCgpO2Nhc2UgMjpyZXR1cm4gYS5nZXREYXRlKCl9fXN3aXRjaChpWzBdKXtjYXNlICJkZGRkIjphLmFwcGVuZChiLkRheU5hbWVzW3RoaXMuZ2V0RGF5KCldKTticmVhaztjYXNlICJkZGQiOmEuYXBwZW5kKGIuQWJicmV2aWF0ZWREYXlOYW1lc1t0aGlzLmdldERheSgpXSk7YnJlYWs7Y2FzZSAiZGQiOmg9dHJ1ZTthLmFwcGVuZChkKGcodGhpcywyKSkpO2JyZWFrO2Nhc2UgImQiOmg9dHJ1ZTthLmFwcGVuZChnKHRoaXMsMikpO2JyZWFrO2Nhc2UgIk1NTU0iOmEuYXBwZW5kKGIuTW9udGhHZW5pdGl2ZU5hbWVzJiZzKCk/Yi5Nb250aEdlbml0aXZlTmFtZXNbZyh0aGlzLDEpXTpiLk1vbnRoTmFtZXNbZyh0aGlzLDEpXSk7YnJlYWs7Y2FzZSAiTU1NIjphLmFwcGVuZChiLkFiYnJldmlhdGVkTW9udGhHZW5pdGl2ZU5hbWVzJiZzKCk/Yi5BYmJyZXZpYXRlZE1vbnRoR2VuaXRpdmVOYW1lc1tnKHRoaXMsMSldOmIuQWJicmV2aWF0ZWRNb250aE5hbWVzW2codGhpcywxKV0pO2JyZWFrO2Nhc2UgIk1NIjphLmFwcGVuZChkKGcodGhpcywxKSsxKSk7YnJlYWs7Y2FzZSAiTSI6YS5hcHBlbmQoZyh0aGlzLDEpKzEpO2JyZWFrO2Nhc2UgInl5eXkiOmEuYXBwZW5kKHYoZj9mWzBdOkRhdGUuX2dldEVyYVllYXIodGhpcyxiLERhdGUuX2dldEVyYSh0aGlzLGwpLGspKSk7YnJlYWs7Y2FzZSAieXkiOmEuYXBwZW5kKGQoKGY/ZlswXTpEYXRlLl9nZXRFcmFZZWFyKHRoaXMsYixEYXRlLl9nZXRFcmEodGhpcyxsKSxrKSklMTAwKSk7YnJlYWs7Y2FzZSAieSI6YS5hcHBlbmQoKGY/ZlswXTpEYXRlLl9nZXRFcmFZZWFyKHRoaXMsYixEYXRlLl9nZXRFcmEodGhpcyxsKSxrKSklMTAwKTticmVhaztjYXNlICJoaCI6Yz10aGlzLmdldEhvdXJzKCklMTI7aWYoYz09PTApYz0xMjthLmFwcGVuZChkKGMpKTticmVhaztjYXNlICJoIjpjPXRoaXMuZ2V0SG91cnMoKSUxMjtpZihjPT09MCljPTEyO2EuYXBwZW5kKGMpO2JyZWFrO2Nhc2UgIkhIIjphLmFwcGVuZChkKHRoaXMuZ2V0SG91cnMoKSkpO2JyZWFrO2Nhc2UgIkgiOmEuYXBwZW5kKHRoaXMuZ2V0SG91cnMoKSk7YnJlYWs7Y2FzZSAibW0iOmEuYXBwZW5kKGQodGhpcy5nZXRNaW51dGVzKCkpKTticmVhaztjYXNlICJtIjphLmFwcGVuZCh0aGlzLmdldE1pbnV0ZXMoKSk7YnJlYWs7Y2FzZSAic3MiOmEuYXBwZW5kKGQodGhpcy5nZXRTZWNvbmRzKCkpKTticmVhaztjYXNlICJzIjphLmFwcGVuZCh0aGlzLmdldFNlY29uZHMoKSk7YnJlYWs7Y2FzZSAidHQiOmEuYXBwZW5kKHRoaXMuZ2V0SG91cnMoKTwxMj9iLkFNRGVzaWduYXRvcjpiLlBNRGVzaWduYXRvcik7YnJlYWs7Y2FzZSAidCI6YS5hcHBlbmQoKHRoaXMuZ2V0SG91cnMoKTwxMj9iLkFNRGVzaWduYXRvcjpiLlBNRGVzaWduYXRvcikuY2hhckF0KDApKTticmVhaztjYXNlICJmIjphLmFwcGVuZChtKHRoaXMuZ2V0TWlsbGlzZWNvbmRzKCkpLmNoYXJBdCgwKSk7YnJlYWs7Y2FzZSAiZmYiOmEuYXBwZW5kKG0odGhpcy5nZXRNaWxsaXNlY29uZHMoKSkuc3Vic3RyKDAsMikpO2JyZWFrO2Nhc2UgImZmZiI6YS5hcHBlbmQobSh0aGlzLmdldE1pbGxpc2Vjb25kcygpKSk7YnJlYWs7Y2FzZSAieiI6Yz10aGlzLmdldFRpbWV6b25lT2Zmc2V0KCkvNjA7YS5hcHBlbmQoKGM8PTA/IisiOiItIikrTWF0aC5mbG9vcihNYXRoLmFicyhjKSkpO2JyZWFrO2Nhc2UgInp6IjpjPXRoaXMuZ2V0VGltZXpvbmVPZmZzZXQoKS82MDthLmFwcGVuZCgoYzw9MD8iKyI6Ii0iKStkKE1hdGguZmxvb3IoTWF0aC5hYnMoYykpKSk7YnJlYWs7Y2FzZSAienp6IjpjPXRoaXMuZ2V0VGltZXpvbmVPZmZzZXQoKS82MDthLmFwcGVuZCgoYzw9MD8iKyI6Ii0iKStkKE1hdGguZmxvb3IoTWF0aC5hYnMoYykpKSsiOiIrZChNYXRoLmFicyh0aGlzLmdldFRpbWV6b25lT2Zmc2V0KCklNjApKSk7YnJlYWs7Y2FzZSAiZyI6Y2FzZSAiZ2ciOmlmKGIuZXJhcylhLmFwcGVuZChiLmVyYXNbRGF0ZS5fZ2V0RXJhKHRoaXMsbCkrMV0pO2JyZWFrO2Nhc2UgIi8iOmEuYXBwZW5kKGIuRGF0ZVNlcGFyYXRvcil9fXJldHVybiBhLnRvU3RyaW5nKCl9O1N0cmluZy5sb2NhbGVGb3JtYXQ9ZnVuY3Rpb24oKXtyZXR1cm4gU3RyaW5nLl90b0Zvcm1hdHRlZFN0cmluZyh0cnVlLGFyZ3VtZW50cyl9O051bWJlci5wYXJzZUxvY2FsZT1mdW5jdGlvbihhKXtyZXR1cm4gTnVtYmVyLl9wYXJzZShhLFN5cy5DdWx0dXJlSW5mby5DdXJyZW50Q3VsdHVyZSl9O051bWJlci5wYXJzZUludmFyaWFudD1mdW5jdGlvbihhKXtyZXR1cm4gTnVtYmVyLl9wYXJzZShhLFN5cy5DdWx0dXJlSW5mby5JbnZhcmlhbnRDdWx0dXJlKX07TnVtYmVyLl9wYXJzZT1mdW5jdGlvbihiLG8pe2I9Yi50cmltKCk7aWYoYi5tYXRjaCgvXlsrLV0/aW5maW5pdHkkL2kpKXJldHVybiBwYXJzZUZsb2F0KGIpO2lmKGIubWF0Y2goL14weFthLWYwLTldKyQvaSkpcmV0dXJuIHBhcnNlSW50KGIpO3ZhciBhPW8ubnVtYmVyRm9ybWF0LGc9TnVtYmVyLl9wYXJzZU51bWJlck5lZ2F0aXZlUGF0dGVybihiLGEsYS5OdW1iZXJOZWdhdGl2ZVBhdHRlcm4pLGg9Z1swXSxlPWdbMV07aWYoaD09PSIiJiZhLk51bWJlck5lZ2F0aXZlUGF0dGVybiE9PTEpe2c9TnVtYmVyLl9wYXJzZU51bWJlck5lZ2F0aXZlUGF0dGVybihiLGEsMSk7aD1nWzBdO2U9Z1sxXX1pZihoPT09IiIpaD0iKyI7dmFyIGosZCxmPWUuaW5kZXhPZigiZSIpO2lmKGY8MClmPWUuaW5kZXhPZigiRSIpO2lmKGY8MCl7ZD1lO2o9bnVsbH1lbHNle2Q9ZS5zdWJzdHIoMCxmKTtqPWUuc3Vic3RyKGYrMSl9dmFyIGMsayxtPWQuaW5kZXhPZihhLk51bWJlckRlY2ltYWxTZXBhcmF0b3IpO2lmKG08MCl7Yz1kO2s9bnVsbH1lbHNle2M9ZC5zdWJzdHIoMCxtKTtrPWQuc3Vic3RyKG0rYS5OdW1iZXJEZWNpbWFsU2VwYXJhdG9yLmxlbmd0aCl9Yz1jLnNwbGl0KGEuTnVtYmVyR3JvdXBTZXBhcmF0b3IpLmpvaW4oIiIpO3ZhciBuPWEuTnVtYmVyR3JvdXBTZXBhcmF0b3IucmVwbGFjZSgvXHUwMEEwL2csIiAiKTtpZihhLk51bWJlckdyb3VwU2VwYXJhdG9yIT09biljPWMuc3BsaXQobikuam9pbigiIik7dmFyIGw9aCtjO2lmKGshPT1udWxsKWwrPSIuIitrO2lmKGohPT1udWxsKXt2YXIgaT1OdW1iZXIuX3BhcnNlTnVtYmVyTmVnYXRpdmVQYXR0ZXJuKGosYSwxKTtpZihpWzBdPT09IiIpaVswXT0iKyI7bCs9ImUiK2lbMF0raVsxXX1pZihsLm1hdGNoKC9eWystXT9cZCpcLj9cZCooZVsrLV0/XGQrKT8kLykpcmV0dXJuIHBhcnNlRmxvYXQobCk7cmV0dXJuIE51bWJlci5OYU59O051bWJlci5fcGFyc2VOdW1iZXJOZWdhdGl2ZVBhdHRlcm49ZnVuY3Rpb24oYSxkLGUpe3ZhciBiPWQuTmVnYXRpdmVTaWduLGM9ZC5Qb3NpdGl2ZVNpZ247c3dpdGNoKGUpe2Nhc2UgNDpiPSIgIitiO2M9IiAiK2M7Y2FzZSAzOmlmKGEuZW5kc1dpdGgoYikpcmV0dXJuIFsiLSIsYS5zdWJzdHIoMCxhLmxlbmd0aC1iLmxlbmd0aCldO2Vsc2UgaWYoYS5lbmRzV2l0aChjKSlyZXR1cm4gWyIrIixhLnN1YnN0cigwLGEubGVuZ3RoLWMubGVuZ3RoKV07YnJlYWs7Y2FzZSAyOmIrPSIgIjtjKz0iICI7Y2FzZSAxOmlmKGEuc3RhcnRzV2l0aChiKSlyZXR1cm4gWyItIixhLnN1YnN0cihiLmxlbmd0aCldO2Vsc2UgaWYoYS5zdGFydHNXaXRoKGMpKXJldHVybiBbIisiLGEuc3Vic3RyKGMubGVuZ3RoKV07YnJlYWs7Y2FzZSAwOmlmKGEuc3RhcnRzV2l0aCgiKCIpJiZhLmVuZHNXaXRoKCIpIikpcmV0dXJuIFsiLSIsYS5zdWJzdHIoMSxhLmxlbmd0aC0yKV19cmV0dXJuIFsiIixhXX07TnVtYmVyLnByb3RvdHlwZS5mb3JtYXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX3RvRm9ybWF0dGVkU3RyaW5nKGEsU3lzLkN1bHR1cmVJbmZvLkludmFyaWFudEN1bHR1cmUpfTtOdW1iZXIucHJvdG90eXBlLmxvY2FsZUZvcm1hdD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fdG9Gb3JtYXR0ZWRTdHJpbmcoYSxTeXMuQ3VsdHVyZUluZm8uQ3VycmVudEN1bHR1cmUpfTtOdW1iZXIucHJvdG90eXBlLl90b0Zvcm1hdHRlZFN0cmluZz1mdW5jdGlvbihlLGope2lmKCFlfHxlLmxlbmd0aD09PTB8fGU9PT0iaSIpaWYoaiYmai5uYW1lLmxlbmd0aD4wKXJldHVybiB0aGlzLnRvTG9jYWxlU3RyaW5nKCk7ZWxzZSByZXR1cm4gdGhpcy50b1N0cmluZygpO3ZhciBvPVsibiAlIiwibiUiLCIlbiJdLG49WyItbiAlIiwiLW4lIiwiLSVuIl0scD1bIihuKSIsIi1uIiwiLSBuIiwibi0iLCJuIC0iXSxtPVsiJG4iLCJuJCIsIiQgbiIsIm4gJCJdLGw9WyIoJG4pIiwiLSRuIiwiJC1uIiwiJG4tIiwiKG4kKSIsIi1uJCIsIm4tJCIsIm4kLSIsIi1uICQiLCItJCBuIiwibiAkLSIsIiQgbi0iLCIkIC1uIiwibi0gJCIsIigkIG4pIiwiKG4gJCkiXTtmdW5jdGlvbiBnKGEsYyxkKXtmb3IodmFyIGI9YS5sZW5ndGg7YjxjO2IrKylhPWQ/IjAiK2E6YSsiMCI7cmV0dXJuIGF9ZnVuY3Rpb24gaShqLGksbCxuLHApe3ZhciBoPWxbMF0saz0xLG89TWF0aC5wb3coMTAsaSksbT1NYXRoLnJvdW5kKGoqbykvbztpZighaXNGaW5pdGUobSkpbT1qO2o9bTt2YXIgYj1qLnRvU3RyaW5nKCksYT0iIixjLGU9Yi5zcGxpdCgvZS9pKTtiPWVbMF07Yz1lLmxlbmd0aD4xP3BhcnNlSW50KGVbMV0pOjA7ZT1iLnNwbGl0KCIuIik7Yj1lWzBdO2E9ZS5sZW5ndGg+MT9lWzFdOiIiO3ZhciBxO2lmKGM+MCl7YT1nKGEsYyxmYWxzZSk7Yis9YS5zbGljZSgwLGMpO2E9YS5zdWJzdHIoYyl9ZWxzZSBpZihjPDApe2M9LWM7Yj1nKGIsYysxLHRydWUpO2E9Yi5zbGljZSgtYyxiLmxlbmd0aCkrYTtiPWIuc2xpY2UoMCwtYyl9aWYoaT4wKXtpZihhLmxlbmd0aD5pKWE9YS5zbGljZSgwLGkpO2Vsc2UgYT1nKGEsaSxmYWxzZSk7YT1wK2F9ZWxzZSBhPSIiO3ZhciBkPWIubGVuZ3RoLTEsZj0iIjt3aGlsZShkPj0wKXtpZihoPT09MHx8aD5kKWlmKGYubGVuZ3RoPjApcmV0dXJuIGIuc2xpY2UoMCxkKzEpK24rZithO2Vsc2UgcmV0dXJuIGIuc2xpY2UoMCxkKzEpK2E7aWYoZi5sZW5ndGg+MClmPWIuc2xpY2UoZC1oKzEsZCsxKStuK2Y7ZWxzZSBmPWIuc2xpY2UoZC1oKzEsZCsxKTtkLT1oO2lmKGs8bC5sZW5ndGgpe2g9bFtrXTtrKyt9fXJldHVybiBiLnNsaWNlKDAsZCsxKStuK2YrYX12YXIgYT1qLm51bWJlckZvcm1hdCxkPU1hdGguYWJzKHRoaXMpO2lmKCFlKWU9IkQiO3ZhciBiPS0xO2lmKGUubGVuZ3RoPjEpYj1wYXJzZUludChlLnNsaWNlKDEpLDEwKTt2YXIgYztzd2l0Y2goZS5jaGFyQXQoMCkpe2Nhc2UgImQiOmNhc2UgIkQiOmM9Im4iO2lmKGIhPT0tMSlkPWcoIiIrZCxiLHRydWUpO2lmKHRoaXM8MClkPS1kO2JyZWFrO2Nhc2UgImMiOmNhc2UgIkMiOmlmKHRoaXM8MCljPWxbYS5DdXJyZW5jeU5lZ2F0aXZlUGF0dGVybl07ZWxzZSBjPW1bYS5DdXJyZW5jeVBvc2l0aXZlUGF0dGVybl07aWYoYj09PS0xKWI9YS5DdXJyZW5jeURlY2ltYWxEaWdpdHM7ZD1pKE1hdGguYWJzKHRoaXMpLGIsYS5DdXJyZW5jeUdyb3VwU2l6ZXMsYS5DdXJyZW5jeUdyb3VwU2VwYXJhdG9yLGEuQ3VycmVuY3lEZWNpbWFsU2VwYXJhdG9yKTticmVhaztjYXNlICJuIjpjYXNlICJOIjppZih0aGlzPDApYz1wW2EuTnVtYmVyTmVnYXRpdmVQYXR0ZXJuXTtlbHNlIGM9Im4iO2lmKGI9PT0tMSliPWEuTnVtYmVyRGVjaW1hbERpZ2l0cztkPWkoTWF0aC5hYnModGhpcyksYixhLk51bWJlckdyb3VwU2l6ZXMsYS5OdW1iZXJHcm91cFNlcGFyYXRvcixhLk51bWJlckRlY2ltYWxTZXBhcmF0b3IpO2JyZWFrO2Nhc2UgInAiOmNhc2UgIlAiOmlmKHRoaXM8MCljPW5bYS5QZXJjZW50TmVnYXRpdmVQYXR0ZXJuXTtlbHNlIGM9b1thLlBlcmNlbnRQb3NpdGl2ZVBhdHRlcm5dO2lmKGI9PT0tMSliPWEuUGVyY2VudERlY2ltYWxEaWdpdHM7ZD1pKE1hdGguYWJzKHRoaXMpKjEwMCxiLGEuUGVyY2VudEdyb3VwU2l6ZXMsYS5QZXJjZW50R3JvdXBTZXBhcmF0b3IsYS5QZXJjZW50RGVjaW1hbFNlcGFyYXRvcik7YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvci5mb3JtYXQoU3lzLlJlcy5mb3JtYXRCYWRGb3JtYXRTcGVjaWZpZXIpfXZhciBrPS9ufFwkfC18JS9nLGY9IiI7Zm9yKDt0cnVlOyl7dmFyIHE9ay5sYXN0SW5kZXgsaD1rLmV4ZWMoYyk7Zis9Yy5zbGljZShxLGg/aC5pbmRleDpjLmxlbmd0aCk7aWYoIWgpYnJlYWs7c3dpdGNoKGhbMF0pe2Nhc2UgIm4iOmYrPWQ7YnJlYWs7Y2FzZSAiJCI6Zis9YS5DdXJyZW5jeVN5bWJvbDticmVhaztjYXNlICItIjppZigvWzEtOV0vLnRlc3QoZCkpZis9YS5OZWdhdGl2ZVNpZ247YnJlYWs7Y2FzZSAiJSI6Zis9YS5QZXJjZW50U3ltYm9sfX1yZXR1cm4gZn07U3lzLkN1bHR1cmVJbmZvPWZ1bmN0aW9uKGMsYixhKXt0aGlzLm5hbWU9Yzt0aGlzLm51bWJlckZvcm1hdD1iO3RoaXMuZGF0ZVRpbWVGb3JtYXQ9YX07U3lzLkN1bHR1cmVJbmZvLnByb3RvdHlwZT17X2dldERhdGVUaW1lRm9ybWF0czpmdW5jdGlvbigpe2lmKCF0aGlzLl9kYXRlVGltZUZvcm1hdHMpe3ZhciBhPXRoaXMuZGF0ZVRpbWVGb3JtYXQ7dGhpcy5fZGF0ZVRpbWVGb3JtYXRzPVthLk1vbnRoRGF5UGF0dGVybixhLlllYXJNb250aFBhdHRlcm4sYS5TaG9ydERhdGVQYXR0ZXJuLGEuU2hvcnRUaW1lUGF0dGVybixhLkxvbmdEYXRlUGF0dGVybixhLkxvbmdUaW1lUGF0dGVybixhLkZ1bGxEYXRlVGltZVBhdHRlcm4sYS5SRkMxMTIzUGF0dGVybixhLlNvcnRhYmxlRGF0ZVRpbWVQYXR0ZXJuLGEuVW5pdmVyc2FsU29ydGFibGVEYXRlVGltZVBhdHRlcm5dfXJldHVybiB0aGlzLl9kYXRlVGltZUZvcm1hdHN9LF9nZXRJbmRleDpmdW5jdGlvbihjLGQsZSl7dmFyIGI9dGhpcy5fdG9VcHBlcihjKSxhPUFycmF5LmluZGV4T2YoZCxiKTtpZihhPT09LTEpYT1BcnJheS5pbmRleE9mKGUsYik7cmV0dXJuIGF9LF9nZXRNb250aEluZGV4OmZ1bmN0aW9uKGEpe2lmKCF0aGlzLl91cHBlck1vbnRocyl7dGhpcy5fdXBwZXJNb250aHM9dGhpcy5fdG9VcHBlckFycmF5KHRoaXMuZGF0ZVRpbWVGb3JtYXQuTW9udGhOYW1lcyk7dGhpcy5fdXBwZXJNb250aHNHZW5pdGl2ZT10aGlzLl90b1VwcGVyQXJyYXkodGhpcy5kYXRlVGltZUZvcm1hdC5Nb250aEdlbml0aXZlTmFtZXMpfXJldHVybiB0aGlzLl9nZXRJbmRleChhLHRoaXMuX3VwcGVyTW9udGhzLHRoaXMuX3VwcGVyTW9udGhzR2VuaXRpdmUpfSxfZ2V0QWJick1vbnRoSW5kZXg6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuX3VwcGVyQWJick1vbnRocyl7dGhpcy5fdXBwZXJBYmJyTW9udGhzPXRoaXMuX3RvVXBwZXJBcnJheSh0aGlzLmRhdGVUaW1lRm9ybWF0LkFiYnJldmlhdGVkTW9udGhOYW1lcyk7dGhpcy5fdXBwZXJBYmJyTW9udGhzR2VuaXRpdmU9dGhpcy5fdG9VcHBlckFycmF5KHRoaXMuZGF0ZVRpbWVGb3JtYXQuQWJicmV2aWF0ZWRNb250aEdlbml0aXZlTmFtZXMpfXJldHVybiB0aGlzLl9nZXRJbmRleChhLHRoaXMuX3VwcGVyQWJick1vbnRocyx0aGlzLl91cHBlckFiYnJNb250aHNHZW5pdGl2ZSl9LF9nZXREYXlJbmRleDpmdW5jdGlvbihhKXtpZighdGhpcy5fdXBwZXJEYXlzKXRoaXMuX3VwcGVyRGF5cz10aGlzLl90b1VwcGVyQXJyYXkodGhpcy5kYXRlVGltZUZvcm1hdC5EYXlOYW1lcyk7cmV0dXJuIEFycmF5LmluZGV4T2YodGhpcy5fdXBwZXJEYXlzLHRoaXMuX3RvVXBwZXIoYSkpfSxfZ2V0QWJickRheUluZGV4OmZ1bmN0aW9uKGEpe2lmKCF0aGlzLl91cHBlckFiYnJEYXlzKXRoaXMuX3VwcGVyQWJickRheXM9dGhpcy5fdG9VcHBlckFycmF5KHRoaXMuZGF0ZVRpbWVGb3JtYXQuQWJicmV2aWF0ZWREYXlOYW1lcyk7cmV0dXJuIEFycmF5LmluZGV4T2YodGhpcy5fdXBwZXJBYmJyRGF5cyx0aGlzLl90b1VwcGVyKGEpKX0sX3RvVXBwZXJBcnJheTpmdW5jdGlvbihjKXt2YXIgYj1bXTtmb3IodmFyIGE9MCxkPWMubGVuZ3RoO2E8ZDthKyspYlthXT10aGlzLl90b1VwcGVyKGNbYV0pO3JldHVybiBifSxfdG9VcHBlcjpmdW5jdGlvbihhKXtyZXR1cm4gYS5zcGxpdCgiXHUwMGEwIikuam9pbigiICIpLnRvVXBwZXJDYXNlKCl9fTtTeXMuQ3VsdHVyZUluZm8ucmVnaXN0ZXJDbGFzcygiU3lzLkN1bHR1cmVJbmZvIik7U3lzLkN1bHR1cmVJbmZvLl9wYXJzZT1mdW5jdGlvbihhKXt2YXIgYj1hLmRhdGVUaW1lRm9ybWF0O2lmKGImJiFiLmVyYXMpYi5lcmFzPWEuZXJhcztyZXR1cm4gbmV3IFN5cy5DdWx0dXJlSW5mbyhhLm5hbWUsYS5udW1iZXJGb3JtYXQsYil9O1N5cy5DdWx0dXJlSW5mby5JbnZhcmlhbnRDdWx0dXJlPVN5cy5DdWx0dXJlSW5mby5fcGFyc2UoeyJuYW1lIjoiIiwibnVtYmVyRm9ybWF0Ijp7IkN1cnJlbmN5RGVjaW1hbERpZ2l0cyI6MiwiQ3VycmVuY3lEZWNpbWFsU2VwYXJhdG9yIjoiLiIsIklzUmVhZE9ubHkiOnRydWUsIkN1cnJlbmN5R3JvdXBTaXplcyI6WzNdLCJOdW1iZXJHcm91cFNpemVzIjpbM10sIlBlcmNlbnRHcm91cFNpemVzIjpbM10sIkN1cnJlbmN5R3JvdXBTZXBhcmF0b3IiOiIsIiwiQ3VycmVuY3lTeW1ib2wiOiJcdTAwYTQiLCJOYU5TeW1ib2wiOiJOYU4iLCJDdXJyZW5jeU5lZ2F0aXZlUGF0dGVybiI6MCwiTnVtYmVyTmVnYXRpdmVQYXR0ZXJuIjoxLCJQZXJjZW50UG9zaXRpdmVQYXR0ZXJuIjowLCJQZXJjZW50TmVnYXRpdmVQYXR0ZXJuIjowLCJOZWdhdGl2ZUluZmluaXR5U3ltYm9sIjoiLUluZmluaXR5IiwiTmVnYXRpdmVTaWduIjoiLSIsIk51bWJlckRlY2ltYWxEaWdpdHMiOjIsIk51bWJlckRlY2ltYWxTZXBhcmF0b3IiOiIuIiwiTnVtYmVyR3JvdXBTZXBhcmF0b3IiOiIsIiwiQ3VycmVuY3lQb3NpdGl2ZVBhdHRlcm4iOjAsIlBvc2l0aXZlSW5maW5pdHlTeW1ib2wiOiJJbmZpbml0eSIsIlBvc2l0aXZlU2lnbiI6IisiLCJQZXJjZW50RGVjaW1hbERpZ2l0cyI6MiwiUGVyY2VudERlY2ltYWxTZXBhcmF0b3IiOiIuIiwiUGVyY2VudEdyb3VwU2VwYXJhdG9yIjoiLCIsIlBlcmNlbnRTeW1ib2wiOiIlIiwiUGVyTWlsbGVTeW1ib2wiOiJcdTIwMzAiLCJOYXRpdmVEaWdpdHMiOlsiMCIsIjEiLCIyIiwiMyIsIjQiLCI1IiwiNiIsIjciLCI4IiwiOSJdLCJEaWdpdFN1YnN0aXR1dGlvbiI6MX0sImRhdGVUaW1lRm9ybWF0Ijp7IkFNRGVzaWduYXRvciI6IkFNIiwiQ2FsZW5kYXIiOnsiTWluU3VwcG9ydGVkRGF0ZVRpbWUiOiJALTYyMTM1NTY4MDAwMDAwQCIsIk1heFN1cHBvcnRlZERhdGVUaW1lIjoiQDI1MzQwMjMwMDc5OTk5OUAiLCJBbGdvcml0aG1UeXBlIjoxLCJDYWxlbmRhclR5cGUiOjEsIkVyYXMiOlsxXSwiVHdvRGlnaXRZZWFyTWF4IjoyMDI5LCJJc1JlYWRPbmx5Ijp0cnVlfSwiRGF0ZVNlcGFyYXRvciI6Ii8iLCJGaXJzdERheU9mV2VlayI6MCwiQ2FsZW5kYXJXZWVrUnVsZSI6MCwiRnVsbERhdGVUaW1lUGF0dGVybiI6ImRkZGQsIGRkIE1NTU0geXl5eSBISDptbTpzcyIsIkxvbmdEYXRlUGF0dGVybiI6ImRkZGQsIGRkIE1NTU0geXl5eSIsIkxvbmdUaW1lUGF0dGVybiI6IkhIOm1tOnNzIiwiTW9udGhEYXlQYXR0ZXJuIjoiTU1NTSBkZCIsIlBNRGVzaWduYXRvciI6IlBNIiwiUkZDMTEyM1BhdHRlcm4iOiJkZGQsIGRkIE1NTSB5eXl5IEhIJzonbW0nOidzcyAnR01UJyIsIlNob3J0RGF0ZVBhdHRlcm4iOiJNTS9kZC95eXl5IiwiU2hvcnRUaW1lUGF0dGVybiI6IkhIOm1tIiwiU29ydGFibGVEYXRlVGltZVBhdHRlcm4iOiJ5eXl5Jy0nTU0nLSdkZCdUJ0hIJzonbW0nOidzcyIsIlRpbWVTZXBhcmF0b3IiOiI6IiwiVW5pdmVyc2FsU29ydGFibGVEYXRlVGltZVBhdHRlcm4iOiJ5eXl5Jy0nTU0nLSdkZCBISCc6J21tJzonc3MnWiciLCJZZWFyTW9udGhQYXR0ZXJuIjoieXl5eSBNTU1NIiwiQWJicmV2aWF0ZWREYXlOYW1lcyI6WyJTdW4iLCJNb24iLCJUdWUiLCJXZWQiLCJUaHUiLCJGcmkiLCJTYXQiXSwiU2hvcnRlc3REYXlOYW1lcyI6WyJTdSIsIk1vIiwiVHUiLCJXZSIsIlRoIiwiRnIiLCJTYSJdLCJEYXlOYW1lcyI6WyJTdW5kYXkiLCJNb25kYXkiLCJUdWVzZGF5IiwiV2VkbmVzZGF5IiwiVGh1cnNkYXkiLCJGcmlkYXkiLCJTYXR1cmRheSJdLCJBYmJyZXZpYXRlZE1vbnRoTmFtZXMiOlsiSmFuIiwiRmViIiwiTWFyIiwiQXByIiwiTWF5IiwiSnVuIiwiSnVsIiwiQXVnIiwiU2VwIiwiT2N0IiwiTm92IiwiRGVjIiwiIl0sIk1vbnRoTmFtZXMiOlsiSmFudWFyeSIsIkZlYnJ1YXJ5IiwiTWFyY2giLCJBcHJpbCIsIk1heSIsIkp1bmUiLCJKdWx5IiwiQXVndXN0IiwiU2VwdGVtYmVyIiwiT2N0b2JlciIsIk5vdmVtYmVyIiwiRGVjZW1iZXIiLCIiXSwiSXNSZWFkT25seSI6dHJ1ZSwiTmF0aXZlQ2FsZW5kYXJOYW1lIjoiR3JlZ29yaWFuIENhbGVuZGFyIiwiQWJicmV2aWF0ZWRNb250aEdlbml0aXZlTmFtZXMiOlsiSmFuIiwiRmViIiwiTWFyIiwiQXByIiwiTWF5IiwiSnVuIiwiSnVsIiwiQXVnIiwiU2VwIiwiT2N0IiwiTm92IiwiRGVjIiwiIl0sIk1vbnRoR2VuaXRpdmVOYW1lcyI6WyJKYW51YXJ5IiwiRmVicnVhcnkiLCJNYXJjaCIsIkFwcmlsIiwiTWF5IiwiSnVuZSIsIkp1bHkiLCJBdWd1c3QiLCJTZXB0ZW1iZXIiLCJPY3RvYmVyIiwiTm92ZW1iZXIiLCJEZWNlbWJlciIsIiJdfSwiZXJhcyI6WzEsIkEuRC4iLG51bGwsMF19KTtpZih0eXBlb2YgX19jdWx0dXJlSW5mbz09PSJvYmplY3QiKXtTeXMuQ3VsdHVyZUluZm8uQ3VycmVudEN1bHR1cmU9U3lzLkN1bHR1cmVJbmZvLl9wYXJzZShfX2N1bHR1cmVJbmZvKTtkZWxldGUgX19jdWx0dXJlSW5mb31lbHNlIFN5cy5DdWx0dXJlSW5mby5DdXJyZW50Q3VsdHVyZT1TeXMuQ3VsdHVyZUluZm8uX3BhcnNlKHsibmFtZSI6ImVuLVVTIiwibnVtYmVyRm9ybWF0Ijp7IkN1cnJlbmN5RGVjaW1hbERpZ2l0cyI6MiwiQ3VycmVuY3lEZWNpbWFsU2VwYXJhdG9yIjoiLiIsIklzUmVhZE9ubHkiOmZhbHNlLCJDdXJyZW5jeUdyb3VwU2l6ZXMiOlszXSwiTnVtYmVyR3JvdXBTaXplcyI6WzNdLCJQZXJjZW50R3JvdXBTaXplcyI6WzNdLCJDdXJyZW5jeUdyb3VwU2VwYXJhdG9yIjoiLCIsIkN1cnJlbmN5U3ltYm9sIjoiJCIsIk5hTlN5bWJvbCI6Ik5hTiIsIkN1cnJlbmN5TmVnYXRpdmVQYXR0ZXJuIjowLCJOdW1iZXJOZWdhdGl2ZVBhdHRlcm4iOjEsIlBlcmNlbnRQb3NpdGl2ZVBhdHRlcm4iOjAsIlBlcmNlbnROZWdhdGl2ZVBhdHRlcm4iOjAsIk5lZ2F0aXZlSW5maW5pdHlTeW1ib2wiOiItSW5maW5pdHkiLCJOZWdhdGl2ZVNpZ24iOiItIiwiTnVtYmVyRGVjaW1hbERpZ2l0cyI6MiwiTnVtYmVyRGVjaW1hbFNlcGFyYXRvciI6Ii4iLCJOdW1iZXJHcm91cFNlcGFyYXRvciI6IiwiLCJDdXJyZW5jeVBvc2l0aXZlUGF0dGVybiI6MCwiUG9zaXRpdmVJbmZpbml0eVN5bWJvbCI6IkluZmluaXR5IiwiUG9zaXRpdmVTaWduIjoiKyIsIlBlcmNlbnREZWNpbWFsRGlnaXRzIjoyLCJQZXJjZW50RGVjaW1hbFNlcGFyYXRvciI6Ii4iLCJQZXJjZW50R3JvdXBTZXBhcmF0b3IiOiIsIiwiUGVyY2VudFN5bWJvbCI6IiUiLCJQZXJNaWxsZVN5bWJvbCI6Ilx1MjAzMCIsIk5hdGl2ZURpZ2l0cyI6WyIwIiwiMSIsIjIiLCIzIiwiNCIsIjUiLCI2IiwiNyIsIjgiLCI5Il0sIkRpZ2l0U3Vic3RpdHV0aW9uIjoxfSwiZGF0ZVRpbWVGb3JtYXQiOnsiQU1EZXNpZ25hdG9yIjoiQU0iLCJDYWxlbmRhciI6eyJNaW5TdXBwb3J0ZWREYXRlVGltZSI6IkAtNjIxMzU1NjgwMDAwMDBAIiwiTWF4U3VwcG9ydGVkRGF0ZVRpbWUiOiJAMjUzNDAyMzAwNzk5OTk5QCIsIkFsZ29yaXRobVR5cGUiOjEsIkNhbGVuZGFyVHlwZSI6MSwiRXJhcyI6WzFdLCJUd29EaWdpdFllYXJNYXgiOjIwMjksIklzUmVhZE9ubHkiOmZhbHNlfSwiRGF0ZVNlcGFyYXRvciI6Ii8iLCJGaXJzdERheU9mV2VlayI6MCwiQ2FsZW5kYXJXZWVrUnVsZSI6MCwiRnVsbERhdGVUaW1lUGF0dGVybiI6ImRkZGQsIE1NTU0gZGQsIHl5eXkgaDptbTpzcyB0dCIsIkxvbmdEYXRlUGF0dGVybiI6ImRkZGQsIE1NTU0gZGQsIHl5eXkiLCJMb25nVGltZVBhdHRlcm4iOiJoOm1tOnNzIHR0IiwiTW9udGhEYXlQYXR0ZXJuIjoiTU1NTSBkZCIsIlBNRGVzaWduYXRvciI6IlBNIiwiUkZDMTEyM1BhdHRlcm4iOiJkZGQsIGRkIE1NTSB5eXl5IEhIJzonbW0nOidzcyAnR01UJyIsIlNob3J0RGF0ZVBhdHRlcm4iOiJNL2QveXl5eSIsIlNob3J0VGltZVBhdHRlcm4iOiJoOm1tIHR0IiwiU29ydGFibGVEYXRlVGltZVBhdHRlcm4iOiJ5eXl5Jy0nTU0nLSdkZCdUJ0hIJzonbW0nOidzcyIsIlRpbWVTZXBhcmF0b3IiOiI6IiwiVW5pdmVyc2FsU29ydGFibGVEYXRlVGltZVBhdHRlcm4iOiJ5eXl5Jy0nTU0nLSdkZCBISCc6J21tJzonc3MnWiciLCJZZWFyTW9udGhQYXR0ZXJuIjoiTU1NTSwgeXl5eSIsIkFiYnJldmlhdGVkRGF5TmFtZXMiOlsiU3VuIiwiTW9uIiwiVHVlIiwiV2VkIiwiVGh1IiwiRnJpIiwiU2F0Il0sIlNob3J0ZXN0RGF5TmFtZXMiOlsiU3UiLCJNbyIsIlR1IiwiV2UiLCJUaCIsIkZyIiwiU2EiXSwiRGF5TmFtZXMiOlsiU3VuZGF5IiwiTW9uZGF5IiwiVHVlc2RheSIsIldlZG5lc2RheSIsIlRodXJzZGF5IiwiRnJpZGF5IiwiU2F0dXJkYXkiXSwiQWJicmV2aWF0ZWRNb250aE5hbWVzIjpbIkphbiIsIkZlYiIsIk1hciIsIkFwciIsIk1heSIsIkp1biIsIkp1bCIsIkF1ZyIsIlNlcCIsIk9jdCIsIk5vdiIsIkRlYyIsIiJdLCJNb250aE5hbWVzIjpbIkphbnVhcnkiLCJGZWJydWFyeSIsIk1hcmNoIiwiQXByaWwiLCJNYXkiLCJKdW5lIiwiSnVseSIsIkF1Z3VzdCIsIlNlcHRlbWJlciIsIk9jdG9iZXIiLCJOb3ZlbWJlciIsIkRlY2VtYmVyIiwiIl0sIklzUmVhZE9ubHkiOmZhbHNlLCJOYXRpdmVDYWxlbmRhck5hbWUiOiJHcmVnb3JpYW4gQ2FsZW5kYXIiLCJBYmJyZXZpYXRlZE1vbnRoR2VuaXRpdmVOYW1lcyI6WyJKYW4iLCJGZWIiLCJNYXIiLCJBcHIiLCJNYXkiLCJKdW4iLCJKdWwiLCJBdWciLCJTZXAiLCJPY3QiLCJOb3YiLCJEZWMiLCIiXSwiTW9udGhHZW5pdGl2ZU5hbWVzIjpbIkphbnVhcnkiLCJGZWJydWFyeSIsIk1hcmNoIiwiQXByaWwiLCJNYXkiLCJKdW5lIiwiSnVseSIsIkF1Z3VzdCIsIlNlcHRlbWJlciIsIk9jdG9iZXIiLCJOb3ZlbWJlciIsIkRlY2VtYmVyIiwiIl19LCJlcmFzIjpbMSwiQS5ELiIsbnVsbCwwXX0pO1R5cGUucmVnaXN0ZXJOYW1lc3BhY2UoIlN5cy5TZXJpYWxpemF0aW9uIik7U3lzLlNlcmlhbGl6YXRpb24uSmF2YVNjcmlwdFNlcmlhbGl6ZXI9ZnVuY3Rpb24oKXt9O1N5cy5TZXJpYWxpemF0aW9uLkphdmFTY3JpcHRTZXJpYWxpemVyLnJlZ2lzdGVyQ2xhc3MoIlN5cy5TZXJpYWxpemF0aW9uLkphdmFTY3JpcHRTZXJpYWxpemVyIik7U3lzLlNlcmlhbGl6YXRpb24uSmF2YVNjcmlwdFNlcmlhbGl6ZXIuX2NoYXJzVG9Fc2NhcGVSZWdFeHM9W107U3lzLlNlcmlhbGl6YXRpb24uSmF2YVNjcmlwdFNlcmlhbGl6ZXIuX2NoYXJzVG9Fc2NhcGU9W107U3lzLlNlcmlhbGl6YXRpb24uSmF2YVNjcmlwdFNlcmlhbGl6ZXIuX2RhdGVSZWdFeD1uZXcgUmVnRXhwKCcoXnxbXlxcXFxdKVxcIlxcXFwvRGF0ZVxcKCgtP1swLTldKykoPzpbYS16QS1aXXwoPzpcXCt8LSlbMC05XXs0fSk/XFwpXFxcXC9cXCInLCJnIik7U3lzLlNlcmlhbGl6YXRpb24uSmF2YVNjcmlwdFNlcmlhbGl6ZXIuX2VzY2FwZUNoYXJzPXt9O1N5cy5TZXJpYWxpemF0aW9uLkphdmFTY3JpcHRTZXJpYWxpemVyLl9lc2NhcGVSZWdFeD1uZXcgUmVnRXhwKCdbIlxcXFxcXHgwMC1cXHgxRl0nLCJpIik7U3lzLlNlcmlhbGl6YXRpb24uSmF2YVNjcmlwdFNlcmlhbGl6ZXIuX2VzY2FwZVJlZ0V4R2xvYmFsPW5ldyBSZWdFeHAoJ1siXFxcXFxceDAwLVxceDFGXScsImciKTtTeXMuU2VyaWFsaXphdGlvbi5KYXZhU2NyaXB0U2VyaWFsaXplci5fanNvblJlZ0V4PW5ldyBSZWdFeHAoIlteLDp7fVxcW1xcXTAtOS5cXC0rRWFlZmxuci11IFxcblxcclxcdF0iLCJnIik7U3lzLlNlcmlhbGl6YXRpb24uSmF2YVNjcmlwdFNlcmlhbGl6ZXIuX2pzb25TdHJpbmdSZWdFeD1uZXcgUmVnRXhwKCciKFxcXFwufFteIlxcXFxdKSoiJywiZyIpO1N5cy5TZXJpYWxpemF0aW9uLkphdmFTY3JpcHRTZXJpYWxpemVyLl9zZXJ2ZXJUeXBlRmllbGROYW1lPSJfX3R5cGUiO1N5cy5TZXJpYWxpemF0aW9uLkphdmFTY3JpcHRTZXJpYWxpemVyLl9pbml0PWZ1bmN0aW9uKCl7dmFyIGM9WyJcXHUwMDAwIiwiXFx1MDAwMSIsIlxcdTAwMDIiLCJcXHUwMDAzIiwiXFx1MDAwNCIsIlxcdTAwMDUiLCJcXHUwMDA2IiwiXFx1MDAwNyIsIlxcYiIsIlxcdCIsIlxcbiIsIlxcdTAwMGIiLCJcXGYiLCJcXHIiLCJcXHUwMDBlIiwiXFx1MDAwZiIsIlxcdTAwMTAiLCJcXHUwMDExIiwiXFx1MDAxMiIsIlxcdTAwMTMiLCJcXHUwMDE0IiwiXFx1MDAxNSIsIlxcdTAwMTYiLCJcXHUwMDE3IiwiXFx1MDAxOCIsIlxcdTAwMTkiLCJcXHUwMDFhIiwiXFx1MDAxYiIsIlxcdTAwMWMiLCJcXHUwMDFkIiwiXFx1MDAxZSIsIlxcdTAwMWYiXTtTeXMuU2VyaWFsaXphdGlvbi5KYXZhU2NyaXB0U2VyaWFsaXplci5fY2hhcnNUb0VzY2FwZVswXT0iXFwiO1N5cy5TZXJpYWxpemF0aW9uLkphdmFTY3JpcHRTZXJpYWxpemVyLl9jaGFyc1RvRXNjYXBlUmVnRXhzWyJcXCJdPW5ldyBSZWdFeHAoIlxcXFwiLCJnIik7U3lzLlNlcmlhbGl6YXRpb24uSmF2YVNjcmlwdFNlcmlhbGl6ZXIuX2VzY2FwZUNoYXJzWyJcXCJdPSJcXFxcIjtTeXMuU2VyaWFsaXphdGlvbi5KYXZhU2NyaXB0U2VyaWFsaXplci5fY2hhcnNUb0VzY2FwZVsxXT0nIic7U3lzLlNlcmlhbGl6YXRpb24uSmF2YVNjcmlwdFNlcmlhbGl6ZXIuX2NoYXJzVG9Fc2NhcGVSZWdFeHNbJyInXT1uZXcgUmVnRXhwKCciJywiZyIpO1N5cy5TZXJpYWxpemF0aW9uLkphdmFTY3JpcHRTZXJpYWxpemVyLl9lc2NhcGVDaGFyc1snIiddPSdcXCInO2Zvcih2YXIgYT0wO2E8MzI7YSsrKXt2YXIgYj1TdHJpbmcuZnJvbUNoYXJDb2RlKGEpO1N5cy5TZXJpYWxpemF0aW9uLkphdmFTY3JpcHRTZXJpYWxpemVyLl9jaGFyc1RvRXNjYXBlW2ErMl09YjtTeXMuU2VyaWFsaXphdGlvbi5KYXZhU2NyaXB0U2VyaWFsaXplci5fY2hhcnNUb0VzY2FwZVJlZ0V4c1tiXT1uZXcgUmVnRXhwKGIsImciKTtTeXMuU2VyaWFsaXphdGlvbi5KYXZhU2NyaXB0U2VyaWFsaXplci5fZXNjYXBlQ2hhcnNbYl09Y1thXX19O1N5cy5TZXJpYWxpemF0aW9uLkphdmFTY3JpcHRTZXJpYWxpemVyLl9zZXJpYWxpemVCb29sZWFuV2l0aEJ1aWxkZXI9ZnVuY3Rpb24oYixhKXthLmFwcGVuZChiLnRvU3RyaW5nKCkpfTtTeXMuU2VyaWFsaXphdGlvbi5KYXZhU2NyaXB0U2VyaWFsaXplci5fc2VyaWFsaXplTnVtYmVyV2l0aEJ1aWxkZXI9ZnVuY3Rpb24oYSxiKXtpZihpc0Zpbml0ZShhKSliLmFwcGVuZChTdHJpbmcoYSkpO2Vsc2UgdGhyb3cgRXJyb3IuaW52YWxpZE9wZXJhdGlvbihTeXMuUmVzLmNhbm5vdFNlcmlhbGl6ZU5vbkZpbml0ZU51bWJlcnMpfTtTeXMuU2VyaWFsaXphdGlvbi5KYXZhU2NyaXB0U2VyaWFsaXplci5fc2VyaWFsaXplU3RyaW5nV2l0aEJ1aWxkZXI9ZnVuY3Rpb24oYSxjKXtjLmFwcGVuZCgnIicpO2lmKFN5cy5TZXJpYWxpemF0aW9uLkphdmFTY3JpcHRTZXJpYWxpemVyLl9lc2NhcGVSZWdFeC50ZXN0KGEpKXtpZihTeXMuU2VyaWFsaXphdGlvbi5KYXZhU2NyaXB0U2VyaWFsaXplci5fY2hhcnNUb0VzY2FwZS5sZW5ndGg9PT0wKVN5cy5TZXJpYWxpemF0aW9uLkphdmFTY3JpcHRTZXJpYWxpemVyLl9pbml0KCk7aWYoYS5sZW5ndGg8MTI4KWE9YS5yZXBsYWNlKFN5cy5TZXJpYWxpemF0aW9uLkphdmFTY3JpcHRTZXJpYWxpemVyLl9lc2NhcGVSZWdFeEdsb2JhbCxmdW5jdGlvbihhKXtyZXR1cm4gU3lzLlNlcmlhbGl6YXRpb24uSmF2YVNjcmlwdFNlcmlhbGl6ZXIuX2VzY2FwZUNoYXJzW2FdfSk7ZWxzZSBmb3IodmFyIGQ9MDtkPDM0O2QrKyl7dmFyIGI9U3lzLlNlcmlhbGl6YXRpb24uSmF2YVNjcmlwdFNlcmlhbGl6ZXIuX2NoYXJzVG9Fc2NhcGVbZF07aWYoYS5pbmRleE9mKGIpIT09LTEpaWYoU3lzLkJyb3dzZXIuYWdlbnQ9PT1TeXMuQnJvd3Nlci5PcGVyYXx8U3lzLkJyb3dzZXIuYWdlbnQ9PT1TeXMuQnJvd3Nlci5GaXJlRm94KWE9YS5zcGxpdChiKS5qb2luKFN5cy5TZXJpYWxpemF0aW9uLkphdmFTY3JpcHRTZXJpYWxpemVyLl9lc2NhcGVDaGFyc1tiXSk7ZWxzZSBhPWEucmVwbGFjZShTeXMuU2VyaWFsaXphdGlvbi5KYXZhU2NyaXB0U2VyaWFsaXplci5fY2hhcnNUb0VzY2FwZVJlZ0V4c1tiXSxTeXMuU2VyaWFsaXphdGlvbi5KYXZhU2NyaXB0U2VyaWFsaXplci5fZXNjYXBlQ2hhcnNbYl0pfX1jLmFwcGVuZChhKTtjLmFwcGVuZCgnIicpfTtTeXMuU2VyaWFsaXphdGlvbi5KYXZhU2NyaXB0U2VyaWFsaXplci5fc2VyaWFsaXplV2l0aEJ1aWxkZXI9ZnVuY3Rpb24oYixhLGksZyl7dmFyIGM7c3dpdGNoKHR5cGVvZiBiKXtjYXNlICJvYmplY3QiOmlmKGIpaWYoTnVtYmVyLmlzSW5zdGFuY2VPZlR5cGUoYikpU3lzLlNlcmlhbGl6YXRpb24uSmF2YVNjcmlwdFNlcmlhbGl6ZXIuX3NlcmlhbGl6ZU51bWJlcldpdGhCdWlsZGVyKGIsYSk7ZWxzZSBpZihCb29sZWFuLmlzSW5zdGFuY2VPZlR5cGUoYikpU3lzLlNlcmlhbGl6YXRpb24uSmF2YVNjcmlwdFNlcmlhbGl6ZXIuX3NlcmlhbGl6ZUJvb2xlYW5XaXRoQnVpbGRlcihiLGEpO2Vsc2UgaWYoU3RyaW5nLmlzSW5zdGFuY2VPZlR5cGUoYikpU3lzLlNlcmlhbGl6YXRpb24uSmF2YVNjcmlwdFNlcmlhbGl6ZXIuX3NlcmlhbGl6ZVN0cmluZ1dpdGhCdWlsZGVyKGIsYSk7ZWxzZSBpZihBcnJheS5pc0luc3RhbmNlT2ZUeXBlKGIpKXthLmFwcGVuZCgiWyIpO2ZvcihjPTA7YzxiLmxlbmd0aDsrK2Mpe2lmKGM+MClhLmFwcGVuZCgiLCIpO1N5cy5TZXJpYWxpemF0aW9uLkphdmFTY3JpcHRTZXJpYWxpemVyLl9zZXJpYWxpemVXaXRoQnVpbGRlcihiW2NdLGEsZmFsc2UsZyl9YS5hcHBlbmQoIl0iKX1lbHNle2lmKERhdGUuaXNJbnN0YW5jZU9mVHlwZShiKSl7YS5hcHBlbmQoJyJcXC9EYXRlKCcpO2EuYXBwZW5kKGIuZ2V0VGltZSgpKTthLmFwcGVuZCgnKVxcLyInKTticmVha312YXIgZD1bXSxmPTA7Zm9yKHZhciBlIGluIGIpe2lmKGUuc3RhcnRzV2l0aCgiJCIpKWNvbnRpbnVlO2lmKGU9PT1TeXMuU2VyaWFsaXphdGlvbi5KYXZhU2NyaXB0U2VyaWFsaXplci5fc2VydmVyVHlwZUZpZWxkTmFtZSYmZiE9PTApe2RbZisrXT1kWzBdO2RbMF09ZX1lbHNlIGRbZisrXT1lfWlmKGkpZC5zb3J0KCk7YS5hcHBlbmQoInsiKTt2YXIgaj1mYWxzZTtmb3IoYz0wO2M8ZjtjKyspe3ZhciBoPWJbZFtjXV07aWYodHlwZW9mIGghPT0idW5kZWZpbmVkIiYmdHlwZW9mIGghPT0iZnVuY3Rpb24iKXtpZihqKWEuYXBwZW5kKCIsIik7ZWxzZSBqPXRydWU7U3lzLlNlcmlhbGl6YXRpb24uSmF2YVNjcmlwdFNlcmlhbGl6ZXIuX3NlcmlhbGl6ZVdpdGhCdWlsZGVyKGRbY10sYSxpLGcpO2EuYXBwZW5kKCI6Iik7U3lzLlNlcmlhbGl6YXRpb24uSmF2YVNjcmlwdFNlcmlhbGl6ZXIuX3NlcmlhbGl6ZVdpdGhCdWlsZGVyKGgsYSxpLGcpfX1hLmFwcGVuZCgifSIpfWVsc2UgYS5hcHBlbmQoIm51bGwiKTticmVhaztjYXNlICJudW1iZXIiOlN5cy5TZXJpYWxpemF0aW9uLkphdmFTY3JpcHRTZXJpYWxpemVyLl9zZXJpYWxpemVOdW1iZXJXaXRoQnVpbGRlcihiLGEpO2JyZWFrO2Nhc2UgInN0cmluZyI6U3lzLlNlcmlhbGl6YXRpb24uSmF2YVNjcmlwdFNlcmlhbGl6ZXIuX3NlcmlhbGl6ZVN0cmluZ1dpdGhCdWlsZGVyKGIsYSk7YnJlYWs7Y2FzZSAiYm9vbGVhbiI6U3lzLlNlcmlhbGl6YXRpb24uSmF2YVNjcmlwdFNlcmlhbGl6ZXIuX3NlcmlhbGl6ZUJvb2xlYW5XaXRoQnVpbGRlcihiLGEpO2JyZWFrO2RlZmF1bHQ6YS5hcHBlbmQoIm51bGwiKX19O1N5cy5TZXJpYWxpemF0aW9uLkphdmFTY3JpcHRTZXJpYWxpemVyLnNlcmlhbGl6ZT1mdW5jdGlvbihiKXt2YXIgYT1uZXcgU3lzLlN0cmluZ0J1aWxkZXI7U3lzLlNlcmlhbGl6YXRpb24uSmF2YVNjcmlwdFNlcmlhbGl6ZXIuX3NlcmlhbGl6ZVdpdGhCdWlsZGVyKGIsYSxmYWxzZSk7cmV0dXJuIGEudG9TdHJpbmcoKX07U3lzLlNlcmlhbGl6YXRpb24uSmF2YVNjcmlwdFNlcmlhbGl6ZXIuZGVzZXJpYWxpemU9ZnVuY3Rpb24oZGF0YSxzZWN1cmUpe2lmKGRhdGEubGVuZ3RoPT09MCl0aHJvdyBFcnJvci5hcmd1bWVudCgiZGF0YSIsU3lzLlJlcy5jYW5ub3REZXNlcmlhbGl6ZUVtcHR5U3RyaW5nKTt0cnl7dmFyIGV4cD1kYXRhLnJlcGxhY2UoU3lzLlNlcmlhbGl6YXRpb24uSmF2YVNjcmlwdFNlcmlhbGl6ZXIuX2RhdGVSZWdFeCwiJDFuZXcgRGF0ZSgkMikiKTtpZihzZWN1cmUmJlN5cy5TZXJpYWxpemF0aW9uLkphdmFTY3JpcHRTZXJpYWxpemVyLl9qc29uUmVnRXgudGVzdChleHAucmVwbGFjZShTeXMuU2VyaWFsaXphdGlvbi5KYXZhU2NyaXB0U2VyaWFsaXplci5fanNvblN0cmluZ1JlZ0V4LCIiKSkpdGhyb3cgbnVsbDtyZXR1cm4gZXZhbCgiKCIrZXhwKyIpIil9Y2F0Y2goYSl7dGhyb3cgRXJyb3IuYXJndW1lbnQoImRhdGEiLFN5cy5SZXMuY2Fubm90RGVzZXJpYWxpemVJbnZhbGlkSnNvbil9fTtUeXBlLnJlZ2lzdGVyTmFtZXNwYWNlKCJTeXMuVUkiKTtTeXMuRXZlbnRIYW5kbGVyTGlzdD1mdW5jdGlvbigpe3RoaXMuX2xpc3Q9e319O1N5cy5FdmVudEhhbmRsZXJMaXN0LnByb3RvdHlwZT17X2FkZEhhbmRsZXI6ZnVuY3Rpb24oYixhKXtBcnJheS5hZGQodGhpcy5fZ2V0RXZlbnQoYix0cnVlKSxhKX0sYWRkSGFuZGxlcjpmdW5jdGlvbihiLGEpe3RoaXMuX2FkZEhhbmRsZXIoYixhKX0sX3JlbW92ZUhhbmRsZXI6ZnVuY3Rpb24oYyxiKXt2YXIgYT10aGlzLl9nZXRFdmVudChjKTtpZighYSlyZXR1cm47QXJyYXkucmVtb3ZlKGEsYil9LHJlbW92ZUhhbmRsZXI6ZnVuY3Rpb24oYixhKXt0aGlzLl9yZW1vdmVIYW5kbGVyKGIsYSl9LGdldEhhbmRsZXI6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5fZ2V0RXZlbnQoYik7aWYoIWF8fGEubGVuZ3RoPT09MClyZXR1cm4gbnVsbDthPUFycmF5LmNsb25lKGEpO3JldHVybiBmdW5jdGlvbihjLGQpe2Zvcih2YXIgYj0wLGU9YS5sZW5ndGg7YjxlO2IrKylhW2JdKGMsZCl9fSxfZ2V0RXZlbnQ6ZnVuY3Rpb24oYSxiKXtpZighdGhpcy5fbGlzdFthXSl7aWYoIWIpcmV0dXJuIG51bGw7dGhpcy5fbGlzdFthXT1bXX1yZXR1cm4gdGhpcy5fbGlzdFthXX19O1N5cy5FdmVudEhhbmRsZXJMaXN0LnJlZ2lzdGVyQ2xhc3MoIlN5cy5FdmVudEhhbmRsZXJMaXN0Iik7U3lzLkNvbW1hbmRFdmVudEFyZ3M9ZnVuY3Rpb24oYyxhLGIpe1N5cy5Db21tYW5kRXZlbnRBcmdzLmluaXRpYWxpemVCYXNlKHRoaXMpO3RoaXMuX2NvbW1hbmROYW1lPWM7dGhpcy5fY29tbWFuZEFyZ3VtZW50PWE7dGhpcy5fY29tbWFuZFNvdXJjZT1ifTtTeXMuQ29tbWFuZEV2ZW50QXJncy5wcm90b3R5cGU9e19jb21tYW5kTmFtZTpudWxsLF9jb21tYW5kQXJndW1lbnQ6bnVsbCxfY29tbWFuZFNvdXJjZTpudWxsLGdldF9jb21tYW5kTmFtZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb21tYW5kTmFtZX0sZ2V0X2NvbW1hbmRBcmd1bWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb21tYW5kQXJndW1lbnR9LGdldF9jb21tYW5kU291cmNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbW1hbmRTb3VyY2V9fTtTeXMuQ29tbWFuZEV2ZW50QXJncy5yZWdpc3RlckNsYXNzKCJTeXMuQ29tbWFuZEV2ZW50QXJncyIsU3lzLkNhbmNlbEV2ZW50QXJncyk7U3lzLklOb3RpZnlQcm9wZXJ0eUNoYW5nZT1mdW5jdGlvbigpe307U3lzLklOb3RpZnlQcm9wZXJ0eUNoYW5nZS5wcm90b3R5cGU9e307U3lzLklOb3RpZnlQcm9wZXJ0eUNoYW5nZS5yZWdpc3RlckludGVyZmFjZSgiU3lzLklOb3RpZnlQcm9wZXJ0eUNoYW5nZSIpO1N5cy5Qcm9wZXJ0eUNoYW5nZWRFdmVudEFyZ3M9ZnVuY3Rpb24oYSl7U3lzLlByb3BlcnR5Q2hhbmdlZEV2ZW50QXJncy5pbml0aWFsaXplQmFzZSh0aGlzKTt0aGlzLl9wcm9wZXJ0eU5hbWU9YX07U3lzLlByb3BlcnR5Q2hhbmdlZEV2ZW50QXJncy5wcm90b3R5cGU9e2dldF9wcm9wZXJ0eU5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvcGVydHlOYW1lfX07U3lzLlByb3BlcnR5Q2hhbmdlZEV2ZW50QXJncy5yZWdpc3RlckNsYXNzKCJTeXMuUHJvcGVydHlDaGFuZ2VkRXZlbnRBcmdzIixTeXMuRXZlbnRBcmdzKTtTeXMuSU5vdGlmeURpc3Bvc2luZz1mdW5jdGlvbigpe307U3lzLklOb3RpZnlEaXNwb3NpbmcucHJvdG90eXBlPXt9O1N5cy5JTm90aWZ5RGlzcG9zaW5nLnJlZ2lzdGVySW50ZXJmYWNlKCJTeXMuSU5vdGlmeURpc3Bvc2luZyIpO1N5cy5Db21wb25lbnQ9ZnVuY3Rpb24oKXtpZihTeXMuQXBwbGljYXRpb24pU3lzLkFwcGxpY2F0aW9uLnJlZ2lzdGVyRGlzcG9zYWJsZU9iamVjdCh0aGlzKX07U3lzLkNvbXBvbmVudC5wcm90b3R5cGU9e19pZDpudWxsLF9pbml0aWFsaXplZDpmYWxzZSxfdXBkYXRpbmc6ZmFsc2UsZ2V0X2V2ZW50czpmdW5jdGlvbigpe2lmKCF0aGlzLl9ldmVudHMpdGhpcy5fZXZlbnRzPW5ldyBTeXMuRXZlbnRIYW5kbGVyTGlzdDtyZXR1cm4gdGhpcy5fZXZlbnRzfSxnZXRfaWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faWR9LHNldF9pZDpmdW5jdGlvbihhKXt0aGlzLl9pZD1hfSxnZXRfaXNJbml0aWFsaXplZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbml0aWFsaXplZH0sZ2V0X2lzVXBkYXRpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXBkYXRpbmd9LGFkZF9kaXNwb3Npbmc6ZnVuY3Rpb24oYSl7dGhpcy5nZXRfZXZlbnRzKCkuYWRkSGFuZGxlcigiZGlzcG9zaW5nIixhKX0scmVtb3ZlX2Rpc3Bvc2luZzpmdW5jdGlvbihhKXt0aGlzLmdldF9ldmVudHMoKS5yZW1vdmVIYW5kbGVyKCJkaXNwb3NpbmciLGEpfSxhZGRfcHJvcGVydHlDaGFuZ2VkOmZ1bmN0aW9uKGEpe3RoaXMuZ2V0X2V2ZW50cygpLmFkZEhhbmRsZXIoInByb3BlcnR5Q2hhbmdlZCIsYSl9LHJlbW92ZV9wcm9wZXJ0eUNoYW5nZWQ6ZnVuY3Rpb24oYSl7dGhpcy5nZXRfZXZlbnRzKCkucmVtb3ZlSGFuZGxlcigicHJvcGVydHlDaGFuZ2VkIixhKX0sYmVnaW5VcGRhdGU6ZnVuY3Rpb24oKXt0aGlzLl91cGRhdGluZz10cnVlfSxkaXNwb3NlOmZ1bmN0aW9uKCl7aWYodGhpcy5fZXZlbnRzKXt2YXIgYT10aGlzLl9ldmVudHMuZ2V0SGFuZGxlcigiZGlzcG9zaW5nIik7aWYoYSlhKHRoaXMsU3lzLkV2ZW50QXJncy5FbXB0eSl9ZGVsZXRlIHRoaXMuX2V2ZW50cztTeXMuQXBwbGljYXRpb24udW5yZWdpc3RlckRpc3Bvc2FibGVPYmplY3QodGhpcyk7U3lzLkFwcGxpY2F0aW9uLnJlbW92ZUNvbXBvbmVudCh0aGlzKX0sZW5kVXBkYXRlOmZ1bmN0aW9uKCl7dGhpcy5fdXBkYXRpbmc9ZmFsc2U7aWYoIXRoaXMuX2luaXRpYWxpemVkKXRoaXMuaW5pdGlhbGl6ZSgpO3RoaXMudXBkYXRlZCgpfSxpbml0aWFsaXplOmZ1bmN0aW9uKCl7dGhpcy5faW5pdGlhbGl6ZWQ9dHJ1ZX0scmFpc2VQcm9wZXJ0eUNoYW5nZWQ6ZnVuY3Rpb24oYil7aWYoIXRoaXMuX2V2ZW50cylyZXR1cm47dmFyIGE9dGhpcy5fZXZlbnRzLmdldEhhbmRsZXIoInByb3BlcnR5Q2hhbmdlZCIpO2lmKGEpYSh0aGlzLG5ldyBTeXMuUHJvcGVydHlDaGFuZ2VkRXZlbnRBcmdzKGIpKX0sdXBkYXRlZDpmdW5jdGlvbigpe319O1N5cy5Db21wb25lbnQucmVnaXN0ZXJDbGFzcygiU3lzLkNvbXBvbmVudCIsbnVsbCxTeXMuSURpc3Bvc2FibGUsU3lzLklOb3RpZnlQcm9wZXJ0eUNoYW5nZSxTeXMuSU5vdGlmeURpc3Bvc2luZyk7ZnVuY3Rpb24gU3lzJENvbXBvbmVudCRfc2V0UHJvcGVydGllcyhhLGkpe3ZhciBkLGo9T2JqZWN0LmdldFR5cGUoYSksZT1qPT09T2JqZWN0fHxqPT09U3lzLlVJLkRvbUVsZW1lbnQsaD1TeXMuQ29tcG9uZW50LmlzSW5zdGFuY2VPZlR5cGUoYSkmJiFhLmdldF9pc1VwZGF0aW5nKCk7aWYoaClhLmJlZ2luVXBkYXRlKCk7Zm9yKHZhciBjIGluIGkpe3ZhciBiPWlbY10sZj1lP251bGw6YVsiZ2V0XyIrY107aWYoZXx8dHlwZW9mIGYhPT0iZnVuY3Rpb24iKXt2YXIgaz1hW2NdO2lmKCFifHx0eXBlb2YgYiE9PSJvYmplY3QifHxlJiYhaylhW2NdPWI7ZWxzZSBTeXMkQ29tcG9uZW50JF9zZXRQcm9wZXJ0aWVzKGssYil9ZWxzZXt2YXIgbD1hWyJzZXRfIitjXTtpZih0eXBlb2YgbD09PSJmdW5jdGlvbiIpbC5hcHBseShhLFtiXSk7ZWxzZSBpZihiIGluc3RhbmNlb2YgQXJyYXkpe2Q9Zi5hcHBseShhKTtmb3IodmFyIGc9MCxtPWQubGVuZ3RoLG49Yi5sZW5ndGg7ZzxuO2crKyxtKyspZFttXT1iW2ddfWVsc2UgaWYodHlwZW9mIGI9PT0ib2JqZWN0IiYmT2JqZWN0LmdldFR5cGUoYik9PT1PYmplY3Qpe2Q9Zi5hcHBseShhKTtTeXMkQ29tcG9uZW50JF9zZXRQcm9wZXJ0aWVzKGQsYil9fX1pZihoKWEuZW5kVXBkYXRlKCl9ZnVuY3Rpb24gU3lzJENvbXBvbmVudCRfc2V0UmVmZXJlbmNlcyhjLGIpe2Zvcih2YXIgYSBpbiBiKXt2YXIgZT1jWyJzZXRfIithXSxkPSRmaW5kKGJbYV0pO2UuYXBwbHkoYyxbZF0pfX12YXIgJGNyZWF0ZT1TeXMuQ29tcG9uZW50LmNyZWF0ZT1mdW5jdGlvbihoLGYsZCxjLGcpe3ZhciBhPWc/bmV3IGgoZyk6bmV3IGgsYj1TeXMuQXBwbGljYXRpb24saT1iLmdldF9pc0NyZWF0aW5nQ29tcG9uZW50cygpO2EuYmVnaW5VcGRhdGUoKTtpZihmKVN5cyRDb21wb25lbnQkX3NldFByb3BlcnRpZXMoYSxmKTtpZihkKWZvcih2YXIgZSBpbiBkKWFbImFkZF8iK2VdKGRbZV0pO2lmKGEuZ2V0X2lkKCkpYi5hZGRDb21wb25lbnQoYSk7aWYoaSl7Yi5fY3JlYXRlZENvbXBvbmVudHNbYi5fY3JlYXRlZENvbXBvbmVudHMubGVuZ3RoXT1hO2lmKGMpYi5fYWRkQ29tcG9uZW50VG9TZWNvbmRQYXNzKGEsYyk7ZWxzZSBhLmVuZFVwZGF0ZSgpfWVsc2V7aWYoYylTeXMkQ29tcG9uZW50JF9zZXRSZWZlcmVuY2VzKGEsYyk7YS5lbmRVcGRhdGUoKX1yZXR1cm4gYX07U3lzLlVJLk1vdXNlQnV0dG9uPWZ1bmN0aW9uKCl7dGhyb3cgRXJyb3Iubm90SW1wbGVtZW50ZWQoKX07U3lzLlVJLk1vdXNlQnV0dG9uLnByb3RvdHlwZT17bGVmdEJ1dHRvbjowLG1pZGRsZUJ1dHRvbjoxLHJpZ2h0QnV0dG9uOjJ9O1N5cy5VSS5Nb3VzZUJ1dHRvbi5yZWdpc3RlckVudW0oIlN5cy5VSS5Nb3VzZUJ1dHRvbiIpO1N5cy5VSS5LZXk9ZnVuY3Rpb24oKXt0aHJvdyBFcnJvci5ub3RJbXBsZW1lbnRlZCgpfTtTeXMuVUkuS2V5LnByb3RvdHlwZT17YmFja3NwYWNlOjgsdGFiOjksZW50ZXI6MTMsZXNjOjI3LHNwYWNlOjMyLHBhZ2VVcDozMyxwYWdlRG93bjozNCxlbmQ6MzUsaG9tZTozNixsZWZ0OjM3LHVwOjM4LHJpZ2h0OjM5LGRvd246NDAsZGVsOjEyN307U3lzLlVJLktleS5yZWdpc3RlckVudW0oIlN5cy5VSS5LZXkiKTtTeXMuVUkuUG9pbnQ9ZnVuY3Rpb24oYSxiKXt0aGlzLnJhd1g9YTt0aGlzLnJhd1k9Yjt0aGlzLng9TWF0aC5yb3VuZChhKTt0aGlzLnk9TWF0aC5yb3VuZChiKX07U3lzLlVJLlBvaW50LnJlZ2lzdGVyQ2xhc3MoIlN5cy5VSS5Qb2ludCIpO1N5cy5VSS5Cb3VuZHM9ZnVuY3Rpb24oYyxkLGIsYSl7dGhpcy54PWM7dGhpcy55PWQ7dGhpcy5oZWlnaHQ9YTt0aGlzLndpZHRoPWJ9O1N5cy5VSS5Cb3VuZHMucmVnaXN0ZXJDbGFzcygiU3lzLlVJLkJvdW5kcyIpO1N5cy5VSS5Eb21FdmVudD1mdW5jdGlvbihlKXt2YXIgYT1lLGI9dGhpcy50eXBlPWEudHlwZS50b0xvd2VyQ2FzZSgpO3RoaXMucmF3RXZlbnQ9YTt0aGlzLmFsdEtleT1hLmFsdEtleTtpZih0eXBlb2YgYS5idXR0b24hPT0idW5kZWZpbmVkIil0aGlzLmJ1dHRvbj10eXBlb2YgYS53aGljaCE9PSJ1bmRlZmluZWQiP2EuYnV0dG9uOmEuYnV0dG9uPT09ND9TeXMuVUkuTW91c2VCdXR0b24ubWlkZGxlQnV0dG9uOmEuYnV0dG9uPT09Mj9TeXMuVUkuTW91c2VCdXR0b24ucmlnaHRCdXR0b246U3lzLlVJLk1vdXNlQnV0dG9uLmxlZnRCdXR0b247aWYoYj09PSJrZXlwcmVzcyIpdGhpcy5jaGFyQ29kZT1hLmNoYXJDb2RlfHxhLmtleUNvZGU7ZWxzZSBpZihhLmtleUNvZGUmJmEua2V5Q29kZT09PTQ2KXRoaXMua2V5Q29kZT0xMjc7ZWxzZSB0aGlzLmtleUNvZGU9YS5rZXlDb2RlO3RoaXMuY2xpZW50WD1hLmNsaWVudFg7dGhpcy5jbGllbnRZPWEuY2xpZW50WTt0aGlzLmN0cmxLZXk9YS5jdHJsS2V5O3RoaXMudGFyZ2V0PWEudGFyZ2V0P2EudGFyZ2V0OmEuc3JjRWxlbWVudDtpZighYi5zdGFydHNXaXRoKCJrZXkiKSlpZih0eXBlb2YgYS5vZmZzZXRYIT09InVuZGVmaW5lZCImJnR5cGVvZiBhLm9mZnNldFkhPT0idW5kZWZpbmVkIil7dGhpcy5vZmZzZXRYPWEub2Zmc2V0WDt0aGlzLm9mZnNldFk9YS5vZmZzZXRZfWVsc2UgaWYodGhpcy50YXJnZXQmJnRoaXMudGFyZ2V0Lm5vZGVUeXBlIT09MyYmdHlwZW9mIGEuY2xpZW50WD09PSJudW1iZXIiKXt2YXIgYz1TeXMuVUkuRG9tRWxlbWVudC5nZXRMb2NhdGlvbih0aGlzLnRhcmdldCksZD1TeXMuVUkuRG9tRWxlbWVudC5fZ2V0V2luZG93KHRoaXMudGFyZ2V0KTt0aGlzLm9mZnNldFg9KGQucGFnZVhPZmZzZXR8fDApK2EuY2xpZW50WC1jLng7dGhpcy5vZmZzZXRZPShkLnBhZ2VZT2Zmc2V0fHwwKSthLmNsaWVudFktYy55fXRoaXMuc2NyZWVuWD1hLnNjcmVlblg7dGhpcy5zY3JlZW5ZPWEuc2NyZWVuWTt0aGlzLnNoaWZ0S2V5PWEuc2hpZnRLZXl9O1N5cy5VSS5Eb21FdmVudC5wcm90b3R5cGU9e3ByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7aWYodGhpcy5yYXdFdmVudC5wcmV2ZW50RGVmYXVsdCl0aGlzLnJhd0V2ZW50LnByZXZlbnREZWZhdWx0KCk7ZWxzZSBpZih3aW5kb3cuZXZlbnQpdGhpcy5yYXdFdmVudC5yZXR1cm5WYWx1ZT1mYWxzZX0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7aWYodGhpcy5yYXdFdmVudC5zdG9wUHJvcGFnYXRpb24pdGhpcy5yYXdFdmVudC5zdG9wUHJvcGFnYXRpb24oKTtlbHNlIGlmKHdpbmRvdy5ldmVudCl0aGlzLnJhd0V2ZW50LmNhbmNlbEJ1YmJsZT10cnVlfX07U3lzLlVJLkRvbUV2ZW50LnJlZ2lzdGVyQ2xhc3MoIlN5cy5VSS5Eb21FdmVudCIpO3ZhciAkYWRkSGFuZGxlcj1TeXMuVUkuRG9tRXZlbnQuYWRkSGFuZGxlcj1mdW5jdGlvbihhLGQsZSxnKXtpZighYS5fZXZlbnRzKWEuX2V2ZW50cz17fTt2YXIgYz1hLl9ldmVudHNbZF07aWYoIWMpYS5fZXZlbnRzW2RdPWM9W107dmFyIGI7aWYoYS5hZGRFdmVudExpc3RlbmVyKXtiPWZ1bmN0aW9uKGIpe3JldHVybiBlLmNhbGwoYSxuZXcgU3lzLlVJLkRvbUV2ZW50KGIpKX07YS5hZGRFdmVudExpc3RlbmVyKGQsYixmYWxzZSl9ZWxzZSBpZihhLmF0dGFjaEV2ZW50KXtiPWZ1bmN0aW9uKCl7dmFyIGI9e307dHJ5e2I9U3lzLlVJLkRvbUVsZW1lbnQuX2dldFdpbmRvdyhhKS5ldmVudH1jYXRjaChjKXt9cmV0dXJuIGUuY2FsbChhLG5ldyBTeXMuVUkuRG9tRXZlbnQoYikpfTthLmF0dGFjaEV2ZW50KCJvbiIrZCxiKX1jW2MubGVuZ3RoXT17aGFuZGxlcjplLGJyb3dzZXJIYW5kbGVyOmIsYXV0b1JlbW92ZTpnfTtpZihnKXt2YXIgZj1hLmRpc3Bvc2U7aWYoZiE9PVN5cy5VSS5Eb21FdmVudC5fZGlzcG9zZUhhbmRsZXJzKXthLmRpc3Bvc2U9U3lzLlVJLkRvbUV2ZW50Ll9kaXNwb3NlSGFuZGxlcnM7aWYodHlwZW9mIGYhPT0idW5kZWZpbmVkIilhLl9jaGFpbkRpc3Bvc2U9Zn19fSwkYWRkSGFuZGxlcnM9U3lzLlVJLkRvbUV2ZW50LmFkZEhhbmRsZXJzPWZ1bmN0aW9uKGYsZCxjLGUpe2Zvcih2YXIgYiBpbiBkKXt2YXIgYT1kW2JdO2lmKGMpYT1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZShjLGEpOyRhZGRIYW5kbGVyKGYsYixhLGV8fGZhbHNlKX19LCRjbGVhckhhbmRsZXJzPVN5cy5VSS5Eb21FdmVudC5jbGVhckhhbmRsZXJzPWZ1bmN0aW9uKGEpe1N5cy5VSS5Eb21FdmVudC5fY2xlYXJIYW5kbGVycyhhLGZhbHNlKX07U3lzLlVJLkRvbUV2ZW50Ll9jbGVhckhhbmRsZXJzPWZ1bmN0aW9uKGEsZyl7aWYoYS5fZXZlbnRzKXt2YXIgZT1hLl9ldmVudHM7Zm9yKHZhciBiIGluIGUpe3ZhciBkPWVbYl07Zm9yKHZhciBjPWQubGVuZ3RoLTE7Yz49MDtjLS0pe3ZhciBmPWRbY107aWYoIWd8fGYuYXV0b1JlbW92ZSkkcmVtb3ZlSGFuZGxlcihhLGIsZi5oYW5kbGVyKX19YS5fZXZlbnRzPW51bGx9fTtTeXMuVUkuRG9tRXZlbnQuX2Rpc3Bvc2VIYW5kbGVycz1mdW5jdGlvbigpe1N5cy5VSS5Eb21FdmVudC5fY2xlYXJIYW5kbGVycyh0aGlzLHRydWUpO3ZhciBiPXRoaXMuX2NoYWluRGlzcG9zZSxhPXR5cGVvZiBiO2lmKGEhPT0idW5kZWZpbmVkIil7dGhpcy5kaXNwb3NlPWI7dGhpcy5fY2hhaW5EaXNwb3NlPW51bGw7aWYoYT09PSJmdW5jdGlvbiIpdGhpcy5kaXNwb3NlKCl9fTt2YXIgJHJlbW92ZUhhbmRsZXI9U3lzLlVJLkRvbUV2ZW50LnJlbW92ZUhhbmRsZXI9ZnVuY3Rpb24oYixhLGMpe1N5cy5VSS5Eb21FdmVudC5fcmVtb3ZlSGFuZGxlcihiLGEsYyl9O1N5cy5VSS5Eb21FdmVudC5fcmVtb3ZlSGFuZGxlcj1mdW5jdGlvbihhLGUsZil7dmFyIGQ9bnVsbCxjPWEuX2V2ZW50c1tlXTtmb3IodmFyIGI9MCxnPWMubGVuZ3RoO2I8ZztiKyspaWYoY1tiXS5oYW5kbGVyPT09Zil7ZD1jW2JdLmJyb3dzZXJIYW5kbGVyO2JyZWFrfWlmKGEucmVtb3ZlRXZlbnRMaXN0ZW5lcilhLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSxkLGZhbHNlKTtlbHNlIGlmKGEuZGV0YWNoRXZlbnQpYS5kZXRhY2hFdmVudCgib24iK2UsZCk7Yy5zcGxpY2UoYiwxKX07U3lzLlVJLkRvbUVsZW1lbnQ9ZnVuY3Rpb24oKXt9O1N5cy5VSS5Eb21FbGVtZW50LnJlZ2lzdGVyQ2xhc3MoIlN5cy5VSS5Eb21FbGVtZW50Iik7U3lzLlVJLkRvbUVsZW1lbnQuYWRkQ3NzQ2xhc3M9ZnVuY3Rpb24oYSxiKXtpZighU3lzLlVJLkRvbUVsZW1lbnQuY29udGFpbnNDc3NDbGFzcyhhLGIpKWlmKGEuY2xhc3NOYW1lPT09IiIpYS5jbGFzc05hbWU9YjtlbHNlIGEuY2xhc3NOYW1lKz0iICIrYn07U3lzLlVJLkRvbUVsZW1lbnQuY29udGFpbnNDc3NDbGFzcz1mdW5jdGlvbihiLGEpe3JldHVybiBBcnJheS5jb250YWlucyhiLmNsYXNzTmFtZS5zcGxpdCgiICIpLGEpfTtTeXMuVUkuRG9tRWxlbWVudC5nZXRCb3VuZHM9ZnVuY3Rpb24oYSl7dmFyIGI9U3lzLlVJLkRvbUVsZW1lbnQuZ2V0TG9jYXRpb24oYSk7cmV0dXJuIG5ldyBTeXMuVUkuQm91bmRzKGIueCxiLnksYS5vZmZzZXRXaWR0aHx8MCxhLm9mZnNldEhlaWdodHx8MCl9O3ZhciAkZ2V0PVN5cy5VSS5Eb21FbGVtZW50LmdldEVsZW1lbnRCeUlkPWZ1bmN0aW9uKGYsZSl7aWYoIWUpcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGYpO2lmKGUuZ2V0RWxlbWVudEJ5SWQpcmV0dXJuIGUuZ2V0RWxlbWVudEJ5SWQoZik7dmFyIGM9W10sZD1lLmNoaWxkTm9kZXM7Zm9yKHZhciBiPTA7YjxkLmxlbmd0aDtiKyspe3ZhciBhPWRbYl07aWYoYS5ub2RlVHlwZT09MSljW2MubGVuZ3RoXT1hfXdoaWxlKGMubGVuZ3RoKXthPWMuc2hpZnQoKTtpZihhLmlkPT1mKXJldHVybiBhO2Q9YS5jaGlsZE5vZGVzO2ZvcihiPTA7YjxkLmxlbmd0aDtiKyspe2E9ZFtiXTtpZihhLm5vZGVUeXBlPT0xKWNbYy5sZW5ndGhdPWF9fXJldHVybiBudWxsfTtpZihkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KVN5cy5VSS5Eb21FbGVtZW50LmdldExvY2F0aW9uPWZ1bmN0aW9uKGEpe2lmKGEuc2VsZnx8YS5ub2RlVHlwZT09PTl8fGE9PT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnR8fGEucGFyZW50Tm9kZT09PWEub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpcmV0dXJuIG5ldyBTeXMuVUkuUG9pbnQoMCwwKTt2YXIgZj1hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO2lmKCFmKXJldHVybiBuZXcgU3lzLlVJLlBvaW50KDAsMCk7dmFyIGU9YS5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxoPWEub3duZXJEb2N1bWVudC5ib2R5LGwsYz1NYXRoLnJvdW5kKGYubGVmdCkrKGUuc2Nyb2xsTGVmdHx8aC5zY3JvbGxMZWZ0KSxkPU1hdGgucm91bmQoZi50b3ApKyhlLnNjcm9sbFRvcHx8aC5zY3JvbGxUb3ApO2lmKFN5cy5Ccm93c2VyLmFnZW50PT09U3lzLkJyb3dzZXIuSW50ZXJuZXRFeHBsb3Jlcil7dHJ5e3ZhciBnPWEub3duZXJEb2N1bWVudC5wYXJlbnRXaW5kb3cuZnJhbWVFbGVtZW50fHxudWxsO2lmKGcpe3ZhciBpPWcuZnJhbWVCb3JkZXI9PT0iMCJ8fGcuZnJhbWVCb3JkZXI9PT0ibm8iPzI6MDtjKz1pO2QrPWl9fWNhdGNoKG0pe31pZihTeXMuQnJvd3Nlci52ZXJzaW9uPT09NyYmIWRvY3VtZW50LmRvY3VtZW50TW9kZSl7dmFyIGo9ZG9jdW1lbnQuYm9keSxrPWouZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksYj0oay5yaWdodC1rLmxlZnQpL2ouY2xpZW50V2lkdGg7Yj1NYXRoLnJvdW5kKGIqMTAwKTtiPShiLWIlNSkvMTAwO2lmKCFpc05hTihiKSYmYiE9PTEpe2M9TWF0aC5yb3VuZChjL2IpO2Q9TWF0aC5yb3VuZChkL2IpfX1pZigoZG9jdW1lbnQuZG9jdW1lbnRNb2RlfHwwKTw4KXtjLT1lLmNsaWVudExlZnQ7ZC09ZS5jbGllbnRUb3B9fXJldHVybiBuZXcgU3lzLlVJLlBvaW50KGMsZCl9O2Vsc2UgaWYoU3lzLkJyb3dzZXIuYWdlbnQ9PT1TeXMuQnJvd3Nlci5TYWZhcmkpU3lzLlVJLkRvbUVsZW1lbnQuZ2V0TG9jYXRpb249ZnVuY3Rpb24oYyl7aWYoYy53aW5kb3cmJmMud2luZG93PT09Y3x8Yy5ub2RlVHlwZT09PTkpcmV0dXJuIG5ldyBTeXMuVUkuUG9pbnQoMCwwKTt2YXIgZD0wLGU9MCxhLGo9bnVsbCxnPW51bGwsYjtmb3IoYT1jO2E7aj1hLChnPWIsYT1hLm9mZnNldFBhcmVudCkpe2I9U3lzLlVJLkRvbUVsZW1lbnQuX2dldEN1cnJlbnRTdHlsZShhKTt2YXIgZj1hLnRhZ05hbWU/YS50YWdOYW1lLnRvVXBwZXJDYXNlKCk6bnVsbDtpZigoYS5vZmZzZXRMZWZ0fHxhLm9mZnNldFRvcCkmJihmIT09IkJPRFkifHwoIWd8fGcucG9zaXRpb24hPT0iYWJzb2x1dGUiKSkpe2QrPWEub2Zmc2V0TGVmdDtlKz1hLm9mZnNldFRvcH1pZihqJiZTeXMuQnJvd3Nlci52ZXJzaW9uPj0zKXtkKz1wYXJzZUludChiLmJvcmRlckxlZnRXaWR0aCk7ZSs9cGFyc2VJbnQoYi5ib3JkZXJUb3BXaWR0aCl9fWI9U3lzLlVJLkRvbUVsZW1lbnQuX2dldEN1cnJlbnRTdHlsZShjKTt2YXIgaD1iP2IucG9zaXRpb246bnVsbDtpZighaHx8aCE9PSJhYnNvbHV0ZSIpZm9yKGE9Yy5wYXJlbnROb2RlO2E7YT1hLnBhcmVudE5vZGUpe2Y9YS50YWdOYW1lP2EudGFnTmFtZS50b1VwcGVyQ2FzZSgpOm51bGw7aWYoZiE9PSJCT0RZIiYmZiE9PSJIVE1MIiYmKGEuc2Nyb2xsTGVmdHx8YS5zY3JvbGxUb3ApKXtkLT1hLnNjcm9sbExlZnR8fDA7ZS09YS5zY3JvbGxUb3B8fDB9Yj1TeXMuVUkuRG9tRWxlbWVudC5fZ2V0Q3VycmVudFN0eWxlKGEpO3ZhciBpPWI/Yi5wb3NpdGlvbjpudWxsO2lmKGkmJmk9PT0iYWJzb2x1dGUiKWJyZWFrfXJldHVybiBuZXcgU3lzLlVJLlBvaW50KGQsZSl9O2Vsc2UgU3lzLlVJLkRvbUVsZW1lbnQuZ2V0TG9jYXRpb249ZnVuY3Rpb24oZCl7aWYoZC53aW5kb3cmJmQud2luZG93PT09ZHx8ZC5ub2RlVHlwZT09PTkpcmV0dXJuIG5ldyBTeXMuVUkuUG9pbnQoMCwwKTt2YXIgZT0wLGY9MCxhLGk9bnVsbCxnPW51bGwsYj1udWxsO2ZvcihhPWQ7YTtpPWEsKGc9YixhPWEub2Zmc2V0UGFyZW50KSl7dmFyIGM9YS50YWdOYW1lP2EudGFnTmFtZS50b1VwcGVyQ2FzZSgpOm51bGw7Yj1TeXMuVUkuRG9tRWxlbWVudC5fZ2V0Q3VycmVudFN0eWxlKGEpO2lmKChhLm9mZnNldExlZnR8fGEub2Zmc2V0VG9wKSYmIShjPT09IkJPRFkiJiYoIWd8fGcucG9zaXRpb24hPT0iYWJzb2x1dGUiKSkpe2UrPWEub2Zmc2V0TGVmdDtmKz1hLm9mZnNldFRvcH1pZihpIT09bnVsbCYmYil7aWYoYyE9PSJUQUJMRSImJmMhPT0iVEQiJiZjIT09IkhUTUwiKXtlKz1wYXJzZUludChiLmJvcmRlckxlZnRXaWR0aCl8fDA7Zis9cGFyc2VJbnQoYi5ib3JkZXJUb3BXaWR0aCl8fDB9aWYoYz09PSJUQUJMRSImJihiLnBvc2l0aW9uPT09InJlbGF0aXZlInx8Yi5wb3NpdGlvbj09PSJhYnNvbHV0ZSIpKXtlKz1wYXJzZUludChiLm1hcmdpbkxlZnQpfHwwO2YrPXBhcnNlSW50KGIubWFyZ2luVG9wKXx8MH19fWI9U3lzLlVJLkRvbUVsZW1lbnQuX2dldEN1cnJlbnRTdHlsZShkKTt2YXIgaD1iP2IucG9zaXRpb246bnVsbDtpZighaHx8aCE9PSJhYnNvbHV0ZSIpZm9yKGE9ZC5wYXJlbnROb2RlO2E7YT1hLnBhcmVudE5vZGUpe2M9YS50YWdOYW1lP2EudGFnTmFtZS50b1VwcGVyQ2FzZSgpOm51bGw7aWYoYyE9PSJCT0RZIiYmYyE9PSJIVE1MIiYmKGEuc2Nyb2xsTGVmdHx8YS5zY3JvbGxUb3ApKXtlLT1hLnNjcm9sbExlZnR8fDA7Zi09YS5zY3JvbGxUb3B8fDA7Yj1TeXMuVUkuRG9tRWxlbWVudC5fZ2V0Q3VycmVudFN0eWxlKGEpO2lmKGIpe2UrPXBhcnNlSW50KGIuYm9yZGVyTGVmdFdpZHRoKXx8MDtmKz1wYXJzZUludChiLmJvcmRlclRvcFdpZHRoKXx8MH19fXJldHVybiBuZXcgU3lzLlVJLlBvaW50KGUsZil9O1N5cy5VSS5Eb21FbGVtZW50LmlzRG9tRWxlbWVudD1mdW5jdGlvbihhKXtyZXR1cm4gU3lzLl9pc0RvbUVsZW1lbnQoYSl9O1N5cy5VSS5Eb21FbGVtZW50LnJlbW92ZUNzc0NsYXNzPWZ1bmN0aW9uKGQsYyl7dmFyIGE9IiAiK2QuY2xhc3NOYW1lKyIgIixiPWEuaW5kZXhPZigiICIrYysiICIpO2lmKGI+PTApZC5jbGFzc05hbWU9KGEuc3Vic3RyKDAsYikrIiAiK2Euc3Vic3RyaW5nKGIrYy5sZW5ndGgrMSxhLmxlbmd0aCkpLnRyaW0oKX07U3lzLlVJLkRvbUVsZW1lbnQucmVzb2x2ZUVsZW1lbnQ9ZnVuY3Rpb24oYixjKXt2YXIgYT1iO2lmKCFhKXJldHVybiBudWxsO2lmKHR5cGVvZiBhPT09InN0cmluZyIpYT1TeXMuVUkuRG9tRWxlbWVudC5nZXRFbGVtZW50QnlJZChhLGMpO3JldHVybiBhfTtTeXMuVUkuRG9tRWxlbWVudC5yYWlzZUJ1YmJsZUV2ZW50PWZ1bmN0aW9uKGMsZCl7dmFyIGI9Yzt3aGlsZShiKXt2YXIgYT1iLmNvbnRyb2w7aWYoYSYmYS5vbkJ1YmJsZUV2ZW50JiZhLnJhaXNlQnViYmxlRXZlbnQpe1N5cy5VSS5Eb21FbGVtZW50Ll9yYWlzZUJ1YmJsZUV2ZW50RnJvbUNvbnRyb2woYSxjLGQpO3JldHVybn1iPWIucGFyZW50Tm9kZX19O1N5cy5VSS5Eb21FbGVtZW50Ll9yYWlzZUJ1YmJsZUV2ZW50RnJvbUNvbnRyb2w9ZnVuY3Rpb24oYSxiLGMpe2lmKCFhLm9uQnViYmxlRXZlbnQoYixjKSlhLl9yYWlzZUJ1YmJsZUV2ZW50KGIsYyl9O1N5cy5VSS5Eb21FbGVtZW50LnNldExvY2F0aW9uPWZ1bmN0aW9uKGIsYyxkKXt2YXIgYT1iLnN0eWxlO2EucG9zaXRpb249ImFic29sdXRlIjthLmxlZnQ9YysicHgiO2EudG9wPWQrInB4In07U3lzLlVJLkRvbUVsZW1lbnQudG9nZ2xlQ3NzQ2xhc3M9ZnVuY3Rpb24oYixhKXtpZihTeXMuVUkuRG9tRWxlbWVudC5jb250YWluc0Nzc0NsYXNzKGIsYSkpU3lzLlVJLkRvbUVsZW1lbnQucmVtb3ZlQ3NzQ2xhc3MoYixhKTtlbHNlIFN5cy5VSS5Eb21FbGVtZW50LmFkZENzc0NsYXNzKGIsYSl9O1N5cy5VSS5Eb21FbGVtZW50LmdldFZpc2liaWxpdHlNb2RlPWZ1bmN0aW9uKGEpe3JldHVybiBhLl92aXNpYmlsaXR5TW9kZT09PVN5cy5VSS5WaXNpYmlsaXR5TW9kZS5oaWRlP1N5cy5VSS5WaXNpYmlsaXR5TW9kZS5oaWRlOlN5cy5VSS5WaXNpYmlsaXR5TW9kZS5jb2xsYXBzZX07U3lzLlVJLkRvbUVsZW1lbnQuc2V0VmlzaWJpbGl0eU1vZGU9ZnVuY3Rpb24oYSxiKXtTeXMuVUkuRG9tRWxlbWVudC5fZW5zdXJlT2xkRGlzcGxheU1vZGUoYSk7aWYoYS5fdmlzaWJpbGl0eU1vZGUhPT1iKXthLl92aXNpYmlsaXR5TW9kZT1iO2lmKFN5cy5VSS5Eb21FbGVtZW50LmdldFZpc2libGUoYSk9PT1mYWxzZSlpZihhLl92aXNpYmlsaXR5TW9kZT09PVN5cy5VSS5WaXNpYmlsaXR5TW9kZS5oaWRlKWEuc3R5bGUuZGlzcGxheT1hLl9vbGREaXNwbGF5TW9kZTtlbHNlIGEuc3R5bGUuZGlzcGxheT0ibm9uZSI7YS5fdmlzaWJpbGl0eU1vZGU9Yn19O1N5cy5VSS5Eb21FbGVtZW50LmdldFZpc2libGU9ZnVuY3Rpb24oYil7dmFyIGE9Yi5jdXJyZW50U3R5bGV8fFN5cy5VSS5Eb21FbGVtZW50Ll9nZXRDdXJyZW50U3R5bGUoYik7aWYoIWEpcmV0dXJuIHRydWU7cmV0dXJuIGEudmlzaWJpbGl0eSE9PSJoaWRkZW4iJiZhLmRpc3BsYXkhPT0ibm9uZSJ9O1N5cy5VSS5Eb21FbGVtZW50LnNldFZpc2libGU9ZnVuY3Rpb24oYSxiKXtpZihiIT09U3lzLlVJLkRvbUVsZW1lbnQuZ2V0VmlzaWJsZShhKSl7U3lzLlVJLkRvbUVsZW1lbnQuX2Vuc3VyZU9sZERpc3BsYXlNb2RlKGEpO2Euc3R5bGUudmlzaWJpbGl0eT1iPyJ2aXNpYmxlIjoiaGlkZGVuIjtpZihifHxhLl92aXNpYmlsaXR5TW9kZT09PVN5cy5VSS5WaXNpYmlsaXR5TW9kZS5oaWRlKWEuc3R5bGUuZGlzcGxheT1hLl9vbGREaXNwbGF5TW9kZTtlbHNlIGEuc3R5bGUuZGlzcGxheT0ibm9uZSJ9fTtTeXMuVUkuRG9tRWxlbWVudC5fZW5zdXJlT2xkRGlzcGxheU1vZGU9ZnVuY3Rpb24oYSl7aWYoIWEuX29sZERpc3BsYXlNb2RlKXt2YXIgYj1hLmN1cnJlbnRTdHlsZXx8U3lzLlVJLkRvbUVsZW1lbnQuX2dldEN1cnJlbnRTdHlsZShhKTthLl9vbGREaXNwbGF5TW9kZT1iP2IuZGlzcGxheTpudWxsO2lmKCFhLl9vbGREaXNwbGF5TW9kZXx8YS5fb2xkRGlzcGxheU1vZGU9PT0ibm9uZSIpc3dpdGNoKGEudGFnTmFtZS50b1VwcGVyQ2FzZSgpKXtjYXNlICJESVYiOmNhc2UgIlAiOmNhc2UgIkFERFJFU1MiOmNhc2UgIkJMT0NLUVVPVEUiOmNhc2UgIkJPRFkiOmNhc2UgIkNPTCI6Y2FzZSAiQ09MR1JPVVAiOmNhc2UgIkREIjpjYXNlICJETCI6Y2FzZSAiRFQiOmNhc2UgIkZJRUxEU0VUIjpjYXNlICJGT1JNIjpjYXNlICJIMSI6Y2FzZSAiSDIiOmNhc2UgIkgzIjpjYXNlICJINCI6Y2FzZSAiSDUiOmNhc2UgIkg2IjpjYXNlICJIUiI6Y2FzZSAiSUZSQU1FIjpjYXNlICJMRUdFTkQiOmNhc2UgIk9MIjpjYXNlICJQUkUiOmNhc2UgIlRBQkxFIjpjYXNlICJURCI6Y2FzZSAiVEgiOmNhc2UgIlRSIjpjYXNlICJVTCI6YS5fb2xkRGlzcGxheU1vZGU9ImJsb2NrIjticmVhaztjYXNlICJMSSI6YS5fb2xkRGlzcGxheU1vZGU9Imxpc3QtaXRlbSI7YnJlYWs7ZGVmYXVsdDphLl9vbGREaXNwbGF5TW9kZT0iaW5saW5lIn19fTtTeXMuVUkuRG9tRWxlbWVudC5fZ2V0V2luZG93PWZ1bmN0aW9uKGEpe3ZhciBiPWEub3duZXJEb2N1bWVudHx8YS5kb2N1bWVudHx8YTtyZXR1cm4gYi5kZWZhdWx0Vmlld3x8Yi5wYXJlbnRXaW5kb3d9O1N5cy5VSS5Eb21FbGVtZW50Ll9nZXRDdXJyZW50U3R5bGU9ZnVuY3Rpb24oYSl7aWYoYS5ub2RlVHlwZT09PTMpcmV0dXJuIG51bGw7dmFyIGM9U3lzLlVJLkRvbUVsZW1lbnQuX2dldFdpbmRvdyhhKTtpZihhLmRvY3VtZW50RWxlbWVudClhPWEuZG9jdW1lbnRFbGVtZW50O3ZhciBiPWMmJmEhPT1jJiZjLmdldENvbXB1dGVkU3R5bGU/Yy5nZXRDb21wdXRlZFN0eWxlKGEsbnVsbCk6YS5jdXJyZW50U3R5bGV8fGEuc3R5bGU7aWYoIWImJlN5cy5Ccm93c2VyLmFnZW50PT09U3lzLkJyb3dzZXIuU2FmYXJpJiZhLnN0eWxlKXt2YXIgZz1hLnN0eWxlLmRpc3BsYXksZj1hLnN0eWxlLnBvc2l0aW9uO2Euc3R5bGUucG9zaXRpb249ImFic29sdXRlIjthLnN0eWxlLmRpc3BsYXk9ImJsb2NrIjt2YXIgZT1jLmdldENvbXB1dGVkU3R5bGUoYSxudWxsKTthLnN0eWxlLmRpc3BsYXk9ZzthLnN0eWxlLnBvc2l0aW9uPWY7Yj17fTtmb3IodmFyIGQgaW4gZSliW2RdPWVbZF07Yi5kaXNwbGF5PSJub25lIn1yZXR1cm4gYn07U3lzLklDb250YWluZXI9ZnVuY3Rpb24oKXt9O1N5cy5JQ29udGFpbmVyLnByb3RvdHlwZT17fTtTeXMuSUNvbnRhaW5lci5yZWdpc3RlckludGVyZmFjZSgiU3lzLklDb250YWluZXIiKTtTeXMuQXBwbGljYXRpb25Mb2FkRXZlbnRBcmdzPWZ1bmN0aW9uKGIsYSl7U3lzLkFwcGxpY2F0aW9uTG9hZEV2ZW50QXJncy5pbml0aWFsaXplQmFzZSh0aGlzKTt0aGlzLl9jb21wb25lbnRzPWI7dGhpcy5faXNQYXJ0aWFsTG9hZD1hfTtTeXMuQXBwbGljYXRpb25Mb2FkRXZlbnRBcmdzLnByb3RvdHlwZT17Z2V0X2NvbXBvbmVudHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29tcG9uZW50c30sZ2V0X2lzUGFydGlhbExvYWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNQYXJ0aWFsTG9hZH19O1N5cy5BcHBsaWNhdGlvbkxvYWRFdmVudEFyZ3MucmVnaXN0ZXJDbGFzcygiU3lzLkFwcGxpY2F0aW9uTG9hZEV2ZW50QXJncyIsU3lzLkV2ZW50QXJncyk7U3lzLl9BcHBsaWNhdGlvbj1mdW5jdGlvbigpe1N5cy5fQXBwbGljYXRpb24uaW5pdGlhbGl6ZUJhc2UodGhpcyk7dGhpcy5fZGlzcG9zYWJsZU9iamVjdHM9W107dGhpcy5fY29tcG9uZW50cz17fTt0aGlzLl9jcmVhdGVkQ29tcG9uZW50cz1bXTt0aGlzLl9zZWNvbmRQYXNzQ29tcG9uZW50cz1bXTt0aGlzLl91bmxvYWRIYW5kbGVyRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl91bmxvYWRIYW5kbGVyKTtTeXMuVUkuRG9tRXZlbnQuYWRkSGFuZGxlcih3aW5kb3csInVubG9hZCIsdGhpcy5fdW5sb2FkSGFuZGxlckRlbGVnYXRlKTt0aGlzLl9kb21SZWFkeSgpfTtTeXMuX0FwcGxpY2F0aW9uLnByb3RvdHlwZT17X2NyZWF0aW5nQ29tcG9uZW50czpmYWxzZSxfZGlzcG9zaW5nOmZhbHNlLF9kZWxldGVDb3VudDowLGdldF9pc0NyZWF0aW5nQ29tcG9uZW50czpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jcmVhdGluZ0NvbXBvbmVudHN9LGdldF9pc0Rpc3Bvc2luZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kaXNwb3Npbmd9LGFkZF9pbml0OmZ1bmN0aW9uKGEpe2lmKHRoaXMuX2luaXRpYWxpemVkKWEodGhpcyxTeXMuRXZlbnRBcmdzLkVtcHR5KTtlbHNlIHRoaXMuZ2V0X2V2ZW50cygpLmFkZEhhbmRsZXIoImluaXQiLGEpfSxyZW1vdmVfaW5pdDpmdW5jdGlvbihhKXt0aGlzLmdldF9ldmVudHMoKS5yZW1vdmVIYW5kbGVyKCJpbml0IixhKX0sYWRkX2xvYWQ6ZnVuY3Rpb24oYSl7dGhpcy5nZXRfZXZlbnRzKCkuYWRkSGFuZGxlcigibG9hZCIsYSl9LHJlbW92ZV9sb2FkOmZ1bmN0aW9uKGEpe3RoaXMuZ2V0X2V2ZW50cygpLnJlbW92ZUhhbmRsZXIoImxvYWQiLGEpfSxhZGRfdW5sb2FkOmZ1bmN0aW9uKGEpe3RoaXMuZ2V0X2V2ZW50cygpLmFkZEhhbmRsZXIoInVubG9hZCIsYSl9LHJlbW92ZV91bmxvYWQ6ZnVuY3Rpb24oYSl7dGhpcy5nZXRfZXZlbnRzKCkucmVtb3ZlSGFuZGxlcigidW5sb2FkIixhKX0sYWRkQ29tcG9uZW50OmZ1bmN0aW9uKGEpe3RoaXMuX2NvbXBvbmVudHNbYS5nZXRfaWQoKV09YX0sYmVnaW5DcmVhdGVDb21wb25lbnRzOmZ1bmN0aW9uKCl7dGhpcy5fY3JlYXRpbmdDb21wb25lbnRzPXRydWV9LGRpc3Bvc2U6ZnVuY3Rpb24oKXtpZighdGhpcy5fZGlzcG9zaW5nKXt0aGlzLl9kaXNwb3Npbmc9dHJ1ZTtpZih0aGlzLl90aW1lckNvb2tpZSl7d2luZG93LmNsZWFyVGltZW91dCh0aGlzLl90aW1lckNvb2tpZSk7ZGVsZXRlIHRoaXMuX3RpbWVyQ29va2llfWlmKHRoaXMuX2VuZFJlcXVlc3RIYW5kbGVyKXtTeXMuV2ViRm9ybXMuUGFnZVJlcXVlc3RNYW5hZ2VyLmdldEluc3RhbmNlKCkucmVtb3ZlX2VuZFJlcXVlc3QodGhpcy5fZW5kUmVxdWVzdEhhbmRsZXIpO2RlbGV0ZSB0aGlzLl9lbmRSZXF1ZXN0SGFuZGxlcn1pZih0aGlzLl9iZWdpblJlcXVlc3RIYW5kbGVyKXtTeXMuV2ViRm9ybXMuUGFnZVJlcXVlc3RNYW5hZ2VyLmdldEluc3RhbmNlKCkucmVtb3ZlX2JlZ2luUmVxdWVzdCh0aGlzLl9iZWdpblJlcXVlc3RIYW5kbGVyKTtkZWxldGUgdGhpcy5fYmVnaW5SZXF1ZXN0SGFuZGxlcn1pZih3aW5kb3cucGFnZVVubG9hZCl3aW5kb3cucGFnZVVubG9hZCh0aGlzLFN5cy5FdmVudEFyZ3MuRW1wdHkpO3ZhciBjPXRoaXMuZ2V0X2V2ZW50cygpLmdldEhhbmRsZXIoInVubG9hZCIpO2lmKGMpYyh0aGlzLFN5cy5FdmVudEFyZ3MuRW1wdHkpO3ZhciBiPUFycmF5LmNsb25lKHRoaXMuX2Rpc3Bvc2FibGVPYmplY3RzKTtmb3IodmFyIGE9MCxmPWIubGVuZ3RoO2E8ZjthKyspe3ZhciBkPWJbYV07aWYodHlwZW9mIGQhPT0idW5kZWZpbmVkIilkLmRpc3Bvc2UoKX1BcnJheS5jbGVhcih0aGlzLl9kaXNwb3NhYmxlT2JqZWN0cyk7U3lzLlVJLkRvbUV2ZW50LnJlbW92ZUhhbmRsZXIod2luZG93LCJ1bmxvYWQiLHRoaXMuX3VubG9hZEhhbmRsZXJEZWxlZ2F0ZSk7aWYoU3lzLl9TY3JpcHRMb2FkZXIpe3ZhciBlPVN5cy5fU2NyaXB0TG9hZGVyLmdldEluc3RhbmNlKCk7aWYoZSllLmRpc3Bvc2UoKX1TeXMuX0FwcGxpY2F0aW9uLmNhbGxCYXNlTWV0aG9kKHRoaXMsImRpc3Bvc2UiKX19LGRpc3Bvc2VFbGVtZW50OmZ1bmN0aW9uKGMsail7aWYoYy5ub2RlVHlwZT09PTEpe3ZhciBiLGg9Yy5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpLGc9aC5sZW5ndGgsaT1uZXcgQXJyYXkoZyk7Zm9yKGI9MDtiPGc7YisrKWlbYl09aFtiXTtmb3IoYj1nLTE7Yj49MDtiLS0pe3ZhciBkPWlbYl0sZj1kLmRpc3Bvc2U7aWYoZiYmdHlwZW9mIGY9PT0iZnVuY3Rpb24iKWQuZGlzcG9zZSgpO2Vsc2V7dmFyIGU9ZC5jb250cm9sO2lmKGUmJnR5cGVvZiBlLmRpc3Bvc2U9PT0iZnVuY3Rpb24iKWUuZGlzcG9zZSgpfXZhciBhPWQuX2JlaGF2aW9ycztpZihhKXRoaXMuX2Rpc3Bvc2VDb21wb25lbnRzKGEpO2E9ZC5fY29tcG9uZW50cztpZihhKXt0aGlzLl9kaXNwb3NlQ29tcG9uZW50cyhhKTtkLl9jb21wb25lbnRzPW51bGx9fWlmKCFqKXt2YXIgZj1jLmRpc3Bvc2U7aWYoZiYmdHlwZW9mIGY9PT0iZnVuY3Rpb24iKWMuZGlzcG9zZSgpO2Vsc2V7dmFyIGU9Yy5jb250cm9sO2lmKGUmJnR5cGVvZiBlLmRpc3Bvc2U9PT0iZnVuY3Rpb24iKWUuZGlzcG9zZSgpfXZhciBhPWMuX2JlaGF2aW9ycztpZihhKXRoaXMuX2Rpc3Bvc2VDb21wb25lbnRzKGEpO2E9Yy5fY29tcG9uZW50cztpZihhKXt0aGlzLl9kaXNwb3NlQ29tcG9uZW50cyhhKTtjLl9jb21wb25lbnRzPW51bGx9fX19LGVuZENyZWF0ZUNvbXBvbmVudHM6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLl9zZWNvbmRQYXNzQ29tcG9uZW50cztmb3IodmFyIGE9MCxkPWIubGVuZ3RoO2E8ZDthKyspe3ZhciBjPWJbYV0uY29tcG9uZW50O1N5cyRDb21wb25lbnQkX3NldFJlZmVyZW5jZXMoYyxiW2FdLnJlZmVyZW5jZXMpO2MuZW5kVXBkYXRlKCl9dGhpcy5fc2Vjb25kUGFzc0NvbXBvbmVudHM9W107dGhpcy5fY3JlYXRpbmdDb21wb25lbnRzPWZhbHNlfSxmaW5kQ29tcG9uZW50OmZ1bmN0aW9uKGIsYSl7cmV0dXJuIGE/U3lzLklDb250YWluZXIuaXNJbnN0YW5jZU9mVHlwZShhKT9hLmZpbmRDb21wb25lbnQoYik6YVtiXXx8bnVsbDpTeXMuQXBwbGljYXRpb24uX2NvbXBvbmVudHNbYl18fG51bGx9LGdldENvbXBvbmVudHM6ZnVuY3Rpb24oKXt2YXIgYT1bXSxiPXRoaXMuX2NvbXBvbmVudHM7Zm9yKHZhciBjIGluIGIpYVthLmxlbmd0aF09YltjXTtyZXR1cm4gYX0saW5pdGlhbGl6ZTpmdW5jdGlvbigpe2lmKCF0aGlzLmdldF9pc0luaXRpYWxpemVkKCkmJiF0aGlzLl9kaXNwb3Npbmcpe1N5cy5fQXBwbGljYXRpb24uY2FsbEJhc2VNZXRob2QodGhpcywiaW5pdGlhbGl6ZSIpO3RoaXMuX3JhaXNlSW5pdCgpO2lmKHRoaXMuZ2V0X3N0YXRlU3RyaW5nKXtpZihTeXMuV2ViRm9ybXMmJlN5cy5XZWJGb3Jtcy5QYWdlUmVxdWVzdE1hbmFnZXIpe3RoaXMuX2JlZ2luUmVxdWVzdEhhbmRsZXI9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vblBhZ2VSZXF1ZXN0TWFuYWdlckJlZ2luUmVxdWVzdCk7U3lzLldlYkZvcm1zLlBhZ2VSZXF1ZXN0TWFuYWdlci5nZXRJbnN0YW5jZSgpLmFkZF9iZWdpblJlcXVlc3QodGhpcy5fYmVnaW5SZXF1ZXN0SGFuZGxlcik7dGhpcy5fZW5kUmVxdWVzdEhhbmRsZXI9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vblBhZ2VSZXF1ZXN0TWFuYWdlckVuZFJlcXVlc3QpO1N5cy5XZWJGb3Jtcy5QYWdlUmVxdWVzdE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5hZGRfZW5kUmVxdWVzdCh0aGlzLl9lbmRSZXF1ZXN0SGFuZGxlcil9dmFyIGE9dGhpcy5nZXRfc3RhdGVTdHJpbmcoKTtpZihhIT09dGhpcy5fY3VycmVudEVudHJ5KXRoaXMuX25hdmlnYXRlKGEpO2Vsc2UgdGhpcy5fZW5zdXJlSGlzdG9yeSgpfXRoaXMucmFpc2VMb2FkKCl9fSxub3RpZnlTY3JpcHRMb2FkZWQ6ZnVuY3Rpb24oKXt9LHJlZ2lzdGVyRGlzcG9zYWJsZU9iamVjdDpmdW5jdGlvbihiKXtpZighdGhpcy5fZGlzcG9zaW5nKXt2YXIgYT10aGlzLl9kaXNwb3NhYmxlT2JqZWN0cyxjPWEubGVuZ3RoO2FbY109YjtiLl9fbXNkaXNwb3NlaW5kZXg9Y319LHJhaXNlTG9hZDpmdW5jdGlvbigpe3ZhciBiPXRoaXMuZ2V0X2V2ZW50cygpLmdldEhhbmRsZXIoImxvYWQiKSxhPW5ldyBTeXMuQXBwbGljYXRpb25Mb2FkRXZlbnRBcmdzKEFycmF5LmNsb25lKHRoaXMuX2NyZWF0ZWRDb21wb25lbnRzKSwhIXRoaXMuX2xvYWRlZCk7dGhpcy5fbG9hZGVkPXRydWU7aWYoYiliKHRoaXMsYSk7aWYod2luZG93LnBhZ2VMb2FkKXdpbmRvdy5wYWdlTG9hZCh0aGlzLGEpO3RoaXMuX2NyZWF0ZWRDb21wb25lbnRzPVtdfSxyZW1vdmVDb21wb25lbnQ6ZnVuY3Rpb24oYil7dmFyIGE9Yi5nZXRfaWQoKTtpZihhKWRlbGV0ZSB0aGlzLl9jb21wb25lbnRzW2FdfSx1bnJlZ2lzdGVyRGlzcG9zYWJsZU9iamVjdDpmdW5jdGlvbihhKXtpZighdGhpcy5fZGlzcG9zaW5nKXt2YXIgZT1hLl9fbXNkaXNwb3NlaW5kZXg7aWYodHlwZW9mIGU9PT0ibnVtYmVyIil7dmFyIGI9dGhpcy5fZGlzcG9zYWJsZU9iamVjdHM7ZGVsZXRlIGJbZV07ZGVsZXRlIGEuX19tc2Rpc3Bvc2VpbmRleDtpZigrK3RoaXMuX2RlbGV0ZUNvdW50PjEwMDApe3ZhciBjPVtdO2Zvcih2YXIgZD0wLGY9Yi5sZW5ndGg7ZDxmO2QrKyl7YT1iW2RdO2lmKHR5cGVvZiBhIT09InVuZGVmaW5lZCIpe2EuX19tc2Rpc3Bvc2VpbmRleD1jLmxlbmd0aDtjLnB1c2goYSl9fXRoaXMuX2Rpc3Bvc2FibGVPYmplY3RzPWM7dGhpcy5fZGVsZXRlQ291bnQ9MH19fX0sX2FkZENvbXBvbmVudFRvU2Vjb25kUGFzczpmdW5jdGlvbihiLGEpe3RoaXMuX3NlY29uZFBhc3NDb21wb25lbnRzW3RoaXMuX3NlY29uZFBhc3NDb21wb25lbnRzLmxlbmd0aF09e2NvbXBvbmVudDpiLHJlZmVyZW5jZXM6YX19LF9kaXNwb3NlQ29tcG9uZW50czpmdW5jdGlvbihhKXtpZihhKWZvcih2YXIgYj1hLmxlbmd0aC0xO2I+PTA7Yi0tKXt2YXIgYz1hW2JdO2lmKHR5cGVvZiBjLmRpc3Bvc2U9PT0iZnVuY3Rpb24iKWMuZGlzcG9zZSgpfX0sX2RvbVJlYWR5OmZ1bmN0aW9uKCl7dmFyIGEsZyxmPXRoaXM7ZnVuY3Rpb24gYigpe2YuaW5pdGlhbGl6ZSgpfXZhciBjPWZ1bmN0aW9uKCl7U3lzLlVJLkRvbUV2ZW50LnJlbW92ZUhhbmRsZXIod2luZG93LCJsb2FkIixjKTtiKCl9O1N5cy5VSS5Eb21FdmVudC5hZGRIYW5kbGVyKHdpbmRvdywibG9hZCIsYyk7aWYoZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcil0cnl7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsYT1mdW5jdGlvbigpe2RvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGEsZmFsc2UpO2IoKX0sZmFsc2UpfWNhdGNoKGgpe31lbHNlIGlmKGRvY3VtZW50LmF0dGFjaEV2ZW50KWlmKHdpbmRvdz09d2luZG93LnRvcCYmZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsKXt2YXIgZSxkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2E9ZnVuY3Rpb24oKXt0cnl7ZC5kb1Njcm9sbCgibGVmdCIpfWNhdGNoKGMpe2U9d2luZG93LnNldFRpbWVvdXQoYSwwKTtyZXR1cm59ZD1udWxsO2IoKX07YSgpfWVsc2UgZG9jdW1lbnQuYXR0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5nZSIsYT1mdW5jdGlvbigpe2lmKGRvY3VtZW50LnJlYWR5U3RhdGU9PT0iY29tcGxldGUiKXtkb2N1bWVudC5kZXRhY2hFdmVudCgib25yZWFkeXN0YXRlY2hhbmdlIixhKTtiKCl9fSl9LF9yYWlzZUluaXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldF9ldmVudHMoKS5nZXRIYW5kbGVyKCJpbml0Iik7aWYoYSl7dGhpcy5iZWdpbkNyZWF0ZUNvbXBvbmVudHMoKTthKHRoaXMsU3lzLkV2ZW50QXJncy5FbXB0eSk7dGhpcy5lbmRDcmVhdGVDb21wb25lbnRzKCl9fSxfdW5sb2FkSGFuZGxlcjpmdW5jdGlvbigpe3RoaXMuZGlzcG9zZSgpfX07U3lzLl9BcHBsaWNhdGlvbi5yZWdpc3RlckNsYXNzKCJTeXMuX0FwcGxpY2F0aW9uIixTeXMuQ29tcG9uZW50LFN5cy5JQ29udGFpbmVyKTtTeXMuQXBwbGljYXRpb249bmV3IFN5cy5fQXBwbGljYXRpb247dmFyICRmaW5kPVN5cy5BcHBsaWNhdGlvbi5maW5kQ29tcG9uZW50O1N5cy5VSS5CZWhhdmlvcj1mdW5jdGlvbihiKXtTeXMuVUkuQmVoYXZpb3IuaW5pdGlhbGl6ZUJhc2UodGhpcyk7dGhpcy5fZWxlbWVudD1iO3ZhciBhPWIuX2JlaGF2aW9ycztpZighYSliLl9iZWhhdmlvcnM9W3RoaXNdO2Vsc2UgYVthLmxlbmd0aF09dGhpc307U3lzLlVJLkJlaGF2aW9yLnByb3RvdHlwZT17X25hbWU6bnVsbCxnZXRfZWxlbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbGVtZW50fSxnZXRfaWQ6ZnVuY3Rpb24oKXt2YXIgYT1TeXMuVUkuQmVoYXZpb3IuY2FsbEJhc2VNZXRob2QodGhpcywiZ2V0X2lkIik7aWYoYSlyZXR1cm4gYTtpZighdGhpcy5fZWxlbWVudHx8IXRoaXMuX2VsZW1lbnQuaWQpcmV0dXJuICIiO3JldHVybiB0aGlzLl9lbGVtZW50LmlkKyIkIit0aGlzLmdldF9uYW1lKCl9LGdldF9uYW1lOmZ1bmN0aW9uKCl7aWYodGhpcy5fbmFtZSlyZXR1cm4gdGhpcy5fbmFtZTt2YXIgYT1PYmplY3QuZ2V0VHlwZU5hbWUodGhpcyksYj1hLmxhc3RJbmRleE9mKCIuIik7aWYoYiE9PS0xKWE9YS5zdWJzdHIoYisxKTtpZighdGhpcy5nZXRfaXNJbml0aWFsaXplZCgpKXRoaXMuX25hbWU9YTtyZXR1cm4gYX0sc2V0X25hbWU6ZnVuY3Rpb24oYSl7dGhpcy5fbmFtZT1hfSxpbml0aWFsaXplOmZ1bmN0aW9uKCl7U3lzLlVJLkJlaGF2aW9yLmNhbGxCYXNlTWV0aG9kKHRoaXMsImluaXRpYWxpemUiKTt2YXIgYT10aGlzLmdldF9uYW1lKCk7aWYoYSl0aGlzLl9lbGVtZW50W2FdPXRoaXN9LGRpc3Bvc2U6ZnVuY3Rpb24oKXtTeXMuVUkuQmVoYXZpb3IuY2FsbEJhc2VNZXRob2QodGhpcywiZGlzcG9zZSIpO3ZhciBhPXRoaXMuX2VsZW1lbnQ7aWYoYSl7dmFyIGM9dGhpcy5nZXRfbmFtZSgpO2lmKGMpYVtjXT1udWxsO3ZhciBiPWEuX2JlaGF2aW9ycztBcnJheS5yZW1vdmUoYix0aGlzKTtpZihiLmxlbmd0aD09PTApYS5fYmVoYXZpb3JzPW51bGw7ZGVsZXRlIHRoaXMuX2VsZW1lbnR9fX07U3lzLlVJLkJlaGF2aW9yLnJlZ2lzdGVyQ2xhc3MoIlN5cy5VSS5CZWhhdmlvciIsU3lzLkNvbXBvbmVudCk7U3lzLlVJLkJlaGF2aW9yLmdldEJlaGF2aW9yQnlOYW1lPWZ1bmN0aW9uKGIsYyl7dmFyIGE9YltjXTtyZXR1cm4gYSYmU3lzLlVJLkJlaGF2aW9yLmlzSW5zdGFuY2VPZlR5cGUoYSk/YTpudWxsfTtTeXMuVUkuQmVoYXZpb3IuZ2V0QmVoYXZpb3JzPWZ1bmN0aW9uKGEpe2lmKCFhLl9iZWhhdmlvcnMpcmV0dXJuIFtdO3JldHVybiBBcnJheS5jbG9uZShhLl9iZWhhdmlvcnMpfTtTeXMuVUkuQmVoYXZpb3IuZ2V0QmVoYXZpb3JzQnlUeXBlPWZ1bmN0aW9uKGQsZSl7dmFyIGE9ZC5fYmVoYXZpb3JzLGM9W107aWYoYSlmb3IodmFyIGI9MCxmPWEubGVuZ3RoO2I8ZjtiKyspaWYoZS5pc0luc3RhbmNlT2ZUeXBlKGFbYl0pKWNbYy5sZW5ndGhdPWFbYl07cmV0dXJuIGN9O1N5cy5VSS5WaXNpYmlsaXR5TW9kZT1mdW5jdGlvbigpe3Rocm93IEVycm9yLm5vdEltcGxlbWVudGVkKCl9O1N5cy5VSS5WaXNpYmlsaXR5TW9kZS5wcm90b3R5cGU9e2hpZGU6MCxjb2xsYXBzZToxfTtTeXMuVUkuVmlzaWJpbGl0eU1vZGUucmVnaXN0ZXJFbnVtKCJTeXMuVUkuVmlzaWJpbGl0eU1vZGUiKTtTeXMuVUkuQ29udHJvbD1mdW5jdGlvbihhKXtTeXMuVUkuQ29udHJvbC5pbml0aWFsaXplQmFzZSh0aGlzKTt0aGlzLl9lbGVtZW50PWE7YS5jb250cm9sPXRoaXM7dmFyIGI9dGhpcy5nZXRfcm9sZSgpO2lmKGIpYS5zZXRBdHRyaWJ1dGUoInJvbGUiLGIpfTtTeXMuVUkuQ29udHJvbC5wcm90b3R5cGU9e19wYXJlbnQ6bnVsbCxfdmlzaWJpbGl0eU1vZGU6U3lzLlVJLlZpc2liaWxpdHlNb2RlLmhpZGUsZ2V0X2VsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZWxlbWVudH0sZ2V0X2lkOmZ1bmN0aW9uKCl7aWYoIXRoaXMuX2VsZW1lbnQpcmV0dXJuICIiO3JldHVybiB0aGlzLl9lbGVtZW50LmlkfSxzZXRfaWQ6ZnVuY3Rpb24oKXt0aHJvdyBFcnJvci5pbnZhbGlkT3BlcmF0aW9uKFN5cy5SZXMuY2FudFNldElkKX0sZ2V0X3BhcmVudDpmdW5jdGlvbigpe2lmKHRoaXMuX3BhcmVudClyZXR1cm4gdGhpcy5fcGFyZW50O2lmKCF0aGlzLl9lbGVtZW50KXJldHVybiBudWxsO3ZhciBhPXRoaXMuX2VsZW1lbnQucGFyZW50Tm9kZTt3aGlsZShhKXtpZihhLmNvbnRyb2wpcmV0dXJuIGEuY29udHJvbDthPWEucGFyZW50Tm9kZX1yZXR1cm4gbnVsbH0sc2V0X3BhcmVudDpmdW5jdGlvbihhKXt0aGlzLl9wYXJlbnQ9YX0sZ2V0X3JvbGU6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sZ2V0X3Zpc2liaWxpdHlNb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIFN5cy5VSS5Eb21FbGVtZW50LmdldFZpc2liaWxpdHlNb2RlKHRoaXMuX2VsZW1lbnQpfSxzZXRfdmlzaWJpbGl0eU1vZGU6ZnVuY3Rpb24oYSl7U3lzLlVJLkRvbUVsZW1lbnQuc2V0VmlzaWJpbGl0eU1vZGUodGhpcy5fZWxlbWVudCxhKX0sZ2V0X3Zpc2libGU6ZnVuY3Rpb24oKXtyZXR1cm4gU3lzLlVJLkRvbUVsZW1lbnQuZ2V0VmlzaWJsZSh0aGlzLl9lbGVtZW50KX0sc2V0X3Zpc2libGU6ZnVuY3Rpb24oYSl7U3lzLlVJLkRvbUVsZW1lbnQuc2V0VmlzaWJsZSh0aGlzLl9lbGVtZW50LGEpfSxhZGRDc3NDbGFzczpmdW5jdGlvbihhKXtTeXMuVUkuRG9tRWxlbWVudC5hZGRDc3NDbGFzcyh0aGlzLl9lbGVtZW50LGEpfSxkaXNwb3NlOmZ1bmN0aW9uKCl7U3lzLlVJLkNvbnRyb2wuY2FsbEJhc2VNZXRob2QodGhpcywiZGlzcG9zZSIpO2lmKHRoaXMuX2VsZW1lbnQpe3RoaXMuX2VsZW1lbnQuY29udHJvbD1udWxsO2RlbGV0ZSB0aGlzLl9lbGVtZW50fWlmKHRoaXMuX3BhcmVudClkZWxldGUgdGhpcy5fcGFyZW50fSxvbkJ1YmJsZUV2ZW50OmZ1bmN0aW9uKCl7cmV0dXJuIGZhbHNlfSxyYWlzZUJ1YmJsZUV2ZW50OmZ1bmN0aW9uKGEsYil7dGhpcy5fcmFpc2VCdWJibGVFdmVudChhLGIpfSxfcmFpc2VCdWJibGVFdmVudDpmdW5jdGlvbihiLGMpe3ZhciBhPXRoaXMuZ2V0X3BhcmVudCgpO3doaWxlKGEpe2lmKGEub25CdWJibGVFdmVudChiLGMpKXJldHVybjthPWEuZ2V0X3BhcmVudCgpfX0scmVtb3ZlQ3NzQ2xhc3M6ZnVuY3Rpb24oYSl7U3lzLlVJLkRvbUVsZW1lbnQucmVtb3ZlQ3NzQ2xhc3ModGhpcy5fZWxlbWVudCxhKX0sdG9nZ2xlQ3NzQ2xhc3M6ZnVuY3Rpb24oYSl7U3lzLlVJLkRvbUVsZW1lbnQudG9nZ2xlQ3NzQ2xhc3ModGhpcy5fZWxlbWVudCxhKX19O1N5cy5VSS5Db250cm9sLnJlZ2lzdGVyQ2xhc3MoIlN5cy5VSS5Db250cm9sIixTeXMuQ29tcG9uZW50KTtTeXMuSGlzdG9yeUV2ZW50QXJncz1mdW5jdGlvbihhKXtTeXMuSGlzdG9yeUV2ZW50QXJncy5pbml0aWFsaXplQmFzZSh0aGlzKTt0aGlzLl9zdGF0ZT1hfTtTeXMuSGlzdG9yeUV2ZW50QXJncy5wcm90b3R5cGU9e2dldF9zdGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGF0ZX19O1N5cy5IaXN0b3J5RXZlbnRBcmdzLnJlZ2lzdGVyQ2xhc3MoIlN5cy5IaXN0b3J5RXZlbnRBcmdzIixTeXMuRXZlbnRBcmdzKTtTeXMuQXBwbGljYXRpb24uX2FwcExvYWRIYW5kbGVyPW51bGw7U3lzLkFwcGxpY2F0aW9uLl9iZWdpblJlcXVlc3RIYW5kbGVyPW51bGw7U3lzLkFwcGxpY2F0aW9uLl9jbGllbnRJZD1udWxsO1N5cy5BcHBsaWNhdGlvbi5fY3VycmVudEVudHJ5PSIiO1N5cy5BcHBsaWNhdGlvbi5fZW5kUmVxdWVzdEhhbmRsZXI9bnVsbDtTeXMuQXBwbGljYXRpb24uX2hpc3Rvcnk9bnVsbDtTeXMuQXBwbGljYXRpb24uX2VuYWJsZUhpc3Rvcnk9ZmFsc2U7U3lzLkFwcGxpY2F0aW9uLl9oaXN0b3J5RnJhbWU9bnVsbDtTeXMuQXBwbGljYXRpb24uX2hpc3RvcnlJbml0aWFsaXplZD1mYWxzZTtTeXMuQXBwbGljYXRpb24uX2hpc3RvcnlQb2ludElzTmV3PWZhbHNlO1N5cy5BcHBsaWNhdGlvbi5faWdub3JlVGltZXI9ZmFsc2U7U3lzLkFwcGxpY2F0aW9uLl9pbml0aWFsU3RhdGU9bnVsbDtTeXMuQXBwbGljYXRpb24uX3N0YXRlPXt9O1N5cy5BcHBsaWNhdGlvbi5fdGltZXJDb29raWU9MDtTeXMuQXBwbGljYXRpb24uX3RpbWVySGFuZGxlcj1udWxsO1N5cy5BcHBsaWNhdGlvbi5fdW5pcXVlSWQ9bnVsbDtTeXMuX0FwcGxpY2F0aW9uLnByb3RvdHlwZS5nZXRfc3RhdGVTdHJpbmc9ZnVuY3Rpb24oKXt2YXIgYT1udWxsO2lmKFN5cy5Ccm93c2VyLmFnZW50PT09U3lzLkJyb3dzZXIuRmlyZWZveCl7dmFyIGM9d2luZG93LmxvY2F0aW9uLmhyZWYsYj1jLmluZGV4T2YoIiMiKTtpZihiIT09LTEpYT1jLnN1YnN0cmluZyhiKzEpO2Vsc2UgYT0iIjtyZXR1cm4gYX1lbHNlIGE9d2luZG93LmxvY2F0aW9uLmhhc2g7aWYoYS5sZW5ndGg+MCYmYS5jaGFyQXQoMCk9PT0iIyIpYT1hLnN1YnN0cmluZygxKTtyZXR1cm4gYX07U3lzLl9BcHBsaWNhdGlvbi5wcm90b3R5cGUuZ2V0X2VuYWJsZUhpc3Rvcnk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5hYmxlSGlzdG9yeX07U3lzLl9BcHBsaWNhdGlvbi5wcm90b3R5cGUuc2V0X2VuYWJsZUhpc3Rvcnk9ZnVuY3Rpb24oYSl7dGhpcy5fZW5hYmxlSGlzdG9yeT1hfTtTeXMuX0FwcGxpY2F0aW9uLnByb3RvdHlwZS5hZGRfbmF2aWdhdGU9ZnVuY3Rpb24oYSl7dGhpcy5nZXRfZXZlbnRzKCkuYWRkSGFuZGxlcigibmF2aWdhdGUiLGEpfTtTeXMuX0FwcGxpY2F0aW9uLnByb3RvdHlwZS5yZW1vdmVfbmF2aWdhdGU9ZnVuY3Rpb24oYSl7dGhpcy5nZXRfZXZlbnRzKCkucmVtb3ZlSGFuZGxlcigibmF2aWdhdGUiLGEpfTtTeXMuX0FwcGxpY2F0aW9uLnByb3RvdHlwZS5hZGRIaXN0b3J5UG9pbnQ9ZnVuY3Rpb24oYyxmKXt0aGlzLl9lbnN1cmVIaXN0b3J5KCk7dmFyIGI9dGhpcy5fc3RhdGU7Zm9yKHZhciBhIGluIGMpe3ZhciBkPWNbYV07aWYoZD09PW51bGwpe2lmKHR5cGVvZiBiW2FdIT09InVuZGVmaW5lZCIpZGVsZXRlIGJbYV19ZWxzZSBiW2FdPWR9dmFyIGU9dGhpcy5fc2VyaWFsaXplU3RhdGUoYik7dGhpcy5faGlzdG9yeVBvaW50SXNOZXc9dHJ1ZTt0aGlzLl9zZXRTdGF0ZShlLGYpO3RoaXMuX3JhaXNlTmF2aWdhdGUoKX07U3lzLl9BcHBsaWNhdGlvbi5wcm90b3R5cGUuc2V0U2VydmVySWQ9ZnVuY3Rpb24oYSxiKXt0aGlzLl9jbGllbnRJZD1hO3RoaXMuX3VuaXF1ZUlkPWJ9O1N5cy5fQXBwbGljYXRpb24ucHJvdG90eXBlLnNldFNlcnZlclN0YXRlPWZ1bmN0aW9uKGEpe3RoaXMuX2Vuc3VyZUhpc3RvcnkoKTt0aGlzLl9zdGF0ZS5fX3M9YTt0aGlzLl91cGRhdGVIaWRkZW5GaWVsZChhKX07U3lzLl9BcHBsaWNhdGlvbi5wcm90b3R5cGUuX2Rlc2VyaWFsaXplU3RhdGU9ZnVuY3Rpb24oYSl7dmFyIGU9e307YT1hfHwiIjt2YXIgYj1hLmluZGV4T2YoIiYmIik7aWYoYiE9PS0xJiZiKzI8YS5sZW5ndGgpe2UuX19zPWEuc3Vic3RyKGIrMik7YT1hLnN1YnN0cigwLGIpfXZhciBnPWEuc3BsaXQoIiYiKTtmb3IodmFyIGY9MCxqPWcubGVuZ3RoO2Y8ajtmKyspe3ZhciBkPWdbZl0sYz1kLmluZGV4T2YoIj0iKTtpZihjIT09LTEmJmMrMTxkLmxlbmd0aCl7dmFyIGk9ZC5zdWJzdHIoMCxjKSxoPWQuc3Vic3RyKGMrMSk7ZVtpXT1kZWNvZGVVUklDb21wb25lbnQoaCl9fXJldHVybiBlfTtTeXMuX0FwcGxpY2F0aW9uLnByb3RvdHlwZS5fZW5hYmxlSGlzdG9yeUluU2NyaXB0TWFuYWdlcj1mdW5jdGlvbigpe3RoaXMuX2VuYWJsZUhpc3Rvcnk9dHJ1ZX07U3lzLl9BcHBsaWNhdGlvbi5wcm90b3R5cGUuX2Vuc3VyZUhpc3Rvcnk9ZnVuY3Rpb24oKXtpZighdGhpcy5faGlzdG9yeUluaXRpYWxpemVkJiZ0aGlzLl9lbmFibGVIaXN0b3J5KXtpZihTeXMuQnJvd3Nlci5hZ2VudD09PVN5cy5Ccm93c2VyLkludGVybmV0RXhwbG9yZXImJighZG9jdW1lbnQuZG9jdW1lbnRNb2RlfHxkb2N1bWVudC5kb2N1bWVudE1vZGU8OCkpe3RoaXMuX2hpc3RvcnlGcmFtZT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiX19oaXN0b3J5RnJhbWUiKTt0aGlzLl9pZ25vcmVJRnJhbWU9dHJ1ZX10aGlzLl90aW1lckhhbmRsZXI9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vbklkbGUpO3RoaXMuX3RpbWVyQ29va2llPXdpbmRvdy5zZXRUaW1lb3V0KHRoaXMuX3RpbWVySGFuZGxlciwxMDApO3RyeXt0aGlzLl9pbml0aWFsU3RhdGU9dGhpcy5fZGVzZXJpYWxpemVTdGF0ZSh0aGlzLmdldF9zdGF0ZVN0cmluZygpKX1jYXRjaChhKXt9dGhpcy5faGlzdG9yeUluaXRpYWxpemVkPXRydWV9fTtTeXMuX0FwcGxpY2F0aW9uLnByb3RvdHlwZS5fbmF2aWdhdGU9ZnVuY3Rpb24oYyl7dGhpcy5fZW5zdXJlSGlzdG9yeSgpO3ZhciBiPXRoaXMuX2Rlc2VyaWFsaXplU3RhdGUoYyk7aWYodGhpcy5fdW5pcXVlSWQpe3ZhciBkPXRoaXMuX3N0YXRlLl9fc3x8IiIsYT1iLl9fc3x8IiI7aWYoYSE9PWQpe3RoaXMuX3VwZGF0ZUhpZGRlbkZpZWxkKGEpO19fZG9Qb3N0QmFjayh0aGlzLl91bmlxdWVJZCxhKTt0aGlzLl9zdGF0ZT1iO3JldHVybn19dGhpcy5fc2V0U3RhdGUoYyk7dGhpcy5fc3RhdGU9Yjt0aGlzLl9yYWlzZU5hdmlnYXRlKCl9O1N5cy5fQXBwbGljYXRpb24ucHJvdG90eXBlLl9vbklkbGU9ZnVuY3Rpb24oKXtkZWxldGUgdGhpcy5fdGltZXJDb29raWU7dmFyIGE9dGhpcy5nZXRfc3RhdGVTdHJpbmcoKTtpZihhIT09dGhpcy5fY3VycmVudEVudHJ5KXtpZighdGhpcy5faWdub3JlVGltZXIpe3RoaXMuX2hpc3RvcnlQb2ludElzTmV3PWZhbHNlO3RoaXMuX25hdmlnYXRlKGEpfX1lbHNlIHRoaXMuX2lnbm9yZVRpbWVyPWZhbHNlO3RoaXMuX3RpbWVyQ29va2llPXdpbmRvdy5zZXRUaW1lb3V0KHRoaXMuX3RpbWVySGFuZGxlciwxMDApfTtTeXMuX0FwcGxpY2F0aW9uLnByb3RvdHlwZS5fb25JRnJhbWVMb2FkPWZ1bmN0aW9uKGEpe2lmKCFkb2N1bWVudC5kb2N1bWVudE1vZGV8fGRvY3VtZW50LmRvY3VtZW50TW9kZTw4KXt0aGlzLl9lbnN1cmVIaXN0b3J5KCk7aWYoIXRoaXMuX2lnbm9yZUlGcmFtZSl7dGhpcy5faGlzdG9yeVBvaW50SXNOZXc9ZmFsc2U7dGhpcy5fbmF2aWdhdGUoYSl9dGhpcy5faWdub3JlSUZyYW1lPWZhbHNlfX07U3lzLl9BcHBsaWNhdGlvbi5wcm90b3R5cGUuX29uUGFnZVJlcXVlc3RNYW5hZ2VyQmVnaW5SZXF1ZXN0PWZ1bmN0aW9uKCl7dGhpcy5faWdub3JlVGltZXI9dHJ1ZTt0aGlzLl9vcmlnaW5hbFRpdGxlPWRvY3VtZW50LnRpdGxlfTtTeXMuX0FwcGxpY2F0aW9uLnByb3RvdHlwZS5fb25QYWdlUmVxdWVzdE1hbmFnZXJFbmRSZXF1ZXN0PWZ1bmN0aW9uKGcsZil7dmFyIGQ9Zi5nZXRfZGF0YUl0ZW1zKClbdGhpcy5fY2xpZW50SWRdLGM9dGhpcy5fb3JpZ2luYWxUaXRsZTt0aGlzLl9vcmlnaW5hbFRpdGxlPW51bGw7dmFyIGI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIl9fRVZFTlRUQVJHRVQiKTtpZihiJiZiLnZhbHVlPT09dGhpcy5fdW5pcXVlSWQpYi52YWx1ZT0iIjtpZih0eXBlb2YgZCE9PSJ1bmRlZmluZWQiKXt0aGlzLnNldFNlcnZlclN0YXRlKGQpO3RoaXMuX2hpc3RvcnlQb2ludElzTmV3PXRydWV9ZWxzZSB0aGlzLl9pZ25vcmVUaW1lcj1mYWxzZTt2YXIgYT10aGlzLl9zZXJpYWxpemVTdGF0ZSh0aGlzLl9zdGF0ZSk7aWYoYSE9PXRoaXMuX2N1cnJlbnRFbnRyeSl7dGhpcy5faWdub3JlVGltZXI9dHJ1ZTtpZih0eXBlb2YgYz09PSJzdHJpbmciKXtpZihTeXMuQnJvd3Nlci5hZ2VudCE9PVN5cy5Ccm93c2VyLkludGVybmV0RXhwbG9yZXJ8fFN5cy5Ccm93c2VyLnZlcnNpb24+Nyl7dmFyIGU9ZG9jdW1lbnQudGl0bGU7ZG9jdW1lbnQudGl0bGU9Yzt0aGlzLl9zZXRTdGF0ZShhKTtkb2N1bWVudC50aXRsZT1lfWVsc2UgdGhpcy5fc2V0U3RhdGUoYSk7dGhpcy5fcmFpc2VOYXZpZ2F0ZSgpfWVsc2V7dGhpcy5fc2V0U3RhdGUoYSk7dGhpcy5fcmFpc2VOYXZpZ2F0ZSgpfX19O1N5cy5fQXBwbGljYXRpb24ucHJvdG90eXBlLl9yYWlzZU5hdmlnYXRlPWZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5faGlzdG9yeVBvaW50SXNOZXcsYz10aGlzLmdldF9ldmVudHMoKS5nZXRIYW5kbGVyKCJuYXZpZ2F0ZSIpLGI9e307Zm9yKHZhciBhIGluIHRoaXMuX3N0YXRlKWlmKGEhPT0iX19zIiliW2FdPXRoaXMuX3N0YXRlW2FdO3ZhciBlPW5ldyBTeXMuSGlzdG9yeUV2ZW50QXJncyhiKTtpZihjKWModGhpcyxlKTtpZighZCl7dmFyIGY7dHJ5e2lmKFN5cy5Ccm93c2VyLmFnZW50PT09U3lzLkJyb3dzZXIuRmlyZWZveCYmd2luZG93LmxvY2F0aW9uLmhhc2gmJighd2luZG93LmZyYW1lRWxlbWVudHx8d2luZG93LnRvcC5sb2NhdGlvbi5oYXNoKSlTeXMuQnJvd3Nlci52ZXJzaW9uPDMuNT93aW5kb3cuaGlzdG9yeS5nbygwKToobG9jYXRpb24uaGFzaD10aGlzLmdldF9zdGF0ZVN0cmluZygpKX1jYXRjaChnKXt9fX07U3lzLl9BcHBsaWNhdGlvbi5wcm90b3R5cGUuX3NlcmlhbGl6ZVN0YXRlPWZ1bmN0aW9uKGQpe3ZhciBiPVtdO2Zvcih2YXIgYSBpbiBkKXt2YXIgZT1kW2FdO2lmKGE9PT0iX19zIil2YXIgYz1lO2Vsc2UgYltiLmxlbmd0aF09YSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KGUpfXJldHVybiBiLmpvaW4oIiYiKSsoYz8iJiYiK2M6IiIpfTtTeXMuX0FwcGxpY2F0aW9uLnByb3RvdHlwZS5fc2V0U3RhdGU9ZnVuY3Rpb24oYSxiKXtpZih0aGlzLl9lbmFibGVIaXN0b3J5KXthPWF8fCIiO2lmKGEhPT10aGlzLl9jdXJyZW50RW50cnkpe2lmKHdpbmRvdy50aGVGb3JtKXt2YXIgZD13aW5kb3cudGhlRm9ybS5hY3Rpb24sZT1kLmluZGV4T2YoIiMiKTt3aW5kb3cudGhlRm9ybS5hY3Rpb249KGUhPT0tMT9kLnN1YnN0cmluZygwLGUpOmQpKyIjIithfWlmKHRoaXMuX2hpc3RvcnlGcmFtZSYmdGhpcy5faGlzdG9yeVBvaW50SXNOZXcpe3ZhciBmPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2YuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoYnx8ZG9jdW1lbnQudGl0bGUpKTt2YXIgZz1mLmlubmVySFRNTDt0aGlzLl9pZ25vcmVJRnJhbWU9dHJ1ZTt2YXIgYz10aGlzLl9oaXN0b3J5RnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudDtjLm9wZW4oImphdmFzY3JpcHQ6JzxodG1sPjwvaHRtbD4nIik7Yy53cml0ZSgiPGh0bWw+PGhlYWQ+PHRpdGxlPiIrZysiPC90aXRsZT48c2NyaSIrJ3B0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+cGFyZW50LlN5cy5BcHBsaWNhdGlvbi5fb25JRnJhbWVMb2FkKCcrU3lzLlNlcmlhbGl6YXRpb24uSmF2YVNjcmlwdFNlcmlhbGl6ZXIuc2VyaWFsaXplKGEpKyIpOzwvc2NyaSIrInB0PjwvaGVhZD48Ym9keT48L2JvZHk+PC9odG1sPiIpO2MuY2xvc2UoKX10aGlzLl9pZ25vcmVUaW1lcj1mYWxzZTt0aGlzLl9jdXJyZW50RW50cnk9YTtpZih0aGlzLl9oaXN0b3J5RnJhbWV8fHRoaXMuX2hpc3RvcnlQb2ludElzTmV3KXt2YXIgaD10aGlzLmdldF9zdGF0ZVN0cmluZygpO2lmKGEhPT1oKXt3aW5kb3cubG9jYXRpb24uaGFzaD1hO3RoaXMuX2N1cnJlbnRFbnRyeT10aGlzLmdldF9zdGF0ZVN0cmluZygpO2lmKHR5cGVvZiBiIT09InVuZGVmaW5lZCImJmIhPT1udWxsKWRvY3VtZW50LnRpdGxlPWJ9fXRoaXMuX2hpc3RvcnlQb2ludElzTmV3PWZhbHNlfX19O1N5cy5fQXBwbGljYXRpb24ucHJvdG90eXBlLl91cGRhdGVIaWRkZW5GaWVsZD1mdW5jdGlvbihiKXtpZih0aGlzLl9jbGllbnRJZCl7dmFyIGE9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5fY2xpZW50SWQpO2lmKGEpYS52YWx1ZT1ifX07aWYoIXdpbmRvdy5YTUxIdHRwUmVxdWVzdCl3aW5kb3cuWE1MSHR0cFJlcXVlc3Q9ZnVuY3Rpb24oKXt2YXIgYj1bIk1zeG1sMi5YTUxIVFRQLjMuMCIsIk1zeG1sMi5YTUxIVFRQIl07Zm9yKHZhciBhPTAsYz1iLmxlbmd0aDthPGM7YSsrKXRyeXtyZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoYlthXSl9Y2F0Y2goZCl7fXJldHVybiBudWxsfTtUeXBlLnJlZ2lzdGVyTmFtZXNwYWNlKCJTeXMuTmV0Iik7U3lzLk5ldC5XZWJSZXF1ZXN0RXhlY3V0b3I9ZnVuY3Rpb24oKXt0aGlzLl93ZWJSZXF1ZXN0PW51bGw7dGhpcy5fcmVzdWx0T2JqZWN0PW51bGx9O1N5cy5OZXQuV2ViUmVxdWVzdEV4ZWN1dG9yLnByb3RvdHlwZT17Z2V0X3dlYlJlcXVlc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fd2ViUmVxdWVzdH0sX3NldF93ZWJSZXF1ZXN0OmZ1bmN0aW9uKGEpe3RoaXMuX3dlYlJlcXVlc3Q9YX0sZ2V0X3N0YXJ0ZWQ6ZnVuY3Rpb24oKXt0aHJvdyBFcnJvci5ub3RJbXBsZW1lbnRlZCgpfSxnZXRfcmVzcG9uc2VBdmFpbGFibGU6ZnVuY3Rpb24oKXt0aHJvdyBFcnJvci5ub3RJbXBsZW1lbnRlZCgpfSxnZXRfdGltZWRPdXQ6ZnVuY3Rpb24oKXt0aHJvdyBFcnJvci5ub3RJbXBsZW1lbnRlZCgpfSxnZXRfYWJvcnRlZDpmdW5jdGlvbigpe3Rocm93IEVycm9yLm5vdEltcGxlbWVudGVkKCl9LGdldF9yZXNwb25zZURhdGE6ZnVuY3Rpb24oKXt0aHJvdyBFcnJvci5ub3RJbXBsZW1lbnRlZCgpfSxnZXRfc3RhdHVzQ29kZTpmdW5jdGlvbigpe3Rocm93IEVycm9yLm5vdEltcGxlbWVudGVkKCl9LGdldF9zdGF0dXNUZXh0OmZ1bmN0aW9uKCl7dGhyb3cgRXJyb3Iubm90SW1wbGVtZW50ZWQoKX0sZ2V0X3htbDpmdW5jdGlvbigpe3Rocm93IEVycm9yLm5vdEltcGxlbWVudGVkKCl9LGdldF9vYmplY3Q6ZnVuY3Rpb24oKXtpZighdGhpcy5fcmVzdWx0T2JqZWN0KXRoaXMuX3Jlc3VsdE9iamVjdD1TeXMuU2VyaWFsaXphdGlvbi5KYXZhU2NyaXB0U2VyaWFsaXplci5kZXNlcmlhbGl6ZSh0aGlzLmdldF9yZXNwb25zZURhdGEoKSk7cmV0dXJuIHRoaXMuX3Jlc3VsdE9iamVjdH0sZXhlY3V0ZVJlcXVlc3Q6ZnVuY3Rpb24oKXt0aHJvdyBFcnJvci5ub3RJbXBsZW1lbnRlZCgpfSxhYm9ydDpmdW5jdGlvbigpe3Rocm93IEVycm9yLm5vdEltcGxlbWVudGVkKCl9LGdldFJlc3BvbnNlSGVhZGVyOmZ1bmN0aW9uKCl7dGhyb3cgRXJyb3Iubm90SW1wbGVtZW50ZWQoKX0sZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOmZ1bmN0aW9uKCl7dGhyb3cgRXJyb3Iubm90SW1wbGVtZW50ZWQoKX19O1N5cy5OZXQuV2ViUmVxdWVzdEV4ZWN1dG9yLnJlZ2lzdGVyQ2xhc3MoIlN5cy5OZXQuV2ViUmVxdWVzdEV4ZWN1dG9yIik7U3lzLk5ldC5YTUxET009ZnVuY3Rpb24oZCl7aWYoIXdpbmRvdy5ET01QYXJzZXIpe3ZhciBjPVsiTXN4bWwyLkRPTURvY3VtZW50LjMuMCIsIk1zeG1sMi5ET01Eb2N1bWVudCJdO2Zvcih2YXIgYj0wLGY9Yy5sZW5ndGg7YjxmO2IrKyl0cnl7dmFyIGE9bmV3IEFjdGl2ZVhPYmplY3QoY1tiXSk7YS5hc3luYz1mYWxzZTthLmxvYWRYTUwoZCk7YS5zZXRQcm9wZXJ0eSgiU2VsZWN0aW9uTGFuZ3VhZ2UiLCJYUGF0aCIpO3JldHVybiBhfWNhdGNoKGcpe319ZWxzZSB0cnl7dmFyIGU9bmV3IHdpbmRvdy5ET01QYXJzZXI7cmV0dXJuIGUucGFyc2VGcm9tU3RyaW5nKGQsInRleHQveG1sIil9Y2F0Y2goZyl7fXJldHVybiBudWxsfTtTeXMuTmV0LlhNTEh0dHBFeGVjdXRvcj1mdW5jdGlvbigpe1N5cy5OZXQuWE1MSHR0cEV4ZWN1dG9yLmluaXRpYWxpemVCYXNlKHRoaXMpO3ZhciBhPXRoaXM7dGhpcy5feG1sSHR0cFJlcXVlc3Q9bnVsbDt0aGlzLl93ZWJSZXF1ZXN0PW51bGw7dGhpcy5fcmVzcG9uc2VBdmFpbGFibGU9ZmFsc2U7dGhpcy5fdGltZWRPdXQ9ZmFsc2U7dGhpcy5fdGltZXI9bnVsbDt0aGlzLl9hYm9ydGVkPWZhbHNlO3RoaXMuX3N0YXJ0ZWQ9ZmFsc2U7dGhpcy5fb25SZWFkeVN0YXRlQ2hhbmdlPWZ1bmN0aW9uKCl7aWYoYS5feG1sSHR0cFJlcXVlc3QucmVhZHlTdGF0ZT09PTQpe3RyeXtpZih0eXBlb2YgYS5feG1sSHR0cFJlcXVlc3Quc3RhdHVzPT09InVuZGVmaW5lZCJ8fGEuX3htbEh0dHBSZXF1ZXN0LnN0YXR1cz09PTApcmV0dXJufWNhdGNoKGIpe3JldHVybn1hLl9jbGVhclRpbWVyKCk7YS5fcmVzcG9uc2VBdmFpbGFibGU9dHJ1ZTt0cnl7YS5fd2ViUmVxdWVzdC5jb21wbGV0ZWQoU3lzLkV2ZW50QXJncy5FbXB0eSl9ZmluYWxseXtpZihhLl94bWxIdHRwUmVxdWVzdCE9bnVsbCl7YS5feG1sSHR0cFJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlPUZ1bmN0aW9uLmVtcHR5TWV0aG9kO2EuX3htbEh0dHBSZXF1ZXN0PW51bGx9fX19O3RoaXMuX2NsZWFyVGltZXI9ZnVuY3Rpb24oKXtpZihhLl90aW1lciE9bnVsbCl7d2luZG93LmNsZWFyVGltZW91dChhLl90aW1lcik7YS5fdGltZXI9bnVsbH19O3RoaXMuX29uVGltZW91dD1mdW5jdGlvbigpe2lmKCFhLl9yZXNwb25zZUF2YWlsYWJsZSl7YS5fY2xlYXJUaW1lcigpO2EuX3RpbWVkT3V0PXRydWU7YS5feG1sSHR0cFJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlPUZ1bmN0aW9uLmVtcHR5TWV0aG9kO2EuX3htbEh0dHBSZXF1ZXN0LmFib3J0KCk7YS5fd2ViUmVxdWVzdC5jb21wbGV0ZWQoU3lzLkV2ZW50QXJncy5FbXB0eSk7YS5feG1sSHR0cFJlcXVlc3Q9bnVsbH19fTtTeXMuTmV0LlhNTEh0dHBFeGVjdXRvci5wcm90b3R5cGU9e2dldF90aW1lZE91dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90aW1lZE91dH0sZ2V0X3N0YXJ0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhcnRlZH0sZ2V0X3Jlc3BvbnNlQXZhaWxhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Jlc3BvbnNlQXZhaWxhYmxlfSxnZXRfYWJvcnRlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hYm9ydGVkfSxleGVjdXRlUmVxdWVzdDpmdW5jdGlvbigpe3RoaXMuX3dlYlJlcXVlc3Q9dGhpcy5nZXRfd2ViUmVxdWVzdCgpO3ZhciBjPXRoaXMuX3dlYlJlcXVlc3QuZ2V0X2JvZHkoKSxhPXRoaXMuX3dlYlJlcXVlc3QuZ2V0X2hlYWRlcnMoKTt0aGlzLl94bWxIdHRwUmVxdWVzdD1uZXcgWE1MSHR0cFJlcXVlc3Q7dGhpcy5feG1sSHR0cFJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlPXRoaXMuX29uUmVhZHlTdGF0ZUNoYW5nZTt2YXIgZT10aGlzLl93ZWJSZXF1ZXN0LmdldF9odHRwVmVyYigpO3RoaXMuX3htbEh0dHBSZXF1ZXN0Lm9wZW4oZSx0aGlzLl93ZWJSZXF1ZXN0LmdldFJlc29sdmVkVXJsKCksdHJ1ZSk7dGhpcy5feG1sSHR0cFJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcigiWC1SZXF1ZXN0ZWQtV2l0aCIsIlhNTEh0dHBSZXF1ZXN0Iik7aWYoYSlmb3IodmFyIGIgaW4gYSl7dmFyIGY9YVtiXTtpZih0eXBlb2YgZiE9PSJmdW5jdGlvbiIpdGhpcy5feG1sSHR0cFJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcihiLGYpfWlmKGUudG9Mb3dlckNhc2UoKT09PSJwb3N0Iil7aWYoYT09PW51bGx8fCFhWyJDb250ZW50LVR5cGUiXSl0aGlzLl94bWxIdHRwUmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9dXRmLTgiKTtpZighYyljPSIifXZhciBkPXRoaXMuX3dlYlJlcXVlc3QuZ2V0X3RpbWVvdXQoKTtpZihkPjApdGhpcy5fdGltZXI9d2luZG93LnNldFRpbWVvdXQoRnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vblRpbWVvdXQpLGQpO3RoaXMuX3htbEh0dHBSZXF1ZXN0LnNlbmQoYyk7dGhpcy5fc3RhcnRlZD10cnVlfSxnZXRSZXNwb25zZUhlYWRlcjpmdW5jdGlvbihiKXt2YXIgYTt0cnl7YT10aGlzLl94bWxIdHRwUmVxdWVzdC5nZXRSZXNwb25zZUhlYWRlcihiKX1jYXRjaChjKXt9aWYoIWEpYT0iIjtyZXR1cm4gYX0sZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3htbEh0dHBSZXF1ZXN0LmdldEFsbFJlc3BvbnNlSGVhZGVycygpfSxnZXRfcmVzcG9uc2VEYXRhOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3htbEh0dHBSZXF1ZXN0LnJlc3BvbnNlVGV4dH0sZ2V0X3N0YXR1c0NvZGU6ZnVuY3Rpb24oKXt2YXIgYT0wO3RyeXthPXRoaXMuX3htbEh0dHBSZXF1ZXN0LnN0YXR1c31jYXRjaChiKXt9cmV0dXJuIGF9LGdldF9zdGF0dXNUZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3htbEh0dHBSZXF1ZXN0LnN0YXR1c1RleHR9LGdldF94bWw6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl94bWxIdHRwUmVxdWVzdC5yZXNwb25zZVhNTDtpZighYXx8IWEuZG9jdW1lbnRFbGVtZW50KXthPVN5cy5OZXQuWE1MRE9NKHRoaXMuX3htbEh0dHBSZXF1ZXN0LnJlc3BvbnNlVGV4dCk7aWYoIWF8fCFhLmRvY3VtZW50RWxlbWVudClyZXR1cm4gbnVsbH1lbHNlIGlmKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiTVNJRSIpIT09LTEmJnR5cGVvZiBhLnNldFByb3BlcnR5IT0idW5kZWZpbmVkIilhLnNldFByb3BlcnR5KCJTZWxlY3Rpb25MYW5ndWFnZSIsIlhQYXRoIik7aWYoYS5kb2N1bWVudEVsZW1lbnQubmFtZXNwYWNlVVJJPT09Imh0dHA6Ly93d3cubW96aWxsYS5vcmcvbmV3bGF5b3V0L3htbC9wYXJzZXJlcnJvci54bWwiJiZhLmRvY3VtZW50RWxlbWVudC50YWdOYW1lPT09InBhcnNlcmVycm9yIilyZXR1cm4gbnVsbDtpZihhLmRvY3VtZW50RWxlbWVudC5maXJzdENoaWxkJiZhLmRvY3VtZW50RWxlbWVudC5maXJzdENoaWxkLnRhZ05hbWU9PT0icGFyc2VyZXJyb3IiKXJldHVybiBudWxsO3JldHVybiBhfSxhYm9ydDpmdW5jdGlvbigpe2lmKHRoaXMuX2Fib3J0ZWR8fHRoaXMuX3Jlc3BvbnNlQXZhaWxhYmxlfHx0aGlzLl90aW1lZE91dClyZXR1cm47dGhpcy5fYWJvcnRlZD10cnVlO3RoaXMuX2NsZWFyVGltZXIoKTtpZih0aGlzLl94bWxIdHRwUmVxdWVzdCYmIXRoaXMuX3Jlc3BvbnNlQXZhaWxhYmxlKXt0aGlzLl94bWxIdHRwUmVxdWVzdC5vbnJlYWR5c3RhdGVjaGFuZ2U9RnVuY3Rpb24uZW1wdHlNZXRob2Q7dGhpcy5feG1sSHR0cFJlcXVlc3QuYWJvcnQoKTt0aGlzLl94bWxIdHRwUmVxdWVzdD1udWxsO3RoaXMuX3dlYlJlcXVlc3QuY29tcGxldGVkKFN5cy5FdmVudEFyZ3MuRW1wdHkpfX19O1N5cy5OZXQuWE1MSHR0cEV4ZWN1dG9yLnJlZ2lzdGVyQ2xhc3MoIlN5cy5OZXQuWE1MSHR0cEV4ZWN1dG9yIixTeXMuTmV0LldlYlJlcXVlc3RFeGVjdXRvcik7U3lzLk5ldC5fV2ViUmVxdWVzdE1hbmFnZXI9ZnVuY3Rpb24oKXt0aGlzLl9kZWZhdWx0VGltZW91dD0wO3RoaXMuX2RlZmF1bHRFeGVjdXRvclR5cGU9IlN5cy5OZXQuWE1MSHR0cEV4ZWN1dG9yIn07U3lzLk5ldC5fV2ViUmVxdWVzdE1hbmFnZXIucHJvdG90eXBlPXthZGRfaW52b2tpbmdSZXF1ZXN0OmZ1bmN0aW9uKGEpe3RoaXMuX2dldF9ldmVudEhhbmRsZXJMaXN0KCkuYWRkSGFuZGxlcigiaW52b2tpbmdSZXF1ZXN0IixhKX0scmVtb3ZlX2ludm9raW5nUmVxdWVzdDpmdW5jdGlvbihhKXt0aGlzLl9nZXRfZXZlbnRIYW5kbGVyTGlzdCgpLnJlbW92ZUhhbmRsZXIoImludm9raW5nUmVxdWVzdCIsYSl9LGFkZF9jb21wbGV0ZWRSZXF1ZXN0OmZ1bmN0aW9uKGEpe3RoaXMuX2dldF9ldmVudEhhbmRsZXJMaXN0KCkuYWRkSGFuZGxlcigiY29tcGxldGVkUmVxdWVzdCIsYSl9LHJlbW92ZV9jb21wbGV0ZWRSZXF1ZXN0OmZ1bmN0aW9uKGEpe3RoaXMuX2dldF9ldmVudEhhbmRsZXJMaXN0KCkucmVtb3ZlSGFuZGxlcigiY29tcGxldGVkUmVxdWVzdCIsYSl9LF9nZXRfZXZlbnRIYW5kbGVyTGlzdDpmdW5jdGlvbigpe2lmKCF0aGlzLl9ldmVudHMpdGhpcy5fZXZlbnRzPW5ldyBTeXMuRXZlbnRIYW5kbGVyTGlzdDtyZXR1cm4gdGhpcy5fZXZlbnRzfSxnZXRfZGVmYXVsdFRpbWVvdXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVmYXVsdFRpbWVvdXR9LHNldF9kZWZhdWx0VGltZW91dDpmdW5jdGlvbihhKXt0aGlzLl9kZWZhdWx0VGltZW91dD1hfSxnZXRfZGVmYXVsdEV4ZWN1dG9yVHlwZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZWZhdWx0RXhlY3V0b3JUeXBlfSxzZXRfZGVmYXVsdEV4ZWN1dG9yVHlwZTpmdW5jdGlvbihhKXt0aGlzLl9kZWZhdWx0RXhlY3V0b3JUeXBlPWF9LGV4ZWN1dGVSZXF1ZXN0OmZ1bmN0aW9uKHdlYlJlcXVlc3Qpe3ZhciBleGVjdXRvcj13ZWJSZXF1ZXN0LmdldF9leGVjdXRvcigpO2lmKCFleGVjdXRvcil7dmFyIGZhaWxlZD1mYWxzZTt0cnl7dmFyIGV4ZWN1dG9yVHlwZT1ldmFsKHRoaXMuX2RlZmF1bHRFeGVjdXRvclR5cGUpO2V4ZWN1dG9yPW5ldyBleGVjdXRvclR5cGV9Y2F0Y2goYSl7ZmFpbGVkPXRydWV9d2ViUmVxdWVzdC5zZXRfZXhlY3V0b3IoZXhlY3V0b3IpfWlmKGV4ZWN1dG9yLmdldF9hYm9ydGVkKCkpcmV0dXJuO3ZhciBldkFyZ3M9bmV3IFN5cy5OZXQuTmV0d29ya1JlcXVlc3RFdmVudEFyZ3Mod2ViUmVxdWVzdCksaGFuZGxlcj10aGlzLl9nZXRfZXZlbnRIYW5kbGVyTGlzdCgpLmdldEhhbmRsZXIoImludm9raW5nUmVxdWVzdCIpO2lmKGhhbmRsZXIpaGFuZGxlcih0aGlzLGV2QXJncyk7aWYoIWV2QXJncy5nZXRfY2FuY2VsKCkpZXhlY3V0b3IuZXhlY3V0ZVJlcXVlc3QoKX19O1N5cy5OZXQuX1dlYlJlcXVlc3RNYW5hZ2VyLnJlZ2lzdGVyQ2xhc3MoIlN5cy5OZXQuX1dlYlJlcXVlc3RNYW5hZ2VyIik7U3lzLk5ldC5XZWJSZXF1ZXN0TWFuYWdlcj1uZXcgU3lzLk5ldC5fV2ViUmVxdWVzdE1hbmFnZXI7U3lzLk5ldC5OZXR3b3JrUmVxdWVzdEV2ZW50QXJncz1mdW5jdGlvbihhKXtTeXMuTmV0Lk5ldHdvcmtSZXF1ZXN0RXZlbnRBcmdzLmluaXRpYWxpemVCYXNlKHRoaXMpO3RoaXMuX3dlYlJlcXVlc3Q9YX07U3lzLk5ldC5OZXR3b3JrUmVxdWVzdEV2ZW50QXJncy5wcm90b3R5cGU9e2dldF93ZWJSZXF1ZXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3dlYlJlcXVlc3R9fTtTeXMuTmV0Lk5ldHdvcmtSZXF1ZXN0RXZlbnRBcmdzLnJlZ2lzdGVyQ2xhc3MoIlN5cy5OZXQuTmV0d29ya1JlcXVlc3RFdmVudEFyZ3MiLFN5cy5DYW5jZWxFdmVudEFyZ3MpO1N5cy5OZXQuV2ViUmVxdWVzdD1mdW5jdGlvbigpe3RoaXMuX3VybD0iIjt0aGlzLl9oZWFkZXJzPXt9O3RoaXMuX2JvZHk9bnVsbDt0aGlzLl91c2VyQ29udGV4dD1udWxsO3RoaXMuX2h0dHBWZXJiPW51bGw7dGhpcy5fZXhlY3V0b3I9bnVsbDt0aGlzLl9pbnZva2VDYWxsZWQ9ZmFsc2U7dGhpcy5fdGltZW91dD0wfTtTeXMuTmV0LldlYlJlcXVlc3QucHJvdG90eXBlPXthZGRfY29tcGxldGVkOmZ1bmN0aW9uKGEpe3RoaXMuX2dldF9ldmVudEhhbmRsZXJMaXN0KCkuYWRkSGFuZGxlcigiY29tcGxldGVkIixhKX0scmVtb3ZlX2NvbXBsZXRlZDpmdW5jdGlvbihhKXt0aGlzLl9nZXRfZXZlbnRIYW5kbGVyTGlzdCgpLnJlbW92ZUhhbmRsZXIoImNvbXBsZXRlZCIsYSl9LGNvbXBsZXRlZDpmdW5jdGlvbihiKXt2YXIgYT1TeXMuTmV0LldlYlJlcXVlc3RNYW5hZ2VyLl9nZXRfZXZlbnRIYW5kbGVyTGlzdCgpLmdldEhhbmRsZXIoImNvbXBsZXRlZFJlcXVlc3QiKTtpZihhKWEodGhpcy5fZXhlY3V0b3IsYik7YT10aGlzLl9nZXRfZXZlbnRIYW5kbGVyTGlzdCgpLmdldEhhbmRsZXIoImNvbXBsZXRlZCIpO2lmKGEpYSh0aGlzLl9leGVjdXRvcixiKX0sX2dldF9ldmVudEhhbmRsZXJMaXN0OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX2V2ZW50cyl0aGlzLl9ldmVudHM9bmV3IFN5cy5FdmVudEhhbmRsZXJMaXN0O3JldHVybiB0aGlzLl9ldmVudHN9LGdldF91cmw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXJsfSxzZXRfdXJsOmZ1bmN0aW9uKGEpe3RoaXMuX3VybD1hfSxnZXRfaGVhZGVyczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9oZWFkZXJzfSxnZXRfaHR0cFZlcmI6ZnVuY3Rpb24oKXtpZih0aGlzLl9odHRwVmVyYj09PW51bGwpe2lmKHRoaXMuX2JvZHk9PT1udWxsKXJldHVybiAiR0VUIjtyZXR1cm4gIlBPU1QifXJldHVybiB0aGlzLl9odHRwVmVyYn0sc2V0X2h0dHBWZXJiOmZ1bmN0aW9uKGEpe3RoaXMuX2h0dHBWZXJiPWF9LGdldF9ib2R5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JvZHl9LHNldF9ib2R5OmZ1bmN0aW9uKGEpe3RoaXMuX2JvZHk9YX0sZ2V0X3VzZXJDb250ZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VzZXJDb250ZXh0fSxzZXRfdXNlckNvbnRleHQ6ZnVuY3Rpb24oYSl7dGhpcy5fdXNlckNvbnRleHQ9YX0sZ2V0X2V4ZWN1dG9yOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V4ZWN1dG9yfSxzZXRfZXhlY3V0b3I6ZnVuY3Rpb24oYSl7dGhpcy5fZXhlY3V0b3I9YTt0aGlzLl9leGVjdXRvci5fc2V0X3dlYlJlcXVlc3QodGhpcyl9LGdldF90aW1lb3V0OmZ1bmN0aW9uKCl7aWYodGhpcy5fdGltZW91dD09PTApcmV0dXJuIFN5cy5OZXQuV2ViUmVxdWVzdE1hbmFnZXIuZ2V0X2RlZmF1bHRUaW1lb3V0KCk7cmV0dXJuIHRoaXMuX3RpbWVvdXR9LHNldF90aW1lb3V0OmZ1bmN0aW9uKGEpe3RoaXMuX3RpbWVvdXQ9YX0sZ2V0UmVzb2x2ZWRVcmw6ZnVuY3Rpb24oKXtyZXR1cm4gU3lzLk5ldC5XZWJSZXF1ZXN0Ll9yZXNvbHZlVXJsKHRoaXMuX3VybCl9LGludm9rZTpmdW5jdGlvbigpe1N5cy5OZXQuV2ViUmVxdWVzdE1hbmFnZXIuZXhlY3V0ZVJlcXVlc3QodGhpcyk7dGhpcy5faW52b2tlQ2FsbGVkPXRydWV9fTtTeXMuTmV0LldlYlJlcXVlc3QuX3Jlc29sdmVVcmw9ZnVuY3Rpb24oYixhKXtpZihiJiZiLmluZGV4T2YoIjovLyIpIT09LTEpcmV0dXJuIGI7aWYoIWF8fGEubGVuZ3RoPT09MCl7dmFyIGQ9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImJhc2UiKVswXTtpZihkJiZkLmhyZWYmJmQuaHJlZi5sZW5ndGg+MClhPWQuaHJlZjtlbHNlIGE9ZG9jdW1lbnQuVVJMfXZhciBjPWEuaW5kZXhPZigiPyIpO2lmKGMhPT0tMSlhPWEuc3Vic3RyKDAsYyk7Yz1hLmluZGV4T2YoIiMiKTtpZihjIT09LTEpYT1hLnN1YnN0cigwLGMpO2E9YS5zdWJzdHIoMCxhLmxhc3RJbmRleE9mKCIvIikrMSk7aWYoIWJ8fGIubGVuZ3RoPT09MClyZXR1cm4gYTtpZihiLmNoYXJBdCgwKT09PSIvIil7dmFyIGU9YS5pbmRleE9mKCI6Ly8iKSxnPWEuaW5kZXhPZigiLyIsZSszKTtyZXR1cm4gYS5zdWJzdHIoMCxnKStifWVsc2V7dmFyIGY9YS5sYXN0SW5kZXhPZigiLyIpO3JldHVybiBhLnN1YnN0cigwLGYrMSkrYn19O1N5cy5OZXQuV2ViUmVxdWVzdC5fY3JlYXRlUXVlcnlTdHJpbmc9ZnVuY3Rpb24oYyxiLGYpe2I9Ynx8ZW5jb2RlVVJJQ29tcG9uZW50O3ZhciBoPTAsZSxnLGQsYT1uZXcgU3lzLlN0cmluZ0J1aWxkZXI7aWYoYylmb3IoZCBpbiBjKXtlPWNbZF07aWYodHlwZW9mIGU9PT0iZnVuY3Rpb24iKWNvbnRpbnVlO2c9U3lzLlNlcmlhbGl6YXRpb24uSmF2YVNjcmlwdFNlcmlhbGl6ZXIuc2VyaWFsaXplKGUpO2lmKGgrKylhLmFwcGVuZCgiJiIpO2EuYXBwZW5kKGQpO2EuYXBwZW5kKCI9Iik7YS5hcHBlbmQoYihnKSl9aWYoZil7aWYoaClhLmFwcGVuZCgiJiIpO2EuYXBwZW5kKGYpfXJldHVybiBhLnRvU3RyaW5nKCl9O1N5cy5OZXQuV2ViUmVxdWVzdC5fY3JlYXRlVXJsPWZ1bmN0aW9uKGEsYixjKXtpZighYiYmIWMpcmV0dXJuIGE7dmFyIGQ9U3lzLk5ldC5XZWJSZXF1ZXN0Ll9jcmVhdGVRdWVyeVN0cmluZyhiLG51bGwsYyk7cmV0dXJuIGQubGVuZ3RoP2ErKGEmJmEuaW5kZXhPZigiPyIpPj0wPyImIjoiPyIpK2Q6YX07U3lzLk5ldC5XZWJSZXF1ZXN0LnJlZ2lzdGVyQ2xhc3MoIlN5cy5OZXQuV2ViUmVxdWVzdCIpO1N5cy5fU2NyaXB0TG9hZGVyVGFzaz1mdW5jdGlvbihiLGEpe3RoaXMuX3NjcmlwdEVsZW1lbnQ9Yjt0aGlzLl9jb21wbGV0ZWRDYWxsYmFjaz1hfTtTeXMuX1NjcmlwdExvYWRlclRhc2sucHJvdG90eXBlPXtnZXRfc2NyaXB0RWxlbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zY3JpcHRFbGVtZW50fSxkaXNwb3NlOmZ1bmN0aW9uKCl7aWYodGhpcy5fZGlzcG9zZWQpcmV0dXJuO3RoaXMuX2Rpc3Bvc2VkPXRydWU7dGhpcy5fcmVtb3ZlU2NyaXB0RWxlbWVudEhhbmRsZXJzKCk7U3lzLl9TY3JpcHRMb2FkZXJUYXNrLl9jbGVhclNjcmlwdCh0aGlzLl9zY3JpcHRFbGVtZW50KTt0aGlzLl9zY3JpcHRFbGVtZW50PW51bGx9LGV4ZWN1dGU6ZnVuY3Rpb24oKXtpZih0aGlzLl9lbnN1cmVSZWFkeVN0YXRlTG9hZGVkKCkpdGhpcy5fZXhlY3V0ZUludGVybmFsKCl9LF9leGVjdXRlSW50ZXJuYWw6ZnVuY3Rpb24oKXt0aGlzLl9hZGRTY3JpcHRFbGVtZW50SGFuZGxlcnMoKTtkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdLmFwcGVuZENoaWxkKHRoaXMuX3NjcmlwdEVsZW1lbnQpfSxfZW5zdXJlUmVhZHlTdGF0ZUxvYWRlZDpmdW5jdGlvbigpe2lmKHRoaXMuX3VzZVJlYWR5U3RhdGUoKSYmdGhpcy5fc2NyaXB0RWxlbWVudC5yZWFkeVN0YXRlIT09ImxvYWRlZCImJnRoaXMuX3NjcmlwdEVsZW1lbnQucmVhZHlTdGF0ZSE9PSJjb21wbGV0ZSIpe3RoaXMuX3NjcmlwdERvd25sb2FkRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9leGVjdXRlSW50ZXJuYWwpOyRhZGRIYW5kbGVyKHRoaXMuX3NjcmlwdEVsZW1lbnQsInJlYWR5c3RhdGVjaGFuZ2UiLHRoaXMuX3NjcmlwdERvd25sb2FkRGVsZWdhdGUpO3JldHVybiBmYWxzZX1yZXR1cm4gdHJ1ZX0sX2FkZFNjcmlwdEVsZW1lbnRIYW5kbGVyczpmdW5jdGlvbigpe2lmKHRoaXMuX3NjcmlwdERvd25sb2FkRGVsZWdhdGUpeyRyZW1vdmVIYW5kbGVyKHRoaXMuX3NjcmlwdEVsZW1lbnQsInJlYWR5c3RhdGVjaGFuZ2UiLHRoaXMuX3NjcmlwdERvd25sb2FkRGVsZWdhdGUpO3RoaXMuX3NjcmlwdERvd25sb2FkRGVsZWdhdGU9bnVsbH10aGlzLl9zY3JpcHRMb2FkRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9zY3JpcHRMb2FkSGFuZGxlcik7aWYodGhpcy5fdXNlUmVhZHlTdGF0ZSgpKSRhZGRIYW5kbGVyKHRoaXMuX3NjcmlwdEVsZW1lbnQsInJlYWR5c3RhdGVjaGFuZ2UiLHRoaXMuX3NjcmlwdExvYWREZWxlZ2F0ZSk7ZWxzZSAkYWRkSGFuZGxlcih0aGlzLl9zY3JpcHRFbGVtZW50LCJsb2FkIix0aGlzLl9zY3JpcHRMb2FkRGVsZWdhdGUpO2lmKHRoaXMuX3NjcmlwdEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcil7dGhpcy5fc2NyaXB0RXJyb3JEZWxlZ2F0ZT1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX3NjcmlwdEVycm9ySGFuZGxlcik7dGhpcy5fc2NyaXB0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCJlcnJvciIsdGhpcy5fc2NyaXB0RXJyb3JEZWxlZ2F0ZSxmYWxzZSl9fSxfcmVtb3ZlU2NyaXB0RWxlbWVudEhhbmRsZXJzOmZ1bmN0aW9uKCl7aWYodGhpcy5fc2NyaXB0TG9hZERlbGVnYXRlKXt2YXIgYT10aGlzLmdldF9zY3JpcHRFbGVtZW50KCk7aWYodGhpcy5fc2NyaXB0RG93bmxvYWREZWxlZ2F0ZSl7JHJlbW92ZUhhbmRsZXIodGhpcy5fc2NyaXB0RWxlbWVudCwicmVhZHlzdGF0ZWNoYW5nZSIsdGhpcy5fc2NyaXB0RG93bmxvYWREZWxlZ2F0ZSk7dGhpcy5fc2NyaXB0RG93bmxvYWREZWxlZ2F0ZT1udWxsfWlmKHRoaXMuX3VzZVJlYWR5U3RhdGUoKSYmdGhpcy5fc2NyaXB0TG9hZERlbGVnYXRlKSRyZW1vdmVIYW5kbGVyKGEsInJlYWR5c3RhdGVjaGFuZ2UiLHRoaXMuX3NjcmlwdExvYWREZWxlZ2F0ZSk7ZWxzZSAkcmVtb3ZlSGFuZGxlcihhLCJsb2FkIix0aGlzLl9zY3JpcHRMb2FkRGVsZWdhdGUpO2lmKHRoaXMuX3NjcmlwdEVycm9yRGVsZWdhdGUpe3RoaXMuX3NjcmlwdEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigiZXJyb3IiLHRoaXMuX3NjcmlwdEVycm9yRGVsZWdhdGUsZmFsc2UpO3RoaXMuX3NjcmlwdEVycm9yRGVsZWdhdGU9bnVsbH10aGlzLl9zY3JpcHRMb2FkRGVsZWdhdGU9bnVsbH19LF9zY3JpcHRFcnJvckhhbmRsZXI6ZnVuY3Rpb24oKXtpZih0aGlzLl9kaXNwb3NlZClyZXR1cm47dGhpcy5fY29tcGxldGVkQ2FsbGJhY2sodGhpcy5nZXRfc2NyaXB0RWxlbWVudCgpLGZhbHNlKX0sX3NjcmlwdExvYWRIYW5kbGVyOmZ1bmN0aW9uKCl7aWYodGhpcy5fZGlzcG9zZWQpcmV0dXJuO3ZhciBhPXRoaXMuZ2V0X3NjcmlwdEVsZW1lbnQoKTtpZih0aGlzLl91c2VSZWFkeVN0YXRlKCkmJmEucmVhZHlTdGF0ZSE9PSJjb21wbGV0ZSIpcmV0dXJuO3RoaXMuX2NvbXBsZXRlZENhbGxiYWNrKGEsdHJ1ZSl9LF91c2VSZWFkeVN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIFN5cy5Ccm93c2VyLmFnZW50PT09U3lzLkJyb3dzZXIuSW50ZXJuZXRFeHBsb3JlciYmKFN5cy5Ccm93c2VyLnZlcnNpb248OXx8KGRvY3VtZW50LmRvY3VtZW50TW9kZXx8MCk8OSl9fTtTeXMuX1NjcmlwdExvYWRlclRhc2sucmVnaXN0ZXJDbGFzcygiU3lzLl9TY3JpcHRMb2FkZXJUYXNrIixudWxsLFN5cy5JRGlzcG9zYWJsZSk7U3lzLl9TY3JpcHRMb2FkZXJUYXNrLl9jbGVhclNjcmlwdD1mdW5jdGlvbihhKXtpZighU3lzLkRlYnVnLmlzRGVidWcmJmEucGFyZW50Tm9kZSlhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSl9O1R5cGUucmVnaXN0ZXJOYW1lc3BhY2UoIlN5cy5OZXQiKTtTeXMuTmV0LldlYlNlcnZpY2VQcm94eT1mdW5jdGlvbigpe307U3lzLk5ldC5XZWJTZXJ2aWNlUHJveHkucHJvdG90eXBlPXtnZXRfdGltZW91dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90aW1lb3V0fHwwfSxzZXRfdGltZW91dDpmdW5jdGlvbihhKXtpZihhPDApdGhyb3cgRXJyb3IuYXJndW1lbnRPdXRPZlJhbmdlKCJ2YWx1ZSIsYSxTeXMuUmVzLmludmFsaWRUaW1lb3V0KTt0aGlzLl90aW1lb3V0PWF9LGdldF9kZWZhdWx0VXNlckNvbnRleHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdHlwZW9mIHRoaXMuX3VzZXJDb250ZXh0PT09InVuZGVmaW5lZCI/bnVsbDp0aGlzLl91c2VyQ29udGV4dH0sc2V0X2RlZmF1bHRVc2VyQ29udGV4dDpmdW5jdGlvbihhKXt0aGlzLl91c2VyQ29udGV4dD1hfSxnZXRfZGVmYXVsdFN1Y2NlZWRlZENhbGxiYWNrOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N1Y2NlZWRlZHx8bnVsbH0sc2V0X2RlZmF1bHRTdWNjZWVkZWRDYWxsYmFjazpmdW5jdGlvbihhKXt0aGlzLl9zdWNjZWVkZWQ9YX0sZ2V0X2RlZmF1bHRGYWlsZWRDYWxsYmFjazpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9mYWlsZWR8fG51bGx9LHNldF9kZWZhdWx0RmFpbGVkQ2FsbGJhY2s6ZnVuY3Rpb24oYSl7dGhpcy5fZmFpbGVkPWF9LGdldF9lbmFibGVKc29ucDpmdW5jdGlvbigpe3JldHVybiAhIXRoaXMuX2pzb25wfSxzZXRfZW5hYmxlSnNvbnA6ZnVuY3Rpb24oYSl7dGhpcy5fanNvbnA9YX0sZ2V0X3BhdGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGF0aHx8bnVsbH0sc2V0X3BhdGg6ZnVuY3Rpb24oYSl7dGhpcy5fcGF0aD1hfSxnZXRfanNvbnBDYWxsYmFja1BhcmFtZXRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jYWxsYmFja1BhcmFtZXRlcnx8ImNhbGxiYWNrIn0sc2V0X2pzb25wQ2FsbGJhY2tQYXJhbWV0ZXI6ZnVuY3Rpb24oYSl7dGhpcy5fY2FsbGJhY2tQYXJhbWV0ZXI9YX0sX2ludm9rZTpmdW5jdGlvbihkLGUsZyxmLGMsYixhKXtjPWN8fHRoaXMuZ2V0X2RlZmF1bHRTdWNjZWVkZWRDYWxsYmFjaygpO2I9Ynx8dGhpcy5nZXRfZGVmYXVsdEZhaWxlZENhbGxiYWNrKCk7aWYoYT09PW51bGx8fHR5cGVvZiBhPT09InVuZGVmaW5lZCIpYT10aGlzLmdldF9kZWZhdWx0VXNlckNvbnRleHQoKTtyZXR1cm4gU3lzLk5ldC5XZWJTZXJ2aWNlUHJveHkuaW52b2tlKGQsZSxnLGYsYyxiLGEsdGhpcy5nZXRfdGltZW91dCgpLHRoaXMuZ2V0X2VuYWJsZUpzb25wKCksdGhpcy5nZXRfanNvbnBDYWxsYmFja1BhcmFtZXRlcigpKX19O1N5cy5OZXQuV2ViU2VydmljZVByb3h5LnJlZ2lzdGVyQ2xhc3MoIlN5cy5OZXQuV2ViU2VydmljZVByb3h5Iik7U3lzLk5ldC5XZWJTZXJ2aWNlUHJveHkuaW52b2tlPWZ1bmN0aW9uKHEsYSxtLGwsaixiLGcsZSx3LHApe3ZhciBpPXchPT1mYWxzZT9TeXMuTmV0LldlYlNlcnZpY2VQcm94eS5feGRvbWFpbi5leGVjKHEpOm51bGwsYyxuPWkmJmkubGVuZ3RoPT09MyYmKGlbMV0hPT1sb2NhdGlvbi5wcm90b2NvbHx8aVsyXSE9PWxvY2F0aW9uLmhvc3QpO209bnx8bTtpZihuKXtwPXB8fCJjYWxsYmFjayI7Yz0iX2pzb25wIitTeXMuX2pzb25wKyt9aWYoIWwpbD17fTt2YXIgcj1sO2lmKCFtfHwhcilyPXt9O3ZhciBzLGgsZj1udWxsLGssbz1udWxsLHU9U3lzLk5ldC5XZWJSZXF1ZXN0Ll9jcmVhdGVVcmwoYT9xKyIvIitlbmNvZGVVUklDb21wb25lbnQoYSk6cSxyLG4/cCsiPVN5cy4iK2M6bnVsbCk7aWYobil7cz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTtzLnNyYz11O2s9bmV3IFN5cy5fU2NyaXB0TG9hZGVyVGFzayhzLGZ1bmN0aW9uKGQsYil7aWYoIWJ8fGMpdCh7TWVzc2FnZTpTdHJpbmcuZm9ybWF0KFN5cy5SZXMud2ViU2VydmljZUZhaWxlZE5vTXNnLGEpfSwtMSl9KTtmdW5jdGlvbiB2KCl7aWYoZj09PW51bGwpcmV0dXJuO2Y9bnVsbDtoPW5ldyBTeXMuTmV0LldlYlNlcnZpY2VFcnJvcih0cnVlLFN0cmluZy5mb3JtYXQoU3lzLlJlcy53ZWJTZXJ2aWNlVGltZWRPdXQsYSkpO2suZGlzcG9zZSgpO2RlbGV0ZSBTeXNbY107aWYoYiliKGgsZyxhKX1mdW5jdGlvbiB0KGQsZSl7aWYoZiE9PW51bGwpe3dpbmRvdy5jbGVhclRpbWVvdXQoZik7Zj1udWxsfWsuZGlzcG9zZSgpO2RlbGV0ZSBTeXNbY107Yz1udWxsO2lmKHR5cGVvZiBlIT09InVuZGVmaW5lZCImJmUhPT0yMDApe2lmKGIpe2g9bmV3IFN5cy5OZXQuV2ViU2VydmljZUVycm9yKGZhbHNlLGQuTWVzc2FnZXx8U3RyaW5nLmZvcm1hdChTeXMuUmVzLndlYlNlcnZpY2VGYWlsZWROb01zZyxhKSxkLlN0YWNrVHJhY2V8fG51bGwsZC5FeGNlcHRpb25UeXBlfHxudWxsLGQpO2guX3N0YXR1c0NvZGU9ZTtiKGgsZyxhKX19ZWxzZSBpZihqKWooZCxnLGEpfVN5c1tjXT10O2U9ZXx8U3lzLk5ldC5XZWJSZXF1ZXN0TWFuYWdlci5nZXRfZGVmYXVsdFRpbWVvdXQoKTtpZihlPjApZj13aW5kb3cuc2V0VGltZW91dCh2LGUpO2suZXhlY3V0ZSgpO3JldHVybiBudWxsfXZhciBkPW5ldyBTeXMuTmV0LldlYlJlcXVlc3Q7ZC5zZXRfdXJsKHUpO2QuZ2V0X2hlYWRlcnMoKVsiQ29udGVudC1UeXBlIl09ImFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgiO2lmKCFtKXtvPVN5cy5TZXJpYWxpemF0aW9uLkphdmFTY3JpcHRTZXJpYWxpemVyLnNlcmlhbGl6ZShsKTtpZihvPT09Int9IilvPSIifWQuc2V0X2JvZHkobyk7ZC5hZGRfY29tcGxldGVkKHgpO2lmKGUmJmU+MClkLnNldF90aW1lb3V0KGUpO2QuaW52b2tlKCk7ZnVuY3Rpb24geChkKXtpZihkLmdldF9yZXNwb25zZUF2YWlsYWJsZSgpKXt2YXIgZj1kLmdldF9zdGF0dXNDb2RlKCksYz1udWxsO3RyeXt2YXIgZT1kLmdldFJlc3BvbnNlSGVhZGVyKCJDb250ZW50LVR5cGUiKTtpZihlLnN0YXJ0c1dpdGgoImFwcGxpY2F0aW9uL2pzb24iKSljPWQuZ2V0X29iamVjdCgpO2Vsc2UgaWYoZS5zdGFydHNXaXRoKCJ0ZXh0L3htbCIpKWM9ZC5nZXRfeG1sKCk7ZWxzZSBjPWQuZ2V0X3Jlc3BvbnNlRGF0YSgpfWNhdGNoKG0pe312YXIgaz1kLmdldFJlc3BvbnNlSGVhZGVyKCJqc29uZXJyb3IiKSxoPWs9PT0idHJ1ZSI7aWYoaCl7aWYoYyljPW5ldyBTeXMuTmV0LldlYlNlcnZpY2VFcnJvcihmYWxzZSxjLk1lc3NhZ2UsYy5TdGFja1RyYWNlLGMuRXhjZXB0aW9uVHlwZSxjKX1lbHNlIGlmKGUuc3RhcnRzV2l0aCgiYXBwbGljYXRpb24vanNvbiIpKWM9IWN8fHR5cGVvZiBjLmQ9PT0idW5kZWZpbmVkIj9jOmMuZDtpZihmPDIwMHx8Zj49MzAwfHxoKXtpZihiKXtpZighY3x8IWgpYz1uZXcgU3lzLk5ldC5XZWJTZXJ2aWNlRXJyb3IoZmFsc2UsU3RyaW5nLmZvcm1hdChTeXMuUmVzLndlYlNlcnZpY2VGYWlsZWROb01zZyxhKSk7Yy5fc3RhdHVzQ29kZT1mO2IoYyxnLGEpfX1lbHNlIGlmKGopaihjLGcsYSl9ZWxzZXt2YXIgaTtpZihkLmdldF90aW1lZE91dCgpKWk9U3RyaW5nLmZvcm1hdChTeXMuUmVzLndlYlNlcnZpY2VUaW1lZE91dCxhKTtlbHNlIGk9U3RyaW5nLmZvcm1hdChTeXMuUmVzLndlYlNlcnZpY2VGYWlsZWROb01zZyxhKTtpZihiKWIobmV3IFN5cy5OZXQuV2ViU2VydmljZUVycm9yKGQuZ2V0X3RpbWVkT3V0KCksaSwiIiwiIiksZyxhKX19cmV0dXJuIGR9O1N5cy5OZXQuV2ViU2VydmljZVByb3h5Ll9nZW5lcmF0ZVR5cGVkQ29uc3RydWN0b3I9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe2lmKGIpZm9yKHZhciBjIGluIGIpdGhpc1tjXT1iW2NdO3RoaXMuX190eXBlPWF9fTtTeXMuX2pzb25wPTA7U3lzLk5ldC5XZWJTZXJ2aWNlUHJveHkuX3hkb21haW49L15ccyooW2EtekEtWjAtOVwrXC1cLl0rXDopXC9cLyhbXj8jXC9dKykvO1N5cy5OZXQuV2ViU2VydmljZUVycm9yPWZ1bmN0aW9uKGQsZSxjLGEsYil7dGhpcy5fdGltZWRPdXQ9ZDt0aGlzLl9tZXNzYWdlPWU7dGhpcy5fc3RhY2tUcmFjZT1jO3RoaXMuX2V4Y2VwdGlvblR5cGU9YTt0aGlzLl9lcnJvck9iamVjdD1iO3RoaXMuX3N0YXR1c0NvZGU9LTF9O1N5cy5OZXQuV2ViU2VydmljZUVycm9yLnByb3RvdHlwZT17Z2V0X3RpbWVkT3V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RpbWVkT3V0fSxnZXRfc3RhdHVzQ29kZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGF0dXNDb2RlfSxnZXRfbWVzc2FnZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tZXNzYWdlfSxnZXRfc3RhY2tUcmFjZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGFja1RyYWNlfHwiIn0sZ2V0X2V4Y2VwdGlvblR5cGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXhjZXB0aW9uVHlwZXx8IiJ9LGdldF9lcnJvck9iamVjdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lcnJvck9iamVjdHx8bnVsbH19O1N5cy5OZXQuV2ViU2VydmljZUVycm9yLnJlZ2lzdGVyQ2xhc3MoIlN5cy5OZXQuV2ViU2VydmljZUVycm9yIik7DQpUeXBlLnJlZ2lzdGVyTmFtZXNwYWNlKCdTeXMnKTtTeXMuUmVzPXsNCiJhcmd1bWVudEludGVnZXIiOiJWYWx1ZSBtdXN0IGJlIGFuIGludGVnZXIuIiwiaW52b2tlQ2FsbGVkVHdpY2UiOiJDYW5ub3QgY2FsbCBpbnZva2UgbW9yZSB0aGFuIG9uY2UuIiwid2ViU2VydmljZUZhaWxlZCI6IlRoZSBzZXJ2ZXIgbWV0aG9kIFx1MDAyN3swfVx1MDAyNyBmYWlsZWQgd2l0aCB0aGUgZm9sbG93aW5nIGVycm9yOiB7MX0iLCJhcmd1bWVudFR5cGUiOiJPYmplY3QgY2Fubm90IGJlIGNvbnZlcnRlZCB0byB0aGUgcmVxdWlyZWQgdHlwZS4iLCJhcmd1bWVudE51bGwiOiJWYWx1ZSBjYW5ub3QgYmUgbnVsbC4iLCJzY3JpcHRBbHJlYWR5TG9hZGVkIjoiVGhlIHNjcmlwdCBcdTAwMjd7MH1cdTAwMjcgaGFzIGJlZW4gcmVmZXJlbmNlZCBtdWx0aXBsZSB0aW1lcy4gSWYgcmVmZXJlbmNpbmcgTWljcm9zb2Z0IEFKQVggc2NyaXB0cyBleHBsaWNpdGx5LCBzZXQgdGhlIE1pY3Jvc29mdEFqYXhNb2RlIHByb3BlcnR5IG9mIHRoZSBTY3JpcHRNYW5hZ2VyIHRvIEV4cGxpY2l0LiIsInNjcmlwdERlcGVuZGVuY3lOb3RGb3VuZCI6IlRoZSBzY3JpcHQgXHUwMDI3ezB9XHUwMDI3IGZhaWxlZCB0byBsb2FkIGJlY2F1c2UgaXQgaXMgZGVwZW5kZW50IG9uIHNjcmlwdCBcdTAwMjd7MX1cdTAwMjcuIiwiZm9ybWF0QmFkRm9ybWF0U3BlY2lmaWVyIjoiRm9ybWF0IHNwZWNpZmllciB3YXMgaW52YWxpZC4iLCJyZXF1aXJlZFNjcmlwdFJlZmVyZW5jZU5vdEluY2x1ZGVkIjoiXHUwMDI3ezB9XHUwMDI3IHJlcXVpcmVzIHRoYXQgeW91IGhhdmUgaW5jbHVkZWQgYSBzY3JpcHQgcmVmZXJlbmNlIHRvIFx1MDAyN3sxfVx1MDAyNy4iLCJ3ZWJTZXJ2aWNlRmFpbGVkTm9Nc2ciOiJUaGUgc2VydmVyIG1ldGhvZCBcdTAwMjd7MH1cdTAwMjcgZmFpbGVkLiIsImFyZ3VtZW50RG9tRWxlbWVudCI6IlZhbHVlIG11c3QgYmUgYSBET00gZWxlbWVudC4iLCJpbnZhbGlkRXhlY3V0b3JUeXBlIjoiQ291bGQgbm90IGNyZWF0ZSBhIHZhbGlkIFN5cy5OZXQuV2ViUmVxdWVzdEV4ZWN1dG9yIGZyb206IHswfS4iLCJjYW5ub3RDYWxsQmVmb3JlUmVzcG9uc2UiOiJDYW5ub3QgY2FsbCB7MH0gd2hlbiByZXNwb25zZUF2YWlsYWJsZSBpcyBmYWxzZS4iLCJhY3R1YWxWYWx1ZSI6IkFjdHVhbCB2YWx1ZSB3YXMgezB9LiIsImVudW1JbnZhbGlkVmFsdWUiOiJcdTAwMjd7MH1cdTAwMjcgaXMgbm90IGEgdmFsaWQgdmFsdWUgZm9yIGVudW0gezF9LiIsInNjcmlwdExvYWRGYWlsZWQiOiJUaGUgc2NyaXB0IFx1MDAyN3swfVx1MDAyNyBjb3VsZCBub3QgYmUgbG9hZGVkLiIsInBhcmFtZXRlckNvdW50IjoiUGFyYW1ldGVyIGNvdW50IG1pc21hdGNoLiIsImNhbm5vdERlc2VyaWFsaXplRW1wdHlTdHJpbmciOiJDYW5ub3QgZGVzZXJpYWxpemUgZW1wdHkgc3RyaW5nLiIsImZvcm1hdEludmFsaWRTdHJpbmciOiJJbnB1dCBzdHJpbmcgd2FzIG5vdCBpbiBhIGNvcnJlY3QgZm9ybWF0LiIsImludmFsaWRUaW1lb3V0IjoiVmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gemVyby4iLCJjYW5ub3RBYm9ydEJlZm9yZVN0YXJ0IjoiQ2Fubm90IGFib3J0IHdoZW4gZXhlY3V0b3IgaGFzIG5vdCBzdGFydGVkLiIsImFyZ3VtZW50IjoiVmFsdWUgZG9lcyBub3QgZmFsbCB3aXRoaW4gdGhlIGV4cGVjdGVkIHJhbmdlLiIsImNhbm5vdERlc2VyaWFsaXplSW52YWxpZEpzb24iOiJDYW5ub3QgZGVzZXJpYWxpemUuIFRoZSBkYXRhIGRvZXMgbm90IGNvcnJlc3BvbmQgdG8gdmFsaWQgSlNPTi4iLCJpbnZhbGlkSHR0cFZlcmIiOiJodHRwVmVyYiBjYW5ub3QgYmUgc2V0IHRvIGFuIGVtcHR5IG9yIG51bGwgc3RyaW5nLiIsIm51bGxXZWJSZXF1ZXN0IjoiQ2Fubm90IGNhbGwgZXhlY3V0ZVJlcXVlc3Qgd2l0aCBhIG51bGwgd2ViUmVxdWVzdC4iLCJldmVudEhhbmRsZXJJbnZhbGlkIjoiSGFuZGxlciB3YXMgbm90IGFkZGVkIHRocm91Z2ggdGhlIFN5cy5VSS5Eb21FdmVudC5hZGRIYW5kbGVyIG1ldGhvZC4iLCJjYW5ub3RTZXJpYWxpemVOb25GaW5pdGVOdW1iZXJzIjoiQ2Fubm90IHNlcmlhbGl6ZSBub24gZmluaXRlIG51bWJlcnMuIiwiYXJndW1lbnRVbmRlZmluZWQiOiJWYWx1ZSBjYW5ub3QgYmUgdW5kZWZpbmVkLiIsIndlYlNlcnZpY2VJbnZhbGlkUmV0dXJuVHlwZSI6IlRoZSBzZXJ2ZXIgbWV0aG9kIFx1MDAyN3swfVx1MDAyNyByZXR1cm5lZCBhbiBpbnZhbGlkIHR5cGUuIEV4cGVjdGVkIHR5cGU6IHsxfSIsInNlcnZpY2VQYXRoTm90U2V0IjoiVGhlIHBhdGggdG8gdGhlIHdlYiBzZXJ2aWNlIGhhcyBub3QgYmVlbiBzZXQuIiwiYXJndW1lbnRUeXBlV2l0aFR5cGVzIjoiT2JqZWN0IG9mIHR5cGUgXHUwMDI3ezB9XHUwMDI3IGNhbm5vdCBiZSBjb252ZXJ0ZWQgdG8gdHlwZSBcdTAwMjd7MX1cdTAwMjcuIiwiY2Fubm90Q2FsbE9uY2VTdGFydGVkIjoiQ2Fubm90IGNhbGwgezB9IG9uY2Ugc3RhcnRlZC4iLCJiYWRCYXNlVXJsMSI6IkJhc2UgVVJMIGRvZXMgbm90IGNvbnRhaW4gOi8vLiIsImJhZEJhc2VVcmwyIjoiQmFzZSBVUkwgZG9lcyBub3QgY29udGFpbiBhbm90aGVyIC8uIiwiYmFkQmFzZVVybDMiOiJDYW5ub3QgZmluZCBsYXN0IC8gaW4gYmFzZSBVUkwuIiwic2V0RXhlY3V0b3JBZnRlckFjdGl2ZSI6IkNhbm5vdCBzZXQgZXhlY3V0b3IgYWZ0ZXIgaXQgaGFzIGJlY29tZSBhY3RpdmUuIiwicGFyYW1OYW1lIjoiUGFyYW1ldGVyIG5hbWU6IHswfSIsIm51bGxSZWZlcmVuY2VJblBhdGgiOiJOdWxsIHJlZmVyZW5jZSB3aGlsZSBldmFsdWF0aW5nIGRhdGEgcGF0aDogXHUwMDI3ezB9XHUwMDI3LiIsImNhbm5vdENhbGxPdXRzaWRlSGFuZGxlciI6IkNhbm5vdCBjYWxsIHswfSBvdXRzaWRlIG9mIGEgY29tcGxldGVkIGV2ZW50IGhhbmRsZXIuIiwiY2Fubm90U2VyaWFsaXplT2JqZWN0V2l0aEN5Y2xlIjoiQ2Fubm90IHNlcmlhbGl6ZSBvYmplY3Qgd2l0aCBjeWNsaWMgcmVmZXJlbmNlIHdpdGhpbiBjaGlsZCBwcm9wZXJ0aWVzLiIsImZvcm1hdCI6Ik9uZSBvZiB0aGUgaWRlbnRpZmllZCBpdGVtcyB3YXMgaW4gYW4gaW52YWxpZCBmb3JtYXQuIiwiYXNzZXJ0RmFpbGVkQ2FsbGVyIjoiQXNzZXJ0aW9uIEZhaWxlZDogezB9XHJcbmF0IHsxfSIsImFyZ3VtZW50T3V0T2ZSYW5nZSI6IlNwZWNpZmllZCBhcmd1bWVudCB3YXMgb3V0IG9mIHRoZSByYW5nZSBvZiB2YWxpZCB2YWx1ZXMuIiwid2ViU2VydmljZVRpbWVkT3V0IjoiVGhlIHNlcnZlciBtZXRob2QgXHUwMDI3ezB9XHUwMDI3IHRpbWVkIG91dC4iLCJub3RJbXBsZW1lbnRlZCI6IlRoZSBtZXRob2Qgb3Igb3BlcmF0aW9uIGlzIG5vdCBpbXBsZW1lbnRlZC4iLCJhc3NlcnRGYWlsZWQiOiJBc3NlcnRpb24gRmFpbGVkOiB7MH0iLCJpbnZhbGlkT3BlcmF0aW9uIjoiT3BlcmF0aW9uIGlzIG5vdCB2YWxpZCBkdWUgdG8gdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIG9iamVjdC4iLCJicmVha0ludG9EZWJ1Z2dlciI6InswfVxyXG5cclxuQnJlYWsgaW50byBkZWJ1Z2dlcj8ifTsNCi8qIEVORCBNaWNyb3NvZnRBamF4LmpzICovDQovKiBTVEFSVCBNaWNyb3NvZnRBamF4V2ViRm9ybXMuanMgKi8NCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLy8gQ29weXJpZ2h0IChDKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi8vIE1pY3Jvc29mdEFqYXhXZWJGb3Jtcy5qcw0KVHlwZS5fcmVnaXN0ZXJTY3JpcHQoIk1pY3Jvc29mdEFqYXhXZWJGb3Jtcy5qcyIsWyJNaWNyb3NvZnRBamF4Q29yZS5qcyIsIk1pY3Jvc29mdEFqYXhTZXJpYWxpemF0aW9uLmpzIiwiTWljcm9zb2Z0QWpheE5ldHdvcmsuanMiLCJNaWNyb3NvZnRBamF4Q29tcG9uZW50TW9kZWwuanMiXSk7VHlwZS5yZWdpc3Rlck5hbWVzcGFjZSgiU3lzLldlYkZvcm1zIik7U3lzLldlYkZvcm1zLkJlZ2luUmVxdWVzdEV2ZW50QXJncz1mdW5jdGlvbihjLGIsYSl7U3lzLldlYkZvcm1zLkJlZ2luUmVxdWVzdEV2ZW50QXJncy5pbml0aWFsaXplQmFzZSh0aGlzKTt0aGlzLl9yZXF1ZXN0PWM7dGhpcy5fcG9zdEJhY2tFbGVtZW50PWI7dGhpcy5fdXBkYXRlUGFuZWxzVG9VcGRhdGU9YX07U3lzLldlYkZvcm1zLkJlZ2luUmVxdWVzdEV2ZW50QXJncy5wcm90b3R5cGU9e2dldF9wb3N0QmFja0VsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcG9zdEJhY2tFbGVtZW50fSxnZXRfcmVxdWVzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZXF1ZXN0fSxnZXRfdXBkYXRlUGFuZWxzVG9VcGRhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXBkYXRlUGFuZWxzVG9VcGRhdGU/QXJyYXkuY2xvbmUodGhpcy5fdXBkYXRlUGFuZWxzVG9VcGRhdGUpOltdfX07U3lzLldlYkZvcm1zLkJlZ2luUmVxdWVzdEV2ZW50QXJncy5yZWdpc3RlckNsYXNzKCJTeXMuV2ViRm9ybXMuQmVnaW5SZXF1ZXN0RXZlbnRBcmdzIixTeXMuRXZlbnRBcmdzKTtTeXMuV2ViRm9ybXMuRW5kUmVxdWVzdEV2ZW50QXJncz1mdW5jdGlvbihjLGEsYil7U3lzLldlYkZvcm1zLkVuZFJlcXVlc3RFdmVudEFyZ3MuaW5pdGlhbGl6ZUJhc2UodGhpcyk7dGhpcy5fZXJyb3JIYW5kbGVkPWZhbHNlO3RoaXMuX2Vycm9yPWM7dGhpcy5fZGF0YUl0ZW1zPWF8fHt9O3RoaXMuX3Jlc3BvbnNlPWJ9O1N5cy5XZWJGb3Jtcy5FbmRSZXF1ZXN0RXZlbnRBcmdzLnByb3RvdHlwZT17Z2V0X2RhdGFJdGVtczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kYXRhSXRlbXN9LGdldF9lcnJvcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lcnJvcn0sZ2V0X2Vycm9ySGFuZGxlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lcnJvckhhbmRsZWR9LHNldF9lcnJvckhhbmRsZWQ6ZnVuY3Rpb24oYSl7dGhpcy5fZXJyb3JIYW5kbGVkPWF9LGdldF9yZXNwb25zZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZXNwb25zZX19O1N5cy5XZWJGb3Jtcy5FbmRSZXF1ZXN0RXZlbnRBcmdzLnJlZ2lzdGVyQ2xhc3MoIlN5cy5XZWJGb3Jtcy5FbmRSZXF1ZXN0RXZlbnRBcmdzIixTeXMuRXZlbnRBcmdzKTtTeXMuV2ViRm9ybXMuSW5pdGlhbGl6ZVJlcXVlc3RFdmVudEFyZ3M9ZnVuY3Rpb24oYyxiLGEpe1N5cy5XZWJGb3Jtcy5Jbml0aWFsaXplUmVxdWVzdEV2ZW50QXJncy5pbml0aWFsaXplQmFzZSh0aGlzKTt0aGlzLl9yZXF1ZXN0PWM7dGhpcy5fcG9zdEJhY2tFbGVtZW50PWI7dGhpcy5fdXBkYXRlUGFuZWxzVG9VcGRhdGU9YX07U3lzLldlYkZvcm1zLkluaXRpYWxpemVSZXF1ZXN0RXZlbnRBcmdzLnByb3RvdHlwZT17Z2V0X3Bvc3RCYWNrRWxlbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wb3N0QmFja0VsZW1lbnR9LGdldF9yZXF1ZXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlcXVlc3R9LGdldF91cGRhdGVQYW5lbHNUb1VwZGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91cGRhdGVQYW5lbHNUb1VwZGF0ZT9BcnJheS5jbG9uZSh0aGlzLl91cGRhdGVQYW5lbHNUb1VwZGF0ZSk6W119LHNldF91cGRhdGVQYW5lbHNUb1VwZGF0ZTpmdW5jdGlvbihhKXt0aGlzLl91cGRhdGVkPXRydWU7dGhpcy5fdXBkYXRlUGFuZWxzVG9VcGRhdGU9YX19O1N5cy5XZWJGb3Jtcy5Jbml0aWFsaXplUmVxdWVzdEV2ZW50QXJncy5yZWdpc3RlckNsYXNzKCJTeXMuV2ViRm9ybXMuSW5pdGlhbGl6ZVJlcXVlc3RFdmVudEFyZ3MiLFN5cy5DYW5jZWxFdmVudEFyZ3MpO1N5cy5XZWJGb3Jtcy5QYWdlTG9hZGVkRXZlbnRBcmdzPWZ1bmN0aW9uKGIsYSxjKXtTeXMuV2ViRm9ybXMuUGFnZUxvYWRlZEV2ZW50QXJncy5pbml0aWFsaXplQmFzZSh0aGlzKTt0aGlzLl9wYW5lbHNVcGRhdGVkPWI7dGhpcy5fcGFuZWxzQ3JlYXRlZD1hO3RoaXMuX2RhdGFJdGVtcz1jfHx7fX07U3lzLldlYkZvcm1zLlBhZ2VMb2FkZWRFdmVudEFyZ3MucHJvdG90eXBlPXtnZXRfZGF0YUl0ZW1zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGFJdGVtc30sZ2V0X3BhbmVsc0NyZWF0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFuZWxzQ3JlYXRlZH0sZ2V0X3BhbmVsc1VwZGF0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFuZWxzVXBkYXRlZH19O1N5cy5XZWJGb3Jtcy5QYWdlTG9hZGVkRXZlbnRBcmdzLnJlZ2lzdGVyQ2xhc3MoIlN5cy5XZWJGb3Jtcy5QYWdlTG9hZGVkRXZlbnRBcmdzIixTeXMuRXZlbnRBcmdzKTtTeXMuV2ViRm9ybXMuUGFnZUxvYWRpbmdFdmVudEFyZ3M9ZnVuY3Rpb24oYixhLGMpe1N5cy5XZWJGb3Jtcy5QYWdlTG9hZGluZ0V2ZW50QXJncy5pbml0aWFsaXplQmFzZSh0aGlzKTt0aGlzLl9wYW5lbHNVcGRhdGluZz1iO3RoaXMuX3BhbmVsc0RlbGV0aW5nPWE7dGhpcy5fZGF0YUl0ZW1zPWN8fHt9fTtTeXMuV2ViRm9ybXMuUGFnZUxvYWRpbmdFdmVudEFyZ3MucHJvdG90eXBlPXtnZXRfZGF0YUl0ZW1zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGFJdGVtc30sZ2V0X3BhbmVsc0RlbGV0aW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhbmVsc0RlbGV0aW5nfSxnZXRfcGFuZWxzVXBkYXRpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFuZWxzVXBkYXRpbmd9fTtTeXMuV2ViRm9ybXMuUGFnZUxvYWRpbmdFdmVudEFyZ3MucmVnaXN0ZXJDbGFzcygiU3lzLldlYkZvcm1zLlBhZ2VMb2FkaW5nRXZlbnRBcmdzIixTeXMuRXZlbnRBcmdzKTtTeXMuX1NjcmlwdExvYWRlcj1mdW5jdGlvbigpe3RoaXMuX3NjcmlwdHNUb0xvYWQ9bnVsbDt0aGlzLl9zZXNzaW9ucz1bXTt0aGlzLl9zY3JpcHRMb2FkZWREZWxlZ2F0ZT1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX3NjcmlwdExvYWRlZEhhbmRsZXIpfTtTeXMuX1NjcmlwdExvYWRlci5wcm90b3R5cGU9e2Rpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLl9zdG9wU2Vzc2lvbigpO3RoaXMuX2xvYWRpbmc9ZmFsc2U7aWYodGhpcy5fZXZlbnRzKWRlbGV0ZSB0aGlzLl9ldmVudHM7dGhpcy5fc2Vzc2lvbnM9bnVsbDt0aGlzLl9jdXJyZW50U2Vzc2lvbj1udWxsO3RoaXMuX3NjcmlwdExvYWRlZERlbGVnYXRlPW51bGx9LGxvYWRTY3JpcHRzOmZ1bmN0aW9uKGQsYixjLGEpe3ZhciBlPXthbGxTY3JpcHRzTG9hZGVkQ2FsbGJhY2s6YixzY3JpcHRMb2FkRmFpbGVkQ2FsbGJhY2s6YyxzY3JpcHRMb2FkVGltZW91dENhbGxiYWNrOmEsc2NyaXB0c1RvTG9hZDp0aGlzLl9zY3JpcHRzVG9Mb2FkLHNjcmlwdFRpbWVvdXQ6ZH07dGhpcy5fc2NyaXB0c1RvTG9hZD1udWxsO3RoaXMuX3Nlc3Npb25zW3RoaXMuX3Nlc3Npb25zLmxlbmd0aF09ZTtpZighdGhpcy5fbG9hZGluZyl0aGlzLl9uZXh0U2Vzc2lvbigpfSxxdWV1ZUN1c3RvbVNjcmlwdFRhZzpmdW5jdGlvbihhKXtpZighdGhpcy5fc2NyaXB0c1RvTG9hZCl0aGlzLl9zY3JpcHRzVG9Mb2FkPVtdO0FycmF5LmFkZCh0aGlzLl9zY3JpcHRzVG9Mb2FkLGEpfSxxdWV1ZVNjcmlwdEJsb2NrOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLl9zY3JpcHRzVG9Mb2FkKXRoaXMuX3NjcmlwdHNUb0xvYWQ9W107QXJyYXkuYWRkKHRoaXMuX3NjcmlwdHNUb0xvYWQse3RleHQ6YX0pfSxxdWV1ZVNjcmlwdFJlZmVyZW5jZTpmdW5jdGlvbihhLGIpe2lmKCF0aGlzLl9zY3JpcHRzVG9Mb2FkKXRoaXMuX3NjcmlwdHNUb0xvYWQ9W107QXJyYXkuYWRkKHRoaXMuX3NjcmlwdHNUb0xvYWQse3NyYzphLGZhbGxiYWNrOmJ9KX0sX2NyZWF0ZVNjcmlwdEVsZW1lbnQ6ZnVuY3Rpb24oYyl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7YS50eXBlPSJ0ZXh0L2phdmFzY3JpcHQiO2Zvcih2YXIgYiBpbiBjKWFbYl09Y1tiXTtyZXR1cm4gYX0sX2xvYWRTY3JpcHRzSW50ZXJuYWw6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLl9jdXJyZW50U2Vzc2lvbjtpZihjLnNjcmlwdHNUb0xvYWQmJmMuc2NyaXB0c1RvTG9hZC5sZW5ndGg+MCl7dmFyIGI9QXJyYXkuZGVxdWV1ZShjLnNjcmlwdHNUb0xvYWQpLGY9dGhpcy5fc2NyaXB0TG9hZGVkRGVsZWdhdGU7aWYoYi5mYWxsYmFjayl7dmFyIGc9Yi5mYWxsYmFjaztkZWxldGUgYi5mYWxsYmFjazt2YXIgZD10aGlzO2Y9ZnVuY3Rpb24oYixhKXthfHxmdW5jdGlvbigpe3ZhciBhPWQuX2NyZWF0ZVNjcmlwdEVsZW1lbnQoe3NyYzpnfSk7ZC5fY3VycmVudFRhc2s9bmV3IFN5cy5fU2NyaXB0TG9hZGVyVGFzayhhLGQuX3NjcmlwdExvYWRlZERlbGVnYXRlKTtkLl9jdXJyZW50VGFzay5leGVjdXRlKCl9KCl9fXZhciBhPXRoaXMuX2NyZWF0ZVNjcmlwdEVsZW1lbnQoYik7aWYoYS50ZXh0JiZTeXMuQnJvd3Nlci5hZ2VudD09PVN5cy5Ccm93c2VyLlNhZmFyaSl7YS5pbm5lckhUTUw9YS50ZXh0O2RlbGV0ZSBhLnRleHR9aWYodHlwZW9mIGIuc3JjPT09InN0cmluZyIpe3RoaXMuX2N1cnJlbnRUYXNrPW5ldyBTeXMuX1NjcmlwdExvYWRlclRhc2soYSxmKTt0aGlzLl9jdXJyZW50VGFzay5leGVjdXRlKCl9ZWxzZXtkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdLmFwcGVuZENoaWxkKGEpO1N5cy5fU2NyaXB0TG9hZGVyVGFzay5fY2xlYXJTY3JpcHQoYSk7dGhpcy5fbG9hZFNjcmlwdHNJbnRlcm5hbCgpfX1lbHNle3RoaXMuX3N0b3BTZXNzaW9uKCk7dmFyIGU9Yy5hbGxTY3JpcHRzTG9hZGVkQ2FsbGJhY2s7aWYoZSllKHRoaXMpO3RoaXMuX25leHRTZXNzaW9uKCl9fSxfbmV4dFNlc3Npb246ZnVuY3Rpb24oKXtpZih0aGlzLl9zZXNzaW9ucy5sZW5ndGg9PT0wKXt0aGlzLl9sb2FkaW5nPWZhbHNlO3RoaXMuX2N1cnJlbnRTZXNzaW9uPW51bGw7cmV0dXJufXRoaXMuX2xvYWRpbmc9dHJ1ZTt2YXIgYT1BcnJheS5kZXF1ZXVlKHRoaXMuX3Nlc3Npb25zKTt0aGlzLl9jdXJyZW50U2Vzc2lvbj1hO2lmKGEuc2NyaXB0VGltZW91dD4wKXRoaXMuX3RpbWVvdXRDb29raWU9d2luZG93LnNldFRpbWVvdXQoRnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9zY3JpcHRMb2FkVGltZW91dEhhbmRsZXIpLGEuc2NyaXB0VGltZW91dCoxMDAwKTt0aGlzLl9sb2FkU2NyaXB0c0ludGVybmFsKCl9LF9yYWlzZUVycm9yOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5fY3VycmVudFNlc3Npb24uc2NyaXB0TG9hZEZhaWxlZENhbGxiYWNrLGE9dGhpcy5fY3VycmVudFRhc2suZ2V0X3NjcmlwdEVsZW1lbnQoKTt0aGlzLl9zdG9wU2Vzc2lvbigpO2lmKGIpe2IodGhpcyxhKTt0aGlzLl9uZXh0U2Vzc2lvbigpfWVsc2V7dGhpcy5fbG9hZGluZz1mYWxzZTt0aHJvdyBTeXMuX1NjcmlwdExvYWRlci5fZXJyb3JTY3JpcHRMb2FkRmFpbGVkKGEuc3JjKX19LF9zY3JpcHRMb2FkZWRIYW5kbGVyOmZ1bmN0aW9uKGEsYil7aWYoYil7QXJyYXkuYWRkKFN5cy5fU2NyaXB0TG9hZGVyLl9nZXRMb2FkZWRTY3JpcHRzKCksYS5zcmMpO3RoaXMuX2N1cnJlbnRUYXNrLmRpc3Bvc2UoKTt0aGlzLl9jdXJyZW50VGFzaz1udWxsO3RoaXMuX2xvYWRTY3JpcHRzSW50ZXJuYWwoKX1lbHNlIHRoaXMuX3JhaXNlRXJyb3IoKX0sX3NjcmlwdExvYWRUaW1lb3V0SGFuZGxlcjpmdW5jdGlvbigpe3ZhciBhPXRoaXMuX2N1cnJlbnRTZXNzaW9uLnNjcmlwdExvYWRUaW1lb3V0Q2FsbGJhY2s7dGhpcy5fc3RvcFNlc3Npb24oKTtpZihhKWEodGhpcyk7dGhpcy5fbmV4dFNlc3Npb24oKX0sX3N0b3BTZXNzaW9uOmZ1bmN0aW9uKCl7aWYodGhpcy5fdGltZW91dENvb2tpZSl7d2luZG93LmNsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0Q29va2llKTt0aGlzLl90aW1lb3V0Q29va2llPW51bGx9aWYodGhpcy5fY3VycmVudFRhc2spe3RoaXMuX2N1cnJlbnRUYXNrLmRpc3Bvc2UoKTt0aGlzLl9jdXJyZW50VGFzaz1udWxsfX19O1N5cy5fU2NyaXB0TG9hZGVyLnJlZ2lzdGVyQ2xhc3MoIlN5cy5fU2NyaXB0TG9hZGVyIixudWxsLFN5cy5JRGlzcG9zYWJsZSk7U3lzLl9TY3JpcHRMb2FkZXIuZ2V0SW5zdGFuY2U9ZnVuY3Rpb24oKXt2YXIgYT1TeXMuX1NjcmlwdExvYWRlci5fYWN0aXZlSW5zdGFuY2U7aWYoIWEpYT1TeXMuX1NjcmlwdExvYWRlci5fYWN0aXZlSW5zdGFuY2U9bmV3IFN5cy5fU2NyaXB0TG9hZGVyO3JldHVybiBhfTtTeXMuX1NjcmlwdExvYWRlci5pc1NjcmlwdExvYWRlZD1mdW5jdGlvbihiKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTthLnNyYz1iO3JldHVybiBBcnJheS5jb250YWlucyhTeXMuX1NjcmlwdExvYWRlci5fZ2V0TG9hZGVkU2NyaXB0cygpLGEuc3JjKX07U3lzLl9TY3JpcHRMb2FkZXIucmVhZExvYWRlZFNjcmlwdHM9ZnVuY3Rpb24oKXtpZighU3lzLl9TY3JpcHRMb2FkZXIuX3JlZmVyZW5jZWRTY3JpcHRzKXt2YXIgYz1TeXMuX1NjcmlwdExvYWRlci5fcmVmZXJlbmNlZFNjcmlwdHM9W10sZD1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgic2NyaXB0Iik7Zm9yKHZhciBiPWQubGVuZ3RoLTE7Yj49MDtiLS0pe3ZhciBlPWRbYl0sYT1lLnNyYztpZihhLmxlbmd0aClpZighQXJyYXkuY29udGFpbnMoYyxhKSlBcnJheS5hZGQoYyxhKX19fTtTeXMuX1NjcmlwdExvYWRlci5fZXJyb3JTY3JpcHRMb2FkRmFpbGVkPWZ1bmN0aW9uKGIpe3ZhciBhO2E9U3lzLlJlcy5zY3JpcHRMb2FkRmFpbGVkO3ZhciBkPSJTeXMuU2NyaXB0TG9hZEZhaWxlZEV4Y2VwdGlvbjogIitTdHJpbmcuZm9ybWF0KGEsYiksYz1FcnJvci5jcmVhdGUoZCx7bmFtZToiU3lzLlNjcmlwdExvYWRGYWlsZWRFeGNlcHRpb24iLCJzY3JpcHRVcmwiOmJ9KTtjLnBvcFN0YWNrRnJhbWUoKTtyZXR1cm4gY307U3lzLl9TY3JpcHRMb2FkZXIuX2dldExvYWRlZFNjcmlwdHM9ZnVuY3Rpb24oKXtpZighU3lzLl9TY3JpcHRMb2FkZXIuX3JlZmVyZW5jZWRTY3JpcHRzKXtTeXMuX1NjcmlwdExvYWRlci5fcmVmZXJlbmNlZFNjcmlwdHM9W107U3lzLl9TY3JpcHRMb2FkZXIucmVhZExvYWRlZFNjcmlwdHMoKX1yZXR1cm4gU3lzLl9TY3JpcHRMb2FkZXIuX3JlZmVyZW5jZWRTY3JpcHRzfTtTeXMuV2ViRm9ybXMuUGFnZVJlcXVlc3RNYW5hZ2VyPWZ1bmN0aW9uKCl7dGhpcy5fZm9ybT1udWxsO3RoaXMuX2FjdGl2ZURlZmF1bHRCdXR0b249bnVsbDt0aGlzLl9hY3RpdmVEZWZhdWx0QnV0dG9uQ2xpY2tlZD1mYWxzZTt0aGlzLl91cGRhdGVQYW5lbElEcz1udWxsO3RoaXMuX3VwZGF0ZVBhbmVsQ2xpZW50SURzPW51bGw7dGhpcy5fdXBkYXRlUGFuZWxIYXNDaGlsZHJlbkFzVHJpZ2dlcnM9bnVsbDt0aGlzLl9hc3luY1Bvc3RCYWNrQ29udHJvbElEcz1udWxsO3RoaXMuX2FzeW5jUG9zdEJhY2tDb250cm9sQ2xpZW50SURzPW51bGw7dGhpcy5fcG9zdEJhY2tDb250cm9sSURzPW51bGw7dGhpcy5fcG9zdEJhY2tDb250cm9sQ2xpZW50SURzPW51bGw7dGhpcy5fc2NyaXB0TWFuYWdlcklEPW51bGw7dGhpcy5fcGFnZUxvYWRlZEhhbmRsZXI9bnVsbDt0aGlzLl9hZGRpdGlvbmFsSW5wdXQ9bnVsbDt0aGlzLl9vbnN1Ym1pdD1udWxsO3RoaXMuX29uU3VibWl0U3RhdGVtZW50cz1bXTt0aGlzLl9vcmlnaW5hbERvUG9zdEJhY2s9bnVsbDt0aGlzLl9vcmlnaW5hbERvUG9zdEJhY2tXaXRoT3B0aW9ucz1udWxsO3RoaXMuX29yaWdpbmFsRmlyZURlZmF1bHRCdXR0b249bnVsbDt0aGlzLl9vcmlnaW5hbERvQ2FsbGJhY2s9bnVsbDt0aGlzLl9pc0Nyb3NzUG9zdD1mYWxzZTt0aGlzLl9wb3N0QmFja1NldHRpbmdzPW51bGw7dGhpcy5fcmVxdWVzdD1udWxsO3RoaXMuX29uRm9ybVN1Ym1pdEhhbmRsZXI9bnVsbDt0aGlzLl9vbkZvcm1FbGVtZW50Q2xpY2tIYW5kbGVyPW51bGw7dGhpcy5fb25XaW5kb3dVbmxvYWRIYW5kbGVyPW51bGw7dGhpcy5fYXN5bmNQb3N0QmFja1RpbWVvdXQ9bnVsbDt0aGlzLl9jb250cm9sSURUb0ZvY3VzPW51bGw7dGhpcy5fc2Nyb2xsUG9zaXRpb249bnVsbDt0aGlzLl9wcm9jZXNzaW5nUmVxdWVzdD1mYWxzZTt0aGlzLl9zY3JpcHREaXNwb3Nlcz17fTt0aGlzLl90cmFuc2llbnRGaWVsZHM9WyJfX1ZJRVdTVEFURUVOQ1JZUFRFRCIsIl9fVklFV1NUQVRFRklFTERDT1VOVCJdO3RoaXMuX3RleHRUeXBlcz0vXih0ZXh0fHBhc3N3b3JkfGhpZGRlbnxzZWFyY2h8dGVsfHVybHxlbWFpbHxudW1iZXJ8cmFuZ2V8Y29sb3J8ZGF0ZXRpbWV8ZGF0ZXxtb250aHx3ZWVrfHRpbWV8ZGF0ZXRpbWUtbG9jYWwpJC9pfTtTeXMuV2ViRm9ybXMuUGFnZVJlcXVlc3RNYW5hZ2VyLnByb3RvdHlwZT17X2dldF9ldmVudEhhbmRsZXJMaXN0OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX2V2ZW50cyl0aGlzLl9ldmVudHM9bmV3IFN5cy5FdmVudEhhbmRsZXJMaXN0O3JldHVybiB0aGlzLl9ldmVudHN9LGdldF9pc0luQXN5bmNQb3N0QmFjazpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZXF1ZXN0IT09bnVsbH0sYWRkX2JlZ2luUmVxdWVzdDpmdW5jdGlvbihhKXt0aGlzLl9nZXRfZXZlbnRIYW5kbGVyTGlzdCgpLmFkZEhhbmRsZXIoImJlZ2luUmVxdWVzdCIsYSl9LHJlbW92ZV9iZWdpblJlcXVlc3Q6ZnVuY3Rpb24oYSl7dGhpcy5fZ2V0X2V2ZW50SGFuZGxlckxpc3QoKS5yZW1vdmVIYW5kbGVyKCJiZWdpblJlcXVlc3QiLGEpfSxhZGRfZW5kUmVxdWVzdDpmdW5jdGlvbihhKXt0aGlzLl9nZXRfZXZlbnRIYW5kbGVyTGlzdCgpLmFkZEhhbmRsZXIoImVuZFJlcXVlc3QiLGEpfSxyZW1vdmVfZW5kUmVxdWVzdDpmdW5jdGlvbihhKXt0aGlzLl9nZXRfZXZlbnRIYW5kbGVyTGlzdCgpLnJlbW92ZUhhbmRsZXIoImVuZFJlcXVlc3QiLGEpfSxhZGRfaW5pdGlhbGl6ZVJlcXVlc3Q6ZnVuY3Rpb24oYSl7dGhpcy5fZ2V0X2V2ZW50SGFuZGxlckxpc3QoKS5hZGRIYW5kbGVyKCJpbml0aWFsaXplUmVxdWVzdCIsYSl9LHJlbW92ZV9pbml0aWFsaXplUmVxdWVzdDpmdW5jdGlvbihhKXt0aGlzLl9nZXRfZXZlbnRIYW5kbGVyTGlzdCgpLnJlbW92ZUhhbmRsZXIoImluaXRpYWxpemVSZXF1ZXN0IixhKX0sYWRkX3BhZ2VMb2FkZWQ6ZnVuY3Rpb24oYSl7dGhpcy5fZ2V0X2V2ZW50SGFuZGxlckxpc3QoKS5hZGRIYW5kbGVyKCJwYWdlTG9hZGVkIixhKX0scmVtb3ZlX3BhZ2VMb2FkZWQ6ZnVuY3Rpb24oYSl7dGhpcy5fZ2V0X2V2ZW50SGFuZGxlckxpc3QoKS5yZW1vdmVIYW5kbGVyKCJwYWdlTG9hZGVkIixhKX0sYWRkX3BhZ2VMb2FkaW5nOmZ1bmN0aW9uKGEpe3RoaXMuX2dldF9ldmVudEhhbmRsZXJMaXN0KCkuYWRkSGFuZGxlcigicGFnZUxvYWRpbmciLGEpfSxyZW1vdmVfcGFnZUxvYWRpbmc6ZnVuY3Rpb24oYSl7dGhpcy5fZ2V0X2V2ZW50SGFuZGxlckxpc3QoKS5yZW1vdmVIYW5kbGVyKCJwYWdlTG9hZGluZyIsYSl9LGFib3J0UG9zdEJhY2s6ZnVuY3Rpb24oKXtpZighdGhpcy5fcHJvY2Vzc2luZ1JlcXVlc3QmJnRoaXMuX3JlcXVlc3Qpe3RoaXMuX3JlcXVlc3QuZ2V0X2V4ZWN1dG9yKCkuYWJvcnQoKTt0aGlzLl9yZXF1ZXN0PW51bGx9fSxiZWdpbkFzeW5jUG9zdEJhY2s6ZnVuY3Rpb24oYyxhLGYsZCxlKXtpZihkJiZ0eXBlb2YgUGFnZV9DbGllbnRWYWxpZGF0ZT09PSJmdW5jdGlvbiImJiFQYWdlX0NsaWVudFZhbGlkYXRlKGV8fG51bGwpKXJldHVybjt0aGlzLl9wb3N0QmFja1NldHRpbmdzPXRoaXMuX2NyZWF0ZVBvc3RCYWNrU2V0dGluZ3ModHJ1ZSxjLGEpO3ZhciBiPXRoaXMuX2Zvcm07Yi5fX0VWRU5UVEFSR0VULnZhbHVlPWF8fCIiO2IuX19FVkVOVEFSR1VNRU5ULnZhbHVlPWZ8fCIiO3RoaXMuX2lzQ3Jvc3NQb3N0PWZhbHNlO3RoaXMuX2FkZGl0aW9uYWxJbnB1dD1udWxsO3RoaXMuX29uRm9ybVN1Ym1pdCgpfSxfY2FuY2VsUGVuZGluZ0NhbGxiYWNrczpmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGU9d2luZG93Ll9fcGVuZGluZ0NhbGxiYWNrcy5sZW5ndGg7YTxlO2ErKyl7dmFyIGM9d2luZG93Ll9fcGVuZGluZ0NhbGxiYWNrc1thXTtpZihjKXtpZighYy5hc3luYyl3aW5kb3cuX19zeW5jaHJvbm91c0NhbGxCYWNrSW5kZXg9LTE7d2luZG93Ll9fcGVuZGluZ0NhbGxiYWNrc1thXT1udWxsO3ZhciBkPSJfX0NBTExCQUNLRlJBTUUiK2EsYj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChkKTtpZihiKWIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKX19fSxfY29tbWl0Q29udHJvbHM6ZnVuY3Rpb24oYSxiKXtpZihhKXt0aGlzLl91cGRhdGVQYW5lbElEcz1hLnVwZGF0ZVBhbmVsSURzO3RoaXMuX3VwZGF0ZVBhbmVsQ2xpZW50SURzPWEudXBkYXRlUGFuZWxDbGllbnRJRHM7dGhpcy5fdXBkYXRlUGFuZWxIYXNDaGlsZHJlbkFzVHJpZ2dlcnM9YS51cGRhdGVQYW5lbEhhc0NoaWxkcmVuQXNUcmlnZ2Vyczt0aGlzLl9hc3luY1Bvc3RCYWNrQ29udHJvbElEcz1hLmFzeW5jUG9zdEJhY2tDb250cm9sSURzO3RoaXMuX2FzeW5jUG9zdEJhY2tDb250cm9sQ2xpZW50SURzPWEuYXN5bmNQb3N0QmFja0NvbnRyb2xDbGllbnRJRHM7dGhpcy5fcG9zdEJhY2tDb250cm9sSURzPWEucG9zdEJhY2tDb250cm9sSURzO3RoaXMuX3Bvc3RCYWNrQ29udHJvbENsaWVudElEcz1hLnBvc3RCYWNrQ29udHJvbENsaWVudElEc31pZih0eXBlb2YgYiE9PSJ1bmRlZmluZWQiJiZiIT09bnVsbCl0aGlzLl9hc3luY1Bvc3RCYWNrVGltZW91dD1iKjEwMDB9LF9jcmVhdGVIaWRkZW5GaWVsZDpmdW5jdGlvbihjLGQpe3ZhciBiLGE9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYyk7aWYoYSlpZighYS5faXNDb250YWluZWQpYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpO2Vsc2UgYj1hLnBhcmVudE5vZGU7aWYoIWIpe2I9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpO2Iuc3R5bGUuY3NzVGV4dD0iZGlzcGxheTpub25lICFpbXBvcnRhbnQiO3RoaXMuX2Zvcm0uYXBwZW5kQ2hpbGQoYil9Yi5pbm5lckhUTUw9IjxpbnB1dCB0eXBlPSdoaWRkZW4nIC8+IjthPWIuY2hpbGROb2Rlc1swXTthLl9pc0NvbnRhaW5lZD10cnVlO2EuaWQ9YS5uYW1lPWM7YS52YWx1ZT1kfSxfY3JlYXRlUGFnZVJlcXVlc3RNYW5hZ2VyVGltZW91dEVycm9yOmZ1bmN0aW9uKCl7dmFyIGI9IlN5cy5XZWJGb3Jtcy5QYWdlUmVxdWVzdE1hbmFnZXJUaW1lb3V0RXhjZXB0aW9uOiAiK1N5cy5XZWJGb3Jtcy5SZXMuUFJNX1RpbWVvdXRFcnJvcixhPUVycm9yLmNyZWF0ZShiLHtuYW1lOiJTeXMuV2ViRm9ybXMuUGFnZVJlcXVlc3RNYW5hZ2VyVGltZW91dEV4Y2VwdGlvbiJ9KTthLnBvcFN0YWNrRnJhbWUoKTtyZXR1cm4gYX0sX2NyZWF0ZVBhZ2VSZXF1ZXN0TWFuYWdlclNlcnZlckVycm9yOmZ1bmN0aW9uKGEsZCl7dmFyIGM9IlN5cy5XZWJGb3Jtcy5QYWdlUmVxdWVzdE1hbmFnZXJTZXJ2ZXJFcnJvckV4Y2VwdGlvbjogIisoZHx8U3RyaW5nLmZvcm1hdChTeXMuV2ViRm9ybXMuUmVzLlBSTV9TZXJ2ZXJFcnJvcixhKSksYj1FcnJvci5jcmVhdGUoYyx7bmFtZToiU3lzLldlYkZvcm1zLlBhZ2VSZXF1ZXN0TWFuYWdlclNlcnZlckVycm9yRXhjZXB0aW9uIixodHRwU3RhdHVzQ29kZTphfSk7Yi5wb3BTdGFja0ZyYW1lKCk7cmV0dXJuIGJ9LF9jcmVhdGVQYWdlUmVxdWVzdE1hbmFnZXJQYXJzZXJFcnJvcjpmdW5jdGlvbihiKXt2YXIgYz0iU3lzLldlYkZvcm1zLlBhZ2VSZXF1ZXN0TWFuYWdlclBhcnNlckVycm9yRXhjZXB0aW9uOiAiK1N0cmluZy5mb3JtYXQoU3lzLldlYkZvcm1zLlJlcy5QUk1fUGFyc2VyRXJyb3IsYiksYT1FcnJvci5jcmVhdGUoYyx7bmFtZToiU3lzLldlYkZvcm1zLlBhZ2VSZXF1ZXN0TWFuYWdlclBhcnNlckVycm9yRXhjZXB0aW9uIn0pO2EucG9wU3RhY2tGcmFtZSgpO3JldHVybiBhfSxfY3JlYXRlUGFuZWxJRDpmdW5jdGlvbihlLGIpe3ZhciBjPWIuYXN5bmNUYXJnZXQsYT10aGlzLl9lbnN1cmVVbmlxdWVJZHMoZXx8Yi5wYW5lbHNUb1VwZGF0ZSksZD1hIGluc3RhbmNlb2YgQXJyYXk/YS5qb2luKCIsIik6YXx8dGhpcy5fc2NyaXB0TWFuYWdlcklEO2lmKGMpZCs9InwiK2M7cmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLl9zY3JpcHRNYW5hZ2VySUQpKyI9IitlbmNvZGVVUklDb21wb25lbnQoZCkrIiYifSxfY3JlYXRlUG9zdEJhY2tTZXR0aW5nczpmdW5jdGlvbihkLGEsYyxiKXtyZXR1cm4ge2FzeW5jOmQsYXN5bmNUYXJnZXQ6YyxwYW5lbHNUb1VwZGF0ZTphLHNvdXJjZUVsZW1lbnQ6Yn19LF9jb252ZXJ0VG9DbGllbnRJRHM6ZnVuY3Rpb24oYSxmLGUsZCl7aWYoYSlmb3IodmFyIGI9MCxoPWEubGVuZ3RoO2I8aDtiKz1kPzI6MSl7dmFyIGM9YVtiXSxnPShkP2FbYisxXToiIil8fHRoaXMuX3VuaXF1ZUlEVG9DbGllbnRJRChjKTtBcnJheS5hZGQoZixjKTtBcnJheS5hZGQoZSxnKX19LGRpc3Bvc2U6ZnVuY3Rpb24oKXtpZih0aGlzLl9mb3JtKXtTeXMuVUkuRG9tRXZlbnQucmVtb3ZlSGFuZGxlcih0aGlzLl9mb3JtLCJzdWJtaXQiLHRoaXMuX29uRm9ybVN1Ym1pdEhhbmRsZXIpO1N5cy5VSS5Eb21FdmVudC5yZW1vdmVIYW5kbGVyKHRoaXMuX2Zvcm0sImNsaWNrIix0aGlzLl9vbkZvcm1FbGVtZW50Q2xpY2tIYW5kbGVyKTtTeXMuVUkuRG9tRXZlbnQucmVtb3ZlSGFuZGxlcih3aW5kb3csInVubG9hZCIsdGhpcy5fb25XaW5kb3dVbmxvYWRIYW5kbGVyKTtTeXMuVUkuRG9tRXZlbnQucmVtb3ZlSGFuZGxlcih3aW5kb3csImxvYWQiLHRoaXMuX3BhZ2VMb2FkZWRIYW5kbGVyKX1pZih0aGlzLl9vcmlnaW5hbERvUG9zdEJhY2spe3dpbmRvdy5fX2RvUG9zdEJhY2s9dGhpcy5fb3JpZ2luYWxEb1Bvc3RCYWNrO3RoaXMuX29yaWdpbmFsRG9Qb3N0QmFjaz1udWxsfWlmKHRoaXMuX29yaWdpbmFsRG9Qb3N0QmFja1dpdGhPcHRpb25zKXt3aW5kb3cuV2ViRm9ybV9Eb1Bvc3RCYWNrV2l0aE9wdGlvbnM9dGhpcy5fb3JpZ2luYWxEb1Bvc3RCYWNrV2l0aE9wdGlvbnM7dGhpcy5fb3JpZ2luYWxEb1Bvc3RCYWNrV2l0aE9wdGlvbnM9bnVsbH1pZih0aGlzLl9vcmlnaW5hbEZpcmVEZWZhdWx0QnV0dG9uKXt3aW5kb3cuV2ViRm9ybV9GaXJlRGVmYXVsdEJ1dHRvbj10aGlzLl9vcmlnaW5hbEZpcmVEZWZhdWx0QnV0dG9uO3RoaXMuX29yaWdpbmFsRmlyZURlZmF1bHRCdXR0b249bnVsbH1pZih0aGlzLl9vcmlnaW5hbERvQ2FsbGJhY2spe3dpbmRvdy5XZWJGb3JtX0RvQ2FsbGJhY2s9dGhpcy5fb3JpZ2luYWxEb0NhbGxiYWNrO3RoaXMuX29yaWdpbmFsRG9DYWxsYmFjaz1udWxsfXRoaXMuX2Zvcm09bnVsbDt0aGlzLl91cGRhdGVQYW5lbElEcz1udWxsO3RoaXMuX3VwZGF0ZVBhbmVsQ2xpZW50SURzPW51bGw7dGhpcy5fYXN5bmNQb3N0QmFja0NvbnRyb2xJRHM9bnVsbDt0aGlzLl9hc3luY1Bvc3RCYWNrQ29udHJvbENsaWVudElEcz1udWxsO3RoaXMuX3Bvc3RCYWNrQ29udHJvbElEcz1udWxsO3RoaXMuX3Bvc3RCYWNrQ29udHJvbENsaWVudElEcz1udWxsO3RoaXMuX2FzeW5jUG9zdEJhY2tUaW1lb3V0PW51bGw7dGhpcy5fc2Nyb2xsUG9zaXRpb249bnVsbDt0aGlzLl9hY3RpdmVFbGVtZW50PW51bGx9LF9kb0NhbGxiYWNrOmZ1bmN0aW9uKGQsYixjLGYsYSxlKXtpZighdGhpcy5nZXRfaXNJbkFzeW5jUG9zdEJhY2soKSl0aGlzLl9vcmlnaW5hbERvQ2FsbGJhY2soZCxiLGMsZixhLGUpfSxfZG9Qb3N0QmFjazpmdW5jdGlvbihhLGspe3ZhciBmPXdpbmRvdy5ldmVudDtpZighZil7dmFyIGQ9YXJndW1lbnRzLmNhbGxlZT9hcmd1bWVudHMuY2FsbGVlLmNhbGxlcjpudWxsO2lmKGQpe3ZhciBqPTMwO3doaWxlKGQuYXJndW1lbnRzLmNhbGxlZS5jYWxsZXImJi0tailkPWQuYXJndW1lbnRzLmNhbGxlZS5jYWxsZXI7Zj1qJiZkLmFyZ3VtZW50cy5sZW5ndGg/ZC5hcmd1bWVudHNbMF06bnVsbH19dGhpcy5fYWRkaXRpb25hbElucHV0PW51bGw7dmFyIGg9dGhpcy5fZm9ybTtpZihhPT09bnVsbHx8dHlwZW9mIGE9PT0idW5kZWZpbmVkInx8dGhpcy5faXNDcm9zc1Bvc3Qpe3RoaXMuX3Bvc3RCYWNrU2V0dGluZ3M9dGhpcy5fY3JlYXRlUG9zdEJhY2tTZXR0aW5ncyhmYWxzZSk7dGhpcy5faXNDcm9zc1Bvc3Q9ZmFsc2V9ZWxzZXt2YXIgYz10aGlzLl9tYXN0ZXJQYWdlVW5pcXVlSUQsbD10aGlzLl91bmlxdWVJRFRvQ2xpZW50SUQoYSksZz1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChsKTtpZighZyYmYylpZihhLmluZGV4T2YoYysiJCIpPT09MClnPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGwuc3Vic3RyKGMubGVuZ3RoKzEpKTtpZighZylpZihBcnJheS5jb250YWlucyh0aGlzLl9hc3luY1Bvc3RCYWNrQ29udHJvbElEcyxhKSl0aGlzLl9wb3N0QmFja1NldHRpbmdzPXRoaXMuX2NyZWF0ZVBvc3RCYWNrU2V0dGluZ3ModHJ1ZSxudWxsLGEpO2Vsc2UgaWYoQXJyYXkuY29udGFpbnModGhpcy5fcG9zdEJhY2tDb250cm9sSURzLGEpKXRoaXMuX3Bvc3RCYWNrU2V0dGluZ3M9dGhpcy5fY3JlYXRlUG9zdEJhY2tTZXR0aW5ncyhmYWxzZSk7ZWxzZXt2YXIgZT10aGlzLl9maW5kTmVhcmVzdEVsZW1lbnQoYSk7aWYoZSl0aGlzLl9wb3N0QmFja1NldHRpbmdzPXRoaXMuX2dldFBvc3RCYWNrU2V0dGluZ3MoZSxhKTtlbHNle2lmKGMpe2MrPSIkIjtpZihhLmluZGV4T2YoYyk9PT0wKWU9dGhpcy5fZmluZE5lYXJlc3RFbGVtZW50KGEuc3Vic3RyKGMubGVuZ3RoKSl9aWYoZSl0aGlzLl9wb3N0QmFja1NldHRpbmdzPXRoaXMuX2dldFBvc3RCYWNrU2V0dGluZ3MoZSxhKTtlbHNle3ZhciBiO3RyeXtiPWY/Zi50YXJnZXR8fGYuc3JjRWxlbWVudDpudWxsfWNhdGNoKG4pe31iPWJ8fHRoaXMuX2FjdGl2ZUVsZW1lbnQ7dmFyIG09L19fZG9Qb3N0QmFja1wofFdlYkZvcm1fRG9Qb3N0QmFja1dpdGhPcHRpb25zXCgvO2Z1bmN0aW9uIGkoYil7Yj1iP2IudG9TdHJpbmcoKToiIjtyZXR1cm4gbS50ZXN0KGIpJiZiLmluZGV4T2YoIiciK2ErIiciKSE9PS0xfHxiLmluZGV4T2YoJyInK2ErJyInKSE9PS0xfWlmKGImJihiLm5hbWU9PT1hfHxpKGIuaHJlZil8fGkoYi5vbmNsaWNrKXx8aShiLm9uY2hhbmdlKSkpdGhpcy5fcG9zdEJhY2tTZXR0aW5ncz10aGlzLl9nZXRQb3N0QmFja1NldHRpbmdzKGIsYSk7ZWxzZSB0aGlzLl9wb3N0QmFja1NldHRpbmdzPXRoaXMuX2NyZWF0ZVBvc3RCYWNrU2V0dGluZ3MoZmFsc2UpfX19ZWxzZSB0aGlzLl9wb3N0QmFja1NldHRpbmdzPXRoaXMuX2dldFBvc3RCYWNrU2V0dGluZ3MoZyxhKX1pZighdGhpcy5fcG9zdEJhY2tTZXR0aW5ncy5hc3luYyl7aC5vbnN1Ym1pdD10aGlzLl9vbnN1Ym1pdDt0aGlzLl9vcmlnaW5hbERvUG9zdEJhY2soYSxrKTtoLm9uc3VibWl0PW51bGw7cmV0dXJufWguX19FVkVOVFRBUkdFVC52YWx1ZT1hO2guX19FVkVOVEFSR1VNRU5ULnZhbHVlPWs7dGhpcy5fb25Gb3JtU3VibWl0KCl9LF9kb1Bvc3RCYWNrV2l0aE9wdGlvbnM6ZnVuY3Rpb24oYSl7dGhpcy5faXNDcm9zc1Bvc3Q9YSYmYS5hY3Rpb25Vcmw7dmFyIGQ9dHJ1ZTtpZihhLnZhbGlkYXRpb24paWYodHlwZW9mIFBhZ2VfQ2xpZW50VmFsaWRhdGU9PSJmdW5jdGlvbiIpZD1QYWdlX0NsaWVudFZhbGlkYXRlKGEudmFsaWRhdGlvbkdyb3VwKTtpZihkKXtpZih0eXBlb2YgYS5hY3Rpb25VcmwhPSJ1bmRlZmluZWQiJiZhLmFjdGlvblVybCE9bnVsbCYmYS5hY3Rpb25VcmwubGVuZ3RoPjApdGhlRm9ybS5hY3Rpb249YS5hY3Rpb25Vcmw7aWYoYS50cmFja0ZvY3VzKXt2YXIgYz10aGVGb3JtLmVsZW1lbnRzWyJfX0xBU1RGT0NVUyJdO2lmKHR5cGVvZiBjIT0idW5kZWZpbmVkIiYmYyE9bnVsbClpZih0eXBlb2YgZG9jdW1lbnQuYWN0aXZlRWxlbWVudD09InVuZGVmaW5lZCIpYy52YWx1ZT1hLmV2ZW50VGFyZ2V0O2Vsc2V7dmFyIGI9ZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtpZih0eXBlb2YgYiE9InVuZGVmaW5lZCImJmIhPW51bGwpaWYodHlwZW9mIGIuaWQhPSJ1bmRlZmluZWQiJiZiLmlkIT1udWxsJiZiLmlkLmxlbmd0aD4wKWMudmFsdWU9Yi5pZDtlbHNlIGlmKHR5cGVvZiBiLm5hbWUhPSJ1bmRlZmluZWQiKWMudmFsdWU9Yi5uYW1lfX19aWYoYS5jbGllbnRTdWJtaXQpdGhpcy5fZG9Qb3N0QmFjayhhLmV2ZW50VGFyZ2V0LGEuZXZlbnRBcmd1bWVudCl9LF9lbGVtZW50Q29udGFpbnM6ZnVuY3Rpb24oYixhKXt3aGlsZShhKXtpZihhPT09YilyZXR1cm4gdHJ1ZTthPWEucGFyZW50Tm9kZX1yZXR1cm4gZmFsc2V9LF9lbmRQb3N0QmFjazpmdW5jdGlvbihhLGQsZil7aWYodGhpcy5fcmVxdWVzdD09PWQuZ2V0X3dlYlJlcXVlc3QoKSl7dGhpcy5fcHJvY2Vzc2luZ1JlcXVlc3Q9ZmFsc2U7dGhpcy5fYWRkaXRpb25hbElucHV0PW51bGw7dGhpcy5fcmVxdWVzdD1udWxsfXZhciBlPXRoaXMuX2dldF9ldmVudEhhbmRsZXJMaXN0KCkuZ2V0SGFuZGxlcigiZW5kUmVxdWVzdCIpLGI9ZmFsc2U7aWYoZSl7dmFyIGM9bmV3IFN5cy5XZWJGb3Jtcy5FbmRSZXF1ZXN0RXZlbnRBcmdzKGEsZj9mLmRhdGFJdGVtczp7fSxkKTtlKHRoaXMsYyk7Yj1jLmdldF9lcnJvckhhbmRsZWQoKX1pZihhJiYhYil0aHJvdyBhfSxfZW5zdXJlVW5pcXVlSWRzOmZ1bmN0aW9uKGEpe2lmKCFhKXJldHVybiBhO2E9YSBpbnN0YW5jZW9mIEFycmF5P2E6W2FdO3ZhciBjPVtdO2Zvcih2YXIgYj0wLGY9YS5sZW5ndGg7YjxmO2IrKyl7dmFyIGU9YVtiXSxkPUFycmF5LmluZGV4T2YodGhpcy5fdXBkYXRlUGFuZWxDbGllbnRJRHMsZSk7Yy5wdXNoKGQ+LTE/dGhpcy5fdXBkYXRlUGFuZWxJRHNbZF06ZSl9cmV0dXJuIGN9LF9maW5kTmVhcmVzdEVsZW1lbnQ6ZnVuY3Rpb24oYSl7d2hpbGUoYS5sZW5ndGg+MCl7dmFyIGQ9dGhpcy5fdW5pcXVlSURUb0NsaWVudElEKGEpLGM9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZCk7aWYoYylyZXR1cm4gYzt2YXIgYj1hLmxhc3RJbmRleE9mKCIkIik7aWYoYj09PS0xKXJldHVybiBudWxsO2E9YS5zdWJzdHJpbmcoMCxiKX1yZXR1cm4gbnVsbH0sX2ZpbmRUZXh0OmZ1bmN0aW9uKGIsYSl7dmFyIGM9TWF0aC5tYXgoMCxhLTIwKSxkPU1hdGgubWluKGIubGVuZ3RoLGErMjApO3JldHVybiBiLnN1YnN0cmluZyhjLGQpfSxfZmlyZURlZmF1bHRCdXR0b246ZnVuY3Rpb24oYSxkKXtpZihhLmtleUNvZGU9PT0xMyl7dmFyIGM9YS5zcmNFbGVtZW50fHxhLnRhcmdldDtpZighY3x8Yy50YWdOYW1lLnRvTG93ZXJDYXNlKCkhPT0idGV4dGFyZWEiKXt2YXIgYj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChkKTtpZihiJiZ0eXBlb2YgYi5jbGljayE9PSJ1bmRlZmluZWQiKXt0aGlzLl9hY3RpdmVEZWZhdWx0QnV0dG9uPWI7dGhpcy5fYWN0aXZlRGVmYXVsdEJ1dHRvbkNsaWNrZWQ9ZmFsc2U7dHJ5e2IuY2xpY2soKX1maW5hbGx5e3RoaXMuX2FjdGl2ZURlZmF1bHRCdXR0b249bnVsbH1hLmNhbmNlbEJ1YmJsZT10cnVlO2lmKHR5cGVvZiBhLnN0b3BQcm9wYWdhdGlvbj09PSJmdW5jdGlvbiIpYS5zdG9wUHJvcGFnYXRpb24oKTtyZXR1cm4gZmFsc2V9fX1yZXR1cm4gdHJ1ZX0sX2dldFBhZ2VMb2FkZWRFdmVudEFyZ3M6ZnVuY3Rpb24obixjKXt2YXIgbT1bXSxsPVtdLGs9Yz9jLnZlcnNpb240OmZhbHNlLGQ9Yz9jLnVwZGF0ZVBhbmVsRGF0YTpudWxsLGUsZyxoLGI7aWYoIWQpe2U9dGhpcy5fdXBkYXRlUGFuZWxJRHM7Zz10aGlzLl91cGRhdGVQYW5lbENsaWVudElEcztoPW51bGw7Yj1udWxsfWVsc2V7ZT1kLnVwZGF0ZVBhbmVsSURzO2c9ZC51cGRhdGVQYW5lbENsaWVudElEcztoPWQuY2hpbGRVcGRhdGVQYW5lbElEcztiPWQucGFuZWxzVG9SZWZyZXNoSURzfXZhciBhLGYsaixpO2lmKGIpZm9yKGE9MCxmPWIubGVuZ3RoO2E8ZjthKz1rPzI6MSl7aj1iW2FdO2k9KGs/YlthKzFdOiIiKXx8dGhpcy5fdW5pcXVlSURUb0NsaWVudElEKGopO0FycmF5LmFkZChtLGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGkpKX1mb3IoYT0wLGY9ZS5sZW5ndGg7YTxmO2ErKylpZihufHxBcnJheS5pbmRleE9mKGgsZVthXSkhPT0tMSlBcnJheS5hZGQobCxkb2N1bWVudC5nZXRFbGVtZW50QnlJZChnW2FdKSk7cmV0dXJuIG5ldyBTeXMuV2ViRm9ybXMuUGFnZUxvYWRlZEV2ZW50QXJncyhtLGwsYz9jLmRhdGFJdGVtczp7fSl9LF9nZXRQYWdlTG9hZGluZ0V2ZW50QXJnczpmdW5jdGlvbihmKXt2YXIgaj1bXSxpPVtdLGM9Zi51cGRhdGVQYW5lbERhdGEsaz1jLm9sZFVwZGF0ZVBhbmVsSURzLGw9Yy5vbGRVcGRhdGVQYW5lbENsaWVudElEcyxuPWMudXBkYXRlUGFuZWxJRHMsbT1jLmNoaWxkVXBkYXRlUGFuZWxJRHMsZD1jLnBhbmVsc1RvUmVmcmVzaElEcyxhLGUsYixnLGg9Zi52ZXJzaW9uNDtmb3IoYT0wLGU9ZC5sZW5ndGg7YTxlO2ErPWg/MjoxKXtiPWRbYV07Zz0oaD9kW2ErMV06IiIpfHx0aGlzLl91bmlxdWVJRFRvQ2xpZW50SUQoYik7QXJyYXkuYWRkKGosZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZykpfWZvcihhPTAsZT1rLmxlbmd0aDthPGU7YSsrKXtiPWtbYV07aWYoQXJyYXkuaW5kZXhPZihkLGIpPT09LTEmJihBcnJheS5pbmRleE9mKG4sYik9PT0tMXx8QXJyYXkuaW5kZXhPZihtLGIpPi0xKSlBcnJheS5hZGQoaSxkb2N1bWVudC5nZXRFbGVtZW50QnlJZChsW2FdKSl9cmV0dXJuIG5ldyBTeXMuV2ViRm9ybXMuUGFnZUxvYWRpbmdFdmVudEFyZ3MoaixpLGYuZGF0YUl0ZW1zKX0sX2dldFBvc3RCYWNrU2V0dGluZ3M6ZnVuY3Rpb24oYSxjKXt2YXIgZD1hLGI9bnVsbDt3aGlsZShhKXtpZihhLmlkKXtpZighYiYmQXJyYXkuY29udGFpbnModGhpcy5fYXN5bmNQb3N0QmFja0NvbnRyb2xDbGllbnRJRHMsYS5pZCkpYj10aGlzLl9jcmVhdGVQb3N0QmFja1NldHRpbmdzKHRydWUsbnVsbCxjLGQpO2Vsc2UgaWYoIWImJkFycmF5LmNvbnRhaW5zKHRoaXMuX3Bvc3RCYWNrQ29udHJvbENsaWVudElEcyxhLmlkKSlyZXR1cm4gdGhpcy5fY3JlYXRlUG9zdEJhY2tTZXR0aW5ncyhmYWxzZSk7ZWxzZXt2YXIgZT1BcnJheS5pbmRleE9mKHRoaXMuX3VwZGF0ZVBhbmVsQ2xpZW50SURzLGEuaWQpO2lmKGUhPT0tMSlpZih0aGlzLl91cGRhdGVQYW5lbEhhc0NoaWxkcmVuQXNUcmlnZ2Vyc1tlXSlyZXR1cm4gdGhpcy5fY3JlYXRlUG9zdEJhY2tTZXR0aW5ncyh0cnVlLFt0aGlzLl91cGRhdGVQYW5lbElEc1tlXV0sYyxkKTtlbHNlIHJldHVybiB0aGlzLl9jcmVhdGVQb3N0QmFja1NldHRpbmdzKHRydWUsbnVsbCxjLGQpfWlmKCFiJiZ0aGlzLl9tYXRjaGVzUGFyZW50SURJbkxpc3QoYS5pZCx0aGlzLl9hc3luY1Bvc3RCYWNrQ29udHJvbENsaWVudElEcykpYj10aGlzLl9jcmVhdGVQb3N0QmFja1NldHRpbmdzKHRydWUsbnVsbCxjLGQpO2Vsc2UgaWYoIWImJnRoaXMuX21hdGNoZXNQYXJlbnRJREluTGlzdChhLmlkLHRoaXMuX3Bvc3RCYWNrQ29udHJvbENsaWVudElEcykpcmV0dXJuIHRoaXMuX2NyZWF0ZVBvc3RCYWNrU2V0dGluZ3MoZmFsc2UpfWE9YS5wYXJlbnROb2RlfWlmKCFiKXJldHVybiB0aGlzLl9jcmVhdGVQb3N0QmFja1NldHRpbmdzKGZhbHNlKTtlbHNlIHJldHVybiBifSxfZ2V0U2Nyb2xsUG9zaXRpb246ZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7aWYoYSYmKHRoaXMuX3ZhbGlkUG9zaXRpb24oYS5zY3JvbGxMZWZ0KXx8dGhpcy5fdmFsaWRQb3NpdGlvbihhLnNjcm9sbFRvcCkpKXJldHVybiB7eDphLnNjcm9sbExlZnQseTphLnNjcm9sbFRvcH07ZWxzZXthPWRvY3VtZW50LmJvZHk7aWYoYSYmKHRoaXMuX3ZhbGlkUG9zaXRpb24oYS5zY3JvbGxMZWZ0KXx8dGhpcy5fdmFsaWRQb3NpdGlvbihhLnNjcm9sbFRvcCkpKXJldHVybiB7eDphLnNjcm9sbExlZnQseTphLnNjcm9sbFRvcH07ZWxzZSBpZih0aGlzLl92YWxpZFBvc2l0aW9uKHdpbmRvdy5wYWdlWE9mZnNldCl8fHRoaXMuX3ZhbGlkUG9zaXRpb24od2luZG93LnBhZ2VZT2Zmc2V0KSlyZXR1cm4ge3g6d2luZG93LnBhZ2VYT2Zmc2V0LHk6d2luZG93LnBhZ2VZT2Zmc2V0fTtlbHNlIHJldHVybiB7eDowLHk6MH19fSxfaW5pdGlhbGl6ZUludGVybmFsOmZ1bmN0aW9uKGYsZyxhLGIsZSxjLGQpe2lmKHRoaXMuX3BybUluaXRpYWxpemVkKXRocm93IEVycm9yLmludmFsaWRPcGVyYXRpb24oU3lzLldlYkZvcm1zLlJlcy5QUk1fQ2Fubm90UmVnaXN0ZXJUd2ljZSk7dGhpcy5fcHJtSW5pdGlhbGl6ZWQ9dHJ1ZTt0aGlzLl9tYXN0ZXJQYWdlVW5pcXVlSUQ9ZDt0aGlzLl9zY3JpcHRNYW5hZ2VySUQ9Zjt0aGlzLl9mb3JtPVN5cy5VSS5Eb21FbGVtZW50LnJlc29sdmVFbGVtZW50KGcpO3RoaXMuX29uc3VibWl0PXRoaXMuX2Zvcm0ub25zdWJtaXQ7dGhpcy5fZm9ybS5vbnN1Ym1pdD1udWxsO3RoaXMuX29uRm9ybVN1Ym1pdEhhbmRsZXI9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vbkZvcm1TdWJtaXQpO3RoaXMuX29uRm9ybUVsZW1lbnRDbGlja0hhbmRsZXI9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vbkZvcm1FbGVtZW50Q2xpY2spO3RoaXMuX29uV2luZG93VW5sb2FkSGFuZGxlcj1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX29uV2luZG93VW5sb2FkKTtTeXMuVUkuRG9tRXZlbnQuYWRkSGFuZGxlcih0aGlzLl9mb3JtLCJzdWJtaXQiLHRoaXMuX29uRm9ybVN1Ym1pdEhhbmRsZXIpO1N5cy5VSS5Eb21FdmVudC5hZGRIYW5kbGVyKHRoaXMuX2Zvcm0sImNsaWNrIix0aGlzLl9vbkZvcm1FbGVtZW50Q2xpY2tIYW5kbGVyKTtTeXMuVUkuRG9tRXZlbnQuYWRkSGFuZGxlcih3aW5kb3csInVubG9hZCIsdGhpcy5fb25XaW5kb3dVbmxvYWRIYW5kbGVyKTt0aGlzLl9vcmlnaW5hbERvUG9zdEJhY2s9d2luZG93Ll9fZG9Qb3N0QmFjaztpZih0aGlzLl9vcmlnaW5hbERvUG9zdEJhY2spd2luZG93Ll9fZG9Qb3N0QmFjaz1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX2RvUG9zdEJhY2spO3RoaXMuX29yaWdpbmFsRG9Qb3N0QmFja1dpdGhPcHRpb25zPXdpbmRvdy5XZWJGb3JtX0RvUG9zdEJhY2tXaXRoT3B0aW9ucztpZih0aGlzLl9vcmlnaW5hbERvUG9zdEJhY2tXaXRoT3B0aW9ucyl3aW5kb3cuV2ViRm9ybV9Eb1Bvc3RCYWNrV2l0aE9wdGlvbnM9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9kb1Bvc3RCYWNrV2l0aE9wdGlvbnMpO3RoaXMuX29yaWdpbmFsRmlyZURlZmF1bHRCdXR0b249d2luZG93LldlYkZvcm1fRmlyZURlZmF1bHRCdXR0b247aWYodGhpcy5fb3JpZ2luYWxGaXJlRGVmYXVsdEJ1dHRvbil3aW5kb3cuV2ViRm9ybV9GaXJlRGVmYXVsdEJ1dHRvbj1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX2ZpcmVEZWZhdWx0QnV0dG9uKTt0aGlzLl9vcmlnaW5hbERvQ2FsbGJhY2s9d2luZG93LldlYkZvcm1fRG9DYWxsYmFjaztpZih0aGlzLl9vcmlnaW5hbERvQ2FsbGJhY2spd2luZG93LldlYkZvcm1fRG9DYWxsYmFjaz1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX2RvQ2FsbGJhY2spO3RoaXMuX3BhZ2VMb2FkZWRIYW5kbGVyPUZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5fcGFnZUxvYWRlZEluaXRpYWxMb2FkKTtTeXMuVUkuRG9tRXZlbnQuYWRkSGFuZGxlcih3aW5kb3csImxvYWQiLHRoaXMuX3BhZ2VMb2FkZWRIYW5kbGVyKTtpZihhKXRoaXMuX3VwZGF0ZUNvbnRyb2xzKGEsYixlLGMsdHJ1ZSl9LF9tYXRjaGVzUGFyZW50SURJbkxpc3Q6ZnVuY3Rpb24oYyxiKXtmb3IodmFyIGE9MCxkPWIubGVuZ3RoO2E8ZDthKyspaWYoYy5zdGFydHNXaXRoKGJbYV0rIl8iKSlyZXR1cm4gdHJ1ZTtyZXR1cm4gZmFsc2V9LF9vbkZvcm1FbGVtZW50QWN0aXZlOmZ1bmN0aW9uKGEsZCxlKXtpZihhLmRpc2FibGVkKXJldHVybjt0aGlzLl9hY3RpdmVFbGVtZW50PWE7dGhpcy5fcG9zdEJhY2tTZXR0aW5ncz10aGlzLl9nZXRQb3N0QmFja1NldHRpbmdzKGEsYS5uYW1lKTtpZihhLm5hbWUpe3ZhciBiPWEudGFnTmFtZS50b1VwcGVyQ2FzZSgpO2lmKGI9PT0iSU5QVVQiKXt2YXIgYz1hLnR5cGU7aWYoYz09PSJzdWJtaXQiKXRoaXMuX2FkZGl0aW9uYWxJbnB1dD1lbmNvZGVVUklDb21wb25lbnQoYS5uYW1lKSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KGEudmFsdWUpO2Vsc2UgaWYoYz09PSJpbWFnZSIpdGhpcy5fYWRkaXRpb25hbElucHV0PWVuY29kZVVSSUNvbXBvbmVudChhLm5hbWUpKyIueD0iK2QrIiYiK2VuY29kZVVSSUNvbXBvbmVudChhLm5hbWUpKyIueT0iK2V9ZWxzZSBpZihiPT09IkJVVFRPTiImJmEubmFtZS5sZW5ndGghPT0wJiZhLnR5cGU9PT0ic3VibWl0Iil0aGlzLl9hZGRpdGlvbmFsSW5wdXQ9ZW5jb2RlVVJJQ29tcG9uZW50KGEubmFtZSkrIj0iK2VuY29kZVVSSUNvbXBvbmVudChhLnZhbHVlKX19LF9vbkZvcm1FbGVtZW50Q2xpY2s6ZnVuY3Rpb24oYSl7dGhpcy5fYWN0aXZlRGVmYXVsdEJ1dHRvbkNsaWNrZWQ9YS50YXJnZXQ9PT10aGlzLl9hY3RpdmVEZWZhdWx0QnV0dG9uO3RoaXMuX29uRm9ybUVsZW1lbnRBY3RpdmUoYS50YXJnZXQsYS5vZmZzZXRYLGEub2Zmc2V0WSl9LF9vbkZvcm1TdWJtaXQ6ZnVuY3Rpb24oaSl7dmFyIGYseCxoPXRydWUsej10aGlzLl9pc0Nyb3NzUG9zdDt0aGlzLl9pc0Nyb3NzUG9zdD1mYWxzZTtpZih0aGlzLl9vbnN1Ym1pdCloPXRoaXMuX29uc3VibWl0KCk7aWYoaClmb3IoZj0wLHg9dGhpcy5fb25TdWJtaXRTdGF0ZW1lbnRzLmxlbmd0aDtmPHg7ZisrKWlmKCF0aGlzLl9vblN1Ym1pdFN0YXRlbWVudHNbZl0oKSl7aD1mYWxzZTticmVha31pZighaCl7aWYoaSlpLnByZXZlbnREZWZhdWx0KCk7cmV0dXJufXZhciB3PXRoaXMuX2Zvcm07aWYoeilyZXR1cm47aWYodGhpcy5fYWN0aXZlRGVmYXVsdEJ1dHRvbiYmIXRoaXMuX2FjdGl2ZURlZmF1bHRCdXR0b25DbGlja2VkKXRoaXMuX29uRm9ybUVsZW1lbnRBY3RpdmUodGhpcy5fYWN0aXZlRGVmYXVsdEJ1dHRvbiwwLDApO2lmKCF0aGlzLl9wb3N0QmFja1NldHRpbmdzfHwhdGhpcy5fcG9zdEJhY2tTZXR0aW5ncy5hc3luYylyZXR1cm47dmFyIGI9bmV3IFN5cy5TdHJpbmdCdWlsZGVyLHM9dy5lbGVtZW50cyxCPXMubGVuZ3RoLHQ9dGhpcy5fY3JlYXRlUGFuZWxJRChudWxsLHRoaXMuX3Bvc3RCYWNrU2V0dGluZ3MpO2IuYXBwZW5kKHQpO2ZvcihmPTA7ZjxCO2YrKyl7dmFyIGU9c1tmXSxnPWUubmFtZTtpZih0eXBlb2YgZz09PSJ1bmRlZmluZWQifHxnPT09bnVsbHx8Zy5sZW5ndGg9PT0wfHxnPT09dGhpcy5fc2NyaXB0TWFuYWdlcklEKWNvbnRpbnVlO3ZhciBuPWUudGFnTmFtZS50b1VwcGVyQ2FzZSgpO2lmKG49PT0iSU5QVVQiKXt2YXIgcD1lLnR5cGU7aWYodGhpcy5fdGV4dFR5cGVzLnRlc3QocCl8fChwPT09ImNoZWNrYm94Inx8cD09PSJyYWRpbyIpJiZlLmNoZWNrZWQpe2IuYXBwZW5kKGVuY29kZVVSSUNvbXBvbmVudChnKSk7Yi5hcHBlbmQoIj0iKTtiLmFwcGVuZChlbmNvZGVVUklDb21wb25lbnQoZS52YWx1ZSkpO2IuYXBwZW5kKCImIil9fWVsc2UgaWYobj09PSJTRUxFQ1QiKXt2YXIgQT1lLm9wdGlvbnMubGVuZ3RoO2Zvcih2YXIgcT0wO3E8QTtxKyspe3ZhciB1PWUub3B0aW9uc1txXTtpZih1LnNlbGVjdGVkKXtiLmFwcGVuZChlbmNvZGVVUklDb21wb25lbnQoZykpO2IuYXBwZW5kKCI9Iik7Yi5hcHBlbmQoZW5jb2RlVVJJQ29tcG9uZW50KHUudmFsdWUpKTtiLmFwcGVuZCgiJiIpfX19ZWxzZSBpZihuPT09IlRFWFRBUkVBIil7Yi5hcHBlbmQoZW5jb2RlVVJJQ29tcG9uZW50KGcpKTtiLmFwcGVuZCgiPSIpO2IuYXBwZW5kKGVuY29kZVVSSUNvbXBvbmVudChlLnZhbHVlKSk7Yi5hcHBlbmQoIiYiKX19Yi5hcHBlbmQoIl9fQVNZTkNQT1NUPXRydWUmIik7aWYodGhpcy5fYWRkaXRpb25hbElucHV0KXtiLmFwcGVuZCh0aGlzLl9hZGRpdGlvbmFsSW5wdXQpO3RoaXMuX2FkZGl0aW9uYWxJbnB1dD1udWxsfXZhciBjPW5ldyBTeXMuTmV0LldlYlJlcXVlc3QsYT13LmFjdGlvbjtpZihTeXMuQnJvd3Nlci5hZ2VudD09PVN5cy5Ccm93c2VyLkludGVybmV0RXhwbG9yZXIpe3ZhciByPWEuaW5kZXhPZigiIyIpO2lmKHIhPT0tMSlhPWEuc3Vic3RyKDAscik7dmFyIG89IiIsdj0iIixtPWEuaW5kZXhPZigiPyIpO2lmKG0hPT0tMSl7dj1hLnN1YnN0cihtKTthPWEuc3Vic3RyKDAsbSl9aWYoL15odHRwcz9cOlwvXC8uKiQvZ2kudGVzdChhKSl7dmFyIHk9YS5pbmRleE9mKCIvLyIpKzIsbD1hLmluZGV4T2YoIi8iLHkpO2lmKGw9PT0tMSl7bz1hO2E9IiJ9ZWxzZXtvPWEuc3Vic3RyKDAsbCk7YT1hLnN1YnN0cihsKX19YT1vK2VuY29kZVVSSShkZWNvZGVVUkkoYSkpK3Z9Yy5zZXRfdXJsKGEpO2MuZ2V0X2hlYWRlcnMoKVsiWC1NaWNyb3NvZnRBamF4Il09IkRlbHRhPXRydWUiO2MuZ2V0X2hlYWRlcnMoKVsiQ2FjaGUtQ29udHJvbCJdPSJuby1jYWNoZSI7Yy5zZXRfdGltZW91dCh0aGlzLl9hc3luY1Bvc3RCYWNrVGltZW91dCk7Yy5hZGRfY29tcGxldGVkKEZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5fb25Gb3JtU3VibWl0Q29tcGxldGVkKSk7Yy5zZXRfYm9keShiLnRvU3RyaW5nKCkpO3ZhciBqLGQsaz10aGlzLl9nZXRfZXZlbnRIYW5kbGVyTGlzdCgpLmdldEhhbmRsZXIoImluaXRpYWxpemVSZXF1ZXN0Iik7aWYoayl7aj10aGlzLl9wb3N0QmFja1NldHRpbmdzLnBhbmVsc1RvVXBkYXRlO2Q9bmV3IFN5cy5XZWJGb3Jtcy5Jbml0aWFsaXplUmVxdWVzdEV2ZW50QXJncyhjLHRoaXMuX3Bvc3RCYWNrU2V0dGluZ3Muc291cmNlRWxlbWVudCxqKTtrKHRoaXMsZCk7aD0hZC5nZXRfY2FuY2VsKCl9aWYoIWgpe2lmKGkpaS5wcmV2ZW50RGVmYXVsdCgpO3JldHVybn1pZihkJiZkLl91cGRhdGVkKXtqPWQuZ2V0X3VwZGF0ZVBhbmVsc1RvVXBkYXRlKCk7Yy5zZXRfYm9keShjLmdldF9ib2R5KCkucmVwbGFjZSh0LHRoaXMuX2NyZWF0ZVBhbmVsSUQoaix0aGlzLl9wb3N0QmFja1NldHRpbmdzKSkpfXRoaXMuX3Njcm9sbFBvc2l0aW9uPXRoaXMuX2dldFNjcm9sbFBvc2l0aW9uKCk7dGhpcy5hYm9ydFBvc3RCYWNrKCk7az10aGlzLl9nZXRfZXZlbnRIYW5kbGVyTGlzdCgpLmdldEhhbmRsZXIoImJlZ2luUmVxdWVzdCIpO2lmKGspe2Q9bmV3IFN5cy5XZWJGb3Jtcy5CZWdpblJlcXVlc3RFdmVudEFyZ3MoYyx0aGlzLl9wb3N0QmFja1NldHRpbmdzLnNvdXJjZUVsZW1lbnQsanx8dGhpcy5fcG9zdEJhY2tTZXR0aW5ncy5wYW5lbHNUb1VwZGF0ZSk7ayh0aGlzLGQpfWlmKHRoaXMuX29yaWdpbmFsRG9DYWxsYmFjayl0aGlzLl9jYW5jZWxQZW5kaW5nQ2FsbGJhY2tzKCk7dGhpcy5fcmVxdWVzdD1jO3RoaXMuX3Byb2Nlc3NpbmdSZXF1ZXN0PWZhbHNlO2MuaW52b2tlKCk7aWYoaSlpLnByZXZlbnREZWZhdWx0KCl9LF9vbkZvcm1TdWJtaXRDb21wbGV0ZWQ6ZnVuY3Rpb24oYyl7dGhpcy5fcHJvY2Vzc2luZ1JlcXVlc3Q9dHJ1ZTtpZihjLmdldF90aW1lZE91dCgpKXt0aGlzLl9lbmRQb3N0QmFjayh0aGlzLl9jcmVhdGVQYWdlUmVxdWVzdE1hbmFnZXJUaW1lb3V0RXJyb3IoKSxjLG51bGwpO3JldHVybn1pZihjLmdldF9hYm9ydGVkKCkpe3RoaXMuX2VuZFBvc3RCYWNrKG51bGwsYyxudWxsKTtyZXR1cm59aWYoIXRoaXMuX3JlcXVlc3R8fGMuZ2V0X3dlYlJlcXVlc3QoKSE9PXRoaXMuX3JlcXVlc3QpcmV0dXJuO2lmKGMuZ2V0X3N0YXR1c0NvZGUoKSE9PTIwMCl7dGhpcy5fZW5kUG9zdEJhY2sodGhpcy5fY3JlYXRlUGFnZVJlcXVlc3RNYW5hZ2VyU2VydmVyRXJyb3IoYy5nZXRfc3RhdHVzQ29kZSgpKSxjLG51bGwpO3JldHVybn12YXIgYT10aGlzLl9wYXJzZURlbHRhKGMpO2lmKCFhKXJldHVybjt2YXIgYixlO2lmKGEuYXN5bmNQb3N0QmFja0NvbnRyb2xJRHNOb2RlJiZhLnBvc3RCYWNrQ29udHJvbElEc05vZGUmJmEudXBkYXRlUGFuZWxJRHNOb2RlJiZhLnBhbmVsc1RvUmVmcmVzaE5vZGUmJmEuY2hpbGRVcGRhdGVQYW5lbElEc05vZGUpe3ZhciByPXRoaXMuX3VwZGF0ZVBhbmVsSURzLG49dGhpcy5fdXBkYXRlUGFuZWxDbGllbnRJRHMsaT1hLmNoaWxkVXBkYXRlUGFuZWxJRHNOb2RlLmNvbnRlbnQscD1pLmxlbmd0aD9pLnNwbGl0KCIsIik6W10sbT10aGlzLl9zcGxpdE5vZGVJbnRvQXJyYXkoYS5hc3luY1Bvc3RCYWNrQ29udHJvbElEc05vZGUpLG89dGhpcy5fc3BsaXROb2RlSW50b0FycmF5KGEucG9zdEJhY2tDb250cm9sSURzTm9kZSkscT10aGlzLl9zcGxpdE5vZGVJbnRvQXJyYXkoYS51cGRhdGVQYW5lbElEc05vZGUpLGc9dGhpcy5fc3BsaXROb2RlSW50b0FycmF5KGEucGFuZWxzVG9SZWZyZXNoTm9kZSksaD1hLnZlcnNpb240O2ZvcihiPTAsZT1nLmxlbmd0aDtiPGU7Yis9aD8yOjEpe3ZhciBqPShoP2dbYisxXToiIil8fHRoaXMuX3VuaXF1ZUlEVG9DbGllbnRJRChnW2JdKTtpZighZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaikpe3RoaXMuX2VuZFBvc3RCYWNrKEVycm9yLmludmFsaWRPcGVyYXRpb24oU3RyaW5nLmZvcm1hdChTeXMuV2ViRm9ybXMuUmVzLlBSTV9NaXNzaW5nUGFuZWwsaikpLGMsYSk7cmV0dXJufX12YXIgZj10aGlzLl9wcm9jZXNzVXBkYXRlUGFuZWxBcnJheXMocSxtLG8saCk7Zi5vbGRVcGRhdGVQYW5lbElEcz1yO2Yub2xkVXBkYXRlUGFuZWxDbGllbnRJRHM9bjtmLmNoaWxkVXBkYXRlUGFuZWxJRHM9cDtmLnBhbmVsc1RvUmVmcmVzaElEcz1nO2EudXBkYXRlUGFuZWxEYXRhPWZ9YS5kYXRhSXRlbXM9e307dmFyIGQ7Zm9yKGI9MCxlPWEuZGF0YUl0ZW1Ob2Rlcy5sZW5ndGg7YjxlO2IrKyl7ZD1hLmRhdGFJdGVtTm9kZXNbYl07YS5kYXRhSXRlbXNbZC5pZF09ZC5jb250ZW50fWZvcihiPTAsZT1hLmRhdGFJdGVtSnNvbk5vZGVzLmxlbmd0aDtiPGU7YisrKXtkPWEuZGF0YUl0ZW1Kc29uTm9kZXNbYl07YS5kYXRhSXRlbXNbZC5pZF09U3lzLlNlcmlhbGl6YXRpb24uSmF2YVNjcmlwdFNlcmlhbGl6ZXIuZGVzZXJpYWxpemUoZC5jb250ZW50KX12YXIgbD10aGlzLl9nZXRfZXZlbnRIYW5kbGVyTGlzdCgpLmdldEhhbmRsZXIoInBhZ2VMb2FkaW5nIik7aWYobClsKHRoaXMsdGhpcy5fZ2V0UGFnZUxvYWRpbmdFdmVudEFyZ3MoYSkpO1N5cy5fU2NyaXB0TG9hZGVyLnJlYWRMb2FkZWRTY3JpcHRzKCk7U3lzLkFwcGxpY2F0aW9uLmJlZ2luQ3JlYXRlQ29tcG9uZW50cygpO3ZhciBrPVN5cy5fU2NyaXB0TG9hZGVyLmdldEluc3RhbmNlKCk7dGhpcy5fcXVldWVTY3JpcHRzKGssYS5zY3JpcHRCbG9ja05vZGVzLHRydWUsZmFsc2UpO3RoaXMuX3Byb2Nlc3NpbmdSZXF1ZXN0PXRydWU7ay5sb2FkU2NyaXB0cygwLEZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsRnVuY3Rpb24uY3JlYXRlQ2FsbGJhY2sodGhpcy5fc2NyaXB0SW5jbHVkZXNMb2FkQ29tcGxldGUsYSkpLEZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsRnVuY3Rpb24uY3JlYXRlQ2FsbGJhY2sodGhpcy5fc2NyaXB0SW5jbHVkZXNMb2FkRmFpbGVkLGEpKSxudWxsKX0sX29uV2luZG93VW5sb2FkOmZ1bmN0aW9uKCl7dGhpcy5kaXNwb3NlKCl9LF9wYWdlTG9hZGVkOmZ1bmN0aW9uKGEsYyl7dmFyIGI9dGhpcy5fZ2V0X2V2ZW50SGFuZGxlckxpc3QoKS5nZXRIYW5kbGVyKCJwYWdlTG9hZGVkIik7aWYoYiliKHRoaXMsdGhpcy5fZ2V0UGFnZUxvYWRlZEV2ZW50QXJncyhhLGMpKTtpZighYSlTeXMuQXBwbGljYXRpb24ucmFpc2VMb2FkKCl9LF9wYWdlTG9hZGVkSW5pdGlhbExvYWQ6ZnVuY3Rpb24oKXt0aGlzLl9wYWdlTG9hZGVkKHRydWUsbnVsbCl9LF9wYXJzZURlbHRhOmZ1bmN0aW9uKGgpe3ZhciBjPWguZ2V0X3Jlc3BvbnNlRGF0YSgpLGQsaSxFLEYsRCxiPTAsZT1udWxsLGs9W107d2hpbGUoYjxjLmxlbmd0aCl7ZD1jLmluZGV4T2YoInwiLGIpO2lmKGQ9PT0tMSl7ZT10aGlzLl9maW5kVGV4dChjLGIpO2JyZWFrfWk9cGFyc2VJbnQoYy5zdWJzdHJpbmcoYixkKSwxMCk7aWYoaSUxIT09MCl7ZT10aGlzLl9maW5kVGV4dChjLGIpO2JyZWFrfWI9ZCsxO2Q9Yy5pbmRleE9mKCJ8IixiKTtpZihkPT09LTEpe2U9dGhpcy5fZmluZFRleHQoYyxiKTticmVha31FPWMuc3Vic3RyaW5nKGIsZCk7Yj1kKzE7ZD1jLmluZGV4T2YoInwiLGIpO2lmKGQ9PT0tMSl7ZT10aGlzLl9maW5kVGV4dChjLGIpO2JyZWFrfUY9Yy5zdWJzdHJpbmcoYixkKTtiPWQrMTtpZihiK2k+PWMubGVuZ3RoKXtlPXRoaXMuX2ZpbmRUZXh0KGMsYy5sZW5ndGgpO2JyZWFrfUQ9Yy5zdWJzdHIoYixpKTtiKz1pO2lmKGMuY2hhckF0KGIpIT09InwiKXtlPXRoaXMuX2ZpbmRUZXh0KGMsYik7YnJlYWt9YisrO0FycmF5LmFkZChrLHt0eXBlOkUsaWQ6Rixjb250ZW50OkR9KX1pZihlKXt0aGlzLl9lbmRQb3N0QmFjayh0aGlzLl9jcmVhdGVQYWdlUmVxdWVzdE1hbmFnZXJQYXJzZXJFcnJvcihTdHJpbmcuZm9ybWF0KFN5cy5XZWJGb3Jtcy5SZXMuUFJNX1BhcnNlckVycm9yRGV0YWlscyxlKSksaCxudWxsKTtyZXR1cm4gbnVsbH12YXIgeD1bXSx3PVtdLHE9W10saj1bXSx0PVtdLEM9W10sQT1bXSx6PVtdLHY9W10scz1bXSxtLHAsdSxuLG8scix5LGc7Zm9yKHZhciBsPTAsRz1rLmxlbmd0aDtsPEc7bCsrKXt2YXIgYT1rW2xdO3N3aXRjaChhLnR5cGUpe2Nhc2UgIiMiOmc9YTticmVhaztjYXNlICJ1cGRhdGVQYW5lbCI6QXJyYXkuYWRkKHgsYSk7YnJlYWs7Y2FzZSAiaGlkZGVuRmllbGQiOkFycmF5LmFkZCh3LGEpO2JyZWFrO2Nhc2UgImFycmF5RGVjbGFyYXRpb24iOkFycmF5LmFkZChxLGEpO2JyZWFrO2Nhc2UgInNjcmlwdEJsb2NrIjpBcnJheS5hZGQoaixhKTticmVhaztjYXNlICJmYWxsYmFja1NjcmlwdCI6altqLmxlbmd0aC0xXS5mYWxsYmFjaz1hLmlkO2Nhc2UgInNjcmlwdFN0YXJ0dXBCbG9jayI6QXJyYXkuYWRkKHQsYSk7YnJlYWs7Y2FzZSAiZXhwYW5kbyI6QXJyYXkuYWRkKEMsYSk7YnJlYWs7Y2FzZSAib25TdWJtaXQiOkFycmF5LmFkZChBLGEpO2JyZWFrO2Nhc2UgImFzeW5jUG9zdEJhY2tDb250cm9sSURzIjptPWE7YnJlYWs7Y2FzZSAicG9zdEJhY2tDb250cm9sSURzIjpwPWE7YnJlYWs7Y2FzZSAidXBkYXRlUGFuZWxJRHMiOnU9YTticmVhaztjYXNlICJhc3luY1Bvc3RCYWNrVGltZW91dCI6bj1hO2JyZWFrO2Nhc2UgImNoaWxkVXBkYXRlUGFuZWxJRHMiOm89YTticmVhaztjYXNlICJwYW5lbHNUb1JlZnJlc2hJRHMiOnI9YTticmVhaztjYXNlICJmb3JtQWN0aW9uIjp5PWE7YnJlYWs7Y2FzZSAiZGF0YUl0ZW0iOkFycmF5LmFkZCh6LGEpO2JyZWFrO2Nhc2UgImRhdGFJdGVtSnNvbiI6QXJyYXkuYWRkKHYsYSk7YnJlYWs7Y2FzZSAic2NyaXB0RGlzcG9zZSI6QXJyYXkuYWRkKHMsYSk7YnJlYWs7Y2FzZSAicGFnZVJlZGlyZWN0IjppZihnJiZwYXJzZUZsb2F0KGcuY29udGVudCk+PTQpYS5jb250ZW50PXVuZXNjYXBlKGEuY29udGVudCk7aWYoU3lzLkJyb3dzZXIuYWdlbnQ9PT1TeXMuQnJvd3Nlci5JbnRlcm5ldEV4cGxvcmVyKXt2YXIgZj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7Zi5zdHlsZS5kaXNwbGF5PSJub25lIjtmLmF0dGFjaEV2ZW50KCJvbmNsaWNrIixCKTtmLmhyZWY9YS5jb250ZW50O3RoaXMuX2Zvcm0ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZix0aGlzLl9mb3JtKTtmLmNsaWNrKCk7Zi5kZXRhY2hFdmVudCgib25jbGljayIsQik7dGhpcy5fZm9ybS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGYpO2Z1bmN0aW9uIEIoYSl7YS5jYW5jZWxCdWJibGU9dHJ1ZX19ZWxzZSB3aW5kb3cubG9jYXRpb24uaHJlZj1hLmNvbnRlbnQ7cmV0dXJuIG51bGw7Y2FzZSAiZXJyb3IiOnRoaXMuX2VuZFBvc3RCYWNrKHRoaXMuX2NyZWF0ZVBhZ2VSZXF1ZXN0TWFuYWdlclNlcnZlckVycm9yKE51bWJlci5wYXJzZUludmFyaWFudChhLmlkKSxhLmNvbnRlbnQpLGgsbnVsbCk7cmV0dXJuIG51bGw7Y2FzZSAicGFnZVRpdGxlIjpkb2N1bWVudC50aXRsZT1hLmNvbnRlbnQ7YnJlYWs7Y2FzZSAiZm9jdXMiOnRoaXMuX2NvbnRyb2xJRFRvRm9jdXM9YS5jb250ZW50O2JyZWFrO2RlZmF1bHQ6dGhpcy5fZW5kUG9zdEJhY2sodGhpcy5fY3JlYXRlUGFnZVJlcXVlc3RNYW5hZ2VyUGFyc2VyRXJyb3IoU3RyaW5nLmZvcm1hdChTeXMuV2ViRm9ybXMuUmVzLlBSTV9Vbmtub3duVG9rZW4sYS50eXBlKSksaCxudWxsKTtyZXR1cm4gbnVsbH19cmV0dXJuIHt2ZXJzaW9uNDpnP3BhcnNlRmxvYXQoZy5jb250ZW50KT49NDpmYWxzZSxleGVjdXRvcjpoLHVwZGF0ZVBhbmVsTm9kZXM6eCxoaWRkZW5GaWVsZE5vZGVzOncsYXJyYXlEZWNsYXJhdGlvbk5vZGVzOnEsc2NyaXB0QmxvY2tOb2RlczpqLHNjcmlwdFN0YXJ0dXBOb2Rlczp0LGV4cGFuZG9Ob2RlczpDLG9uU3VibWl0Tm9kZXM6QSxkYXRhSXRlbU5vZGVzOnosZGF0YUl0ZW1Kc29uTm9kZXM6dixzY3JpcHREaXNwb3NlTm9kZXM6cyxhc3luY1Bvc3RCYWNrQ29udHJvbElEc05vZGU6bSxwb3N0QmFja0NvbnRyb2xJRHNOb2RlOnAsdXBkYXRlUGFuZWxJRHNOb2RlOnUsYXN5bmNQb3N0QmFja1RpbWVvdXROb2RlOm4sY2hpbGRVcGRhdGVQYW5lbElEc05vZGU6byxwYW5lbHNUb1JlZnJlc2hOb2RlOnIsZm9ybUFjdGlvbk5vZGU6eX19LF9wcm9jZXNzVXBkYXRlUGFuZWxBcnJheXM6ZnVuY3Rpb24oZSxxLHIsZil7dmFyIGQsYyxiO2lmKGUpe3ZhciBpPWUubGVuZ3RoLGo9Zj8yOjE7ZD1uZXcgQXJyYXkoaS9qKTtjPW5ldyBBcnJheShpL2opO2I9bmV3IEFycmF5KGkvaik7Zm9yKHZhciBnPTAsaD0wO2c8aTtnKz1qLGgrKyl7dmFyIHAsYT1lW2ddLGs9Zj9lW2crMV06IiI7cD1hLmNoYXJBdCgwKT09PSJ0IjthPWEuc3Vic3RyKDEpO2lmKCFrKWs9dGhpcy5fdW5pcXVlSURUb0NsaWVudElEKGEpO2JbaF09cDtkW2hdPWE7Y1toXT1rfX1lbHNle2Q9W107Yz1bXTtiPVtdfXZhciBuPVtdLGw9W107dGhpcy5fY29udmVydFRvQ2xpZW50SURzKHEsbixsLGYpO3ZhciBvPVtdLG09W107dGhpcy5fY29udmVydFRvQ2xpZW50SURzKHIsbyxtLGYpO3JldHVybiB7dXBkYXRlUGFuZWxJRHM6ZCx1cGRhdGVQYW5lbENsaWVudElEczpjLHVwZGF0ZVBhbmVsSGFzQ2hpbGRyZW5Bc1RyaWdnZXJzOmIsYXN5bmNQb3N0QmFja0NvbnRyb2xJRHM6bixhc3luY1Bvc3RCYWNrQ29udHJvbENsaWVudElEczpsLHBvc3RCYWNrQ29udHJvbElEczpvLHBvc3RCYWNrQ29udHJvbENsaWVudElEczptfX0sX3F1ZXVlU2NyaXB0czpmdW5jdGlvbihzY3JpcHRMb2FkZXIsc2NyaXB0QmxvY2tOb2RlcyxxdWV1ZUluY2x1ZGVzLHF1ZXVlQmxvY2tzKXtmb3IodmFyIGk9MCxsPXNjcmlwdEJsb2NrTm9kZXMubGVuZ3RoO2k8bDtpKyspe3ZhciBzY3JpcHRCbG9ja1R5cGU9c2NyaXB0QmxvY2tOb2Rlc1tpXS5pZDtzd2l0Y2goc2NyaXB0QmxvY2tUeXBlKXtjYXNlICJTY3JpcHRDb250ZW50Tm9UYWdzIjppZighcXVldWVCbG9ja3MpY29udGludWU7c2NyaXB0TG9hZGVyLnF1ZXVlU2NyaXB0QmxvY2soc2NyaXB0QmxvY2tOb2Rlc1tpXS5jb250ZW50KTticmVhaztjYXNlICJTY3JpcHRDb250ZW50V2l0aFRhZ3MiOnZhciBzY3JpcHRUYWdBdHRyaWJ1dGVzO2V2YWwoInNjcmlwdFRhZ0F0dHJpYnV0ZXMgPSAiK3NjcmlwdEJsb2NrTm9kZXNbaV0uY29udGVudCk7aWYoc2NyaXB0VGFnQXR0cmlidXRlcy5zcmMpe2lmKCFxdWV1ZUluY2x1ZGVzfHxTeXMuX1NjcmlwdExvYWRlci5pc1NjcmlwdExvYWRlZChzY3JpcHRUYWdBdHRyaWJ1dGVzLnNyYykpY29udGludWV9ZWxzZSBpZighcXVldWVCbG9ja3MpY29udGludWU7c2NyaXB0TG9hZGVyLnF1ZXVlQ3VzdG9tU2NyaXB0VGFnKHNjcmlwdFRhZ0F0dHJpYnV0ZXMpO2JyZWFrO2Nhc2UgIlNjcmlwdFBhdGgiOnZhciBzY3JpcHQ9c2NyaXB0QmxvY2tOb2Rlc1tpXTtpZighcXVldWVJbmNsdWRlc3x8U3lzLl9TY3JpcHRMb2FkZXIuaXNTY3JpcHRMb2FkZWQoc2NyaXB0LmNvbnRlbnQpKWNvbnRpbnVlO3NjcmlwdExvYWRlci5xdWV1ZVNjcmlwdFJlZmVyZW5jZShzY3JpcHQuY29udGVudCxzY3JpcHQuZmFsbGJhY2spfX19LF9yZWdpc3RlckRpc3Bvc2VTY3JpcHQ6ZnVuY3Rpb24oYSxiKXtpZighdGhpcy5fc2NyaXB0RGlzcG9zZXNbYV0pdGhpcy5fc2NyaXB0RGlzcG9zZXNbYV09W2JdO2Vsc2UgQXJyYXkuYWRkKHRoaXMuX3NjcmlwdERpc3Bvc2VzW2FdLGIpfSxfc2NyaXB0SW5jbHVkZXNMb2FkQ29tcGxldGU6ZnVuY3Rpb24oZSxiKXtpZihiLmV4ZWN1dG9yLmdldF93ZWJSZXF1ZXN0KCkhPT10aGlzLl9yZXF1ZXN0KXJldHVybjt0aGlzLl9jb21taXRDb250cm9scyhiLnVwZGF0ZVBhbmVsRGF0YSxiLmFzeW5jUG9zdEJhY2tUaW1lb3V0Tm9kZT9iLmFzeW5jUG9zdEJhY2tUaW1lb3V0Tm9kZS5jb250ZW50Om51bGwpO2lmKGIuZm9ybUFjdGlvbk5vZGUpdGhpcy5fZm9ybS5hY3Rpb249Yi5mb3JtQWN0aW9uTm9kZS5jb250ZW50O3ZhciBhLGQsYztmb3IoYT0wLGQ9Yi51cGRhdGVQYW5lbE5vZGVzLmxlbmd0aDthPGQ7YSsrKXtjPWIudXBkYXRlUGFuZWxOb2Rlc1thXTt2YXIgaj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChjLmlkKTtpZighail7dGhpcy5fZW5kUG9zdEJhY2soRXJyb3IuaW52YWxpZE9wZXJhdGlvbihTdHJpbmcuZm9ybWF0KFN5cy5XZWJGb3Jtcy5SZXMuUFJNX01pc3NpbmdQYW5lbCxjLmlkKSksYi5leGVjdXRvcixiKTtyZXR1cm59dGhpcy5fdXBkYXRlUGFuZWwoaixjLmNvbnRlbnQpfWZvcihhPTAsZD1iLnNjcmlwdERpc3Bvc2VOb2Rlcy5sZW5ndGg7YTxkO2ErKyl7Yz1iLnNjcmlwdERpc3Bvc2VOb2Rlc1thXTt0aGlzLl9yZWdpc3RlckRpc3Bvc2VTY3JpcHQoYy5pZCxjLmNvbnRlbnQpfWZvcihhPTAsZD10aGlzLl90cmFuc2llbnRGaWVsZHMubGVuZ3RoO2E8ZDthKyspe3ZhciBnPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuX3RyYW5zaWVudEZpZWxkc1thXSk7aWYoZyl7dmFyIGs9Zy5faXNDb250YWluZWQ/Zy5wYXJlbnROb2RlOmc7ay5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGspfX1mb3IoYT0wLGQ9Yi5oaWRkZW5GaWVsZE5vZGVzLmxlbmd0aDthPGQ7YSsrKXtjPWIuaGlkZGVuRmllbGROb2Rlc1thXTt0aGlzLl9jcmVhdGVIaWRkZW5GaWVsZChjLmlkLGMuY29udGVudCl9aWYoYi5zY3JpcHRzRmFpbGVkKXRocm93IFN5cy5fU2NyaXB0TG9hZGVyLl9lcnJvclNjcmlwdExvYWRGYWlsZWQoYi5zY3JpcHRzRmFpbGVkLnNyYyxiLnNjcmlwdHNGYWlsZWQubXVsdGlwbGVDYWxsYmFja3MpO3RoaXMuX3F1ZXVlU2NyaXB0cyhlLGIuc2NyaXB0QmxvY2tOb2RlcyxmYWxzZSx0cnVlKTt2YXIgaT0iIjtmb3IoYT0wLGQ9Yi5hcnJheURlY2xhcmF0aW9uTm9kZXMubGVuZ3RoO2E8ZDthKyspe2M9Yi5hcnJheURlY2xhcmF0aW9uTm9kZXNbYV07aSs9IlN5cy5XZWJGb3Jtcy5QYWdlUmVxdWVzdE1hbmFnZXIuX2FkZEFycmF5RWxlbWVudCgnIitjLmlkKyInLCAiK2MuY29udGVudCsiKTtcclxuIn12YXIgaD0iIjtmb3IoYT0wLGQ9Yi5leHBhbmRvTm9kZXMubGVuZ3RoO2E8ZDthKyspe2M9Yi5leHBhbmRvTm9kZXNbYV07aCs9Yy5pZCsiID0gIitjLmNvbnRlbnQrIlxyXG4ifWlmKGkubGVuZ3RoKWUucXVldWVTY3JpcHRCbG9jayhpKTtpZihoLmxlbmd0aCllLnF1ZXVlU2NyaXB0QmxvY2soaCk7dGhpcy5fcXVldWVTY3JpcHRzKGUsYi5zY3JpcHRTdGFydHVwTm9kZXMsdHJ1ZSx0cnVlKTt2YXIgZj0iIjtmb3IoYT0wLGQ9Yi5vblN1Ym1pdE5vZGVzLmxlbmd0aDthPGQ7YSsrKXtpZihhPT09MClmPSJBcnJheS5hZGQoU3lzLldlYkZvcm1zLlBhZ2VSZXF1ZXN0TWFuYWdlci5nZXRJbnN0YW5jZSgpLl9vblN1Ym1pdFN0YXRlbWVudHMsIGZ1bmN0aW9uKCkge1xyXG4iO2YrPWIub25TdWJtaXROb2Rlc1thXS5jb250ZW50KyJcclxuIn1pZihmLmxlbmd0aCl7Zis9IlxyXG5yZXR1cm4gdHJ1ZTtcclxufSk7XHJcbiI7ZS5xdWV1ZVNjcmlwdEJsb2NrKGYpfWUubG9hZFNjcmlwdHMoMCxGdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLEZ1bmN0aW9uLmNyZWF0ZUNhbGxiYWNrKHRoaXMuX3NjcmlwdHNMb2FkQ29tcGxldGUsYikpLG51bGwsbnVsbCl9LF9zY3JpcHRJbmNsdWRlc0xvYWRGYWlsZWQ6ZnVuY3Rpb24oZCxjLGIsYSl7YS5zY3JpcHRzRmFpbGVkPXtzcmM6Yy5zcmMsbXVsdGlwbGVDYWxsYmFja3M6Yn07dGhpcy5fc2NyaXB0SW5jbHVkZXNMb2FkQ29tcGxldGUoZCxhKX0sX3NjcmlwdHNMb2FkQ29tcGxldGU6ZnVuY3Rpb24oZixjKXt2YXIgZT1jLmV4ZWN1dG9yO2lmKHdpbmRvdy5fX3RoZUZvcm1Qb3N0RGF0YSl3aW5kb3cuX190aGVGb3JtUG9zdERhdGE9IiI7aWYod2luZG93Ll9fdGhlRm9ybVBvc3RDb2xsZWN0aW9uKXdpbmRvdy5fX3RoZUZvcm1Qb3N0Q29sbGVjdGlvbj1bXTtpZih3aW5kb3cuV2ViRm9ybV9Jbml0Q2FsbGJhY2spd2luZG93LldlYkZvcm1fSW5pdENhbGxiYWNrKCk7aWYodGhpcy5fc2Nyb2xsUG9zaXRpb24pe2lmKHdpbmRvdy5zY3JvbGxUbyl3aW5kb3cuc2Nyb2xsVG8odGhpcy5fc2Nyb2xsUG9zaXRpb24ueCx0aGlzLl9zY3JvbGxQb3NpdGlvbi55KTt0aGlzLl9zY3JvbGxQb3NpdGlvbj1udWxsfVN5cy5BcHBsaWNhdGlvbi5lbmRDcmVhdGVDb21wb25lbnRzKCk7dGhpcy5fcGFnZUxvYWRlZChmYWxzZSxjKTt0aGlzLl9lbmRQb3N0QmFjayhudWxsLGUsYyk7aWYodGhpcy5fY29udHJvbElEVG9Gb2N1cyl7dmFyIGEsZDtpZihTeXMuQnJvd3Nlci5hZ2VudD09PVN5cy5Ccm93c2VyLkludGVybmV0RXhwbG9yZXIpe3ZhciBiPSRnZXQodGhpcy5fY29udHJvbElEVG9Gb2N1cyk7YT1iO2lmKGImJiFXZWJGb3JtX0NhbkZvY3VzKGIpKWE9V2ViRm9ybV9GaW5kRmlyc3RGb2N1c2FibGVDaGlsZChiKTtpZihhJiZ0eXBlb2YgYS5jb250ZW50RWRpdGFibGUhPT0idW5kZWZpbmVkIil7ZD1hLmNvbnRlbnRFZGl0YWJsZTthLmNvbnRlbnRFZGl0YWJsZT1mYWxzZX1lbHNlIGE9bnVsbH1XZWJGb3JtX0F1dG9Gb2N1cyh0aGlzLl9jb250cm9sSURUb0ZvY3VzKTtpZihhKWEuY29udGVudEVkaXRhYmxlPWQ7dGhpcy5fY29udHJvbElEVG9Gb2N1cz1udWxsfX0sX3NwbGl0Tm9kZUludG9BcnJheTpmdW5jdGlvbihiKXt2YXIgYT1iLmNvbnRlbnQsYz1hLmxlbmd0aD9hLnNwbGl0KCIsIik6W107cmV0dXJuIGN9LF91bmlxdWVJRFRvQ2xpZW50SUQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZSgvXCQvZywiXyIpfSxfdXBkYXRlQ29udHJvbHM6ZnVuY3Rpb24oZCxhLGMsYixlKXt0aGlzLl9jb21taXRDb250cm9scyh0aGlzLl9wcm9jZXNzVXBkYXRlUGFuZWxBcnJheXMoZCxhLGMsZSksYil9LF91cGRhdGVQYW5lbDpmdW5jdGlvbih1cGRhdGVQYW5lbEVsZW1lbnQscmVuZGVyaW5nKXtmb3IodmFyIHVwZGF0ZVBhbmVsSUQgaW4gdGhpcy5fc2NyaXB0RGlzcG9zZXMpaWYodGhpcy5fZWxlbWVudENvbnRhaW5zKHVwZGF0ZVBhbmVsRWxlbWVudCxkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh1cGRhdGVQYW5lbElEKSkpe3ZhciBkaXNwb3NlU2NyaXB0cz10aGlzLl9zY3JpcHREaXNwb3Nlc1t1cGRhdGVQYW5lbElEXTtmb3IodmFyIGk9MCxsPWRpc3Bvc2VTY3JpcHRzLmxlbmd0aDtpPGw7aSsrKWV2YWwoZGlzcG9zZVNjcmlwdHNbaV0pO2RlbGV0ZSB0aGlzLl9zY3JpcHREaXNwb3Nlc1t1cGRhdGVQYW5lbElEXX1TeXMuQXBwbGljYXRpb24uZGlzcG9zZUVsZW1lbnQodXBkYXRlUGFuZWxFbGVtZW50LHRydWUpO3VwZGF0ZVBhbmVsRWxlbWVudC5pbm5lckhUTUw9cmVuZGVyaW5nfSxfdmFsaWRQb3NpdGlvbjpmdW5jdGlvbihhKXtyZXR1cm4gdHlwZW9mIGEhPT0idW5kZWZpbmVkIiYmYSE9PW51bGwmJmEhPT0wfX07U3lzLldlYkZvcm1zLlBhZ2VSZXF1ZXN0TWFuYWdlci5nZXRJbnN0YW5jZT1mdW5jdGlvbigpe3ZhciBhPVN5cy5XZWJGb3Jtcy5QYWdlUmVxdWVzdE1hbmFnZXIuX2luc3RhbmNlO2lmKCFhKWE9U3lzLldlYkZvcm1zLlBhZ2VSZXF1ZXN0TWFuYWdlci5faW5zdGFuY2U9bmV3IFN5cy5XZWJGb3Jtcy5QYWdlUmVxdWVzdE1hbmFnZXI7cmV0dXJuIGF9O1N5cy5XZWJGb3Jtcy5QYWdlUmVxdWVzdE1hbmFnZXIuX2FkZEFycmF5RWxlbWVudD1mdW5jdGlvbihhKXtpZighd2luZG93W2FdKXdpbmRvd1thXT1bXTtmb3IodmFyIGI9MSxjPWFyZ3VtZW50cy5sZW5ndGg7YjxjO2IrKylBcnJheS5hZGQod2luZG93W2FdLGFyZ3VtZW50c1tiXSl9O1N5cy5XZWJGb3Jtcy5QYWdlUmVxdWVzdE1hbmFnZXIuX2luaXRpYWxpemU9ZnVuY3Rpb24oKXt2YXIgYT1TeXMuV2ViRm9ybXMuUGFnZVJlcXVlc3RNYW5hZ2VyLmdldEluc3RhbmNlKCk7YS5faW5pdGlhbGl6ZUludGVybmFsLmFwcGx5KGEsYXJndW1lbnRzKX07U3lzLldlYkZvcm1zLlBhZ2VSZXF1ZXN0TWFuYWdlci5yZWdpc3RlckNsYXNzKCJTeXMuV2ViRm9ybXMuUGFnZVJlcXVlc3RNYW5hZ2VyIik7U3lzLlVJLl9VcGRhdGVQcm9ncmVzcz1mdW5jdGlvbihhKXtTeXMuVUkuX1VwZGF0ZVByb2dyZXNzLmluaXRpYWxpemVCYXNlKHRoaXMsW2FdKTt0aGlzLl9kaXNwbGF5QWZ0ZXI9NTAwO3RoaXMuX2R5bmFtaWNMYXlvdXQ9dHJ1ZTt0aGlzLl9hc3NvY2lhdGVkVXBkYXRlUGFuZWxJZD1udWxsO3RoaXMuX2JlZ2luUmVxdWVzdEhhbmRsZXJEZWxlZ2F0ZT1udWxsO3RoaXMuX3N0YXJ0RGVsZWdhdGU9bnVsbDt0aGlzLl9lbmRSZXF1ZXN0SGFuZGxlckRlbGVnYXRlPW51bGw7dGhpcy5fcGFnZVJlcXVlc3RNYW5hZ2VyPW51bGw7dGhpcy5fdGltZXJDb29raWU9bnVsbH07U3lzLlVJLl9VcGRhdGVQcm9ncmVzcy5wcm90b3R5cGU9e2dldF9kaXNwbGF5QWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGlzcGxheUFmdGVyfSxzZXRfZGlzcGxheUFmdGVyOmZ1bmN0aW9uKGEpe3RoaXMuX2Rpc3BsYXlBZnRlcj1hfSxnZXRfZHluYW1pY0xheW91dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9keW5hbWljTGF5b3V0fSxzZXRfZHluYW1pY0xheW91dDpmdW5jdGlvbihhKXt0aGlzLl9keW5hbWljTGF5b3V0PWF9LGdldF9hc3NvY2lhdGVkVXBkYXRlUGFuZWxJZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hc3NvY2lhdGVkVXBkYXRlUGFuZWxJZH0sc2V0X2Fzc29jaWF0ZWRVcGRhdGVQYW5lbElkOmZ1bmN0aW9uKGEpe3RoaXMuX2Fzc29jaWF0ZWRVcGRhdGVQYW5lbElkPWF9LGdldF9yb2xlOmZ1bmN0aW9uKCl7cmV0dXJuICJzdGF0dXMifSxfY2xlYXJUaW1lb3V0OmZ1bmN0aW9uKCl7aWYodGhpcy5fdGltZXJDb29raWUpe3dpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fdGltZXJDb29raWUpO3RoaXMuX3RpbWVyQ29va2llPW51bGx9fSxfZ2V0VW5pcXVlSUQ6ZnVuY3Rpb24oYil7dmFyIGE9QXJyYXkuaW5kZXhPZih0aGlzLl9wYWdlUmVxdWVzdE1hbmFnZXIuX3VwZGF0ZVBhbmVsQ2xpZW50SURzLGIpO3JldHVybiBhPT09LTE/bnVsbDp0aGlzLl9wYWdlUmVxdWVzdE1hbmFnZXIuX3VwZGF0ZVBhbmVsSURzW2FdfSxfaGFuZGxlQmVnaW5SZXF1ZXN0OmZ1bmN0aW9uKGYsZSl7dmFyIGI9ZS5nZXRfcG9zdEJhY2tFbGVtZW50KCksYT10cnVlLGQ9dGhpcy5fYXNzb2NpYXRlZFVwZGF0ZVBhbmVsSWQ7aWYodGhpcy5fYXNzb2NpYXRlZFVwZGF0ZVBhbmVsSWQpe3ZhciBjPWUuZ2V0X3VwZGF0ZVBhbmVsc1RvVXBkYXRlKCk7aWYoYyYmYy5sZW5ndGgpYT1BcnJheS5jb250YWlucyhjLGQpfHxBcnJheS5jb250YWlucyhjLHRoaXMuX2dldFVuaXF1ZUlEKGQpKTtlbHNlIGE9ZmFsc2V9d2hpbGUoIWEmJmIpe2lmKGIuaWQmJnRoaXMuX2Fzc29jaWF0ZWRVcGRhdGVQYW5lbElkPT09Yi5pZClhPXRydWU7Yj1iLnBhcmVudE5vZGV9aWYoYSl0aGlzLl90aW1lckNvb2tpZT13aW5kb3cuc2V0VGltZW91dCh0aGlzLl9zdGFydERlbGVnYXRlLHRoaXMuX2Rpc3BsYXlBZnRlcil9LF9zdGFydFJlcXVlc3Q6ZnVuY3Rpb24oKXtpZih0aGlzLl9wYWdlUmVxdWVzdE1hbmFnZXIuZ2V0X2lzSW5Bc3luY1Bvc3RCYWNrKCkpe3ZhciBhPXRoaXMuZ2V0X2VsZW1lbnQoKTtpZih0aGlzLl9keW5hbWljTGF5b3V0KWEuc3R5bGUuZGlzcGxheT0iYmxvY2siO2Vsc2UgYS5zdHlsZS52aXNpYmlsaXR5PSJ2aXNpYmxlIjtpZih0aGlzLmdldF9yb2xlKCk9PT0ic3RhdHVzIilhLnNldEF0dHJpYnV0ZSgiYXJpYS1oaWRkZW4iLCJmYWxzZSIpfXRoaXMuX3RpbWVyQ29va2llPW51bGx9LF9oYW5kbGVFbmRSZXF1ZXN0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRfZWxlbWVudCgpO2lmKHRoaXMuX2R5bmFtaWNMYXlvdXQpYS5zdHlsZS5kaXNwbGF5PSJub25lIjtlbHNlIGEuc3R5bGUudmlzaWJpbGl0eT0iaGlkZGVuIjtpZih0aGlzLmdldF9yb2xlKCk9PT0ic3RhdHVzIilhLnNldEF0dHJpYnV0ZSgiYXJpYS1oaWRkZW4iLCJ0cnVlIik7dGhpcy5fY2xlYXJUaW1lb3V0KCl9LGRpc3Bvc2U6ZnVuY3Rpb24oKXtpZih0aGlzLl9iZWdpblJlcXVlc3RIYW5kbGVyRGVsZWdhdGUhPT1udWxsKXt0aGlzLl9wYWdlUmVxdWVzdE1hbmFnZXIucmVtb3ZlX2JlZ2luUmVxdWVzdCh0aGlzLl9iZWdpblJlcXVlc3RIYW5kbGVyRGVsZWdhdGUpO3RoaXMuX3BhZ2VSZXF1ZXN0TWFuYWdlci5yZW1vdmVfZW5kUmVxdWVzdCh0aGlzLl9lbmRSZXF1ZXN0SGFuZGxlckRlbGVnYXRlKTt0aGlzLl9iZWdpblJlcXVlc3RIYW5kbGVyRGVsZWdhdGU9bnVsbDt0aGlzLl9lbmRSZXF1ZXN0SGFuZGxlckRlbGVnYXRlPW51bGx9dGhpcy5fY2xlYXJUaW1lb3V0KCk7U3lzLlVJLl9VcGRhdGVQcm9ncmVzcy5jYWxsQmFzZU1ldGhvZCh0aGlzLCJkaXNwb3NlIil9LGluaXRpYWxpemU6ZnVuY3Rpb24oKXtTeXMuVUkuX1VwZGF0ZVByb2dyZXNzLmNhbGxCYXNlTWV0aG9kKHRoaXMsImluaXRpYWxpemUiKTtpZih0aGlzLmdldF9yb2xlKCk9PT0ic3RhdHVzIil0aGlzLmdldF9lbGVtZW50KCkuc2V0QXR0cmlidXRlKCJhcmlhLWhpZGRlbiIsInRydWUiKTt0aGlzLl9iZWdpblJlcXVlc3RIYW5kbGVyRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9oYW5kbGVCZWdpblJlcXVlc3QpO3RoaXMuX2VuZFJlcXVlc3RIYW5kbGVyRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9oYW5kbGVFbmRSZXF1ZXN0KTt0aGlzLl9zdGFydERlbGVnYXRlPUZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5fc3RhcnRSZXF1ZXN0KTtpZihTeXMuV2ViRm9ybXMmJlN5cy5XZWJGb3Jtcy5QYWdlUmVxdWVzdE1hbmFnZXIpdGhpcy5fcGFnZVJlcXVlc3RNYW5hZ2VyPVN5cy5XZWJGb3Jtcy5QYWdlUmVxdWVzdE1hbmFnZXIuZ2V0SW5zdGFuY2UoKTtpZih0aGlzLl9wYWdlUmVxdWVzdE1hbmFnZXIhPT1udWxsKXt0aGlzLl9wYWdlUmVxdWVzdE1hbmFnZXIuYWRkX2JlZ2luUmVxdWVzdCh0aGlzLl9iZWdpblJlcXVlc3RIYW5kbGVyRGVsZWdhdGUpO3RoaXMuX3BhZ2VSZXF1ZXN0TWFuYWdlci5hZGRfZW5kUmVxdWVzdCh0aGlzLl9lbmRSZXF1ZXN0SGFuZGxlckRlbGVnYXRlKX19fTtTeXMuVUkuX1VwZGF0ZVByb2dyZXNzLnJlZ2lzdGVyQ2xhc3MoIlN5cy5VSS5fVXBkYXRlUHJvZ3Jlc3MiLFN5cy5VSS5Db250cm9sKTsNClR5cGUucmVnaXN0ZXJOYW1lc3BhY2UoJ1N5cy5XZWJGb3JtcycpO1N5cy5XZWJGb3Jtcy5SZXM9ew0KIlBSTV9Vbmtub3duVG9rZW4iOiJVbmtub3duIHRva2VuOiBcdTAwMjd7MH1cdTAwMjcuIiwiUFJNX01pc3NpbmdQYW5lbCI6IkNvdWxkIG5vdCBmaW5kIFVwZGF0ZVBhbmVsIHdpdGggSUQgXHUwMDI3ezB9XHUwMDI3LiBJZiBpdCBpcyBiZWluZyB1cGRhdGVkIGR5bmFtaWNhbGx5IHRoZW4gaXQgbXVzdCBiZSBpbnNpZGUgYW5vdGhlciBVcGRhdGVQYW5lbC4iLCJQUk1fU2VydmVyRXJyb3IiOiJBbiB1bmtub3duIGVycm9yIG9jY3VycmVkIHdoaWxlIHByb2Nlc3NpbmcgdGhlIHJlcXVlc3Qgb24gdGhlIHNlcnZlci4gVGhlIHN0YXR1cyBjb2RlIHJldHVybmVkIGZyb20gdGhlIHNlcnZlciB3YXM6IHswfSIsIlBSTV9QYXJzZXJFcnJvciI6IlRoZSBtZXNzYWdlIHJlY2VpdmVkIGZyb20gdGhlIHNlcnZlciBjb3VsZCBub3QgYmUgcGFyc2VkLiBDb21tb24gY2F1c2VzIGZvciB0aGlzIGVycm9yIGFyZSB3aGVuIHRoZSByZXNwb25zZSBpcyBtb2RpZmllZCBieSBjYWxscyB0byBSZXNwb25zZS5Xcml0ZSgpLCByZXNwb25zZSBmaWx0ZXJzLCBIdHRwTW9kdWxlcywgb3Igc2VydmVyIHRyYWNlIGlzIGVuYWJsZWQuXHJcbkRldGFpbHM6IHswfSIsIlBSTV9UaW1lb3V0RXJyb3IiOiJUaGUgc2VydmVyIHJlcXVlc3QgdGltZWQgb3V0LiIsIlBSTV9QYXJzZXJFcnJvckRldGFpbHMiOiJFcnJvciBwYXJzaW5nIG5lYXIgXHUwMDI3ezB9XHUwMDI3LiIsIlBSTV9DYW5ub3RSZWdpc3RlclR3aWNlIjoiVGhlIFBhZ2VSZXF1ZXN0TWFuYWdlciBjYW5ub3QgYmUgaW5pdGlhbGl6ZWQgbW9yZSB0aGFuIG9uY2UuIn07DQovKiBFTkQgTWljcm9zb2Z0QWpheFdlYkZvcm1zLmpzICovDQovKiBTVEFSVCBUZWxlcmlrLldlYi5VSS5Db21tb24uQ29yZS5qcyAqLw0KdHJ5e2lmKFN5cy5Ccm93c2VyLmFnZW50PT1TeXMuQnJvd3Nlci5JbnRlcm5ldEV4cGxvcmVyKXtkb2N1bWVudC5leGVjQ29tbWFuZCgiQmFja2dyb3VuZEltYWdlQ2FjaGUiLGZhbHNlLHRydWUpOwp9fWNhdGNoKGVycil7fVR5cGUucmVnaXN0ZXJOYW1lc3BhY2UoIlRlbGVyaWsuV2ViLlVJIik7CndpbmRvdy4kdGVsZXJpaz13aW5kb3cuVGVsZXJpa0NvbW1vblNjcmlwdHM9VGVsZXJpay5XZWIuQ29tbW9uU2NyaXB0cz17Y2xvbmVKc09iamVjdDpmdW5jdGlvbihhLGIpe2lmKCFiKXtiPXt9Owp9Zm9yKHZhciBjIGluIGEpe3ZhciBkPWFbY107CmJbY109KGQgaW5zdGFuY2VvZiBBcnJheSk/QXJyYXkuY2xvbmUoZCk6ZDsKfXJldHVybiBiOwp9LGlzQ2xvbmVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzQ2xvbmVkOwp9LGNsb25lQ29udHJvbDpmdW5jdGlvbihhLGIsYyl7aWYoIWEpe3JldHVybiBudWxsOwp9aWYoIWIpe2I9T2JqZWN0LmdldFR5cGUoYSk7Cn12YXIgZD1hLl9fY2xvbmVkUHJvcGVydGllc19fOwppZihudWxsPT1kKXtkPWEuX19jbG9uZWRQcm9wZXJ0aWVzX189JHRlbGVyaWsuX2dldFByb3BlcnRpZXNQYXJhbWV0ZXIoYSxiKTsKfWlmKCFjKXtjPWEuZ2V0X2VsZW1lbnQoKS5jbG9uZU5vZGUodHJ1ZSk7CmMucmVtb3ZlQXR0cmlidXRlKCJjb250cm9sIik7CmMucmVtb3ZlQXR0cmlidXRlKCJpZCIpOwp9dmFyIGY9JGNyZWF0ZShiLGQsbnVsbCxudWxsLGMpOwppZihhLl9vYnNlcnZlckNvbnRleHQpe2YuX29ic2VydmVyQ29udGV4dD1hLl9vYnNlcnZlckNvbnRleHQ7Cn12YXIgZT0kdGVsZXJpay5jbG9uZUpzT2JqZWN0KGEuZ2V0X2V2ZW50cygpKTsKZi5fZXZlbnRzPWU7CmYuX2V2ZW50cy5fbGlzdD0kdGVsZXJpay5jbG9uZUpzT2JqZWN0KGYuX2V2ZW50cy5fbGlzdCk7CmYuX2lzQ2xvbmVkPXRydWU7CmYuaXNDbG9uZWQ9JHRlbGVyaWsuaXNDbG9uZWQ7CnJldHVybiBmOwp9LF9nZXRQcm9wZXJ0aWVzUGFyYW1ldGVyOmZ1bmN0aW9uKGEsZSl7dmFyIGQ9e307CnZhciBmPWUucHJvdG90eXBlOwpmb3IodmFyIGMgaW4gZil7dmFyIGc9YVtjXTsKaWYodHlwZW9mKGcpPT0iZnVuY3Rpb24iJiZjLmluZGV4T2YoImdldF8iKT09MCl7dmFyIGI9Yy5zdWJzdHJpbmcoNCk7CmlmKG51bGw9PWFbInNldF8iK2JdKXtjb250aW51ZTsKfXZhciBoPWcuY2FsbChhKTsKaWYobnVsbD09aCl7Y29udGludWU7Cn1kW2JdPWg7Cn19ZGVsZXRlIGQuY2xpZW50U3RhdGVGaWVsZElEOwpkZWxldGUgZC5pZDsKcmV0dXJuIGQ7Cn0sZ2V0T3V0ZXJTaXplOmZ1bmN0aW9uKGEpe3ZhciBjPSR0ZWxlcmlrLmdldFNpemUoYSk7CnZhciBiPSR0ZWxlcmlrLmdldE1hcmdpbkJveChhKTsKcmV0dXJue3dpZHRoOmMud2lkdGgrYi5sZWZ0K2IucmlnaHQsaGVpZ2h0OmMuaGVpZ2h0K2IudG9wK2IuYm90dG9tfTsKfSxnZXRPdXRlckJvdW5kczpmdW5jdGlvbihhKXt2YXIgYz0kdGVsZXJpay5nZXRCb3VuZHMoYSk7CnZhciBiPSR0ZWxlcmlrLmdldE1hcmdpbkJveChhKTsKcmV0dXJue3g6Yy54LWIubGVmdCx5OmMueS1iLnRvcCx3aWR0aDpjLndpZHRoK2IubGVmdCtiLnJpZ2h0LGhlaWdodDpjLmhlaWdodCtiLnRvcCtiLmJvdHRvbX07Cn0sZ2V0SW52aXNpYmxlUGFyZW50OmZ1bmN0aW9uKGEpe3doaWxlKGEmJmEhPWRvY3VtZW50KXtpZigibm9uZSI9PSR0ZWxlcmlrLmdldEN1cnJlbnRTdHlsZShhLCJkaXNwbGF5IiwiIikpe3JldHVybiBhOwp9YT1hLnBhcmVudE5vZGU7Cn1yZXR1cm4gbnVsbDsKfSxpc1Njcm9sbGVkSW50b1ZpZXc6ZnVuY3Rpb24oYyl7dmFyIGY9Yy5vd25lckRvY3VtZW50Owp2YXIgYT0oZi5kZWZhdWx0Vmlldyk/Zi5kZWZhdWx0VmlldzpmLnBhcmVudFdpbmRvdzsKdmFyIGU9JHRlbGVyaWsuJChhKS5zY3JvbGxUb3AoKSxnPWUrJHRlbGVyaWsuJChhKS5oZWlnaHQoKSxiPSR0ZWxlcmlrLiQoYykub2Zmc2V0KCkudG9wLGQ9YiskdGVsZXJpay4kKGMpLmhlaWdodCgpOwpyZXR1cm4oKGIrKChkLWIpLzQpKT49ZSYmKChiKygoZC1iKS80KSk8PWcpKTsKfSxzY3JvbGxJbnRvVmlldzpmdW5jdGlvbihjKXtpZighY3x8IWMucGFyZW50Tm9kZSl7cmV0dXJuOwp9dmFyIGU9bnVsbCxhPWMub2Zmc2V0UGFyZW50LGY9Yy5vZmZzZXRUb3AsZD0wOwp2YXIgZz1jLnBhcmVudE5vZGU7CndoaWxlKGchPW51bGwpe3ZhciBoPSR0ZWxlcmlrLmdldEN1cnJlbnRTdHlsZShnLCJvdmVyZmxvd1kiKTsKaWYoaD09InNjcm9sbCJ8fGg9PSJhdXRvIil7ZT1nOwpicmVhazsKfWlmKGc9PWEpe2YrPWcub2Zmc2V0VG9wOwphPWcub2Zmc2V0UGFyZW50Owp9aWYoZy50YWdOYW1lPT0iQk9EWSIpe3ZhciBiPWcub3duZXJEb2N1bWVudDsKaWYoISR0ZWxlcmlrLmlzSUUmJmIuZGVmYXVsdFZpZXcmJmIuZGVmYXVsdFZpZXcuZnJhbWVFbGVtZW50KXtkPWIuZGVmYXVsdFZpZXcuZnJhbWVFbGVtZW50Lm9mZnNldEhlaWdodDsKfWU9ZzsKYnJlYWs7Cn1nPWcucGFyZW50Tm9kZTsKfWlmKCFlKXtyZXR1cm47Cn1pZighZCl7ZD1lLm9mZnNldEhlaWdodDsKfWlmKChlLnNjcm9sbFRvcCtkKTwoZitjLm9mZnNldEhlaWdodCkpe2Uuc2Nyb2xsVG9wPShmK2Mub2Zmc2V0SGVpZ2h0KS1kOwp9ZWxzZXtpZihmPChlLnNjcm9sbFRvcCkpe2Uuc2Nyb2xsVG9wPWY7Cn19fSxpc1JpZ2h0VG9MZWZ0OmZ1bmN0aW9uKGIpe3doaWxlKGImJmIubm9kZVR5cGUhPT05KXt2YXIgYT0kdGVsZXJpay5nZXRDdXJyZW50U3R5bGUoYiwiZGlyZWN0aW9uIik7CmlmKGIuZGlyPT0icnRsInx8YT09InJ0bCIpe3JldHVybiB0cnVlOwp9aWYoYi5kaXI9PSJsdHIifHxhPT0ibHRyIil7cmV0dXJuIGZhbHNlOwp9Yj1iLnBhcmVudE5vZGU7Cn1yZXR1cm4gZmFsc2U7Cn0sZ2V0Q29ycmVjdFNjcm9sbExlZnQ6ZnVuY3Rpb24oYSl7aWYoJHRlbGVyaWsuaXNSaWdodFRvTGVmdChhKSl7cmV0dXJuIC0oYS5zY3JvbGxXaWR0aC1hLm9mZnNldFdpZHRoLU1hdGguYWJzKGEuc2Nyb2xsTGVmdCkpOwp9ZWxzZXtyZXR1cm4gYS5zY3JvbGxMZWZ0Owp9fSxfYm9yZGVyU3R5bGVOYW1lczpbImJvcmRlclRvcFN0eWxlIiwiYm9yZGVyUmlnaHRTdHlsZSIsImJvcmRlckJvdHRvbVN0eWxlIiwiYm9yZGVyTGVmdFN0eWxlIl0sX2JvcmRlcldpZHRoTmFtZXM6WyJib3JkZXJUb3BXaWR0aCIsImJvcmRlclJpZ2h0V2lkdGgiLCJib3JkZXJCb3R0b21XaWR0aCIsImJvcmRlckxlZnRXaWR0aCJdLF9wYWRkaW5nV2lkdGhOYW1lczpbInBhZGRpbmdUb3AiLCJwYWRkaW5nUmlnaHQiLCJwYWRkaW5nQm90dG9tIiwicGFkZGluZ0xlZnQiXSxfbWFyZ2luV2lkdGhOYW1lczpbIm1hcmdpblRvcCIsIm1hcmdpblJpZ2h0IiwibWFyZ2luQm90dG9tIiwibWFyZ2luTGVmdCJdLHJhZENvbnRyb2xzOltdLHJlZ2lzdGVyQ29udHJvbDpmdW5jdGlvbihhKXtpZighQXJyYXkuY29udGFpbnModGhpcy5yYWRDb250cm9scyxhKSl7QXJyYXkuYWRkKHRoaXMucmFkQ29udHJvbHMsYSk7Cn19LHVucmVnaXN0ZXJDb250cm9sOmZ1bmN0aW9uKGEpe0FycmF5LnJlbW92ZSh0aGlzLnJhZENvbnRyb2xzLGEpOwp9LHJlcGFpbnRDaGlsZHJlbjpmdW5jdGlvbihjKXt2YXIgYj1jLmdldF9lbGVtZW50P2MuZ2V0X2VsZW1lbnQoKTpjOwpmb3IodmFyIGQ9MCxhPXRoaXMucmFkQ29udHJvbHMubGVuZ3RoOwpkPGE7CmQrKyl7dmFyIGU9dGhpcy5yYWRDb250cm9sc1tkXTsKaWYoZS5yZXBhaW50JiZ0aGlzLmlzRGVzY2VuZGFudChiLGUuZ2V0X2VsZW1lbnQoKSkpe2UucmVwYWludCgpOwp9fX0sX2JvcmRlclRoaWNrbmVzczpmdW5jdGlvbigpeyR0ZWxlcmlrLl9ib3JkZXJUaGlja25lc3Nlcz17fTsKdmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CnZhciBkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwphLnN0eWxlLnZpc2liaWxpdHk9ImhpZGRlbiI7CmEuc3R5bGUucG9zaXRpb249ImFic29sdXRlIjsKYS5zdHlsZS50b3A9Ii05OTk5cHgiOwphLnN0eWxlLmZvbnRTaXplPSIxcHgiOwpkLnN0eWxlLmhlaWdodD0iMHB4IjsKZC5zdHlsZS5vdmVyZmxvdz0iaGlkZGVuIjsKZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKS5hcHBlbmRDaGlsZChkKTsKdmFyIGM9YS5vZmZzZXRIZWlnaHQ7CmQuc3R5bGUuYm9yZGVyVG9wPSJzb2xpZCBibGFjayI7CmEuc3R5bGUuYm9yZGVyTGVmdD0iMXB4IHNvbGlkIHJlZCI7CmQuc3R5bGUuYm9yZGVyVG9wV2lkdGg9InRoaW4iOwokdGVsZXJpay5fYm9yZGVyVGhpY2tuZXNzZXMudGhpbj1hLm9mZnNldEhlaWdodC1jOwpkLnN0eWxlLmJvcmRlclRvcFdpZHRoPSJtZWRpdW0iOwokdGVsZXJpay5fYm9yZGVyVGhpY2tuZXNzZXMubWVkaXVtPWEub2Zmc2V0SGVpZ2h0LWM7CmQuc3R5bGUuYm9yZGVyVG9wV2lkdGg9InRoaWNrIjsKJHRlbGVyaWsuX2JvcmRlclRoaWNrbmVzc2VzLnRoaWNrPWEub2Zmc2V0SGVpZ2h0LWM7CnZhciBiPSR0ZWxlcmlrLmdldENvbXB1dGVkU3R5bGUoYSwiYm9yZGVyLWxlZnQtY29sb3IiLG51bGwpOwp2YXIgZT0kdGVsZXJpay5nZXRDb21wdXRlZFN0eWxlKGQsImJvcmRlci10b3AtY29sb3IiLG51bGwpOwppZihiJiZlJiZiPT1lKXtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NOYW1lKz0iIF9UZWxlcmlrX2ExMXkiOwp9aWYodHlwZW9mKGEucmVtb3ZlQ2hpbGQpIT09InVuZGVmaW5lZCIpe2EucmVtb3ZlQ2hpbGQoZCk7Cn1kb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEpOwppZighJHRlbGVyaWsuaXNTYWZhcmkmJiEkdGVsZXJpay5pc0lFMTBNb2RlKXtkLm91dGVySFRNTD1udWxsOwp9aWYoISR0ZWxlcmlrLmlzU2FmYXJpJiYhJHRlbGVyaWsuaXNJRTEwTW9kZSl7YS5vdXRlckhUTUw9bnVsbDsKfWE9bnVsbDsKZD1udWxsOwp9LGdldEN1cnJlbnRTdHlsZTpmdW5jdGlvbihhLGUsZCl7dmFyIGM9bnVsbDsKaWYoYSl7aWYoYS5jdXJyZW50U3R5bGUpe2M9YS5jdXJyZW50U3R5bGVbZV07Cn1lbHNle2lmKGRvY3VtZW50LmRlZmF1bHRWaWV3JiZkb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKXt2YXIgYj1kb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKGEsbnVsbCk7CmlmKGIpe2M9YltlXTsKfX19aWYoIWMmJmEuc3R5bGUpe2lmKGEuc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSl7Yz1hLnN0eWxlLmdldFByb3BlcnR5VmFsdWUoZSk7Cn1lbHNle2lmKGEuc3R5bGUuZ2V0QXR0cmlidXRlKXtjPWEuc3R5bGUuZ2V0QXR0cmlidXRlKGUpOwp9fX19aWYoKCFjfHxjPT0iInx8dHlwZW9mKGMpPT09InVuZGVmaW5lZCIpKXtpZih0eXBlb2YoZCkhPSJ1bmRlZmluZWQiKXtjPWQ7Cn1lbHNle2M9bnVsbDsKfX1yZXR1cm4gYzsKfSxnZXRDb21wdXRlZFN0eWxlOmZ1bmN0aW9uKGEsZSxkKXt2YXIgYz1udWxsOwppZihhKXtpZihhLmN1cnJlbnRTdHlsZSl7Yz1hLmN1cnJlbnRTdHlsZVtlXTsKfWVsc2V7aWYoZG9jdW1lbnQuZGVmYXVsdFZpZXcmJmRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUpe3ZhciBiPWRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoYSxudWxsKTsKaWYoYil7aWYoYi5nZXRQcm9wZXJ0eVZhbHVlKXtjPWIuZ2V0UHJvcGVydHlWYWx1ZShlKTsKfWVsc2V7Yz1iW2VdOwp9fX19aWYoIWMmJmEuc3R5bGUpe2lmKGEuc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSl7Yz1hLnN0eWxlLmdldFByb3BlcnR5VmFsdWUoZSk7Cn1lbHNle2lmKGEuc3R5bGUuZ2V0QXR0cmlidXRlKXtjPWEuc3R5bGUuZ2V0QXR0cmlidXRlKGUpOwp9fX19aWYoKCFjfHxjPT0iInx8dHlwZW9mKGMpPT09InVuZGVmaW5lZCIpKXtpZih0eXBlb2YoZCkhPSJ1bmRlZmluZWQiKXtjPWQ7Cn1lbHNle2M9bnVsbDsKfX1yZXR1cm4gYzsKfSxnZXRMb2NhdGlvbjpmdW5jdGlvbihHKXt2YXIgaD1HJiZHLm93bmVyRG9jdW1lbnQ/Ry5vd25lckRvY3VtZW50OmRvY3VtZW50OwppZihHPT09aC5kb2N1bWVudEVsZW1lbnQpe3JldHVybiBuZXcgU3lzLlVJLlBvaW50KDAsMCk7Cn1pZihTeXMuQnJvd3Nlci5hZ2VudD09U3lzLkJyb3dzZXIuSW50ZXJuZXRFeHBsb3Jlcil7aWYoRy53aW5kb3c9PT1HfHxHLm5vZGVUeXBlPT09OXx8IUcuZ2V0Q2xpZW50UmVjdHN8fCFHLmdldEJvdW5kaW5nQ2xpZW50UmVjdHx8Ry5wYXJlbnRFbGVtZW50PT1udWxsKXtyZXR1cm4gbmV3IFN5cy5VSS5Qb2ludCgwLDApOwp9dmFyIE09Ry5nZXRDbGllbnRSZWN0cygpOwppZighTXx8IU0ubGVuZ3RoKXtyZXR1cm4gbmV3IFN5cy5VSS5Qb2ludCgwLDApOwp9dmFyIEs9TVswXTsKdmFyIGY9MDsKdmFyIHQ9MDsKdmFyIGs9ZmFsc2U7CnRyeXtrPWgucGFyZW50V2luZG93LmZyYW1lRWxlbWVudDsKfWNhdGNoKHUpe2s9dHJ1ZTsKfWlmKGspe3ZhciBkPUcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CmlmKCFkKXtyZXR1cm4gbmV3IFN5cy5VSS5Qb2ludCgwLDApOwp9dmFyIHg9Sy5sZWZ0Owp2YXIgQj1LLnRvcDsKZm9yKHZhciBlPTE7CmU8TS5sZW5ndGg7CmUrKyl7dmFyIHM9TVtlXTsKaWYocy5sZWZ0PHgpe3g9cy5sZWZ0Owp9aWYocy50b3A8Qil7Qj1zLnRvcDsKfX1mPXgtZC5sZWZ0Owp0PUItZC50b3A7Cn12YXIgbj0wOwppZihTeXMuQnJvd3Nlci52ZXJzaW9uPDh8fCR0ZWxlcmlrLnF1aXJrc01vZGUpe3ZhciBDPTE7CmlmKGsmJmsuZ2V0QXR0cmlidXRlKXt2YXIgcT1rLmdldEF0dHJpYnV0ZSgiZnJhbWVib3JkZXIiKTsKaWYocSE9bnVsbCl7Qz1wYXJzZUludChxLDEwKTsKaWYoaXNOYU4oQykpe0M9cS50b0xvd2VyQ2FzZSgpPT0ibm8iPzA6MTsKfX19bj0yKkM7Cn12YXIgRj1oLmRvY3VtZW50RWxlbWVudDsKdmFyIEg9Sy5sZWZ0LW4tZiskdGVsZXJpay5nZXRDb3JyZWN0U2Nyb2xsTGVmdChGKTsKdmFyIEk9Sy50b3Atbi10K0Yuc2Nyb2xsVG9wOwp2YXIgcD1uZXcgU3lzLlVJLlBvaW50KE1hdGgucm91bmQoSCksTWF0aC5yb3VuZChJKSk7CmlmKCR0ZWxlcmlrLnF1aXJrc01vZGUpe3AueCs9JHRlbGVyaWsuZ2V0Q29ycmVjdFNjcm9sbExlZnQoaC5ib2R5KTsKcC55Kz1oLmJvZHkuc2Nyb2xsVG9wOwp9cmV0dXJuIHA7Cn12YXIgcD0kdGVsZXJpay5vcmlnaW5hbEdldExvY2F0aW9uKEcpOwppZigkdGVsZXJpay5pc09wZXJhKXt2YXIgbD1udWxsOwp2YXIgRT0kdGVsZXJpay5nZXRDdXJyZW50U3R5bGUoRywiZGlzcGxheSIpOwppZihFIT0iaW5saW5lIil7bD1HLnBhcmVudE5vZGU7Cn1lbHNle2w9Ry5vZmZzZXRQYXJlbnQ7Cn13aGlsZShsKXt2YXIgbT1sLnRhZ05hbWUudG9VcHBlckNhc2UoKTsKaWYobT09IkJPRFkifHxtPT0iSFRNTCIpe2JyZWFrOwp9aWYobT09IlRBQkxFIiYmbC5wYXJlbnROb2RlJiZsLnBhcmVudE5vZGUuc3R5bGUuZGlzcGxheT09ImlubGluZS1ibG9jayIpe3ZhciBBPWwub2Zmc2V0TGVmdDsKdmFyIHc9bC5zdHlsZS5kaXNwbGF5OwpsLnN0eWxlLmRpc3BsYXk9ImlubGluZS1ibG9jayI7CmlmKGwub2Zmc2V0TGVmdD5BKXtwLngrPWwub2Zmc2V0TGVmdC1BOwp9bC5zdHlsZS5kaXNwbGF5PXc7Cn1wLngtPSR0ZWxlcmlrLmdldENvcnJlY3RTY3JvbGxMZWZ0KGwpOwpwLnktPWwuc2Nyb2xsVG9wOwppZihFIT0iaW5saW5lIil7bD1sLnBhcmVudE5vZGU7Cn1lbHNle2w9bC5vZmZzZXRQYXJlbnQ7Cn19fXZhciBhPU1hdGgubWF4KGguZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCxoLmJvZHkuc2Nyb2xsVG9wKTsKdmFyIGc9TWF0aC5tYXgoaC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCxoLmJvZHkuc2Nyb2xsTGVmdCk7CmlmKCR0ZWxlcmlrLmlzU2FmYXJpKXtpZihhPjB8fGc+MCl7dmFyIG89aC5kb2N1bWVudEVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImZvcm0iKTsKaWYobyYmby5sZW5ndGg+MCl7dmFyIGI9JHRlbGVyaWsub3JpZ2luYWxHZXRMb2NhdGlvbihvWzBdKTsKaWYoYi55JiZiLnk8MCl7cC55Kz1hOwp9aWYoYi54JiZiLng8MCl7cC54Kz1nOwp9fWVsc2V7dmFyIE49Ry5wYXJlbnROb2RlLEo9ZmFsc2Usdj1mYWxzZTsKd2hpbGUoTiYmTi50YWdOYW1lKXt2YXIgYz0kdGVsZXJpay5vcmlnaW5hbEdldExvY2F0aW9uKE4pOwppZihjLnk8MCl7Sj10cnVlOwp9aWYoYy54PDApe3Y9dHJ1ZTsKfU49Ti5wYXJlbnROb2RlOwp9aWYoSil7cC55Kz1hOwp9aWYodil7cC54Kz1nOwp9fX12YXIgbD1HLnBhcmVudE5vZGU7CnZhciB6PW51bGw7CnZhciBEPW51bGw7CndoaWxlKGwmJmwudGFnTmFtZS50b1VwcGVyQ2FzZSgpIT0iQk9EWSImJmwudGFnTmFtZS50b1VwcGVyQ2FzZSgpIT0iSFRNTCIpe2lmKGwudGFnTmFtZS50b1VwcGVyQ2FzZSgpPT0iVEQiKXt6PWw7Cn1lbHNle2lmKGwudGFnTmFtZS50b1VwcGVyQ2FzZSgpPT0iVEFCTEUiKXtEPWw7Cn1lbHNle3ZhciBMPSR0ZWxlcmlrLmdldEN1cnJlbnRTdHlsZShsLCJwb3NpdGlvbiIpOwppZihMPT0iYWJzb2x1dGUifHxMPT0icmVsYXRpdmUiKXt2YXIgaj0kdGVsZXJpay5nZXRDdXJyZW50U3R5bGUobCwiYm9yZGVyVG9wV2lkdGgiLDApOwp2YXIgeT0kdGVsZXJpay5nZXRDdXJyZW50U3R5bGUobCwiYm9yZGVyTGVmdFdpZHRoIiwwKTsKcC54Kz1wYXJzZUludChqKTsKcC55Kz1wYXJzZUludCh5KTsKfX19dmFyIEw9JHRlbGVyaWsuZ2V0Q3VycmVudFN0eWxlKGwsInBvc2l0aW9uIik7CmlmKEw9PSJhYnNvbHV0ZSJ8fEw9PSJyZWxhdGl2ZSIpe3AueC09bC5zY3JvbGxMZWZ0OwpwLnktPWwuc2Nyb2xsVG9wOwp9aWYoeiYmRCl7cC54Kz1wYXJzZUludCgkdGVsZXJpay5nZXRDdXJyZW50U3R5bGUoRCwiYm9yZGVyVG9wV2lkdGgiKSwwKTsKcC55Kz1wYXJzZUludCgkdGVsZXJpay5nZXRDdXJyZW50U3R5bGUoRCwiYm9yZGVyTGVmdFdpZHRoIiwwKSk7CmlmKCR0ZWxlcmlrLmdldEN1cnJlbnRTdHlsZShELCJib3JkZXJDb2xsYXBzZSIpIT0iY29sbGFwc2UiKXtwLngrPXBhcnNlSW50KCR0ZWxlcmlrLmdldEN1cnJlbnRTdHlsZSh6LCJib3JkZXJUb3BXaWR0aCIsMCkpOwpwLnkrPXBhcnNlSW50KCR0ZWxlcmlrLmdldEN1cnJlbnRTdHlsZSh6LCJib3JkZXJMZWZ0V2lkdGgiLDApKTsKfXo9bnVsbDsKRD1udWxsOwp9ZWxzZXtpZihEKXtpZigkdGVsZXJpay5nZXRDdXJyZW50U3R5bGUoRCwiYm9yZGVyQ29sbGFwc2UiKSE9ImNvbGxhcHNlIil7cC54Kz1wYXJzZUludCgkdGVsZXJpay5nZXRDdXJyZW50U3R5bGUoRCwiYm9yZGVyVG9wV2lkdGgiLDApKTsKcC55Kz1wYXJzZUludCgkdGVsZXJpay5nZXRDdXJyZW50U3R5bGUoRCwiYm9yZGVyTGVmdFdpZHRoIiwwKSk7Cn1EPW51bGw7Cn19bD1sLnBhcmVudE5vZGU7Cn19cmV0dXJuIHA7Cn0sc2V0TG9jYXRpb246ZnVuY3Rpb24oYixhKXtTeXMuVUkuRG9tRWxlbWVudC5zZXRMb2NhdGlvbihiLGEueCxhLnkpOwp9LGZpbmRDb250cm9sOmZ1bmN0aW9uKGMsYSl7dmFyIGY9Yy5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpOwpmb3IodmFyIGQ9MCxlPWYubGVuZ3RoOwpkPGU7CmQrKyl7dmFyIGI9ZltkXS5pZDsKaWYoYiYmYi5lbmRzV2l0aChhKSl7cmV0dXJuICRmaW5kKGIpOwp9fXJldHVybiBudWxsOwp9LGZpbmRFbGVtZW50OmZ1bmN0aW9uKGMsYSl7dmFyIGY9Yy5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpOwpmb3IodmFyIGQ9MCxlPWYubGVuZ3RoOwpkPGU7CmQrKyl7dmFyIGI9ZltkXS5pZDsKaWYoYiYmYi5lbmRzV2l0aChhKSl7cmV0dXJuICRnZXQoYik7Cn19cmV0dXJuIG51bGw7Cn0sZ2V0Q29udGVudFNpemU6ZnVuY3Rpb24oYSl7aWYoIWEpe3Rocm93IEVycm9yLmFyZ3VtZW50TnVsbCgiZWxlbWVudCIpOwp9dmFyIGM9JHRlbGVyaWsuZ2V0U2l6ZShhKTsKdmFyIGQ9JHRlbGVyaWsuZ2V0Qm9yZGVyQm94KGEpOwp2YXIgYj0kdGVsZXJpay5nZXRQYWRkaW5nQm94KGEpOwpyZXR1cm57d2lkdGg6Yy53aWR0aC1kLmhvcml6b250YWwtYi5ob3Jpem9udGFsLGhlaWdodDpjLmhlaWdodC1kLnZlcnRpY2FsLWIudmVydGljYWx9Owp9LGdldFNpemU6ZnVuY3Rpb24oYSl7aWYoIWEpe3Rocm93IEVycm9yLmFyZ3VtZW50TnVsbCgiZWxlbWVudCIpOwp9cmV0dXJue3dpZHRoOmEub2Zmc2V0V2lkdGgsaGVpZ2h0OmEub2Zmc2V0SGVpZ2h0fTsKfSxzZXRDb250ZW50U2l6ZTpmdW5jdGlvbihhLGMpe2lmKCFhKXt0aHJvdyBFcnJvci5hcmd1bWVudE51bGwoImVsZW1lbnQiKTsKfWlmKCFjKXt0aHJvdyBFcnJvci5hcmd1bWVudE51bGwoInNpemUiKTsKfWlmKCR0ZWxlcmlrLmdldEN1cnJlbnRTdHlsZShhLCJNb3pCb3hTaXppbmciKT09ImJvcmRlci1ib3gifHwkdGVsZXJpay5nZXRDdXJyZW50U3R5bGUoYSwiQm94U2l6aW5nIik9PSJib3JkZXItYm94Iil7dmFyIGQ9JHRlbGVyaWsuZ2V0Qm9yZGVyQm94KGEpOwp2YXIgYj0kdGVsZXJpay5nZXRQYWRkaW5nQm94KGEpOwpjPXt3aWR0aDpjLndpZHRoK2QuaG9yaXpvbnRhbCtiLmhvcml6b250YWwsaGVpZ2h0OmMuaGVpZ2h0K2QudmVydGljYWwrYi52ZXJ0aWNhbH07Cn1hLnN0eWxlLndpZHRoPWMud2lkdGgudG9TdHJpbmcoKSsicHgiOwphLnN0eWxlLmhlaWdodD1jLmhlaWdodC50b1N0cmluZygpKyJweCI7Cn0sc2V0U2l6ZTpmdW5jdGlvbihhLGQpe2lmKCFhKXt0aHJvdyBFcnJvci5hcmd1bWVudE51bGwoImVsZW1lbnQiKTsKfWlmKCFkKXt0aHJvdyBFcnJvci5hcmd1bWVudE51bGwoInNpemUiKTsKfXZhciBlPSR0ZWxlcmlrLmdldEJvcmRlckJveChhKTsKdmFyIGM9JHRlbGVyaWsuZ2V0UGFkZGluZ0JveChhKTsKdmFyIGI9e3dpZHRoOmQud2lkdGgtZS5ob3Jpem9udGFsLWMuaG9yaXpvbnRhbCxoZWlnaHQ6ZC5oZWlnaHQtZS52ZXJ0aWNhbC1jLnZlcnRpY2FsfTsKJHRlbGVyaWsuc2V0Q29udGVudFNpemUoYSxiKTsKfSxnZXRCb3VuZHM6ZnVuY3Rpb24oYil7dmFyIGE9JHRlbGVyaWsuZ2V0TG9jYXRpb24oYik7CnJldHVybiBuZXcgU3lzLlVJLkJvdW5kcyhhLngsYS55LGIub2Zmc2V0V2lkdGh8fDAsYi5vZmZzZXRIZWlnaHR8fDApOwp9LHNldEJvdW5kczpmdW5jdGlvbihiLGEpe2lmKCFiKXt0aHJvdyBFcnJvci5hcmd1bWVudE51bGwoImVsZW1lbnQiKTsKfWlmKCFhKXt0aHJvdyBFcnJvci5hcmd1bWVudE51bGwoImJvdW5kcyIpOwp9JHRlbGVyaWsuc2V0U2l6ZShiLGEpOwokdGVsZXJpay5zZXRMb2NhdGlvbihiLGEpOwp9LGdldENsaWVudEJvdW5kczpmdW5jdGlvbigpe3ZhciBiOwp2YXIgYTsKc3dpdGNoKFN5cy5Ccm93c2VyLmFnZW50KXtjYXNlIFN5cy5Ccm93c2VyLkludGVybmV0RXhwbG9yZXI6Yj1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7CmE9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDsKaWYoYj09MCYmYT09MCl7Yj1kb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoOwphPWRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0Owp9YnJlYWs7CmNhc2UgU3lzLkJyb3dzZXIuU2FmYXJpOmI9d2luZG93LmlubmVyV2lkdGg7CmE9d2luZG93LmlubmVySGVpZ2h0OwpicmVhazsKY2FzZSBTeXMuQnJvd3Nlci5PcGVyYTppZihTeXMuQnJvd3Nlci52ZXJzaW9uPj05LjUpe2I9TWF0aC5taW4od2luZG93LmlubmVyV2lkdGgsZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoKTsKYT1NYXRoLm1pbih3aW5kb3cuaW5uZXJIZWlnaHQsZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCk7Cn1lbHNle2I9TWF0aC5taW4od2luZG93LmlubmVyV2lkdGgsZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCk7CmE9TWF0aC5taW4od2luZG93LmlubmVySGVpZ2h0LGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0KTsKfWJyZWFrOwpkZWZhdWx0OmI9TWF0aC5taW4od2luZG93LmlubmVyV2lkdGgsZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoKTsKYT1NYXRoLm1pbih3aW5kb3cuaW5uZXJIZWlnaHQsZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCk7CmJyZWFrOwp9cmV0dXJuIG5ldyBTeXMuVUkuQm91bmRzKDAsMCxiLGEpOwp9LGdldE1hcmdpbkJveDpmdW5jdGlvbihiKXtpZighYil7dGhyb3cgRXJyb3IuYXJndW1lbnROdWxsKCJlbGVtZW50Iik7Cn12YXIgYT17dG9wOiR0ZWxlcmlrLmdldE1hcmdpbihiLFRlbGVyaWsuV2ViLkJveFNpZGUuVG9wKSxyaWdodDokdGVsZXJpay5nZXRNYXJnaW4oYixUZWxlcmlrLldlYi5Cb3hTaWRlLlJpZ2h0KSxib3R0b206JHRlbGVyaWsuZ2V0TWFyZ2luKGIsVGVsZXJpay5XZWIuQm94U2lkZS5Cb3R0b20pLGxlZnQ6JHRlbGVyaWsuZ2V0TWFyZ2luKGIsVGVsZXJpay5XZWIuQm94U2lkZS5MZWZ0KX07CmEuaG9yaXpvbnRhbD1hLmxlZnQrYS5yaWdodDsKYS52ZXJ0aWNhbD1hLnRvcCthLmJvdHRvbTsKcmV0dXJuIGE7Cn0sZ2V0UGFkZGluZ0JveDpmdW5jdGlvbihiKXtpZighYil7dGhyb3cgRXJyb3IuYXJndW1lbnROdWxsKCJlbGVtZW50Iik7Cn12YXIgYT17dG9wOiR0ZWxlcmlrLmdldFBhZGRpbmcoYixUZWxlcmlrLldlYi5Cb3hTaWRlLlRvcCkscmlnaHQ6JHRlbGVyaWsuZ2V0UGFkZGluZyhiLFRlbGVyaWsuV2ViLkJveFNpZGUuUmlnaHQpLGJvdHRvbTokdGVsZXJpay5nZXRQYWRkaW5nKGIsVGVsZXJpay5XZWIuQm94U2lkZS5Cb3R0b20pLGxlZnQ6JHRlbGVyaWsuZ2V0UGFkZGluZyhiLFRlbGVyaWsuV2ViLkJveFNpZGUuTGVmdCl9OwphLmhvcml6b250YWw9YS5sZWZ0K2EucmlnaHQ7CmEudmVydGljYWw9YS50b3ArYS5ib3R0b207CnJldHVybiBhOwp9LGdldEJvcmRlckJveDpmdW5jdGlvbihiKXtpZighYil7dGhyb3cgRXJyb3IuYXJndW1lbnROdWxsKCJlbGVtZW50Iik7Cn12YXIgYT17dG9wOiR0ZWxlcmlrLmdldEJvcmRlcldpZHRoKGIsVGVsZXJpay5XZWIuQm94U2lkZS5Ub3ApLHJpZ2h0OiR0ZWxlcmlrLmdldEJvcmRlcldpZHRoKGIsVGVsZXJpay5XZWIuQm94U2lkZS5SaWdodCksYm90dG9tOiR0ZWxlcmlrLmdldEJvcmRlcldpZHRoKGIsVGVsZXJpay5XZWIuQm94U2lkZS5Cb3R0b20pLGxlZnQ6JHRlbGVyaWsuZ2V0Qm9yZGVyV2lkdGgoYixUZWxlcmlrLldlYi5Cb3hTaWRlLkxlZnQpfTsKYS5ob3Jpem9udGFsPWEubGVmdCthLnJpZ2h0OwphLnZlcnRpY2FsPWEudG9wK2EuYm90dG9tOwpyZXR1cm4gYTsKfSxpc0JvcmRlclZpc2libGU6ZnVuY3Rpb24oYSxiKXtpZighYSl7dGhyb3cgRXJyb3IuYXJndW1lbnROdWxsKCJlbGVtZW50Iik7Cn1pZihiPFRlbGVyaWsuV2ViLkJveFNpZGUuVG9wfHxiPlRlbGVyaWsuV2ViLkJveFNpZGUuTGVmdCl7dGhyb3cgRXJyb3IuYXJndW1lbnRPdXRPZlJhbmdlKFN0cmluZy5mb3JtYXQoU3lzLlJlcy5lbnVtSW52YWxpZFZhbHVlLGIsIlRlbGVyaWsuV2ViLkJveFNpZGUiKSk7Cn12YXIgZD0kdGVsZXJpay5fYm9yZGVyU3R5bGVOYW1lc1tiXTsKdmFyIGM9JHRlbGVyaWsuZ2V0Q3VycmVudFN0eWxlKGEsZCk7CnJldHVybiBjIT0ibm9uZSI7Cn0sZ2V0TWFyZ2luOmZ1bmN0aW9uKGEsYyl7aWYoIWEpe3Rocm93IEVycm9yLmFyZ3VtZW50TnVsbCgiZWxlbWVudCIpOwp9aWYoYzxUZWxlcmlrLldlYi5Cb3hTaWRlLlRvcHx8Yz5UZWxlcmlrLldlYi5Cb3hTaWRlLkxlZnQpe3Rocm93IEVycm9yLmFyZ3VtZW50T3V0T2ZSYW5nZShTdHJpbmcuZm9ybWF0KFN5cy5SZXMuZW51bUludmFsaWRWYWx1ZSxjLCJUZWxlcmlrLldlYi5Cb3hTaWRlIikpOwp9dmFyIGU9JHRlbGVyaWsuX21hcmdpbldpZHRoTmFtZXNbY107CnZhciBkPSR0ZWxlcmlrLmdldEN1cnJlbnRTdHlsZShhLGUpOwp0cnl7cmV0dXJuICR0ZWxlcmlrLnBhcnNlUGFkZGluZyhkKTsKfWNhdGNoKGIpe3JldHVybiAwOwp9fSxnZXRCb3JkZXJXaWR0aDpmdW5jdGlvbihhLGIpe2lmKCFhKXt0aHJvdyBFcnJvci5hcmd1bWVudE51bGwoImVsZW1lbnQiKTsKfWlmKGI8VGVsZXJpay5XZWIuQm94U2lkZS5Ub3B8fGI+VGVsZXJpay5XZWIuQm94U2lkZS5MZWZ0KXt0aHJvdyBFcnJvci5hcmd1bWVudE91dE9mUmFuZ2UoU3RyaW5nLmZvcm1hdChTeXMuUmVzLmVudW1JbnZhbGlkVmFsdWUsYiwiVGVsZXJpay5XZWIuQm94U2lkZSIpKTsKfWlmKCEkdGVsZXJpay5pc0JvcmRlclZpc2libGUoYSxiKSl7cmV0dXJuIDA7Cn12YXIgZD0kdGVsZXJpay5fYm9yZGVyV2lkdGhOYW1lc1tiXTsKdmFyIGM9JHRlbGVyaWsuZ2V0Q3VycmVudFN0eWxlKGEsZCk7CnJldHVybiAkdGVsZXJpay5wYXJzZUJvcmRlcldpZHRoKGMpOwp9LGdldFBhZGRpbmc6ZnVuY3Rpb24oYSxiKXtpZighYSl7dGhyb3cgRXJyb3IuYXJndW1lbnROdWxsKCJlbGVtZW50Iik7Cn1pZihiPFRlbGVyaWsuV2ViLkJveFNpZGUuVG9wfHxiPlRlbGVyaWsuV2ViLkJveFNpZGUuTGVmdCl7dGhyb3cgRXJyb3IuYXJndW1lbnRPdXRPZlJhbmdlKFN0cmluZy5mb3JtYXQoU3lzLlJlcy5lbnVtSW52YWxpZFZhbHVlLGIsIlRlbGVyaWsuV2ViLkJveFNpZGUiKSk7Cn12YXIgZD0kdGVsZXJpay5fcGFkZGluZ1dpZHRoTmFtZXNbYl07CnZhciBjPSR0ZWxlcmlrLmdldEN1cnJlbnRTdHlsZShhLGQpOwpyZXR1cm4gJHRlbGVyaWsucGFyc2VQYWRkaW5nKGMpOwp9LHBhcnNlQm9yZGVyV2lkdGg6ZnVuY3Rpb24oYSl7aWYoYSl7c3dpdGNoKGEpe2Nhc2UidGhpbiI6Y2FzZSJtZWRpdW0iOmNhc2UidGhpY2siOnJldHVybiAkdGVsZXJpay5fYm9yZGVyVGhpY2tuZXNzZXNbYV07CmNhc2UiaW5oZXJpdCI6cmV0dXJuIDA7Cn12YXIgYj0kdGVsZXJpay5wYXJzZVVuaXQoYSk7CnJldHVybiBiLnNpemU7Cn1yZXR1cm4gMDsKfSxwYXJzZVBhZGRpbmc6ZnVuY3Rpb24oYil7aWYoYil7aWYoYj09ImF1dG8ifHxiPT0iaW5oZXJpdCIpe3JldHVybiAwOwp9dmFyIGE9JHRlbGVyaWsucGFyc2VVbml0KGIpOwpyZXR1cm4gYS5zaXplOwp9cmV0dXJuIDA7Cn0scGFyc2VVbml0OmZ1bmN0aW9uKGQpe2lmKCFkKXt0aHJvdyBFcnJvci5hcmd1bWVudE51bGwoInZhbHVlIik7Cn1kPWQudHJpbSgpLnRvTG93ZXJDYXNlKCk7CnZhciBnPWQubGVuZ3RoOwp2YXIgYT0tMTsKZm9yKHZhciBmPTA7CmY8ZzsKZisrKXt2YXIgYz1kLnN1YnN0cihmLDEpOwppZigoYzwiMCJ8fGM+IjkiKSYmYyE9Ii0iJiZjIT0iLiImJmMhPSIsIil7YnJlYWs7Cn1hPWY7Cn1pZihhPT0tMSl7dGhyb3cgRXJyb3IuY3JlYXRlKCJObyBkaWdpdHMiKTsKfXZhciBlOwp2YXIgYjsKaWYoYTwoZy0xKSl7ZT1kLnN1YnN0cmluZyhhKzEpLnRyaW0oKTsKfWVsc2V7ZT0icHgiOwp9Yj1wYXJzZUZsb2F0KGQuc3Vic3RyKDAsYSsxKSk7CmlmKGU9PSJweCIpe2I9TWF0aC5mbG9vcihiKTsKfXJldHVybntzaXplOmIsdHlwZTplfTsKfSxjb250YWluc1BvaW50OmZ1bmN0aW9uKGMsYSxiKXtyZXR1cm4gYT49Yy54JiZhPD0oYy54K2Mud2lkdGgpJiZiPj1jLnkmJmI8PShjLnkrYy5oZWlnaHQpOwp9LGlzRGVzY2VuZGFudDpmdW5jdGlvbihhLGMpe3RyeXtmb3IodmFyIGI9Yy5wYXJlbnROb2RlOwpiIT1udWxsOwpiPWIucGFyZW50Tm9kZSl7aWYoYj09YSl7cmV0dXJuIHRydWU7Cn19fWNhdGNoKGQpe31yZXR1cm4gZmFsc2U7Cn0saXNEZXNjZW5kYW50T3JTZWxmOmZ1bmN0aW9uKGEsYil7aWYoYT09PWIpe3JldHVybiB0cnVlOwp9cmV0dXJuICR0ZWxlcmlrLmlzRGVzY2VuZGFudChhLGIpOwp9LGFkZENzc0NsYXNzZXM6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MDsKYzxiLmxlbmd0aDsKYysrKXtTeXMuVUkuRG9tRWxlbWVudC5hZGRDc3NDbGFzcyhhLGJbY10pOwp9fSxyZW1vdmVDc3NDbGFzc2VzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7CmM8Yi5sZW5ndGg7CmMrKyl7U3lzLlVJLkRvbUVsZW1lbnQucmVtb3ZlQ3NzQ2xhc3MoYSxiW2NdKTsKfX0sZ2V0U2Nyb2xsT2Zmc2V0OmZ1bmN0aW9uKGMsYil7dmFyIGE9MDsKdmFyIGU9MDsKdmFyIGQ9YzsKdmFyIGY9YyYmYy5vd25lckRvY3VtZW50P2Mub3duZXJEb2N1bWVudDpkb2N1bWVudDsKd2hpbGUoZCE9bnVsbCYmZC5zY3JvbGxMZWZ0IT1udWxsKXthKz0kdGVsZXJpay5nZXRDb3JyZWN0U2Nyb2xsTGVmdChkKTsKZSs9ZC5zY3JvbGxUb3A7CmlmKCFifHwoZD09Zi5ib2R5JiYoZC5zY3JvbGxMZWZ0IT0wfHxkLnNjcm9sbFRvcCE9MCkpKXticmVhazsKfWQ9ZC5wYXJlbnROb2RlOwp9cmV0dXJue3g6YSx5OmV9Owp9LGdldEVsZW1lbnRCeUNsYXNzTmFtZTpmdW5jdGlvbihjLGUsYil7dmFyIGc9bnVsbDsKaWYoYil7Zz1jLmdldEVsZW1lbnRzQnlUYWdOYW1lKGIpOwp9ZWxzZXtnPWMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKTsKfWZvcih2YXIgZj0wLGQ9Zy5sZW5ndGg7CmY8ZDsKZisrKXt2YXIgYT1nW2ZdOwppZihTeXMuVUkuRG9tRWxlbWVudC5jb250YWluc0Nzc0NsYXNzKGEsZSkpe3JldHVybiBhOwp9fXJldHVybiBudWxsOwp9LGdldEVsZW1lbnRzQnlDbGFzc05hbWU6ZnVuY3Rpb24oYyxiLGEpe2lmKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUpe2dldEVsZW1lbnRzQnlDbGFzc05hbWU9ZnVuY3Rpb24oZyxtLGUpe2U9ZXx8ZG9jdW1lbnQ7CnZhciBrPWUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShnKSxqPShtKT9uZXcgUmVnRXhwKCJcXGIiK20rIlxcYiIsImkiKTpudWxsLGw9W10saDsKZm9yKHZhciBkPTAsZj1rLmxlbmd0aDsKZDxmOwpkKz0xKXtoPWtbZF07CmlmKCFqfHxqLnRlc3QoaC5ub2RlTmFtZSkpe2wucHVzaChoKTsKfX1yZXR1cm4gbDsKfTsKfWVsc2V7aWYoZG9jdW1lbnQuZXZhbHVhdGUpe2dldEVsZW1lbnRzQnlDbGFzc05hbWU9ZnVuY3Rpb24oZyxoLG4pe2g9aHx8IioiOwpuPW58fGRvY3VtZW50Owp2YXIgcj1nLnNwbGl0KCIgIiksbz0iIixwPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIixmPShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQubmFtZXNwYWNlVVJJPT09cCk/cDpudWxsLGs9W10sbCxpOwpmb3IodmFyIHE9MCxtPXIubGVuZ3RoOwpxPG07CnErPTEpe28rPSJbY29udGFpbnMoY29uY2F0KCcgJywgQGNsYXNzLCAnICcpLCAnICIrcltxXSsiICcpXSI7Cn10cnl7bD1kb2N1bWVudC5ldmFsdWF0ZSgiLi8vIitoK28sbixmLDAsbnVsbCk7Cn1jYXRjaChkKXtsPWRvY3VtZW50LmV2YWx1YXRlKCIuLy8iK2grbyxuLG51bGwsMCxudWxsKTsKfXdoaWxlKChpPWwuaXRlcmF0ZU5leHQoKSkpe2sucHVzaChpKTsKfXJldHVybiBrOwp9Owp9ZWxzZXtnZXRFbGVtZW50c0J5Q2xhc3NOYW1lPWZ1bmN0aW9uKGQsZixuKXtmPWZ8fCIqIjsKbj1ufHxkb2N1bWVudDsKdmFyIGU9ZC5zcGxpdCgiICIpLHE9W10saT0oZj09PSIqIiYmbi5hbGwpP24uYWxsOm4uZ2V0RWxlbWVudHNCeVRhZ05hbWUoZikscCxnPVtdLG87CmZvcih2YXIgcj0wLGg9ZS5sZW5ndGg7CnI8aDsKcis9MSl7cS5wdXNoKG5ldyBSZWdFeHAoIihefFxccykiK2Vbcl0rIihcXHN8JCkiKSk7Cn1mb3IodmFyIHQ9MCxqPWkubGVuZ3RoOwp0PGo7CnQrPTEpe3A9aVt0XTsKbz1mYWxzZTsKZm9yKHZhciB1PTAscz1xLmxlbmd0aDsKdTxzOwp1Kz0xKXtvPXFbdV0udGVzdChwLmNsYXNzTmFtZSk7CmlmKCFvKXticmVhazsKfX1pZihvKXtnLnB1c2gocCk7Cn19cmV0dXJuIGc7Cn07Cn19cmV0dXJuIGdldEVsZW1lbnRzQnlDbGFzc05hbWUoYixhLGMpOwp9LF9nZXRXaW5kb3c6ZnVuY3Rpb24oYil7dmFyIGE9Yi5vd25lckRvY3VtZW50fHxiLmRvY3VtZW50fHxiOwpyZXR1cm4gYS5kZWZhdWx0Vmlld3x8YS5wYXJlbnRXaW5kb3c7Cn0sdXNlQXR0YWNoRXZlbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuKGEuYXR0YWNoRXZlbnQmJiEkdGVsZXJpay5pc09wZXJhKTsKfSx1c2VEZXRhY2hFdmVudDpmdW5jdGlvbihhKXtyZXR1cm4oYS5kZXRhY2hFdmVudCYmISR0ZWxlcmlrLmlzT3BlcmEpOwp9LGFkZEhhbmRsZXI6ZnVuY3Rpb24oYyxoLGcsYil7aWYoIWMuX2V2ZW50cyl7Yy5fZXZlbnRzPXt9Owp9dmFyIGY9Yy5fZXZlbnRzW2hdOwppZighZil7Yy5fZXZlbnRzW2hdPWY9W107Cn12YXIgYTsKaWYoJHRlbGVyaWsudXNlQXR0YWNoRXZlbnQoYykpe2E9ZnVuY3Rpb24oKXt2YXIgZD17fTsKdHJ5e2Q9JHRlbGVyaWsuX2dldFdpbmRvdyhjKS5ldmVudDsKfWNhdGNoKGkpe31yZXR1cm4gZy5jYWxsKGMsbmV3IFN5cy5VSS5Eb21FdmVudChkKSk7Cn07CmMuYXR0YWNoRXZlbnQoIm9uIitoLGEpOwp9ZWxzZXtpZihjLmFkZEV2ZW50TGlzdGVuZXIpe2E9ZnVuY3Rpb24oZCl7cmV0dXJuIGcuY2FsbChjLG5ldyBTeXMuVUkuRG9tRXZlbnQoZCkpOwp9OwpjLmFkZEV2ZW50TGlzdGVuZXIoaCxhLGZhbHNlKTsKfX1mW2YubGVuZ3RoXT17aGFuZGxlcjpnLGJyb3dzZXJIYW5kbGVyOmEsYXV0b1JlbW92ZTpifTsKaWYoYil7dmFyIGU9Yy5kaXNwb3NlOwppZihlIT09JHRlbGVyaWsuX2Rpc3Bvc2VIYW5kbGVycyl7Yy5kaXNwb3NlPSR0ZWxlcmlrLl9kaXNwb3NlSGFuZGxlcnM7CmlmKHR5cGVvZihlKSE9PSJ1bmRlZmluZWQiKXtjLl9jaGFpbkRpc3Bvc2U9ZTsKfX19fSxhZGRIYW5kbGVyczpmdW5jdGlvbihiLGUsZCxhKXtmb3IodmFyIGMgaW4gZSl7dmFyIGY9ZVtjXTsKaWYoZCl7Zj1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZShkLGYpOwp9JHRlbGVyaWsuYWRkSGFuZGxlcihiLGMsZixhfHxmYWxzZSk7Cn19LGNsZWFySGFuZGxlcnM6ZnVuY3Rpb24oYSl7JHRlbGVyaWsuX2NsZWFySGFuZGxlcnMoYSxmYWxzZSk7Cn0sX2NsZWFySGFuZGxlcnM6ZnVuY3Rpb24oYSxnKXtpZihhLl9ldmVudHMpe3ZhciBmPWEuX2V2ZW50czsKZm9yKHZhciBiIGluIGYpe3ZhciBjPWZbYl07CmZvcih2YXIgZT1jLmxlbmd0aC0xOwplPj0wOwplLS0pe3ZhciBkPWNbZV07CmlmKCFnfHxkLmF1dG9SZW1vdmUpeyR0ZWxlcmlrLnJlbW92ZUhhbmRsZXIoYSxiLGQuaGFuZGxlcik7Cn19fWEuX2V2ZW50cz1udWxsOwp9fSxfZGlzcG9zZUhhbmRsZXJzOmZ1bmN0aW9uKCl7JHRlbGVyaWsuX2NsZWFySGFuZGxlcnModGhpcyx0cnVlKTsKdmFyIGI9dGhpcy5fY2hhaW5EaXNwb3NlLGE9dHlwZW9mKGIpOwppZihhIT09InVuZGVmaW5lZCIpe3RoaXMuZGlzcG9zZT1iOwp0aGlzLl9jaGFpbkRpc3Bvc2U9bnVsbDsKaWYoYT09PSJmdW5jdGlvbiIpe3RoaXMuZGlzcG9zZSgpOwp9fX0scmVtb3ZlSGFuZGxlcjpmdW5jdGlvbihhLGIsYyl7JHRlbGVyaWsuX3JlbW92ZUhhbmRsZXIoYSxiLGMpOwp9LF9yZW1vdmVIYW5kbGVyOmZ1bmN0aW9uKGMsZyxmKXt2YXIgYT1udWxsOwp2YXIgYj1jLl9ldmVudHNbZ118fFtdOwpmb3IodmFyIGU9MCxkPWIubGVuZ3RoOwplPGQ7CmUrKyl7aWYoYltlXS5oYW5kbGVyPT09Zil7YT1iW2VdLmJyb3dzZXJIYW5kbGVyOwpicmVhazsKfX1pZigkdGVsZXJpay51c2VEZXRhY2hFdmVudChjKSl7Yy5kZXRhY2hFdmVudCgib24iK2csYSk7Cn1lbHNle2lmKGMucmVtb3ZlRXZlbnRMaXN0ZW5lcil7Yy5yZW1vdmVFdmVudExpc3RlbmVyKGcsYSxmYWxzZSk7Cn19Yi5zcGxpY2UoZSwxKTsKfSxfZW1wdHlTcmM6ZnVuY3Rpb24oKXtyZXR1cm4iYWJvdXQ6YmxhbmsiOwp9LGFkZEV4dGVybmFsSGFuZGxlcjpmdW5jdGlvbihhLGIsYyl7aWYoIWEpe3JldHVybjsKfWlmKCR0ZWxlcmlrLnVzZUF0dGFjaEV2ZW50KGEpKXthLmF0dGFjaEV2ZW50KCJvbiIrYixjKTsKfWVsc2V7aWYoYS5hZGRFdmVudExpc3RlbmVyKXthLmFkZEV2ZW50TGlzdGVuZXIoYixjLGZhbHNlKTsKfX19LHJlbW92ZUV4dGVybmFsSGFuZGxlcjpmdW5jdGlvbihhLGIsYyl7aWYoIWEpe3JldHVybjsKfWlmKCR0ZWxlcmlrLnVzZURldGFjaEV2ZW50KGEpKXthLmRldGFjaEV2ZW50KCJvbiIrYixjKTsKfWVsc2V7aWYoYS5hZGRFdmVudExpc3RlbmVyKXthLnJlbW92ZUV2ZW50TGlzdGVuZXIoYixjLGZhbHNlKTsKfX19LGFkZE1vYmlsZUhhbmRsZXI6ZnVuY3Rpb24oZyxhLGMsZSxmLGQpe2lmKCFhfHwhZyl7cmV0dXJuOwp9dmFyIGI9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUoZywkdGVsZXJpay5pc1RvdWNoRGV2aWNlPyhmfHxlKTplKTsKaWYoJHRlbGVyaWsuaXNUb3VjaERldmljZSl7aWYoJHRlbGVyaWsuJCl7JHRlbGVyaWsuJChhKS5iaW5kKCR0ZWxlcmlrLmdldE1vYmlsZUV2ZW50Q291bnRlcnBhcnQoYyksYik7Cn1lbHNleyR0ZWxlcmlrLmFkZEV4dGVybmFsSGFuZGxlcihhLCR0ZWxlcmlrLmdldE1vYmlsZUV2ZW50Q291bnRlcnBhcnQoYyksYik7Cn19ZWxzZXtpZihkKXskdGVsZXJpay5hZGRFeHRlcm5hbEhhbmRsZXIoYSxjLGIpOwp9ZWxzZXskYWRkSGFuZGxlcihhLGMsYik7Cn19cmV0dXJuIGI7Cn0scmVtb3ZlTW9iaWxlSGFuZGxlcjpmdW5jdGlvbihhLGMsZCxiLGUpe2lmKCFhKXtyZXR1cm47Cn1pZigkdGVsZXJpay5pc1RvdWNoRGV2aWNlKXtpZigkdGVsZXJpay4kKXskdGVsZXJpay4kKGEpLnVuYmluZCgkdGVsZXJpay5nZXRNb2JpbGVFdmVudENvdW50ZXJwYXJ0KGMpLChifHxkKSk7Cn1lbHNleyR0ZWxlcmlrLnJlbW92ZUV4dGVybmFsSGFuZGxlcihhLCR0ZWxlcmlrLmdldE1vYmlsZUV2ZW50Q291bnRlcnBhcnQoYyksKGJ8fGQpKTsKfX1lbHNle2lmKGUpeyR0ZWxlcmlrLnJlbW92ZUV4dGVybmFsSGFuZGxlcihhLGMsZCk7Cn1lbHNleyRyZW1vdmVIYW5kbGVyKGEsYyxkKTsKfX19LGdldE1vYmlsZUV2ZW50Q291bnRlcnBhcnQ6ZnVuY3Rpb24oYSl7c3dpdGNoKGEpe2Nhc2UibW91c2Vkb3duIjpyZXR1cm4idG91Y2hzdGFydCI7CmNhc2UibW91c2V1cCI6cmV0dXJuInRvdWNoZW5kIjsKY2FzZSJtb3VzZW1vdmUiOnJldHVybiJ0b3VjaG1vdmUiOwp9cmV0dXJuIGE7Cn0sZ2V0VG91Y2hFdmVudExvY2F0aW9uOmZ1bmN0aW9uKGQpe3ZhciBmPWFyZ3VtZW50c1sxXSxiPWY/W2YrIlgiXToicGFnZVgiLGM9Zj9bZisiWSJdOiJwYWdlWSIsYT17eDpkW2JdLHk6ZFtjXX0sZz1kLmNoYW5nZWRUb3VjaGVzfHwoZC5vcmlnaW5hbEV2ZW50P2Qub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlczpkLnJhd0V2ZW50P2QucmF3RXZlbnQuY2hhbmdlZFRvdWNoZXM6ZmFsc2UpOwppZigkdGVsZXJpay5pc1RvdWNoRGV2aWNlJiZnJiZnLmxlbmd0aDwyKXthLng9Z1swXVtiXTsKYS55PWdbMF1bY107Cn1yZXR1cm4gYTsKfSxnZXRUb3VjaFRhcmdldDpmdW5jdGlvbihhKXtpZigkdGVsZXJpay5pc1RvdWNoRGV2aWNlKXt2YXIgYj0ib3JpZ2luYWxFdmVudCIgaW4gYT9hLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXM6InJhd0V2ZW50IiBpbiBhP2EucmF3RXZlbnQuY2hhbmdlZFRvdWNoZXM6YS5jaGFuZ2VkVG91Y2hlczsKcmV0dXJuIGI/ZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludChiWzBdLmNsaWVudFgsYlswXS5jbGllbnRZKTphLnRhcmdldDsKfWVsc2V7cmV0dXJuIGEudGFyZ2V0Owp9fSxjYW5jZWxSYXdFdmVudDpmdW5jdGlvbihhKXtpZighYSl7cmV0dXJuIGZhbHNlOwp9aWYoYS5wcmV2ZW50RGVmYXVsdCl7YS5wcmV2ZW50RGVmYXVsdCgpOwp9aWYoYS5zdG9wUHJvcGFnYXRpb24pe2Euc3RvcFByb3BhZ2F0aW9uKCk7Cn1hLmNhbmNlbEJ1YmJsZT10cnVlOwphLnJldHVyblZhbHVlPWZhbHNlOwpyZXR1cm4gZmFsc2U7Cn0sZ2V0T3V0ZXJIdG1sOmZ1bmN0aW9uKGEpe2lmKGEub3V0ZXJIVE1MKXtyZXR1cm4gYS5vdXRlckhUTUw7Cn1lbHNle3ZhciBiPWEuY2xvbmVOb2RlKHRydWUpOwp2YXIgYz1hLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CmMuYXBwZW5kQ2hpbGQoYik7CnJldHVybiBjLmlubmVySFRNTDsKfX0sc2V0VmlzaWJsZTpmdW5jdGlvbihhLGIpe2lmKCFhKXtyZXR1cm47Cn1pZihiIT0kdGVsZXJpay5nZXRWaXNpYmxlKGEpKXtpZihiKXtpZihhLnN0eWxlLnJlbW92ZUF0dHJpYnV0ZSl7YS5zdHlsZS5yZW1vdmVBdHRyaWJ1dGUoImRpc3BsYXkiKTsKfWVsc2V7YS5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgiZGlzcGxheSIpOwp9fWVsc2V7YS5zdHlsZS5kaXNwbGF5PSJub25lIjsKfWEuc3R5bGUudmlzaWJpbGl0eT1iPyJ2aXNpYmxlIjoiaGlkZGVuIjsKfX0sZ2V0VmlzaWJsZTpmdW5jdGlvbihhKXtpZighYSl7cmV0dXJuIGZhbHNlOwp9cmV0dXJuKCgibm9uZSIhPSR0ZWxlcmlrLmdldEN1cnJlbnRTdHlsZShhLCJkaXNwbGF5IikpJiYoImhpZGRlbiIhPSR0ZWxlcmlrLmdldEN1cnJlbnRTdHlsZShhLCJ2aXNpYmlsaXR5IikpKTsKfSxnZXRWaWV3UG9ydFNpemU6ZnVuY3Rpb24oKXt2YXIgYj0wOwp2YXIgYT0wOwp2YXIgYz1kb2N1bWVudC5ib2R5OwppZighJHRlbGVyaWsucXVpcmtzTW9kZSYmISR0ZWxlcmlrLmlzU2FmYXJpKXtjPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKfWlmKHdpbmRvdy5pbm5lcldpZHRoKXtiPU1hdGgubWF4KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCxkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoKTsKYT1NYXRoLm1heChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0LGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0KTsKaWYoYj53aW5kb3cuaW5uZXJXaWR0aCl7Yj1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7Cn1pZihhPndpbmRvdy5pbm5lckhlaWdodCl7YT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0Owp9fWVsc2V7Yj1jLmNsaWVudFdpZHRoOwphPWMuY2xpZW50SGVpZ2h0Owp9Yis9Yy5zY3JvbGxMZWZ0OwphKz1jLnNjcm9sbFRvcDsKaWYoJHRlbGVyaWsuaXNNb2JpbGVTYWZhcmkpe2IrPXdpbmRvdy5wYWdlWE9mZnNldDsKYSs9d2luZG93LnBhZ2VZT2Zmc2V0Owp9cmV0dXJue3dpZHRoOmItNixoZWlnaHQ6YS02fTsKfSxlbGVtZW50T3ZlcmZsb3dzVG9wOmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8JHRlbGVyaWsuZ2V0TG9jYXRpb24oYSk7CnJldHVybiBjLnk8MDsKfSxlbGVtZW50T3ZlcmZsb3dzTGVmdDpmdW5jdGlvbihhLGIpe3ZhciBjPWJ8fCR0ZWxlcmlrLmdldExvY2F0aW9uKGEpOwpyZXR1cm4gYy54PDA7Cn0sZWxlbWVudE92ZXJmbG93c0JvdHRvbTpmdW5jdGlvbihiLGEsYyl7dmFyIGU9Y3x8JHRlbGVyaWsuZ2V0TG9jYXRpb24oYSk7CnZhciBkPWUueSthLm9mZnNldEhlaWdodDsKcmV0dXJuIGQ+Yi5oZWlnaHQ7Cn0sZWxlbWVudE92ZXJmbG93c1JpZ2h0OmZ1bmN0aW9uKGIsYSxjKXt2YXIgZT1jfHwkdGVsZXJpay5nZXRMb2NhdGlvbihhKTsKdmFyIGQ9ZS54K2Eub2Zmc2V0V2lkdGg7CnJldHVybiBkPmIud2lkdGg7Cn0sZ2V0RG9jdW1lbnRSZWxhdGl2ZUN1cnNvclBvc2l0aW9uOmZ1bmN0aW9uKGIpe3ZhciBjPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKdmFyIGQ9ZG9jdW1lbnQuYm9keTsKdmFyIGY9Yi5jbGllbnRYKygkdGVsZXJpay5nZXRDb3JyZWN0U2Nyb2xsTGVmdChjKSskdGVsZXJpay5nZXRDb3JyZWN0U2Nyb2xsTGVmdChkKSk7CnZhciBhPWIuY2xpZW50WSsoYy5zY3JvbGxUb3ArZC5zY3JvbGxUb3ApOwppZigkdGVsZXJpay5pc0lFJiZTeXMuQnJvd3Nlci52ZXJzaW9uPDgpe2YtPTI7CmEtPTI7Cn1yZXR1cm57bGVmdDpmLHRvcDphfTsKfSxldmFsU2NyaXB0Q29kZTpmdW5jdGlvbihiKXtpZigkdGVsZXJpay5pc1NhZmFyaSl7Yj1iLnJlcGxhY2UoL15ccyo8IS0tKCgufFxuKSopLS0+XHMqJC9taSwiJDEiKTsKfXZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpOwphLnNldEF0dHJpYnV0ZSgidHlwZSIsInRleHQvamF2YXNjcmlwdCIpOwphLnRleHQ9YjsKdmFyIGM9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImhlYWQiKVswXTsKYy5hcHBlbmRDaGlsZChhKTsKYS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpOwp9LGlzU2NyaXB0UmVnaXN0ZXJlZDpmdW5jdGlvbihjLGQpe2lmKCFjKXtyZXR1cm4gMDsKfWlmKCFkKXtkPWRvY3VtZW50Owp9aWYoJHRlbGVyaWsuX3VuaXF1ZVNjcmlwdHM9PW51bGwpeyR0ZWxlcmlrLl91bmlxdWVTY3JpcHRzPXt9Owp9dmFyIGo9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInNjcmlwdCIpOwp2YXIgaz0wOwp2YXIgZT1jLmluZGV4T2YoIj9kPSIpOwp2YXIgZz1jLmluZGV4T2YoIiYiKTsKdmFyIGE9ZT4wJiZnPmU/Yy5zdWJzdHJpbmcoZSszLGcpOmM7CmlmKCR0ZWxlcmlrLl91bmlxdWVTY3JpcHRzW2FdIT1udWxsKXtyZXR1cm4gMjsKfWZvcih2YXIgaD0wLGI9ai5sZW5ndGg7Cmg8YjsKaCsrKXt2YXIgZj1qW2hdOwppZihmLnNyYyl7aWYoZi5nZXRBdHRyaWJ1dGUoInNyYyIsMikuaW5kZXhPZihhKSE9LTEpeyR0ZWxlcmlrLl91bmlxdWVTY3JpcHRzW2FdPXRydWU7CmlmKCEkdGVsZXJpay5pc0Rlc2NlbmRhbnQoZCxmKSl7aysrOwp9fX19cmV0dXJuIGs7Cn0sZXZhbFNjcmlwdHM6ZnVuY3Rpb24oZCxhKXskdGVsZXJpay5yZWdpc3RlclNraW5zKGQpOwp2YXIgZT1kLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzY3JpcHQiKTsKdmFyIGs9MCxnPTA7CnZhciBsPWZ1bmN0aW9uKGksbyl7aWYoaS1nPjAmJigkdGVsZXJpay5pc0lFfHwkdGVsZXJpay5pc1NhZmFyaSkpe3dpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bChpLG8pOwp9LDUpOwp9ZWxzZXt2YXIgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTsKbi5zZXRBdHRyaWJ1dGUoInR5cGUiLCJ0ZXh0L2phdmFzY3JpcHQiKTsKZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImhlYWQiKVswXS5hcHBlbmRDaGlsZChuKTsKbi5sb2FkRmluaXNoZWQ9ZmFsc2U7Cm4ub25sb2FkPWZ1bmN0aW9uKCl7aWYoIXRoaXMubG9hZEZpbmlzaGVkKXt0aGlzLmxvYWRGaW5pc2hlZD10cnVlOwpnKys7Cn19OwpuLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2lmKCJsb2FkZWQiPT09dGhpcy5yZWFkeVN0YXRlJiYhdGhpcy5sb2FkRmluaXNoZWQpe3RoaXMubG9hZEZpbmlzaGVkPXRydWU7CmcrKzsKfX07Cm4uc2V0QXR0cmlidXRlKCJzcmMiLG8pOwp9fTsKdmFyIGY9W107CmZvcih2YXIgYj0wLG09ZS5sZW5ndGg7CmI8bTsKYisrKXt2YXIgaD1lW2JdOwppZihoLnNyYyl7dmFyIGM9aC5nZXRBdHRyaWJ1dGUoInNyYyIsMik7CmlmKCEkdGVsZXJpay5pc1NjcmlwdFJlZ2lzdGVyZWQoYyxkKSl7bChrKyssYyk7Cn19ZWxzZXtBcnJheS5hZGQoZixoLmlubmVySFRNTCk7Cn19dmFyIGo9ZnVuY3Rpb24oKXtpZihrLWc+MCl7d2luZG93LnNldFRpbWVvdXQoaiwyMCk7Cn1lbHNle2Zvcih2YXIgaT0wOwppPGYubGVuZ3RoOwppKyspeyR0ZWxlcmlrLmV2YWxTY3JpcHRDb2RlKGZbaV0pOwp9aWYoYSl7YSgpOwp9fX07CmooKTsKfSxyZWdpc3RlclNraW5zOmZ1bmN0aW9uKGIpe2lmKCFiKXtiPWRvY3VtZW50LmJvZHk7Cn12YXIgZj1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJsaW5rIik7CmlmKGYmJmYubGVuZ3RoPjApe3ZhciBhPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF07CmlmKGEpe2Zvcih2YXIgaz0wLGM9Zi5sZW5ndGg7Cms8YzsKaysrKXt2YXIgaD1mW2tdOwppZihoLmNsYXNzTmFtZT09IlRlbGVyaWtfc3R5bGVzaGVldCIpe3ZhciBsPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImxpbmsiKTsKaWYoaC5ocmVmLmluZGV4T2YoImllN0NhY2hlRml4Iik+PTApe3RyeXtoLmhyZWY9aC5ocmVmLnJlcGxhY2UoIiZpZTdDYWNoZUZpeCIsIiIpOwpoLmhyZWY9aC5ocmVmLnJlcGxhY2UoIj9pZTdDYWNoZUZpeCIsIiIpOwp9Y2F0Y2goZCl7fX1pZihsJiZsLmxlbmd0aD4wKXt2YXIgZz1sLmxlbmd0aC0xOwp3aGlsZShnPj0wJiZsW2ctLV0uaHJlZiE9aC5ocmVmKXt9aWYoZz49MCl7Y29udGludWU7Cn19aWYoJHRlbGVyaWsuaXNJRSYmISR0ZWxlcmlrLmlzSUU5TW9kZSl7aC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGgpOwpoPWguY2xvbmVOb2RlKHRydWUpOwp9YS5hcHBlbmRDaGlsZChoKTsKaWYoYz5mLmxlbmd0aCl7Yz1mLmxlbmd0aDsKay0tOwp9fX19fX0sZ2V0Rmlyc3RDaGlsZEJ5VGFnTmFtZTpmdW5jdGlvbihhLGIsZCl7aWYoIWF8fCFhLmNoaWxkTm9kZXMpe3JldHVybiBudWxsOwp9dmFyIGM9YS5jaGlsZE5vZGVzW2RdfHxhLmZpcnN0Q2hpbGQ7CndoaWxlKGMpe2lmKGMubm9kZVR5cGU9PTEmJmMudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT1iKXtyZXR1cm4gYzsKfWM9Yy5uZXh0U2libGluZzsKfXJldHVybiBudWxsOwp9LGdldENoaWxkQnlDbGFzc05hbWU6ZnVuY3Rpb24oYSxkLGIpe3ZhciBjPWEuY2hpbGROb2Rlc1tiXXx8YS5maXJzdENoaWxkOwp3aGlsZShjKXtpZihjLm5vZGVUeXBlPT0xJiZjLmNsYXNzTmFtZS5pbmRleE9mKGQpPi0xKXtyZXR1cm4gYzsKfWM9Yy5uZXh0U2libGluZzsKfXJldHVybiBudWxsOwp9LGdldENoaWxkcmVuQnlUYWdOYW1lOmZ1bmN0aW9uKGUsYil7dmFyIGc9bmV3IEFycmF5KCk7CnZhciBjPWUuY2hpbGROb2RlczsKaWYoJHRlbGVyaWsuaXNJRSl7Yz1lLmNoaWxkcmVuOwp9Zm9yKHZhciBmPTAsZD1jLmxlbmd0aDsKZjxkOwpmKyspe3ZhciBhPWNbZl07CmlmKGEubm9kZVR5cGU9PTEmJmEudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT1iKXtBcnJheS5hZGQoZyxhKTsKfX1yZXR1cm4gZzsKfSxnZXRDaGlsZHJlbkJ5Q2xhc3NOYW1lOmZ1bmN0aW9uKGIsZSl7dmFyIGc9bmV3IEFycmF5KCk7CnZhciBjPWIuY2hpbGROb2RlczsKaWYoJHRlbGVyaWsuaXNJRSl7Yz1iLmNoaWxkcmVuOwp9Zm9yKHZhciBmPTAsZD1jLmxlbmd0aDsKZjxkOwpmKyspe3ZhciBhPWNbZl07CmlmKGEubm9kZVR5cGU9PTEmJmEuY2xhc3NOYW1lLmluZGV4T2YoZSk+LTEpe0FycmF5LmFkZChnLGEpOwp9fXJldHVybiBnOwp9LG1lcmdlRWxlbWVudEF0dHJpYnV0ZXM6ZnVuY3Rpb24oZSxiLGQpe2lmKCFlfHwhYil7cmV0dXJuOwp9aWYoZS5tZXJnZUF0dHJpYnV0ZXMpe2IubWVyZ2VBdHRyaWJ1dGVzKGUsZCk7Cn1lbHNle2Zvcih2YXIgYT0wOwphPGUuYXR0cmlidXRlcy5sZW5ndGg7CmErKyl7dmFyIGM9ZS5hdHRyaWJ1dGVzW2FdLm5vZGVWYWx1ZTsKYi5zZXRBdHRyaWJ1dGUoZS5hdHRyaWJ1dGVzW2FdLm5vZGVOYW1lLGMpOwp9aWYoIiI9PWIuZ2V0QXR0cmlidXRlKCJzdHlsZSIpKXtiLnJlbW92ZUF0dHJpYnV0ZSgic3R5bGUiKTsKfX19LGlzTW91c2VPdmVyRWxlbWVudDpmdW5jdGlvbihhLGIpe3ZhciBkPSR0ZWxlcmlrLmdldEJvdW5kcyhhKTsKdmFyIGM9JHRlbGVyaWsuZ2V0RG9jdW1lbnRSZWxhdGl2ZUN1cnNvclBvc2l0aW9uKGIpOwpyZXR1cm4gJHRlbGVyaWsuY29udGFpbnNQb2ludChkLGMubGVmdCxjLnRvcCk7Cn0saXNNb3VzZU92ZXJFbGVtZW50RXg6ZnVuY3Rpb24oYSxiKXt2YXIgZD1udWxsOwp0cnl7ZD0kdGVsZXJpay5nZXRPdXRlckJvdW5kcyhhKTsKfWNhdGNoKGIpe3JldHVybiBmYWxzZTsKfWlmKGImJmIudGFyZ2V0KXt2YXIgZj1iLnRhcmdldC50YWdOYW1lOwppZihmPT0iU0VMRUNUInx8Zj09Ik9QVElPTiIpe3JldHVybiB0cnVlOwp9aWYoYi5jbGllbnRYPDB8fGIuY2xpZW50WTwwKXtyZXR1cm4gdHJ1ZTsKfX12YXIgYz0kdGVsZXJpay5nZXREb2N1bWVudFJlbGF0aXZlQ3Vyc29yUG9zaXRpb24oYik7CmQueCs9MjsKZC55Kz0yOwpkLndpZHRoLT00OwpkLmhlaWdodC09NDsKcmV0dXJuICR0ZWxlcmlrLmNvbnRhaW5zUG9pbnQoZCxjLmxlZnQsYy50b3ApOwp9LGdldFByZXZpb3VzSHRtbE5vZGU6ZnVuY3Rpb24oYSl7aWYoIWF8fCFhLnByZXZpb3VzU2libGluZyl7cmV0dXJuIG51bGw7Cn13aGlsZShhLnByZXZpb3VzU2libGluZyl7aWYoYS5wcmV2aW91c1NpYmxpbmcubm9kZVR5cGU9PTEpe3JldHVybiBhLnByZXZpb3VzU2libGluZzsKfWE9YS5wcmV2aW91c1NpYmxpbmc7Cn19LGdldE5leHRIdG1sTm9kZTpmdW5jdGlvbihhKXtpZighYXx8IWEubmV4dFNpYmxpbmcpe3JldHVybiBudWxsOwp9d2hpbGUoYS5uZXh0U2libGluZyl7aWYoYS5uZXh0U2libGluZy5ub2RlVHlwZT09MSl7cmV0dXJuIGEubmV4dFNpYmxpbmc7Cn1hPWEubmV4dFNpYmxpbmc7Cn19LGRpc3Bvc2VFbGVtZW50OmZ1bmN0aW9uKGIpe2lmKHR5cGVvZihTeXMuV2ViRm9ybXMpPT0idW5kZWZpbmVkIil7cmV0dXJuOwp9dmFyIGE9U3lzLldlYkZvcm1zLlBhZ2VSZXF1ZXN0TWFuYWdlci5nZXRJbnN0YW5jZSgpOwppZihhJiZhLl9kZXN0cm95VHJlZSl7YS5fZGVzdHJveVRyZWUoYik7Cn1lbHNle2lmKFN5cy5BcHBsaWNhdGlvbi5kaXNwb3NlRWxlbWVudCl7U3lzLkFwcGxpY2F0aW9uLmRpc3Bvc2VFbGVtZW50KGIsdHJ1ZSk7Cn19fSxodG1sRW5jb2RlOmZ1bmN0aW9uKGQpe3ZhciBhPS8mL2csYz0vPC9nLGI9Lz4vZzsKcmV0dXJuKCIiK2QpLnJlcGxhY2UoYSwiJmFtcDsiKS5yZXBsYWNlKGMsIiZsdDsiKS5yZXBsYWNlKGIsIiZndDsiKTsKfSxodG1sRGVjb2RlOmZ1bmN0aW9uKGQpe3ZhciBhPS8mYW1wOy9nLGM9LyZsdDsvZyxiPS8mZ3Q7L2c7CnJldHVybigiIitkKS5yZXBsYWNlKGIsIj4iKS5yZXBsYWNlKGMsIjwiKS5yZXBsYWNlKGEsIiYiKTsKfX07CmlmKHR5cGVvZihTeXMuQnJvd3Nlci5XZWJLaXQpPT0idW5kZWZpbmVkIil7U3lzLkJyb3dzZXIuV2ViS2l0PXt9Owp9aWYodHlwZW9mKFN5cy5Ccm93c2VyLkNocm9tZSk9PSJ1bmRlZmluZWQiKXtTeXMuQnJvd3Nlci5DaHJvbWU9e307Cn1pZihuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIkNocm9tZSIpPi0xKXtTeXMuQnJvd3Nlci52ZXJzaW9uPXBhcnNlRmxvYXQobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvV2ViS2l0XC8oXGQrKFwuXGQrKT8pLylbMV0pOwpTeXMuQnJvd3Nlci5hZ2VudD1TeXMuQnJvd3Nlci5DaHJvbWU7ClN5cy5Ccm93c2VyLm5hbWU9IkNocm9tZSI7Cn1lbHNle2lmKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiV2ViS2l0LyIpPi0xKXtTeXMuQnJvd3Nlci52ZXJzaW9uPXBhcnNlRmxvYXQobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvV2ViS2l0XC8oXGQrKFwuXGQrKT8pLylbMV0pOwppZihTeXMuQnJvd3Nlci52ZXJzaW9uPDUwMCl7U3lzLkJyb3dzZXIuYWdlbnQ9U3lzLkJyb3dzZXIuU2FmYXJpOwpTeXMuQnJvd3Nlci5uYW1lPSJTYWZhcmkiOwp9ZWxzZXtTeXMuQnJvd3Nlci5hZ2VudD1TeXMuQnJvd3Nlci5XZWJLaXQ7ClN5cy5Ccm93c2VyLm5hbWU9IldlYktpdCI7Cn19fSR0ZWxlcmlrLmlzTW9iaWxlU2FmYXJpPShuYXZpZ2F0b3IudXNlckFnZW50LnNlYXJjaCgvbGlrZVxzTWFjXHNPU1xzWC4qTW9iaWxlXC9cUysvKSE9LTEpOwokdGVsZXJpay5pc0Nocm9tZT1TeXMuQnJvd3Nlci5hZ2VudD09U3lzLkJyb3dzZXIuQ2hyb21lOwokdGVsZXJpay5pc1NhZmFyaTY9U3lzLkJyb3dzZXIuYWdlbnQ9PVN5cy5Ccm93c2VyLldlYktpdCYmU3lzLkJyb3dzZXIudmVyc2lvbj49NTM2OwokdGVsZXJpay5pc1NhZmFyaTU9U3lzLkJyb3dzZXIuYWdlbnQ9PVN5cy5Ccm93c2VyLldlYktpdCYmU3lzLkJyb3dzZXIudmVyc2lvbj49NTM0JiZTeXMuQnJvd3Nlci52ZXJzaW9uPDUzNjsKJHRlbGVyaWsuaXNTYWZhcmk0PVN5cy5Ccm93c2VyLmFnZW50PT1TeXMuQnJvd3Nlci5XZWJLaXQmJlN5cy5Ccm93c2VyLnZlcnNpb24+PTUyNiYmU3lzLkJyb3dzZXIudmVyc2lvbjw1MzQ7CiR0ZWxlcmlrLmlzU2FmYXJpMz1TeXMuQnJvd3Nlci5hZ2VudD09U3lzLkJyb3dzZXIuV2ViS2l0JiZTeXMuQnJvd3Nlci52ZXJzaW9uPDUyNiYmU3lzLkJyb3dzZXIudmVyc2lvbj41MDA7CiR0ZWxlcmlrLmlzU2FmYXJpMj1TeXMuQnJvd3Nlci5hZ2VudD09U3lzLkJyb3dzZXIuU2FmYXJpOwokdGVsZXJpay5pc1NhZmFyaT0kdGVsZXJpay5pc1NhZmFyaTJ8fCR0ZWxlcmlrLmlzU2FmYXJpM3x8JHRlbGVyaWsuaXNTYWZhcmk0fHwkdGVsZXJpay5pc1NhZmFyaTV8fCR0ZWxlcmlrLmlzU2FmYXJpNnx8JHRlbGVyaWsuaXNDaHJvbWU7CiR0ZWxlcmlrLmlzQW5kcm9pZD0obmF2aWdhdG9yLnVzZXJBZ2VudC5zZWFyY2goL0FuZHJvaWQuKlNhZmFyaVwvXFMrL2kpIT0tMSk7CiR0ZWxlcmlrLmlzQmxhY2tCZXJyeTQ9KG5hdmlnYXRvci51c2VyQWdlbnQuc2VhcmNoKC9CbGFja0JlcnJ5XGQrXC80W1xkXC5dKy9pKSE9LTEpOwokdGVsZXJpay5pc0JsYWNrQmVycnk1PShuYXZpZ2F0b3IudXNlckFnZW50LnNlYXJjaCgvQmxhY2tCZXJyeVxkK1wvNVtcZFwuXSsvaSkhPS0xKTsKJHRlbGVyaWsuaXNCbGFja0JlcnJ5Nj0obmF2aWdhdG9yLnVzZXJBZ2VudC5zZWFyY2goL0JsYWNrQmVycnkuKlNhZmFyaVwvXFMrL2kpIT0tMSk7CiR0ZWxlcmlrLmlzQmxhY2tCZXJyeT0kdGVsZXJpay5pc0JsYWNrQmVycnk0fHwkdGVsZXJpay5pc0JsYWNrQmVycnk1fHwkdGVsZXJpay5pc0JsYWNrQmVycnk2OwokdGVsZXJpay5pc0lFPVN5cy5Ccm93c2VyLmFnZW50PT1TeXMuQnJvd3Nlci5JbnRlcm5ldEV4cGxvcmVyOwokdGVsZXJpay5pc0lFNj0kdGVsZXJpay5pc0lFJiZTeXMuQnJvd3Nlci52ZXJzaW9uPDc7CiR0ZWxlcmlrLmlzSUU3PSR0ZWxlcmlrLmlzSUUmJihTeXMuQnJvd3Nlci52ZXJzaW9uPT03fHwoZG9jdW1lbnQuZG9jdW1lbnRNb2RlJiZkb2N1bWVudC5kb2N1bWVudE1vZGU9PTcpKTsKJHRlbGVyaWsuaXNJRTg9JHRlbGVyaWsuaXNJRSYmKGRvY3VtZW50LmRvY3VtZW50TW9kZSYmZG9jdW1lbnQuZG9jdW1lbnRNb2RlPT04KTsKJHRlbGVyaWsuaXNJRTk9JHRlbGVyaWsuaXNJRSYmKGRvY3VtZW50LmRvY3VtZW50TW9kZSYmZG9jdW1lbnQuZG9jdW1lbnRNb2RlPT05KTsKJHRlbGVyaWsuaXNJRTlNb2RlPSR0ZWxlcmlrLmlzSUUmJihkb2N1bWVudC5kb2N1bWVudE1vZGUmJmRvY3VtZW50LmRvY3VtZW50TW9kZT49OSk7CiR0ZWxlcmlrLmlzSUUxMD0kdGVsZXJpay5pc0lFJiYoZG9jdW1lbnQuZG9jdW1lbnRNb2RlJiZkb2N1bWVudC5kb2N1bWVudE1vZGU9PTEwKTsKJHRlbGVyaWsuaXNJRTEwTW9kZT0kdGVsZXJpay5pc0lFJiYoZG9jdW1lbnQuZG9jdW1lbnRNb2RlJiZkb2N1bWVudC5kb2N1bWVudE1vZGU+PTEwKTsKJHRlbGVyaWsuaXNPcGVyYT1TeXMuQnJvd3Nlci5hZ2VudD09U3lzLkJyb3dzZXIuT3BlcmE7CiR0ZWxlcmlrLmlzRmlyZWZveD1TeXMuQnJvd3Nlci5hZ2VudD09U3lzLkJyb3dzZXIuRmlyZWZveDsKJHRlbGVyaWsuaXNGaXJlZm94Mj0kdGVsZXJpay5pc0ZpcmVmb3gmJlN5cy5Ccm93c2VyLnZlcnNpb248MzsKJHRlbGVyaWsuaXNGaXJlZm94Mz0kdGVsZXJpay5pc0ZpcmVmb3gmJlN5cy5Ccm93c2VyLnZlcnNpb24+PTM7CiR0ZWxlcmlrLnF1aXJrc01vZGU9JHRlbGVyaWsuaXNJRSYmZG9jdW1lbnQuY29tcGF0TW9kZSE9IkNTUzFDb21wYXQiOwokdGVsZXJpay5zdGFuZGFyZHNNb2RlPSEkdGVsZXJpay5xdWlya3NNb2RlOwokdGVsZXJpay5PcGVyYUVuZ2luZT0wOwokdGVsZXJpay5PcGVyYVZlcnNpb25TdHJpbmc9d2luZG93Lm9wZXJhP3dpbmRvdy5vcGVyYS52ZXJzaW9uKCk6MDsKJHRlbGVyaWsuT3BlcmFWZXJzaW9uPSR0ZWxlcmlrLk9wZXJhVmVyc2lvblN0cmluZz8ocGFyc2VJbnQoJHRlbGVyaWsuT3BlcmFWZXJzaW9uU3RyaW5nKjEwKS8xMCk6MDsKaWYoJHRlbGVyaWsuaXNPcGVyYSl7JHRlbGVyaWsuX3ByZXN0b1ZlcnNpb249bmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvUHJlc3RvXC8oXGQrXC4oXGQrKT8pLyk7CmlmKCR0ZWxlcmlrLl9wcmVzdG9WZXJzaW9uKXskdGVsZXJpay5PcGVyYUVuZ2luZT1wYXJzZUludCgkdGVsZXJpay5fcHJlc3RvVmVyc2lvblsxXSkrKHBhcnNlSW50KCR0ZWxlcmlrLl9wcmVzdG9WZXJzaW9uWzJdKS8xMDApOwp9fSR0ZWxlcmlrLmlzT3BlcmE5PSR0ZWxlcmlrLmlzT3BlcmEmJiR0ZWxlcmlrLk9wZXJhVmVyTnVtYmVyPDEwOwokdGVsZXJpay5pc09wZXJhMTA9JHRlbGVyaWsuaXNPcGVyYSYmJHRlbGVyaWsuT3BlcmFWZXJzaW9uPj0xMCYmJHRlbGVyaWsuT3BlcmFWZXJzaW9uPDEwLjU7CiR0ZWxlcmlrLmlzT3BlcmExMDU9JHRlbGVyaWsuaXNPcGVyYSYmJHRlbGVyaWsuT3BlcmFWZXJzaW9uPj0xMC41OwokdGVsZXJpay5pc09wZXJhMTE9JHRlbGVyaWsuaXNPcGVyYSYmJHRlbGVyaWsuT3BlcmFWZXJzaW9uPjExOwokdGVsZXJpay5pc01vYmlsZU9wZXJhPSR0ZWxlcmlrLmlzT3BlcmEmJihuYXZpZ2F0b3IudXNlckFnZW50LnNlYXJjaCgvb3BlcmEgKD86bW9iaXx0YWJsZXQpL2kpIT0tMSk7CiR0ZWxlcmlrLmlzVG91Y2hEZXZpY2U9JHRlbGVyaWsuaXNNb2JpbGVTYWZhcml8fCR0ZWxlcmlrLmlzQW5kcm9pZHx8JHRlbGVyaWsuaXNCbGFja0JlcnJ5Nnx8JHRlbGVyaWsuaXNNb2JpbGVPcGVyYTsKaWYoJHRlbGVyaWsuaXNJRTlNb2RlKXtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NOYW1lKz0iIF9UZWxlcmlrX0lFOSI7Cn1pZigkdGVsZXJpay5pc09wZXJhMTEpe2RvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc05hbWUrPSIgX1RlbGVyaWtfT3BlcmExMSI7Cn1lbHNle2lmKCR0ZWxlcmlrLmlzT3BlcmExMDUpe2RvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc05hbWUrPSIgX1RlbGVyaWtfT3BlcmExMDUiOwp9fWlmKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QpeyR0ZWxlcmlrLm9yaWdpbmFsR2V0TG9jYXRpb249ZnVuY3Rpb24oYyl7dmFyIGg9RnVuY3Rpb24uX3ZhbGlkYXRlUGFyYW1zKGFyZ3VtZW50cyxbe25hbWU6ImVsZW1lbnQiLGRvbUVsZW1lbnQ6dHJ1ZX1dKTsKaWYoaCl7dGhyb3cgaDsKfWlmKGMuc2VsZnx8Yy5ub2RlVHlwZT09PTl8fChjPT09ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KXx8KGMucGFyZW50Tm9kZT09PWMub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpKXtyZXR1cm4gbmV3IFN5cy5VSS5Qb2ludCgwLDApOwp9dmFyIGo9Yy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKaWYoIWope3JldHVybiBuZXcgU3lzLlVJLlBvaW50KDAsMCk7Cn12YXIgYT1jLm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LGs9TWF0aC5yb3VuZChqLmxlZnQpK2Euc2Nyb2xsTGVmdCxsPU1hdGgucm91bmQoai50b3ApK2Euc2Nyb2xsVG9wOwppZihTeXMuQnJvd3Nlci5hZ2VudD09PVN5cy5Ccm93c2VyLkludGVybmV0RXhwbG9yZXIpe3RyeXt2YXIgaT1jLm93bmVyRG9jdW1lbnQucGFyZW50V2luZG93LmZyYW1lRWxlbWVudHx8bnVsbDsKaWYoaSl7dmFyIGI9KGkuZnJhbWVCb3JkZXI9PT0iMCJ8fGkuZnJhbWVCb3JkZXI9PT0ibm8iKT8yOjA7CmsrPWI7CmwrPWI7Cn19Y2F0Y2gobil7fWlmKFN5cy5Ccm93c2VyLnZlcnNpb249PT03JiYhZG9jdW1lbnQuZG9jdW1lbnRNb2RlKXt2YXIgbT1kb2N1bWVudC5ib2R5LGc9bS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxkPShnLnJpZ2h0LWcubGVmdCkvbS5jbGllbnRXaWR0aDsKZD1NYXRoLnJvdW5kKGQqMTAwKTsKZD0oZC1kJTUpLzEwMDsKaWYoIWlzTmFOKGQpJiYoZCE9PTEpKXtrPU1hdGgucm91bmQoay9kKTsKbD1NYXRoLnJvdW5kKGwvZCk7Cn19aWYoKGRvY3VtZW50LmRvY3VtZW50TW9kZXx8MCk8OCl7ay09YS5jbGllbnRMZWZ0OwpsLT1hLmNsaWVudFRvcDsKfX1yZXR1cm4gbmV3IFN5cy5VSS5Qb2ludChrLGwpOwp9Owp9ZWxzZXtpZigkdGVsZXJpay5pc1NhZmFyaSl7JHRlbGVyaWsub3JpZ2luYWxHZXRMb2NhdGlvbj1mdW5jdGlvbihkKXt2YXIgZj1GdW5jdGlvbi5fdmFsaWRhdGVQYXJhbXMoYXJndW1lbnRzLFt7bmFtZToiZWxlbWVudCIsZG9tRWxlbWVudDp0cnVlfV0pOwppZihmKXt0aHJvdyBmOwp9aWYoKGQud2luZG93JiYoZC53aW5kb3c9PT1kKSl8fGQubm9kZVR5cGU9PT05KXtyZXR1cm4gbmV3IFN5cy5VSS5Qb2ludCgwLDApOwp9dmFyIGk9MCxqPTAsZyxsPW51bGwsYj1udWxsLGM7CmZvcihnPWQ7Cmc7Cmw9ZyxiPWMsZz1nLm9mZnNldFBhcmVudCl7Yz1TeXMuVUkuRG9tRWxlbWVudC5fZ2V0Q3VycmVudFN0eWxlKGcpOwp2YXIgYT1nLnRhZ05hbWU/Zy50YWdOYW1lLnRvVXBwZXJDYXNlKCk6bnVsbDsKaWYoKGcub2Zmc2V0TGVmdHx8Zy5vZmZzZXRUb3ApJiYoKGEhPT0iQk9EWSIpfHwoIWJ8fGIucG9zaXRpb24hPT0iYWJzb2x1dGUiKSkpe2krPWcub2Zmc2V0TGVmdDsKais9Zy5vZmZzZXRUb3A7Cn1pZihsJiZTeXMuQnJvd3Nlci52ZXJzaW9uPj0zKXtpKz1wYXJzZUludChjLmJvcmRlckxlZnRXaWR0aCk7CmorPXBhcnNlSW50KGMuYm9yZGVyVG9wV2lkdGgpOwp9fWM9U3lzLlVJLkRvbUVsZW1lbnQuX2dldEN1cnJlbnRTdHlsZShkKTsKdmFyIGg9Yz9jLnBvc2l0aW9uOm51bGw7CmlmKCFofHwoaCE9PSJhYnNvbHV0ZSIpKXtmb3IoZz1kLnBhcmVudE5vZGU7Cmc7Cmc9Zy5wYXJlbnROb2RlKXthPWcudGFnTmFtZT9nLnRhZ05hbWUudG9VcHBlckNhc2UoKTpudWxsOwppZigoYSE9PSJCT0RZIikmJihhIT09IkhUTUwiKSYmKGcuc2Nyb2xsTGVmdHx8Zy5zY3JvbGxUb3ApKXtpLT0oZy5zY3JvbGxMZWZ0fHwwKTsKai09KGcuc2Nyb2xsVG9wfHwwKTsKfWM9U3lzLlVJLkRvbUVsZW1lbnQuX2dldEN1cnJlbnRTdHlsZShnKTsKdmFyIGs9Yz9jLnBvc2l0aW9uOm51bGw7CmlmKGsmJihrPT09ImFic29sdXRlIikpe2JyZWFrOwp9fX1yZXR1cm4gbmV3IFN5cy5VSS5Qb2ludChpLGopOwp9Owp9ZWxzZXskdGVsZXJpay5vcmlnaW5hbEdldExvY2F0aW9uPWZ1bmN0aW9uKGQpe3ZhciBmPUZ1bmN0aW9uLl92YWxpZGF0ZVBhcmFtcyhhcmd1bWVudHMsW3tuYW1lOiJlbGVtZW50Iixkb21FbGVtZW50OnRydWV9XSk7CmlmKGYpe3Rocm93IGY7Cn1pZigoZC53aW5kb3cmJihkLndpbmRvdz09PWQpKXx8ZC5ub2RlVHlwZT09PTkpe3JldHVybiBuZXcgU3lzLlVJLlBvaW50KDAsMCk7Cn12YXIgaT0wLGo9MCxnLGs9bnVsbCxiPW51bGwsYz1udWxsOwpmb3IoZz1kOwpnOwprPWcsYj1jLGc9Zy5vZmZzZXRQYXJlbnQpe3ZhciBhPWcudGFnTmFtZT9nLnRhZ05hbWUudG9VcHBlckNhc2UoKTpudWxsOwpjPVN5cy5VSS5Eb21FbGVtZW50Ll9nZXRDdXJyZW50U3R5bGUoZyk7CmlmKChnLm9mZnNldExlZnR8fGcub2Zmc2V0VG9wKSYmISgoYT09PSJCT0RZIikmJighYnx8Yi5wb3NpdGlvbiE9PSJhYnNvbHV0ZSIpKSl7aSs9Zy5vZmZzZXRMZWZ0OwpqKz1nLm9mZnNldFRvcDsKfWlmKGshPT1udWxsJiZjKXtpZigoYSE9PSJUQUJMRSIpJiYoYSE9PSJURCIpJiYoYSE9PSJIVE1MIikpe2krPXBhcnNlSW50KGMuYm9yZGVyTGVmdFdpZHRoKXx8MDsKais9cGFyc2VJbnQoYy5ib3JkZXJUb3BXaWR0aCl8fDA7Cn1pZihhPT09IlRBQkxFIiYmKGMucG9zaXRpb249PT0icmVsYXRpdmUifHxjLnBvc2l0aW9uPT09ImFic29sdXRlIikpe2krPXBhcnNlSW50KGMubWFyZ2luTGVmdCl8fDA7CmorPXBhcnNlSW50KGMubWFyZ2luVG9wKXx8MDsKfX19Yz1TeXMuVUkuRG9tRWxlbWVudC5fZ2V0Q3VycmVudFN0eWxlKGQpOwp2YXIgaD1jP2MucG9zaXRpb246bnVsbDsKaWYoIWh8fChoIT09ImFic29sdXRlIikpe2ZvcihnPWQucGFyZW50Tm9kZTsKZzsKZz1nLnBhcmVudE5vZGUpe2E9Zy50YWdOYW1lP2cudGFnTmFtZS50b1VwcGVyQ2FzZSgpOm51bGw7CmlmKChhIT09IkJPRFkiKSYmKGEhPT0iSFRNTCIpJiYoZy5zY3JvbGxMZWZ0fHxnLnNjcm9sbFRvcCkpe2ktPShnLnNjcm9sbExlZnR8fDApOwpqLT0oZy5zY3JvbGxUb3B8fDApOwpjPVN5cy5VSS5Eb21FbGVtZW50Ll9nZXRDdXJyZW50U3R5bGUoZyk7CmlmKGMpe2krPXBhcnNlSW50KGMuYm9yZGVyTGVmdFdpZHRoKXx8MDsKais9cGFyc2VJbnQoYy5ib3JkZXJUb3BXaWR0aCl8fDA7Cn19fX1yZXR1cm4gbmV3IFN5cy5VSS5Qb2ludChpLGopOwp9Owp9fVN5cy5BcHBsaWNhdGlvbi5hZGRfaW5pdChmdW5jdGlvbigpe3RyeXskdGVsZXJpay5fYm9yZGVyVGhpY2tuZXNzKCk7Cn1jYXRjaChhKXt9fSk7ClRlbGVyaWsuV2ViLlVJLk9yaWVudGF0aW9uPWZ1bmN0aW9uKCl7dGhyb3cgRXJyb3IuaW52YWxpZE9wZXJhdGlvbigpOwp9OwpUZWxlcmlrLldlYi5VSS5PcmllbnRhdGlvbi5wcm90b3R5cGU9e0hvcml6b250YWw6MCxWZXJ0aWNhbDoxfTsKVGVsZXJpay5XZWIuVUkuT3JpZW50YXRpb24ucmVnaXN0ZXJFbnVtKCJUZWxlcmlrLldlYi5VSS5PcmllbnRhdGlvbiIsZmFsc2UpOwpUZWxlcmlrLldlYi5VSS5SYWRXZWJDb250cm9sPWZ1bmN0aW9uKGEpe1RlbGVyaWsuV2ViLlVJLlJhZFdlYkNvbnRyb2wuaW5pdGlhbGl6ZUJhc2UodGhpcyxbYV0pOwp0aGlzLl9jbGllbnRTdGF0ZUZpZWxkSUQ9bnVsbDsKdGhpcy5fc2hvdWxkVXBkYXRlQ2xpZW50U3RhdGU9dHJ1ZTsKdGhpcy5faW52aXNpYmxlUGFyZW50cz1bXTsKfTsKVGVsZXJpay5XZWIuVUkuUmFkV2ViQ29udHJvbC5wcm90b3R5cGU9e2luaXRpYWxpemU6ZnVuY3Rpb24oKXtUZWxlcmlrLldlYi5VSS5SYWRXZWJDb250cm9sLmNhbGxCYXNlTWV0aG9kKHRoaXMsImluaXRpYWxpemUiKTsKJHRlbGVyaWsucmVnaXN0ZXJDb250cm9sKHRoaXMpOwppZighdGhpcy5nZXRfY2xpZW50U3RhdGVGaWVsZElEKCkpe3JldHVybjsKfXZhciBhPSRnZXQodGhpcy5nZXRfY2xpZW50U3RhdGVGaWVsZElEKCkpOwppZighYSl7cmV0dXJuOwp9YS5zZXRBdHRyaWJ1dGUoImF1dG9jb21wbGV0ZSIsIm9mZiIpOwp9LGRpc3Bvc2U6ZnVuY3Rpb24oKXskdGVsZXJpay51bnJlZ2lzdGVyQ29udHJvbCh0aGlzKTsKdmFyIGE9dGhpcy5nZXRfZWxlbWVudCgpOwp0aGlzLl9jbGVhclBhcmVudFNob3dIYW5kbGVycygpOwpUZWxlcmlrLldlYi5VSS5SYWRXZWJDb250cm9sLmNhbGxCYXNlTWV0aG9kKHRoaXMsImRpc3Bvc2UiKTsKaWYoYSl7YS5jb250cm9sPW51bGw7CnZhciBiPXRydWU7CmlmKGEuX2V2ZW50cyl7Zm9yKHZhciBjIGluIGEuX2V2ZW50cyl7aWYoYS5fZXZlbnRzW2NdLmxlbmd0aD4wKXtiPWZhbHNlOwpicmVhazsKfX1pZihiKXthLl9ldmVudHM9bnVsbDsKfX19fSxyYWlzZUV2ZW50OmZ1bmN0aW9uKGEsYyl7dmFyIGI9dGhpcy5nZXRfZXZlbnRzKCkuZ2V0SGFuZGxlcihhKTsKaWYoYil7aWYoIWMpe2M9U3lzLkV2ZW50QXJncy5FbXB0eTsKfWIodGhpcyxjKTsKfX0sdXBkYXRlQ2xpZW50U3RhdGU6ZnVuY3Rpb24oKXtpZih0aGlzLl9zaG91bGRVcGRhdGVDbGllbnRTdGF0ZSl7dGhpcy5zZXRfY2xpZW50U3RhdGUodGhpcy5zYXZlQ2xpZW50U3RhdGUoKSk7Cn19LHNhdmVDbGllbnRTdGF0ZTpmdW5jdGlvbigpe3JldHVybiBudWxsOwp9LGdldF9jbGllbnRTdGF0ZUZpZWxkSUQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2xpZW50U3RhdGVGaWVsZElEOwp9LHNldF9jbGllbnRTdGF0ZUZpZWxkSUQ6ZnVuY3Rpb24oYSl7aWYodGhpcy5fY2xpZW50U3RhdGVGaWVsZElEIT1hKXt0aGlzLl9jbGllbnRTdGF0ZUZpZWxkSUQ9YTsKdGhpcy5yYWlzZVByb3BlcnR5Q2hhbmdlZCgiQ2xpZW50U3RhdGVGaWVsZElEIik7Cn19LGdldF9jbGllbnRTdGF0ZTpmdW5jdGlvbigpe2lmKHRoaXMuX2NsaWVudFN0YXRlRmllbGRJRCl7dmFyIGE9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5fY2xpZW50U3RhdGVGaWVsZElEKTsKaWYoYSl7cmV0dXJuIGEudmFsdWU7Cn19cmV0dXJuIG51bGw7Cn0sc2V0X2NsaWVudFN0YXRlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuX2NsaWVudFN0YXRlRmllbGRJRCl7dmFyIGI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5fY2xpZW50U3RhdGVGaWVsZElEKTsKaWYoYil7Yi52YWx1ZT1hOwp9fX0scmVwYWludDpmdW5jdGlvbigpe30sY2FuUmVwYWludDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldF9lbGVtZW50KCkub2Zmc2V0V2lkdGg+MDsKfSxhZGRfcGFyZW50U2hvd246ZnVuY3Rpb24oYil7dmFyIGE9JHRlbGVyaWsuZ2V0SW52aXNpYmxlUGFyZW50KGIpOwppZighYSl7cmV0dXJuOwp9aWYoIUFycmF5LmNvbnRhaW5zKHRoaXMuX2ludmlzaWJsZVBhcmVudHMsYSkpe0FycmF5LmFkZCh0aGlzLl9pbnZpc2libGVQYXJlbnRzLGEpOwp0aGlzLl9oYW5kbGVIaWRkZW5QYXJlbnQodHJ1ZSxhKTsKfX0scmVtb3ZlX3BhcmVudFNob3duOmZ1bmN0aW9uKGEpe0FycmF5LnJlbW92ZSh0aGlzLl9pbnZpc2libGVQYXJlbnRzLGEpOwp0aGlzLl9oYW5kbGVIaWRkZW5QYXJlbnQoZmFsc2UsYSk7Cn0sX2hhbmRsZUhpZGRlblBhcmVudDpmdW5jdGlvbihhLGMpe2lmKCFjKXtyZXR1cm47Cn1pZighdGhpcy5fcGFyZW50U2hvd0RlbGVnYXRlKXt0aGlzLl9wYXJlbnRTaG93RGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9wYXJlbnRTaG93SGFuZGxlcik7Cn12YXIgZT10aGlzLl9wYXJlbnRTaG93RGVsZWdhdGU7CnZhciBkPSJET01BdHRyTW9kaWZpZWQiOwppZigkdGVsZXJpay5pc0lFKXtkPSJwcm9wZXJ0eWNoYW5nZSI7Cn12YXIgYj1hPyR0ZWxlcmlrLmFkZEV4dGVybmFsSGFuZGxlcjokdGVsZXJpay5yZW1vdmVFeHRlcm5hbEhhbmRsZXI7CmIoYyxkLGUpOwp9LF9wYXJlbnRTaG93SGFuZGxlcjpmdW5jdGlvbihiKXtpZigkdGVsZXJpay5pc0lFKXtpZihiLnJhd0V2ZW50KXt2YXIgYj1iLnJhd0V2ZW50Owp9aWYoIWJ8fCFiLnNyY0VsZW1lbnR8fCFiLnByb3BlcnR5TmFtZSl7cmV0dXJuOwp9dmFyIGE9Yi5zcmNFbGVtZW50OwppZihiLnByb3BlcnR5TmFtZT09InN0eWxlLmRpc3BsYXkifHxiLnByb3BlcnR5TmFtZT09ImNsYXNzTmFtZSIpe3ZhciBkPSR0ZWxlcmlrLmdldEN1cnJlbnRTdHlsZShhLCJkaXNwbGF5Iik7CmlmKGQhPSJub25lIil7Yi50YXJnZXQ9YTsKdGhpcy5fcnVuV2hlblBhcmVudFNob3dzKGIpOwp9fX1lbHNle2lmKGIuYXR0ck5hbWU9PSJzdHlsZSJ8fGIuYXR0ck5hbWU9PSJjbGFzcyIpe3ZhciBjPWIudGFyZ2V0OwppZigoYi5jdXJyZW50VGFyZ2V0PT1iLnRhcmdldCkmJigibm9uZSIhPSR0ZWxlcmlrLmdldEN1cnJlbnRTdHlsZShjLCJkaXNwbGF5IikpKXt3aW5kb3cuc2V0VGltZW91dChGdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLGZ1bmN0aW9uKCl7dGhpcy5fcnVuV2hlblBhcmVudFNob3dzKGIpOwp9KSwwKTsKfX19fSxfcnVuV2hlblBhcmVudFNob3dzOmZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0Owp0aGlzLnJlbW92ZV9wYXJlbnRTaG93bihiKTsKdGhpcy5yZXBhaW50KCk7Cn0sX2NsZWFyUGFyZW50U2hvd0hhbmRsZXJzOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5faW52aXNpYmxlUGFyZW50czsKZm9yKHZhciBhPTA7CmE8Yi5sZW5ndGg7CmErKyl7dGhpcy5yZW1vdmVfcGFyZW50U2hvd24oYlthXSk7Cn10aGlzLl9pbnZpc2libGVQYXJlbnRzPVtdOwp0aGlzLl9wYXJlbnRTaG93RGVsZWdhdGU9bnVsbDsKfSxfZ2V0Q2hpbGRFbGVtZW50OmZ1bmN0aW9uKGEpe3JldHVybiAkZ2V0KHRoaXMuZ2V0X2lkKCkrIl8iK2EpOwp9LF9maW5kQ2hpbGRDb250cm9sOmZ1bmN0aW9uKGEpe3JldHVybiAkZmluZCh0aGlzLmdldF9pZCgpKyJfIithKTsKfX07ClRlbGVyaWsuV2ViLlVJLlJhZFdlYkNvbnRyb2wucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuUmFkV2ViQ29udHJvbCIsU3lzLlVJLkNvbnRyb2wpOwpUZWxlcmlrLldlYi5UaW1lcj1mdW5jdGlvbigpe1RlbGVyaWsuV2ViLlRpbWVyLmluaXRpYWxpemVCYXNlKHRoaXMpOwp0aGlzLl9pbnRlcnZhbD0xMDAwOwp0aGlzLl9lbmFibGVkPWZhbHNlOwp0aGlzLl90aW1lcj1udWxsOwp0aGlzLl90aW1lckNhbGxiYWNrRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl90aW1lckNhbGxiYWNrKTsKfTsKVGVsZXJpay5XZWIuVGltZXIucHJvdG90eXBlPXtnZXRfaW50ZXJ2YWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faW50ZXJ2YWw7Cn0sc2V0X2ludGVydmFsOmZ1bmN0aW9uKGEpe2lmKHRoaXMuX2ludGVydmFsIT09YSl7dGhpcy5faW50ZXJ2YWw9YTsKdGhpcy5yYWlzZVByb3BlcnR5Q2hhbmdlZCgiaW50ZXJ2YWwiKTsKaWYoIXRoaXMuZ2V0X2lzVXBkYXRpbmcoKSYmKHRoaXMuX3RpbWVyIT09bnVsbCkpe3RoaXMuX3N0b3BUaW1lcigpOwp0aGlzLl9zdGFydFRpbWVyKCk7Cn19fSxnZXRfZW5hYmxlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmFibGVkOwp9LHNldF9lbmFibGVkOmZ1bmN0aW9uKGEpe2lmKGEhPT10aGlzLmdldF9lbmFibGVkKCkpe3RoaXMuX2VuYWJsZWQ9YTsKdGhpcy5yYWlzZVByb3BlcnR5Q2hhbmdlZCgiZW5hYmxlZCIpOwppZighdGhpcy5nZXRfaXNVcGRhdGluZygpKXtpZihhKXt0aGlzLl9zdGFydFRpbWVyKCk7Cn1lbHNle3RoaXMuX3N0b3BUaW1lcigpOwp9fX19LGFkZF90aWNrOmZ1bmN0aW9uKGEpe3RoaXMuZ2V0X2V2ZW50cygpLmFkZEhhbmRsZXIoInRpY2siLGEpOwp9LHJlbW92ZV90aWNrOmZ1bmN0aW9uKGEpe3RoaXMuZ2V0X2V2ZW50cygpLnJlbW92ZUhhbmRsZXIoInRpY2siLGEpOwp9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLnNldF9lbmFibGVkKGZhbHNlKTsKdGhpcy5fc3RvcFRpbWVyKCk7ClRlbGVyaWsuV2ViLlRpbWVyLmNhbGxCYXNlTWV0aG9kKHRoaXMsImRpc3Bvc2UiKTsKfSx1cGRhdGVkOmZ1bmN0aW9uKCl7VGVsZXJpay5XZWIuVGltZXIuY2FsbEJhc2VNZXRob2QodGhpcywidXBkYXRlZCIpOwppZih0aGlzLl9lbmFibGVkKXt0aGlzLl9zdG9wVGltZXIoKTsKdGhpcy5fc3RhcnRUaW1lcigpOwp9fSxfdGltZXJDYWxsYmFjazpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0X2V2ZW50cygpLmdldEhhbmRsZXIoInRpY2siKTsKaWYoYSl7YSh0aGlzLFN5cy5FdmVudEFyZ3MuRW1wdHkpOwp9fSxfc3RhcnRUaW1lcjpmdW5jdGlvbigpe3RoaXMuX3RpbWVyPXdpbmRvdy5zZXRJbnRlcnZhbCh0aGlzLl90aW1lckNhbGxiYWNrRGVsZWdhdGUsdGhpcy5faW50ZXJ2YWwpOwp9LF9zdG9wVGltZXI6ZnVuY3Rpb24oKXt3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLl90aW1lcik7CnRoaXMuX3RpbWVyPW51bGw7Cn19OwpUZWxlcmlrLldlYi5UaW1lci5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5UaW1lciIsU3lzLkNvbXBvbmVudCk7ClRlbGVyaWsuV2ViLkJveFNpZGU9ZnVuY3Rpb24oKXt9OwpUZWxlcmlrLldlYi5Cb3hTaWRlLnByb3RvdHlwZT17VG9wOjAsUmlnaHQ6MSxCb3R0b206MixMZWZ0OjN9OwpUZWxlcmlrLldlYi5Cb3hTaWRlLnJlZ2lzdGVyRW51bSgiVGVsZXJpay5XZWIuQm94U2lkZSIsZmFsc2UpOwpUZWxlcmlrLldlYi5VSS5XZWJTZXJ2aWNlTG9hZGVyRXZlbnRBcmdzPWZ1bmN0aW9uKGEpe1RlbGVyaWsuV2ViLlVJLldlYlNlcnZpY2VMb2FkZXJFdmVudEFyZ3MuaW5pdGlhbGl6ZUJhc2UodGhpcyk7CnRoaXMuX2NvbnRleHQ9YTsKfTsKVGVsZXJpay5XZWIuVUkuV2ViU2VydmljZUxvYWRlckV2ZW50QXJncy5wcm90b3R5cGU9e2dldF9jb250ZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRleHQ7Cn19OwpUZWxlcmlrLldlYi5VSS5XZWJTZXJ2aWNlTG9hZGVyRXZlbnRBcmdzLnJlZ2lzdGVyQ2xhc3MoIlRlbGVyaWsuV2ViLlVJLldlYlNlcnZpY2VMb2FkZXJFdmVudEFyZ3MiLFN5cy5FdmVudEFyZ3MpOwpUZWxlcmlrLldlYi5VSS5XZWJTZXJ2aWNlTG9hZGVyU3VjY2Vzc0V2ZW50QXJncz1mdW5jdGlvbihiLGEpe1RlbGVyaWsuV2ViLlVJLldlYlNlcnZpY2VMb2FkZXJTdWNjZXNzRXZlbnRBcmdzLmluaXRpYWxpemVCYXNlKHRoaXMsW2FdKTsKdGhpcy5fZGF0YT1iOwp9OwpUZWxlcmlrLldlYi5VSS5XZWJTZXJ2aWNlTG9hZGVyU3VjY2Vzc0V2ZW50QXJncy5wcm90b3R5cGU9e2dldF9kYXRhOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGE7Cn19OwpUZWxlcmlrLldlYi5VSS5XZWJTZXJ2aWNlTG9hZGVyU3VjY2Vzc0V2ZW50QXJncy5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5XZWJTZXJ2aWNlTG9hZGVyU3VjY2Vzc0V2ZW50QXJncyIsVGVsZXJpay5XZWIuVUkuV2ViU2VydmljZUxvYWRlckV2ZW50QXJncyk7ClRlbGVyaWsuV2ViLlVJLldlYlNlcnZpY2VMb2FkZXJFcnJvckV2ZW50QXJncz1mdW5jdGlvbihhLGIpe1RlbGVyaWsuV2ViLlVJLldlYlNlcnZpY2VMb2FkZXJFcnJvckV2ZW50QXJncy5pbml0aWFsaXplQmFzZSh0aGlzLFtiXSk7CnRoaXMuX21lc3NhZ2U9YTsKfTsKVGVsZXJpay5XZWIuVUkuV2ViU2VydmljZUxvYWRlckVycm9yRXZlbnRBcmdzLnByb3RvdHlwZT17Z2V0X21lc3NhZ2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWVzc2FnZTsKfX07ClRlbGVyaWsuV2ViLlVJLldlYlNlcnZpY2VMb2FkZXJFcnJvckV2ZW50QXJncy5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5XZWJTZXJ2aWNlTG9hZGVyRXJyb3JFdmVudEFyZ3MiLFRlbGVyaWsuV2ViLlVJLldlYlNlcnZpY2VMb2FkZXJFdmVudEFyZ3MpOwpUZWxlcmlrLldlYi5VSS5XZWJTZXJ2aWNlTG9hZGVyPWZ1bmN0aW9uKGEpe3RoaXMuX3dlYlNlcnZpY2VTZXR0aW5ncz1hOwp0aGlzLl9ldmVudHM9bnVsbDsKdGhpcy5fb25XZWJTZXJ2aWNlU3VjY2Vzc0RlbGVnYXRlPUZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5fb25XZWJTZXJ2aWNlU3VjY2Vzcyk7CnRoaXMuX29uV2ViU2VydmljZUVycm9yRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vbldlYlNlcnZpY2VFcnJvcik7CnRoaXMuX2N1cnJlbnRSZXF1ZXN0PW51bGw7Cn07ClRlbGVyaWsuV2ViLlVJLldlYlNlcnZpY2VMb2FkZXIucHJvdG90eXBlPXtnZXRfd2ViU2VydmljZVNldHRpbmdzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3dlYlNlcnZpY2VTZXR0aW5nczsKfSxnZXRfZXZlbnRzOmZ1bmN0aW9uKCl7aWYoIXRoaXMuX2V2ZW50cyl7dGhpcy5fZXZlbnRzPW5ldyBTeXMuRXZlbnRIYW5kbGVyTGlzdCgpOwp9cmV0dXJuIHRoaXMuX2V2ZW50czsKfSxsb2FkRGF0YTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0X3dlYlNlcnZpY2VTZXR0aW5ncygpOwp0aGlzLmludm9rZU1ldGhvZChjLmdldF9tZXRob2QoKSxhLGIpOwp9LGludm9rZU1ldGhvZDpmdW5jdGlvbihiLGEsZCl7dmFyIGM9dGhpcy5nZXRfd2ViU2VydmljZVNldHRpbmdzKCk7CmlmKGMuZ2V0X2lzRW1wdHkoKSl7YWxlcnQoIlBsZWFzZSwgc3BlY2lmeSB2YWxpZCB3ZWIgc2VydmljZSBhbmQgbWV0aG9kLiIpOwpyZXR1cm47Cn10aGlzLl9yYWlzZUV2ZW50KCJsb2FkaW5nU3RhcnRlZCIsbmV3IFRlbGVyaWsuV2ViLlVJLldlYlNlcnZpY2VMb2FkZXJFdmVudEFyZ3MoZCkpOwp2YXIgZj1jLmdldF9wYXRoKCk7CnZhciBlPWMuZ2V0X3VzZUh0dHBHZXQoKTsKdGhpcy5fY3VycmVudFJlcXVlc3Q9U3lzLk5ldC5XZWJTZXJ2aWNlUHJveHkuaW52b2tlKGYsYixlLGEsdGhpcy5fb25XZWJTZXJ2aWNlU3VjY2Vzc0RlbGVnYXRlLHRoaXMuX29uV2ViU2VydmljZUVycm9yRGVsZWdhdGUsZCk7Cn0sYWRkX2xvYWRpbmdTdGFydGVkOmZ1bmN0aW9uKGEpe3RoaXMuZ2V0X2V2ZW50cygpLmFkZEhhbmRsZXIoImxvYWRpbmdTdGFydGVkIixhKTsKfSxhZGRfbG9hZGluZ0Vycm9yOmZ1bmN0aW9uKGEpe3RoaXMuZ2V0X2V2ZW50cygpLmFkZEhhbmRsZXIoImxvYWRpbmdFcnJvciIsYSk7Cn0sYWRkX2xvYWRpbmdTdWNjZXNzOmZ1bmN0aW9uKGEpe3RoaXMuZ2V0X2V2ZW50cygpLmFkZEhhbmRsZXIoImxvYWRpbmdTdWNjZXNzIixhKTsKfSxfc2VyaWFsaXplRGljdGlvbmFyeUFzS2V5VmFsdWVQYWlyczpmdW5jdGlvbihiKXt2YXIgYT1bXTsKZm9yKHZhciBjIGluIGIpe2FbYS5sZW5ndGhdPXtLZXk6YyxWYWx1ZTpiW2NdfTsKfXJldHVybiBhOwp9LF9vbldlYlNlcnZpY2VTdWNjZXNzOmZ1bmN0aW9uKGMsYSl7dmFyIGI9bmV3IFRlbGVyaWsuV2ViLlVJLldlYlNlcnZpY2VMb2FkZXJTdWNjZXNzRXZlbnRBcmdzKGMsYSk7CnRoaXMuX3JhaXNlRXZlbnQoImxvYWRpbmdTdWNjZXNzIixiKTsKfSxfb25XZWJTZXJ2aWNlRXJyb3I6ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgVGVsZXJpay5XZWIuVUkuV2ViU2VydmljZUxvYWRlckVycm9yRXZlbnRBcmdzKGEuZ2V0X21lc3NhZ2UoKSxiKTsKdGhpcy5fcmFpc2VFdmVudCgibG9hZGluZ0Vycm9yIixjKTsKfSxfcmFpc2VFdmVudDpmdW5jdGlvbihhLGMpe3ZhciBiPXRoaXMuZ2V0X2V2ZW50cygpLmdldEhhbmRsZXIoYSk7CmlmKGIpe2lmKCFjKXtjPVN5cy5FdmVudEFyZ3MuRW1wdHk7Cn1iKHRoaXMsYyk7Cn19fTsKVGVsZXJpay5XZWIuVUkuV2ViU2VydmljZUxvYWRlci5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5XZWJTZXJ2aWNlTG9hZGVyIik7ClRlbGVyaWsuV2ViLlVJLldlYlNlcnZpY2VTZXR0aW5ncz1mdW5jdGlvbihhKXt0aGlzLl9wYXRoPW51bGw7CnRoaXMuX21ldGhvZD1udWxsOwp0aGlzLl91c2VIdHRwR2V0PWZhbHNlOwp0aGlzLl9vZGF0YT1mYWxzZTsKaWYoIWEpe2E9e307Cn1pZih0eXBlb2YoYS5wYXRoKSE9InVuZGVmaW5lZCIpe3RoaXMuX3BhdGg9YS5wYXRoOwp9aWYodHlwZW9mKGEubWV0aG9kKSE9InVuZGVmaW5lZCIpe3RoaXMuX21ldGhvZD1hLm1ldGhvZDsKfWlmKHR5cGVvZihhLnVzZUh0dHBHZXQpIT0idW5kZWZpbmVkIil7dGhpcy5fdXNlSHR0cEdldD1hLnVzZUh0dHBHZXQ7Cn19OwpUZWxlcmlrLldlYi5VSS5XZWJTZXJ2aWNlU2V0dGluZ3MucHJvdG90eXBlPXtnZXRfaXNXY2Y6ZnVuY3Rpb24oKXtyZXR1cm4vXC5zdmMkLy50ZXN0KHRoaXMuX3BhdGgpJiYhdGhpcy5nZXRfaXNPRGF0YSgpOwp9LGdldF9pc09EYXRhOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29kYXRhOwp9LGdldF9wYXRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhdGg7Cn0sc2V0X3BhdGg6ZnVuY3Rpb24oYSl7dGhpcy5fcGF0aD1hOwp9LGdldF9tZXRob2Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWV0aG9kOwp9LHNldF9tZXRob2Q6ZnVuY3Rpb24oYSl7dGhpcy5fbWV0aG9kPWE7Cn0sZ2V0X3VzZUh0dHBHZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXNlSHR0cEdldDsKfSxzZXRfdXNlSHR0cEdldDpmdW5jdGlvbihhKXt0aGlzLl91c2VIdHRwR2V0PWE7Cn0sZ2V0X2lzRW1wdHk6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLmdldF9wYXRoKCk7CnZhciBhPXRoaXMuZ2V0X21ldGhvZCgpOwpyZXR1cm4oIShiJiZhKSk7Cn19OwpUZWxlcmlrLldlYi5VSS5XZWJTZXJ2aWNlU2V0dGluZ3MucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuV2ViU2VydmljZVNldHRpbmdzIik7ClRlbGVyaWsuV2ViLlVJLkNhbGxiYWNrTG9hZGVyPWZ1bmN0aW9uKGEpe3RoaXMuX2NhbGxiYWNrU2V0dGluZ3M9YTsKfTsKVGVsZXJpay5XZWIuVUkuQ2FsbGJhY2tMb2FkZXIucHJvdG90eXBlPXtpbnZva2VDYWxsYmFja01ldGhvZDpmdW5jdGlvbigpe1dlYkZvcm1fRG9DYWxsYmFjayh0aGlzLl9jYWxsYmFja1NldHRpbmdzLl9pZCx0aGlzLl9jYWxsYmFja1NldHRpbmdzLl9hcmd1bWVudHMsdGhpcy5fY2FsbGJhY2tTZXR0aW5ncy5fb25DYWxsYmFja1N1Y2Nlc3MsdGhpcy5fY2FsbGJhY2tTZXR0aW5ncy5fY29udGV4dCx0aGlzLl9jYWxsYmFja1NldHRpbmdzLl9vbkNhbGxiYWNrRXJyb3IsdGhpcy5fY2FsbGJhY2tTZXR0aW5ncy5faXNBc3luYyk7Cn19OwpUZWxlcmlrLldlYi5VSS5DYWxsYmFja0xvYWRlci5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5DYWxsYmFja0xvYWRlciIpOwpUZWxlcmlrLldlYi5VSS5DYWxsYmFja1NldHRpbmdzPWZ1bmN0aW9uKGEpe3RoaXMuX2lkPWEuaWQ7CnRoaXMuX2FyZ3VtZW50cz1hLmFyZ3VtZW50czsKdGhpcy5fb25DYWxsYmFja1N1Y2Nlc3M9YS5vbkNhbGxiYWNrU3VjY2VzczsKdGhpcy5fY29udGV4dD1hLmNvbnRleHQ7CnRoaXMuX29uQ2FsbGJhY2tFcnJvcj1hLm9uQ2FsbGJhY2tFcnJvcjsKdGhpcy5faXNBc3luYz1hLmlzQXN5bmM7Cn07ClRlbGVyaWsuV2ViLlVJLkNhbGxiYWNrU2V0dGluZ3MucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuQ2FsbGJhY2tTZXR0aW5ncyIpOwpUZWxlcmlrLldlYi5VSS5BY3Rpb25zTWFuYWdlcj1mdW5jdGlvbihhKXtUZWxlcmlrLldlYi5VSS5BY3Rpb25zTWFuYWdlci5pbml0aWFsaXplQmFzZSh0aGlzKTsKdGhpcy5fYWN0aW9ucz1bXTsKdGhpcy5fY3VycmVudEFjdGlvbkluZGV4PS0xOwp9OwpUZWxlcmlrLldlYi5VSS5BY3Rpb25zTWFuYWdlci5wcm90b3R5cGU9e2dldF9hY3Rpb25zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FjdGlvbnM7Cn0sc2hpZnRQb2ludGVyTGVmdDpmdW5jdGlvbigpe3RoaXMuX2N1cnJlbnRBY3Rpb25JbmRleC0tOwp9LHNoaWZ0UG9pbnRlclJpZ2h0OmZ1bmN0aW9uKCl7dGhpcy5fY3VycmVudEFjdGlvbkluZGV4Kys7Cn0sZ2V0X2N1cnJlbnRBY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRfYWN0aW9ucygpW3RoaXMuX2N1cnJlbnRBY3Rpb25JbmRleF07Cn0sZ2V0X25leHRBY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRfYWN0aW9ucygpW3RoaXMuX2N1cnJlbnRBY3Rpb25JbmRleCsxXTsKfSxhZGRBY3Rpb246ZnVuY3Rpb24oYSl7aWYoYSl7dmFyIGI9bmV3IFRlbGVyaWsuV2ViLlVJLkFjdGlvbnNNYW5hZ2VyRXZlbnRBcmdzKGEpOwp0aGlzLnJhaXNlRXZlbnQoImV4ZWN1dGVBY3Rpb24iLGIpOwp0aGlzLl9jbGVhckFjdGlvbnNUb1JlZG8oKTsKQXJyYXkuYWRkKHRoaXMuX2FjdGlvbnMsYSk7CnRoaXMuX2N1cnJlbnRBY3Rpb25JbmRleD10aGlzLl9hY3Rpb25zLmxlbmd0aC0xOwpyZXR1cm4gdHJ1ZTsKfXJldHVybiBmYWxzZTsKfSx1bmRvOmZ1bmN0aW9uKGEpe2lmKGE9PW51bGwpe2E9MTsKfWlmKGE+dGhpcy5fYWN0aW9ucy5sZW5ndGgpe2E9dGhpcy5fYWN0aW9ucy5sZW5ndGg7Cn12YXIgZD0wOwp2YXIgYj1udWxsOwp3aGlsZSgwPGEtLSYmMDw9dGhpcy5fY3VycmVudEFjdGlvbkluZGV4JiZ0aGlzLl9jdXJyZW50QWN0aW9uSW5kZXg8dGhpcy5fYWN0aW9ucy5sZW5ndGgpe2I9dGhpcy5fYWN0aW9uc1t0aGlzLl9jdXJyZW50QWN0aW9uSW5kZXgtLV07CmlmKGIpe3ZhciBjPW5ldyBUZWxlcmlrLldlYi5VSS5BY3Rpb25zTWFuYWdlckV2ZW50QXJncyhiKTsKdGhpcy5yYWlzZUV2ZW50KCJ1bmRvQWN0aW9uIixjKTsKZCsrOwp9fX0scmVkbzpmdW5jdGlvbihhKXtpZihhPT1udWxsKXthPTE7Cn1pZihhPnRoaXMuX2FjdGlvbnMubGVuZ3RoKXthPXRoaXMuX2FjdGlvbnMubGVuZ3RoOwp9dmFyIGQ9MDsKdmFyIGI9bnVsbDsKdmFyIGU9dGhpcy5fY3VycmVudEFjdGlvbkluZGV4KzE7CndoaWxlKDA8YS0tJiYwPD1lJiZlPHRoaXMuX2FjdGlvbnMubGVuZ3RoKXtiPXRoaXMuX2FjdGlvbnNbZV07CmlmKGIpe3ZhciBjPW5ldyBUZWxlcmlrLldlYi5VSS5BY3Rpb25zTWFuYWdlckV2ZW50QXJncyhiKTsKdGhpcy5yYWlzZUV2ZW50KCJyZWRvQWN0aW9uIixjKTsKdGhpcy5fY3VycmVudEFjdGlvbkluZGV4PWU7CmQrKzsKfWUrKzsKfX0scmVtb3ZlQWN0aW9uQXQ6ZnVuY3Rpb24oYSl7dGhpcy5fYWN0aW9ucy5zcGxpY2UoYSwxKTsKaWYodGhpcy5fY3VycmVudEFjdGlvbkluZGV4Pj1hKXt0aGlzLl9jdXJyZW50QWN0aW9uSW5kZXgtLTsKfX0sY2FuVW5kbzpmdW5jdGlvbigpe3JldHVybigtMTx0aGlzLl9jdXJyZW50QWN0aW9uSW5kZXgpOwp9LGNhblJlZG86ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5fY3VycmVudEFjdGlvbkluZGV4PHRoaXMuX2FjdGlvbnMubGVuZ3RoLTEpOwp9LGdldEFjdGlvbnNUb1VuZG86ZnVuY3Rpb24oKXtpZih0aGlzLmNhblVuZG8oKSl7cmV0dXJuKHRoaXMuX2FjdGlvbnMuc2xpY2UoMCx0aGlzLl9jdXJyZW50QWN0aW9uSW5kZXgrMSkpLnJldmVyc2UoKTsKfXJldHVybltdOwp9LGdldEFjdGlvbnNUb1JlZG86ZnVuY3Rpb24oKXtpZih0aGlzLmNhblJlZG8oKSl7cmV0dXJuIHRoaXMuX2FjdGlvbnMuc2xpY2UodGhpcy5fY3VycmVudEFjdGlvbkluZGV4KzEpOwp9cmV0dXJuW107Cn0sX2NsZWFyQWN0aW9uc1RvUmVkbzpmdW5jdGlvbigpe2lmKHRoaXMuY2FuUmVkbygpKXt2YXIgYT10aGlzLl9jdXJyZW50QWN0aW9uSW5kZXgrMjsKaWYoYTx0aGlzLl9hY3Rpb25zLmxlbmd0aCl7dGhpcy5fYWN0aW9ucy5zcGxpY2UoYSx0aGlzLl9hY3Rpb25zLmxlbmd0aC1hKTsKfX19LGFkZF91bmRvQWN0aW9uOmZ1bmN0aW9uKGEpe3RoaXMuZ2V0X2V2ZW50cygpLmFkZEhhbmRsZXIoInVuZG9BY3Rpb24iLGEpOwp9LHJlbW92ZV91bmRvQWN0aW9uOmZ1bmN0aW9uKGEpe3RoaXMuZ2V0X2V2ZW50cygpLnJlbW92ZUhhbmRsZXIoInVuZG9BY3Rpb24iLGEpOwp9LGFkZF9yZWRvQWN0aW9uOmZ1bmN0aW9uKGEpe3RoaXMuZ2V0X2V2ZW50cygpLmFkZEhhbmRsZXIoInJlZG9BY3Rpb24iLGEpOwp9LHJlbW92ZV9yZWRvQWN0aW9uOmZ1bmN0aW9uKGEpe3RoaXMuZ2V0X2V2ZW50cygpLnJlbW92ZUhhbmRsZXIoInJlZG9BY3Rpb24iLGEpOwp9LGFkZF9leGVjdXRlQWN0aW9uOmZ1bmN0aW9uKGEpe3RoaXMuZ2V0X2V2ZW50cygpLmFkZEhhbmRsZXIoImV4ZWN1dGVBY3Rpb24iLGEpOwp9LHJlbW92ZV9leGVjdXRlQWN0aW9uOmZ1bmN0aW9uKGEpe3RoaXMuZ2V0X2V2ZW50cygpLnJlbW92ZUhhbmRsZXIoImV4ZWN1dGVBY3Rpb24iLGEpOwp9LHJhaXNlRXZlbnQ6ZnVuY3Rpb24oYSxjKXt2YXIgYj10aGlzLmdldF9ldmVudHMoKS5nZXRIYW5kbGVyKGEpOwppZihiKXtiKHRoaXMsYyk7Cn19fTsKVGVsZXJpay5XZWIuVUkuQWN0aW9uc01hbmFnZXIucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuQWN0aW9uc01hbmFnZXIiLFN5cy5Db21wb25lbnQpOwpUZWxlcmlrLldlYi5VSS5BY3Rpb25zTWFuYWdlckV2ZW50QXJncz1mdW5jdGlvbihhKXtUZWxlcmlrLldlYi5VSS5BY3Rpb25zTWFuYWdlckV2ZW50QXJncy5pbml0aWFsaXplQmFzZSh0aGlzKTsKdGhpcy5fYWN0aW9uPWE7Cn07ClRlbGVyaWsuV2ViLlVJLkFjdGlvbnNNYW5hZ2VyRXZlbnRBcmdzLnByb3RvdHlwZT17Z2V0X2FjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hY3Rpb247Cn19OwpUZWxlcmlrLldlYi5VSS5BY3Rpb25zTWFuYWdlckV2ZW50QXJncy5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5BY3Rpb25zTWFuYWdlckV2ZW50QXJncyIsU3lzLkNhbmNlbEV2ZW50QXJncyk7ClRlbGVyaWsuV2ViLlN0cmluZ0J1aWxkZXI9ZnVuY3Rpb24oYSl7dGhpcy5fYnVmZmVyPWF8fFtdOwp9OwpUZWxlcmlrLldlYi5TdHJpbmdCdWlsZGVyLnByb3RvdHlwZT17YXBwZW5kOmZ1bmN0aW9uKGIpe2Zvcih2YXIgYT0wOwphPGFyZ3VtZW50cy5sZW5ndGg7CmErKyl7dGhpcy5fYnVmZmVyW3RoaXMuX2J1ZmZlci5sZW5ndGhdPWFyZ3VtZW50c1thXTsKfXJldHVybiB0aGlzOwp9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J1ZmZlci5qb2luKCIiKTsKfSxnZXRfYnVmZmVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J1ZmZlcjsKfX07CihmdW5jdGlvbigpe2Z1bmN0aW9uIGcoKXtpZigkdGVsZXJpay4kKXtyZXR1cm4gJHRlbGVyaWsuJC5leHRlbmQuYXBwbHkoJHRlbGVyaWsuJCxhcmd1bWVudHMpOwp9dmFyIGs9YXJndW1lbnRzWzBdJiZ0eXBlb2YoYXJndW1lbnRzWzBdKT09PSJvYmplY3QiP2FyZ3VtZW50c1swXTp7fTsKZm9yKHZhciBsPTE7Cmw8YXJndW1lbnRzLmxlbmd0aDsKbCsrKXt2YXIgbT1hcmd1bWVudHNbbF07CmlmKG0hPW51bGwpe2Zvcih2YXIgaiBpbiBtKXt2YXIgbj1tW2pdOwppZih0eXBlb2YobikhPT0idW5kZWZpbmVkIil7a1tqXT1uOwp9fX19cmV0dXJuIGs7Cn1mdW5jdGlvbiBmKGssbCl7aWYobCl7cmV0dXJuIiciK2suc3BsaXQoIiciKS5qb2luKCJcXCciKS5yZXBsYWNlKC9cbi9nLCJcXG4iKS5yZXBsYWNlKC9cci9nLCJcXHIiKS5yZXBsYWNlKC9cdC9nLCJcXHQiKSsiJyI7Cn1lbHNle3ZhciBpPWsuY2hhckF0KDApLGo9ay5zdWJzdHJpbmcoMSk7CmlmKGk9PT0iPSIpe3JldHVybiIrKCIraisiKSsiOwp9ZWxzZXtpZihpPT09IjoiKXtyZXR1cm4iK2UoIitqKyIpKyI7Cn1lbHNle3JldHVybiI7IitrKyI7bys9IjsKfX19fXZhciBhPS9eXHcrLyxoPS9cJHsoW159XSopfS9nLGM9L1xcfS9nLGU9L19fQ1VSTFlfXy9nLGQ9L1xcIy9nLGI9L19fU0hBUlBfXy9nOwpUZWxlcmlrLldlYi5VSS5UZW1wbGF0ZT17cGFyYW1OYW1lOiJkYXRhIix1c2VXaXRoQmxvY2s6dHJ1ZSxyZW5kZXI6ZnVuY3Rpb24obCxtKXt2YXIgaSxrLGo9IiI7CmZvcihpPTAsaz1tLmxlbmd0aDsKaTxrOwppKyspe2orPWwobVtpXSk7Cn1yZXR1cm4gajsKfSxjb21waWxlOmZ1bmN0aW9uKHIsbil7dmFyIGw9Zyh7fSx0aGlzLG4pLGs9bC5wYXJhbU5hbWUsaT1rLm1hdGNoKGEpWzBdLG09bC51c2VXaXRoQmxvY2ssaj0idmFyIG8sZT0kdGVsZXJpay5odG1sRW5jb2RlOyIscCxxLHM7CmlmKHR5cGVvZihyKT09PSJmdW5jdGlvbiIpe2lmKHIubGVuZ3RoPT09Mil7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiByKCR0ZWxlcmlrLiR8fGpRdWVyeSx7ZGF0YTp0fSkuam9pbigiIik7Cn07Cn1yZXR1cm4gcjsKfWorPW0/IndpdGgoIitrKyIpeyI6IiI7CmorPSJvPSI7CnA9ci5yZXBsYWNlKGMsIl9fQ1VSTFlfXyIpLnJlcGxhY2UoaCwiIz1lKCQxKSMiKS5yZXBsYWNlKGUsIn0iKS5yZXBsYWNlKGQsIl9fU0hBUlBfXyIpLnNwbGl0KCIjIik7CmZvcihzPTA7CnM8cC5sZW5ndGg7CnMrKyl7ais9ZihwW3NdLHMlMj09PTApOwp9ais9bT8iO30iOiI7IjsKais9InJldHVybiBvOyI7Cmo9ai5yZXBsYWNlKGIsIiMiKTsKdHJ5e3JldHVybiBuZXcgRnVuY3Rpb24oaSxqKTsKfWNhdGNoKG8pe3Rocm93IG5ldyBFcnJvcihTdHJpbmcuZm9ybWF0KCJJbnZhbGlkIHRlbXBsYXRlOid7MH0nIEdlbmVyYXRlZCBjb2RlOid7MX0nIixyLGopKTsKfX19Owp9KSgpOwppZihTeXMmJlN5cy5XZWJGb3JtcyYmU3lzLldlYkZvcm1zLlBhZ2VSZXF1ZXN0TWFuYWdlcil7U3lzLldlYkZvcm1zLlBhZ2VSZXF1ZXN0TWFuYWdlci5wcm90b3R5cGUuX29uRm9ybUVsZW1lbnRDbGljaz1mdW5jdGlvbihhKXtpZigkdGVsZXJpay5pc0lFMTApe3RoaXMuX2FjdGl2ZURlZmF1bHRCdXR0b25DbGlja2VkPShhLnRhcmdldD09PXRoaXMuX2FjdGl2ZURlZmF1bHRCdXR0b24pOwp0aGlzLl9vbkZvcm1FbGVtZW50QWN0aXZlKGEudGFyZ2V0LHBhcnNlSW50KGEub2Zmc2V0WCkscGFyc2VJbnQoYS5vZmZzZXRZKSk7Cn1lbHNle3RoaXMuX2FjdGl2ZURlZmF1bHRCdXR0b25DbGlja2VkPShhLnRhcmdldD09PXRoaXMuX2FjdGl2ZURlZmF1bHRCdXR0b24pOwp0aGlzLl9vbkZvcm1FbGVtZW50QWN0aXZlKGEudGFyZ2V0LGEub2Zmc2V0WCxhLm9mZnNldFkpOwp9fTsKfQ0KLyogRU5EIFRlbGVyaWsuV2ViLlVJLkNvbW1vbi5Db3JlLmpzICovDQovKiBTVEFSVCBUZWxlcmlrLldlYi5VSS5Db21tb24ualF1ZXJ5LmpzICovDQo7LyohIGpRdWVyeSB2MS43LjIganF1ZXJ5LmNvbSB8IGpxdWVyeS5vcmcvbGljZW5zZSAqLw0KKGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gY3koYSl7cmV0dXJuIGYuaXNXaW5kb3coYSk/YTphLm5vZGVUeXBlPT09OT9hLmRlZmF1bHRWaWV3fHxhLnBhcmVudFdpbmRvdzohMX1mdW5jdGlvbiBjdShhKXtpZighY2pbYV0pe3ZhciBiPWMuYm9keSxkPWYoIjwiK2ErIj4iKS5hcHBlbmRUbyhiKSxlPWQuY3NzKCJkaXNwbGF5Iik7ZC5yZW1vdmUoKTtpZihlPT09Im5vbmUifHxlPT09IiIpe2NrfHwoY2s9Yy5jcmVhdGVFbGVtZW50KCJpZnJhbWUiKSxjay5mcmFtZUJvcmRlcj1jay53aWR0aD1jay5oZWlnaHQ9MCksYi5hcHBlbmRDaGlsZChjayk7aWYoIWNsfHwhY2suY3JlYXRlRWxlbWVudCljbD0oY2suY29udGVudFdpbmRvd3x8Y2suY29udGVudERvY3VtZW50KS5kb2N1bWVudCxjbC53cml0ZSgoZi5zdXBwb3J0LmJveE1vZGVsPyI8IWRvY3R5cGUgaHRtbD4iOiIiKSsiPGh0bWw+PGJvZHk+IiksY2wuY2xvc2UoKTtkPWNsLmNyZWF0ZUVsZW1lbnQoYSksY2wuYm9keS5hcHBlbmRDaGlsZChkKSxlPWYuY3NzKGQsImRpc3BsYXkiKSxiLnJlbW92ZUNoaWxkKGNrKX1jalthXT1lfXJldHVybiBjalthXX1mdW5jdGlvbiBjdChhLGIpe3ZhciBjPXt9O2YuZWFjaChjcC5jb25jYXQuYXBwbHkoW10sY3Auc2xpY2UoMCxiKSksZnVuY3Rpb24oKXtjW3RoaXNdPWF9KTtyZXR1cm4gY31mdW5jdGlvbiBjcygpe2NxPWJ9ZnVuY3Rpb24gY3IoKXtzZXRUaW1lb3V0KGNzLDApO3JldHVybiBjcT1mLm5vdygpfWZ1bmN0aW9uIGNpKCl7dHJ5e3JldHVybiBuZXcgYS5BY3RpdmVYT2JqZWN0KCJNaWNyb3NvZnQuWE1MSFRUUCIpfWNhdGNoKGIpe319ZnVuY3Rpb24gY2goKXt0cnl7cmV0dXJuIG5ldyBhLlhNTEh0dHBSZXF1ZXN0fWNhdGNoKGIpe319ZnVuY3Rpb24gY2IoYSxjKXthLmRhdGFGaWx0ZXImJihjPWEuZGF0YUZpbHRlcihjLGEuZGF0YVR5cGUpKTt2YXIgZD1hLmRhdGFUeXBlcyxlPXt9LGcsaCxpPWQubGVuZ3RoLGosaz1kWzBdLGwsbSxuLG8scDtmb3IoZz0xO2c8aTtnKyspe2lmKGc9PT0xKWZvcihoIGluIGEuY29udmVydGVycyl0eXBlb2YgaD09InN0cmluZyImJihlW2gudG9Mb3dlckNhc2UoKV09YS5jb252ZXJ0ZXJzW2hdKTtsPWssaz1kW2ddO2lmKGs9PT0iKiIpaz1sO2Vsc2UgaWYobCE9PSIqIiYmbCE9PWspe209bCsiICIrayxuPWVbbV18fGVbIiogIitrXTtpZighbil7cD1iO2ZvcihvIGluIGUpe2o9by5zcGxpdCgiICIpO2lmKGpbMF09PT1sfHxqWzBdPT09IioiKXtwPWVbalsxXSsiICIra107aWYocCl7bz1lW29dLG89PT0hMD9uPXA6cD09PSEwJiYobj1vKTticmVha319fX0hbiYmIXAmJmYuZXJyb3IoIk5vIGNvbnZlcnNpb24gZnJvbSAiK20ucmVwbGFjZSgiICIsIiB0byAiKSksbiE9PSEwJiYoYz1uP24oYyk6cChvKGMpKSl9fXJldHVybiBjfWZ1bmN0aW9uIGNhKGEsYyxkKXt2YXIgZT1hLmNvbnRlbnRzLGY9YS5kYXRhVHlwZXMsZz1hLnJlc3BvbnNlRmllbGRzLGgsaSxqLGs7Zm9yKGkgaW4gZylpIGluIGQmJihjW2dbaV1dPWRbaV0pO3doaWxlKGZbMF09PT0iKiIpZi5zaGlmdCgpLGg9PT1iJiYoaD1hLm1pbWVUeXBlfHxjLmdldFJlc3BvbnNlSGVhZGVyKCJjb250ZW50LXR5cGUiKSk7aWYoaClmb3IoaSBpbiBlKWlmKGVbaV0mJmVbaV0udGVzdChoKSl7Zi51bnNoaWZ0KGkpO2JyZWFrfWlmKGZbMF1pbiBkKWo9ZlswXTtlbHNle2ZvcihpIGluIGQpe2lmKCFmWzBdfHxhLmNvbnZlcnRlcnNbaSsiICIrZlswXV0pe2o9aTticmVha31rfHwoaz1pKX1qPWp8fGt9aWYoail7aiE9PWZbMF0mJmYudW5zaGlmdChqKTtyZXR1cm4gZFtqXX19ZnVuY3Rpb24gYl8oYSxiLGMsZCl7aWYoZi5pc0FycmF5KGIpKWYuZWFjaChiLGZ1bmN0aW9uKGIsZSl7Y3x8YkQudGVzdChhKT9kKGEsZSk6Yl8oYSsiWyIrKHR5cGVvZiBlPT0ib2JqZWN0Ij9iOiIiKSsiXSIsZSxjLGQpfSk7ZWxzZSBpZighYyYmZi50eXBlKGIpPT09Im9iamVjdCIpZm9yKHZhciBlIGluIGIpYl8oYSsiWyIrZSsiXSIsYltlXSxjLGQpO2Vsc2UgZChhLGIpfWZ1bmN0aW9uIGIkKGEsYyl7dmFyIGQsZSxnPWYuYWpheFNldHRpbmdzLmZsYXRPcHRpb25zfHx7fTtmb3IoZCBpbiBjKWNbZF0hPT1iJiYoKGdbZF0/YTplfHwoZT17fSkpW2RdPWNbZF0pO2UmJmYuZXh0ZW5kKCEwLGEsZSl9ZnVuY3Rpb24gYlooYSxjLGQsZSxmLGcpe2Y9Znx8Yy5kYXRhVHlwZXNbMF0sZz1nfHx7fSxnW2ZdPSEwO3ZhciBoPWFbZl0saT0wLGo9aD9oLmxlbmd0aDowLGs9YT09PWJTLGw7Zm9yKDtpPGomJihrfHwhbCk7aSsrKWw9aFtpXShjLGQsZSksdHlwZW9mIGw9PSJzdHJpbmciJiYoIWt8fGdbbF0/bD1iOihjLmRhdGFUeXBlcy51bnNoaWZ0KGwpLGw9YlooYSxjLGQsZSxsLGcpKSk7KGt8fCFsKSYmIWdbIioiXSYmKGw9YlooYSxjLGQsZSwiKiIsZykpO3JldHVybiBsfWZ1bmN0aW9uIGJZKGEpe3JldHVybiBmdW5jdGlvbihiLGMpe3R5cGVvZiBiIT0ic3RyaW5nIiYmKGM9YixiPSIqIik7aWYoZi5pc0Z1bmN0aW9uKGMpKXt2YXIgZD1iLnRvTG93ZXJDYXNlKCkuc3BsaXQoYk8pLGU9MCxnPWQubGVuZ3RoLGgsaSxqO2Zvcig7ZTxnO2UrKyloPWRbZV0saj0vXlwrLy50ZXN0KGgpLGomJihoPWguc3Vic3RyKDEpfHwiKiIpLGk9YVtoXT1hW2hdfHxbXSxpW2o/InVuc2hpZnQiOiJwdXNoIl0oYyl9fX1mdW5jdGlvbiBiQihhLGIsYyl7dmFyIGQ9Yj09PSJ3aWR0aCI/YS5vZmZzZXRXaWR0aDphLm9mZnNldEhlaWdodCxlPWI9PT0id2lkdGgiPzE6MCxnPTQ7aWYoZD4wKXtpZihjIT09ImJvcmRlciIpZm9yKDtlPGc7ZSs9MiljfHwoZC09cGFyc2VGbG9hdChmLmNzcyhhLCJwYWRkaW5nIitieFtlXSkpfHwwKSxjPT09Im1hcmdpbiI/ZCs9cGFyc2VGbG9hdChmLmNzcyhhLGMrYnhbZV0pKXx8MDpkLT1wYXJzZUZsb2F0KGYuY3NzKGEsImJvcmRlciIrYnhbZV0rIldpZHRoIikpfHwwO3JldHVybiBkKyJweCJ9ZD1ieShhLGIpO2lmKGQ8MHx8ZD09bnVsbClkPWEuc3R5bGVbYl07aWYoYnQudGVzdChkKSlyZXR1cm4gZDtkPXBhcnNlRmxvYXQoZCl8fDA7aWYoYylmb3IoO2U8ZztlKz0yKWQrPXBhcnNlRmxvYXQoZi5jc3MoYSwicGFkZGluZyIrYnhbZV0pKXx8MCxjIT09InBhZGRpbmciJiYoZCs9cGFyc2VGbG9hdChmLmNzcyhhLCJib3JkZXIiK2J4W2VdKyJXaWR0aCIpKXx8MCksYz09PSJtYXJnaW4iJiYoZCs9cGFyc2VGbG9hdChmLmNzcyhhLGMrYnhbZV0pKXx8MCk7cmV0dXJuIGQrInB4In1mdW5jdGlvbiBibyhhKXt2YXIgYj1jLmNyZWF0ZUVsZW1lbnQoImRpdiIpO2JoLmFwcGVuZENoaWxkKGIpLGIuaW5uZXJIVE1MPWEub3V0ZXJIVE1MO3JldHVybiBiLmZpcnN0Q2hpbGR9ZnVuY3Rpb24gYm4oYSl7dmFyIGI9KGEubm9kZU5hbWV8fCIiKS50b0xvd2VyQ2FzZSgpO2I9PT0iaW5wdXQiP2JtKGEpOmIhPT0ic2NyaXB0IiYmdHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUhPSJ1bmRlZmluZWQiJiZmLmdyZXAoYS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaW5wdXQiKSxibSl9ZnVuY3Rpb24gYm0oYSl7aWYoYS50eXBlPT09ImNoZWNrYm94Inx8YS50eXBlPT09InJhZGlvIilhLmRlZmF1bHRDaGVja2VkPWEuY2hlY2tlZH1mdW5jdGlvbiBibChhKXtyZXR1cm4gdHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUhPSJ1bmRlZmluZWQiP2EuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKTp0eXBlb2YgYS5xdWVyeVNlbGVjdG9yQWxsIT0idW5kZWZpbmVkIj9hLnF1ZXJ5U2VsZWN0b3JBbGwoIioiKTpbXX1mdW5jdGlvbiBiayhhLGIpe3ZhciBjO2Iubm9kZVR5cGU9PT0xJiYoYi5jbGVhckF0dHJpYnV0ZXMmJmIuY2xlYXJBdHRyaWJ1dGVzKCksYi5tZXJnZUF0dHJpYnV0ZXMmJmIubWVyZ2VBdHRyaWJ1dGVzKGEpLGM9Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLGM9PT0ib2JqZWN0Ij9iLm91dGVySFRNTD1hLm91dGVySFRNTDpjIT09ImlucHV0Inx8YS50eXBlIT09ImNoZWNrYm94IiYmYS50eXBlIT09InJhZGlvIj9jPT09Im9wdGlvbiI/Yi5zZWxlY3RlZD1hLmRlZmF1bHRTZWxlY3RlZDpjPT09ImlucHV0Inx8Yz09PSJ0ZXh0YXJlYSI/Yi5kZWZhdWx0VmFsdWU9YS5kZWZhdWx0VmFsdWU6Yz09PSJzY3JpcHQiJiZiLnRleHQhPT1hLnRleHQmJihiLnRleHQ9YS50ZXh0KTooYS5jaGVja2VkJiYoYi5kZWZhdWx0Q2hlY2tlZD1iLmNoZWNrZWQ9YS5jaGVja2VkKSxiLnZhbHVlIT09YS52YWx1ZSYmKGIudmFsdWU9YS52YWx1ZSkpLGIucmVtb3ZlQXR0cmlidXRlKGYuZXhwYW5kbyksYi5yZW1vdmVBdHRyaWJ1dGUoIl9zdWJtaXRfYXR0YWNoZWQiKSxiLnJlbW92ZUF0dHJpYnV0ZSgiX2NoYW5nZV9hdHRhY2hlZCIpKX1mdW5jdGlvbiBiaihhLGIpe2lmKGIubm9kZVR5cGU9PT0xJiYhIWYuaGFzRGF0YShhKSl7dmFyIGMsZCxlLGc9Zi5fZGF0YShhKSxoPWYuX2RhdGEoYixnKSxpPWcuZXZlbnRzO2lmKGkpe2RlbGV0ZSBoLmhhbmRsZSxoLmV2ZW50cz17fTtmb3IoYyBpbiBpKWZvcihkPTAsZT1pW2NdLmxlbmd0aDtkPGU7ZCsrKWYuZXZlbnQuYWRkKGIsYyxpW2NdW2RdKX1oLmRhdGEmJihoLmRhdGE9Zi5leHRlbmQoe30saC5kYXRhKSl9fWZ1bmN0aW9uIGJpKGEsYil7cmV0dXJuIGYubm9kZU5hbWUoYSwidGFibGUiKT9hLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0Ym9keSIpWzBdfHxhLmFwcGVuZENoaWxkKGEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0Ym9keSIpKTphfWZ1bmN0aW9uIFUoYSl7dmFyIGI9Vi5zcGxpdCgifCIpLGM9YS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7aWYoYy5jcmVhdGVFbGVtZW50KXdoaWxlKGIubGVuZ3RoKWMuY3JlYXRlRWxlbWVudChiLnBvcCgpKTtyZXR1cm4gY31mdW5jdGlvbiBUKGEsYixjKXtiPWJ8fDA7aWYoZi5pc0Z1bmN0aW9uKGIpKXJldHVybiBmLmdyZXAoYSxmdW5jdGlvbihhLGQpe3ZhciBlPSEhYi5jYWxsKGEsZCxhKTtyZXR1cm4gZT09PWN9KTtpZihiLm5vZGVUeXBlKXJldHVybiBmLmdyZXAoYSxmdW5jdGlvbihhLGQpe3JldHVybiBhPT09Yj09PWN9KTtpZih0eXBlb2YgYj09InN0cmluZyIpe3ZhciBkPWYuZ3JlcChhLGZ1bmN0aW9uKGEpe3JldHVybiBhLm5vZGVUeXBlPT09MX0pO2lmKE8udGVzdChiKSlyZXR1cm4gZi5maWx0ZXIoYixkLCFjKTtiPWYuZmlsdGVyKGIsZCl9cmV0dXJuIGYuZ3JlcChhLGZ1bmN0aW9uKGEsZCl7cmV0dXJuIGYuaW5BcnJheShhLGIpPj0wPT09Y30pfWZ1bmN0aW9uIFMoYSl7cmV0dXJuIWF8fCFhLnBhcmVudE5vZGV8fGEucGFyZW50Tm9kZS5ub2RlVHlwZT09PTExfWZ1bmN0aW9uIEsoKXtyZXR1cm4hMH1mdW5jdGlvbiBKKCl7cmV0dXJuITF9ZnVuY3Rpb24gbihhLGIsYyl7dmFyIGQ9YisiZGVmZXIiLGU9YisicXVldWUiLGc9YisibWFyayIsaD1mLl9kYXRhKGEsZCk7aCYmKGM9PT0icXVldWUifHwhZi5fZGF0YShhLGUpKSYmKGM9PT0ibWFyayJ8fCFmLl9kYXRhKGEsZykpJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7IWYuX2RhdGEoYSxlKSYmIWYuX2RhdGEoYSxnKSYmKGYucmVtb3ZlRGF0YShhLGQsITApLGguZmlyZSgpKX0sMCl9ZnVuY3Rpb24gbShhKXtmb3IodmFyIGIgaW4gYSl7aWYoYj09PSJkYXRhIiYmZi5pc0VtcHR5T2JqZWN0KGFbYl0pKWNvbnRpbnVlO2lmKGIhPT0idG9KU09OIilyZXR1cm4hMX1yZXR1cm4hMH1mdW5jdGlvbiBsKGEsYyxkKXtpZihkPT09YiYmYS5ub2RlVHlwZT09PTEpe3ZhciBlPSJkYXRhLSIrYy5yZXBsYWNlKGssIi0kMSIpLnRvTG93ZXJDYXNlKCk7ZD1hLmdldEF0dHJpYnV0ZShlKTtpZih0eXBlb2YgZD09InN0cmluZyIpe3RyeXtkPWQ9PT0idHJ1ZSI/ITA6ZD09PSJmYWxzZSI/ITE6ZD09PSJudWxsIj9udWxsOmYuaXNOdW1lcmljKGQpPytkOmoudGVzdChkKT9mLnBhcnNlSlNPTihkKTpkfWNhdGNoKGcpe31mLmRhdGEoYSxjLGQpfWVsc2UgZD1ifXJldHVybiBkfWZ1bmN0aW9uIGgoYSl7dmFyIGI9Z1thXT17fSxjLGQ7YT1hLnNwbGl0KC9ccysvKTtmb3IoYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKyliW2FbY11dPSEwO3JldHVybiBifXZhciBjPWEuZG9jdW1lbnQsZD1hLm5hdmlnYXRvcixlPWEubG9jYXRpb24sZj1mdW5jdGlvbigpe2Z1bmN0aW9uIEooKXtpZighZS5pc1JlYWR5KXt0cnl7Yy5kb2N1bWVudEVsZW1lbnQuZG9TY3JvbGwoImxlZnQiKX1jYXRjaChhKXtzZXRUaW1lb3V0KEosMSk7cmV0dXJufWUucmVhZHkoKX19dmFyIGU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IGUuZm4uaW5pdChhLGIsaCl9LGY9YS5qUXVlcnksZz1hLiQsaCxpPS9eKD86W14jPF0qKDxbXHdcV10rPilbXj5dKiR8IyhbXHdcLV0qKSQpLyxqPS9cUy8saz0vXlxzKy8sbD0vXHMrJC8sbT0vXjwoXHcrKVxzKlwvPz4oPzo8XC9cMT4pPyQvLG49L15bXF0sOnt9XHNdKiQvLG89L1xcKD86WyJcXFwvYmZucnRdfHVbMC05YS1mQS1GXXs0fSkvZyxwPS8iW14iXFxcblxyXSoifHRydWV8ZmFsc2V8bnVsbHwtP1xkKyg/OlwuXGQqKT8oPzpbZUVdWytcLV0/XGQrKT8vZyxxPS8oPzpefDp8LCkoPzpccypcWykrL2cscj0vKHdlYmtpdClbIFwvXShbXHcuXSspLyxzPS8ob3BlcmEpKD86Lip2ZXJzaW9uKT9bIFwvXShbXHcuXSspLyx0PS8obXNpZSkgKFtcdy5dKykvLHU9Lyhtb3ppbGxhKSg/Oi4qPyBydjooW1x3Ll0rKSk/Lyx2PS8tKFthLXpdfFswLTldKS9pZyx3PS9eLW1zLS8seD1mdW5jdGlvbihhLGIpe3JldHVybihiKyIiKS50b1VwcGVyQ2FzZSgpfSx5PWQudXNlckFnZW50LHosQSxCLEM9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxEPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksRT1BcnJheS5wcm90b3R5cGUucHVzaCxGPUFycmF5LnByb3RvdHlwZS5zbGljZSxHPVN0cmluZy5wcm90b3R5cGUudHJpbSxIPUFycmF5LnByb3RvdHlwZS5pbmRleE9mLEk9e307ZS5mbj1lLnByb3RvdHlwZT17Y29uc3RydWN0b3I6ZSxpbml0OmZ1bmN0aW9uKGEsZCxmKXt2YXIgZyxoLGosaztpZighYSlyZXR1cm4gdGhpcztpZihhLm5vZGVUeXBlKXt0aGlzLmNvbnRleHQ9dGhpc1swXT1hLHRoaXMubGVuZ3RoPTE7cmV0dXJuIHRoaXN9aWYoYT09PSJib2R5IiYmIWQmJmMuYm9keSl7dGhpcy5jb250ZXh0PWMsdGhpc1swXT1jLmJvZHksdGhpcy5zZWxlY3Rvcj1hLHRoaXMubGVuZ3RoPTE7cmV0dXJuIHRoaXN9aWYodHlwZW9mIGE9PSJzdHJpbmciKXthLmNoYXJBdCgwKSE9PSI8Inx8YS5jaGFyQXQoYS5sZW5ndGgtMSkhPT0iPiJ8fGEubGVuZ3RoPDM/Zz1pLmV4ZWMoYSk6Zz1bbnVsbCxhLG51bGxdO2lmKGcmJihnWzFdfHwhZCkpe2lmKGdbMV0pe2Q9ZCBpbnN0YW5jZW9mIGU/ZFswXTpkLGs9ZD9kLm93bmVyRG9jdW1lbnR8fGQ6YyxqPW0uZXhlYyhhKSxqP2UuaXNQbGFpbk9iamVjdChkKT8oYT1bYy5jcmVhdGVFbGVtZW50KGpbMV0pXSxlLmZuLmF0dHIuY2FsbChhLGQsITApKTphPVtrLmNyZWF0ZUVsZW1lbnQoalsxXSldOihqPWUuYnVpbGRGcmFnbWVudChbZ1sxXV0sW2tdKSxhPShqLmNhY2hlYWJsZT9lLmNsb25lKGouZnJhZ21lbnQpOmouZnJhZ21lbnQpLmNoaWxkTm9kZXMpO3JldHVybiBlLm1lcmdlKHRoaXMsYSl9aD1jLmdldEVsZW1lbnRCeUlkKGdbMl0pO2lmKGgmJmgucGFyZW50Tm9kZSl7aWYoaC5pZCE9PWdbMl0pcmV0dXJuIGYuZmluZChhKTt0aGlzLmxlbmd0aD0xLHRoaXNbMF09aH10aGlzLmNvbnRleHQ9Yyx0aGlzLnNlbGVjdG9yPWE7cmV0dXJuIHRoaXN9cmV0dXJuIWR8fGQuanF1ZXJ5PyhkfHxmKS5maW5kKGEpOnRoaXMuY29uc3RydWN0b3IoZCkuZmluZChhKX1pZihlLmlzRnVuY3Rpb24oYSkpcmV0dXJuIGYucmVhZHkoYSk7YS5zZWxlY3RvciE9PWImJih0aGlzLnNlbGVjdG9yPWEuc2VsZWN0b3IsdGhpcy5jb250ZXh0PWEuY29udGV4dCk7cmV0dXJuIGUubWFrZUFycmF5KGEsdGhpcyl9LHNlbGVjdG9yOiIiLGpxdWVyeToiMS43LjIiLGxlbmd0aDowLHNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZW5ndGh9LHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gRi5jYWxsKHRoaXMsMCl9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gYT09bnVsbD90aGlzLnRvQXJyYXkoKTphPDA/dGhpc1t0aGlzLmxlbmd0aCthXTp0aGlzW2FdfSxwdXNoU3RhY2s6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuY29uc3RydWN0b3IoKTtlLmlzQXJyYXkoYSk/RS5hcHBseShkLGEpOmUubWVyZ2UoZCxhKSxkLnByZXZPYmplY3Q9dGhpcyxkLmNvbnRleHQ9dGhpcy5jb250ZXh0LGI9PT0iZmluZCI/ZC5zZWxlY3Rvcj10aGlzLnNlbGVjdG9yKyh0aGlzLnNlbGVjdG9yPyIgIjoiIikrYzpiJiYoZC5zZWxlY3Rvcj10aGlzLnNlbGVjdG9yKyIuIitiKyIoIitjKyIpIik7cmV0dXJuIGR9LGVhY2g6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZS5lYWNoKHRoaXMsYSxiKX0scmVhZHk6ZnVuY3Rpb24oYSl7ZS5iaW5kUmVhZHkoKSxBLmFkZChhKTtyZXR1cm4gdGhpc30sZXE6ZnVuY3Rpb24oYSl7YT0rYTtyZXR1cm4gYT09PS0xP3RoaXMuc2xpY2UoYSk6dGhpcy5zbGljZShhLGErMSl9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoMCl9LGxhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgtMSl9LHNsaWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKEYuYXBwbHkodGhpcyxhcmd1bWVudHMpLCJzbGljZSIsRi5jYWxsKGFyZ3VtZW50cykuam9pbigiLCIpKX0sbWFwOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayhlLm1hcCh0aGlzLGZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEuY2FsbChiLGMsYil9KSl9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fHRoaXMuY29uc3RydWN0b3IobnVsbCl9LHB1c2g6RSxzb3J0OltdLnNvcnQsc3BsaWNlOltdLnNwbGljZX0sZS5mbi5pbml0LnByb3RvdHlwZT1lLmZuLGUuZXh0ZW5kPWUuZm4uZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIGEsYyxkLGYsZyxoLGk9YXJndW1lbnRzWzBdfHx7fSxqPTEsaz1hcmd1bWVudHMubGVuZ3RoLGw9ITE7dHlwZW9mIGk9PSJib29sZWFuIiYmKGw9aSxpPWFyZ3VtZW50c1sxXXx8e30saj0yKSx0eXBlb2YgaSE9Im9iamVjdCImJiFlLmlzRnVuY3Rpb24oaSkmJihpPXt9KSxrPT09aiYmKGk9dGhpcywtLWopO2Zvcig7ajxrO2orKylpZigoYT1hcmd1bWVudHNbal0pIT1udWxsKWZvcihjIGluIGEpe2Q9aVtjXSxmPWFbY107aWYoaT09PWYpY29udGludWU7bCYmZiYmKGUuaXNQbGFpbk9iamVjdChmKXx8KGc9ZS5pc0FycmF5KGYpKSk/KGc/KGc9ITEsaD1kJiZlLmlzQXJyYXkoZCk/ZDpbXSk6aD1kJiZlLmlzUGxhaW5PYmplY3QoZCk/ZDp7fSxpW2NdPWUuZXh0ZW5kKGwsaCxmKSk6ZiE9PWImJihpW2NdPWYpfXJldHVybiBpfSxlLmV4dGVuZCh7bm9Db25mbGljdDpmdW5jdGlvbihiKXthLiQ9PT1lJiYoYS4kPWcpLGImJmEualF1ZXJ5PT09ZSYmKGEualF1ZXJ5PWYpO3JldHVybiBlfSxpc1JlYWR5OiExLHJlYWR5V2FpdDoxLGhvbGRSZWFkeTpmdW5jdGlvbihhKXthP2UucmVhZHlXYWl0Kys6ZS5yZWFkeSghMCl9LHJlYWR5OmZ1bmN0aW9uKGEpe2lmKGE9PT0hMCYmIS0tZS5yZWFkeVdhaXR8fGEhPT0hMCYmIWUuaXNSZWFkeSl7aWYoIWMuYm9keSlyZXR1cm4gc2V0VGltZW91dChlLnJlYWR5LDEpO2UuaXNSZWFkeT0hMDtpZihhIT09ITAmJi0tZS5yZWFkeVdhaXQ+MClyZXR1cm47QS5maXJlV2l0aChjLFtlXSksZS5mbi50cmlnZ2VyJiZlKGMpLnRyaWdnZXIoInJlYWR5Iikub2ZmKCJyZWFkeSIpfX0sYmluZFJlYWR5OmZ1bmN0aW9uKCl7aWYoIUEpe0E9ZS5DYWxsYmFja3MoIm9uY2UgbWVtb3J5Iik7aWYoYy5yZWFkeVN0YXRlPT09ImNvbXBsZXRlIilyZXR1cm4gc2V0VGltZW91dChlLnJlYWR5LDEpO2lmKGMuYWRkRXZlbnRMaXN0ZW5lciljLmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLEIsITEpLGEuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsZS5yZWFkeSwhMSk7ZWxzZSBpZihjLmF0dGFjaEV2ZW50KXtjLmF0dGFjaEV2ZW50KCJvbnJlYWR5c3RhdGVjaGFuZ2UiLEIpLGEuYXR0YWNoRXZlbnQoIm9ubG9hZCIsZS5yZWFkeSk7dmFyIGI9ITE7dHJ5e2I9YS5mcmFtZUVsZW1lbnQ9PW51bGx9Y2F0Y2goZCl7fWMuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsJiZiJiZKKCl9fX0saXNGdW5jdGlvbjpmdW5jdGlvbihhKXtyZXR1cm4gZS50eXBlKGEpPT09ImZ1bmN0aW9uIn0saXNBcnJheTpBcnJheS5pc0FycmF5fHxmdW5jdGlvbihhKXtyZXR1cm4gZS50eXBlKGEpPT09ImFycmF5In0saXNXaW5kb3c6ZnVuY3Rpb24oYSl7cmV0dXJuIGEhPW51bGwmJmE9PWEud2luZG93fSxpc051bWVyaWM6ZnVuY3Rpb24oYSl7cmV0dXJuIWlzTmFOKHBhcnNlRmxvYXQoYSkpJiZpc0Zpbml0ZShhKX0sdHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gYT09bnVsbD9TdHJpbmcoYSk6SVtDLmNhbGwoYSldfHwib2JqZWN0In0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihhKXtpZighYXx8ZS50eXBlKGEpIT09Im9iamVjdCJ8fGEubm9kZVR5cGV8fGUuaXNXaW5kb3coYSkpcmV0dXJuITE7dHJ5e2lmKGEuY29uc3RydWN0b3ImJiFELmNhbGwoYSwiY29uc3RydWN0b3IiKSYmIUQuY2FsbChhLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwiaXNQcm90b3R5cGVPZiIpKXJldHVybiExfWNhdGNoKGMpe3JldHVybiExfXZhciBkO2ZvcihkIGluIGEpO3JldHVybiBkPT09Ynx8RC5jYWxsKGEsZCl9LGlzRW1wdHlPYmplY3Q6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiIGluIGEpcmV0dXJuITE7cmV0dXJuITB9LGVycm9yOmZ1bmN0aW9uKGEpe3Rocm93IG5ldyBFcnJvcihhKX0scGFyc2VKU09OOmZ1bmN0aW9uKGIpe2lmKHR5cGVvZiBiIT0ic3RyaW5nInx8IWIpcmV0dXJuIG51bGw7Yj1lLnRyaW0oYik7aWYoYS5KU09OJiZhLkpTT04ucGFyc2UpcmV0dXJuIGEuSlNPTi5wYXJzZShiKTtpZihuLnRlc3QoYi5yZXBsYWNlKG8sIkAiKS5yZXBsYWNlKHAsIl0iKS5yZXBsYWNlKHEsIiIpKSlyZXR1cm4obmV3IEZ1bmN0aW9uKCJyZXR1cm4gIitiKSkoKTtlLmVycm9yKCJJbnZhbGlkIEpTT046ICIrYil9LHBhcnNlWE1MOmZ1bmN0aW9uKGMpe2lmKHR5cGVvZiBjIT0ic3RyaW5nInx8IWMpcmV0dXJuIG51bGw7dmFyIGQsZjt0cnl7YS5ET01QYXJzZXI/KGY9bmV3IERPTVBhcnNlcixkPWYucGFyc2VGcm9tU3RyaW5nKGMsInRleHQveG1sIikpOihkPW5ldyBBY3RpdmVYT2JqZWN0KCJNaWNyb3NvZnQuWE1MRE9NIiksZC5hc3luYz0iZmFsc2UiLGQubG9hZFhNTChjKSl9Y2F0Y2goZyl7ZD1ifSghZHx8IWQuZG9jdW1lbnRFbGVtZW50fHxkLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwYXJzZXJlcnJvciIpLmxlbmd0aCkmJmUuZXJyb3IoIkludmFsaWQgWE1MOiAiK2MpO3JldHVybiBkfSxub29wOmZ1bmN0aW9uKCl7fSxnbG9iYWxFdmFsOmZ1bmN0aW9uKGIpe2ImJmoudGVzdChiKSYmKGEuZXhlY1NjcmlwdHx8ZnVuY3Rpb24oYil7YS5ldmFsLmNhbGwoYSxiKX0pKGIpfSxjYW1lbENhc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZSh3LCJtcy0iKS5yZXBsYWNlKHYseCl9LG5vZGVOYW1lOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEubm9kZU5hbWUmJmEubm9kZU5hbWUudG9VcHBlckNhc2UoKT09PWIudG9VcHBlckNhc2UoKX0sZWFjaDpmdW5jdGlvbihhLGMsZCl7dmFyIGYsZz0wLGg9YS5sZW5ndGgsaT1oPT09Ynx8ZS5pc0Z1bmN0aW9uKGEpO2lmKGQpe2lmKGkpe2ZvcihmIGluIGEpaWYoYy5hcHBseShhW2ZdLGQpPT09ITEpYnJlYWt9ZWxzZSBmb3IoO2c8aDspaWYoYy5hcHBseShhW2crK10sZCk9PT0hMSlicmVha31lbHNlIGlmKGkpe2ZvcihmIGluIGEpaWYoYy5jYWxsKGFbZl0sZixhW2ZdKT09PSExKWJyZWFrfWVsc2UgZm9yKDtnPGg7KWlmKGMuY2FsbChhW2ddLGcsYVtnKytdKT09PSExKWJyZWFrO3JldHVybiBhfSx0cmltOkc/ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PW51bGw/IiI6Ry5jYWxsKGEpfTpmdW5jdGlvbihhKXtyZXR1cm4gYT09bnVsbD8iIjooYSsiIikucmVwbGFjZShrLCIiKS5yZXBsYWNlKGwsIiIpfSxtYWtlQXJyYXk6ZnVuY3Rpb24oYSxiKXt2YXIgYz1ifHxbXTtpZihhIT1udWxsKXt2YXIgZD1lLnR5cGUoYSk7YS5sZW5ndGg9PW51bGx8fGQ9PT0ic3RyaW5nInx8ZD09PSJmdW5jdGlvbiJ8fGQ9PT0icmVnZXhwInx8ZS5pc1dpbmRvdyhhKT9FLmNhbGwoYyxhKTplLm1lcmdlKGMsYSl9cmV0dXJuIGN9LGluQXJyYXk6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO2lmKGIpe2lmKEgpcmV0dXJuIEguY2FsbChiLGEsYyk7ZD1iLmxlbmd0aCxjPWM/YzwwP01hdGgubWF4KDAsZCtjKTpjOjA7Zm9yKDtjPGQ7YysrKWlmKGMgaW4gYiYmYltjXT09PWEpcmV0dXJuIGN9cmV0dXJuLTF9LG1lcmdlOmZ1bmN0aW9uKGEsYyl7dmFyIGQ9YS5sZW5ndGgsZT0wO2lmKHR5cGVvZiBjLmxlbmd0aD09Im51bWJlciIpZm9yKHZhciBmPWMubGVuZ3RoO2U8ZjtlKyspYVtkKytdPWNbZV07ZWxzZSB3aGlsZShjW2VdIT09YilhW2QrK109Y1tlKytdO2EubGVuZ3RoPWQ7cmV0dXJuIGF9LGdyZXA6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVtdLGU7Yz0hIWM7Zm9yKHZhciBmPTAsZz1hLmxlbmd0aDtmPGc7ZisrKWU9ISFiKGFbZl0sZiksYyE9PWUmJmQucHVzaChhW2ZdKTtyZXR1cm4gZH0sbWFwOmZ1bmN0aW9uKGEsYyxkKXt2YXIgZixnLGg9W10saT0wLGo9YS5sZW5ndGgsaz1hIGluc3RhbmNlb2YgZXx8aiE9PWImJnR5cGVvZiBqPT0ibnVtYmVyIiYmKGo+MCYmYVswXSYmYVtqLTFdfHxqPT09MHx8ZS5pc0FycmF5KGEpKTtpZihrKWZvcig7aTxqO2krKylmPWMoYVtpXSxpLGQpLGYhPW51bGwmJihoW2gubGVuZ3RoXT1mKTtlbHNlIGZvcihnIGluIGEpZj1jKGFbZ10sZyxkKSxmIT1udWxsJiYoaFtoLmxlbmd0aF09Zik7cmV0dXJuIGguY29uY2F0LmFwcGx5KFtdLGgpfSxndWlkOjEscHJveHk6ZnVuY3Rpb24oYSxjKXtpZih0eXBlb2YgYz09InN0cmluZyIpe3ZhciBkPWFbY107Yz1hLGE9ZH1pZighZS5pc0Z1bmN0aW9uKGEpKXJldHVybiBiO3ZhciBmPUYuY2FsbChhcmd1bWVudHMsMiksZz1mdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGMsZi5jb25jYXQoRi5jYWxsKGFyZ3VtZW50cykpKX07Zy5ndWlkPWEuZ3VpZD1hLmd1aWR8fGcuZ3VpZHx8ZS5ndWlkKys7cmV0dXJuIGd9LGFjY2VzczpmdW5jdGlvbihhLGMsZCxmLGcsaCxpKXt2YXIgaixrPWQ9PW51bGwsbD0wLG09YS5sZW5ndGg7aWYoZCYmdHlwZW9mIGQ9PSJvYmplY3QiKXtmb3IobCBpbiBkKWUuYWNjZXNzKGEsYyxsLGRbbF0sMSxoLGYpO2c9MX1lbHNlIGlmKGYhPT1iKXtqPWk9PT1iJiZlLmlzRnVuY3Rpb24oZiksayYmKGo/KGo9YyxjPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gai5jYWxsKGUoYSksYyl9KTooYy5jYWxsKGEsZiksYz1udWxsKSk7aWYoYylmb3IoO2w8bTtsKyspYyhhW2xdLGQsaj9mLmNhbGwoYVtsXSxsLGMoYVtsXSxkKSk6ZixpKTtnPTF9cmV0dXJuIGc/YTprP2MuY2FsbChhKTptP2MoYVswXSxkKTpofSxub3c6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IERhdGUpLmdldFRpbWUoKX0sdWFNYXRjaDpmdW5jdGlvbihhKXthPWEudG9Mb3dlckNhc2UoKTt2YXIgYj1yLmV4ZWMoYSl8fHMuZXhlYyhhKXx8dC5leGVjKGEpfHxhLmluZGV4T2YoImNvbXBhdGlibGUiKTwwJiZ1LmV4ZWMoYSl8fFtdO3JldHVybnticm93c2VyOmJbMV18fCIiLHZlcnNpb246YlsyXXx8IjAifX0sc3ViOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShiLGMpe3JldHVybiBuZXcgYS5mbi5pbml0KGIsYyl9ZS5leHRlbmQoITAsYSx0aGlzKSxhLnN1cGVyY2xhc3M9dGhpcyxhLmZuPWEucHJvdG90eXBlPXRoaXMoKSxhLmZuLmNvbnN0cnVjdG9yPWEsYS5zdWI9dGhpcy5zdWIsYS5mbi5pbml0PWZ1bmN0aW9uKGQsZil7ZiYmZiBpbnN0YW5jZW9mIGUmJiEoZiBpbnN0YW5jZW9mIGEpJiYoZj1hKGYpKTtyZXR1cm4gZS5mbi5pbml0LmNhbGwodGhpcyxkLGYsYil9LGEuZm4uaW5pdC5wcm90b3R5cGU9YS5mbjt2YXIgYj1hKGMpO3JldHVybiBhfSxicm93c2VyOnt9fSksZS5lYWNoKCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0Ii5zcGxpdCgiICIpLGZ1bmN0aW9uKGEsYil7SVsiW29iamVjdCAiK2IrIl0iXT1iLnRvTG93ZXJDYXNlKCl9KSx6PWUudWFNYXRjaCh5KSx6LmJyb3dzZXImJihlLmJyb3dzZXJbei5icm93c2VyXT0hMCxlLmJyb3dzZXIudmVyc2lvbj16LnZlcnNpb24pLGUuYnJvd3Nlci53ZWJraXQmJihlLmJyb3dzZXIuc2FmYXJpPSEwKSxqLnRlc3QoIsOCwqAiKSYmKGs9L15bXHNceEEwXSsvLGw9L1tcc1x4QTBdKyQvKSxoPWUoYyksYy5hZGRFdmVudExpc3RlbmVyP0I9ZnVuY3Rpb24oKXtjLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLEIsITEpLGUucmVhZHkoKX06Yy5hdHRhY2hFdmVudCYmKEI9ZnVuY3Rpb24oKXtjLnJlYWR5U3RhdGU9PT0iY29tcGxldGUiJiYoYy5kZXRhY2hFdmVudCgib25yZWFkeXN0YXRlY2hhbmdlIixCKSxlLnJlYWR5KCkpfSk7cmV0dXJuIGV9KCksZz17fTtmLkNhbGxiYWNrcz1mdW5jdGlvbihhKXthPWE/Z1thXXx8aChhKTp7fTt2YXIgYz1bXSxkPVtdLGUsaSxqLGssbCxtLG49ZnVuY3Rpb24oYil7dmFyIGQsZSxnLGgsaTtmb3IoZD0wLGU9Yi5sZW5ndGg7ZDxlO2QrKylnPWJbZF0saD1mLnR5cGUoZyksaD09PSJhcnJheSI/bihnKTpoPT09ImZ1bmN0aW9uIiYmKCFhLnVuaXF1ZXx8IXAuaGFzKGcpKSYmYy5wdXNoKGcpfSxvPWZ1bmN0aW9uKGIsZil7Zj1mfHxbXSxlPSFhLm1lbW9yeXx8W2IsZl0saT0hMCxqPSEwLG09a3x8MCxrPTAsbD1jLmxlbmd0aDtmb3IoO2MmJm08bDttKyspaWYoY1ttXS5hcHBseShiLGYpPT09ITEmJmEuc3RvcE9uRmFsc2Upe2U9ITA7YnJlYWt9aj0hMSxjJiYoYS5vbmNlP2U9PT0hMD9wLmRpc2FibGUoKTpjPVtdOmQmJmQubGVuZ3RoJiYoZT1kLnNoaWZ0KCkscC5maXJlV2l0aChlWzBdLGVbMV0pKSl9LHA9e2FkZDpmdW5jdGlvbigpe2lmKGMpe3ZhciBhPWMubGVuZ3RoO24oYXJndW1lbnRzKSxqP2w9Yy5sZW5ndGg6ZSYmZSE9PSEwJiYoaz1hLG8oZVswXSxlWzFdKSl9cmV0dXJuIHRoaXN9LHJlbW92ZTpmdW5jdGlvbigpe2lmKGMpe3ZhciBiPWFyZ3VtZW50cyxkPTAsZT1iLmxlbmd0aDtmb3IoO2Q8ZTtkKyspZm9yKHZhciBmPTA7ZjxjLmxlbmd0aDtmKyspaWYoYltkXT09PWNbZl0pe2omJmY8PWwmJihsLS0sZjw9bSYmbS0tKSxjLnNwbGljZShmLS0sMSk7aWYoYS51bmlxdWUpYnJlYWt9fXJldHVybiB0aGlzfSxoYXM6ZnVuY3Rpb24oYSl7aWYoYyl7dmFyIGI9MCxkPWMubGVuZ3RoO2Zvcig7YjxkO2IrKylpZihhPT09Y1tiXSlyZXR1cm4hMH1yZXR1cm4hMX0sZW1wdHk6ZnVuY3Rpb24oKXtjPVtdO3JldHVybiB0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7Yz1kPWU9YjtyZXR1cm4gdGhpc30sZGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hY30sbG9jazpmdW5jdGlvbigpe2Q9YiwoIWV8fGU9PT0hMCkmJnAuZGlzYWJsZSgpO3JldHVybiB0aGlzfSxsb2NrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hZH0sZmlyZVdpdGg6ZnVuY3Rpb24oYixjKXtkJiYoaj9hLm9uY2V8fGQucHVzaChbYixjXSk6KCFhLm9uY2V8fCFlKSYmbyhiLGMpKTtyZXR1cm4gdGhpc30sZmlyZTpmdW5jdGlvbigpe3AuZmlyZVdpdGgodGhpcyxhcmd1bWVudHMpO3JldHVybiB0aGlzfSxmaXJlZDpmdW5jdGlvbigpe3JldHVybiEhaX19O3JldHVybiBwfTt2YXIgaT1bXS5zbGljZTtmLmV4dGVuZCh7RGVmZXJyZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9Zi5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksYz1mLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSxkPWYuQ2FsbGJhY2tzKCJtZW1vcnkiKSxlPSJwZW5kaW5nIixnPXtyZXNvbHZlOmIscmVqZWN0OmMsbm90aWZ5OmR9LGg9e2RvbmU6Yi5hZGQsZmFpbDpjLmFkZCxwcm9ncmVzczpkLmFkZCxzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBlfSxpc1Jlc29sdmVkOmIuZmlyZWQsaXNSZWplY3RlZDpjLmZpcmVkLHRoZW46ZnVuY3Rpb24oYSxiLGMpe2kuZG9uZShhKS5mYWlsKGIpLnByb2dyZXNzKGMpO3JldHVybiB0aGlzfSxhbHdheXM6ZnVuY3Rpb24oKXtpLmRvbmUuYXBwbHkoaSxhcmd1bWVudHMpLmZhaWwuYXBwbHkoaSxhcmd1bWVudHMpO3JldHVybiB0aGlzfSxwaXBlOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gZi5EZWZlcnJlZChmdW5jdGlvbihkKXtmLmVhY2goe2RvbmU6W2EsInJlc29sdmUiXSxmYWlsOltiLCJyZWplY3QiXSxwcm9ncmVzczpbYywibm90aWZ5Il19LGZ1bmN0aW9uKGEsYil7dmFyIGM9YlswXSxlPWJbMV0sZztmLmlzRnVuY3Rpb24oYyk/aVthXShmdW5jdGlvbigpe2c9Yy5hcHBseSh0aGlzLGFyZ3VtZW50cyksZyYmZi5pc0Z1bmN0aW9uKGcucHJvbWlzZSk/Zy5wcm9taXNlKCkudGhlbihkLnJlc29sdmUsZC5yZWplY3QsZC5ub3RpZnkpOmRbZSsiV2l0aCJdKHRoaXM9PT1pP2Q6dGhpcyxbZ10pfSk6aVthXShkW2VdKX0pfSkucHJvbWlzZSgpfSxwcm9taXNlOmZ1bmN0aW9uKGEpe2lmKGE9PW51bGwpYT1oO2Vsc2UgZm9yKHZhciBiIGluIGgpYVtiXT1oW2JdO3JldHVybiBhfX0saT1oLnByb21pc2Uoe30pLGo7Zm9yKGogaW4gZylpW2pdPWdbal0uZmlyZSxpW2orIldpdGgiXT1nW2pdLmZpcmVXaXRoO2kuZG9uZShmdW5jdGlvbigpe2U9InJlc29sdmVkIn0sYy5kaXNhYmxlLGQubG9jaykuZmFpbChmdW5jdGlvbigpe2U9InJlamVjdGVkIn0sYi5kaXNhYmxlLGQubG9jayksYSYmYS5jYWxsKGksaSk7cmV0dXJuIGl9LHdoZW46ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gbShhKXtyZXR1cm4gZnVuY3Rpb24oYil7ZVthXT1hcmd1bWVudHMubGVuZ3RoPjE/aS5jYWxsKGFyZ3VtZW50cywwKTpiLGoubm90aWZ5V2l0aChrLGUpfX1mdW5jdGlvbiBsKGEpe3JldHVybiBmdW5jdGlvbihjKXtiW2FdPWFyZ3VtZW50cy5sZW5ndGg+MT9pLmNhbGwoYXJndW1lbnRzLDApOmMsLS1nfHxqLnJlc29sdmVXaXRoKGosYil9fXZhciBiPWkuY2FsbChhcmd1bWVudHMsMCksYz0wLGQ9Yi5sZW5ndGgsZT1BcnJheShkKSxnPWQsaD1kLGo9ZDw9MSYmYSYmZi5pc0Z1bmN0aW9uKGEucHJvbWlzZSk/YTpmLkRlZmVycmVkKCksaz1qLnByb21pc2UoKTtpZihkPjEpe2Zvcig7YzxkO2MrKyliW2NdJiZiW2NdLnByb21pc2UmJmYuaXNGdW5jdGlvbihiW2NdLnByb21pc2UpP2JbY10ucHJvbWlzZSgpLnRoZW4obChjKSxqLnJlamVjdCxtKGMpKTotLWc7Z3x8ai5yZXNvbHZlV2l0aChqLGIpfWVsc2UgaiE9PWEmJmoucmVzb2x2ZVdpdGgoaixkP1thXTpbXSk7cmV0dXJuIGt9fSksZi5zdXBwb3J0PWZ1bmN0aW9uKCl7dmFyIGIsZCxlLGcsaCxpLGosayxsLG0sbixvLHA9Yy5jcmVhdGVFbGVtZW50KCJkaXYiKSxxPWMuZG9jdW1lbnRFbGVtZW50O3Auc2V0QXR0cmlidXRlKCJjbGFzc05hbWUiLCJ0IikscC5pbm5lckhUTUw9IiAgIDxsaW5rLz48dGFibGU+PC90YWJsZT48YSBocmVmPScvYScgc3R5bGU9J3RvcDoxcHg7ZmxvYXQ6bGVmdDtvcGFjaXR5Oi41NTsnPmE8L2E+PGlucHV0IHR5cGU9J2NoZWNrYm94Jy8+IixkPXAuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKSxlPXAuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImEiKVswXTtpZighZHx8IWQubGVuZ3RofHwhZSlyZXR1cm57fTtnPWMuY3JlYXRlRWxlbWVudCgic2VsZWN0IiksaD1nLmFwcGVuZENoaWxkKGMuY3JlYXRlRWxlbWVudCgib3B0aW9uIikpLGk9cC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaW5wdXQiKVswXSxiPXtsZWFkaW5nV2hpdGVzcGFjZTpwLmZpcnN0Q2hpbGQubm9kZVR5cGU9PT0zLHRib2R5OiFwLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0Ym9keSIpLmxlbmd0aCxodG1sU2VyaWFsaXplOiEhcC5nZXRFbGVtZW50c0J5VGFnTmFtZSgibGluayIpLmxlbmd0aCxzdHlsZTovdG9wLy50ZXN0KGUuZ2V0QXR0cmlidXRlKCJzdHlsZSIpKSxocmVmTm9ybWFsaXplZDplLmdldEF0dHJpYnV0ZSgiaHJlZiIpPT09Ii9hIixvcGFjaXR5Oi9eMC41NS8udGVzdChlLnN0eWxlLm9wYWNpdHkpLGNzc0Zsb2F0OiEhZS5zdHlsZS5jc3NGbG9hdCxjaGVja09uOmkudmFsdWU9PT0ib24iLG9wdFNlbGVjdGVkOmguc2VsZWN0ZWQsZ2V0U2V0QXR0cmlidXRlOnAuY2xhc3NOYW1lIT09InQiLGVuY3R5cGU6ISFjLmNyZWF0ZUVsZW1lbnQoImZvcm0iKS5lbmN0eXBlLGh0bWw1Q2xvbmU6Yy5jcmVhdGVFbGVtZW50KCJuYXYiKS5jbG9uZU5vZGUoITApLm91dGVySFRNTCE9PSI8Om5hdj48LzpuYXY+IixzdWJtaXRCdWJibGVzOiEwLGNoYW5nZUJ1YmJsZXM6ITAsZm9jdXNpbkJ1YmJsZXM6ITEsZGVsZXRlRXhwYW5kbzohMCxub0Nsb25lRXZlbnQ6ITAsaW5saW5lQmxvY2tOZWVkc0xheW91dDohMSxzaHJpbmtXcmFwQmxvY2tzOiExLHJlbGlhYmxlTWFyZ2luUmlnaHQ6ITAscGl4ZWxNYXJnaW46ITB9LGYuYm94TW9kZWw9Yi5ib3hNb2RlbD1jLmNvbXBhdE1vZGU9PT0iQ1NTMUNvbXBhdCIsaS5jaGVja2VkPSEwLGIubm9DbG9uZUNoZWNrZWQ9aS5jbG9uZU5vZGUoITApLmNoZWNrZWQsZy5kaXNhYmxlZD0hMCxiLm9wdERpc2FibGVkPSFoLmRpc2FibGVkO3RyeXtkZWxldGUgcC50ZXN0fWNhdGNoKHIpe2IuZGVsZXRlRXhwYW5kbz0hMX0hcC5hZGRFdmVudExpc3RlbmVyJiZwLmF0dGFjaEV2ZW50JiZwLmZpcmVFdmVudCYmKHAuYXR0YWNoRXZlbnQoIm9uY2xpY2siLGZ1bmN0aW9uKCl7Yi5ub0Nsb25lRXZlbnQ9ITF9KSxwLmNsb25lTm9kZSghMCkuZmlyZUV2ZW50KCJvbmNsaWNrIikpLGk9Yy5jcmVhdGVFbGVtZW50KCJpbnB1dCIpLGkudmFsdWU9InQiLGkuc2V0QXR0cmlidXRlKCJ0eXBlIiwicmFkaW8iKSxiLnJhZGlvVmFsdWU9aS52YWx1ZT09PSJ0IixpLnNldEF0dHJpYnV0ZSgiY2hlY2tlZCIsImNoZWNrZWQiKSxpLnNldEF0dHJpYnV0ZSgibmFtZSIsInQiKSxwLmFwcGVuZENoaWxkKGkpLGo9Yy5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksai5hcHBlbmRDaGlsZChwLmxhc3RDaGlsZCksYi5jaGVja0Nsb25lPWouY2xvbmVOb2RlKCEwKS5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5jaGVja2VkLGIuYXBwZW5kQ2hlY2tlZD1pLmNoZWNrZWQsai5yZW1vdmVDaGlsZChpKSxqLmFwcGVuZENoaWxkKHApO2lmKHAuYXR0YWNoRXZlbnQpZm9yKG4gaW57c3VibWl0OjEsY2hhbmdlOjEsZm9jdXNpbjoxfSltPSJvbiIrbixvPW0gaW4gcCxvfHwocC5zZXRBdHRyaWJ1dGUobSwicmV0dXJuOyIpLG89dHlwZW9mIHBbbV09PSJmdW5jdGlvbiIpLGJbbisiQnViYmxlcyJdPW87ai5yZW1vdmVDaGlsZChwKSxqPWc9aD1wPWk9bnVsbCxmKGZ1bmN0aW9uKCl7dmFyIGQsZSxnLGgsaSxqLGwsbSxuLHEscixzLHQsdT1jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJib2R5IilbMF07IXV8fChtPTEsdD0icGFkZGluZzowO21hcmdpbjowO2JvcmRlcjoiLHI9InBvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDt3aWR0aDoxcHg7aGVpZ2h0OjFweDsiLHM9dCsiMDt2aXNpYmlsaXR5OmhpZGRlbjsiLG49InN0eWxlPSciK3IrdCsiNXB4IHNvbGlkICMwMDA7IixxPSI8ZGl2ICIrbisiZGlzcGxheTpibG9jazsnPjxkaXYgc3R5bGU9JyIrdCsiMDtkaXNwbGF5OmJsb2NrO292ZXJmbG93OmhpZGRlbjsnPjwvZGl2PjwvZGl2PiIrIjx0YWJsZSAiK24rIicgY2VsbHBhZGRpbmc9JzAnIGNlbGxzcGFjaW5nPScwJz4iKyI8dHI+PHRkPjwvdGQ+PC90cj48L3RhYmxlPiIsZD1jLmNyZWF0ZUVsZW1lbnQoImRpdiIpLGQuc3R5bGUuY3NzVGV4dD1zKyJ3aWR0aDowO2hlaWdodDowO3Bvc2l0aW9uOnN0YXRpYzt0b3A6MDttYXJnaW4tdG9wOiIrbSsicHgiLHUuaW5zZXJ0QmVmb3JlKGQsdS5maXJzdENoaWxkKSxwPWMuY3JlYXRlRWxlbWVudCgiZGl2IiksZC5hcHBlbmRDaGlsZChwKSxwLmlubmVySFRNTD0iPHRhYmxlPjx0cj48dGQgc3R5bGU9JyIrdCsiMDtkaXNwbGF5Om5vbmUnPjwvdGQ+PHRkPnQ8L3RkPjwvdHI+PC90YWJsZT4iLGs9cC5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGQiKSxvPWtbMF0ub2Zmc2V0SGVpZ2h0PT09MCxrWzBdLnN0eWxlLmRpc3BsYXk9IiIsa1sxXS5zdHlsZS5kaXNwbGF5PSJub25lIixiLnJlbGlhYmxlSGlkZGVuT2Zmc2V0cz1vJiZrWzBdLm9mZnNldEhlaWdodD09PTAsYS5nZXRDb21wdXRlZFN0eWxlJiYocC5pbm5lckhUTUw9IiIsbD1jLmNyZWF0ZUVsZW1lbnQoImRpdiIpLGwuc3R5bGUud2lkdGg9IjAiLGwuc3R5bGUubWFyZ2luUmlnaHQ9IjAiLHAuc3R5bGUud2lkdGg9IjJweCIscC5hcHBlbmRDaGlsZChsKSxiLnJlbGlhYmxlTWFyZ2luUmlnaHQ9KHBhcnNlSW50KChhLmdldENvbXB1dGVkU3R5bGUobCxudWxsKXx8e21hcmdpblJpZ2h0OjB9KS5tYXJnaW5SaWdodCwxMCl8fDApPT09MCksdHlwZW9mIHAuc3R5bGUuem9vbSE9InVuZGVmaW5lZCImJihwLmlubmVySFRNTD0iIixwLnN0eWxlLndpZHRoPXAuc3R5bGUucGFkZGluZz0iMXB4IixwLnN0eWxlLmJvcmRlcj0wLHAuc3R5bGUub3ZlcmZsb3c9ImhpZGRlbiIscC5zdHlsZS5kaXNwbGF5PSJpbmxpbmUiLHAuc3R5bGUuem9vbT0xLGIuaW5saW5lQmxvY2tOZWVkc0xheW91dD1wLm9mZnNldFdpZHRoPT09MyxwLnN0eWxlLmRpc3BsYXk9ImJsb2NrIixwLnN0eWxlLm92ZXJmbG93PSJ2aXNpYmxlIixwLmlubmVySFRNTD0iPGRpdiBzdHlsZT0nd2lkdGg6NXB4Oyc+PC9kaXY+IixiLnNocmlua1dyYXBCbG9ja3M9cC5vZmZzZXRXaWR0aCE9PTMpLHAuc3R5bGUuY3NzVGV4dD1yK3MscC5pbm5lckhUTUw9cSxlPXAuZmlyc3RDaGlsZCxnPWUuZmlyc3RDaGlsZCxpPWUubmV4dFNpYmxpbmcuZmlyc3RDaGlsZC5maXJzdENoaWxkLGo9e2RvZXNOb3RBZGRCb3JkZXI6Zy5vZmZzZXRUb3AhPT01LGRvZXNBZGRCb3JkZXJGb3JUYWJsZUFuZENlbGxzOmkub2Zmc2V0VG9wPT09NX0sZy5zdHlsZS5wb3NpdGlvbj0iZml4ZWQiLGcuc3R5bGUudG9wPSIyMHB4IixqLmZpeGVkUG9zaXRpb249Zy5vZmZzZXRUb3A9PT0yMHx8Zy5vZmZzZXRUb3A9PT0xNSxnLnN0eWxlLnBvc2l0aW9uPWcuc3R5bGUudG9wPSIiLGUuc3R5bGUub3ZlcmZsb3c9ImhpZGRlbiIsZS5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiLGouc3VidHJhY3RzQm9yZGVyRm9yT3ZlcmZsb3dOb3RWaXNpYmxlPWcub2Zmc2V0VG9wPT09LTUsai5kb2VzTm90SW5jbHVkZU1hcmdpbkluQm9keU9mZnNldD11Lm9mZnNldFRvcCE9PW0sYS5nZXRDb21wdXRlZFN0eWxlJiYocC5zdHlsZS5tYXJnaW5Ub3A9IjElIixiLnBpeGVsTWFyZ2luPShhLmdldENvbXB1dGVkU3R5bGUocCxudWxsKXx8e21hcmdpblRvcDowfSkubWFyZ2luVG9wIT09IjElIiksdHlwZW9mIGQuc3R5bGUuem9vbSE9InVuZGVmaW5lZCImJihkLnN0eWxlLnpvb209MSksdS5yZW1vdmVDaGlsZChkKSxsPXA9ZD1udWxsLGYuZXh0ZW5kKGIsaikpfSk7cmV0dXJuIGJ9KCk7dmFyIGo9L14oPzpcey4qXH18XFsuKlxdKSQvLGs9LyhbQS1aXSkvZztmLmV4dGVuZCh7Y2FjaGU6e30sdXVpZDowLGV4cGFuZG86ImpRdWVyeSIrKGYuZm4uanF1ZXJ5K01hdGgucmFuZG9tKCkpLnJlcGxhY2UoL1xEL2csIiIpLG5vRGF0YTp7ZW1iZWQ6ITAsb2JqZWN0OiJjbHNpZDpEMjdDREI2RS1BRTZELTExY2YtOTZCOC00NDQ1NTM1NDAwMDAiLGFwcGxldDohMH0saGFzRGF0YTpmdW5jdGlvbihhKXthPWEubm9kZVR5cGU/Zi5jYWNoZVthW2YuZXhwYW5kb11dOmFbZi5leHBhbmRvXTtyZXR1cm4hIWEmJiFtKGEpfSxkYXRhOmZ1bmN0aW9uKGEsYyxkLGUpe2lmKCEhZi5hY2NlcHREYXRhKGEpKXt2YXIgZyxoLGksaj1mLmV4cGFuZG8saz10eXBlb2YgYz09InN0cmluZyIsbD1hLm5vZGVUeXBlLG09bD9mLmNhY2hlOmEsbj1sP2Fbal06YVtqXSYmaixvPWM9PT0iZXZlbnRzIjtpZigoIW58fCFtW25dfHwhbyYmIWUmJiFtW25dLmRhdGEpJiZrJiZkPT09YilyZXR1cm47bnx8KGw/YVtqXT1uPSsrZi51dWlkOm49aiksbVtuXXx8KG1bbl09e30sbHx8KG1bbl0udG9KU09OPWYubm9vcCkpO2lmKHR5cGVvZiBjPT0ib2JqZWN0Inx8dHlwZW9mIGM9PSJmdW5jdGlvbiIpZT9tW25dPWYuZXh0ZW5kKG1bbl0sYyk6bVtuXS5kYXRhPWYuZXh0ZW5kKG1bbl0uZGF0YSxjKTtnPWg9bVtuXSxlfHwoaC5kYXRhfHwoaC5kYXRhPXt9KSxoPWguZGF0YSksZCE9PWImJihoW2YuY2FtZWxDYXNlKGMpXT1kKTtpZihvJiYhaFtjXSlyZXR1cm4gZy5ldmVudHM7az8oaT1oW2NdLGk9PW51bGwmJihpPWhbZi5jYW1lbENhc2UoYyldKSk6aT1oO3JldHVybiBpfX0scmVtb3ZlRGF0YTpmdW5jdGlvbihhLGIsYyl7aWYoISFmLmFjY2VwdERhdGEoYSkpe3ZhciBkLGUsZyxoPWYuZXhwYW5kbyxpPWEubm9kZVR5cGUsaj1pP2YuY2FjaGU6YSxrPWk/YVtoXTpoO2lmKCFqW2tdKXJldHVybjtpZihiKXtkPWM/altrXTpqW2tdLmRhdGE7aWYoZCl7Zi5pc0FycmF5KGIpfHwoYiBpbiBkP2I9W2JdOihiPWYuY2FtZWxDYXNlKGIpLGIgaW4gZD9iPVtiXTpiPWIuc3BsaXQoIiAiKSkpO2ZvcihlPTAsZz1iLmxlbmd0aDtlPGc7ZSsrKWRlbGV0ZSBkW2JbZV1dO2lmKCEoYz9tOmYuaXNFbXB0eU9iamVjdCkoZCkpcmV0dXJufX1pZighYyl7ZGVsZXRlIGpba10uZGF0YTtpZighbShqW2tdKSlyZXR1cm59Zi5zdXBwb3J0LmRlbGV0ZUV4cGFuZG98fCFqLnNldEludGVydmFsP2RlbGV0ZSBqW2tdOmpba109bnVsbCxpJiYoZi5zdXBwb3J0LmRlbGV0ZUV4cGFuZG8/ZGVsZXRlIGFbaF06YS5yZW1vdmVBdHRyaWJ1dGU/YS5yZW1vdmVBdHRyaWJ1dGUoaCk6YVtoXT1udWxsKX19LF9kYXRhOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gZi5kYXRhKGEsYixjLCEwKX0sYWNjZXB0RGF0YTpmdW5jdGlvbihhKXtpZihhLm5vZGVOYW1lKXt2YXIgYj1mLm5vRGF0YVthLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldO2lmKGIpcmV0dXJuIGIhPT0hMCYmYS5nZXRBdHRyaWJ1dGUoImNsYXNzaWQiKT09PWJ9cmV0dXJuITB9fSksZi5mbi5leHRlbmQoe2RhdGE6ZnVuY3Rpb24oYSxjKXt2YXIgZCxlLGcsaCxpLGo9dGhpc1swXSxrPTAsbT1udWxsO2lmKGE9PT1iKXtpZih0aGlzLmxlbmd0aCl7bT1mLmRhdGEoaik7aWYoai5ub2RlVHlwZT09PTEmJiFmLl9kYXRhKGosInBhcnNlZEF0dHJzIikpe2c9ai5hdHRyaWJ1dGVzO2ZvcihpPWcubGVuZ3RoO2s8aTtrKyspaD1nW2tdLm5hbWUsaC5pbmRleE9mKCJkYXRhLSIpPT09MCYmKGg9Zi5jYW1lbENhc2UoaC5zdWJzdHJpbmcoNSkpLGwoaixoLG1baF0pKTtmLl9kYXRhKGosInBhcnNlZEF0dHJzIiwhMCl9fXJldHVybiBtfWlmKHR5cGVvZiBhPT0ib2JqZWN0IilyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Zi5kYXRhKHRoaXMsYSl9KTtkPWEuc3BsaXQoIi4iLDIpLGRbMV09ZFsxXT8iLiIrZFsxXToiIixlPWRbMV0rIiEiO3JldHVybiBmLmFjY2Vzcyh0aGlzLGZ1bmN0aW9uKGMpe2lmKGM9PT1iKXttPXRoaXMudHJpZ2dlckhhbmRsZXIoImdldERhdGEiK2UsW2RbMF1dKSxtPT09YiYmaiYmKG09Zi5kYXRhKGosYSksbT1sKGosYSxtKSk7cmV0dXJuIG09PT1iJiZkWzFdP3RoaXMuZGF0YShkWzBdKTptfWRbMV09Yyx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYj1mKHRoaXMpO2IudHJpZ2dlckhhbmRsZXIoInNldERhdGEiK2UsZCksZi5kYXRhKHRoaXMsYSxjKSxiLnRyaWdnZXJIYW5kbGVyKCJjaGFuZ2VEYXRhIitlLGQpfSl9LG51bGwsYyxhcmd1bWVudHMubGVuZ3RoPjEsbnVsbCwhMSl9LHJlbW92ZURhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2YucmVtb3ZlRGF0YSh0aGlzLGEpfSl9fSksZi5leHRlbmQoe19tYXJrOmZ1bmN0aW9uKGEsYil7YSYmKGI9KGJ8fCJmeCIpKyJtYXJrIixmLl9kYXRhKGEsYiwoZi5fZGF0YShhLGIpfHwwKSsxKSl9LF91bm1hcms6ZnVuY3Rpb24oYSxiLGMpe2EhPT0hMCYmKGM9YixiPWEsYT0hMSk7aWYoYil7Yz1jfHwiZngiO3ZhciBkPWMrIm1hcmsiLGU9YT8wOihmLl9kYXRhKGIsZCl8fDEpLTE7ZT9mLl9kYXRhKGIsZCxlKTooZi5yZW1vdmVEYXRhKGIsZCwhMCksbihiLGMsIm1hcmsiKSl9fSxxdWV1ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ7aWYoYSl7Yj0oYnx8ImZ4IikrInF1ZXVlIixkPWYuX2RhdGEoYSxiKSxjJiYoIWR8fGYuaXNBcnJheShjKT9kPWYuX2RhdGEoYSxiLGYubWFrZUFycmF5KGMpKTpkLnB1c2goYykpO3JldHVybiBkfHxbXX19LGRlcXVldWU6ZnVuY3Rpb24oYSxiKXtiPWJ8fCJmeCI7dmFyIGM9Zi5xdWV1ZShhLGIpLGQ9Yy5zaGlmdCgpLGU9e307ZD09PSJpbnByb2dyZXNzIiYmKGQ9Yy5zaGlmdCgpKSxkJiYoYj09PSJmeCImJmMudW5zaGlmdCgiaW5wcm9ncmVzcyIpLGYuX2RhdGEoYSxiKyIucnVuIixlKSxkLmNhbGwoYSxmdW5jdGlvbigpe2YuZGVxdWV1ZShhLGIpfSxlKSksYy5sZW5ndGh8fChmLnJlbW92ZURhdGEoYSxiKyJxdWV1ZSAiK2IrIi5ydW4iLCEwKSxuKGEsYiwicXVldWUiKSl9fSksZi5mbi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGEsYyl7dmFyIGQ9Mjt0eXBlb2YgYSE9InN0cmluZyImJihjPWEsYT0iZngiLGQtLSk7aWYoYXJndW1lbnRzLmxlbmd0aDxkKXJldHVybiBmLnF1ZXVlKHRoaXNbMF0sYSk7cmV0dXJuIGM9PT1iP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9Zi5xdWV1ZSh0aGlzLGEsYyk7YT09PSJmeCImJmJbMF0hPT0iaW5wcm9ncmVzcyImJmYuZGVxdWV1ZSh0aGlzLGEpfSl9LGRlcXVldWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2YuZGVxdWV1ZSh0aGlzLGEpfSl9LGRlbGF5OmZ1bmN0aW9uKGEsYil7YT1mLmZ4P2YuZnguc3BlZWRzW2FdfHxhOmEsYj1ifHwiZngiO3JldHVybiB0aGlzLnF1ZXVlKGIsZnVuY3Rpb24oYixjKXt2YXIgZD1zZXRUaW1lb3V0KGIsYSk7Yy5zdG9wPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KGQpfX0pfSxjbGVhclF1ZXVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnF1ZXVlKGF8fCJmeCIsW10pfSxwcm9taXNlOmZ1bmN0aW9uKGEsYyl7ZnVuY3Rpb24gbSgpey0taHx8ZC5yZXNvbHZlV2l0aChlLFtlXSl9dHlwZW9mIGEhPSJzdHJpbmciJiYoYz1hLGE9YiksYT1hfHwiZngiO3ZhciBkPWYuRGVmZXJyZWQoKSxlPXRoaXMsZz1lLmxlbmd0aCxoPTEsaT1hKyJkZWZlciIsaj1hKyJxdWV1ZSIsaz1hKyJtYXJrIixsO3doaWxlKGctLSlpZihsPWYuZGF0YShlW2ddLGksYiwhMCl8fChmLmRhdGEoZVtnXSxqLGIsITApfHxmLmRhdGEoZVtnXSxrLGIsITApKSYmZi5kYXRhKGVbZ10saSxmLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwhMCkpaCsrLGwuYWRkKG0pO20oKTtyZXR1cm4gZC5wcm9taXNlKGMpfX0pO3ZhciBvPS9bXG5cdFxyXS9nLHA9L1xzKy8scT0vXHIvZyxyPS9eKD86YnV0dG9ufGlucHV0KSQvaSxzPS9eKD86YnV0dG9ufGlucHV0fG9iamVjdHxzZWxlY3R8dGV4dGFyZWEpJC9pLHQ9L15hKD86cmVhKT8kL2ksdT0vXig/OmF1dG9mb2N1c3xhdXRvcGxheXxhc3luY3xjaGVja2VkfGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkfHNlbGVjdGVkKSQvaSx2PWYuc3VwcG9ydC5nZXRTZXRBdHRyaWJ1dGUsdyx4LHk7Zi5mbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZi5hY2Nlc3ModGhpcyxmLmF0dHIsYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2YucmVtb3ZlQXR0cih0aGlzLGEpfSl9LHByb3A6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZi5hY2Nlc3ModGhpcyxmLnByb3AsYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZVByb3A6ZnVuY3Rpb24oYSl7YT1mLnByb3BGaXhbYV18fGE7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3RyeXt0aGlzW2FdPWIsZGVsZXRlIHRoaXNbYV19Y2F0Y2goYyl7fX0pfSxhZGRDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxnLGgsaTtpZihmLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXtmKHRoaXMpLmFkZENsYXNzKGEuY2FsbCh0aGlzLGIsdGhpcy5jbGFzc05hbWUpKX0pO2lmKGEmJnR5cGVvZiBhPT0ic3RyaW5nIil7Yj1hLnNwbGl0KHApO2ZvcihjPTAsZD10aGlzLmxlbmd0aDtjPGQ7YysrKXtlPXRoaXNbY107aWYoZS5ub2RlVHlwZT09PTEpaWYoIWUuY2xhc3NOYW1lJiZiLmxlbmd0aD09PTEpZS5jbGFzc05hbWU9YTtlbHNle2c9IiAiK2UuY2xhc3NOYW1lKyIgIjtmb3IoaD0wLGk9Yi5sZW5ndGg7aDxpO2grKyl+Zy5pbmRleE9mKCIgIitiW2hdKyIgIil8fChnKz1iW2hdKyIgIik7ZS5jbGFzc05hbWU9Zi50cmltKGcpfX19cmV0dXJuIHRoaXN9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGEpe3ZhciBjLGQsZSxnLGgsaSxqO2lmKGYuaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGIpe2YodGhpcykucmVtb3ZlQ2xhc3MoYS5jYWxsKHRoaXMsYix0aGlzLmNsYXNzTmFtZSkpfSk7aWYoYSYmdHlwZW9mIGE9PSJzdHJpbmcifHxhPT09Yil7Yz0oYXx8IiIpLnNwbGl0KHApO2ZvcihkPTAsZT10aGlzLmxlbmd0aDtkPGU7ZCsrKXtnPXRoaXNbZF07aWYoZy5ub2RlVHlwZT09PTEmJmcuY2xhc3NOYW1lKWlmKGEpe2g9KCIgIitnLmNsYXNzTmFtZSsiICIpLnJlcGxhY2UobywiICIpO2ZvcihpPTAsaj1jLmxlbmd0aDtpPGo7aSsrKWg9aC5yZXBsYWNlKCIgIitjW2ldKyIgIiwiICIpO2cuY2xhc3NOYW1lPWYudHJpbShoKX1lbHNlIGcuY2xhc3NOYW1lPSIifX1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz10eXBlb2YgYSxkPXR5cGVvZiBiPT0iYm9vbGVhbiI7aWYoZi5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYyl7Zih0aGlzKS50b2dnbGVDbGFzcyhhLmNhbGwodGhpcyxjLHRoaXMuY2xhc3NOYW1lLGIpLGIpfSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2lmKGM9PT0ic3RyaW5nIil7dmFyIGUsZz0wLGg9Zih0aGlzKSxpPWIsaj1hLnNwbGl0KHApO3doaWxlKGU9altnKytdKWk9ZD9pOiFoLmhhc0NsYXNzKGUpLGhbaT8iYWRkQ2xhc3MiOiJyZW1vdmVDbGFzcyJdKGUpfWVsc2UgaWYoYz09PSJ1bmRlZmluZWQifHxjPT09ImJvb2xlYW4iKXRoaXMuY2xhc3NOYW1lJiZmLl9kYXRhKHRoaXMsIl9fY2xhc3NOYW1lX18iLHRoaXMuY2xhc3NOYW1lKSx0aGlzLmNsYXNzTmFtZT10aGlzLmNsYXNzTmFtZXx8YT09PSExPyIiOmYuX2RhdGEodGhpcywiX19jbGFzc05hbWVfXyIpfHwiIn0pfSxoYXNDbGFzczpmdW5jdGlvbihhKXt2YXIgYj0iICIrYSsiICIsYz0wLGQ9dGhpcy5sZW5ndGg7Zm9yKDtjPGQ7YysrKWlmKHRoaXNbY10ubm9kZVR5cGU9PT0xJiYoIiAiK3RoaXNbY10uY2xhc3NOYW1lKyIgIikucmVwbGFjZShvLCIgIikuaW5kZXhPZihiKT4tMSlyZXR1cm4hMDtyZXR1cm4hMX0sdmFsOmZ1bmN0aW9uKGEpe3ZhciBjLGQsZSxnPXRoaXNbMF07e2lmKCEhYXJndW1lbnRzLmxlbmd0aCl7ZT1mLmlzRnVuY3Rpb24oYSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihkKXt2YXIgZz1mKHRoaXMpLGg7aWYodGhpcy5ub2RlVHlwZT09PTEpe2U/aD1hLmNhbGwodGhpcyxkLGcudmFsKCkpOmg9YSxoPT1udWxsP2g9IiI6dHlwZW9mIGg9PSJudW1iZXIiP2grPSIiOmYuaXNBcnJheShoKSYmKGg9Zi5tYXAoaCxmdW5jdGlvbihhKXtyZXR1cm4gYT09bnVsbD8iIjphKyIifSkpLGM9Zi52YWxIb29rc1t0aGlzLnR5cGVdfHxmLnZhbEhvb2tzW3RoaXMubm9kZU5hbWUudG9Mb3dlckNhc2UoKV07aWYoIWN8fCEoInNldCJpbiBjKXx8Yy5zZXQodGhpcyxoLCJ2YWx1ZSIpPT09Yil0aGlzLnZhbHVlPWh9fSl9aWYoZyl7Yz1mLnZhbEhvb2tzW2cudHlwZV18fGYudmFsSG9va3NbZy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXTtpZihjJiYiZ2V0ImluIGMmJihkPWMuZ2V0KGcsInZhbHVlIikpIT09YilyZXR1cm4gZDtkPWcudmFsdWU7cmV0dXJuIHR5cGVvZiBkPT0ic3RyaW5nIj9kLnJlcGxhY2UocSwiIik6ZD09bnVsbD8iIjpkfX19fSksZi5leHRlbmQoe3ZhbEhvb2tzOntvcHRpb246e2dldDpmdW5jdGlvbihhKXt2YXIgYj1hLmF0dHJpYnV0ZXMudmFsdWU7cmV0dXJuIWJ8fGIuc3BlY2lmaWVkP2EudmFsdWU6YS50ZXh0fX0sc2VsZWN0OntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZz1hLnNlbGVjdGVkSW5kZXgsaD1bXSxpPWEub3B0aW9ucyxqPWEudHlwZT09PSJzZWxlY3Qtb25lIjtpZihnPDApcmV0dXJuIG51bGw7Yz1qP2c6MCxkPWo/ZysxOmkubGVuZ3RoO2Zvcig7YzxkO2MrKyl7ZT1pW2NdO2lmKGUuc2VsZWN0ZWQmJihmLnN1cHBvcnQub3B0RGlzYWJsZWQ/IWUuZGlzYWJsZWQ6ZS5nZXRBdHRyaWJ1dGUoImRpc2FibGVkIik9PT1udWxsKSYmKCFlLnBhcmVudE5vZGUuZGlzYWJsZWR8fCFmLm5vZGVOYW1lKGUucGFyZW50Tm9kZSwib3B0Z3JvdXAiKSkpe2I9ZihlKS52YWwoKTtpZihqKXJldHVybiBiO2gucHVzaChiKX19aWYoaiYmIWgubGVuZ3RoJiZpLmxlbmd0aClyZXR1cm4gZihpW2ddKS52YWwoKTtyZXR1cm4gaH0sc2V0OmZ1bmN0aW9uKGEsYil7dmFyIGM9Zi5tYWtlQXJyYXkoYik7ZihhKS5maW5kKCJvcHRpb24iKS5lYWNoKGZ1bmN0aW9uKCl7dGhpcy5zZWxlY3RlZD1mLmluQXJyYXkoZih0aGlzKS52YWwoKSxjKT49MH0pLGMubGVuZ3RofHwoYS5zZWxlY3RlZEluZGV4PS0xKTtyZXR1cm4gY319fSxhdHRyRm46e3ZhbDohMCxjc3M6ITAsaHRtbDohMCx0ZXh0OiEwLGRhdGE6ITAsd2lkdGg6ITAsaGVpZ2h0OiEwLG9mZnNldDohMH0sYXR0cjpmdW5jdGlvbihhLGMsZCxlKXt2YXIgZyxoLGksaj1hLm5vZGVUeXBlO2lmKCEhYSYmaiE9PTMmJmohPT04JiZqIT09Mil7aWYoZSYmYyBpbiBmLmF0dHJGbilyZXR1cm4gZihhKVtjXShkKTtpZih0eXBlb2YgYS5nZXRBdHRyaWJ1dGU9PSJ1bmRlZmluZWQiKXJldHVybiBmLnByb3AoYSxjLGQpO2k9aiE9PTF8fCFmLmlzWE1MRG9jKGEpLGkmJihjPWMudG9Mb3dlckNhc2UoKSxoPWYuYXR0ckhvb2tzW2NdfHwodS50ZXN0KGMpP3g6dykpO2lmKGQhPT1iKXtpZihkPT09bnVsbCl7Zi5yZW1vdmVBdHRyKGEsYyk7cmV0dXJufWlmKGgmJiJzZXQiaW4gaCYmaSYmKGc9aC5zZXQoYSxkLGMpKSE9PWIpcmV0dXJuIGc7YS5zZXRBdHRyaWJ1dGUoYywiIitkKTtyZXR1cm4gZH1pZihoJiYiZ2V0ImluIGgmJmkmJihnPWguZ2V0KGEsYykpIT09bnVsbClyZXR1cm4gZztnPWEuZ2V0QXR0cmlidXRlKGMpO3JldHVybiBnPT09bnVsbD9iOmd9fSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGcsaCxpPTA7aWYoYiYmYS5ub2RlVHlwZT09PTEpe2Q9Yi50b0xvd2VyQ2FzZSgpLnNwbGl0KHApLGc9ZC5sZW5ndGg7Zm9yKDtpPGc7aSsrKWU9ZFtpXSxlJiYoYz1mLnByb3BGaXhbZV18fGUsaD11LnRlc3QoZSksaHx8Zi5hdHRyKGEsZSwiIiksYS5yZW1vdmVBdHRyaWJ1dGUodj9lOmMpLGgmJmMgaW4gYSYmKGFbY109ITEpKX19LGF0dHJIb29rczp7dHlwZTp7c2V0OmZ1bmN0aW9uKGEsYil7aWYoci50ZXN0KGEubm9kZU5hbWUpJiZhLnBhcmVudE5vZGUpZi5lcnJvcigidHlwZSBwcm9wZXJ0eSBjYW4ndCBiZSBjaGFuZ2VkIik7ZWxzZSBpZighZi5zdXBwb3J0LnJhZGlvVmFsdWUmJmI9PT0icmFkaW8iJiZmLm5vZGVOYW1lKGEsImlucHV0Iikpe3ZhciBjPWEudmFsdWU7YS5zZXRBdHRyaWJ1dGUoInR5cGUiLGIpLGMmJihhLnZhbHVlPWMpO3JldHVybiBifX19LHZhbHVlOntnZXQ6ZnVuY3Rpb24oYSxiKXtpZih3JiZmLm5vZGVOYW1lKGEsImJ1dHRvbiIpKXJldHVybiB3LmdldChhLGIpO3JldHVybiBiIGluIGE/YS52YWx1ZTpudWxsfSxzZXQ6ZnVuY3Rpb24oYSxiLGMpe2lmKHcmJmYubm9kZU5hbWUoYSwiYnV0dG9uIikpcmV0dXJuIHcuc2V0KGEsYixjKTthLnZhbHVlPWJ9fX0scHJvcEZpeDp7dGFiaW5kZXg6InRhYkluZGV4IixyZWFkb25seToicmVhZE9ubHkiLCJmb3IiOiJodG1sRm9yIiwiY2xhc3MiOiJjbGFzc05hbWUiLG1heGxlbmd0aDoibWF4TGVuZ3RoIixjZWxsc3BhY2luZzoiY2VsbFNwYWNpbmciLGNlbGxwYWRkaW5nOiJjZWxsUGFkZGluZyIscm93c3Bhbjoicm93U3BhbiIsY29sc3BhbjoiY29sU3BhbiIsdXNlbWFwOiJ1c2VNYXAiLGZyYW1lYm9yZGVyOiJmcmFtZUJvcmRlciIsY29udGVudGVkaXRhYmxlOiJjb250ZW50RWRpdGFibGUifSxwcm9wOmZ1bmN0aW9uKGEsYyxkKXt2YXIgZSxnLGgsaT1hLm5vZGVUeXBlO2lmKCEhYSYmaSE9PTMmJmkhPT04JiZpIT09Mil7aD1pIT09MXx8IWYuaXNYTUxEb2MoYSksaCYmKGM9Zi5wcm9wRml4W2NdfHxjLGc9Zi5wcm9wSG9va3NbY10pO3JldHVybiBkIT09Yj9nJiYic2V0ImluIGcmJihlPWcuc2V0KGEsZCxjKSkhPT1iP2U6YVtjXT1kOmcmJiJnZXQiaW4gZyYmKGU9Zy5nZXQoYSxjKSkhPT1udWxsP2U6YVtjXX19LHByb3BIb29rczp7dGFiSW5kZXg6e2dldDpmdW5jdGlvbihhKXt2YXIgYz1hLmdldEF0dHJpYnV0ZU5vZGUoInRhYmluZGV4Iik7cmV0dXJuIGMmJmMuc3BlY2lmaWVkP3BhcnNlSW50KGMudmFsdWUsMTApOnMudGVzdChhLm5vZGVOYW1lKXx8dC50ZXN0KGEubm9kZU5hbWUpJiZhLmhyZWY/MDpifX19fSksZi5hdHRySG9va3MudGFiaW5kZXg9Zi5wcm9wSG9va3MudGFiSW5kZXgseD17Z2V0OmZ1bmN0aW9uKGEsYyl7dmFyIGQsZT1mLnByb3AoYSxjKTtyZXR1cm4gZT09PSEwfHx0eXBlb2YgZSE9ImJvb2xlYW4iJiYoZD1hLmdldEF0dHJpYnV0ZU5vZGUoYykpJiZkLm5vZGVWYWx1ZSE9PSExP2MudG9Mb3dlckNhc2UoKTpifSxzZXQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO2I9PT0hMT9mLnJlbW92ZUF0dHIoYSxjKTooZD1mLnByb3BGaXhbY118fGMsZCBpbiBhJiYoYVtkXT0hMCksYS5zZXRBdHRyaWJ1dGUoYyxjLnRvTG93ZXJDYXNlKCkpKTtyZXR1cm4gY319LHZ8fCh5PXtuYW1lOiEwLGlkOiEwLGNvb3JkczohMH0sdz1mLnZhbEhvb2tzLmJ1dHRvbj17Z2V0OmZ1bmN0aW9uKGEsYyl7dmFyIGQ7ZD1hLmdldEF0dHJpYnV0ZU5vZGUoYyk7cmV0dXJuIGQmJih5W2NdP2Qubm9kZVZhbHVlIT09IiI6ZC5zcGVjaWZpZWQpP2Qubm9kZVZhbHVlOmJ9LHNldDpmdW5jdGlvbihhLGIsZCl7dmFyIGU9YS5nZXRBdHRyaWJ1dGVOb2RlKGQpO2V8fChlPWMuY3JlYXRlQXR0cmlidXRlKGQpLGEuc2V0QXR0cmlidXRlTm9kZShlKSk7cmV0dXJuIGUubm9kZVZhbHVlPWIrIiJ9fSxmLmF0dHJIb29rcy50YWJpbmRleC5zZXQ9dy5zZXQsZi5lYWNoKFsid2lkdGgiLCJoZWlnaHQiXSxmdW5jdGlvbihhLGIpe2YuYXR0ckhvb2tzW2JdPWYuZXh0ZW5kKGYuYXR0ckhvb2tzW2JdLHtzZXQ6ZnVuY3Rpb24oYSxjKXtpZihjPT09IiIpe2Euc2V0QXR0cmlidXRlKGIsImF1dG8iKTtyZXR1cm4gY319fSl9KSxmLmF0dHJIb29rcy5jb250ZW50ZWRpdGFibGU9e2dldDp3LmdldCxzZXQ6ZnVuY3Rpb24oYSxiLGMpe2I9PT0iIiYmKGI9ImZhbHNlIiksdy5zZXQoYSxiLGMpfX0pLGYuc3VwcG9ydC5ocmVmTm9ybWFsaXplZHx8Zi5lYWNoKFsiaHJlZiIsInNyYyIsIndpZHRoIiwiaGVpZ2h0Il0sZnVuY3Rpb24oYSxjKXtmLmF0dHJIb29rc1tjXT1mLmV4dGVuZChmLmF0dHJIb29rc1tjXSx7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBkPWEuZ2V0QXR0cmlidXRlKGMsMik7cmV0dXJuIGQ9PT1udWxsP2I6ZH19KX0pLGYuc3VwcG9ydC5zdHlsZXx8KGYuYXR0ckhvb2tzLnN0eWxlPXtnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuc3R5bGUuY3NzVGV4dC50b0xvd2VyQ2FzZSgpfHxifSxzZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5zdHlsZS5jc3NUZXh0PSIiK2J9fSksZi5zdXBwb3J0Lm9wdFNlbGVjdGVkfHwoZi5wcm9wSG9va3Muc2VsZWN0ZWQ9Zi5leHRlbmQoZi5wcm9wSG9va3Muc2VsZWN0ZWQse2dldDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudE5vZGU7YiYmKGIuc2VsZWN0ZWRJbmRleCxiLnBhcmVudE5vZGUmJmIucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4KTtyZXR1cm4gbnVsbH19KSksZi5zdXBwb3J0LmVuY3R5cGV8fChmLnByb3BGaXguZW5jdHlwZT0iZW5jb2RpbmciKSxmLnN1cHBvcnQuY2hlY2tPbnx8Zi5lYWNoKFsicmFkaW8iLCJjaGVja2JveCJdLGZ1bmN0aW9uKCl7Zi52YWxIb29rc1t0aGlzXT17Z2V0OmZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZSgidmFsdWUiKT09PW51bGw/Im9uIjphLnZhbHVlfX19KSxmLmVhY2goWyJyYWRpbyIsImNoZWNrYm94Il0sZnVuY3Rpb24oKXtmLnZhbEhvb2tzW3RoaXNdPWYuZXh0ZW5kKGYudmFsSG9va3NbdGhpc10se3NldDpmdW5jdGlvbihhLGIpe2lmKGYuaXNBcnJheShiKSlyZXR1cm4gYS5jaGVja2VkPWYuaW5BcnJheShmKGEpLnZhbCgpLGIpPj0wfX0pfSk7dmFyIHo9L14oPzp0ZXh0YXJlYXxpbnB1dHxzZWxlY3QpJC9pLEE9L14oW15cLl0qKT8oPzpcLiguKykpPyQvLEI9Lyg/Ol58XHMpaG92ZXIoXC5cUyspP1xiLyxDPS9ea2V5LyxEPS9eKD86bW91c2V8Y29udGV4dG1lbnUpfGNsaWNrLyxFPS9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyxGPS9eKFx3KikoPzojKFtcd1wtXSspKT8oPzpcLihbXHdcLV0rKSk/JC8sRz1mdW5jdGlvbigNCmEpe3ZhciBiPUYuZXhlYyhhKTtiJiYoYlsxXT0oYlsxXXx8IiIpLnRvTG93ZXJDYXNlKCksYlszXT1iWzNdJiZuZXcgUmVnRXhwKCIoPzpefFxccykiK2JbM10rIig/Olxcc3wkKSIpKTtyZXR1cm4gYn0sSD1mdW5jdGlvbihhLGIpe3ZhciBjPWEuYXR0cmlidXRlc3x8e307cmV0dXJuKCFiWzFdfHxhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1iWzFdKSYmKCFiWzJdfHwoYy5pZHx8e30pLnZhbHVlPT09YlsyXSkmJighYlszXXx8YlszXS50ZXN0KChjWyJjbGFzcyJdfHx7fSkudmFsdWUpKX0sST1mdW5jdGlvbihhKXtyZXR1cm4gZi5ldmVudC5zcGVjaWFsLmhvdmVyP2E6YS5yZXBsYWNlKEIsIm1vdXNlZW50ZXIkMSBtb3VzZWxlYXZlJDEiKX07Zi5ldmVudD17YWRkOmZ1bmN0aW9uKGEsYyxkLGUsZyl7dmFyIGgsaSxqLGssbCxtLG4sbyxwLHEscixzO2lmKCEoYS5ub2RlVHlwZT09PTN8fGEubm9kZVR5cGU9PT04fHwhY3x8IWR8fCEoaD1mLl9kYXRhKGEpKSkpe2QuaGFuZGxlciYmKHA9ZCxkPXAuaGFuZGxlcixnPXAuc2VsZWN0b3IpLGQuZ3VpZHx8KGQuZ3VpZD1mLmd1aWQrKyksaj1oLmV2ZW50cyxqfHwoaC5ldmVudHM9aj17fSksaT1oLmhhbmRsZSxpfHwoaC5oYW5kbGU9aT1mdW5jdGlvbihhKXtyZXR1cm4gdHlwZW9mIGYhPSJ1bmRlZmluZWQiJiYoIWF8fGYuZXZlbnQudHJpZ2dlcmVkIT09YS50eXBlKT9mLmV2ZW50LmRpc3BhdGNoLmFwcGx5KGkuZWxlbSxhcmd1bWVudHMpOmJ9LGkuZWxlbT1hKSxjPWYudHJpbShJKGMpKS5zcGxpdCgiICIpO2ZvcihrPTA7azxjLmxlbmd0aDtrKyspe2w9QS5leGVjKGNba10pfHxbXSxtPWxbMV0sbj0obFsyXXx8IiIpLnNwbGl0KCIuIikuc29ydCgpLHM9Zi5ldmVudC5zcGVjaWFsW21dfHx7fSxtPShnP3MuZGVsZWdhdGVUeXBlOnMuYmluZFR5cGUpfHxtLHM9Zi5ldmVudC5zcGVjaWFsW21dfHx7fSxvPWYuZXh0ZW5kKHt0eXBlOm0sb3JpZ1R5cGU6bFsxXSxkYXRhOmUsaGFuZGxlcjpkLGd1aWQ6ZC5ndWlkLHNlbGVjdG9yOmcscXVpY2s6ZyYmRyhnKSxuYW1lc3BhY2U6bi5qb2luKCIuIil9LHApLHI9alttXTtpZighcil7cj1qW21dPVtdLHIuZGVsZWdhdGVDb3VudD0wO2lmKCFzLnNldHVwfHxzLnNldHVwLmNhbGwoYSxlLG4saSk9PT0hMSlhLmFkZEV2ZW50TGlzdGVuZXI/YS5hZGRFdmVudExpc3RlbmVyKG0saSwhMSk6YS5hdHRhY2hFdmVudCYmYS5hdHRhY2hFdmVudCgib24iK20saSl9cy5hZGQmJihzLmFkZC5jYWxsKGEsbyksby5oYW5kbGVyLmd1aWR8fChvLmhhbmRsZXIuZ3VpZD1kLmd1aWQpKSxnP3Iuc3BsaWNlKHIuZGVsZWdhdGVDb3VudCsrLDAsbyk6ci5wdXNoKG8pLGYuZXZlbnQuZ2xvYmFsW21dPSEwfWE9bnVsbH19LGdsb2JhbDp7fSxyZW1vdmU6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZz1mLmhhc0RhdGEoYSkmJmYuX2RhdGEoYSksaCxpLGosayxsLG0sbixvLHAscSxyLHM7aWYoISFnJiYhIShvPWcuZXZlbnRzKSl7Yj1mLnRyaW0oSShifHwiIikpLnNwbGl0KCIgIik7Zm9yKGg9MDtoPGIubGVuZ3RoO2grKyl7aT1BLmV4ZWMoYltoXSl8fFtdLGo9az1pWzFdLGw9aVsyXTtpZighail7Zm9yKGogaW4gbylmLmV2ZW50LnJlbW92ZShhLGorYltoXSxjLGQsITApO2NvbnRpbnVlfXA9Zi5ldmVudC5zcGVjaWFsW2pdfHx7fSxqPShkP3AuZGVsZWdhdGVUeXBlOnAuYmluZFR5cGUpfHxqLHI9b1tqXXx8W10sbT1yLmxlbmd0aCxsPWw/bmV3IFJlZ0V4cCgiKF58XFwuKSIrbC5zcGxpdCgiLiIpLnNvcnQoKS5qb2luKCJcXC4oPzouKlxcLik/IikrIihcXC58JCkiKTpudWxsO2ZvcihuPTA7bjxyLmxlbmd0aDtuKyspcz1yW25dLChlfHxrPT09cy5vcmlnVHlwZSkmJighY3x8Yy5ndWlkPT09cy5ndWlkKSYmKCFsfHxsLnRlc3Qocy5uYW1lc3BhY2UpKSYmKCFkfHxkPT09cy5zZWxlY3Rvcnx8ZD09PSIqKiImJnMuc2VsZWN0b3IpJiYoci5zcGxpY2Uobi0tLDEpLHMuc2VsZWN0b3ImJnIuZGVsZWdhdGVDb3VudC0tLHAucmVtb3ZlJiZwLnJlbW92ZS5jYWxsKGEscykpO3IubGVuZ3RoPT09MCYmbSE9PXIubGVuZ3RoJiYoKCFwLnRlYXJkb3dufHxwLnRlYXJkb3duLmNhbGwoYSxsKT09PSExKSYmZi5yZW1vdmVFdmVudChhLGosZy5oYW5kbGUpLGRlbGV0ZSBvW2pdKX1mLmlzRW1wdHlPYmplY3QobykmJihxPWcuaGFuZGxlLHEmJihxLmVsZW09bnVsbCksZi5yZW1vdmVEYXRhKGEsWyJldmVudHMiLCJoYW5kbGUiXSwhMCkpfX0sY3VzdG9tRXZlbnQ6e2dldERhdGE6ITAsc2V0RGF0YTohMCxjaGFuZ2VEYXRhOiEwfSx0cmlnZ2VyOmZ1bmN0aW9uKGMsZCxlLGcpe2lmKCFlfHxlLm5vZGVUeXBlIT09MyYmZS5ub2RlVHlwZSE9PTgpe3ZhciBoPWMudHlwZXx8YyxpPVtdLGosayxsLG0sbixvLHAscSxyLHM7aWYoRS50ZXN0KGgrZi5ldmVudC50cmlnZ2VyZWQpKXJldHVybjtoLmluZGV4T2YoIiEiKT49MCYmKGg9aC5zbGljZSgwLC0xKSxrPSEwKSxoLmluZGV4T2YoIi4iKT49MCYmKGk9aC5zcGxpdCgiLiIpLGg9aS5zaGlmdCgpLGkuc29ydCgpKTtpZigoIWV8fGYuZXZlbnQuY3VzdG9tRXZlbnRbaF0pJiYhZi5ldmVudC5nbG9iYWxbaF0pcmV0dXJuO2M9dHlwZW9mIGM9PSJvYmplY3QiP2NbZi5leHBhbmRvXT9jOm5ldyBmLkV2ZW50KGgsYyk6bmV3IGYuRXZlbnQoaCksYy50eXBlPWgsYy5pc1RyaWdnZXI9ITAsYy5leGNsdXNpdmU9ayxjLm5hbWVzcGFjZT1pLmpvaW4oIi4iKSxjLm5hbWVzcGFjZV9yZT1jLm5hbWVzcGFjZT9uZXcgUmVnRXhwKCIoXnxcXC4pIitpLmpvaW4oIlxcLig/Oi4qXFwuKT8iKSsiKFxcLnwkKSIpOm51bGwsbz1oLmluZGV4T2YoIjoiKTwwPyJvbiIraDoiIjtpZighZSl7aj1mLmNhY2hlO2ZvcihsIGluIGopaltsXS5ldmVudHMmJmpbbF0uZXZlbnRzW2hdJiZmLmV2ZW50LnRyaWdnZXIoYyxkLGpbbF0uaGFuZGxlLmVsZW0sITApO3JldHVybn1jLnJlc3VsdD1iLGMudGFyZ2V0fHwoYy50YXJnZXQ9ZSksZD1kIT1udWxsP2YubWFrZUFycmF5KGQpOltdLGQudW5zaGlmdChjKSxwPWYuZXZlbnQuc3BlY2lhbFtoXXx8e307aWYocC50cmlnZ2VyJiZwLnRyaWdnZXIuYXBwbHkoZSxkKT09PSExKXJldHVybjtyPVtbZSxwLmJpbmRUeXBlfHxoXV07aWYoIWcmJiFwLm5vQnViYmxlJiYhZi5pc1dpbmRvdyhlKSl7cz1wLmRlbGVnYXRlVHlwZXx8aCxtPUUudGVzdChzK2gpP2U6ZS5wYXJlbnROb2RlLG49bnVsbDtmb3IoO207bT1tLnBhcmVudE5vZGUpci5wdXNoKFttLHNdKSxuPW07biYmbj09PWUub3duZXJEb2N1bWVudCYmci5wdXNoKFtuLmRlZmF1bHRWaWV3fHxuLnBhcmVudFdpbmRvd3x8YSxzXSl9Zm9yKGw9MDtsPHIubGVuZ3RoJiYhYy5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpO2wrKyltPXJbbF1bMF0sYy50eXBlPXJbbF1bMV0scT0oZi5fZGF0YShtLCJldmVudHMiKXx8e30pW2MudHlwZV0mJmYuX2RhdGEobSwiaGFuZGxlIikscSYmcS5hcHBseShtLGQpLHE9byYmbVtvXSxxJiZmLmFjY2VwdERhdGEobSkmJnEuYXBwbHkobSxkKT09PSExJiZjLnByZXZlbnREZWZhdWx0KCk7Yy50eXBlPWgsIWcmJiFjLmlzRGVmYXVsdFByZXZlbnRlZCgpJiYoIXAuX2RlZmF1bHR8fHAuX2RlZmF1bHQuYXBwbHkoZS5vd25lckRvY3VtZW50LGQpPT09ITEpJiYoaCE9PSJjbGljayJ8fCFmLm5vZGVOYW1lKGUsImEiKSkmJmYuYWNjZXB0RGF0YShlKSYmbyYmZVtoXSYmKGghPT0iZm9jdXMiJiZoIT09ImJsdXIifHxjLnRhcmdldC5vZmZzZXRXaWR0aCE9PTApJiYhZi5pc1dpbmRvdyhlKSYmKG49ZVtvXSxuJiYoZVtvXT1udWxsKSxmLmV2ZW50LnRyaWdnZXJlZD1oLGVbaF0oKSxmLmV2ZW50LnRyaWdnZXJlZD1iLG4mJihlW29dPW4pKTtyZXR1cm4gYy5yZXN1bHR9fSxkaXNwYXRjaDpmdW5jdGlvbihjKXtjPWYuZXZlbnQuZml4KGN8fGEuZXZlbnQpO3ZhciBkPShmLl9kYXRhKHRoaXMsImV2ZW50cyIpfHx7fSlbYy50eXBlXXx8W10sZT1kLmRlbGVnYXRlQ291bnQsZz1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKSxoPSFjLmV4Y2x1c2l2ZSYmIWMubmFtZXNwYWNlLGk9Zi5ldmVudC5zcGVjaWFsW2MudHlwZV18fHt9LGo9W10sayxsLG0sbixvLHAscSxyLHMsdCx1O2dbMF09YyxjLmRlbGVnYXRlVGFyZ2V0PXRoaXM7aWYoIWkucHJlRGlzcGF0Y2h8fGkucHJlRGlzcGF0Y2guY2FsbCh0aGlzLGMpIT09ITEpe2lmKGUmJighYy5idXR0b258fGMudHlwZSE9PSJjbGljayIpKXtuPWYodGhpcyksbi5jb250ZXh0PXRoaXMub3duZXJEb2N1bWVudHx8dGhpcztmb3IobT1jLnRhcmdldDttIT10aGlzO209bS5wYXJlbnROb2RlfHx0aGlzKWlmKG0uZGlzYWJsZWQhPT0hMCl7cD17fSxyPVtdLG5bMF09bTtmb3Ioaz0wO2s8ZTtrKyspcz1kW2tdLHQ9cy5zZWxlY3RvcixwW3RdPT09YiYmKHBbdF09cy5xdWljaz9IKG0scy5xdWljayk6bi5pcyh0KSkscFt0XSYmci5wdXNoKHMpO3IubGVuZ3RoJiZqLnB1c2goe2VsZW06bSxtYXRjaGVzOnJ9KX19ZC5sZW5ndGg+ZSYmai5wdXNoKHtlbGVtOnRoaXMsbWF0Y2hlczpkLnNsaWNlKGUpfSk7Zm9yKGs9MDtrPGoubGVuZ3RoJiYhYy5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpO2srKyl7cT1qW2tdLGMuY3VycmVudFRhcmdldD1xLmVsZW07Zm9yKGw9MDtsPHEubWF0Y2hlcy5sZW5ndGgmJiFjLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCk7bCsrKXtzPXEubWF0Y2hlc1tsXTtpZihofHwhYy5uYW1lc3BhY2UmJiFzLm5hbWVzcGFjZXx8Yy5uYW1lc3BhY2VfcmUmJmMubmFtZXNwYWNlX3JlLnRlc3Qocy5uYW1lc3BhY2UpKWMuZGF0YT1zLmRhdGEsYy5oYW5kbGVPYmo9cyxvPSgoZi5ldmVudC5zcGVjaWFsW3Mub3JpZ1R5cGVdfHx7fSkuaGFuZGxlfHxzLmhhbmRsZXIpLmFwcGx5KHEuZWxlbSxnKSxvIT09YiYmKGMucmVzdWx0PW8sbz09PSExJiYoYy5wcmV2ZW50RGVmYXVsdCgpLGMuc3RvcFByb3BhZ2F0aW9uKCkpKX19aS5wb3N0RGlzcGF0Y2gmJmkucG9zdERpc3BhdGNoLmNhbGwodGhpcyxjKTtyZXR1cm4gYy5yZXN1bHR9fSxwcm9wczoiYXR0ckNoYW5nZSBhdHRyTmFtZSByZWxhdGVkTm9kZSBzcmNFbGVtZW50IGFsdEtleSBidWJibGVzIGNhbmNlbGFibGUgY3RybEtleSBjdXJyZW50VGFyZ2V0IGV2ZW50UGhhc2UgbWV0YUtleSByZWxhdGVkVGFyZ2V0IHNoaWZ0S2V5IHRhcmdldCB0aW1lU3RhbXAgdmlldyB3aGljaCIuc3BsaXQoIiAiKSxmaXhIb29rczp7fSxrZXlIb29rczp7cHJvcHM6ImNoYXIgY2hhckNvZGUga2V5IGtleUNvZGUiLnNwbGl0KCIgIiksZmlsdGVyOmZ1bmN0aW9uKGEsYil7YS53aGljaD09bnVsbCYmKGEud2hpY2g9Yi5jaGFyQ29kZSE9bnVsbD9iLmNoYXJDb2RlOmIua2V5Q29kZSk7cmV0dXJuIGF9fSxtb3VzZUhvb2tzOntwcm9wczoiYnV0dG9uIGJ1dHRvbnMgY2xpZW50WCBjbGllbnRZIGZyb21FbGVtZW50IG9mZnNldFggb2Zmc2V0WSBwYWdlWCBwYWdlWSBzY3JlZW5YIHNjcmVlblkgdG9FbGVtZW50Ii5zcGxpdCgiICIpLGZpbHRlcjpmdW5jdGlvbihhLGQpe3ZhciBlLGYsZyxoPWQuYnV0dG9uLGk9ZC5mcm9tRWxlbWVudDthLnBhZ2VYPT1udWxsJiZkLmNsaWVudFghPW51bGwmJihlPWEudGFyZ2V0Lm93bmVyRG9jdW1lbnR8fGMsZj1lLmRvY3VtZW50RWxlbWVudCxnPWUuYm9keSxhLnBhZ2VYPWQuY2xpZW50WCsoZiYmZi5zY3JvbGxMZWZ0fHxnJiZnLnNjcm9sbExlZnR8fDApLShmJiZmLmNsaWVudExlZnR8fGcmJmcuY2xpZW50TGVmdHx8MCksYS5wYWdlWT1kLmNsaWVudFkrKGYmJmYuc2Nyb2xsVG9wfHxnJiZnLnNjcm9sbFRvcHx8MCktKGYmJmYuY2xpZW50VG9wfHxnJiZnLmNsaWVudFRvcHx8MCkpLCFhLnJlbGF0ZWRUYXJnZXQmJmkmJihhLnJlbGF0ZWRUYXJnZXQ9aT09PWEudGFyZ2V0P2QudG9FbGVtZW50OmkpLCFhLndoaWNoJiZoIT09YiYmKGEud2hpY2g9aCYxPzE6aCYyPzM6aCY0PzI6MCk7cmV0dXJuIGF9fSxmaXg6ZnVuY3Rpb24oYSl7aWYoYVtmLmV4cGFuZG9dKXJldHVybiBhO3ZhciBkLGUsZz1hLGg9Zi5ldmVudC5maXhIb29rc1thLnR5cGVdfHx7fSxpPWgucHJvcHM/dGhpcy5wcm9wcy5jb25jYXQoaC5wcm9wcyk6dGhpcy5wcm9wczthPWYuRXZlbnQoZyk7Zm9yKGQ9aS5sZW5ndGg7ZDspZT1pWy0tZF0sYVtlXT1nW2VdO2EudGFyZ2V0fHwoYS50YXJnZXQ9Zy5zcmNFbGVtZW50fHxjKSxhLnRhcmdldC5ub2RlVHlwZT09PTMmJihhLnRhcmdldD1hLnRhcmdldC5wYXJlbnROb2RlKSxhLm1ldGFLZXk9PT1iJiYoYS5tZXRhS2V5PWEuY3RybEtleSk7cmV0dXJuIGguZmlsdGVyP2guZmlsdGVyKGEsZyk6YX0sc3BlY2lhbDp7cmVhZHk6e3NldHVwOmYuYmluZFJlYWR5fSxsb2FkOntub0J1YmJsZTohMH0sZm9jdXM6e2RlbGVnYXRlVHlwZToiZm9jdXNpbiJ9LGJsdXI6e2RlbGVnYXRlVHlwZToiZm9jdXNvdXQifSxiZWZvcmV1bmxvYWQ6e3NldHVwOmZ1bmN0aW9uKGEsYixjKXtmLmlzV2luZG93KHRoaXMpJiYodGhpcy5vbmJlZm9yZXVubG9hZD1jKX0sdGVhcmRvd246ZnVuY3Rpb24oYSxiKXt0aGlzLm9uYmVmb3JldW5sb2FkPT09YiYmKHRoaXMub25iZWZvcmV1bmxvYWQ9bnVsbCl9fX0sc2ltdWxhdGU6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9Zi5leHRlbmQobmV3IGYuRXZlbnQsYyx7dHlwZTphLGlzU2ltdWxhdGVkOiEwLG9yaWdpbmFsRXZlbnQ6e319KTtkP2YuZXZlbnQudHJpZ2dlcihlLG51bGwsYik6Zi5ldmVudC5kaXNwYXRjaC5jYWxsKGIsZSksZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmYy5wcmV2ZW50RGVmYXVsdCgpfX0sZi5ldmVudC5oYW5kbGU9Zi5ldmVudC5kaXNwYXRjaCxmLnJlbW92ZUV2ZW50PWMucmVtb3ZlRXZlbnRMaXN0ZW5lcj9mdW5jdGlvbihhLGIsYyl7YS5yZW1vdmVFdmVudExpc3RlbmVyJiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoYixjLCExKX06ZnVuY3Rpb24oYSxiLGMpe2EuZGV0YWNoRXZlbnQmJmEuZGV0YWNoRXZlbnQoIm9uIitiLGMpfSxmLkV2ZW50PWZ1bmN0aW9uKGEsYil7aWYoISh0aGlzIGluc3RhbmNlb2YgZi5FdmVudCkpcmV0dXJuIG5ldyBmLkV2ZW50KGEsYik7YSYmYS50eXBlPyh0aGlzLm9yaWdpbmFsRXZlbnQ9YSx0aGlzLnR5cGU9YS50eXBlLHRoaXMuaXNEZWZhdWx0UHJldmVudGVkPWEuZGVmYXVsdFByZXZlbnRlZHx8YS5yZXR1cm5WYWx1ZT09PSExfHxhLmdldFByZXZlbnREZWZhdWx0JiZhLmdldFByZXZlbnREZWZhdWx0KCk/SzpKKTp0aGlzLnR5cGU9YSxiJiZmLmV4dGVuZCh0aGlzLGIpLHRoaXMudGltZVN0YW1wPWEmJmEudGltZVN0YW1wfHxmLm5vdygpLHRoaXNbZi5leHBhbmRvXT0hMH0sZi5FdmVudC5wcm90b3R5cGU9e3ByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9Szt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7IWF8fChhLnByZXZlbnREZWZhdWx0P2EucHJldmVudERlZmF1bHQoKTphLnJldHVyblZhbHVlPSExKX0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1LO3ZhciBhPXRoaXMub3JpZ2luYWxFdmVudDshYXx8KGEuc3RvcFByb3BhZ2F0aW9uJiZhLnN0b3BQcm9wYWdhdGlvbigpLGEuY2FuY2VsQnViYmxlPSEwKX0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD1LLHRoaXMuc3RvcFByb3BhZ2F0aW9uKCl9LGlzRGVmYXVsdFByZXZlbnRlZDpKLGlzUHJvcGFnYXRpb25TdG9wcGVkOkosaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6Sn0sZi5lYWNoKHttb3VzZWVudGVyOiJtb3VzZW92ZXIiLG1vdXNlbGVhdmU6Im1vdXNlb3V0In0sZnVuY3Rpb24oYSxiKXtmLmV2ZW50LnNwZWNpYWxbYV09e2RlbGVnYXRlVHlwZTpiLGJpbmRUeXBlOmIsaGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMsZD1hLnJlbGF0ZWRUYXJnZXQsZT1hLmhhbmRsZU9iaixnPWUuc2VsZWN0b3IsaDtpZighZHx8ZCE9PWMmJiFmLmNvbnRhaW5zKGMsZCkpYS50eXBlPWUub3JpZ1R5cGUsaD1lLmhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpLGEudHlwZT1iO3JldHVybiBofX19KSxmLnN1cHBvcnQuc3VibWl0QnViYmxlc3x8KGYuZXZlbnQuc3BlY2lhbC5zdWJtaXQ9e3NldHVwOmZ1bmN0aW9uKCl7aWYoZi5ub2RlTmFtZSh0aGlzLCJmb3JtIikpcmV0dXJuITE7Zi5ldmVudC5hZGQodGhpcywiY2xpY2suX3N1Ym1pdCBrZXlwcmVzcy5fc3VibWl0IixmdW5jdGlvbihhKXt2YXIgYz1hLnRhcmdldCxkPWYubm9kZU5hbWUoYywiaW5wdXQiKXx8Zi5ub2RlTmFtZShjLCJidXR0b24iKT9jLmZvcm06YjtkJiYhZC5fc3VibWl0X2F0dGFjaGVkJiYoZi5ldmVudC5hZGQoZCwic3VibWl0Ll9zdWJtaXQiLGZ1bmN0aW9uKGEpe2EuX3N1Ym1pdF9idWJibGU9ITB9KSxkLl9zdWJtaXRfYXR0YWNoZWQ9ITApfSl9LHBvc3REaXNwYXRjaDpmdW5jdGlvbihhKXthLl9zdWJtaXRfYnViYmxlJiYoZGVsZXRlIGEuX3N1Ym1pdF9idWJibGUsdGhpcy5wYXJlbnROb2RlJiYhYS5pc1RyaWdnZXImJmYuZXZlbnQuc2ltdWxhdGUoInN1Ym1pdCIsdGhpcy5wYXJlbnROb2RlLGEsITApKX0sdGVhcmRvd246ZnVuY3Rpb24oKXtpZihmLm5vZGVOYW1lKHRoaXMsImZvcm0iKSlyZXR1cm4hMTtmLmV2ZW50LnJlbW92ZSh0aGlzLCIuX3N1Ym1pdCIpfX0pLGYuc3VwcG9ydC5jaGFuZ2VCdWJibGVzfHwoZi5ldmVudC5zcGVjaWFsLmNoYW5nZT17c2V0dXA6ZnVuY3Rpb24oKXtpZih6LnRlc3QodGhpcy5ub2RlTmFtZSkpe2lmKHRoaXMudHlwZT09PSJjaGVja2JveCJ8fHRoaXMudHlwZT09PSJyYWRpbyIpZi5ldmVudC5hZGQodGhpcywicHJvcGVydHljaGFuZ2UuX2NoYW5nZSIsZnVuY3Rpb24oYSl7YS5vcmlnaW5hbEV2ZW50LnByb3BlcnR5TmFtZT09PSJjaGVja2VkIiYmKHRoaXMuX2p1c3RfY2hhbmdlZD0hMCl9KSxmLmV2ZW50LmFkZCh0aGlzLCJjbGljay5fY2hhbmdlIixmdW5jdGlvbihhKXt0aGlzLl9qdXN0X2NoYW5nZWQmJiFhLmlzVHJpZ2dlciYmKHRoaXMuX2p1c3RfY2hhbmdlZD0hMSxmLmV2ZW50LnNpbXVsYXRlKCJjaGFuZ2UiLHRoaXMsYSwhMCkpfSk7cmV0dXJuITF9Zi5ldmVudC5hZGQodGhpcywiYmVmb3JlYWN0aXZhdGUuX2NoYW5nZSIsZnVuY3Rpb24oYSl7dmFyIGI9YS50YXJnZXQ7ei50ZXN0KGIubm9kZU5hbWUpJiYhYi5fY2hhbmdlX2F0dGFjaGVkJiYoZi5ldmVudC5hZGQoYiwiY2hhbmdlLl9jaGFuZ2UiLGZ1bmN0aW9uKGEpe3RoaXMucGFyZW50Tm9kZSYmIWEuaXNTaW11bGF0ZWQmJiFhLmlzVHJpZ2dlciYmZi5ldmVudC5zaW11bGF0ZSgiY2hhbmdlIix0aGlzLnBhcmVudE5vZGUsYSwhMCl9KSxiLl9jaGFuZ2VfYXR0YWNoZWQ9ITApfSl9LGhhbmRsZTpmdW5jdGlvbihhKXt2YXIgYj1hLnRhcmdldDtpZih0aGlzIT09Ynx8YS5pc1NpbXVsYXRlZHx8YS5pc1RyaWdnZXJ8fGIudHlwZSE9PSJyYWRpbyImJmIudHlwZSE9PSJjaGVja2JveCIpcmV0dXJuIGEuaGFuZGxlT2JqLmhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpfSx0ZWFyZG93bjpmdW5jdGlvbigpe2YuZXZlbnQucmVtb3ZlKHRoaXMsIi5fY2hhbmdlIik7cmV0dXJuIHoudGVzdCh0aGlzLm5vZGVOYW1lKX19KSxmLnN1cHBvcnQuZm9jdXNpbkJ1YmJsZXN8fGYuZWFjaCh7Zm9jdXM6ImZvY3VzaW4iLGJsdXI6ImZvY3Vzb3V0In0sZnVuY3Rpb24oYSxiKXt2YXIgZD0wLGU9ZnVuY3Rpb24oYSl7Zi5ldmVudC5zaW11bGF0ZShiLGEudGFyZ2V0LGYuZXZlbnQuZml4KGEpLCEwKX07Zi5ldmVudC5zcGVjaWFsW2JdPXtzZXR1cDpmdW5jdGlvbigpe2QrKz09PTAmJmMuYWRkRXZlbnRMaXN0ZW5lcihhLGUsITApfSx0ZWFyZG93bjpmdW5jdGlvbigpey0tZD09PTAmJmMucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLGUsITApfX19KSxmLmZuLmV4dGVuZCh7b246ZnVuY3Rpb24oYSxjLGQsZSxnKXt2YXIgaCxpO2lmKHR5cGVvZiBhPT0ib2JqZWN0Iil7dHlwZW9mIGMhPSJzdHJpbmciJiYoZD1kfHxjLGM9Yik7Zm9yKGkgaW4gYSl0aGlzLm9uKGksYyxkLGFbaV0sZyk7cmV0dXJuIHRoaXN9ZD09bnVsbCYmZT09bnVsbD8oZT1jLGQ9Yz1iKTplPT1udWxsJiYodHlwZW9mIGM9PSJzdHJpbmciPyhlPWQsZD1iKTooZT1kLGQ9YyxjPWIpKTtpZihlPT09ITEpZT1KO2Vsc2UgaWYoIWUpcmV0dXJuIHRoaXM7Zz09PTEmJihoPWUsZT1mdW5jdGlvbihhKXtmKCkub2ZmKGEpO3JldHVybiBoLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZS5ndWlkPWguZ3VpZHx8KGguZ3VpZD1mLmd1aWQrKykpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtmLmV2ZW50LmFkZCh0aGlzLGEsZSxkLGMpfSl9LG9uZTpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5vbihhLGIsYyxkLDEpfSxvZmY6ZnVuY3Rpb24oYSxjLGQpe2lmKGEmJmEucHJldmVudERlZmF1bHQmJmEuaGFuZGxlT2JqKXt2YXIgZT1hLmhhbmRsZU9iajtmKGEuZGVsZWdhdGVUYXJnZXQpLm9mZihlLm5hbWVzcGFjZT9lLm9yaWdUeXBlKyIuIitlLm5hbWVzcGFjZTplLm9yaWdUeXBlLGUuc2VsZWN0b3IsZS5oYW5kbGVyKTtyZXR1cm4gdGhpc31pZih0eXBlb2YgYT09Im9iamVjdCIpe2Zvcih2YXIgZyBpbiBhKXRoaXMub2ZmKGcsYyxhW2ddKTtyZXR1cm4gdGhpc31pZihjPT09ITF8fHR5cGVvZiBjPT0iZnVuY3Rpb24iKWQ9YyxjPWI7ZD09PSExJiYoZD1KKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Zi5ldmVudC5yZW1vdmUodGhpcyxhLGQsYyl9KX0sYmluZDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHRoaXMub24oYSxudWxsLGIsYyl9LHVuYmluZDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm9mZihhLG51bGwsYil9LGxpdmU6ZnVuY3Rpb24oYSxiLGMpe2YodGhpcy5jb250ZXh0KS5vbihhLHRoaXMuc2VsZWN0b3IsYixjKTtyZXR1cm4gdGhpc30sZGllOmZ1bmN0aW9uKGEsYil7Zih0aGlzLmNvbnRleHQpLm9mZihhLHRoaXMuc2VsZWN0b3J8fCIqKiIsYik7cmV0dXJuIHRoaXN9LGRlbGVnYXRlOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLm9uKGIsYSxjLGQpfSx1bmRlbGVnYXRlOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD09MT90aGlzLm9mZihhLCIqKiIpOnRoaXMub2ZmKGIsYSxjKX0sdHJpZ2dlcjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtmLmV2ZW50LnRyaWdnZXIoYSxiLHRoaXMpfSl9LHRyaWdnZXJIYW5kbGVyOmZ1bmN0aW9uKGEsYil7aWYodGhpc1swXSlyZXR1cm4gZi5ldmVudC50cmlnZ2VyKGEsYix0aGlzWzBdLCEwKX0sdG9nZ2xlOmZ1bmN0aW9uKGEpe3ZhciBiPWFyZ3VtZW50cyxjPWEuZ3VpZHx8Zi5ndWlkKyssZD0wLGU9ZnVuY3Rpb24oYyl7dmFyIGU9KGYuX2RhdGEodGhpcywibGFzdFRvZ2dsZSIrYS5ndWlkKXx8MCklZDtmLl9kYXRhKHRoaXMsImxhc3RUb2dnbGUiK2EuZ3VpZCxlKzEpLGMucHJldmVudERlZmF1bHQoKTtyZXR1cm4gYltlXS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fCExfTtlLmd1aWQ9Yzt3aGlsZShkPGIubGVuZ3RoKWJbZCsrXS5ndWlkPWM7cmV0dXJuIHRoaXMuY2xpY2soZSl9LGhvdmVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMubW91c2VlbnRlcihhKS5tb3VzZWxlYXZlKGJ8fGEpfX0pLGYuZWFjaCgiYmx1ciBmb2N1cyBmb2N1c2luIGZvY3Vzb3V0IGxvYWQgcmVzaXplIHNjcm9sbCB1bmxvYWQgY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBlcnJvciBjb250ZXh0bWVudSIuc3BsaXQoIiAiKSxmdW5jdGlvbihhLGIpe2YuZm5bYl09ZnVuY3Rpb24oYSxjKXtjPT1udWxsJiYoYz1hLGE9bnVsbCk7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg+MD90aGlzLm9uKGIsbnVsbCxhLGMpOnRoaXMudHJpZ2dlcihiKX0sZi5hdHRyRm4mJihmLmF0dHJGbltiXT0hMCksQy50ZXN0KGIpJiYoZi5ldmVudC5maXhIb29rc1tiXT1mLmV2ZW50LmtleUhvb2tzKSxELnRlc3QoYikmJihmLmV2ZW50LmZpeEhvb2tzW2JdPWYuZXZlbnQubW91c2VIb29rcyl9KSxmdW5jdGlvbigpe2Z1bmN0aW9uIHgoYSxiLGMsZSxmLGcpe2Zvcih2YXIgaD0wLGk9ZS5sZW5ndGg7aDxpO2grKyl7dmFyIGo9ZVtoXTtpZihqKXt2YXIgaz0hMTtqPWpbYV07d2hpbGUoail7aWYoaltkXT09PWMpe2s9ZVtqLnNpenNldF07YnJlYWt9aWYoai5ub2RlVHlwZT09PTEpe2d8fChqW2RdPWMsai5zaXpzZXQ9aCk7aWYodHlwZW9mIGIhPSJzdHJpbmciKXtpZihqPT09Yil7az0hMDticmVha319ZWxzZSBpZihtLmZpbHRlcihiLFtqXSkubGVuZ3RoPjApe2s9ajticmVha319aj1qW2FdfWVbaF09a319fWZ1bmN0aW9uIHcoYSxiLGMsZSxmLGcpe2Zvcih2YXIgaD0wLGk9ZS5sZW5ndGg7aDxpO2grKyl7dmFyIGo9ZVtoXTtpZihqKXt2YXIgaz0hMTtqPWpbYV07d2hpbGUoail7aWYoaltkXT09PWMpe2s9ZVtqLnNpenNldF07YnJlYWt9ai5ub2RlVHlwZT09PTEmJiFnJiYoaltkXT1jLGouc2l6c2V0PWgpO2lmKGoubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWIpe2s9ajticmVha31qPWpbYV19ZVtoXT1rfX19dmFyIGE9LygoPzpcKCg/OlwoW14oKV0rXCl8W14oKV0rKStcKXxcWyg/OlxbW15cW1xdXSpcXXxbJyJdW14nIl0qWyciXXxbXlxbXF0nIl0rKStcXXxcXC58W14gPit+LChcW1xcXSspK3xbPit+XSkoXHMqLFxzKik/KCg/Oi58XHJ8XG4pKikvZyxkPSJzaXpjYWNoZSIrKE1hdGgucmFuZG9tKCkrIiIpLnJlcGxhY2UoIi4iLCIiKSxlPTAsZz1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLGg9ITEsaT0hMCxqPS9cXC9nLGs9L1xyXG4vZyxsPS9cVy87WzAsMF0uc29ydChmdW5jdGlvbigpe2k9ITE7cmV0dXJuIDB9KTt2YXIgbT1mdW5jdGlvbihiLGQsZSxmKXtlPWV8fFtdLGQ9ZHx8Yzt2YXIgaD1kO2lmKGQubm9kZVR5cGUhPT0xJiZkLm5vZGVUeXBlIT09OSlyZXR1cm5bXTtpZighYnx8dHlwZW9mIGIhPSJzdHJpbmciKXJldHVybiBlO3ZhciBpLGosayxsLG4scSxyLHQsdT0hMCx2PW0uaXNYTUwoZCksdz1bXSx4PWI7ZG97YS5leGVjKCIiKSxpPWEuZXhlYyh4KTtpZihpKXt4PWlbM10sdy5wdXNoKGlbMV0pO2lmKGlbMl0pe2w9aVszXTticmVha319fXdoaWxlKGkpO2lmKHcubGVuZ3RoPjEmJnAuZXhlYyhiKSlpZih3Lmxlbmd0aD09PTImJm8ucmVsYXRpdmVbd1swXV0paj15KHdbMF0rd1sxXSxkLGYpO2Vsc2V7aj1vLnJlbGF0aXZlW3dbMF1dP1tkXTptKHcuc2hpZnQoKSxkKTt3aGlsZSh3Lmxlbmd0aCliPXcuc2hpZnQoKSxvLnJlbGF0aXZlW2JdJiYoYis9dy5zaGlmdCgpKSxqPXkoYixqLGYpfWVsc2V7IWYmJncubGVuZ3RoPjEmJmQubm9kZVR5cGU9PT05JiYhdiYmby5tYXRjaC5JRC50ZXN0KHdbMF0pJiYhby5tYXRjaC5JRC50ZXN0KHdbdy5sZW5ndGgtMV0pJiYobj1tLmZpbmQody5zaGlmdCgpLGQsdiksZD1uLmV4cHI/bS5maWx0ZXIobi5leHByLG4uc2V0KVswXTpuLnNldFswXSk7aWYoZCl7bj1mP3tleHByOncucG9wKCksc2V0OnMoZil9Om0uZmluZCh3LnBvcCgpLHcubGVuZ3RoPT09MSYmKHdbMF09PT0ifiJ8fHdbMF09PT0iKyIpJiZkLnBhcmVudE5vZGU/ZC5wYXJlbnROb2RlOmQsdiksaj1uLmV4cHI/bS5maWx0ZXIobi5leHByLG4uc2V0KTpuLnNldCx3Lmxlbmd0aD4wP2s9cyhqKTp1PSExO3doaWxlKHcubGVuZ3RoKXE9dy5wb3AoKSxyPXEsby5yZWxhdGl2ZVtxXT9yPXcucG9wKCk6cT0iIixyPT1udWxsJiYocj1kKSxvLnJlbGF0aXZlW3FdKGsscix2KX1lbHNlIGs9dz1bXX1rfHwoaz1qKSxrfHxtLmVycm9yKHF8fGIpO2lmKGcuY2FsbChrKT09PSJbb2JqZWN0IEFycmF5XSIpaWYoIXUpZS5wdXNoLmFwcGx5KGUsayk7ZWxzZSBpZihkJiZkLm5vZGVUeXBlPT09MSlmb3IodD0wO2tbdF0hPW51bGw7dCsrKWtbdF0mJihrW3RdPT09ITB8fGtbdF0ubm9kZVR5cGU9PT0xJiZtLmNvbnRhaW5zKGQsa1t0XSkpJiZlLnB1c2goalt0XSk7ZWxzZSBmb3IodD0wO2tbdF0hPW51bGw7dCsrKWtbdF0mJmtbdF0ubm9kZVR5cGU9PT0xJiZlLnB1c2goalt0XSk7ZWxzZSBzKGssZSk7bCYmKG0obCxoLGUsZiksbS51bmlxdWVTb3J0KGUpKTtyZXR1cm4gZX07bS51bmlxdWVTb3J0PWZ1bmN0aW9uKGEpe2lmKHUpe2g9aSxhLnNvcnQodSk7aWYoaClmb3IodmFyIGI9MTtiPGEubGVuZ3RoO2IrKylhW2JdPT09YVtiLTFdJiZhLnNwbGljZShiLS0sMSl9cmV0dXJuIGF9LG0ubWF0Y2hlcz1mdW5jdGlvbihhLGIpe3JldHVybiBtKGEsbnVsbCxudWxsLGIpfSxtLm1hdGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihhLGIpe3JldHVybiBtKGIsbnVsbCxudWxsLFthXSkubGVuZ3RoPjB9LG0uZmluZD1mdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGcsaCxpO2lmKCFhKXJldHVybltdO2ZvcihlPTAsZj1vLm9yZGVyLmxlbmd0aDtlPGY7ZSsrKXtoPW8ub3JkZXJbZV07aWYoZz1vLmxlZnRNYXRjaFtoXS5leGVjKGEpKXtpPWdbMV0sZy5zcGxpY2UoMSwxKTtpZihpLnN1YnN0cihpLmxlbmd0aC0xKSE9PSJcXCIpe2dbMV09KGdbMV18fCIiKS5yZXBsYWNlKGosIiIpLGQ9by5maW5kW2hdKGcsYixjKTtpZihkIT1udWxsKXthPWEucmVwbGFjZShvLm1hdGNoW2hdLCIiKTticmVha319fX1kfHwoZD10eXBlb2YgYi5nZXRFbGVtZW50c0J5VGFnTmFtZSE9InVuZGVmaW5lZCI/Yi5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpOltdKTtyZXR1cm57c2V0OmQsZXhwcjphfX0sbS5maWx0ZXI9ZnVuY3Rpb24oYSxjLGQsZSl7dmFyIGYsZyxoLGksaixrLGwsbixwLHE9YSxyPVtdLHM9Yyx0PWMmJmNbMF0mJm0uaXNYTUwoY1swXSk7d2hpbGUoYSYmYy5sZW5ndGgpe2ZvcihoIGluIG8uZmlsdGVyKWlmKChmPW8ubGVmdE1hdGNoW2hdLmV4ZWMoYSkpIT1udWxsJiZmWzJdKXtrPW8uZmlsdGVyW2hdLGw9ZlsxXSxnPSExLGYuc3BsaWNlKDEsMSk7aWYobC5zdWJzdHIobC5sZW5ndGgtMSk9PT0iXFwiKWNvbnRpbnVlO3M9PT1yJiYocj1bXSk7aWYoby5wcmVGaWx0ZXJbaF0pe2Y9by5wcmVGaWx0ZXJbaF0oZixzLGQscixlLHQpO2lmKCFmKWc9aT0hMDtlbHNlIGlmKGY9PT0hMCljb250aW51ZX1pZihmKWZvcihuPTA7KGo9c1tuXSkhPW51bGw7bisrKWomJihpPWsoaixmLG4scykscD1lXmksZCYmaSE9bnVsbD9wP2c9ITA6c1tuXT0hMTpwJiYoci5wdXNoKGopLGc9ITApKTtpZihpIT09Yil7ZHx8KHM9ciksYT1hLnJlcGxhY2Uoby5tYXRjaFtoXSwiIik7aWYoIWcpcmV0dXJuW107YnJlYWt9fWlmKGE9PT1xKWlmKGc9PW51bGwpbS5lcnJvcihhKTtlbHNlIGJyZWFrO3E9YX1yZXR1cm4gc30sbS5lcnJvcj1mdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246ICIrYSl9O3ZhciBuPW0uZ2V0VGV4dD1mdW5jdGlvbihhKXt2YXIgYixjLGQ9YS5ub2RlVHlwZSxlPSIiO2lmKGQpe2lmKGQ9PT0xfHxkPT09OXx8ZD09PTExKXtpZih0eXBlb2YgYS50ZXh0Q29udGVudD09InN0cmluZyIpcmV0dXJuIGEudGV4dENvbnRlbnQ7aWYodHlwZW9mIGEuaW5uZXJUZXh0PT0ic3RyaW5nIilyZXR1cm4gYS5pbm5lclRleHQucmVwbGFjZShrLCIiKTtmb3IoYT1hLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpZSs9bihhKX1lbHNlIGlmKGQ9PT0zfHxkPT09NClyZXR1cm4gYS5ub2RlVmFsdWV9ZWxzZSBmb3IoYj0wO2M9YVtiXTtiKyspYy5ub2RlVHlwZSE9PTgmJihlKz1uKGMpKTtyZXR1cm4gZX0sbz1tLnNlbGVjdG9ycz17b3JkZXI6WyJJRCIsIk5BTUUiLCJUQUciXSxtYXRjaDp7SUQ6LyMoKD86W1x3XHUwMGMwLVx1RkZGRlwtXXxcXC4pKykvLENMQVNTOi9cLigoPzpbXHdcdTAwYzAtXHVGRkZGXC1dfFxcLikrKS8sTkFNRTovXFtuYW1lPVsnIl0qKCg/Oltcd1x1MDBjMC1cdUZGRkZcLV18XFwuKSspWyciXSpcXS8sQVRUUjovXFtccyooKD86W1x3XHUwMGMwLVx1RkZGRlwtXXxcXC4pKylccyooPzooXFM/PSlccyooPzooWyciXSkoLio/KVwzfCgjPyg/Oltcd1x1MDBjMC1cdUZGRkZcLV18XFwuKSopfCl8KVxzKlxdLyxUQUc6L14oKD86W1x3XHUwMGMwLVx1RkZGRlwqXC1dfFxcLikrKS8sQ0hJTEQ6Lzoob25seXxudGh8bGFzdHxmaXJzdCktY2hpbGQoPzpcKFxzKihldmVufG9kZHwoPzpbK1wtXT9cZCt8KD86WytcLV0/XGQqKT9uXHMqKD86WytcLV1ccypcZCspPykpXHMqXCkpPy8sUE9TOi86KG50aHxlcXxndHxsdHxmaXJzdHxsYXN0fGV2ZW58b2RkKSg/OlwoKFxkKilcKSk/KD89W15cLV18JCkvLFBTRVVETzovOigoPzpbXHdcdTAwYzAtXHVGRkZGXC1dfFxcLikrKSg/OlwoKFsnIl0/KSgoPzpcKFteXCldK1wpfFteXChcKV0qKSspXDJcKSk/L30sbGVmdE1hdGNoOnt9LGF0dHJNYXA6eyJjbGFzcyI6ImNsYXNzTmFtZSIsImZvciI6Imh0bWxGb3IifSxhdHRySGFuZGxlOntocmVmOmZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZSgiaHJlZiIpfSx0eXBlOmZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZSgidHlwZSIpfX0scmVsYXRpdmU6eyIrIjpmdW5jdGlvbihhLGIpe3ZhciBjPXR5cGVvZiBiPT0ic3RyaW5nIixkPWMmJiFsLnRlc3QoYiksZT1jJiYhZDtkJiYoYj1iLnRvTG93ZXJDYXNlKCkpO2Zvcih2YXIgZj0wLGc9YS5sZW5ndGgsaDtmPGc7ZisrKWlmKGg9YVtmXSl7d2hpbGUoKGg9aC5wcmV2aW91c1NpYmxpbmcpJiZoLm5vZGVUeXBlIT09MSk7YVtmXT1lfHxoJiZoLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1iP2h8fCExOmg9PT1ifWUmJm0uZmlsdGVyKGIsYSwhMCl9LCI+IjpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9dHlwZW9mIGI9PSJzdHJpbmciLGU9MCxmPWEubGVuZ3RoO2lmKGQmJiFsLnRlc3QoYikpe2I9Yi50b0xvd2VyQ2FzZSgpO2Zvcig7ZTxmO2UrKyl7Yz1hW2VdO2lmKGMpe3ZhciBnPWMucGFyZW50Tm9kZTthW2VdPWcubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWI/ZzohMX19fWVsc2V7Zm9yKDtlPGY7ZSsrKWM9YVtlXSxjJiYoYVtlXT1kP2MucGFyZW50Tm9kZTpjLnBhcmVudE5vZGU9PT1iKTtkJiZtLmZpbHRlcihiLGEsITApfX0sIiI6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGY9ZSsrLGc9eDt0eXBlb2YgYj09InN0cmluZyImJiFsLnRlc3QoYikmJihiPWIudG9Mb3dlckNhc2UoKSxkPWIsZz13KSxnKCJwYXJlbnROb2RlIixiLGYsYSxkLGMpfSwifiI6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGY9ZSsrLGc9eDt0eXBlb2YgYj09InN0cmluZyImJiFsLnRlc3QoYikmJihiPWIudG9Mb3dlckNhc2UoKSxkPWIsZz13KSxnKCJwcmV2aW91c1NpYmxpbmciLGIsZixhLGQsYyl9fSxmaW5kOntJRDpmdW5jdGlvbihhLGIsYyl7aWYodHlwZW9mIGIuZ2V0RWxlbWVudEJ5SWQhPSJ1bmRlZmluZWQiJiYhYyl7dmFyIGQ9Yi5nZXRFbGVtZW50QnlJZChhWzFdKTtyZXR1cm4gZCYmZC5wYXJlbnROb2RlP1tkXTpbXX19LE5BTUU6ZnVuY3Rpb24oYSxiKXtpZih0eXBlb2YgYi5nZXRFbGVtZW50c0J5TmFtZSE9InVuZGVmaW5lZCIpe3ZhciBjPVtdLGQ9Yi5nZXRFbGVtZW50c0J5TmFtZShhWzFdKTtmb3IodmFyIGU9MCxmPWQubGVuZ3RoO2U8ZjtlKyspZFtlXS5nZXRBdHRyaWJ1dGUoIm5hbWUiKT09PWFbMV0mJmMucHVzaChkW2VdKTtyZXR1cm4gYy5sZW5ndGg9PT0wP251bGw6Y319LFRBRzpmdW5jdGlvbihhLGIpe2lmKHR5cGVvZiBiLmdldEVsZW1lbnRzQnlUYWdOYW1lIT0idW5kZWZpbmVkIilyZXR1cm4gYi5nZXRFbGVtZW50c0J5VGFnTmFtZShhWzFdKX19LHByZUZpbHRlcjp7Q0xBU1M6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe2E9IiAiK2FbMV0ucmVwbGFjZShqLCIiKSsiICI7aWYoZilyZXR1cm4gYTtmb3IodmFyIGc9MCxoOyhoPWJbZ10pIT1udWxsO2crKyloJiYoZV4oaC5jbGFzc05hbWUmJigiICIraC5jbGFzc05hbWUrIiAiKS5yZXBsYWNlKC9bXHRcblxyXS9nLCIgIikuaW5kZXhPZihhKT49MCk/Y3x8ZC5wdXNoKGgpOmMmJihiW2ddPSExKSk7cmV0dXJuITF9LElEOmZ1bmN0aW9uKGEpe3JldHVybiBhWzFdLnJlcGxhY2UoaiwiIil9LFRBRzpmdW5jdGlvbihhLGIpe3JldHVybiBhWzFdLnJlcGxhY2UoaiwiIikudG9Mb3dlckNhc2UoKX0sQ0hJTEQ6ZnVuY3Rpb24oYSl7aWYoYVsxXT09PSJudGgiKXthWzJdfHxtLmVycm9yKGFbMF0pLGFbMl09YVsyXS5yZXBsYWNlKC9eXCt8XHMqL2csIiIpO3ZhciBiPS8oLT8pKFxkKikoPzpuKFsrXC1dP1xkKikpPy8uZXhlYyhhWzJdPT09ImV2ZW4iJiYiMm4ifHxhWzJdPT09Im9kZCImJiIybisxInx8IS9cRC8udGVzdChhWzJdKSYmIjBuKyIrYVsyXXx8YVsyXSk7YVsyXT1iWzFdKyhiWzJdfHwxKS0wLGFbM109YlszXS0wfWVsc2UgYVsyXSYmbS5lcnJvcihhWzBdKTthWzBdPWUrKztyZXR1cm4gYX0sQVRUUjpmdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGc9YVsxXT1hWzFdLnJlcGxhY2UoaiwiIik7IWYmJm8uYXR0ck1hcFtnXSYmKGFbMV09by5hdHRyTWFwW2ddKSxhWzRdPShhWzRdfHxhWzVdfHwiIikucmVwbGFjZShqLCIiKSxhWzJdPT09In49IiYmKGFbNF09IiAiK2FbNF0rIiAiKTtyZXR1cm4gYX0sUFNFVURPOmZ1bmN0aW9uKGIsYyxkLGUsZil7aWYoYlsxXT09PSJub3QiKWlmKChhLmV4ZWMoYlszXSl8fCIiKS5sZW5ndGg+MXx8L15cdy8udGVzdChiWzNdKSliWzNdPW0oYlszXSxudWxsLG51bGwsYyk7ZWxzZXt2YXIgZz1tLmZpbHRlcihiWzNdLGMsZCwhMF5mKTtkfHxlLnB1c2guYXBwbHkoZSxnKTtyZXR1cm4hMX1lbHNlIGlmKG8ubWF0Y2guUE9TLnRlc3QoYlswXSl8fG8ubWF0Y2guQ0hJTEQudGVzdChiWzBdKSlyZXR1cm4hMDtyZXR1cm4gYn0sUE9TOmZ1bmN0aW9uKGEpe2EudW5zaGlmdCghMCk7cmV0dXJuIGF9fSxmaWx0ZXJzOntlbmFibGVkOmZ1bmN0aW9uKGEpe3JldHVybiBhLmRpc2FibGVkPT09ITEmJmEudHlwZSE9PSJoaWRkZW4ifSxkaXNhYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSEwfSxjaGVja2VkOmZ1bmN0aW9uKGEpe3JldHVybiBhLmNoZWNrZWQ9PT0hMH0sc2VsZWN0ZWQ6ZnVuY3Rpb24oYSl7YS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleDtyZXR1cm4gYS5zZWxlY3RlZD09PSEwfSxwYXJlbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuISFhLmZpcnN0Q2hpbGR9LGVtcHR5OmZ1bmN0aW9uKGEpe3JldHVybiFhLmZpcnN0Q2hpbGR9LGhhczpmdW5jdGlvbihhLGIsYyl7cmV0dXJuISFtKGNbM10sYSkubGVuZ3RofSxoZWFkZXI6ZnVuY3Rpb24oYSl7cmV0dXJuL2hcZC9pLnRlc3QoYS5ub2RlTmFtZSl9LHRleHQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZXRBdHRyaWJ1dGUoInR5cGUiKSxjPWEudHlwZTtyZXR1cm4gYS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09ImlucHV0IiYmInRleHQiPT09YyYmKGI9PT1jfHxiPT09bnVsbCl9LHJhZGlvOmZ1bmN0aW9uKGEpe3JldHVybiBhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT0iaW5wdXQiJiYicmFkaW8iPT09YS50eXBlfSxjaGVja2JveDpmdW5jdGlvbihhKXtyZXR1cm4gYS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09ImlucHV0IiYmImNoZWNrYm94Ij09PWEudHlwZX0sZmlsZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09ImlucHV0IiYmImZpbGUiPT09YS50eXBlfSxwYXNzd29yZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09ImlucHV0IiYmInBhc3N3b3JkIj09PWEudHlwZX0sc3VibWl0OmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4oYj09PSJpbnB1dCJ8fGI9PT0iYnV0dG9uIikmJiJzdWJtaXQiPT09YS50eXBlfSxpbWFnZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09ImlucHV0IiYmImltYWdlIj09PWEudHlwZX0scmVzZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybihiPT09ImlucHV0Inx8Yj09PSJidXR0b24iKSYmInJlc2V0Ij09PWEudHlwZX0sYnV0dG9uOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4gYj09PSJpbnB1dCImJiJidXR0b24iPT09YS50eXBlfHxiPT09ImJ1dHRvbiJ9LGlucHV0OmZ1bmN0aW9uKGEpe3JldHVybi9pbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uL2kudGVzdChhLm5vZGVOYW1lKX0sZm9jdXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1hLm93bmVyRG9jdW1lbnQuYWN0aXZlRWxlbWVudH19LHNldEZpbHRlcnM6e2ZpcnN0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGI9PT0wfSxsYXN0OmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBiPT09ZC5sZW5ndGgtMX0sZXZlbjpmdW5jdGlvbihhLGIpe3JldHVybiBiJTI9PT0wfSxvZGQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYiUyPT09MX0sbHQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBiPGNbM10tMH0sZ3Q6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBiPmNbM10tMH0sbnRoOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gY1szXS0wPT09Yn0sZXE6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBjWzNdLTA9PT1ifX0sZmlsdGVyOntQU0VVRE86ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9YlsxXSxmPW8uZmlsdGVyc1tlXTtpZihmKXJldHVybiBmKGEsYyxiLGQpO2lmKGU9PT0iY29udGFpbnMiKXJldHVybihhLnRleHRDb250ZW50fHxhLmlubmVyVGV4dHx8bihbYV0pfHwiIikuaW5kZXhPZihiWzNdKT49MDtpZihlPT09Im5vdCIpe3ZhciBnPWJbM107Zm9yKHZhciBoPTAsaT1nLmxlbmd0aDtoPGk7aCsrKWlmKGdbaF09PT1hKXJldHVybiExO3JldHVybiEwfW0uZXJyb3IoZSl9LENISUxEOmZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmLGcsaCxpLGosaz1iWzFdLGw9YTtzd2l0Y2goayl7Y2FzZSJvbmx5IjpjYXNlImZpcnN0Ijp3aGlsZShsPWwucHJldmlvdXNTaWJsaW5nKWlmKGwubm9kZVR5cGU9PT0xKXJldHVybiExO2lmKGs9PT0iZmlyc3QiKXJldHVybiEwO2w9YTtjYXNlImxhc3QiOndoaWxlKGw9bC5uZXh0U2libGluZylpZihsLm5vZGVUeXBlPT09MSlyZXR1cm4hMTtyZXR1cm4hMDtjYXNlIm50aCI6Yz1iWzJdLGU9YlszXTtpZihjPT09MSYmZT09PTApcmV0dXJuITA7Zj1iWzBdLGc9YS5wYXJlbnROb2RlO2lmKGcmJihnW2RdIT09Znx8IWEubm9kZUluZGV4KSl7aT0wO2ZvcihsPWcuZmlyc3RDaGlsZDtsO2w9bC5uZXh0U2libGluZylsLm5vZGVUeXBlPT09MSYmKGwubm9kZUluZGV4PSsraSk7Z1tkXT1mfWo9YS5ub2RlSW5kZXgtZTtyZXR1cm4gYz09PTA/aj09PTA6aiVjPT09MCYmai9jPj0wfX0sSUQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5ub2RlVHlwZT09PTEmJmEuZ2V0QXR0cmlidXRlKCJpZCIpPT09Yn0sVEFHOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGI9PT0iKiImJmEubm9kZVR5cGU9PT0xfHwhIWEubm9kZU5hbWUmJmEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWJ9LENMQVNTOmZ1bmN0aW9uKGEsYil7cmV0dXJuKCIgIisoYS5jbGFzc05hbWV8fGEuZ2V0QXR0cmlidXRlKCJjbGFzcyIpKSsiICIpLmluZGV4T2YoYik+LTF9LEFUVFI6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iWzFdLGQ9bS5hdHRyP20uYXR0cihhLGMpOm8uYXR0ckhhbmRsZVtjXT9vLmF0dHJIYW5kbGVbY10oYSk6YVtjXSE9bnVsbD9hW2NdOmEuZ2V0QXR0cmlidXRlKGMpLGU9ZCsiIixmPWJbMl0sZz1iWzRdO3JldHVybiBkPT1udWxsP2Y9PT0iIT0iOiFmJiZtLmF0dHI/ZCE9bnVsbDpmPT09Ij0iP2U9PT1nOmY9PT0iKj0iP2UuaW5kZXhPZihnKT49MDpmPT09In49Ij8oIiAiK2UrIiAiKS5pbmRleE9mKGcpPj0wOmc/Zj09PSIhPSI/ZSE9PWc6Zj09PSJePSI/ZS5pbmRleE9mKGcpPT09MDpmPT09IiQ9Ij9lLnN1YnN0cihlLmxlbmd0aC1nLmxlbmd0aCk9PT1nOmY9PT0ifD0iP2U9PT1nfHxlLnN1YnN0cigwLGcubGVuZ3RoKzEpPT09ZysiLSI6ITE6ZSYmZCE9PSExfSxQT1M6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9YlsyXSxmPW8uc2V0RmlsdGVyc1tlXTtpZihmKXJldHVybiBmKGEsYyxiLGQpfX19LHA9by5tYXRjaC5QT1MscT1mdW5jdGlvbihhLGIpe3JldHVybiJcXCIrKGItMCsxKX07Zm9yKHZhciByIGluIG8ubWF0Y2gpby5tYXRjaFtyXT1uZXcgUmVnRXhwKG8ubWF0Y2hbcl0uc291cmNlKy8oPyFbXlxbXSpcXSkoPyFbXlwoXSpcKSkvLnNvdXJjZSksby5sZWZ0TWF0Y2hbcl09bmV3IFJlZ0V4cCgvKF4oPzoufFxyfFxuKSo/KS8uc291cmNlK28ubWF0Y2hbcl0uc291cmNlLnJlcGxhY2UoL1xcKFxkKykvZyxxKSk7by5tYXRjaC5nbG9iYWxQT1M9cDt2YXIgcz1mdW5jdGlvbihhLGIpe2E9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYSwwKTtpZihiKXtiLnB1c2guYXBwbHkoYixhKTtyZXR1cm4gYn1yZXR1cm4gYX07dHJ5e0FycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGMuZG9jdW1lbnRFbGVtZW50LmNoaWxkTm9kZXMsMClbMF0ubm9kZVR5cGV9Y2F0Y2godCl7cz1mdW5jdGlvbihhLGIpe3ZhciBjPTAsZD1ifHxbXTtpZihnLmNhbGwoYSk9PT0iW29iamVjdCBBcnJheV0iKUFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGQsYSk7ZWxzZSBpZih0eXBlb2YgYS5sZW5ndGg9PSJudW1iZXIiKWZvcih2YXIgZT1hLmxlbmd0aDtjPGU7YysrKWQucHVzaChhW2NdKTtlbHNlIGZvcig7YVtjXTtjKyspZC5wdXNoKGFbY10pO3JldHVybiBkfX12YXIgdSx2O2MuZG9jdW1lbnRFbGVtZW50LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uP3U9ZnVuY3Rpb24oYSxiKXtpZihhPT09Yil7aD0hMDtyZXR1cm4gMH1pZighYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbnx8IWIuY29tcGFyZURvY3VtZW50UG9zaXRpb24pcmV0dXJuIGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24/LTE6MTtyZXR1cm4gYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihiKSY0Py0xOjF9Oih1PWZ1bmN0aW9uKGEsYil7aWYoYT09PWIpe2g9ITA7cmV0dXJuIDB9aWYoYS5zb3VyY2VJbmRleCYmYi5zb3VyY2VJbmRleClyZXR1cm4gYS5zb3VyY2VJbmRleC1iLnNvdXJjZUluZGV4O3ZhciBjLGQsZT1bXSxmPVtdLGc9YS5wYXJlbnROb2RlLGk9Yi5wYXJlbnROb2RlLGo9ZztpZihnPT09aSlyZXR1cm4gdihhLGIpO2lmKCFnKXJldHVybi0xO2lmKCFpKXJldHVybiAxO3doaWxlKGopZS51bnNoaWZ0KGopLGo9ai5wYXJlbnROb2RlO2o9aTt3aGlsZShqKWYudW5zaGlmdChqKSxqPWoucGFyZW50Tm9kZTtjPWUubGVuZ3RoLGQ9Zi5sZW5ndGg7Zm9yKHZhciBrPTA7azxjJiZrPGQ7aysrKWlmKGVba10hPT1mW2tdKXJldHVybiB2KGVba10sZltrXSk7cmV0dXJuIGs9PT1jP3YoYSxmW2tdLC0xKTp2KGVba10sYiwxKX0sdj1mdW5jdGlvbihhLGIsYyl7aWYoYT09PWIpcmV0dXJuIGM7dmFyIGQ9YS5uZXh0U2libGluZzt3aGlsZShkKXtpZihkPT09YilyZXR1cm4tMTtkPWQubmV4dFNpYmxpbmd9cmV0dXJuIDF9KSxmdW5jdGlvbigpe3ZhciBhPWMuY3JlYXRlRWxlbWVudCgiZGl2IiksZD0ic2NyaXB0IisobmV3IERhdGUpLmdldFRpbWUoKSxlPWMuZG9jdW1lbnRFbGVtZW50O2EuaW5uZXJIVE1MPSI8YSBuYW1lPSciK2QrIicvPiIsZS5pbnNlcnRCZWZvcmUoYSxlLmZpcnN0Q2hpbGQpLGMuZ2V0RWxlbWVudEJ5SWQoZCkmJihvLmZpbmQuSUQ9ZnVuY3Rpb24oYSxjLGQpe2lmKHR5cGVvZiBjLmdldEVsZW1lbnRCeUlkIT0idW5kZWZpbmVkIiYmIWQpe3ZhciBlPWMuZ2V0RWxlbWVudEJ5SWQoYVsxXSk7cmV0dXJuIGU/ZS5pZD09PWFbMV18fHR5cGVvZiBlLmdldEF0dHJpYnV0ZU5vZGUhPSJ1bmRlZmluZWQiJiZlLmdldEF0dHJpYnV0ZU5vZGUoImlkIikubm9kZVZhbHVlPT09YVsxXT9bZV06YjpbXX19LG8uZmlsdGVyLklEPWZ1bmN0aW9uKGEsYil7dmFyIGM9dHlwZW9mIGEuZ2V0QXR0cmlidXRlTm9kZSE9InVuZGVmaW5lZCImJmEuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTtyZXR1cm4gYS5ub2RlVHlwZT09PTEmJmMmJmMubm9kZVZhbHVlPT09Yn0pLGUucmVtb3ZlQ2hpbGQoYSksZT1hPW51bGx9KCksZnVuY3Rpb24oKXt2YXIgYT1jLmNyZWF0ZUVsZW1lbnQoImRpdiIpO2EuYXBwZW5kQ2hpbGQoYy5jcmVhdGVDb21tZW50KCIiKSksYS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpLmxlbmd0aD4wJiYoby5maW5kLlRBRz1mdW5jdGlvbihhLGIpe3ZhciBjPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYVsxXSk7aWYoYVsxXT09PSIqIil7dmFyIGQ9W107Zm9yKHZhciBlPTA7Y1tlXTtlKyspY1tlXS5ub2RlVHlwZT09PTEmJmQucHVzaChjW2VdKTtjPWR9cmV0dXJuIGN9KSxhLmlubmVySFRNTD0iPGEgaHJlZj0nIyc+PC9hPiIsYS5maXJzdENoaWxkJiZ0eXBlb2YgYS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSE9InVuZGVmaW5lZCImJmEuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoImhyZWYiKSE9PSIjIiYmKG8uYXR0ckhhbmRsZS5ocmVmPWZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZSgiaHJlZiIsMil9KSxhPW51bGx9KCksYy5xdWVyeVNlbGVjdG9yQWxsJiZmdW5jdGlvbigpe3ZhciBhPW0sYj1jLmNyZWF0ZUVsZW1lbnQoImRpdiIpLGQ9Il9fc2l6emxlX18iO2IuaW5uZXJIVE1MPSI8cCBjbGFzcz0nVEVTVCc+PC9wPiI7aWYoIWIucXVlcnlTZWxlY3RvckFsbHx8Yi5xdWVyeVNlbGVjdG9yQWxsKCIuVEVTVCIpLmxlbmd0aCE9PTApe209ZnVuY3Rpb24oYixlLGYsZyl7ZT1lfHxjO2lmKCFnJiYhbS5pc1hNTChlKSl7dmFyIGg9L14oXHcrJCl8XlwuKFtcd1wtXSskKXxeIyhbXHdcLV0rJCkvLmV4ZWMoYik7aWYoaCYmKGUubm9kZVR5cGU9PT0xfHxlLm5vZGVUeXBlPT09OSkpe2lmKGhbMV0pcmV0dXJuIHMoZS5nZXRFbGVtZW50c0J5VGFnTmFtZShiKSxmKTtpZihoWzJdJiZvLmZpbmQuQ0xBU1MmJmUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSlyZXR1cm4gcyhlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoaFsyXSksZil9aWYoZS5ub2RlVHlwZT09PTkpe2lmKGI9PT0iYm9keSImJmUuYm9keSlyZXR1cm4gcyhbZS5ib2R5XSxmKTtpZihoJiZoWzNdKXt2YXIgaT1lLmdldEVsZW1lbnRCeUlkKGhbM10pO2lmKCFpfHwhaS5wYXJlbnROb2RlKXJldHVybiBzKFtdLGYpO2lmKGkuaWQ9PT1oWzNdKXJldHVybiBzKFtpXSxmKX10cnl7cmV0dXJuIHMoZS5xdWVyeVNlbGVjdG9yQWxsKGIpLGYpfWNhdGNoKGope319ZWxzZSBpZihlLm5vZGVUeXBlPT09MSYmZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIT09Im9iamVjdCIpe3ZhciBrPWUsbD1lLmdldEF0dHJpYnV0ZSgiaWQiKSxuPWx8fGQscD1lLnBhcmVudE5vZGUscT0vXlxzKlsrfl0vLnRlc3QoYik7bD9uPW4ucmVwbGFjZSgvJy9nLCJcXCQmIik6ZS5zZXRBdHRyaWJ1dGUoImlkIixuKSxxJiZwJiYoZT1lLnBhcmVudE5vZGUpO3RyeXtpZighcXx8cClyZXR1cm4gcyhlLnF1ZXJ5U2VsZWN0b3JBbGwoIltpZD0nIituKyInXSAiK2IpLGYpfWNhdGNoKHIpe31maW5hbGx5e2x8fGsucmVtb3ZlQXR0cmlidXRlKCJpZCIpfX19cmV0dXJuIGEoYixlLGYsZyl9O2Zvcih2YXIgZSBpbiBhKW1bZV09YVtlXTtiPW51bGx9fSgpLGZ1bmN0aW9uKCl7dmFyIGE9Yy5kb2N1bWVudEVsZW1lbnQsYj1hLm1hdGNoZXNTZWxlY3Rvcnx8YS5tb3pNYXRjaGVzU2VsZWN0b3J8fGEud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxhLm1zTWF0Y2hlc1NlbGVjdG9yO2lmKGIpe3ZhciBkPSFiLmNhbGwoYy5jcmVhdGVFbGVtZW50KCJkaXYiKSwiZGl2IiksZT0hMTt0cnl7Yi5jYWxsKGMuZG9jdW1lbnRFbGVtZW50LCJbdGVzdCE9JyddOnNpenpsZSIpfWNhdGNoKGYpe2U9ITB9bS5tYXRjaGVzU2VsZWN0b3I9ZnVuY3Rpb24oYSxjKXtjPWMucmVwbGFjZSgvXD1ccyooW14nIlxdXSopXHMqXF0vZywiPSckMSddIik7aWYoIW0uaXNYTUwoYSkpdHJ5e2lmKGV8fCFvLm1hdGNoLlBTRVVETy50ZXN0KGMpJiYhLyE9Ly50ZXN0KGMpKXt2YXIgZj1iLmNhbGwoYSxjKTtpZihmfHwhZHx8YS5kb2N1bWVudCYmYS5kb2N1bWVudC5ub2RlVHlwZSE9PTExKXJldHVybiBmfX1jYXRjaChnKXt9cmV0dXJuIG0oYyxudWxsLG51bGwsW2FdKS5sZW5ndGg+MH19fSgpLGZ1bmN0aW9uKCl7dmFyIGE9Yy5jcmVhdGVFbGVtZW50KCJkaXYiKTthLmlubmVySFRNTD0iPGRpdiBjbGFzcz0ndGVzdCBlJz48L2Rpdj48ZGl2IGNsYXNzPSd0ZXN0Jz48L2Rpdj4iO2lmKCEhYS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZhLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImUiKS5sZW5ndGghPT0wKXthLmxhc3RDaGlsZC5jbGFzc05hbWU9ImUiO2lmKGEuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiZSIpLmxlbmd0aD09PTEpcmV0dXJuO28ub3JkZXIuc3BsaWNlKDEsMCwiQ0xBU1MiKSxvLmZpbmQuQ0xBU1M9ZnVuY3Rpb24oYSxiLGMpe2lmKHR5cGVvZiBiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUhPSJ1bmRlZmluZWQiJiYhYylyZXR1cm4gYi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGFbMV0pfSxhPW51bGx9fSgpLGMuZG9jdW1lbnRFbGVtZW50LmNvbnRhaW5zP20uY29udGFpbnM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSE9PWImJihhLmNvbnRhaW5zP2EuY29udGFpbnMoYik6ITApfTpjLmRvY3VtZW50RWxlbWVudC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbj9tLmNvbnRhaW5zPWZ1bmN0aW9uKGEsYil7cmV0dXJuISEoYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihiKSYxNil9Om0uY29udGFpbnM9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sbS5pc1hNTD1mdW5jdGlvbihhKXt2YXIgYj0oYT9hLm93bmVyRG9jdW1lbnR8fGE6MCkuZG9jdW1lbnRFbGVtZW50O3JldHVybiBiP2Iubm9kZU5hbWUhPT0iSFRNTCI6ITF9O3ZhciB5PWZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlPVtdLGY9IiIsZz1iLm5vZGVUeXBlP1tiXTpiO3doaWxlKGQ9by5tYXRjaC5QU0VVRE8uZXhlYyhhKSlmKz1kWzBdLGE9YS5yZXBsYWNlKG8ubWF0Y2guUFNFVURPLCIiKTthPW8ucmVsYXRpdmVbYV0/YSsiKiI6YTtmb3IodmFyIGg9MCxpPWcubGVuZ3RoO2g8aTtoKyspbShhLGdbaF0sZSxjKTtyZXR1cm4gbS5maWx0ZXIoZixlKX07bS5hdHRyPWYuYXR0cixtLnNlbGVjdG9ycy5hdHRyTWFwPXt9LGYuZmluZD1tLGYuZXhwcj1tLnNlbGVjdG9ycyxmLmV4cHJbIjoiXT1mLmV4cHIuZmlsdGVycyxmLnVuaXF1ZT1tLnVuaXF1ZVNvcnQsZi50ZXh0PW0uZ2V0VGV4dCxmLmlzWE1MRG9jPW0uaXNYTUwsZi5jb250YWlucz1tLmNvbnRhaW5zfSgpO3ZhciBMPS9VbnRpbCQvLE09L14oPzpwYXJlbnRzfHByZXZVbnRpbHxwcmV2QWxsKS8sTj0vLC8sTz0vXi5bXjojXFtcLixdKiQvLFA9QXJyYXkucHJvdG90eXBlLnNsaWNlLFE9Zi5leHByLm1hdGNoLmdsb2JhbFBPUyxSPXtjaGlsZHJlbjohMCxjb250ZW50czohMCxuZXh0OiEwLHByZXY6ITB9O2YuZm4uZXh0ZW5kKHtmaW5kOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYyxkO2lmKHR5cGVvZiBhIT0ic3RyaW5nIilyZXR1cm4gZihhKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IoYz0wLGQ9Yi5sZW5ndGg7YzxkO2MrKylpZihmLmNvbnRhaW5zKGJbY10sdGhpcykpcmV0dXJuITB9KTt2YXIgZT10aGlzLnB1c2hTdGFjaygiIiwiZmluZCIsYSksZyxoLGk7Zm9yKGM9MCxkPXRoaXMubGVuZ3RoO2M8ZDtjKyspe2c9ZS5sZW5ndGgsZi5maW5kKGEsdGhpc1tjXSxlKTtpZihjPjApZm9yKGg9ZztoPGUubGVuZ3RoO2grKylmb3IoaT0wO2k8ZztpKyspaWYoZVtpXT09PWVbaF0pe2Uuc3BsaWNlKGgtLSwxKTticmVha319cmV0dXJuIGV9LGhhczpmdW5jdGlvbihhKXt2YXIgYj1mKGEpO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGM9Yi5sZW5ndGg7YTxjO2ErKylpZihmLmNvbnRhaW5zKHRoaXMsYlthXSkpcmV0dXJuITB9KX0sbm90OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayhUKHRoaXMsYSwhMSksIm5vdCIsYSl9LGZpbHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soVCh0aGlzLGEsITApLCJmaWx0ZXIiLGEpfSxpczpmdW5jdGlvbihhKXtyZXR1cm4hIWEmJih0eXBlb2YgYT09InN0cmluZyI/US50ZXN0KGEpP2YoYSx0aGlzLmNvbnRleHQpLmluZGV4KHRoaXNbMF0pPj0wOmYuZmlsdGVyKGEsdGhpcykubGVuZ3RoPjA6dGhpcy5maWx0ZXIoYSkubGVuZ3RoPjApfSxjbG9zZXN0OmZ1bmN0aW9uKGEsYil7dmFyIGM9W10sZCxlLGc9dGhpc1swXTtpZihmLmlzQXJyYXkoYSkpe3ZhciBoPTE7d2hpbGUoZyYmZy5vd25lckRvY3VtZW50JiZnIT09Yil7Zm9yKGQ9MDtkPGEubGVuZ3RoO2QrKylmKGcpLmlzKGFbZF0pJiZjLnB1c2goe3NlbGVjdG9yOmFbZF0sZWxlbTpnLGxldmVsOmh9KTtnPWcucGFyZW50Tm9kZSxoKyt9cmV0dXJuIGN9dmFyIGk9US50ZXN0KGEpfHx0eXBlb2YgYSE9InN0cmluZyI/ZihhLGJ8fHRoaXMuY29udGV4dCk6MDtmb3IoZD0wLGU9dGhpcy5sZW5ndGg7ZDxlO2QrKyl7Zz10aGlzW2RdO3doaWxlKGcpe2lmKGk/aS5pbmRleChnKT4tMTpmLmZpbmQubWF0Y2hlc1NlbGVjdG9yKGcsYSkpe2MucHVzaChnKTticmVha31nPWcucGFyZW50Tm9kZTtpZighZ3x8IWcub3duZXJEb2N1bWVudHx8Zz09PWJ8fGcubm9kZVR5cGU9PT0xMSlicmVha319Yz1jLmxlbmd0aD4xP2YudW5pcXVlKGMpOmM7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGMsImNsb3Nlc3QiLGEpfSxpbmRleDpmdW5jdGlvbihhKXtpZighYSlyZXR1cm4gdGhpc1swXSYmdGhpc1swXS5wYXJlbnROb2RlP3RoaXMucHJldkFsbCgpLmxlbmd0aDotMTtpZih0eXBlb2YgYT09InN0cmluZyIpcmV0dXJuIGYuaW5BcnJheSh0aGlzWzBdLGYoYSkpO3JldHVybiBmLmluQXJyYXkoYS5qcXVlcnk/YVswXTphLHRoaXMpfSxhZGQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10eXBlb2YgYT09InN0cmluZyI/ZihhLGIpOmYubWFrZUFycmF5KGEmJmEubm9kZVR5cGU/W2FdOmEpLGQ9Zi5tZXJnZSh0aGlzLmdldCgpLGMpO3JldHVybiB0aGlzLnB1c2hTdGFjayhTKGNbMF0pfHxTKGRbMF0pP2Q6Zi51bmlxdWUoZCkpfSxhbmRTZWxmOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWRkKHRoaXMucHJldk9iamVjdCl9fSksZi5lYWNoKHtwYXJlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wYXJlbnROb2RlO3JldHVybiBiJiZiLm5vZGVUeXBlIT09MTE/YjpudWxsfSxwYXJlbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBmLmRpcihhLCJwYXJlbnROb2RlIil9LHBhcmVudHNVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGYuZGlyKGEsInBhcmVudE5vZGUiLGMpfSxuZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBmLm50aChhLDIsIm5leHRTaWJsaW5nIil9LHByZXY6ZnVuY3Rpb24oYSl7cmV0dXJuIGYubnRoKGEsMiwicHJldmlvdXNTaWJsaW5nIil9LG5leHRBbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIGYuZGlyKGEsIm5leHRTaWJsaW5nIil9LHByZXZBbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIGYuZGlyKGEsInByZXZpb3VzU2libGluZyIpfSxuZXh0VW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBmLmRpcihhLCJuZXh0U2libGluZyIsYyl9LHByZXZVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGYuZGlyKGEsInByZXZpb3VzU2libGluZyIsYyl9LHNpYmxpbmdzOmZ1bmN0aW9uKGEpe3JldHVybiBmLnNpYmxpbmcoKGEucGFyZW50Tm9kZXx8e30pLmZpcnN0Q2hpbGQsYSl9LGNoaWxkcmVuOmZ1bmN0aW9uKGEpe3JldHVybiBmLnNpYmxpbmcoYS5maXJzdENoaWxkKX0sY29udGVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGYubm9kZU5hbWUoYSwiaWZyYW1lIik/YS5jb250ZW50RG9jdW1lbnR8fGEuY29udGVudFdpbmRvdy5kb2N1bWVudDpmLm1ha2VBcnJheShhLmNoaWxkTm9kZXMpfX0sZnVuY3Rpb24oYSxiKXtmLmZuW2FdPWZ1bmN0aW9uKGMsZCl7dmFyIGU9Zi5tYXAodGhpcyxiLGMpO0wudGVzdChhKXx8KGQ9YyksZCYmdHlwZW9mIGQ9PSJzdHJpbmciJiYoZT1mLmZpbHRlcihkLGUpKSxlPXRoaXMubGVuZ3RoPjEmJiFSW2FdP2YudW5pcXVlKGUpOmUsKHRoaXMubGVuZ3RoPjF8fE4udGVzdChkKSkmJk0udGVzdChhKSYmKGU9ZS5yZXZlcnNlKCkpO3JldHVybiB0aGlzLnB1c2hTdGFjayhlLGEsUC5jYWxsKGFyZ3VtZW50cykuam9pbigiLCIpKX19KSxmLmV4dGVuZCh7ZmlsdGVyOmZ1bmN0aW9uKGEsYixjKXtjJiYoYT0iOm5vdCgiK2ErIikiKTtyZXR1cm4gYi5sZW5ndGg9PT0xP2YuZmluZC5tYXRjaGVzU2VsZWN0b3IoYlswXSxhKT9bYlswXV06W106Zi5maW5kLm1hdGNoZXMoYSxiKX0sZGlyOmZ1bmN0aW9uKGEsYyxkKXt2YXIgZT1bXSxnPWFbY107d2hpbGUoZyYmZy5ub2RlVHlwZSE9PTkmJihkPT09Ynx8Zy5ub2RlVHlwZSE9PTF8fCFmKGcpLmlzKGQpKSlnLm5vZGVUeXBlPT09MSYmZS5wdXNoKGcpLGc9Z1tjXTtyZXR1cm4gZX0sbnRoOmZ1bmN0aW9uKGEsYixjLGQpe2I9Ynx8MTt2YXIgZT0wO2Zvcig7YTthPWFbY10paWYoYS5ub2RlVHlwZT09PTEmJisrZT09PWIpYnJlYWs7cmV0dXJuIGF9LHNpYmxpbmc6ZnVuY3Rpb24oYSxiKXt2YXIgYz1bXTtmb3IoO2E7YT1hLm5leHRTaWJsaW5nKWEubm9kZVR5cGU9PT0xJiZhIT09YiYmYy5wdXNoKGEpO3JldHVybiBjfX0pO3ZhciBWPSJhYmJyfGFydGljbGV8YXNpZGV8YXVkaW98YmRpfGNhbnZhc3xkYXRhfGRhdGFsaXN0fGRldGFpbHN8ZmlnY2FwdGlvbnxmaWd1cmV8Zm9vdGVyfGhlYWRlcnxoZ3JvdXB8bWFya3xtZXRlcnxuYXZ8b3V0cHV0fHByb2dyZXNzfHNlY3Rpb258c3VtbWFyeXx0aW1lfHZpZGVvIixXPS8galF1ZXJ5XGQrPSIoPzpcZCt8bnVsbCkiL2csWD0vXlxzKy8sWT0vPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbXHc6XSspW14+XSopXC8+L2lnLFo9LzwoW1x3Ol0rKS8sJD0vPHRib2R5L2ksXz0vPHwmIz9cdys7LyxiYT0vPCg/OnNjcmlwdHxzdHlsZSkvaSxiYj0vPCg/OnNjcmlwdHxvYmplY3R8ZW1iZWR8b3B0aW9ufHN0eWxlKS9pLGJjPW5ldyBSZWdFeHAoIjwoPzoiK1YrIilbXFxzLz5dIiwiaSIpLGJkPS9jaGVja2VkXHMqKD86W149XXw9XHMqLmNoZWNrZWQuKS9pLGJlPS9cLyhqYXZhfGVjbWEpc2NyaXB0L2ksYmY9L15ccyo8ISg/OlxbQ0RBVEFcW3xcLVwtKS8sYmc9e29wdGlvbjpbMSwiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPiIsIjwvc2VsZWN0PiJdLGxlZ2VuZDpbMSwiPGZpZWxkc2V0PiIsIjwvZmllbGRzZXQ+Il0sdGhlYWQ6WzEsIjx0YWJsZT4iLCI8L3RhYmxlPiJdLHRyOlsyLCI8dGFibGU+PHRib2R5PiIsIjwvdGJvZHk+PC90YWJsZT4iXSx0ZDpbMywiPHRhYmxlPjx0Ym9keT48dHI+IiwiPC90cj48L3Rib2R5PjwvdGFibGU+Il0sY29sOlsyLCI8dGFibGU+PHRib2R5PjwvdGJvZHk+PGNvbGdyb3VwPiIsIjwvY29sZ3JvdXA+PC90YWJsZT4iXSxhcmVhOlsxLCI8bWFwPiIsIjwvbWFwPiJdLF9kZWZhdWx0OlswLCIiLCIiXX0sYmg9VShjKTtiZy5vcHRncm91cD1iZy5vcHRpb24sYmcudGJvZHk9YmcudGZvb3Q9YmcuY29sZ3JvdXA9YmcuY2FwdGlvbj1iZy50aGVhZCxiZy50aD1iZy50ZCxmLnN1cHBvcnQuaHRtbFNlcmlhbGl6ZXx8KGJnLl9kZWZhdWx0PVsxLCJkaXY8ZGl2PiIsIjwvZGl2PiJdKSxmLmZuLmV4dGVuZCh7dGV4dDpmdW5jdGlvbihhKXtyZXR1cm4gZi5hY2Nlc3ModGhpcyxmdW5jdGlvbihhKXtyZXR1cm4gYT09PWI/Zi50ZXh0KHRoaXMpOnRoaXMuZW1wdHkoKS5hcHBlbmQoKHRoaXNbMF0mJnRoaXNbMF0ub3duZXJEb2N1bWVudHx8YykuY3JlYXRlVGV4dE5vZGUoYSkpfSxudWxsLGEsYXJndW1lbnRzLmxlbmd0aCl9LHdyYXBBbGw6ZnVuY3Rpb24oYSl7aWYoZi5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7Zih0aGlzKS53cmFwQWxsKGEuY2FsbCh0aGlzLGIpKX0pO2lmKHRoaXNbMF0pe3ZhciBiPWYoYSx0aGlzWzBdLm93bmVyRG9jdW1lbnQpLmVxKDApLmNsb25lKCEwKTt0aGlzWzBdLnBhcmVudE5vZGUmJmIuaW5zZXJ0QmVmb3JlKHRoaXNbMF0pLGIubWFwKGZ1bmN0aW9uKCl7dmFyIGE9dGhpczt3aGlsZShhLmZpcnN0Q2hpbGQmJmEuZmlyc3RDaGlsZC5ub2RlVHlwZT09PTEpYT1hLmZpcnN0Q2hpbGQ7cmV0dXJuIGF9KS5hcHBlbmQodGhpcyl9cmV0dXJuIHRoaXN9LHdyYXBJbm5lcjpmdW5jdGlvbihhKXtpZihmLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXtmKHRoaXMpLndyYXBJbm5lcihhLmNhbGwodGhpcyxiKSl9KTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9Zih0aGlzKSxjPWIuY29udGVudHMoKTtjLmxlbmd0aD9jLndyYXBBbGwoYSk6Yi5hcHBlbmQoYSl9KX0sd3JhcDpmdW5jdGlvbihhKXt2YXIgYj1mLmlzRnVuY3Rpb24oYSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihjKXtmKHRoaXMpLndyYXBBbGwoYj9hLmNhbGwodGhpcyxjKTphKX0pfSx1bndyYXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnQoKS5lYWNoKGZ1bmN0aW9uKCl7Zi5ub2RlTmFtZSh0aGlzLCJib2R5Iil8fGYodGhpcykucmVwbGFjZVdpdGgodGhpcy5jaGlsZE5vZGVzKX0pLmVuZCgpfSxhcHBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsITAsZnVuY3Rpb24oYSl7dGhpcy5ub2RlVHlwZT09PTEmJnRoaXMuYXBwZW5kQ2hpbGQoYSl9KX0scHJlcGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cywhMCxmdW5jdGlvbihhKXt0aGlzLm5vZGVUeXBlPT09MSYmdGhpcy5pbnNlcnRCZWZvcmUoYSx0aGlzLmZpcnN0Q2hpbGQpfSl9LGJlZm9yZTpmdW5jdGlvbigpe2lmKHRoaXNbMF0mJnRoaXNbMF0ucGFyZW50Tm9kZSlyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsITEsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLHRoaXMpfSk7aWYoYXJndW1lbnRzLmxlbmd0aCl7dmFyIGE9Zg0KLmNsZWFuKGFyZ3VtZW50cyk7YS5wdXNoLmFwcGx5KGEsdGhpcy50b0FycmF5KCkpO3JldHVybiB0aGlzLnB1c2hTdGFjayhhLCJiZWZvcmUiLGFyZ3VtZW50cyl9fSxhZnRlcjpmdW5jdGlvbigpe2lmKHRoaXNbMF0mJnRoaXNbMF0ucGFyZW50Tm9kZSlyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsITEsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShhLHRoaXMubmV4dFNpYmxpbmcpfSk7aWYoYXJndW1lbnRzLmxlbmd0aCl7dmFyIGE9dGhpcy5wdXNoU3RhY2sodGhpcywiYWZ0ZXIiLGFyZ3VtZW50cyk7YS5wdXNoLmFwcGx5KGEsZi5jbGVhbihhcmd1bWVudHMpKTtyZXR1cm4gYX19LHJlbW92ZTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ7KGQ9dGhpc1tjXSkhPW51bGw7YysrKWlmKCFhfHxmLmZpbHRlcihhLFtkXSkubGVuZ3RoKSFiJiZkLm5vZGVUeXBlPT09MSYmKGYuY2xlYW5EYXRhKGQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKSksZi5jbGVhbkRhdGEoW2RdKSksZC5wYXJlbnROb2RlJiZkLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZCk7cmV0dXJuIHRoaXN9LGVtcHR5OmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTAsYjsoYj10aGlzW2FdKSE9bnVsbDthKyspe2Iubm9kZVR5cGU9PT0xJiZmLmNsZWFuRGF0YShiLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikpO3doaWxlKGIuZmlyc3RDaGlsZCliLnJlbW92ZUNoaWxkKGIuZmlyc3RDaGlsZCl9cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKGEsYil7YT1hPT1udWxsPyExOmEsYj1iPT1udWxsP2E6YjtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gZi5jbG9uZSh0aGlzLGEsYil9KX0saHRtbDpmdW5jdGlvbihhKXtyZXR1cm4gZi5hY2Nlc3ModGhpcyxmdW5jdGlvbihhKXt2YXIgYz10aGlzWzBdfHx7fSxkPTAsZT10aGlzLmxlbmd0aDtpZihhPT09YilyZXR1cm4gYy5ub2RlVHlwZT09PTE/Yy5pbm5lckhUTUwucmVwbGFjZShXLCIiKTpudWxsO2lmKHR5cGVvZiBhPT0ic3RyaW5nIiYmIWJhLnRlc3QoYSkmJihmLnN1cHBvcnQubGVhZGluZ1doaXRlc3BhY2V8fCFYLnRlc3QoYSkpJiYhYmdbKFouZXhlYyhhKXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKV0pe2E9YS5yZXBsYWNlKFksIjwkMT48LyQyPiIpO3RyeXtmb3IoO2Q8ZTtkKyspYz10aGlzW2RdfHx7fSxjLm5vZGVUeXBlPT09MSYmKGYuY2xlYW5EYXRhKGMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKSksYy5pbm5lckhUTUw9YSk7Yz0wfWNhdGNoKGcpe319YyYmdGhpcy5lbXB0eSgpLmFwcGVuZChhKX0sbnVsbCxhLGFyZ3VtZW50cy5sZW5ndGgpfSxyZXBsYWNlV2l0aDpmdW5jdGlvbihhKXtpZih0aGlzWzBdJiZ0aGlzWzBdLnBhcmVudE5vZGUpe2lmKGYuaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGIpe3ZhciBjPWYodGhpcyksZD1jLmh0bWwoKTtjLnJlcGxhY2VXaXRoKGEuY2FsbCh0aGlzLGIsZCkpfSk7dHlwZW9mIGEhPSJzdHJpbmciJiYoYT1mKGEpLmRldGFjaCgpKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5uZXh0U2libGluZyxjPXRoaXMucGFyZW50Tm9kZTtmKHRoaXMpLnJlbW92ZSgpLGI/ZihiKS5iZWZvcmUoYSk6ZihjKS5hcHBlbmQoYSl9KX1yZXR1cm4gdGhpcy5sZW5ndGg/dGhpcy5wdXNoU3RhY2soZihmLmlzRnVuY3Rpb24oYSk/YSgpOmEpLCJyZXBsYWNlV2l0aCIsYSk6dGhpc30sZGV0YWNoOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnJlbW92ZShhLCEwKX0sZG9tTWFuaXA6ZnVuY3Rpb24oYSxjLGQpe3ZhciBlLGcsaCxpLGo9YVswXSxrPVtdO2lmKCFmLnN1cHBvcnQuY2hlY2tDbG9uZSYmYXJndW1lbnRzLmxlbmd0aD09PTMmJnR5cGVvZiBqPT0ic3RyaW5nIiYmYmQudGVzdChqKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7Zih0aGlzKS5kb21NYW5pcChhLGMsZCwhMCl9KTtpZihmLmlzRnVuY3Rpb24oaikpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihlKXt2YXIgZz1mKHRoaXMpO2FbMF09ai5jYWxsKHRoaXMsZSxjP2cuaHRtbCgpOmIpLGcuZG9tTWFuaXAoYSxjLGQpfSk7aWYodGhpc1swXSl7aT1qJiZqLnBhcmVudE5vZGUsZi5zdXBwb3J0LnBhcmVudE5vZGUmJmkmJmkubm9kZVR5cGU9PT0xMSYmaS5jaGlsZE5vZGVzLmxlbmd0aD09PXRoaXMubGVuZ3RoP2U9e2ZyYWdtZW50Oml9OmU9Zi5idWlsZEZyYWdtZW50KGEsdGhpcyxrKSxoPWUuZnJhZ21lbnQsaC5jaGlsZE5vZGVzLmxlbmd0aD09PTE/Zz1oPWguZmlyc3RDaGlsZDpnPWguZmlyc3RDaGlsZDtpZihnKXtjPWMmJmYubm9kZU5hbWUoZywidHIiKTtmb3IodmFyIGw9MCxtPXRoaXMubGVuZ3RoLG49bS0xO2w8bTtsKyspZC5jYWxsKGM/YmkodGhpc1tsXSxnKTp0aGlzW2xdLGUuY2FjaGVhYmxlfHxtPjEmJmw8bj9mLmNsb25lKGgsITAsITApOmgpfWsubGVuZ3RoJiZmLmVhY2goayxmdW5jdGlvbihhLGIpe2Iuc3JjP2YuYWpheCh7dHlwZToiR0VUIixnbG9iYWw6ITEsdXJsOmIuc3JjLGFzeW5jOiExLGRhdGFUeXBlOiJzY3JpcHQifSk6Zi5nbG9iYWxFdmFsKChiLnRleHR8fGIudGV4dENvbnRlbnR8fGIuaW5uZXJIVE1MfHwiIikucmVwbGFjZShiZiwiLyokMCovIikpLGIucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpfSl9cmV0dXJuIHRoaXN9fSksZi5idWlsZEZyYWdtZW50PWZ1bmN0aW9uKGEsYixkKXt2YXIgZSxnLGgsaSxqPWFbMF07YiYmYlswXSYmKGk9YlswXS5vd25lckRvY3VtZW50fHxiWzBdKSxpLmNyZWF0ZURvY3VtZW50RnJhZ21lbnR8fChpPWMpLGEubGVuZ3RoPT09MSYmdHlwZW9mIGo9PSJzdHJpbmciJiZqLmxlbmd0aDw1MTImJmk9PT1jJiZqLmNoYXJBdCgwKT09PSI8IiYmIWJiLnRlc3QoaikmJihmLnN1cHBvcnQuY2hlY2tDbG9uZXx8IWJkLnRlc3QoaikpJiYoZi5zdXBwb3J0Lmh0bWw1Q2xvbmV8fCFiYy50ZXN0KGopKSYmKGc9ITAsaD1mLmZyYWdtZW50c1tqXSxoJiZoIT09MSYmKGU9aCkpLGV8fChlPWkuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGYuY2xlYW4oYSxpLGUsZCkpLGcmJihmLmZyYWdtZW50c1tqXT1oP2U6MSk7cmV0dXJue2ZyYWdtZW50OmUsY2FjaGVhYmxlOmd9fSxmLmZyYWdtZW50cz17fSxmLmVhY2goe2FwcGVuZFRvOiJhcHBlbmQiLHByZXBlbmRUbzoicHJlcGVuZCIsaW5zZXJ0QmVmb3JlOiJiZWZvcmUiLGluc2VydEFmdGVyOiJhZnRlciIscmVwbGFjZUFsbDoicmVwbGFjZVdpdGgifSxmdW5jdGlvbihhLGIpe2YuZm5bYV09ZnVuY3Rpb24oYyl7dmFyIGQ9W10sZT1mKGMpLGc9dGhpcy5sZW5ndGg9PT0xJiZ0aGlzWzBdLnBhcmVudE5vZGU7aWYoZyYmZy5ub2RlVHlwZT09PTExJiZnLmNoaWxkTm9kZXMubGVuZ3RoPT09MSYmZS5sZW5ndGg9PT0xKXtlW2JdKHRoaXNbMF0pO3JldHVybiB0aGlzfWZvcih2YXIgaD0wLGk9ZS5sZW5ndGg7aDxpO2grKyl7dmFyIGo9KGg+MD90aGlzLmNsb25lKCEwKTp0aGlzKS5nZXQoKTtmKGVbaF0pW2JdKGopLGQ9ZC5jb25jYXQoail9cmV0dXJuIHRoaXMucHVzaFN0YWNrKGQsYSxlLnNlbGVjdG9yKX19KSxmLmV4dGVuZCh7Y2xvbmU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZyxoPWYuc3VwcG9ydC5odG1sNUNsb25lfHxmLmlzWE1MRG9jKGEpfHwhYmMudGVzdCgiPCIrYS5ub2RlTmFtZSsiPiIpP2EuY2xvbmVOb2RlKCEwKTpibyhhKTtpZigoIWYuc3VwcG9ydC5ub0Nsb25lRXZlbnR8fCFmLnN1cHBvcnQubm9DbG9uZUNoZWNrZWQpJiYoYS5ub2RlVHlwZT09PTF8fGEubm9kZVR5cGU9PT0xMSkmJiFmLmlzWE1MRG9jKGEpKXtiayhhLGgpLGQ9YmwoYSksZT1ibChoKTtmb3IoZz0wO2RbZ107KytnKWVbZ10mJmJrKGRbZ10sZVtnXSl9aWYoYil7YmooYSxoKTtpZihjKXtkPWJsKGEpLGU9YmwoaCk7Zm9yKGc9MDtkW2ddOysrZyliaihkW2ddLGVbZ10pfX1kPWU9bnVsbDtyZXR1cm4gaH0sY2xlYW46ZnVuY3Rpb24oYSxiLGQsZSl7dmFyIGcsaCxpLGo9W107Yj1ifHxjLHR5cGVvZiBiLmNyZWF0ZUVsZW1lbnQ9PSJ1bmRlZmluZWQiJiYoYj1iLm93bmVyRG9jdW1lbnR8fGJbMF0mJmJbMF0ub3duZXJEb2N1bWVudHx8Yyk7Zm9yKHZhciBrPTAsbDsobD1hW2tdKSE9bnVsbDtrKyspe3R5cGVvZiBsPT0ibnVtYmVyIiYmKGwrPSIiKTtpZighbCljb250aW51ZTtpZih0eXBlb2YgbD09InN0cmluZyIpaWYoIV8udGVzdChsKSlsPWIuY3JlYXRlVGV4dE5vZGUobCk7ZWxzZXtsPWwucmVwbGFjZShZLCI8JDE+PC8kMj4iKTt2YXIgbT0oWi5leGVjKGwpfHxbIiIsIiJdKVsxXS50b0xvd2VyQ2FzZSgpLG49YmdbbV18fGJnLl9kZWZhdWx0LG89blswXSxwPWIuY3JlYXRlRWxlbWVudCgiZGl2IikscT1iaC5jaGlsZE5vZGVzLHI7Yj09PWM/YmguYXBwZW5kQ2hpbGQocCk6VShiKS5hcHBlbmRDaGlsZChwKSxwLmlubmVySFRNTD1uWzFdK2wrblsyXTt3aGlsZShvLS0pcD1wLmxhc3RDaGlsZDtpZighZi5zdXBwb3J0LnRib2R5KXt2YXIgcz0kLnRlc3QobCksdD1tPT09InRhYmxlIiYmIXM/cC5maXJzdENoaWxkJiZwLmZpcnN0Q2hpbGQuY2hpbGROb2RlczpuWzFdPT09Ijx0YWJsZT4iJiYhcz9wLmNoaWxkTm9kZXM6W107Zm9yKGk9dC5sZW5ndGgtMTtpPj0wOy0taSlmLm5vZGVOYW1lKHRbaV0sInRib2R5IikmJiF0W2ldLmNoaWxkTm9kZXMubGVuZ3RoJiZ0W2ldLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodFtpXSl9IWYuc3VwcG9ydC5sZWFkaW5nV2hpdGVzcGFjZSYmWC50ZXN0KGwpJiZwLmluc2VydEJlZm9yZShiLmNyZWF0ZVRleHROb2RlKFguZXhlYyhsKVswXSkscC5maXJzdENoaWxkKSxsPXAuY2hpbGROb2RlcyxwJiYocC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHApLHEubGVuZ3RoPjAmJihyPXFbcS5sZW5ndGgtMV0sciYmci5wYXJlbnROb2RlJiZyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQocikpKX12YXIgdTtpZighZi5zdXBwb3J0LmFwcGVuZENoZWNrZWQpaWYobFswXSYmdHlwZW9mICh1PWwubGVuZ3RoKT09Im51bWJlciIpZm9yKGk9MDtpPHU7aSsrKWJuKGxbaV0pO2Vsc2UgYm4obCk7bC5ub2RlVHlwZT9qLnB1c2gobCk6aj1mLm1lcmdlKGosbCl9aWYoZCl7Zz1mdW5jdGlvbihhKXtyZXR1cm4hYS50eXBlfHxiZS50ZXN0KGEudHlwZSl9O2ZvcihrPTA7altrXTtrKyspe2g9altrXTtpZihlJiZmLm5vZGVOYW1lKGgsInNjcmlwdCIpJiYoIWgudHlwZXx8YmUudGVzdChoLnR5cGUpKSllLnB1c2goaC5wYXJlbnROb2RlP2gucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChoKTpoKTtlbHNle2lmKGgubm9kZVR5cGU9PT0xKXt2YXIgdj1mLmdyZXAoaC5nZXRFbGVtZW50c0J5VGFnTmFtZSgic2NyaXB0IiksZyk7ai5zcGxpY2UuYXBwbHkoaixbaysxLDBdLmNvbmNhdCh2KSl9ZC5hcHBlbmRDaGlsZChoKX19fXJldHVybiBqfSxjbGVhbkRhdGE6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPWYuY2FjaGUsZT1mLmV2ZW50LnNwZWNpYWwsZz1mLnN1cHBvcnQuZGVsZXRlRXhwYW5kbztmb3IodmFyIGg9MCxpOyhpPWFbaF0pIT1udWxsO2grKyl7aWYoaS5ub2RlTmFtZSYmZi5ub0RhdGFbaS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSljb250aW51ZTtjPWlbZi5leHBhbmRvXTtpZihjKXtiPWRbY107aWYoYiYmYi5ldmVudHMpe2Zvcih2YXIgaiBpbiBiLmV2ZW50cyllW2pdP2YuZXZlbnQucmVtb3ZlKGksaik6Zi5yZW1vdmVFdmVudChpLGosYi5oYW5kbGUpO2IuaGFuZGxlJiYoYi5oYW5kbGUuZWxlbT1udWxsKX1nP2RlbGV0ZSBpW2YuZXhwYW5kb106aS5yZW1vdmVBdHRyaWJ1dGUmJmkucmVtb3ZlQXR0cmlidXRlKGYuZXhwYW5kbyksZGVsZXRlIGRbY119fX19KTt2YXIgYnA9L2FscGhhXChbXildKlwpL2ksYnE9L29wYWNpdHk9KFteKV0qKS8sYnI9LyhbQS1aXXxebXMpL2csYnM9L15bXC0rXT8oPzpcZCpcLik/XGQrJC9pLGJ0PS9eLT8oPzpcZCpcLik/XGQrKD8hcHgpW15cZFxzXSskL2ksYnU9L14oW1wtK10pPShbXC0rLlxkZV0rKS8sYnY9L15tYXJnaW4vLGJ3PXtwb3NpdGlvbjoiYWJzb2x1dGUiLHZpc2liaWxpdHk6ImhpZGRlbiIsZGlzcGxheToiYmxvY2sifSxieD1bIlRvcCIsIlJpZ2h0IiwiQm90dG9tIiwiTGVmdCJdLGJ5LGJ6LGJBO2YuZm4uY3NzPWZ1bmN0aW9uKGEsYyl7cmV0dXJuIGYuYWNjZXNzKHRoaXMsZnVuY3Rpb24oYSxjLGQpe3JldHVybiBkIT09Yj9mLnN0eWxlKGEsYyxkKTpmLmNzcyhhLGMpfSxhLGMsYXJndW1lbnRzLmxlbmd0aD4xKX0sZi5leHRlbmQoe2Nzc0hvb2tzOntvcGFjaXR5OntnZXQ6ZnVuY3Rpb24oYSxiKXtpZihiKXt2YXIgYz1ieShhLCJvcGFjaXR5Iik7cmV0dXJuIGM9PT0iIj8iMSI6Y31yZXR1cm4gYS5zdHlsZS5vcGFjaXR5fX19LGNzc051bWJlcjp7ZmlsbE9wYWNpdHk6ITAsZm9udFdlaWdodDohMCxsaW5lSGVpZ2h0OiEwLG9wYWNpdHk6ITAsb3JwaGFuczohMCx3aWRvd3M6ITAsekluZGV4OiEwLHpvb206ITB9LGNzc1Byb3BzOnsiZmxvYXQiOmYuc3VwcG9ydC5jc3NGbG9hdD8iY3NzRmxvYXQiOiJzdHlsZUZsb2F0In0sc3R5bGU6ZnVuY3Rpb24oYSxjLGQsZSl7aWYoISFhJiZhLm5vZGVUeXBlIT09MyYmYS5ub2RlVHlwZSE9PTgmJiEhYS5zdHlsZSl7dmFyIGcsaCxpPWYuY2FtZWxDYXNlKGMpLGo9YS5zdHlsZSxrPWYuY3NzSG9va3NbaV07Yz1mLmNzc1Byb3BzW2ldfHxpO2lmKGQ9PT1iKXtpZihrJiYiZ2V0ImluIGsmJihnPWsuZ2V0KGEsITEsZSkpIT09YilyZXR1cm4gZztyZXR1cm4galtjXX1oPXR5cGVvZiBkLGg9PT0ic3RyaW5nIiYmKGc9YnUuZXhlYyhkKSkmJihkPSsoZ1sxXSsxKSorZ1syXStwYXJzZUZsb2F0KGYuY3NzKGEsYykpLGg9Im51bWJlciIpO2lmKGQ9PW51bGx8fGg9PT0ibnVtYmVyIiYmaXNOYU4oZCkpcmV0dXJuO2g9PT0ibnVtYmVyIiYmIWYuY3NzTnVtYmVyW2ldJiYoZCs9InB4Iik7aWYoIWt8fCEoInNldCJpbiBrKXx8KGQ9ay5zZXQoYSxkKSkhPT1iKXRyeXtqW2NdPWR9Y2F0Y2gobCl7fX19LGNzczpmdW5jdGlvbihhLGMsZCl7dmFyIGUsZztjPWYuY2FtZWxDYXNlKGMpLGc9Zi5jc3NIb29rc1tjXSxjPWYuY3NzUHJvcHNbY118fGMsYz09PSJjc3NGbG9hdCImJihjPSJmbG9hdCIpO2lmKGcmJiJnZXQiaW4gZyYmKGU9Zy5nZXQoYSwhMCxkKSkhPT1iKXJldHVybiBlO2lmKGJ5KXJldHVybiBieShhLGMpfSxzd2FwOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD17fSxlLGY7Zm9yKGYgaW4gYilkW2ZdPWEuc3R5bGVbZl0sYS5zdHlsZVtmXT1iW2ZdO2U9Yy5jYWxsKGEpO2ZvcihmIGluIGIpYS5zdHlsZVtmXT1kW2ZdO3JldHVybiBlfX0pLGYuY3VyQ1NTPWYuY3NzLGMuZGVmYXVsdFZpZXcmJmMuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSYmKGJ6PWZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGcsaD1hLnN0eWxlO2I9Yi5yZXBsYWNlKGJyLCItJDEiKS50b0xvd2VyQ2FzZSgpLChkPWEub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldykmJihlPWQuZ2V0Q29tcHV0ZWRTdHlsZShhLG51bGwpKSYmKGM9ZS5nZXRQcm9wZXJ0eVZhbHVlKGIpLGM9PT0iIiYmIWYuY29udGFpbnMoYS5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxhKSYmKGM9Zi5zdHlsZShhLGIpKSksIWYuc3VwcG9ydC5waXhlbE1hcmdpbiYmZSYmYnYudGVzdChiKSYmYnQudGVzdChjKSYmKGc9aC53aWR0aCxoLndpZHRoPWMsYz1lLndpZHRoLGgud2lkdGg9Zyk7cmV0dXJuIGN9KSxjLmRvY3VtZW50RWxlbWVudC5jdXJyZW50U3R5bGUmJihiQT1mdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmPWEuY3VycmVudFN0eWxlJiZhLmN1cnJlbnRTdHlsZVtiXSxnPWEuc3R5bGU7Zj09bnVsbCYmZyYmKGU9Z1tiXSkmJihmPWUpLGJ0LnRlc3QoZikmJihjPWcubGVmdCxkPWEucnVudGltZVN0eWxlJiZhLnJ1bnRpbWVTdHlsZS5sZWZ0LGQmJihhLnJ1bnRpbWVTdHlsZS5sZWZ0PWEuY3VycmVudFN0eWxlLmxlZnQpLGcubGVmdD1iPT09ImZvbnRTaXplIj8iMWVtIjpmLGY9Zy5waXhlbExlZnQrInB4IixnLmxlZnQ9YyxkJiYoYS5ydW50aW1lU3R5bGUubGVmdD1kKSk7cmV0dXJuIGY9PT0iIj8iYXV0byI6Zn0pLGJ5PWJ6fHxiQSxmLmVhY2goWyJoZWlnaHQiLCJ3aWR0aCJdLGZ1bmN0aW9uKGEsYil7Zi5jc3NIb29rc1tiXT17Z2V0OmZ1bmN0aW9uKGEsYyxkKXtpZihjKXJldHVybiBhLm9mZnNldFdpZHRoIT09MD9iQihhLGIsZCk6Zi5zd2FwKGEsYncsZnVuY3Rpb24oKXtyZXR1cm4gYkIoYSxiLGQpfSl9LHNldDpmdW5jdGlvbihhLGIpe3JldHVybiBicy50ZXN0KGIpP2IrInB4IjpifX19KSxmLnN1cHBvcnQub3BhY2l0eXx8KGYuY3NzSG9va3Mub3BhY2l0eT17Z2V0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGJxLnRlc3QoKGImJmEuY3VycmVudFN0eWxlP2EuY3VycmVudFN0eWxlLmZpbHRlcjphLnN0eWxlLmZpbHRlcil8fCIiKT9wYXJzZUZsb2F0KFJlZ0V4cC4kMSkvMTAwKyIiOmI/IjEiOiIifSxzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnN0eWxlLGQ9YS5jdXJyZW50U3R5bGUsZT1mLmlzTnVtZXJpYyhiKT8iYWxwaGEob3BhY2l0eT0iK2IqMTAwKyIpIjoiIixnPWQmJmQuZmlsdGVyfHxjLmZpbHRlcnx8IiI7Yy56b29tPTE7aWYoYj49MSYmZi50cmltKGcucmVwbGFjZShicCwiIikpPT09IiIpe2MucmVtb3ZlQXR0cmlidXRlKCJmaWx0ZXIiKTtpZihkJiYhZC5maWx0ZXIpcmV0dXJufWMuZmlsdGVyPWJwLnRlc3QoZyk/Zy5yZXBsYWNlKGJwLGUpOmcrIiAiK2V9fSksZihmdW5jdGlvbigpe2Yuc3VwcG9ydC5yZWxpYWJsZU1hcmdpblJpZ2h0fHwoZi5jc3NIb29rcy5tYXJnaW5SaWdodD17Z2V0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGYuc3dhcChhLHtkaXNwbGF5OiJpbmxpbmUtYmxvY2sifSxmdW5jdGlvbigpe3JldHVybiBiP2J5KGEsIm1hcmdpbi1yaWdodCIpOmEuc3R5bGUubWFyZ2luUmlnaHR9KX19KX0pLGYuZXhwciYmZi5leHByLmZpbHRlcnMmJihmLmV4cHIuZmlsdGVycy5oaWRkZW49ZnVuY3Rpb24oYSl7dmFyIGI9YS5vZmZzZXRXaWR0aCxjPWEub2Zmc2V0SGVpZ2h0O3JldHVybiBiPT09MCYmYz09PTB8fCFmLnN1cHBvcnQucmVsaWFibGVIaWRkZW5PZmZzZXRzJiYoYS5zdHlsZSYmYS5zdHlsZS5kaXNwbGF5fHxmLmNzcyhhLCJkaXNwbGF5IikpPT09Im5vbmUifSxmLmV4cHIuZmlsdGVycy52aXNpYmxlPWZ1bmN0aW9uKGEpe3JldHVybiFmLmV4cHIuZmlsdGVycy5oaWRkZW4oYSl9KSxmLmVhY2goe21hcmdpbjoiIixwYWRkaW5nOiIiLGJvcmRlcjoiV2lkdGgifSxmdW5jdGlvbihhLGIpe2YuY3NzSG9va3NbYStiXT17ZXhwYW5kOmZ1bmN0aW9uKGMpe3ZhciBkLGU9dHlwZW9mIGM9PSJzdHJpbmciP2Muc3BsaXQoIiAiKTpbY10sZj17fTtmb3IoZD0wO2Q8NDtkKyspZlthK2J4W2RdK2JdPWVbZF18fGVbZC0yXXx8ZVswXTtyZXR1cm4gZn19fSk7dmFyIGJDPS8lMjAvZyxiRD0vXFtcXSQvLGJFPS9ccj9cbi9nLGJGPS8jLiokLyxiRz0vXiguKj8pOlsgXHRdKihbXlxyXG5dKilccj8kL21nLGJIPS9eKD86Y29sb3J8ZGF0ZXxkYXRldGltZXxkYXRldGltZS1sb2NhbHxlbWFpbHxoaWRkZW58bW9udGh8bnVtYmVyfHBhc3N3b3JkfHJhbmdlfHNlYXJjaHx0ZWx8dGV4dHx0aW1lfHVybHx3ZWVrKSQvaSxiST0vXig/OmFib3V0fGFwcHxhcHBcLXN0b3JhZ2V8LitcLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLGJKPS9eKD86R0VUfEhFQUQpJC8sYks9L15cL1wvLyxiTD0vXD8vLGJNPS88c2NyaXB0XGJbXjxdKig/Oig/ITxcL3NjcmlwdD4pPFtePF0qKSo8XC9zY3JpcHQ+L2dpLGJOPS9eKD86c2VsZWN0fHRleHRhcmVhKS9pLGJPPS9ccysvLGJQPS8oWz8mXSlfPVteJl0qLyxiUT0vXihbXHdcK1wuXC1dKzopKD86XC9cLyhbXlwvPyM6XSopKD86OihcZCspKT8pPy8sYlI9Zi5mbi5sb2FkLGJTPXt9LGJUPXt9LGJVLGJWLGJXPVsiKi8iXStbIioiXTt0cnl7YlU9ZS5ocmVmfWNhdGNoKGJYKXtiVT1jLmNyZWF0ZUVsZW1lbnQoImEiKSxiVS5ocmVmPSIiLGJVPWJVLmhyZWZ9YlY9YlEuZXhlYyhiVS50b0xvd2VyQ2FzZSgpKXx8W10sZi5mbi5leHRlbmQoe2xvYWQ6ZnVuY3Rpb24oYSxjLGQpe2lmKHR5cGVvZiBhIT0ic3RyaW5nIiYmYlIpcmV0dXJuIGJSLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZighdGhpcy5sZW5ndGgpcmV0dXJuIHRoaXM7dmFyIGU9YS5pbmRleE9mKCIgIik7aWYoZT49MCl7dmFyIGc9YS5zbGljZShlLGEubGVuZ3RoKTthPWEuc2xpY2UoMCxlKX12YXIgaD0iR0VUIjtjJiYoZi5pc0Z1bmN0aW9uKGMpPyhkPWMsYz1iKTp0eXBlb2YgYz09Im9iamVjdCImJihjPWYucGFyYW0oYyxmLmFqYXhTZXR0aW5ncy50cmFkaXRpb25hbCksaD0iUE9TVCIpKTt2YXIgaT10aGlzO2YuYWpheCh7dXJsOmEsdHlwZTpoLGRhdGFUeXBlOiJodG1sIixkYXRhOmMsY29tcGxldGU6ZnVuY3Rpb24oYSxiLGMpe2M9YS5yZXNwb25zZVRleHQsYS5pc1Jlc29sdmVkKCkmJihhLmRvbmUoZnVuY3Rpb24oYSl7Yz1hfSksaS5odG1sKGc/ZigiPGRpdj4iKS5hcHBlbmQoYy5yZXBsYWNlKGJNLCIiKSkuZmluZChnKTpjKSksZCYmaS5lYWNoKGQsW2MsYixhXSl9fSk7cmV0dXJuIHRoaXN9LHNlcmlhbGl6ZTpmdW5jdGlvbigpe3JldHVybiBmLnBhcmFtKHRoaXMuc2VyaWFsaXplQXJyYXkoKSl9LHNlcmlhbGl6ZUFycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWxlbWVudHM/Zi5tYWtlQXJyYXkodGhpcy5lbGVtZW50cyk6dGhpc30pLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiB0aGlzLm5hbWUmJiF0aGlzLmRpc2FibGVkJiYodGhpcy5jaGVja2VkfHxiTi50ZXN0KHRoaXMubm9kZU5hbWUpfHxiSC50ZXN0KHRoaXMudHlwZSkpfSkubWFwKGZ1bmN0aW9uKGEsYil7dmFyIGM9Zih0aGlzKS52YWwoKTtyZXR1cm4gYz09bnVsbD9udWxsOmYuaXNBcnJheShjKT9mLm1hcChjLGZ1bmN0aW9uKGEsYyl7cmV0dXJue25hbWU6Yi5uYW1lLHZhbHVlOmEucmVwbGFjZShiRSwiXHJcbiIpfX0pOntuYW1lOmIubmFtZSx2YWx1ZTpjLnJlcGxhY2UoYkUsIlxyXG4iKX19KS5nZXQoKX19KSxmLmVhY2goImFqYXhTdGFydCBhamF4U3RvcCBhamF4Q29tcGxldGUgYWpheEVycm9yIGFqYXhTdWNjZXNzIGFqYXhTZW5kIi5zcGxpdCgiICIpLGZ1bmN0aW9uKGEsYil7Zi5mbltiXT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5vbihiLGEpfX0pLGYuZWFjaChbImdldCIsInBvc3QiXSxmdW5jdGlvbihhLGMpe2ZbY109ZnVuY3Rpb24oYSxkLGUsZyl7Zi5pc0Z1bmN0aW9uKGQpJiYoZz1nfHxlLGU9ZCxkPWIpO3JldHVybiBmLmFqYXgoe3R5cGU6Yyx1cmw6YSxkYXRhOmQsc3VjY2VzczplLGRhdGFUeXBlOmd9KX19KSxmLmV4dGVuZCh7Z2V0U2NyaXB0OmZ1bmN0aW9uKGEsYyl7cmV0dXJuIGYuZ2V0KGEsYixjLCJzY3JpcHQiKX0sZ2V0SlNPTjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGYuZ2V0KGEsYixjLCJqc29uIil9LGFqYXhTZXR1cDpmdW5jdGlvbihhLGIpe2I/YiQoYSxmLmFqYXhTZXR0aW5ncyk6KGI9YSxhPWYuYWpheFNldHRpbmdzKSxiJChhLGIpO3JldHVybiBhfSxhamF4U2V0dGluZ3M6e3VybDpiVSxpc0xvY2FsOmJJLnRlc3QoYlZbMV0pLGdsb2JhbDohMCx0eXBlOiJHRVQiLGNvbnRlbnRUeXBlOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgiLHByb2Nlc3NEYXRhOiEwLGFzeW5jOiEwLGFjY2VwdHM6e3htbDoiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCIsaHRtbDoidGV4dC9odG1sIix0ZXh0OiJ0ZXh0L3BsYWluIixqc29uOiJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHQiLCIqIjpiV30sY29udGVudHM6e3htbDoveG1sLyxodG1sOi9odG1sLyxqc29uOi9qc29uL30scmVzcG9uc2VGaWVsZHM6e3htbDoicmVzcG9uc2VYTUwiLHRleHQ6InJlc3BvbnNlVGV4dCJ9LGNvbnZlcnRlcnM6eyIqIHRleHQiOmEuU3RyaW5nLCJ0ZXh0IGh0bWwiOiEwLCJ0ZXh0IGpzb24iOmYucGFyc2VKU09OLCJ0ZXh0IHhtbCI6Zi5wYXJzZVhNTH0sZmxhdE9wdGlvbnM6e2NvbnRleHQ6ITAsdXJsOiEwfX0sYWpheFByZWZpbHRlcjpiWShiUyksYWpheFRyYW5zcG9ydDpiWShiVCksYWpheDpmdW5jdGlvbihhLGMpe2Z1bmN0aW9uIHcoYSxjLGwsbSl7aWYocyE9PTIpe3M9MixxJiZjbGVhclRpbWVvdXQocSkscD1iLG49bXx8IiIsdi5yZWFkeVN0YXRlPWE+MD80OjA7dmFyIG8scix1LHc9Yyx4PWw/Y2EoZCx2LGwpOmIseSx6O2lmKGE+PTIwMCYmYTwzMDB8fGE9PT0zMDQpe2lmKGQuaWZNb2RpZmllZCl7aWYoeT12LmdldFJlc3BvbnNlSGVhZGVyKCJMYXN0LU1vZGlmaWVkIikpZi5sYXN0TW9kaWZpZWRba109eTtpZih6PXYuZ2V0UmVzcG9uc2VIZWFkZXIoIkV0YWciKSlmLmV0YWdba109en1pZihhPT09MzA0KXc9Im5vdG1vZGlmaWVkIixvPSEwO2Vsc2UgdHJ5e3I9Y2IoZCx4KSx3PSJzdWNjZXNzIixvPSEwfWNhdGNoKEEpe3c9InBhcnNlcmVycm9yIix1PUF9fWVsc2V7dT13O2lmKCF3fHxhKXc9ImVycm9yIixhPDAmJihhPTApfXYuc3RhdHVzPWEsdi5zdGF0dXNUZXh0PSIiKyhjfHx3KSxvP2gucmVzb2x2ZVdpdGgoZSxbcix3LHZdKTpoLnJlamVjdFdpdGgoZSxbdix3LHVdKSx2LnN0YXR1c0NvZGUoaiksaj1iLHQmJmcudHJpZ2dlcigiYWpheCIrKG8/IlN1Y2Nlc3MiOiJFcnJvciIpLFt2LGQsbz9yOnVdKSxpLmZpcmVXaXRoKGUsW3Ysd10pLHQmJihnLnRyaWdnZXIoImFqYXhDb21wbGV0ZSIsW3YsZF0pLC0tZi5hY3RpdmV8fGYuZXZlbnQudHJpZ2dlcigiYWpheFN0b3AiKSl9fXR5cGVvZiBhPT0ib2JqZWN0IiYmKGM9YSxhPWIpLGM9Y3x8e307dmFyIGQ9Zi5hamF4U2V0dXAoe30sYyksZT1kLmNvbnRleHR8fGQsZz1lIT09ZCYmKGUubm9kZVR5cGV8fGUgaW5zdGFuY2VvZiBmKT9mKGUpOmYuZXZlbnQsaD1mLkRlZmVycmVkKCksaT1mLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSxqPWQuc3RhdHVzQ29kZXx8e30sayxsPXt9LG09e30sbixvLHAscSxyLHM9MCx0LHUsdj17cmVhZHlTdGF0ZTowLHNldFJlcXVlc3RIZWFkZXI6ZnVuY3Rpb24oYSxiKXtpZighcyl7dmFyIGM9YS50b0xvd2VyQ2FzZSgpO2E9bVtjXT1tW2NdfHxhLGxbYV09Yn1yZXR1cm4gdGhpc30sZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIHM9PT0yP246bnVsbH0sZ2V0UmVzcG9uc2VIZWFkZXI6ZnVuY3Rpb24oYSl7dmFyIGM7aWYocz09PTIpe2lmKCFvKXtvPXt9O3doaWxlKGM9YkcuZXhlYyhuKSlvW2NbMV0udG9Mb3dlckNhc2UoKV09Y1syXX1jPW9bYS50b0xvd2VyQ2FzZSgpXX1yZXR1cm4gYz09PWI/bnVsbDpjfSxvdmVycmlkZU1pbWVUeXBlOmZ1bmN0aW9uKGEpe3N8fChkLm1pbWVUeXBlPWEpO3JldHVybiB0aGlzfSxhYm9ydDpmdW5jdGlvbihhKXthPWF8fCJhYm9ydCIscCYmcC5hYm9ydChhKSx3KDAsYSk7cmV0dXJuIHRoaXN9fTtoLnByb21pc2Uodiksdi5zdWNjZXNzPXYuZG9uZSx2LmVycm9yPXYuZmFpbCx2LmNvbXBsZXRlPWkuYWRkLHYuc3RhdHVzQ29kZT1mdW5jdGlvbihhKXtpZihhKXt2YXIgYjtpZihzPDIpZm9yKGIgaW4gYSlqW2JdPVtqW2JdLGFbYl1dO2Vsc2UgYj1hW3Yuc3RhdHVzXSx2LnRoZW4oYixiKX1yZXR1cm4gdGhpc30sZC51cmw9KChhfHxkLnVybCkrIiIpLnJlcGxhY2UoYkYsIiIpLnJlcGxhY2UoYkssYlZbMV0rIi8vIiksZC5kYXRhVHlwZXM9Zi50cmltKGQuZGF0YVR5cGV8fCIqIikudG9Mb3dlckNhc2UoKS5zcGxpdChiTyksZC5jcm9zc0RvbWFpbj09bnVsbCYmKHI9YlEuZXhlYyhkLnVybC50b0xvd2VyQ2FzZSgpKSxkLmNyb3NzRG9tYWluPSEoIXJ8fHJbMV09PWJWWzFdJiZyWzJdPT1iVlsyXSYmKHJbM118fChyWzFdPT09Imh0dHA6Ij84MDo0NDMpKT09KGJWWzNdfHwoYlZbMV09PT0iaHR0cDoiPzgwOjQ0MykpKSksZC5kYXRhJiZkLnByb2Nlc3NEYXRhJiZ0eXBlb2YgZC5kYXRhIT0ic3RyaW5nIiYmKGQuZGF0YT1mLnBhcmFtKGQuZGF0YSxkLnRyYWRpdGlvbmFsKSksYlooYlMsZCxjLHYpO2lmKHM9PT0yKXJldHVybiExO3Q9ZC5nbG9iYWwsZC50eXBlPWQudHlwZS50b1VwcGVyQ2FzZSgpLGQuaGFzQ29udGVudD0hYkoudGVzdChkLnR5cGUpLHQmJmYuYWN0aXZlKys9PT0wJiZmLmV2ZW50LnRyaWdnZXIoImFqYXhTdGFydCIpO2lmKCFkLmhhc0NvbnRlbnQpe2QuZGF0YSYmKGQudXJsKz0oYkwudGVzdChkLnVybCk/IiYiOiI/IikrZC5kYXRhLGRlbGV0ZSBkLmRhdGEpLGs9ZC51cmw7aWYoZC5jYWNoZT09PSExKXt2YXIgeD1mLm5vdygpLHk9ZC51cmwucmVwbGFjZShiUCwiJDFfPSIreCk7ZC51cmw9eSsoeT09PWQudXJsPyhiTC50ZXN0KGQudXJsKT8iJiI6Ij8iKSsiXz0iK3g6IiIpfX0oZC5kYXRhJiZkLmhhc0NvbnRlbnQmJmQuY29udGVudFR5cGUhPT0hMXx8Yy5jb250ZW50VHlwZSkmJnYuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIixkLmNvbnRlbnRUeXBlKSxkLmlmTW9kaWZpZWQmJihrPWt8fGQudXJsLGYubGFzdE1vZGlmaWVkW2tdJiZ2LnNldFJlcXVlc3RIZWFkZXIoIklmLU1vZGlmaWVkLVNpbmNlIixmLmxhc3RNb2RpZmllZFtrXSksZi5ldGFnW2tdJiZ2LnNldFJlcXVlc3RIZWFkZXIoIklmLU5vbmUtTWF0Y2giLGYuZXRhZ1trXSkpLHYuc2V0UmVxdWVzdEhlYWRlcigiQWNjZXB0IixkLmRhdGFUeXBlc1swXSYmZC5hY2NlcHRzW2QuZGF0YVR5cGVzWzBdXT9kLmFjY2VwdHNbZC5kYXRhVHlwZXNbMF1dKyhkLmRhdGFUeXBlc1swXSE9PSIqIj8iLCAiK2JXKyI7IHE9MC4wMSI6IiIpOmQuYWNjZXB0c1siKiJdKTtmb3IodSBpbiBkLmhlYWRlcnMpdi5zZXRSZXF1ZXN0SGVhZGVyKHUsZC5oZWFkZXJzW3VdKTtpZihkLmJlZm9yZVNlbmQmJihkLmJlZm9yZVNlbmQuY2FsbChlLHYsZCk9PT0hMXx8cz09PTIpKXt2LmFib3J0KCk7cmV0dXJuITF9Zm9yKHUgaW57c3VjY2VzczoxLGVycm9yOjEsY29tcGxldGU6MX0pdlt1XShkW3VdKTtwPWJaKGJULGQsYyx2KTtpZighcCl3KC0xLCJObyBUcmFuc3BvcnQiKTtlbHNle3YucmVhZHlTdGF0ZT0xLHQmJmcudHJpZ2dlcigiYWpheFNlbmQiLFt2LGRdKSxkLmFzeW5jJiZkLnRpbWVvdXQ+MCYmKHE9c2V0VGltZW91dChmdW5jdGlvbigpe3YuYWJvcnQoInRpbWVvdXQiKX0sZC50aW1lb3V0KSk7dHJ5e3M9MSxwLnNlbmQobCx3KX1jYXRjaCh6KXtpZihzPDIpdygtMSx6KTtlbHNlIHRocm93IHp9fXJldHVybiB2fSxwYXJhbTpmdW5jdGlvbihhLGMpe3ZhciBkPVtdLGU9ZnVuY3Rpb24oYSxiKXtiPWYuaXNGdW5jdGlvbihiKT9iKCk6YixkW2QubGVuZ3RoXT1lbmNvZGVVUklDb21wb25lbnQoYSkrIj0iK2VuY29kZVVSSUNvbXBvbmVudChiKX07Yz09PWImJihjPWYuYWpheFNldHRpbmdzLnRyYWRpdGlvbmFsKTtpZihmLmlzQXJyYXkoYSl8fGEuanF1ZXJ5JiYhZi5pc1BsYWluT2JqZWN0KGEpKWYuZWFjaChhLGZ1bmN0aW9uKCl7ZSh0aGlzLm5hbWUsdGhpcy52YWx1ZSl9KTtlbHNlIGZvcih2YXIgZyBpbiBhKWJfKGcsYVtnXSxjLGUpO3JldHVybiBkLmpvaW4oIiYiKS5yZXBsYWNlKGJDLCIrIil9fSksZi5leHRlbmQoe2FjdGl2ZTowLGxhc3RNb2RpZmllZDp7fSxldGFnOnt9fSk7dmFyIGNjPWYubm93KCksY2Q9LyhcPSlcPygmfCQpfFw/XD8vaTtmLmFqYXhTZXR1cCh7anNvbnA6ImNhbGxiYWNrIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7cmV0dXJuIGYuZXhwYW5kbysiXyIrY2MrK319KSxmLmFqYXhQcmVmaWx0ZXIoImpzb24ganNvbnAiLGZ1bmN0aW9uKGIsYyxkKXt2YXIgZT10eXBlb2YgYi5kYXRhPT0ic3RyaW5nIiYmL15hcHBsaWNhdGlvblwveFwtd3d3XC1mb3JtXC11cmxlbmNvZGVkLy50ZXN0KGIuY29udGVudFR5cGUpO2lmKGIuZGF0YVR5cGVzWzBdPT09Impzb25wInx8Yi5qc29ucCE9PSExJiYoY2QudGVzdChiLnVybCl8fGUmJmNkLnRlc3QoYi5kYXRhKSkpe3ZhciBnLGg9Yi5qc29ucENhbGxiYWNrPWYuaXNGdW5jdGlvbihiLmpzb25wQ2FsbGJhY2spP2IuanNvbnBDYWxsYmFjaygpOmIuanNvbnBDYWxsYmFjayxpPWFbaF0saj1iLnVybCxrPWIuZGF0YSxsPSIkMSIraCsiJDIiO2IuanNvbnAhPT0hMSYmKGo9ai5yZXBsYWNlKGNkLGwpLGIudXJsPT09aiYmKGUmJihrPWsucmVwbGFjZShjZCxsKSksYi5kYXRhPT09ayYmKGorPSgvXD8vLnRlc3Qoaik/IiYiOiI/IikrYi5qc29ucCsiPSIraCkpKSxiLnVybD1qLGIuZGF0YT1rLGFbaF09ZnVuY3Rpb24oYSl7Zz1bYV19LGQuYWx3YXlzKGZ1bmN0aW9uKCl7YVtoXT1pLGcmJmYuaXNGdW5jdGlvbihpKSYmYVtoXShnWzBdKX0pLGIuY29udmVydGVyc1sic2NyaXB0IGpzb24iXT1mdW5jdGlvbigpe2d8fGYuZXJyb3IoaCsiIHdhcyBub3QgY2FsbGVkIik7cmV0dXJuIGdbMF19LGIuZGF0YVR5cGVzWzBdPSJqc29uIjtyZXR1cm4ic2NyaXB0In19KSxmLmFqYXhTZXR1cCh7YWNjZXB0czp7c2NyaXB0OiJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdCJ9LGNvbnRlbnRzOntzY3JpcHQ6L2phdmFzY3JpcHR8ZWNtYXNjcmlwdC99LGNvbnZlcnRlcnM6eyJ0ZXh0IHNjcmlwdCI6ZnVuY3Rpb24oYSl7Zi5nbG9iYWxFdmFsKGEpO3JldHVybiBhfX19KSxmLmFqYXhQcmVmaWx0ZXIoInNjcmlwdCIsZnVuY3Rpb24oYSl7YS5jYWNoZT09PWImJihhLmNhY2hlPSExKSxhLmNyb3NzRG9tYWluJiYoYS50eXBlPSJHRVQiLGEuZ2xvYmFsPSExKX0pLGYuYWpheFRyYW5zcG9ydCgic2NyaXB0IixmdW5jdGlvbihhKXtpZihhLmNyb3NzRG9tYWluKXt2YXIgZCxlPWMuaGVhZHx8Yy5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdfHxjLmRvY3VtZW50RWxlbWVudDtyZXR1cm57c2VuZDpmdW5jdGlvbihmLGcpe2Q9Yy5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKSxkLmFzeW5jPSJhc3luYyIsYS5zY3JpcHRDaGFyc2V0JiYoZC5jaGFyc2V0PWEuc2NyaXB0Q2hhcnNldCksZC5zcmM9YS51cmwsZC5vbmxvYWQ9ZC5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oYSxjKXtpZihjfHwhZC5yZWFkeVN0YXRlfHwvbG9hZGVkfGNvbXBsZXRlLy50ZXN0KGQucmVhZHlTdGF0ZSkpZC5vbmxvYWQ9ZC5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbCxlJiZkLnBhcmVudE5vZGUmJmUucmVtb3ZlQ2hpbGQoZCksZD1iLGN8fGcoMjAwLCJzdWNjZXNzIil9LGUuaW5zZXJ0QmVmb3JlKGQsZS5maXJzdENoaWxkKX0sYWJvcnQ6ZnVuY3Rpb24oKXtkJiZkLm9ubG9hZCgwLDEpfX19fSk7dmFyIGNlPWEuQWN0aXZlWE9iamVjdD9mdW5jdGlvbigpe2Zvcih2YXIgYSBpbiBjZyljZ1thXSgwLDEpfTohMSxjZj0wLGNnO2YuYWpheFNldHRpbmdzLnhocj1hLkFjdGl2ZVhPYmplY3Q/ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5pc0xvY2FsJiZjaCgpfHxjaSgpfTpjaCxmdW5jdGlvbihhKXtmLmV4dGVuZChmLnN1cHBvcnQse2FqYXg6ISFhLGNvcnM6ISFhJiYid2l0aENyZWRlbnRpYWxzImluIGF9KX0oZi5hamF4U2V0dGluZ3MueGhyKCkpLGYuc3VwcG9ydC5hamF4JiZmLmFqYXhUcmFuc3BvcnQoZnVuY3Rpb24oYyl7aWYoIWMuY3Jvc3NEb21haW58fGYuc3VwcG9ydC5jb3JzKXt2YXIgZDtyZXR1cm57c2VuZDpmdW5jdGlvbihlLGcpe3ZhciBoPWMueGhyKCksaSxqO2MudXNlcm5hbWU/aC5vcGVuKGMudHlwZSxjLnVybCxjLmFzeW5jLGMudXNlcm5hbWUsYy5wYXNzd29yZCk6aC5vcGVuKGMudHlwZSxjLnVybCxjLmFzeW5jKTtpZihjLnhockZpZWxkcylmb3IoaiBpbiBjLnhockZpZWxkcyloW2pdPWMueGhyRmllbGRzW2pdO2MubWltZVR5cGUmJmgub3ZlcnJpZGVNaW1lVHlwZSYmaC5vdmVycmlkZU1pbWVUeXBlKGMubWltZVR5cGUpLCFjLmNyb3NzRG9tYWluJiYhZVsiWC1SZXF1ZXN0ZWQtV2l0aCJdJiYoZVsiWC1SZXF1ZXN0ZWQtV2l0aCJdPSJYTUxIdHRwUmVxdWVzdCIpO3RyeXtmb3IoaiBpbiBlKWguc2V0UmVxdWVzdEhlYWRlcihqLGVbal0pfWNhdGNoKGspe31oLnNlbmQoYy5oYXNDb250ZW50JiZjLmRhdGF8fG51bGwpLGQ9ZnVuY3Rpb24oYSxlKXt2YXIgaixrLGwsbSxuO3RyeXtpZihkJiYoZXx8aC5yZWFkeVN0YXRlPT09NCkpe2Q9YixpJiYoaC5vbnJlYWR5c3RhdGVjaGFuZ2U9Zi5ub29wLGNlJiZkZWxldGUgY2dbaV0pO2lmKGUpaC5yZWFkeVN0YXRlIT09NCYmaC5hYm9ydCgpO2Vsc2V7aj1oLnN0YXR1cyxsPWguZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCksbT17fSxuPWgucmVzcG9uc2VYTUwsbiYmbi5kb2N1bWVudEVsZW1lbnQmJihtLnhtbD1uKTt0cnl7bS50ZXh0PWgucmVzcG9uc2VUZXh0fWNhdGNoKGEpe310cnl7az1oLnN0YXR1c1RleHR9Y2F0Y2gobyl7az0iIn0haiYmYy5pc0xvY2FsJiYhYy5jcm9zc0RvbWFpbj9qPW0udGV4dD8yMDA6NDA0Omo9PT0xMjIzJiYoaj0yMDQpfX19Y2F0Y2gocCl7ZXx8ZygtMSxwKX1tJiZnKGosayxtLGwpfSwhYy5hc3luY3x8aC5yZWFkeVN0YXRlPT09ND9kKCk6KGk9KytjZixjZSYmKGNnfHwoY2c9e30sZihhKS51bmxvYWQoY2UpKSxjZ1tpXT1kKSxoLm9ucmVhZHlzdGF0ZWNoYW5nZT1kKX0sYWJvcnQ6ZnVuY3Rpb24oKXtkJiZkKDAsMSl9fX19KTt2YXIgY2o9e30sY2ssY2wsY209L14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLGNuPS9eKFsrXC1dPSk/KFtcZCsuXC1dKykoW2EteiVdKikkL2ksY28sY3A9W1siaGVpZ2h0IiwibWFyZ2luVG9wIiwibWFyZ2luQm90dG9tIiwicGFkZGluZ1RvcCIsInBhZGRpbmdCb3R0b20iXSxbIndpZHRoIiwibWFyZ2luTGVmdCIsIm1hcmdpblJpZ2h0IiwicGFkZGluZ0xlZnQiLCJwYWRkaW5nUmlnaHQiXSxbIm9wYWNpdHkiXV0sY3E7Zi5mbi5leHRlbmQoe3Nob3c6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU7aWYoYXx8YT09PTApcmV0dXJuIHRoaXMuYW5pbWF0ZShjdCgic2hvdyIsMyksYSxiLGMpO2Zvcih2YXIgZz0wLGg9dGhpcy5sZW5ndGg7ZzxoO2crKylkPXRoaXNbZ10sZC5zdHlsZSYmKGU9ZC5zdHlsZS5kaXNwbGF5LCFmLl9kYXRhKGQsIm9sZGRpc3BsYXkiKSYmZT09PSJub25lIiYmKGU9ZC5zdHlsZS5kaXNwbGF5PSIiKSwoZT09PSIiJiZmLmNzcyhkLCJkaXNwbGF5Iik9PT0ibm9uZSJ8fCFmLmNvbnRhaW5zKGQub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsZCkpJiZmLl9kYXRhKGQsIm9sZGRpc3BsYXkiLGN1KGQubm9kZU5hbWUpKSk7Zm9yKGc9MDtnPGg7ZysrKXtkPXRoaXNbZ107aWYoZC5zdHlsZSl7ZT1kLnN0eWxlLmRpc3BsYXk7aWYoZT09PSIifHxlPT09Im5vbmUiKWQuc3R5bGUuZGlzcGxheT1mLl9kYXRhKGQsIm9sZGRpc3BsYXkiKXx8IiJ9fXJldHVybiB0aGlzfSxoaWRlOmZ1bmN0aW9uKGEsYixjKXtpZihhfHxhPT09MClyZXR1cm4gdGhpcy5hbmltYXRlKGN0KCJoaWRlIiwzKSxhLGIsYyk7dmFyIGQsZSxnPTAsaD10aGlzLmxlbmd0aDtmb3IoO2c8aDtnKyspZD10aGlzW2ddLGQuc3R5bGUmJihlPWYuY3NzKGQsImRpc3BsYXkiKSxlIT09Im5vbmUiJiYhZi5fZGF0YShkLCJvbGRkaXNwbGF5IikmJmYuX2RhdGEoZCwib2xkZGlzcGxheSIsZSkpO2ZvcihnPTA7ZzxoO2crKyl0aGlzW2ddLnN0eWxlJiYodGhpc1tnXS5zdHlsZS5kaXNwbGF5PSJub25lIik7cmV0dXJuIHRoaXN9LF90b2dnbGU6Zi5mbi50b2dnbGUsdG9nZ2xlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10eXBlb2YgYT09ImJvb2xlYW4iO2YuaXNGdW5jdGlvbihhKSYmZi5pc0Z1bmN0aW9uKGIpP3RoaXMuX3RvZ2dsZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk6YT09bnVsbHx8ZD90aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYj1kP2E6Zih0aGlzKS5pcygiOmhpZGRlbiIpO2YodGhpcylbYj8ic2hvdyI6ImhpZGUiXSgpfSk6dGhpcy5hbmltYXRlKGN0KCJ0b2dnbGUiLDMpLGEsYixjKTtyZXR1cm4gdGhpc30sZmFkZVRvOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmZpbHRlcigiOmhpZGRlbiIpLmNzcygib3BhY2l0eSIsMCkuc2hvdygpLmVuZCgpLmFuaW1hdGUoe29wYWNpdHk6Yn0sYSxjLGQpfSxhbmltYXRlOmZ1bmN0aW9uKGEsYixjLGQpe2Z1bmN0aW9uIGcoKXtlLnF1ZXVlPT09ITEmJmYuX21hcmsodGhpcyk7dmFyIGI9Zi5leHRlbmQoe30sZSksYz10aGlzLm5vZGVUeXBlPT09MSxkPWMmJmYodGhpcykuaXMoIjpoaWRkZW4iKSxnLGgsaSxqLGssbCxtLG4sbyxwLHE7Yi5hbmltYXRlZFByb3BlcnRpZXM9e307Zm9yKGkgaW4gYSl7Zz1mLmNhbWVsQ2FzZShpKSxpIT09ZyYmKGFbZ109YVtpXSxkZWxldGUgYVtpXSk7aWYoKGs9Zi5jc3NIb29rc1tnXSkmJiJleHBhbmQiaW4gayl7bD1rLmV4cGFuZChhW2ddKSxkZWxldGUgYVtnXTtmb3IoaSBpbiBsKWkgaW4gYXx8KGFbaV09bFtpXSl9fWZvcihnIGluIGEpe2g9YVtnXSxmLmlzQXJyYXkoaCk/KGIuYW5pbWF0ZWRQcm9wZXJ0aWVzW2ddPWhbMV0saD1hW2ddPWhbMF0pOmIuYW5pbWF0ZWRQcm9wZXJ0aWVzW2ddPWIuc3BlY2lhbEVhc2luZyYmYi5zcGVjaWFsRWFzaW5nW2ddfHxiLmVhc2luZ3x8InN3aW5nIjtpZihoPT09ImhpZGUiJiZkfHxoPT09InNob3ciJiYhZClyZXR1cm4gYi5jb21wbGV0ZS5jYWxsKHRoaXMpO2MmJihnPT09ImhlaWdodCJ8fGc9PT0id2lkdGgiKSYmKGIub3ZlcmZsb3c9W3RoaXMuc3R5bGUub3ZlcmZsb3csdGhpcy5zdHlsZS5vdmVyZmxvd1gsdGhpcy5zdHlsZS5vdmVyZmxvd1ldLGYuY3NzKHRoaXMsImRpc3BsYXkiKT09PSJpbmxpbmUiJiZmLmNzcyh0aGlzLCJmbG9hdCIpPT09Im5vbmUiJiYoIWYuc3VwcG9ydC5pbmxpbmVCbG9ja05lZWRzTGF5b3V0fHxjdSh0aGlzLm5vZGVOYW1lKT09PSJpbmxpbmUiP3RoaXMuc3R5bGUuZGlzcGxheT0iaW5saW5lLWJsb2NrIjp0aGlzLnN0eWxlLnpvb209MSkpfWIub3ZlcmZsb3chPW51bGwmJih0aGlzLnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iKTtmb3IoaSBpbiBhKWo9bmV3IGYuZngodGhpcyxiLGkpLGg9YVtpXSxjbS50ZXN0KGgpPyhxPWYuX2RhdGEodGhpcywidG9nZ2xlIitpKXx8KGg9PT0idG9nZ2xlIj9kPyJzaG93IjoiaGlkZSI6MCkscT8oZi5fZGF0YSh0aGlzLCJ0b2dnbGUiK2kscT09PSJzaG93Ij8iaGlkZSI6InNob3ciKSxqW3FdKCkpOmpbaF0oKSk6KG09Y24uZXhlYyhoKSxuPWouY3VyKCksbT8obz1wYXJzZUZsb2F0KG1bMl0pLHA9bVszXXx8KGYuY3NzTnVtYmVyW2ldPyIiOiJweCIpLHAhPT0icHgiJiYoZi5zdHlsZSh0aGlzLGksKG98fDEpK3ApLG49KG98fDEpL2ouY3VyKCkqbixmLnN0eWxlKHRoaXMsaSxuK3ApKSxtWzFdJiYobz0obVsxXT09PSItPSI/LTE6MSkqbytuKSxqLmN1c3RvbShuLG8scCkpOmouY3VzdG9tKG4saCwiIikpO3JldHVybiEwfXZhciBlPWYuc3BlZWQoYixjLGQpO2lmKGYuaXNFbXB0eU9iamVjdChhKSlyZXR1cm4gdGhpcy5lYWNoKGUuY29tcGxldGUsWyExXSk7YT1mLmV4dGVuZCh7fSxhKTtyZXR1cm4gZS5xdWV1ZT09PSExP3RoaXMuZWFjaChnKTp0aGlzLnF1ZXVlKGUucXVldWUsZyl9LHN0b3A6ZnVuY3Rpb24oYSxjLGQpe3R5cGVvZiBhIT0ic3RyaW5nIiYmKGQ9YyxjPWEsYT1iKSxjJiZhIT09ITEmJnRoaXMucXVldWUoYXx8ImZ4IixbXSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2Z1bmN0aW9uIGgoYSxiLGMpe3ZhciBlPWJbY107Zi5yZW1vdmVEYXRhKGEsYywhMCksZS5zdG9wKGQpfXZhciBiLGM9ITEsZT1mLnRpbWVycyxnPWYuX2RhdGEodGhpcyk7ZHx8Zi5fdW5tYXJrKCEwLHRoaXMpO2lmKGE9PW51bGwpZm9yKGIgaW4gZylnW2JdJiZnW2JdLnN0b3AmJmIuaW5kZXhPZigiLnJ1biIpPT09Yi5sZW5ndGgtNCYmaCh0aGlzLGcsYik7ZWxzZSBnW2I9YSsiLnJ1biJdJiZnW2JdLnN0b3AmJmgodGhpcyxnLGIpO2ZvcihiPWUubGVuZ3RoO2ItLTspZVtiXS5lbGVtPT09dGhpcyYmKGE9PW51bGx8fGVbYl0ucXVldWU9PT1hKSYmKGQ/ZVtiXSghMCk6ZVtiXS5zYXZlU3RhdGUoKSxjPSEwLGUuc3BsaWNlKGIsMSkpOyghZHx8IWMpJiZmLmRlcXVldWUodGhpcyxhKX0pfX0pLGYuZWFjaCh7c2xpZGVEb3duOmN0KCJzaG93IiwxKSxzbGlkZVVwOmN0KCJoaWRlIiwxKSxzbGlkZVRvZ2dsZTpjdCgidG9nZ2xlIiwxKSxmYWRlSW46e29wYWNpdHk6InNob3cifSxmYWRlT3V0OntvcGFjaXR5OiJoaWRlIn0sZmFkZVRvZ2dsZTp7b3BhY2l0eToidG9nZ2xlIn19LGZ1bmN0aW9uKGEsYil7Zi5mblthXT1mdW5jdGlvbihhLGMsZCl7cmV0dXJuIHRoaXMuYW5pbWF0ZShiLGEsYyxkKX19KSxmLmV4dGVuZCh7c3BlZWQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEmJnR5cGVvZiBhPT0ib2JqZWN0Ij9mLmV4dGVuZCh7fSxhKTp7Y29tcGxldGU6Y3x8IWMmJmJ8fGYuaXNGdW5jdGlvbihhKSYmYSxkdXJhdGlvbjphLGVhc2luZzpjJiZifHxiJiYhZi5pc0Z1bmN0aW9uKGIpJiZifTtkLmR1cmF0aW9uPWYuZngub2ZmPzA6dHlwZW9mIGQuZHVyYXRpb249PSJudW1iZXIiP2QuZHVyYXRpb246ZC5kdXJhdGlvbiBpbiBmLmZ4LnNwZWVkcz9mLmZ4LnNwZWVkc1tkLmR1cmF0aW9uXTpmLmZ4LnNwZWVkcy5fZGVmYXVsdDtpZihkLnF1ZXVlPT1udWxsfHxkLnF1ZXVlPT09ITApZC5xdWV1ZT0iZngiO2Qub2xkPWQuY29tcGxldGUsZC5jb21wbGV0ZT1mdW5jdGlvbihhKXtmLmlzRnVuY3Rpb24oZC5vbGQpJiZkLm9sZC5jYWxsKHRoaXMpLGQucXVldWU/Zi5kZXF1ZXVlKHRoaXMsZC5xdWV1ZSk6YSE9PSExJiZmLl91bm1hcmsodGhpcyl9O3JldHVybiBkfSxlYXNpbmc6e2xpbmVhcjpmdW5jdGlvbihhKXtyZXR1cm4gYX0sc3dpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuLU1hdGguY29zKGEqTWF0aC5QSSkvMisuNX19LHRpbWVyczpbXSxmeDpmdW5jdGlvbihhLGIsYyl7dGhpcy5vcHRpb25zPWIsdGhpcy5lbGVtPWEsdGhpcy5wcm9wPWMsYi5vcmlnPWIub3JpZ3x8e319fSksZi5meC5wcm90b3R5cGU9e3VwZGF0ZTpmdW5jdGlvbigpe3RoaXMub3B0aW9ucy5zdGVwJiZ0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKHRoaXMuZWxlbSx0aGlzLm5vdyx0aGlzKSwoZi5meC5zdGVwW3RoaXMucHJvcF18fGYuZnguc3RlcC5fZGVmYXVsdCkodGhpcyl9LGN1cjpmdW5jdGlvbigpe2lmKHRoaXMuZWxlbVt0aGlzLnByb3BdIT1udWxsJiYoIXRoaXMuZWxlbS5zdHlsZXx8dGhpcy5lbGVtLnN0eWxlW3RoaXMucHJvcF09PW51bGwpKXJldHVybiB0aGlzLmVsZW1bdGhpcy5wcm9wXTt2YXIgYSxiPWYuY3NzKHRoaXMuZWxlbSx0aGlzLnByb3ApO3JldHVybiBpc05hTihhPXBhcnNlRmxvYXQoYikpPyFifHxiPT09ImF1dG8iPzA6YjphfSxjdXN0b206ZnVuY3Rpb24oYSxjLGQpe2Z1bmN0aW9uIGgoYSl7cmV0dXJuIGUuc3RlcChhKX12YXIgZT10aGlzLGc9Zi5meDt0aGlzLnN0YXJ0VGltZT1jcXx8Y3IoKSx0aGlzLmVuZD1jLHRoaXMubm93PXRoaXMuc3RhcnQ9YSx0aGlzLnBvcz10aGlzLnN0YXRlPTAsdGhpcy51bml0PWR8fHRoaXMudW5pdHx8KGYuY3NzTnVtYmVyW3RoaXMucHJvcF0/IiI6InB4IiksaC5xdWV1ZT10aGlzLm9wdGlvbnMucXVldWUsaC5lbGVtPXRoaXMuZWxlbSxoLnNhdmVTdGF0ZT1mdW5jdGlvbigpe2YuX2RhdGEoZS5lbGVtLCJmeHNob3ciK2UucHJvcCk9PT1iJiYoZS5vcHRpb25zLmhpZGU/Zi5fZGF0YShlLmVsZW0sImZ4c2hvdyIrZS5wcm9wLGUuc3RhcnQpOmUub3B0aW9ucy5zaG93JiZmLl9kYXRhKGUuZWxlbSwiZnhzaG93IitlLnByb3AsZS5lbmQpKX0saCgpJiZmLnRpbWVycy5wdXNoKGgpJiYhY28mJihjbz1zZXRJbnRlcnZhbChnLnRpY2ssZy5pbnRlcnZhbCkpfSxzaG93OmZ1bmN0aW9uKCl7dmFyIGE9Zi5fZGF0YSh0aGlzLmVsZW0sImZ4c2hvdyIrdGhpcy5wcm9wKTt0aGlzLm9wdGlvbnMub3JpZ1t0aGlzLnByb3BdPWF8fGYuc3R5bGUodGhpcy5lbGVtLHRoaXMucHJvcCksdGhpcy5vcHRpb25zLnNob3c9ITAsYSE9PWI/dGhpcy5jdXN0b20odGhpcy5jdXIoKSxhKTp0aGlzLmN1c3RvbSh0aGlzLnByb3A9PT0id2lkdGgifHx0aGlzLnByb3A9PT0iaGVpZ2h0Ij8xOjAsdGhpcy5jdXIoKSksZih0aGlzLmVsZW0pLnNob3coKX0saGlkZTpmdW5jdGlvbigpe3RoaXMub3B0aW9ucy5vcmlnW3RoaXMucHJvcF09Zi5fZGF0YSh0aGlzLmVsZW0sImZ4c2hvdyIrdGhpcy5wcm9wKXx8Zi5zdHlsZSh0aGlzLmVsZW0sdGhpcy5wcm9wKSx0aGlzLm9wdGlvbnMuaGlkZT0hMCx0aGlzLmN1c3RvbSh0aGlzLmN1cigpLDApfSxzdGVwOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlPWNxfHxjcigpLGc9ITAsaD10aGlzLmVsZW0saT10aGlzLm9wdGlvbnM7aWYoYXx8ZT49aS5kdXJhdGlvbit0aGlzLnN0YXJ0VGltZSl7dGhpcy5ub3c9dGhpcy5lbmQsdGhpcy5wb3M9dGhpcy5zdGF0ZT0xLHRoaXMudXBkYXRlKCksaS5hbmltYXRlZFByb3BlcnRpZXNbdGhpcy5wcm9wXT0hMDtmb3IoYiBpbiBpLmFuaW1hdGVkUHJvcGVydGllcylpLmFuaW1hdGVkUHJvcGVydGllc1tiXSE9PSEwJiYoZz0hMSk7aWYoZyl7aS5vdmVyZmxvdyE9bnVsbCYmIWYuc3VwcG9ydC5zaHJpbmtXcmFwQmxvY2tzJiZmLmVhY2goWyIiLCJYIiwiWSJdLGZ1bmN0aW9uKGEsYil7aC5zdHlsZVsib3ZlcmZsb3ciK2JdPWkub3ZlcmZsb3dbYV19KSxpLmhpZGUmJmYoaCkuaGlkZSgpO2lmKGkuaGlkZXx8aS5zaG93KWZvcihiIGluIGkuYW5pbWF0ZWRQcm9wZXJ0aWVzKWYuc3R5bGUoaCxiLGkub3JpZ1tiXSksZi5yZW1vdmVEYXRhKGgsImZ4c2hvdyIrYiwhMCksZi5yZW1vdmVEYXRhKGgsInRvZ2dsZSIrYiwhMCk7ZD1pLmNvbXBsZXRlLGQmJihpLmNvbXBsZXRlPSExLGQuY2FsbChoKSl9cmV0dXJuITF9aS5kdXJhdGlvbj09SW5maW5pdHk/dGhpcy5ub3c9ZTooYz1lLXRoaXMuc3RhcnRUaW1lLHRoaXMuc3RhdGU9Yy9pLmR1cmF0aW9uLHRoaXMucG9zPWYuZWFzaW5nW2kuYW5pbWF0ZWRQcm9wZXJ0aWVzW3RoaXMucHJvcF1dKHRoaXMuc3RhdGUsYywwLDEsaS5kdXJhdGlvbiksdGhpcy5ub3c9dGhpcy5zdGFydCsodGhpcy5lbmQtdGhpcy5zdGFydCkqdGhpcy5wb3MpLHRoaXMudXBkYXRlKCk7cmV0dXJuITB9fSxmLmV4dGVuZChmLmZ4LHt0aWNrOmZ1bmN0aW9uKCl7dmFyIGEsYj1mLnRpbWVycyxjPTA7Zm9yKDtjPGIubGVuZ3RoO2MrKylhPWJbY10sIWEoKSYmYltjXT09PWEmJmIuc3BsaWNlKGMtLSwxKTtiLmxlbmd0aHx8Zi5meC5zdG9wKCl9LGludGVydmFsOjEzLHN0b3A6ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKGNvKSxjbz1udWxsfSxzcGVlZHM6e3Nsb3c6NjAwLGZhc3Q6MjAwLF9kZWZhdWx0OjQwMH0sc3RlcDp7b3BhY2l0eTpmdW5jdGlvbihhKXtmLnN0eWxlKGEuZWxlbSwib3BhY2l0eSIsYS5ub3cpfSxfZGVmYXVsdDpmdW5jdGlvbihhKXthLmVsZW0uc3R5bGUmJmEuZWxlbS5zdHlsZVthLnByb3BdIT1udWxsP2EuZWxlbS5zdHlsZVthLnByb3BdPWEubm93K2EudW5pdDphLmVsZW1bYS5wcm9wXT1hLm5vd319fSksZi5lYWNoKGNwLmNvbmNhdC5hcHBseShbXSxjcCksZnVuY3Rpb24oYSxiKXtiLmluZGV4T2YoIm1hcmdpbiIpJiYoZi5meC5zdGVwW2JdPWZ1bmN0aW9uKGEpe2Yuc3R5bGUoYS5lbGVtLGIsTWF0aC5tYXgoMCxhLm5vdykrYS51bml0KX0pfSksZi5leHByJiZmLmV4cHIuZmlsdGVycyYmKGYuZXhwci5maWx0ZXJzLmFuaW1hdGVkPWZ1bmN0aW9uKGEpe3JldHVybiBmLmdyZXAoZi50aW1lcnMsZnVuY3Rpb24oYil7cmV0dXJuIGE9PT1iLmVsZW19KS5sZW5ndGh9KTt2YXIgY3YsY3c9L150KD86YWJsZXxkfGgpJC9pLGN4PS9eKD86Ym9keXxodG1sKSQvaTsiZ2V0Qm91bmRpbmdDbGllbnRSZWN0ImluIGMuZG9jdW1lbnRFbGVtZW50P2N2PWZ1bmN0aW9uKGEsYixjLGQpe3RyeXtkPWEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCl9Y2F0Y2goZSl7fWlmKCFkfHwhZi5jb250YWlucyhjLGEpKXJldHVybiBkP3t0b3A6ZC50b3AsbGVmdDpkLmxlZnR9Ont0b3A6MCxsZWZ0OjB9O3ZhciBnPWIuYm9keSxoPWN5KGIpLGk9Yy5jbGllbnRUb3B8fGcuY2xpZW50VG9wfHwwLGo9Yy5jbGllbnRMZWZ0fHxnLmNsaWVudExlZnR8fDAsaz1oLnBhZ2VZT2Zmc2V0fHxmLnN1cHBvcnQuYm94TW9kZWwmJmMuc2Nyb2xsVG9wfHxnLnNjcm9sbFRvcCxsPWgucGFnZVhPZmZzZXR8fGYuc3VwcG9ydC5ib3hNb2RlbCYmYy5zY3JvbGxMZWZ0fHxnLnNjcm9sbExlZnQsbT1kLnRvcCtrLWksbj1kLmxlZnQrbC1qO3JldHVybnt0b3A6bSxsZWZ0Om59fTpjdj1mdW5jdGlvbihhLGIsYyl7dmFyIGQsZT1hLm9mZnNldFBhcmVudCxnPWEsaD1iLmJvZHksaT1iLmRlZmF1bHRWaWV3LGo9aT9pLmdldENvbXB1dGVkU3R5bGUoYSxudWxsKTphLmN1cnJlbnRTdHlsZSxrPWEub2Zmc2V0VG9wLGw9YS5vZmZzZXRMZWZ0O3doaWxlKChhPWEucGFyZW50Tm9kZSkmJmEhPT1oJiZhIT09Yyl7aWYoZi5zdXBwb3J0LmZpeGVkUG9zaXRpb24mJmoucG9zaXRpb249PT0iZml4ZWQiKWJyZWFrO2Q9aT9pLmdldENvbXB1dGVkU3R5bGUoYSxudWxsKTphLmN1cnJlbnRTdHlsZSxrLT1hLnNjcm9sbFRvcCxsLT1hLnNjcm9sbExlZnQsYT09PWUmJihrKz1hLm9mZnNldFRvcCxsKz1hLm9mZnNldExlZnQsZi5zdXBwb3J0LmRvZXNOb3RBZGRCb3JkZXImJighZi5zdXBwb3J0LmRvZXNBZGRCb3JkZXJGb3JUYWJsZUFuZENlbGxzfHwhY3cudGVzdChhLm5vZGVOYW1lKSkmJihrKz1wYXJzZUZsb2F0KGQuYm9yZGVyVG9wV2lkdGgpfHwwLGwrPXBhcnNlRmxvYXQoZC5ib3JkZXJMZWZ0V2lkdGgpfHwwKSxnPWUsZT1hLm9mZnNldFBhcmVudCksZi5zdXBwb3J0LnN1YnRyYWN0c0JvcmRlckZvck92ZXJmbG93Tm90VmlzaWJsZSYmZC5vdmVyZmxvdyE9PSJ2aXNpYmxlIiYmKGsrPXBhcnNlRmxvYXQoZC5ib3JkZXJUb3BXaWR0aCl8fDAsbCs9cGFyc2VGbG9hdChkLmJvcmRlckxlZnRXaWR0aCl8fDApLGo9ZH1pZihqLnBvc2l0aW9uPT09InJlbGF0aXZlInx8ai5wb3NpdGlvbj09PSJzdGF0aWMiKWsrPWgub2Zmc2V0VG9wLGwrPWgub2Zmc2V0TGVmdDtmLnN1cHBvcnQuZml4ZWRQb3NpdGlvbiYmai5wb3NpdGlvbj09PSJmaXhlZCImJihrKz1NYXRoLm1heChjLnNjcm9sbFRvcCxoLnNjcm9sbFRvcCksbCs9TWF0aC5tYXgoYy5zY3JvbGxMZWZ0LGguc2Nyb2xsTGVmdCkpO3JldHVybnt0b3A6ayxsZWZ0Omx9fSxmLmZuLm9mZnNldD1mdW5jdGlvbihhKXtpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiBhPT09Yj90aGlzOnRoaXMuZWFjaChmdW5jdGlvbihiKXtmLm9mZnNldC5zZXRPZmZzZXQodGhpcyxhLGIpfSk7dmFyIGM9dGhpc1swXSxkPWMmJmMub3duZXJEb2N1bWVudDtpZighZClyZXR1cm4gbnVsbDtpZihjPT09ZC5ib2R5KXJldHVybiBmLm9mZnNldC5ib2R5T2Zmc2V0KGMpO3JldHVybiBjdihjLGQsZC5kb2N1bWVudEVsZW1lbnQpfSxmLm9mZnNldD17Ym9keU9mZnNldDpmdW5jdGlvbihhKXt2YXIgYj1hLm9mZnNldFRvcCxjPWEub2Zmc2V0TGVmdDtmLnN1cHBvcnQuZG9lc05vdEluY2x1ZGVNYXJnaW5JbkJvZHlPZmZzZXQmJihiKz1wYXJzZUZsb2F0KGYuY3NzKGEsIm1hcmdpblRvcCIpKXx8MCxjKz1wYXJzZUZsb2F0KGYuY3NzKGEsIm1hcmdpbkxlZnQiKSl8fDApO3JldHVybnt0b3A6YixsZWZ0OmN9fSxzZXRPZmZzZXQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWYuY3NzKGEsInBvc2l0aW9uIik7ZD09PSJzdGF0aWMiJiYoYS5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiKTt2YXIgZT1mKGEpLGc9ZS5vZmZzZXQoKSxoPWYuY3NzKGEsInRvcCIpLGk9Zi5jc3MoYSwibGVmdCIpLGo9KGQ9PT0iYWJzb2x1dGUifHxkPT09ImZpeGVkIikmJmYuaW5BcnJheSgiYXV0byIsW2gsaV0pPi0xLGs9e30sbD17fSxtLG47aj8obD1lLnBvc2l0aW9uKCksbT1sLnRvcCxuPWwubGVmdCk6KG09cGFyc2VGbG9hdChoKXx8MCxuPXBhcnNlRmxvYXQoaSl8fDApLGYuaXNGdW5jdGlvbihiKSYmKGI9Yi5jYWxsKGEsYyxnKSksYi50b3AhPW51bGwmJihrLnRvcD1iLnRvcC1nLnRvcCttKSxiLmxlZnQhPW51bGwmJihrLmxlZnQ9Yi5sZWZ0LWcubGVmdCtuKSwidXNpbmciaW4gYj9iLnVzaW5nLmNhbGwoYSxrKTplLmNzcyhrKX19LGYuZm4uZXh0ZW5kKHtwb3NpdGlvbjpmdW5jdGlvbigpe2lmKCF0aGlzWzBdKXJldHVybiBudWxsO3ZhciBhPXRoaXNbMF0sYj10aGlzLm9mZnNldFBhcmVudCgpLGM9dGhpcy5vZmZzZXQoKSxkPWN4LnRlc3QoYlswXS5ub2RlTmFtZSk/e3RvcDowLGxlZnQ6MH06Yi5vZmZzZXQoKTtjLnRvcC09cGFyc2VGbG9hdChmLmNzcyhhLCJtYXJnaW5Ub3AiKSl8fDAsYy5sZWZ0LT1wYXJzZUZsb2F0KGYuY3NzKGEsIm1hcmdpbkxlZnQiKSl8fDAsZC50b3ArPXBhcnNlRmxvYXQoZi5jc3MoYlswXSwiYm9yZGVyVG9wV2lkdGgiKSl8fDAsZC5sZWZ0Kz1wYXJzZUZsb2F0KGYuY3NzKGJbMF0sImJvcmRlckxlZnRXaWR0aCIpKXx8MDtyZXR1cm57dG9wOmMudG9wLWQudG9wLGxlZnQ6Yy5sZWZ0LWQubGVmdH19LG9mZnNldFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBhPXRoaXMub2Zmc2V0UGFyZW50fHxjLmJvZHk7d2hpbGUoYSYmIWN4LnRlc3QoYS5ub2RlTmFtZSkmJmYuY3NzKGEsInBvc2l0aW9uIik9PT0ic3RhdGljIilhPWEub2Zmc2V0UGFyZW50O3JldHVybiBhfSl9fSksZi5lYWNoKHtzY3JvbGxMZWZ0OiJwYWdlWE9mZnNldCIsc2Nyb2xsVG9wOiJwYWdlWU9mZnNldCJ9LGZ1bmN0aW9uKGEsYyl7dmFyIGQ9L1kvLnRlc3QoYyk7Zi5mblthXT1mdW5jdGlvbihlKXtyZXR1cm4gZi5hY2Nlc3ModGhpcyxmdW5jdGlvbihhLGUsZyl7dmFyIGg9Y3koYSk7aWYoZz09PWIpcmV0dXJuIGg/YyBpbiBoP2hbY106Zi5zdXBwb3J0LmJveE1vZGVsJiZoLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFtlXXx8aC5kb2N1bWVudC5ib2R5W2VdOmFbZV07aD9oLnNjcm9sbFRvKGQ/ZihoKS5zY3JvbGxMZWZ0KCk6ZyxkP2c6ZihoKS5zY3JvbGxUb3AoKSk6YVtlXT1nfSxhLGUsYXJndW1lbnRzLmxlbmd0aCxudWxsKX19KSxmLmVhY2goe0hlaWdodDoiaGVpZ2h0IixXaWR0aDoid2lkdGgifSxmdW5jdGlvbihhLGMpe3ZhciBkPSJjbGllbnQiK2EsZT0ic2Nyb2xsIithLGc9Im9mZnNldCIrYTtmLmZuWyJpbm5lciIrYV09ZnVuY3Rpb24oKXt2YXIgYT10aGlzWzBdO3JldHVybiBhP2Euc3R5bGU/cGFyc2VGbG9hdChmLmNzcyhhLGMsInBhZGRpbmciKSk6dGhpc1tjXSgpOm51bGx9LGYuZm5bIm91dGVyIithXT1mdW5jdGlvbihhKXt2YXIgYj10aGlzWzBdO3JldHVybiBiP2Iuc3R5bGU/cGFyc2VGbG9hdChmLmNzcyhiLGMsYT8ibWFyZ2luIjoiYm9yZGVyIikpOnRoaXNbY10oKTpudWxsfSxmLmZuW2NdPWZ1bmN0aW9uKGEpe3JldHVybiBmLmFjY2Vzcyh0aGlzLGZ1bmN0aW9uKGEsYyxoKXt2YXIgaSxqLGssbDtpZihmLmlzV2luZG93KGEpKXtpPWEuZG9jdW1lbnQsaj1pLmRvY3VtZW50RWxlbWVudFtkXTtyZXR1cm4gZi5zdXBwb3J0LmJveE1vZGVsJiZqfHxpLmJvZHkmJmkuYm9keVtkXXx8an1pZihhLm5vZGVUeXBlPT09OSl7aT1hLmRvY3VtZW50RWxlbWVudDtpZihpW2RdPj1pW2VdKXJldHVybiBpW2RdO3JldHVybiBNYXRoLm1heChhLmJvZHlbZV0saVtlXSxhLmJvZHlbZ10saVtnXSl9aWYoaD09PWIpe2s9Zi5jc3MoYSxjKSxsPXBhcnNlRmxvYXQoayk7cmV0dXJuIGYuaXNOdW1lcmljKGwpP2w6a31mKGEpLmNzcyhjLGgpfSxjLGEsYXJndW1lbnRzLmxlbmd0aCxudWxsKX19KSxhLmpRdWVyeT1hLiQ9Zix0eXBlb2YgZGVmaW5lPT0iZnVuY3Rpb24iJiZkZWZpbmUuYW1kJiZkZWZpbmUuYW1kLmpRdWVyeSYmZGVmaW5lKCJqcXVlcnkiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIGZ9KX0pKHdpbmRvdyk7DQoNCi8vIE1vdmUgalF1ZXJ5IHRvICR0ZWxlcmlrDQokdGVsZXJpay4kID0galF1ZXJ5Lm5vQ29uZmxpY3QodHJ1ZSk7DQovKiBFTkQgVGVsZXJpay5XZWIuVUkuQ29tbW9uLmpRdWVyeS5qcyAqLw0KLyogU1RBUlQgVGVsZXJpay5XZWIuVUkuQ29tbW9uLmpRdWVyeVBsdWdpbnMuanMgKi8NCmlmKHR5cGVvZiAkdGVsZXJpay4kPT09InVuZGVmaW5lZCIpeyR0ZWxlcmlrLiQ9alF1ZXJ5OwovKgogKiBqUXVlcnkgRWFzaW5nIHYxLjMgLSBodHRwOi8vZ3NnZC5jby51ay9zYW5kYm94L2pxdWVyeS9lYXNpbmcvCiAqCiAqIFRFUk1TIE9GIFVTRSAtIGpRdWVyeSBFYXNpbmcKICogCiAqIE9wZW4gc291cmNlIHVuZGVyIHRoZSBCU0QgTGljZW5zZS4gCiAqIAogKiBDb3B5cmlnaHQgPyAyMDA4IEdlb3JnZSBNY0dpbmxleSBTbWl0aAogKiBBbGwgcmlnaHRzIHJlc2VydmVkLgoqLwovKgogKiBURVJNUyBPRiBVU0UgLSBFQVNJTkcgRVFVQVRJT05TCiAqIAogKiBPcGVuIHNvdXJjZSB1bmRlciB0aGUgQlNEIExpY2Vuc2UuIAogKiAKICogQ29weXJpZ2h0ID8gMjAwMSBSb2JlcnQgUGVubmVyCiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqLwp9KGZ1bmN0aW9uKGEpe2EuZWFzaW5nLmpzd2luZz1hLmVhc2luZy5zd2luZzsKYS5leHRlbmQoYS5lYXNpbmcse2RlZjoiZWFzZU91dFF1YWQiLHN3aW5nOmZ1bmN0aW9uKGUsaSxmLGcsaCl7cmV0dXJuIGEuZWFzaW5nW2EuZWFzaW5nLmRlZl0oZSxpLGYsZyxoKTsKfSxlYXNlTGluZWFyOmZ1bmN0aW9uKGUsaSxmLGcsaCl7cmV0dXJuIGcqaS9oK2Y7Cn0sZWFzZUluUXVhZDpmdW5jdGlvbihlLGksZixnLGgpe3JldHVybiBnKihpLz1oKSppK2Y7Cn0sZWFzZU91dFF1YWQ6ZnVuY3Rpb24oZSxpLGYsZyxoKXtyZXR1cm4gLWcqKGkvPWgpKihpLTIpK2Y7Cn0sZWFzZUluT3V0UXVhZDpmdW5jdGlvbihlLGksZixnLGgpe2lmKChpLz1oLzIpPDEpe3JldHVybiBnLzIqaSppK2Y7Cn1yZXR1cm4gLWcvMiooKC0taSkqKGktMiktMSkrZjsKfSxlYXNlSW5DdWJpYzpmdW5jdGlvbihlLGksZixnLGgpe3JldHVybiBnKihpLz1oKSppKmkrZjsKfSxlYXNlT3V0Q3ViaWM6ZnVuY3Rpb24oZSxpLGYsZyxoKXtyZXR1cm4gZyooKGk9aS9oLTEpKmkqaSsxKStmOwp9LGVhc2VJbk91dEN1YmljOmZ1bmN0aW9uKGUsaSxmLGcsaCl7aWYoKGkvPWgvMik8MSl7cmV0dXJuIGcvMippKmkqaStmOwp9cmV0dXJuIGcvMiooKGktPTIpKmkqaSsyKStmOwp9LGVhc2VJblF1YXJ0OmZ1bmN0aW9uKGUsaSxmLGcsaCl7cmV0dXJuIGcqKGkvPWgpKmkqaSppK2Y7Cn0sZWFzZU91dFF1YXJ0OmZ1bmN0aW9uKGUsaSxmLGcsaCl7cmV0dXJuIC1nKigoaT1pL2gtMSkqaSppKmktMSkrZjsKfSxlYXNlSW5PdXRRdWFydDpmdW5jdGlvbihlLGksZixnLGgpe2lmKChpLz1oLzIpPDEpe3JldHVybiBnLzIqaSppKmkqaStmOwp9cmV0dXJuIC1nLzIqKChpLT0yKSppKmkqaS0yKStmOwp9LGVhc2VJblF1aW50OmZ1bmN0aW9uKGUsaSxmLGcsaCl7cmV0dXJuIGcqKGkvPWgpKmkqaSppKmkrZjsKfSxlYXNlT3V0UXVpbnQ6ZnVuY3Rpb24oZSxpLGYsZyxoKXtyZXR1cm4gZyooKGk9aS9oLTEpKmkqaSppKmkrMSkrZjsKfSxlYXNlSW5PdXRRdWludDpmdW5jdGlvbihlLGksZixnLGgpe2lmKChpLz1oLzIpPDEpe3JldHVybiBnLzIqaSppKmkqaSppK2Y7Cn1yZXR1cm4gZy8yKigoaS09MikqaSppKmkqaSsyKStmOwp9LGVhc2VJblNpbmU6ZnVuY3Rpb24oZSxpLGYsZyxoKXtyZXR1cm4gLWcqTWF0aC5jb3MoaS9oKihNYXRoLlBJLzIpKStnK2Y7Cn0sZWFzZU91dFNpbmU6ZnVuY3Rpb24oZSxpLGYsZyxoKXtyZXR1cm4gZypNYXRoLnNpbihpL2gqKE1hdGguUEkvMikpK2Y7Cn0sZWFzZUluT3V0U2luZTpmdW5jdGlvbihlLGksZixnLGgpe3JldHVybiAtZy8yKihNYXRoLmNvcyhNYXRoLlBJKmkvaCktMSkrZjsKfSxlYXNlSW5FeHBvOmZ1bmN0aW9uKGUsaSxmLGcsaCl7cmV0dXJuKGk9PTApP2Y6ZypNYXRoLnBvdygyLDEwKihpL2gtMSkpK2Y7Cn0sZWFzZU91dEV4cG86ZnVuY3Rpb24oZSxpLGYsZyxoKXtyZXR1cm4oaT09aCk/ZitnOmcqKC1NYXRoLnBvdygyLC0xMCppL2gpKzEpK2Y7Cn0sZWFzZUluT3V0RXhwbzpmdW5jdGlvbihlLGksZixnLGgpe2lmKGk9PTApe3JldHVybiBmOwp9aWYoaT09aCl7cmV0dXJuIGYrZzsKfWlmKChpLz1oLzIpPDEpe3JldHVybiBnLzIqTWF0aC5wb3coMiwxMCooaS0xKSkrZjsKfXJldHVybiBnLzIqKC1NYXRoLnBvdygyLC0xMCotLWkpKzIpK2Y7Cn0sZWFzZUluQ2lyYzpmdW5jdGlvbihlLGksZixnLGgpe3JldHVybiAtZyooTWF0aC5zcXJ0KDEtKGkvPWgpKmkpLTEpK2Y7Cn0sZWFzZU91dENpcmM6ZnVuY3Rpb24oZSxpLGYsZyxoKXtyZXR1cm4gZypNYXRoLnNxcnQoMS0oaT1pL2gtMSkqaSkrZjsKfSxlYXNlSW5PdXRDaXJjOmZ1bmN0aW9uKGUsaSxmLGcsaCl7aWYoKGkvPWgvMik8MSl7cmV0dXJuIC1nLzIqKE1hdGguc3FydCgxLWkqaSktMSkrZjsKfXJldHVybiBnLzIqKE1hdGguc3FydCgxLShpLT0yKSppKSsxKStmOwp9LGVhc2VJbkVsYXN0aWM6ZnVuY3Rpb24oayxqLGUsZixpKXt2YXIgZz0xLjcwMTU4Owp2YXIgaD0wOwp2YXIgbD1mOwppZihqPT0wKXtyZXR1cm4gZTsKfWlmKChqLz1pKT09MSl7cmV0dXJuIGUrZjsKfWlmKCFoKXtoPWkqMC4zOwp9aWYobDxNYXRoLmFicyhmKSl7bD1mOwp2YXIgZz1oLzQ7Cn1lbHNle3ZhciBnPWgvKDIqTWF0aC5QSSkqTWF0aC5hc2luKGYvbCk7Cn1yZXR1cm4gLShsKk1hdGgucG93KDIsMTAqKGotPTEpKSpNYXRoLnNpbigoaippLWcpKigyKk1hdGguUEkpL2gpKStlOwp9LGVhc2VPdXRFbGFzdGljOmZ1bmN0aW9uKGssaixlLGYsaSl7dmFyIGc9MS43MDE1ODsKdmFyIGg9MDsKdmFyIGw9ZjsKaWYoaj09MCl7cmV0dXJuIGU7Cn1pZigoai89aSk9PTEpe3JldHVybiBlK2Y7Cn1pZighaCl7aD1pKjAuMzsKfWlmKGw8TWF0aC5hYnMoZikpe2w9ZjsKdmFyIGc9aC80Owp9ZWxzZXt2YXIgZz1oLygyKk1hdGguUEkpKk1hdGguYXNpbihmL2wpOwp9cmV0dXJuIGwqTWF0aC5wb3coMiwtMTAqaikqTWF0aC5zaW4oKGoqaS1nKSooMipNYXRoLlBJKS9oKStmK2U7Cn0sZWFzZUluT3V0RWxhc3RpYzpmdW5jdGlvbihrLGosZSxmLGkpe3ZhciBnPTEuNzAxNTg7CnZhciBoPTA7CnZhciBsPWY7CmlmKGo9PTApe3JldHVybiBlOwp9aWYoKGovPWkvMik9PTIpe3JldHVybiBlK2Y7Cn1pZighaCl7aD1pKigwLjMqMS41KTsKfWlmKGw8TWF0aC5hYnMoZikpe2w9ZjsKdmFyIGc9aC80Owp9ZWxzZXt2YXIgZz1oLygyKk1hdGguUEkpKk1hdGguYXNpbihmL2wpOwp9aWYoajwxKXtyZXR1cm4gLTAuNSoobCpNYXRoLnBvdygyLDEwKihqLT0xKSkqTWF0aC5zaW4oKGoqaS1nKSooMipNYXRoLlBJKS9oKSkrZTsKfXJldHVybiBsKk1hdGgucG93KDIsLTEwKihqLT0xKSkqTWF0aC5zaW4oKGoqaS1nKSooMipNYXRoLlBJKS9oKSowLjUrZitlOwp9LGVhc2VJbkJhY2s6ZnVuY3Rpb24oaixpLGUsZixoLGcpe2lmKGc9PXVuZGVmaW5lZCl7Zz0xLjcwMTU4Owp9cmV0dXJuIGYqKGkvPWgpKmkqKChnKzEpKmktZykrZTsKfSxlYXNlT3V0QmFjazpmdW5jdGlvbihqLGksZSxmLGgsZyl7aWYoZz09dW5kZWZpbmVkKXtnPTEuNzAxNTg7Cn1yZXR1cm4gZiooKGk9aS9oLTEpKmkqKChnKzEpKmkrZykrMSkrZTsKfSxlYXNlSW5PdXRCYWNrOmZ1bmN0aW9uKGosaSxlLGYsaCxnKXtpZihnPT11bmRlZmluZWQpe2c9MS43MDE1ODsKfWlmKChpLz1oLzIpPDEpe3JldHVybiBmLzIqKGkqaSooKChnKj0oMS41MjUpKSsxKSppLWcpKStlOwp9cmV0dXJuIGYvMiooKGktPTIpKmkqKCgoZyo9KDEuNTI1KSkrMSkqaStnKSsyKStlOwp9LGVhc2VJbkJvdW5jZTpmdW5jdGlvbihlLGksZixnLGgpe3JldHVybiBnLWEuZWFzaW5nLmVhc2VPdXRCb3VuY2UoZSxoLWksMCxnLGgpK2Y7Cn0sZWFzZU91dEJvdW5jZTpmdW5jdGlvbihlLGksZixnLGgpe2lmKChpLz1oKTwoMS8yLjc1KSl7cmV0dXJuIGcqKDcuNTYyNSppKmkpK2Y7Cn1lbHNle2lmKGk8KDIvMi43NSkpe3JldHVybiBnKig3LjU2MjUqKGktPSgxLjUvMi43NSkpKmkrMC43NSkrZjsKfWVsc2V7aWYoaTwoMi41LzIuNzUpKXtyZXR1cm4gZyooNy41NjI1KihpLT0oMi4yNS8yLjc1KSkqaSswLjkzNzUpK2Y7Cn1lbHNle3JldHVybiBnKig3LjU2MjUqKGktPSgyLjYyNS8yLjc1KSkqaSswLjk4NDM3NSkrZjsKfX19fSxlYXNlSW5PdXRCb3VuY2U6ZnVuY3Rpb24oZSxpLGYsZyxoKXtpZihpPGgvMil7cmV0dXJuIGEuZWFzaW5nLmVhc2VJbkJvdW5jZShlLGkqMiwwLGcsaCkqMC41K2Y7Cn1yZXR1cm4gYS5lYXNpbmcuZWFzZU91dEJvdW5jZShlLGkqMi1oLDAsZyxoKSowLjUrZyowLjUrZjsKfX0pOwp9KSgkdGVsZXJpay4kKTsKLyoKICogalF1ZXJ5IHRocm90dGxlIC8gZGVib3VuY2UgLSB2MS4xIC0gMy83LzIwMTAKICogaHR0cDovL2JlbmFsbWFuLmNvbS9wcm9qZWN0cy9qcXVlcnktdGhyb3R0bGUtZGVib3VuY2UtcGx1Z2luLwogKgogKiBDb3B5cmlnaHQgKGMpIDIwMTAgIkNvd2JveSIgQmVuIEFsbWFuCiAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBhbmQgR1BMIGxpY2Vuc2VzLgogKiBodHRwOi8vYmVuYWxtYW4uY29tL2Fib3V0L2xpY2Vuc2UvCiAqLwooZnVuY3Rpb24oZCxiKXt2YXIgYT0kdGVsZXJpay4kfHxkLkNvd2JveXx8KGQuQ293Ym95PXt9KSxjOwphLnRocm90dGxlPWM9ZnVuY3Rpb24oayxlLGksaCl7dmFyIGcsaj0wOwppZih0eXBlb2YgZSE9PSJib29sZWFuIil7aD1pOwppPWU7CmU9YjsKfWZ1bmN0aW9uIGYoKXt2YXIgbT10aGlzLHA9K25ldyBEYXRlKCktaixvPWFyZ3VtZW50czsKZnVuY3Rpb24gbigpe2o9K25ldyBEYXRlKCk7CmkuYXBwbHkobSxvKTsKfWZ1bmN0aW9uIGwoKXtnPWI7Cn1pZihoJiYhZyl7bigpOwp9ZyYmY2xlYXJUaW1lb3V0KGcpOwppZihoPT09YiYmcD5rKXtuKCk7Cn1lbHNle2lmKGUhPT10cnVlKXtnPXNldFRpbWVvdXQoaD9sOm4saD09PWI/ay1wOmspOwp9fX1pZihhLmd1aWQpe2YuZ3VpZD1pLmd1aWQ9aS5ndWlkfHxhLmd1aWQrKzsKfXJldHVybiBmOwp9OwphLmRlYm91bmNlPWZ1bmN0aW9uKGUsZixnKXtyZXR1cm4gZz09PWI/YyhlLGYsZmFsc2UpOmMoZSxnLGYhPT1mYWxzZSk7Cn07Cn0pKHdpbmRvdyk7CihmdW5jdGlvbihkKXtkLmZ4LnN0ZXAuaGVpZ2h0PWZ1bmN0aW9uKGYpe3ZhciBlPSR0ZWxlcmlrLnF1aXJrc01vZGU/MTowOwp2YXIgZz1mLm5vdz5lP2Yubm93OmU7CmYuZWxlbS5zdHlsZVtmLnByb3BdPU1hdGgucm91bmQoZykrZi51bml0Owp9OwpmdW5jdGlvbiBhKGYsZSl7cmV0dXJuWyJsaXZlIixmLGUucmVwbGFjZSgvXC4vZywiYCIpLnJlcGxhY2UoLyAvZywifCIpXS5qb2luKCIuIik7Cn1mdW5jdGlvbiBjKGYsZSl7ZC5lYWNoKGUsZnVuY3Rpb24oZyxoKXtpZihnLmluZGV4T2YoImV0XyIpPjApe2ZbZ109aDsKcmV0dXJuOwp9aWYoZz09ImRvbUV2ZW50IiYmaCl7ZlsiZ2V0XyIrZ109ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFN5cy5VSS5Eb21FdmVudChoLm9yaWdpbmFsRXZlbnR8fGgucmF3RXZlbnR8fGgpOwp9Owp9ZWxzZXtmWyJnZXRfIitnXT1mdW5jdGlvbihpKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gaTsKfTsKfShoKTsKfX0pOwpyZXR1cm4gZjsKfWQuZXh0ZW5kKHtyZWdpc3RlckNvbnRyb2xFdmVudHM6ZnVuY3Rpb24oZixlKXtkLmVhY2goZSxmdW5jdGlvbihnLGgpe2YucHJvdG90eXBlWyJhZGRfIitoXT1mdW5jdGlvbihpKXt0aGlzLmdldF9ldmVudHMoKS5hZGRIYW5kbGVyKGgsaSk7Cn07CmYucHJvdG90eXBlWyJyZW1vdmVfIitoXT1mdW5jdGlvbihpKXt0aGlzLmdldF9ldmVudHMoKS5yZW1vdmVIYW5kbGVyKGgsaSk7Cn07Cn0pOwp9LHJlZ2lzdGVyQ29udHJvbFByb3BlcnRpZXM6ZnVuY3Rpb24oZixlKXtkLmVhY2goZSxmdW5jdGlvbihoLGcpe2YucHJvdG90eXBlWyJnZXRfIitoXT1mdW5jdGlvbigpe3ZhciBpPXRoaXNbIl8iK2hdOwpyZXR1cm4gdHlwZW9mIGk9PSJ1bmRlZmluZWQiP2c6aTsKfTsKZi5wcm90b3R5cGVbInNldF8iK2hdPWZ1bmN0aW9uKGkpe3RoaXNbIl8iK2hdPWk7Cn07Cn0pOwp9LHJlZ2lzdGVyRW51bTpmdW5jdGlvbihmLGUsZyl7ZltlXT1mdW5jdGlvbigpe307CmZbZV0ucHJvdG90eXBlPWc7CmZbZV0ucmVnaXN0ZXJFbnVtKGYuZ2V0TmFtZSgpKyIuIitlKTsKfSxyYWlzZUNvbnRyb2xFdmVudDpmdW5jdGlvbihoLGUsZyl7dmFyIGY9aC5nZXRfZXZlbnRzKCkuZ2V0SGFuZGxlcihlKTsKaWYoZil7ZihoLGMobmV3IFN5cy5FdmVudEFyZ3MoKSxnKSk7Cn19LHJhaXNlQ2FuY2VsbGFibGVDb250cm9sRXZlbnQ6ZnVuY3Rpb24oaSxlLGgpe3ZhciBmPWkuZ2V0X2V2ZW50cygpLmdldEhhbmRsZXIoZSk7CmlmKGYpe3ZhciBnPWMobmV3IFN5cy5DYW5jZWxFdmVudEFyZ3MoKSxoKTsKZihpLGcpOwpyZXR1cm4gZy5nZXRfY2FuY2VsKCk7Cn1yZXR1cm4gZmFsc2U7Cn0sZXh0ZW5kRXZlbnRBcmdzOmZ1bmN0aW9uKGYsZSl7cmV0dXJuIGMoZixlKTsKfSxpc0JvZ3VzOmZ1bmN0aW9uKGUpe3RyeXt2YXIgZj1lLnBhcmVudE5vZGU7CnJldHVybiBmYWxzZTsKfWNhdGNoKGcpe3JldHVybiB0cnVlOwp9fX0pOwpkLmVhY2hDYWxsYmFjaz1mdW5jdGlvbihmLGcpe3ZhciBoPTA7CmZ1bmN0aW9uIGUoKXtpZihmLmxlbmd0aD09MCl7cmV0dXJuOwp9dmFyIGk9ZltoXTsKZy5hcHBseShpKTsKaCsrOwppZihoPGYubGVuZ3RoKXtzZXRUaW1lb3V0KGUsMSk7Cn19c2V0VGltZW91dChlLDEpOwp9OwpkLmZuLmVhY2hDYWxsYmFjaz1mdW5jdGlvbihoKXt2YXIgZj0wOwp2YXIgZT10aGlzOwpmdW5jdGlvbiBnKCl7aWYoZS5sZW5ndGg9PTApe3JldHVybjsKfXZhciBpPWUuZ2V0KGYpOwpoLmFwcGx5KGkpOwpmKys7CmlmKGY8ZS5sZW5ndGgpe3NldFRpbWVvdXQoZywxKTsKfX1zZXRUaW1lb3V0KGcsMSk7Cn07CmlmKCR0ZWxlcmlrLmlzVG91Y2hEZXZpY2Upe3ZhciBiOwpkLmVhY2goWyJ0X3RvdWNob3ZlciIsInRfdG91Y2hvdXQiXSxmdW5jdGlvbihlLGYpe2QuZm5bZl09ZnVuY3Rpb24oZyl7cmV0dXJuIHRoaXMuYmluZChmLGcpOwp9Owp9KTsKZChkb2N1bWVudC5ib2R5KS5iaW5kKCJ0b3VjaHN0YXJ0IixmdW5jdGlvbihmKXtiPWYub3JpZ2luYWxFdmVudC5jdXJyZW50VGFyZ2V0Owp9KS5iaW5kKCJ0b3VjaG1vdmUiLGZ1bmN0aW9uKGYpe3ZhciBnPWYub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXSxpPWRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQoZy5jbGllbnRYLGcuY2xpZW50WSk7CmlmKGIhPWkpe3ZhciBoPXt0YXJnZXQ6YixyZWxhdGVkVGFyZ2V0OmIsQ3RybEtleTpmYWxzZSxBbHRLZXk6ZmFsc2UsU2hpZnRLZXk6ZmFsc2V9OwpkKGIpLnRyaWdnZXIoInRfdG91Y2hvdXQiLGgpOwpiPWk7CmQoYikudHJpZ2dlcigidF90b3VjaG92ZXIiLGQuZXh0ZW5kKGgse3RhcmdldDpiLHJlbGF0ZWRUYXJnZXQ6Yn0pKTsKfX0pOwp9fSkoJHRlbGVyaWsuJCk7Ci8qCiogalF1ZXJ5IERvdWJsZSBUYXAgUGx1Z2luLgoqCiogQ29weXJpZ2h0IChjKSAyMDEwIFJhdWwgU2FuY2hleiAoaHR0cDovL3d3dy5hcHBjcm9wb2xpcy5jb20pCioKKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgYW5kIEdQTCBsaWNlbnNlczoKKiBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocAoqIGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy9ncGwuaHRtbAoqLwooZnVuY3Rpb24oYSl7YS5mbi5kb3VibGV0YXA9ZnVuY3Rpb24oZCxmLGIpe3ZhciBlLGM7CmI9Yj09bnVsbD81MDA6YjsKZT0kdGVsZXJpay5pc1RvdWNoRGV2aWNlPyJ0b3VjaGVuZCI6ImNsaWNrIjsKYSh0aGlzKS5iaW5kKGUsZnVuY3Rpb24oaSl7dmFyIGc9bmV3IERhdGUoKS5nZXRUaW1lKCk7CnZhciBoPWEodGhpcykuZGF0YSgibGFzdFRvdWNoIil8fGcrMTsKdmFyIGo9Zy1oOwpjbGVhclRpbWVvdXQoYyk7CmlmKGo8NTAwJiZqPjApe2lmKGQhPW51bGwmJnR5cGVvZiBkPT0iZnVuY3Rpb24iKXtkKGkpOwp9fWVsc2V7YSh0aGlzKS5kYXRhKCJsYXN0VG91Y2giLGcpOwpjPXNldFRpbWVvdXQoZnVuY3Rpb24oayl7aWYoZiE9bnVsbCYmdHlwZW9mIGY9PSJmdW5jdGlvbiIpe2Yoayk7Cn1jbGVhclRpbWVvdXQoYyk7Cn0sYixbaV0pOwp9YSh0aGlzKS5kYXRhKCJsYXN0VG91Y2giLGcpOwp9KTsKfTsKfSkoJHRlbGVyaWsuJCk7Cg0KLyogRU5EIFRlbGVyaWsuV2ViLlVJLkNvbW1vbi5qUXVlcnlQbHVnaW5zLmpzICovDQovKiBTVEFSVCBUZWxlcmlrLldlYi5VSS5Db21tb24uQW5pbWF0aW9uLkFuaW1hdGlvblNjcmlwdHMuanMgKi8NClR5cGUucmVnaXN0ZXJOYW1lc3BhY2UoIlRlbGVyaWsuV2ViLlVJLkFuaW1hdGlvbnMiKTsKKGZ1bmN0aW9uKCl7dmFyIGE9JHRlbGVyaWsuJDsKdmFyIGI9VGVsZXJpay5XZWIuVUk7CmIuQW5pbWF0aW9ucy5wbGF5SlF1ZXJ5QW5pbWF0aW9uPWZ1bmN0aW9uKGgsZCxtLGssaSxxLGoscCxlKXtpZighaCl7cmV0dXJuOwp9aWYoIWQpe2Q9MjsKfWlmKCFtKXttPW5ldyBTeXMuVUkuQm91bmRzKDEsMSwxLDEpOwp9aWYoIWspe2s9bmV3IFN5cy5VSS5Cb3VuZHMoMSwxLDEsMSk7Cn12YXIgbj1wP3A6NTAwOwppZighaSl7aT0zMjsKfWkrPSIiOwp2YXIgZz1wYXJzZUludChpLnN1YnN0cigwLDEpKTsKdmFyIGM9cGFyc2VJbnQoaS5zdWJzdHIoMSwxKSk7CmlmKHEpe3EoKTsKfWEoaCkuc3RvcChmYWxzZSx0cnVlKTsKaWYoZD09Mil7YShoKS5jc3Moe2xlZnQ6ay54LHRvcDprLnl9KS5mYWRlSW4obixqKTsKcmV0dXJuOwp9aWYoZD09OCl7dmFyIG89JHRlbGVyaWsuZ2V0Q2xpZW50Qm91bmRzKCk7CnZhciBsPSR0ZWxlcmlrLmdldENsaWVudEJvdW5kcygpOwptLng9bC53aWR0aC8yOwptLnk9bC5oZWlnaHQ7CnN3aXRjaChjKXtjYXNlIDI6bS54PWsueDsKYnJlYWs7CmNhc2UgMzptLng9by53aWR0aDsKYnJlYWs7CmNhc2UgMTptLng9by54Owp9c3dpdGNoKGcpe2Nhc2UgMjptLnk9ay55OwpicmVhazsKY2FzZSAxOm0ueT1vLnktay5oZWlnaHQ7CmJyZWFrOwpjYXNlIDM6bS55PW8uaGVpZ2h0Owp9fWVsc2V7aWYoZD09NCl7bS54PWsueDsKbS55PWsueTsKbS53aWR0aD1rLndpZHRoOwptLmhlaWdodD0xOwpzd2l0Y2goYyl7Y2FzZSAyOm0ueD1rLng7CmJyZWFrOwpjYXNlIDM6bS54PWsueDsKYnJlYWs7CmNhc2UgMTp2YXIgZj1rLng7CmlmKDI9PWcpe2YrPWsud2lkdGg7Cn1tLng9ZjsKfXN3aXRjaChnKXtjYXNlIDI6bS55PWsueTsKbS5oZWlnaHQ9ay5oZWlnaHQ7Cm0ud2lkdGg9MTsKYnJlYWs7CmNhc2UgMTptLnk9ay55K2suaGVpZ2h0OwpicmVhazsKY2FzZSAzOm0ueT1rLnk7Cn19ZWxzZXtpZihkPT0xKXt9fX1hKGgpLmNzcyh7d2lkdGg6bS53aWR0aCxoZWlnaHQ6bS5oZWlnaHQsbGVmdDptLngsdG9wOm0ueSxvcGFjaXR5OjAuMSxmaWx0ZXI6ImFscGhhKG9wYWNpdHk9MTApIn0pLnNob3coKS5hbmltYXRlKHt3aWR0aDprLndpZHRoLGhlaWdodDprLmhlaWdodCxsZWZ0OmsueCx0b3A6ay55LG9wYWNpdHk6ZT9lOjF9LG4sbnVsbCxqKTsKfTsKYS5meC5wcm90b3R5cGUub2xkc3RlcD1hLmZ4LnByb3RvdHlwZS5zdGVwOwphLmZ4LnByb3RvdHlwZS5zdGVwPWZ1bmN0aW9uKGUpe3ZhciBkPXRoaXMucHJvcDsKaWYoZD09ImxlZnQifHxkPT0idG9wInx8ZD09InRlbGVyaWtDYXJvdXNlbEFuZ2xlInx8ZD09InRlbGVyaWtDb3ZlckZsb3dJbmRleCIpe2lmKHRoaXMuZWxlbS5nZXRBdHRyaWJ1dGUoInBhdXNlZCIpKXtpZighdGhpcy5lbGVtLmdldEF0dHJpYnV0ZSgiZWxhcHNlZFRpbWUiKSl7dmFyIGM9KCtuZXcgRGF0ZSktdGhpcy5zdGFydFRpbWU7CnRoaXMuZWxlbS5zZXRBdHRyaWJ1dGUoImVsYXBzZWRUaW1lIixjKTsKfXJldHVybiB0cnVlOwp9aWYodGhpcy5lbGVtLmdldEF0dHJpYnV0ZSgiZWxhcHNlZFRpbWUiKSl7dGhpcy5zdGFydFRpbWU9KCtuZXcgRGF0ZSktdGhpcy5lbGVtLmdldEF0dHJpYnV0ZSgiZWxhcHNlZFRpbWUiKTsKdGhpcy5lbGVtLnJlbW92ZUF0dHJpYnV0ZSgiZWxhcHNlZFRpbWUiKTsKfX1yZXR1cm4gdGhpcy5vbGRzdGVwKGUpOwp9OwpiLkFuaW1hdGlvbnMuak1vdmVCYXNlPWZ1bmN0aW9uKGQsYyxlLGYpe2IuQW5pbWF0aW9ucy5qTW92ZUJhc2UuaW5pdGlhbGl6ZUJhc2UodGhpcyk7CnRoaXMuX293bmVyPWQ7CnRoaXMuX2VsZW1lbnQ9YzsKdGhpcy5fZHVyYXRpb249ZTsKdGhpcy5fZXZlbnRzPW51bGw7CnRoaXMuX2FuaW1hdGlvbkVuZGVkRGVsZWdhdGU9bnVsbDsKdGhpcy5faXNQbGF5aW5nPWZhbHNlOwp0aGlzLl9pc1BhdXNlZD1mYWxzZTsKdGhpcy5faXNDeWNsaWM9ZmFsc2U7CnRoaXMuX2Vhc2luZz1mOwp0aGlzLl9pc0Rpc3Bvc2VkPWZhbHNlOwp9OwpiLkFuaW1hdGlvbnMuak1vdmVCYXNlLnByb3RvdHlwZT17aW5pdGlhbGl6ZTpmdW5jdGlvbigpe2IuQW5pbWF0aW9ucy5qTW92ZUJhc2UuY2FsbEJhc2VNZXRob2QodGhpcywiaW5pdGlhbGl6ZSIpOwp0aGlzLl9hbmltYXRpb25FbmRlZERlbGVnYXRlPUZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5fYW5pbWF0aW9uRW5kZWQpOwp9LGRpc3Bvc2U6ZnVuY3Rpb24oKXtpZih0aGlzLl9pc0Rpc3Bvc2VkKXtyZXR1cm47Cn10aGlzLl9nZXRBbmltYXRpb25RdWVyeSgpLnN0b3AodHJ1ZSxmYWxzZSk7CnRoaXMuX293bmVyPW51bGw7CnRoaXMuX2VsZW1lbnQ9bnVsbDsKdGhpcy5fYW5pbWF0aW9uRW5kZWREZWxlZ2F0ZT1udWxsOwpiLkFuaW1hdGlvbnMuak1vdmVCYXNlLmNhbGxCYXNlTWV0aG9kKHRoaXMsImRpc3Bvc2UiKTsKdGhpcy5faXNEaXNwb3NlZD10cnVlOwp9LGdldF9pc1BsYXlpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNQbGF5aW5nOwp9LGdldF9pc0N5Y2xpYzpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0N5Y2xpYzsKfSxzZXRfaXNDeWNsaWM6ZnVuY3Rpb24oYyl7dGhpcy5faXNDeWNsaWM9YzsKfSxnZXRfZWFzaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Vhc2luZzsKfSxzZXRfZWFzaW5nOmZ1bmN0aW9uKGMpe3RoaXMuX2Vhc2luZz1jOwp9LGdldF9kdXJhdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kdXJhdGlvbjsKfSxzZXRfZHVyYXRpb246ZnVuY3Rpb24oYyl7dGhpcy5fZHVyYXRpb249YzsKfSxnZXRfaXNBY3RpdmU6ZnVuY3Rpb24oKXtyZXR1cm4gdHJ1ZTsKfSxwbGF5OmZ1bmN0aW9uKGcpe3ZhciBlPXRoaXMuX2dldEFuaW1hdGlvblF1ZXJ5KCkuZmlsdGVyKCJbcGF1c2VkPSd0cnVlJ10iKTsKdmFyIGQ9ZS5hdHRyKCJwYXVzZWQiKTsKZS5yZW1vdmVBdHRyKCJwYXVzZWQiKTsKaWYoZCYmZS5hdHRyKCJlbGFwc2VkVGltZSIpKXt0aGlzLl9pc1BsYXlpbmc9dHJ1ZTsKdGhpcy5faXNQYXVzZWQ9ZmFsc2U7Cn1lbHNle3ZhciBoPXRoaXMuX293bmVyOwp2YXIgZj1oLmdldF9mcmFtZUR1cmF0aW9uKCk7CmlmKHRoaXMuX2lzUGF1c2VkJiZ0aGlzLl9pc0N5Y2xpYyYmKGY+MCYmIWcpJiZoLl9zZXRBbmltYXRpb25UaW1lb3V0KXtoLl9zZXRBbmltYXRpb25UaW1lb3V0KGYpOwp9ZWxzZXt2YXIgYz10aGlzLl9hbmltYXRpb25TdGFydGVkKCk7CmlmKGMhPWZhbHNlKXt0aGlzLl9wbGF5QW5pbWF0aW9uKCk7CnRoaXMuX2lzUGxheWluZz10cnVlOwp0aGlzLl9pc1BhdXNlZD1mYWxzZTsKfX19fSxzdG9wOmZ1bmN0aW9uKCl7dGhpcy5fZ2V0QW5pbWF0aW9uUXVlcnkoKS5zdG9wKGZhbHNlLHRoaXMuX2lzUGxheWluZyk7CnRoaXMuX2lzUGxheWluZz1mYWxzZTsKfSxwYXVzZTpmdW5jdGlvbigpe2lmKHRoaXMuX2lzUGxheWluZyl7dGhpcy5fZ2V0QW5pbWF0aW9uUXVlcnkoKS5maWx0ZXIoIjphbmltYXRlZCIpLmF0dHIoInBhdXNlZCIsdHJ1ZSk7Cn10aGlzLl9pc1BsYXlpbmc9ZmFsc2U7CnRoaXMuX2lzUGF1c2VkPXRydWU7Cn0sYWRkX3N0YXJ0ZWQ6ZnVuY3Rpb24oYyl7dGhpcy5nZXRfZXZlbnRzKCkuYWRkSGFuZGxlcigic3RhcnRlZCIsYyk7Cn0scmVtb3ZlX3N0YXJ0ZWQ6ZnVuY3Rpb24oYyl7dGhpcy5nZXRfZXZlbnRzKCkucmVtb3ZlSGFuZGxlcigic3RhcnRlZCIsYyk7Cn0sYWRkX2VuZGVkOmZ1bmN0aW9uKGMpe3RoaXMuZ2V0X2V2ZW50cygpLmFkZEhhbmRsZXIoImVuZGVkIixjKTsKfSxyZW1vdmVfZW5kZWQ6ZnVuY3Rpb24oYyl7dGhpcy5nZXRfZXZlbnRzKCkucmVtb3ZlSGFuZGxlcigiZW5kZWQiLGMpOwp9LF9nZXRBbmltYXRpb25RdWVyeTpmdW5jdGlvbigpe3JldHVybiBhKHRoaXMuX2VsZW1lbnQpOwp9LF9wbGF5QW5pbWF0aW9uOmZ1bmN0aW9uKCl7fSxfYW5pbWF0aW9uU3RhcnRlZDpmdW5jdGlvbigpe3ZhciBjPW5ldyBTeXMuQ2FuY2VsRXZlbnRBcmdzKCk7CnRoaXMuX3JhaXNlRXZlbnQoInN0YXJ0ZWQiLGMpOwpyZXR1cm4gIWMuZ2V0X2NhbmNlbCgpOwp9LF9hbmltYXRpb25FbmRlZDpmdW5jdGlvbigpe3RoaXMuX2lzUGxheWluZz1mYWxzZTsKdGhpcy5fcmFpc2VFdmVudCgiZW5kZWQiLFN5cy5FdmVudEFyZ3MuRW1wdHkpOwp9LF9yYWlzZUV2ZW50OmZ1bmN0aW9uKGMsZSl7dmFyIGQ9dGhpcy5nZXRfZXZlbnRzKCkuZ2V0SGFuZGxlcihjKTsKaWYoZCl7aWYoIWUpe2U9U3lzLkV2ZW50QXJncy5FbXB0eTsKfWQodGhpcyxlKTsKfX19OwpiLkFuaW1hdGlvbnMuak1vdmVCYXNlLnJlZ2lzdGVyQ2xhc3MoIlRlbGVyaWsuV2ViLlVJLkFuaW1hdGlvbnMuak1vdmVCYXNlIixTeXMuQ29tcG9uZW50KTsKYi5BbmltYXRpb25zLmpNb3ZlPWZ1bmN0aW9uKGgsYyxlLGYsZyxkKXtiLkFuaW1hdGlvbnMuak1vdmUuaW5pdGlhbGl6ZUJhc2UodGhpcyxbaCxjLGUsZF0pOwp0aGlzLl9ob3Jpem9udGFsPSh0eXBlb2YoZik9PSJ1bmRlZmluZWQifHxmPT1udWxsKT8wOmY7CnRoaXMuX3ZlcnRpY2FsPSh0eXBlb2YoZyk9PSJ1bmRlZmluZWQifHxnPT1udWxsKT8wOmc7Cn07CmIuQW5pbWF0aW9ucy5qTW92ZS5wcm90b3R5cGU9e2luaXRpYWxpemU6ZnVuY3Rpb24oKXtiLkFuaW1hdGlvbnMuak1vdmUuY2FsbEJhc2VNZXRob2QodGhpcywiaW5pdGlhbGl6ZSIpOwp9LGRpc3Bvc2U6ZnVuY3Rpb24oKXtiLkFuaW1hdGlvbnMuak1vdmUuY2FsbEJhc2VNZXRob2QodGhpcywiZGlzcG9zZSIpOwp9LGdldF92ZXJ0aWNhbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92ZXJ0aWNhbDsKfSxzZXRfdmVydGljYWw6ZnVuY3Rpb24oYyl7dGhpcy5fdmVydGljYWw9YzsKfSxnZXRfaG9yaXpvbnRhbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ob3Jpem9udGFsOwp9LHNldF9ob3Jpem9udGFsOmZ1bmN0aW9uKGMpe3RoaXMuX2hvcml6b250YWw9YzsKfSxfZ2V0RmluYWxQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybihpc05hTihwYXJzZUludCh0aGlzLl92ZXJ0aWNhbCkpKT90aGlzLl9ob3Jpem9udGFsOnRoaXMuX3ZlcnRpY2FsOwp9LF9nZXRBbmltYXRlZFByb3BlcnR5OmZ1bmN0aW9uKCl7cmV0dXJuKGlzTmFOKHBhcnNlSW50KHRoaXMuX3ZlcnRpY2FsKSkpPyJsZWZ0IjoidG9wIjsKfSxfZ2V0UG9zaXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZWxlbWVudC5zdHlsZVt0aGlzLl9nZXRBbmltYXRlZFByb3BlcnR5KCldOwp9LF9wbGF5QW5pbWF0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fZ2V0RmluYWxQb3NpdGlvbigpOwp2YXIgZj10aGlzLl9nZXRBbmltYXRpb25RdWVyeSgpOwp2YXIgZD10aGlzLl9nZXRBbmltYXRlZFByb3BlcnR5KCk7CnZhciBjPXtxdWV1ZTp0cnVlfTsKY1tkXT1lOwpmLnN0b3AodHJ1ZSwhdGhpcy5faXNDeWNsaWMpLmFuaW1hdGUoYyx0aGlzLl9kdXJhdGlvbix0aGlzLl9lYXNpbmcsdGhpcy5fYW5pbWF0aW9uRW5kZWREZWxlZ2F0ZSk7Cn19OwpiLkFuaW1hdGlvbnMuak1vdmUucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuQW5pbWF0aW9ucy5qTW92ZSIsYi5BbmltYXRpb25zLmpNb3ZlQmFzZSk7CmIuQW5pbWF0aW9ucy5qQ2Fyb3VzZWw9ZnVuY3Rpb24oaSxjLGcsaCxmLGQsZSl7Yi5BbmltYXRpb25zLmpDYXJvdXNlbC5pbml0aWFsaXplQmFzZSh0aGlzLFtpLGMsaCxlXSk7CnRoaXMuX2l0ZW1zPWc7CnRoaXMuX21pblNjYWxlPWYubWluU2NhbGU7CnRoaXMuX3g9Zi54TzsKdGhpcy5feT1mLnlPOwp0aGlzLl94UmFkaXVzPWYueFI7CnRoaXMuX3lSYWRpdXM9Zi55UjsKdGhpcy5fY3VzdG9tUHJvcGVydGllcz1kOwp0aGlzLl9hbmdsZT1NYXRoLlBJLzI7CnRoaXMuX3F1ZXJ5PW51bGw7Cn07CmIuQW5pbWF0aW9ucy5qQ2Fyb3VzZWwucHJvdG90eXBlPXtpbml0aWFsaXplOmZ1bmN0aW9uKCl7Yi5BbmltYXRpb25zLmpDYXJvdXNlbC5jYWxsQmFzZU1ldGhvZCh0aGlzLCJpbml0aWFsaXplIik7Cn0sZGlzcG9zZTpmdW5jdGlvbigpe2IuQW5pbWF0aW9ucy5qQ2Fyb3VzZWwuY2FsbEJhc2VNZXRob2QodGhpcywiZGlzcG9zZSIpOwp0aGlzLl9pdGVtcz1udWxsOwp0aGlzLl9jdXN0b21Qcm9wZXJ0aWVzPW51bGw7CnRoaXMuX3F1ZXJ5PW51bGw7Cn0sZ2V0X2FuZ2xlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FuZ2xlOwp9LHNldF9hbmdsZTpmdW5jdGlvbihjKXt0aGlzLl9hbmdsZT1jOwp9LF9nZXRGaW5hbFBvc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FuZ2xlOwp9LF9nZXRBbmltYXRlZFByb3BlcnR5OmZ1bmN0aW9uKCl7cmV0dXJuInRlbGVyaWtDYXJvdXNlbEFuZ2xlIjsKfSxfZ2V0QW5pbWF0aW9uUXVlcnk6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLl9xdWVyeTsKaWYoIWMpe2EuZWFjaCh0aGlzLl9pdGVtcyxmdW5jdGlvbihlLGYpe3ZhciBkPXRoaXMuZWxlbWVudDsKaWYoIWMpe2M9YShkKTsKfWVsc2V7Yz1jLmFkZChkKTsKfX0pOwp0aGlzLl9xdWVyeT1jOwp9cmV0dXJuIGM7Cn0sX3BsYXlBbmltYXRpb246ZnVuY3Rpb24oKXt0aGlzLl9nZXRBbmltYXRpb25RdWVyeSgpLnN0b3AodHJ1ZSwhdGhpcy5faXNDeWNsaWMpOwp2YXIgZD10aGlzLl9pdGVtczsKdmFyIGU9KGQubGVuZ3RoPjApPygoTWF0aC5QSSoyKS9kLmxlbmd0aCk6MDsKdmFyIGY9dGhpcy5fYW5nbGU7CnZhciBjPXRoaXM7CmEuZWFjaChkLGZ1bmN0aW9uKGgsZyl7aWYoZi50b1N0cmluZygpLmluZGV4T2YoImUiKT4tMSl7Zj0oTWF0aC5yb3VuZChmKjEwMDAwKS8xMDAwMCk7Cn1hKHRoaXMuZWxlbWVudCkuc3RvcCh0cnVlLGZhbHNlKS5hbmltYXRlKHtxdWV1ZTp0cnVlLHRlbGVyaWtDYXJvdXNlbEFuZ2xlOmZ9LHt4TzpjLl94LHlPOmMuX3kseFI6Yy5feFJhZGl1cyx5UjpjLl95UmFkaXVzLG1pblNjYWxlOmMuX21pblNjYWxlLHJlZmxlY3Rpb246dGhpcy5yZWZsZWN0aW9uLHdpZHRoOnRoaXMud2lkdGgsaGVpZ2h0OnRoaXMuaGVpZ2h0LG91dGVyV2lkdGg6dGhpcy5vdXRlcldpZHRoLG91dGVySGVpZ2h0OnRoaXMub3V0ZXJIZWlnaHQsY3VzdG9tUHJvcGVydGllczpjLl9jdXN0b21Qcm9wZXJ0aWVzLGR1cmF0aW9uOmMuX2R1cmF0aW9uLGVhc2luZzpjLl9lYXNpbmcsY29tcGxldGU6Yy5fYW5pbWF0aW9uRW5kZWREZWxlZ2F0ZX0pOwpmKz1lOwp9KTsKfX07CmIuQW5pbWF0aW9ucy5qQ2Fyb3VzZWwucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuQW5pbWF0aW9ucy5qQ2Fyb3VzZWwiLGIuQW5pbWF0aW9ucy5qTW92ZUJhc2UpOwphLmZ4LnN0ZXAudGVsZXJpa0Nhcm91c2VsQW5nbGU9ZnVuY3Rpb24oail7dmFyIG49ai5ub3c7CnZhciBvPWoub3B0aW9uczsKdmFyIGw9TWF0aC5zaW4obik7CnZhciBkPW8ubWluU2NhbGU7CnZhciBmPWQrKGwrMSkqKCgxLWQpLzIpOwp2YXIgZz1vLnhPKygoKE1hdGguY29zKG4rTWF0aC5QSSkqby54Uiktby5vdXRlcldpZHRoLzIpKmYpOwp2YXIgaD1vLnlPKygobCpvLnlSKSpmKTsKai5lbGVtLnRlbGVyaWtDYXJvdXNlbEFuZ2xlPWoubm93Owp2YXIgbT1hLmV4dGVuZCh7fSxvLmN1c3RvbVByb3BlcnRpZXMpOwppZihvLmN1c3RvbVByb3BlcnRpZXMpe3ZhciBjPS9eKFtcZCstLl0rKSguKikkLzsKYS5lYWNoKG0sZnVuY3Rpb24ocSxyKXt2YXIgcD1jLmV4ZWMocik7CmlmKHApe21bcV09cD8ocFsxXSpmK3BbMl0pOnI7Cn19KTsKfXZhciBrPSFhLnN1cHBvcnQub3BhY2l0eSYmKG8uY3VzdG9tUHJvcGVydGllcyYmby5jdXN0b21Qcm9wZXJ0aWVzLm9wYWNpdHkpJiZvLnJlZmxlY3Rpb247CnZhciBlPSJweCI7CnZhciBpPWEuZXh0ZW5kKG0se3dpZHRoOm8ud2lkdGgqZitlLGhlaWdodDpvLmhlaWdodCpmKihrPzI6MSkrZSxsZWZ0OmcrZSx0b3A6aCtlLHpJbmRleDpwYXJzZUludChmKjEwMCl9KTsKYShqLmVsZW0pLmNzcygiZGlzcGxheSIsIm5vbmUiKS5jc3MoaSkuY3NzKCJkaXNwbGF5IiwiIik7Cn07CmIuQW5pbWF0aW9ucy5qQ292ZXJGbG93PWZ1bmN0aW9uKGksYyxnLGgsZixkLGUpe2IuQW5pbWF0aW9ucy5qQ292ZXJGbG93LmluaXRpYWxpemVCYXNlKHRoaXMsW2ksYyxoLGVdKTsKdGhpcy5faXRlbXM9ZzsKdGhpcy5fbWluU2NhbGU9Zi5taW5TY2FsZTsKdGhpcy5feD1mLnhPOwp0aGlzLl95PWYueU87CnRoaXMuX3hSYWRpdXM9Zi54UjsKdGhpcy5feVJhZGl1cz1mLnlSOwp0aGlzLl94SXRlbVNwYWNpbmc9Zi54SXRlbVNwYWNpbmc7CnRoaXMuX3lJdGVtU3BhY2luZz1mLnlJdGVtU3BhY2luZzsKdGhpcy5fc2VsZWN0ZWRJdGVtT2Zmc2V0WD1mLnNlbGVjdGVkSXRlbU9mZnNldFg7CnRoaXMuX3NlbGVjdGVkSXRlbU9mZnNldFk9Zi5zZWxlY3RlZEl0ZW1PZmZzZXRZOwp0aGlzLl9tYXRyaXg9Zi5tYXRyaXg7CnRoaXMuX2N1c3RvbVByb3BlcnRpZXM9ZDsKdGhpcy5faW5kZXg9MDsKdGhpcy5fcXVlcnk9bnVsbDsKfTsKYi5BbmltYXRpb25zLmpDb3ZlckZsb3cucHJvdG90eXBlPXtpbml0aWFsaXplOmZ1bmN0aW9uKCl7Yi5BbmltYXRpb25zLmpDb3ZlckZsb3cuY2FsbEJhc2VNZXRob2QodGhpcywiaW5pdGlhbGl6ZSIpOwp9LGRpc3Bvc2U6ZnVuY3Rpb24oKXtiLkFuaW1hdGlvbnMuakNvdmVyRmxvdy5jYWxsQmFzZU1ldGhvZCh0aGlzLCJkaXNwb3NlIik7CnRoaXMuX2l0ZW1zPW51bGw7CnRoaXMuX2N1c3RvbVByb3BlcnRpZXM9bnVsbDsKdGhpcy5fbWF0cml4PW51bGw7CnRoaXMuX3F1ZXJ5PW51bGw7Cn0sZ2V0X2luZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2luZGV4Owp9LHNldF9pbmRleDpmdW5jdGlvbihjKXt0aGlzLl9pbmRleD1jOwp9LF9nZXRGaW5hbFBvc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2luZGV4Owp9LF9nZXRBbmltYXRlZFByb3BlcnR5OmZ1bmN0aW9uKCl7cmV0dXJuInRlbGVyaWtDb3ZlckZsb3dJbmRleCI7Cn0sX2dldEFuaW1hdGlvblF1ZXJ5OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX3F1ZXJ5KXt2YXIgZD10aGlzLl9pdGVtczsKdmFyIGY9YSgpOwpmb3IodmFyIGU9MCxjPWQubGVuZ3RoOwplPGM7CmUrKyl7Zi5hZGQoZFtlXS5lbGVtZW50KTsKfXRoaXMuX3F1ZXJ5PWY7Cn1yZXR1cm4gdGhpcy5fcXVlcnk7Cn0sX2dldFRyYW5zZm9ybVByb3BlcnR5OmZ1bmN0aW9uKCl7dmFyIGM9InRyYW5zZm9ybSI7CmlmKCR0ZWxlcmlrLmlzSUU5TW9kZSl7Yz0ibXNUcmFuc2Zvcm0iOwp9ZWxzZXtpZigkdGVsZXJpay5pc0lFKXtjPSJmaWx0ZXIiOwp9ZWxzZXtpZigkdGVsZXJpay5pc0ZpcmVmb3gpe2M9Ik1velRyYW5zZm9ybSI7Cn1lbHNle2lmKCR0ZWxlcmlrLmlzU2FmYXJpKXtjPSJXZWJraXRUcmFuc2Zvcm0iOwp9ZWxzZXtpZigkdGVsZXJpay5pc09wZXJhKXtjPSJPVHJhbnNmb3JtIjsKfX19fX1yZXR1cm4gYzsKfSxfcGxheUFuaW1hdGlvbjpmdW5jdGlvbigpe3RoaXMuX2dldEFuaW1hdGlvblF1ZXJ5KCkuc3RvcCh0cnVlLCF0aGlzLl9pc0N5Y2xpYyk7CnZhciBnPXRoaXMuX2l0ZW1zOwp2YXIgYz1nLmxlbmd0aDsKdmFyIGk9dGhpcy5fb3duZXIuaXNWZXJ0aWNhbCgpOwp2YXIgaj10aGlzLl9pbmRleDsKdmFyIGQ9Z1tqXTsKaWYoIWQpe3JldHVybjsKfXZhciBlPXt0b3A6dGhpcy5feS1kLm91dGVySGVpZ2h0LzIscmlnaHQ6dGhpcy5feCtkLm91dGVyV2lkdGgvMixib3R0b206dGhpcy5feStkLm91dGVySGVpZ2h0LzIsbGVmdDp0aGlzLl94LWQub3V0ZXJXaWR0aC8yfTsKdmFyIGY9dGhpcy5fbWF0cml4OwppZihmLm0xMT09MSYmZi5tMjI9PTEmJmYubTEyPT0wJiZmLm0yMT09MCl7Zj1udWxsOwp9dmFyIGs9dGhpcy5fZ2V0VHJhbnNmb3JtUHJvcGVydHkoKTsKdmFyIGg9dGhpczsKdmFyIGw9JHRlbGVyaWsuZ2V0Q29udGVudFNpemUodGhpcy5fb3duZXIuX2NsaXBFbGVtZW50KTsKYS5lYWNoKGcsZnVuY3Rpb24oeixIKXt2YXIgSj0oei1qKTsKdmFyIG09KEo9PTApOwp2YXIgdD1tPzE6aC5fbWluU2NhbGU7CnZhciBuPXRoaXMuZWxlbWVudDsKdmFyIEU9cGFyc2VJbnQobi50ZWxlcmlrQ292ZXJGbG93SW5kZXgpOwp2YXIgcD0oRT09MCk7CnZhciBzPXA/MTpoLl9taW5TY2FsZTsKdmFyIEM9KEo+MCk7CnZhciBEPWguX3grdGhpcy5vdXRlcldpZHRoLzI7CnZhciB2PWk/KEQtdGhpcy5vdXRlcldpZHRoKnQpOihlW0M/InJpZ2h0IjoibGVmdCJdKTsKdmFyIEI9aT8oRC10aGlzLm91dGVyV2lkdGgqcyk6KGVbRT4wPyJyaWdodCI6ImxlZnQiXSk7CnZhciBxPWguX3krdGhpcy5vdXRlckhlaWdodC8yOwp2YXIgdz1pPyhlW0M/ImJvdHRvbSI6InRvcCJdKToocS10aGlzLm91dGVySGVpZ2h0KnQpOwp2YXIgRj1pPyhlW0U+MD8iYm90dG9tIjoidG9wIl0pOihxLXRoaXMub3V0ZXJIZWlnaHQqcyk7CnZhciByPXt9Owp2YXIgST0ocHx8bSk7CmlmKGl8fEkpe3IudG9wPXtzdGFydDpGLGVuZDp3fTsKfWlmKCFpfHxJKXtyLmxlZnQ9e3N0YXJ0OkIsZW5kOnZ9Owp9Zm9yKHZhciBHPTA7Ckc8MjsKRysrKXt2YXIgSz0oRz09MCk7CnZhciBvPUs/SjpFOwp2YXIgdT1LP3Q6czsKaWYobz4wKXtpZihpKXtyLnRvcFtLPyJlbmQiOiJzdGFydCJdKz1oLl95UmFkaXVzKygtLW8qaC5feUl0ZW1TcGFjaW5nKTsKfWVsc2V7ci5sZWZ0W0s/ImVuZCI6InN0YXJ0Il0rPWguX3hSYWRpdXMrKC0tbypoLl94SXRlbVNwYWNpbmcpOwp9fWVsc2V7aWYobzwwKXtpZihpKXtyLnRvcFtLPyJlbmQiOiJzdGFydCJdKz0tKGguX3lSYWRpdXMrdGhpcy5vdXRlckhlaWdodCp1KSsoKytvKmguX3lJdGVtU3BhY2luZyk7Cn1lbHNle3IubGVmdFtLPyJlbmQiOiJzdGFydCJdKz0tKGguX3hSYWRpdXMrdGhpcy5vdXRlcldpZHRoKnUpKygrK28qaC5feEl0ZW1TcGFjaW5nKTsKfX1lbHNle3IubGVmdFtLPyJlbmQiOiJzdGFydCJdKz1oLl9zZWxlY3RlZEl0ZW1PZmZzZXRYOwpyLnRvcFtLPyJlbmQiOiJzdGFydCJdKz1oLl9zZWxlY3RlZEl0ZW1PZmZzZXRZOwp9fX1pZihJfHwoKCFyLnRvcHx8KChyLnRvcC5zdGFydD49LXRoaXMub3V0ZXJIZWlnaHQqcyYmci50b3Auc3RhcnQ8PWwuaGVpZ2h0KXx8KHIudG9wLmVuZD49LXRoaXMub3V0ZXJIZWlnaHQqdCYmci50b3AuZW5kPD1sLmhlaWdodCkpKSYmKCFyLmxlZnR8fCgoci5sZWZ0LnN0YXJ0Pj0tdGhpcy5vdXRlcldpZHRoKnMmJnIubGVmdC5zdGFydDw9bC53aWR0aCl8fChyLmxlZnQuZW5kPj0tdGhpcy5vdXRlcldpZHRoKnQmJnIubGVmdC5lbmQ8PWwud2lkdGgpKSkpKXt2YXIgQT17ekluZGV4OigoYy1NYXRoLmFicyhFKSkqMTAwKX07CmlmKHIudG9wKXtBLnRvcD1yLnRvcC5zdGFydCsicHgiOwp9aWYoci5sZWZ0KXtBLmxlZnQ9ci5sZWZ0LnN0YXJ0KyJweCI7Cn1pZihNYXRoLmFicyhFLUopPjEpe0EuekluZGV4PSgoYy1NYXRoLmFicyhKKSkqMTAwKTsKfWEobikuc3RvcCh0cnVlLGZhbHNlKS5jc3MoQSkuYW5pbWF0ZSh7cXVldWU6dHJ1ZSx0ZWxlcmlrQ292ZXJGbG93SW5kZXg6Sn0se2lzVmVydGljYWw6aSxhbmltYXRlU2l6ZTpJLHN0ZXBzOnIsbWluU2NhbGU6aC5fbWluU2NhbGUsd2lkdGg6dGhpcy53aWR0aCxoZWlnaHQ6dGhpcy5oZWlnaHQsb3V0ZXJXaWR0aDp0aGlzLm91dGVyV2lkdGgsb3V0ZXJIZWlnaHQ6dGhpcy5vdXRlckhlaWdodCxtYXRyaXg6Zix0cmFuc2Zvcm1Qcm9wZXJ0eTprLHJlZmxlY3Rpb246dGhpcy5yZWZsZWN0aW9uLGl0ZW1zQ291bnQ6YyxjdXN0b21Qcm9wZXJ0aWVzOmguX2N1c3RvbVByb3BlcnRpZXMsZHVyYXRpb246aC5fZHVyYXRpb24sZWFzaW5nOmguX2Vhc2luZyxjb21wbGV0ZTpoLl9hbmltYXRpb25FbmRlZERlbGVnYXRlfSk7Cn1lbHNle2Eobikuc3RvcCh0cnVlLGZhbHNlKS5hdHRyKCJ0ZWxlcmlrQ292ZXJGbG93SW5kZXgiLEopOwp9fSk7Cn19OwpiLkFuaW1hdGlvbnMuakNvdmVyRmxvdy5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5BbmltYXRpb25zLmpDb3ZlckZsb3ciLGIuQW5pbWF0aW9ucy5qTW92ZUJhc2UpOwphLmZ4LnN0ZXAudGVsZXJpa0NvdmVyRmxvd0luZGV4PWZ1bmN0aW9uKHApe3ZhciB4PXAubm93Owp2YXIgdz1wLm9wdGlvbnM7CnAuZWxlbS50ZWxlcmlrQ292ZXJGbG93SW5kZXg9eDsKdmFyIGM9TWF0aC5hYnMoKHgtcC5zdGFydCkvKHAuZW5kLXAuc3RhcnQpKTsKdmFyIGg9InB4IjsKdmFyIG89e307CmlmKE1hdGguYWJzKHAuc3RhcnQtcC5lbmQpPD0xKXtvLnpJbmRleD1wYXJzZUludCgody5pdGVtc0NvdW50LU1hdGguYWJzKHgpKSoxMDApOwp9dmFyIGo9MDsKdmFyIGQ9MDsKdmFyIGY9dy5pc1ZlcnRpY2FsOwp2YXIgZz13Lm1pblNjYWxlOwp2YXIgcj13LmFuaW1hdGVTaXplPyhwLmVuZD09MD8oZysoMS1nKSpjKTooMS0oMS1nKSpjKSk6ZzsKaWYody5hbmltYXRlU2l6ZSl7aWYody5jdXN0b21Qcm9wZXJ0aWVzKXt2YXIgdT1hLmV4dGVuZCh7fSx3LmN1c3RvbVByb3BlcnRpZXMpOwp2YXIgdj0vXihbXGQrLS5dKykoLiopJC87CmEuZWFjaCh1LGZ1bmN0aW9uKHosQSl7dmFyIHk9di5leGVjKEEpOwp1W3pdPXk/KHlbMV0qcit5WzJdKTpBOwp9KTsKbz1hLmV4dGVuZCh1LG8pOwp9bz1hLmV4dGVuZChvLHt3aWR0aDp3LndpZHRoKnIraCxoZWlnaHQ6dy5oZWlnaHQqcitofSk7Cn1pZih3Lm1hdHJpeCl7dmFyIG09YS5leHRlbmQoe30sdy5tYXRyaXgpOwp2YXIgaz13LmFuaW1hdGVTaXplPyhwLmVuZD09MD8oMS1jKTpjKToxOwp2YXIgcT0oeD09MCk/MDooeDwwPy0xOjEpOwppZihwLnN0YXJ0KnAuZW5kPDApe2lmKChwLnN0YXJ0PDAmJng8MCl8fChwLnN0YXJ0PjAmJng+MCkpe2s9MS1jKk1hdGguYWJzKChwLmVuZC1wLnN0YXJ0KS9wLnN0YXJ0KTsKfWVsc2V7az1jKk1hdGguYWJzKChwLmVuZC1wLnN0YXJ0KS9wLmVuZCktTWF0aC5hYnMocC5zdGFydC9wLmVuZCk7Cn19bT17bTExOjEtKDEtbS5tMTEpKmssbTEyOihtLm0xMiprKSpxLG0yMToobS5tMjEqaykqcSxtMjI6MS0oMS1tLm0yMikqa307CnZhciBuPSgiZmlsdGVyIj09dy50cmFuc2Zvcm1Qcm9wZXJ0eSk7CnZhciBzPSJtYXRyaXgoIittLm0xMSsiLCAiK20ubTIxKyIsICIrbS5tMTIrIiwgIittLm0yMisiLCAwLCAwKSI7CmlmKG4pe3M9InByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5NYXRyaXgoRmlsdGVyVHlwZT0nYmlsaW5lYXInLE0xMT0iK20ubTExKyIsIE0xMj0iK20ubTEyKyIsIE0yMT0iK20ubTIxKyIsIE0yMj0iK20ubTIyKyIsc2l6aW5nTWV0aG9kPSdhdXRvIGV4cGFuZCcpIjsKfW9bdy50cmFuc2Zvcm1Qcm9wZXJ0eV09czsKdmFyIGw9TWF0aC5hYnMobS5tMTEpK01hdGguYWJzKG0ubTEyKTsKdmFyIGU9TWF0aC5hYnMobS5tMjEpK01hdGguYWJzKG0ubTIyKTsKaWYoIWYpe2o9cSooKDEtbCkvMik7Cn1lbHNle2Q9cSooKDEtZSkvMik7Cn1pZihuKXtqKz0obC0xKS8yOwpkKz0oZS0xKS8yOwppZih3Lm1hdHJpeC5tMTImJncucmVmbGVjdGlvbil7aio9MjsKfX19dmFyIHQ9dy5hbmltYXRlU2l6ZTsKdmFyIGk9dy5zdGVwczsKaWYoKGZ8fHQpJiZpLnRvcCl7by50b3A9KGkudG9wLnN0YXJ0KyhpLnRvcC5lbmQtaS50b3Auc3RhcnQpKmMpLWQqcip3Lm91dGVySGVpZ2h0K2g7Cn1pZigoIWZ8fHQpJiZpLmxlZnQpe28ubGVmdD0oaS5sZWZ0LnN0YXJ0KyhpLmxlZnQuZW5kLWkubGVmdC5zdGFydCkqYyktaipyKncub3V0ZXJXaWR0aCtoOwp9aWYoImZpbHRlciI9PXcudHJhbnNmb3JtUHJvcGVydHkmJncubWF0cml4JiZ3LnJlZmxlY3Rpb24pe28uaGVpZ2h0PTIqKG8uaGVpZ2h0P3BhcnNlSW50KG8uaGVpZ2h0KTooZyp3LmhlaWdodCkpK2g7Cn1hKHAuZWxlbSkuY3NzKCJkaXNwbGF5Iiwibm9uZSIpLmNzcyhvKS5jc3MoImRpc3BsYXkiLCIiKTsKfTsKfSkoKTsKDQovKiBFTkQgVGVsZXJpay5XZWIuVUkuQ29tbW9uLkFuaW1hdGlvbi5BbmltYXRpb25TY3JpcHRzLmpzICovDQovKiBTVEFSVCBUZWxlcmlrLldlYi5VSS5Db21tb24uUG9wdXAuUG9wdXBTY3JpcHRzLmpzICovDQpUeXBlLnJlZ2lzdGVyTmFtZXNwYWNlKCJUZWxlcmlrLldlYiIpOwpUeXBlLnJlZ2lzdGVyTmFtZXNwYWNlKCJUZWxlcmlrLldlYi5VSSIpOwpUZWxlcmlrLldlYi5VSS5Nb2RhbEV4dGVuZGVyPWZ1bmN0aW9uKGEpe3RoaXMuX3dpbmRvd1Jlc2l6ZURlbGVnYXRlPW51bGw7CnRoaXMuX3dpbmRvd1Njcm9sbERlbGVnYXRlPW51bGw7CnRoaXMuX3hDb29yZGluYXRlPS0xOwp0aGlzLl95Q29vcmRpbmF0ZT0tMTsKdGhpcy5fYmFja2dyb3VuZEVsZW1lbnQ9bnVsbDsKdGhpcy5fZm9yZWdyb3VuZEVsZW1lbnQ9YTsKdGhpcy5fc2F2ZVRhYkluZGV4ZXM9bmV3IEFycmF5KCk7CnRoaXMuX3NhdmVEZXNhYmxlU2VsZWN0PW5ldyBBcnJheSgpOwp0aGlzLl90YWdXaXRoVGFiSW5kZXg9bmV3IEFycmF5KCJBIiwiQVJFQSIsIkJVVFRPTiIsIklOUFVUIiwiT0JKRUNUIiwiU0VMRUNUIiwiVEVYVEFSRUEiLCJJRlJBTUUiKTsKfTsKVGVsZXJpay5XZWIuVUkuTW9kYWxFeHRlbmRlci5wcm90b3R5cGU9e2Rpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLmhpZGUoKTsKdGhpcy5fYmFja2dyb3VuZEVsZW1lbnQ9bnVsbDsKdGhpcy5fZm9yZWdyb3VuZEVsZW1lbnQ9bnVsbDsKfSxzaG93OmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5fZ2V0TW9kYWxPdmVybGF5KCk7CmlmKCR0ZWxlcmlrLmdldFZpc2libGUoYikpe3JldHVybjsKfXRoaXMuX2F0dGFjaFdpbmRvd0hhbmRsZXJzKHRydWUpOwp2YXIgYT10aGlzLl9mb3JlZ3JvdW5kRWxlbWVudDsKYS5wYXJlbnROb2RlLmFwcGVuZENoaWxkKGIpOwp2YXIgYz0kdGVsZXJpay5nZXRDdXJyZW50U3R5bGUoYSwiekluZGV4Iik7CmlmKCFpc05hTihwYXJzZUludChjKSkpe2Iuc3R5bGUuekluZGV4PWMtMTsKfWIuc3R5bGUuZGlzcGxheT0iIjsKdGhpcy5fZGlzYWJsZVRhYigpOwp0aGlzLl91cGRhdGVQYWdlTGF5b3V0KCk7CnRoaXMuX3VwZGF0ZVBhZ2VMYXlvdXQoKTsKfSxfc3RvcmVCcm93c2VyUG9zaXRpb246ZnVuY3Rpb24oKXt2YXIgYj1kb2N1bWVudC5ib2R5Owp2YXIgYT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7CnRoaXMuX2Jyb3dzZXJUb3A9Yi5zY3JvbGxUb3A+YS5zY3JvbGxUb3A/Yi5zY3JvbGxUb3A6YS5zY3JvbGxUb3A7CnRoaXMuX2Jyb3dzZXJMZWZ0PWIuc2Nyb2xsTGVmdD5hLnNjcm9sbExlZnQ/Yi5zY3JvbGxUb3A6YS5zY3JvbGxMZWZ0Owp9LF9yZXN0b3JlQnJvd3NlclBvc2l0aW9uOmZ1bmN0aW9uKGQsZSl7dHJ5e2lmKG51bGw9PWQpe2Q9dGhpcy5fYnJvd3NlckxlZnQ7Cn1pZihudWxsPT1lKXtlPXRoaXMuX2Jyb3dzZXJUb3A7Cn12YXIgYj1kb2N1bWVudC5ib2R5Owp2YXIgYz1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7CmIuc2Nyb2xsVG9wPWU7CmIuc2Nyb2xsTGVmdD1kOwpjLnNjcm9sbFRvcD1lOwpjLnNjcm9sbExlZnQ9ZDsKfWNhdGNoKGEpe319LGhpZGU6ZnVuY3Rpb24oKXt0aGlzLl9yZXN0b3JlVGFiKCk7CnRoaXMuX2F0dGFjaFdpbmRvd0hhbmRsZXJzKGZhbHNlKTsKdmFyIGE9dGhpcy5fYmFja2dyb3VuZEVsZW1lbnQ7CmlmKGEpe2lmKGEucGFyZW50Tm9kZSl7YS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpOwp9dGhpcy5fYmFja2dyb3VuZEVsZW1lbnQ9bnVsbDsKfX0sX2VuYWJsZVNjcm9sbDpmdW5jdGlvbihhKXtpZihhKXtkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93PW51bGwhPXRoaXMuX292ZXJmbG93P3RoaXMuX292ZXJmbG93OiIiOwpkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUub3ZlcmZsb3c9bnVsbCE9dGhpcy5fZG9jdW1lbnRPdmVyZmxvdz90aGlzLl9kb2N1bWVudE92ZXJmbG93OiIiOwpkb2N1bWVudC5ib2R5LnN0eWxlLm1hcmdpblJpZ2h0PSIiOwp9ZWxzZXt0aGlzLl9vdmVyZmxvdz1kb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93Owpkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iOwp0aGlzLl9kb2N1bWVudE92ZXJmbG93PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5vdmVyZmxvdzsKZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iOwpkb2N1bWVudC5ib2R5LnN0eWxlLm1hcmdpblJpZ2h0PSIxOHB4IjsKfX0sX2dldE1vZGFsT3ZlcmxheTpmdW5jdGlvbigpe2lmKCF0aGlzLl9iYWNrZ3JvdW5kRWxlbWVudCl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CmEuc3R5bGUuZGlzcGxheT0ibm9uZSI7CmEuc3R5bGUucG9zaXRpb249ImFic29sdXRlIjsKaWYoJHRlbGVyaWsuaXNSaWdodFRvTGVmdCh0aGlzLl9mb3JlZ3JvdW5kRWxlbWVudCkpe2Euc3R5bGUucmlnaHQ9IjBweCI7Cn1lbHNle2Euc3R5bGUubGVmdD0iMHB4IjsKfWEuc3R5bGUudG9wPSIwcHgiOwphLnN0eWxlLnpJbmRleD0xMDAwMDsKYS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9IiNhYWFhYWEiOwphLnN0eWxlLmZpbHRlcj0icHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LkFscGhhKHN0eWxlPTAsb3BhY2l0eT01MCkiOwphLnN0eWxlLm9wYWNpdHk9Ii41IjsKYS5zdHlsZS5Nb3pPcGFjaXR5PSIuNSI7CmEuc2V0QXR0cmlidXRlKCJ1bnNlbGVjdGFibGUiLCJvbiIpOwphLmNsYXNzTmFtZT0iVGVsZXJpa01vZGFsT3ZlcmxheSI7CnRoaXMuX2JhY2tncm91bmRFbGVtZW50PWE7Cn1yZXR1cm4gdGhpcy5fYmFja2dyb3VuZEVsZW1lbnQ7Cn0sX2F0dGFjaFdpbmRvd0hhbmRsZXJzOmZ1bmN0aW9uKGEpe3ZhciBiPXdpbmRvdzsKaWYodHJ1ZT09YSl7dGhpcy5fd2luZG93UmVzaXplRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl91cGRhdGVQYWdlTGF5b3V0KTsKJGFkZEhhbmRsZXIoYiwicmVzaXplIix0aGlzLl93aW5kb3dSZXNpemVEZWxlZ2F0ZSk7CnRoaXMuX3dpbmRvd1Njcm9sbERlbGVnYXRlPUZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5fdXBkYXRlUGFnZUxheW91dCk7CiRhZGRIYW5kbGVyKGIsInNjcm9sbCIsdGhpcy5fd2luZG93U2Nyb2xsRGVsZWdhdGUpOwp9ZWxzZXtpZih0aGlzLl93aW5kb3dSZXNpemVEZWxlZ2F0ZSl7JHJlbW92ZUhhbmRsZXIoYiwicmVzaXplIix0aGlzLl93aW5kb3dSZXNpemVEZWxlZ2F0ZSk7Cn10aGlzLl93aW5kb3dSZXNpemVEZWxlZ2F0ZT1udWxsOwppZih0aGlzLl93aW5kb3dTY3JvbGxEZWxlZ2F0ZSl7JHJlbW92ZUhhbmRsZXIoYiwic2Nyb2xsIix0aGlzLl93aW5kb3dTY3JvbGxEZWxlZ2F0ZSk7Cn10aGlzLl93aW5kb3dTY3JvbGxEZWxlZ2F0ZT1udWxsOwp9fSxfdXBkYXRlUGFnZUxheW91dDpmdW5jdGlvbigpe3ZhciBmPShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdD8kdGVsZXJpay5nZXRDb3JyZWN0U2Nyb2xsTGVmdChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpOiR0ZWxlcmlrLmdldENvcnJlY3RTY3JvbGxMZWZ0KGRvY3VtZW50LmJvZHkpKTsKdmFyIGE9KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A/ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDpkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCk7CnZhciBlPSR0ZWxlcmlrLmdldENsaWVudEJvdW5kcygpOwp2YXIgYz1lLndpZHRoOwp2YXIgYj1lLmhlaWdodDsKdmFyIGQ9dGhpcy5fZ2V0TW9kYWxPdmVybGF5KCk7CmQuc3R5bGUud2lkdGg9TWF0aC5tYXgoTWF0aC5tYXgoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFdpZHRoLGRvY3VtZW50LmJvZHkuc2Nyb2xsV2lkdGgpLGMpKyJweCI7CmQuc3R5bGUuaGVpZ2h0PU1hdGgubWF4KE1hdGgubWF4KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQsZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQpLGIpKyJweCI7Cn0sX2Rpc2FibGVUYWI6ZnVuY3Rpb24oKXt2YXIgZj0wOwp2YXIgYTsKdmFyIGU9bmV3IEFycmF5KCk7CkFycmF5LmNsZWFyKHRoaXMuX3NhdmVUYWJJbmRleGVzKTsKZm9yKHZhciBkPTA7CmQ8dGhpcy5fdGFnV2l0aFRhYkluZGV4Lmxlbmd0aDsKZCsrKXthPXRoaXMuX2ZvcmVncm91bmRFbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKHRoaXMuX3RhZ1dpdGhUYWJJbmRleFtkXSk7CmZvcih2YXIgYz0wOwpjPGEubGVuZ3RoOwpjKyspe3ZhciBiPWFbY107CmVbZl09e3RhZzpiLGluZGV4OmIudGFiSW5kZXh9OwpmKys7Cn19Zj0wOwpmb3IodmFyIGQ9MDsKZDx0aGlzLl90YWdXaXRoVGFiSW5kZXgubGVuZ3RoOwpkKyspe2E9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUodGhpcy5fdGFnV2l0aFRhYkluZGV4W2RdKTsKZm9yKHZhciBjPTA7CmM8YS5sZW5ndGg7CmMrKyl7dmFyIGI9YVtjXTsKdGhpcy5fc2F2ZVRhYkluZGV4ZXNbZl09e3RhZzpiLGluZGV4OmIudGFiSW5kZXh9OwphW2NdLnRhYkluZGV4PSItMSI7CmYrKzsKfX1mb3IodmFyIGY9MDsKZjxlLmxlbmd0aDsKZisrKXtlW2ZdLnRhZy50YWJJbmRleD1lW2ZdLmluZGV4Owp9Zj0wOwppZigoU3lzLkJyb3dzZXIuYWdlbnQ9PT1TeXMuQnJvd3Nlci5JbnRlcm5ldEV4cGxvcmVyKSYmKFN5cy5Ccm93c2VyLnZlcnNpb248Nykpe3ZhciBnPW5ldyBBcnJheSgpOwpmb3IodmFyIGQ9MDsKZDx0aGlzLl90YWdXaXRoVGFiSW5kZXgubGVuZ3RoOwpkKyspe2E9dGhpcy5fZm9yZWdyb3VuZEVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIlNFTEVDVCIpOwpmb3IodmFyIGM9MDsKYzxhLmxlbmd0aDsKYysrKXtnW2ZdPWFbY107CmYrKzsKfX1mPTA7CkFycmF5LmNsZWFyKHRoaXMuX3NhdmVEZXNhYmxlU2VsZWN0KTsKYT1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiU0VMRUNUIik7CmZvcih2YXIgYz0wOwpjPGEubGVuZ3RoOwpjKyspe2lmKEFycmF5LmluZGV4T2YoZyxhW2NdKT09LTEpe3RoaXMuX3NhdmVEZXNhYmxlU2VsZWN0W2ZdPXt0YWc6YVtjXSx2aXNpYjokdGVsZXJpay5nZXRDdXJyZW50U3R5bGUoYVtjXSwidmlzaWJpbGl0eSIpfTsKYVtjXS5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iOwpmKys7Cn19fX0sX3Jlc3RvcmVUYWI6ZnVuY3Rpb24oKXtmb3IodmFyIGE9MDsKYTx0aGlzLl9zYXZlVGFiSW5kZXhlcy5sZW5ndGg7CmErKyl7dGhpcy5fc2F2ZVRhYkluZGV4ZXNbYV0udGFnLnRhYkluZGV4PXRoaXMuX3NhdmVUYWJJbmRleGVzW2FdLmluZGV4Owp9aWYoKFN5cy5Ccm93c2VyLmFnZW50PT09U3lzLkJyb3dzZXIuSW50ZXJuZXRFeHBsb3JlcikmJihTeXMuQnJvd3Nlci52ZXJzaW9uPDcpKXtmb3IodmFyIGI9MDsKYjx0aGlzLl9zYXZlRGVzYWJsZVNlbGVjdC5sZW5ndGg7CmIrKyl7dGhpcy5fc2F2ZURlc2FibGVTZWxlY3RbYl0udGFnLnN0eWxlLnZpc2liaWxpdHk9dGhpcy5fc2F2ZURlc2FibGVTZWxlY3RbYl0udmlzaWI7Cn19fX07ClRlbGVyaWsuV2ViLlVJLk1vZGFsRXh0ZW5kZXIucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuTW9kYWxFeHRlbmRlciIsbnVsbCk7ClR5cGUucmVnaXN0ZXJOYW1lc3BhY2UoIlRlbGVyaWsuV2ViIik7ClRlbGVyaWsuV2ViLlBvc2l0aW9uaW5nTW9kZT1mdW5jdGlvbigpe3Rocm93IEVycm9yLmludmFsaWRPcGVyYXRpb24oKTsKfTsKVGVsZXJpay5XZWIuUG9zaXRpb25pbmdNb2RlLnByb3RvdHlwZT17QWJzb2x1dGU6MCxDZW50ZXI6MSxCb3R0b21MZWZ0OjIsQm90dG9tUmlnaHQ6MyxUb3BMZWZ0OjQsVG9wUmlnaHQ6NX07ClRlbGVyaWsuV2ViLlBvc2l0aW9uaW5nTW9kZS5yZWdpc3RlckVudW0oIlRlbGVyaWsuV2ViLlBvc2l0aW9uaW5nTW9kZSIpOwpUZWxlcmlrLldlYi5Qb3B1cEJlaGF2aW9yPWZ1bmN0aW9uKGEpe1RlbGVyaWsuV2ViLlBvcHVwQmVoYXZpb3IuaW5pdGlhbGl6ZUJhc2UodGhpcyxbYV0pOwp0aGlzLl94PTA7CnRoaXMuX3k9MDsKdGhpcy5fcG9zaXRpb25pbmdNb2RlPVRlbGVyaWsuV2ViLlBvc2l0aW9uaW5nTW9kZS5BYnNvbHV0ZTsKdGhpcy5fcGFyZW50RWxlbWVudD1udWxsOwp0aGlzLl9wYXJlbnRFbGVtZW50SUQ9bnVsbDsKdGhpcy5fbW92ZUhhbmRsZXI9bnVsbDsKdGhpcy5fZmlyc3RQb3B1cD10cnVlOwp0aGlzLl9vcmlnaW5hbFBhcmVudD1udWxsOwp0aGlzLl9vdmVybGF5PWZhbHNlOwp0aGlzLl9rZWVwSW5TY3JlZW5Cb3VuZHM9dHJ1ZTsKdGhpcy5fbWFuYWdlVmlzaWJpbGl0eT10cnVlOwp9OwpUZWxlcmlrLldlYi5Qb3B1cEJlaGF2aW9yLl9pZTZwaW5uZWRMaXN0PXt9OwpUZWxlcmlrLldlYi5Qb3B1cEJlaGF2aW9yLnByb3RvdHlwZT17Z2V0UGFnZU9mZnNldDpmdW5jdGlvbigpe3ZhciBhPXt4OigkdGVsZXJpay5nZXRDb3JyZWN0U2Nyb2xsTGVmdChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpfHwkdGVsZXJpay5nZXRDb3JyZWN0U2Nyb2xsTGVmdChkb2N1bWVudC5ib2R5KSkseTooZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcHx8ZG9jdW1lbnQuYm9keS5zY3JvbGxUb3ApfTsKcmV0dXJuIGE7Cn0scGluOmZ1bmN0aW9uKGMpe3ZhciBkPXRoaXMuZ2V0X2VsZW1lbnRUb1Nob3coKTsKdmFyIGI9dGhpcy5nZXRQYWdlT2Zmc2V0KCk7CmlmKCR0ZWxlcmlrLmlzSUU2KXt2YXIgYT10aGlzLmdldF9pZCgpOwppZihjKXtpZihUZWxlcmlrLldlYi5Qb3B1cEJlaGF2aW9yLl9pZTZwaW5uZWRMaXN0W2FdKXtyZXR1cm47Cn12YXIgZT0kdGVsZXJpay5nZXRCb3VuZHMoZCk7ClRlbGVyaWsuV2ViLlBvcHVwQmVoYXZpb3IuX2llNnBpbm5lZExpc3RbYV09d2luZG93LnNldEludGVydmFsKEZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsZnVuY3Rpb24oKXt2YXIgaj10aGlzLmdldFBhZ2VPZmZzZXQoKTsKdmFyIGg9ZS54LWIueCtqLng7CnZhciBpPWUueS1iLnkrai55OwppZih0aGlzLmdldF94KCk9PWgmJnRoaXMuZ2V0X3koKT09aSl7cmV0dXJuOwp9dmFyIGs9dGhpcy5nZXRfcGFyZW50RWxlbWVudCgpOwp0aGlzLnNldF9wYXJlbnRFbGVtZW50KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCk7CnRoaXMuc2V0X3goaCk7CnRoaXMuc2V0X3koaSk7CnRoaXMuc2hvdygpOwp0aGlzLnNldF9wYXJlbnRFbGVtZW50KGspOwp9KSwxMzApOwp9ZWxzZXt2YXIgZj1UZWxlcmlrLldlYi5Qb3B1cEJlaGF2aW9yLl9pZTZwaW5uZWRMaXN0W2FdOwppZihmKXt3aW5kb3cuY2xlYXJJbnRlcnZhbChmKTsKfWRlbGV0ZSBUZWxlcmlrLldlYi5Qb3B1cEJlaGF2aW9yLl9pZTZwaW5uZWRMaXN0W2FdOwp9fWVsc2V7dmFyIGc9Yz8iZml4ZWQiOiJhYnNvbHV0ZSI7CmlmKGQuc3R5bGUucG9zaXRpb249PWcpe3JldHVybjsKfXZhciBlPSR0ZWxlcmlrLmdldEJvdW5kcyhkKTsKaWYoYyYmKGIueHx8Yi55KSl7dGhpcy5feD1lLngtYi54Owp0aGlzLl95PWUueS1iLnk7CiR0ZWxlcmlrLnNldExvY2F0aW9uKGQse3g6dGhpcy5feCx5OnRoaXMuX3l9KTsKfWQuc3R5bGUucG9zaXRpb249ZzsKfX0sY2VudGVyOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5nZXRfZWxlbWVudFRvU2hvdygpOwppZih0aGlzLl9tYW5hZ2VWaXNpYmlsaXR5KXskdGVsZXJpay5zZXRWaXNpYmxlKGIsdHJ1ZSk7Cn12YXIgZD0kdGVsZXJpay5nZXRDbGllbnRCb3VuZHMoKTsKdmFyIGE9JHRlbGVyaWsuZ2V0Qm91bmRzKGIpOwp2YXIgZj1wYXJzZUludCgoZC53aWR0aC1hLndpZHRoKS8yKTsKdmFyIGU9cGFyc2VJbnQoKGQuaGVpZ2h0LWEuaGVpZ2h0KS8yKTsKdmFyIGM9dGhpcy5nZXRfcGFyZW50RWxlbWVudCgpOwp0aGlzLnNldF9wYXJlbnRFbGVtZW50KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCk7CnRoaXMuc2V0X3goZik7CnRoaXMuc2V0X3koZSk7CnRoaXMuc2hvdygpOwp0aGlzLnNldF9wYXJlbnRFbGVtZW50KGMpOwp9LGdldF9wYXJlbnRFbGVtZW50OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX3BhcmVudEVsZW1lbnQmJnRoaXMuX3BhcmVudEVsZW1lbnRJRCl7dGhpcy5zZXRfcGFyZW50RWxlbWVudCgkZ2V0KHRoaXMuX3BhcmVudEVsZW1lbnRJRCkpOwpTeXMuRGVidWcuYXNzZXJ0KHRoaXMuX3BhcmVudEVsZW1lbnQhPW51bGwsU3RyaW5nLmZvcm1hdCgnQ291bGRuXCd0IGZpbmQgcGFyZW50IGVsZW1lbnQgInswfSInLHRoaXMuX3BhcmVudEVsZW1lbnRJRCkpOwp9cmV0dXJuIHRoaXMuX3BhcmVudEVsZW1lbnQ7Cn0sc2V0X3BhcmVudEVsZW1lbnQ6ZnVuY3Rpb24oYSl7dGhpcy5fcGFyZW50RWxlbWVudD1hOwp9LGdldF9wYXJlbnRFbGVtZW50SUQ6ZnVuY3Rpb24oKXtpZih0aGlzLl9wYXJlbnRFbGVtZW50KXtyZXR1cm4gdGhpcy5fcGFyZW50RWxlbWVudC5pZDsKfXJldHVybiB0aGlzLl9wYXJlbnRFbGVtZW50SUQ7Cn0sc2V0X3BhcmVudEVsZW1lbnRJRDpmdW5jdGlvbihhKXt0aGlzLl9wYXJlbnRFbGVtZW50SUQ9YTsKaWYodGhpcy5nZXRfaXNJbml0aWFsaXplZCgpKXt0aGlzLnNldF9wYXJlbnRFbGVtZW50KCRnZXQoYSkpOwp9fSxnZXRfcG9zaXRpb25pbmdNb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Bvc2l0aW9uaW5nTW9kZTsKfSxzZXRfcG9zaXRpb25pbmdNb2RlOmZ1bmN0aW9uKGEpe3RoaXMuX3Bvc2l0aW9uaW5nTW9kZT1hOwp9LGdldF94OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3g7Cn0sc2V0X3g6ZnVuY3Rpb24oYSl7aWYoYSE9dGhpcy5feCl7dGhpcy5feD1hOwppZigkdGVsZXJpay5nZXRWaXNpYmxlKHRoaXMuZ2V0X2VsZW1lbnRUb1Nob3coKSkmJnRoaXMuX21hbmFnZVZpc2liaWxpdHkpe3RoaXMuc2hvdygpOwp9fX0sZ2V0X3k6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5feTsKfSxzZXRfeTpmdW5jdGlvbihhKXtpZihhIT10aGlzLl95KXt0aGlzLl95PWE7CmlmKCR0ZWxlcmlrLmdldFZpc2libGUodGhpcy5nZXRfZWxlbWVudFRvU2hvdygpKSYmdGhpcy5fbWFuYWdlVmlzaWJpbGl0eSl7dGhpcy5zaG93KCk7Cn19fSxnZXRfb3ZlcmxheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vdmVybGF5Owp9LHNldF9vdmVybGF5OmZ1bmN0aW9uKGMpe3RoaXMuX292ZXJsYXk9YzsKdGhpcy5fYXR0YWNoV2luZG93SGFuZGxlcnMoZmFsc2UpOwppZih0aGlzLl9vdmVybGF5KXt0aGlzLl9hdHRhY2hXaW5kb3dIYW5kbGVycyh0cnVlKTsKfWVsc2V7aWYoISgoU3lzLkJyb3dzZXIuYWdlbnQ9PT1TeXMuQnJvd3Nlci5JbnRlcm5ldEV4cGxvcmVyKSYmKFN5cy5Ccm93c2VyLnZlcnNpb248NykpKXt2YXIgYT10aGlzLmdldF9lbGVtZW50VG9TaG93KCk7CnZhciBiPWEuX2hpZGVXaW5kb3dlZEVsZW1lbnRzSUZyYW1lOwppZihiKXtiLnN0eWxlLmRpc3BsYXk9Im5vbmUiOwp9fX19LGdldF9tYW5hZ2VWaXNpYmlsaXR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21hbmFnZVZpc2liaWxpdHk7Cn0sc2V0X21hbmFnZVZpc2liaWxpdHk6ZnVuY3Rpb24oYSl7dGhpcy5fbWFuYWdlVmlzaWJpbGl0eT1hOwp9LGdldF9rZWVwSW5TY3JlZW5Cb3VuZHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fa2VlcEluU2NyZWVuQm91bmRzOwp9LHNldF9rZWVwSW5TY3JlZW5Cb3VuZHM6ZnVuY3Rpb24oYSl7dGhpcy5fa2VlcEluU2NyZWVuQm91bmRzPWE7Cn0sZ2V0X2VsZW1lbnRUb1Nob3c6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZWxlbWVudFRvU2hvdz90aGlzLl9lbGVtZW50VG9TaG93OnRoaXMuZ2V0X2VsZW1lbnQoKTsKfSxzZXRfZWxlbWVudFRvU2hvdzpmdW5jdGlvbihhKXtpZih0aGlzLl9lbGVtZW50VG9TaG93KXt0aGlzLl9kZXRhY2hFbGVtZW50VG9TaG93KCk7Cn10aGlzLl9lbGVtZW50VG9TaG93PWE7Cn0sX2RldGFjaEVsZW1lbnRUb1Nob3c6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmdldF9lbGVtZW50VG9TaG93KCk7CmlmKHRoaXMuX21vdmVIYW5kbGVyKXskdGVsZXJpay5yZW1vdmVFeHRlcm5hbEhhbmRsZXIoYywibW92ZSIsdGhpcy5fbW92ZUhhbmRsZXIpOwp0aGlzLl9tb3ZlSGFuZGxlcj1udWxsOwp9dmFyIGE9Yy5faGlkZVdpbmRvd2VkRWxlbWVudHNJRnJhbWU7CmlmKGEpe3ZhciBiPWEucGFyZW50Tm9kZTsKdmFyIGQ9YS5uZXh0U2libGluZzsKaWYoYil7Yi5yZW1vdmVDaGlsZChhKTsKaWYoZCl7Yi5pbnNlcnRCZWZvcmUoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpLGQpOwp9ZWxzZXtiLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKSk7Cn19fX0saGlkZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0X2VsZW1lbnRUb1Nob3coKTsKaWYodGhpcy5fbWFuYWdlVmlzaWJpbGl0eSl7JHRlbGVyaWsuc2V0VmlzaWJsZShhLGZhbHNlKTsKfWlmKGEub3JpZ2luYWxXaWR0aCl7YS5zdHlsZS53aWR0aD1hLm9yaWdpbmFsV2lkdGgrInB4IjsKYS5vcmlnaW5hbFdpZHRoPW51bGw7Cn1pZihTeXMuQnJvd3Nlci5hZ2VudD09PVN5cy5Ccm93c2VyLkludGVybmV0RXhwbG9yZXJ8fHRoaXMuX292ZXJsYXkpe3ZhciBiPWEuX2hpZGVXaW5kb3dlZEVsZW1lbnRzSUZyYW1lOwppZihiKXtiLnN0eWxlLmRpc3BsYXk9Im5vbmUiOwp9fX0sc2hvdzpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0X2VsZW1lbnRUb1Nob3coKTsKYS5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiOwp2YXIgaz1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7CmlmKCR0ZWxlcmlrLmlzRmlyZWZveCl7dmFyIGc9JHRlbGVyaWsuZ2V0Q3VycmVudFN0eWxlKGssIm92ZXJmbG93Iik7CmlmKCJoaWRkZW4iPT1nKXthLnN0eWxlLmxlZnQ9ay5zY3JvbGxMZWZ0KyJweCI7CmEuc3R5bGUudG9wPWsuc2Nyb2xsTGVmdCsicHgiOwp9fXZhciBoPXRoaXMuX21hbmFnZVZpc2liaWxpdHk7CmlmKGgpeyR0ZWxlcmlrLnNldFZpc2libGUoYSx0cnVlKTsKfXZhciBlPWEub2Zmc2V0UGFyZW50fHxrOwppZihoKXskdGVsZXJpay5zZXRWaXNpYmxlKGEsZmFsc2UpOwp9dmFyIGI7CnZhciBsOwppZih0aGlzLl9wYXJlbnRFbGVtZW50KXtsPSR0ZWxlcmlrLmdldEJvdW5kcyh0aGlzLl9wYXJlbnRFbGVtZW50KTsKdmFyIGY9dGhpcy5fZ2V0T2Zmc2V0UGFyZW50TG9jYXRpb24oZSk7CmI9e3g6bC54LWYueCx5OmwueS1mLnl9Owp9ZWxzZXtsPSR0ZWxlcmlrLmdldEJvdW5kcyhlKTsKYj17eDowLHk6MH07Cn1pZihoKXskdGVsZXJpay5zZXRWaXNpYmxlKGEsdHJ1ZSk7Cn12YXIgaj1hLm9mZnNldFdpZHRoLShhLmNsaWVudExlZnQ/YS5jbGllbnRMZWZ0KjI6MCk7CnZhciBkPWEub2Zmc2V0SGVpZ2h0LShhLmNsaWVudFRvcD9hLmNsaWVudFRvcCoyOjApOwp2YXIgYzsKc3dpdGNoKHRoaXMuX3Bvc2l0aW9uaW5nTW9kZSl7Y2FzZSBUZWxlcmlrLldlYi5Qb3NpdGlvbmluZ01vZGUuQ2VudGVyOmM9e3g6TWF0aC5yb3VuZChsLndpZHRoLzItai8yKSx5Ok1hdGgucm91bmQobC5oZWlnaHQvMi1kLzIpfTsKYnJlYWs7CmNhc2UgVGVsZXJpay5XZWIuUG9zaXRpb25pbmdNb2RlLkJvdHRvbUxlZnQ6Yz17eDowLHk6bC5oZWlnaHR9OwpicmVhazsKY2FzZSBUZWxlcmlrLldlYi5Qb3NpdGlvbmluZ01vZGUuQm90dG9tUmlnaHQ6Yz17eDpsLndpZHRoLWoseTpsLmhlaWdodH07CmJyZWFrOwpjYXNlIFRlbGVyaWsuV2ViLlBvc2l0aW9uaW5nTW9kZS5Ub3BMZWZ0OmM9e3g6MCx5Oi1hLm9mZnNldEhlaWdodH07CmJyZWFrOwpjYXNlIFRlbGVyaWsuV2ViLlBvc2l0aW9uaW5nTW9kZS5Ub3BSaWdodDpjPXt4Omwud2lkdGgtaix5Oi1hLm9mZnNldEhlaWdodH07CmJyZWFrOwpkZWZhdWx0OmM9e3g6MCx5OjB9Owp9Yy54Kz10aGlzLl94K2IueDsKYy55Kz10aGlzLl95K2IueTsKJHRlbGVyaWsuc2V0TG9jYXRpb24oYSxjKTsKaWYodGhpcy5fZmlyc3RQb3B1cCl7YS5zdHlsZS53aWR0aD1qKyJweCI7Cn10aGlzLl9maXJzdFBvcHVwPWZhbHNlOwp2YXIgaT10aGlzLl9maXhQb3NpdGlvbkluQm91bmRzKCk7CnRoaXMuX2NyZWF0ZU92ZXJsYXkoaSk7Cn0sX2dldFZpZXdwb3J0Qm91bmRzOmZ1bmN0aW9uKCl7dmFyIGI9JHRlbGVyaWsuZ2V0Q2xpZW50Qm91bmRzKCk7CnZhciBjPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKdmFyIGE9ZG9jdW1lbnQuYm9keTsKYi5zY3JvbGxMZWZ0PSR0ZWxlcmlrLmlzTW9iaWxlU2FmYXJpP3dpbmRvdy5wYWdlWE9mZnNldDooJHRlbGVyaWsuZ2V0Q29ycmVjdFNjcm9sbExlZnQoYyl8fCR0ZWxlcmlrLmdldENvcnJlY3RTY3JvbGxMZWZ0KGEpKTsKYi5zY3JvbGxUb3A9JHRlbGVyaWsuaXNNb2JpbGVTYWZhcmk/d2luZG93LnBhZ2VZT2Zmc2V0OihjLnNjcm9sbFRvcHx8YS5zY3JvbGxUb3ApOwpyZXR1cm4gYjsKfSxfZ2V0T2Zmc2V0UGFyZW50TG9jYXRpb246ZnVuY3Rpb24oYSl7aWYoYSYmYS50YWdOYW1lLnRvVXBwZXJDYXNlKCkhPSJCT0RZIiYmYS50YWdOYW1lLnRvVXBwZXJDYXNlKCkhPSJIVE1MIil7dmFyIGI9JHRlbGVyaWsuZ2V0TG9jYXRpb24oYSk7CnZhciBjPSR0ZWxlcmlrLmdldEJvcmRlckJveChhKTsKYi54Kz1jLnRvcDsKYi55Kz1jLmxlZnQ7CmIueC09JHRlbGVyaWsuZ2V0Q29ycmVjdFNjcm9sbExlZnQoYSk7CmIueS09YS5zY3JvbGxUb3A7CnJldHVybiBiOwp9cmV0dXJue3g6MCx5OjB9Owp9LF9maXhQb3NpdGlvbkluQm91bmRzOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5nZXRfZWxlbWVudFRvU2hvdygpOwp2YXIgZz0kdGVsZXJpay5nZXRCb3VuZHMoYik7CmlmKCF0aGlzLl9rZWVwSW5TY3JlZW5Cb3VuZHMpe3JldHVybiBnOwp9dmFyIGk9dGhpcy5fZ2V0Vmlld3BvcnRCb3VuZHMoKTsKdmFyIGY9ZmFsc2U7CnZhciBkPShpLndpZHRoPmcud2lkdGgpOwp2YXIgbT0oaS5oZWlnaHQ+Zy5oZWlnaHQpOwp2YXIgaz1pLnNjcm9sbFRvcDsKdmFyIGo9aS5oZWlnaHQrazsKdmFyIGU9aS5zY3JvbGxMZWZ0Owp2YXIgYz1pLndpZHRoK2U7CmlmKCgkdGVsZXJpay5pc0lFOHx8JHRlbGVyaWsuaXNPcGVyYXx8JHRlbGVyaWsuaXNTYWZhcmkpJiYkdGVsZXJpay5pc1JpZ2h0VG9MZWZ0KGRvY3VtZW50LmJvZHkpKXt2YXIgaD1iLnN0eWxlLmRpc3BsYXk7CmlmKCR0ZWxlcmlrLmlzT3BlcmEpe2Iuc3R5bGUuZGlzcGxheT0ibm9uZSI7Cn12YXIgbD1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsV2lkdGg7CmM9bD9sOmRvY3VtZW50LmJvZHkuc2Nyb2xsV2lkdGg7CmlmKCR0ZWxlcmlrLmlzT3BlcmEpe2Iuc3R5bGUuZGlzcGxheT1oOwp9fWlmKGcueDxlfHwhZCl7Zy54PWU7CmY9dHJ1ZTsKfWlmKGcueTxrfHwhbSl7Zy55PWs7CmY9dHJ1ZTsKfWlmKGQmJihnLngrZy53aWR0aD5jKSl7Zy54PWMtZy53aWR0aDsKZj10cnVlOwp9aWYobSYmKGo8Zy55K2cuaGVpZ2h0KSl7Zy55PWotZy5oZWlnaHQ7CmY9dHJ1ZTsKfWlmKGYpe3ZhciBhPXRoaXMuX2dldE9mZnNldFBhcmVudExvY2F0aW9uKGIub2Zmc2V0UGFyZW50KTsKZy55LT1hLnk7CmcueC09YS54OwokdGVsZXJpay5zZXRMb2NhdGlvbihiLGcpOwp9cmV0dXJuIGc7Cn0sX2NyZWF0ZU92ZXJsYXk6ZnVuY3Rpb24oZSl7aWYoISR0ZWxlcmlrLmlzSUU2JiYhdGhpcy5fb3ZlcmxheSl7cmV0dXJuOwp9dmFyIGE9dGhpcy5nZXRfZWxlbWVudFRvU2hvdygpOwp2YXIgZD1hLl9oaWRlV2luZG93ZWRFbGVtZW50c0lGcmFtZTsKaWYoIWQpe2Q9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaWZyYW1lIik7CmQuc3JjPSJqYXZhc2NyaXB0Oic8aHRtbD48L2h0bWw+JzsiOwpkLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSI7CmQuc3R5bGUuZGlzcGxheT0ibm9uZSI7CmQuc2Nyb2xsaW5nPSJubyI7CmQuZnJhbWVCb3JkZXI9IjAiOwpkLnRhYkluZGV4PSItMSI7CmQuc3R5bGUuZmlsdGVyPSJwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuQWxwaGEoc3R5bGU9MCxvcGFjaXR5PTApIjsKYS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShkLGEpOwphLl9oaWRlV2luZG93ZWRFbGVtZW50c0lGcmFtZT1kOwp0aGlzLl9tb3ZlSGFuZGxlcj1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX29uTW92ZSk7CiR0ZWxlcmlrLmFkZEV4dGVybmFsSGFuZGxlcihhLCJtb3ZlIix0aGlzLl9tb3ZlSGFuZGxlcik7Cn0kdGVsZXJpay5zZXRCb3VuZHMoZCxlKTsKaWYoJHRlbGVyaWsuaXNGaXJlZm94KXt2YXIgYz10aGlzLl9nZXRWaWV3cG9ydEJvdW5kcygpOwpkLnN0eWxlLnRvcD1wYXJzZUludChlLnkpLWMuc2Nyb2xsVG9wKyJweCI7CmQuc3R5bGUubGVmdD1wYXJzZUludChlLngpLWMuc2Nyb2xsTGVmdCsicHgiOwpkLnN0eWxlLnBvc2l0aW9uPSJmaXhlZCI7CmlmKCR0ZWxlcmlrLmlzRmlyZWZveDMpe2Quc3R5bGUuYmFja2dyb3VuZENvbG9yPSIjZmZmIjsKfX1pZigkdGVsZXJpay5xdWlya3NNb2RlKXtyZXR1cm47Cn1kLnN0eWxlLmRpc3BsYXk9YS5zdHlsZS5kaXNwbGF5Owp2YXIgYj0kdGVsZXJpay5nZXRDdXJyZW50U3R5bGUoYSwiekluZGV4Iik7CmlmKGIpe2Quc3R5bGUuekluZGV4PWI7Cn19LF9zZXRDb29yZGluYXRlczpmdW5jdGlvbihhLGIpe3ZhciBjPWZhbHNlOwppZihhIT10aGlzLl94KXt0aGlzLl94PWE7CmM9dHJ1ZTsKfWlmKGIhPXRoaXMuX3kpe3RoaXMuX3k9YjsKYz10cnVlOwp9aWYoJHRlbGVyaWsuZ2V0VmlzaWJsZSh0aGlzLmdldF9lbGVtZW50VG9TaG93KCkpJiZjJiZ0aGlzLl9tYW5hZ2VWaXNpYmlsaXR5KXt0aGlzLnNob3coKTsKfX0saW5pdGlhbGl6ZTpmdW5jdGlvbigpe1RlbGVyaWsuV2ViLlBvcHVwQmVoYXZpb3IuY2FsbEJhc2VNZXRob2QodGhpcywiaW5pdGlhbGl6ZSIpOwp0aGlzLmhpZGUoKTsKfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRfZWxlbWVudFRvU2hvdygpOwppZihhKXt0aGlzLl9hdHRhY2hXaW5kb3dIYW5kbGVycyhmYWxzZSk7CmlmKCR0ZWxlcmlrLmdldFZpc2libGUoYSkmJnRoaXMuX21hbmFnZVZpc2liaWxpdHkpe3RoaXMuaGlkZSgpOwp9aWYodGhpcy5fb3JpZ2luYWxQYXJlbnQpe2EucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKTsKdGhpcy5fb3JpZ2luYWxQYXJlbnQuYXBwZW5kQ2hpbGQoYSk7CnRoaXMuX29yaWdpbmFsUGFyZW50PW51bGw7Cn10aGlzLl9kZXRhY2hFbGVtZW50VG9TaG93KCk7Cn10aGlzLl9wYXJlbnRFbGVtZW50PW51bGw7ClRlbGVyaWsuV2ViLlBvcHVwQmVoYXZpb3IuY2FsbEJhc2VNZXRob2QodGhpcywiZGlzcG9zZSIpOwppZihhJiZhLl9iZWhhdmlvcnMmJmEuX2JlaGF2aW9ycy5sZW5ndGg9PTApe2EuX2JlaGF2aW9ycz1udWxsOwp9YT1udWxsOwp9LF9vbk1vdmU6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmdldF9lbGVtZW50VG9TaG93KCk7CnZhciBiPWMuX2hpZGVXaW5kb3dlZEVsZW1lbnRzSUZyYW1lOwppZihiKXtpZihTeXMuQnJvd3Nlci5hZ2VudD09PVN5cy5Ccm93c2VyLkZpcmVmb3gpe3ZhciBhPXRoaXMuX2dldFZpZXdwb3J0Qm91bmRzKCk7CmIuc3R5bGUudG9wPXBhcnNlSW50KGMuc3R5bGUudG9wKS1hLnNjcm9sbFRvcCsicHgiOwpiLnN0eWxlLmxlZnQ9cGFyc2VJbnQoYy5zdHlsZS5sZWZ0KS1hLnNjcm9sbExlZnQrInB4IjsKYi5zdHlsZS5wb3NpdGlvbj0iZml4ZWQiOwp9ZWxzZXtiLnN0eWxlLnRvcD1jLnN0eWxlLnRvcDsKYi5zdHlsZS5sZWZ0PWMuc3R5bGUubGVmdDsKfX19LF9oYW5kbGVFbGVtZW50UmVzaXplOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5nZXRfZWxlbWVudFRvU2hvdygpOwp2YXIgYT1iLl9oaWRlV2luZG93ZWRFbGVtZW50c0lGcmFtZTsKaWYoYSl7dmFyIGM9JHRlbGVyaWsuZ2V0Qm91bmRzKGIpOwokdGVsZXJpay5zZXRCb3VuZHMoYSxjKTsKfX0sX2F0dGFjaFdpbmRvd0hhbmRsZXJzOmZ1bmN0aW9uKGEpe2lmKCFTeXMuQnJvd3Nlci5hZ2VudD09PVN5cy5Ccm93c2VyLkZpcmVmb3gpe3JldHVybjsKfXZhciBiPXdpbmRvdzsKaWYodHJ1ZT09YSl7dGhpcy5fd2luZG93UmVzaXplRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vbk1vdmUpOwokdGVsZXJpay5hZGRFeHRlcm5hbEhhbmRsZXIoYiwicmVzaXplIix0aGlzLl93aW5kb3dSZXNpemVEZWxlZ2F0ZSk7CnRoaXMuX3dpbmRvd1Njcm9sbERlbGVnYXRlPUZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5fb25Nb3ZlKTsKJHRlbGVyaWsuYWRkRXh0ZXJuYWxIYW5kbGVyKGIsInNjcm9sbCIsdGhpcy5fd2luZG93U2Nyb2xsRGVsZWdhdGUpOwp9ZWxzZXtpZih0aGlzLl93aW5kb3dSZXNpemVEZWxlZ2F0ZSl7JHRlbGVyaWsucmVtb3ZlRXh0ZXJuYWxIYW5kbGVyKGIsInJlc2l6ZSIsdGhpcy5fd2luZG93UmVzaXplRGVsZWdhdGUpOwp9dGhpcy5fd2luZG93UmVzaXplRGVsZWdhdGU9bnVsbDsKaWYodGhpcy5fd2luZG93U2Nyb2xsRGVsZWdhdGUpeyR0ZWxlcmlrLnJlbW92ZUV4dGVybmFsSGFuZGxlcihiLCJzY3JvbGwiLHRoaXMuX3dpbmRvd1Njcm9sbERlbGVnYXRlKTsKfXRoaXMuX3dpbmRvd1Njcm9sbERlbGVnYXRlPW51bGw7Cn19fTsKVGVsZXJpay5XZWIuUG9wdXBCZWhhdmlvci5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5Qb3B1cEJlaGF2aW9yIixTeXMuVUkuQmVoYXZpb3IpOwpUeXBlLnJlZ2lzdGVyTmFtZXNwYWNlKCJUZWxlcmlrLldlYiIpOwpUeXBlLnJlZ2lzdGVyTmFtZXNwYWNlKCJUZWxlcmlrLldlYi5VSSIpOwooZnVuY3Rpb24oKXt2YXIgYT0kdGVsZXJpay4kOwp2YXIgYj1UZWxlcmlrLldlYi5VSTsKYi5SZXNpemVFeHRlbmRlcj1mdW5jdGlvbihkLGYsZSxpLGcsYyxoLGope3RoaXMuX2RvY3VtZW50PWc/Zzpkb2N1bWVudDsKdGhpcy5fZG9jdW1lbnRNb3VzZU1vdmVEZWxlZ2F0ZT1udWxsOwp0aGlzLl9kb2N1bWVudE1vdXNlVXBEZWxlZ2F0ZT1udWxsOwp0aGlzLl9qc093bmVyPW51bGw7CnRoaXMuX2VsZW1lbnQ9bnVsbDsKdGhpcy5fdGFibGVFbGVtZW50PW51bGw7CnRoaXMuX3NhdmVEZWxlZ2F0ZXM9e307CnRoaXMuX21vdmVDdXJzb3JUeXBlPSJtb3ZlIjsKdGhpcy5fbW92ZVRvTW91c2VMb2NhdGlvbj1mYWxzZTsKdGhpcy5faGlkZUlmcmFtZXM9dHJ1ZTsKdGhpcy5faWZyYW1lVG9Ta2lwPW51bGw7CnRoaXMuX2VuYWJsZWQ9dHJ1ZTsKdGhpcy5fc3RhcnRYPTA7CnRoaXMuX3N0YXJ0WT0wOwp0aGlzLl9jYW5jZWxSZXNpemU9dHJ1ZTsKdGhpcy5fc3RhcnRDdXJzb3JMb2NhdGlvbj1udWxsOwp0aGlzLl9hdXRvU2Nyb2xsRW5hYmxlZD10cnVlOwp0aGlzLmluaXRpYWxpemUoZCxmLGUsaSxjLGgsaik7Cn07CmIuUmVzaXplRXh0ZW5kZXIuY29udGFpbnNCb3VuZHM9ZnVuY3Rpb24oZCxnKXtpZighZHx8IWcpe3JldHVybiBmYWxzZTsKfXZhciBmPSR0ZWxlcmlrLmNvbnRhaW5zUG9pbnQoZCxnLngsZy55KTsKaWYoZil7dmFyIGM9Zy54K2cud2lkdGg7CnZhciBlPWcueStnLmhlaWdodDsKZj0kdGVsZXJpay5jb250YWluc1BvaW50KGQsYyxlKTsKfXJldHVybiBmOwp9OwpiLlJlc2l6ZUV4dGVuZGVyLnByb3RvdHlwZT17aW5pdGlhbGl6ZTpmdW5jdGlvbihkLGgsYyxnLGUsZixpKXtpZighaCl7cmV0dXJuOwp9aWYodGhpcy5fZWxlbWVudCl7YWxlcnQoIkVsZW1lbnQgIitoLmdldEF0dHJpYnV0ZSgiaWQiKSsiIGNhbm5vdCBiZSBtYWRlIHJlc2l6YWJsZSwgYXMgdGhlIHJlc2l6ZUV4dGVuZGVyIGFscmVhZHkgaGFzIHRoZSBlbGVtZW50ICIrdGhpcy5fZWxlbWVudC5nZXRBdHRyaWJ1dGUoImlkIikrIiBhc3NvY2lhdGVkIHdpdGggaXQuIFlvdSBtdXN0IGNyZWF0ZSBhIG5ldyBleHRlbmRlciByZXNpemVyIG9iamVjdCIpOwpyZXR1cm47Cn10aGlzLl9qc093bmVyPWQ7CnRoaXMuX2VsZW1lbnQ9aDsKdGhpcy5fdGFibGVFbGVtZW50PWc7CnRoaXMuX2hhbmRsZXM9YzsKaWYoZSl7dGhpcy5fbW92ZUN1cnNvclR5cGU9ZTsKfWlmKGYhPW51bGwpe3RoaXMuX2F1dG9TY3JvbGxFbmFibGVkPWY7Cn1pZihpIT1udWxsKXt0aGlzLl9tb3ZlVG9Nb3VzZUxvY2F0aW9uPWk7Cn10aGlzLl9jb25maWd1cmVIYW5kbGVFbGVtZW50cyh0cnVlKTsKfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5fYXR0YWNoRG9jdW1lbnRIYW5kbGVycyhmYWxzZSk7CnRoaXMuX2NvbmZpZ3VyZUhhbmRsZUVsZW1lbnRzKGZhbHNlKTsKdGhpcy5fc3RhcnRDdXJzb3JMb2NhdGlvbj1udWxsOwp0aGlzLl9pZnJhbWVUb1NraXA9bnVsbDsKdGhpcy5fanNPd25lcj1udWxsOwp0aGlzLl9lbGVtZW50PW51bGw7CnRoaXMuX2hhbmRsZXM9bnVsbDsKdGhpcy5fc2F2ZURlbGVnYXRlcz1udWxsOwp0aGlzLl9jb25zdHJhaW50cz1udWxsOwp9LGVuYWJsZTpmdW5jdGlvbihjKXt0aGlzLl9lbmFibGVkPWM7Cn0sc2V0X2hpZGVJZnJhbWVzOmZ1bmN0aW9uKGMpe3RoaXMuX2hpZGVJZnJhbWVzPWM7Cn0sZ2V0X2hpZGVJZnJhbWVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2hpZGVJZnJhbWVzOwp9LHNldF9pZnJhbWVUb1NraXA6ZnVuY3Rpb24oYyl7dGhpcy5faWZyYW1lVG9Ta2lwPWM7Cn0sZ2V0X2lmcmFtZVRvU2tpcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pZnJhbWVUb1NraXA7Cn0sZ2V0X2NvbnN0cmFpbnRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnN0cmFpbnRzOwp9LHNldF9jb25zdHJhaW50czpmdW5jdGlvbihjKXt0aGlzLl9jb25zdHJhaW50cz1jOwp9LGdldF91c2VDc3NUcmFuc2Zvcm06ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXNlQ3NzVHJhbnNmb3JtOwp9LHNldF91c2VDc3NUcmFuc2Zvcm06ZnVuY3Rpb24oYyl7dGhpcy5fdXNlQ3NzVHJhbnNmb3JtPWM7Cn0sX3JhaXNlRHJhZ0V2ZW50OmZ1bmN0aW9uKGMsZyxlKXt2YXIgZD10aGlzLl9qc093bmVyOwppZihkJiZkWyJvbiIrY10pe3ZhciBmPWc7CmlmKCFmKXtmPXt9Owp9Zi5lbGVtZW50PXRoaXMuX2VsZW1lbnQ7CmYub3duZXJFdmVudD1lOwpyZXR1cm4gZFsib24iK2NdKGYpOwp9cmV0dXJuIHRydWU7Cn0sX3JhaXNlRXZlbnQ6ZnVuY3Rpb24oYyxlKXt2YXIgZD10aGlzLl9qc093bmVyOwppZihkJiZkWyJvbiIrY10pe2lmKCFlKXtlPW5ldyBTeXMuRXZlbnRBcmdzKCk7Cn1lbHNle2lmKGM9PSJSZXNpemUiKXtlPXRoaXMuX3Jlc2l6ZURpcjsKfWVsc2V7aWYoYz09IlJlc2l6aW5nIil7ZT10aGlzLl9nZXRQcm9wb3NlZEJvdW5kcyhlKTsKfX19cmV0dXJuIGRbIm9uIitjXShlKTsKfXJldHVybiB0cnVlOwp9LF9nZXRQcm9wb3NlZEJvdW5kczpmdW5jdGlvbihjKXt2YXIgZD0kdGVsZXJpay5nZXRCb3VuZHModGhpcy5fZWxlbWVudCk7CnJldHVybnt4OmMueHx8ZC54LHk6Yy55fHxkLnksd2lkdGg6Yy53aWR0aHx8ZC53aWR0aCxoZWlnaHQ6Yy5oZWlnaHR8fGQuaGVpZ2h0fTsKfSxnZXRQb3NpdGlvbmVkUGFyZW50OmZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5fZWxlbWVudC5wYXJlbnROb2RlOwp3aGlsZShjJiZjIT1kb2N1bWVudCl7aWYoInN0YXRpYyIhPSR0ZWxlcmlrLmdldEN1cnJlbnRTdHlsZShjLCJwb3NpdGlvbiIsInN0YXRpYyIpKXtyZXR1cm4gYzsKfWM9Yy5wYXJlbnROb2RlOwp9cmV0dXJuIG51bGw7Cn0sX3N0b3JlU3RhcnRDb29yZHM6ZnVuY3Rpb24oZCl7aWYoIXRoaXMuX2VuYWJsZWQpe3JldHVybjsKfXRoaXMuX2NhbmNlbFJlc2l6ZT1mYWxzZTsKdmFyIGg9JHRlbGVyaWsuaXNUb3VjaERldmljZTsKdmFyIG89JHRlbGVyaWsuZ2V0VG91Y2hFdmVudExvY2F0aW9uKGQpOwp0aGlzLl9zdGFydFg9aD9vLng6ZC5jbGllbnRYOwp0aGlzLl9zdGFydFk9aD9vLnk6ZC5jbGllbnRZOwp2YXIgaT10aGlzLl9lbGVtZW50Owp2YXIgZj0kdGVsZXJpay5nZXRCb3VuZHMoaSk7CnZhciBnPShpLmlkIT1udWxsJiZiLlJhZERvY2smJmIuUmFkRG9jay5pc0luc3RhbmNlT2ZUeXBlKCRmaW5kKGkuaWQpKSk7CmlmKCR0ZWxlcmlrLmlzSUUmJmchPXRydWUpe3ZhciBuPXRoaXMuZ2V0UG9zaXRpb25lZFBhcmVudCgpOwppZihuKXtmLngrPW4uc2Nyb2xsTGVmdDsKZi55Kz1uLnNjcm9sbFRvcDsKfX10aGlzLl9vcmlnaW5hbEJvdW5kcz1mOwp2YXIgbD1kLnRhcmdldD9kLnRhcmdldDpkLnNyY0VsZW1lbnQ7CmlmKGwmJmwudHlwZT09Myl7bD1sLnBhcmVudE5vZGU7Cn10aGlzLl9yZXNpemVUeXBlPSR0ZWxlcmlrLmdldEN1cnJlbnRTdHlsZShsLCJjdXJzb3IiKTsKaWYoIXRoaXMuX3Jlc2l6ZVR5cGUmJmQuY3VycmVudFRhcmdldCl7dGhpcy5fcmVzaXplVHlwZT0kdGVsZXJpay5nZXRDdXJyZW50U3R5bGUoZC5jdXJyZW50VGFyZ2V0LCJjdXJzb3IiKTsKfXRoaXMuX3Jlc2l6ZURpcj17bm9ydGg6dGhpcy5fcmVzaXplVHlwZS5tYXRjaCgvbi4/LS8pPzE6MCxlYXN0OnRoaXMuX3Jlc2l6ZVR5cGUubWF0Y2goL2UtLyk/MTowLHNvdXRoOnRoaXMuX3Jlc2l6ZVR5cGUubWF0Y2goL3MuPy0vKT8xOjAsd2VzdDp0aGlzLl9yZXNpemVUeXBlLm1hdGNoKC93LS8pPzE6MCxtb3ZlOm5ldyBSZWdFeHAodGhpcy5fbW92ZUN1cnNvclR5cGUpLnRlc3QodGhpcy5fcmVzaXplVHlwZSk/MTowfTsKdGhpcy5fbGVmdEhhbmRsZU1vdXNlRGVsdGE9MDsKaWYodGhpcy5fcmVzaXplRGlyLndlc3Qpe3RoaXMuX2xlZnRIYW5kbGVNb3VzZURlbHRhPU1hdGguYWJzKGYueC10aGlzLl9zdGFydFgpOwp9dmFyIGM9dGhpcy5fcmVzaXplRGlyLm1vdmU/dGhpcy5fcmFpc2VEcmFnRXZlbnQoIkRyYWdTdGFydCIsbnVsbCxkKTp0aGlzLl9yYWlzZUV2ZW50KCJSZXNpemVTdGFydCIpOwp0aGlzLl9jYW5jZWxSZXNpemU9KGM9PWZhbHNlKTsKdmFyIG09JHRlbGVyaWsuZ2V0Q3VycmVudFN0eWxlKGkucGFyZW50Tm9kZSwicG9zaXRpb24iKTsKdmFyIHA9KCJyZWxhdGl2ZSI9PW0pfHwoImFic29sdXRlIj09bSk7CnRoaXMuX29mZnNldExvY2F0aW9uPXA/JHRlbGVyaWsuZ2V0TG9jYXRpb24oaS5wYXJlbnROb2RlKTp7eDowLHk6MH07CmlmKHRoaXMuX21vdmVUb01vdXNlTG9jYXRpb24pe3ZhciBrPWg/e2xlZnQ6dGhpcy5fc3RhcnRYLHRvcDp0aGlzLl9zdGFydFl9OiR0ZWxlcmlrLmdldERvY3VtZW50UmVsYXRpdmVDdXJzb3JQb3NpdGlvbih7Y2xpZW50WDp0aGlzLl9zdGFydFgsY2xpZW50WTp0aGlzLl9zdGFydFl9KTsKaWYocCl7dmFyIGo9JHRlbGVyaWsuZ2V0Qm9yZGVyQm94KGkucGFyZW50Tm9kZSk7CmsubGVmdC09ai5sZWZ0OwprLnRvcC09ai50b3A7Cn10aGlzLl9zdGFydEN1cnNvckxvY2F0aW9uPXt4OmsubGVmdC1NYXRoLmZsb29yKGYud2lkdGgvMikseTprLnRvcC1NYXRoLmZsb29yKGYuaGVpZ2h0LzIpfTsKfWlmKCF0aGlzLl9jYW5jZWxSZXNpemUpe3RoaXMuX2NsZWFyU2VsZWN0aW9uKCk7CnRoaXMuX3NldElmcmFtZXNWaXNpYmxlKGZhbHNlKTsKdGhpcy5fYXR0YWNoRG9jdW1lbnRIYW5kbGVycyhmYWxzZSk7CnRoaXMuX2F0dGFjaERvY3VtZW50SGFuZGxlcnModHJ1ZSk7Cn19LF9yZXNpemU6ZnVuY3Rpb24oaSl7aWYoIXRoaXMuX2VuYWJsZWR8fHRoaXMuX2NhbmNlbFJlc2l6ZSl7cmV0dXJuIGZhbHNlOwp9dmFyIGw9dGhpcy5fb3JpZ2luYWxCb3VuZHM7CnZhciBkPW5ldyBTeXMuVUkuQm91bmRzKDAsMCwwLDApOwp2YXIgbT0kdGVsZXJpay5pc1RvdWNoRGV2aWNlPyR0ZWxlcmlrLmdldFRvdWNoRXZlbnRMb2NhdGlvbihpKTp7eDppLmNsaWVudFgseTppLmNsaWVudFl9Owp2YXIgZz1tLngtdGhpcy5fc3RhcnRYOwp2YXIgaD1tLnktdGhpcy5fc3RhcnRZOwp2YXIgbz10aGlzLl9yZXNpemVEaXI7CnZhciBwPW8ubW92ZTsKaWYocCl7dmFyIHE9dGhpcy5fc3RhcnRDdXJzb3JMb2NhdGlvbjsKaWYocSl7bC54PXEueDsKbC55PXEueTsKdGhpcy5fb3JpZ2luYWxCb3VuZHM9bDsKdGhpcy5fc3RhcnRDdXJzb3JMb2NhdGlvbj1udWxsOwp9ZC54PWwueCtnOwpkLnk9bC55K2g7CnZhciBrPXRoaXMuX2dldE1vdmVDb25zdHJhaW50cyhsKTsKaWYoayl7ZC54PXRoaXMuX2NvbnN0cmFpblBvc2l0aW9uKGQueCxrLngsay53aWR0aCk7CmQueT10aGlzLl9jb25zdHJhaW5Qb3NpdGlvbihkLnksay55LGsuaGVpZ2h0KTsKfX1lbHNle2lmKG8uZWFzdCl7ZC54PWwueDsKZC53aWR0aD1sLndpZHRoK2c7Cn1lbHNle2lmKG8ud2VzdCl7ZC54PW0ueC10aGlzLl9sZWZ0SGFuZGxlTW91c2VEZWx0YTsKZC53aWR0aD1sLndpZHRoLWc7Cn19aWYoby5zb3V0aCl7ZC55PWwueTsKZC5oZWlnaHQ9bC5oZWlnaHQraDsKfWVsc2V7aWYoby5ub3J0aCl7ZC55PWwueStoOwpkLmhlaWdodD1sLmhlaWdodC1oOwp9fXZhciBuPXRoaXMuX2dldFNpemVDb25zdHJhaW50cyhsKTsKaWYobil7ZC54PXRoaXMuX2NvbnN0cmFpblBvc2l0aW9uKGQueCxuLngsTWF0aC5taW4oZC54K2Qud2lkdGgsbi53aWR0aC1kLndpZHRoKSk7CmQueT10aGlzLl9jb25zdHJhaW5Qb3NpdGlvbihkLnksbi55LE1hdGgubWluKGQueStkLmhlaWdodCxuLmhlaWdodC1kLmhlaWdodCkpOwpkLndpZHRoPXRoaXMuX2NvbnN0cmFpbkRpbWVuc2lvbihkLndpZHRoLG4ud2lkdGgtZC54KTsKZC5oZWlnaHQ9dGhpcy5fY29uc3RyYWluRGltZW5zaW9uKGQuaGVpZ2h0LG4uaGVpZ2h0LWQueSk7Cn19dmFyIGM9dGhpcy5fb2Zmc2V0TG9jYXRpb247CmlmKGMpe2QueC09Yy54OwpkLnktPWMueTsKfXZhciBqPXA/dGhpcy5fcmFpc2VEcmFnRXZlbnQoIkRyYWciLGQsaSk6dGhpcy5fcmFpc2VFdmVudCgiUmVzaXppbmciLGQpOwppZihmYWxzZT09ail7cmV0dXJuIHRydWU7Cn12YXIgZj10aGlzLl9lbGVtZW50OwppZih0aGlzLl91c2VDc3NUcmFuc2Zvcm0mJnApe3RoaXMuX2xhc3RUb3VjaERlbHRhPXt4OmQueC1sLngrYy54LHk6ZC55LWwueStjLnl9Owp2YXIgcj17eDpkLng/dGhpcy5fbGFzdFRvdWNoRGVsdGEueDowLHk6ZC55P3RoaXMuX2xhc3RUb3VjaERlbHRhLnk6MH07CnRoaXMuX3NldFRyYW5zbGF0ZShmLHIueCxyLnkpOwp9ZWxzZXtpZihwfHxkLng+MCl7Zi5zdHlsZS5sZWZ0PWQueCsicHgiOwp9aWYocHx8ZC55PjApe2Yuc3R5bGUudG9wPWQueSsicHgiOwp9fWlmKGQud2lkdGg+MCl7Zi5zdHlsZS53aWR0aD1kLndpZHRoKyJweCI7Cn1pZihkLmhlaWdodD4wKXtmLnN0eWxlLmhlaWdodD1kLmhlaWdodCsicHgiOwp9aWYoIXApe3RoaXMuX3VwZGF0ZUlubmVyVGFibGVTaXplKCk7Cn1yZXR1cm4gdHJ1ZTsKfSxfc2V0VHJhbnNsYXRlOmZ1bmN0aW9uKGMsZixkKXt2YXIgZT1jLnN0eWxlOwplLndlYmtpdFRyYW5zZm9ybT1lLm1velRyYW5zZm9ybT1lLk9UcmFuc2Zvcm09InRyYW5zbGF0ZSgiK2YrInB4LCIrZCsicHgpIjsKfSxfdXBkYXRlSW5uZXJUYWJsZVNpemU6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLl9yZXNpemVEaXI7CmlmKGMuc291dGh8fGMubm9ydGgpe3ZhciBlPXRoaXMuX2VsZW1lbnQuc3R5bGUuaGVpZ2h0Owp2YXIgZD10aGlzLl90YWJsZUVsZW1lbnQ7CmlmKGQpe2Quc3R5bGUuaGVpZ2h0PWU7CnRoaXMuX2ZpeEllSGVpZ2h0KGQsZSk7Cn19fSxfZ2V0TW92ZUNvbnN0cmFpbnRzOmZ1bmN0aW9uKGMpe3ZhciBkPXRoaXMuX2dldFNpemVDb25zdHJhaW50cygpOwppZihkKXtkLndpZHRoLT1jLndpZHRoOwpkLmhlaWdodC09Yy5oZWlnaHQ7Cn1yZXR1cm4gZDsKfSxfZ2V0U2l6ZUNvbnN0cmFpbnRzOmZ1bmN0aW9uKGQpe3ZhciBjPXRoaXMuX2NvbnN0cmFpbnRzOwppZighYyl7cmV0dXJuIG51bGw7Cn12YXIgZT1jLngrdGhpcy5fb2Zmc2V0TG9jYXRpb24ueDsKdmFyIGY9Yy55K3RoaXMuX29mZnNldExvY2F0aW9uLnk7CnJldHVybiBuZXcgU3lzLlVJLkJvdW5kcyhlLGYsZStjLndpZHRoLGYrYy5oZWlnaHQpOwp9LF9jb25zdHJhaW5Qb3NpdGlvbjpmdW5jdGlvbihlLGMsZCl7cmV0dXJuIE1hdGgubWF4KGMsTWF0aC5taW4oZCxlKSk7Cn0sX2NvbnN0cmFpbkRpbWVuc2lvbjpmdW5jdGlvbihkLGMpe3JldHVybiB0aGlzLl9jb25zdHJhaW5Qb3NpdGlvbihkLDAsYyk7Cn0sX2ZpeEllSGVpZ2h0OmZ1bmN0aW9uKGUsYyl7aWYoIkNTUzFDb21wYXQiPT1kb2N1bWVudC5jb21wYXRNb2RlKXt2YXIgZj0oZS5vZmZzZXRIZWlnaHQtcGFyc2VJbnQoYykpOwppZihmPjApe3ZhciBkPShwYXJzZUludChlLnN0eWxlLmhlaWdodCktZik7CmlmKGQ+MCl7ZS5zdHlsZS5oZWlnaHQ9ZCsicHgiOwp9fX19LF9zZXRJZnJhbWVzVmlzaWJsZTpmdW5jdGlvbihjKXtpZighdGhpcy5nZXRfaGlkZUlmcmFtZXMoKSl7cmV0dXJuOwp9dmFyIGo9dGhpcy5fZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImlmcmFtZSIpOwp2YXIgZD10aGlzLmdldF9pZnJhbWVUb1NraXAoKTsKZm9yKHZhciBmPTAsZT1qLmxlbmd0aDsKZjxlOwpmKyspe3ZhciBnPWpbZl07CmlmKGQmJihkPT09Z3x8ZD09Zykpe2Q9bnVsbDsKfWVsc2V7Zy5zdHlsZS52aXNpYmlsaXR5PWM/IiI6ImhpZGRlbiI7CmlmKCR0ZWxlcmlrLmlzSUUpe3RyeXtnLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuYm9keS5zdHlsZS52aXNpYmlsaXR5PWM/IiI6ImhpZGRlbiI7Cn1jYXRjaChoKXt9fX19fSxfY29uZmlndXJlSGFuZGxlRWxlbWVudHM6ZnVuY3Rpb24oayl7dmFyIGw9dGhpcy5faGFuZGxlczsKdmFyIGg9WyJudyIsIm4iLCJuZSIsInciLCJlIiwic3ciLCJzIiwic2UiLHRoaXMuX21vdmVDdXJzb3JUeXBlXTsKZm9yKHZhciBjPTAsZT1oLmxlbmd0aDsKYzxlOwpjKyspe3ZhciBnPWhbY107CnZhciBkPWxbZ107CmlmKGQpe2lmKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChkKT09PSJbb2JqZWN0IEFycmF5XSIpe2Zvcih2YXIgZj0wOwpmPGQubGVuZ3RoOwpmKyspe3RoaXMuX2NvbmZpZ3VyZUhhbmRsZSgiaWQiK2MrIl8iK2YsayxkW2ZdLGcpOwp9fWVsc2V7dGhpcy5fY29uZmlndXJlSGFuZGxlKCJpZCIrYyxrLGQsZyk7Cn19fX0sX2NvbmZpZ3VyZUhhbmRsZTpmdW5jdGlvbihoLGUsZCxnKXt2YXIgYz10aGlzLl9zYXZlRGVsZWdhdGVzOwp2YXIgZj1jW2hdP2NbaF0uZGVsZWdhdGU6bnVsbDsKaWYoZSl7aWYoIWYpe3ZhciBpPSR0ZWxlcmlrLmFkZE1vYmlsZUhhbmRsZXIodGhpcyxkLCJtb3VzZWRvd24iLHRoaXMuX29uSGFuZGxlTW91c2VEb3duLG51bGwsdHJ1ZSk7CmQuc3R5bGUuY3Vyc29yPShnPT10aGlzLl9tb3ZlQ3Vyc29yVHlwZSk/ZzpnKyItcmVzaXplIjsKY1toXT17ZWxlbWVudDpkLGRlbGVnYXRlOml9Owp9fWVsc2V7aWYoZil7JHRlbGVyaWsucmVtb3ZlTW9iaWxlSGFuZGxlcihkLCJtb3VzZWRvd24iLGYsbnVsbCx0cnVlKTsKZC5zdHlsZS5jdXJzb3I9IiI7CmRlbGV0ZSBjW2hdOwp9fX0sX2F0dGFjaERvY3VtZW50SGFuZGxlcnM6ZnVuY3Rpb24oZCl7dmFyIGU9dGhpcy5fZG9jdW1lbnQ7CmlmKGQpe3RoaXMuX2RvY3VtZW50TW91c2VNb3ZlRGVsZWdhdGU9JHRlbGVyaWsuYWRkTW9iaWxlSGFuZGxlcih0aGlzLGUsIm1vdXNlbW92ZSIsdGhpcy5fb25Eb2N1bWVudE1vdXNlTW92ZSxudWxsLHRydWUpOwp0aGlzLl9kb2N1bWVudE1vdXNlVXBEZWxlZ2F0ZT0kdGVsZXJpay5hZGRNb2JpbGVIYW5kbGVyKHRoaXMsZSwibW91c2V1cCIsdGhpcy5fb25Eb2N1bWVudE1vdXNlVXAsbnVsbCx0cnVlKTsKfWVsc2V7dmFyIGM9dGhpcy5fZG9jdW1lbnRNb3VzZU1vdmVEZWxlZ2F0ZTsKaWYoYyl7JHRlbGVyaWsucmVtb3ZlTW9iaWxlSGFuZGxlcihlLCJtb3VzZW1vdmUiLGMsbnVsbCx0cnVlKTsKfXZhciBmPXRoaXMuX2RvY3VtZW50TW91c2VVcERlbGVnYXRlOwppZihmKXskdGVsZXJpay5yZW1vdmVNb2JpbGVIYW5kbGVyKGUsIm1vdXNldXAiLGYsbnVsbCx0cnVlKTsKfXRoaXMuX2RvY3VtZW50TW91c2VNb3ZlRGVsZWdhdGU9bnVsbDsKdGhpcy5fZG9jdW1lbnRNb3VzZVVwRGVsZWdhdGU9bnVsbDsKfX0sX29uSGFuZGxlTW91c2VEb3duOmZ1bmN0aW9uKGMpe2lmKCR0ZWxlcmlrLmlzVG91Y2hEZXZpY2UmJmMub3JpZ2luYWxFdmVudC50b3VjaGVzLmxlbmd0aD4xKXtyZXR1cm4gdHJ1ZTsKfXRoaXMuX3N0b3JlU3RhcnRDb29yZHMoYyk7CmlmKCEkdGVsZXJpay5pc1RvdWNoRGV2aWNlKXtyZXR1cm4gJHRlbGVyaWsuY2FuY2VsUmF3RXZlbnQoYyk7Cn19LF9vbkRvY3VtZW50TW91c2VNb3ZlOmZ1bmN0aW9uKGMpe3ZhciBkPXRoaXMuX3Jlc2l6ZShjKTsKaWYodGhpcy5fYXV0b1Njcm9sbEVuYWJsZWQpe3RoaXMuX2F1dG9TY3JvbGwoYyk7Cn1pZihkKXtyZXR1cm4gJHRlbGVyaWsuY2FuY2VsUmF3RXZlbnQoYyk7Cn19LF9vbkRvY3VtZW50TW91c2VVcDpmdW5jdGlvbihjKXt2YXIgZD0hdGhpcy5fY2FuY2VsUmVzaXplOwp0aGlzLl9jYW5jZWxSZXNpemU9dHJ1ZTsKdGhpcy5fc3RhcnRDdXJzb3JMb2NhdGlvbj1udWxsOwp2YXIgZj10aGlzLl9yZXNpemVEaXImJnRoaXMuX3Jlc2l6ZURpci5tb3ZlOwppZih0aGlzLl91c2VDc3NUcmFuc2Zvcm0mJmYpe3RoaXMuX21vdmVCb3hCeSh0aGlzLl9sYXN0VG91Y2hEZWx0YSk7Cn1pZihkKXt0aGlzLl9jbGVhclNlbGVjdGlvbigpOwp0aGlzLl9zZXRJZnJhbWVzVmlzaWJsZSh0cnVlKTsKaWYoZil7dGhpcy5fcmFpc2VEcmFnRXZlbnQoIkRyYWdFbmQiLG51bGwsYyk7Cn1lbHNle3RoaXMuX3JhaXNlRXZlbnQoIlJlc2l6ZUVuZCIpOwp9dGhpcy5fYXR0YWNoRG9jdW1lbnRIYW5kbGVycyhmYWxzZSk7CmlmKHRoaXMuX3Njcm9sbGVyKXt0aGlzLl9zY3JvbGxlci5zZXRfZW5hYmxlZChmYWxzZSk7Cn19fSxfbW92ZUJveEJ5OmZ1bmN0aW9uKGUsZil7dmFyIGY9Znx8dGhpcy5fZWxlbWVudDsKdmFyIGQ9dGhpcy5fb3JpZ2luYWxCb3VuZHM7CnZhciBjPXRoaXMuX29mZnNldExvY2F0aW9uOwpib3hTdGFydFBvcz1kOwp0aGlzLl9yZXNldEJveFRyYW5zZm9ybShmKTsKZi5zdHlsZS5sZWZ0PWJveFN0YXJ0UG9zLngrZS54LWMueCsicHgiOwpmLnN0eWxlLnRvcD1ib3hTdGFydFBvcy55K2UueS1jLnkrInB4IjsKfSxfcmVzZXRCb3hUcmFuc2Zvcm06ZnVuY3Rpb24oYyl7dmFyIGQ9Yy5zdHlsZTsKZC53ZWJraXRUcmFuc2Zvcm09ZC5tb3pUcmFuc2Zvcm09ZC5PVHJhbnNmb3JtPWQubXNUcmFuc2xhdGU9InRyYW5zbGF0ZSgwLDApIjsKfSxfY2xlYXJTZWxlY3Rpb246ZnVuY3Rpb24oKXtpZih0aGlzLl9kb2N1bWVudC5zZWxlY3Rpb24mJnRoaXMuX2RvY3VtZW50LnNlbGVjdGlvbi5lbXB0eSl7dHJ5e3RoaXMuX2RvY3VtZW50LnNlbGVjdGlvbi5lbXB0eSgpOwp9Y2F0Y2goYyl7fX19LF9pbml0aWFsaXplQXV0b1Njcm9sbDpmdW5jdGlvbigpe2lmKHRoaXMuX2F1dG9TY3JvbGxJbml0aWFsaXplZCl7cmV0dXJuOwp9dGhpcy5fc2Nyb2xsRWRnZUNvbnN0PTQwOwp0aGlzLl9zY3JvbGxCeUNvbnN0PTEwOwp0aGlzLl9zY3JvbGxlcj1udWxsOwp0aGlzLl9zY3JvbGxEZWx0YVg9MDsKdGhpcy5fc2Nyb2xsRGVsdGFZPTA7CnRoaXMuX3Njcm9sbGVyVGlja0hhbmRsZXI9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vblNjcm9sbGVyVGljayk7CnRoaXMuX3Njcm9sbGVyPW5ldyBUZWxlcmlrLldlYi5UaW1lcigpOwp0aGlzLl9zY3JvbGxlci5zZXRfaW50ZXJ2YWwoMTApOwp0aGlzLl9zY3JvbGxlci5hZGRfdGljayh0aGlzLl9zY3JvbGxlclRpY2tIYW5kbGVyKTsKdGhpcy5fYXV0b1Njcm9sbEluaXRpYWxpemVkPXRydWU7Cn0sX2F1dG9TY3JvbGw6ZnVuY3Rpb24oYyl7dGhpcy5faW5pdGlhbGl6ZUF1dG9TY3JvbGwoKTsKdmFyIGU9JHRlbGVyaWsuZ2V0Q2xpZW50Qm91bmRzKCk7CmlmKGUud2lkdGg+MCl7dGhpcy5fc2Nyb2xsRGVsdGFYPXRoaXMuX3Njcm9sbERlbHRhWT0wOwppZihjLmNsaWVudFg8ZS54K3RoaXMuX3Njcm9sbEVkZ2VDb25zdCl7dGhpcy5fc2Nyb2xsRGVsdGFYPS10aGlzLl9zY3JvbGxCeUNvbnN0Owp9ZWxzZXtpZihjLmNsaWVudFg+ZS53aWR0aC10aGlzLl9zY3JvbGxFZGdlQ29uc3Qpe3RoaXMuX3Njcm9sbERlbHRhWD10aGlzLl9zY3JvbGxCeUNvbnN0Owp9fWlmKGMuY2xpZW50WTxlLnkrdGhpcy5fc2Nyb2xsRWRnZUNvbnN0KXt0aGlzLl9zY3JvbGxEZWx0YVk9LXRoaXMuX3Njcm9sbEJ5Q29uc3Q7Cn1lbHNle2lmKGMuY2xpZW50WT5lLmhlaWdodC10aGlzLl9zY3JvbGxFZGdlQ29uc3Qpe3RoaXMuX3Njcm9sbERlbHRhWT10aGlzLl9zY3JvbGxCeUNvbnN0Owp9fXZhciBkPXRoaXMuX3Njcm9sbGVyOwppZih0aGlzLl9zY3JvbGxEZWx0YVghPTB8fHRoaXMuX3Njcm9sbERlbHRhWSE9MCl7dGhpcy5fb3JpZ2luYWxTdGFydFg9dGhpcy5fc3RhcnRYOwp0aGlzLl9vcmlnaW5hbFN0YXJ0WT10aGlzLl9zdGFydFk7CmQuc2V0X2VuYWJsZWQodHJ1ZSk7Cn1lbHNle2lmKGQuZ2V0X2VuYWJsZWQoKSl7dGhpcy5fc3RhcnRYPXRoaXMuX29yaWdpbmFsU3RhcnRYOwp0aGlzLl9zdGFydFk9dGhpcy5fb3JpZ2luYWxTdGFydFk7Cn1kLnNldF9lbmFibGVkKGZhbHNlKTsKfX19LF9vblNjcm9sbGVyVGljazpmdW5jdGlvbigpe3ZhciBlPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0fHxkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQ7CnZhciBoPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3B8fGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOwp3aW5kb3cuc2Nyb2xsQnkodGhpcy5fc2Nyb2xsRGVsdGFYLHRoaXMuX3Njcm9sbERlbHRhWSk7CnZhciBrPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0fHxkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQ7CnZhciBpPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3B8fGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOwp2YXIgZD1rLWU7CnZhciBjPWktaDsKdmFyIGY9dGhpcy5fZWxlbWVudDsKdmFyIGc9e3g6cGFyc2VJbnQoZi5zdHlsZS5sZWZ0KStkLHk6cGFyc2VJbnQoZi5zdHlsZS50b3ApK2N9Owp0aGlzLl9zdGFydFgtPWQ7CnRoaXMuX3N0YXJ0WS09YzsKdHJ5eyR0ZWxlcmlrLnNldExvY2F0aW9uKGYsZyk7Cn1jYXRjaChqKXt9fX07CmIuUmVzaXplRXh0ZW5kZXIucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuUmVzaXplRXh0ZW5kZXIiLG51bGwsU3lzLklEaXNwb3NhYmxlKTsKfSkoKTsKDQovKiBFTkQgVGVsZXJpay5XZWIuVUkuQ29tbW9uLlBvcHVwLlBvcHVwU2NyaXB0cy5qcyAqLw0KLyogU1RBUlQgVGVsZXJpay5XZWIuVUkuQ29tbW9uLlRvdWNoU2Nyb2xsRXh0ZW5kZXIuanMgKi8NCihmdW5jdGlvbihhKXtUeXBlLnJlZ2lzdGVyTmFtZXNwYWNlKCJUZWxlcmlrLldlYi5VSSIpOwp2YXIgYj1UZWxlcmlrLldlYi5VSTsKVGVsZXJpay5XZWIuVUkuVG91Y2hTY3JvbGxFeHRlbmRlcj1mdW5jdGlvbihjKXt0aGlzLl9jb250YWluZXJFbGVtZW50cz1hKGMpOwp2YXIgZD1hcmd1bWVudHNbMV18fHt9Owp0aGlzLl9hdXRvU2Nhbj0iYXV0b1NjYW4iIGluIGQ/ZC5hdXRvU2NhbjpmYWxzZTsKdGhpcy5fc2hvd1Njcm9sbEhpbnRzPSJzaG93U2Nyb2xsSGludHMiIGluIGQ/ZC5zaG93U2Nyb2xsSGludHM6dHJ1ZTsKdGhpcy5fdXNlUm91bmRlZEhpbnRzPSJ1c2VSb3VuZGVkSGludHMiIGluIGQ/ZC51c2VSb3VuZGVkSGludHM6dHJ1ZTsKdGhpcy5faGFzSG9yaXpvbnRhbFNjcm9sbEhpbnQ9ZmFsc2U7CnRoaXMuX2hhc1ZlcnRpY2FsU2Nyb2xsSGludD1mYWxzZTsKdGhpcy5fdmVydGljYWxTY3JvbGxIaW50PWZhbHNlOwp0aGlzLl9ob3Jpem9udGFsU2Nyb2xsSGludD1mYWxzZTsKdGhpcy5fbGFzdEFuaW1hdG9yPWZhbHNlOwp0aGlzLl9kcmFnQ2FuY2VsZWQ9ZmFsc2U7CnRoaXMuY29udGFpbmVycz1uZXcgQXJyYXkoKTsKdGhpcy5fZW5hYmxlVG91Y2hTY3JvbGw9dHJ1ZTsKfTsKVGVsZXJpay5XZWIuVUkuVG91Y2hTY3JvbGxFeHRlbmRlci5fZ2V0TmVlZHNTY3JvbGxFeHRlbmRlcj1mdW5jdGlvbigpe3JldHVybiAkdGVsZXJpay5pc01vYmlsZVNhZmFyaXx8JHRlbGVyaWsuaXNBbmRyb2lkOwp9OwpUZWxlcmlrLldlYi5VSS5Ub3VjaFNjcm9sbEV4dGVuZGVyLnByb3RvdHlwZT17aW5pdGlhbGl6ZTpmdW5jdGlvbigpe2lmKHRoaXMuX2VuYWJsZVRvdWNoU2Nyb2xsKXtpZih0aGlzLl9hdXRvU2Nhbil7dGhpcy5fY29udGFpbmVyRWxlbWVudHM9dGhpcy5fY29udGFpbmVyRWxlbWVudHMuYWRkKGEoIioiLHRoaXMuX2NvbnRhaW5lckVsZW1lbnRzKSkuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuKGEodGhpcykuY3NzKCJvdmVyZmxvdyIpPT0ic2Nyb2xsInx8YSh0aGlzKS5jc3MoIm92ZXJmbG93Iik9PSJhdXRvIik7Cn0pOwp9dmFyIGM9dGhpczsKdGhpcy5fY29udGFpbmVyRWxlbWVudHMuZWFjaChmdW5jdGlvbigpe3RoaXMuc3R5bGUub3ZlcmZsb3c9ImhpZGRlbiI7CnZhciBlPWEodGhpcykuYWRkQ2xhc3MoIlJhZFRvdWNoRXh0ZW5kZXIiKS5jc3MoIi13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvciIsInJnYmEoMCwgMCwgMCwgMCk7Iik7CnZhciBkPXtlbGVtZW50OmUuc3RvcCgpLGhvcml6b250YWxTY3JvbGxIaW50OmEoJzxkaXYgaWQ9Imhvcml6b250YWxTY3JvbGxIaW50IiBzdHlsZT0icG9zaXRpb246IGFic29sdXRlOyBkaXNwbGF5OiBub25lOyB6LWluZGV4OiAyMDAwMDA7IGZvbnQtc2l6ZTogMDsgaGVpZ2h0OiAzcHg7IGJvcmRlcjogMXB4IHNvbGlkICMzMzM7IGJhY2tncm91bmQ6ICM3Nzc7ICIgLz4nKS5hcHBlbmRUbyh0aGlzLnBhcmVudE5vZGUpLHZlcnRpY2FsU2Nyb2xsSGludDphKCc8ZGl2IGlkPSJ2ZXJ0aWNhbFNjcm9sbEhpbnQiIHN0eWxlPSJwb3NpdGlvbjogYWJzb2x1dGU7IGRpc3BsYXk6IG5vbmU7IHotaW5kZXg6IDIwMDAwMDsgd2lkdGg6IDNweDsgYm9yZGVyOiAxcHggc29saWQgIzMzMzsgYmFja2dyb3VuZDogIzc3NzsgIiAvPicpLmFwcGVuZFRvKHRoaXMucGFyZW50Tm9kZSl9OwppZih0aGlzLl91c2VSb3VuZGVkSGludHMpe2QuaG9yaXpvbnRhbFNjcm9sbEhpbnQuY3NzKHsiLW1vei1ib3JkZXItcmFkaXVzIjoiM3B4IiwiLXdlYmtpdC1ib3JkZXItcmFkaXVzIjoiM3B4IiwiYm9yZGVyLXJhZGl1cyI6IjNweCJ9KTsKZC52ZXJ0aWNhbFNjcm9sbEhpbnQuY3NzKHsiLW1vei1ib3JkZXItcmFkaXVzIjoiM3B4IiwiLXdlYmtpdC1ib3JkZXItcmFkaXVzIjoiM3B4IiwiYm9yZGVyLXJhZGl1cyI6IjNweCJ9KTsKfWUuZGF0YSgiZHJhZ0lEIixjLmNvbnRhaW5lcnMucHVzaChkKS0xKTsKfSk7CmlmKGIuVG91Y2hTY3JvbGxFeHRlbmRlci5fZ2V0TmVlZHNTY3JvbGxFeHRlbmRlcigpKXt0aGlzLl9jb250YWluZXJFbGVtZW50cy5iaW5kKCJ0b3VjaHN0YXJ0IixhLnByb3h5KHRoaXMuX3N0YXJ0RHJhZyx0aGlzKSk7CnRoaXMuX2NvbnRhaW5lckVsZW1lbnRzLmJpbmQoImdlc3R1cmVzdGFydCIsYS5wcm94eSh0aGlzLl9vbkdlc3R1cmVTdGFydCx0aGlzKSk7CnRoaXMuX2NvbnRhaW5lckVsZW1lbnRzLmJpbmQoImdlc3R1cmVlbmQiLGEucHJveHkodGhpcy5fb25HZXN0dXJlRW5kLHRoaXMpKTsKfWVsc2V7dGhpcy5fY29udGFpbmVyRWxlbWVudHMuYmluZCgibW91c2Vkb3duIixhLnByb3h5KHRoaXMuX3N0YXJ0RHJhZyx0aGlzKSk7Cn10aGlzLl9zdG9yZUxhc3RMb2NhdGlvbj1hLnRocm90dGxlKDEwMCxmdW5jdGlvbihkKXt0aGlzLl9sYXN0QW5pbWF0b3Iua1g9ZC54Owp0aGlzLl9sYXN0QW5pbWF0b3Iua1k9ZC55Owp9KTsKdGhpcy5fYWxpZ25TY3JvbGxIaW50cz1hLnRocm90dGxlKDIwLGZ1bmN0aW9uKCl7dmFyIGk9MDsKdmFyIGc9MDsKdmFyIGo9dGhpcy5fbGFzdEFuaW1hdG9yLmVsZW1lbnRbMF07CnZhciBkPXRoaXMuX2xhc3RBbmltYXRvci5ob3Jpem9udGFsU2Nyb2xsSGludDsKdmFyIGY9dGhpcy5fbGFzdEFuaW1hdG9yLnZlcnRpY2FsU2Nyb2xsSGludDsKdmFyIGg9dGhpcy5fZ2V0Qm9yZGVyQm94KGopOwp2YXIgZT1hKGopLnBvc2l0aW9uKCk7CmlmKHRoaXMuX2hhc0hvcml6b250YWxTY3JvbGxIaW50JiZkKXtpPU1hdGguYWJzKGouc2Nyb2xsTGVmdCkqdGhpcy5fd2lkdGhDb25zdGFudCtlLmxlZnQraC5sZWZ0OwpkLmNzcyh7bGVmdDppfSk7Cn1pZih0aGlzLl9oYXNWZXJ0aWNhbFNjcm9sbEhpbnQmJmYpe2c9TWF0aC5hYnMoai5zY3JvbGxUb3ApKnRoaXMuX2hlaWdodENvbnN0YW50K2UudG9wK2gudG9wOwpmLmNzcyh7dG9wOmd9KTsKfX0pOwp0aGlzLl90aHJvdHRsZVNjcm9sbD1hLnRocm90dGxlKDEwLGZ1bmN0aW9uKGQpe3RoaXMuX2xhc3RBbmltYXRvci5lbGVtZW50WzBdLnNjcm9sbExlZnQ9dGhpcy5fbGFzdEFuaW1hdG9yLmRyYWdTdGFydFgtZC54Owp0aGlzLl9sYXN0QW5pbWF0b3IuZWxlbWVudFswXS5zY3JvbGxUb3A9dGhpcy5fbGFzdEFuaW1hdG9yLmRyYWdTdGFydFktZC55Owp9KTsKfX0sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuY29udGFpbmVycz1udWxsOwp0aGlzLl9jb250YWluZXJFbGVtZW50cz1udWxsOwp0aGlzLl9ldmVudHM9bnVsbDsKfSxfc3RhcnREcmFnOmZ1bmN0aW9uKGgpe2lmKHRoaXMuX2RyYWdDYW5jZWxlZCl7cmV0dXJuOwp9dmFyIGc9YShoLnRhcmdldCk7CnZhciBrPWcucGFyZW50cygiLlJhZFRvdWNoRXh0ZW5kZXIiKTsKaWYoZy5oYXNDbGFzcygiUmFkVG91Y2hFeHRlbmRlciIpKXtrPWsuYWRkKGcpOwp9dmFyIGo9dGhpcy5fbGFzdEFuaW1hdG9yPXRoaXMuY29udGFpbmVyc1trLmRhdGEoImRyYWdJRCIpXTsKdmFyIGY9ai5lbGVtZW50WzBdOwp0aGlzLl9oYXNIb3Jpem9udGFsU2Nyb2xsSGludD1mLm9mZnNldFdpZHRoPGYuc2Nyb2xsV2lkdGg7CnRoaXMuX2hhc1ZlcnRpY2FsU2Nyb2xsSGludD1mLm9mZnNldEhlaWdodDxmLnNjcm9sbEhlaWdodDsKai5oYXNEcmFnZ2VkPWZhbHNlOwppZih0aGlzLl9oYXNIb3Jpem9udGFsU2Nyb2xsSGludHx8dGhpcy5faGFzVmVydGljYWxTY3JvbGxIaW50KXtqLmVsZW1lbnQuc3RvcCh0cnVlKTsKai5vcmlnaW5hbEV2ZW50PWgub3JpZ2luYWxFdmVudDsKaWYoIWIuVG91Y2hTY3JvbGxFeHRlbmRlci5fZ2V0TmVlZHNTY3JvbGxFeHRlbmRlcigpKXt0aGlzLl9jYW5jZWxFdmVudHMoaCk7Cn12YXIgYz0kdGVsZXJpay5nZXRUb3VjaEV2ZW50TG9jYXRpb24oaCk7Cmoua1g9Yy54OwpqLmtZPWMueTsKdmFyIGQ9Zi5zY3JvbGxMZWZ0fHwwOwp2YXIgaT1mLnNjcm9sbFRvcHx8MDsKai5kcmFnU3RhcnRYPShkPjA/ZDowKStjLng7CmouZHJhZ1N0YXJ0WT0oaT4wP2k6MCkrYy55OwppZihiLlRvdWNoU2Nyb2xsRXh0ZW5kZXIuX2dldE5lZWRzU2Nyb2xsRXh0ZW5kZXIoKSl7YShkb2N1bWVudC5ib2R5KS5iaW5kKHt0b3VjaG1vdmU6YS5wcm94eSh0aGlzLl9jb21wb3NpdGVEcmFnZ2VyLHRoaXMpLHRvdWNoZW5kOmEucHJveHkodGhpcy5fZW5kRHJhZyx0aGlzKX0pOwp9ZWxzZXthKGRvY3VtZW50LmJvZHkpLmJpbmQoe21vdXNlbW92ZTphLnByb3h5KHRoaXMuX2NvbXBvc2l0ZURyYWdnZXIsdGhpcyksbW91c2V1cDphLnByb3h5KHRoaXMuX2VuZERyYWcsdGhpcyl9KTsKfX19LF9nZXRCb3JkZXJCb3g6ZnVuY3Rpb24oYyl7dmFyIGU9e2xlZnQ6MCx0b3A6MCxyaWdodDowLGJvdHRvbTowLGhvcml6b250YWw6MCx2ZXJ0aWNhbDowfTsKaWYod2luZG93LmdldENvbXB1dGVkU3R5bGUpe3ZhciBkPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGMsbnVsbCk7CmUubGVmdD1wYXJzZUludChkLmdldFByb3BlcnR5VmFsdWUoImJvcmRlci1sZWZ0LXdpZHRoIiksMTApOwplLnJpZ2h0PXBhcnNlSW50KGQuZ2V0UHJvcGVydHlWYWx1ZSgiYm9yZGVyLXJpZ2h0LXdpZHRoIiksMTApOwplLnRvcD1wYXJzZUludChkLmdldFByb3BlcnR5VmFsdWUoImJvcmRlci10b3Atd2lkdGgiKSwxMCk7CmUuYm90dG9tPXBhcnNlSW50KGQuZ2V0UHJvcGVydHlWYWx1ZSgiYm9yZGVyLWJvdHRvbS13aWR0aCIpLDEwKTsKfWVsc2V7ZS5sZWZ0PWMuY3VycmVudFN0eWxlLmJvcmRlckxlZnRXaWR0aDsKZS5yaWdodD1jLmN1cnJlbnRTdHlsZS5ib3JkZXJSaWdodFdpZHRoOwplLnRvcD1jLmN1cnJlbnRTdHlsZS5ib3JkZXJUb3BXaWR0aDsKZS5ib3R0b209Yy5jdXJyZW50U3R5bGUuYm9yZGVyQm90dG9tV2lkdGg7Cn1lLmhvcml6b250YWw9ZS5sZWZ0K2UucmlnaHQ7CmUudmVydGljYWw9ZS50b3ArZS5ib3R0b207CnJldHVybiBlOwp9LF9hZGRTY3JvbGxIaW50czpmdW5jdGlvbigpe2lmKHRoaXMuX3Nob3dTY3JvbGxIaW50cyl7dmFyIGs9MDsKdmFyIGg9MDsKdmFyIGM9dGhpcy5fbGFzdEFuaW1hdG9yOwp2YXIgbD1jLmVsZW1lbnRbMF07CnZhciBmPXRoaXMuX2dldEJvcmRlckJveChsKTsKdmFyIGU9YShsKS5wb3NpdGlvbigpOwppZih0aGlzLl9oYXNIb3Jpem9udGFsU2Nyb2xsSGludCl7dmFyIGc9Yy5lbGVtZW50LmlubmVyV2lkdGgoKTsKdmFyIGo9fn4oKGcvbC5zY3JvbGxXaWR0aCkqZyktMjsKdGhpcy5fd2lkdGhDb25zdGFudD0oai9nKTsKc2V0VGltZW91dChmdW5jdGlvbigpe2s9TWF0aC5hYnMobC5zY3JvbGxMZWZ0KSooai9nKStlLmxlZnQrZi5sZWZ0OwpoPWwub2Zmc2V0SGVpZ2h0K2UudG9wK2YudG9wLTc7CmMuaG9yaXpvbnRhbFNjcm9sbEhpbnQud2lkdGgoaikuY3NzKHtsZWZ0OmssdG9wOmh9KTsKfSwwKTsKYy5ob3Jpem9udGFsU2Nyb2xsSGludC5mYWRlVG8oMjAwLDAuNSk7Cn1pZih0aGlzLl9oYXNWZXJ0aWNhbFNjcm9sbEhpbnQpe3ZhciBpPWMuZWxlbWVudC5pbm5lckhlaWdodCgpOwp2YXIgZD1+figoaS9sLnNjcm9sbEhlaWdodCkqaSktMjsKdGhpcy5faGVpZ2h0Q29uc3RhbnQ9KGQvaSk7CnNldFRpbWVvdXQoZnVuY3Rpb24oKXtoPU1hdGguYWJzKGwuc2Nyb2xsVG9wKSooZC9pKStlLnRvcCtmLnRvcDsKaz1sLm9mZnNldFdpZHRoK2UubGVmdCtmLmxlZnQtNzsKYy52ZXJ0aWNhbFNjcm9sbEhpbnQuaGVpZ2h0KGQpLmNzcyh7bGVmdDprLHRvcDpofSk7Cn0sMCk7CmMudmVydGljYWxTY3JvbGxIaW50LmZhZGVUbygyMDAsMC41KTsKfX19LF9yZW1vdmVTY3JvbGxIaW50czpmdW5jdGlvbigpe2lmKHRoaXMuX3Nob3dTY3JvbGxIaW50cyl7dmFyIGM9dGhpcy5fbGFzdEFuaW1hdG9yLmhvcml6b250YWxTY3JvbGxIaW50Owp2YXIgZD10aGlzLl9sYXN0QW5pbWF0b3IudmVydGljYWxTY3JvbGxIaW50OwppZih0aGlzLl9oYXNIb3Jpem9udGFsU2Nyb2xsSGludCYmYyl7Yy5oaWRlKCk7Cn1pZih0aGlzLl9oYXNWZXJ0aWNhbFNjcm9sbEhpbnQmJmQpe2QuaGlkZSgpOwp9fX0sX3NpbXBsZURyYWdnZXI6ZnVuY3Rpb24oYyl7aWYodGhpcy5fZHJhZ0NhbmNlbGVkKXtyZXR1cm47Cn12YXIgZD0kdGVsZXJpay5nZXRUb3VjaEV2ZW50TG9jYXRpb24oYyk7CmlmKHRoaXMuX2xhc3RBbmltYXRvci5lbGVtZW50Lmxlbmd0aCl7dGhpcy5fdGhyb3R0bGVTY3JvbGwoZCk7CnRoaXMuX2FsaWduU2Nyb2xsSGludHMoKTsKfXRoaXMuX3N0b3JlTGFzdExvY2F0aW9uKGQpOwp9LF9jb21wb3NpdGVEcmFnZ2VyOmZ1bmN0aW9uKGMpe2lmKHRoaXMuX2RyYWdDYW5jZWxlZCl7cmV0dXJuOwp9dGhpcy5fY2FuY2VsRXZlbnRzKGMpOwp2YXIgZD0kdGVsZXJpay5nZXRUb3VjaEV2ZW50TG9jYXRpb24oYyk7CnZhciBmPXRoaXMuX2xhc3RBbmltYXRvcjsKdmFyIGc9Zi5lbGVtZW50WzBdOwppZihNYXRoLmFicyhmLmtYLWQueCk+MTB8fE1hdGguYWJzKGYua1ktZC55KT4xMCl7Zi5oYXNEcmFnZ2VkPXRydWU7CnRoaXMuX2FkZFNjcm9sbEhpbnRzKCk7CmlmKGIuVG91Y2hTY3JvbGxFeHRlbmRlci5fZ2V0TmVlZHNTY3JvbGxFeHRlbmRlcigpKXthKGRvY3VtZW50LmJvZHkpLnVuYmluZCgidG91Y2htb3ZlIix0aGlzLl9jb21wb3NpdGVEcmFnZ2VyKS5iaW5kKCJ0b3VjaG1vdmUiLGEucHJveHkodGhpcy5fc2ltcGxlRHJhZ2dlcix0aGlzKSk7Cn1lbHNle2EoZG9jdW1lbnQuYm9keSkudW5iaW5kKCJtb3VzZW1vdmUiLHRoaXMuX2NvbXBvc2l0ZURyYWdnZXIpLmJpbmQoIm1vdXNlbW92ZSIsYS5wcm94eSh0aGlzLl9zaW1wbGVEcmFnZ2VyLHRoaXMpKTsKfWlmKCR0ZWxlcmlrLmlzSUUpe2YuZWxlbWVudC5iaW5kKCJjbGljayIsdGhpcy5fY2FuY2VsRXZlbnRzKTsKZy5zZXRDYXB0dXJlKHRydWUpOwp9ZWxzZXtnLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIix0aGlzLl9jYW5jZWxFdmVudHMsdHJ1ZSk7Cn19fSxkaXNhYmxlOmZ1bmN0aW9uKCl7dGhpcy5fZGV0YWNoRXZlbnRzKCk7CnRoaXMuX2RyYWdDYW5jZWxlZD10cnVlOwp9LGVuYWJsZTpmdW5jdGlvbigpe3RoaXMuX2RyYWdDYW5jZWxlZD1mYWxzZTsKfSxfb25HZXN0dXJlU3RhcnQ6ZnVuY3Rpb24oKXt0aGlzLl9kZXRhY2hFdmVudHMoKTsKdGhpcy5fZHJhZ0NhbmNlbGVkPXRydWU7Cn0sX29uR2VzdHVyZUVuZDpmdW5jdGlvbigpe3RoaXMuX2RyYWdDYW5jZWxlZD1mYWxzZTsKfSxfZW5kRHJhZzpmdW5jdGlvbihmKXtpZih0aGlzLl9kcmFnQ2FuY2VsZWQpe3JldHVybjsKfXRoaXMuX2NhbmNlbEV2ZW50cyhmKTsKdGhpcy5fZGV0YWNoRXZlbnRzKCk7CmlmKGIuVG91Y2hTY3JvbGxFeHRlbmRlci5fZ2V0TmVlZHNTY3JvbGxFeHRlbmRlcigpKXtpZih0aGlzLl9sYXN0QW5pbWF0b3Iub3JpZ2luYWxFdmVudC50b3VjaGVzLmxlbmd0aD09MSYmIXRoaXMuX2xhc3RBbmltYXRvci5oYXNEcmFnZ2VkKXt2YXIgYz10aGlzLl9sYXN0QW5pbWF0b3Iub3JpZ2luYWxFdmVudDsKdmFyIGg9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoIk1vdXNlRXZlbnRzIik7CmguaW5pdE1vdXNlRXZlbnQoImNsaWNrIixjLmJ1YmJsZXMsYy5jYW5jZWxhYmxlLGMudmlldyxjLmRldGFpbCxjLnNjcmVlblgsYy5zY3JlZW5ZLGMuY2xpZW50WCxjLmNsaWVudFksZmFsc2UsZmFsc2UsZmFsc2UsZmFsc2UsYy5idXR0b24sYy5yZWxhdGVkVGFyZ2V0KTsKYy50YXJnZXQuZGlzcGF0Y2hFdmVudChoKTsKfX12YXIgZz10aGlzOwp2YXIgZD0kdGVsZXJpay5nZXRUb3VjaEV2ZW50TG9jYXRpb24oZik7CnZhciBpPXRoaXMuX2xhc3RBbmltYXRvcjsKaWYoJHRlbGVyaWsuaXNJRSl7c2V0VGltZW91dChmdW5jdGlvbigpe2kuZWxlbWVudC51bmJpbmQoImNsaWNrIixnLl9jYW5jZWxFdmVudHMpOwpkb2N1bWVudC5yZWxlYXNlQ2FwdHVyZSgpOwp9LDEwKTsKfWVsc2V7c2V0VGltZW91dChmdW5jdGlvbigpe2kuZWxlbWVudFswXS5yZW1vdmVFdmVudExpc3RlbmVyKCJjbGljayIsZy5fY2FuY2VsRXZlbnRzLHRydWUpOwp9LDApOwp9aWYoaS5oYXNEcmFnZ2VkKXtpZihpLmVsZW1lbnQubGVuZ3RoKXtpLmVuZFg9ZC54OwppLmVuZFk9ZC55Owp9dGhpcy5fZmluaXNoRHJhZyhpKTsKfX0sX2RldGFjaEV2ZW50czpmdW5jdGlvbigpe2lmKGIuVG91Y2hTY3JvbGxFeHRlbmRlci5fZ2V0TmVlZHNTY3JvbGxFeHRlbmRlcigpKXthKGRvY3VtZW50LmJvZHkpLnVuYmluZCgidG91Y2htb3ZlIix0aGlzLl9zaW1wbGVEcmFnZ2VyKS51bmJpbmQoInRvdWNobW92ZSIsdGhpcy5fY29tcG9zaXRlRHJhZ2dlcikudW5iaW5kKCJ0b3VjaGVuZCIsdGhpcy5fZW5kRHJhZyk7Cn1lbHNle2EoZG9jdW1lbnQuYm9keSkudW5iaW5kKCJtb3VzZW1vdmUiLHRoaXMuX3NpbXBsZURyYWdnZXIpLnVuYmluZCgibW91c2Vtb3ZlIix0aGlzLl9jb21wb3NpdGVEcmFnZ2VyKS51bmJpbmQoIm1vdXNldXAiLHRoaXMuX2VuZERyYWcpOwp9fSxfZmluaXNoRHJhZzpmdW5jdGlvbihkKXt2YXIgZT1kLmVsZW1lbnRbMF0uc2Nyb2xsTGVmdCtkLmtYLWQuZW5kWDsKdmFyIGM9ZC5lbGVtZW50WzBdLnNjcm9sbFRvcCtkLmtZLWQuZW5kWTsKZC5rWD0wOwpkLmtZPTA7CnZhciBmPXRoaXM7CmQuZWxlbWVudC5zdG9wKHRydWUpLmFuaW1hdGUoe3Njcm9sbExlZnQ6ZSxzY3JvbGxUb3A6Y30se2R1cmF0aW9uOjUwMCxlYXNpbmc6ImVhc2VPdXRRdWFkIixjb21wbGV0ZTpmdW5jdGlvbigpe2YuX3JlbW92ZVNjcm9sbEhpbnRzKCk7Cn0sc3RlcDpmdW5jdGlvbigpe2YuX2FsaWduU2Nyb2xsSGludHMoKTsKfX0pOwppZih0aGlzLl9oYXNIb3Jpem9udGFsU2Nyb2xsSGludCYmZC5ob3Jpem9udGFsU2Nyb2xsSGludCl7ZC5ob3Jpem9udGFsU2Nyb2xsSGludC5zdG9wKCkuY3NzKCJvcGFjaXR5IiwwLjUpLmZhZGVUbyg0NTAsMCk7Cn1pZih0aGlzLl9oYXNWZXJ0aWNhbFNjcm9sbEhpbnQmJmQudmVydGljYWxTY3JvbGxIaW50KXtkLnZlcnRpY2FsU2Nyb2xsSGludC5zdG9wKCkuY3NzKCJvcGFjaXR5IiwwLjUpLmZhZGVUbyg0NTAsMCk7Cn19LF9jYW5jZWxFdmVudHM6ZnVuY3Rpb24oYyl7Yy5zdG9wUHJvcGFnYXRpb24oKTsKYy5wcmV2ZW50RGVmYXVsdCgpOwp9fTsKVGVsZXJpay5XZWIuVUkuVG91Y2hTY3JvbGxFeHRlbmRlci5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5Ub3VjaFNjcm9sbEV4dGVuZGVyIixudWxsLFN5cy5JRGlzcG9zYWJsZSk7Cn0pKCR0ZWxlcmlrLiQpOwoNCi8qIEVORCBUZWxlcmlrLldlYi5VSS5Db21tb24uVG91Y2hTY3JvbGxFeHRlbmRlci5qcyAqLw0KLyogU1RBUlQgVGVsZXJpay5XZWIuVUkuV2luZG93LlJhZFdpbmRvd1NjcmlwdHMuanMgKi8NClR5cGUucmVnaXN0ZXJOYW1lc3BhY2UoIlRlbGVyaWsuV2ViLlVJIik7CihmdW5jdGlvbigpeyR0ZWxlcmlrLnRvV2luZG93PWZ1bmN0aW9uKGMpe3JldHVybiBjOwp9OwokdGVsZXJpay5maW5kV2luZG93PSRmaW5kOwp2YXIgYT0kdGVsZXJpay4kOwp2YXIgYj1UZWxlcmlrLldlYi5VSTsKYi5SYWRXaW5kb3dDb250cm9sbGVyQ2xhc3M9ZnVuY3Rpb24oKXt0aGlzLl9hY3RpdmVXaW5kb3c9bnVsbDsKdGhpcy5faGlzdG9yeVN0YWNrPVtdOwp9OwpiLlJhZFdpbmRvd0NvbnRyb2xsZXJDbGFzcy5wcm90b3R5cGU9e2dldEluc3RhbmNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXM7Cn0saGlkZUN1cnJlbnRXaW5kb3dJZk5vbk1vZGFsOmZ1bmN0aW9uKCl7aWYodGhpcy5fYWN0aXZlV2luZG93IT1udWxsJiZ0aGlzLl9hY3RpdmVXaW5kb3cuaXNNb2RhbCYmIXRoaXMuX2FjdGl2ZVdpbmRvdy5pc01vZGFsKCkpe3RoaXMuX2FjdGl2ZVdpbmRvdy5jbG9zZSgpOwp9dGhpcy5fYWN0aXZlV2luZG93PW51bGw7Cn0saW5hY3RpdmF0ZUN1cnJlbnRXaW5kb3c6ZnVuY3Rpb24oKXtpZih0aGlzLl9hY3RpdmVXaW5kb3chPW51bGwpe3RoaXMuX2FjdGl2ZVdpbmRvdy5zZXRBY3RpdmUoZmFsc2UpOwp9dGhpcy5fYWN0aXZlV2luZG93PW51bGw7Cn0sc2V0X2FjdGl2ZVdpbmRvdzpmdW5jdGlvbihjKXtpZihjPT10aGlzLl9hY3RpdmVXaW5kb3cpe3JldHVybjsKfXRoaXMuaW5hY3RpdmF0ZUN1cnJlbnRXaW5kb3coKTsKdGhpcy5fYWN0aXZlV2luZG93PWM7CkFycmF5LnJlbW92ZSh0aGlzLl9oaXN0b3J5U3RhY2ssYyk7CkFycmF5LmFkZCh0aGlzLl9oaXN0b3J5U3RhY2ssYyk7Cn0sbm90aWZ5V2luZG93Q2xvc2VkOmZ1bmN0aW9uKGMpe2lmKHRoaXMuX2FjdGl2ZVdpbmRvdz09Yyl7dGhpcy5fYWN0aXZlV2luZG93PW51bGw7Cn1BcnJheS5yZW1vdmUodGhpcy5faGlzdG9yeVN0YWNrLGMpOwp0aGlzLl9hY3RpdmF0ZVByZXZpb3VzV2luZG93KCk7Cn0sX2FjdGl2YXRlUHJldmlvdXNXaW5kb3c6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLl9oaXN0b3J5U3RhY2s7CnZhciBkPWMubGVuZ3RoLTE7CmZvcig7CmQ+PTA7CmQtLSl7dmFyIGU9Y1tkXTsKaWYoIWUpe3JldHVybjsKfWlmKGUuaXNDcmVhdGVkKCkmJiFlLmlzQ2xvc2VkKCkmJiFlLmlzTWluaW1pemVkKCkpe2Uuc2V0QWN0aXZlKHRydWUpOwpicmVhazsKfWVsc2V7QXJyYXkucmVtb3ZlQXQoYyxkKTsKfX19LGdldF9hY3RpdmVXaW5kb3c6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYWN0aXZlV2luZG93Owp9fTsKYi5SYWRXaW5kb3dDb250cm9sbGVyQ2xhc3MucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuUmFkV2luZG93Q29udHJvbGxlckNsYXNzIixudWxsKTsKaWYoIWIuUmFkV2luZG93Q29udHJvbGxlcil7Yi5SYWRXaW5kb3dDb250cm9sbGVyPW5ldyBiLlJhZFdpbmRvd0NvbnRyb2xsZXJDbGFzcygpOwp9VHlwZS5yZWdpc3Rlck5hbWVzcGFjZSgiVGVsZXJpay5XZWIuVUkiKTsKVHlwZS5yZWdpc3Rlck5hbWVzcGFjZSgiVGVsZXJpay5XZWIuVUkuUmFkV2luZG93VXRpbHMiKTsKYi5SYWRXaW5kb3dVdGlscy5Mb2NhbGl6YXRpb249e0Nsb3NlOiJDbG9zZSIsTWluaW1pemU6Ik1pbmltaXplIixNYXhpbWl6ZToiTWF4aW1pemUiLFJlbG9hZDoiUmVsb2FkIixQaW5PbjoiUGluIG9uIixQaW5PZmY6IlBpbiBvZmYiLFJlc3RvcmU6IlJlc3RvcmUiLE9LOiJPSyIsQ2FuY2VsOiJDYW5jZWwiLFllczoiWWVzIixObzoiTm8ifTsKYS5yZWdpc3RlckVudW0oYiwiV2luZG93QmVoYXZpb3JzIix7Tm9uZTowLFJlc2l6ZToxLE1pbmltaXplOjIsQ2xvc2U6NCxQaW46OCxNYXhpbWl6ZToxNixNb3ZlOjMyLFJlbG9hZDo2NCxEZWZhdWx0OigxKzIrNCs4KzE2KzMyKzY0KX0pOwphLnJlZ2lzdGVyRW51bShiLCJXaW5kb3dBdXRvU2l6ZUJlaGF2aW9ycyIse1dpZHRoOjEsV2lkdGhQcm9wb3J0aW9uYWw6MixIZWlnaHQ6NCxIZWlnaHRQcm9wb3J0aW9uYWw6OCxEZWZhdWx0OigyKzgpfSk7CmEucmVnaXN0ZXJFbnVtKGIsIldpbmRvd0FuaW1hdGlvbiIse05vbmU6MCxSZXNpemU6MSxGYWRlOjIsU2xpZGU6NCxGbHlJbjo4fSk7CmEucmVnaXN0ZXJFbnVtKGIsIldpbmRvd01pbmltaXplTW9kZSIse1NhbWVMb2NhdGlvbjoxLE1pbmltaXplWm9uZToyLERlZmF1bHQ6MX0pOwpiLlJhZFdpbmRvdz1mdW5jdGlvbihjKXtiLlJhZFdpbmRvdy5pbml0aWFsaXplQmFzZSh0aGlzLFtjXSk7CnRoaXMuX29wZW5lckVsZW1lbnQ9bnVsbDsKdGhpcy5fb2Zmc2V0RWxlbWVudD1udWxsOwp0aGlzLl9wb3B1cEVsZW1lbnQ9bnVsbDsKdGhpcy5fdGFibGVFbGVtZW50PW51bGw7CnRoaXMuX2NvbnRlbnRFbGVtZW50PW51bGw7CnRoaXMuX2NvbnRlbnRDZWxsPW51bGw7CnRoaXMuX3RpdGxlRWxlbWVudD1udWxsOwp0aGlzLl90aXRsZUNlbGw9bnVsbDsKdGhpcy5fdGl0bGViYXJFbGVtZW50PW51bGw7CnRoaXMuX3N0YXR1c0NlbGw9bnVsbDsKdGhpcy5fc3RhdHVzTWVzc2FnZUVsZW1lbnQ9bnVsbDsKdGhpcy5faWZyYW1lPW51bGw7CnRoaXMuX2RvY2tNb2RlPWZhbHNlOwp0aGlzLl9idXR0b25zRWxlbWVudD1udWxsOwp0aGlzLl9idXR0b25zQXJyYXk9W107CnRoaXMuX2ljb25Vcmw9bnVsbDsKdGhpcy5fc2hvcnRDdXRNYW5hZ2VyPW51bGw7CnRoaXMuaXNJRT0oJHRlbGVyaWsuaXNJRSk7CnRoaXMuX29wZW5lckVsZW1lbnRJRD1udWxsOwp0aGlzLl9vZmZzZXRFbGVtZW50SUQ9bnVsbDsKdGhpcy5fYmVoYXZpb3JzPWIuV2luZG93QmVoYXZpb3JzLkRlZmF1bHQ7CnRoaXMuX2xlZnQ9bnVsbDsKdGhpcy5fdG9wPW51bGw7CnRoaXMuX3RpdGxlPSIiOwp0aGlzLl93aWR0aD0iMzAwcHgiOwp0aGlzLl9taW5XaWR0aD1udWxsOwp0aGlzLl9taW5IZWlnaHQ9bnVsbDsKdGhpcy5fZGVmYXVsdE1pbldpZHRoPW51bGw7CnRoaXMuX2RlZmF1bHRNaW5IZWlnaHQ9bnVsbDsKdGhpcy5faGFuZGxlc1dpZHRoPW51bGw7CnRoaXMuX3Jlc2l6ZU92ZXJsYXlFbGVtZW50PW51bGw7CnRoaXMuX2hlaWdodD0iMzAwcHgiOwp0aGlzLl9vcGFjaXR5PTEwMDsKdGhpcy5fdmlzaWJsZVRpdGxlYmFyPXRydWU7CnRoaXMuX3Zpc2libGVTdGF0dXNiYXI9dHJ1ZTsKdGhpcy5fbW9kYWw9ZmFsc2U7CnRoaXMuX292ZXJsYXk9ZmFsc2U7CnRoaXMuX2tlZXBJblNjcmVlbkJvdW5kcz1mYWxzZTsKdGhpcy5fd2luZG93QW5pbWF0aW9uPW51bGw7CnRoaXMuX29uTW91c2VEb3duRGVsZWdhdGU9bnVsbDsKdGhpcy5fb25DbGlja0RlbGVnYXRlPW51bGw7CnRoaXMuX29uVGl0bGViYXJEYmxjbGlja0RlbGVnYXRlPW51bGw7CnRoaXMuX29uVGl0bGViYXJDbGlja0RlbGVnYXRlPW51bGw7CnRoaXMuX29uV2luZG93UmVzaXplRGVsZWdhdGU9bnVsbDsKdGhpcy5fb25JZnJhbWVMb2FkRGVsZWdhdGU9bnVsbDsKdGhpcy5fb25DaGlsZFBhZ2VVbmxvYWREZWxlZ2F0ZT1udWxsOwp0aGlzLl9vbkNoaWxkUGFnZUNsaWNrRGVsZWdhdGU9bnVsbDsKdGhpcy5fb25LZXlEb3duRGVsZWdhdGU9bnVsbDsKdGhpcy5fb25Nb2RhbFNob3dIYW5kbGVyPW51bGw7CnRoaXMuX29uTW9kYWxDbG9zZUhhbmRsZXI9bnVsbDsKdGhpcy5fbG9hZGVkPWZhbHNlOwp0aGlzLl9pc0Nsb25lZD1mYWxzZTsKdGhpcy5fcmVzdG9yZVJlY3Q9bnVsbDsKdGhpcy5fcG9wdXBCZWhhdmlvcj1udWxsOwp0aGlzLl9wb3B1cFZpc2libGU9ZmFsc2U7CnRoaXMuX2Ryb3BEb3duVG91Y2hTY3JvbGw9bnVsbDsKdGhpcy5fYnJvd3NlcldpbmRvdz13aW5kb3c7CnRoaXMuX3N0eWxlemluZGV4PW51bGw7CnRoaXMuX2lzaU9TNVNhZmFyaT1uYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9PUyA1X1xkIGxpa2UgTWFjIE9TIFgvaSk7CnRoaXMuX2lmcmFtZVdyYXBwZXI9bnVsbDsKdGhpcy5HZXRXaW5kb3dNYW5hZ2VyPXRoaXMuZ2V0X3dpbmRvd01hbmFnZXI7CnRoaXMuQnJvd3NlcldpbmRvdz13aW5kb3c7CnRoaXMuR2V0Q29udGVudEZyYW1lPXRoaXMuZ2V0X2NvbnRlbnRGcmFtZTsKdGhpcy5HZXRMZWZ0UG9zaXRpb249ZnVuY3Rpb24oKXt0aGlzLmdldFdpbmRvd0JvdW5kcygpLng7Cn07CnRoaXMuR2V0VG9wUG9zaXRpb249ZnVuY3Rpb24oKXt0aGlzLmdldFdpbmRvd0JvdW5kcygpLnk7Cn07CnRoaXMuR2V0VGl0bGViYXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGl0bGVDZWxsOwp9Owp0aGlzLkdldFN0YXR1c2Jhcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGF0dXNDZWxsOwp9Owp0aGlzLlNldE9wZW5lckVsZW1lbnRJZD10aGlzLnNldF9vcGVuZXJFbGVtZW50SUQ7CnRoaXMuU2V0U3RhdHVzPXRoaXMuc2V0X3N0YXR1czsKdGhpcy5HZXRTdGF0dXM9dGhpcy5nZXRfc3RhdHVzOwp0aGlzLlNldE1vZGFsPXRoaXMuc2V0X21vZGFsOwp0aGlzLlNldFdpZHRoPXRoaXMuc2V0X3dpZHRoOwp0aGlzLlNldEhlaWdodD10aGlzLnNldF9oZWlnaHQ7CnRoaXMuR2V0V2lkdGg9dGhpcy5nZXRfd2lkdGg7CnRoaXMuR2V0SGVpZ2h0PXRoaXMuZ2V0X2hlaWdodDsKdGhpcy5TZXRPZmZzZXRFbGVtZW50SWQ9dGhpcy5zZXRfb2Zmc2V0RWxlbWVudElEOwp0aGlzLlNldFRpdGxlPXRoaXMuc2V0X3RpdGxlOwp0aGlzLk1vdmVUbz10aGlzLm1vdmVUbzsKdGhpcy5DZW50ZXI9dGhpcy5jZW50ZXI7CnRoaXMuU2V0VmlzaWJsZT10aGlzLnNldFZpc2libGU7CnRoaXMuU2V0U2l6ZT10aGlzLnNldFNpemU7CnRoaXMuU2hvdz10aGlzLnNob3c7CnRoaXMuSGlkZT10aGlzLmhpZGU7CnRoaXMuR2V0VXJsPXRoaXMuZ2V0X25hdmlnYXRlVXJsOwp0aGlzLlNldFVybD10aGlzLnNldFVybDsKdGhpcy5SZWxvYWQ9dGhpcy5yZWxvYWQ7CnRoaXMuU2V0QWN0aXZlPXRoaXMuc2V0QWN0aXZlOwp0aGlzLk1pbmltaXplPXRoaXMubWluaW1pemU7CnRoaXMuUmVzdG9yZT10aGlzLnJlc3RvcmU7CnRoaXMuTWF4aW1pemU9dGhpcy5tYXhpbWl6ZTsKdGhpcy5DbG9zZT10aGlzLmNsb3NlOwp0aGlzLlRvZ2dsZVBpbj10aGlzLnRvZ2dsZVBpbjsKdGhpcy5Jc01heGltaXplZD10aGlzLmlzTWF4aW1pemVkOwp0aGlzLklzTWluaW1pemVkPXRoaXMuaXNNaW5pbWl6ZWQ7CnRoaXMuSXNNb2RhbD10aGlzLmlzTW9kYWw7CnRoaXMuSXNDbG9zZWQ9dGhpcy5pc0Nsb3NlZDsKdGhpcy5Jc1Bpbm5lZD10aGlzLmlzUGlubmVkOwp0aGlzLklzVmlzaWJsZT10aGlzLmlzVmlzaWJsZTsKdGhpcy5Jc0FjdGl2ZT10aGlzLmlzQWN0aXZlOwp0aGlzLklzQmVoYXZpb3JFbmFibGVkPXRoaXMuaXNCZWhhdmlvckVuYWJsZWQ7Cn07CmIuUmFkV2luZG93LnByb3RvdHlwZT17X2dldExvY2FsaXphdGlvbjpmdW5jdGlvbigpe3JldHVybiBiLlJhZFdpbmRvd1V0aWxzLkxvY2FsaXphdGlvbjsKfSxfZ2V0TG9jYWxpemF0aW9uU3RyaW5nOmZ1bmN0aW9uKGQpe3ZhciBlPXRoaXMuZ2V0X2xvY2FsaXphdGlvbigpOwppZih0eXBlb2YoZSk9PSJzdHJpbmciKXtlPVN5cy5TZXJpYWxpemF0aW9uLkphdmFTY3JpcHRTZXJpYWxpemVyLmRlc2VyaWFsaXplKGUpOwp0aGlzLnNldF9sb2NhbGl6YXRpb24oZSk7Cn12YXIgYz10aGlzLl9nZXRMb2NhbGl6YXRpb24oKTsKaWYoIWUpe3JldHVybiBjW2RdOwp9cmV0dXJuIGVbZF07Cn0sX3JlZ2lzdGVyR2xvYmFsQm9keUV2ZW50SGFuZGxlcnM6ZnVuY3Rpb24oYyl7dmFyIGQ9dGhpcy5nZXRfc2hvcnRjdXRzKCk7CmlmKCFkKXtyZXR1cm47Cn1pZighdGhpcy5fc2hvcnRDdXRNYW5hZ2VyKXt0aGlzLl9zaG9ydEN1dE1hbmFnZXI9bmV3IGIuV2luZG93U2hvcnRDdXRNYW5hZ2VyKGQpOwp9aWYoYyl7dGhpcy5fb25LZXlEb3duRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vbktleURvd24pOwokYWRkSGFuZGxlcihkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsImtleWRvd24iLHRoaXMuX29uS2V5RG93bkRlbGVnYXRlKTsKfWVsc2V7aWYodGhpcy5fb25LZXlEb3duRGVsZWdhdGUpeyRyZW1vdmVIYW5kbGVyKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwia2V5ZG93biIsdGhpcy5fb25LZXlEb3duRGVsZWdhdGUpOwp0aGlzLl9vbktleURvd25EZWxlZ2F0ZT1udWxsOwp9fX0sX3JlZ2lzdGVySWZyYW1lTG9hZEhhbmRsZXI6ZnVuY3Rpb24oYyl7aWYoIXRoaXMuX2lmcmFtZSl7cmV0dXJuOwp9aWYoYyl7dGhpcy5fb25JZnJhbWVMb2FkRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vbklmcmFtZUxvYWQpOwokYWRkSGFuZGxlcih0aGlzLl9pZnJhbWUsImxvYWQiLHRoaXMuX29uSWZyYW1lTG9hZERlbGVnYXRlKTsKfWVsc2V7aWYodGhpcy5fb25JZnJhbWVMb2FkRGVsZWdhdGUpeyRyZW1vdmVIYW5kbGVyKHRoaXMuX2lmcmFtZSwibG9hZCIsdGhpcy5fb25JZnJhbWVMb2FkRGVsZWdhdGUpOwp0aGlzLl9vbklmcmFtZUxvYWREZWxlZ2F0ZT1udWxsOwokY2xlYXJIYW5kbGVycyh0aGlzLl9pZnJhbWUpOwp9fX0sX3JlZ2lzdGVyV2luZG93UmVzaXplSGFuZGxlcjpmdW5jdGlvbihjKXtpZihjKXt0aGlzLl9vbldpbmRvd1Jlc2l6ZURlbGVnYXRlPUZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5fbWFpbnRhaW5NYXhpbWl6ZWRTaXplKTsKJGFkZEhhbmRsZXIod2luZG93LCJyZXNpemUiLHRoaXMuX29uV2luZG93UmVzaXplRGVsZWdhdGUpOwp9ZWxzZXtpZih0aGlzLl9vbldpbmRvd1Jlc2l6ZURlbGVnYXRlKXskcmVtb3ZlSGFuZGxlcih3aW5kb3csInJlc2l6ZSIsdGhpcy5fb25XaW5kb3dSZXNpemVEZWxlZ2F0ZSk7CnRoaXMuX29uV2luZG93UmVzaXplRGVsZWdhdGU9bnVsbDsKfX19LF9yZWdpc3Rlck9wZW5lckVsZW1lbnRIYW5kbGVyOmZ1bmN0aW9uKGQsYyl7aWYoIWQpe3JldHVybjsKfWlmKFN5cy5VSS5Eb21FbGVtZW50LmNvbnRhaW5zQ3NzQ2xhc3MoZCwiUmFkQnV0dG9uIikpe2Quc2V0QXR0cmlidXRlKCJyd09wZW5lciIsdHJ1ZSk7Cn1lbHNle2QucmVtb3ZlQXR0cmlidXRlKCJyd09wZW5lciIpOwp9aWYodHJ1ZT09Yyl7dGhpcy5fb25DbGlja0RlbGVnYXRlPUZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5fb25DbGljayk7CiRhZGRIYW5kbGVyKGQsImNsaWNrIix0aGlzLl9vbkNsaWNrRGVsZWdhdGUpOwp9ZWxzZXskcmVtb3ZlSGFuZGxlcihkLCJjbGljayIsdGhpcy5fb25DbGlja0RlbGVnYXRlKTsKdGhpcy5fb25DbGlja0RlbGVnYXRlPW51bGw7Cn19LF9yZWdpc3RlclRpdGxlYmFySGFuZGxlcnM6ZnVuY3Rpb24oYyl7dmFyIGQ9dGhpcy5fdGl0bGVDZWxsOwppZihjKXt0aGlzLl9vblRpdGxlYmFyRGJsY2xpY2tEZWxlZ2F0ZT1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLGZ1bmN0aW9uKCl7aWYodGhpcy5pc01pbmltaXplZCgpKXt0aGlzLnJlc3RvcmUoKTsKfWVsc2V7aWYodGhpcy5pc0JlaGF2aW9yRW5hYmxlZChiLldpbmRvd0JlaGF2aW9ycy5NYXhpbWl6ZSkpe2lmKHRoaXMuaXNNYXhpbWl6ZWQoKSl7dGhpcy5yZXN0b3JlKCk7Cn1lbHNle3RoaXMubWF4aW1pemUoKTsKfX19fSk7CnRoaXMuX29uVGl0bGViYXJDbGlja0RlbGVnYXRlPUZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsZnVuY3Rpb24oKXt0aGlzLnNldEFjdGl2ZSh0cnVlKTsKfSk7CiRhZGRIYW5kbGVyKGQsImRibGNsaWNrIix0aGlzLl9vblRpdGxlYmFyRGJsY2xpY2tEZWxlZ2F0ZSk7CiRhZGRIYW5kbGVyKGQsImNsaWNrIix0aGlzLl9vblRpdGxlYmFyQ2xpY2tEZWxlZ2F0ZSk7Cn1lbHNle2lmKGQpe2lmKHRoaXMuX29uVGl0bGViYXJEYmxjbGlja0RlbGVnYXRlKXskcmVtb3ZlSGFuZGxlcihkLCJkYmxjbGljayIsdGhpcy5fb25UaXRsZWJhckRibGNsaWNrRGVsZWdhdGUpOwp0aGlzLl9vblRpdGxlYmFyRGJsY2xpY2tEZWxlZ2F0ZT1udWxsOwp9aWYodGhpcy5fb25UaXRsZWJhckNsaWNrRGVsZWdhdGUpeyRyZW1vdmVIYW5kbGVyKGQsImNsaWNrIix0aGlzLl9vblRpdGxlYmFyQ2xpY2tEZWxlZ2F0ZSk7CnRoaXMuX29uVGl0bGViYXJDbGlja0RlbGVnYXRlPW51bGw7Cn0kY2xlYXJIYW5kbGVycyhkKTsKfX19LF9tYWtlTW9kYWw6ZnVuY3Rpb24oYyl7aWYodGhpcy5fb25Nb2RhbFNob3dIYW5kbGVyKXt0aGlzLnJlbW92ZV9zaG93KHRoaXMuX29uTW9kYWxTaG93SGFuZGxlcik7CnRoaXMuX29uTW9kYWxTaG93SGFuZGxlcj1udWxsOwp9aWYodGhpcy5fb25Nb2RhbENsb3NlSGFuZGxlcil7dGhpcy5yZW1vdmVfY2xvc2UodGhpcy5fb25Nb2RhbENsb3NlSGFuZGxlcik7CnRoaXMuX29uTW9kYWxDbG9zZUhhbmRsZXI9bnVsbDsKfWlmKHRoaXMuX21vZGFsRXh0ZW5kZXIpe3RoaXMuX21vZGFsRXh0ZW5kZXIuZGlzcG9zZSgpOwp0aGlzLl9tb2RhbEV4dGVuZGVyPW51bGw7Cn1pZighYyl7cmV0dXJuOwp9aWYodHlwZW9mKGIuUmFkV2luZG93TWFuYWdlcikhPSJ1bmRlZmluZWQiJiZiLlJhZFdpbmRvd01hbmFnZXIuaXNJbnN0YW5jZU9mVHlwZSh0aGlzKSl7cmV0dXJuOwp9dGhpcy5fb25Nb2RhbFNob3dIYW5kbGVyPWZ1bmN0aW9uKGQpe2lmKCFkLl9tb2RhbEV4dGVuZGVyKXtkLl9tb2RhbEV4dGVuZGVyPW5ldyBiLk1vZGFsRXh0ZW5kZXIoZC5fcG9wdXBFbGVtZW50KTsKfWQuX21vZGFsRXh0ZW5kZXIuc2hvdygpOwp2YXIgZj1kb2N1bWVudC5hY3RpdmVFbGVtZW50OwppZihmJiZmLnRhZ05hbWUudG9Mb3dlckNhc2UoKSE9ImJvZHkiKXt2YXIgZT0oISR0ZWxlcmlrLmlzRGVzY2VuZGFudCh0aGlzLl9jb250ZW50RWxlbWVudCxmKSYmdGhpcy5fZG9ja01vZGUpOwppZighKGQuX2lzUHJlZGVmaW5lZCl8fGUpe2QuX2ZvY3VzZWRQYWdlRWxlbWVudD1mOwpmLmJsdXIoKTsKfX1kLmNlbnRlcigpOwp9Owp0aGlzLmFkZF9zaG93KHRoaXMuX29uTW9kYWxTaG93SGFuZGxlcik7CnRoaXMuX29uTW9kYWxDbG9zZUhhbmRsZXI9ZnVuY3Rpb24oZCl7d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtpZihkLl9tb2RhbEV4dGVuZGVyKXtkLl9tb2RhbEV4dGVuZGVyLmhpZGUoKTsKfXZhciBmPWQuX2ZvY3VzZWRQYWdlRWxlbWVudDsKaWYoZil7dHJ5e2YuZm9jdXMoKTsKfWNhdGNoKGUpe31kLl9mb2N1c2VkUGFnZUVsZW1lbnQ9bnVsbDsKfX0sMTApOwp9Owp0aGlzLmFkZF9jbG9zZSh0aGlzLl9vbk1vZGFsQ2xvc2VIYW5kbGVyKTsKfSxfZW5hYmxlTW92ZVJlc2l6ZTpmdW5jdGlvbihkKXtpZih0aGlzLl9yZXNpemVFeHRlbmRlcil7dGhpcy5fcmVzaXplRXh0ZW5kZXIuZGlzcG9zZSgpOwp0aGlzLl9yZXNpemVFeHRlbmRlcj1udWxsOwp9aWYoIWQpe2lmKHRoaXMuX2JvdHRvbVJlc2l6ZXImJiF0aGlzLmlzQmVoYXZpb3JFbmFibGVkKGIuV2luZG93QmVoYXZpb3JzLlJlc2l6ZSkpe3RoaXMuX2JvdHRvbVJlc2l6ZXIuc3R5bGUuZGlzcGxheT0ibm9uZSI7Cn1yZXR1cm47Cn1pZighdGhpcy5fcG9wdXBFbGVtZW50KXtyZXR1cm47Cn12YXIgZT10aGlzLl90YWJsZUVsZW1lbnQucm93czsKdmFyIGM9e307CnZhciBnPXRoaXMuX2lzV2luZG93UmlnaHRUb0xlZnQoKTsKaWYodGhpcy5pc0JlaGF2aW9yRW5hYmxlZChiLldpbmRvd0JlaGF2aW9ycy5SZXNpemUpKXtpZighdGhpcy5fYm90dG9tUmVzaXplcil7dGhpcy5fY3JlYXRlU3RhdHVzYmFyUmVzaXplcih0aGlzLl9zdGF0dXNDZWxsLmZpcnN0Q2hpbGQpOwp9dGhpcy5fYm90dG9tUmVzaXplci5zdHlsZS5kaXNwbGF5PSIiOwppZihnKXtjPXtudzplWzBdLmNlbGxzWzJdLG46dGhpcy5fdG9wUmVzaXplcixuZTplWzBdLmNlbGxzWzBdLHc6W2VbMV0uY2VsbHNbMl0sZVsyXS5jZWxsc1syXV0sZTpbZVsxXS5jZWxsc1swXSxlWzJdLmNlbGxzWzBdXSxzdzplWzNdLmNlbGxzWzJdLHM6ZVszXS5jZWxsc1sxXSxzZTpbZVszXS5jZWxsc1swXSx0aGlzLl9ib3R0b21SZXNpemVyXX07Cn1lbHNle2M9e253OmVbMF0uY2VsbHNbMF0sbjp0aGlzLl90b3BSZXNpemVyLG5lOmVbMF0uY2VsbHNbMl0sdzpbZVsxXS5jZWxsc1swXSxlWzJdLmNlbGxzWzBdXSxlOltlWzFdLmNlbGxzWzJdLGVbMl0uY2VsbHNbMl1dLHN3OmVbM10uY2VsbHNbMF0sczplWzNdLmNlbGxzWzFdLHNlOltlWzNdLmNlbGxzWzJdLHRoaXMuX2JvdHRvbVJlc2l6ZXJdfTsKfX1pZih0aGlzLmlzQmVoYXZpb3JFbmFibGVkKGIuV2luZG93QmVoYXZpb3JzLk1vdmUpKXtjLm1vdmU9dGhpcy5fdGl0bGVDZWxsOwp9dGhpcy5fcmVzaXplRXh0ZW5kZXI9bmV3IGIuUmVzaXplRXh0ZW5kZXIodGhpcyx0aGlzLl9wb3B1cEVsZW1lbnQsYyx0aGlzLl90YWJsZUVsZW1lbnQpOwp2YXIgZj10aGlzLl9kb2NrTW9kZT9udWxsOnRoaXMuX2lmcmFtZTsKdGhpcy5fcmVzaXplRXh0ZW5kZXIuc2V0X2lmcmFtZVRvU2tpcChmKTsKfSxfc2V0UmVzaXplT3ZlcmxheVZpc2libGU6ZnVuY3Rpb24oZil7aWYodGhpcy5fZG9ja01vZGUpe3JldHVybjsKfXZhciBkPXRoaXMuX3Jlc2l6ZU92ZXJsYXlFbGVtZW50OwppZighZCl7dmFyIGU9dGhpcy5fZ2V0SGFuZGxlc1dpZHRoKCk7CnZhciBjPXRoaXMuX3Zpc2libGVUaXRsZWJhcj90aGlzLl90YWJsZUVsZW1lbnQucm93c1swXS5vZmZzZXRIZWlnaHQ6ZTsKZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKZC5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiOwpkLnN0eWxlLnpJbmRleD0iMSI7CmQuc3R5bGUudG9wPWMrInB4IjsKZC5zdHlsZS5sZWZ0PU1hdGgucm91bmQoZS8yKSsicHgiOwpkLnN0eWxlLmJhY2tncm91bmRDb2xvcj0iV2hpdGUiOwpkLnN0eWxlLmZpbHRlcj0iYWxwaGEob3BhY2l0eT0wKSI7CmQuc3R5bGUub3BhY2l0eT0wOwp0aGlzLl9jb250ZW50Q2VsbC5hcHBlbmRDaGlsZChkKTsKdGhpcy5fcmVzaXplT3ZlcmxheUVsZW1lbnQ9ZDsKfXRoaXMuX3NldFJlc2l6ZU92ZXJsYXlTaXplKCk7CmQuc3R5bGUuZGlzcGxheT1mPyIiOiJub25lIjsKfSxfc2V0UmVzaXplT3ZlcmxheVNpemU6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLl9yZXNpemVPdmVybGF5RWxlbWVudDsKaWYoZCl7dmFyIGM9dGhpcy5fY29udGVudENlbGw7CmQuc3R5bGUud2lkdGg9Yy5vZmZzZXRXaWR0aCsicHgiOwpkLnN0eWxlLmhlaWdodD1jLm9mZnNldEhlaWdodCsicHgiOwp9fSxvblJlc2l6ZVN0YXJ0OmZ1bmN0aW9uKCl7aWYodGhpcy5pc01heGltaXplZCgpKXtyZXR1cm4gZmFsc2U7Cn10aGlzLnNldEFjdGl2ZSh0cnVlKTsKdGhpcy5fc2V0UmVzaXplT3ZlcmxheVZpc2libGUodHJ1ZSk7CnRoaXMuX2NhY2hlZERyYWdab25lQm91bmRzPXRoaXMuX2dldFJlc3RyaWN0aW9uWm9uZUJvdW5kcygpOwp2YXIgYz1uZXcgU3lzLkNhbmNlbEV2ZW50QXJncygpOwp0aGlzLnJhaXNlRXZlbnQoInJlc2l6ZVN0YXJ0IixjKTsKaWYoYy5nZXRfY2FuY2VsKCkpe3JldHVybiBmYWxzZTsKfX0sb25SZXNpemluZzpmdW5jdGlvbihlKXtpZighdGhpcy5fY2FjaGVkRHJhZ1pvbmVCb3VuZHN8fHRoaXMuX2NoZWNrUmVzdHJpY3Rpb25ab25lQm91bmRzKHRoaXMuX2NhY2hlZERyYWdab25lQm91bmRzLGUpKXt0aGlzLl9tYW5hZ2VWaXNpYmlsaXR5RmlyZWZveChmYWxzZSk7CmlmKHRoaXMuX2lzaU9TNVNhZmFyaSl7dGhpcy5zZXRDb250ZW50Rml4ZWRIZWlnaHQoZS5oZWlnaHQsdGhpcy5faWZyYW1lV3JhcHBlcik7Cn1pZih0aGlzLl9kb2NrTW9kZSl7dGhpcy5zZXRXaWR0aERvY2tNb2RlKGUud2lkdGgtMSk7CnRoaXMuc2V0SGVpZ2h0RG9ja01vZGUoZS5oZWlnaHQtMSk7Cn1lbHNle3RoaXMuX3NldFJlc2l6ZU92ZXJsYXlTaXplKCk7Cn12YXIgaT10aGlzLl9nZXRDdXJyZW50Qm91bmRzKCk7CnZhciBmPXRoaXMuZ2V0X21pbldpZHRoKCk7CnZhciBoPXBhcnNlSW50KHRoaXMuZ2V0X21heFdpZHRoKCkpOwp2YXIgaj10aGlzLmdldF9taW5IZWlnaHQoKTsKdmFyIGc9cGFyc2VJbnQodGhpcy5nZXRfbWF4SGVpZ2h0KCkpOwp2YXIgYz1mYWxzZTsKaWYoZS53aWR0aDxmfHxoJiZlLndpZHRoPmgpe3ZhciBkPWY7CmlmKGUud2lkdGg8Zil7ZS53aWR0aD1mOwp9ZWxzZXtlLndpZHRoPWg7CmQ9aDsKfXZhciBrPXRoaXMuX3Jlc2l6ZUV4dGVuZGVyLl9vcmlnaW5hbEJvdW5kczsKaWYodGhpcy5fcmVzaXplRXh0ZW5kZXIuX3Jlc2l6ZURpci53ZXN0KXtlLng9ay54KyhrLndpZHRoLWQpOwppZih0aGlzLl9jYWNoZWREcmFnWm9uZUJvdW5kcyl7ZS54LT10aGlzLl9jYWNoZWREcmFnWm9uZUJvdW5kcy54Owp9fWVsc2V7ZS54PWkueDsKfWUueT1pLnk7CmUuaGVpZ2h0PWkuaGVpZ2h0OwpjPXRydWU7Cn1pZihlLmhlaWdodDxqfHxnJiZlLmhlaWdodD5nKXtlLmhlaWdodD0oZS5oZWlnaHQ8aik/ajpnOwplLng9aS54OwplLnk9aS55OwplLndpZHRoPWkud2lkdGg7CmM9dHJ1ZTsKfWlmKGMpe3RoaXMuc2V0U2l6ZShlLndpZHRoLGUuaGVpZ2h0KTsKdGhpcy5fbWFuYWdlVmlzaWJpbGl0eUZpcmVmb3goZmFsc2UpOwp0aGlzLl9zZXRQb3B1cFZpc2libGUoZS54LGUueSk7CnJldHVybiBmYWxzZTsKfXRoaXMuX3VwZGF0ZVRpdGxlV2lkdGgoKTsKcmV0dXJuIHRydWU7Cn1yZXR1cm4gZmFsc2U7Cn0sb25SZXNpemVFbmQ6ZnVuY3Rpb24oKXt0aGlzLl9tYW5hZ2VWaXNpYmlsaXR5RmlyZWZveChmYWxzZSk7CnRoaXMuX2NhY2hlZERyYWdXaW5kb3dCb3VuZHM9bnVsbDsKdmFyIGM9dGhpcy5fZ2V0Q3VycmVudEJvdW5kcygpOwppZighdGhpcy5fZG9ja01vZGUpe3RoaXMuX3NldFJlc2l6ZU92ZXJsYXlWaXNpYmxlKGZhbHNlKTsKfXRoaXMuX3NldFBvcHVwVmlzaWJsZShjLngsYy55KTsKdGhpcy5fc3RvcmVCb3VuZHMoKTsKaWYodGhpcy5fb3ZlcmxheSYmJHRlbGVyaWsuaXNGaXJlZm94KXt0aGlzLl9wb3B1cEJlaGF2aW9yLl9vbk1vdmUoKTsKfXRoaXMucmFpc2VFdmVudCgicmVzaXplRW5kIixuZXcgU3lzLkV2ZW50QXJncygpKTsKdGhpcy5fbWFuYWdlVmlzaWJpbGl0eUZpcmVmb3godHJ1ZSk7Cn0sb25EcmFnU3RhcnQ6ZnVuY3Rpb24oKXt0aGlzLnNldEFjdGl2ZSh0cnVlKTsKaWYodGhpcy5pc1Bpbm5lZCgpfHx0aGlzLmlzTWF4aW1pemVkKCkpe3JldHVybiBmYWxzZTsKfWlmKHRoaXMuaXNNaW5pbWl6ZWQoKSYmdGhpcy5nZXRfbWluaW1pemVab25lSUQoKSl7cmV0dXJuIGZhbHNlOwp9dmFyIGM9dGhpcy5nZXRfcG9wdXBFbGVtZW50KCk7CnRoaXMuX2NhY2hlZERyYWdab25lQm91bmRzPXRoaXMuX2dldFJlc3RyaWN0aW9uWm9uZUJvdW5kcygpOwp2YXIgZD0kdGVsZXJpay5nZXRTaXplKGMpOwp2YXIgZT0kdGVsZXJpay5nZXRCb3JkZXJCb3goYyk7CmQud2lkdGgtPWUuaG9yaXpvbnRhbDsKZC5oZWlnaHQtPWUudmVydGljYWw7CnRoaXMuX2NhY2hlZERyYWdXaW5kb3dCb3VuZHM9ZDsKdGhpcy5fc2V0UmVzaXplT3ZlcmxheVZpc2libGUodHJ1ZSk7CnRoaXMucmFpc2VFdmVudCgiZHJhZ1N0YXJ0IixuZXcgU3lzLkV2ZW50QXJncygpKTsKcmV0dXJuIHRydWU7Cn0sb25EcmFnRW5kOmZ1bmN0aW9uKGMpe3RoaXMuX2NhY2hlZERyYWdab25lQm91bmRzPW51bGw7CnRoaXMuX2NhY2hlZERyYWdXaW5kb3dCb3VuZHM9bnVsbDsKaWYodGhpcy5fb3ZlcmxheSYmJHRlbGVyaWsuaXNGaXJlZm94KXt0aGlzLl9wb3B1cEJlaGF2aW9yLl9vbk1vdmUoKTsKfXRoaXMuX3NldFJlc2l6ZU92ZXJsYXlWaXNpYmxlKGZhbHNlKTsKdGhpcy5fbWFuYWdlVmlzaWJpbGl0eUZpcmVmb3goZmFsc2UpOwp2YXIgZD10aGlzLl9nZXRDdXJyZW50Qm91bmRzKCk7CnRoaXMuX21hbmFnZVZpc2liaWxpdHlGaXJlZm94KGZhbHNlKTsKdGhpcy5tb3ZlVG8oZC54LGQueSk7CnRoaXMuc2V0QWN0aXZlKHRydWUpOwppZih0aGlzLmlzTWluaW1pemVkKCkpe3RoaXMuX2dldFRpdGxlRWxlbWVudCgpLnN0eWxlLndpZHRoPSIiOwp9dGhpcy5fbWFuYWdlVmlzaWJpbGl0eUZpcmVmb3godHJ1ZSk7CnRoaXMucmFpc2VFdmVudCgiZHJhZ0VuZCIsbmV3IFN5cy5FdmVudEFyZ3MoKSk7Cn0sb25EcmFnOmZ1bmN0aW9uKGQpe2lmKCF0aGlzLl9jYWNoZWREcmFnWm9uZUJvdW5kcyl7cmV0dXJuIHRydWU7Cn12YXIgYz10aGlzLl9jYWNoZWREcmFnV2luZG93Qm91bmRzOwp2YXIgZj10aGlzLl9jYWNoZWREcmFnWm9uZUJvdW5kczsKZC53aWR0aD1jLndpZHRoOwpkLmhlaWdodD1jLmhlaWdodDsKdmFyIGU9dGhpcy5fY2hlY2tSZXN0cmljdGlvblpvbmVCb3VuZHMoZixkKTsKaWYoIWUpe2lmKGQueDw9Zi54KXtkLng9Zi54Owp9ZWxzZXtpZihmLngrZi53aWR0aDw9ZC54K2Mud2lkdGgpe2QueD1mLngrZi53aWR0aC1jLndpZHRoOwp9fWlmKGQueTw9Zi55KXtkLnk9Zi55Owp9ZWxzZXtpZihmLnkrZi5oZWlnaHQ8PWQueStjLmhlaWdodCl7ZC55PWYueStmLmhlaWdodC1jLmhlaWdodDsKfX1lPXRydWU7Cn1yZXR1cm4gZTsKfSxpbml0aWFsaXplOmZ1bmN0aW9uKCl7Yi5SYWRXaW5kb3cuY2FsbEJhc2VNZXRob2QodGhpcywiaW5pdGlhbGl6ZSIpOwp2YXIgZD10aGlzLmdldF9lbGVtZW50KCk7CmlmKGQuaW5uZXJIVE1MLnRvTG93ZXJDYXNlKCkuaW5kZXhPZigidGhhbmsgeW91IGZvciB1c2luZyB0aGUgdHJpYWwgdmVyc2lvbiBvZiByYWRjb250cm9scyBmb3IgYXNwLm5ldCBhamF4Iik+MCl7ZC5zdHlsZS5kaXNwbGF5PSIiOwp9aWYodGhpcy5nZXRfdmlzaWJsZU9uUGFnZUxvYWQoKSl7c2V0VGltZW91dChGdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLGZ1bmN0aW9uKCl7dGhpcy5zaG93KCk7Cn0pLDApOwp9dGhpcy5fcmVnaXN0ZXJXaW5kb3dSZXNpemVIYW5kbGVyKHRydWUpOwp2YXIgYz10aGlzLmdldF9lbGVtZW50KCkuY2xhc3NOYW1lOwppZihjKXt0aGlzLnNldF9jc3NDbGFzcyhjLnJlcGxhY2UoL14gLywiIikpOwp9fSxkaXNwb3NlOmZ1bmN0aW9uKCl7dmFyIGk9dGhpcy5nZXRfd2luZG93TWFuYWdlcigpOwppZihpKXtpZihpLmdldF9wcmVzZXJ2ZUNsaWVudFN0YXRlKCkpe2kuc2F2ZVdpbmRvd1N0YXRlKHRoaXMpOwp9aWYodGhpcy5nZXRfZGVzdHJveU9uQ2xvc2UoKSl7aS5yZW1vdmVXaW5kb3codGhpcyk7Cn19aWYodGhpcy5fd2luZG93QW5pbWF0aW9uKXt0aGlzLl93aW5kb3dBbmltYXRpb24uZGlzcG9zZSgpOwp9aWYoISR0ZWxlcmlrLmlzQ2hyb21lJiYhJHRlbGVyaWsuaXNTYWZhcmkpe3RoaXMuX3JlbW92ZUZyb21ET009dGhpcy5nZXRfZGVzdHJveU9uQ2xvc2UoKTsKfXRoaXMuX2VuYWJsZU1vdmVSZXNpemUoZmFsc2UpOwp0aGlzLl9tYWtlTW9kYWwoZmFsc2UpOwp0aGlzLl9yZWdpc3RlclRpdGxlYmFySGFuZGxlcnMoZmFsc2UpOwppZih0aGlzLl90aXRsZUljb25FbGVtZW50KXskY2xlYXJIYW5kbGVycyh0aGlzLl90aXRsZUljb25FbGVtZW50KTsKfXRoaXMuX3JlZ2lzdGVyV2luZG93UmVzaXplSGFuZGxlcihmYWxzZSk7CnRoaXMuX3JlZ2lzdGVySWZyYW1lTG9hZEhhbmRsZXIoZmFsc2UpOwppZih0aGlzLl9vcGVuZXJFbGVtZW50KXt0aGlzLl9yZWdpc3Rlck9wZW5lckVsZW1lbnRIYW5kbGVyKHRoaXMuX29wZW5lckVsZW1lbnQsZmFsc2UpOwp9dGhpcy5zZXRfYmVoYXZpb3JzKGIuV2luZG93QmVoYXZpb3JzLk5vbmUpOwp2YXIgYz10aGlzLl9pZnJhbWU7CmlmKGMpe2MucmFkV2luZG93PW51bGw7CnZhciBlPSJzYW5kYm94IiBpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpZnJhbWUiKTsKYy5zcmM9ZT8iYWJvdXQ6YmxhbmsiOiJqYXZhc2NyaXB0Oic8aHRtbD48L2h0bWw+JzsiOwpjLm5hbWU9IiI7CmMucmVtb3ZlQXR0cmlidXRlKCJuYW1lIik7CmMucmVtb3ZlQXR0cmlidXRlKCJOQU1FIik7Cn10aGlzLl9jcmVhdGVUb3VjaFNjcm9sbEV4dGVuZGVyKGZhbHNlKTsKaWYodGhpcy5fY29udGVudEVsZW1lbnQmJnRoaXMuX2lzUHJlZGVmaW5lZCl7dGhpcy5fY29udGVudEVsZW1lbnQuaW5uZXJIVE1MPSIiOwp9dmFyIGY9dGhpcy5nZXRfY29udGVudEVsZW1lbnQoKTsKaWYodGhpcy5fZG9ja01vZGUmJmYpe2lmKFN5cyYmU3lzLldlYkZvcm1zKXt2YXIgZD1TeXMuV2ViRm9ybXMuUGFnZVJlcXVlc3RNYW5hZ2VyLmdldEluc3RhbmNlKCk7CmlmKGQmJmQuZ2V0X2lzSW5Bc3luY1Bvc3RCYWNrKCkpeyR0ZWxlcmlrLmRpc3Bvc2VFbGVtZW50KGYpOwp9fX12YXIgaD10aGlzLl9wb3B1cEVsZW1lbnQ7CmlmKGgmJmgucGFyZW50Tm9kZSl7aC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGgpOwp9dmFyIGc9dGhpcy5fcG9wdXBCZWhhdmlvcjsKaWYodGhpcy5nZXRfZGVzdHJveU9uQ2xvc2UoKSYmZyl7Zy5kaXNwb3NlKCk7CnRoaXMuX3BvcHVwQmVoYXZpb3I9bnVsbDsKfWIuUmFkV2luZG93LmNhbGxCYXNlTWV0aG9kKHRoaXMsImRpc3Bvc2UiKTsKfSxoaWRlOmZ1bmN0aW9uKCl7dGhpcy5faGlkZSgpOwp0aGlzLl9yZWdpc3Rlckdsb2JhbEJvZHlFdmVudEhhbmRsZXJzKGZhbHNlKTsKcmV0dXJuIHRydWU7Cn0sY2xvbmU6ZnVuY3Rpb24oZCl7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwppZihkKXtjLnNldEF0dHJpYnV0ZSgiaWQiLGQpOwp9cmV0dXJuICR0ZWxlcmlrLmNsb25lQ29udHJvbCh0aGlzLGIuUmFkV2luZG93LGMpOwp9LF9jcmVhdGVUb3VjaFNjcm9sbEV4dGVuZGVyOmZ1bmN0aW9uKGUpe3ZhciBjPSRnZXQodGhpcy5nZXRfaWQoKSsiX0MiKTsKaWYoYyl7dmFyIGQ9dGhpcy5fZHJvcERvd25Ub3VjaFNjcm9sbDsKaWYoZCl7aWYoIWUpe2QuZGlzcG9zZSgpOwp0aGlzLl9kcm9wRG93blRvdWNoU2Nyb2xsPW51bGw7Cn19ZWxzZXtpZihlKXt0aGlzLl9kcm9wRG93blRvdWNoU2Nyb2xsPW5ldyBiLlRvdWNoU2Nyb2xsRXh0ZW5kZXIoYyk7CnRoaXMuX2Ryb3BEb3duVG91Y2hTY3JvbGwuaW5pdGlhbGl6ZSgpOwp9fX19LHNldF9jb250ZW50RWxlbWVudDpmdW5jdGlvbihkKXtpZighdGhpcy5faXNQcmVkZWZpbmVkKXt0aGlzLl9kb2NrTW9kZT10cnVlOwp9dmFyIGM9JGdldCh0aGlzLmdldF9pZCgpKyJfQyIpOwppZihjJiZkIT1jKXskdGVsZXJpay5kaXNwb3NlRWxlbWVudChjKTsKYy5pbm5lckhUTUw9IiI7CmMuYXBwZW5kQ2hpbGQoZCk7CmQ9YzsKfXRoaXMuX2NyZWF0ZVVJKCk7CmlmKHRoaXMuX2lmcmFtZSl7dGhpcy5faWZyYW1lLnN0eWxlLmRpc3BsYXk9Im5vbmUiOwp9ZWxzZXtpZighdGhpcy5fZHJvcERvd25Ub3VjaFNjcm9sbCYmYi5Ub3VjaFNjcm9sbEV4dGVuZGVyLl9nZXROZWVkc1Njcm9sbEV4dGVuZGVyKCkpe3RoaXMuX2NyZWF0ZVRvdWNoU2Nyb2xsRXh0ZW5kZXIodHJ1ZSk7Cn19aWYoZC5wYXJlbnROb2RlJiZkLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQpe2QucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkKTsKfXRoaXMuX2NvbnRlbnRDZWxsLmFwcGVuZENoaWxkKGQpOwpkLnN0eWxlLmRpc3BsYXk9IiI7CnRoaXMuX2NvbnRlbnRFbGVtZW50PWQ7Cn0sX3NldFNoYWRvd0NTU0NsYXNzOmZ1bmN0aW9uKGMpe3ZhciBkPXRoaXMuX3RhYmxlRWxlbWVudDsKdmFyIGU9dGhpcy5nZXRfcG9wdXBFbGVtZW50KCk7CmlmKCFkfHwhZSl7cmV0dXJuOwp9aWYoYyl7U3lzLlVJLkRvbUVsZW1lbnQuYWRkQ3NzQ2xhc3MoZCwicndTaGFkb3ciKTsKU3lzLlVJLkRvbUVsZW1lbnQuYWRkQ3NzQ2xhc3MoZSwicndTaGFkb3ciKTsKfWVsc2V7U3lzLlVJLkRvbUVsZW1lbnQucmVtb3ZlQ3NzQ2xhc3MoZCwicndTaGFkb3ciKTsKU3lzLlVJLkRvbUVsZW1lbnQucmVtb3ZlQ3NzQ2xhc3MoZSwicndTaGFkb3ciKTsKfX0sZ2V0X2NvbnRlbnRFbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRlbnRFbGVtZW50Owp9LGlzQ3JlYXRlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wb3B1cEVsZW1lbnQhPW51bGw7Cn0sc2hvdzpmdW5jdGlvbigpe3ZhciBkPXRoaXMuaXNDcmVhdGVkKCk7CnRoaXMuX2NyZWF0ZVVJKCk7CnZhciBjPW5ldyBTeXMuQ2FuY2VsRXZlbnRBcmdzKCk7CnRoaXMucmFpc2VFdmVudCgiYmVmb3JlU2hvdyIsYyk7CmlmKGMuZ2V0X2NhbmNlbCgpKXtyZXR1cm47Cn1pZih0aGlzLmdldF9uYXZpZ2F0ZVVybCgpJiYoIWR8fHRoaXMuZ2V0X3JlbG9hZE9uU2hvdygpKSl7dGhpcy5zZXRVcmwodGhpcy5nZXRfbmF2aWdhdGVVcmwoKSk7Cn1pZighZCYmKHRoaXMuZ2V0X2luaXRpYWxCZWhhdmlvcnMoKSE9Yi5XaW5kb3dCZWhhdmlvcnMuTm9uZSkpe3RoaXMuX3Nob3coKTsKdGhpcy5fYWZ0ZXJTaG93KCk7CmlmKHRoaXMuaXNJbml0aWFsQmVoYXZpb3JFbmFibGVkKGIuV2luZG93QmVoYXZpb3JzLk1pbmltaXplKSl7dGhpcy5taW5pbWl6ZSgpOwp9aWYodGhpcy5pc0luaXRpYWxCZWhhdmlvckVuYWJsZWQoYi5XaW5kb3dCZWhhdmlvcnMuTWF4aW1pemUpKXt0aGlzLm1heGltaXplKCk7Cn1pZih0aGlzLmlzSW5pdGlhbEJlaGF2aW9yRW5hYmxlZChiLldpbmRvd0JlaGF2aW9ycy5QaW4pKXt0aGlzLnRvZ2dsZVBpbigpOwp9cmV0dXJuOwp9aWYodGhpcy5pc01vZGFsKCkpe3RoaXMuY2VudGVyKCk7Cn1pZih0aGlzLmdldF9hbmltYXRpb24oKT09Yi5XaW5kb3dBbmltYXRpb24uTm9uZSl7dGhpcy5fc2hvdygpOwp0aGlzLl9hZnRlclNob3coKTsKfWVsc2V7dGhpcy5fcGxheUFuaW1hdGlvbigpOwp9fSxfc2hvdzpmdW5jdGlvbigpe2lmKHRoaXMuZ2V0X29mZnNldEVsZW1lbnRJRCgpJiYhdGhpcy5fb2Zmc2V0RWxlbWVudCl7dmFyIGY9JGdldCh0aGlzLmdldF9vZmZzZXRFbGVtZW50SUQoKSk7CmlmKGYpe3RoaXMuX29mZnNldEVsZW1lbnQ9ZjsKfX12YXIgYz10aGlzLl9wb3B1cEJlaGF2aW9yLmdldF9wYXJlbnRFbGVtZW50KCk7CmlmKHRoaXMuX29mZnNldEVsZW1lbnQmJiF0aGlzLl9vZmZzZXRTZXQpe3RoaXMuX3BvcHVwQmVoYXZpb3Iuc2V0X3BhcmVudEVsZW1lbnQodGhpcy5fb2Zmc2V0RWxlbWVudCk7CnRoaXMuX29mZnNldFNldD10cnVlOwp9dGhpcy5zZXRfdmlzaWJsZVRpdGxlYmFyKHRoaXMuX3Zpc2libGVUaXRsZWJhcik7CnRoaXMuc2V0X3Zpc2libGVTdGF0dXNiYXIodGhpcy5fdmlzaWJsZVN0YXR1c2Jhcik7CnRoaXMuX3JlU2V0V2luZG93UG9zaXRpb24oKTsKdmFyIGU9dGhpcy5fZ2V0U3RvcmVkQm91bmRzKCk7CmlmKHRoaXMuX2ZpcnN0U2hvdyYmIWUpe3RoaXMuc2V0X3dpZHRoKHRoaXMuZ2V0X3dpZHRoKCkpOwp0aGlzLnNldF9oZWlnaHQodGhpcy5nZXRfaGVpZ2h0KCkpOwp9ZWxzZXt0aGlzLl9yZXN0b3JlQm91bmRzKCk7Cn1pZihjIT10aGlzLl9wb3B1cEJlaGF2aW9yLmdldF9wYXJlbnRFbGVtZW50KCkpe3RoaXMuX3BvcHVwQmVoYXZpb3Iuc2V0X3BhcmVudEVsZW1lbnQoYyk7Cn10aGlzLl9wb3B1cFZpc2libGU9dHJ1ZTsKdmFyIGQ9dGhpcy5nZXRfY29udGVudEVsZW1lbnQoKTsKaWYoIXRoaXMuX2lzUHJlZGVmbmVkJiZkKXskdGVsZXJpay5yZXBhaW50Q2hpbGRyZW4oZCk7Cn19LF9oaWRlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuZ2V0X2FuaW1hdGlvbigpfHx0aGlzLmdldF9hbmltYXRpb24oKT09MCl7dGhpcy5fYWZ0ZXJIaWRlKCk7Cn1lbHNle2lmKHRoaXMuX2VuYWJsZVNoYWRvdyYmJHRlbGVyaWsuaXNJRSl7dGhpcy5fc2V0U2hhZG93Q1NTQ2xhc3MoZmFsc2UpOwp9dmFyIGQ9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9hZnRlckhpZGUpOwp2YXIgYz10aGlzLmlzTWF4aW1pemVkKCk7CiR0ZWxlcmlrLiQodGhpcy5fcG9wdXBFbGVtZW50KS5zdG9wKCkuZmFkZU91dCh0aGlzLmdldF9hbmltYXRpb25EdXJhdGlvbigpLGZ1bmN0aW9uKCl7ZChjKTsKfSk7Cn19LF9hZnRlckhpZGU6ZnVuY3Rpb24oYyl7aWYoIXRoaXMuX3BvcHVwQmVoYXZpb3Ipe3JldHVybjsKfXRoaXMuX21hbmFnZVZpc2liaWxpdHlGaXJlZm94KHRydWUpOwppZihjPT1udWxsKXtjPXRoaXMuaXNNYXhpbWl6ZWQoKTsKfXZhciBkPXRoaXMuaXNNaW5pbWl6ZWQoKTsKaWYoY3x8ZCl7dGhpcy5yZXN0b3JlKCk7Cn1pZigkdGVsZXJpay5pc0ZpcmVmb3gpe3RoaXMuc2V0T3ZlcmZsb3dWaXNpYmxlKGZhbHNlKTsKfXRoaXMuX3BvcHVwQmVoYXZpb3IuaGlkZSh0cnVlKTsKdGhpcy5fcG9wdXBWaXNpYmxlPWZhbHNlOwp0aGlzLl9nZXRXaW5kb3dDb250cm9sbGVyKCkubm90aWZ5V2luZG93Q2xvc2VkKHRoaXMpOwppZih0aGlzLmdldF9lbmFibGVBcmlhU3VwcG9ydCgpJiZ0aGlzLl9wb3B1cEVsZW1lbnQmJiF0aGlzLmlzVmlzaWJsZSgpKXt0aGlzLl9wb3B1cEVsZW1lbnQuc2V0QXR0cmlidXRlKCJhcmlhLWhpZGRlbiIsInRydWUiKTsKfX0sX2FmdGVyU2hvdzpmdW5jdGlvbigpe3RoaXMuc2V0QWN0aXZlKHRydWUpOwppZigkdGVsZXJpay5pc0ZpcmVmb3gpe3RoaXMuc2V0T3ZlcmZsb3dWaXNpYmxlKHRydWUpOwp9dGhpcy5fcmVnaXN0ZXJHbG9iYWxCb2R5RXZlbnRIYW5kbGVycyh0cnVlKTsKdGhpcy5fc3RvcmVCb3VuZHMoKTsKdGhpcy5yYWlzZUV2ZW50KCJzaG93IixuZXcgU3lzLkV2ZW50QXJncygpKTsKdmFyIGM9IXRoaXMuZ2V0X2FuaW1hdGlvbigpPT1iLldpbmRvd0FuaW1hdGlvbi5Ob25lOwppZih0aGlzLmdldF9hdXRvU2l6ZSgpJiYodGhpcy5fZG9ja01vZGV8fGMpKXt0aGlzLmF1dG9TaXplKGMpOwp9aWYodGhpcy5nZXRfZW5hYmxlQXJpYVN1cHBvcnQoKSYmdGhpcy5fcG9wdXBFbGVtZW50JiZ0aGlzLmlzVmlzaWJsZSgpKXt0aGlzLl9wb3B1cEVsZW1lbnQuc2V0QXR0cmlidXRlKCJhcmlhLWhpZGRlbiIsImZhbHNlIik7Cn19LF9wbGF5QW5pbWF0aW9uOmZ1bmN0aW9uKCl7dmFyIGY9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyxmdW5jdGlvbigpe3ZhciBwPXRoaXMuX2dldENhbGN1bGF0ZWRQb3B1cEJvdW5kcygpOwp0aGlzLl9zZXRQb3B1cFZpc2libGUocC54LHAueSk7CnZhciBsPSR0ZWxlcmlrLmdldEJvdW5kcyh0aGlzLl9wb3B1cEVsZW1lbnQpOwp2YXIgbz10aGlzLmdldF9vZmZzZXRFbGVtZW50SUQoKTsKaWYobyl7dmFyIG49JGdldChvKTsKaWYobil7dmFyIG09JHRlbGVyaWsuZ2V0Qm91bmRzKG4pOwpsLng9bS54OwpsLnk9bS55Owp9fSR0ZWxlcmlrLiQodGhpcy5fcG9wdXBFbGVtZW50KS5oaWRlKCk7CnJldHVybiBsOwp9KTsKdmFyIGc9dGhpcy5fcG9wdXBFbGVtZW50OwppZih0aGlzLl9lbmFibGVTaGFkb3cmJiR0ZWxlcmlrLmlzSUUpe3RoaXMuX3NldFNoYWRvd0NTU0NsYXNzKGZhbHNlKTsKfXZhciBkPXRoaXMuZ2V0X2FuaW1hdGlvbigpOwp2YXIgaz10aGlzLl9vcGVuZXJFbGVtZW50PyR0ZWxlcmlrLmdldEJvdW5kcyh0aGlzLl9vcGVuZXJFbGVtZW50KTpudWxsOwp2YXIgYz1mKCk7CnZhciBpPXRoaXMuZ2V0X2FuaW1hdGlvbkR1cmF0aW9uKCk7CnZhciBoPSIiK3RoaXMuX3Bvc2l0aW9uOwp2YXIgZT1udWxsOwp2YXIgaj1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLGZ1bmN0aW9uKCl7dmFyIGw9dGhpcy5nZXRfcG9wdXBFbGVtZW50KCk7Cmwuc3R5bGUuZmlsdGVyPSIiOwppZigkdGVsZXJpay5pc0lFNyl7bC5zdHlsZS5yZW1vdmVBdHRyaWJ1dGUoImZpbHRlciIpOwp9bC5zdHlsZS5vcGFjaXR5PSIiOwppZih0aGlzLl9lbmFibGVTaGFkb3cmJiR0ZWxlcmlrLmlzSUUmJiEkdGVsZXJpay5pc0lFNil7dGhpcy5fc2V0U2hhZG93Q1NTQ2xhc3ModHJ1ZSk7Cn10aGlzLl9zaG93KCk7CnRoaXMuX2FmdGVyU2hvdygpOwp9KTsKYi5BbmltYXRpb25zLnBsYXlKUXVlcnlBbmltYXRpb24oZyxkLGssYyxoLGUsaixpKTsKfSxfb25DbGljazpmdW5jdGlvbihjKXt0aGlzLnNob3coKTsKcmV0dXJuIHRoaXMuX2NhbmNlbEV2ZW50KGMpOwp9LF9vbktleURvd246ZnVuY3Rpb24oYyl7dmFyIGQ9dGhpcy5fc2hvcnRDdXRNYW5hZ2VyLmlzU2hvcnRDdXRIaXQoYyk7CmlmKCFkKXtyZXR1cm47Cn1pZih0aGlzLmlzQWN0aXZlKCkpe3RoaXMuZmlyZShkLmdldF9uYW1lKCkpOwp9fSxfY2FuY2VsRXZlbnQ6ZnVuY3Rpb24oYyl7aWYoYyl7Yy5yZXR1cm5WYWx1ZT1mYWxzZTsKYy5jYW5jZWxCdWJibGU9dHJ1ZTsKYy5wcmV2ZW50RGVmYXVsdCgpOwpjLnN0b3BQcm9wYWdhdGlvbigpOwp9cmV0dXJuIGZhbHNlOwp9LF9nZXRXaW5kb3dDb250cm9sbGVyOmZ1bmN0aW9uKCl7cmV0dXJuIGIuUmFkV2luZG93Q29udHJvbGxlci5nZXRJbnN0YW5jZSgpOwp9LF9nZXRSZWxvYWRPblNob3dVcmw6ZnVuY3Rpb24oZCl7dmFyIGM9InJ3bmRybmQ9IitNYXRoLnJhbmRvbSgpOwppZihkLmluZGV4T2YoIj8iKT4tMSl7Yz0iJiIrYzsKfWVsc2V7Yz0iPyIrYzsKfXZhciBlPWQuaW5kZXhPZigiIyIpOwpkPShlPi0xKT9kLnN1YnN0cigwLGUpK2MrZC5zdWJzdHIoZSk6ZCtjOwpyZXR1cm4gZDsKfSxnZXRXaW5kb3dCb3VuZHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0Q2FsY3VsYXRlZFBvcHVwQm91bmRzKCk7Cn0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4iW1JhZFdpbmRvdyBpZD0iK3RoaXMuZ2V0X2lkKCkrIl0iOwp9LGNlbnRlcjpmdW5jdGlvbigpe3ZhciBjPXRoaXMuX2dldENlbnRyYWxCb3VuZHMoKTsKdGhpcy5tb3ZlVG8oYy54LGMueSk7Cn0sbW92ZVRvOmZ1bmN0aW9uKGgsZil7dmFyIGU9dGhpcy5fcG9wdXBFbGVtZW50OwppZih0aGlzLmlzVmlzaWJsZSgpKXt0aGlzLl9tYW5hZ2VWaXNpYmlsaXR5RmlyZWZveChmYWxzZSk7Cn1pZihlKXt2YXIgYz0kdGVsZXJpay5nZXRCb3VuZHMoZSk7CnZhciBnPXRoaXMuX2dldFJlc3RyaWN0aW9uWm9uZUJvdW5kcygpOwppZihnKXt2YXIgZD10aGlzLl9jaGVja1Jlc3RyaWN0aW9uWm9uZUJvdW5kcyhudWxsLG5ldyBTeXMuVUkuQm91bmRzKGgrZy54LGYrZy55LGMud2lkdGgsYy5oZWlnaHQpKTsKaWYoIWQpe3JldHVybiBmYWxzZTsKfX19aD1wYXJzZUludChoKTsKZj1wYXJzZUludChmKTsKdGhpcy5fY3JlYXRlVUkoKTsKdGhpcy5fc2V0UG9wdXBWaXNpYmxlKGgsZik7CnRoaXMuX3N0b3JlQm91bmRzKCk7CmlmKHRoaXMuaXNWaXNpYmxlKCkpe3RoaXMuX21hbmFnZVZpc2liaWxpdHlGaXJlZm94KHRydWUpOwp9cmV0dXJuIHRydWU7Cn0sc2V0U2l6ZTpmdW5jdGlvbihjLGQpe3RoaXMuX2ZpcnN0U2hvdz1mYWxzZTsKdGhpcy5zZXRfd2lkdGgoYyk7CnRoaXMuc2V0X2hlaWdodChkKTsKdGhpcy5fc3RvcmVCb3VuZHMoKTsKfSxfY2FsY3VsYXRlQm91bmRzVG9GaXQ6ZnVuY3Rpb24obyxxKXt2YXIgZT10aGlzLmdldF9taW5XaWR0aCgpLXRoaXMuX2dldEhhbmRsZXNXaWR0aCgpOwp2YXIgaj10aGlzLl9nZXRUaXRsZUVsZW1lbnQoKTsKaWYoail7ai5zdHlsZS53aWR0aD0iMXB4IjsKfXZhciBmOwp2YXIgbDsKby5zdHlsZS5oZWlnaHQ9IjFweCI7Cm8uc3R5bGUud2lkdGg9IjFweCI7CmlmKHRoaXMuX2RvY2tNb2RlKXt2YXIgcz1vLnNjcm9sbFdpZHRoOwpsPXM+ZT9zOmU7CmY9by5zY3JvbGxIZWlnaHQ7ClN5cy5VSS5Eb21FbGVtZW50LmFkZENzc0NsYXNzKHRoaXMuX2NvbnRlbnRDZWxsLCJyd0xvYWRpbmciKTsKfWVsc2V7bD1xLnNjcm9sbFdpZHRoOwppZihsPGUpe28uc3R5bGUud2lkdGg9ZSsicHgiOwpsPXEuc2Nyb2xsV2lkdGg7Cn1mPXEuc2Nyb2xsSGVpZ2h0Owp9dmFyIGk9dGhpcy5fZ2V0UmVzdHJpY3Rpb25ab25lQm91bmRzKCk7CnZhciB0PWk/aTp0aGlzLl9nZXRWaWV3cG9ydEJvdW5kcygpOwp2YXIgbT10aGlzLl9nZXRIYW5kbGVzV2lkdGgoKStsOwp2YXIgYz10aGlzLmdldF9kZWZhdWx0TWluSGVpZ2h0KCkrZjsKaWYodGhpcy5fZW5hYmxlU2hhZG93JiYkdGVsZXJpay5pc0lFJiYhJHRlbGVyaWsuaXNJRTYpe3ZhciBwPXBhcnNlSW50KHRoaXMuX3RhYmxlRWxlbWVudC5vZmZzZXRIZWlnaHQpLXBhcnNlSW50KHRoaXMuZ2V0X2hlaWdodCgpKTsKaWYocD4wKXtjLT1wOwp9fXZhciBkPU1hdGgubWluKG0sdC53aWR0aCk7CnZhciBrPU1hdGgubWluKGMsdC5oZWlnaHQpOwp2YXIgZz10aGlzLmdldF9taW5XaWR0aCgpOwp2YXIgaD10aGlzLmdldF9taW5IZWlnaHQoKTsKdmFyIG49cGFyc2VJbnQodGhpcy5nZXRfbWF4SGVpZ2h0KCkpOwp2YXIgcj1wYXJzZUludCh0aGlzLmdldF9tYXhXaWR0aCgpKTsKaWYoZz5kKXtkPWc7Cn1pZihoPmspe2s9aDsKfWlmKG4mJm48ayl7az1uOwp9aWYociYmcjxkKXtkPXI7Cn1yZXR1cm57d2lkdGg6ZCxoZWlnaHQ6ayxjb250ZW50UGFnZVdpZHRoOmwsY29udGVudFBhZ2VIZWlnaHQ6Zn07Cn0sX2F1dG9TaXplQmVoYXZpb3JCb3VuZHM6ZnVuY3Rpb24oZSxkKXt2YXIgaD10aGlzLl9nZXRSZXN0cmljdGlvblpvbmVCb3VuZHMoKTsKdmFyIGY9aD9oOnRoaXMuX2dldFZpZXdwb3J0Qm91bmRzKCk7CnZhciBnPWU7CmlmKGgpe2cueS09aC55OwpnLngtPWgueDsKfWlmKHRoaXMuaXNBdXRvU2l6ZUJlaGF2aW9yRW5hYmxlZChiLldpbmRvd0F1dG9TaXplQmVoYXZpb3JzLldpZHRoUHJvcG9ydGlvbmFsKSl7Zy54PXRoaXMuY2FsY1Bvc2l0aW9uKGUueCxlLndpZHRoLGQud2lkdGgsZi53aWR0aCxmYWxzZSk7Cmcud2lkdGg9ZC53aWR0aDsKfWVsc2V7aWYodGhpcy5pc0F1dG9TaXplQmVoYXZpb3JFbmFibGVkKGIuV2luZG93QXV0b1NpemVCZWhhdmlvcnMuV2lkdGgpKXtnLndpZHRoPWQud2lkdGg7Cn19aWYodGhpcy5pc0F1dG9TaXplQmVoYXZpb3JFbmFibGVkKGIuV2luZG93QXV0b1NpemVCZWhhdmlvcnMuSGVpZ2h0UHJvcG9ydGlvbmFsKSl7Zy55PXRoaXMuY2FsY1Bvc2l0aW9uKGUueSxlLmhlaWdodCxkLmhlaWdodCxmLmhlaWdodCx0cnVlKTsKZy5oZWlnaHQ9ZC5oZWlnaHQ7Cn1lbHNle2lmKHRoaXMuaXNBdXRvU2l6ZUJlaGF2aW9yRW5hYmxlZChiLldpbmRvd0F1dG9TaXplQmVoYXZpb3JzLkhlaWdodCkpe2cuaGVpZ2h0PWQuaGVpZ2h0Owp9fXZhciBpPTE3OwppZihnLmhlaWdodDxkLmNvbnRlbnRQYWdlSGVpZ2h0KXtnLndpZHRoPU1hdGgubWluKGcud2lkdGgraSxmLndpZHRoKTsKfWlmKGcud2lkdGg8ZC5jb250ZW50UGFnZVdpZHRoKXtnLmhlaWdodD1NYXRoLm1pbihnLmhlaWdodCtpLGYuaGVpZ2h0KTsKfWlmKCFoKXt0aGlzLnNldF9rZWVwSW5TY3JlZW5Cb3VuZHModHJ1ZSk7Cn1lbHNle2lmKGcud2lkdGg9PWgud2lkdGgpe2cueD0wOwp9aWYoZy5oZWlnaHQ9PWguaGVpZ2h0KXtnLnk9MDsKaWYodGhpcy5fZW5hYmxlU2hhZG93JiYkdGVsZXJpay5pc0lFJiYhJHRlbGVyaWsuaXNJRTYpe3ZhciBjPXBhcnNlSW50KHRoaXMuX3RhYmxlRWxlbWVudC5vZmZzZXRIZWlnaHQpLXBhcnNlSW50KHRoaXMuZ2V0X2hlaWdodCgpKTsKZy5oZWlnaHQtPWM7Cn19fXJldHVybiBnOwp9LGF1dG9TaXplOmZ1bmN0aW9uKGQpe2lmKHRoaXMuaXNDbG9zZWQoKXx8dGhpcy5pc01pbmltaXplZCgpfHx0aGlzLmlzTWF4aW1pemVkKCkpe3JldHVybjsKfXRoaXMuc2V0T3ZlcmZsb3dWaXNpYmxlKHRydWUpOwp0aGlzLl9hdXRvU2l6ZUluUHJvZ3Jlc3M9IXRoaXMuZ2V0X2F1dG9TaXplKCk7CnZhciBtPXRoaXMuZ2V0X2NvbnRlbnRGcmFtZSgpOwp2YXIgaj10aGlzLmdldF9wb3B1cEVsZW1lbnQoKTsKdmFyIGY9JHRlbGVyaWsuZ2V0Qm91bmRzKGopOwp2YXIgZz0kdGVsZXJpay5nZXRCb3JkZXJCb3goaik7CmYud2lkdGgtPWcuaG9yaXpvbnRhbDsKZi5oZWlnaHQtPWcudmVydGljYWw7CnZhciBrPW51bGw7CnZhciBsPXRoaXMuZ2V0X2tlZXBJblNjcmVlbkJvdW5kcygpOwp2YXIgaD10aGlzLmdldF9jb250ZW50RWxlbWVudCgpOwppZighdGhpcy5fZG9ja01vZGUpe3RyeXtrPW0uY29udGVudFdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7CmlmKCFrKXtyZXR1cm47Cn19Y2F0Y2goYyl7cmV0dXJuIGZhbHNlOwp9aD1rOwppZigkdGVsZXJpay5pc0lFfHwkdGVsZXJpay5pc0ZpcmVmb3gpe2g9bTsKfX12YXIgZT10aGlzLl9jYWxjdWxhdGVCb3VuZHNUb0ZpdChoLGspOwp2YXIgaT10aGlzLl9hdXRvU2l6ZUJlaGF2aW9yQm91bmRzKGYsZSk7Cmkud2lkdGgrPWcuaG9yaXpvbnRhbDsKaS5oZWlnaHQrPWcudmVydGljYWw7CnRoaXMuc2V0T3ZlcmZsb3dWaXNpYmxlKGZhbHNlKTsKaWYoZCl7dGhpcy5fYXV0b1NpemVXaXRoQW5pbWF0aW9uKGkpOwp9ZWxzZXt0aGlzLl9yZXN0b3JlUmVjdD1udWxsOwp0aGlzLnNldEJvdW5kcyhpKTsKdGhpcy5zZXRPdmVyZmxvd1Zpc2libGUodHJ1ZSk7ClN5cy5VSS5Eb21FbGVtZW50LnJlbW92ZUNzc0NsYXNzKHRoaXMuX2NvbnRlbnRDZWxsLCJyd0xvYWRpbmciKTsKdGhpcy5yYWlzZUV2ZW50KCJhdXRvU2l6ZUVuZCIsbmV3IFN5cy5FdmVudEFyZ3MoKSk7Cn1pZigkdGVsZXJpay5pc0lFJiZtKXttLnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iOwpzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bS5zdHlsZS5vdmVyZmxvdz0iIjsKfSwwKTsKfXRoaXMuc2V0X2tlZXBJblNjcmVlbkJvdW5kcyhsKTsKaWYobSl7aC5zdHlsZS53aWR0aD0iMTAwJSI7Cmguc3R5bGUuaGVpZ2h0PSIxMDAlIjsKaWYoJHRlbGVyaWsuaXNJRTlNb2RlKXt0aGlzLnNldF9oZWlnaHQodGhpcy5nZXRfaGVpZ2h0KCkpOwp9fXJldHVybiB0cnVlOwp9LF9hdXRvU2l6ZVdpdGhBbmltYXRpb246ZnVuY3Rpb24oYyl7dmFyIGc9dGhpcy5nZXRfcG9wdXBFbGVtZW50KCk7CmlmKHRoaXMuX2VuYWJsZVNoYWRvdyYmJHRlbGVyaWsuaXNJRSl7dGhpcy5fc2V0U2hhZG93Q1NTQ2xhc3MoZmFsc2UpOwp9dmFyIGQ9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyxmdW5jdGlvbigpe2lmKHRoaXMuaXNDbG9zZWQoKSl7cmV0dXJuOwp9dmFyIGg9dGhpcy5nZXRfcG9wdXBFbGVtZW50KCk7Cmguc3R5bGUuZmlsdGVyPSIiOwppZigkdGVsZXJpay5pc0lFNyl7aC5zdHlsZS5yZW1vdmVBdHRyaWJ1dGUoImZpbHRlciIpOwp9aC5zdHlsZS5vcGFjaXR5PSIiOwp0aGlzLl9yZXN0b3JlUmVjdD1udWxsOwp0aGlzLnNldEJvdW5kcyhjKTsKdGhpcy5zZXRPdmVyZmxvd1Zpc2libGUodHJ1ZSk7ClN5cy5VSS5Eb21FbGVtZW50LnJlbW92ZUNzc0NsYXNzKHRoaXMuX2NvbnRlbnRDZWxsLCJyd0xvYWRpbmciKTsKaWYodGhpcy5fZW5hYmxlU2hhZG93JiYkdGVsZXJpay5pc0lFJiYhJHRlbGVyaWsuaXNJRTYpe3RoaXMuX3NldFNoYWRvd0NTU0NsYXNzKHRydWUpOwp9dGhpcy5yYWlzZUV2ZW50KCJhdXRvU2l6ZUVuZCIsbmV3IFN5cy5FdmVudEFyZ3MoKSk7Cn0pOwp0aGlzLl90YWJsZUVsZW1lbnQuc3R5bGUuaGVpZ2h0PSIxMDAlIjsKdmFyIGU9e3dpZHRoOmMud2lkdGgsaGVpZ2h0OmMuaGVpZ2h0LHg6Yy54LHk6Yy55fTsKdmFyIGY9dGhpcy5fZ2V0UmVzdHJpY3Rpb25ab25lQm91bmRzKCk7CmlmKGYpe2UueCs9Zi54OwplLnkrPWYueTsKfSR0ZWxlcmlrLiQoZykuYW5pbWF0ZSh7d2lkdGg6ZS53aWR0aCxoZWlnaHQ6ZS5oZWlnaHQsbGVmdDplLngsdG9wOmUueSxvcGFjaXR5OjF9LDMwMCxudWxsLGQpOwp9LHNldEJvdW5kczpmdW5jdGlvbihjKXtpZighYyl7cmV0dXJuOwp9dGhpcy5fY2hlY2tSZXN0cmljdGlvblpvbmVCb3VuZHM9ZnVuY3Rpb24oKXtyZXR1cm4gdHJ1ZTsKfTsKdGhpcy5tb3ZlVG8oYy54LGMueSk7CnRoaXMuc2V0U2l6ZShjLndpZHRoLGMuaGVpZ2h0KTsKdGhpcy5fY2hlY2tSZXN0cmljdGlvblpvbmVCb3VuZHM9Yi5SYWRXaW5kb3cucHJvdG90eXBlLl9jaGVja1Jlc3RyaWN0aW9uWm9uZUJvdW5kczsKfSxfc3Vic3RyYWN0V3JhcHBlcnNCb3JkZXI6ZnVuY3Rpb24oZixlKXt2YXIgaD10aGlzLmdldF9wb3B1cEVsZW1lbnQoKTsKdmFyIGM9dGhpcy5fY29udGVudENlbGw7CmlmKCFofHwhYyl7cmV0dXJuIGY7Cn12YXIgZz0kdGVsZXJpay5nZXRCb3JkZXJCb3goaCk7CnZhciBkPSR0ZWxlcmlrLmdldEJvcmRlckJveChjKTsKZi09ZT8oZy5ob3Jpem9udGFsK2QuaHJpem9udGFsKTooZy52ZXJ0aWNhbCtkLnZlcnRpY2FsKTsKcmV0dXJuIGY7Cn0sc2V0V2lkdGhEb2NrTW9kZTpmdW5jdGlvbihjKXtpZighdGhpcy5fZG9ja01vZGV8fCF0aGlzLmdldF9jb250ZW50RWxlbWVudCgpKXtyZXR1cm47Cn13aWR0aFRvU2V0PXRoaXMuX3N1YnN0cmFjdFdyYXBwZXJzQm9yZGVyKGMpLXRoaXMuX2dldEhhbmRsZXNXaWR0aCgpOwppZih3aWR0aFRvU2V0PjApe3RoaXMuX2NvbnRlbnRFbGVtZW50LnN0eWxlLndpZHRoPXdpZHRoVG9TZXQrInB4IjsKfX0sc2V0SGVpZ2h0RG9ja01vZGU6ZnVuY3Rpb24oZCl7dmFyIGM9dGhpcy5nZXRfY29udGVudEVsZW1lbnQoKTsKaWYoIXRoaXMuX2RvY2tNb2RlfHwhYyl7cmV0dXJuOwp9dGhpcy5zZXRDb250ZW50Rml4ZWRIZWlnaHQoZCxjKTsKfSxzZXRDb250ZW50Rml4ZWRIZWlnaHQ6ZnVuY3Rpb24oaCxjKXtpZighYyl7cmV0dXJuOwp9dmFyIGc9dGhpcy5fc3Vic3RyYWN0V3JhcHBlcnNCb3JkZXIoaCk7CnZhciBmPXRoaXMuaXNWaXNpYmxlKCk7CnZhciBkPXRoaXMuX3RhYmxlRWxlbWVudC5yb3dzWzNdLmNlbGxzWzFdOwp2YXIgZT10aGlzLl90YWJsZUVsZW1lbnQucm93c1swXS5jZWxsc1sxXTsKdmFyIGk9dGhpcy5fdGFibGVFbGVtZW50LnJvd3NbMl0uY2VsbHNbMV07CmctPWY/cGFyc2VJbnQoJHRlbGVyaWsuZ2V0Qm91bmRzKGQpLmhlaWdodCk6cGFyc2VJbnQoJHRlbGVyaWsuZ2V0Q3VycmVudFN0eWxlKGQsImhlaWdodCIpKTsKaWYodGhpcy5fdmlzaWJsZVRpdGxlYmFyKXtnLT1mP3BhcnNlSW50KCR0ZWxlcmlrLmdldEJvdW5kcyh0aGlzLl90aXRsZWJhckVsZW1lbnQpLmhlaWdodCk6cGFyc2VJbnQoJHRlbGVyaWsuZ2V0Q3VycmVudFN0eWxlKHRoaXMuX3RpdGxlYmFyRWxlbWVudCwiaGVpZ2h0IikpOwpnLT1mP3BhcnNlSW50KCR0ZWxlcmlrLmdldEJvdW5kcyh0aGlzLl90b3BSZXNpemVyKS5oZWlnaHQpOnBhcnNlSW50KCR0ZWxlcmlrLmdldEN1cnJlbnRTdHlsZSh0aGlzLl90b3BSZXNpemVyLCJoZWlnaHQiKSk7Cn1lbHNle2ctPWY/cGFyc2VJbnQoJHRlbGVyaWsuZ2V0Qm91bmRzKGUpLmhlaWdodCk6cGFyc2VJbnQoJHRlbGVyaWsuZ2V0Q3VycmVudFN0eWxlKGUsImhlaWdodCIpKTsKfWlmKHRoaXMuX3Zpc2libGVTdGF0dXNiYXIpe2ctPWY/cGFyc2VJbnQoJHRlbGVyaWsuZ2V0Qm91bmRzKGkpLmhlaWdodCk6cGFyc2VJbnQoJHRlbGVyaWsuZ2V0Q3VycmVudFN0eWxlKGksImhlaWdodCIpKTsKfWlmKGc+MCl7Yy5zdHlsZS5oZWlnaHQ9ZysicHgiOwp9fSxjYWxjUG9zaXRpb246ZnVuY3Rpb24oaSxkLGgsZixjKXt2YXIgZz1pK01hdGgucm91bmQoKGQtaCkvMik7CmlmKGc8MHx8ZytkPmYpe2c9TWF0aC5yb3VuZChNYXRoLmFicygoZi1oKS8yKSk7CmlmKHRoaXMuaXNBdXRvU2l6ZUJlaGF2aW9yRW5hYmxlZChiLldpbmRvd0F1dG9TaXplQmVoYXZpb3JzLkRlZmF1bHQpKXt2YXIgZT10aGlzLl9kb2NrTW9kZT93aW5kb3c6dGhpcy5Ccm93c2VyV2luZG93OwpnKz1jP01hdGgubWF4KGUuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCxlLmRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wKTpNYXRoLm1heChlLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0LGUuZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0KTsKfX1yZXR1cm4gZzsKfSxfbWFpbnRhaW5NYXhpbWl6ZWRTaXplOmZ1bmN0aW9uKCl7aWYodGhpcy5pc1Zpc2libGUoKSYmdGhpcy5fZ2V0UmVzdHJpY3Rpb25ab25lQm91bmRzKCkpe3RoaXMuX3JlU2V0V2luZG93UG9zaXRpb24oKTsKfWlmKCF0aGlzLmlzTWF4aW1pemVkKCkpe3JldHVybjsKfXZhciBqPXRoaXMuX3BvcHVwRWxlbWVudDsKaWYoIWope3JldHVybjsKfXZhciBmPXRoaXMuX2dldFZpZXdwb3J0Qm91bmRzKCk7Cmouc3R5bGUudG9wPShmLnNjcm9sbFRvcCtmLnkpKyJweCI7Cmouc3R5bGUubGVmdD0oZi5zY3JvbGxMZWZ0K2YueCkrInB4IjsKdmFyIGk9cGFyc2VJbnQodGhpcy5nZXRfbWF4V2lkdGgoKSk7CnZhciBoPXBhcnNlSW50KHRoaXMuZ2V0X21heEhlaWdodCgpKTsKaWYoaSl7Zi53aWR0aD1pOwp9aWYoaCl7Zi5oZWlnaHQ9aDsKfSR0ZWxlcmlrLnNldFNpemUoaix7d2lkdGg6Zi53aWR0aCxoZWlnaHQ6Zi5oZWlnaHR9KTsKdmFyIGs9dGhpcy5fZ2V0UmVzdHJpY3Rpb25ab25lQm91bmRzKCk7CmlmKCFrKXt0aGlzLl9lbmFibGVQYWdlU2Nyb2xsaW5nKGZhbHNlKTsKfXZhciBnPXRoaXMuX3RhYmxlRWxlbWVudDsKZj0kdGVsZXJpay5nZXRDb250ZW50U2l6ZShqKTsKdmFyIGU9JHRlbGVyaWsuZ2V0Qm9yZGVyQm94KGcpOwp2YXIgYz0kdGVsZXJpay5nZXRQYWRkaW5nQm94KGcpOwp2YXIgZD1mLmhlaWdodC1lLnZlcnRpY2FsLWMudmVydGljYWw7Cmcuc3R5bGUuaGVpZ2h0PWQrInB4IjsKdGhpcy5fZml4SWVIZWlnaHQoZyxkKTsKaWYodGhpcy5fZG9ja01vZGUpe3RoaXMuc2V0V2lkdGhEb2NrTW9kZShmLndpZHRoKTsKdGhpcy5zZXRIZWlnaHREb2NrTW9kZShmLmhlaWdodCk7Cn10aGlzLl91cGRhdGVUaXRsZVdpZHRoKCk7CmlmKHRoaXMuX2lzaU9TNVNhZmFyaSl7dGhpcy5zZXRDb250ZW50Rml4ZWRIZWlnaHQoZi5oZWlnaHQsdGhpcy5faWZyYW1lV3JhcHBlcik7Cn19LF9lbmFibGVQYWdlU2Nyb2xsaW5nOmZ1bmN0aW9uKGUpe3ZhciBkPWRvY3VtZW50LmJvZHk7CnZhciBjPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudDsKaWYoZSl7aWYobnVsbCE9dGhpcy5fZG9jdW1lbnRPdmVyZmxvdyl7Yy5zdHlsZS5vdmVyZmxvdz10aGlzLl9kb2N1bWVudE92ZXJmbG93Owp9aWYobnVsbCE9dGhpcy5fYm9keU92ZXJmbG93KXtkLnN0eWxlLm92ZXJmbG93PXRoaXMuX2JvZHlPdmVyZmxvdzsKfXRoaXMuX2RvY3VtZW50T3ZlcmZsb3c9bnVsbDsKdGhpcy5fYm9keU92ZXJmbG93PW51bGw7Cn1lbHNle2lmKG51bGw9PXRoaXMuX2RvY3VtZW50T3ZlcmZsb3cpe3RoaXMuX2RvY3VtZW50T3ZlcmZsb3c9Yy5zdHlsZS5vdmVyZmxvdzsKfWlmKG51bGw9PXRoaXMuX2JvZHlPdmVyZmxvdyl7dGhpcy5fYm9keU92ZXJmbG93PWQuc3R5bGUub3ZlcmZsb3c7Cn1kLnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iOwpjLnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iOwp9fSxfZ2V0UmVzdHJpY3Rpb25ab25lQm91bmRzOmZ1bmN0aW9uKCl7dmFyIGM9bnVsbDsKaWYodGhpcy5nZXRfcmVzdHJpY3Rpb25ab25lSUQoKSl7dmFyIGQ9JGdldCh0aGlzLmdldF9yZXN0cmljdGlvblpvbmVJRCgpKTsKaWYoZCl7Yz0kdGVsZXJpay5nZXRCb3VuZHMoZCk7CmMuc2Nyb2xsTGVmdD0wOwpjLnNjcm9sbFRvcD0wOwp9fXJldHVybiBjOwp9LF9zdG9yZUJvdW5kczpmdW5jdGlvbigpe2lmKCF0aGlzLmlzQ3JlYXRlZCgpKXtyZXR1cm47Cn12YXIgYz10aGlzLl9nZXRDdXJyZW50Qm91bmRzKCk7CmlmKHRoaXMuaXNNYXhpbWl6ZWQoKSl7cmV0dXJuIGZhbHNlOwp9aWYodGhpcy5pc01pbmltaXplZCgpKXtpZih0aGlzLl9yZXN0b3JlUmVjdCl7Yy53aWR0aD10aGlzLl9yZXN0b3JlUmVjdC53aWR0aDsKYy5oZWlnaHQ9dGhpcy5fcmVzdG9yZVJlY3QuaGVpZ2h0Owp9ZWxzZXtjLndpZHRoPXRoaXMuZ2V0X3dpZHRoKCk7CmMuaGVpZ2h0PXRoaXMuZ2V0X2hlaWdodCgpOwp9fXRoaXMuX3Jlc3RvcmVSZWN0PWM7Cn0sX3Jlc3RvcmVCb3VuZHM6ZnVuY3Rpb24oKXtpZighdGhpcy5fcmVzdG9yZVJlY3Qpe3JldHVybjsKfXZhciBjPXRoaXMuX3Jlc3RvcmVSZWN0Owp0aGlzLnNldFNpemUoYy53aWR0aCxjLmhlaWdodCk7CnRoaXMubW92ZVRvKGMueCxjLnkpOwp9LF9nZXRTdG9yZWRCb3VuZHM6ZnVuY3Rpb24oKXtpZih0aGlzLl9yZXN0b3JlUmVjdCl7cmV0dXJuIHRoaXMuX3Jlc3RvcmVSZWN0Owp9fSxfZGVsZXRlU3RvcmVkQm91bmRzOmZ1bmN0aW9uKCl7dGhpcy5fcmVzdG9yZVJlY3Q9bnVsbDsKfSxfZ2V0Q3VycmVudEJvdW5kczpmdW5jdGlvbigpe3ZhciBjPSh0aGlzLl9wb3B1cEVsZW1lbnQuc3R5bGUuZGlzcGxheT09Im5vbmUiKT90cnVlOmZhbHNlOwp0aGlzLl9wb3B1cEVsZW1lbnQuc3R5bGUuZGlzcGxheT0iIjsKaWYodGhpcy5fZmlyc3RTaG93IT10cnVlKXt0aGlzLl91cGRhdGVXaW5kb3dTaXplKHRoaXMuX2hlaWdodCk7CnRoaXMuX2ZpcnN0U2hvdz10cnVlOwp9dmFyIGU9JHRlbGVyaWsuZ2V0Qm91bmRzKHRoaXMuX3BvcHVwRWxlbWVudCk7CmlmKGMpe3RoaXMuX3BvcHVwRWxlbWVudC5zdHlsZS5kaXNwbGF5PSJub25lIjsKfXZhciBkPXRoaXMuX2dldFJlc3RyaWN0aW9uWm9uZUJvdW5kcygpOwppZihkKXtlLngtPWQueDsKZS55LT1kLnk7Cn1yZXR1cm4gZTsKfSxfZ2V0Q2VudHJhbEJvdW5kczpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX2dldEN1cnJlbnRCb3VuZHMoKTsKdmFyIGY9dGhpcy5fZ2V0Vmlld3BvcnRCb3VuZHMoKTsKdmFyIGM9cGFyc2VJbnQoKGYud2lkdGgtZS53aWR0aCkvMik7CnZhciBkPXBhcnNlSW50KChmLmhlaWdodC1lLmhlaWdodCkvMik7CmUueD1jK2Yuc2Nyb2xsTGVmdDsKZS55PWQrZi5zY3JvbGxUb3A7CnJldHVybiBlOwp9LF9nZXRWaWV3cG9ydEJvdW5kczpmdW5jdGlvbigpe3ZhciBkPXRoaXMuX2dldFJlc3RyaWN0aW9uWm9uZUJvdW5kcygpOwppZihkKXtyZXR1cm4gZDsKfXZhciBlPSR0ZWxlcmlrLmdldENsaWVudEJvdW5kcygpOwp2YXIgZj0kdGVsZXJpay5nZXRDb3JyZWN0U2Nyb2xsTGVmdChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpfHwkdGVsZXJpay5nZXRDb3JyZWN0U2Nyb2xsTGVmdChkb2N1bWVudC5ib2R5KTsKdmFyIGM9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcHx8ZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7CmUuc2Nyb2xsTGVmdD1mOwplLnNjcm9sbFRvcD1jOwppZih0aGlzLmlzSUUpe2lmKGUud2lkdGg9PTApe2Uud2lkdGg9ZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aDsKfWlmKGUuaGVpZ2h0PT0wKXtlLmhlaWdodD1kb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodDsKfX1yZXR1cm4gZTsKfSxfZ2V0Q2FsY3VsYXRlZFBvcHVwQm91bmRzOmZ1bmN0aW9uKCl7dmFyIGY9dGhpcy5fZ2V0U3RvcmVkQm91bmRzKCk7CmlmKGYpe3JldHVybiBmOwp9dmFyIGQ9dGhpcy5fZ2V0Q3VycmVudEJvdW5kcygpOwp2YXIgZT10aGlzLl9vZmZzZXRFbGVtZW50OwppZih0aGlzLl90b3A9PW51bGwmJnRoaXMuX2xlZnQ9PW51bGwmJiFlKXtkPXRoaXMuX2dldENlbnRyYWxCb3VuZHMoKTsKfWVsc2V7aWYoZSl7ZC55PTA7CmQueD0wOwp9ZWxzZXt2YXIgZz10aGlzLl9nZXRWaWV3cG9ydEJvdW5kcygpOwpkLng9Zy5zY3JvbGxMZWZ0OwpkLnk9Zy5zY3JvbGxUb3A7Cn12YXIgYz10aGlzLl9sZWZ0P3RoaXMuX2xlZnQ6MDsKZC54Kz1jOwp2YXIgaD10aGlzLl90b3A/dGhpcy5fdG9wOjA7CmQueSs9aDsKfXJldHVybiBkOwp9LF9jaGVja1Jlc3RyaWN0aW9uWm9uZUJvdW5kczpmdW5jdGlvbihjLGQpe3ZhciBlPWM7CmlmKCFlKXtlPXRoaXMuX2dldFJlc3RyaWN0aW9uWm9uZUJvdW5kcygpOwppZighZSl7cmV0dXJuIHRydWU7Cn19cmV0dXJuIGIuUmVzaXplRXh0ZW5kZXIuY29udGFpbnNCb3VuZHMoZSxkKTsKfSxfcmVTZXRXaW5kb3dQb3NpdGlvbjpmdW5jdGlvbigpe3ZhciBjPXRoaXMuX2dldENhbGN1bGF0ZWRQb3B1cEJvdW5kcygpOwp0aGlzLl9zZXRQb3B1cFZpc2libGUoYy54LGMueSk7Cn0sX2ZpeEllSGVpZ2h0OmZ1bmN0aW9uKGUsYyl7aWYoIkNTUzFDb21wYXQiPT1kb2N1bWVudC5jb21wYXRNb2RlKXt2YXIgZj0oZS5vZmZzZXRIZWlnaHQtcGFyc2VJbnQoYykpOwppZihmPjApe3ZhciBkPShwYXJzZUludChlLnN0eWxlLmhlaWdodCktZik7CmlmKGQ+MCl7ZS5zdHlsZS5oZWlnaHQ9ZCsicHgiOwp9fX19LF9zZXRQb3B1cFZpc2libGU6ZnVuY3Rpb24oYyxkKXt2YXIgZT10aGlzLl9nZXRSZXN0cmljdGlvblpvbmVCb3VuZHMoKTsKaWYoZSl7Yys9ZS54OwpkKz1lLnk7Cn10aGlzLl9wb3B1cEJlaGF2aW9yLl9zZXRDb29yZGluYXRlcyhjLGQpOwp0aGlzLl9wb3B1cEJlaGF2aW9yLnNob3coKTsKaWYoIXRoaXMuZ2V0X3dpZHRoKCkpe3RoaXMuX3BvcHVwRWxlbWVudC5zdHlsZS53aWR0aD0iIjsKfXRoaXMuX3VwZGF0ZVRpdGxlV2lkdGgoKTsKfSxfY3JlYXRlRGVmYXVsdFRhYmxlOmZ1bmN0aW9uKCl7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGFibGUiKTsKYy5hbGlnbj0ibGVmdCI7CmMuY2VsbFNwYWNpbmc9MDsKYy5jZWxsUGFkZGluZz0wOwpjLmluc2VydFJvdygtMSk7CnJldHVybiBjOwp9LF9pc1dpbmRvd1JpZ2h0VG9MZWZ0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5faXNSaWdodFRvTGVmdDsKaWYoZT09bnVsbCl7dmFyIGM9dGhpcy5nZXRfZWxlbWVudCgpOwp2YXIgZD1jLnBhcmVudE5vZGU/Yzp0aGlzLl9nZXREZWZhdWx0UGFyZW50KCk7CmU9dGhpcy5faXNSaWdodFRvTGVmdD0kdGVsZXJpay5pc1JpZ2h0VG9MZWZ0KGQpOwp9cmV0dXJuIGU7Cn0sX2NyZWF0ZVN0YXR1c2JhclJlc2l6ZXI6ZnVuY3Rpb24oYyl7dmFyIGQ9Yy5yb3dzWzBdLmluc2VydENlbGwoLTEpOwpkLnN0eWxlLndpZHRoPSIxNXB4IjsKdmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CmQuYXBwZW5kQ2hpbGQoZSk7CnRoaXMuX2JvdHRvbVJlc2l6ZXI9ZTsKfSxfY3JlYXRlU3RhdHVzYmFyTWVzc2FnZUNlbGw6ZnVuY3Rpb24oYyl7dmFyIGU9Yy5yb3dzWzBdLmluc2VydENlbGwoLTEpOwplLnN0eWxlLndpZHRoPSIxMDAlIjsKdmFyIGY9dGhpcy5fZ2V0U3RhdHVzTWVzc2FnZUVsZW1lbnQoKTsKZS5hcHBlbmRDaGlsZChmKTsKdmFyIGQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTsKZC5zZXRBdHRyaWJ1dGUoImZvciIsZi5pZCk7CmQuaW5uZXJIVE1MPSJzdGF0dXMgbGFiZWwiOwpkLnN0eWxlLmRpc3BsYXk9Im5vbmUiOwplLmFwcGVuZENoaWxkKGQpOwp9LF9jcmVhdGVVSTpmdW5jdGlvbigpe2lmKCF0aGlzLl9wb3B1cEVsZW1lbnQpe3ZhciBEPXRoaXMuZ2V0X2lkKCk7CnZhciBsPSJSYWRXaW5kb3dXcmFwcGVyXyIrRDsKdmFyIG09dGhpcy5faXNXaW5kb3dSaWdodFRvTGVmdCgpOwp2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKYy5pZD1sOwpjLmNsYXNzTmFtZT10aGlzLl9nZXRGdWxsU2tpbk5hbWUoKTsKdmFyIHU9dGhpcy5nZXRfY3NzQ2xhc3MoKTsKaWYodSl7U3lzLlVJLkRvbUVsZW1lbnQuYWRkQ3NzQ2xhc3MoYyx1KTsKfWlmKG0pe1N5cy5VSS5Eb21FbGVtZW50LmFkZENzc0NsYXNzKGMsIlJhZFdpbmRvd19ydGwiKTsKfWlmKCF0aGlzLl92aXNpYmxlVGl0bGViYXIpe1N5cy5VSS5Eb21FbGVtZW50LmFkZENzc0NsYXNzKGMsInJ3Tm9UaXRsZUJhciIpOwp9Yy5zdHlsZS53aWR0aD10aGlzLl93aWR0aDsKYy5zdHlsZS5oZWlnaHQ9dGhpcy5faGVpZ2h0OwpjLnNldEF0dHJpYnV0ZSgidW5zZWxlY3RhYmxlIiwib24iKTsKdGhpcy5fcG9wdXBFbGVtZW50PWM7CnZhciBoPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRhYmxlIik7CmguY2VsbFNwYWNpbmc9MDsKaC5jZWxsUGFkZGluZz0wOwpTeXMuVUkuRG9tRWxlbWVudC5hZGRDc3NDbGFzcyhoLCJyd1RhYmxlIik7CnRoaXMuX3RhYmxlRWxlbWVudD1oOwp2YXIgeD1bXTsKaWYobSl7eD1bInJ3Q29ybmVyIHJ3VG9wUmlnaHQiLCJyd1RpdGxlYmFyIiwicndDb3JuZXIgcndUb3BMZWZ0IiwicndDb3JuZXIgcndCb2R5UmlnaHQiLCJyd1dpbmRvd0NvbnRlbnQiLCJyd0Nvcm5lciByd0JvZHlMZWZ0IiwicndDb3JuZXIgcndCb2R5UmlnaHQiLCJyd1N0YXR1c2JhciIsInJ3Q29ybmVyIHJ3Qm9keUxlZnQiLCJyd0Nvcm5lciByd0Zvb3RlclJpZ2h0IiwicndGb290ZXJDZW50ZXIiLCJyd0Nvcm5lciByd0Zvb3RlckxlZnQiXTsKfWVsc2V7eD1bInJ3Q29ybmVyIHJ3VG9wTGVmdCIsInJ3VGl0bGViYXIiLCJyd0Nvcm5lciByd1RvcFJpZ2h0IiwicndDb3JuZXIgcndCb2R5TGVmdCIsInJ3V2luZG93Q29udGVudCIsInJ3Q29ybmVyIHJ3Qm9keVJpZ2h0IiwicndDb3JuZXIgcndCb2R5TGVmdCIsInJ3U3RhdHVzYmFyIiwicndDb3JuZXIgcndCb2R5UmlnaHQiLCJyd0Nvcm5lciByd0Zvb3RlckxlZnQiLCJyd0Zvb3RlckNlbnRlciIsInJ3Q29ybmVyIHJ3Rm9vdGVyUmlnaHQiXTsKfXZhciBDPVsicndUaXRsZVJvdyIsInJ3Q29udGVudFJvdyIsInJ3U3RhdHVzYmFyUm93IiwicndGb290ZXJSb3ciXTsKdmFyIGc9MDsKZm9yKHZhciBzPTA7CnM8NDsKcysrKXt2YXIgQj1oLmluc2VydFJvdygtMSk7CkIuY2xhc3NOYW1lPUNbc107CmZvcih2YXIgcT0xOwpxPD0zOwpxKyspe3ZhciBkPUIuaW5zZXJ0Q2VsbCgtMSk7CmQuaW5uZXJIVE1MPSImbmJzcDsiOwpkLmNsYXNzTmFtZT14W2ddOwpnKys7Cn19dmFyIGU9aC5yb3dzWzBdLmNlbGxzWzFdOwplLmlubmVySFRNTD0iIjsKdGhpcy5fdGl0bGVDZWxsPWU7CnZhciBBPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwpBLmNsYXNzTmFtZT0icndUb3BSZXNpemUiOwpBLmlubmVySFRNTD0iPCEtLSAvIC0tPiI7CnRoaXMuX3RvcFJlc2l6ZXI9QTsKdGhpcy5fdGl0bGVDZWxsLmFwcGVuZENoaWxkKHRoaXMuX3RvcFJlc2l6ZXIpOwp2YXIgdj10aGlzLl9jcmVhdGVEZWZhdWx0VGFibGUoKTsKdi5jbGFzc05hbWU9InJ3VGl0bGViYXJDb250cm9scyI7CnRoaXMuX3RpdGxlYmFyRWxlbWVudD12Owp0aGlzLl90aXRsZUNlbGwuYXBwZW5kQ2hpbGQodGhpcy5fdGl0bGViYXJFbGVtZW50KTsKdmFyIHA9dGhpcy5fZ2V0VGl0bGVJY29uKCk7CnZhciBvPXRoaXMuX3RpdGxlYmFyRWxlbWVudC5yb3dzWzBdLmluc2VydENlbGwoLTEpOwpvLmFwcGVuZENoaWxkKHApOwp0aGlzLnNldF9pY29uVXJsKHRoaXMuZ2V0X2ljb25VcmwoKSk7CnZhciByPXRoaXMuX2dldFRpdGxlRWxlbWVudCgpOwp2YXIgeT10aGlzLl90aXRsZWJhckVsZW1lbnQucm93c1swXS5pbnNlcnRDZWxsKC0xKTsKeS5hcHBlbmRDaGlsZChyKTsKdGhpcy5zZXRfdGl0bGUodGhpcy5fdGl0bGUpOwp2YXIgej10aGlzLl90aXRsZWJhckVsZW1lbnQucm93c1swXS5pbnNlcnRDZWxsKC0xKTsKei5ub1dyYXA9dHJ1ZTsKei5zdHlsZS53aGl0ZVNwYWNlPSJub3dyYXAiOwp6LmFwcGVuZENoaWxkKHRoaXMuX2dldFRpdGxlQ29tbWFuZEJ1dHRvbnNIb2xkZXIoKSk7CnZhciB3PWgucm93c1sxXS5jZWxsc1sxXTsKdy52QWxpZ249InRvcCI7CncuaW5uZXJIVE1MPSIiOwp0aGlzLl9jb250ZW50Q2VsbD13OwppZighKHRoaXMuX2RvY2tNb2RlfHx0aGlzLl9pc1ByZWRlZmluZWQpKXtTeXMuVUkuRG9tRWxlbWVudC5hZGRDc3NDbGFzcyh0aGlzLl9jb250ZW50Q2VsbCwicndFeHRlcm5hbENvbnRlbnQiKTsKfWlmKHRoaXMuX2VuYWJsZVNoYWRvdyYmISR0ZWxlcmlrLmlzSUU2KXt0aGlzLl9zZXRTaGFkb3dDU1NDbGFzcyh0cnVlKTsKfXZhciBmPXRoaXMuZ2V0X25hbWUoKTsKdmFyIEU9dGhpcy5fY3JlYXRlRGVmYXVsdFRhYmxlKCk7CkUuc3R5bGUud2lkdGg9IjEwMCUiOwp0aGlzLl9zdGF0dXNDZWxsPWgucm93c1syXS5jZWxsc1sxXTsKdGhpcy5fc3RhdHVzQ2VsbC5pbm5lckhUTUw9IiI7CnRoaXMuX3N0YXR1c0NlbGwuYXBwZW5kQ2hpbGQoRSk7CmlmKCFtKXt0aGlzLl9jcmVhdGVTdGF0dXNiYXJNZXNzYWdlQ2VsbChFKTsKfWlmKHRoaXMuaXNCZWhhdmlvckVuYWJsZWQoYi5XaW5kb3dCZWhhdmlvcnMuUmVzaXplKSl7dGhpcy5fY3JlYXRlU3RhdHVzYmFyUmVzaXplcihFKTsKfWlmKG0pe3RoaXMuX2NyZWF0ZVN0YXR1c2Jhck1lc3NhZ2VDZWxsKEUpOwp9dGhpcy5fcG9wdXBFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX3RhYmxlRWxlbWVudCk7CnRoaXMuX3BvcHVwRWxlbWVudC5zdHlsZS5kaXNwbGF5PSJub25lIjsKdGhpcy5fcG9wdXBFbGVtZW50LnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSI7CnRoaXMuX2FkZFdpbmRvd1RvRG9jdW1lbnQoKTsKdGhpcy5fcmVnaXN0ZXJUaXRsZWJhckhhbmRsZXJzKHRydWUpOwp0aGlzLnNldF92aXNpYmxlVGl0bGViYXIodGhpcy5fdmlzaWJsZVRpdGxlYmFyKTsKdGhpcy5zZXRfdmlzaWJsZVN0YXR1c2Jhcih0aGlzLl92aXNpYmxlU3RhdHVzYmFyKTsKaWYodGhpcy5nZXRfZW5hYmxlQXJpYVN1cHBvcnQoKSl7dGhpcy5fYXBwbHlBcmlhU3VwcG9ydCgpOwp9aWYodGhpcy5fZG9ja01vZGUpe3ZhciBrPSRnZXQodGhpcy5nZXRfaWQoKSsiX0MiKTsKaWYoayYmay5pbm5lckhUTUwpe2suc3R5bGUub3ZlcmZsb3c9ImF1dG8iOwprLnN0eWxlLmJvcmRlcj0iMHB4IjsKdGhpcy5zZXRfY29udGVudEVsZW1lbnQoayk7CnRoaXMuc2V0V2lkdGhEb2NrTW9kZSh0aGlzLmdldF93aWR0aCgpKTsKdGhpcy5zZXRIZWlnaHREb2NrTW9kZSh0aGlzLmdldF9oZWlnaHQoKSk7Cn19ZWxzZXt2YXIgbj0oJHRlbGVyaWsuaXNJRSYmISR0ZWxlcmlrLmlzSUU5TW9kZSk/ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiPGlmcmFtZSBuYW1lPSciK2YrIic+Iik6ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaWZyYW1lIik7Cm4ubmFtZT1mOwpuLnNyYz0iamF2YXNjcmlwdDonPGh0bWw+PC9odG1sPic7IjsKbi5zdHlsZS53aWR0aD0iMTAwJSI7Cm4uc3R5bGUuaGVpZ2h0PSIxMDAlIjsKbi5zdHlsZS5ib3JkZXI9IjBweCI7Cm4uZnJhbWVCb3JkZXI9IjAiOwppZigkdGVsZXJpay5pc0lFOCl7bi5zdHlsZS5kaXNwbGF5PSJibG9jayI7Cn10aGlzLl9pZnJhbWU9bjsKaWYoJHRlbGVyaWsuaXNNb2JpbGVTYWZhcmkmJiF0aGlzLl9pc1ByZWRlZmluZWQpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwp0LnN0eWxlLndpZHRoPSIxMDAlIjsKdC5zdHlsZS5oZWlnaHQ9IjEwMCUiOwp0LnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iOwp0LmFwcGVuZENoaWxkKHRoaXMuX2lmcmFtZSk7CnRoaXMuX2NvbnRlbnRDZWxsLmFwcGVuZENoaWxkKHQpOwppZih0aGlzLl9pc2lPUzVTYWZhcmkpe3RoaXMuc2V0Q29udGVudEZpeGVkSGVpZ2h0KHRoaXMuZ2V0X2hlaWdodCgpLHQpOwp9dGhpcy5faWZyYW1lV3JhcHBlcj10Owp9ZWxzZXt0aGlzLl9jb250ZW50Q2VsbC5hcHBlbmRDaGlsZCh0aGlzLl9pZnJhbWUpOwp9dGhpcy5fY3JlYXRlQmFja1JlZmVyZW5jZSgpOwp9dGhpcy5fdXBkYXRlT3BhY2l0eSgpOwp9aWYoIXRoaXMuX3BvcHVwQmVoYXZpb3Ipe3RoaXMuc2V0X2JlaGF2aW9ycyh0aGlzLl9iZWhhdmlvcnMpOwp0aGlzLl9wb3B1cEJlaGF2aW9yPSRjcmVhdGUoVGVsZXJpay5XZWIuUG9wdXBCZWhhdmlvcix7aWQ6KG5ldyBEYXRlKCktMTAwKSsiUG9wdXBCZWhhdmlvciIscGFyZW50RWxlbWVudDpudWxsLG92ZXJsYXk6dGhpcy5fb3ZlcmxheSxrZWVwSW5TY3JlZW5Cb3VuZHM6dGhpcy5fa2VlcEluU2NyZWVuQm91bmRzfSxudWxsLG51bGwsdGhpcy5fcG9wdXBFbGVtZW50KTsKfX0sX2dldERlZmF1bHRQYXJlbnQ6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmdldF9mb3JtSUQoKT9kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmdldF9mb3JtSUQoKSk6bnVsbDsKaWYoIWMpe2lmKGRvY3VtZW50LmZvcm1zJiZkb2N1bWVudC5mb3Jtcy5sZW5ndGg+MCl7Yz1kb2N1bWVudC5mb3Jtc1swXTsKfWVsc2V7Yz1kb2N1bWVudC5ib2R5Owp9fXJldHVybiBjOwp9LF9nZXRTdGF0dXNNZXNzYWdlRWxlbWVudDpmdW5jdGlvbigpe2lmKG51bGw9PXRoaXMuX3N0YXR1c01lc3NhZ2VFbGVtZW50KXt2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpOwpjLmlkPXRoaXMuZ2V0X2lkKCkrIl9zdGF0dXMiOwpjLnJlYWRPbmx5PSJyZWFkb25seSI7CmMuc2V0QXR0cmlidXRlKCJ1bnNlbGVjdGFibGUiLCJvbiIpOwp0aGlzLl9zdGF0dXNNZXNzYWdlRWxlbWVudD1jOwp9cmV0dXJuIHRoaXMuX3N0YXR1c01lc3NhZ2VFbGVtZW50Owp9LF9nZXRUaXRsZUNvbW1hbmRCdXR0b25zSG9sZGVyOmZ1bmN0aW9uKCl7aWYobnVsbD09dGhpcy5fYnV0dG9uc0VsZW1lbnQpe3ZhciBjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInVsIik7CmMuY2xhc3NOYW1lPSJyd0NvbnRyb2xCdXR0b25zIjsKdGhpcy5fYnV0dG9uc0VsZW1lbnQ9YzsKaWYodGhpcy5nZXRfZW5hYmxlQXJpYVN1cHBvcnQoKSl7Yy5zZXRBdHRyaWJ1dGUoInJvbGUiLCJwcmVzZW50YXRpb24iKTsKfX1yZXR1cm4gdGhpcy5fYnV0dG9uc0VsZW1lbnQ7Cn0sX2dldFRpdGxlRWxlbWVudDpmdW5jdGlvbigpe2lmKCF0aGlzLl90aXRsZUVsZW1lbnQpe3RoaXMuX3RpdGxlRWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJlbSIpOwp0aGlzLl90aXRsZUVsZW1lbnQuc2V0QXR0cmlidXRlKCJ1bnNlbGVjdGFibGUiLCJvbiIpOwppZih0aGlzLmdldF9lbmFibGVBcmlhU3VwcG9ydCgpKXt0aGlzLl90aXRsZUVsZW1lbnQuaWQ9dGhpcy5nZXRfaWQoKSsiX3RpdGxlIjsKdGhpcy5fdGl0bGVFbGVtZW50LnNldEF0dHJpYnV0ZT0oInJvbGUiLCJsYWJlbCIpOwp9fXJldHVybiB0aGlzLl90aXRsZUVsZW1lbnQ7Cn0sX2dldFRpdGxlSWNvbjpmdW5jdGlvbigpe2lmKG51bGw9PXRoaXMuX3RpdGxlSWNvbkVsZW1lbnQpe3ZhciBjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKdGhpcy5fdGl0bGVJY29uRWxlbWVudD1jOwpjLmNsYXNzTmFtZT0icndJY29uIjsKJGFkZEhhbmRsZXIodGhpcy5fdGl0bGVJY29uRWxlbWVudCwibW91c2Vkb3duIix0aGlzLl9jYW5jZWxFdmVudCk7Cn1yZXR1cm4gdGhpcy5fdGl0bGVJY29uRWxlbWVudDsKfSxfZ2V0VGl0bGVDb21tYW5kQnV0dG9uOmZ1bmN0aW9uKGYpe2lmKCFmfHwhdGhpcy5fYnV0dG9uc0FycmF5KXtyZXR1cm4gbnVsbDsKfXZhciBlPWYudG9Mb3dlckNhc2UoKTsKZT1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Uuc3Vic3RyaW5nKDEpOwpmPSJydyIrZSsiQnV0dG9uIjsKdmFyIGQ9dGhpcy5fYnV0dG9uc0FycmF5Lmxlbmd0aDsKZm9yKHZhciBnPTA7Cmc8ZDsKZysrKXt2YXIgYz10aGlzLl9idXR0b25zQXJyYXlbZ107CmlmKGMmJlN5cy5VSS5Eb21FbGVtZW50LmNvbnRhaW5zQ3NzQ2xhc3MoYyxmKSl7cmV0dXJuIGM7Cn19cmV0dXJuIG51bGw7Cn0sX2dldEhhbmRsZXNXaWR0aDpmdW5jdGlvbigpe2lmKCF0aGlzLl9oYW5kbGVzV2lkdGgpe3ZhciBjPXRoaXMuX3RhYmxlRWxlbWVudDsKaWYoIWMpe3JldHVybiAwOwp9dmFyIGQ9cGFyc2VJbnQoJHRlbGVyaWsuZ2V0Q3VycmVudFN0eWxlKGMucm93c1syXS5jZWxsc1swXSwid2lkdGgiKSk7CmlmKCFkKXtyZXR1cm4gMDsKfXRoaXMuX2hhbmRsZXNXaWR0aD0yKmQ7Cn1yZXR1cm4gdGhpcy5faGFuZGxlc1dpZHRoOwp9LGdldF9kZWZhdWx0TWluV2lkdGg6ZnVuY3Rpb24oKXtpZighdGhpcy5fZGVmYXVsdE1pbldpZHRoKXt2YXIgZz10aGlzLl9nZXRIYW5kbGVzV2lkdGgoKTsKdGhpcy5fZGVmYXVsdE1pbldpZHRoPWc7CmlmKHRoaXMuX3Zpc2libGVUaXRsZWJhcil7dmFyIGU9dGhpcy5fdGFibGVFbGVtZW50Owp2YXIgZD10aGlzLl9nZXRUaXRsZUVsZW1lbnQoKTsKdmFyIGM9ZC5zdHlsZS53aWR0aDsKaWYoZCl7ZC5zdHlsZS53aWR0aD0iMXB4IjsKfWlmKHRoaXMuX2RvY2tNb2RlKXt0aGlzLl9jb250ZW50RWxlbWVudC5zdHlsZS53aWR0aD0iMXB4IjsKfWUuc3R5bGUud2lkdGg9IjFweCI7CnZhciBmPXRoaXMuX3RpdGxlQ2VsbC5vZmZzZXRXaWR0aDsKZC5zdHlsZS53aWR0aD1jOwplLnN0eWxlLndpZHRoPSIiOwppZih0aGlzLl9kb2NrTW9kZSl7dGhpcy5fY29udGVudEVsZW1lbnQuc3R5bGUud2lkdGg9IiI7Cn10aGlzLl9kZWZhdWx0TWluV2lkdGgrPWY7Cn19cmV0dXJuIHRoaXMuX2RlZmF1bHRNaW5XaWR0aDsKfSxnZXRfZGVmYXVsdE1pbkhlaWdodDpmdW5jdGlvbigpe2lmKCF0aGlzLl9kZWZhdWx0TWluSGVpZ2h0KXt2YXIgYz1NYXRoLmNlaWwodGhpcy5fZ2V0SGFuZGxlc1dpZHRoKCkvMik7CnRoaXMuX2RlZmF1bHRNaW5IZWlnaHQ9YzsKdGhpcy5fZGVmYXVsdE1pbkhlaWdodCs9dGhpcy5fdmlzaWJsZVRpdGxlYmFyP3RoaXMuX3RpdGxlQ2VsbC5vZmZzZXRIZWlnaHQ6YzsKdGhpcy5fZGVmYXVsdE1pbkhlaWdodCs9dGhpcy5fdmlzaWJsZVN0YXR1c2Jhcj90aGlzLl9zdGF0dXNDZWxsLm9mZnNldEhlaWdodDowOwp9cmV0dXJuIHRoaXMuX2RlZmF1bHRNaW5IZWlnaHQ7Cn0sc2V0T3ZlcmZsb3dWaXNpYmxlOmZ1bmN0aW9uKGMpe2lmKCFjJiZ0aGlzLl9vdmVyZmxvd0hpZGRlbil7cmV0dXJuOwp9dmFyIGY9ImhpZGRlbiI7CnZhciBlPSJoaWRkZW4iOwp2YXIgZD0iaGlkZGVuIjsKdmFyIGg7CnZhciBnOwppZighdGhpcy5fZG9ja01vZGUpe3RyeXt2YXIgaj10aGlzLmdldF9jb250ZW50RnJhbWUoKTsKaWYoail7ai5zdHlsZS5vdmVyZmxvdz1jPyIiOiJoaWRkZW4iOwp9aD1qLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OwppZighaCl7cmV0dXJuOwp9Zz1qLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuYm9keTsKaWYoIWMpe3RoaXMuX29sZEJvZHlPdmVyZmxvdz1nLnN0eWxlLm92ZXJmbG93Owp0aGlzLl9vbGREb2NPdmVyZmxvdz1oLnN0eWxlLm92ZXJmbG93Owp0aGlzLl9vdmVyZmxvd0hpZGRlbj10cnVlOwp9fWNhdGNoKGkpe319aWYoYyl7ZT10aGlzLl9vbGRCb2R5T3ZlcmZsb3c7CmQ9dGhpcy5fb2xkRG9jT3ZlcmZsb3c7CmY9ImF1dG8iOwp0aGlzLl9vdmVyZmxvd0hpZGRlbj1mYWxzZTsKfWlmKHRoaXMuX2RvY2tNb2RlKXt0aGlzLmdldF9jb250ZW50RWxlbWVudCgpLnN0eWxlLm92ZXJmbG93PWY7Cn1lbHNle2lmKGgmJmcpe2lmKGR8fGQ9PSIiKXtoLnN0eWxlLm92ZXJmbG93PWQ7Cn1pZihlfHxlPT0iIil7Zy5zdHlsZS5vdmVyZmxvdz1lOwp9fX19LF9tYW5hZ2VWaXNpYmlsaXR5RmlyZWZveDpmdW5jdGlvbihkKXt2YXIgYz10aGlzLl9wb3B1cEJlaGF2aW9yOwppZigkdGVsZXJpay5pc0ZpcmVmb3gmJlN5cy5Ccm93c2VyLnZlcnNpb248NCYmYyl7Yy5zZXRfbWFuYWdlVmlzaWJpbGl0eShkKTsKfX0sX3VwZGF0ZVRpdGxlV2lkdGg6ZnVuY3Rpb24oKXtpZih0aGlzLl92aXNpYmxlVGl0bGViYXImJiF0aGlzLmlzTWluaW1pemVkKCkpe3ZhciBpPXRoaXMuX2dldFRpdGxlRWxlbWVudCgpOwppZighaSl7cmV0dXJuOwp9aS5zdHlsZS53aWR0aD0iMXB4IjsKdmFyIGc9MDsKdmFyIGQ9dGhpcy5fZ2V0VGl0bGVDb21tYW5kQnV0dG9uc0hvbGRlcigpOwp2YXIgYz1kLm9mZnNldFdpZHRoOwppZihjPjApe3ZhciBqPWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIkxJIik7CmlmKGpbMF0mJmpbMF0ub2Zmc2V0V2lkdGg+MCl7Yz1qLmxlbmd0aCpqWzBdLm9mZnNldFdpZHRoOwp9ZC5zdHlsZS53aWR0aD1jKyJweCI7CmcrPWM7Cn12YXIgaz10aGlzLl9nZXRUaXRsZUljb24oKTsKdmFyIGY9ay5vZmZzZXRXaWR0aDsKaWYoZj4wJiZrLnBhcmVudE5vZGUudGFnTmFtZT09IlREIil7ay5wYXJlbnROb2RlLnN0eWxlLndpZHRoPWYrInB4IjsKZys9ZjsKfWcrPXRoaXMuX2dldEhhbmRsZXNXaWR0aCgpOwp2YXIgaD0wOwp2YXIgZT10aGlzLl90aXRsZWJhckVsZW1lbnQ7Cmg9ZT9lLm9mZnNldFdpZHRoLWc6ZzsKaWYoaD4wKXtpLnN0eWxlLndpZHRoPWgrInB4IjsKfX19LF9hZGRXaW5kb3dUb0RvY3VtZW50OmZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5fZ2V0RGVmYXVsdFBhcmVudCgpOwpjLmluc2VydEJlZm9yZSh0aGlzLl9wb3B1cEVsZW1lbnQsYy5maXJzdENoaWxkKTsKfSxfY3JlYXRlQmFja1JlZmVyZW5jZTpmdW5jdGlvbigpe3ZhciBkPXRoaXM7CmlmKCFkLkFyZ3VtZW50KXtkLkFyZ3VtZW50PXt9Owp9dmFyIGY9dGhpcy5faWZyYW1lOwp0cnl7Zi5yYWRXaW5kb3c9ZDsKaWYoZi5jb250ZW50V2luZG93IT1udWxsKXtmLmNvbnRlbnRXaW5kb3cucmFkV2luZG93PWQ7Cn19Y2F0Y2goYyl7fX0sX2dldEZ1bGxTa2luTmFtZTpmdW5jdGlvbigpe3JldHVybiJSYWRXaW5kb3cgUmFkV2luZG93XyIrdGhpcy5nZXRfc2tpbigpKyIgcndOb3JtYWxXaW5kb3cgcndUcmFuc3BhcmVudFdpbmRvdyI7Cn0sX2NvbmZpZ3VyZU1pbmltaXplQnV0dG9uOmZ1bmN0aW9uKGMpe3ZhciBmPSh0cnVlPT1jKT90aGlzLl9nZXRMb2NhbGl6YXRpb25TdHJpbmcoIlJlc3RvcmUiKTp0aGlzLl9nZXRMb2NhbGl6YXRpb25TdHJpbmcoIk1pbmltaXplIik7CnZhciBkPSh0cnVlPT1jKT90aGlzLnJlc3RvcmU6dGhpcy5taW5pbWl6ZTsKdmFyIGU9dGhpcy5fZ2V0VGl0bGVDb21tYW5kQnV0dG9uKCJNaW5pbWl6ZSIpOwppZighKHRoaXMuaXNCZWhhdmlvckVuYWJsZWQoYi5XaW5kb3dCZWhhdmlvcnMuQ2xvc2UpKSYmZSl7dmFyIGc9ZS5wYXJlbnROb2RlOwp2YXIgaD10aGlzLl9pc1dpbmRvd1JpZ2h0VG9MZWZ0KCk/InJpZ2h0IjoibGVmdCI7CmlmKHRydWU9PWMpe2g9KGg9PSJyaWdodCIpPyJsZWZ0IjoicmlnaHQiOwp9Zy5zdHlsZS5zdHlsZUZsb2F0PWg7Cmcuc3R5bGUuY3NzRmxvYXQ9aDsKfXRoaXMuX3JlZ2lzdGVyVGl0bGViYXJIYW5kbGVyc0J1dHRvbigiTWluaW1pemUiLGYsZCk7Cn0sX2NvbmZpZ3VyZU1heGltaXplQnV0dG9uOmZ1bmN0aW9uKGUpe3ZhciBjPSh0cnVlPT1lKT90aGlzLl9nZXRMb2NhbGl6YXRpb25TdHJpbmcoIlJlc3RvcmUiKTp0aGlzLl9nZXRMb2NhbGl6YXRpb25TdHJpbmcoIk1heGltaXplIik7CnZhciBkPSh0cnVlPT1lKT90aGlzLnJlc3RvcmU6dGhpcy5tYXhpbWl6ZTsKdGhpcy5fcmVnaXN0ZXJUaXRsZWJhckhhbmRsZXJzQnV0dG9uKCJNYXhpbWl6ZSIsYyxkKTsKfSxfcmVnaXN0ZXJUaXRsZWJhckhhbmRsZXJzQnV0dG9uOmZ1bmN0aW9uKGUsYyxkKXt2YXIgZj10aGlzLl9nZXRUaXRsZUNvbW1hbmRCdXR0b24oZSk7CmlmKGYpe2Yuc2V0QXR0cmlidXRlKCJ0aXRsZSIsYyk7CmYuaW5uZXJIVE1MPWM7CiRjbGVhckhhbmRsZXJzKGYpOwokYWRkSGFuZGxlcnMoZix7Y2xpY2s6ZH0sdGhpcyk7CiRhZGRIYW5kbGVyKGYsImRibGNsaWNrIix0aGlzLl9jYW5jZWxFdmVudCk7CiRhZGRIYW5kbGVyKGYsIm1vdXNlZG93biIsdGhpcy5fY2FuY2VsRXZlbnQpOwp9fSxpc0Nsb25lZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0Nsb25lZDsKfSxpc0JlaGF2aW9yRW5hYmxlZDpmdW5jdGlvbihjKXtyZXR1cm4gYyZ0aGlzLl9iZWhhdmlvcnM/dHJ1ZTpmYWxzZTsKfSxpc0luaXRpYWxCZWhhdmlvckVuYWJsZWQ6ZnVuY3Rpb24oYyl7cmV0dXJuIGMmdGhpcy5nZXRfaW5pdGlhbEJlaGF2aW9ycygpP3RydWU6ZmFsc2U7Cn0saXNBdXRvU2l6ZUJlaGF2aW9yRW5hYmxlZDpmdW5jdGlvbihjKXtyZXR1cm4gYyZ0aGlzLmdldF9hdXRvU2l6ZUJlaGF2aW9ycygpP3RydWU6ZmFsc2U7Cn0sc2V0VmlzaWJsZTpmdW5jdGlvbihjKXtpZih0aGlzLl9wb3B1cEJlaGF2aW9yKXtpZihjKXt0aGlzLl9wb3B1cEJlaGF2aW9yLnNob3coKTsKfWVsc2V7dGhpcy5fcG9wdXBCZWhhdmlvci5oaWRlKCk7Cn19fSxpc1Zpc2libGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcG9wdXBWaXNpYmxlOwp9LGlzTW9kYWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kYWw7Cn0saXNBY3RpdmU6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5fcG9wdXBFbGVtZW50JiYhU3lzLlVJLkRvbUVsZW1lbnQuY29udGFpbnNDc3NDbGFzcyh0aGlzLl9wb3B1cEVsZW1lbnQsInJ3SW5hY3RpdmVXaW5kb3ciKSk7Cn0saXNQaW5uZWQ6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLl9nZXRUaXRsZUNvbW1hbmRCdXR0b24oIlBpbiIpOwpyZXR1cm4oYyYmU3lzLlVJLkRvbUVsZW1lbnQuY29udGFpbnNDc3NDbGFzcyhjLCJvbiIpKTsKfSxpc0Nsb3NlZDpmdW5jdGlvbigpe3JldHVybighdGhpcy5pc1Zpc2libGUoKSk7Cn0saXNNaW5pbWl6ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5fcG9wdXBFbGVtZW50JiZTeXMuVUkuRG9tRWxlbWVudC5jb250YWluc0Nzc0NsYXNzKHRoaXMuX3BvcHVwRWxlbWVudCwicndNaW5pbWl6ZWRXaW5kb3ciKSk7Cn0saXNNYXhpbWl6ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5fcG9wdXBFbGVtZW50JiZTeXMuVUkuRG9tRWxlbWVudC5jb250YWluc0Nzc0NsYXNzKHRoaXMuX3BvcHVwRWxlbWVudCwicndNYXhpbWl6ZWRXaW5kb3ciKSk7Cn0sX21vdmVUb01pbmltaXplWm9uZTpmdW5jdGlvbigpe3ZhciBjPSRnZXQodGhpcy5nZXRfbWluaW1pemVab25lSUQoKSk7CmlmKGMpe2lmKHRoaXMuaXNQaW5uZWQoKSl7dGhpcy5faXNQaW5uZWQ9dHJ1ZTsKdGhpcy50b2dnbGVQaW4oKTsKfXZhciBkPXRoaXMuX3BvcHVwRWxlbWVudDsKaWYoZC5wYXJlbnROb2RlIT1jKXtkLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZCk7CmMuYXBwZW5kQ2hpbGQoZCk7CnRoaXMuc2V0VmlzaWJsZSh0cnVlKTsKZC5zdHlsZS5wb3NpdGlvbj0ic3RhdGljIjsKaWYodGhpcy5pc0lFKXtkLnN0eWxlLmRpc3BsYXk9ImlubGluZSI7Cn1lbHNle2Quc3R5bGUuY3NzRmxvYXQ9ImxlZnQiOwp9fX19LF9tb3ZlVG9Eb2N1bWVudDpmdW5jdGlvbigpe3ZhciBjPXRoaXMuX3BvcHVwRWxlbWVudDsKYy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGMpOwpjLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSI7CmlmKHRoaXMuaXNJRSl7Yy5zdHlsZS5kaXNwbGF5PSIiOwp9ZWxzZXtjLnN0eWxlLmNzc0Zsb2F0PSIiOwp9dGhpcy5fYWRkV2luZG93VG9Eb2N1bWVudCgpOwppZih0aGlzLl9pc1Bpbm5lZCl7dGhpcy5faXNQaW5uZWQ9ZmFsc2U7CnRoaXMudG9nZ2xlUGluKCk7Cn19LG1pbmltaXplOmZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNDcmVhdGVkKCkpe3JldHVybjsKfXZhciBkPXRoaXMub25Db21tYW5kKCJNaW5pbWl6ZSIpOwppZighZCl7cmV0dXJuOwp9aWYodGhpcy5pc01heGltaXplZCgpKXt0aGlzLl9ub3JtYWxpemVXaW5kb3dSb290Q3NzKCk7CnRoaXMuX3Jlc3RvcmVCb3VuZHMoKTsKfXZhciBlPXRoaXMuX3BvcHVwRWxlbWVudDsKJHRlbGVyaWsucmVtb3ZlQ3NzQ2xhc3NlcyhlLFsicndOb3JtYWxXaW5kb3ciLCJyd01heGltaXplZFdpbmRvdyJdKTsKU3lzLlVJLkRvbUVsZW1lbnQuYWRkQ3NzQ2xhc3MoZSwicndNaW5pbWl6ZWRXaW5kb3ciKTsKaWYodGhpcy5fZW5hYmxlU2hhZG93JiYhJHRlbGVyaWsuaXNJRTYpe3RoaXMuX3NldFNoYWRvd0NTU0NsYXNzKHRydWUpOwpTeXMuVUkuRG9tRWxlbWVudC5hZGRDc3NDbGFzcyhlLCJyd01pbmltaXplZFdpbmRvd1NoYWRvdyIpOwp9dmFyIGM9ZS5faGlkZVdpbmRvd2VkRWxlbWVudHNJRnJhbWU7CmlmKGMpe1N5cy5VSS5Eb21FbGVtZW50LmFkZENzc0NsYXNzKGMsInJ3TWluaW1pemVkV2luZG93T3ZlcmxheSIpOwp9dGhpcy5fY29uZmlndXJlTWluaW1pemVCdXR0b24odHJ1ZSk7CnRoaXMuX2NvbmZpZ3VyZU1pbmltaXplQnV0dG9uKHRydWUpOwp0aGlzLl9lbmFibGVQYWdlU2Nyb2xsaW5nKHRydWUpOwp0aGlzLl9nZXRUaXRsZUVsZW1lbnQoKS5zdHlsZS53aWR0aD0iIjsKaWYodGhpcy5nZXRfbWluaW1pemVab25lSUQoKSl7dGhpcy5fbW92ZVRvTWluaW1pemVab25lKCk7Cn19LHJlc3RvcmU6ZnVuY3Rpb24oKXtpZighdGhpcy5pc0NyZWF0ZWQoKXx8dGhpcy5pc0Nsb3NlZCgpKXtyZXR1cm47Cn12YXIgYz10aGlzLm9uQ29tbWFuZCgiUmVzdG9yZSIpOwppZighYyl7cmV0dXJuOwp9dGhpcy5fY29uZmlndXJlTWluaW1pemVCdXR0b24oKTsKdGhpcy5fY29uZmlndXJlTWF4aW1pemVCdXR0b24oKTsKaWYodGhpcy5pc01pbmltaXplZCgpJiZ0aGlzLmdldF9taW5pbWl6ZVpvbmVJRCgpKXt0aGlzLl9tb3ZlVG9Eb2N1bWVudCgpOwp9dGhpcy5fbm9ybWFsaXplV2luZG93Um9vdENzcygpOwp0aGlzLl9lbmFibGVQYWdlU2Nyb2xsaW5nKHRydWUpOwp0aGlzLl9yZXN0b3JlQm91bmRzKCk7CnRoaXMuX21hbmFnZVZpc2liaWxpdHlGaXJlZm94KGZhbHNlKTsKdGhpcy5zZXRWaXNpYmxlKHRydWUpOwppZih0aGlzLl9lbmFibGVTaGFkb3cmJiEkdGVsZXJpay5pc0lFNil7dGhpcy5fc2V0U2hhZG93Q1NTQ2xhc3ModHJ1ZSk7Cn1pZih0aGlzLmdldF9zaG93T25Ub3BXaGVuTWF4aW1pemVkKCkmJnRoaXMuX3Jlc3RvcmVaaW5kZXgpe3RoaXMuX3BvcHVwRWxlbWVudC5zdHlsZS56SW5kZXg9dGhpcy5fcmVzdG9yZVppbmRleDsKdGhpcy5fcmVzdG9yZVppbmRleD1udWxsOwp9dGhpcy5zZXRWaXNpYmxlKHRydWUpOwp0aGlzLnNldEFjdGl2ZSh0cnVlKTsKdGhpcy5fbWFuYWdlVmlzaWJpbGl0eUZpcmVmb3godHJ1ZSk7CmlmKHRoaXMuaXNWaXNpYmxlKCkpe3RoaXMuX3Nob3coKTsKfX0sbWF4aW1pemU6ZnVuY3Rpb24oKXtpZighdGhpcy5pc0NyZWF0ZWQoKSl7cmV0dXJuOwp9dmFyIGU9dGhpcy5vbkNvbW1hbmQoIk1heGltaXplIik7CmlmKCFlKXtyZXR1cm47Cn10aGlzLl9zdG9yZUJvdW5kcygpOwppZih0aGlzLmlzTWluaW1pemVkKCkmJnRoaXMuZ2V0X21pbmltaXplWm9uZUlEKCkpe3RoaXMuX21vdmVUb0RvY3VtZW50KCk7Cn1pZih0aGlzLmlzTWluaW1pemVkKCkpe3RoaXMuX25vcm1hbGl6ZVdpbmRvd1Jvb3RDc3MoKTsKdGhpcy5fY2hlY2tSZXN0cmljdGlvblpvbmVCb3VuZHM9ZnVuY3Rpb24oKXtyZXR1cm4gdHJ1ZTsKfTsKdGhpcy5fcmVzdG9yZUJvdW5kcygpOwp0aGlzLl9jaGVja1Jlc3RyaWN0aW9uWm9uZUJvdW5kcz1iLlJhZFdpbmRvdy5wcm90b3R5cGUuX2NoZWNrUmVzdHJpY3Rpb25ab25lQm91bmRzOwp9dGhpcy5fc2V0U2hhZG93Q1NTQ2xhc3MoZmFsc2UpOwp2YXIgZj10aGlzLl9wb3B1cEVsZW1lbnQ7CiR0ZWxlcmlrLnJlbW92ZUNzc0NsYXNzZXMoZixbInJ3Tm9ybWFsV2luZG93IiwicndNaW5pbWl6ZWRXaW5kb3ciLCJyd01pbmltaXplZFdpbmRvd1NoYWRvdyJdKTsKU3lzLlVJLkRvbUVsZW1lbnQuYWRkQ3NzQ2xhc3MoZiwicndNYXhpbWl6ZWRXaW5kb3ciKTsKdGhpcy5fY29uZmlndXJlTWF4aW1pemVCdXR0b24odHJ1ZSk7CnRoaXMuX2NvbmZpZ3VyZU1pbmltaXplQnV0dG9uKCk7CnRoaXMuX21haW50YWluTWF4aW1pemVkU2l6ZSgpOwp0aGlzLl9tYWludGFpbk1heGltaXplZFNpemUoKTsKdmFyIGQ9Zi5faGlkZVdpbmRvd2VkRWxlbWVudHNJRnJhbWU7CmlmKGQpe1N5cy5VSS5Eb21FbGVtZW50LnJlbW92ZUNzc0NsYXNzKGQsInJ3TWluaW1pemVkV2luZG93T3ZlcmxheSIpOwp0aGlzLl9wb3B1cEJlaGF2aW9yLl9oYW5kbGVFbGVtZW50UmVzaXplKCk7Cn1pZighdGhpcy5pc0FjdGl2ZSgpKXt0aGlzLnNldEFjdGl2ZSh0cnVlKTsKfWlmKCF0aGlzLmlzQWN0aXZlKCkpe3RoaXMuc2V0QWN0aXZlKHRydWUpOwp9aWYodGhpcy5nZXRfc2hvd09uVG9wV2hlbk1heGltaXplZCgpKXt2YXIgYz1mLnN0eWxlLnpJbmRleDsKaWYoYyl7dGhpcy5fcmVzdG9yZVppbmRleD1jOwp9Zi5zdHlsZS56SW5kZXg9MTAwMDAwOwp9dGhpcy5fdXBkYXRlVGl0bGVXaWR0aCgpOwp9LHNldEFjdGl2ZTpmdW5jdGlvbihjKXt2YXIgZj10aGlzLl9wb3B1cEVsZW1lbnQ7CmlmKCFjKXtTeXMuVUkuRG9tRWxlbWVudC5hZGRDc3NDbGFzcyhmLCJyd0luYWN0aXZlV2luZG93Iik7Cn1lbHNle2lmKCF0aGlzLmlzTWF4aW1pemVkKCkpe3ZhciBkPXBhcnNlSW50KGYuc3R5bGUuekluZGV4KTsKdmFyIGU9KHRoaXMuZ2V0X3N0eWxlemluZGV4KCkpP3RoaXMuZ2V0X3N0eWxlemluZGV4KCk6Yi5SYWRXaW5kb3dVdGlscy5nZXRfbmV3WmluZGV4KGQpOwpmLnN0eWxlLnpJbmRleD0iIitlOwp9dGhpcy5fZ2V0V2luZG93Q29udHJvbGxlcigpLnNldF9hY3RpdmVXaW5kb3codGhpcyk7CnRoaXMucmFpc2VFdmVudCgiYWN0aXZhdGUiLG5ldyBTeXMuRXZlbnRBcmdzKCkpOwppZih0aGlzLmlzQWN0aXZlKCkpe3JldHVybjsKfVN5cy5VSS5Eb21FbGVtZW50LnJlbW92ZUNzc0NsYXNzKGYsInJ3SW5hY3RpdmVXaW5kb3ciKTsKfX0sdG9nZ2xlUGluOmZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNDcmVhdGVkKCkpe3JldHVybjsKfXZhciBlPXRoaXMub25Db21tYW5kKCJQaW4iKTsKaWYoIWUpe3JldHVybjsKfXZhciBkPXRoaXMuX2dldFRpdGxlQ29tbWFuZEJ1dHRvbigiUGluIik7CnZhciBjPXRoaXMuaXNQaW5uZWQoKTsKdmFyIGY9Yz90aGlzLl9nZXRMb2NhbGl6YXRpb25TdHJpbmcoIlBpbk9uIik6dGhpcy5fZ2V0TG9jYWxpemF0aW9uU3RyaW5nKCJQaW5PZmYiKTsKaWYoZCl7U3lzLlVJLkRvbUVsZW1lbnQudG9nZ2xlQ3NzQ2xhc3MoZCwib24iKTsKfXRoaXMuX3JlZ2lzdGVyVGl0bGViYXJIYW5kbGVyc0J1dHRvbigiUGluIixmLHRoaXMudG9nZ2xlUGluKTsKYi5SYWRXaW5kb3dVdGlscy5zZXRQaW5uZWQoIWMsdGhpcyk7Cn0scmVsb2FkOmZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNDcmVhdGVkKCkpe3JldHVybjsKfXZhciBkPXRoaXMub25Db21tYW5kKCJSZWxvYWQiKTsKaWYoIWQpe3JldHVybjsKfWlmKCF0aGlzLl9pZnJhbWUpe3JldHVybjsKfXRoaXMuX29uV2luZG93VXJsQ2hhbmdpbmcoKTsKdHJ5e3RoaXMuX2lmcmFtZS5jb250ZW50V2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwppZigoJHRlbGVyaWsuaXNDaHJvbWV8fCR0ZWxlcmlrLmlzU2FmYXJpKSYmdGhpcy5faWZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuZG9tYWluIT1kb2N1bWVudC5kb21haW4pe3RoaXMuX29uV2luZG93VXJsQ2hhbmdlZCgpOwp9fWNhdGNoKGMpe3RoaXMuX29uV2luZG93VXJsQ2hhbmdlZCgpOwp9fSxmaXJlOmZ1bmN0aW9uKGMpe2lmKGMmJnR5cGVvZih0aGlzW2NdKT09ImZ1bmN0aW9uIil7dGhpc1tjXSgpOwp9ZWxzZXt2YXIgZD10aGlzLmdldF93aW5kb3dNYW5hZ2VyKCk7CmlmKCFkKXtyZXR1cm47Cn1pZihjJiZ0eXBlb2YoZFtjXSk9PSJmdW5jdGlvbiIpe2RbY10oKTsKfX19LF9ub3JtYWxpemVXaW5kb3dSb290Q3NzOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5fcG9wdXBFbGVtZW50OwppZihjKXskdGVsZXJpay5yZW1vdmVDc3NDbGFzc2VzKGMsWyJyd01pbmltaXplZFdpbmRvdyIsInJ3TWF4aW1pemVkV2luZG93IiwicndNaW5pbWl6ZWRXaW5kb3dTaGFkb3ciXSk7ClN5cy5VSS5Eb21FbGVtZW50LmFkZENzc0NsYXNzKGMsInJ3Tm9ybWFsV2luZG93Iik7CnZhciBkPWMuX2hpZGVXaW5kb3dlZEVsZW1lbnRzSUZyYW1lOwppZihkKXtTeXMuVUkuRG9tRWxlbWVudC5yZW1vdmVDc3NDbGFzcyhkLCJyd01pbmltaXplZFdpbmRvd092ZXJsYXkiKTsKfX10aGlzLl91cGRhdGVUaXRsZVdpZHRoKCk7Cn0sY2xvc2U6ZnVuY3Rpb24oZil7aWYodGhpcy5pc0Nsb3NlZCgpKXtyZXR1cm47Cn12YXIgZT1uZXcgU3lzLkNhbmNlbEV2ZW50QXJncygpOwp2YXIgYz0odHlwZW9mKGYpIT0idW5kZWZpbmVkIiYmIShmIGluc3RhbmNlb2YgU3lzLlVJLkRvbUV2ZW50KSk/ZjpudWxsOwplLl9hcmd1bWVudD1jOwplLmdldF9hcmd1bWVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9hcmd1bWVudDsKfTsKdGhpcy5yYWlzZUV2ZW50KCJiZWZvcmVDbG9zZSIsZSk7CmlmKGUuZ2V0X2NhbmNlbCgpKXtyZXR1cm47Cn10aGlzLmhpZGUoKTsKdmFyIGQ9bmV3IFN5cy5FdmVudEFyZ3MoKTsKZC5fYXJndW1lbnQ9YzsKZC5nZXRfYXJndW1lbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXJndW1lbnQ7Cn07CnRoaXMucmFpc2VFdmVudCgiY2xvc2UiLGQpOwp0aGlzLl9lbmFibGVQYWdlU2Nyb2xsaW5nKHRydWUpOwp0aGlzLl9ub3JtYWxpemVXaW5kb3dSb290Q3NzKCk7CmlmKGYgaW5zdGFuY2VvZiBTeXMuVUkuRG9tRXZlbnQpe2Y9bnVsbDsKfXRoaXMuX2ludm9rZURpYWxvZ0NhbGxCYWNrRnVuY3Rpb24oZik7CmlmKHRoaXMuZ2V0X2Rlc3Ryb3lPbkNsb3NlKCkmJiF0aGlzLl9kb2NrTW9kZSl7dGhpcy5kaXNwb3NlKCk7Cn19LF9pbnZva2VEaWFsb2dDYWxsQmFja0Z1bmN0aW9uOmZ1bmN0aW9uKGMpe3ZhciBkPXRoaXMuZ2V0X2NsaWVudENhbGxCYWNrRnVuY3Rpb24oKTsKaWYoZCl7aWYoInN0cmluZyI9PXR5cGVvZihkKSl7ZD1ldmFsKGQpOwp9aWYoImZ1bmN0aW9uIj09dHlwZW9mKGQpKXtkKHRoaXMsYyk7Cn19fSxvbkNvbW1hbmQ6ZnVuY3Rpb24oYyl7dmFyIGQ9bmV3IFN5cy5DYW5jZWxFdmVudEFyZ3MoKTsKZC5fY29tbWFuZE5hbWU9YzsKZC5nZXRfY29tbWFuZE5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29tbWFuZE5hbWU7Cn07CnRoaXMucmFpc2VfY29tbWFuZChkKTsKaWYoZC5nZXRfY2FuY2VsKCkpe3JldHVybiBmYWxzZTsKfXJldHVybiB0cnVlOwp9LHNldFVybDpmdW5jdGlvbihkKXtpZih0aGlzLl9kb2NrTW9kZSl7cmV0dXJuOwp9dGhpcy5fY3JlYXRlVUkoKTsKdGhpcy5zZXRfbmF2aWdhdGVVcmwoZCk7CnZhciBjPWQ7CmlmKHRoaXMuZ2V0X3JlbG9hZE9uU2hvdygpKXtjPXRoaXMuX2dldFJlbG9hZE9uU2hvd1VybChjKTsKfXRoaXMuX2lmcmFtZS5zcmM9YzsKdGhpcy5fb25XaW5kb3dVcmxDaGFuZ2luZygpOwppZighdGhpcy5fbG9hZGVkKXt0aGlzLl9yZWdpc3RlcklmcmFtZUxvYWRIYW5kbGVyKHRydWUpOwp9dGhpcy5fbG9hZGVkPXRydWU7Cn0sX3JlZ2lzdGVyQ2hpbGRQYWdlSGFuZGxlcnM6ZnVuY3Rpb24oZil7dmFyIGQ9bnVsbDsKdHJ5e2Q9dGhpcy5faWZyYW1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7CmlmKGQuZG9tYWluIT1kb2N1bWVudC5kb21haW4pe3JldHVybjsKfX1jYXRjaChjKXtyZXR1cm47Cn1pZihudWxsPT1kKXtyZXR1cm47Cn1pZihmKXt0aGlzLl9vbkNoaWxkUGFnZVVubG9hZERlbGVnYXRlPUZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5fb25DaGlsZFBhZ2VVbmxvYWQpOwp0aGlzLl9pZnJhbWUuY29udGVudFdpbmRvdy5vbnVubG9hZD10aGlzLl9vbkNoaWxkUGFnZVVubG9hZERlbGVnYXRlOwp0aGlzLl9vbkNoaWxkUGFnZUNsaWNrRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vbkNoaWxkUGFnZUNsaWNrKTsKJHRlbGVyaWsuYWRkRXh0ZXJuYWxIYW5kbGVyKGQsImNsaWNrIix0aGlzLl9vbkNoaWxkUGFnZUNsaWNrRGVsZWdhdGUpOwp9ZWxzZXtpZih0aGlzLl9vbkNoaWxkUGFnZUNsaWNrRGVsZWdhdGUpeyR0ZWxlcmlrLnJlbW92ZUV4dGVybmFsSGFuZGxlcihkLCJjbGljayIsdGhpcy5fb25DaGlsZFBhZ2VDbGlja0RlbGVnYXRlKTsKdGhpcy5fb25DaGlsZFBhZ2VDbGlja0RlbGVnYXRlPW51bGw7Cn19fSxfb25DaGlsZFBhZ2VVbmxvYWQ6ZnVuY3Rpb24oYyl7dGhpcy5fcmVnaXN0ZXJDaGlsZFBhZ2VIYW5kbGVycyhmYWxzZSk7CmlmKHRoaXMuX3JlbW92ZUZyb21ET00mJiEkdGVsZXJpay5pc0Nocm9tZSYmISR0ZWxlcmlrLmlzU2FmYXJpKXt0aGlzLl9yZW1vdmVGcm9tRE9NPWZhbHNlOwp2YXIgZD10aGlzLl9wb3B1cEVsZW1lbnQ7CmlmKGQmJmQucGFyZW50Tm9kZSl7ZC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGQpOwp9fX0sX29uQ2hpbGRQYWdlQ2xpY2s6ZnVuY3Rpb24oYyl7aWYoIXRoaXMuaXNWaXNpYmxlKCl8fHRoaXMuaXNDbG9zZWQoKSl7cmV0dXJuOwp9dmFyIGQ9Yy50YXJnZXQ/Yy50YXJnZXQ6Yy5zcmNFbGVtZW50OwppZihkKXtpZihkLnRhZ05hbWU9PSJJTlBVVCImJmQudHlwZT09ImJ1dHRvbiIpe3JldHVybjsKfWVsc2V7aWYoZC50YWdOYW1lPT0iQlVUVE9OInx8ZC50YWdOYW1lPT0iQSIpe3JldHVybjsKfX19dGhpcy5zZXRBY3RpdmUodHJ1ZSk7Cn0sX29uSWZyYW1lTG9hZDpmdW5jdGlvbigpe3RoaXMuX29uV2luZG93VXJsQ2hhbmdlZCgpOwppZigkdGVsZXJpay5pc0ZpcmVmb3gpe3RoaXMuc2V0T3ZlcmZsb3dWaXNpYmxlKHRydWUpOwp9dGhpcy5fcmVnaXN0ZXJDaGlsZFBhZ2VIYW5kbGVycyh0cnVlKTsKdGhpcy5yYWlzZUV2ZW50KCJwYWdlTG9hZCIsbmV3IFN5cy5FdmVudEFyZ3MoKSk7CmlmKHRoaXMuZ2V0X2F1dG9TaXplKCkpe3ZhciBlPXRoaXMuZ2V0X2FuaW1hdGlvbigpIT1iLldpbmRvd0FuaW1hdGlvbi5Ob25lOwp0aGlzLmF1dG9TaXplKGUpOwp9dmFyIGQ9bnVsbDsKdHJ5e2Q9dGhpcy5faWZyYW1lLmNvbnRlbnRXaW5kb3c7CmQuY2xvc2U9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyxmdW5jdGlvbigpe3RoaXMuY2xvc2UoKTsKfSk7Cn1jYXRjaChjKXtyZXR1cm4gZmFsc2U7Cn19LF9vbldpbmRvd1VybENoYW5naW5nOmZ1bmN0aW9uKCl7aWYodGhpcy5nZXRfc2hvd0NvbnRlbnREdXJpbmdMb2FkKCkpe3ZhciBlPXRoaXMuX2dldFN0YXR1c01lc3NhZ2VFbGVtZW50KCk7CmlmKGUpe1N5cy5VSS5Eb21FbGVtZW50LmFkZENzc0NsYXNzKGUsInJ3TG9hZGluZyIpOwp9fWVsc2V7dmFyIGQ9dGhpcy5faWZyYW1lLnN0eWxlOwpkLnBvc2l0aW9uPSJhYnNvbHV0ZSI7CmQudG9wPSItMTAwMDBweCI7CmlmKCR0ZWxlcmlrLmlzSUU5TW9kZSl7dGhpcy5fdXBkYXRlV2luZG93U2l6ZSh0aGlzLl9oZWlnaHQpOwp9aWYodGhpcy5faXNXaW5kb3dSaWdodFRvTGVmdCgpJiYkdGVsZXJpay5pc0Nocm9tZSl7ZC53aWR0aD0iMXB4IjsKfXZhciBjPXRoaXMuX2lmcmFtZS5wYXJlbnROb2RlOwpTeXMuVUkuRG9tRWxlbWVudC5hZGRDc3NDbGFzcyhjLCJyd0xvYWRpbmciKTsKfX0sX29uV2luZG93VXJsQ2hhbmdlZDpmdW5jdGlvbigpe3ZhciBnPXRoaXMuX2dldFN0YXR1c01lc3NhZ2VFbGVtZW50KCk7CmlmKHRoaXMuZ2V0X3Nob3dDb250ZW50RHVyaW5nTG9hZCgpKXtpZihnKXtTeXMuVUkuRG9tRWxlbWVudC5yZW1vdmVDc3NDbGFzcyhnLCJyd0xvYWRpbmciKTsKfX1lbHNle3RoaXMuX2lmcmFtZS5zdHlsZS5wb3NpdGlvbj0iIjsKaWYodGhpcy5faXNXaW5kb3dSaWdodFRvTGVmdCgpJiYkdGVsZXJpay5pc0Nocm9tZSl7dGhpcy5faWZyYW1lLnN0eWxlLndpZHRoPSIxMDAlIjsKfXZhciBjPXRoaXMuX2lmcmFtZS5wYXJlbnROb2RlOwpTeXMuVUkuRG9tRWxlbWVudC5yZW1vdmVDc3NDbGFzcyhjLCJyd0xvYWRpbmciKTsKaWYoJHRlbGVyaWsuaXNJRTlNb2RlKXtpZih0aGlzLmlzTWF4aW1pemVkKCkpe3RoaXMuX21haW50YWluTWF4aW1pemVkU2l6ZSgpOwp9ZWxzZXtpZighdGhpcy5pc01pbmltaXplZCgpKXt0aGlzLl91cGRhdGVXaW5kb3dTaXplKHRoaXMuZ2V0X2hlaWdodCgpKTsKfX19fWlmKGcpe3RoaXMuc2V0X3N0YXR1cyh0aGlzLmdldF9uYXZpZ2F0ZVVybCgpKTsKfXRyeXt2YXIgZj10aGlzLl9pZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudC50aXRsZTsKaWYoZiYmZiE9dGhpcy5nZXRfdGl0bGUoKSl7dGhpcy5zZXRfdGl0bGUoZi5yZXBsYWNlKC8mL2csIiZhbXA7IikucmVwbGFjZSgvPC9nLCImbHQ7IikucmVwbGFjZSgvPi9nLCImZ3Q7IikpOwp9fWNhdGNoKGQpe319LF91cGRhdGVQb3B1cFppbmRleDpmdW5jdGlvbigpe2lmKHRoaXMuX3BvcHVwQmVoYXZpb3Ipe2lmKHRoaXMuaXNWaXNpYmxlKCkpe3RoaXMuX3BvcHVwQmVoYXZpb3Iuc2hvdygpOwp9fX0sX3VwZGF0ZU9wYWNpdHk6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLl9kb2NrTW9kZT90aGlzLmdldF9jb250ZW50RWxlbWVudCgpOnRoaXMuZ2V0X2NvbnRlbnRGcmFtZSgpOwppZihjKXtpZih0aGlzLl9vcGFjaXR5PDEwMCl7dGhpcy5fY29udGVudENlbGwuc3R5bGUuYmFja2dyb3VuZD0ibm9uZSB0cmFuc3BhcmVudCI7CnZhciBkPWMuc3R5bGU7CmQuZmlsdGVyPSJhbHBoYShvcGFjaXR5PSIrdGhpcy5fb3BhY2l0eSsiKSI7CmQub3BhY2l0eT0odGhpcy5fb3BhY2l0eS8xMDApOwp9ZWxzZXt0aGlzLl9jb250ZW50Q2VsbC5zdHlsZS5iYWNrZ3JvdW5kPSIiOwppZigkdGVsZXJpay5pc0lFKXt0aGlzLl9jb250ZW50Q2VsbC5yZW1vdmVBdHRyaWJ1dGUoInN0eWxlIik7CmMuc3R5bGUucmVtb3ZlQXR0cmlidXRlKCJmaWx0ZXIiKTsKYy5zdHlsZS5yZW1vdmVBdHRyaWJ1dGUoIm9wYWNpdHkiKTsKfWVsc2V7Yy5zdHlsZS5maWx0ZXI9IiI7CmMuc3R5bGUub3BhY2l0eT0iIjsKfX19fSxnZXRfemluZGV4OmZ1bmN0aW9uKCl7aWYodGhpcy5fcG9wdXBFbGVtZW50KXtyZXR1cm4gdGhpcy5fcG9wdXBFbGVtZW50LnN0eWxlLnpJbmRleDsKfWVsc2V7cmV0dXJuIC0xOwp9fSxnZXRfYnJvd3NlcldpbmRvdzpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9icm93c2VyV2luZG93Owp9LGdldF9jb250ZW50RnJhbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faWZyYW1lOwp9LGdldF9vZmZzZXRFbGVtZW50SUQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb2Zmc2V0RWxlbWVudElEOwp9LHNldF9vZmZzZXRFbGVtZW50SUQ6ZnVuY3Rpb24oYyl7aWYodGhpcy5fb2Zmc2V0RWxlbWVudElEIT1jKXt0aGlzLl9vZmZzZXRFbGVtZW50SUQ9YzsKdGhpcy5fb2Zmc2V0RWxlbWVudD0kZ2V0KGMpOwp0aGlzLl9kZWxldGVTdG9yZWRCb3VuZHMoKTsKdGhpcy5fb2Zmc2V0U2V0PWZhbHNlOwp9aWYodGhpcy5pc1Zpc2libGUoKSl7dGhpcy5fc2hvdygpOwp9fSxnZXRfb3BlbmVyRWxlbWVudElEOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29wZW5lckVsZW1lbnRJRDsKfSxzZXRfb3BlbmVyRWxlbWVudElEOmZ1bmN0aW9uKGMpe2lmKHRoaXMuX29wZW5lckVsZW1lbnRJRCE9Yyl7aWYodGhpcy5fb3BlbmVyRWxlbWVudCl7dGhpcy5fcmVnaXN0ZXJPcGVuZXJFbGVtZW50SGFuZGxlcih0aGlzLl9vcGVuZXJFbGVtZW50LGZhbHNlKTsKdGhpcy5fb3BlbmVyRWxlbWVudD1udWxsOwp9dGhpcy5fb3BlbmVyRWxlbWVudElEPWM7CmlmKHRoaXMuX29wZW5lckVsZW1lbnRJRCl7dGhpcy5fb3BlbmVyRWxlbWVudD0kZ2V0KHRoaXMuX29wZW5lckVsZW1lbnRJRCk7Cn1pZih0aGlzLl9vcGVuZXJFbGVtZW50KXt0aGlzLl9yZWdpc3Rlck9wZW5lckVsZW1lbnRIYW5kbGVyKHRoaXMuX29wZW5lckVsZW1lbnQsdHJ1ZSk7Cn19fSxnZXRfbGVmdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sZWZ0Owp9LHNldF9sZWZ0OmZ1bmN0aW9uKGMpe2lmKHRoaXMuX2xlZnQhPWMpe3RoaXMuX2xlZnQ9cGFyc2VJbnQoYyl8fHBhcnNlSW50KGMpPT0wP3BhcnNlSW50KGMpOm51bGw7Cn19LGdldF90b3A6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdG9wOwp9LHNldF90b3A6ZnVuY3Rpb24oYyl7aWYodGhpcy5fdG9wIT1jKXt0aGlzLl90b3A9cGFyc2VJbnQoYyl8fHBhcnNlSW50KGMpPT0wP3BhcnNlSW50KGMpOm51bGw7Cn19LGdldF9zdHlsZXppbmRleDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldF9lbGVtZW50KCk/cGFyc2VJbnQodGhpcy5nZXRfZWxlbWVudCgpLnN0eWxlLnpJbmRleHx8JHRlbGVyaWsuZ2V0Q3VycmVudFN0eWxlKHRoaXMuZ2V0X2VsZW1lbnQoKSwiekluZGV4IikpOm51bGw7Cn0sZ2V0X3RpdGxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RpdGxlOwp9LHNldF90aXRsZTpmdW5jdGlvbihjKXtpZih0aGlzLl90aXRsZSE9Yyl7dGhpcy5fdGl0bGU9YzsKfWlmKG51bGw9PXRoaXMuX3RpdGxlRWxlbWVudCl7cmV0dXJuOwp9dGhpcy5fdGl0bGVFbGVtZW50LmlubmVySFRNTD1jPT0iIj8iJm5ic3A7Ijp0aGlzLl90aXRsZTsKdGhpcy5fdXBkYXRlVGl0bGVXaWR0aCgpOwp9LGdldF93aWR0aDpmdW5jdGlvbigpe3JldHVybiBwYXJzZUludCh0aGlzLl93aWR0aCk7Cn0sX2ZpeFNpemVWYWx1ZTpmdW5jdGlvbihjKXtjPSIiK2M7CmlmKC0xPT1jLmluZGV4T2YoInB4Iikpe2M9cGFyc2VJbnQoYyk7CmlmKCFpc05hTihjKSl7Yz1jKyJweCI7Cn1lbHNle2M9IiI7Cn19cmV0dXJuIGM7Cn0sc2V0X3dpZHRoOmZ1bmN0aW9uKGgpe2lmKG51bGw9PWgpe3JldHVybiBmYWxzZTsKfWlmKHRoaXMuaXNNYXhpbWl6ZWQoKSl7cmV0dXJuIGZhbHNlOwp9dmFyIGY9dGhpcy5nZXRfbWluV2lkdGgoKTsKaWYoZiYmZj5oKXtoPWY7Cn12YXIgZD1wYXJzZUludCh0aGlzLmdldF9tYXhXaWR0aCgpKTsKaWYoZCYmZDxoJiZkPmYpe2g9ZDsKfWlmKHRoaXMuaXNWaXNpYmxlKCkpe3RoaXMuX21hbmFnZVZpc2liaWxpdHlGaXJlZm94KGZhbHNlKTsKfWg9dGhpcy5fZml4U2l6ZVZhbHVlKGgpOwp2YXIgaT10aGlzLl9wb3B1cEVsZW1lbnQ7CmlmKGkpe3ZhciBjPSR0ZWxlcmlrLmdldEJvdW5kcyhpKTsKdmFyIGU9cGFyc2VJbnQoaCk7CmlmKGlzTmFOKGUpKXtlPWMud2lkdGg7Cn12YXIgZz10aGlzLl9jaGVja1Jlc3RyaWN0aW9uWm9uZUJvdW5kcyhudWxsLG5ldyBTeXMuVUkuQm91bmRzKGMueCxjLnksZSxjLmhlaWdodCkpOwppZighZyl7cmV0dXJuIGZhbHNlOwp9fWlmKHRoaXMuX3dpZHRoIT1oKXt0aGlzLl93aWR0aD1oOwp9aWYodGhpcy5fZG9ja01vZGUpe3RoaXMuc2V0V2lkdGhEb2NrTW9kZSh0aGlzLmdldF93aWR0aCgpKTsKfWlmKGkpe3RoaXMuX2RlbGV0ZVN0b3JlZEJvdW5kcygpOwppLnN0eWxlLndpZHRoPShwYXJzZUludCh0aGlzLl93aWR0aCktJHRlbGVyaWsuZ2V0Qm9yZGVyQm94KGkpLmhvcml6b250YWwpKyJweCI7CnRoaXMuX3VwZGF0ZVBvcHVwWmluZGV4KCk7Cn10aGlzLl91cGRhdGVUaXRsZVdpZHRoKCk7CnRoaXMuX21hbmFnZVZpc2liaWxpdHlGaXJlZm94KHRydWUpOwpyZXR1cm4gdHJ1ZTsKfSxnZXRfbWluV2lkdGg6ZnVuY3Rpb24oKXt2YXIgZD1wYXJzZUludCh0aGlzLl9taW5XaWR0aCk7CmlmKCF0aGlzLmlzQ3JlYXRlZCgpKXtyZXR1cm4gZDsKfXZhciBjPXRoaXMuZ2V0X2RlZmF1bHRNaW5XaWR0aCgpOwpyZXR1cm4oZCYmKGQ+YykpP2Q6YzsKfSxzZXRfbWluV2lkdGg6ZnVuY3Rpb24oYyl7aWYodGhpcy5fbWluV2lkdGghPWMpe3RoaXMuX21pbldpZHRoPWM7Cn19LGdldF9taW5IZWlnaHQ6ZnVuY3Rpb24oKXt2YXIgZD1wYXJzZUludCh0aGlzLl9taW5IZWlnaHQpOwppZighdGhpcy5pc0NyZWF0ZWQoKSl7cmV0dXJuIGQ7Cn12YXIgYz10aGlzLmdldF9kZWZhdWx0TWluSGVpZ2h0KCk7CnJldHVybihkJiYoZD5jKSk/ZDpjOwp9LHNldF9taW5IZWlnaHQ6ZnVuY3Rpb24oYyl7aWYodGhpcy5fbWluSGVpZ2h0IT1jKXt0aGlzLl9taW5IZWlnaHQ9YzsKfX0sZ2V0X2hlaWdodDpmdW5jdGlvbigpe3JldHVybiBwYXJzZUludCh0aGlzLl9oZWlnaHQpOwp9LHNldF9oZWlnaHQ6ZnVuY3Rpb24oZyl7aWYobnVsbD09Zyl7cmV0dXJuIGZhbHNlOwp9aWYodGhpcy5pc01heGltaXplZCgpKXtyZXR1cm4gZmFsc2U7Cn12YXIgaT10aGlzLmdldF9taW5IZWlnaHQoKTsKaWYoaSYmaT5nJiYoIWR8fChkJiZkPj1pKSkpe2c9aTsKfXZhciBkPXBhcnNlSW50KHRoaXMuZ2V0X21heEhlaWdodCgpKTsKaWYoZCYmZDxnKXtnPWQ7Cn1pZih0aGlzLmlzVmlzaWJsZSgpKXt0aGlzLl9tYW5hZ2VWaXNpYmlsaXR5RmlyZWZveChmYWxzZSk7Cn1nPXRoaXMuX2ZpeFNpemVWYWx1ZShnKTsKdmFyIGg9dGhpcy5fcG9wdXBFbGVtZW50OwppZihoKXt0aGlzLl9maXJzdFNob3c9ZmFsc2U7CnZhciBlPXRoaXMuZ2V0X2NvbnRlbnRFbGVtZW50KCk7CmlmKHRoaXMuX2RvY2tNb2RlJiZlKXtlLnN0eWxlLmhlaWdodD0iIjsKfXZhciBjPSR0ZWxlcmlrLmdldEJvdW5kcyhoKTsKdmFyIGY9dGhpcy5fY2hlY2tSZXN0cmljdGlvblpvbmVCb3VuZHMobnVsbCxuZXcgU3lzLlVJLkJvdW5kcyhjLngsYy55LGMud2lkdGgscGFyc2VJbnQoZykpKTsKaWYoIWYpe3JldHVybiBmYWxzZTsKfX1pZih0aGlzLl9oZWlnaHQhPWcpe3RoaXMuX2hlaWdodD1nOwp9aWYodGhpcy5fZG9ja01vZGUpe3RoaXMuc2V0SGVpZ2h0RG9ja01vZGUodGhpcy5nZXRfaGVpZ2h0KCkpOwp9aWYoaCl7dGhpcy5fZGVsZXRlU3RvcmVkQm91bmRzKCk7CnRoaXMuX3VwZGF0ZVdpbmRvd1NpemUodGhpcy5faGVpZ2h0KTsKdGhpcy5fdXBkYXRlUG9wdXBaaW5kZXgoKTsKfXRoaXMuX21hbmFnZVZpc2liaWxpdHlGaXJlZm94KHRydWUpOwppZih0aGlzLl9pc2lPUzVTYWZhcmkpe3RoaXMuc2V0Q29udGVudEZpeGVkSGVpZ2h0KHRoaXMuZ2V0X2hlaWdodCgpLHRoaXMuX2lmcmFtZVdyYXBwZXIpOwp9cmV0dXJuIHRydWU7Cn0sX3VwZGF0ZVdpbmRvd1NpemU6ZnVuY3Rpb24oZyxjKXt2YXIgZj10aGlzLl90YWJsZUVsZW1lbnQ7CnZhciBlPWc/ZzpmLnN0eWxlLmhlaWdodDsKaWYodHJ1ZT09Yyl7ZT1mLm9mZnNldEhlaWdodCsicHgiOwp9aWYocGFyc2VJbnQoZSk9PTApe3JldHVybjsKfXZhciBkPSR0ZWxlcmlrLmdldEJvcmRlckJveCh0aGlzLmdldF9wb3B1cEVsZW1lbnQoKSkudmVydGljYWw7CmU9cGFyc2VJbnQoZSk+ZD8ocGFyc2VJbnQoZSktZCkrInB4IjplOwpmLnN0eWxlLmhlaWdodD1lOwp0aGlzLl9maXhJZUhlaWdodChmLGUpOwpmLnBhcmVudE5vZGUuc3R5bGUuaGVpZ2h0PWU7Cn0sZ2V0X2JlaGF2aW9yczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iZWhhdmlvcnM7Cn0sc2V0X2JlaGF2aW9yczpmdW5jdGlvbihsKXtpZih0aGlzLl9iZWhhdmlvcnMhPWwpe3RoaXMuX2JlaGF2aW9ycz1sOwp9aWYobnVsbD09dGhpcy5fdGl0bGViYXJFbGVtZW50KXtyZXR1cm47Cn10aGlzLl9lbmFibGVNb3ZlUmVzaXplKGZhbHNlKTsKdGhpcy5fZW5hYmxlTW92ZVJlc2l6ZSh0cnVlKTsKaWYodGhpcy5fYnV0dG9uc0FycmF5JiZ0aGlzLl9idXR0b25zQXJyYXkubGVuZ3RoPjApe3ZhciBmPXRoaXMuX2J1dHRvbnNBcnJheS5sZW5ndGg7CmZvcih2YXIgYz0wOwpjPGY7CmMrKyl7dmFyIGU9dGhpcy5fYnV0dG9uc0FycmF5W2NdOwokY2xlYXJIYW5kbGVycyhlKTsKfXRoaXMuX2J1dHRvbnNBcnJheT1bXTsKdmFyIGs9dGhpcy5fZ2V0VGl0bGVDb21tYW5kQnV0dG9uc0hvbGRlcigpOwprLmlubmVySFRNTD0iIjsKfWlmKGIuV2luZG93QmVoYXZpb3JzLk5vbmU9PXRoaXMuX2JlaGF2aW9ycyl7cmV0dXJuOwp9ZWxzZXt2YXIgbz1iLldpbmRvd0JlaGF2aW9yczsKdmFyIGQ9W1t0aGlzLmlzQmVoYXZpb3JFbmFibGVkKG8uUGluKSwicndQaW5CdXR0b24iLHRoaXMuX2dldExvY2FsaXphdGlvblN0cmluZygiUGluT24iKSx0aGlzLnRvZ2dsZVBpbl0sW3RoaXMuaXNCZWhhdmlvckVuYWJsZWQoby5SZWxvYWQpLCJyd1JlbG9hZEJ1dHRvbiIsdGhpcy5fZ2V0TG9jYWxpemF0aW9uU3RyaW5nKCJSZWxvYWQiKSx0aGlzLnJlbG9hZF0sW3RoaXMuaXNCZWhhdmlvckVuYWJsZWQoby5NaW5pbWl6ZSksInJ3TWluaW1pemVCdXR0b24iLHRoaXMuX2dldExvY2FsaXphdGlvblN0cmluZygiTWluaW1pemUiKSx0aGlzLm1pbmltaXplXSxbdGhpcy5pc0JlaGF2aW9yRW5hYmxlZChvLk1heGltaXplKSwicndNYXhpbWl6ZUJ1dHRvbiIsdGhpcy5fZ2V0TG9jYWxpemF0aW9uU3RyaW5nKCJNYXhpbWl6ZSIpLHRoaXMubWF4aW1pemVdLFt0aGlzLmlzQmVoYXZpb3JFbmFibGVkKG8uQ2xvc2UpLCJyd0Nsb3NlQnV0dG9uIix0aGlzLl9nZXRMb2NhbGl6YXRpb25TdHJpbmcoIkNsb3NlIiksdGhpcy5jbG9zZV1dOwpmb3IodmFyIG49MDsKbjxkLmxlbmd0aDsKbisrKXt2YXIgbT1kW25dOwppZighbVswXSl7Y29udGludWU7Cn12YXIgZz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsaSIpOwp2YXIgaD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CmguaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApOyI7CmguY2xhc3NOYW1lPW1bMV07Cmguc2V0QXR0cmlidXRlKCJ0aXRsZSIsbVsyXSk7CmlmKHRoaXMuZ2V0X2VuYWJsZUFyaWFTdXBwb3J0KCkpe2cuc2V0QXR0cmlidXRlKCJyb2xlIiwicHJlc2VudGF0aW9uIik7Cmguc2V0QXR0cmlidXRlKCJyb2xlIiwiYnV0dG9uIik7Cn12YXIgcD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CnAuaW5uZXJIVE1MPW1bMl07CmguYXBwZW5kQ2hpbGQocCk7CiRhZGRIYW5kbGVycyhoLHtjbGljazptWzNdLGRibGNsaWNrOnRoaXMuX2NhbmNlbEV2ZW50LG1vdXNlZG93bjp0aGlzLl9jYW5jZWxFdmVudH0sdGhpcyk7CiRhZGRIYW5kbGVyKGgsImNsaWNrIix0aGlzLl9jYW5jZWxFdmVudCk7CmcuYXBwZW5kQ2hpbGQoaCk7CnRoaXMuX2J1dHRvbnNFbGVtZW50LmFwcGVuZENoaWxkKGcpOwp0aGlzLl9idXR0b25zQXJyYXlbdGhpcy5fYnV0dG9uc0FycmF5Lmxlbmd0aF09aDsKdGhpcy5fdXBkYXRlVGl0bGVXaWR0aCgpOwp0aGlzLl9kZWZhdWx0TWluV2lkdGg9bnVsbDsKfX19LGFkZFNob3J0Y3V0OmZ1bmN0aW9uKGQsYyl7aWYodGhpcy5fc2hvcnRDdXRNYW5hZ2VyKXt0aGlzLl9zaG9ydEN1dE1hbmFnZXIuYWRkU2hvcnRDdXQoZC50b0xvd2VyQ2FzZSgpLGMpOwp9ZWxzZXtpZighdGhpcy5nZXRfc2hvcnRjdXRzKCkpe3RoaXMuX3Nob3J0Y3V0cz0iW1snIitkLnRvTG93ZXJDYXNlKCkrIicsICciK2MrIiddXSI7Cn10aGlzLl9yZWdpc3Rlckdsb2JhbEJvZHlFdmVudEhhbmRsZXJzKHRydWUpOwp9fSxyZW1vdmVTaG9ydGN1dDpmdW5jdGlvbihjKXtpZih0aGlzLl9zaG9ydEN1dE1hbmFnZXIpe3RoaXMuX3Nob3J0Q3V0TWFuYWdlci5yZW1vdmVTaG9ydEN1dChjLnRvTG93ZXJDYXNlKCkpOwp9fSxnZXRTaG9ydGN1dFN0cmluZzpmdW5jdGlvbihkKXtpZighdGhpcy5fc2hvcnRDdXRNYW5hZ2VyKXtyZXR1cm4gbnVsbDsKfXZhciBjPXRoaXMuX3Nob3J0Q3V0TWFuYWdlci5maW5kU2hvcnRDdXRCeU5hbWUoZC50b0xvd2VyQ2FzZSgpKTsKcmV0dXJuKGMmJmMuZ2V0X3Nob3J0Q3V0U3RyaW5nKCkpP2MuZ2V0X3Nob3J0Q3V0U3RyaW5nKCk6bnVsbDsKfSxpc1Nob3J0Y3V0QWRkZWQ6ZnVuY3Rpb24oYyl7cmV0dXJuIHRoaXMuZ2V0U2hvcnRjdXRTdHJpbmcoYy50b0xvd2VyQ2FzZSgpKT90cnVlOmZhbHNlOwp9LHJlbW92ZUFsbFNob3J0Y3V0c0NvbW1hbmQ6ZnVuY3Rpb24oYyl7d2hpbGUodGhpcy5pc1Nob3J0Y3V0QWRkZWQoYykpe3RoaXMucmVtb3ZlU2hvcnRjdXQoYy50b0xvd2VyQ2FzZSgpKTsKfX0sZ2V0X21vZGFsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vZGFsOwp9LHNldF9tb2RhbDpmdW5jdGlvbihjKXtpZih0aGlzLl9tb2RhbCE9Yyl7dGhpcy5fbW9kYWw9YzsKfXRoaXMuX21ha2VNb2RhbCh0aGlzLl9tb2RhbCk7CmlmKHRoaXMuaXNWaXNpYmxlKCkpe3RoaXMuX2FmdGVyU2hvdygpOwp9fSxnZXRfdmlzaWJsZVRpdGxlYmFyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Zpc2libGVUaXRsZWJhcjsKfSxzZXRfdmlzaWJsZVRpdGxlYmFyOmZ1bmN0aW9uKGQpe2lmKHRoaXMuX3Zpc2libGVUaXRsZWJhciE9ZCl7dGhpcy5fdmlzaWJsZVRpdGxlYmFyPWQ7Cn12YXIgYz10aGlzLmdldF9wb3B1cEVsZW1lbnQoKTsKaWYoYyl7ZD9TeXMuVUkuRG9tRWxlbWVudC5yZW1vdmVDc3NDbGFzcyhjLCJyd05vVGl0bGVCYXIiKTpTeXMuVUkuRG9tRWxlbWVudC5hZGRDc3NDbGFzcyhjLCJyd05vVGl0bGVCYXIiKTsKfWlmKHRoaXMuX3RpdGxlYmFyRWxlbWVudCl7dGhpcy5fdGl0bGViYXJFbGVtZW50LnN0eWxlLmRpc3BsYXk9ZD8iIjoibm9uZSI7CmlmKHRoaXMuZ2V0X2VuYWJsZUFyaWFTdXBwb3J0KCkpe3RoaXMuX3RpdGxlYmFyRWxlbWVudC5zZXRBdHRyaWJ1dGUoImFyaWEtaGlkZGVuIiwhZCk7Cn19fSxnZXRfdmlzaWJsZVN0YXR1c2JhcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92aXNpYmxlU3RhdHVzYmFyOwp9LHNldF92aXNpYmxlU3RhdHVzYmFyOmZ1bmN0aW9uKGMpe2lmKHRoaXMuX3Zpc2libGVTdGF0dXNiYXIhPWMpe3RoaXMuX3Zpc2libGVTdGF0dXNiYXI9YzsKfWlmKHRoaXMuX3N0YXR1c0NlbGwpe3RoaXMuX3N0YXR1c0NlbGwucGFyZW50Tm9kZS5zdHlsZS5kaXNwbGF5PWM/IiI6Im5vbmUiOwppZih0aGlzLmdldF9lbmFibGVBcmlhU3VwcG9ydCgpKXt0aGlzLl9zdGF0dXNDZWxsLnBhcmVudE5vZGUuc2V0QXR0cmlidXRlKCJhcmlhLWhpZGRlbiIsIWMpOwp9fX0sZ2V0X292ZXJsYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3ZlcmxheTsKfSxzZXRfb3ZlcmxheTpmdW5jdGlvbihjKXt0aGlzLl9vdmVybGF5PWM7CmlmKHRoaXMuX3BvcHVwQmVoYXZpb3Ipe3RoaXMuX3BvcHVwQmVoYXZpb3Iuc2V0X292ZXJsYXkodGhpcy5fb3ZlcmxheSk7Cn1pZih0aGlzLmlzVmlzaWJsZSgpKXt0aGlzLl9yZVNldFdpbmRvd1Bvc2l0aW9uKCk7Cn19LGdldF9vcGFjaXR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29wYWNpdHk7Cn0sc2V0X29wYWNpdHk6ZnVuY3Rpb24oYyl7aWYodGhpcy5nZXRfb3BhY2l0eSgpIT1jKXt0aGlzLl9vcGFjaXR5PWM+MTAwPzEwMDpjOwp0aGlzLl9vcGFjaXR5PWM8MD8wOmM7CmlmKHRoaXMuaXNDcmVhdGVkKCkpe3RoaXMuX3VwZGF0ZU9wYWNpdHkoKTsKfX19LGdldF9pY29uVXJsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ljb25Vcmw7Cn0sc2V0X2ljb25Vcmw6ZnVuY3Rpb24oYyl7dGhpcy5faWNvblVybD1jOwppZih0aGlzLl90aXRsZUljb25FbGVtZW50KXtpZih0aGlzLmdldF9pY29uVXJsKCk9PSIiKXt0aGlzLl90aXRsZUljb25FbGVtZW50LmNsYXNzTmFtZT0icndJY29uIjsKfWVsc2V7dGhpcy5fdGl0bGVJY29uRWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kPSJ0cmFuc3BhcmVudCB1cmwoJyIrYysiJykgbm8tcmVwZWF0IHNjcm9sbCAwcHggMHB4IjsKfX19LGdldF9rZWVwSW5TY3JlZW5Cb3VuZHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fa2VlcEluU2NyZWVuQm91bmRzOwp9LHNldF9rZWVwSW5TY3JlZW5Cb3VuZHM6ZnVuY3Rpb24oYyl7dGhpcy5fa2VlcEluU2NyZWVuQm91bmRzPWM7CmlmKHRoaXMuX3BvcHVwQmVoYXZpb3Ipe3RoaXMuX3BvcHVwQmVoYXZpb3Iuc2V0X2tlZXBJblNjcmVlbkJvdW5kcyh0aGlzLl9rZWVwSW5TY3JlZW5Cb3VuZHMpOwp9aWYodGhpcy5pc1Zpc2libGUoKSl7dGhpcy5fcmVTZXRXaW5kb3dQb3NpdGlvbigpOwp9fSxnZXRfcG9wdXBFbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BvcHVwRWxlbWVudDsKfSxzZXRfc3RhdHVzOmZ1bmN0aW9uKGMpe3ZhciBkPXRoaXMuX2dldFN0YXR1c01lc3NhZ2VFbGVtZW50KCk7CmlmKGQpe3dpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZC52YWx1ZT1jOwp9LDApOwp9fSxnZXRfc3RhdHVzOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5fZ2V0U3RhdHVzTWVzc2FnZUVsZW1lbnQoKTsKaWYoYyl7cmV0dXJuIGMudmFsdWU7Cn19LHJhaXNlX2NvbW1hbmQ6ZnVuY3Rpb24oYyl7dGhpcy5yYWlzZUV2ZW50KCJjb21tYW5kIixjKTsKfSxhZGRfcmVzaXplOmZ1bmN0aW9uKGMpe3RoaXMuZ2V0X2V2ZW50cygpLmFkZEhhbmRsZXIoInJlc2l6ZUVuZCIsYyk7Cn0scmVtb3ZlX3Jlc2l6ZTpmdW5jdGlvbihjKXt0aGlzLmdldF9ldmVudHMoKS5yZW1vdmVIYW5kbGVyKCJyZXNpemVFbmQiLGMpOwp9LHNhdmVDbGllbnRTdGF0ZTpmdW5jdGlvbigpe3ZhciBjPVsicG9zaXRpb24iXTsKdmFyIGU9e307CmZvcih2YXIgZD0wOwpkPGMubGVuZ3RoOwpkKyspe2VbY1tkXV09dGhpc1siZ2V0XyIrY1tkXV0oKTsKfXJldHVybiBTeXMuU2VyaWFsaXphdGlvbi5KYXZhU2NyaXB0U2VyaWFsaXplci5zZXJpYWxpemUoZSk7Cn0sX2FwcGx5QXJpYUZvckxheW91dFRhYmxlczpmdW5jdGlvbigpe3ZhciBkPXRoaXMuX3RhYmxlRWxlbWVudDsKaWYoZCl7ZC5zZXRBdHRyaWJ1dGUoInJvbGUiLCJwcmVzZW50YXRpb24iKTsKfXZhciBlPWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRyIik7CmZvcih2YXIgbT0wOwptPGUubGVuZ3RoOwptKyspe3ZhciBmPWVbbV07CmYuc2V0QXR0cmlidXRlKCJyb2xlIiwicHJlc2VudGF0aW9uIik7CnZhciBrPWYuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRkIik7CmZvcih2YXIgaD0wOwpoPGsubGVuZ3RoOwpoKyspe2tbaF0uc2V0QXR0cmlidXRlKCJyb2xlIiwicHJlc2VudGF0aW9uIik7Cn19dmFyIGw9dGhpcy5fdGl0bGViYXJFbGVtZW50OwppZihsKXtsLnNldEF0dHJpYnV0ZSgicm9sZSIsInByZXNlbnRhdGlvbiIpOwp9dmFyIGc9dGhpcy5fc3RhdHVzQ2VsbDsKaWYoZyl7dmFyIGM9Zy5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGFibGUiKVswXTsKaWYoYyl7Yy5zZXRBdHRyaWJ1dGUoInJvbGUiLCJwcmVzZW50YXRpb24iKTsKfX19LF9hcHBseUFyaWFTdXBwb3J0OmZ1bmN0aW9uKCl7dGhpcy5fYXBwbHlBcmlhRm9yTGF5b3V0VGFibGVzKCk7CnZhciBjPXRoaXMuZ2V0X3BvcHVwRWxlbWVudCgpOwpjLnNldEF0dHJpYnV0ZSgiYXJpYS1oaWRkZW4iLCJ0cnVlIik7CmMuc2V0QXR0cmlidXRlKCJhcmlhLWxhYmVsbGVkYnkiLHRoaXMuX2dldFRpdGxlRWxlbWVudCgpLmlkKTsKaWYodGhpcy5faXNQcmVkZWZpbmVkKXtjLnNldEF0dHJpYnV0ZSgicm9sZSIsImFsZXJ0ZGlhbG9nIik7CmMuc2V0QXR0cmlidXRlKCJhcmlhLWRlc2NyaWJlZGJ5Iix0aGlzLmdldF9pZCgpKyJfY29udGVudCIpOwp9ZWxzZXtjLnNldEF0dHJpYnV0ZSgicm9sZSIsImRpYWxvZyIpOwp9fX07CmEucmVnaXN0ZXJDb250cm9sUHJvcGVydGllcyhiLlJhZFdpbmRvdyx7bWluaW1pemVab25lSUQ6bnVsbCxyZXN0cmljdGlvblpvbmVJRDoiIixtaW5pbWl6ZUljb25Vcmw6bnVsbCxjbGllbnRDYWxsQmFja0Z1bmN0aW9uOm51bGwsbmF2aWdhdGVVcmw6bnVsbCxsb2NhbGl6YXRpb246bnVsbCxzaG9ydGN1dHM6bnVsbCxpbml0aWFsQmVoYXZpb3JzOmIuV2luZG93QmVoYXZpb3JzLk5vbmUsZGVzdHJveU9uQ2xvc2U6ZmFsc2UscmVsb2FkT25TaG93OmZhbHNlLHNob3dDb250ZW50RHVyaW5nTG9hZDp0cnVlLHZpc2libGVPblBhZ2VMb2FkOmZhbHNlLHNob3dPblRvcFdoZW5NYXhpbWl6ZWQ6dHJ1ZSxhbmltYXRpb246Yi5XaW5kb3dBbmltYXRpb24uTm9uZSxhbmltYXRpb25EdXJhdGlvbjo1MDAsYXV0b1NpemU6ZmFsc2UsYXV0b1NpemVCZWhhdmlvcnM6Yi5XaW5kb3dBdXRvU2l6ZUJlaGF2aW9ycy5EZWZhdWx0LHdpbmRvd01hbmFnZXI6bnVsbCxjc3NDbGFzczoiIixuYW1lOm51bGwsc2tpbjoiRGVhZnVsdCIsZm9ybUlEOm51bGwsZW5hYmxlU2hhZG93OmZhbHNlLGVuYWJsZUFyaWFTdXBwb3J0OmZhbHNlLG1heFdpZHRoOm51bGwsbWF4SGVpZ2h0Om51bGx9KTsKYS5yZWdpc3RlckNvbnRyb2xFdmVudHMoYi5SYWRXaW5kb3csWyJjb21tYW5kIiwiZHJhZ1N0YXJ0IiwiZHJhZ0VuZCIsImFjdGl2YXRlIiwiYmVmb3JlU2hvdyIsInNob3ciLCJwYWdlTG9hZCIsImNsb3NlIiwiYmVmb3JlQ2xvc2UiLCJyZXNpemVTdGFydCIsInJlc2l6ZUVuZCIsImF1dG9TaXplRW5kIl0pOwpiLlJhZFdpbmRvdy5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5SYWRXaW5kb3ciLGIuUmFkV2ViQ29udHJvbCk7CmIuUmFkV2luZG93VXRpbHMuX3pJbmRleD0zMDAwOwpiLlJhZFdpbmRvd1V0aWxzLmdldF9uZXdaaW5kZXg9ZnVuY3Rpb24oYyl7Yz1wYXJzZUludChjKTsKaWYobnVsbD09Y3x8aXNOYU4oYykpe2M9MDsKfWlmKGIuUmFkV2luZG93VXRpbHMuX3pJbmRleDxjKXtiLlJhZFdpbmRvd1V0aWxzLl96SW5kZXg9YzsKfWIuUmFkV2luZG93VXRpbHMuX3pJbmRleCsrOwpyZXR1cm4gYi5SYWRXaW5kb3dVdGlscy5fekluZGV4Owp9OwpiLlJhZFdpbmRvd1V0aWxzLl9waW5uZWRMaXN0PXt9OwpiLlJhZFdpbmRvd1V0aWxzLnNldFBpbm5lZD1mdW5jdGlvbihjLGcpe2lmKGMpe3ZhciBlPWcuX2dldFZpZXdwb3J0Qm91bmRzKCk7CnZhciBoPWcuX2dldEN1cnJlbnRCb3VuZHMoKTsKZy5MZWZ0T2Zmc2V0PWgueC1lLnNjcm9sbExlZnQ7CmcuVG9wT2Zmc2V0PWgueS1lLnNjcm9sbFRvcDsKdmFyIGk9d2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uKCl7Yi5SYWRXaW5kb3dVdGlscy5fdXBkYXRlUGlubmVkRWxlbWVudFBvc2l0aW9uKGcpOwp9LDEwMCk7CmIuUmFkV2luZG93VXRpbHMuX3Bpbm5lZExpc3RbaV09ZzsKfWVsc2V7dmFyIGY9bnVsbDsKdmFyIGo9Yi5SYWRXaW5kb3dVdGlscy5fcGlubmVkTGlzdDsKZm9yKHZhciBkIGluIGope2lmKGpbZF09PWcpe2Y9ZDsKYnJlYWs7Cn19aWYobnVsbCE9Zil7d2luZG93LmNsZWFySW50ZXJ2YWwoZik7CmIuUmFkV2luZG93VXRpbHMuX3Bpbm5lZExpc3RbZl09bnVsbDsKfWcuVG9wT2Zmc2V0PW51bGw7CmcuTGVmdE9mZnNldD1udWxsOwp9fTsKYi5SYWRXaW5kb3dVdGlscy5fdXBkYXRlUGlubmVkRWxlbWVudFBvc2l0aW9uPWZ1bmN0aW9uKGcpe2lmKGcuaXNNYXhpbWl6ZWQoKXx8IWcuaXNWaXNpYmxlKCkpe3JldHVybjsKfXZhciBlPWcuX2dldFZpZXdwb3J0Qm91bmRzKCk7CnZhciBkPWcuX2dldEN1cnJlbnRCb3VuZHMoKTsKdmFyIGY9KGcuTGVmdE9mZnNldCE9bnVsbCk/Zy5MZWZ0T2Zmc2V0K2Uuc2Nyb2xsTGVmdDpkLng7CnZhciBjPShnLlRvcE9mZnNldCE9bnVsbCk/Zy5Ub3BPZmZzZXQrZS5zY3JvbGxUb3A6ZC55OwppZihkLnghPWZ8fGQueSE9Yyl7Zy5tb3ZlVG8oZixjKTsKfX07Cn0pKCk7ClR5cGUucmVnaXN0ZXJOYW1lc3BhY2UoIlRlbGVyaWsuV2ViLlVJIik7ClRlbGVyaWsuV2ViLlVJLldpbmRvd1Nob3J0Q3V0TWFuYWdlcj1mdW5jdGlvbihhKXt0aGlzLl9zaG9ydGN1dHM9W107CnRoaXMuYWRkU2hvcnRDdXRzKGEpOwp9OwpUZWxlcmlrLldlYi5VSS5XaW5kb3dTaG9ydEN1dE1hbmFnZXIucHJvdG90eXBlPXthZGRTaG9ydEN1dHM6ZnVuY3Rpb24oYil7aWYodHlwZW9mKGIpPT0ic3RyaW5nIil7Yj1TeXMuU2VyaWFsaXphdGlvbi5KYXZhU2NyaXB0U2VyaWFsaXplci5kZXNlcmlhbGl6ZShiKTsKfWZvcih2YXIgYT0wOwphPGIubGVuZ3RoOwphKyspe3RoaXMuYWRkU2hvcnRDdXQoYlthXVswXSxiW2FdWzFdKTsKfX0sYWRkU2hvcnRDdXQ6ZnVuY3Rpb24oYixhKXt2YXIgYz1uZXcgVGVsZXJpay5XZWIuVUkuV2luZG93U2hvcnRDdXQoYixhKTsKYy5IYXNoVmFsdWU9dGhpcy5fZ2V0U2hvcnRDdXRIYXNoVmFsdWUoYyk7CnRoaXMuX3Nob3J0Y3V0c1tjLkhhc2hWYWx1ZV09YzsKfSxyZW1vdmVTaG9ydEN1dDpmdW5jdGlvbihiKXt2YXIgYT10aGlzLmZpbmRTaG9ydEN1dEJ5TmFtZShiKTsKaWYoYSl7dGhpcy5fc2hvcnRjdXRzW2EuSGFzaFZhbHVlXT1udWxsOwp9fSxzZXRTaG9ydEN1dDpmdW5jdGlvbihiLGEpe3RoaXMucmVtb3ZlU2hvcnRDdXQoYik7CnRoaXMuYWRkU2hvcnRDdXQoYixhKTsKfSxpc1Nob3J0Q3V0SGl0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9oaXRUZXN0KGEua2V5Q29kZSxhLmN0cmxLZXksKG51bGwhPWEuY3RybExlZnQ/YS5jdHJsTGVmdDphLmN0cmxLZXkpLGEuc2hpZnRLZXksKG51bGwhPWEuc2hpZnRMZWZ0P2Euc2hpZnRMZWZ0OmEuc2hpZnRLZXkpLGEuYWx0S2V5LChudWxsIT1hLmFsdExlZnQ/YS5hbHRMZWZ0OmEuYWx0S2V5KSk7Cn0sX2hpdFRlc3Q6ZnVuY3Rpb24oYyxhLGYsZSxoLGQsYil7dmFyIGc9dGhpcy5fZ2V0SGFzaFZhbHVlKGMsYSxmLGUsaCxkLGIpOwpyZXR1cm4gdGhpcy5fc2hvcnRjdXRzW2ddOwp9LF9nZXRIYXNoVmFsdWU6ZnVuY3Rpb24oYyxhLGgsZyxpLGQsYil7dmFyIGY9YyY2NTUzNTsKdmFyIGU9MDsKZXw9KGE/KDE8PDApOjApOwplfD0oZz8oMTw8Mik6MCk7CmV8PShkPygxPDw0KTowKTsKZnw9KGU8PDE2KTsKcmV0dXJuIGY7Cn0sX2dldFNob3J0Q3V0SGFzaFZhbHVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9nZXRIYXNoVmFsdWUoYS5LZXlDb2RlLGEuQ3RybEtleSxhLkxlZnRDdHJsS2V5LGEuU2hpZnRLZXksYS5MZWZ0U2hpZnRLZXksYS5BbHRLZXksYS5MZWZ0QWx0S2V5KTsKfSxmaW5kU2hvcnRDdXRCeU5hbWU6ZnVuY3Rpb24oYyl7dmFyIGI7CmZvcih2YXIgYSBpbiB0aGlzLl9zaG9ydGN1dHMpe2I9dGhpcy5fc2hvcnRjdXRzW2FdOwppZihudWxsIT1iJiZiLl9uYW1lPT1jKXtyZXR1cm4gYjsKfX1yZXR1cm4gbnVsbDsKfX07ClRlbGVyaWsuV2ViLlVJLldpbmRvd1Nob3J0Q3V0PWZ1bmN0aW9uKGIsYSl7dGhpcy5fbmFtZT1iOwp0aGlzLl9zaG9ydGN1dFN0cmluZz0iIjsKdGhpcy5zZXRTaG9ydEN1dChhKTsKfTsKVGVsZXJpay5XZWIuVUkuV2luZG93U2hvcnRDdXQucHJvdG90eXBlPXtDdHJsS2V5OmZhbHNlLExlZnRDdHJsS2V5OmZhbHNlLFNoaWZ0S2V5OmZhbHNlLExlZnRTaGlmdEtleTpmYWxzZSxBbHRLZXk6ZmFsc2UsTGVmdEFsdEtleTpmYWxzZSxLZXlDb2RlOjAsZ2V0X25hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbmFtZTsKfSxzZXRfbmFtZTpmdW5jdGlvbihhKXt0aGlzLl9uYW1lPWE7Cn0sZ2V0X3Nob3J0Q3V0U3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Nob3J0Y3V0U3RyaW5nOwp9LHNldFNob3J0Q3V0OmZ1bmN0aW9uKGEpe3RoaXMuX3BhcnNlU2hvcnRjdXRTdHJpbmcoYSk7CnRoaXMuX3Nob3J0Y3V0U3RyaW5nPWE7Cn0sX3BhcnNlU2hvcnRjdXRTdHJpbmc6ZnVuY3Rpb24oYil7aWYoInN0cmluZyI9PXR5cGVvZihiKSl7dGhpcy5DdHJsS2V5PWZhbHNlOwp0aGlzLkxlZnRDdHJsS2V5PWZhbHNlOwp0aGlzLlNoaWZ0S2V5PWZhbHNlOwp0aGlzLkxlZnRTaGlmdEtleT1mYWxzZTsKdGhpcy5BbHRLZXk9ZmFsc2U7CnRoaXMuTGVmdEFsdEtleT1mYWxzZTsKdGhpcy5LZXlDb2RlPTA7CmI9Yi5yZXBsYWNlKC9ccyovZ2ksIiIpOwpiPWIucmVwbGFjZSgvXCtcKy9naSwiK1BMVVMiKTsKdmFyIGQ9Yi5zcGxpdCgiKyIpOwp2YXIgYT0iIjsKZm9yKHZhciBjPTA7CmM8ZC5sZW5ndGg7CmMrKyl7YT1kW2NdLnRvVXBwZXJDYXNlKCk7CnN3aXRjaChhKXtjYXNlIkxDVFJMIjp0aGlzLkxlZnRDdHJsS2V5PXRydWU7CmNhc2UiQ1RSTCI6dGhpcy5DdHJsS2V5PXRydWU7CmJyZWFrOwpjYXNlIkxTSElGVCI6dGhpcy5MZWZ0U2hpZnRLZXk9dHJ1ZTsKY2FzZSJTSElGVCI6dGhpcy5TaGlmdEtleT10cnVlOwpicmVhazsKY2FzZSJMQUxUIjp0aGlzLkxlZnRBbHRLZXk9dHJ1ZTsKY2FzZSJBTFQiOnRoaXMuQWx0S2V5PXRydWU7CmJyZWFrOwpjYXNlIkYxIjp0aGlzLktleUNvZGU9MTEyOwpicmVhazsKY2FzZSJGMiI6dGhpcy5LZXlDb2RlPTExMzsKYnJlYWs7CmNhc2UiRjMiOnRoaXMuS2V5Q29kZT0xMTQ7CmJyZWFrOwpjYXNlIkY0Ijp0aGlzLktleUNvZGU9MTE1OwpicmVhazsKY2FzZSJGNSI6dGhpcy5LZXlDb2RlPTExNjsKYnJlYWs7CmNhc2UiRjYiOnRoaXMuS2V5Q29kZT0xMTc7CmJyZWFrOwpjYXNlIkY3Ijp0aGlzLktleUNvZGU9MTE4OwpicmVhazsKY2FzZSJGOCI6dGhpcy5LZXlDb2RlPTExOTsKYnJlYWs7CmNhc2UiRjkiOnRoaXMuS2V5Q29kZT0xMjA7CmJyZWFrOwpjYXNlIkYxMCI6dGhpcy5LZXlDb2RlPTEyMTsKYnJlYWs7CmNhc2UiRjExIjp0aGlzLktleUNvZGU9MTIyOwpicmVhazsKY2FzZSJGMTIiOnRoaXMuS2V5Q29kZT0xMjM7CmJyZWFrOwpjYXNlIkVOVEVSIjp0aGlzLktleUNvZGU9MTM7CmJyZWFrOwpjYXNlIkhPTUUiOnRoaXMuS2V5Q29kZT0zNjsKYnJlYWs7CmNhc2UiRU5EIjp0aGlzLktleUNvZGU9MzU7CmJyZWFrOwpjYXNlIkxFRlQiOnRoaXMuS2V5Q29kZT0zNzsKYnJlYWs7CmNhc2UiUklHSFQiOnRoaXMuS2V5Q29kZT0zOTsKYnJlYWs7CmNhc2UiVVAiOnRoaXMuS2V5Q29kZT0zODsKYnJlYWs7CmNhc2UiRE9XTiI6dGhpcy5LZXlDb2RlPTQwOwpicmVhazsKY2FzZSJQQUdFVVAiOnRoaXMuS2V5Q29kZT0zMzsKYnJlYWs7CmNhc2UiUEFHRURPV04iOnRoaXMuS2V5Q29kZT0zNDsKYnJlYWs7CmNhc2UiU1BBQ0UiOnRoaXMuS2V5Q29kZT0zMjsKYnJlYWs7CmNhc2UiVEFCIjp0aGlzLktleUNvZGU9OTsKYnJlYWs7CmNhc2UiQkFDSyI6dGhpcy5LZXlDb2RlPTg7CmJyZWFrOwpjYXNlIkNPTlRFWFQiOnRoaXMuS2V5Q29kZT05MzsKYnJlYWs7CmNhc2UiRVNDQVBFIjpjYXNlIkVTQyI6dGhpcy5LZXlDb2RlPTI3OwpicmVhazsKY2FzZSJERUxFVEUiOmNhc2UiREVMIjp0aGlzLktleUNvZGU9NDY7CmJyZWFrOwpjYXNlIklOU0VSVCI6Y2FzZSJJTlMiOnRoaXMuS2V5Q29kZT00NTsKYnJlYWs7CmNhc2UiUExVUyI6dGhpcy5LZXlDb2RlPSIrIi5jaGFyQ29kZUF0KDApOwpicmVhazsKZGVmYXVsdDp0aGlzLktleUNvZGU9YS5jaGFyQ29kZUF0KDApOwpicmVhazsKfX19ZWxzZXt0aHJvdyB7ZGVzY3JpcHRpb246IkludmFsaWQgc2hvcnRjdXQgc3RyaW5nIn07Cn19fTsKDQovKiBFTkQgVGVsZXJpay5XZWIuVUkuV2luZG93LlJhZFdpbmRvd1NjcmlwdHMuanMgKi8NCi8qIFNUQVJUIFRlbGVyaWsuV2ViLlVJLldpbmRvdy5SYWRXaW5kb3dNYW5hZ2VyLmpzICovDQpUeXBlLnJlZ2lzdGVyTmFtZXNwYWNlKCJUZWxlcmlrLldlYi5VSSIpOwpUeXBlLnJlZ2lzdGVyTmFtZXNwYWNlKCJUZWxlcmlrLldlYi5VSS5XaW5kb3dNYW5hZ2VyIik7CiR0ZWxlcmlrLnRvV2luZG93TWFuYWdlcj1mdW5jdGlvbihhKXtyZXR1cm4gYTsKfTsKJHRlbGVyaWsuZmluZFdpbmRvd01hbmFnZXI9JGZpbmQ7CmZ1bmN0aW9uIEdldFJhZFdpbmRvd01hbmFnZXIoKXtyZXR1cm4gVGVsZXJpay5XZWIuVUkuV2luZG93TWFuYWdlci5NYW5hZ2VyOwp9d2luZG93LnJhZGFsZXJ0PWZ1bmN0aW9uKGMsYixlLGYsZyxkKXt2YXIgYT1HZXRSYWRXaW5kb3dNYW5hZ2VyKCk7CnJldHVybiBhLnJhZGFsZXJ0KGMsYixlLGYsZyxkKTsKfTsKd2luZG93LnJhZGNvbmZpcm09ZnVuY3Rpb24oZCxoLGIsZixjLGcsZSl7dmFyIGE9R2V0UmFkV2luZG93TWFuYWdlcigpOwpyZXR1cm4gYS5yYWRjb25maXJtKGQsaCxiLGYsYyxnLGUpOwp9Owp3aW5kb3cucmFkcHJvbXB0PWZ1bmN0aW9uKGQsaCxiLGUsYyxmLGcpe3ZhciBhPUdldFJhZFdpbmRvd01hbmFnZXIoKTsKcmV0dXJuIGEucmFkcHJvbXB0KGQsaCxiLGUsYyxmLGcpOwp9Owp3aW5kb3cucmFkb3Blbj1mdW5jdGlvbihiLGEpe3ZhciBjPUdldFJhZFdpbmRvd01hbmFnZXIoKTsKcmV0dXJuIGMub3BlbihiLGEpOwp9Owp3aW5kb3cucmFkb3BlbldpdGhDb250YWluZXI9ZnVuY3Rpb24oYSxkKXt2YXIgYz1HZXRSYWRXaW5kb3dNYW5hZ2VyKCk7CnZhciBiPSRnZXQoYSk7CmlmKCFiKXtyYWRhbGVydCgiQ29udGVudCBlbGVtZW50IHdpdGggc3VjaCBDbGllbnRJRCBub3QgZm91bmQhPGJyLz4gTWFrZSBzdXJlIHlvdSBoYXZlIHByb3ZpZGVkIGEgY29ycmVjdCBDbGllbnRJRCEiKTsKcmV0dXJuOwp9cmV0dXJuIGMub3BlbihudWxsLGQsYik7Cn07ClRlbGVyaWsuV2ViLlVJLlJhZFdpbmRvd01hbmFnZXI9ZnVuY3Rpb24oYSl7VGVsZXJpay5XZWIuVUkuUmFkV2luZG93TWFuYWdlci5pbml0aWFsaXplQmFzZSh0aGlzLFthXSk7CnRoaXMuX3dpbmRvd0lEcz1bXTsKdGhpcy5fd2luZG93cz1bXTsKdGhpcy5fcHJlc2VydmVDbGllbnRTdGF0ZT1mYWxzZTsKdGhpcy5PcGVuPXRoaXMub3BlbjsKdGhpcy5HZXRXaW5kb3dCeU5hbWU9dGhpcy5nZXRXaW5kb3dCeU5hbWU7CnRoaXMuR2V0V2luZG93QnlJZD10aGlzLmdldFdpbmRvd0J5SWQ7CnRoaXMuR2V0QWN0aXZlV2luZG93PXRoaXMuZ2V0QWN0aXZlV2luZG93Owp0aGlzLkdldFdpbmRvd09iamVjdHM9dGhpcy5nZXRfd2luZG93czsKdGhpcy5HZXRXaW5kb3dzPXRoaXMuZ2V0X3dpbmRvd3M7CnRoaXMuQ2FzY2FkZT10aGlzLmNhc2NhZGU7CnRoaXMuVGlsZT10aGlzLnRpbGU7CnRoaXMuUmVzdG9yZUFsbD10aGlzLnJlc3RvcmVBbGw7CnRoaXMuTWF4aW1pemVBbGw9dGhpcy5tYXhpbWl6ZUFsbDsKdGhpcy5NaW5pbWl6ZUFsbD10aGlzLm1pbmltaXplQWxsOwp0aGlzLlNob3dBbGw9dGhpcy5zaG93QWxsOwp0aGlzLkNsb3NlQWxsPXRoaXMuY2xvc2VBbGw7CnRoaXMuQ2xvc2VBY3RpdmVXaW5kb3c9dGhpcy5jbG9zZUFjdGl2ZVdpbmRvdzsKdGhpcy5NaW5pbWl6ZUFjdGl2ZVdpbmRvdz10aGlzLm1pbmltaXplQWN0aXZlV2luZG93Owp0aGlzLlJlc3RvcmVBY3RpdmVXaW5kb3c9dGhpcy5yZXN0b3JlQWN0aXZlV2luZG93Owp9OwpUZWxlcmlrLldlYi5VSS5SYWRXaW5kb3dNYW5hZ2VyLnByb3RvdHlwZT17Z2V0X3pJbmRleDpmdW5jdGlvbigpe3JldHVybiBUZWxlcmlrLldlYi5VSS5SYWRXaW5kb3dVdGlscy5fekluZGV4Owp9LHNldF96SW5kZXg6ZnVuY3Rpb24oYSl7aWYoaXNOYU4oYSkpe3JldHVybjsKfVRlbGVyaWsuV2ViLlVJLlJhZFdpbmRvd1V0aWxzLl96SW5kZXg9YTsKfSxpbml0aWFsaXplOmZ1bmN0aW9uKGEpe3RyeXt2YXIgYz10aGlzLmdldF9lbGVtZW50KCkuc3R5bGUuekluZGV4OwppZihjKXt0aGlzLnNldF96SW5kZXgoYyk7Cn19Y2F0Y2goYil7fXRoaXMuX2luaXRpYWxpemUoKTsKdGhpcy5fcmVnaXN0ZXJBc1BhZ2VNYW5hZ2VyKCk7CmlmKHRoaXMuZ2V0X3ByZXNlcnZlQ2xpZW50U3RhdGUoKSl7dGhpcy5yZXN0b3JlU3RhdGUoKTsKfX0sZGlzcG9zZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0X3ByZXNlcnZlQ2xpZW50U3RhdGUoKTsKaWYoYSl7dGhpcy5zYXZlU3RhdGUoKTsKfXRoaXMuX2Rpc3Bvc2VXaW5kb3dzKCk7CnRoaXMuX3dpbmRvd3M9bnVsbDsKVGVsZXJpay5XZWIuVUkuUmFkV2luZG93TWFuYWdlci5jYWxsQmFzZU1ldGhvZCh0aGlzLCJkaXNwb3NlIik7Cn0sb3BlbjpmdW5jdGlvbihiLGMsYSl7dmFyIGU9dGhpcy5nZXRXaW5kb3dCeU5hbWUoYyk7CmlmKCFlKXtpZighYyl7Yz10aGlzLmdldF9pZCgpK3RoaXMuX2dldFVuaXF1ZUlkKCk7Cn1lPXRoaXMuX2NyZWF0ZVdpbmRvdyhjLGEpOwp2YXIgZD10aGlzLmdldF9lbGVtZW50KCkuY2xhc3NOYW1lOwppZihkKXtlLnNldF9jc3NDbGFzcyhkLnJlcGxhY2UoL14gLywiIikpOwp9fWVsc2V7aWYoYSYmdGhpcy5nZXRfbmF2aWdhdGVVcmwoKSl7ZS5fZG9ja01vZGU9ZmFsc2U7Cn19aWYoYiYmIWUuZ2V0X3JlbG9hZE9uU2hvdygpJiZlLl9pZnJhbWUmJmUuX2lmcmFtZS5zcmMhPWIpe2Uuc2V0VXJsKGIpOwp9ZWxzZXtpZihiKXtlLl9uYXZpZ2F0ZVVybD1iOwp9fWUuc2hvdygpOwpyZXR1cm4gZTsKfSxyYWRhbGVydDpmdW5jdGlvbihiLGEsZSxmLGcsYyl7dmFyIGQ9dGhpcy5fZ2V0U3RhbmRhcmRQb3B1cCgiYWxlcnQiLGIsbnVsbCxjKTsKaWYodHlwZW9mKGYpIT0idW5kZWZpbmVkIil7ZC5zZXRfdGl0bGUoZik7Cn1kLnNldFNpemUoYT9hOjI4MCxlP2U6MjAwKTsKZC5zZXRfY2xpZW50Q2FsbEJhY2tGdW5jdGlvbihmdW5jdGlvbihoLGope2lmKGcpe2coaik7Cn19KTsKZC5jZW50ZXIoKTsKZC5zaG93KCk7CnJldHVybiBkOwp9LHJhZGNvbmZpcm06ZnVuY3Rpb24oYyxoLGEsZixiLGcsZCl7dmFyIGU9dGhpcy5fZ2V0U3RhbmRhcmRQb3B1cCgiY29uZmlybSIsYyxudWxsLGQpOwppZih0eXBlb2YoZykhPSJ1bmRlZmluZWQiKXtlLnNldF90aXRsZShnKTsKfWUuc2V0U2l6ZShhP2E6MjgwLGY/ZjoyMDApOwplLnNldF9jbGllbnRDYWxsQmFja0Z1bmN0aW9uKGZ1bmN0aW9uKGosayl7aWYoaCl7aChrKTsKfX0pOwplLmNlbnRlcigpOwplLnNob3coKTsKcmV0dXJuIGU7Cn0scmFkcHJvbXB0OmZ1bmN0aW9uKGMsaixhLGUsYixnLGgpe3ZhciBkPXRoaXMuX2dldFN0YW5kYXJkUG9wdXAoInByb21wdCIsYyxoKTsKaWYodHlwZW9mKGcpIT0idW5kZWZpbmVkIil7ZC5zZXRfdGl0bGUoZyk7Cn1kLnNldFNpemUoYT9hOjI4MCxlP2U6MjAwKTsKZC5zZXRfY2xpZW50Q2FsbEJhY2tGdW5jdGlvbihmdW5jdGlvbihrLGwpe2lmKGope2oobCk7Cn19KTsKZC5jZW50ZXIoKTsKZC5zaG93KCk7CmlmKGgmJiR0ZWxlcmlrLmlzSUUpe3ZhciBmPWQuZ2V0X3BvcHVwRWxlbWVudCgpLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJJTlBVVCIpWzBdOwppZihmKXtmLnZhbHVlPWg7Cn19cmV0dXJuIGQ7Cn0sZ2V0QWN0aXZlV2luZG93OmZ1bmN0aW9uKCl7cmV0dXJuIFRlbGVyaWsuV2ViLlVJLlJhZFdpbmRvd0NvbnRyb2xsZXIuZ2V0X2FjdGl2ZVdpbmRvdygpOwp9LGdldFdpbmRvd0J5SWQ6ZnVuY3Rpb24oYyl7dmFyIGI9dGhpcy5nZXRfd2luZG93cygpOwpmb3IodmFyIGE9MDsKYTxiLmxlbmd0aDsKYSsrKXt2YXIgZD1iW2FdOwppZihjPT1kLmdldF9pZCgpKXtyZXR1cm4gZDsKfX1yZXR1cm4gbnVsbDsKfSxnZXRXaW5kb3dCeU5hbWU6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5nZXRfd2luZG93cygpOwppZighYyl7cmV0dXJuIG51bGw7Cn1mb3IodmFyIGI9MDsKYjxjLmxlbmd0aDsKYisrKXt2YXIgZD1jW2JdOwppZihhPT1kLmdldF9uYW1lKCkpe3JldHVybiBkOwp9fXJldHVybiBudWxsOwp9LHJlbW92ZVdpbmRvdzpmdW5jdGlvbihjKXtpZighYyl7cmV0dXJuOwp9dmFyIGI9dGhpcy5nZXRXaW5kb3dCeU5hbWUoYy5nZXRfbmFtZSgpKTsKdmFyIGE9dGhpcy5nZXRfd2luZG93cygpOwppZihiKXtBcnJheS5yZW1vdmUoYSxiKTsKfX0sX2dldFVuaXF1ZUlkOmZ1bmN0aW9uKCl7cmV0dXJuIiIrKG5ldyBEYXRlKCktMTAwKTsKfSxfaW5pdGlhbGl6ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuX3dpbmRvd0lEczsKZm9yKHZhciBiPTA7CmI8YS5sZW5ndGg7CmIrKyl7dmFyIGM9YVtiXTsKdmFyIGQ9JGZpbmQoYyk7CmlmKCFkKXtjb250aW51ZTsKfWQuc2V0X3dpbmRvd01hbmFnZXIodGhpcyk7CnRoaXMuX3dpbmRvd3NbdGhpcy5fd2luZG93cy5sZW5ndGhdPWQ7Cn19LF9kaXNwb3NlV2luZG93czpmdW5jdGlvbigpe2Zvcih2YXIgYT0wOwphPHRoaXMuX3dpbmRvd3MubGVuZ3RoOwphKyspe3ZhciBiPXRoaXMuX3dpbmRvd3NbYV07CmlmKGIuaXNDbG9uZWQoKSl7Yi5kaXNwb3NlKCk7Cn19dGhpcy5fd2luZG93cz1bXTsKfSxjbGVhckNsb25lQ2FjaGU6ZnVuY3Rpb24oKXt0aGlzLl9fY2xvbmVkUHJvcGVydGllc19fPW51bGw7Cn0sX2NyZWF0ZVdpbmRvdzpmdW5jdGlvbihiLGEpe3ZhciBjPXRoaXMuY2xvbmUoYik7CmMuc2V0X21vZGFsKGMuaXNNb2RhbCgpKTsKYy5zZXRfbmFtZShiKTsKdGhpcy5fd2luZG93c1t0aGlzLl93aW5kb3dzLmxlbmd0aF09YzsKYy5zZXRfd2luZG93TWFuYWdlcih0aGlzKTsKaWYoYSl7Yy5zZXRfY29udGVudEVsZW1lbnQoYSk7CmMuX2RvY2tNb2RlPXRydWU7CmMuc2V0X2JlaGF2aW9ycyhjLmdldF9iZWhhdmlvcnMoKSZ+VGVsZXJpay5XZWIuVUkuV2luZG93QmVoYXZpb3JzLlJlbG9hZCk7Cn1yZXR1cm4gYzsKfSxfcmVwbGFjZUxvY2FsaXphdGlvbjpmdW5jdGlvbihkLGMpe3ZhciBhPS8jI0xPQ1xbKC4qPylcXSMjLzsKd2hpbGUoZC5tYXRjaChhKSl7dmFyIGU9dGhpcy5fZ2V0TG9jYWxpemF0aW9uU3RyaW5nKFJlZ0V4cC4kMSk7CnZhciBiPWU/ZToiIjsKZD1kLnJlcGxhY2UoYSxiKTsKfXJldHVybiBkOwp9LF9nZXRTdGFuZGFyZFBvcHVwOmZ1bmN0aW9uKGosZSxrLGwpe3ZhciBnPXRoaXMuX2NyZWF0ZVdpbmRvdyhqK3RoaXMuX2dldFVuaXF1ZUlkKCksZmFsc2UpOwpnLnNldF9kZXN0cm95T25DbG9zZSh0cnVlKTsKZy5zZXRfcmVzdHJpY3Rpb25ab25lSUQobnVsbCk7Cmcuc2V0X21vZGFsKHRydWUpOwplPWUucmVwbGFjZSgvXCQvZywiJCQkIik7CnZhciBhPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZ2V0X2lkKCkrIl8iK2oudG9Mb3dlckNhc2UoKSsidGVtcGxhdGUiKTsKdmFyIGI9JHRlbGVyaWsuaXNJRSYmISR0ZWxlcmlrLmlzSUU5TW9kZT8iJyciOiIiOwp2YXIgYz10aGlzLl9zdHJpbmdGb3JtYXQoYS5pbm5lckhUTUwsZy5nZXRfaWQoKSxlLGs/azpiKTsKYz10aGlzLl9yZXBsYWNlTG9jYWxpemF0aW9uKGMsVGVsZXJpay5XZWIuVUkuUmFkV2luZG93VXRpbHMuTG9jYWxpemF0aW9uKTsKdmFyIGQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CmQuaW5uZXJIVE1MPWM7CmQuaWQ9Zy5nZXRfaWQoKSsiX2NvbnRlbnQiOwpnLnNldF9iZWhhdmlvcnMoVGVsZXJpay5XZWIuVUkuV2luZG93QmVoYXZpb3JzLkNsb3NlK1RlbGVyaWsuV2ViLlVJLldpbmRvd0JlaGF2aW9ycy5Nb3ZlKTsKZy5zZXRfdmlzaWJsZVN0YXR1c2JhcihmYWxzZSk7CmcuX2lzUHJlZGVmaW5lZD10cnVlOwpnLnNldF9jb250ZW50RWxlbWVudChkKTsKaWYoaiE9InByb21wdCImJmwhPW51bGwmJmwhPSJudWxsIil7dmFyIGY9JHRlbGVyaWsuJChkKS5maW5kKCJkaXZbY2xhc3MqPSdyd0RpYWxvZ1BvcHVwJ10iKVswXTsKaWYoZil7aWYobCE9IiIpe2Yuc3R5bGUuYmFja2dyb3VuZEltYWdlPSJ1cmwoJyIrbCsiJykiOwp9ZWxzZXskdGVsZXJpay4kKGYpLnJlbW92ZUNsYXNzKCJyYWQiK2opOwp9fX12YXIgaD1nLmdldF9jb250ZW50RWxlbWVudCgpLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJJTlBVVCIpWzBdOwppZighaCl7aD1nLmdldF9jb250ZW50RWxlbWVudCgpLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJBIilbMF07Cn1pZihoJiZoLmZvY3VzKXt3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBtPXRydWU7CmlmKGguc2V0QWN0aXZlKXt0cnl7aC5zZXRBY3RpdmUoKTsKbT1mYWxzZTsKfWNhdGNoKG4pe319aWYobSl7aC5mb2N1cygpOwp9fSwwKTsKfXJldHVybiBnOwp9LF9zdHJpbmdGb3JtYXQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTE7CmI8YXJndW1lbnRzLmxlbmd0aDsKYisrKXthPWEucmVwbGFjZShuZXcgUmVnRXhwKCJcXHsiKyhiLTEpKyJcXH0iLCJpZyIpLGFyZ3VtZW50c1tiXSk7Cn1yZXR1cm4gYTsKfSxfcmVnaXN0ZXJBc1BhZ2VNYW5hZ2VyOmZ1bmN0aW9uKCl7dmFyIGE9VGVsZXJpay5XZWIuVUkuV2luZG93TWFuYWdlci5NYW5hZ2VyOwp2YXIgYj10aGlzLmdldF9pZCgpOwppZihhJiZhLmdldF9pZCgpPT1iKXthLmRpc3Bvc2UoKTsKVGVsZXJpay5XZWIuVUkuV2luZG93TWFuYWdlci5NYW5hZ2VyPW51bGw7Cn1pZihhJiYhYS5nZXRfaWQoKSl7VGVsZXJpay5XZWIuVUkuV2luZG93TWFuYWdlci5NYW5hZ2VyPW51bGw7Cn1pZighVGVsZXJpay5XZWIuVUkuV2luZG93TWFuYWdlci5NYW5hZ2VyKXtUZWxlcmlrLldlYi5VSS5XaW5kb3dNYW5hZ2VyLk1hbmFnZXI9dGhpczsKfX0sc2F2ZVdpbmRvd1N0YXRlOmZ1bmN0aW9uKGMpe2lmKCFjfHwhYy5pc0NyZWF0ZWQoKSl7cmV0dXJuOwp9dmFyIGE9Yy5nZXRXaW5kb3dCb3VuZHMoKTsKdmFyIGI9KGMuaXNWaXNpYmxlKCl8fGMuaXNNaW5pbWl6ZWQoKSkrIkAiK2Eud2lkdGgrIkAiK2EuaGVpZ2h0KyJAIithLngrIkAiK2EueSsiQCIrYy5pc01pbmltaXplZCgpOwp0aGlzLl9zZXRSYWRXaW5kb3dDb29raWUoYy5nZXRfaWQoKSxiKTsKfSxzYXZlU3RhdGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldF93aW5kb3dzKCk7CmZvcihpPTA7Cmk8YS5sZW5ndGg7CmkrKyl7dmFyIGI9YVtpXTsKaWYoYi5pc0Nsb25lZCgpKXt0aGlzLnNhdmVXaW5kb3dTdGF0ZShiKTsKfX19LHJlc3RvcmVTdGF0ZTpmdW5jdGlvbigpe2Z1bmN0aW9uIGMoZyxmKXt2YXIgZT1mLnNwbGl0KCJAIik7CmlmKGUubGVuZ3RoPjEpe2lmKCJ0cnVlIj09ZVswXSYmIWcuaXNWaXNpYmxlKCkpe2cuc2hvdygpOwp9d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtpZihwYXJzZUludChlWzFdKT4wKXtnLnNldF93aWR0aChlWzFdKTsKfWlmKHBhcnNlSW50KGVbMl0pPjApe2cuc2V0X2hlaWdodChlWzJdKTsKfWlmKCJ0cnVlIj09ZVswXSl7Zy5tb3ZlVG8ocGFyc2VJbnQoZVszXSkscGFyc2VJbnQoZVs0XSkpOwp9aWYoInRydWUiPT1lWzVdKXtnLm1pbmltaXplKCk7Cn19LDEpOwp9fXZhciBhPXRoaXMuZ2V0X3dpbmRvd3MoKTsKZm9yKGk9MDsKaTxhLmxlbmd0aDsKaSsrKXt2YXIgZD1hW2ldOwp2YXIgYj10aGlzLl9nZXRSYWRXaW5kb3dDb29raWUoZC5nZXRfaWQoKSk7CmlmKGIpe2MoZCxiKTsKfX19LF9nZXRPbmx5Q29va2llOmZ1bmN0aW9uKCl7dmFyIGI9IlJhZFdpbmRvd0Nvb2tpZSI7CnZhciBkPWRvY3VtZW50LmNvb2tpZS5zcGxpdCgiOyAiKTsKZm9yKHZhciBjPTA7CmM8ZC5sZW5ndGg7CmMrKyl7dmFyIGE9ZFtjXS5zcGxpdCgiPSIpOwppZihiPT1hWzBdKXtyZXR1cm4gYVsxXTsKfX1yZXR1cm4gbnVsbDsKfSxfc2V0UmFkV2luZG93Q29va2llOmZ1bmN0aW9uKGIsZil7Yj0iWyIrYisiXSI7CnZhciBkPXRoaXMuX2dldE9ubHlDb29raWUoKTsKdmFyIGM9IiI7CnZhciBnPSIiOwppZihkKXt2YXIgZT1kLnNwbGl0KGIpOwppZihlJiZlLmxlbmd0aD4xKXtjPWVbMF07Cmc9ZVsxXS5zdWJzdHIoZVsxXS5pbmRleE9mKCIjIikrMSk7Cn1lbHNle2c9ZDsKfX12YXIgYT1uZXcgRGF0ZSgpOwphLnNldEZ1bGxZZWFyKGEuZ2V0RnVsbFllYXIoKSsxMCk7CmRvY3VtZW50LmNvb2tpZT0iUmFkV2luZG93Q29va2llPSIrKGMrYisiLSIrZisiIyIrZykrIjtwYXRoPS87ZXhwaXJlcz0iK2EudG9VVENTdHJpbmcoKSsiOyI7Cn0sX2dldFJhZFdpbmRvd0Nvb2tpZTpmdW5jdGlvbihiKXt2YXIgZD10aGlzLl9nZXRPbmx5Q29va2llKCk7CmlmKCFkKXtyZXR1cm47Cn12YXIgYz1udWxsOwpiPSJbIitiKyJdIjsKdmFyIGE9ZC5pbmRleE9mKGIpOwppZihhPj0wKXt2YXIgZT1hK2IubGVuZ3RoKzE7CmM9ZC5zdWJzdHJpbmcoZSxkLmluZGV4T2YoIiMiLGUpKTsKfXJldHVybiBjOwp9LGNhc2NhZGU6ZnVuY3Rpb24oKXt2YXIgZT0wOwp2YXIgYj0wOwp2YXIgZD10aGlzLl9nZXRXaW5kb3dzU29ydGVkQnlaaW5kZXgoKTsKZm9yKHZhciBjPTA7CmM8ZC5sZW5ndGg7CmMrKyl7dmFyIGE9ZFtjXTsKaWYoIWEuaXNDbG9zZWQoKSYmYS5pc1Zpc2libGUoKSl7YS5yZXN0b3JlKCk7CmEubW92ZVRvKGIsZSk7CmEuc2V0QWN0aXZlKHRydWUpOwplKz0yNTsKYis9MjU7Cn19fSx0aWxlOmZ1bmN0aW9uKCl7dmFyIGo9dGhpcy5fZ2V0V2luZG93c1NvcnRlZEJ5WmluZGV4KCk7CnZhciBtPTAsYjsKZm9yKGI9MDsKYjxqLmxlbmd0aDsKYisrKXt2YXIgZz1qW2JdOwppZighZy5pc0Nsb3NlZCgpJiZnLmlzVmlzaWJsZSgpKXttKys7Cn19dmFyIG49NTsKdmFyIGU9MDsKdmFyIGg9MTsKaWYobTw9bil7ZT1tOwp9ZWxzZXtiPTI7CndoaWxlKChtKmIpPChuKihiKzEpKSl7YisrOwppZihiPjYpe2JyZWFrOwp9fWg9YjsKZT1NYXRoLmNlaWwobS9oKTsKfXZhciBhPSR0ZWxlcmlrLmdldENsaWVudEJvdW5kcygpOwp2YXIgbD1NYXRoLmZsb29yKGEud2lkdGgvZSk7CnZhciBvPU1hdGguZmxvb3IoYS5oZWlnaHQvaCk7CnZhciBmPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0fHxkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQ7CnZhciBjPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3B8fGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOwp2YXIgZD0wOwpmb3IoYj0wOwpiPGoubGVuZ3RoOwpiKyspe3ZhciBrPWpbYl07CmlmKCFrLmlzQ2xvc2VkKCkmJmsuaXNWaXNpYmxlKCkpe2QrKzsKaWYoKGQtMSklKGUpPT0wJiZkPmUpe2MrPW87CmY9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnR8fGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdDsKfWsucmVzdG9yZSgpOwprLm1vdmVUbyhmLGMpOwprLnNldFNpemUobCxvKTsKZis9bDsKfX19LGNsb3NlQWN0aXZlV2luZG93OmZ1bmN0aW9uKCl7dGhpcy5fZXhlY3V0ZUFjdGl2ZVdpbmRvdygiY2xvc2UiKTsKfSxtaW5pbWl6ZUFjdGl2ZVdpbmRvdzpmdW5jdGlvbigpe3RoaXMuX2V4ZWN1dGVBY3RpdmVXaW5kb3coIm1pbmltaXplIik7Cn0scmVzdG9yZUFjdGl2ZVdpbmRvdzpmdW5jdGlvbigpe3RoaXMuX2V4ZWN1dGVBY3RpdmVXaW5kb3coInJlc3RvcmUiKTsKfSxjbG9zZUFsbDpmdW5jdGlvbigpe3RoaXMuX2V4ZWN1dGVBbGwoImNsb3NlIik7Cn0sc2hvd0FsbDpmdW5jdGlvbigpe3RoaXMuX2V4ZWN1dGVBbGwoInNob3ciKTsKfSxtaW5pbWl6ZUFsbDpmdW5jdGlvbigpe3RoaXMuX2V4ZWN1dGVBbGwoIm1pbmltaXplIik7Cn0sbWF4aW1pemVBbGw6ZnVuY3Rpb24oKXt0aGlzLl9leGVjdXRlQWxsKCJtYXhpbWl6ZSIpOwp9LHJlc3RvcmVBbGw6ZnVuY3Rpb24oKXt0aGlzLl9leGVjdXRlQWxsKCJyZXN0b3JlIik7Cn0sX2dldFdpbmRvd3NTb3J0ZWRCeVppbmRleDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuX3dpbmRvd3MuY29uY2F0KFtdKTsKdmFyIGI9ZnVuY3Rpb24oYyxkKXt2YXIgZT1jLmdldF96aW5kZXgoKTsKdmFyIGY9ZC5nZXRfemluZGV4KCk7CmlmKGU9PWYpe3JldHVybiAwOwp9cmV0dXJuKGU8Zj8tMToxKTsKfTsKcmV0dXJuIGEuc29ydChiKTsKfSxfZXhlY3V0ZUFsbDpmdW5jdGlvbihjKXtpZighdGhpcy5fd2luZG93cyl7cmV0dXJuOwp9dmFyIGI9dGhpcy5fd2luZG93cy5jb25jYXQoW10pOwpmb3IodmFyIGE9MDsKYTxiLmxlbmd0aDsKYSsrKXtiW2FdW2NdKCk7Cn19LF9leGVjdXRlQWN0aXZlV2luZG93OmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMuZ2V0QWN0aXZlV2luZG93KCk7CmlmKGEmJiJmdW5jdGlvbiI9PXR5cGVvZihhW2JdKSl7YVtiXSgpOwp9fSxnZXRfcHJlc2VydmVDbGllbnRTdGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wcmVzZXJ2ZUNsaWVudFN0YXRlOwp9LHNldF9wcmVzZXJ2ZUNsaWVudFN0YXRlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuX3ByZXNlcnZlQ2xpZW50U3RhdGUhPWEpe3RoaXMuX3ByZXNlcnZlQ2xpZW50U3RhdGU9YTsKfX0sc2V0X3dpbmRvd0NvbnRyb2xzOmZ1bmN0aW9uKGEpe3RoaXMuX3dpbmRvd0lEcz1ldmFsKGEpOwp0aGlzLl9kaXNwb3NlV2luZG93cygpOwp9LHNldF9jaGlsZDpmdW5jdGlvbihhKXt9LGdldF93aW5kb3dDb250cm9sczpmdW5jdGlvbigpe30sZ2V0X3dpbmRvd3M6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fd2luZG93czsKfX07ClRlbGVyaWsuV2ViLlVJLlJhZFdpbmRvd01hbmFnZXIucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuUmFkV2luZG93TWFuYWdlciIsVGVsZXJpay5XZWIuVUkuUmFkV2luZG93KTsKDQovKiBFTkQgVGVsZXJpay5XZWIuVUkuV2luZG93LlJhZFdpbmRvd01hbmFnZXIuanMgKi8NCi8qIFNUQVJUIFRlbGVyaWsuV2ViLlVJLkZvcm1EZWNvcmF0b3IuUmFkRm9ybURlY29yYXRvci5qcyAqLw0KaWYodHlwZW9mIEhUTUxFbGVtZW50IT0idW5kZWZpbmVkIiYmIUhUTUxFbGVtZW50LnByb3RvdHlwZS5pbnNlcnRBZGphY2VudEVsZW1lbnQpe0hUTUxFbGVtZW50LnByb3RvdHlwZS5pbnNlcnRBZGphY2VudEVsZW1lbnQ9ZnVuY3Rpb24oYSxiKXtzd2l0Y2goYSl7Y2FzZSJiZWZvcmVCZWdpbiI6dGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShiLHRoaXMpOwpicmVhazsKY2FzZSJhZnRlckJlZ2luIjp0aGlzLmluc2VydEJlZm9yZShiLHRoaXMuZmlyc3RDaGlsZCk7CmJyZWFrOwpjYXNlImJlZm9yZUVuZCI6dGhpcy5hcHBlbmRDaGlsZChiKTsKYnJlYWs7CmNhc2UiYWZ0ZXJFbmQiOmlmKHRoaXMubmV4dFNpYmxpbmcpe3RoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYix0aGlzLm5leHRTaWJsaW5nKTsKfWVsc2V7dGhpcy5wYXJlbnROb2RlLmFwcGVuZENoaWxkKGIpOwp9YnJlYWs7Cn19Owp9VHlwZS5yZWdpc3Rlck5hbWVzcGFjZSgiVGVsZXJpay5XZWIuVUkiKTsKJHRlbGVyaWsudG9Gb3JtRGVjb3JhdG9yPWZ1bmN0aW9uKGEpe3JldHVybiBhOwp9OwokdGVsZXJpay5maW5kRm9ybURlY29yYXRvcj0kZmluZDsKVGVsZXJpay5XZWIuVUkuUmFkRm9ybURlY29yYXRvcj1mdW5jdGlvbihhKXtUZWxlcmlrLldlYi5VSS5SYWRGb3JtRGVjb3JhdG9yLmluaXRpYWxpemVCYXNlKHRoaXMsW2FdKTsKdGhpcy5fc2tpbj0iRGVmYXVsdCI7CnRoaXMuX2VuYWJsZWQ9dHJ1ZTsKdGhpcy5fZW5hYmxlUm91bmRlZENvcm5lcnM9dHJ1ZTsKdGhpcy5fZm9ybURlY29yYXRvckNzc1VybD0iIjsKdGhpcy5fZGVjb3JhdGlvblpvbmVJRD1udWxsOwp0aGlzLl9kZWNvcmF0ZWRDb250cm9scz1UZWxlcmlrLldlYi5VSS5Gb3JtRGVjb3JhdG9yRGVjb3JhdGVkQ29udHJvbHMuRGVmYXVsdDsKdGhpcy5fYXJjTGVuZ3RoPTM7CnRoaXMuX2RlY29yYXRlZEVsZW1lbnRzPVtdOwp0aGlzLl90ZXh0SW5wdXRUeXBlcz17dGV4dDoxLHBhc3N3b3JkOjEsc2VhcmNoOjEsdXJsOjEsdGVsOjEsZW1haWw6MSxkYXRldGltZTowLGRhdGU6MCxtb250aDowLHdlZWs6MCx0aW1lOjAsImRhdGV0aW1lLWxvY2FsIjowLG51bWJlcjowLGNvbG9yOjAsZmlsZTowfTsKfTsKVGVsZXJpay5XZWIuVUkuUmFkRm9ybURlY29yYXRvci5fZ2xvYmFsUmVwbGFjZVNldHRlcnM9ZnVuY3Rpb24oZCl7aWYoJHRlbGVyaWsuaXNJRXx8JHRlbGVyaWsuaXNTYWZhcmkpe3JldHVybjsKfXZhciBiPVRlbGVyaWsuV2ViLlVJLlJhZEZvcm1EZWNvcmF0b3I7CnZhciBhPWQuX19sb29rdXBTZXR0ZXJfXygiY2hlY2tlZCIpOwppZihhKXtkLl9fZGVmaW5lU2V0dGVyX18oInJmZF9jaGVja2VkIixhKTsKZC5fX2RlZmluZVNldHRlcl9fKCJjaGVja2VkIixiLl9nbG9iYWxJbnB1dENoZWNrZWQpOwp9dmFyIGM9ZC5fX2xvb2t1cFNldHRlcl9fKCJkaXNhYmxlZCIpOwppZihjKXtkLl9fZGVmaW5lU2V0dGVyX18oInJmZF9kaXNhYmxlZCIsYyk7CmQuX19kZWZpbmVTZXR0ZXJfXygiZGlzYWJsZWQiLGIuX2dsb2JhbElucHV0RGlzYWJsZWQpOwp9fTsKVGVsZXJpay5XZWIuVUkuUmFkRm9ybURlY29yYXRvci5fZ2xvYmFsSW5wdXRDaGVja2VkPWZ1bmN0aW9uKGEpe3RoaXMucmZkX2NoZWNrZWQ9YTsKaWYodGhpcy5nZXRBdHRyaWJ1dGUmJnRoaXMuZ2V0QXR0cmlidXRlKCJfcmZkZGVjb3JhdGVkSUQiLDIpKXtUZWxlcmlrLldlYi5VSS5SYWRGb3JtRGVjb3JhdG9yLnByb3RvdHlwZS5zZXRfZWxlbWVudENoZWNrZWQodGhpcyxhKTsKfX07ClRlbGVyaWsuV2ViLlVJLlJhZEZvcm1EZWNvcmF0b3IuX2dsb2JhbElucHV0RGlzYWJsZWQ9ZnVuY3Rpb24oYSl7dGhpcy5yZmRfZGlzYWJsZWQ9YTsKVGVsZXJpay5XZWIuVUkuUmFkRm9ybURlY29yYXRvci5wcm90b3R5cGUuc2V0X2VsZW1lbnREaXNhYmxlZCh0aGlzLGEpOwp9OwpUZWxlcmlrLldlYi5VSS5SYWRGb3JtRGVjb3JhdG9yLmdldERlY29yYXRlZEVsZW1lbnQ9ZnVuY3Rpb24oYil7aWYoVGVsZXJpay5XZWIuVUkuUmFkRm9ybURlY29yYXRvci5pc0J1dHRvbihiKSYmU3lzLlVJLkRvbUVsZW1lbnQuY29udGFpbnNDc3NDbGFzcyhiLCJyZmREZWNvcmF0ZWQiKSl7cmV0dXJuIGIucGFyZW50Tm9kZTsKfWVsc2V7dHJ5e3JldHVybiAkZ2V0KGIuX3JmZGRlY29yYXRlZElEKTsKfWNhdGNoKGEpe3JldHVybiBudWxsOwp9fX07ClRlbGVyaWsuV2ViLlVJLlJhZEZvcm1EZWNvcmF0b3IuaXNCdXR0b249ZnVuY3Rpb24oYSl7dHJ5e3ZhciBiPWEudGFnTmFtZS50b0xvd2VyQ2FzZSgpOwp2YXIgZD1hLnR5cGUudG9Mb3dlckNhc2UoKTsKcmV0dXJuIGI9PSJidXR0b24ifHwoYj09ImlucHV0IiYmKGQ9PSJidXR0b24ifHxkPT0ic3VibWl0Inx8ZD09InJlc2V0IikpOwp9Y2F0Y2goYyl7cmV0dXJuIGZhbHNlOwp9fTsKVGVsZXJpay5XZWIuVUkuUmFkRm9ybURlY29yYXRvci5zZXRfZW5hYmxlZD1mdW5jdGlvbihhLGUpe2EuZGlzYWJsZWQ9IWU7CnZhciBiPXRoaXMuZ2V0RGVjb3JhdGVkRWxlbWVudChhKTsKaWYoIWIpe3JldHVybjsKfXZhciBjPWZ1bmN0aW9uKGYsZyl7aWYoZyl7U3lzLlVJLkRvbUVsZW1lbnQucmVtb3ZlQ3NzQ2xhc3MoYixmKTsKfWVsc2V7U3lzLlVJLkRvbUVsZW1lbnQuYWRkQ3NzQ2xhc3MoYixmKTsKfX07CnZhciBkPShhLnRhZ05hbWU9PSJTRUxFQ1QiPyJyZmRTZWxlY3REaXNhYmxlZCI6InJmZElucHV0RGlzYWJsZWQiKTsKYyhkLGUpOwp9OwppZih0eXBlb2YoSFRNTElucHV0RWxlbWVudCkhPSJ1bmRlZmluZWQiKXt2YXIgZGVjb3JhdG9yQ2xhc3M9VGVsZXJpay5XZWIuVUkuUmFkRm9ybURlY29yYXRvcjsKZGVjb3JhdG9yQ2xhc3MuX2dsb2JhbFJlcGxhY2VTZXR0ZXJzKEhUTUxJbnB1dEVsZW1lbnQucHJvdG90eXBlKTsKZGVjb3JhdG9yQ2xhc3MuX2dsb2JhbFJlcGxhY2VTZXR0ZXJzKEhUTUxCdXR0b25FbGVtZW50LnByb3RvdHlwZSk7Cn1UZWxlcmlrLldlYi5VSS5SYWRGb3JtRGVjb3JhdG9yLmluaXRpYWxpemVQYWdlPWZ1bmN0aW9uKGgsYyxiLGUpe2lmKCEkZmluZChoKSl7dmFyIGQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTsKZC5pZD1oKyJfaGlkZGVuSW5wdXRzU3R5bGUiOwp2YXIgZz1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdOwpnLmFwcGVuZENoaWxkKGQpOwp2YXIgYT0iYnV0dG9uLCBpbnB1dFt0eXBlPSdzdWJtaXQnXSwgaW5wdXRbdHlwZT0ncmVzZXQnXSwgaW5wdXRbdHlwZT0nYnV0dG9uJ10sIGlucHV0W3R5cGU9J2NoZWNrYm94J10sIGlucHV0W3R5cGU9J3JhZGlvJ10sIHNlbGVjdCB7IHZpc2liaWxpdHk6IGhpZGRlbiAhaW1wb3J0YW50OyB9IjsKYSs9IiBsYWJlbCB7IGxpbmUtaGVpZ2h0OjE3cHg7fSI7CnZhciBmPWM/JGdldChjKTpkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7CmlmKCR0ZWxlcmlrLmlzU2FmYXJpfHwkdGVsZXJpay5pc0lFNnx8IWYpe2ErPSJpbnB1dCwgdGV4dGFyZWEsIGJ1dHRvbiwgc2VsZWN0IHsgdmlzaWJpbGl0eTogaGlkZGVuICFpbXBvcnRhbnQ7IH0iOwphKz0iaW5wdXQsIHRleHRhcmVhLCBmaWVsZHNldCB7IGJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQ7IGJvcmRlci13aWR0aDoxcHg7IGJvcmRlci1zdHlsZTpzb2xpZDsgfSI7Cn1pZih0eXBlb2YoVGVsZXJpay5XZWIuVUkuUmFkQnV0dG9uKSE9InVuZGVmaW5lZCIpe2ErPSIgaW5wdXQucmJEZWNvcmF0ZWQgeyB2aXNpYmlsaXR5OiB2aXNpYmxlICFpbXBvcnRhbnQ7IH0iOwp9aWYoJHRlbGVyaWsuaXNJRSl7dHJ5e2lmKGQuc3R5bGVTaGVldCl7ZC5zdHlsZVNoZWV0LmNzc1RleHQ9YTsKfX1jYXRjaChpKXt9fWVsc2V7ZFskdGVsZXJpay5pc1NhZmFyaT8iaW5uZXJUZXh0IjoiaW5uZXJIVE1MIl09YTsKfX1UZWxlcmlrLldlYi5VSS5SYWRGb3JtRGVjb3JhdG9yLmFkZEdsb2JhbENsYXNzZXNUb1Jvb3RFbGVtZW50KGYsYixlKTsKfTsKVGVsZXJpay5XZWIuVUkuUmFkRm9ybURlY29yYXRvci5hZGRHbG9iYWxDbGFzc2VzVG9Sb290RWxlbWVudD1mdW5jdGlvbihmLGEsYil7aWYoIWYpe3JldHVybjsKfVRlbGVyaWsuV2ViLlVJLlJhZEZvcm1EZWNvcmF0b3IucmVtb3ZlR2xvYmFsQ2xhc3Nlc1RvUm9vdEVsZW1lbnQoZik7CnZhciBlPWY7CmlmKGU9PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudCl7ZT0oZG9jdW1lbnQuZm9ybXMmJmRvY3VtZW50LmZvcm1zLmxlbmd0aD4wKT9kb2N1bWVudC5mb3Jtc1swXTpkb2N1bWVudC5ib2R5Owp9aWYoJHRlbGVyaWsuaXNSaWdodFRvTGVmdChlKSl7U3lzLlVJLkRvbUVsZW1lbnQuYWRkQ3NzQ2xhc3MoZSwicmZkUnRsIik7Cn12YXIgYz1TeXMuVUkuRG9tRWxlbWVudC5hZGRDc3NDbGFzczsKYyhmLCJSYWRGb3JtIik7CmlmKGEpe2MoZiwiUmFkRm9ybV8iK2EpOwp9dmFyIGQ9VGVsZXJpay5XZWIuVUkuRm9ybURlY29yYXRvckRlY29yYXRlZENvbnRyb2xzOwppZigoYiZkLkJ1dHRvbnMpPjApe2MoZiwicmZkQnV0dG9uIik7Cn1pZigoYiZkLlNjcm9sbGJhcnMpPjApe2MoZiwicmZkU2Nyb2xsQmFycyIpOwp9aWYoKGImZC5ab25lKT4wKXtjKGYsInJmZFpvbmUiKTsKfWlmKChiJmQuTGFiZWwpPjApe2MoZiwicmZkTGFiZWwiKTsKfWlmKChiJmQuSDRINUg2KT4wKXtjKGYsInJmZEhlYWRpbmciKTsKfWlmKChiJmQuVGV4dGJveCk+MCl7YyhmLCJyZmRUZXh0Ym94Iik7Cn1pZigoYiZkLlRleHRhcmVhKT4wKXtjKGYsInJmZFRleHRhcmVhIik7Cn1pZigoYiZkLkZpZWxkc2V0KT4wKXtjKGYsInJmZEZpZWxkc2V0Iik7Cn1pZigoYiZkLlJhZGlvQnV0dG9ucyk+MCl7YyhmLCJyZmRSYWRpbyIpOwp9aWYoKGImZC5DaGVja0JveGVzKT4wKXtjKGYsInJmZENoZWNrYm94Iik7Cn1pZigoYiZkLkdyaWRGb3JtRGV0YWlsc1ZpZXdzKT4wKXtjKGYsInJmZEdyaWRzIik7Cn19OwpUZWxlcmlrLldlYi5VSS5SYWRGb3JtRGVjb3JhdG9yLnJlbW92ZUdsb2JhbENsYXNzZXNUb1Jvb3RFbGVtZW50PWZ1bmN0aW9uKGEpe2EuY2xhc3NOYW1lPWEuY2xhc3NOYW1lLnJlcGxhY2UoL3JmZFJ0bHxSYWRGb3JtX1x3K3xSYWRGb3JtfHJmZEJ1dHRvbnxyZmRTY3JvbGxCYXJzfHJmZFpvbmV8cmZkTGFiZWx8cmZkSGVhZGluZ3xyZmRUZXh0Ym94fHJmZFRleHRhcmVhfHJmZEZpZWxkc2V0fHJmZFJhZGlvfHJmZENoZWNrYm94fHJmZEdyaWRzL2csIiIpLnRyaW0oKTsKfTsKVGVsZXJpay5XZWIuVUkuUmFkRm9ybURlY29yYXRvci5wcm90b3R5cGU9e2luaXRpYWxpemU6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLmdldF9kZWNvcmF0aW9uWm9uZUlEKCk7CnZhciBhOwppZihiKXthPSRnZXQoYik7CmlmKGEpe3RoaXMuZGVjb3JhdGUoYSk7Cn19ZWxzZXt0aGlzLmRlY29yYXRlKCk7Cn10aGlzLl9zaG93SGlkZGVuSW5wdXRzKCk7CmlmKGImJiFhKXtyZXR1cm47Cn13aW5kb3cuc2V0VGltZW91dChGdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLGZ1bmN0aW9uKCl7dGhpcy5fdHJhY2tQYWdlVXBkYXRlcygpOwppZihTeXMuV2ViRm9ybXMmJlN5cy5XZWJGb3Jtcy5QYWdlUmVxdWVzdE1hbmFnZXIpe3RoaXMuX3BhZ2VMb2FkaW5nSGFuZGxlcj1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX2NsZWFuVXApOwpTeXMuV2ViRm9ybXMuUGFnZVJlcXVlc3RNYW5hZ2VyLmdldEluc3RhbmNlKCkuYWRkX3BhZ2VMb2FkaW5nKHRoaXMuX3BhZ2VMb2FkaW5nSGFuZGxlcik7Cn19KSwwKTsKfSxfY2xlYW5VcDpmdW5jdGlvbihhLGIpe3ZhciBjPWIuZ2V0X3BhbmVsc0RlbGV0aW5nKCkuY29uY2F0KGIuZ2V0X3BhbmVsc1VwZGF0aW5nKCkpOwp0aGlzLl9kaXNwb3NlQ2hhbmdlZEVsZW1lbnRzKGMpOwp9LF9zaG93SGlkZGVuSW5wdXRzOmZ1bmN0aW9uKCl7dmFyIGI9JGdldCh0aGlzLmdldF9pZCgpKyJfaGlkZGVuSW5wdXRzU3R5bGUiKTsKaWYoYil7Yi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpOwp9aWYoISR0ZWxlcmlrLmlzSUUpe3JldHVybjsKfXZhciBnPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJJTlBVVCIpOwpmb3IodmFyIGU9MDsKZTxnLmxlbmd0aDsKZSsrKXt2YXIgZD1nW2VdOwpkLnN0eWxlLnpvb209IjEiOwpkLnN0eWxlLnpvb209IiI7Cn12YXIgYT1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiU0VMRUNUIik7CmZvcih2YXIgYz0wOwpjPGEubGVuZ3RoOwpjKyspe3ZhciBmPWFbY107CmYuc3R5bGUuem9vbT0iMSI7CmYuc3R5bGUuem9vbT0iIjsKfX0sZGVjb3JhdGU6ZnVuY3Rpb24oYyxiKXtpZighdGhpcy5nZXRfZW5hYmxlZCgpKXtyZXR1cm47Cn1pZighYyl7Yz1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7Cn1pZihmYWxzZSE9Yil7VGVsZXJpay5XZWIuVUkuUmFkRm9ybURlY29yYXRvci5hZGRHbG9iYWxDbGFzc2VzVG9Sb290RWxlbWVudChjLHRoaXMuX3NraW4sdGhpcy5fZGVjb3JhdGVkQ29udHJvbHMpOwp9dmFyIGE9VGVsZXJpay5XZWIuVUkuRm9ybURlY29yYXRvckRlY29yYXRlZENvbnRyb2xzOwppZighJHRlbGVyaWsuaXNTYWZhcmkmJih0aGlzLl9kZWNvcmF0ZWRDb250cm9scyZhLkNoZWNrQm94ZXMpPjApe3RoaXMuZGVjb3JhdGVJbnB1dHMoImNoZWNrYm94IixjKTsKfWlmKCEkdGVsZXJpay5pc1NhZmFyaSYmKHRoaXMuX2RlY29yYXRlZENvbnRyb2xzJmEuUmFkaW9CdXR0b25zKT4wKXt0aGlzLmRlY29yYXRlSW5wdXRzKCJyYWRpbyIsYyk7Cn1pZigodGhpcy5fZGVjb3JhdGVkQ29udHJvbHMmYS5CdXR0b25zKT4wKXt0aGlzLmRlY29yYXRlQnV0dG9ucyhjKTsKfWlmKCh0aGlzLl9kZWNvcmF0ZWRDb250cm9scyZhLlRleHRhcmVhKT4wKXt0aGlzLmRlY29yYXRlVGV4dGFyZWFzKGMpOwp9aWYoKHRoaXMuX2RlY29yYXRlZENvbnRyb2xzJmEuU2VsZWN0KT4wKXt0aGlzLmRlY29yYXRlU2VsZWN0cyhjKTsKfXRoaXMuX2RlY29yYXRlRWxlbWVudHNXaXRoVmVydGljYWxDb3JuZXJzKGMpOwp9LF9kZWNvcmF0ZUVsZW1lbnRzV2l0aFZlcnRpY2FsQ29ybmVyczpmdW5jdGlvbihiKXt2YXIgYT1UZWxlcmlrLldlYi5VSS5Gb3JtRGVjb3JhdG9yRGVjb3JhdGVkQ29udHJvbHM7CmlmKCh0aGlzLl9kZWNvcmF0ZWRDb250cm9scyZhLlRleHRib3gpPjApe3RoaXMuZGVjb3JhdGVUZXh0Ym94ZXMoYik7Cn1pZigodGhpcy5fZGVjb3JhdGVkQ29udHJvbHMmYS5UZXh0YXJlYSk+MCl7dGhpcy5fZGVjb3JhdGVWZXJ0aWNhbGx5KGIsInRleHRhcmVhIik7Cn1pZigodGhpcy5fZGVjb3JhdGVkQ29udHJvbHMmYS5GaWVsZHNldCk+MCl7dGhpcy5fZGVjb3JhdGVWZXJ0aWNhbGx5KGIsImZpZWxkc2V0Iik7Cn19LGRlY29yYXRlVGV4dGJveGVzOmZ1bmN0aW9uKGcpe2lmKCFnKXtnPWRvY3VtZW50LmJvZHk7Cn12YXIgYj1TeXMuVUkuRG9tRWxlbWVudC5hZGRDc3NDbGFzczsKdmFyIGQ9Zy5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaW5wdXQiKTsKaWYoZC5sZW5ndGg9PTAmJmcudGFnTmFtZSYmZy50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJpbnB1dCIpe2Q9W2ddOwp9dmFyIGM9ZC5sZW5ndGg7CmZvcih2YXIgZj0wOwpmPGM7CmYrKyl7dmFyIGU9ZFtmXTsKdmFyIGE9ZS50eXBlLnRvTG93ZXJDYXNlKCk7CmlmKGEgaW4gdGhpcy5fdGV4dElucHV0VHlwZXMmJnRoaXMuX3RleHRJbnB1dFR5cGVzW2FdJiYhdGhpcy5fc2hvdWxkUHJldmVudERlY29yYXRpb24oZSkpe3RoaXMuX2NyZWF0ZVZlcnRpY2FsUm91bmRlZENvcm5lcnNJbnRlcm5hbChlKTsKYihlLCJyZmREZWNvcmF0ZWQiKTsKaWYoJHRlbGVyaWsuaXNJRTYpe2IoZSwicmZkSUU2VGV4dEJveCIpOwp9aWYoZS5kaXNhYmxlZCl7YihlLCJyZmRJbnB1dERpc2FibGVkIik7Cn19dGhpcy51bmlmeUNyb3NzQnJvd3NlcldpZHRoKGUpOwp9fSxfZGVjb3JhdGVWZXJ0aWNhbGx5OmZ1bmN0aW9uKGQsYSl7aWYoIWQpe2Q9ZG9jdW1lbnQuYm9keTsKfXZhciBjPWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSk7CmlmKGMubGVuZ3RoPT0wJiZkLnRhZ05hbWUmJmQudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT1hKXtjPVtkXTsKfXZhciBiPWMubGVuZ3RoOwpmb3IodmFyIGU9Yi0xOwplPj0wOwplLS0pe3RoaXMuY3JlYXRlVmVydGljYWxSb3VuZGVkQ29ybmVycyhjW2VdKTsKfX0sX2RlY29yYXRlRWxlbWVudExpc3Q6ZnVuY3Rpb24oZyxhLGQpe2lmKCFnKXtnPWRvY3VtZW50LmJvZHk7Cn12YXIgYz1nLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpOwp2YXIgYj1jLmxlbmd0aDsKZm9yKHZhciBlPTA7CmU8YjsKZSsrKXt2YXIgZj1jW2VdOwppZighZi5jbGFzc05hbWUpe2YuY2xhc3NOYW1lPWQ7Cn19fSxydW5XaGVuUGFyZW50QmVjb21lc1Zpc2libGU6ZnVuY3Rpb24oYSl7dmFyIGI9YS50YXJnZXQ7CnRoaXMucmVtb3ZlX3BhcmVudFNob3dpbmcoYik7CmIuc3R5bGUudmlzaWJpbGl0eT0iaGlkZGVuIjsKdGhpcy5fZGVjb3JhdGVFbGVtZW50c1dpdGhWZXJ0aWNhbENvcm5lcnMoYik7CnRoaXMuX2RlY29yYXRlU2VsZWN0c09uUGFyZW50U2hvd2luZyhiKTsKYi5zdHlsZS52aXNpYmlsaXR5PSIiOwp9LF9kZWNvcmF0ZVNlbGVjdHNPblBhcmVudFNob3dpbmc6ZnVuY3Rpb24oYil7dmFyIGE9VGVsZXJpay5XZWIuVUkuRm9ybURlY29yYXRvckRlY29yYXRlZENvbnRyb2xzOwppZigodGhpcy5fZGVjb3JhdGVkQ29udHJvbHMmYS5TZWxlY3QpPjApe3RoaXMuZGVjb3JhdGVTZWxlY3RzKGIpOwp9fSxjbGVhclBhcmVudFNob3dpbmdIYW5kbGVyczpmdW5jdGlvbigpe2lmKCF0aGlzLl9pbnZpc2libGVQYXJlbnRzQXJyYXkpe3JldHVybjsKfXZhciBiPXRoaXMuX2ludmlzaWJsZVBhcmVudHNBcnJheTsKZm9yKHZhciBhPTA7CmE8Yi5sZW5ndGg7CmErKyl7dGhpcy5yZW1vdmVfcGFyZW50U2hvd2luZyhiW2FdKTsKfXRoaXMuX2ludmlzaWJsZVBhcmVudHNBcnJheT1bXTsKfSxyZW1vdmVfcGFyZW50U2hvd2luZzpmdW5jdGlvbihhKXtpZih0aGlzLl9pbnZpc2libGVQYXJlbnRzQXJyYXkpe0FycmF5LnJlbW92ZSh0aGlzLl9pbnZpc2libGVQYXJlbnRzQXJyYXksYSk7Cn10aGlzLl9oYW5kbGVJbnZpc2libGVQYXJlbnQoZmFsc2UsYSk7Cn0sYWRkX3BhcmVudFNob3dpbmc6ZnVuY3Rpb24oYil7dmFyIGE9JHRlbGVyaWsuZ2V0SW52aXNpYmxlUGFyZW50KGIpOwppZighYSl7cmV0dXJuOwp9aWYoIXRoaXMuX2ludmlzaWJsZVBhcmVudHNBcnJheSl7dGhpcy5faW52aXNpYmxlUGFyZW50c0FycmF5PVtdOwp9aWYoIUFycmF5LmNvbnRhaW5zKHRoaXMuX2ludmlzaWJsZVBhcmVudHNBcnJheSxhKSl7QXJyYXkuYWRkKHRoaXMuX2ludmlzaWJsZVBhcmVudHNBcnJheSxhKTsKdGhpcy5faGFuZGxlSW52aXNpYmxlUGFyZW50KHRydWUsYSk7Cn19LF9oYW5kbGVJbnZpc2libGVQYXJlbnQ6ZnVuY3Rpb24oYSxiKXtpZighdGhpcy5fb25QYXJlbnRWaXNpYmlsaXR5Q2hhbmdlRGVsZWdhdGUpe3RoaXMuX29uUGFyZW50VmlzaWJpbGl0eUNoYW5nZURlbGVnYXRlPUZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5fb25QYXJlbnRWaXNpYmlsaXR5Q2hhbmdlKTsKfXZhciBjPXRoaXMuX29uUGFyZW50VmlzaWJpbGl0eUNoYW5nZURlbGVnYXRlOwppZihhKXtpZihiKXtpZigkdGVsZXJpay5pc0lFKXskdGVsZXJpay5hZGRIYW5kbGVyKGIsInByb3BlcnR5Y2hhbmdlIixjKTsKfWVsc2V7Yi5hZGRFdmVudExpc3RlbmVyKCJET01BdHRyTW9kaWZpZWQiLGMsZmFsc2UpOwp9fX1lbHNle2lmKGImJmMpe2lmKCR0ZWxlcmlrLmlzSUUpeyR0ZWxlcmlrLnJlbW92ZUhhbmRsZXIoYiwicHJvcGVydHljaGFuZ2UiLGMpOwp9ZWxzZXtiLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTUF0dHJNb2RpZmllZCIsYyxmYWxzZSk7Cn19fX0sX29uUGFyZW50VmlzaWJpbGl0eUNoYW5nZTpmdW5jdGlvbihiKXtpZigkdGVsZXJpay5pc0lFKXt2YXIgYj1iLnJhd0V2ZW50OwppZighYil7cmV0dXJuOwp9dmFyIGE9Yi5zcmNFbGVtZW50OwppZihiLnByb3BlcnR5TmFtZT09InN0eWxlLmRpc3BsYXkifHxiLnByb3BlcnR5TmFtZT09ImNsYXNzTmFtZSIpe3ZhciBkPSR0ZWxlcmlrLmdldEN1cnJlbnRTdHlsZShhLCJkaXNwbGF5Iik7CmlmKGQhPSJub25lIil7Yi50YXJnZXQ9YTsKdGhpcy5ydW5XaGVuUGFyZW50QmVjb21lc1Zpc2libGUoYik7Cn19fWVsc2V7aWYoYi5hdHRyTmFtZT09InN0eWxlInx8Yi5hdHRyTmFtZT09ImNsYXNzIil7dmFyIGM9Yi50YXJnZXQ7CmlmKChiLmN1cnJlbnRUYXJnZXQ9PWIudGFyZ2V0KSYmKCJub25lIiE9JHRlbGVyaWsuZ2V0Q3VycmVudFN0eWxlKGMsImRpc3BsYXkiKSkpe3dpbmRvdy5zZXRUaW1lb3V0KEZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsZnVuY3Rpb24oKXt0aGlzLnJ1bldoZW5QYXJlbnRCZWNvbWVzVmlzaWJsZShiKTsKfSksMCk7Cn19fX0sX3RyYWNrUGFnZVVwZGF0ZXM6ZnVuY3Rpb24oKXtpZihTeXMuV2ViRm9ybXMpe3RoaXMuX3BhZ2VMb2FkZWRIYW5kbGVyPUZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsZnVuY3Rpb24oaCxnKXt2YXIgZD1nLmdldF9wYW5lbHNVcGRhdGVkKCk7CmlmKCFkKXtyZXR1cm47Cn1mb3IodmFyIGM9MDsKYzxkLmxlbmd0aDsKYysrKXt2YXIgYj1kW2NdOwp2YXIgZj10aGlzLmdldF9kZWNvcmF0aW9uWm9uZUlEKCk7CmlmKGYpe3ZhciBlPSRnZXQoZik7CmlmKGUpe3ZhciBqPSR0ZWxlcmlrLmlzRGVzY2VuZGFudE9yU2VsZihiLGUpOwppZihqKXt0aGlzLmRlY29yYXRlKGUpOwp9ZWxzZXtpZigkdGVsZXJpay5pc0Rlc2NlbmRhbnRPclNlbGYoZSxiKSl7dGhpcy5kZWNvcmF0ZShiLGZhbHNlKTsKfX19fWVsc2V7dGhpcy5kZWNvcmF0ZShiLGZhbHNlKTsKfX19KTsKdmFyIGE9U3lzLldlYkZvcm1zLlBhZ2VSZXF1ZXN0TWFuYWdlci5nZXRJbnN0YW5jZSgpOwphLmFkZF9wYWdlTG9hZGVkKHRoaXMuX3BhZ2VMb2FkZWRIYW5kbGVyKTsKfX0sY3JlYXRlVmVydGljYWxSb3VuZGVkQ29ybmVyczpmdW5jdGlvbihhKXtpZihhLmNsYXNzTmFtZSYmIVN5cy5VSS5Eb21FbGVtZW50LmNvbnRhaW5zQ3NzQ2xhc3MoYSwicmZkRGVjb3JhdGVkIikpe3JldHVybjsKfXRoaXMuX2NyZWF0ZVZlcnRpY2FsUm91bmRlZENvcm5lcnNJbnRlcm5hbChhKTsKfSxfY3JlYXRlVmVydGljYWxSb3VuZGVkQ29ybmVyc0ludGVybmFsOmZ1bmN0aW9uKGIpe2lmKCF0aGlzLmdldF9lbmFibGVSb3VuZGVkQ29ybmVycygpKXtyZXR1cm47Cn1pZighJHRlbGVyaWsuaXNJRXx8JHRlbGVyaWsuaXNJRTlNb2RlKXtTeXMuVUkuRG9tRWxlbWVudC5hZGRDc3NDbGFzcyhiLCJyZmRSb3VuZGVkQ29ybmVycyIpOwpyZXR1cm47Cn12YXIgYT1iLm9mZnNldEhlaWdodDsKaWYoYT4wJiYoIm5vbmUiIT0kdGVsZXJpay5nZXRDdXJyZW50U3R5bGUoYiwiZGlzcGxheSIsIiIpKSl7dGhpcy5fd3JhcFdpdGhSb3VuZGVkQ29ybmVycyhiKTsKfWVsc2V7dGhpcy5hZGRfcGFyZW50U2hvd2luZyhiKTsKfX0sX2NoZWNrSWZFbGVtZW50V3JhcHBlZDpmdW5jdGlvbihhKXtpZighYXx8IWEucGFyZW50Tm9kZSl7cmV0dXJuIGZhbHNlOwp9dmFyIGM9YS5wYXJlbnROb2RlOwppZihjLnRhZ05hbWUudG9Mb3dlckNhc2UoKSE9InRkIil7cmV0dXJuIGZhbHNlOwp9d2hpbGUoYyYmYy50YWdOYW1lLnRvTG93ZXJDYXNlKCkhPSJ0YWJsZSIpe2M9Yy5wYXJlbnROb2RlOwp9dmFyIGI9YyYmKFN5cy5VSS5Eb21FbGVtZW50LmNvbnRhaW5zQ3NzQ2xhc3MoYywicmZkUm91bmRlZFdyYXBwZXIiKXx8U3lzLlVJLkRvbUVsZW1lbnQuY29udGFpbnNDc3NDbGFzcyhjLCJyZmRSb3VuZGVkV3JhcHBlcl9maWVsZHNldCIpKTsKcmV0dXJuIGI7Cn0sX3dyYXBXaXRoUm91bmRlZENvcm5lcnM6ZnVuY3Rpb24oYil7aWYodGhpcy5fY2hlY2tJZkVsZW1lbnRXcmFwcGVkKGIpKXtyZXR1cm47Cn12YXIgdD10aGlzLl9hcmNMZW5ndGg7CnZhciBsPXRoaXMuX2dldFdyYXBwZXJUYWJsZSh0KTsKdmFyIHU9bC5yb3dzWzBdLmNlbGxzW3RdOwpsLmNsYXNzTmFtZT1iLnRhZ05hbWUhPSJGSUVMRFNFVCI/InJmZFJvdW5kZWRXcmFwcGVyIjoicmZkUm91bmRlZFdyYXBwZXJfZmllbGRzZXQiOwp2YXIgaj1sLnN0eWxlOwpqLm1hcmdpbkxlZnQ9JHRlbGVyaWsuZ2V0Q3VycmVudFN0eWxlKGIsIm1hcmdpbkxlZnQiKTsKai5tYXJnaW5SaWdodD0kdGVsZXJpay5nZXRDdXJyZW50U3R5bGUoYiwibWFyZ2luUmlnaHQiKTsKai5tYXJnaW5Ub3A9JHRlbGVyaWsuZ2V0Q3VycmVudFN0eWxlKGIsIm1hcmdpblRvcCIpOwpqLm1hcmdpbkJvdHRvbT0kdGVsZXJpay5nZXRDdXJyZW50U3R5bGUoYiwibWFyZ2luQm90dG9tIik7CmIuc3R5bGUubWFyZ2luPSIwIjsKdmFyIHk9Yi5wYXJlbnROb2RlOwp5LnJlcGxhY2VDaGlsZChsLGIpOwp1LmFwcGVuZENoaWxkKGIpOwp2YXIgcD1iLm9mZnNldEhlaWdodDsKaWYoYi50YWdOYW1lIT0iRklFTERTRVQiKXt1LnN0eWxlLmZvbnRTaXplPSIxcHgiOwp9dmFyIG89MDsKaWYoYi50YWdOYW1lPT0iRklFTERTRVQiKXt2YXIgeD1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJMRUdFTkQiKVswXTsKaWYoeCl7dmFyIHc9eC5vZmZzZXRIZWlnaHQ7Cm89TWF0aC5mbG9vcih3LzIpOwp2YXIgdj0kdGVsZXJpay5nZXRDdXJyZW50U3R5bGUoYiwiYmFja2dyb3VuZEltYWdlIik7CmlmKHYpe2Iuc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uPSIwcHggIitvKyJweCI7Cn19fXAtPW87CnZhciB6PTI7CnZhciBhPXAtdCoyK3o7CnZhciBuPWE7CnZhciBxPSR0ZWxlcmlrLmdldEN1cnJlbnRTdHlsZShiLCJib3JkZXJUb3BDb2xvciIpOwp2YXIgZz0kdGVsZXJpay5nZXRDdXJyZW50U3R5bGUoYiwiYmFja2dyb3VuZENvbG9yIik7CnZhciBjPSR0ZWxlcmlrLmdldEN1cnJlbnRTdHlsZShiLCJiYWNrZ3JvdW5kSW1hZ2UiKTsKdmFyIGU9JHRlbGVyaWsuZ2V0Q3VycmVudFN0eWxlKGIsIm9wYWNpdHkiKTsKdmFyIGg9JHRlbGVyaWsuZ2V0Q3VycmVudFN0eWxlKGIsImZpbHRlciIpOwp2YXIgbT1sLnJvd3NbMF0uY2VsbHM7CnZhciBrPW0ubGVuZ3RoLTE7CmZvcih2YXIgZj0xOwpmPGs7CmYrKyl7aWYoZj09dCl7ej0tejsKbis9ejsKY29udGludWU7Cn12YXIgcj1tW2ZdLmZpcnN0Q2hpbGQuc3R5bGU7CmlmKG8pe3IubWFyZ2luVG9wPW8rInB4IjsKfXIuYmFja2dyb3VuZENvbG9yPWc7CnIuYmFja2dyb3VuZEltYWdlPWM7CnIuYm9yZGVyVG9wPXIuYm9yZGVyQm90dG9tPSJzb2xpZCAxcHggIitxOwpyLmhlaWdodD1uKyJweCI7CmlmKDEhPWUpe3Iub3BhY2l0eT1lOwp9ci5maWx0ZXI9aDsKbis9ejsKfXZhciBkPW1bMF0uZmlyc3RDaGlsZC5zdHlsZTsKdmFyIEE9bVtrXS5maXJzdENoaWxkLnN0eWxlOwpkLmhlaWdodD1hKyJweCI7CmQuYmFja2dyb3VuZENvbG9yPXE7CmlmKG8pe2QubWFyZ2luVG9wPW8rInB4IjsKfWlmKDEhPWUpe2Qub3BhY2l0eT1lOwp9ZC5maWx0ZXI9aDsKQS5oZWlnaHQ9ZC5oZWlnaHQ7CkEuYmFja2dyb3VuZENvbG9yPWQuYmFja2dyb3VuZENvbG9yOwpBLm1hcmdpblRvcD1kLm1hcmdpblRvcDsKQS5vcGFjaXR5PWQub3BhY2l0eTsKQS5maWx0ZXI9ZC5maWx0ZXI7CnZhciBzPWIuc3R5bGU7CnMuYm9yZGVyTGVmdFdpZHRoPSIwcHgiOwpzLmJvcmRlclJpZ2h0V2lkdGg9IjBweCI7Cn0sX2dldFdyYXBwZXJUYWJsZTpmdW5jdGlvbihhKXt2YXIgYT10aGlzLl9hcmNMZW5ndGg7CmlmKCF0aGlzLl90ZXh0Ym94V3JhcHBlcil7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGFibGUiKTsKYi5jZWxsU3BhY2luZz0wOwpiLmNlbGxQYWRkaW5nPTA7CmIuaW5zZXJ0Um93KC0xKTsKdmFyIGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CmMuaW5uZXJIVE1MPSImbmJzcDsiOwpjLmNsYXNzTmFtZT0icmZkUm91bmRlZE91dGVyIjsKdmFyIGY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CmYuY2xhc3NOYW1lPSJyZmRSb3VuZGVkSW5uZXIiOwpmLmlubmVySFRNTD0iJm5ic3A7IjsKdmFyIGc9Yi5yb3dzWzBdOwpnLmluc2VydENlbGwoLTEpLmFwcGVuZENoaWxkKGMpOwpmb3IodmFyIGU9MTsKZTxhKjI7CmUrKyl7dmFyIGQ9Zy5pbnNlcnRDZWxsKC0xKTsKaWYoZT09YSl7Y29udGludWU7Cn1kLmFwcGVuZENoaWxkKGYuY2xvbmVOb2RlKHRydWUpKTsKfWcuaW5zZXJ0Q2VsbCgtMSkuYXBwZW5kQ2hpbGQoYy5jbG9uZU5vZGUodHJ1ZSkpOwp0aGlzLl90ZXh0Ym94V3JhcHBlcj1iOwp9cmV0dXJuIHRoaXMuX3RleHRib3hXcmFwcGVyLmNsb25lTm9kZSh0cnVlKTsKfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5kaXNwb3NlSGFuZGxlcnMoKTsKdmFyIGE9U3lzLldlYkZvcm1zLlBhZ2VSZXF1ZXN0TWFuYWdlci5nZXRJbnN0YW5jZSgpOwppZih0aGlzLl9wYWdlTG9hZGVkSGFuZGxlcil7YS5yZW1vdmVfcGFnZUxvYWRlZCh0aGlzLl9wYWdlTG9hZGVkSGFuZGxlcik7CnRoaXMuX3BhZ2VMb2FkZWRIYW5kbGVyPW51bGw7Cn1pZih0aGlzLl9wYWdlTG9hZGluZ0hhbmRsZXIpe2EucmVtb3ZlX3BhZ2VMb2FkaW5nKHRoaXMuX3BhZ2VMb2FkaW5nSGFuZGxlcik7CnRoaXMuX3BhZ2VMb2FkaW5nSGFuZGxlcj1udWxsOwp9VGVsZXJpay5XZWIuVUkuUmFkRm9ybURlY29yYXRvci5jYWxsQmFzZU1ldGhvZCh0aGlzLCJkaXNwb3NlIik7Cn0sZGlzcG9zZUhhbmRsZXJzOmZ1bmN0aW9uKCl7d2hpbGUodGhpcy5fZGVjb3JhdGVkRWxlbWVudHMubGVuZ3RoKXt0aGlzLl9kaXNwb3NlRGVjb3JhdGVkRWxlbWVudEJ5VHlwZSh0aGlzLl9kZWNvcmF0ZWRFbGVtZW50cy5wb3AoKSk7Cn1pZih0aGlzLl9zZWxlY3RCb2R5Q2xpY2tEZWxlZ2F0ZSl7JHRlbGVyaWsucmVtb3ZlSGFuZGxlcihkb2N1bWVudCwoJHRlbGVyaWsuaXNUb3VjaERldmljZT8idG91Y2hlbmQiOiJjbGljayIpLHRoaXMuX3NlbGVjdEJvZHlDbGlja0RlbGVnYXRlKTsKfXRoaXMuX3NlbGVjdEJvZHlDbGlja0RlbGVnYXRlPW51bGw7CmlmKHRoaXMuX3NlbGVjdEJvZHlLZXlQcmVzc0RlbGVnYXRlKXskdGVsZXJpay5yZW1vdmVIYW5kbGVyKGRvY3VtZW50LCJrZXlkb3duIix0aGlzLl9zZWxlY3RCb2R5S2V5UHJlc3NEZWxlZ2F0ZSk7Cn10aGlzLl9zZWxlY3RCb2R5S2V5UHJlc3NEZWxlZ2F0ZT1udWxsOwp0aGlzLl9kZWNvcmF0ZWRFbGVtZW50cz1bXTsKfSxkaXNwb3NlU2VsZWN0SGFuZGxlcnM6ZnVuY3Rpb24oYixhKXtpZighYSl7JHRlbGVyaWsuY2xlYXJIYW5kbGVycyhiLmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlc1sxXSk7CmI9Yi5uZXh0U2libGluZzsKfXZhciBjPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImxpIik7CmZvcih2YXIgZD0wOwpkPGMubGVuZ3RoOwpkKyspeyR0ZWxlcmlrLmNsZWFySGFuZGxlcnMoY1tkXSk7Cn19LF9kaXNwb3NlQ2hhbmdlZEVsZW1lbnRzOmZ1bmN0aW9uKGUpe3ZhciBiPXRoaXMuX2RlY29yYXRlZEVsZW1lbnRzOwpmb3IodmFyIGE9MDsKYTxlLmxlbmd0aDsKYSsrKXt2YXIgYz0wOwp3aGlsZShjPGIubGVuZ3RoKXt2YXIgZD1iW2NdOwppZigkdGVsZXJpay5pc0Rlc2NlbmRhbnRPclNlbGYoZVthXSxkKSl7dGhpcy5fZGlzcG9zZURlY29yYXRlZEVsZW1lbnQoZCk7Cn1lbHNle2MrKzsKfX19fSxfZGlzcG9zZURlY29yYXRlZEVsZW1lbnQ6ZnVuY3Rpb24oYSl7aWYoQXJyYXkucmVtb3ZlKHRoaXMuX2RlY29yYXRlZEVsZW1lbnRzLGEpKXt0aGlzLl9kaXNwb3NlRGVjb3JhdGVkRWxlbWVudEJ5VHlwZShhKTsKfX0sX2Rpc3Bvc2VEZWNvcmF0ZWRFbGVtZW50QnlUeXBlOmZ1bmN0aW9uKGEpe2lmKCFhKXtyZXR1cm47Cn1pZihTeXMuVUkuRG9tRWxlbWVudC5jb250YWluc0Nzc0NsYXNzKGEsInJmZFNraW5uZWRCdXR0b24iKSl7dGhpcy5fZGlzcG9zZUJ1dHRvblR5cGUoYSk7Cn1lbHNle2lmKGEudGFnTmFtZT09IklOUFVUIil7dGhpcy5fZGlzcG9zZUlucHV0VHlwZShhKTsKfWVsc2V7aWYoYS50YWdOYW1lPT0iU0VMRUNUIil7dGhpcy5fZGlzcG9zZVNlbGVjdFR5cGUoYSk7Cn19fX0sX2Rpc3Bvc2VCdXR0b25UeXBlOmZ1bmN0aW9uKGEpeyR0ZWxlcmlrLmNsZWFySGFuZGxlcnMoYSk7CnZhciBiPSR0ZWxlcmlrLmdldENoaWxkQnlDbGFzc05hbWUoYSwicmZkRGVjb3JhdGVkIiwwKTsKaWYoJHRlbGVyaWsuaXNJRSl7JHRlbGVyaWsucmVtb3ZlSGFuZGxlcihiLCJwcm9wZXJ0eWNoYW5nZSIsdGhpcy5idXR0b25JbnB1dFByb3BlcnR5Q2xpY2tIYW5kbGVyRGVsZWdhdGUpOwp9ZWxzZXskdGVsZXJpay5yZW1vdmVIYW5kbGVyKGIsImZvY3VzIix0aGlzLmJ1dHRvbkZvY3VzSGFuZGxlcik7Cn19LF9kaXNwb3NlSW5wdXRUeXBlOmZ1bmN0aW9uKGIpe3RyeXskdGVsZXJpay5yZW1vdmVIYW5kbGVyKGIsImNsaWNrIix0aGlzLmlucHV0Q2xpY2tEZWxlZ2F0ZSk7Cn1jYXRjaChhKXt9aWYoJHRlbGVyaWsuaXNJRSl7dHJ5eyR0ZWxlcmlrLnJlbW92ZUhhbmRsZXIoYiwicHJvcGVydHljaGFuZ2UiLHRoaXMuaW5wdXRQcm9wZXJ0eUNsaWNrRGVsZWdhdGUpOwp9Y2F0Y2goYSl7fX19LF9kaXNwb3NlU2VsZWN0VHlwZTpmdW5jdGlvbihiKXt0cnl7dGhpcy5yZW1vdmVfcGFyZW50U2hvd2luZyhiKTsKfWNhdGNoKGEpe31pZih0aGlzLl9zZWxlY3RQcm9wZXJ0eUNoYW5nZWREZWxlZ2F0ZSl7JHRlbGVyaWsucmVtb3ZlSGFuZGxlcihiLCJwcm9wZXJ0eWNoYW5nZSIsdGhpcy5fc2VsZWN0UHJvcGVydHlDaGFuZ2VkRGVsZWdhdGUpOwp9fSxfaXNFbGlnaWJsZUZvckRlY29yYXRpb246ZnVuY3Rpb24oYSl7cmV0dXJuICFhLmNsYXNzTmFtZXx8YS5jbGFzc05hbWU9PSJhc3BOZXREaXNhYmxlZCI7Cn0sX3Nob3VsZFByZXZlbnREZWNvcmF0aW9uOmZ1bmN0aW9uKGEpe3JldHVybiBTeXMuVUkuRG9tRWxlbWVudC5jb250YWluc0Nzc0NsYXNzKGEsInJhZFByZXZlbnREZWNvcmF0ZSIpOwp9LGRlY29yYXRlVGV4dGFyZWFzOmZ1bmN0aW9uKGMpe3ZhciBkPWMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIlRFWFRBUkVBIik7CmZvcih2YXIgYj0wOwpiPGQubGVuZ3RoOwpiKyspe3ZhciBhPWRbYl07CmlmKCR0ZWxlcmlrLmlzSUU2KXthLmNsYXNzTmFtZT0icmZkSUU2VGV4dEJveCIrKGEuZGlzYWJsZWQ/IiByZmRJbnB1dERpc2FibGVkIjoiIik7Cn10aGlzLnVuaWZ5Q3Jvc3NCcm93c2VyV2lkdGgoYSk7Cn19LGRlY29yYXRlQnV0dG9uczpmdW5jdGlvbihiKXtpZighYil7Yj1kb2N1bWVudC5ib2R5Owp9dGhpcy5kZWNvcmF0ZUJ1dHRvbnNCeVRhZ05hbWUoImlucHV0IixiKTsKdGhpcy5kZWNvcmF0ZUJ1dHRvbnNCeVRhZ05hbWUoImJ1dHRvbiIsYik7CmlmKCR0ZWxlcmlrLmlzSUU2KXt2YXIgZD1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJJTlBVVCIpOwpmb3IodmFyIGE9MDsKYTxkLmxlbmd0aDsKYSsrKXt2YXIgYz1kW2FdLmF0dHJpYnV0ZXMudHlwZTsKaWYoYyYmKGMubm9kZVZhbHVlPT0iYnV0dG9uInx8Yy5ub2RlVmFsdWU9PSJzdWJtaXQifHxjLm5vZGVWYWx1ZT09InJlc2V0Iikpe2lmKGRbYV0uY2xhc3NOYW1lLnNlYXJjaCgvcmZkQnV0dG9uVHlwZS9pKT09LTEpe2RbYV0uY2xhc3NOYW1lKz0iIHJmZEJ1dHRvblR5cGUiOwp9fX19fSxkZWNvcmF0ZUJ1dHRvbnNCeVRhZ05hbWU6ZnVuY3Rpb24oYixlKXt2YXIgaD1lLmdldEVsZW1lbnRzQnlUYWdOYW1lKGIpOwpmb3IodmFyIGc9MCxjPWgubGVuZ3RoOwpnPGM7CmcrKyl7dmFyIGE9aFtnXTsKdmFyIGY9YS5nZXRBdHRyaWJ1dGUoInR5cGUiKTsKaWYoYj09ImJ1dHRvbiJ8fGY9PSJidXR0b24ifHxmPT0ic3VibWl0Inx8Zj09InJlc2V0Iil7aWYodGhpcy5faXNFbGlnaWJsZUZvckRlY29yYXRpb24oYSkpe3ZhciBkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKZC5zZXRBdHRyaWJ1dGUoImhyZWYiLCJqYXZhc2NyaXB0OnZvaWQoMCkiKTsKZC5jbGFzc05hbWU9InJmZFNraW5uZWRCdXR0b24iOwphLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGQsYSk7CmlmKCR0ZWxlcmlrLmlzSUU4JiZhLnZhbHVlKXthLnZhbHVlPWEudmFsdWUudHJpbVN0YXJ0KCk7Cn1kLmFwcGVuZENoaWxkKGEpOwp0aGlzLmRlY29yYXRlQnV0dG9uKGEpOwppZihhLmRpc2FibGVkKXtkLmNsYXNzTmFtZSs9IiByZmRJbnB1dERpc2FibGVkIjsKZC5zZXRBdHRyaWJ1dGUoImRpc2FibGVkIiwiZGlzYWJsZWQiKTsKfX19fX0sZGVjb3JhdGVCdXR0b246ZnVuY3Rpb24oYSl7YS5jbGFzc05hbWU9InJmZERlY29yYXRlZCI7CnZhciBkPWEucGFyZW50Tm9kZTsKdmFyIGU9ZnVuY3Rpb24oKXtTeXMuVUkuRG9tRWxlbWVudC5hZGRDc3NDbGFzcyhkLCJyZmRDbGlja2VkQnV0dG9uIik7Cn07CnZhciBjPWZ1bmN0aW9uKCl7U3lzLlVJLkRvbUVsZW1lbnQucmVtb3ZlQ3NzQ2xhc3MoZCwicmZkQ2xpY2tlZEJ1dHRvbiIpOwp9Owp2YXIgZj1mdW5jdGlvbihnKXt2YXIgaD1nLmtleUNvZGU7CmlmKChkLmNsYXNzTmFtZT09Zy50YXJnZXQuY2xhc3NOYW1lKSYmKGg9PTMyfHxoPT0xMykpe2EuY2xpY2soKTsKfX07CnRoaXMuYnV0dG9uRXZlbnRIYW5kbGVycz17bW91c2Vkb3duOmUsbW91c2VvdXQ6Yyxtb3VzZXVwOmMsa2V5ZG93bjpmfTsKJHRlbGVyaWsuYWRkSGFuZGxlcnMoZCx7bW91c2Vkb3duOmUsbW91c2VvdXQ6Yyxtb3VzZXVwOmMsa2V5ZG93bjpmfSk7CmlmKCEkdGVsZXJpay5pc0lFKXtpZighdGhpcy5idXR0b25Gb2N1c0hhbmRsZXIpe3RoaXMuYnV0dG9uRm9jdXNIYW5kbGVyPWZ1bmN0aW9uKGcpe2EuYmx1cigpOwp9Owp9JHRlbGVyaWsuYWRkSGFuZGxlcihhLCJmb2N1cyIsdGhpcy5idXR0b25Gb2N1c0hhbmRsZXIpOwp9ZWxzZXt9dmFyIGI9YS5nZXRBdHRyaWJ1dGUoInRhYkluZGV4Iik7CmlmKGIpe2Quc2V0QXR0cmlidXRlKCJ0YWJJbmRleCIsYik7Cn1hLnNldEF0dHJpYnV0ZSgidGFiSW5kZXgiLCItMSIpOwppZigkdGVsZXJpay5pc0lFKXt0aGlzLmJ1dHRvbklucHV0UHJvcGVydHlDbGlja0hhbmRsZXJEZWxlZ2F0ZT10aGlzLmJ1dHRvbklucHV0UHJvcGVydHlDbGlja0hhbmRsZXJEZWxlZ2F0ZXx8RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLmlucHV0UHJvcGVydHlDbGlja0hhbmRsZXIpOwokdGVsZXJpay5hZGRIYW5kbGVyKGEsInByb3BlcnR5Y2hhbmdlIix0aGlzLmJ1dHRvbklucHV0UHJvcGVydHlDbGlja0hhbmRsZXJEZWxlZ2F0ZSk7Cn1lbHNle2lmKCR0ZWxlcmlrLmlzT3BlcmEmJnRoaXMuX2dldE9wZXJhVmVyc2lvbigpPDEwLjUpe1RlbGVyaWsuV2ViLlVJLlJhZEZvcm1EZWNvcmF0b3IuX2dsb2JhbFJlcGxhY2VTZXR0ZXJzKGEpOwp9fXRoaXMuX2FkZFRvRGVjb3JhdGVkRWxlbWVudHMoZCk7Cn0sZGVjb3JhdGVJbnB1dHM6ZnVuY3Rpb24oYyxkKXtpZighZCl7ZD1kb2N1bWVudC5ib2R5Owp9dmFyIGI9ZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaW5wdXQiKTsKZm9yKHZhciBlPTA7CmU8Yi5sZW5ndGg7CmUrKyl7dmFyIGE9YltlXTsKaWYoYS50eXBlPT1jJiZ0aGlzLl9pc0VsaWdpYmxlRm9yRGVjb3JhdGlvbihhKSl7dGhpcy5kZWNvcmF0ZUlucHV0KGEpOwp9fX0sZGVjb3JhdGVJbnB1dDpmdW5jdGlvbihiKXt2YXIgYT1iLm5leHRTaWJsaW5nOwppZihhPT1udWxsfHxhLnRhZ05hbWU9PW51bGx8fGEudGFnTmFtZS50b0xvd2VyQ2FzZSgpIT0ibGFiZWwiKXthPXRoaXMuYWRkTGFiZWwoYik7Cn10aGlzLmNvbmZpZ3VyZUxhYmVsKGEsYik7CnRoaXMuX2Vuc3VyZVRoaXNEZWxlZ2F0ZSgiaW5wdXRDbGlja0RlbGVnYXRlIix0aGlzLmlucHV0Q2xpY2tIYW5kbGVyKTsKJHRlbGVyaWsuYWRkSGFuZGxlcihiLCJjbGljayIsdGhpcy5pbnB1dENsaWNrRGVsZWdhdGUpOwppZigkdGVsZXJpay5pc0lFKXt0aGlzLl9lbnN1cmVUaGlzRGVsZWdhdGUoImlucHV0UHJvcGVydHlDbGlja0RlbGVnYXRlIix0aGlzLmlucHV0UHJvcGVydHlDbGlja0hhbmRsZXIpOwokdGVsZXJpay5hZGRIYW5kbGVyKGIsInByb3BlcnR5Y2hhbmdlIix0aGlzLmlucHV0UHJvcGVydHlDbGlja0RlbGVnYXRlKTsKfWVsc2V7aWYoJHRlbGVyaWsuaXNPcGVyYSYmdGhpcy5fZ2V0T3BlcmFWZXJzaW9uKCk8MTAuNSl7VGVsZXJpay5XZWIuVUkuUmFkRm9ybURlY29yYXRvci5fZ2xvYmFsUmVwbGFjZVNldHRlcnMoYik7Cn19dGhpcy5fYWRkVG9EZWNvcmF0ZWRFbGVtZW50cyhiKTsKfSxfdHJhbnNmZXJUYWJJbmRleDpmdW5jdGlvbihjLGEpe3ZhciBiPWMuZ2V0QXR0cmlidXRlKCJ0YWJJbmRleCIpOwppZihiKXthLnNldEF0dHJpYnV0ZSgidGFiSW5kZXgiLGIpOwpjLnNldEF0dHJpYnV0ZSgidGFiSW5kZXgiLC0xKTsKfX0sZGVjb3JhdGVTZWxlY3RzOmZ1bmN0aW9uKGIpe3ZhciBjPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInNlbGVjdCIpOwppZihjLmxlbmd0aD09MCYmYi50YWdOYW1lJiZiLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09InNlbGVjdCIpe2M9W2JdOwp9Zm9yKHZhciBhPTA7CmE8Yy5sZW5ndGg7CmErKyl7dGhpcy5kZWNvcmF0ZVNlbGVjdChjW2FdKTsKfWlmKGMubGVuZ3RoPjApe2lmKCF0aGlzLl9zZWxlY3RCb2R5Q2xpY2tEZWxlZ2F0ZSl7dGhpcy5fc2VsZWN0Qm9keUNsaWNrRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9zZWxlY3RCb2R5Q2xpY2tIYW5kbGVyKTsKJHRlbGVyaWsuYWRkSGFuZGxlcihkb2N1bWVudCwoJHRlbGVyaWsuaXNUb3VjaERldmljZT8idG91Y2hlbmQiOiJjbGljayIpLHRoaXMuX3NlbGVjdEJvZHlDbGlja0RlbGVnYXRlKTsKfWlmKCR0ZWxlcmlrLmlzSUUmJiF0aGlzLl9zZWxlY3RCb2R5S2V5UHJlc3NEZWxlZ2F0ZSl7dGhpcy5fc2VsZWN0Qm9keUtleVByZXNzRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9zZWxlY3RCb2R5S2V5UHJlc3NIYW5kbGVyKTsKJHRlbGVyaWsuYWRkSGFuZGxlcihkb2N1bWVudCwia2V5ZG93biIsdGhpcy5fc2VsZWN0Qm9keUtleVByZXNzRGVsZWdhdGUpOwp9fX0sX2ZpcmVPbkNoYW5nZUV2ZW50OmZ1bmN0aW9uKGEpe2lmKCR0ZWxlcmlrLmlzSUUmJiEkdGVsZXJpay5pc0lFOU1vZGUpe3ZhciBiPWRvY3VtZW50LmNyZWF0ZUV2ZW50T2JqZWN0KCk7CmEuZmlyZUV2ZW50KCJvbmNoYW5nZSIsYik7Cn1lbHNle3ZhciBjPWRvY3VtZW50LmNyZWF0ZUV2ZW50KCJVSUV2ZW50Iik7CmMuaW5pdFVJRXZlbnQoImNoYW5nZSIsdHJ1ZSxmYWxzZSxudWxsLG51bGwpOwphLmRpc3BhdGNoRXZlbnQoYyk7Cn19LF90b2dnbGVTZWxlY3REaXNhYmxlZFN0YXRlOmZ1bmN0aW9uKGEsYyl7dmFyIGI9VGVsZXJpay5XZWIuVUkuUmFkRm9ybURlY29yYXRvci5nZXREZWNvcmF0ZWRFbGVtZW50KGEpOwppZihjKXtTeXMuVUkuRG9tRWxlbWVudC5hZGRDc3NDbGFzcyhiLCJyZmRTZWxlY3REaXNhYmxlZCIpOwp9ZWxzZXtTeXMuVUkuRG9tRWxlbWVudC5yZW1vdmVDc3NDbGFzcyhiLCJyZmRTZWxlY3REaXNhYmxlZCIpOwp9fSxfZGVIaWdobGlnaHRTZWxlY3RFbGVtZW50czpmdW5jdGlvbihiKXt2YXIgYz1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJsaSIpOwpmb3IodmFyIGE9MDsKYTxjLmxlbmd0aDsKYSsrKXtTeXMuVUkuRG9tRWxlbWVudC5yZW1vdmVDc3NDbGFzcyhjW2FdLCJyZmRTZWxlY3Rfc2VsZWN0ZWQiKTsKfX0sX2F0dGFjaFNlbGVjdFRhZ1N0YXRlQ2hhbmdlZEhhbmRsZXJzOmZ1bmN0aW9uKGEpe2lmKGEuX19sb29rdXBTZXR0ZXJfXyYmYS5fX2RlZmluZVNldHRlcl9fKXt2YXIgYj1hLl9fbG9va3VwU2V0dGVyX18oImRpc2FibGVkIik7CmlmKGIpe2EuX19kZWZpbmVTZXR0ZXJfXygiZGlzYWJsZWQiLEZ1bmN0aW9uLmNyZWF0ZUNhbGxiYWNrKGZ1bmN0aW9uKGYsZSl7ZS5jYWxsKHRoaXMsZik7ClRlbGVyaWsuV2ViLlVJLlJhZEZvcm1EZWNvcmF0b3IucHJvdG90eXBlLl90b2dnbGVTZWxlY3REaXNhYmxlZFN0YXRlKHRoaXMsZik7Cn0sYikpOwp9aWYoIWJ8fGEuZGlzYWJsZWQ9PT11bmRlZmluZWQpe2EuX19kZWZpbmVTZXR0ZXJfXygiZGlzYWJsZWQiLGZ1bmN0aW9uKGUpe3RoaXMuc2V0QXR0cmlidXRlKCJkaXNhYmxlZCIsdHlwZW9mKGUpPT09InN0cmluZyI/ZTplPyJkaXNhYmxlZCI6IiIpOwpUZWxlcmlrLldlYi5VSS5SYWRGb3JtRGVjb3JhdG9yLnByb3RvdHlwZS5fdG9nZ2xlU2VsZWN0RGlzYWJsZWRTdGF0ZSh0aGlzLGUpOwp9KTsKYS5fX2RlZmluZUdldHRlcl9fKCJkaXNhYmxlZCIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoImRpc2FibGVkIik9PT0iZGlzYWJsZWQiOwp9KTsKfXZhciBjPWEuc2VsZWN0ZWRJbmRleDsKdmFyIGQ9YS5fX2xvb2t1cFNldHRlcl9fKCJzZWxlY3RlZEluZGV4Iik7CmlmKGQpe2EuX19kZWZpbmVTZXR0ZXJfXygic2VsZWN0ZWRJbmRleCIsRnVuY3Rpb24uY3JlYXRlQ2FsbGJhY2soZnVuY3Rpb24oZyxmKXtmLmNhbGwodGhpcyxnKTsKdmFyIGU9VGVsZXJpay5XZWIuVUkuUmFkRm9ybURlY29yYXRvci5nZXREZWNvcmF0ZWRFbGVtZW50KHRoaXMpOwpUZWxlcmlrLldlYi5VSS5SYWRGb3JtRGVjb3JhdG9yLnByb3RvdHlwZS5fc2VsZWN0ZWRJbmRleENoYW5nZWQodGhpcyxlLGcpOwp9LGQpKTsKfWlmKCFkfHwhdGhpcy5fdGVzdFNlbGVjdGVkSW5kZXhTZXR0ZXIoYSxkKSl7YS5fX2RlZmluZUdldHRlcl9fKCJzZWxlY3RlZEluZGV4IixmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlbGVjdGVkSW5kZXhWYWx1ZTsKfSk7CmEuX19kZWZpbmVTZXR0ZXJfXygic2VsZWN0ZWRJbmRleCIsZnVuY3Rpb24oZyl7Zm9yKHZhciBmPTA7CmY8dGhpcy5vcHRpb25zLmxlbmd0aDsKZisrKXt0aGlzLm9wdGlvbnNbZl0uc2VsZWN0ZWQ9KGY9PWcpOwp9dGhpcy5zZWxlY3RlZEluZGV4VmFsdWU9ZzsKdmFyIGU9VGVsZXJpay5XZWIuVUkuUmFkRm9ybURlY29yYXRvci5nZXREZWNvcmF0ZWRFbGVtZW50KHRoaXMpOwpUZWxlcmlrLldlYi5VSS5SYWRGb3JtRGVjb3JhdG9yLnByb3RvdHlwZS5fc2VsZWN0ZWRJbmRleENoYW5nZWQodGhpcyxlLGcpOwp9KTsKaWYoIWEubXVsdGlwbGUpe2Euc2VsZWN0ZWRJbmRleD1jOwp9fX1lbHNle2lmKCR0ZWxlcmlrLmlzSUUpe3RoaXMuX3NlbGVjdFByb3BlcnR5Q2hhbmdlZERlbGVnYXRlPUZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5fc2VsZWN0UHJvcGVydHlDaGFuZ2VkKTsKJHRlbGVyaWsuYWRkSGFuZGxlcihhLCJwcm9wZXJ0eWNoYW5nZSIsdGhpcy5fc2VsZWN0UHJvcGVydHlDaGFuZ2VkRGVsZWdhdGUpOwp9fX0sX3Rlc3RTZWxlY3RlZEluZGV4U2V0dGVyOmZ1bmN0aW9uKGEsYyl7aWYoYS5tdWx0aXBsZSl7cmV0dXJuIGZhbHNlOwp9aWYoYyl7dHJ5e2Euc2VsZWN0ZWRJbmRleD1hLnNlbGVjdGVkSW5kZXg7CnJldHVybiBhLnNlbGVjdGVkSW5kZXghPT11bmRlZmluZWQ7Cn1jYXRjaChiKXtyZXR1cm4gZmFsc2U7Cn19ZWxzZXtyZXR1cm4gZmFsc2U7Cn19LHVwZGF0ZVNlbGVjdDpmdW5jdGlvbihhKXtpZighYSl7cmV0dXJuOwp9dGhpcy5yZW1vdmVTZWxlY3REZWNvcmF0aW9uKGEpOwp0aGlzLmRlY29yYXRlU2VsZWN0KGEpOwp9LHJlbW92ZVNlbGVjdERlY29yYXRpb246ZnVuY3Rpb24oYil7dmFyIGE9VGVsZXJpay5XZWIuVUkuUmFkRm9ybURlY29yYXRvci5nZXREZWNvcmF0ZWRFbGVtZW50KGIpOwppZihhKXthLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSk7CmIuY2xhc3NOYW1lPSIiOwppZigkdGVsZXJpay5pc0lFJiZTeXMuVUkuRG9tRWxlbWVudC5jb250YWluc0Nzc0NsYXNzKGEsInJmZFNlbGVjdCIpKXtiLnNpemU9MDsKfX19LGRlY29yYXRlU2VsZWN0OmZ1bmN0aW9uKGEpe2lmKCF0aGlzLl9pc0VsaWdpYmxlRm9yRGVjb3JhdGlvbihhKSl7cmV0dXJuOwp9dGhpcy51bmlmeUNyb3NzQnJvd3NlcldpZHRoKGEpOwp2YXIgYj0kdGVsZXJpay5nZXRTaXplKGEpOwppZihiLmhlaWdodD09MCl7dGhpcy5hZGRfcGFyZW50U2hvd2luZyhhKTsKcmV0dXJuOwp9YS5jbGFzc05hbWU9InJmZFJlYWxJbnB1dCI7CmlmKCFhLmlkKXthLmlkPXRoaXMuX2dldFVuaXF1ZUlEKCk7Cn1hLmlzTGlzdEJveD10aGlzLl9pc1NlbGVjdExpc3RCb3goYSk7CnZhciBjPWEuaXNMaXN0Qm94P3RoaXMuX2NyZWF0ZVNlbGVjdEJveChhKTp0aGlzLl9jcmVhdGVTZWxlY3RIZWFkZXIoYSk7CmMuZm9yU2VsZWN0PWEuaWQ7CmMuc2V0QXR0cmlidXRlKCJpZCIsIlNraW5uZWQiK2EuaWQpOwphLl9yZmRkZWNvcmF0ZWRJRD1jLmlkOwphLnNldEF0dHJpYnV0ZSgiX3JmZGRlY29yYXRlZElEIixjLmlkKTsKaWYoYS5kaXNhYmxlZCl7U3lzLlVJLkRvbUVsZW1lbnQuYWRkQ3NzQ2xhc3MoYywicmZkU2VsZWN0RGlzYWJsZWQiKTsKfXRoaXMuX3RyYW5zZmVyVGFiSW5kZXgoYSxjKTsKYy5zdHlsZS5wb3NpdGlvbj1hLnN0eWxlLnBvc2l0aW9uOwpjLnN0eWxlLmxlZnQ9YS5zdHlsZS5sZWZ0OwpjLnN0eWxlLnRvcD1hLnN0eWxlLnRvcDsKYy5zdHlsZS5jc3NGbG9hdD1hLnN0eWxlLmNzc0Zsb2F0OwpjLnN0eWxlLnN0eWxlRmxvYXQ9YS5zdHlsZS5zdHlsZUZsb2F0OwphLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGMsYSk7CmMuc3R5bGUud2lkdGg9Yi53aWR0aCsicHgiOwppZihiLmhlaWdodD4wJiZhLnNpemU+MCYmKCEkdGVsZXJpay5pc1RvdWNoRGV2aWNlfHwhaXNOYU4ocGFyc2VJbnQoYS5zdHlsZS5oZWlnaHQpKSkpe2Muc3R5bGUuaGVpZ2h0PWIuaGVpZ2h0KyJweCI7Cn1pZigkdGVsZXJpay5pc0lFKXthLnNpemU9MjsKfXRoaXMuX2F0dGFjaFNlbGVjdFRhZ1N0YXRlQ2hhbmdlZEhhbmRsZXJzKGEpOwp0aGlzLl9hZGRUb0RlY29yYXRlZEVsZW1lbnRzKGEpOwp9LF9jcmVhdGVTZWxlY3RIZWFkZXI6ZnVuY3Rpb24oYSl7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOwpiLnNldEF0dHJpYnV0ZSgiaHJlZiIsImphdmFzY3JpcHQ6dm9pZCgwKSIpOwpiLnNldEF0dHJpYnV0ZSgiaWQiLCJTa2lubmVkIithLmlkKTsKYi5zZXRBdHRyaWJ1dGUoInVuc2VsZWN0YWJsZSIsIm9uIik7CmIuc2V0QXR0cmlidXRlKCJ0YWJpbmRleCIsIi0xIik7ClN5cy5VSS5Eb21FbGVtZW50LmFkZENzc0NsYXNzKGIsInJmZFNlbGVjdCIpOwpTeXMuVUkuRG9tRWxlbWVudC5hZGRDc3NDbGFzcyhiLCJyZmRTZWxlY3RfIit0aGlzLl9za2luKTsKdmFyIGM9YS5zZWxlY3RlZEluZGV4Pi0xP2Eub3B0aW9uc1thLnNlbGVjdGVkSW5kZXhdOm51bGw7CnZhciBkPWMhPW51bGw/Yy50ZXh0OiIiOwppZihkKXtkPWQucmVwbGFjZSgvPC9nLCImbHQ7Iik7Cn1iLmlubmVySFRNTD0nPHNwYW4gY2xhc3M9InJmZFNlbGVjdE91dGVyIj48c3BhbiBjbGFzcz0icmZkU2VsZWN0VGV4dCI+JytkKyI8L3NwYW4+PC9zcGFuPiI7CnJldHVybiBiOwp9LF9zZWxlY3RCb2R5Q2xpY2tIYW5kbGVyOmZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0OwppZigkdGVsZXJpay5pc1RvdWNoRGV2aWNlKXt3aGlsZShiLm5vZGVUeXBlIT0xJiZiLm5vZGVUeXBlIT05KXtiPWIucGFyZW50Tm9kZTsKfX1pZih0aGlzLl9pc1NlbGVjdE9wdGdyb3VwKGIpKXtyZXR1cm47Cn12YXIgZD10aGlzLl9nZXREZWNvcmF0ZWRTZWxlY3RCb3hQYXJlbnQoYik7CmlmKGQpe2lmKHRoaXMuX2lzU2VsZWN0RWxlbWVudERpc2FibGVkKGQpKXtyZXR1cm47Cn1lbHNle3RoaXMuX29wdGlvbkNsaWNrSGFuZGxlcihhKTsKfXJldHVybjsKfXZhciBjPXRoaXMuX2dldERlY29yYXRlZFNlbGVjdEhlYWRlclBhcmVudChiKTsKaWYoYyl7aWYodGhpcy5faXNTZWxlY3RFbGVtZW50RGlzYWJsZWQoYykpe3JldHVybjsKfWVsc2V7dGhpcy5fZXhwYW5kSGVhZGVyKGMpOwp9cmV0dXJuOwp9dGhpcy5faGlkZVNlbGVjdFBvcHVwKCk7Cn0sX3NlbGVjdEJvZHlLZXlQcmVzc0hhbmRsZXI6ZnVuY3Rpb24oYSl7dmFyIGI9YS50YXJnZXQ7CmlmKGImJmIuY2xhc3NOYW1lJiZTeXMuVUkuRG9tRWxlbWVudC5jb250YWluc0Nzc0NsYXNzKGIsInJmZFJlYWxJbnB1dCIpKXt2YXIgZD1UZWxlcmlrLldlYi5VSS5SYWRGb3JtRGVjb3JhdG9yLmdldERlY29yYXRlZEVsZW1lbnQoYik7CmlmKGQmJlN5cy5VSS5Eb21FbGVtZW50LmNvbnRhaW5zQ3NzQ2xhc3MoZCwicmZkU2VsZWN0Iikpe2lmKGEuYWx0S2V5JiYoYS5rZXlDb2RlPT00MHx8YS5rZXlDb2RlPT0zOCkpe2lmKCF0aGlzLl9pc1NlbGVjdEVsZW1lbnREaXNhYmxlZChkKSl7dmFyIGM9dGhpczsKYy5fZXhwYW5kSGVhZGVyKGQpOwpyZXR1cm4gJHRlbGVyaWsuY2FuY2VsUmF3RXZlbnQoYS5yYXdFdmVudCk7Cn19aWYoYS5rZXlDb2RlPT0xM3x8YS5rZXlDb2RlPT0yNyl7dGhpcy5faGlkZVNlbGVjdFBvcHVwKCk7CnJldHVybjsKfX19fSxfaXNTZWxlY3RFbGVtZW50RGlzYWJsZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuKGEmJlN5cy5VSS5Eb21FbGVtZW50LmNvbnRhaW5zQ3NzQ2xhc3MoYSwicmZkU2VsZWN0RGlzYWJsZWQiKSk7Cn0sX2dldERlY29yYXRlZFNlbGVjdEhlYWRlclBhcmVudDpmdW5jdGlvbihhKXt3aGlsZShhJiYhU3lzLlVJLkRvbUVsZW1lbnQuY29udGFpbnNDc3NDbGFzcyhhLCJyZmRTZWxlY3QiKSl7YT1hLnBhcmVudE5vZGU7CmlmKCFhfHwhYS5wYXJlbnROb2RlKXtyZXR1cm4gbnVsbDsKfX1yZXR1cm4gYTsKfSxfZ2V0RGVjb3JhdGVkU2VsZWN0Qm94UGFyZW50OmZ1bmN0aW9uKGEpe3doaWxlKGEmJiFTeXMuVUkuRG9tRWxlbWVudC5jb250YWluc0Nzc0NsYXNzKGEsInJmZFNlbGVjdEJveCIpKXthPWEucGFyZW50Tm9kZTsKaWYoIWF8fCFhLnBhcmVudE5vZGUpe3JldHVybiBudWxsOwp9fXJldHVybiBhOwp9LF9vcHRpb25DbGlja0hhbmRsZXI6ZnVuY3Rpb24oZCl7dmFyIGo9ZC50YXJnZXQ7CmlmKGomJmoubm9kZVR5cGU9PTMpe2o9ai5wYXJlbnROb2RlOwp9dmFyIGY9dGhpcy5fZ2V0RGVjb3JhdGVkU2VsZWN0Qm94UGFyZW50KGopOwp2YXIgbD10aGlzLl9nZXRTZWxlY3RlZEluZGV4RnJvbURlY29yYXRlZEVsZW1lbnQoaixmKTsKdmFyIGE9ZjsKdmFyIG49Zi5yZmRQYXJlbnRJRD8kZ2V0KGYucmZkUGFyZW50SUQpOm51bGw7CnZhciBwPW4mJlN5cy5VSS5Eb21FbGVtZW50LmNvbnRhaW5zQ3NzQ2xhc3MobiwicmZkU2VsZWN0Iik7CmlmKHApe2E9JGdldChmLnJmZFBhcmVudElEKTsKfXZhciBtPXRoaXMuX2dldE9yaWdpbmFsU2VsZWN0KGEpOwp2YXIgaD10cnVlOwppZighcCYmbS5tdWx0aXBsZSYmKGQuY3RybEtleXx8KGQuc2hpZnRLZXkmJmYucHJldmlvdXNJbmRleD49MCkpKXtpZihkLmN0cmxLZXkpe20ub3B0aW9uc1tsXS5zZWxlY3RlZD0hbS5vcHRpb25zW2xdLnNlbGVjdGVkOwp9ZWxzZXtpZihkLnNoaWZ0S2V5JiZmLnByZXZpb3VzSW5kZXg+PTApe3ZhciBiLGM7CmlmKGw8Zi5wcmV2aW91c0luZGV4KXtiPWw7CmM9Zi5wcmV2aW91c0luZGV4Owp9ZWxzZXtjPWw7CmI9Zi5wcmV2aW91c0luZGV4Owp9Zm9yKHZhciBnPTA7Cmc8bS5vcHRpb25zLmxlbmd0aDsKZysrKXtpZihnPGJ8fGc+Yyl7bS5vcHRpb25zW2ddLnNlbGVjdGVkPWZhbHNlOwp9ZWxzZXttLm9wdGlvbnNbZ10uc2VsZWN0ZWQ9dHJ1ZTsKfX1oPWZhbHNlOwp9fX1lbHNle2lmKG0uc2VsZWN0ZWRJbmRleCE9bCl7aWYoIXAmJm0ubXVsdGlwbGUpe2Zvcih2YXIgbz0wOwpvPG0ub3B0aW9ucy5sZW5ndGg7Cm8rKyl7bS5vcHRpb25zW29dLnNlbGVjdGVkPWZhbHNlOwptLm9wdGlvbnNbb10ucmVtb3ZlQXR0cmlidXRlKCJzZWxlY3RlZCIpOwp9fWVsc2V7bS5zZWxlY3RlZEluZGV4PWw7Cn1tLm9wdGlvbnNbbF0uc2VsZWN0ZWQ9dHJ1ZTsKfX1pZighcCl7dGhpcy5fc2VsZWN0ZWRJbmRleENoYW5nZWQobSxmLG51bGwpOwp9dGhpcy5fZmlyZU9uQ2hhbmdlRXZlbnQobSk7CmlmKHApe3RoaXMuX2hpZGVTZWxlY3RQb3B1cCgpOwp0aGlzLl9zZXRTZWxlY3RIZWFkZXJUZXh0KGEsbS5vcHRpb25zW2xdLnRleHQpOwp9aWYoaCl7Zi5wcmV2aW91c0luZGV4PWw7Cn19LF9leHBhbmRIZWFkZXI6ZnVuY3Rpb24oZCl7dmFyIGI9dGhpcy5fZ2V0T3JpZ2luYWxTZWxlY3QoZCk7CnZhciBmPWQucmZkU3ViTWVudTsKaWYoZil7Zj0kZ2V0KGYpOwp9aWYoIWYpe2Y9dGhpcy5fY3JlYXRlU2VsZWN0Qm94KGIpOwp2YXIgYT1kLm93bmVyRG9jdW1lbnQ/ZC5vd25lckRvY3VtZW50LmJvZHk6ZG9jdW1lbnQuYm9keTsKYS5hcHBlbmRDaGlsZChmKTsKZC5yZmRTdWJNZW51PWYuaWQ7CmYucmZkUGFyZW50SUQ9ZC5pZDsKZi5zdHlsZS53aWR0aD1kLm9mZnNldFdpZHRoKyJweCI7CnZhciBjPWYub2Zmc2V0SGVpZ2h0OwppZihjJiZjPjMyMCl7Zi5zdHlsZS5oZWlnaHQ9IjMyMHB4IjsKfWlmKHRoaXMuX3BvcHVwQmVoYXZpb3Ipe3RoaXMuX3BvcHVwQmVoYXZpb3IuX2ZpcnN0UG9wdXA9dHJ1ZTsKfX1pZighdGhpcy5fcG9wdXBCZWhhdmlvcil7dGhpcy5fcG9wdXBCZWhhdmlvcj0kY3JlYXRlKFRlbGVyaWsuV2ViLlBvcHVwQmVoYXZpb3Ise2lkOiJwYiIrKG5ldyBEYXRlKCktMTAwKSxwYXJlbnRFbGVtZW50Om51bGx9LG51bGwsbnVsbCxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIikpOwp9dGhpcy5fcG9wdXBCZWhhdmlvci5oaWRlKCk7CnZhciBlPXRoaXMuX3BvcHVwQmVoYXZpb3I7CmUuc2V0X3BhcmVudEVsZW1lbnQoZCk7CmUuc2V0X3Bvc2l0aW9uaW5nTW9kZShUZWxlcmlrLldlYi5Qb3NpdGlvbmluZ01vZGUuQm90dG9tTGVmdCk7CmUuc2V0X2VsZW1lbnRUb1Nob3coZik7CmUuc2hvdygpOwppZigkdGVsZXJpay5pc0lFKXt3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe3RyeXtpZihiLnNldEFjdGl2ZSl7Yi5zZXRBY3RpdmUoKTsKfWVsc2V7aWYoYi5mb2N1cyl7Yi5mb2N1cygpOwp9fX1jYXRjaChnKXt9fSwwKTsKfX0sX2hpZGVTZWxlY3RQb3B1cDpmdW5jdGlvbigpe2lmKHRoaXMuX3BvcHVwQmVoYXZpb3Ipe3RoaXMuX3BvcHVwQmVoYXZpb3IuaGlkZSgpOwp9fSxfc2V0U2VsZWN0SGVhZGVyVGV4dDpmdW5jdGlvbihhLGMpe3ZhciBiPSR0ZWxlcmlrLmdldEVsZW1lbnRCeUNsYXNzTmFtZShhLCJyZmRTZWxlY3RUZXh0Iik7CmlmKGMpe2M9Yy5yZXBsYWNlKC88L2csIiZsdDsiKTsKfWlmKGIpe2IuaW5uZXJIVE1MPWM7Cn19LF9jcmVhdGVTZWxlY3RCb3g6ZnVuY3Rpb24oail7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CmIuaWQ9InJmZFN1Yk1lbnUiKyhuZXcgRGF0ZSgpLTEwMCk7ClN5cy5VSS5Eb21FbGVtZW50LmFkZENzc0NsYXNzKGIsInJmZFNlbGVjdEJveCIpOwpTeXMuVUkuRG9tRWxlbWVudC5hZGRDc3NDbGFzcyhiLCJyZmRTZWxlY3RCb3hfIit0aGlzLl9za2luKTsKYi5zdHlsZS5vdmVyZmxvd1k9ImF1dG8iOwp2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ1bCIpOwpiLmFwcGVuZENoaWxkKGMpOwp2YXIgZT1qLm9wdGlvbnM7CnZhciBmLGc7CmZvcih2YXIgaD0wOwpoPGUubGVuZ3RoOwpoKyspe3ZhciBkPWVbaF0ucGFyZW50Tm9kZTsKaWYoZC50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJvcHRncm91cCIpe2Y9Zj8oZyE9ZC5sYWJlbD9kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ1bCIpOmYpOmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInVsIik7CmlmKGg+MSYmZCE9ZVtoLTFdLnBhcmVudE5vZGUpe2Y9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidWwiKTsKfWlmKGchPWQubGFiZWx8fChoPjEmJmQhPWVbaC0xXS5wYXJlbnROb2RlKSl7U3lzLlVJLkRvbUVsZW1lbnQuYWRkQ3NzQ2xhc3MoZiwicmZkU2VsZWN0Qm94X29wdGdyb3VwIik7CmMuYXBwZW5kQ2hpbGQoZik7CnZhciBsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpIik7Cmwuc2V0QXR0cmlidXRlKCJ1bnNlbGVjdGFibGUiLCJvbiIpOwpnPWQubGFiZWw7CmwuaW5uZXJIVE1MPWQubGFiZWw7CmlmKGQuZGlzYWJsZWQpe1N5cy5VSS5Eb21FbGVtZW50LmFkZENzc0NsYXNzKGYsInJmZFNlbGVjdEJveF9vcHRncm91cF9kaXNhYmxlZCIpOwp9U3lzLlVJLkRvbUVsZW1lbnQuYWRkQ3NzQ2xhc3MobCwicmZkU2VsZWN0Qm94X29wdGdyb3VwX2xhYmVsIik7CmYuYXBwZW5kQ2hpbGQobCk7Cn19ZWxzZXtmPW51bGw7Cn12YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsaSIpOwphLnNldEF0dHJpYnV0ZSgidW5zZWxlY3RhYmxlIiwib24iKTsKdmFyIGs9ZVtoXS50ZXh0OwppZihrKXtrPWsucmVwbGFjZSgvPC9nLCImbHQ7Iik7Cn1hLmlubmVySFRNTD1rOwppZihlW2hdLnNlbGVjdGVkKXtTeXMuVUkuRG9tRWxlbWVudC5hZGRDc3NDbGFzcyhhLCJyZmRTZWxlY3Rfc2VsZWN0ZWQiKTsKfWlmKGYpe2YuYXBwZW5kQ2hpbGQoYSk7Cn1lbHNle2MuYXBwZW5kQ2hpbGQoYSk7Cn19cmV0dXJuIGI7Cn0sX3NlbGVjdFByb3BlcnR5Q2hhbmdlZDpmdW5jdGlvbihhKXt2YXIgYj1hLnRhcmdldDsKYT1hLnJhd0V2ZW50OwppZighYSl7cmV0dXJuOwp9dmFyIGM9VGVsZXJpay5XZWIuVUkuUmFkRm9ybURlY29yYXRvci5nZXREZWNvcmF0ZWRFbGVtZW50KGIpOwppZihhLnByb3BlcnR5TmFtZT09InNlbGVjdGVkSW5kZXgiKXt0aGlzLl9zZWxlY3RlZEluZGV4Q2hhbmdlZChiLGMsYi5zZWxlY3RlZEluZGV4KTsKfWVsc2V7aWYoYS5wcm9wZXJ0eU5hbWU9PSJkaXNhYmxlZCIpe3RoaXMuX3RvZ2dsZVNlbGVjdERpc2FibGVkU3RhdGUoYixiLmRpc2FibGVkKTsKfX19LF9zZWxlY3RlZEluZGV4Q2hhbmdlZDpmdW5jdGlvbihiLGcsZCl7dmFyIGY9Zy5yZmRTdWJNZW51OwpmPWY/JGdldChmKTpnOwp0aGlzLl9kZUhpZ2hsaWdodFNlbGVjdEVsZW1lbnRzKGYpOwppZihkIT1udWxsKXt2YXIgaD1kIT0tMT9iLm9wdGlvbnNbZF0udGV4dDoiIjsKdGhpcy5fc2V0U2VsZWN0SGVhZGVyVGV4dChnLGgpOwp9Zm9yKHZhciBlPTA7CmU8Yi5vcHRpb25zLmxlbmd0aDsKZSsrKXt2YXIgYz1iLm9wdGlvbnNbZV07CmlmKGMuc2VsZWN0ZWQpe3ZhciBhPXRoaXMuX2dldFNlbGVjdExpRWxlbWVudEZyb21JbmRleChmLGUpOwppZihhKXtTeXMuVUkuRG9tRWxlbWVudC5hZGRDc3NDbGFzcyhhLCJyZmRTZWxlY3Rfc2VsZWN0ZWQiKTsKfX19fSxfY2xlYXJTZWxlY3RlZEluZGV4OmZ1bmN0aW9uKGIpe2lmKCEkdGVsZXJpay5pc0ZpcmVmb3gpe2Iuc2VsZWN0ZWRJbmRleD0tMTsKfWVsc2V7Zm9yKHZhciBhPTA7CmE8Yi5vcHRpb25zLmxlbmd0aDsKYSsrKXtiLm9wdGlvbnNbYV0uc2VsZWN0ZWQ9ZmFsc2U7Cn19fSxfaXNTZWxlY3RMaXN0Qm94OmZ1bmN0aW9uKGEpe2lmKGEuaXNMaXN0Qm94IT09dW5kZWZpbmVkKXtyZXR1cm4gYS5pc0xpc3RCb3g7Cn1lbHNle3JldHVybihhLm11bHRpcGxlfHxhLnNpemU+MCk7Cn19LF9nZXRPcmlnaW5hbFNlbGVjdDpmdW5jdGlvbihhKXtyZXR1cm4gYS5uZXh0U2libGluZzsKfSxfaXNTZWxlY3RPcHRncm91cDpmdW5jdGlvbihhKXtyZXR1cm4oYSYmU3lzLlVJLkRvbUVsZW1lbnQuY29udGFpbnNDc3NDbGFzcyhhLCJyZmRTZWxlY3RCb3hfb3B0Z3JvdXBfbGFiZWwiKSk7Cn0sX2dldFNlbGVjdExpRWxlbWVudEZyb21JbmRleDpmdW5jdGlvbihjLGIpe3ZhciBkPWMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIkxJIik7CnZhciBhPS0xOwpmb3IodmFyIGU9MDsKZTxkLmxlbmd0aDsKZSsrKXtpZih0aGlzLl9pc1NlbGVjdE9wdGdyb3VwKGRbZV0pKXtjb250aW51ZTsKfWErKzsKaWYoYT09Yil7cmV0dXJuIGRbZV07Cn19cmV0dXJuIG51bGw7Cn0sX2dldFNlbGVjdGVkSW5kZXhGcm9tRGVjb3JhdGVkRWxlbWVudDpmdW5jdGlvbihkLGIpe3ZhciBlPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIkxJIik7CnZhciBmPS0xOwpmb3IodmFyIGM9MDsKYzxlLmxlbmd0aDsKYysrKXt2YXIgYT1lW2NdOwppZih0aGlzLl9pc1NlbGVjdE9wdGdyb3VwKGEpKXtjb250aW51ZTsKfWYrKzsKaWYoYT09ZCl7YnJlYWs7Cn19cmV0dXJuIGY7Cn0sdW5pZnlDcm9zc0Jyb3dzZXJXaWR0aDpmdW5jdGlvbihhKXtpZighdGhpcy5pc0FwcGxpY2FibGVUb1VuaWZ5V2lkdGgoYSkpe3JldHVybjsKfWEudW5pZmllZD10cnVlOwp0aGlzLnVuaWZ5RGVjb3JhdGVkV2lkdGgoYSx0aGlzLmdldFVuaWZpZXIoYSkpOwp9LGdldFVuaWZpZXI6ZnVuY3Rpb24oYSl7c3dpdGNoKGEudGFnTmFtZS50b0xvd2VyQ2FzZSgpKXtjYXNlImlucHV0IjpyZXR1cm4iY2FsY3VsYXRlVW5pZmllZElucHV0V2lkdGgiOwpjYXNlInRleHRhcmVhIjpyZXR1cm4iY2FsY3VsYXRlVW5pZmllZFRleHRhcmVhV2lkdGgiOwpjYXNlInNlbGVjdCI6cmV0dXJuIHRoaXMuX2lzU2VsZWN0TGlzdEJveChhKT8iY2FsY3VsYXRlVW5pZmllZE11bHRpU2VsZWN0V2lkdGgiOiJjYWxjdWxhdGVVbmlmaWVkU2VsZWN0V2lkdGgiOwpkZWZhdWx0OnJldHVybiBudWxsOwp9fSx1bmlmeURlY29yYXRlZFdpZHRoOmZ1bmN0aW9uKGEsZCl7dmFyIGU9dGhpc1tkXTsKaWYoIWV8fHR5cGVvZihlKSE9PSJmdW5jdGlvbiIpe3JldHVybjsKfXZhciBiPXRoaXMuX2dldEVsZW1lbnRXaWR0aChhKTsKdmFyIGM9TWF0aC5tYXgoZS5jYWxsKHRoaXMsYiksMCk7CnRoaXMuX3NldEVsZW1lbnRXaWR0aChhLGMpOwp9LGNhbGN1bGF0ZVVuaWZpZWRJbnB1dFdpZHRoOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMuZ2V0X2VuYWJsZVJvdW5kZWRDb3JuZXJzKCk7CnZhciBjPSR0ZWxlcmlrLmlzSUU4JiZhfHwkdGVsZXJpay5pc0lFNyYmYT8tMTI6JHRlbGVyaWsuaXNJRTYmJmE/LTg6JHRlbGVyaWsuaXNJRTY/LTQ6LTY7CnJldHVybiBiK2M7Cn0sY2FsY3VsYXRlVW5pZmllZFRleHRhcmVhV2lkdGg6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5nZXRfZW5hYmxlUm91bmRlZENvcm5lcnMoKTsKdmFyIGM9JHRlbGVyaWsuaXNTYWZhcml8fCR0ZWxlcmlrLmlzSUU5TW9kZT8tODotNjsKaWYoKCR0ZWxlcmlrLmlzSUU3fHwkdGVsZXJpay5pc0lFOCkmJmEpe2MtPTQ7Cn1yZXR1cm4gYitjOwp9LGNhbGN1bGF0ZVVuaWZpZWRTZWxlY3RXaWR0aDpmdW5jdGlvbihhKXt2YXIgYj0kdGVsZXJpay5pc0lFNz8tMzotNDsKcmV0dXJuIGErYjsKfSxjYWxjdWxhdGVVbmlmaWVkTXVsdGlTZWxlY3RXaWR0aDpmdW5jdGlvbihhKXt2YXIgYj0tMjsKcmV0dXJuIGErYjsKfSxpc0FwcGxpY2FibGVUb1VuaWZ5V2lkdGg6ZnVuY3Rpb24oYSl7cmV0dXJuICEhKCFhLnVuaWZpZWQmJmEudGFnTmFtZSYmKGEudGFnTmFtZS50b0xvd2VyQ2FzZSgpIT0iaW5wdXQifHxhLnR5cGUudG9Mb3dlckNhc2UoKSE9ImltYWdlIikmJiF0aGlzLl9pc1JhZElucHV0KGEpJiZhLnN0eWxlLndpZHRoJiZhLnN0eWxlLndpZHRoLmluZGV4T2YoInB4Iik+LTEmJnBhcnNlSW50KGEuc3R5bGUud2lkdGgpPjEwKTsKfSxfZ2V0RWxlbWVudFdpZHRoOmZ1bmN0aW9uKGEpe3JldHVybiBwYXJzZUludChhLnN0eWxlLndpZHRoKTsKfSxfc2V0RWxlbWVudFdpZHRoOmZ1bmN0aW9uKGIsYSl7Yi5zdHlsZS53aWR0aD1pc05hTihhKT9hOk1hdGgubWF4KGEsMCkrInB4IjsKfSxfaXNSYWRJbnB1dDpmdW5jdGlvbihiKXtmb3IodmFyIGE9MDsKYTwzJiYhIWI7CmErKyxiPWIucGFyZW50Tm9kZSl7aWYodGhpcy5fZWxlbWVudEhhc0NsYXNzKGIsIlJhZElucHV0Iikpe3JldHVybiB0cnVlOwp9fXJldHVybiBmYWxzZTsKfSxfZWxlbWVudEhhc0NsYXNzOmZ1bmN0aW9uKGIsYSl7cmV0dXJuIFN5cy5VSS5Eb21FbGVtZW50LmNvbnRhaW5zQ3NzQ2xhc3MoYixhKTsKfSxfYWRkVG9EZWNvcmF0ZWRFbGVtZW50czpmdW5jdGlvbihhKXt0aGlzLl9kZWNvcmF0ZWRFbGVtZW50cy5wdXNoKGEpOwp9LGlucHV0UHJvcGVydHlDbGlja0hhbmRsZXI6ZnVuY3Rpb24oYil7dmFyIGQ9YjsKdmFyIGI9Yi5yYXdFdmVudDsKaWYoIWIpe3JldHVybjsKfXZhciBhPWQudGFyZ2V0Owp2YXIgYz1iLnByb3BlcnR5TmFtZTsKaWYoYz09ImNoZWNrZWQiKXt0aGlzLmlucHV0Q2xpY2tIYW5kbGVyKGQpOwp9ZWxzZXtpZihjPT0iZGlzYWJsZWQiKXt0aGlzLnNldF9lbGVtZW50RGlzYWJsZWQoYSxhLmRpc2FibGVkKTsKfX19LGlucHV0Q2xpY2tIYW5kbGVyOmZ1bmN0aW9uKGEpe2E9YT9hOndpbmRvdy5ldmVudDsKdmFyIGI9YS5zcmNFbGVtZW50P2Euc3JjRWxlbWVudDphLnRhcmdldDsKaWYoYi50eXBlPT0icmFkaW8iKXt0aGlzLnNldEFsbFJhZGlvc1VuY2hlY2tlZChiLm5hbWUpOwp9aWYoIWIuZGlzYWJsZWQpe3RoaXMuY29uZmlndXJlTGFiZWwoYi5teUxhYmVsLGIpOwp9fSxhZGRMYWJlbDpmdW5jdGlvbihjKXt2YXIgYj1jLmlkOwppZighYil7Yj10aGlzLl9nZXRVbmlxdWVJRCgpOwpjLmlkPWI7Cn12YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJsYWJlbCIpOwphLmh0bWxGb3I9YjsKYS5zZXRBdHRyaWJ1dGUoInVuc2VsZWN0YWJsZSIsIm9uIik7CmMuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCJhZnRlckVuZCIsYSk7CnJldHVybiBhOwp9LGNvbmZpZ3VyZUxhYmVsOmZ1bmN0aW9uKGQsYSl7aWYoIWQuaWQpe2Quc2V0QXR0cmlidXRlKCJpZCIsIl9yZmRTa2lubmVkIithLmlkKTsKfWEuc2V0QXR0cmlidXRlKCJfcmZkZGVjb3JhdGVkSUQiLGQuaWQpOwphLl9yZmRkZWNvcmF0ZWRJRD1kLmlkOwppZihhLmlkKXtkLnNldEF0dHJpYnV0ZSgiZm9yIixhLmlkKTsKfWEuY2xhc3NOYW1lPSJyZmRSZWFsSW5wdXQiOwppZighYS5teUxhYmVsKXthLm15TGFiZWw9ZDsKfWQuY2xhc3NOYW1lPXRoaXMuX3NraW47CmlmKGQuaW5uZXJIVE1MPT0iIil7ZC5pbm5lckhUTUw9IiZuYnNwOyI7Cn12YXIgYj1hLnR5cGU7CnZhciBjPWIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrYi5zdWJzdHJpbmcoMSk7CmlmKGEuY2hlY2tlZCl7ZC5jbGFzc05hbWU9IiByZmQiK2MrIkNoZWNrZWQiOwp9ZWxzZXtkLmNsYXNzTmFtZT0iIHJmZCIrYysiVW5jaGVja2VkIjsKfWlmKGEuZGlzYWJsZWQpe2QuY2xhc3NOYW1lKz0iIHJmZElucHV0RGlzYWJsZWQiOwp9fSxfZ2V0VW5pcXVlSUQ6ZnVuY3Rpb24oKXtpZighdGhpcy5faWRDb3VudGVyKXt0aGlzLl9pZENvdW50ZXI9MTsKfXRoaXMuX2lkQ291bnRlcisrOwpyZXR1cm4odGhpcy5nZXRfaWQoKSsobmV3IERhdGUoKS0xMDApK3RoaXMuX2lkQ291bnRlcik7Cn0sX2dldE9wZXJhVmVyc2lvbjpmdW5jdGlvbigpe2lmKCF0aGlzLl9vcGVyYVZlcnNpb24pe3ZhciBhPW5hdmlnYXRvci51c2VyQWdlbnQuc3Vic3RyaW5nKG5hdmlnYXRvci51c2VyQWdlbnQubGFzdEluZGV4T2YoIi8iKSsxKTsKdmFyIGI9YT9wYXJzZUZsb2F0KGEpOjA7CmlmKGlzTmFOKGIpKXtiPTA7Cn10aGlzLl9vcGVyYVZlcnNpb249YjsKfXJldHVybiB0aGlzLl9vcGVyYVZlcnNpb247Cn0sX2Vuc3VyZVRoaXNEZWxlZ2F0ZTpmdW5jdGlvbihiLGEpe2lmKCF0aGlzW2JdKXt0aGlzW2JdPUZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsYSk7Cn19LHNldEFsbFJhZGlvc1VuY2hlY2tlZDpmdW5jdGlvbihlKXt2YXIgZj1TeXMuVUkuRG9tRWxlbWVudDsKdmFyIGI9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImlucHV0Iik7CmZvcih2YXIgZD0wOwpkPGIubGVuZ3RoOwpkKyspe3ZhciBjPWJbZF07CmlmKGMudHlwZT09InJhZGlvIiYmYy5uYW1lPT1lJiZjLm15TGFiZWwpe3ZhciBhPWMuY2hlY2tlZDsKZi5yZW1vdmVDc3NDbGFzcyhjLm15TGFiZWwsKCFhPyJyZmRSYWRpb0NoZWNrZWQiOiJyZmRSYWRpb1VuY2hlY2tlZCIpKTsKZi5hZGRDc3NDbGFzcyhjLm15TGFiZWwsKGE/InJmZFJhZGlvQ2hlY2tlZCI6InJmZFJhZGlvVW5jaGVja2VkIikpOwp9fX0sc2V0X2VsZW1lbnRDaGVja2VkOmZ1bmN0aW9uKGQsYSl7dmFyIGI9ZC5uZXh0U2libGluZzsKaWYoYiYmYi50YWdOYW1lPT0iTEFCRUwiKXt2YXIgZz1kLnR5cGU7CmlmKGc9PSJyYWRpbyIpe1RlbGVyaWsuV2ViLlVJLlJhZEZvcm1EZWNvcmF0b3IucHJvdG90eXBlLnNldEFsbFJhZGlvc1VuY2hlY2tlZChkLm5hbWUpOwp9dmFyIGM9Zy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStnLnN1YnN0cmluZygxKTsKdmFyIGY9InJmZCIrYysiQ2hlY2tlZCI7CnZhciBlPSJyZmQiK2MrIlVuY2hlY2tlZCI7ClN5cy5VSS5Eb21FbGVtZW50LnJlbW92ZUNzc0NsYXNzKGIsYT9lOmYpOwpTeXMuVUkuRG9tRWxlbWVudC5hZGRDc3NDbGFzcyhiLGE/ZjplKTsKfX0sc2V0X2VsZW1lbnREaXNhYmxlZDpmdW5jdGlvbihkLGIpe3ZhciBhPWQ7CnZhciBjPWQubmV4dFNpYmxpbmc7CnZhciBmPWQudHlwZTsKaWYoKGY9PSJjaGVja2JveCJ8fGY9PSJyYWRpbyIpJiZjJiZjLnRhZ05hbWU9PSJMQUJFTCIpe2E9YzsKfWVsc2V7aWYoZj09ImJ1dHRvbiJ8fGY9PSJyZXNldCJ8fGY9PSJzdWJtaXQifHxkLnRhZ05hbWU9PSJCVVRUT04iKXt2YXIgZT1kLnBhcmVudE5vZGU7CmlmKGUmJmUudGFnTmFtZT09IkEiKXthPWU7CmUuZGlzYWJsZWQ9YjsKfX19aWYoYil7U3lzLlVJLkRvbUVsZW1lbnQuYWRkQ3NzQ2xhc3MoYSwicmZkSW5wdXREaXNhYmxlZCIpOwp9ZWxzZXtTeXMuVUkuRG9tRWxlbWVudC5yZW1vdmVDc3NDbGFzcyhhLCJyZmRJbnB1dERpc2FibGVkIik7Cn1pZighYiYmJHRlbGVyaWsuaXNJRSYmYS5wYXJlbnROb2RlLmRpc2FibGVkKXthLnBhcmVudE5vZGUuZGlzYWJsZWQ9YjsKfX0sZ2V0X2VuYWJsZVJvdW5kZWRDb3JuZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuYWJsZVJvdW5kZWRDb3JuZXJzOwp9LHNldF9lbmFibGVSb3VuZGVkQ29ybmVyczpmdW5jdGlvbihhKXt0aGlzLl9lbmFibGVSb3VuZGVkQ29ybmVycz1hOwp9LGdldF9lbmFibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuYWJsZWQ7Cn0sc2V0X2VuYWJsZWQ6ZnVuY3Rpb24oYSl7dGhpcy5fZW5hYmxlZD1hOwp9LGdldF9kZWNvcmF0ZWRDb250cm9sczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZWNvcmF0ZWRDb250cm9sczsKfSxzZXRfZGVjb3JhdGVkQ29udHJvbHM6ZnVuY3Rpb24oYSl7dGhpcy5fZGVjb3JhdGVkQ29udHJvbHM9YTsKfSxnZXRfZGVjb3JhdGlvblpvbmVJRDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZWNvcmF0aW9uWm9uZUlEOwp9LHNldF9kZWNvcmF0aW9uWm9uZUlEOmZ1bmN0aW9uKGEpe3RoaXMuX2RlY29yYXRpb25ab25lSUQ9YTsKfSxnZXRfc2tpbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9za2luOwp9LHNldF9za2luOmZ1bmN0aW9uKGEpe3RoaXMuX3NraW49YTsKfX07ClRlbGVyaWsuV2ViLlVJLlJhZEZvcm1EZWNvcmF0b3IucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuUmFkRm9ybURlY29yYXRvciIsVGVsZXJpay5XZWIuVUkuUmFkV2ViQ29udHJvbCk7ClRlbGVyaWsuV2ViLlVJLkZvcm1EZWNvcmF0b3JEZWNvcmF0ZWRDb250cm9scz1mdW5jdGlvbigpe3Rocm93IEVycm9yLmludmFsaWRPcGVyYXRpb24oKTsKfTsKVGVsZXJpay5XZWIuVUkuRm9ybURlY29yYXRvckRlY29yYXRlZENvbnRyb2xzLnByb3RvdHlwZT17Tm9uZTowLENoZWNrQm94ZXM6MSxSYWRpb0J1dHRvbnM6MixCdXR0b25zOjQsU2Nyb2xsYmFyczo4LFRleHRib3g6MTYsVGV4dGFyZWE6MzIsRmllbGRzZXQ6NjQsTGFiZWw6MTI4LEg0SDVINjoyNTYsU2VsZWN0OjUxMixab25lOjEwMjQsR3JpZEZvcm1EZXRhaWxzVmlld3M6MjA0OCxEZWZhdWx0OigxfDJ8NHw4KSxBbGw6NDA5NX07ClRlbGVyaWsuV2ViLlVJLkZvcm1EZWNvcmF0b3JEZWNvcmF0ZWRDb250cm9scy5yZWdpc3RlckVudW0oIlRlbGVyaWsuV2ViLlVJLkZvcm1EZWNvcmF0b3JEZWNvcmF0ZWRDb250cm9scyIsZmFsc2UpOwoNCi8qIEVORCBUZWxlcmlrLldlYi5VSS5Gb3JtRGVjb3JhdG9yLlJhZEZvcm1EZWNvcmF0b3IuanMgKi8NCi8qIFNUQVJUIFRlbGVyaWsuV2ViLlVJLkFqYXguQWpheC5qcyAqLw0KVHlwZS5yZWdpc3Rlck5hbWVzcGFjZSgiVGVsZXJpay5XZWIuVUkiKTsKVGVsZXJpay5XZWIuVUkuUmFkQWpheENvbnRyb2w9ZnVuY3Rpb24oYSl7VGVsZXJpay5XZWIuVUkuUmFkQWpheENvbnRyb2wuaW5pdGlhbGl6ZUJhc2UodGhpcyxbYV0pOwp0aGlzLl9jbGllbnRFdmVudHM9e307CnRoaXMuX3VuaXF1ZUlEPSIiOwp0aGlzLl9lbmFibGVIaXN0b3J5PWZhbHNlOwp0aGlzLl9lbmFibGVBSkFYPXRydWU7CnRoaXMuX3JlcXVlc3RRdWV1ZVNpemU9MDsKdGhpcy5fcmVxdWVzdFF1ZXVlPVtdOwp0aGlzLl9sb2FkaW5nUGFuZWxzVG9IaWRlPVtdOwp0aGlzLl9pbml0aWFsaXplUmVxdWVzdEhhbmRsZXI9bnVsbDsKdGhpcy5fZW5kUmVxdWVzdEhhbmRsZXI9bnVsbDsKdGhpcy5faXNSZXF1ZXN0SW5Qcm9ncmVzcz1mYWxzZTsKdGhpcy5fbGlua3M9W107CnRoaXMuX3N0eWxlcz1bXTsKdGhpcy5UeXBlPSJUZWxlcmlrLldlYi5VSS5SYWRBamF4Q29udHJvbCI7CnRoaXMuVW5pcXVlSUQ9dGhpcy5fdW5pcXVlSUQ7CnRoaXMuRW5hYmxlSGlzdG9yeT10aGlzLl9lbmFibGVIaXN0b3J5Owp0aGlzLkVuYWJsZUFKQVg9dGhpcy5fZW5hYmxlQUpBWDsKdGhpcy5MaW5rcz10aGlzLl9saW5rczsKdGhpcy5TdHlsZXM9dGhpcy5fc3R5bGVzOwp0aGlzLl91cGRhdGVQYW5lbHM9IiI7Cn07ClRlbGVyaWsuV2ViLlVJLlJhZEFqYXhDb250cm9sLnByb3RvdHlwZT17aW5pdGlhbGl6ZTpmdW5jdGlvbigpe1RlbGVyaWsuV2ViLlVJLlJhZEFqYXhDb250cm9sLmNhbGxCYXNlTWV0aG9kKHRoaXMsImluaXRpYWxpemUiKTsKZm9yKHZhciBhIGluIHRoaXMuX2NsaWVudEV2ZW50cyl7aWYodHlwZW9mKHRoaXMuX2NsaWVudEV2ZW50c1thXSkhPSJzdHJpbmciKXtjb250aW51ZTsKfWlmKHRoaXMuX2NsaWVudEV2ZW50c1thXSE9IiIpe3ZhciBjPXRoaXMuX2NsaWVudEV2ZW50c1thXTsKaWYoYy5pbmRleE9mKCIoIikhPS0xKXt0aGlzW2FdPWM7Cn1lbHNle3RoaXNbYV09ZXZhbChjKTsKfX1lbHNle3RoaXNbYV09bnVsbDsKfX12YXIgYj1TeXMuV2ViRm9ybXMuUGFnZVJlcXVlc3RNYW5hZ2VyLmdldEluc3RhbmNlKCk7CnRoaXMuX2luaXRpYWxpemVSZXF1ZXN0SGFuZGxlcj1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX2luaXRpYWxpemVSZXF1ZXN0KTsKYi5hZGRfaW5pdGlhbGl6ZVJlcXVlc3QodGhpcy5faW5pdGlhbGl6ZVJlcXVlc3RIYW5kbGVyKTsKfSxfZ2V0UmVzcG9uc2VIZWFkZXI6ZnVuY3Rpb24oYyxiKXt0cnl7cmV0dXJuIGMuZ2V0UmVzcG9uc2VIZWFkZXIoYik7Cn1jYXRjaChhKXtyZXR1cm4gbnVsbDsKfX0sX2hhbmRsZUFzeW5jUmVkaXJlY3Q6ZnVuY3Rpb24oZCl7dmFyIGM9dGhpcy5fZ2V0UmVzcG9uc2VIZWFkZXIoZCwiTG9jYXRpb24iKTsKaWYoYyYmYyE9IiIpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKYS5zdHlsZS5kaXNwbGF5PSJub25lIjsKYS5ocmVmPWM7CmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7CmlmKGEuY2xpY2spe3RyeXthLmNsaWNrKCk7Cn1jYXRjaChiKXt9fWVsc2V7d2luZG93LmxvY2F0aW9uLmhyZWY9YzsKfWRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYSk7CnJldHVybiB0cnVlOwp9cmV0dXJuIGZhbHNlOwp9LF9vbkZvcm1TdWJtaXRDb21wbGV0ZWQ6ZnVuY3Rpb24oYixoKXtpZihiLl94bWxIdHRwUmVxdWVzdCE9bnVsbCl7aWYodGhpcy5faGFuZGxlQXN5bmNSZWRpcmVjdChiLl94bWxIdHRwUmVxdWVzdCkpe3RyeXtiLl9hYm9ydGVkPXRydWU7Cn1jYXRjaChkKXt9cmV0dXJuOwp9fWlmKGIuX3htbEh0dHBSZXF1ZXN0IT1udWxsJiYhYi5nZXRfdGltZWRPdXQoKSl7dmFyIHA9dGhpcy5nZXRSZXNwb25zZUl0ZW1zKGIuZ2V0X3Jlc3BvbnNlRGF0YSgpLCJzY3JpcHRCbG9jayIpOwpmb3IodmFyIHE9MCxnPXAubGVuZ3RoOwpxPGc7CnErKyl7dmFyIG49cFtxXS5jb250ZW50OwppZihuLmluZGV4T2YoJyJsaW5rcyI6JykhPS0xJiZuLmluZGV4T2YoU3lzLldlYkZvcm1zLlBhZ2VSZXF1ZXN0TWFuYWdlci5nZXRJbnN0YW5jZSgpLl91bmlxdWVJRFRvQ2xpZW50SUQodGhpcy5fdW5pcXVlSUQpKSE9LTEpe3ZhciBmPW4uc3Vic3RyKG4uaW5kZXhPZignImxpbmtzIjonKSsxMCxuLmluZGV4T2YoIl0iLG4uaW5kZXhPZignImxpbmtzIjonKSktKG4uaW5kZXhPZignImxpbmtzIjonKSsxMCkpLnJlcGxhY2UoL1wiL2csIiIpOwppZihmIT0iIil7dGhpcy5fbGlua3M9Zi5zcGxpdCgiLCIpOwp0aGlzLnVwZGF0ZUhlYWRMaW5rcygpOwp9fWlmKG4uaW5kZXhPZigiLmF4ZCIpPT0tMSYmcFtxXS5pZD09IlNjcmlwdFBhdGgiKXtUZWxlcmlrLldlYi5VSS5SYWRBamF4Q29udHJvbC5JbmNsdWRlQ2xpZW50U2NyaXB0KG4pOwp9fXZhciBsPXRoaXMuZ2V0UmVzcG9uc2VJdGVtcyhiLmdldF9yZXNwb25zZURhdGEoKSwidXBkYXRlUGFuZWwiKTsKVGVsZXJpay5XZWIuVUkuUmFkQWpheENvbnRyb2wucGFuZWxzVG9DbGVhcj1bXTsKZm9yKHZhciBxPTAsZz1sLmxlbmd0aDsKcTxnOwpxKyspe3ZhciBrPWxbcV07CmlmKCEkZ2V0KGsuaWQpKXt2YXIgcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKci5pZD1rLmlkOwp2YXIgYT0kZ2V0KGsuaWQucmVwbGFjZSgiUGFuZWwiLCIiKSk7CmlmKCFhKXtjb250aW51ZTsKfXZhciBzPWEucGFyZW50Tm9kZTsKdmFyIG09YS5uZXh0U2libGluZ3x8VGVsZXJpay5XZWIuVUkuUmFkQWpheENvbnRyb2wuR2V0Tm9kZU5leHRTaWJsaW5nKGEpOwppZihhLm5vZGVUeXBlPT09MSl7aWYoYS5kaXNwb3NlJiZ0eXBlb2YoYS5kaXNwb3NlKT09PSJmdW5jdGlvbiIpe2EuZGlzcG9zZSgpOwp9ZWxzZXtpZihhLmNvbnRyb2wmJnR5cGVvZihhLmNvbnRyb2wuZGlzcG9zZSk9PT0iZnVuY3Rpb24iKXthLmNvbnRyb2wuZGlzcG9zZSgpOwp9fXZhciBjPVN5cy5VSS5CZWhhdmlvci5nZXRCZWhhdmlvcnMoYSk7CmZvcih2YXIgbz1jLmxlbmd0aC0xOwpvPj0wOwpvLS0pe2Nbb10uZGlzcG9zZSgpOwp9fSR0ZWxlcmlrLmRpc3Bvc2VFbGVtZW50KGEpOwpzLnJlbW92ZUNoaWxkKGEpOwpUZWxlcmlrLldlYi5VSS5SYWRBamF4Q29udHJvbC5JbnNlcnRBdExvY2F0aW9uKHIscyxtKTsKVGVsZXJpay5XZWIuVUkuUmFkQWpheENvbnRyb2wucGFuZWxzVG9DbGVhcltUZWxlcmlrLldlYi5VSS5SYWRBamF4Q29udHJvbC5wYW5lbHNUb0NsZWFyLmxlbmd0aF09azsKfX19Yi5nZXRfd2ViUmVxdWVzdCgpLnJlbW92ZV9jb21wbGV0ZWQodGhpcy5fb25Gb3JtU3VibWl0Q29tcGxldGVkSGFuZGxlcik7Cn0sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuaGlkZUxvYWRpbmdQYW5lbHMoKTsKdmFyIGE9U3lzLldlYkZvcm1zLlBhZ2VSZXF1ZXN0TWFuYWdlci5nZXRJbnN0YW5jZSgpOwphLnJlbW92ZV9pbml0aWFsaXplUmVxdWVzdCh0aGlzLl9pbml0aWFsaXplUmVxdWVzdEhhbmRsZXIpOwokY2xlYXJIYW5kbGVycyh0aGlzLmdldF9lbGVtZW50KCkpOwp0aGlzLl9lbGVtZW50LmNvbnRyb2w9bnVsbDsKd2luZG93W1N5cy5XZWJGb3Jtcy5QYWdlUmVxdWVzdE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5fdW5pcXVlSURUb0NsaWVudElEKHRoaXMuX3VuaXF1ZUlEKV09bnVsbDsKVGVsZXJpay5XZWIuVUkuUmFkQWpheENvbnRyb2wuY2FsbEJhc2VNZXRob2QodGhpcywiZGlzcG9zZSIpOwp9LGdldF9lbmFibGVBSkFYOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuYWJsZUFKQVg7Cn0sc2V0X2VuYWJsZUFKQVg6ZnVuY3Rpb24oYSl7aWYodGhpcy5fZW5hYmxlQUpBWCE9YSl7dGhpcy5fZW5hYmxlQUpBWD1hOwp9fSxnZXRfZW5hYmxlSGlzdG9yeTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmFibGVIaXN0b3J5Owp9LHNldF9lbmFibGVIaXN0b3J5OmZ1bmN0aW9uKGEpe2lmKHRoaXMuX2VuYWJsZUhpc3RvcnkhPWEpe3RoaXMuX2VuYWJsZUhpc3Rvcnk9YTsKfX0sZ2V0X2NsaWVudEV2ZW50czpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jbGllbnRFdmVudHM7Cn0sc2V0X2NsaWVudEV2ZW50czpmdW5jdGlvbihhKXtpZih0aGlzLl9jbGllbnRFdmVudHMhPWEpe3RoaXMuX2NsaWVudEV2ZW50cz1hOwp9fSxnZXRfbGlua3M6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGlua3M7Cn0sc2V0X2xpbmtzOmZ1bmN0aW9uKGEpe2lmKHRoaXMuX2xpbmtzIT1hKXt0aGlzLl9saW5rcz1hOwppZih0aGlzLl9saW5rcy5sZW5ndGg+MCl7dGhpcy51cGRhdGVIZWFkTGlua3MoKTsKfX19LGdldF9zdHlsZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3R5bGVzOwp9LHNldF9zdHlsZXM6ZnVuY3Rpb24oYSl7aWYodGhpcy5fc3R5bGVzIT1hKXt0aGlzLl9zdHlsZXM9YTsKaWYodGhpcy5fc3R5bGVzLmxlbmd0aD4wKXt0aGlzLnVwZGF0ZUhlYWRTdHlsZXMoKTsKfX19LGdldF91bmlxdWVJRDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91bmlxdWVJRDsKfSxzZXRfdW5pcXVlSUQ6ZnVuY3Rpb24oYSl7aWYodGhpcy5fdW5pcXVlSUQhPWEpe3RoaXMuX3VuaXF1ZUlEPWE7CndpbmRvd1tTeXMuV2ViRm9ybXMuUGFnZVJlcXVlc3RNYW5hZ2VyLmdldEluc3RhbmNlKCkuX3VuaXF1ZUlEVG9DbGllbnRJRCh0aGlzLl91bmlxdWVJRCldPXRoaXM7Cn19LGdldF9yZXF1ZXN0UXVldWVTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlcXVlc3RRdWV1ZVNpemU7Cn0sc2V0X3JlcXVlc3RRdWV1ZVNpemU6ZnVuY3Rpb24oYSl7aWYoYT4wKXt0aGlzLl9yZXF1ZXN0UXVldWVTaXplPWE7CnRoaXMucmFpc2VQcm9wZXJ0eUNoYW5nZWQoInJlcXVlc3RRdWV1ZVNpemUiKTsKfX0saXNDaGlsZE9mOmZ1bmN0aW9uKGIsYSl7d2hpbGUoYiE9bnVsbCl7aWYoYj09YSl7cmV0dXJuIHRydWU7Cn1iPWIucGFyZW50Tm9kZTsKfXJldHVybiBmYWxzZTsKfSxfaW5pdGlhbGl6ZVJlcXVlc3Q6ZnVuY3Rpb24oZyxlKXt2YXIgYj1TeXMuV2ViRm9ybXMuUGFnZVJlcXVlc3RNYW5hZ2VyLmdldEluc3RhbmNlKCk7CmlmKGIuZ2V0X2lzSW5Bc3luY1Bvc3RCYWNrKCkmJnRoaXMuX3JlcXVlc3RRdWV1ZVNpemU+MCl7dGhpcy5fcXVldWVSZXF1ZXN0KGcsZSk7CnJldHVybiBmYWxzZTsKfWlmKHRoaXMuVHlwZT09IlRlbGVyaWsuV2ViLlVJLlJhZEFqYXhNYW5hZ2VyIil7aWYoZS5nZXRfcG9zdEJhY2tFbGVtZW50KCkhPXRoaXMuZ2V0X2VsZW1lbnQoKSl7dmFyIGg9dGhpcy5fdXBkYXRlUGFuZWxzLnNwbGl0KCIsIik7CmlmKEFycmF5LmNvbnRhaW5zKGgsZS5nZXRfcG9zdEJhY2tFbGVtZW50KCkuaWQpKXt0aGlzLl9pc1JlcXVlc3RJblByb2dyZXNzPXRydWU7CnRoaXMuX2F0dGFjaFJlcXVlc3RIYW5kbGVycyhnLGUsZmFsc2UpOwpyZXR1cm4gZmFsc2U7Cn1lbHNle3ZhciBpPWUuZ2V0X3Bvc3RCYWNrRWxlbWVudCgpLnBhcmVudE5vZGU7CnZhciBhPWZhbHNlOwp3aGlsZShpIT1udWxsKXtpZihpLmlkJiZBcnJheS5jb250YWlucyhoLGkuaWQpKXthPXRydWU7CmJyZWFrOwp9aT1pLnBhcmVudE5vZGU7Cn1pZihhKXt0aGlzLl9pc1JlcXVlc3RJblByb2dyZXNzPXRydWU7CnRoaXMuX2F0dGFjaFJlcXVlc3RIYW5kbGVycyhnLGUsZmFsc2UpOwpyZXR1cm4gZmFsc2U7Cn19aWYoIXRoaXMuX2luaXRpYXRvcnNbZS5nZXRfcG9zdEJhY2tFbGVtZW50KCkuaWRdKXt2YXIgaT1lLmdldF9wb3N0QmFja0VsZW1lbnQoKS5wYXJlbnROb2RlOwp2YXIgYT1mYWxzZTsKd2hpbGUoaSE9bnVsbCl7aWYoaS5pZCYmdGhpcy5faW5pdGlhdG9yc1tpLmlkXSl7YT10cnVlOwpicmVhazsKfWk9aS5wYXJlbnROb2RlOwp9aWYoIWEpe3RoaXMuX2lzUmVxdWVzdEluUHJvZ3Jlc3M9dHJ1ZTsKdGhpcy5fYXR0YWNoUmVxdWVzdEhhbmRsZXJzKGcsZSxmYWxzZSk7CnJldHVybiBmYWxzZTsKfX19fWlmKHRoaXMuVHlwZT09IlRlbGVyaWsuV2ViLlVJLlJhZEFqYXhQYW5lbCIpe3ZhciBjPXRoaXMuX2dldFBhcmVudEFqYXhQYW5lbChlLmdldF9wb3N0QmFja0VsZW1lbnQoKSk7CmlmKGMmJmMuZ2V0X2lkKCkhPXRoaXMuZ2V0X2lkKCkpe3JldHVybiBmYWxzZTsKfWlmKCF0aGlzLmlzQ2hpbGRPZihlLmdldF9wb3N0QmFja0VsZW1lbnQoKSx0aGlzLmdldF9lbGVtZW50KCkpKXtyZXR1cm4gZmFsc2U7Cn19aWYodGhpcy5fZW5hYmxlSGlzdG9yeSl7aWYoVGVsZXJpay5XZWIuVUkuUmFkQWpheENvbnRyb2wuSGlzdG9yeVsiIl09PW51bGwpe1RlbGVyaWsuV2ViLlVJLlJhZEFqYXhDb250cm9sLkhhbmRsZUhpc3RvcnkoZy5fdW5pcXVlSURUb0NsaWVudElEKHRoaXMuX3VuaXF1ZUlEKSwiIik7Cn1UZWxlcmlrLldlYi5VSS5SYWRBamF4Q29udHJvbC5IYW5kbGVIaXN0b3J5KGcuX3VuaXF1ZUlEVG9DbGllbnRJRCh0aGlzLl91bmlxdWVJRCksZS5nZXRfcmVxdWVzdCgpLmdldF9ib2R5KCkpOwp9aWYoZy5fZm9ybS5fX0VWRU5UVEFSR0VUJiZnLl9mb3JtLl9fRVZFTlRUQVJHRVQudmFsdWUpe3RoaXMuX19FVkVOVFRBUkdFVD1nLl9mb3JtLl9fRVZFTlRUQVJHRVQudmFsdWU7Cn1lbHNle3RoaXMuX19FVkVOVFRBUkdFVD1lLmdldF9wb3N0QmFja0VsZW1lbnQoKS5pZDsKfWlmKGUuZ2V0X3Bvc3RCYWNrRWxlbWVudCgpLm5hbWUpe3RoaXMuX19FVkVOVFRBUkdFVD1lLmdldF9wb3N0QmFja0VsZW1lbnQoKS5uYW1lOwp9dGhpcy5fX0VWRU5UQVJHVU1FTlQ9Zy5fZm9ybS5fX0VWRU5UQVJHVU1FTlQudmFsdWU7CnZhciBkPW5ldyBUZWxlcmlrLldlYi5VSS5SYWRBamF4UmVxdWVzdEV2ZW50QXJncyh0aGlzLl9fRVZFTlRUQVJHRVQsZy5fZm9ybS5fX0VWRU5UQVJHVU1FTlQudmFsdWUsdGhpcy5fZW5hYmxlQUpBWCk7CnZhciBmPXRoaXMuZmlyZUV2ZW50KHRoaXMsIk9uUmVxdWVzdFN0YXJ0IixbZF0pOwppZihkLmdldF9jYW5jZWwoKXx8KHR5cGVvZihmKSE9InVuZGVmaW5lZCImJiFmKSl7ZGVsZXRlIHRoaXMuX19FVkVOVFRBUkdFVDsKZGVsZXRlIHRoaXMuX19FVkVOVEFSR1VNRU5UOwplLnNldF9jYW5jZWwodHJ1ZSk7CnJldHVybjsKfWlmKCFkLl9lbmFibGVBamF4fHwhZC5FbmFibGVBamF4KXtlLnNldF9jYW5jZWwodHJ1ZSk7CmcuX2Zvcm0uX19FVkVOVFRBUkdFVC52YWx1ZT10aGlzLl9fRVZFTlRUQVJHRVQ7CmcuX2Zvcm0uX19FVkVOVEFSR1VNRU5ULnZhbHVlPXRoaXMuX19FVkVOVEFSR1VNRU5UOwpnLl9mb3JtLnN1Ym1pdCgpOwpyZXR1cm47Cn10aGlzLl9pc1JlcXVlc3RJblByb2dyZXNzPXRydWU7CnRoaXMuX2F0dGFjaFJlcXVlc3RIYW5kbGVycyhnLGUsdHJ1ZSk7Cn0sX2VuZFJlcXVlc3Q6ZnVuY3Rpb24oayxoKXt2YXIgYT10aGlzLmNvbnRleHQ7CmsucmVtb3ZlX2VuZFJlcXVlc3QoYS5fZW5kUmVxdWVzdEhhbmRsZXIpOwpmb3IodmFyIGI9MCxlPVRlbGVyaWsuV2ViLlVJLlJhZEFqYXhDb250cm9sLnBhbmVsc1RvQ2xlYXIubGVuZ3RoOwpiPGU7CmIrKyl7dmFyIGY9VGVsZXJpay5XZWIuVUkuUmFkQWpheENvbnRyb2wucGFuZWxzVG9DbGVhcltiXTsKdmFyIGw9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZi5pZCk7CnZhciBkPSRnZXQoZi5pZC5yZXBsYWNlKCJQYW5lbCIsIiIpKTsKaWYoIWQpe2NvbnRpbnVlOwp9dmFyIGM9bC5wYXJlbnROb2RlOwp2YXIgaj1sLm5leHRTaWJsaW5nfHxUZWxlcmlrLldlYi5VSS5SYWRBamF4Q29udHJvbC5HZXROb2RlTmV4dFNpYmxpbmcobCk7ClRlbGVyaWsuV2ViLlVJLlJhZEFqYXhDb250cm9sLkluc2VydEF0TG9jYXRpb24oZCxjLGopOwpsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobCk7Cn1hLl9pc1JlcXVlc3RJblByb2dyZXNzPWZhbHNlOwphLmhpZGVMb2FkaW5nUGFuZWxzKCk7CmlmKHR5cGVvZihhLl9fRVZFTlRUQVJHRVQpIT0idW5kZWZpbmVkIiYmdHlwZW9mKGEuX19FVkVOVEFSR1VNRU5UKSE9InVuZGVmaW5lZCImJiFoLmdldF9yZXNwb25zZSgpLmdldF9hYm9ydGVkKCkpe3ZhciBnPW5ldyBUZWxlcmlrLldlYi5VSS5SYWRBamF4UmVxdWVzdEV2ZW50QXJncyhhLl9fRVZFTlRUQVJHRVQsYS5fX0VWRU5UQVJHVU1FTlQsYS5fZW5hYmxlQUpBWCk7CmEuZmlyZUV2ZW50KGEsIk9uUmVzcG9uc2VFbmQiLFtnXSk7Cn1pZihhLl9yZXF1ZXN0UXVldWUubGVuZ3RoPjApe2EuX19pZD10aGlzLmlkOwphLl9leGVjdXRlUGVuZGluZ1JlcXVlc3QoKTsKfX0sX3F1ZXVlUmVxdWVzdDpmdW5jdGlvbihhLGMpe2Muc2V0X2NhbmNlbCh0cnVlKTsKaWYodGhpcy5fcmVxdWVzdFF1ZXVlLmxlbmd0aD49dGhpcy5fcmVxdWVzdFF1ZXVlU2l6ZSl7cmV0dXJuOwp9dmFyIGU9Yy5nZXRfcG9zdEJhY2tFbGVtZW50KCk7CnZhciBkPWUuaWQ7CmlmKGUubmFtZSl7ZD1lLm5hbWU7Cn1pZihhLl9mb3JtLl9fRVZFTlRUQVJHRVQmJmEuX2Zvcm0uX19FVkVOVFRBUkdFVC52YWx1ZSl7ZD1hLl9mb3JtLl9fRVZFTlRUQVJHRVQudmFsdWU7Cn12YXIgYj1hLl9mb3JtLl9fRVZFTlRBUkdVTUVOVC52YWx1ZTsKQXJyYXkuZW5xdWV1ZSh0aGlzLl9yZXF1ZXN0UXVldWUsW2QsYl0pOwp9LF9leGVjdXRlUGVuZGluZ1JlcXVlc3Q6ZnVuY3Rpb24oKXt2YXIgYj1BcnJheS5kZXF1ZXVlKHRoaXMuX3JlcXVlc3RRdWV1ZSk7CnZhciBlPWJbMF07CnZhciBjPWJbMV07CmlmKHRoaXMuX3JlcXVlc3RRdWV1ZS5sZW5ndGg+MCYmdGhpcy5fX2lkIT0iIil7dmFyIGE9JGZpbmQodGhpcy5fX2lkKTsKaWYoYSl7QXJyYXkuYWRkUmFuZ2UoYS5fcmVxdWVzdFF1ZXVlLHRoaXMuX3JlcXVlc3RRdWV1ZSk7Cn19dmFyIGQ9U3lzLldlYkZvcm1zLlBhZ2VSZXF1ZXN0TWFuYWdlci5nZXRJbnN0YW5jZSgpOwpkLl9kb1Bvc3RCYWNrKGUsYyk7Cn0sX2F0dGFjaFJlcXVlc3RIYW5kbGVyczpmdW5jdGlvbihiLGQsZSl7dGhpcy5fZW5kUmVxdWVzdEhhbmRsZXI9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUoe2NvbnRleHQ6dGhpcyxpZDp0aGlzLmdldF9pZCgpfSx0aGlzLl9lbmRSZXF1ZXN0KTsKYi5hZGRfZW5kUmVxdWVzdCh0aGlzLl9lbmRSZXF1ZXN0SGFuZGxlcik7CnRoaXMuX29uRm9ybVN1Ym1pdENvbXBsZXRlZEhhbmRsZXI9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vbkZvcm1TdWJtaXRDb21wbGV0ZWQpOwpkLmdldF9yZXF1ZXN0KCkuYWRkX2NvbXBsZXRlZCh0aGlzLl9vbkZvcm1TdWJtaXRDb21wbGV0ZWRIYW5kbGVyKTsKaWYodHlwZW9mKGQuZ2V0X3JlcXVlc3QoKS5fZ2V0X2V2ZW50SGFuZGxlckxpc3QpPT0iZnVuY3Rpb24iKXtkLmdldF9yZXF1ZXN0KCkuX2dldF9ldmVudEhhbmRsZXJMaXN0KCkuX2xpc3QuY29tcGxldGVkLnJldmVyc2UoKTsKfWVsc2V7aWYoU3lzLk9ic2VydmVyKXt2YXIgYT1TeXMuT2JzZXJ2ZXIuX2dldENvbnRleHQoZC5nZXRfcmVxdWVzdCgpKTsKaWYoYSYmYS5ldmVudHMpe2EuZXZlbnRzLl9saXN0LmNvbXBsZXRlZC5yZXZlcnNlKCk7Cn19fWlmKGUpe3ZhciBmPWQuZ2V0X3JlcXVlc3QoKS5nZXRfYm9keSgpOwp2YXIgYz0oZi5sYXN0SW5kZXhPZigiJiIpIT1mLmxlbmd0aC0xKT8iJiI6IiI7CmYrPWMrIlJhZEFKQVhDb250cm9sSUQ9IitiLl91bmlxdWVJRFRvQ2xpZW50SUQodGhpcy5fdW5pcXVlSUQpOwpkLmdldF9yZXF1ZXN0KCkuc2V0X2JvZHkoZik7Cn19LF9nZXRQYXJlbnRBamF4UGFuZWw6ZnVuY3Rpb24oYil7dmFyIGE9bnVsbDsKd2hpbGUoYiE9bnVsbCl7aWYodHlwZW9mKGIuaWQpIT0idW5kZWZpbmVkIiYmJGZpbmQoYi5pZCkmJiRmaW5kKGIuaWQpLlR5cGU9PSJUZWxlcmlrLldlYi5VSS5SYWRBamF4UGFuZWwiKXthPSRmaW5kKGIuaWQpOwpicmVhazsKfWI9Yi5wYXJlbnROb2RlOwp9cmV0dXJuIGE7Cn0sZ2V0UmVzcG9uc2VJdGVtczpmdW5jdGlvbihtLG4sYyl7dmFyIGE9U3lzLldlYkZvcm1zLlBhZ2VSZXF1ZXN0TWFuYWdlci5nZXRJbnN0YW5jZSgpOwp2YXIgaT1tOwp2YXIgayxqLGYsZSxoOwp2YXIgbD0wOwp2YXIgZD1udWxsOwp2YXIgYj0ifCI7CnZhciBnPVtdOwp3aGlsZShsPGkubGVuZ3RoKXtrPWkuaW5kZXhPZihiLGwpOwppZihrPT09LTEpe2Q9YS5fZmluZFRleHQoaSxsKTsKYnJlYWs7Cn1qPXBhcnNlSW50KGkuc3Vic3RyaW5nKGwsayksMTApOwppZigoaiUxKSE9PTApe2Q9YS5fZmluZFRleHQoaSxsKTsKYnJlYWs7Cn1sPWsrMTsKaz1pLmluZGV4T2YoYixsKTsKaWYoaz09PS0xKXtkPWEuX2ZpbmRUZXh0KGksbCk7CmJyZWFrOwp9Zj1pLnN1YnN0cmluZyhsLGspOwpsPWsrMTsKaz1pLmluZGV4T2YoYixsKTsKaWYoaz09PS0xKXtkPWEuX2ZpbmRUZXh0KGksbCk7CmJyZWFrOwp9ZT1pLnN1YnN0cmluZyhsLGspOwpsPWsrMTsKaWYoKGwraik+PWkubGVuZ3RoKXtkPWEuX2ZpbmRUZXh0KGksaS5sZW5ndGgpOwpicmVhazsKfWlmKHR5cGVvZihhLl9kZWNvZGVTdHJpbmcpIT0idW5kZWZpbmVkIil7aD1hLl9kZWNvZGVTdHJpbmcoaS5zdWJzdHIobCxqKSk7Cn1lbHNle2g9aS5zdWJzdHIobCxqKTsKfWwrPWo7CmlmKGkuY2hhckF0KGwpIT09Yil7ZD1hLl9maW5kVGV4dChpLGwpOwpicmVhazsKfWwrKzsKaWYobiE9dW5kZWZpbmVkJiZuIT1mKXtjb250aW51ZTsKfWlmKGMhPXVuZGVmaW5lZCYmYyE9ZSl7Y29udGludWU7Cn1BcnJheS5hZGQoZyx7dHlwZTpmLGlkOmUsY29udGVudDpofSk7Cn1yZXR1cm4gZzsKfSxwYWdlTG9hZGluZzpmdW5jdGlvbihhLGIpe30scGFnZUxvYWRlZDpmdW5jdGlvbihhLGIpe30saGlkZUxvYWRpbmdQYW5lbHM6ZnVuY3Rpb24oKXtmb3IodmFyIGI9MDsKYjx0aGlzLl9sb2FkaW5nUGFuZWxzVG9IaWRlLmxlbmd0aDsKYisrKXt2YXIgYT10aGlzLl9sb2FkaW5nUGFuZWxzVG9IaWRlW2JdLlBhbmVsOwp2YXIgYz10aGlzLl9sb2FkaW5nUGFuZWxzVG9IaWRlW2JdLkNvbnRyb2xJRDsKaWYoYSE9bnVsbCl7YS5oaWRlKGMpOwpBcnJheS5yZW1vdmUodGhpcy5fbG9hZGluZ1BhbmVsc1RvSGlkZSx0aGlzLl9sb2FkaW5nUGFuZWxzVG9IaWRlW2JdKTsKYi0tOwp9fX0sZmlyZUV2ZW50OmZ1bmN0aW9uKGEsZCxjKXt2YXIgYj10cnVlOwppZih0eXBlb2YoYVtkXSk9PSJzdHJpbmciKXtiPWV2YWwoYVtkXSk7Cn1lbHNle2lmKHR5cGVvZihhW2RdKT09ImZ1bmN0aW9uIil7aWYoYyl7aWYodHlwZW9mKGMudW5zaGlmdCkhPSJ1bmRlZmluZWQiKXtjLnVuc2hpZnQoYSk7CmI9YVtkXS5hcHBseShhLGMpOwp9ZWxzZXtiPWFbZF0uYXBwbHkoYSxbY10pOwp9fWVsc2V7Yj1hW2RdKCk7Cn19fWlmKHR5cGVvZihiKSE9ImJvb2xlYW4iKXtyZXR1cm4gdHJ1ZTsKfWVsc2V7cmV0dXJuIGI7Cn19LHVwZGF0ZUhlYWRMaW5rczpmdW5jdGlvbigpe3ZhciBnPXRoaXMuZ2V0SGVhZEVsZW1lbnQoKTsKdmFyIGM9Zy5nZXRFbGVtZW50c0J5VGFnTmFtZSgibGluayIpOwp2YXIgbT1bXTsKZm9yKHZhciBmPTAsZD1jLmxlbmd0aDsKZjxkOwpmKyspe3ZhciBhPWNbZl0uZ2V0QXR0cmlidXRlKCJocmVmIik7Cm0ucHVzaChhKTsKfWZvcih2YXIgaz0wLGU9dGhpcy5fbGlua3MubGVuZ3RoOwprPGU7CmsrKyl7dmFyIGI9dGhpcy5fbGlua3Nba107CmI9Yi5yZXBsYWNlKC8mYW1wO2FtcDt0L2csIiZ0Iik7CmI9Yi5yZXBsYWNlKC8mYW1wO3QvZywiJnQiKTsKdmFyIGg9QXJyYXkuY29udGFpbnMobSxiKTsKaWYoIWgpe2lmKGI9PSIiKXtjb250aW51ZTsKfXZhciBsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpbmsiKTsKbC5zZXRBdHRyaWJ1dGUoInJlbCIsInN0eWxlc2hlZXQiKTsKbC5zZXRBdHRyaWJ1dGUoImhyZWYiLGIpOwpnLmFwcGVuZENoaWxkKGwpOwp9fX0sX3JldHJpZXZlRmlyc3RTdHlsZVNoZWV0OmZ1bmN0aW9uKCl7dmFyIGc9bnVsbDsKaWYoZG9jdW1lbnQuY3JlYXRlU3R5bGVTaGVldCE9bnVsbCl7dHJ5e2c9ZG9jdW1lbnQuY3JlYXRlU3R5bGVTaGVldCgpOwp9Y2F0Y2goYil7fWlmKGc9PW51bGwpe2c9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTsKfX1lbHNle3ZhciBmPWRvY3VtZW50LnN0eWxlU2hlZXRzOwppZihmLmxlbmd0aD09MCl7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTsKYy5tZWRpYT0iYWxsIjsKYy50eXBlPSJ0ZXh0L2NzcyI7CnZhciBoPXRoaXMuZ2V0SGVhZEVsZW1lbnQoKTsKaC5hcHBlbmRDaGlsZChjKTsKfXZhciBkPWYubGVuZ3RoOwp2YXIgYT0wOwp3aGlsZShnPT1udWxsJiZhPGQpe2c9ZlthKytdOwp0cnl7Zy5jc3NSdWxlczsKfWNhdGNoKGIpe2c9bnVsbDsKfX19cmV0dXJuIGc7Cn0sdXBkYXRlSGVhZFN0eWxlczpmdW5jdGlvbigpe3ZhciBmPXRoaXMuX3JldHJpZXZlRmlyc3RTdHlsZVNoZWV0KCk7CmlmKGY9PW51bGwpe3JldHVybjsKfWlmKGRvY3VtZW50LmNyZWF0ZVN0eWxlU2hlZXQhPW51bGwpe2Zvcih2YXIgZD0wLGE9dGhpcy5fc3R5bGVzLmxlbmd0aDsKZDxhOwpkKyspe3ZhciBlPXRoaXMuX3N0eWxlc1tkXTsKZi5jc3NUZXh0PWU7Cn19ZWxzZXtmb3IodmFyIGQ9MDsKZDx0aGlzLl9zdHlsZXMubGVuZ3RoOwpkKyspe3ZhciBlPXRoaXMuX3N0eWxlc1tkXTsKdmFyIGI9ZS5zcGxpdCgifSIpOwpmb3IodmFyIGM9MDsKYzxiLmxlbmd0aDsKYysrKXtpZihiW2NdLnJlcGxhY2UoL1xzKi8sIiIpPT0iIil7Y29udGludWU7Cn1pZihiW2NdLmluZGV4T2YoInsiKSE9LTEpe2YuaW5zZXJ0UnVsZShiW2NdKyJ9IixmLmNzc1J1bGVzLmxlbmd0aCk7Cn19fX19LGdldEhlYWRFbGVtZW50OmZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImhlYWQiKTsKaWYoYS5sZW5ndGg+MCl7cmV0dXJuIGFbMF07Cn12YXIgYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJoZWFkIik7CmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZChiKTsKcmV0dXJuIGI7Cn0sYWpheFJlcXVlc3Q6ZnVuY3Rpb24oYSl7X19kb1Bvc3RCYWNrKHRoaXMuX3VuaXF1ZUlELGEpOwp9LGFqYXhSZXF1ZXN0V2l0aFRhcmdldDpmdW5jdGlvbihiLGEpe19fZG9Qb3N0QmFjayhiLGEpOwp9LF9fZG9Qb3N0QmFjazpmdW5jdGlvbihhLGIpe3ZhciBjPVN5cy5XZWJGb3Jtcy5QYWdlUmVxdWVzdE1hbmFnZXIuZ2V0SW5zdGFuY2UoKS5fZm9ybTsKaWYoYyE9bnVsbCl7aWYoYy5fX0VWRU5UVEFSR0VUIT1udWxsKXtjLl9fRVZFTlRUQVJHRVQudmFsdWU9YTsKfWlmKGMuX19FVkVOVEFSR1VNRU5UIT1udWxsKXtjLl9fRVZFTlRBUkdVTUVOVC52YWx1ZT1iOwp9Yy5zdWJtaXQoKTsKfX19OwpUZWxlcmlrLldlYi5VSS5SYWRBamF4Q29udHJvbC5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5SYWRBamF4Q29udHJvbCIsU3lzLlVJLkNvbnRyb2wpOwpUZWxlcmlrLldlYi5VSS5SYWRBamF4UmVxdWVzdEV2ZW50QXJncz1mdW5jdGlvbihjLGIsYSl7VGVsZXJpay5XZWIuVUkuUmFkQWpheFJlcXVlc3RFdmVudEFyZ3MuaW5pdGlhbGl6ZUJhc2UodGhpcyk7CnRoaXMuX2VuYWJsZUFqYXg9YTsKdGhpcy5fZXZlbnRUYXJnZXQ9YzsKdGhpcy5fZXZlbnRBcmd1bWVudD1iOwp0aGlzLl9wb3N0YmFja0NvbnRyb2xDbGllbnRJRD1jLnJlcGxhY2UoLyhcJHw6KS9nLCJfIik7CnRoaXMuX2V2ZW50VGFyZ2V0RWxlbWVudD0kZ2V0KHRoaXMuX3Bvc3RiYWNrQ29udHJvbENsaWVudElEKTsKdGhpcy5FbmFibGVBamF4PXRoaXMuX2VuYWJsZUFqYXg7CnRoaXMuRXZlbnRUYXJnZXQ9dGhpcy5fZXZlbnRUYXJnZXQ7CnRoaXMuRXZlbnRBcmd1bWVudD10aGlzLl9ldmVudEFyZ3VtZW50Owp0aGlzLkV2ZW50VGFyZ2V0RWxlbWVudD10aGlzLl9ldmVudFRhcmdldEVsZW1lbnQ7Cn07ClRlbGVyaWsuV2ViLlVJLlJhZEFqYXhSZXF1ZXN0RXZlbnRBcmdzLnByb3RvdHlwZT17Z2V0X2VuYWJsZUFqYXg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5hYmxlQWpheDsKfSxzZXRfZW5hYmxlQWpheDpmdW5jdGlvbihhKXtpZih0aGlzLl9lbmFibGVBamF4IT1hKXt0aGlzLl9lbmFibGVBamF4PWE7Cn19LGdldF9ldmVudFRhcmdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ldmVudFRhcmdldDsKfSxnZXRfZXZlbnRBcmd1bWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ldmVudEFyZ3VtZW50Owp9LGdldF9ldmVudFRhcmdldEVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXZlbnRUYXJnZXRFbGVtZW50Owp9fTsKVGVsZXJpay5XZWIuVUkuUmFkQWpheFJlcXVlc3RFdmVudEFyZ3MucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuUmFkQWpheFJlcXVlc3RFdmVudEFyZ3MiLFN5cy5DYW5jZWxFdmVudEFyZ3MpOwpUZWxlcmlrLldlYi5VSS5SYWRBamF4Q29udHJvbC5IaXN0b3J5PXt9OwpUZWxlcmlrLldlYi5VSS5SYWRBamF4Q29udHJvbC5IYW5kbGVIaXN0b3J5PWZ1bmN0aW9uKGEsZCl7aWYod2luZG93Lm5ldHNjYXBlKXtyZXR1cm47Cn12YXIgYj0kZ2V0KGErIl9IaXN0b3J5Iik7CmlmKGI9PW51bGwpe2I9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaWZyYW1lIik7CmIuaWQ9YSsiX0hpc3RvcnkiOwpiLm5hbWU9YSsiX0hpc3RvcnkiOwpiLnN0eWxlLndpZHRoPSIwcHgiOwpiLnN0eWxlLmhlaWdodD0iMHB4IjsKYi5zcmM9ImFib3V0OmJsYW5rIjsKYi5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iOwp2YXIgYz1mdW5jdGlvbihrKXtpZighVGVsZXJpay5XZWIuVUkuUmFkQWpheENvbnRyb2wuU2hvdWxkTG9hZEhpc3Rvcnkpe1RlbGVyaWsuV2ViLlVJLlJhZEFqYXhDb250cm9sLlNob3VsZExvYWRIaXN0b3J5PXRydWU7CnJldHVybjsKfXZhciBnPSIiOwp2YXIgbD0iIjsKdmFyIGo9Yi5jb250ZW50V2luZG93LmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJfX0RBVEEiKTsKaWYoIWope3JldHVybjsKfXZhciBvPWoudmFsdWUuc3BsaXQoIiYiKTsKZm9yKHZhciBtPTAsZj1vLmxlbmd0aDsKbTxmOwptKyspe3ZhciBuPW9bbV0uc3BsaXQoIj0iKTsKaWYoblswXT09Il9fRVZFTlRUQVJHRVQiKXtnPW5bMV07Cn1pZihuWzBdPT0iX19FVkVOVEFSR1VNRU5UIil7bD1uWzFdOwp9dmFyIGg9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoU3lzLldlYkZvcm1zLlBhZ2VSZXF1ZXN0TWFuYWdlci5nZXRJbnN0YW5jZSgpLl91bmlxdWVJRFRvQ2xpZW50SUQoblswXSkpOwppZihoIT1udWxsKXtUZWxlcmlrLldlYi5VSS5SYWRBamF4Q29udHJvbC5SZXN0b3JlUG9zdERhdGEoaCxUZWxlcmlrLldlYi5VSS5SYWRBamF4Q29udHJvbC5EZWNvZGVQb3N0RGF0YShuWzFdKSk7Cn19aWYoZyE9IiIpe19fZG9Qb3N0QmFjayhUZWxlcmlrLldlYi5VSS5SYWRBamF4Q29udHJvbC5EZWNvZGVQb3N0RGF0YShnKSxUZWxlcmlrLldlYi5VSS5SYWRBamF4Q29udHJvbC5EZWNvZGVQb3N0RGF0YShsKSxhKTsKfX07CiRhZGRIYW5kbGVyKGIsImxvYWQiLGMpOwpkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGIpOwp9aWYoVGVsZXJpay5XZWIuVUkuUmFkQWpheENvbnRyb2wuSGlzdG9yeVtkXT09bnVsbCl7VGVsZXJpay5XZWIuVUkuUmFkQWpheENvbnRyb2wuSGlzdG9yeVtkXT10cnVlOwpUZWxlcmlrLldlYi5VSS5SYWRBamF4Q29udHJvbC5BZGRIaXN0b3J5RW50cnkoYixkKTsKfX07ClRlbGVyaWsuV2ViLlVJLlJhZEFqYXhDb250cm9sLkFkZEhpc3RvcnlFbnRyeT1mdW5jdGlvbihhLGIpe1RlbGVyaWsuV2ViLlVJLlJhZEFqYXhDb250cm9sLlNob3VsZExvYWRIaXN0b3J5PWZhbHNlOwphLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQub3BlbigpOwphLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQud3JpdGUoIjxpbnB1dCBpZD0nX19EQVRBJyBuYW1lPSdfX0RBVEEnIHR5cGU9J2hpZGRlbicgdmFsdWU9JyIrYisiJyAvPiIpOwphLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuY2xvc2UoKTsKaWYod2luZG93Lm5ldHNjYXBlKXthLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQubG9jYXRpb24uaGFzaD0iIyciK25ldyBEYXRlKCkrIiciOwp9fTsKVGVsZXJpay5XZWIuVUkuUmFkQWpheENvbnRyb2wuRGVjb2RlUG9zdERhdGE9ZnVuY3Rpb24oYSl7aWYoZGVjb2RlVVJJQ29tcG9uZW50KXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGEpOwp9ZWxzZXtyZXR1cm4gdW5lc2NhcGUoYSk7Cn19OwpUZWxlcmlrLldlYi5VSS5SYWRBamF4Q29udHJvbC5SZXN0b3JlUG9zdERhdGE9ZnVuY3Rpb24oYSxkKXtpZihhLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09InNlbGVjdCIpe2Zvcih2YXIgYz0wLGI9YS5vcHRpb25zLmxlbmd0aDsKYzxiOwpjKyspe2lmKGQuaW5kZXhPZihhLm9wdGlvbnNbY10udmFsdWUpIT0tMSl7YS5vcHRpb25zW2NdLnNlbGVjdGVkPXRydWU7Cn19fWlmKGEudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT0iaW5wdXQiJiYoYS50eXBlLnRvTG93ZXJDYXNlKCk9PSJ0ZXh0Inx8YS50eXBlLnRvTG93ZXJDYXNlKCk9PSJoaWRkZW4iKSl7YS52YWx1ZT1kOwp9aWYoYS50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJpbnB1dCImJihhLnR5cGUudG9Mb3dlckNhc2UoKT09ImNoZWNrYm94Inx8YS50eXBlLnRvTG93ZXJDYXNlKCk9PSJyYWRpbyIpKXthLmNoZWNrZWQ9ZDsKfX07ClRlbGVyaWsuV2ViLlVJLlJhZEFqYXhDb250cm9sLkdldE5vZGVOZXh0U2libGluZz1mdW5jdGlvbihhKXtpZihhIT1udWxsJiZhLm5leHRTaWJsaW5nIT1udWxsKXtyZXR1cm4gYS5uZXh0U2libGluZzsKfXJldHVybiBudWxsOwp9OwpUZWxlcmlrLldlYi5VSS5SYWRBamF4Q29udHJvbC5JbnNlcnRBdExvY2F0aW9uPWZ1bmN0aW9uKGEsYixjKXtpZihjIT1udWxsKXtyZXR1cm4gYi5pbnNlcnRCZWZvcmUoYSxjKTsKfWVsc2V7cmV0dXJuIGIuYXBwZW5kQ2hpbGQoYSk7Cn19OwpUZWxlcmlrLldlYi5VSS5SYWRBamF4Q29udHJvbC5Gb2N1c0VsZW1lbnQ9ZnVuY3Rpb24oYSl7dmFyIGI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYSk7CmlmKGIpe3ZhciBkPWIudGFnTmFtZTsKdmFyIGY9Yi50eXBlOwppZihkLnRvTG93ZXJDYXNlKCk9PSJpbnB1dCImJihmLnRvTG93ZXJDYXNlKCk9PSJjaGVja2JveCJ8fGYudG9Mb3dlckNhc2UoKT09InJhZGlvIikpe3dpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dHJ5e2IuZm9jdXMoKTsKfWNhdGNoKGcpe319LDUwMCk7Cn1lbHNle3RyeXtUZWxlcmlrLldlYi5VSS5SYWRBamF4Q29udHJvbC5TZXRTZWxlY3Rpb25Gb2N1cyhiKTsKYi5mb2N1cygpOwp9Y2F0Y2goYyl7fX19fTsKVGVsZXJpay5XZWIuVUkuUmFkQWpheENvbnRyb2wuU2V0U2VsZWN0aW9uRm9jdXM9ZnVuY3Rpb24oYSl7aWYoYS5jcmVhdGVUZXh0UmFuZ2U9PW51bGwpe3JldHVybjsKfXZhciBjPW51bGw7CnRyeXtjPWEuY3JlYXRlVGV4dFJhbmdlKCk7Cn1jYXRjaChiKXt9aWYoYyE9bnVsbCl7Yy5tb3ZlU3RhcnQoInRleHRlZGl0IixjLnRleHQubGVuZ3RoKTsKYy5jb2xsYXBzZShmYWxzZSk7CmMuc2VsZWN0KCk7Cn19OwpUZWxlcmlrLldlYi5VSS5SYWRBamF4Q29udHJvbC5wYW5lbHNUb0NsZWFyPVtdOwpUZWxlcmlrLldlYi5VSS5SYWRBamF4Q29udHJvbC5VcGRhdGVFbGVtZW50PWZ1bmN0aW9uKGEsZyl7dmFyIGU9JGdldChhKTsKaWYoZSE9bnVsbCl7ZS5pbm5lckhUTUw9ZzsKdmFyIGM9VGVsZXJpay5XZWIuVUkuUmFkQWpheENvbnRyb2wuR2V0U2NyaXB0c1NyYyhnKTsKZm9yKHZhciBqPTAsZj1jLmxlbmd0aDsKajxmOwpqKyspe1RlbGVyaWsuV2ViLlVJLlJhZEFqYXhDb250cm9sLkluY2x1ZGVDbGllbnRTY3JpcHQoY1tqXSk7Cn1jPVRlbGVyaWsuV2ViLlVJLlJhZEFqYXhDb250cm9sLkdldFRhZ3MoZywic2NyaXB0Iik7CmZvcih2YXIgaj0wLGY9Yy5sZW5ndGg7Cmo8ZjsKaisrKXt2YXIgbD1jW2pdOwppZihsLmlubmVyIT0iIil7VGVsZXJpay5XZWIuVUkuUmFkQWpheENvbnRyb2wuRXZhbFNjcmlwdENvZGUobC5pbm5lcik7Cn19dmFyIGg9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImhlYWQiKVswXTsKdmFyIGs9VGVsZXJpay5XZWIuVUkuUmFkQWpheENvbnRyb2wuR2V0TGlua0hyZWZzKGcpOwpmb3IodmFyIGo9MCxmPWsubGVuZ3RoOwpqPGY7CmorKyl7dmFyIGI9a1tqXTsKdmFyIGQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGluayIpOwpkLnNldEF0dHJpYnV0ZSgicmVsIiwic3R5bGVzaGVldCIpOwpkLnNldEF0dHJpYnV0ZSgiaHJlZiIsYik7CmguYXBwZW5kQ2hpbGQoZCk7Cn19fTsKVGVsZXJpay5XZWIuVUkuUmFkQWpheENvbnRyb2wuSW5jbHVkZUNsaWVudFNjcmlwdD1mdW5jdGlvbihjKXtpZighVGVsZXJpay5XZWIuVUkuUmFkQWpheENvbnRyb2wuU2hvdWxkSW5jbHVkZUNsaWVudFNjcmlwdChjKSl7cmV0dXJuOwp9dmFyIGI9KHdpbmRvdy5YTUxIdHRwUmVxdWVzdCk/bmV3IFhNTEh0dHBSZXF1ZXN0KCk6bmV3IEFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxIVFRQIik7CmIub3BlbigiR0VUIixjLGZhbHNlKTsKYi5zZW5kKG51bGwpOwppZihiLnN0YXR1cz09MjAwKXt2YXIgYT1iLnJlc3BvbnNlVGV4dDsKVGVsZXJpay5XZWIuVUkuUmFkQWpheENvbnRyb2wuRXZhbFNjcmlwdENvZGUoYSk7Cn19OwpUZWxlcmlrLldlYi5VSS5SYWRBamF4Q29udHJvbC5TaG91bGRJbmNsdWRlQ2xpZW50U2NyaXB0PWZ1bmN0aW9uKGEpe3ZhciBiPSR0ZWxlcmlrLmlzU2NyaXB0UmVnaXN0ZXJlZChhKTsKaWYoYj09MHx8Yj4xKXtyZXR1cm4gZmFsc2U7Cn1yZXR1cm4gdHJ1ZTsKfTsKVGVsZXJpay5XZWIuVUkuUmFkQWpheENvbnRyb2wuRXZhbFNjcmlwdENvZGU9ZnVuY3Rpb24oYil7aWYoVGVsZXJpay5XZWIuVUkuUmFkQWpheENvbnRyb2wuSXNTYWZhcmkoKSl7Yj1iLnJlcGxhY2UoL15ccyo8IS0tKCgufFxuKSopLS0+XHMqJC9taSwiJDEiKTsKfXZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpOwphLnNldEF0dHJpYnV0ZSgidHlwZSIsInRleHQvamF2YXNjcmlwdCIpOwppZihUZWxlcmlrLldlYi5VSS5SYWRBamF4Q29udHJvbC5Jc1NhZmFyaSgpKXthLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGIpKTsKfWVsc2V7YS50ZXh0PWI7Cn12YXIgYz1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdOwpjLmFwcGVuZENoaWxkKGEpOwppZihUZWxlcmlrLldlYi5VSS5SYWRBamF4Q29udHJvbC5Jc1NhZmFyaSgpKXthLmlubmVySFRNTD0iIjsKfWVsc2V7YS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGEpOwp9fTsKVGVsZXJpay5XZWIuVUkuUmFkQWpheENvbnRyb2wuR2V0VGFncz1mdW5jdGlvbihjLGIpe3ZhciBmPVtdOwp2YXIgZD1jOwp3aGlsZSgxKXt2YXIgYT1UZWxlcmlrLldlYi5VSS5SYWRBamF4Q29udHJvbC5HZXRUYWcoZCxiKTsKaWYoYS5pbmRleD09LTEpe2JyZWFrOwp9ZltmLmxlbmd0aF09YTsKdmFyIGU9YS5pbmRleCthLm91dGVyLmxlbmd0aDsKZD1kLnN1YnN0cmluZyhlLGQubGVuZ3RoKTsKfXJldHVybiBmOwp9OwpUZWxlcmlrLldlYi5VSS5SYWRBamF4Q29udHJvbC5HZXRUYWc9ZnVuY3Rpb24oYyxiLGQpe2lmKHR5cGVvZihkKT09InVuZGVmaW5lZCIpe2Q9IiI7Cn12YXIgYT1uZXcgUmVnRXhwKCI8IitiKyJbXj5dKj4oKC58XG58XHIpKj8pPC8iK2IrIj4iLCJpIik7CnZhciBlPWMubWF0Y2goYSk7CmlmKGUhPW51bGwmJmUubGVuZ3RoPj0yKXtyZXR1cm57b3V0ZXI6ZVswXSxpbm5lcjplWzFdLGluZGV4OmUuaW5kZXh9Owp9ZWxzZXtyZXR1cm57b3V0ZXI6ZCxpbm5lcjpkLGluZGV4Oi0xfTsKfX07ClRlbGVyaWsuV2ViLlVJLlJhZEFqYXhDb250cm9sLkdldExpbmtIcmVmcz1mdW5jdGlvbihhKXt2YXIgYz1hOwp2YXIgZT1bXTsKd2hpbGUoMSl7dmFyIGI9Yy5tYXRjaCgvPGxpbmtbXj5dKmhyZWY9KCd8Iik/KFteJyJdKikoJ3wiKT8oW14+XSopPi4qPyg8XC9saW5rPik/L2kpOwppZihiPT1udWxsfHxiLmxlbmd0aDwzKXticmVhazsKfXZhciBkPWJbMl07CmVbZS5sZW5ndGhdPWQ7CnZhciBmPWIuaW5kZXgrZC5sZW5ndGg7CmM9Yy5zdWJzdHJpbmcoZixjLmxlbmd0aCk7Cn1yZXR1cm4gZTsKfTsKVGVsZXJpay5XZWIuVUkuUmFkQWpheENvbnRyb2wuR2V0U2NyaXB0c1NyYz1mdW5jdGlvbihhKXt2YXIgYz1hOwp2YXIgZT1bXTsKd2hpbGUoMSl7dmFyIGI9Yy5tYXRjaCgvPHNjcmlwdFtePl0qc3JjPSgnfCIpPyhbXiciXSopKCd8Iik/KFtePl0qKT4uKj8oPFwvc2NyaXB0Pik/L2kpOwppZihiPT1udWxsfHxiLmxlbmd0aDwzKXticmVhazsKfXZhciBkPWJbMl07CmVbZS5sZW5ndGhdPWQ7CnZhciBmPWIuaW5kZXgrZC5sZW5ndGg7CmM9Yy5zdWJzdHJpbmcoZixjLmxlbmd0aCk7Cn1yZXR1cm4gZTsKfTsKVGVsZXJpay5XZWIuVUkuUmFkQWpheENvbnRyb2wuSXNTYWZhcmk9ZnVuY3Rpb24oKXtyZXR1cm4obmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvc2FmYXJpL2kpIT1udWxsKTsKfTsKVHlwZS5yZWdpc3Rlck5hbWVzcGFjZSgiVGVsZXJpay5XZWIuVUkiKTsKJHRlbGVyaWsuZmluZEFqYXhMb2FkaW5nUGFuZWw9JGZpbmQ7CiR0ZWxlcmlrLnRvQWpheExvYWRpbmdQYW5lbD1mdW5jdGlvbihhKXtyZXR1cm4gYTsKfTsKVGVsZXJpay5XZWIuVUkuUmFkQWpheExvYWRpbmdQYW5lbD1mdW5jdGlvbihiKXt2YXIgYT1bInNob3dpbmciLCJoaWRpbmciXTsKdGhpcy5faW5pdGlhbGl6ZUNsaWVudEV2ZW50cyhhKTsKVGVsZXJpay5XZWIuVUkuUmFkQWpheExvYWRpbmdQYW5lbC5pbml0aWFsaXplQmFzZSh0aGlzLFtiXSk7CnRoaXMuX3VuaXF1ZUlEPSIiOwp0aGlzLl9taW5EaXNwbGF5VGltZT0wOwp0aGlzLl9pbml0aWFsRGVsYXlUaW1lPTA7CnRoaXMuX2lzU3RpY2t5PWZhbHNlOwp0aGlzLl90cmFuc3BhcmVuY3k9MDsKdGhpcy5fbWFuYWdlcj1udWxsOwp0aGlzLl96SW5kZXg9OTAwMDA7CnRoaXMuc2tpbj0iIjsKdGhpcy5fYW5pbWF0aW9uRHVyYXRpb249MDsKdGhpcy5VbmlxdWVJRD10aGlzLl91bmlxdWVJRDsKdGhpcy5NaW5EaXNwbGF5VGltZT10aGlzLl9taW5EaXNwbGF5VGltZTsKdGhpcy5Jbml0aWFsRGVsYXlUaW1lPXRoaXMuX2luaXRpYWxEZWxheVRpbWU7CnRoaXMuSXNTdGlja3k9dGhpcy5faXNTdGlja3k7CnRoaXMuVHJhbnNwYXJlbmN5PXRoaXMuX3RyYW5zcGFyZW5jeTsKdGhpcy5aSW5kZXg9dGhpcy5fekluZGV4Owp9OwpUZWxlcmlrLldlYi5VSS5SYWRBamF4TG9hZGluZ1BhbmVsLnByb3RvdHlwZT17aW5pdGlhbGl6ZTpmdW5jdGlvbigpe1RlbGVyaWsuV2ViLlVJLlJhZEFqYXhMb2FkaW5nUGFuZWwuY2FsbEJhc2VNZXRob2QodGhpcywiaW5pdGlhbGl6ZSIpOwp9LGRpc3Bvc2U6ZnVuY3Rpb24oKXtUZWxlcmlrLldlYi5VSS5SYWRBamF4TG9hZGluZ1BhbmVsLmNhbGxCYXNlTWV0aG9kKHRoaXMsImRpc3Bvc2UiKTsKfSxnZXRfekluZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3pJbmRleDsKfSxzZXRfekluZGV4OmZ1bmN0aW9uKGEpe2lmKHRoaXMuX3pJbmRleCE9YSl7dGhpcy5fekluZGV4PWE7Cn19LGdldF91bmlxdWVJRDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91bmlxdWVJRDsKfSxzZXRfdW5pcXVlSUQ6ZnVuY3Rpb24oYSl7aWYodGhpcy5fdW5pcXVlSUQhPWEpe3RoaXMuX3VuaXF1ZUlEPWE7CndpbmRvd1tTeXMuV2ViRm9ybXMuUGFnZVJlcXVlc3RNYW5hZ2VyLmdldEluc3RhbmNlKCkuX3VuaXF1ZUlEVG9DbGllbnRJRCh0aGlzLl91bmlxdWVJRCldPXRoaXM7Cn19LGdldF9pbml0aWFsRGVsYXlUaW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2luaXRpYWxEZWxheVRpbWU7Cn0sc2V0X2luaXRpYWxEZWxheVRpbWU6ZnVuY3Rpb24oYSl7aWYodGhpcy5faW5pdGlhbERlbGF5VGltZSE9YSl7dGhpcy5faW5pdGlhbERlbGF5VGltZT1hOwp9fSxnZXRfaXNTdGlja3k6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNTdGlja3k7Cn0sc2V0X2lzU3RpY2t5OmZ1bmN0aW9uKGEpe2lmKHRoaXMuX2lzU3RpY2t5IT1hKXt0aGlzLl9pc1N0aWNreT1hOwp9fSxnZXRfbWluRGlzcGxheVRpbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWluRGlzcGxheVRpbWU7Cn0sc2V0X21pbkRpc3BsYXlUaW1lOmZ1bmN0aW9uKGEpe2lmKHRoaXMuX21pbkRpc3BsYXlUaW1lIT1hKXt0aGlzLl9taW5EaXNwbGF5VGltZT1hOwp9fSxnZXRfdHJhbnNwYXJlbmN5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RyYW5zcGFyZW5jeTsKfSxzZXRfdHJhbnNwYXJlbmN5OmZ1bmN0aW9uKGEpe2lmKHRoaXMuX3RyYW5zcGFyZW5jeSE9YSl7dGhpcy5fdHJhbnNwYXJlbmN5PWE7Cn19LGdldF9hbmltYXRpb25EdXJhdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hbmltYXRpb25EdXJhdGlvbjsKfSxzZXRfYW5pbWF0aW9uRHVyYXRpb246ZnVuY3Rpb24oYSl7dGhpcy5fYW5pbWF0aW9uRHVyYXRpb249YTsKfSxzaG93OmZ1bmN0aW9uKGMpe3ZhciBlPSRnZXQoYysiX3dyYXBwZXIiKTsKaWYoKHR5cGVvZihlKT09InVuZGVmaW5lZCIpfHwoIWUpKXtlPSRnZXQoYyk7Cn12YXIgZD10aGlzLmdldF9lbGVtZW50KCk7CmlmKCEoZSYmZCkpe3JldHVybiBmYWxzZTsKfXZhciBmPXRoaXMuX2luaXRpYWxEZWxheVRpbWU7CnZhciBiPXRoaXM7CnZhciBhPSghdGhpcy5faXNTdGlja3kpP3RoaXMuY2xvbmVMb2FkaW5nUGFuZWwoZCxjKTpkOwppZihmKXt3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe3RyeXtpZihiLl9tYW5hZ2VyIT1udWxsJiZiLl9tYW5hZ2VyLl9pc1JlcXVlc3RJblByb2dyZXNzKXtiLmRpc3BsYXlMb2FkaW5nRWxlbWVudChhLGUpOwp9fWNhdGNoKGcpe319LGYpOwp9ZWxzZXt0aGlzLmRpc3BsYXlMb2FkaW5nRWxlbWVudChhLGUpOwp9cmV0dXJuIHRydWU7Cn0saGlkZTpmdW5jdGlvbihnKXt2YXIgZT0kZ2V0KGcpOwp2YXIgaj1TdHJpbmcuZm9ybWF0KCJ7MH1fd3JhcHBlciIsZyk7CnZhciBhPSRnZXQoaik7CmlmKGEpe2U9YTsKfWlmKHRoaXMuZ2V0X2VsZW1lbnQoKT09bnVsbCl7dmFyIGQ9JGdldChTeXMuV2ViRm9ybXMuUGFnZVJlcXVlc3RNYW5hZ2VyLmdldEluc3RhbmNlKCkuX3VuaXF1ZUlEVG9DbGllbnRJRCh0aGlzLl91bmlxdWVJRCkpOwppZihkPT1udWxsKXtyZXR1cm47Cn10aGlzLl9lbGVtZW50PWQ7Cn12YXIgaD0oIXRoaXMuX2lzU3RpY2t5KT8kZ2V0KHRoaXMuZ2V0X2VsZW1lbnQoKS5pZCtnKTp0aGlzLmdldF9lbGVtZW50KCk7CnZhciBrPW5ldyBEYXRlKCk7CmlmKGg9PW51bGwpe3JldHVybjsKfXZhciBmPWstaC5fc3RhcnREaXNwbGF5VGltZTsKdmFyIGI9dGhpcy5fbWluRGlzcGxheVRpbWU7CnZhciBpPW5ldyBUZWxlcmlrLldlYi5VSS5BamF4TG9hZGluZ1BhbmVsRXZlbnRBcmdzKGgsZSk7CnRoaXMucmFpc2VfaGlkaW5nKGkpOwppZighaS5nZXRfY2FuY2VsTmF0aXZlRGlzcGxheSgpKXt2YXIgYz10aGlzLmdldF9hbmltYXRpb25EdXJhdGlvbigpOwppZih0aGlzLl9pc1N0aWNreSl7aWYoYj5mKXt3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2lmKGM+MCl7JHRlbGVyaWsuJChoKS5mYWRlT3V0KGMsZnVuY3Rpb24oKXtoLnN0eWxlLmRpc3BsYXk9Im5vbmUiOwp9KTsKfWVsc2V7aC5zdHlsZS5kaXNwbGF5PSJub25lIjsKfX0sYi1mKTsKfWVsc2V7aWYoYz4wKXskdGVsZXJpay4kKGgpLmZhZGVPdXQoYyxmdW5jdGlvbigpe2guc3R5bGUuZGlzcGxheT0ibm9uZSI7Cn0pOwp9ZWxzZXtoLnN0eWxlLmRpc3BsYXk9Im5vbmUiOwp9fX1lbHNle2lmKGI+Zil7d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtpZihjPjApeyR0ZWxlcmlrLiQoaCkuZmFkZU91dChjLGZ1bmN0aW9uKCl7aC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGgpOwp9KTsKfWVsc2V7aC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGgpOwp9fSxiLWYpOwp9ZWxzZXtpZihjPjApeyR0ZWxlcmlrLiQoaCkuZmFkZU91dChjLGZ1bmN0aW9uKCl7aC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGgpOwp9KTsKfWVsc2V7aC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGgpOwp9fX19aWYoIXRoaXMuX2lzU3RpY2t5JiZ0eXBlb2YoZSkhPSJ1bmRlZmluZWQiJiYoZSE9bnVsbCkpe2Uuc3R5bGUudmlzaWJpbGl0eT0idmlzaWJsZSI7Cn19LGNsb25lTG9hZGluZ1BhbmVsOmZ1bmN0aW9uKGMsYil7dmFyIGE9Yy5jbG9uZU5vZGUoZmFsc2UpOwphLmlubmVySFRNTD1jLmlubmVySFRNTDsKYS5pZD1jLmlkK2I7CmRvY3VtZW50LmJvZHkuaW5zZXJ0QmVmb3JlKGEsZG9jdW1lbnQuYm9keS5maXJzdENoaWxkKTsKcmV0dXJuIGE7Cn0sZGlzcGxheUxvYWRpbmdFbGVtZW50OmZ1bmN0aW9uKGIsZCl7aWYoIXRoaXMuX2lzU3RpY2t5KXtpZigkdGVsZXJpay5pc0lFNil7dGhpcy5fc2V0RHJvcERvd25zVmlzaWJpdGlseShkLGZhbHNlKTsKfXZhciBlPXRoaXMuZ2V0RWxlbWVudFJlY3RhbmdsZShkKTsKYi5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiOwpiLnN0eWxlLndpZHRoPWUud2lkdGgrInB4IjsKYi5zdHlsZS5oZWlnaHQ9ZS5oZWlnaHQrInB4IjsKYi5zdHlsZS5sZWZ0PWUubGVmdCsicHgiOwpiLnN0eWxlLnRvcD1lLnRvcCsicHgiOwpiLnN0eWxlLnRleHRBbGlnbj0iY2VudGVyIjsKYi5zdHlsZS56SW5kZXg9dGhpcy5fekluZGV4Owp9dmFyIGE9MTAwLXBhcnNlSW50KHRoaXMuX3RyYW5zcGFyZW5jeSk7CmlmKGE8MTAwKXskdGVsZXJpay4kKGIpLmNzcygib3BhY2l0eSIsYS8xMDApOwp9dmFyIGY9dGhpczsKaGlkZVVwZGF0ZWRFbGVtZW50PWZ1bmN0aW9uKCl7aWYoYT09MTAwJiYhZi5faXNTdGlja3kpe3ZhciBnPXRydWU7CmlmKGYuc2tpbiE9IiIpe2lmKHR5cGVvZiBiLnN0eWxlLm9wYWNpdHk9PSJ1bmRlZmluZWQiKXtpZigkdGVsZXJpay4kKGIpLmNzcygiZmlsdGVyIikuaW5kZXhPZigib3BhY2l0eSIpIT0tMXx8JHRlbGVyaWsuJChiLmZpcnN0Q2hpbGQubmV4dFNpYmxpbmcpLmNzcygiZmlsdGVyIikuaW5kZXhPZigib3BhY2l0eSIpIT0tMSl7Zz1mYWxzZTsKfX1lbHNle2lmKCR0ZWxlcmlrLiQoYikuY3NzKCJvcGFjaXR5Iik+MHx8JHRlbGVyaWsuJChiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoInJhRGl2IilbMF0pLmNzcygib3BhY2l0eSIpPjApe2c9ZmFsc2U7Cn19fWlmKGcpe2Quc3R5bGUudmlzaWJpbGl0eT0iaGlkZGVuIjsKfX19Owp2YXIgYz1uZXcgVGVsZXJpay5XZWIuVUkuQWpheExvYWRpbmdQYW5lbEV2ZW50QXJncyhiLGQpOwp0aGlzLnJhaXNlX3Nob3dpbmcoYyk7CmlmKCFjLmdldF9jYW5jZWxOYXRpdmVEaXNwbGF5KCkpe2lmKHRoaXMuZ2V0X2FuaW1hdGlvbkR1cmF0aW9uKCk+MCl7JHRlbGVyaWsuJChiKS5jc3MoIm9wYWNpdHkiLDApOwpiLnN0eWxlLmRpc3BsYXk9IiI7CiR0ZWxlcmlrLiQoYikuYW5pbWF0ZSh7b3BhY2l0eTphLzEwMH0sdGhpcy5nZXRfYW5pbWF0aW9uRHVyYXRpb24oKSxoaWRlVXBkYXRlZEVsZW1lbnQpOwp9ZWxzZXtiLnN0eWxlLmRpc3BsYXk9IiI7CmhpZGVVcGRhdGVkRWxlbWVudCgpOwp9fWIuX3N0YXJ0RGlzcGxheVRpbWU9bmV3IERhdGUoKTsKfSxfc2V0RHJvcERvd25zVmlzaWJpdGlseTpmdW5jdGlvbihiLGEpe2lmKCFiKXtiPXRoaXM7Cn1iLmNsYXNzTmFtZSs9IiBSYWRBamF4VXBkYXRlZEVsZW1lbnQiOwp9LGdldEVsZW1lbnRSZWN0YW5nbGU6ZnVuY3Rpb24oYil7aWYoIWIpe2I9dGhpczsKfXZhciBkPSR0ZWxlcmlrLmdldExvY2F0aW9uKGIpOwp2YXIgYT1kLng7CnZhciBmPWQueTsKdmFyIGU9Yi5vZmZzZXRXaWR0aDsKdmFyIGM9Yi5vZmZzZXRIZWlnaHQ7CnJldHVybntsZWZ0OmEsdG9wOmYsd2lkdGg6ZSxoZWlnaHQ6Y307Cn0sX2luaXRpYWxpemVDbGllbnRFdmVudHM6ZnVuY3Rpb24oZSl7aWYoZSl7dmFyIGI9dGhpczsKZm9yKHZhciBkPTAsYT1lLmxlbmd0aDsKZDxhOwpkKyspe3ZhciBjPWVbZF07CnRoaXNbImFkZF8iK2NdPWZ1bmN0aW9uKGYpe3JldHVybiBmdW5jdGlvbihnKXt0aGlzLmdldF9ldmVudHMoKS5hZGRIYW5kbGVyKGYsZyk7Cn07Cn0oYyk7CnRoaXNbInJlbW92ZV8iK2NdPWZ1bmN0aW9uKGYpe3JldHVybiBmdW5jdGlvbihnKXt0aGlzLmdldF9ldmVudHMoKS5yZW1vdmVIYW5kbGVyKGYsZyk7Cn07Cn0oYyk7CnRoaXNbInJhaXNlXyIrY109ZnVuY3Rpb24oZil7cmV0dXJuIGZ1bmN0aW9uKGcpe3RoaXMucmFpc2VFdmVudChmLGcpOwp9Owp9KGMpOwp9fX19OwpUZWxlcmlrLldlYi5VSS5SYWRBamF4TG9hZGluZ1BhbmVsLnJlZ2lzdGVyQ2xhc3MoIlRlbGVyaWsuV2ViLlVJLlJhZEFqYXhMb2FkaW5nUGFuZWwiLFRlbGVyaWsuV2ViLlVJLlJhZFdlYkNvbnRyb2wpOwpUZWxlcmlrLldlYi5VSS5BamF4TG9hZGluZ1BhbmVsRXZlbnRBcmdzPWZ1bmN0aW9uKGIsYSl7VGVsZXJpay5XZWIuVUkuQWpheExvYWRpbmdQYW5lbEV2ZW50QXJncy5pbml0aWFsaXplQmFzZSh0aGlzKTsKdGhpcy5fbG9hZGluZ0VsZW1lbnQ9YjsKdGhpcy5fdXBkYXRlZEVsZW1lbnQ9YTsKdGhpcy5fY2FuY2VsTmF0aXZlRGlzcGxheT1mYWxzZTsKfTsKVGVsZXJpay5XZWIuVUkuQWpheExvYWRpbmdQYW5lbEV2ZW50QXJncy5wcm90b3R5cGU9e2dldF9sb2FkaW5nRWxlbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb2FkaW5nRWxlbWVudDsKfSxnZXRfdXBkYXRlZEVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXBkYXRlZEVsZW1lbnQ7Cn0sZ2V0X2NhbmNlbE5hdGl2ZURpc3BsYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2FuY2VsTmF0aXZlRGlzcGxheTsKfSxzZXRfY2FuY2VsTmF0aXZlRGlzcGxheTpmdW5jdGlvbihhKXt0aGlzLl9jYW5jZWxOYXRpdmVEaXNwbGF5PWE7Cn19OwpUZWxlcmlrLldlYi5VSS5BamF4TG9hZGluZ1BhbmVsRXZlbnRBcmdzLnJlZ2lzdGVyQ2xhc3MoIlRlbGVyaWsuV2ViLlVJLkFqYXhMb2FkaW5nUGFuZWxFdmVudEFyZ3MiLFN5cy5FdmVudEFyZ3MpOwpUeXBlLnJlZ2lzdGVyTmFtZXNwYWNlKCJUZWxlcmlrLldlYi5VSSIpOwokdGVsZXJpay5maW5kQWpheE1hbmFnZXI9JGZpbmQ7CiR0ZWxlcmlrLnRvQWpheE1hbmFnZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIGE7Cn07ClRlbGVyaWsuV2ViLlVJLlJhZEFqYXhNYW5hZ2VyPWZ1bmN0aW9uKGEpe1RlbGVyaWsuV2ViLlVJLlJhZEFqYXhNYW5hZ2VyLmluaXRpYWxpemVCYXNlKHRoaXMsW2FdKTsKdGhpcy5fYWpheFNldHRpbmdzPVtdOwp0aGlzLl9kZWZhdWx0TG9hZGluZ1BhbmVsSUQ9IiI7CnRoaXMuX2luaXRpYXRvcnM9e307CnRoaXMuX2xvYWRpbmdQYW5lbHNUb0hpZGU9W107CnRoaXMuX2lzUmVxdWVzdEluUHJvZ3Jlc3M9ZmFsc2U7CnRoaXMuVHlwZT0iVGVsZXJpay5XZWIuVUkuUmFkQWpheE1hbmFnZXIiOwp0aGlzLl91cGRhdGVQYW5lbHNSZW5kZXJNb2RlPW51bGw7CnRoaXMuQWpheFNldHRpbmdzPXRoaXMuX2FqYXhTZXR0aW5nczsKdGhpcy5EZWZhdWx0TG9hZGluZ1BhbmVsSUQ9dGhpcy5fZGVmYXVsdExvYWRpbmdQYW5lbElEOwp9OwpUZWxlcmlrLldlYi5VSS5SYWRBamF4TWFuYWdlci5wcm90b3R5cGU9e2luaXRpYWxpemU6ZnVuY3Rpb24oKXtUZWxlcmlrLldlYi5VSS5SYWRBamF4TWFuYWdlci5jYWxsQmFzZU1ldGhvZCh0aGlzLCJpbml0aWFsaXplIik7CnZhciBhPXRoaXMuZ2V0X2VsZW1lbnQoKTsKaWYoYSE9bnVsbCYmYS5wYXJlbnROb2RlIT1udWxsJiZhLnBhcmVudE5vZGUuaWQ9PWEuaWQrIlNVIil7YS5wYXJlbnROb2RlLnN0eWxlLmRpc3BsYXk9Im5vbmUiOwp9dmFyIGM9dGhpcy5nZXRfYWpheFNldHRpbmdzKCk7CmZvcih2YXIgZD0wLGI9Yy5sZW5ndGg7CmQ8YjsKZCsrKXt0aGlzLl9pbml0aWF0b3JzW2NbZF0uSW5pdENvbnRyb2xJRF09Y1tkXS5VcGRhdGVkQ29udHJvbHM7Cn19LGRpc3Bvc2U6ZnVuY3Rpb24oKXtUZWxlcmlrLldlYi5VSS5SYWRBamF4TWFuYWdlci5jYWxsQmFzZU1ldGhvZCh0aGlzLCJkaXNwb3NlIik7Cn0sZ2V0X2FqYXhTZXR0aW5nczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hamF4U2V0dGluZ3M7Cn0sc2V0X2FqYXhTZXR0aW5nczpmdW5jdGlvbihhKXtpZih0aGlzLl9hamF4U2V0dGluZ3MhPWEpe3RoaXMuX2FqYXhTZXR0aW5ncz1hOwp9fSxnZXRfZGVmYXVsdExvYWRpbmdQYW5lbElEOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RlZmF1bHRMb2FkaW5nUGFuZWxJRDsKfSxzZXRfZGVmYXVsdExvYWRpbmdQYW5lbElEOmZ1bmN0aW9uKGEpe2lmKHRoaXMuX2RlZmF1bHRMb2FkaW5nUGFuZWxJRCE9YSl7dGhpcy5fZGVmYXVsdExvYWRpbmdQYW5lbElEPWE7Cn19LGdldF91cGRhdGVQYW5lbHNSZW5kZXJNb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VwZGF0ZVBhbmVsc1JlbmRlck1vZGU7Cn0sc2V0X3VwZGF0ZVBhbmVsc1JlbmRlck1vZGU6ZnVuY3Rpb24oYSl7aWYodGhpcy5fdXBkYXRlUGFuZWxzUmVuZGVyTW9kZSE9YSl7dGhpcy5fdXBkYXRlUGFuZWxzUmVuZGVyTW9kZT1hOwp0aGlzLl9hcHBseVVwZGF0ZVBhbmVsc1JlbmRlck1vZGUoYSk7Cn19LF9hcHBseVVwZGF0ZVBhbmVsc1JlbmRlck1vZGU6ZnVuY3Rpb24oZSl7dmFyIGQ9U3lzLldlYkZvcm1zLlBhZ2VSZXF1ZXN0TWFuYWdlci5nZXRJbnN0YW5jZSgpOwp2YXIgYT1kLl91cGRhdGVQYW5lbENsaWVudElEczsKZm9yKHZhciBjPTA7CmM8YS5sZW5ndGg7CmMrKyl7dmFyIGI9JGdldChhW2NdKTsKaWYoYil7aWYoYi50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJzcGFuIil7Y29udGludWU7Cn1iLnN0eWxlLmRpc3BsYXk9KGU9PTApPyJibG9jayI6ImlubGluZSI7Cn19fSxzaG93TG9hZGluZ1BhbmVsczpmdW5jdGlvbihhLGQpe2Zvcih2YXIgaz0wLGY9ZC5sZW5ndGg7Cms8ZjsKaysrKXtpZihkW2tdLkluaXRDb250cm9sSUQ9PWEpe3ZhciBiPWRba107CmZvcih2YXIgaD0wLGw9Yi5VcGRhdGVkQ29udHJvbHMubGVuZ3RoOwpoPGw7CmgrKyl7dmFyIG09Yi5VcGRhdGVkQ29udHJvbHNbaF07CnZhciBuPW0uUGFuZWxJRDsKaWYobj09IiIpe249dGhpcy5fZGVmYXVsdExvYWRpbmdQYW5lbElEOwp9dmFyIGU9bS5Db250cm9sSUQ7CmlmKGU9PXRoaXMuX3VuaXF1ZUlEKXtjb250aW51ZTsKfXZhciBnPSRmaW5kKG4pOwppZihnIT1udWxsKXtnLl9tYW5hZ2VyPXRoaXM7CmlmKGcuc2hvdyhlKSl7dmFyIGM9e1BhbmVsOmcsQ29udHJvbElEOmV9OwppZighQXJyYXkuY29udGFpbnModGhpcy5fbG9hZGluZ1BhbmVsc1RvSGlkZSxjKSl7dGhpcy5fbG9hZGluZ1BhbmVsc1RvSGlkZVt0aGlzLl9sb2FkaW5nUGFuZWxzVG9IaWRlLmxlbmd0aF09YzsKfX19fX19fSxfc2hvd0xvYWRpbmdQYW5lbHNGb3JFbGVtZW50c0luUmVxdWVzdFF1ZXVlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuX3JlcXVlc3RRdWV1ZS5sZW5ndGg9PTApe3JldHVybiBmYWxzZTsKfWVsc2V7aWYodGhpcy5fcmVxdWVzdFF1ZXVlW3RoaXMuX3JlcXVlc3RRdWV1ZS5sZW5ndGgtMV1bMF0hPWEuaWQpe2Zvcih2YXIgYj0wOwpiPHRoaXMuX3JlcXVlc3RRdWV1ZS5sZW5ndGg7CmIrKyl7dGhpcy5fc2hvd0xvYWRpbmdQYW5lbHNGb3JHaXZlbkVsZW1lbnQoJGdldCh0aGlzLl9yZXF1ZXN0UXVldWVbYl1bMF0pKTsKfX19fSxfc2hvd0xvYWRpbmdQYW5lbHNGb3JHaXZlbkVsZW1lbnQ6ZnVuY3Rpb24oYyl7aWYoYyE9bnVsbCl7aWYodGhpcy5faW5pdGlhdG9yc1tjLmlkXSl7dGhpcy5zaG93TG9hZGluZ1BhbmVscyhjLmlkLHRoaXMuZ2V0X2FqYXhTZXR0aW5ncygpKTsKfWVsc2V7dmFyIGI9Yy5wYXJlbnROb2RlOwp2YXIgYT1mYWxzZTsKd2hpbGUoYiE9bnVsbCl7aWYoYi5pZCYmdGhpcy5faW5pdGlhdG9yc1tiLmlkXSl7YT10cnVlOwpicmVhazsKfWI9Yi5wYXJlbnROb2RlOwp9aWYoYSl7dGhpcy5zaG93TG9hZGluZ1BhbmVscyhiLmlkLHRoaXMuZ2V0X2FqYXhTZXR0aW5ncygpKTsKfX19fSxfaW5pdGlhbGl6ZVJlcXVlc3Q6ZnVuY3Rpb24oYSxiKXtUZWxlcmlrLldlYi5VSS5SYWRBamF4TWFuYWdlci5jYWxsQmFzZU1ldGhvZCh0aGlzLCJfaW5pdGlhbGl6ZVJlcXVlc3QiLFthLGJdKTsKaWYoIXRoaXMuX2lzUmVxdWVzdEluUHJvZ3Jlc3Mpe3JldHVybjsKfXZhciBjPWIuZ2V0X3Bvc3RCYWNrRWxlbWVudCgpOwp0aGlzLl9zaG93TG9hZGluZ1BhbmVsc0ZvckdpdmVuRWxlbWVudChjKTsKdGhpcy5fc2hvd0xvYWRpbmdQYW5lbHNGb3JFbGVtZW50c0luUmVxdWVzdFF1ZXVlKGMpOwp9LHVwZGF0ZUVsZW1lbnQ6ZnVuY3Rpb24oYixhKXtUZWxlcmlrLldlYi5VSS5SYWRBamF4Q29udHJvbC5VcGRhdGVFbGVtZW50KGIsYSk7Cn19OwpUZWxlcmlrLldlYi5VSS5SYWRBamF4TWFuYWdlci5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5SYWRBamF4TWFuYWdlciIsVGVsZXJpay5XZWIuVUkuUmFkQWpheENvbnRyb2wpOwpUZWxlcmlrLldlYi5VSS5SYWRBamF4TWFuYWdlci5VcGRhdGVFbGVtZW50PWZ1bmN0aW9uKGIsYSl7VGVsZXJpay5XZWIuVUkuUmFkQWpheENvbnRyb2wuVXBkYXRlRWxlbWVudChiLGEpOwp9OwpUeXBlLnJlZ2lzdGVyTmFtZXNwYWNlKCJUZWxlcmlrLldlYi5VSSIpOwokdGVsZXJpay5maW5kQWpheFBhbmVsPSRmaW5kOwokdGVsZXJpay50b0FqYXhQYW5lbD1mdW5jdGlvbihhKXtyZXR1cm4gYTsKfTsKVGVsZXJpay5XZWIuVUkuUmFkQWpheFBhbmVsPWZ1bmN0aW9uKGEpe1RlbGVyaWsuV2ViLlVJLlJhZEFqYXhQYW5lbC5pbml0aWFsaXplQmFzZSh0aGlzLFthXSk7CnRoaXMuX2xvYWRpbmdQYW5lbElEPSIiOwp0aGlzLl9sb2FkaW5nUGFuZWxzVG9IaWRlPVtdOwp0aGlzLlR5cGU9IlRlbGVyaWsuV2ViLlVJLlJhZEFqYXhQYW5lbCI7CnRoaXMuTG9hZGluZ1BhbmVsSUQ9dGhpcy5fbG9hZGluZ1BhbmVsSUQ7Cn07ClRlbGVyaWsuV2ViLlVJLlJhZEFqYXhQYW5lbC5wcm90b3R5cGU9e2luaXRpYWxpemU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldF9lbGVtZW50KCkucGFyZW50Tm9kZTsKaWYodGhpcy5nZXRfZWxlbWVudCgpLnN0eWxlLmhlaWdodCE9IiIpe2Euc3R5bGUuaGVpZ2h0PXRoaXMuZ2V0X2VsZW1lbnQoKS5zdHlsZS5oZWlnaHQ7CnRoaXMuZ2V0X2VsZW1lbnQoKS5zdHlsZS5oZWlnaHQ9IjEwMCUiOwp9aWYodGhpcy5nZXRfZWxlbWVudCgpLnN0eWxlLndpZHRoIT0iIil7YS5zdHlsZS53aWR0aD10aGlzLmdldF9lbGVtZW50KCkuc3R5bGUud2lkdGg7CnRoaXMuZ2V0X2VsZW1lbnQoKS5zdHlsZS53aWR0aD0iIjsKfVRlbGVyaWsuV2ViLlVJLlJhZEFqYXhQYW5lbC5jYWxsQmFzZU1ldGhvZCh0aGlzLCJpbml0aWFsaXplIik7Cn0sZGlzcG9zZTpmdW5jdGlvbigpe1RlbGVyaWsuV2ViLlVJLlJhZEFqYXhQYW5lbC5jYWxsQmFzZU1ldGhvZCh0aGlzLCJkaXNwb3NlIik7Cn0sX2luaXRpYWxpemVSZXF1ZXN0OmZ1bmN0aW9uKGEsYyl7VGVsZXJpay5XZWIuVUkuUmFkQWpheFBhbmVsLmNhbGxCYXNlTWV0aG9kKHRoaXMsIl9pbml0aWFsaXplUmVxdWVzdCIsW2EsY10pOwppZighdGhpcy5faXNSZXF1ZXN0SW5Qcm9ncmVzcyl7cmV0dXJuOwp9dmFyIGU9Yy5nZXRfcG9zdEJhY2tFbGVtZW50KCk7CmlmKGUhPW51bGwmJihlPT10aGlzLmdldF9lbGVtZW50KCl8fHRoaXMuaXNDaGlsZE9mKGUsdGhpcy5nZXRfZWxlbWVudCgpKSkpe3ZhciBiPSRmaW5kKHRoaXMuX2xvYWRpbmdQYW5lbElEKTsKaWYoYiE9bnVsbCl7Yi5fbWFuYWdlcj10aGlzOwppZihiLnNob3codGhpcy5nZXRfZWxlbWVudCgpLmlkKSl7dmFyIGQ9e1BhbmVsOmIsQ29udHJvbElEOnRoaXMuZ2V0X2VsZW1lbnQoKS5pZH07CmlmKCFBcnJheS5jb250YWlucyh0aGlzLl9sb2FkaW5nUGFuZWxzVG9IaWRlLGQpKXt0aGlzLl9sb2FkaW5nUGFuZWxzVG9IaWRlW3RoaXMuX2xvYWRpbmdQYW5lbHNUb0hpZGUubGVuZ3RoXT1kOwp9fX19fSxnZXRfbG9hZGluZ1BhbmVsSUQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9hZGluZ1BhbmVsSUQ7Cn0sc2V0X2xvYWRpbmdQYW5lbElEOmZ1bmN0aW9uKGEpe2lmKHRoaXMuX2xvYWRpbmdQYW5lbElEIT1hKXt0aGlzLl9sb2FkaW5nUGFuZWxJRD1hOwp9fX07ClRlbGVyaWsuV2ViLlVJLlJhZEFqYXhQYW5lbC5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5SYWRBamF4UGFuZWwiLFRlbGVyaWsuV2ViLlVJLlJhZEFqYXhDb250cm9sKTsKDQovKiBFTkQgVGVsZXJpay5XZWIuVUkuQWpheC5BamF4LmpzICovDQovKiBTVEFSVCBUZWxlcmlrLldlYi5VSS5HcmlkLlJhZEdyaWRTY3JpcHRzLmpzICovDQpUeXBlLnJlZ2lzdGVyTmFtZXNwYWNlKCJUZWxlcmlrLldlYi5VSSIpOwpUZWxlcmlrLldlYi5VSS5HcmlkQ29sdW1uPWZ1bmN0aW9uKGEpe1RlbGVyaWsuV2ViLlVJLkdyaWRDb2x1bW4uaW5pdGlhbGl6ZUJhc2UodGhpcyxbYV0pOwp0aGlzLl9vd25lcj17fTsKdGhpcy5fZGF0YT17fTsKdGhpcy5fc2VsZWN0ZWQ7CnRoaXMuX3NlbGVjdGVkQ2VsbHNDb3VudD0wOwp0aGlzLl9yZXNpemVUb2xlcmFuY2U9JHRlbGVyaWsuaXNUb3VjaERldmljZT8xMDo1Owp0aGlzLl9vbk1vdXNlVXBEZWxlZ2F0ZT1udWxsOwp0aGlzLl9jb2x1bW5SZXNpemVyPW51bGw7CnRoaXMuX2NoZWNrYm94ZXM9W107CnRoaXMuX29uQ29udGV4dE1lbnVJdGVtQ2xpY2tpbmdEZWxlZ2F0ZT1udWxsOwp0aGlzLl9vbkNvbnRleHRNZW51SGlkZGVuRGVsZWdhdGU9bnVsbDsKdGhpcy5fc3VwcG9ydGVkU3RyaW5nQWdncmVnYXRlc1ZhbHVlcz1bIkNvdW50IiwiQ291bnREaXN0aW5jdCIsIk5vbmUiLCJDdXN0b20iXTsKdGhpcy5fc3VwcG9ydGVkQ29sdW1uVHlwZXNGb3JBZ2dyZWdhdGlvbj1bIkdyaWREYXRlVGltZUNvbHVtbiIsIkdyaWRCb3VuZENvbHVtbiIsIkdyaWRUZW1wbGF0ZUNvbHVtbiIsIkdyaWRNYXNrZWRDb2x1bW4iLCJHcmlkTnVtZXJpY0NvbHVtbiIsIkdyaWRDYWxjdWxhdGVkQ29sdW1uIl07CnRoaXMuX29sZFRpdGxlPW51bGw7Cn07ClRlbGVyaWsuV2ViLlVJLkdyaWRDb2x1bW4ucHJvdG90eXBlPXtpbml0aWFsaXplOmZ1bmN0aW9uKCl7VGVsZXJpay5XZWIuVUkuR3JpZENvbHVtbi5jYWxsQmFzZU1ldGhvZCh0aGlzLCJpbml0aWFsaXplIik7CnRoaXMuX29uTW91c2VEb3duRGVsZWdhdGU9JHRlbGVyaWsuYWRkTW9iaWxlSGFuZGxlcih0aGlzLHRoaXMuZ2V0X2VsZW1lbnQoKSwibW91c2Vkb3duIix0aGlzLl9vbk1vdXNlRG93bkhhbmRsZXIpOwp0aGlzLmdldF9lbGVtZW50KCkuVW5pcXVlTmFtZT10aGlzLmdldF91bmlxdWVOYW1lKCk7CnRoaXMuX29uTG9jYWxNb3VzZU1vdmVEZWxlZ2F0ZT0kdGVsZXJpay5hZGRNb2JpbGVIYW5kbGVyKHRoaXMsdGhpcy5nZXRfZWxlbWVudCgpLCJtb3VzZW1vdmUiLHRoaXMuX29uTG9jYWxNb3VzZU1vdmVIYW5kbGVyKTsKaWYoISR0ZWxlcmlrLmlzVG91Y2hEZXZpY2UpeyRhZGRIYW5kbGVycyh0aGlzLmdldF9lbGVtZW50KCkse2NsaWNrOkZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5fb25DbGljayl9KTsKJGFkZEhhbmRsZXJzKHRoaXMuZ2V0X2VsZW1lbnQoKSx7ZGJsY2xpY2s6RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vbkRibENsaWNrKX0pOwokYWRkSGFuZGxlcnModGhpcy5nZXRfZWxlbWVudCgpLHttb3VzZW92ZXI6RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vbk1vdXNlT3Zlcil9KTsKJGFkZEhhbmRsZXJzKHRoaXMuZ2V0X2VsZW1lbnQoKSx7bW91c2VvdXQ6RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vbk1vdXNlT3V0KX0pOwp9aWYoJHRlbGVyaWsuaXNPcGVyYSl7JGFkZEhhbmRsZXJzKHRoaXMuZ2V0X2VsZW1lbnQoKSx7bW91c2Vkb3duOkZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5fb25Db250ZXh0TWVudSl9KTsKfWVsc2V7JGFkZEhhbmRsZXJzKHRoaXMuZ2V0X2VsZW1lbnQoKSx7Y29udGV4dG1lbnU6RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vbkNvbnRleHRNZW51KX0pOwp9dGhpcy5fc2VsZWN0ZWRDZWxsc0NvdW50PXRoaXMuX2RhdGEuU2VsZWN0ZWRDZWxsc0NvdW50Owp0aGlzLl9vbGRUaXRsZT10aGlzLmdldF9lbGVtZW50KCkudGl0bGU7Cn0sZGlzcG9zZTpmdW5jdGlvbigpe2lmKHRoaXMuX2NvbHVtblJlc2l6ZXIpe3RoaXMuX2NvbHVtblJlc2l6ZXIuZGlzcG9zZSgpOwp9dGhpcy5fb3duZXIuX293bmVyLnJhaXNlX2NvbHVtbkRlc3Ryb3lpbmcoU3lzLkV2ZW50QXJncy5FbXB0eSk7CiRjbGVhckhhbmRsZXJzKHRoaXMuZ2V0X2VsZW1lbnQoKSk7CnRoaXMuX2NoZWNrYm94ZXM9W107CnRoaXMuX2VsZW1lbnQuY29udHJvbD1udWxsOwpUZWxlcmlrLldlYi5VSS5HcmlkQ29sdW1uLmNhbGxCYXNlTWV0aG9kKHRoaXMsImRpc3Bvc2UiKTsKfSxnZXRfb3duZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3duZXI7Cn0sZ2V0X3NlbGVjdGVkOmZ1bmN0aW9uKCl7dmFyIGE9ZmFsc2U7CmlmKHRoaXMuX293bmVyLl9vd25lci5nZXRfYWxsb3dDb2x1bW5TZWxlY3Rpb24oKSYmdGhpcy5fc2VsZWN0ZWRDZWxsc0NvdW50PjAmJnRoaXMuX3NlbGVjdGVkQ2VsbHNDb3VudD09dGhpcy5nZXRfcmVhbE93bmVyKCkuZ2V0X2RhdGFJdGVtcygpLmxlbmd0aCl7YT10cnVlOwp9cmV0dXJuIGE7Cn0sc2V0X3NlbGVjdGVkOmZ1bmN0aW9uKGEpe2lmKHRoaXMuX293bmVyLl9vd25lci5nZXRfYWxsb3dDb2x1bW5TZWxlY3Rpb24oKSl7aWYoYSl7aWYoIXRoaXMuX293bmVyLl9vd25lci5nZXRfYWxsb3dNdWx0aUNvbHVtblNlbGVjdGlvbigpKXt0aGlzLmdldF9yZWFsT3duZXIoKS5jbGVhclNlbGVjdGVkQ29sdW1ucygpOwp9dGhpcy5fb3duZXIuX293bmVyLl9jZWxsU2VsZWN0aW9uLl9zZWxlY3RDb2x1bW5CeUhlYWRlckVsZW1lbnQodGhpcy5nZXRfcmVhbE93bmVyKCksdGhpcy5nZXRfZWxlbWVudCgpKTsKdGhpcy5fc2VsZWN0ZWRDZWxsc0NvdW50PXRoaXMuX293bmVyLmdldF9kYXRhSXRlbXMoKS5sZW5ndGg7Cn1lbHNle3RoaXMuX293bmVyLl9vd25lci5fY2VsbFNlbGVjdGlvbi5fZGVzZWxlY3RDb2x1bW5CeUhlYWRlckVsZW1lbnQodGhpcy5nZXRfcmVhbE93bmVyKCksdGhpcy5nZXRfZWxlbWVudCgpKTsKdGhpcy5fc2VsZWN0ZWRDZWxsc0NvdW50PTA7Cn19fSxnZXRfcmVhbE93bmVyOmZ1bmN0aW9uKCl7aWYodGhpcy5fb3duZXIuZ2V0X2lkKCk9PXRoaXMuX293bmVyLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3KCkuZ2V0X2lkKCkrIl9IZWFkZXIiKXtyZXR1cm4gdGhpcy5fb3duZXIuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXcoKTsKfWVsc2V7cmV0dXJuIHRoaXMuX293bmVyOwp9fSxnZXRfc2VsZWN0ZWRDZWxsc0NvdW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NlbGVjdGVkQ2VsbHNDb3VudDsKfSxzZXRfc2VsZWN0ZWRDZWxsc0NvdW50OmZ1bmN0aW9uKGEpe3RoaXMuX3NlbGVjdGVkQ2VsbHNDb3VudD1hOwp9LF9vbk1vdXNlRG93bkhhbmRsZXI6ZnVuY3Rpb24oYyl7aWYoKGMuYnV0dG9uIT1TeXMuVUkuTW91c2VCdXR0b24ubGVmdEJ1dHRvbnx8VGVsZXJpay5XZWIuVUkuR3JpZC5fbW92ZUhlYWRlckRpdikmJiEoJHRlbGVyaWsuaXNUb3VjaERldmljZSkpe3JldHVybiBmYWxzZTsKfXZhciBiPXRoaXMuZ2V0X293bmVyKCkuZ2V0X293bmVyKCk7CnZhciBhPWIuX2FuaW1hdGlvbiYmYi5fYW5pbWF0aW9uLkNvbHVtbkFuaW1hdGlvbjsKdmFyIGY9JHRlbGVyaWsuaXNUb3VjaERldmljZSYmdGhpcy5faXNUb3VjaFBvaW50T3ZlclJlc2l6ZUhhbmRsZShjKSYmdGhpcy5fb3duZXIuX293bmVyLkNsaWVudFNldHRpbmdzJiZ0aGlzLl9vd25lci5fb3duZXIuQ2xpZW50U2V0dGluZ3MuUmVzaXppbmcuQWxsb3dDb2x1bW5SZXNpemUmJnRoaXMuZ2V0X3Jlc2l6YWJsZSgpOwppZighYSl7dGhpcy5fb25Nb3VzZVVwRGVsZWdhdGU9JHRlbGVyaWsuYWRkTW9iaWxlSGFuZGxlcih0aGlzLGRvY3VtZW50LCJtb3VzZXVwIix0aGlzLl9vbk1vdXNlVXBIYW5kbGVyLG51bGwsdHJ1ZSk7Cn1pZigkdGVsZXJpay5pc1RvdWNoRGV2aWNlKXt0aGlzLl9jYW5EcmFnRHJvcD10cnVlOwppZihmKXt0aGlzLl9jYW5SZXNpemU9dHJ1ZTsKfX1pZihiLkNsaWVudFNldHRpbmdzLkFsbG93RHJhZ1RvR3JvdXB8fGIuQ2xpZW50U2V0dGluZ3MuQWxsb3dDb2x1bW5zUmVvcmRlcil7dmFyIGQ9Yi5DbGllbnRTZXR0aW5ncy5BbGxvd0NvbHVtbnNSZW9yZGVyJiZhJiZiLkNsaWVudFNldHRpbmdzLkFuaW1hdGlvbi5BbGxvd0NvbHVtblJlb3JkZXJBbmltYXRpb24mJmIuQ2xpZW50U2V0dGluZ3MuQ29sdW1uc1Jlb3JkZXJNZXRob2Q9PT0xOwppZighZCl7dGhpcy5fb25Nb3VzZU1vdmVEZWxlZ2F0ZT0kdGVsZXJpay5hZGRNb2JpbGVIYW5kbGVyKHRoaXMsZG9jdW1lbnQsIm1vdXNlbW92ZSIsdGhpcy5fb25Nb3VzZU1vdmVIYW5kbGVyLG51bGwsdHJ1ZSk7Cn1pZih0aGlzLl9jYW5EcmFnRHJvcCYmIWYmJigodGhpcy5fZGF0YS5SZW9yZGVyYWJsZSYmYi5DbGllbnRTZXR0aW5ncy5BbGxvd0NvbHVtbnNSZW9yZGVyKXx8KHRoaXMuX2RhdGEuR3JvdXBhYmxlJiZiLkNsaWVudFNldHRpbmdzLkFsbG93RHJhZ1RvR3JvdXApKSl7aWYoYSl7Yi5fYW5pbWF0aW9uLkNvbHVtbkFuaW1hdGlvbi5fbW91c2VEb3duKGMsdGhpcyk7Cn1lbHNle1RlbGVyaWsuV2ViLlVJLkdyaWQuQ3JlYXRlRHJhZ0Ryb3AoYyx0aGlzLHRydWUpOwp9fX1pZih0aGlzLl9jYW5SZXNpemUmJihjLmJ1dHRvbj09MHx8JHRlbGVyaWsuaXNUb3VjaERldmljZSkpe2lmKHRoaXMuX2lzTW91c2VPdmVyUmVzaXplSGFuZGxlKGMpKXt0aGlzLl9jb2x1bW5SZXNpemVyPW5ldyBUZWxlcmlrLldlYi5VSS5HcmlkQ29sdW1uUmVzaXplcih0aGlzLGIuQ2xpZW50U2V0dGluZ3MuUmVzaXppbmcuRW5hYmxlUmVhbFRpbWVSZXNpemUpOwp0aGlzLl9jb2x1bW5SZXNpemVyLl9wb3NpdGlvbihjKTsKdGhpcy5fb3duZXIuX293bmVyLl9pc1Jlc2l6ZT10cnVlOwp9VGVsZXJpay5XZWIuVUkuR3JpZC5DbGVhckRvY3VtZW50RXZlbnRzKCk7Cn19LF9vbk1vdXNlVXBIYW5kbGVyOmZ1bmN0aW9uKGYpe2lmKHRoaXMuX29uTW91c2VVcERlbGVnYXRlKXskdGVsZXJpay5yZW1vdmVNb2JpbGVIYW5kbGVyKGRvY3VtZW50LCJtb3VzZXVwIix0aGlzLl9vbk1vdXNlVXBEZWxlZ2F0ZSxudWxsLHRydWUpOwp0aGlzLl9vbk1vdXNlVXBEZWxlZ2F0ZT1udWxsOwp9aWYodGhpcy5fb25Nb3VzZU1vdmVEZWxlZ2F0ZSl7JHRlbGVyaWsucmVtb3ZlTW9iaWxlSGFuZGxlcihkb2N1bWVudCwibW91c2Vtb3ZlIix0aGlzLl9vbk1vdXNlTW92ZURlbGVnYXRlLG51bGwsdHJ1ZSk7CnRoaXMuX29uTW91c2VNb3ZlRGVsZWdhdGU9bnVsbDsKfWlmKCFUZWxlcmlrLldlYi5VSS5HcmlkKXtyZXR1cm47Cn12YXIgYTsKaWYoJHRlbGVyaWsuaXNUb3VjaERldmljZSl7YT0kdGVsZXJpay5nZXRUb3VjaFRhcmdldChmKTsKfWVsc2V7YT1UZWxlcmlrLldlYi5VSS5HcmlkLkdldEN1cnJlbnRFbGVtZW50KGYpOwp9dmFyIGk9ZmFsc2U7CnZhciBrPXRoaXMuX293bmVyOwppZihhIT1udWxsJiZ0aGlzLl9jYW5EcmFnRHJvcCYmIXRoaXMuX293bmVyLl9vd25lci5faXNSZXNpemUpe3ZhciBnPXRoaXMuX293bmVyLl9vd25lci5DbGllbnRTZXR0aW5ncy5Qb3N0QmFja0Z1bmN0aW9uOwpnPWcucmVwbGFjZSgiezB9Iix0aGlzLl9vd25lci5fb3duZXIuVW5pcXVlSUQpOwppZihrLl9vd25lci5DbGllbnRTZXR0aW5ncy5BbGxvd0RyYWdUb0dyb3VwJiZrLl9vd25lci5fZ3JvdXBQYW5lbCl7dmFyIGQ9ZmFsc2U7CmlmKCR0ZWxlcmlrLmlzTW91c2VPdmVyRWxlbWVudChrLl9vd25lci5fZ3JvdXBQYW5lbC5nZXRfZWxlbWVudCgpLGYpKXtkPXRydWU7Cn1pZigoVGVsZXJpay5XZWIuVUkuR3JpZC5Jc0NoaWxkT2YoYSx0aGlzLl9vd25lci5fb3duZXIuX2dyb3VwUGFuZWwuZ2V0X2VsZW1lbnQoKSl8fCgkdGVsZXJpay5pc1RvdWNoRGV2aWNlJiZhPT10aGlzLl9vd25lci5fb3duZXIuX2dyb3VwUGFuZWwuZ2V0X2VsZW1lbnQoKSkpfHxkKXtpZih0aGlzLl9kYXRhLkdyb3VwYWJsZSl7aT10cnVlOwp0aGlzLl9vd25lci5ncm91cENvbHVtbih0aGlzLmdldF9lbGVtZW50KCkuVW5pcXVlTmFtZSk7Cn19fWlmKHRoaXMuX293bmVyLl9vd25lci5DbGllbnRTZXR0aW5ncy5BbGxvd0NvbHVtbnNSZW9yZGVyJiZUZWxlcmlrLldlYi5VSS5HcmlkLklzQ2hpbGRPZihhLHRoaXMuZ2V0X2VsZW1lbnQoKS5wYXJlbnROb2RlKSYmYSE9dGhpcy5nZXRfZWxlbWVudCgpKXt2YXIgaD1hLnBhcmVudE5vZGU7CndoaWxlKGghPW51bGwmJih0eXBlb2YoaC5VbmlxdWVOYW1lKT09InVuZGVmaW5lZCIpKXtoPWgucGFyZW50Tm9kZTsKfWlmKGghPW51bGwmJnR5cGVvZihoLlVuaXF1ZU5hbWUpIT0idW5kZWZpbmVkIiYmaC5VbmlxdWVOYW1lIT10aGlzLmdldF91bmlxdWVOYW1lKCkpe2E9aDsKfWlmKHR5cGVvZihhLlVuaXF1ZU5hbWUpIT0idW5kZWZpbmVkIiYmdGhpcy5fY2FuRHJvcE9uVGhpc0NvbHVtbihhLlVuaXF1ZU5hbWUpJiZ0aGlzLmdldF9yZW9yZGVyYWJsZSgpKXtpZighdGhpcy5fb3duZXIuX293bmVyLkNsaWVudFNldHRpbmdzLlJlb3JkZXJDb2x1bW5zT25DbGllbnQpe3ZhciBiPXRoaXMuX293bmVyLmdldENvbHVtbkJ5VW5pcXVlTmFtZSh0aGlzLmdldF9lbGVtZW50KCkuVW5pcXVlTmFtZSk7CnZhciBjPXRoaXMuX293bmVyLmdldENvbHVtbkJ5VW5pcXVlTmFtZShhLlVuaXF1ZU5hbWUpOwp2YXIgaj1uZXcgU3lzLkNhbmNlbEV2ZW50QXJncygpOwpqLmdldF9ncmlkU291cmNlQ29sdW1uPWZ1bmN0aW9uKCl7cmV0dXJuIGI7Cn07CmouZ2V0X2dyaWRUYXJnZXRDb2x1bW49ZnVuY3Rpb24oKXtyZXR1cm4gYzsKfTsKdGhpcy5fb3duZXIuX293bmVyLnJhaXNlX2NvbHVtblN3YXBwaW5nKGopOwppZihqLmdldF9jYW5jZWwoKSl7cmV0dXJuIGZhbHNlOwp9aT10cnVlOwpnPWcucmVwbGFjZSgiezF9IiwiUmVvcmRlckNvbHVtbnMsIit0aGlzLl9vd25lci5fZGF0YS5VbmlxdWVJRCsiLCIrdGhpcy5nZXRfZWxlbWVudCgpLlVuaXF1ZU5hbWUrIiwiK2EuVW5pcXVlTmFtZSk7CmV2YWwoZyk7Cn1lbHNle2lmKHRoaXMuX293bmVyLl9vd25lci5DbGllbnRTZXR0aW5ncy5Db2x1bW5zUmVvcmRlck1ldGhvZD09MSl7dGhpcy5fb3duZXIucmVvcmRlckNvbHVtbnModGhpcy5nZXRfZWxlbWVudCgpLlVuaXF1ZU5hbWUsYS5VbmlxdWVOYW1lKTsKfWVsc2V7dGhpcy5fb3duZXIuc3dhcENvbHVtbnModGhpcy5nZXRfZWxlbWVudCgpLlVuaXF1ZU5hbWUsYS5VbmlxdWVOYW1lKTsKfWk9dHJ1ZTsKfX19fWlmKCF0aGlzLl9vd25lci5fb3duZXIuX2FuaW1hdGlvbnx8IXRoaXMuX293bmVyLl9vd25lci5DbGllbnRTZXR0aW5ncy5BbmltYXRpb258fCF0aGlzLl9vd25lci5fb3duZXIuQ2xpZW50U2V0dGluZ3MuQW5pbWF0aW9uLkFsbG93Q29sdW1uUmV2ZXJ0QW5pbWF0aW9ufHxpKXtUZWxlcmlrLldlYi5VSS5HcmlkLkRlc3Ryb3lEcmFnRHJvcCgpOwp9dGhpcy5fb3duZXIuX293bmVyLl9pc1Jlc2l6ZT1udWxsOwpUZWxlcmlrLldlYi5VSS5HcmlkLlJlc3RvcmVEb2N1bWVudEV2ZW50cygpOwp9LF9vbk1vdXNlTW92ZUhhbmRsZXI6ZnVuY3Rpb24oYSl7aWYodGhpcy5fY2FuRHJhZ0Ryb3Ape2lmKCF0aGlzLmdldF9lbGVtZW50KCkpe3JldHVybjsKfWlmKCR0ZWxlcmlrLmlzVG91Y2hEZXZpY2Upe2EucHJldmVudERlZmF1bHQoKTsKfVRlbGVyaWsuV2ViLlVJLkdyaWQuTW92ZURyYWdEcm9wKGEsdGhpcyx0cnVlKTsKfX0sX29uTG9jYWxNb3VzZU1vdmVIYW5kbGVyOmZ1bmN0aW9uKGMpe2lmKCFUZWxlcmlrLldlYi5VSS5HcmlkfHwkdGVsZXJpay5pc1RvdWNoRGV2aWNlKXtyZXR1cm47Cn10aGlzLl9jYW5EcmFnRHJvcD10cnVlOwp0aGlzLl9jYW5SZXNpemU9ZmFsc2U7CmlmKHRoaXMuX293bmVyLl9vd25lci5faXNSZXNpemUpe3JldHVybjsKfXZhciBkPVRlbGVyaWsuV2ViLlVJLkdyaWQuR2V0Q3VycmVudEVsZW1lbnQoYyk7CnZhciBnPVRlbGVyaWsuV2ViLlVJLkdyaWQuR2V0Rmlyc3RQYXJlbnRCeVRhZ05hbWUoZCwidGgiKTsKdmFyIGY9VGVsZXJpay5XZWIuVUkuR3JpZC5GaW5kUG9zWChkKTsKdmFyIGI9ISF0aGlzLl9vd25lci5fb3duZXIuQ2xpZW50U2V0dGluZ3MuQWxsb3dEcmFnVG9Hcm91cCYmdGhpcy5fZGF0YS5Hcm91cGFibGU7CnZhciBhPSEhdGhpcy5fb3duZXIuX293bmVyLkNsaWVudFNldHRpbmdzLkFsbG93Q29sdW1uc1Jlb3JkZXImJnRoaXMuZ2V0X3Jlb3JkZXJhYmxlKCk7CmlmKGJ8fGEpe3RoaXMuZ2V0X2VsZW1lbnQoKS50aXRsZT10aGlzLl9vd25lci5fb3duZXIuQ2xpZW50U2V0dGluZ3MuQ2xpZW50TWVzc2FnZXMuRHJhZ1RvR3JvdXBPclJlb3JkZXI7CnRoaXMuZ2V0X2VsZW1lbnQoKS5zdHlsZS5jdXJzb3I9Im1vdmUiOwp9aWYodGhpcy5fb3duZXIuX293bmVyLkNsaWVudFNldHRpbmdzLlJlc2l6aW5nLkFsbG93Q29sdW1uUmVzaXplJiZ0aGlzLmdldF9yZXNpemFibGUoKSYmVGVsZXJpay5XZWIuVUkuR3JpZC5HZXRFdmVudFBvc1goYyk+PShmK2cub2Zmc2V0V2lkdGgtNSkmJiFUZWxlcmlrLldlYi5VSS5HcmlkLl9tb3ZlSGVhZGVyRGl2KXt0aGlzLl9jYW5EcmFnRHJvcD1mYWxzZTsKfWlmKHRoaXMuX293bmVyLl9vd25lci5DbGllbnRTZXR0aW5ncyYmdGhpcy5fb3duZXIuX293bmVyLkNsaWVudFNldHRpbmdzLlJlc2l6aW5nLkFsbG93Q29sdW1uUmVzaXplJiZ0aGlzLmdldF9yZXNpemFibGUoKSYmdGhpcy5nZXRfZWxlbWVudCgpLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09InRoIil7dmFyIGQ9VGVsZXJpay5XZWIuVUkuR3JpZC5HZXRDdXJyZW50RWxlbWVudChjKTsKaWYodGhpcy5fb3duZXIuX293bmVyLkdyaWREYXRhRGl2JiYhdGhpcy5fb3duZXIuX293bmVyLkdyaWRIZWFkZXJEaXYmJiF3aW5kb3cubmV0c2NhcGUpe3ZhciBoPTA7CmlmKGRvY3VtZW50LmJvZHkuY3VycmVudFN0eWxlJiZkb2N1bWVudC5ib2R5LmN1cnJlbnRTdHlsZS5tYXJnaW4mJmRvY3VtZW50LmJvZHkuY3VycmVudFN0eWxlLm1hcmdpbkxlZnQuaW5kZXhPZigicHgiKSE9LTEmJiF3aW5kb3cub3BlcmEpe2g9cGFyc2VJbnQoZG9jdW1lbnQuYm9keS5jdXJyZW50U3R5bGUubWFyZ2luTGVmdCk7Cn10aGlzLl9yZXNpemVUb2xlcmFuY2U9MTA7Cn1pZih0aGlzLl9pc01vdXNlT3ZlclJlc2l6ZUhhbmRsZShjKSYmIVRlbGVyaWsuV2ViLlVJLkdyaWQuX21vdmVIZWFkZXJEaXYpe3RoaXMuZ2V0X2VsZW1lbnQoKS5zdHlsZS5jdXJzb3I9ImUtcmVzaXplIjsKaWYodGhpcy5nZXRfZWxlbWVudCgpLnRpdGxlIT09dGhpcy5fb3duZXIuX293bmVyLkNsaWVudFNldHRpbmdzLkNsaWVudE1lc3NhZ2VzLkRyYWdUb1Jlc2l6ZSl7dGhpcy5fb2xkVGl0bGU9dGhpcy5nZXRfZWxlbWVudCgpLnRpdGxlOwp9dGhpcy5nZXRfZWxlbWVudCgpLnRpdGxlPXRoaXMuX293bmVyLl9vd25lci5DbGllbnRTZXR0aW5ncy5DbGllbnRNZXNzYWdlcy5EcmFnVG9SZXNpemU7CnRoaXMuX2NhblJlc2l6ZT10cnVlOwpkLnN0eWxlLmN1cnNvcj0iZS1yZXNpemUiOwp9ZWxzZXtpZih0aGlzLmdldF9lbGVtZW50KCkuc3R5bGUuY3Vyc29yIT0ibW92ZSIpe3RoaXMuZ2V0X2VsZW1lbnQoKS5zdHlsZS5jdXJzb3I9IiI7CmQuc3R5bGUuY3Vyc29yPSIiOwp0aGlzLmdldF9lbGVtZW50KCkudGl0bGU9dGhpcy5fb2xkVGl0bGU7Cn1pZihkLnN0eWxlLmN1cnNvcj09ImUtcmVzaXplIil7ZC5zdHlsZS5jdXJzb3I9IiI7Cn10aGlzLl9jYW5SZXNpemU9ZmFsc2U7Cn19fSxfY2FuRHJvcE9uVGhpc0NvbHVtbjpmdW5jdGlvbihjKXtpZih0eXBlb2YodGhpcy5fb3duZXIuX2NvbHVtbnMpPT0idW5kZWZpbmVkIil7dGhpcy5fb3duZXIuX2NvbHVtbnM9e307CmZvcih2YXIgYj0wOwpiPHRoaXMuX293bmVyLl9kYXRhLl9jb2x1bW5zRGF0YS5sZW5ndGg7CmIrKyl7dGhpcy5fb3duZXIuX2NvbHVtbnNbdGhpcy5fb3duZXIuX2RhdGEuX2NvbHVtbnNEYXRhW2JdLlVuaXF1ZU5hbWVdPXRoaXMuX293bmVyLl9kYXRhLl9jb2x1bW5zRGF0YVtiXTsKfX12YXIgYT10cnVlOwppZih0aGlzLl9vd25lci5faGFzTXVsdGlIZWFkZXJzKXthPXRoaXMuZ2V0X2NvbHVtbkdyb3VwTmFtZSgpPT10aGlzLl9vd25lci5fY29sdW1uc1tjXS5Db2x1bW5Hcm91cE5hbWU7Cn1yZXR1cm4gdGhpcy5fb3duZXIuX2NvbHVtbnNbY10uUmVvcmRlcmFibGUmJmE7Cn0sc2hvd0hlYWRlck1lbnU6ZnVuY3Rpb24oYSxiLGMpe2lmKHRoaXMuX293bmVyLl9kYXRhLmVuYWJsZUhlYWRlckNvbnRleHRNZW51KXt0aGlzLl9pbml0SGVhZGVyQ29udGV4dE1lbnUoYSx0cnVlLGIsYyk7Cn19LF9zaG91bGRTaG93QWdncmVnYXRlc01lbnVGb3JDb2x1bW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRfb3duZXIoKS5fZGF0YS5lbmFibGVIZWFkZXJDb250ZXh0QWdncmVnYXRlc01lbnUmJkFycmF5LmNvbnRhaW5zKHRoaXMuX3N1cHBvcnRlZENvbHVtblR5cGVzRm9yQWdncmVnYXRpb24sdGhpcy5fZGF0YS5Db2x1bW5UeXBlKTsKfSxfaW5pdEhlYWRlckNvbnRleHRBZ2dyZWdhdGVzTWVudTpmdW5jdGlvbihhKXtpZihhLmZpbmRJdGVtQnlWYWx1ZSgiQWdncmVnYXRlc0NvbnRhaW5lciIpKXt2YXIgZD1hLmZpbmRJdGVtQnlWYWx1ZSgiQWdncmVnYXRlc0NvbnRhaW5lciIpOwppZih0aGlzLl9zaG91bGRTaG93QWdncmVnYXRlc01lbnVGb3JDb2x1bW4oKSl7ZC5zZXRfdmlzaWJsZSh0cnVlKTsKdmFyIGU9ZC5nZXRfaXRlbXMoKTsKZm9yKHZhciBmPTAsYz1lLmdldF9jb3VudCgpOwpmPGM7CmYrKyl7dmFyIGI9ZS5nZXRJdGVtKGYpOwpiLl9jb2x1bW49dGhpczsKaWYodGhpcy5nZXRfZGF0YVR5cGUoKT09IlN5c3RlbS5TdHJpbmciJiYhQXJyYXkuY29udGFpbnModGhpcy5fc3VwcG9ydGVkU3RyaW5nQWdncmVnYXRlc1ZhbHVlcyxiLmdldF92YWx1ZSgpKSl7Yi5zZXRfdmlzaWJsZShmYWxzZSk7Cn1lbHNle2Iuc2V0X3Zpc2libGUodHJ1ZSk7Cn19fWVsc2V7ZC5zZXRfdmlzaWJsZShmYWxzZSk7Cn19fSxfaW5pdEhlYWRlckNvbnRleHRNZW51OmZ1bmN0aW9uKGYsbixjLGspe2lmKHRoaXMuX293bmVyLl9vd25lci5fZ2V0SGVhZGVyQ29udGV4dE1lbnUoKSl7dmFyIHc9dGhpcy5fb3duZXIuX293bmVyLl9nZXRIZWFkZXJDb250ZXh0TWVudSgpOwp2YXIgYj10aGlzOwppZih3Ll9zaG93bil7dy5oaWRlKCk7Cn12YXIgQT1iLl9kYXRhLkRhdGFGaWVsZDsKaWYoYi5fZGF0YS5EYXRhVGV4dEZpZWxkKXtBPWIuX2RhdGEuRGF0YVRleHRGaWVsZDsKfWVsc2V7aWYoYi5fZGF0YS5EYXRhQWx0ZXJuYXRlVGV4dEZpZWxkKXtBPWIuX2RhdGEuRGF0YUFsdGVybmF0ZVRleHRGaWVsZDsKfX10aGlzLl9vbkNvbnRleHRNZW51SXRlbUNsaWNraW5nRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodyx0aGlzLl9vbkNvbnRleHRNZW51SXRlbUNsaWNraW5nKTsKdy5hZGRfaXRlbUNsaWNraW5nKHRoaXMuX29uQ29udGV4dE1lbnVJdGVtQ2xpY2tpbmdEZWxlZ2F0ZSk7CnRoaXMuX29uQ29udGV4dE1lbnVIaWRkZW5EZWxlZ2F0ZT1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX29uQ29udGV4dE1lbnVIaWRkZW4pOwp3LmFkZF9oaWRkZW4odGhpcy5fb25Db250ZXh0TWVudUhpZGRlbkRlbGVnYXRlKTsKdGhpcy5faW5pdEhlYWRlckNvbnRleHRBZ2dyZWdhdGVzTWVudSh3KTsKaWYody5maW5kSXRlbUJ5VmFsdWUoIlNvcnRBc2MiKSl7dy5maW5kSXRlbUJ5VmFsdWUoIlNvcnRBc2MiKS5fY29sdW1uPWI7Cn1pZih3LmZpbmRJdGVtQnlWYWx1ZSgiU29ydERlc2MiKSl7dy5maW5kSXRlbUJ5VmFsdWUoIlNvcnREZXNjIikuX2NvbHVtbj1iOwp9aWYody5maW5kSXRlbUJ5VmFsdWUoIlNvcnROb25lIikpe3cuZmluZEl0ZW1CeVZhbHVlKCJTb3J0Tm9uZSIpLl9jb2x1bW49YjsKfWlmKHcuZmluZEl0ZW1CeVZhbHVlKCJHcm91cEJ5Iikpe3ZhciB6PXcuZmluZEl0ZW1CeVZhbHVlKCJHcm91cEJ5Iik7CmlmKGIuX2RhdGEuR3JvdXBhYmxlKXt3LmZpbmRJdGVtQnlWYWx1ZSgiR3JvdXBCeSIpLl9jb2x1bW49YjsKei5zZXRfdmlzaWJsZSh0cnVlKTsKfWVsc2V7ei5zZXRfdmlzaWJsZShmYWxzZSk7Cn19aWYody5maW5kSXRlbUJ5VmFsdWUoIlVuR3JvdXBCeSIpKXt2YXIgej13LmZpbmRJdGVtQnlWYWx1ZSgiVW5Hcm91cEJ5Iik7CmlmKGIuX2RhdGEuR3JvdXBhYmxlKXt3LmZpbmRJdGVtQnlWYWx1ZSgiVW5Hcm91cEJ5IikuX2NvbHVtbj1iOwp6LnNldF92aXNpYmxlKHRydWUpOwp9ZWxzZXt6LnNldF92aXNpYmxlKGZhbHNlKTsKfX1pZih3LmZpbmRJdGVtQnlWYWx1ZSgidG9wR3JvdXBTZXBlcmF0b3IiKSl7dy5maW5kSXRlbUJ5VmFsdWUoInRvcEdyb3VwU2VwZXJhdG9yIikuc2V0X3Zpc2libGUoYi5fZGF0YS5Hcm91cGFibGUpOwp9aWYody5maW5kSXRlbUJ5VmFsdWUoImJvdHRvbUdyb3VwU2VwZXJhdG9yIikpe3cuZmluZEl0ZW1CeVZhbHVlKCJib3R0b21Hcm91cFNlcGVyYXRvciIpLnNldF92aXNpYmxlKGIuX2RhdGEuR3JvdXBhYmxlKTsKfWlmKHRoaXMuX293bmVyLl9kYXRhLmVuYWJsZUhlYWRlckNvbnRleHRGaWx0ZXJNZW51JiZ0aGlzLl9vd25lci5fZGF0YS5BbGxvd0ZpbHRlcmluZ0J5Q29sdW1uJiZiLl9kYXRhLkFsbG93RmlsdGVyaW5nKXtpZih3LmZpbmRJdGVtQnlWYWx1ZSgiRmlsdGVyTWVudVBhcmVudCIpKXt3LmZpbmRJdGVtQnlWYWx1ZSgiRmlsdGVyTWVudVBhcmVudCIpLnNldF9lbmFibGVkKHRydWUpOwp3LmZpbmRJdGVtQnlWYWx1ZSgiRmlsdGVyTWVudVBhcmVudCIpLnNldF92aXNpYmxlKHRydWUpOwp9aWYody5maW5kSXRlbUJ5VmFsdWUoImZpbHRlck1lbnVTZXBhcmF0b3IiKSl7dy5maW5kSXRlbUJ5VmFsdWUoImZpbHRlck1lbnVTZXBhcmF0b3IiKS5zZXRfdmlzaWJsZSh0cnVlKTsKfWlmKHcuRmlsdGVyQ29udHJvbHNJRHNIZWxwZXI9PW51bGx8fHR5cGVvZih3LkZpbHRlckNvbnRyb2xzSURzSGVscGVyKT09InVuZGVmaW5lZCIpe3cuRmlsdGVyQ29udHJvbHNJRHNIZWxwZXI9e0lkUHJlZml4OiJIQ0ZNIixJZFN1ZmZpeDp7Rmlyc3RDb25kOiJGaXJzdENvbmQiLFNlY29uZENvbmQ6IlNlY29uZENvbmQifSxGaWx0ZXJDb250cm9sOntDaGVja0JveDoiQ0IiLFJhZENvbWJvQm94OiJSQ01CIixSYWRUZXh0Qm94OiJSVEIiLFJhZERhdGVJbnB1dDoiUkRJIixSYWREYXRlUGlja2VyOiJSRFAiLFJhZERhdGVUaW1lUGlja2VyOiJSRFRQIixSYWRUaW1lUGlja2VyOiJSVFAiLFJhZE51bWVyaWNCb3g6IlJOVEIiLFJhZE1hc2tlZEJveDoiUk1UQiIsRmlsdGVyQnV0dG9uOiJGaWx0ZXJCdXR0b24iLENsZWFyRmlsdGVyQnV0dG9uOiJDbGVhckZpbHRlckJ1dHRvbiJ9LEZpcnN0RmlsdGVyVmFsdWVDb250cm9sOm51bGwsU2Vjb25kRmlsdGVyVmFsdWVDb250cm9sOm51bGwsRmlsdGVyQ29udHJvbHNUeXBlOm51bGwsZ2V0RmlsdGVyQ29udHJvbElEOmZ1bmN0aW9uKGUsaSl7cmV0dXJuIHRoaXMuSWRQcmVmaXgrZStpOwp9fTsKfWlmKHcuZmluZEl0ZW1CeVZhbHVlKCJGaWx0ZXJNZW51UGFyZW50IikmJncuZmluZEl0ZW1CeVZhbHVlKCJGaWx0ZXJNZW51Q29udGFpbmVyIikmJmIuX2RhdGEuQWxsb3dGaWx0ZXJpbmcpe3cudHJhY2tDaGFuZ2VzKCk7CnRoaXMuX29uQ29udGV4dE1lbnVJdGVtQ2xvc2luZ0RlbGVnYXRlPUZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHcsdGhpcy5fb25Db250ZXh0TWVudUl0ZW1DbG9zaW5nKTsKdy5hZGRfaXRlbUNsb3NpbmcodGhpcy5fb25Db250ZXh0TWVudUl0ZW1DbG9zaW5nRGVsZWdhdGUpOwp2YXIgdT13LmZpbmRJdGVtQnlWYWx1ZSgiRmlsdGVyTWVudUNvbnRhaW5lciIpOwp3LmNvbW1pdENoYW5nZXMoKTsKdGhpcy5fdXBkYXRlRGlzcGxheUhDTWVudUZpbHRlckNvbnRyb2xzKHUuZ2V0X2VsZW1lbnQoKSx3LkZpbHRlckNvbnRyb2xzSURzSGVscGVyKTsKdGhpcy5fdXBkYXRlRmlsdGVyRnVuY3Rpb25zRm9ySENNZW51KHUuZ2V0X2VsZW1lbnQoKSx3LkZpbHRlckNvbnRyb2xzSURzSGVscGVyKTsKdGhpcy5fdXBkYXRlRmlsdGVyVmFsdWVzRm9ySENNZW51KHcuRmlsdGVyQ29udHJvbHNJRHNIZWxwZXIpOwp2YXIgYT0kdGVsZXJpay5maW5kRWxlbWVudCh3LmZpbmRJdGVtQnlWYWx1ZSgiRmlsdGVyTWVudUNvbnRhaW5lciIpLmdldF9lbGVtZW50KCksIkhDRk1GaWx0ZXJCdXR0b24iKTsKdGhpcy5fZmlsdGVyQnV0dG9uQ2xpY2tEZWxlZ2F0ZT1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX2ZpbHRlckJ1dHRvbkNsaWNrSGFuZGxlcik7CiRhZGRIYW5kbGVyKGEsImNsaWNrIix0aGlzLl9maWx0ZXJCdXR0b25DbGlja0RlbGVnYXRlKTsKdmFyIHk9JHRlbGVyaWsuZmluZEVsZW1lbnQody5maW5kSXRlbUJ5VmFsdWUoIkZpbHRlck1lbnVDb250YWluZXIiKS5nZXRfZWxlbWVudCgpLCJIQ0ZNQ2xlYXJGaWx0ZXJCdXR0b24iKTsKdGhpcy5fY2xlYXJGaWx0ZXJCdXR0b25DbGlja0RlbGVnYXRlPUZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5fY2xlYXJGaWx0ZXJCdXR0b25DbGlja0hhbmRsZXIpOwokYWRkSGFuZGxlcih5LCJjbGljayIsdGhpcy5fY2xlYXJGaWx0ZXJCdXR0b25DbGlja0RlbGVnYXRlKTsKfX1lbHNle2lmKHcuZmluZEl0ZW1CeVZhbHVlKCJGaWx0ZXJNZW51UGFyZW50IikmJnRoaXMuX293bmVyLl9kYXRhLkFsbG93RmlsdGVyaW5nQnlDb2x1bW4pe3cuZmluZEl0ZW1CeVZhbHVlKCJGaWx0ZXJNZW51UGFyZW50Iikuc2V0X2VuYWJsZWQoZmFsc2UpOwp9ZWxzZXtpZih3LmZpbmRJdGVtQnlWYWx1ZSgiRmlsdGVyTWVudVBhcmVudCIpKXt3LmZpbmRJdGVtQnlWYWx1ZSgiRmlsdGVyTWVudVBhcmVudCIpLnNldF92aXNpYmxlKGZhbHNlKTsKfX1pZih3LmZpbmRJdGVtQnlWYWx1ZSgiZmlsdGVyTWVudVNlcGFyYXRvciIpJiYhdGhpcy5fb3duZXIuX2RhdGEuQWxsb3dGaWx0ZXJpbmdCeUNvbHVtbil7dy5maW5kSXRlbUJ5VmFsdWUoImZpbHRlck1lbnVTZXBhcmF0b3IiKS5zZXRfdmlzaWJsZShmYWxzZSk7Cn19dmFyIHQ9dy5maW5kSXRlbUJ5VmFsdWUoIkJlc3RGaXQiKTsKaWYodCl7dC5zZXRfdmlzaWJsZSh0aGlzLmdldF9yZXNpemFibGUoKSk7CnQuX2NvbHVtbj10aGlzLmdldF9yZXNpemFibGUoKT90aGlzOm51bGw7Cn12YXIgZD13LmZpbmRJdGVtQnlWYWx1ZSgiYmVzdEZpdFNlcGFyYXRvciIpOwppZihkKXtkLnNldF92aXNpYmxlKHQuZ2V0X3Zpc2libGUoKSk7Cn1pZigkdGVsZXJpay5pc0lFNiYmIXcuX2RldGFjaGVkKXt3Ll9kZXRhY2goKTsKdy5fZ2V0Q29udGV4dE1lbnVFbGVtZW50KCkuc3R5bGUudmlzaWJpbGl0eT0iaGlkZGVuIjsKdy5fZ2V0Q29udGV4dE1lbnVFbGVtZW50KCkuc3R5bGUuZGlzcGxheT0iYmxvY2siOwp3LnJlcGFpbnQoKTsKfXZhciBnPW51bGw7CnZhciBzPXcuZmluZEl0ZW1CeVZhbHVlKCJDb2x1bW5zQ29udGFpbmVyIik7CmlmKHMpe2c9dy5maW5kSXRlbUJ5VmFsdWUoIkNvbHVtbnNDb250YWluZXIiKS5nZXRfaXRlbXMoKTsKfWlmKGcpe2Zvcih2YXIgaD0wLHY9Zy5nZXRfY291bnQoKTsKaDx2OwpoKyspe3ZhciB6PWcuZ2V0SXRlbShoKTsKei5zZXRfdmlzaWJsZShmYWxzZSk7CmZvcih2YXIgbD0wLG09Yi5nZXRfb3duZXIoKS5nZXRfY29sdW1ucygpLmxlbmd0aDsKbDxtOwpsKyspe3ZhciBxPWIuZ2V0X293bmVyKCkuZ2V0X2NvbHVtbnMoKVtsXTsKaWYoei5nZXRfdmFsdWUoKT09U3RyaW5nLmZvcm1hdCgiezB9fHsxfSIsYi5nZXRfb3duZXIoKS5fZGF0YS5DbGllbnRJRCxxLmdldF91bmlxdWVOYW1lKCkpKXt6LnNldF92aXNpYmxlKHRydWUpOwp2YXIgQj16LmdldF9lbGVtZW50KCkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImlucHV0Iik7CmlmKEImJkIubGVuZ3RoJiZCWzBdLnR5cGU9PSJjaGVja2JveCIpeyRhZGRIYW5kbGVyKEJbMF0sImNsaWNrIix0aGlzLl9jaGVja0JveENsaWNrSGFuZGxlcik7CmlmKHEuZ2V0X3Zpc2libGUoKSYmKHEuX2RhdGEuRGlzcGxheT09bnVsbHx8cS5fZGF0YS5EaXNwbGF5KSYmKHEuRGlzcGxheT09bnVsbHx8cS5EaXNwbGF5KSl7QlswXS5jaGVja2VkPXRydWU7Cn1lbHNle0JbMF0uY2hlY2tlZD1mYWxzZTsKfUJbMF0uX2NvbHVtbj1xOwpCWzBdLl9pbmRleD1sOwpBcnJheS5hZGQodGhpcy5fY2hlY2tib3hlcyxCWzBdKTsKYnJlYWs7Cn19fX10aGlzLl9oYW5kbGVDb2x1bW5zQ2hlY2tib3hlc1N0YXRlKCk7Cn12YXIgbz1uZXcgVGVsZXJpay5XZWIuVUkuR3JpZEhlYWRlck1lbnVDYW5jZWxFdmVudEFyZ3ModGhpcyxmLHcpOwp0aGlzLl9vd25lci5fb3duZXIucmFpc2VfaGVhZGVyTWVudVNob3dpbmcobyk7CmlmKG8uZ2V0X2NhbmNlbCgpKXtyZXR1cm47Cn1pZihuKXt2YXIgeD0kdGVsZXJpay5nZXRMb2NhdGlvbih0aGlzLmdldF9lbGVtZW50KCkpOwppZih4KXt2YXIgcD14Lng7CnZhciByPXgueTsKaWYoYyl7cD1wK3BhcnNlSW50KGMpOwp9aWYoayl7cj1yK3BhcnNlSW50KGspOwp9dy5zaG93QXQocCxyKTsKJHRlbGVyaWsuY2FuY2VsUmF3RXZlbnQoZik7Cn19ZWxzZXt3LnNob3coZik7Cn19fSxfdXBkYXRlRmlsdGVyVmFsdWVzRm9ySENNZW51OmZ1bmN0aW9uKGcpe3ZhciBkPXRoaXMuX2RhdGEuQ3VycmVudEZpbHRlclZhbHVlOwp2YXIgYT10aGlzLl9kYXRhLkFuZEN1cnJlbnRGaWx0ZXJWYWx1ZTsKaWYoZy5GaXJzdEZpbHRlclZhbHVlQ29udHJvbCl7aWYoZy5GaWx0ZXJDb250cm9sc1R5cGU9PWcuRmlsdGVyQ29udHJvbC5DaGVja0JveCl7aWYoZC50b1N0cmluZygpLnRvTG93ZXJDYXNlKCk9PSJ0cnVlIil7Zy5GaXJzdEZpbHRlclZhbHVlQ29udHJvbC5jaGVja2VkPXRydWU7Cn1lbHNle2cuRmlyc3RGaWx0ZXJWYWx1ZUNvbnRyb2wuY2hlY2tlZD1mYWxzZTsKfX1lbHNle2lmKGcuRmlsdGVyQ29udHJvbHNUeXBlPT1nLkZpbHRlckNvbnRyb2wuUmFkVGV4dEJveHx8Zy5GaWx0ZXJDb250cm9sc1R5cGU9PWcuRmlsdGVyQ29udHJvbC5SYWRNYXNrZWRCb3h8fGcuRmlsdGVyQ29udHJvbHNUeXBlPT1nLkZpbHRlckNvbnRyb2wuUmFkTnVtZXJpY0JveCl7Zy5GaXJzdEZpbHRlclZhbHVlQ29udHJvbC5zZXRfdmFsdWUoZCk7Cn1lbHNle2lmKGcuRmlsdGVyQ29udHJvbHNUeXBlPT1nLkZpbHRlckNvbnRyb2wuUmFkRGF0ZUlucHV0fHxnLkZpbHRlckNvbnRyb2xzVHlwZT09Zy5GaWx0ZXJDb250cm9sLlJhZERhdGVQaWNrZXJ8fGcuRmlsdGVyQ29udHJvbHNUeXBlPT1nLkZpbHRlckNvbnRyb2wuUmFkRGF0ZVRpbWVQaWNrZXJ8fGcuRmlsdGVyQ29udHJvbHNUeXBlPT1nLkZpbHRlckNvbnRyb2wuUmFkVGltZVBpY2tlcil7dmFyIGM9RGF0ZS5wYXJzZUxvY2FsZShkKTsKaWYoIWMpe3RyeXtjPW5ldyBEYXRlKGQpOwp9Y2F0Y2goYil7fX1pZighaXNOYU4oYykmJmMhPW51bGwmJnR5cGVvZihjKSE9InVuZGVmaW5lZCIpe2cuRmlyc3RGaWx0ZXJWYWx1ZUNvbnRyb2wuc2V0X3NlbGVjdGVkRGF0ZShjKTsKfX19fX1pZihnLlNlY29uZEZpbHRlclZhbHVlQ29udHJvbCl7aWYoZy5GaWx0ZXJDb250cm9sc1R5cGU9PWcuRmlsdGVyQ29udHJvbC5DaGVja0JveCl7aWYoYS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCk9PSJ0cnVlIil7Zy5TZWNvbmRGaWx0ZXJWYWx1ZUNvbnRyb2wuY2hlY2tlZD10cnVlOwp9ZWxzZXtnLlNlY29uZEZpbHRlclZhbHVlQ29udHJvbC5jaGVja2VkPWZhbHNlOwp9fWVsc2V7aWYoZy5GaWx0ZXJDb250cm9sc1R5cGU9PWcuRmlsdGVyQ29udHJvbC5SYWRUZXh0Qm94fHxnLkZpbHRlckNvbnRyb2xzVHlwZT09Zy5GaWx0ZXJDb250cm9sLlJhZE1hc2tlZEJveHx8Zy5GaWx0ZXJDb250cm9sc1R5cGU9PWcuRmlsdGVyQ29udHJvbC5SYWROdW1lcmljQm94KXtnLlNlY29uZEZpbHRlclZhbHVlQ29udHJvbC5zZXRfdmFsdWUoYSk7Cn1lbHNle2lmKGcuRmlsdGVyQ29udHJvbHNUeXBlPT1nLkZpbHRlckNvbnRyb2wuUmFkRGF0ZUlucHV0fHxnLkZpbHRlckNvbnRyb2xzVHlwZT09Zy5GaWx0ZXJDb250cm9sLlJhZERhdGVQaWNrZXJ8fGcuRmlsdGVyQ29udHJvbHNUeXBlPT1nLkZpbHRlckNvbnRyb2wuUmFkRGF0ZVRpbWVQaWNrZXJ8fGcuRmlsdGVyQ29udHJvbHNUeXBlPT1nLkZpbHRlckNvbnRyb2wuUmFkVGltZVBpY2tlcil7dmFyIGY9RGF0ZS5wYXJzZUxvY2FsZShhKTsKaWYoIWYpe3RyeXtmPW5ldyBEYXRlKGEpOwp9Y2F0Y2goYil7fX1pZighaXNOYU4oZikmJmYhPW51bGwmJnR5cGVvZihmKSE9InVuZGVmaW5lZCIpe2cuU2Vjb25kRmlsdGVyVmFsdWVDb250cm9sLnNldF9zZWxlY3RlZERhdGUoZik7Cn19fX19fSxfdXBkYXRlRmlsdGVyRnVuY3Rpb25zRm9ySENNZW51OmZ1bmN0aW9uKGQsZil7dmFyIGE9dGhpcy5fZGF0YS5DdXJyZW50RmlsdGVyRnVuY3Rpb25OYW1lOwp2YXIgZT10aGlzLl9kYXRhLkFuZEN1cnJlbnRGaWx0ZXJGdW5jdGlvbk5hbWU7CnZhciBjPWYuZ2V0RmlsdGVyQ29udHJvbElEKGYuRmlsdGVyQ29udHJvbC5SYWRDb21ib0JveCxmLklkU3VmZml4LkZpcnN0Q29uZCk7CnZhciBiPSR0ZWxlcmlrLmZpbmRDb250cm9sKGQsYyk7CnRoaXMuX3NldFVwSGVhZGVyQ29udGV4dE1lbnVGaWx0ZXJDb250cm9scyhiLGEsdGhpcy5fZGF0YS5EYXRhVHlwZU5hbWUsdGhpcy5fZGF0YS5GaWx0ZXJMaXN0T3B0aW9ucyk7CmM9Zi5nZXRGaWx0ZXJDb250cm9sSUQoZi5GaWx0ZXJDb250cm9sLlJhZENvbWJvQm94LGYuSWRTdWZmaXguU2Vjb25kQ29uZCk7CmI9JHRlbGVyaWsuZmluZENvbnRyb2woZCxjKTsKdGhpcy5fc2V0VXBIZWFkZXJDb250ZXh0TWVudUZpbHRlckNvbnRyb2xzKGIsZSx0aGlzLl9kYXRhLkRhdGFUeXBlTmFtZSx0aGlzLl9kYXRhLkZpbHRlckxpc3RPcHRpb25zKTsKfSxfdXBkYXRlRGlzcGxheUhDTWVudUZpbHRlckNvbnRyb2xzOmZ1bmN0aW9uKGEsYil7dGhpcy5fdXBkYXRlRGlzcGxheUhDRmlsdGVyQm91bmRDb2x1bW5Db250cm9scyhhLGIsYi5JZFN1ZmZpeC5GaXJzdENvbmQpOwp0aGlzLl91cGRhdGVEaXNwbGF5SENGaWx0ZXJCb3VuZENvbHVtbkNvbnRyb2xzKGEsYixiLklkU3VmZml4LlNlY29uZENvbmQpOwp0aGlzLl91cGRhdGVEaXNwbGF5SENGaWx0ZXJDaGVja0JveENvbHVtbkNvbnRyb2xzKGEsYixiLklkU3VmZml4LkZpcnN0Q29uZCk7CnRoaXMuX3VwZGF0ZURpc3BsYXlIQ0ZpbHRlckNoZWNrQm94Q29sdW1uQ29udHJvbHMoYSxiLGIuSWRTdWZmaXguU2Vjb25kQ29uZCk7CnRoaXMuX3VwZGF0ZURpc3BsYXlIQ0ZpbHRlclBpY2tlckNvbnRyb2xzKGEsYixiLkZpbHRlckNvbnRyb2wuUmFkRGF0ZVBpY2tlciwiRGF0ZVBpY2tlciIsYi5JZFN1ZmZpeC5GaXJzdENvbmQpOwp0aGlzLl91cGRhdGVEaXNwbGF5SENGaWx0ZXJQaWNrZXJDb250cm9scyhhLGIsYi5GaWx0ZXJDb250cm9sLlJhZERhdGVQaWNrZXIsIkRhdGVQaWNrZXIiLGIuSWRTdWZmaXguU2Vjb25kQ29uZCk7CnRoaXMuX3VwZGF0ZURpc3BsYXlIQ0ZpbHRlclBpY2tlckNvbnRyb2xzKGEsYixiLkZpbHRlckNvbnRyb2wuUmFkRGF0ZVRpbWVQaWNrZXIsIkRhdGVUaW1lUGlja2VyIixiLklkU3VmZml4LkZpcnN0Q29uZCk7CnRoaXMuX3VwZGF0ZURpc3BsYXlIQ0ZpbHRlclBpY2tlckNvbnRyb2xzKGEsYixiLkZpbHRlckNvbnRyb2wuUmFkRGF0ZVRpbWVQaWNrZXIsIkRhdGVUaW1lUGlja2VyIixiLklkU3VmZml4LlNlY29uZENvbmQpOwp0aGlzLl91cGRhdGVEaXNwbGF5SENGaWx0ZXJQaWNrZXJDb250cm9scyhhLGIsYi5GaWx0ZXJDb250cm9sLlJhZFRpbWVQaWNrZXIsIlRpbWVQaWNrZXIiLGIuSWRTdWZmaXguRmlyc3RDb25kKTsKdGhpcy5fdXBkYXRlRGlzcGxheUhDRmlsdGVyUGlja2VyQ29udHJvbHMoYSxiLGIuRmlsdGVyQ29udHJvbC5SYWRUaW1lUGlja2VyLCJUaW1lUGlja2VyIixiLklkU3VmZml4LlNlY29uZENvbmQpOwp0aGlzLl91cGRhdGVEaXNwbGF5SENGaWx0ZXJQaWNrZXJDb250cm9scyhhLGIsYi5GaWx0ZXJDb250cm9sLlJhZERhdGVJbnB1dCwiTm9uZSIsYi5JZFN1ZmZpeC5GaXJzdENvbmQpOwp0aGlzLl91cGRhdGVEaXNwbGF5SENGaWx0ZXJQaWNrZXJDb250cm9scyhhLGIsYi5GaWx0ZXJDb250cm9sLlJhZERhdGVJbnB1dCwiTm9uZSIsYi5JZFN1ZmZpeC5TZWNvbmRDb25kKTsKdGhpcy5fdXBkYXRlRGlzcGxheUhDRmlsdGVyTWFza2VkQm94Q29udHJvbHMoYSxiLGIuSWRTdWZmaXguRmlyc3RDb25kKTsKdGhpcy5fdXBkYXRlRGlzcGxheUhDRmlsdGVyTWFza2VkQm94Q29udHJvbHMoYSxiLGIuSWRTdWZmaXguU2Vjb25kQ29uZCk7CnRoaXMuX3VwZGF0ZURpc3BsYXlIQ0ZpbHRlck51bWVyaWNCb3hDb250cm9scyhhLGIsYi5JZFN1ZmZpeC5GaXJzdENvbmQpOwp0aGlzLl91cGRhdGVEaXNwbGF5SENGaWx0ZXJOdW1lcmljQm94Q29udHJvbHMoYSxiLGIuSWRTdWZmaXguU2Vjb25kQ29uZCk7Cn0sX3VwZGF0ZURpc3BsYXlIQ0ZpbHRlckJvdW5kQ29sdW1uQ29udHJvbHM6ZnVuY3Rpb24oYixkLGUpe3ZhciBhPWQuZ2V0RmlsdGVyQ29udHJvbElEKGQuRmlsdGVyQ29udHJvbC5SYWRUZXh0Qm94LGUpOwp2YXIgYz0kdGVsZXJpay5maW5kQ29udHJvbChiLGEpOwppZihjKXtpZih0aGlzLl9kYXRhLkNvbHVtblR5cGUhPSJHcmlkRGF0ZVRpbWVDb2x1bW4iJiZ0aGlzLl9kYXRhLkNvbHVtblR5cGUhPSJHcmlkTWFza2VkQ29sdW1uIiYmdGhpcy5fZGF0YS5Db2x1bW5UeXBlIT0iR3JpZE51bWVyaWNDb2x1bW4iJiZ0aGlzLl9kYXRhLkNvbHVtblR5cGUhPSJHcmlkQ2hlY2tCb3hDb2x1bW4iJiZ0aGlzLl9kYXRhLkRhdGFUeXBlTmFtZSE9IlN5c3RlbS5Cb29sZWFuIiYmdGhpcy5fZGF0YS5Db2x1bW5UeXBlIT0iR3JpZFJhdGluZ0NvbHVtbiIpe2lmKGU9PWQuSWRTdWZmaXguRmlyc3RDb25kKXtkLkZpcnN0RmlsdGVyVmFsdWVDb250cm9sPWM7Cn1lbHNle2QuU2Vjb25kRmlsdGVyVmFsdWVDb250cm9sPWM7Cn1kLkZpbHRlckNvbnRyb2xzVHlwZT1kLkZpbHRlckNvbnRyb2wuUmFkVGV4dEJveDsKYy5zZXRfdmlzaWJsZSh0cnVlKTsKaWYodGhpcy5fZGF0YS5GaWx0ZXJDb250cm9sV2lkdGgpe2MuX29yaWdpbmFsVGV4dEJveENzc1RleHQ9dGhpcy5fYWRqdXN0SENGaWx0ZXJNZW51SW5wdXRDb250cm9sc1dpZHRoKGMuX29yaWdpbmFsVGV4dEJveENzc1RleHQsdGhpcy5fZGF0YS5GaWx0ZXJDb250cm9sV2lkdGguVmFsdWUpOwp9fWVsc2V7Yy5zZXRfdmlzaWJsZShmYWxzZSk7Cn19fSxfdXBkYXRlRGlzcGxheUhDRmlsdGVyUGlja2VyQ29udHJvbHM6ZnVuY3Rpb24oZixnLGMsZSxkKXt2YXIgYT1nLmdldEZpbHRlckNvbnRyb2xJRChjLGQpOwp2YXIgYj0kdGVsZXJpay5maW5kQ29udHJvbChmLGEpOwppZihiKXtpZih0aGlzLl9kYXRhLlBpY2tlclR5cGUhPWUpe2Iuc2V0X3Zpc2libGUoZmFsc2UpOwp9ZWxzZXtpZihkPT1nLklkU3VmZml4LkZpcnN0Q29uZCl7Zy5GaXJzdEZpbHRlclZhbHVlQ29udHJvbD1iOwp9ZWxzZXtnLlNlY29uZEZpbHRlclZhbHVlQ29udHJvbD1iOwp9Zy5GaWx0ZXJDb250cm9sc1R5cGU9YzsKYi5zZXRfdmlzaWJsZSh0cnVlKTsKaWYodGhpcy5fZGF0YS5GaWx0ZXJDb250cm9sV2lkdGgpe2lmKGM9PWcuRmlsdGVyQ29udHJvbC5SYWREYXRlSW5wdXQpe2IuX29yaWdpbmFsVGV4dEJveENzc1RleHQ9dGhpcy5fYWRqdXN0SENGaWx0ZXJNZW51SW5wdXRDb250cm9sc1dpZHRoKGIuX29yaWdpbmFsVGV4dEJveENzc1RleHQsdGhpcy5fZGF0YS5GaWx0ZXJDb250cm9sV2lkdGguVmFsdWUpOwp9ZWxzZXt0aGlzLl9hZGp1c3RIQ0ZpbHRlck1lbnVQaWNrZXJDb250cm9sc1dpZHRoKGIsdGhpcy5fZGF0YS5GaWx0ZXJDb250cm9sV2lkdGguVmFsdWUpOwp9fWlmKHRoaXMuX2RhdGEuTWluRGF0ZSl7Yi5zZXRfbWluRGF0ZShuZXcgRGF0ZSh0aGlzLl9kYXRhLk1pbkRhdGUpKTsKfWlmKHRoaXMuX2RhdGEuTWF4RGF0ZSl7Yi5zZXRfbWF4RGF0ZShuZXcgRGF0ZSh0aGlzLl9kYXRhLk1heERhdGUpKTsKfX19fSxfdXBkYXRlRGlzcGxheUhDRmlsdGVyQ2hlY2tCb3hDb2x1bW5Db250cm9sczpmdW5jdGlvbihiLGQsZSl7dmFyIGE9ZC5nZXRGaWx0ZXJDb250cm9sSUQoZC5GaWx0ZXJDb250cm9sLkNoZWNrQm94LGUpOwp2YXIgYz0kdGVsZXJpay5maW5kRWxlbWVudChiLGEpOwppZihjKXtpZih0aGlzLl9kYXRhLkNvbHVtblR5cGU9PSJHcmlkQ2hlY2tCb3hDb2x1bW4ifHx0aGlzLl9kYXRhLkRhdGFUeXBlTmFtZT09IlN5c3RlbS5Cb29sZWFuIil7Yy5zdHlsZS5kaXNwbGF5PSJibG9jayI7CmlmKGU9PWQuSWRTdWZmaXguRmlyc3RDb25kKXtkLkZpcnN0RmlsdGVyVmFsdWVDb250cm9sPWM7CmQuRmlsdGVyQ29udHJvbHNUeXBlPWQuRmlsdGVyQ29udHJvbC5DaGVja0JveDsKfWVsc2V7ZC5TZWNvbmRGaWx0ZXJWYWx1ZUNvbnRyb2w9YzsKZC5GaWx0ZXJDb250cm9sc1R5cGU9ZC5GaWx0ZXJDb250cm9sLkNoZWNrQm94Owp9fWVsc2V7Yy5zdHlsZS5kaXNwbGF5PSJub25lIjsKfX19LF91cGRhdGVEaXNwbGF5SENGaWx0ZXJNYXNrZWRCb3hDb250cm9sczpmdW5jdGlvbihnLGgsZCl7dmFyIGI9aC5nZXRGaWx0ZXJDb250cm9sSUQoaC5GaWx0ZXJDb250cm9sLlJhZE1hc2tlZEJveCxkKTsKdmFyIGM9JHRlbGVyaWsuZmluZENvbnRyb2woZyxiKTsKaWYoYyl7aWYodGhpcy5fZGF0YS5Db2x1bW5UeXBlIT0iR3JpZE1hc2tlZENvbHVtbiIpe2Muc2V0X3Zpc2libGUoZmFsc2UpOwp9ZWxzZXtpZihkPT1oLklkU3VmZml4LkZpcnN0Q29uZCl7aC5GaXJzdEZpbHRlclZhbHVlQ29udHJvbD1jOwp9ZWxzZXtoLlNlY29uZEZpbHRlclZhbHVlQ29udHJvbD1jOwp9aC5GaWx0ZXJDb250cm9sc1R5cGU9aC5GaWx0ZXJDb250cm9sLlJhZE1hc2tlZEJveDsKYy5zZXRfdmlzaWJsZSh0cnVlKTsKaWYodGhpcy5fZGF0YS5NYXNrIT1udWxsJiZ0eXBlb2YodGhpcy5fZGF0YS5NYXNrKSE9InVuZGVmaW5lZCIpe3ZhciBhPVtdOwp2YXIgZj10aGlzLl9kYXRhLk1hc2suc3BsaXQoIiwiKTsKZm9yKHZhciBlPTA7CmU8Zi5sZW5ndGg7CmUrKyl7YS5wdXNoKGV2YWwoZltlXSkpOwp9Yy5fbGVuZ3RoPTA7CmMuX3NldE1hc2soYSk7CmlmKHRoaXMuX2RhdGEuRmlsdGVyQ29udHJvbFdpZHRoKXtjLl9vcmlnaW5hbFRleHRCb3hDc3NUZXh0PXRoaXMuX2FkanVzdEhDRmlsdGVyTWVudUlucHV0Q29udHJvbHNXaWR0aChjLl9vcmlnaW5hbFRleHRCb3hDc3NUZXh0LHRoaXMuX2RhdGEuRmlsdGVyQ29udHJvbFdpZHRoLlZhbHVlKTsKfX19fX0sX3VwZGF0ZURpc3BsYXlIQ0ZpbHRlck51bWVyaWNCb3hDb250cm9sczpmdW5jdGlvbihlLGYsYyl7dmFyIGE9Zi5nZXRGaWx0ZXJDb250cm9sSUQoZi5GaWx0ZXJDb250cm9sLlJhZE51bWVyaWNCb3gsYyk7CnZhciBiPSR0ZWxlcmlrLmZpbmRDb250cm9sKGUsYSk7CmlmKGIpe2lmKHRoaXMuX2RhdGEuQ29sdW1uVHlwZSE9IkdyaWROdW1lcmljQ29sdW1uIiYmdGhpcy5fZGF0YS5Db2x1bW5UeXBlIT0iR3JpZFJhdGluZ0NvbHVtbiIpe2Iuc2V0X3Zpc2libGUoZmFsc2UpOwp9ZWxzZXtmLkZpbHRlckNvbnRyb2xzVHlwZT1mLkZpbHRlckNvbnRyb2wuUmFkTnVtZXJpY0JveDsKaWYoYz09Zi5JZFN1ZmZpeC5GaXJzdENvbmQpe2YuRmlyc3RGaWx0ZXJWYWx1ZUNvbnRyb2w9YjsKfWVsc2V7Zi5TZWNvbmRGaWx0ZXJWYWx1ZUNvbnRyb2w9YjsKfXZhciBkPWIuZ2V0X251bWJlckZvcm1hdCgpOwppZih0aGlzLl9kYXRhLk5lZ2F0aXZlUGF0dGVybiE9bnVsbCYmdHlwZW9mKHRoaXMuX2RhdGEuTmVnYXRpdmVQYXR0ZXJuKSE9InVuZGVmaW5lZCIpe2QuTmVnYXRpdmVQYXR0ZXJuPXRoaXMuX2RhdGEuTmVnYXRpdmVQYXR0ZXJuOwp9aWYodGhpcy5fZGF0YS5Qb3NpdGl2ZVBhdHRlcm4hPW51bGwmJnR5cGVvZih0aGlzLl9kYXRhLlBvc2l0aXZlUGF0dGVybikhPSJ1bmRlZmluZWQiKXtkLlBvc2l0aXZlUGF0dGVybj10aGlzLl9kYXRhLlBvc2l0aXZlUGF0dGVybjsKfWlmKHRoaXMuX2RhdGEuQWxsb3dSb3VuZGluZyE9bnVsbCYmdHlwZW9mKHRoaXMuX2RhdGEuQWxsb3dSb3VuZGluZykhPSJ1bmRlZmluZWQiKXtkLkFsbG93Um91bmRpbmc9dGhpcy5fZGF0YS5BbGxvd1JvdW5kaW5nOwp9aWYodGhpcy5fZGF0YS5LZWVwTm90Um91bmRlZFZhbHVlIT1udWxsJiZ0eXBlb2YodGhpcy5fZGF0YS5LZWVwTm90Um91bmRlZFZhbHVlKSE9InVuZGVmaW5lZCIpe2QuS2VlcE5vdFJvdW5kZWRWYWx1ZT10aGlzLl9kYXRhLktlZXBOb3RSb3VuZGVkVmFsdWU7Cn1iLnNldF9udW1iZXJGb3JtYXQoZCk7CmIuc2V0X3Zpc2libGUodHJ1ZSk7Cn19fSxfYWRqdXN0SENGaWx0ZXJNZW51SW5wdXRDb250cm9sc1dpZHRoOmZ1bmN0aW9uKGIsYSl7aWYoYi5zZWFyY2goLyhefFteLV0pd2lkdGgvaSkhPS0xKXtiPWIucmVwbGFjZSgvKF58W14tXSl3aWR0aChccyopOihccyopKFteO10rKTsvaSwiJDFXSURUSDoiK2ErInB4OyIpOwp9ZWxzZXtiKz0iV0lEVEg6IithKyJweDsiOwp9cmV0dXJuIGI7Cn0sX2FkanVzdEhDRmlsdGVyTWVudVBpY2tlckNvbnRyb2xzV2lkdGg6ZnVuY3Rpb24oYixhKXskZ2V0KGIuZ2V0X2lkKCkrIl93cmFwcGVyIikuc3R5bGUud2lkdGg9YTsKfSxfc2V0VXBIZWFkZXJDb250ZXh0TWVudUZpbHRlckNvbnRyb2xzOmZ1bmN0aW9uKGQsZyxjLGUpe3ZhciBiPWQuZ2V0X2l0ZW1zKCkudG9BcnJheSgpOwpmb3IodmFyIGY9MDsKZjxiLmxlbmd0aDsKZisrKXt2YXIgYT1iW2ZdOwppZihjPT0iU3lzdGVtLkJvb2xlYW4iKXtpZigoYS5nZXRfdmFsdWUoKT09IkdyZWF0ZXJUaGFuIil8fChhLmdldF92YWx1ZSgpPT0iTGVzc1RoYW4iKXx8KGEuZ2V0X3ZhbHVlKCk9PSJHcmVhdGVyVGhhbk9yRXF1YWxUbyIpfHwoYS5nZXRfdmFsdWUoKT09Ikxlc3NUaGFuT3JFcXVhbFRvIikpe2Euc2V0X3Zpc2libGUoZmFsc2UpOwpjb250aW51ZTsKfX1pZihjIT0iU3lzdGVtLlN0cmluZyIpe2lmKChhLmdldF92YWx1ZSgpPT0iU3RhcnRzV2l0aCIpfHwoYS5nZXRfdmFsdWUoKT09IkVuZHNXaXRoIil8fChhLmdldF92YWx1ZSgpPT0iQ29udGFpbnMiKXx8KGEuZ2V0X3ZhbHVlKCk9PSJEb2VzTm90Q29udGFpbiIpfHwoYS5nZXRfdmFsdWUoKT09IklzRW1wdHkiKXx8KGEuZ2V0X3ZhbHVlKCk9PSJOb3RJc0VtcHR5Iikpe2Euc2V0X3Zpc2libGUoZmFsc2UpOwpjb250aW51ZTsKfX1pZihlPT0wKXtpZihhLmdldF92YWx1ZSgpPT0iQ3VzdG9tIil7YS5zZXRfdmlzaWJsZShmYWxzZSk7CmNvbnRpbnVlOwp9fWlmKGEuZ2V0X3ZhbHVlKCk9PWcpe2Euc2VsZWN0KCk7Cn1hLnNldF92aXNpYmxlKHRydWUpOwp9fSxfZmlsdGVyQnV0dG9uQ2xpY2tIYW5kbGVyOmZ1bmN0aW9uKGYpe3ZhciBsPXRoaXMuX293bmVyLl9vd25lci5fZ2V0SGVhZGVyQ29udGV4dE1lbnUoKTsKdmFyIGU9dGhpczsKdmFyIG49bC5GaWx0ZXJDb250cm9sc0lEc0hlbHBlcjsKdmFyIGI9ZS5fZGF0YS5EYXRhRmllbGQ7CmlmKGUuX2RhdGEuRGF0YVRleHRGaWVsZCl7Yj1lLl9kYXRhLkRhdGFUZXh0RmllbGQ7Cn1lbHNle2lmKGUuX2RhdGEuRGF0YUFsdGVybmF0ZVRleHRGaWVsZCl7Yj1lLl9kYXRhLkRhdGFBbHRlcm5hdGVUZXh0RmllbGQ7Cn19dmFyIHI9bi5nZXRGaWx0ZXJDb250cm9sSUQobi5GaWx0ZXJDb250cm9sLlJhZENvbWJvQm94LG4uSWRTdWZmaXguRmlyc3RDb25kKTsKdmFyIGg9bC5maW5kSXRlbUJ5VmFsdWUoIkZpbHRlck1lbnVDb250YWluZXIiKS5maW5kQ29udHJvbChyKS5nZXRfc2VsZWN0ZWRJdGVtKCkuZ2V0X3ZhbHVlKCk7CnZhciBxPW4uZ2V0RmlsdGVyQ29udHJvbElEKG4uRmlsdGVyQ29udHJvbC5SYWRDb21ib0JveCxuLklkU3VmZml4LlNlY29uZENvbmQpOwp2YXIgbT1sLmZpbmRJdGVtQnlWYWx1ZSgiRmlsdGVyTWVudUNvbnRhaW5lciIpLmZpbmRDb250cm9sKHEpLmdldF9zZWxlY3RlZEl0ZW0oKS5nZXRfdmFsdWUoKTsKdmFyIGs7CnZhciBwOwp2YXIgZz10cnVlOwppZihuLkZpbHRlckNvbnRyb2xzVHlwZT09bi5GaWx0ZXJDb250cm9sLlJhZFRleHRCb3h8fG4uRmlsdGVyQ29udHJvbHNUeXBlPT1uLkZpbHRlckNvbnRyb2wuUmFkTWFza2VkQm94fHxuLkZpbHRlckNvbnRyb2xzVHlwZT09bi5GaWx0ZXJDb250cm9sLlJhZE51bWVyaWNCb3gpe2s9bi5GaXJzdEZpbHRlclZhbHVlQ29udHJvbC5nZXRfdmFsdWUoKTsKcD1uLlNlY29uZEZpbHRlclZhbHVlQ29udHJvbC5nZXRfdmFsdWUoKTsKfWVsc2V7aWYobi5GaWx0ZXJDb250cm9sc1R5cGU9PW4uRmlsdGVyQ29udHJvbC5DaGVja0JveCl7az1uLkZpcnN0RmlsdGVyVmFsdWVDb250cm9sLmNoZWNrZWQ7CnA9bi5TZWNvbmRGaWx0ZXJWYWx1ZUNvbnRyb2wuY2hlY2tlZDsKZz1mYWxzZTsKfWVsc2V7dmFyIGM9ZnVuY3Rpb24ocyl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybihzPT1uLkZpbHRlckNvbnRyb2wuUmFkRGF0ZUlucHV0KT90Ll9kYXRlRm9ybWF0OnQuX2RhdGVJbnB1dC5fZGF0ZUZvcm1hdDsKfTsKfShuLkZpbHRlckNvbnRyb2xzVHlwZSk7CnZhciBpPW4uRmlyc3RGaWx0ZXJWYWx1ZUNvbnRyb2wuZ2V0X3NlbGVjdGVkRGF0ZSgpOwppZighIWkpe2s9aS5sb2NhbGVGb3JtYXQoYyhuLkZpcnN0RmlsdGVyVmFsdWVDb250cm9sKSk7Cn12YXIgbz1uLlNlY29uZEZpbHRlclZhbHVlQ29udHJvbC5nZXRfc2VsZWN0ZWREYXRlKCk7CmlmKCEhbyl7cD1vLmxvY2FsZUZvcm1hdChjKG4uU2Vjb25kRmlsdGVyVmFsdWVDb250cm9sKSk7Cn19fWlmKGcpe2lmKCEoISFrKSl7az0iIjsKfWlmKCEoISFwKSl7cD0iIjsKfX1mLnByZXZlbnREZWZhdWx0KCk7CnZhciBqPXRoaXMuX293bmVyOwp2YXIgYT1lLl9kYXRhLlVuaXF1ZU5hbWUrInw/IitoKyJ8IitrKyJ8PyIrbSsifCIrcDsKaWYoJGZpbmQoai5nZXRfb3duZXIoKS5nZXRfaWQoKSkuX2RhdGFCaW5kaW5nV2l0aFNlbGVjdE1ldGhvZCl7d2hpbGUoai5fZmlsdGVyRXhwcmVzc2lvbnMuZ2V0X2NvdW50KCkhPTApe3ZhciBkPWouX2ZpbHRlckV4cHJlc3Npb25zLmdldEl0ZW0oMCk7CmlmKGQuZ2V0X2NvbHVtblVuaXF1ZU5hbWUoKT09ZS5fZGF0YS5VbmlxdWVOYW1lKXtqLl9maWx0ZXJFeHByZXNzaW9ucy5yZW1vdmUoZCk7Cn19aWYoaCE9Ik5vRmlsdGVyIiYmayE9PSIiKXtqLmZpbHRlcihlLl9kYXRhLlVuaXF1ZU5hbWUsayxoLHRydWUsdHJ1ZSk7Cn1pZihtIT0iTm9GaWx0ZXIiJiZwIT09IiIpe2ouZmlsdGVyKGUuX2RhdGEuVW5pcXVlTmFtZSxwLG0sZmFsc2UsdHJ1ZSk7Cn1lLl9kYXRhLkN1cnJlbnRGaWx0ZXJGdW5jdGlvbj1oOwplLl9kYXRhLkFuZEN1cnJlbnRGaWx0ZXJGdW5jdGlvbj1tOwplLl9kYXRhLkN1cnJlbnRGaWx0ZXJWYWx1ZT1rOwplLl9kYXRhLkFuZEN1cnJlbnRGaWx0ZXJWYWx1ZT1wOwppZihoPT0iTm9GaWx0ZXIiKXtlLl9kYXRhLkN1cnJlbnRGaWx0ZXJWYWx1ZT0iIjsKfWlmKG09PSJOb0ZpbHRlciIpe2UuX2RhdGEuQW5kQ3VycmVudEZpbHRlclZhbHVlPSIiOwp9aWYoaD09Ik5vRmlsdGVyInx8bT09Ik5vRmlsdGVyIil7dmFyIGw9ai5fb3duZXIuX2dldEhlYWRlckNvbnRleHRNZW51KCk7CnRoaXMuX3VwZGF0ZUZpbHRlclZhbHVlc0ZvckhDTWVudShsLkZpbHRlckNvbnRyb2xzSURzSGVscGVyKTsKaWYoaD09Ik5vRmlsdGVyIil7ai5fdXBkYXRlRmlsdGVyQ29udHJvbFZhbHVlKCIiLHRoaXMuX2RhdGEuVW5pcXVlTmFtZSwiTm9GaWx0ZXIiKTsKfX1qLmZpcmVDb21tYW5kKCJIZWFkZXJDb250ZXh0TWVudUZpbHRlciIsYSk7Cn1lbHNle2ouZmlyZUNvbW1hbmQoIkhlYWRlckNvbnRleHRNZW51RmlsdGVyIixhKTsKfXJldHVybiBmYWxzZTsKfSxfY2xlYXJGaWx0ZXJCdXR0b25DbGlja0hhbmRsZXI6ZnVuY3Rpb24oYil7dmFyIGM9dGhpcy5fb3duZXIuX293bmVyLl9nZXRIZWFkZXJDb250ZXh0TWVudSgpOwp2YXIgZT10aGlzLl9kYXRhLlVuaXF1ZU5hbWUrInw/Tm9GaWx0ZXJ8fD9Ob0ZpbHRlcnwiOwpiLnByZXZlbnREZWZhdWx0KCk7CnZhciBmPXRoaXMuX293bmVyOwppZigkZmluZChmLmdldF9vd25lcigpLmdldF9pZCgpKS5fZGF0YUJpbmRpbmdXaXRoU2VsZWN0TWV0aG9kKXt2YXIgYz1mLl9vd25lci5fZ2V0SGVhZGVyQ29udGV4dE1lbnUoKTsKdmFyIGE9dGhpczsKYS5fZGF0YS5DdXJyZW50RmlsdGVyRnVuY3Rpb249Ik5vRmlsdGVyIjsKYS5fZGF0YS5BbmRDdXJyZW50RmlsdGVyRnVuY3Rpb249Ik5vRmlsdGVyIjsKYS5fZGF0YS5DdXJyZW50RmlsdGVyVmFsdWU9IiI7CmEuX2RhdGEuQW5kQ3VycmVudEZpbHRlclZhbHVlPSIiOwpmLl91cGRhdGVGaWx0ZXJDb250cm9sVmFsdWUoIiIsYS5fZGF0YS5VbmlxdWVOYW1lLCJOb0ZpbHRlciIpOwp0aGlzLnNldF9maWx0ZXJGdW5jdGlvbigiTm9GaWx0ZXIiKTsKZi5fZmlsdGVyRXhwcmVzc2lvbnMuY2xlYXIoKTsKdmFyIGQ9Yy5maW5kSXRlbUJ5VmFsdWUoIkZpbHRlck1lbnVDb250YWluZXIiKTsKdGhpcy5fdXBkYXRlRGlzcGxheUhDTWVudUZpbHRlckNvbnRyb2xzKGQuZ2V0X2VsZW1lbnQoKSxjLkZpbHRlckNvbnRyb2xzSURzSGVscGVyKTsKdGhpcy5fdXBkYXRlRmlsdGVyRnVuY3Rpb25zRm9ySENNZW51KGQuZ2V0X2VsZW1lbnQoKSxjLkZpbHRlckNvbnRyb2xzSURzSGVscGVyKTsKdGhpcy5fdXBkYXRlRmlsdGVyVmFsdWVzRm9ySENNZW51KGMuRmlsdGVyQ29udHJvbHNJRHNIZWxwZXIpOwp9Zi5maXJlQ29tbWFuZCgiSGVhZGVyQ29udGV4dE1lbnVGaWx0ZXIiLGUpOwpyZXR1cm4gZmFsc2U7Cn0sX2NoZWNrQm94Q2xpY2tIYW5kbGVyOmZ1bmN0aW9uKGEpe3ZhciBiPSRmaW5kKHRoaXMuX2NvbHVtbi5nZXRfb3duZXIoKS5nZXRfaWQoKSk7CmlmKCFiKXtyZXR1cm47Cn1pZighdGhpcy5jaGVja2VkKXtiLmhpZGVDb2x1bW4odGhpcy5faW5kZXgpOwp9ZWxzZXtiLnNob3dDb2x1bW4odGhpcy5faW5kZXgpOwp9dGhpcy5fY29sdW1uLl9oYW5kbGVDb2x1bW5zQ2hlY2tib3hlc1N0YXRlKCk7Cn0sX2hhbmRsZUNvbHVtbnNDaGVja2JveGVzU3RhdGU6ZnVuY3Rpb24oKXt2YXIgZz10aGlzLmdldF9vd25lcigpLmdldF9vd25lcigpOwppZihnKXt2YXIgYz1nLmdldF9oZWFkZXJNZW51KCkuZmluZEl0ZW1CeVZhbHVlKCJDb2x1bW5zQ29udGFpbmVyIik7CmlmKCFjKXtyZXR1cm47Cn12YXIgYj1jLmdldF9pdGVtcygpOwppZighYil7cmV0dXJuOwp9dmFyIGQ9bnVsbDsKdmFyIGE9bnVsbDsKdmFyIGY7CmZvcih2YXIgZT0wOwpsZW49Yi5nZXRfY291bnQoKSxlPGxlbjsKZSsrKXtkPWIuZ2V0SXRlbShlKTsKaWYoIWQuZ2V0X3Zpc2libGUoKSl7Y29udGludWU7Cn1hPWQuZ2V0X2VsZW1lbnQoKS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaW5wdXQiKVswXTsKYS5yZW1vdmVBdHRyaWJ1dGUoImRpc2FibGVkIik7CmlmKGEuY2hlY2tlZCl7aWYoZil7Zj1udWxsOwpicmVhazsKfWY9YTsKfX1pZihmKXtmLmRpc2FibGVkPSJkaXNhYmxlZCI7Cn19fSxfb25Db250ZXh0TWVudUl0ZW1DbG9zaW5nOmZ1bmN0aW9uKGEsYil7aWYoYi5nZXRfaXRlbSgpLmdldF92YWx1ZSgpPT0iRmlsdGVyTWVudVBhcmVudCImJmIuZ2V0X2l0ZW0oKS5fcG9wVXBPcGVuZWQpe2Iuc2V0X2NhbmNlbCh0cnVlKTsKfX0sX29uQ29udGV4dE1lbnVJdGVtQ2xpY2tpbmc6ZnVuY3Rpb24oYSxkKXt2YXIgYz1kLmdldF9pdGVtKCk7CmlmKGMuZ2V0X3ZhbHVlKCk9PSJGaWx0ZXJNZW51Q29udGFpbmVyInx8Yy5nZXRfdmFsdWUoKT09IkFnZ3JlZ2F0ZXNDb250YWluZXIifHwoVGVsZXJpay5XZWIuVUkuUmFkTWVudUl0ZW0uaXNJbnN0YW5jZU9mVHlwZShjLmdldF9wYXJlbnQoKSkmJmMuZ2V0X3BhcmVudCgpLmdldF92YWx1ZSgpPT0iQ29sdW1uc0NvbnRhaW5lciIpKXtkLnNldF9jYW5jZWwodHJ1ZSk7Cn1lbHNle2lmKGMuZ2V0X3ZhbHVlKCk9PSJTb3J0QXNjInx8Yy5nZXRfdmFsdWUoKT09IlNvcnREZXNjInx8Yy5nZXRfdmFsdWUoKT09IlNvcnROb25lIil7YS50cmFja0NoYW5nZXMoKTsKdmFyIGI9Yy5fY29sdW1uLl9kYXRhLkRhdGFGaWVsZDsKaWYoYy5fY29sdW1uLl9kYXRhLkRhdGFUZXh0RmllbGQpe2I9Yy5fY29sdW1uLl9kYXRhLkRhdGFUZXh0RmllbGQ7Cn1lbHNle2lmKGMuX2NvbHVtbi5fZGF0YS5EYXRhQWx0ZXJuYXRlVGV4dEZpZWxkKXtiPWMuX2NvbHVtbi5fZGF0YS5EYXRhQWx0ZXJuYXRlVGV4dEZpZWxkOwp9fWMuZ2V0X2F0dHJpYnV0ZXMoKS5zZXRBdHRyaWJ1dGUoIkNvbHVtbk5hbWUiLGIpOwpjLmdldF9hdHRyaWJ1dGVzKCkuc2V0QXR0cmlidXRlKCJUYWJsZUlEIixjLl9jb2x1bW4uZ2V0X293bmVyKCkuX2RhdGEuVW5pcXVlSUQpOwphLmNvbW1pdENoYW5nZXMoKTsKfWVsc2V7aWYoYy5nZXRfdmFsdWUoKT09Ikdyb3VwQnkiKXtjLl9jb2x1bW4uZ2V0X293bmVyKCkuZ3JvdXBDb2x1bW4oYy5fY29sdW1uLmdldF91bmlxdWVOYW1lKCkpOwpkLnNldF9jYW5jZWwodHJ1ZSk7Cn1lbHNle2lmKGMuZ2V0X3ZhbHVlKCk9PSJVbkdyb3VwQnkiKXtjLl9jb2x1bW4uZ2V0X293bmVyKCkudW5ncm91cENvbHVtbihjLl9jb2x1bW4uZ2V0X3VuaXF1ZU5hbWUoKSk7CmQuc2V0X2NhbmNlbCh0cnVlKTsKfWVsc2V7aWYoYy5nZXRfdmFsdWUoKT09IkJlc3RGaXQiKXtjLl9jb2x1bW4ucmVzaXplVG9GaXQoKTsKfWVsc2V7aWYoYy5nZXRfaXNTZXBhcmF0b3IoKSl7ZC5zZXRfY2FuY2VsKHRydWUpOwp9ZWxzZXtpZihjLmdldF9wYXJlbnQoKSE9bnVsbCYmYy5nZXRfcGFyZW50KCkuZ2V0X3ZhbHVlJiZjLmdldF9wYXJlbnQoKS5nZXRfdmFsdWUoKT09IkFnZ3JlZ2F0ZXNDb250YWluZXIiKXtjLl9jb2x1bW4uZ2V0X293bmVyKCkuZmlyZUNvbW1hbmQoIlNldENvbHVtbkFnZ3JlZ2F0ZSIsU3RyaW5nLmZvcm1hdCgiezB9fHsxfXx7Mn0iLGMuZ2V0X3ZhbHVlKCksYy5fY29sdW1uLmdldF9vd25lcigpLl9kYXRhLlVuaXF1ZUlELGMuX2NvbHVtbi5nZXRfdW5pcXVlTmFtZSgpKSk7Cn19fX19fX19LF9vbkNvbnRleHRNZW51SGlkZGVuOmZ1bmN0aW9uKGcsZCl7dmFyIGY9ZzsKaWYodGhpcy5fY2hlY2tib3hlcyl7Zm9yKHZhciBhPTAsYz10aGlzLl9jaGVja2JveGVzLmxlbmd0aDsKYTxjOwphKyspeyRyZW1vdmVIYW5kbGVyKHRoaXMuX2NoZWNrYm94ZXNbYV0sImNsaWNrIix0aGlzLl9jaGVja0JveENsaWNrSGFuZGxlcik7CnRoaXMuX2NoZWNrYm94ZXNbYV0uX2NvbHVtbj1udWxsOwp0aGlzLl9jaGVja2JveGVzW2FdLl9pbmRleD1udWxsOwp9fWlmKHRoaXMuX29uQ29udGV4dE1lbnVJdGVtQ2xpY2tpbmdEZWxlZ2F0ZSl7Zy5yZW1vdmVfaXRlbUNsaWNraW5nKHRoaXMuX29uQ29udGV4dE1lbnVJdGVtQ2xpY2tpbmdEZWxlZ2F0ZSk7CnRoaXMuX29uQ29udGV4dE1lbnVJdGVtQ2xpY2tpbmdEZWxlZ2F0ZT1udWxsOwp9aWYodGhpcy5fb25Db250ZXh0TWVudUl0ZW1DbG9zaW5nRGVsZWdhdGUpe2cucmVtb3ZlX2l0ZW1DbG9zaW5nKHRoaXMuX29uQ29udGV4dE1lbnVJdGVtQ2xvc2luZ0RlbGVnYXRlKTsKdGhpcy5fb25Db250ZXh0TWVudUl0ZW1DbG9zaW5nRGVsZWdhdGU9bnVsbDsKfWlmKHRoaXMuX29uQ29udGV4dE1lbnVIaWRkZW5EZWxlZ2F0ZSl7Zy5yZW1vdmVfaGlkZGVuKHRoaXMuX29uQ29udGV4dE1lbnVIaWRkZW5EZWxlZ2F0ZSk7CnRoaXMuX29uQ29udGV4dE1lbnVIaWRkZW5EZWxlZ2F0ZT1udWxsOwp9aWYodGhpcy5fZmlsdGVyQnV0dG9uQ2xpY2tEZWxlZ2F0ZSl7dmFyIGU9JHRlbGVyaWsuZmluZEVsZW1lbnQoZi5maW5kSXRlbUJ5VmFsdWUoIkZpbHRlck1lbnVDb250YWluZXIiKS5nZXRfZWxlbWVudCgpLCJIQ0ZNRmlsdGVyQnV0dG9uIik7CiRyZW1vdmVIYW5kbGVyKGUsImNsaWNrIix0aGlzLl9maWx0ZXJCdXR0b25DbGlja0RlbGVnYXRlKTsKdGhpcy5fZmlsdGVyQnV0dG9uQ2xpY2tEZWxlZ2F0ZT1udWxsOwp9aWYodGhpcy5fY2xlYXJGaWx0ZXJCdXR0b25DbGlja0RlbGVnYXRlKXt2YXIgYj0kdGVsZXJpay5maW5kRWxlbWVudChmLmZpbmRJdGVtQnlWYWx1ZSgiRmlsdGVyTWVudUNvbnRhaW5lciIpLmdldF9lbGVtZW50KCksIkhDRk1DbGVhckZpbHRlckJ1dHRvbiIpOwokcmVtb3ZlSGFuZGxlcihiLCJjbGljayIsdGhpcy5fY2xlYXJGaWx0ZXJCdXR0b25DbGlja0RlbGVnYXRlKTsKdGhpcy5fY2xlYXJGaWx0ZXJCdXR0b25DbGlja0RlbGVnYXRlPW51bGw7Cn10aGlzLl9jaGVja2JveGVzPVtdOwp9LF9vbkNvbnRleHRNZW51OmZ1bmN0aW9uKGEpe2lmKCR0ZWxlcmlrLmlzT3BlcmEmJmEuYnV0dG9uIT0yKXtyZXR1cm47Cn10aGlzLl9vd25lci5fb3duZXIucmFpc2VfY29sdW1uQ29udGV4dE1lbnUobmV3IFRlbGVyaWsuV2ViLlVJLkdyaWRDb2x1bW5FdmVudEFyZ3ModGhpcyxhKSk7CmlmKHRoaXMuX293bmVyLl9vd25lci5nZXRfZXZlbnRzKCkuZ2V0SGFuZGxlcigiY29sdW1uQ29udGV4dE1lbnUiKXx8dGhpcy5fb3duZXIuX2RhdGEuZW5hYmxlSGVhZGVyQ29udGV4dE1lbnUpe3RoaXMuX2luaXRIZWFkZXJDb250ZXh0TWVudShhKTsKaWYoYS5wcmV2ZW50RGVmYXVsdCl7YS5wcmV2ZW50RGVmYXVsdCgpOwp9ZWxzZXthLnJldHVyblZhbHVlPWZhbHNlOwpyZXR1cm4gZmFsc2U7Cn19fSxyZXNpemVUb0ZpdDpmdW5jdGlvbihiKXtpZighdGhpcy5fY2FuUmVzaXplVG9GaXQoKSl7cmV0dXJuOwp9dmFyIGM9dGhpcy5fZ2V0SXRlbUNvbnRhaW5lclRhYmxlVmlldygpOwp2YXIgYT1BcnJheS5pbmRleE9mKGMuZ2V0X2NvbHVtbnMoKSx0aGlzKTsKaWYodGhpcy5fY2FjaGVkQmVzdEZpdFNpemUpe3RoaXMuZ2V0X293bmVyKCkucmVzaXplQ29sdW1uKGEsdGhpcy5fY2FjaGVkQmVzdEZpdFNpemUpOwpyZXR1cm47Cn12YXIgZD10aGlzLl9jcmVhdGVGaXRUZXN0Q29udGFpbmVyKGMuZ2V0X2VsZW1lbnQoKSxiKTsKdGhpcy5fY2FjaGVCZXN0Rml0U2l6ZXMoZCk7CnRoaXMuX3JlbW92ZUZpdFRlc3RDb250YWluZXIoYy5nZXRfZWxlbWVudCgpKTsKdGhpcy5nZXRfb3duZXIoKS5yZXNpemVDb2x1bW4oYSx0aGlzLl9jYWNoZWRCZXN0Rml0U2l6ZXx8dGhpcy5nZXRfZWxlbWVudCgpLm9mZnNldFdpZHRoKTsKfSxfaXNNb3VzZU92ZXJSZXNpemVIYW5kbGU6ZnVuY3Rpb24oYSl7dmFyIGI9VGVsZXJpay5XZWIuVUkuR3JpZC5HZXRFdmVudFBvc1goYSk7CnZhciBjPVRlbGVyaWsuV2ViLlVJLkdyaWQuRmluZFBvc1godGhpcy5nZXRfZWxlbWVudCgpKTsKdmFyIGQ9Yyt0aGlzLmdldF9lbGVtZW50KCkub2Zmc2V0V2lkdGg7CmlmKChiPj1kLXRoaXMuX3Jlc2l6ZVRvbGVyYW5jZSkmJihiPD1kK3RoaXMuX3Jlc2l6ZVRvbGVyYW5jZSkpe3JldHVybiB0cnVlOwp9cmV0dXJuIGZhbHNlOwp9LF9pc1RvdWNoUG9pbnRPdmVyUmVzaXplSGFuZGxlOmZ1bmN0aW9uKGEpe3ZhciBiPSR0ZWxlcmlrLmdldFRvdWNoRXZlbnRMb2NhdGlvbihhKS54Owp2YXIgYz1UZWxlcmlrLldlYi5VSS5HcmlkLkZpbmRQb3NYKHRoaXMuZ2V0X2VsZW1lbnQoKSk7CnZhciBkPWMrdGhpcy5nZXRfZWxlbWVudCgpLm9mZnNldFdpZHRoOwppZihiPj1kLXRoaXMuX3Jlc2l6ZVRvbGVyYW5jZSl7cmV0dXJuIHRydWU7Cn1yZXR1cm4gZmFsc2U7Cn0sX2NhblJlc2l6ZVRvRml0OmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5nZXRfdmlzaWJsZSgpJiYodGhpcy5fZGF0YS5EaXNwbGF5PT1udWxsfHx0aGlzLl9kYXRhLkRpc3BsYXkpJiYodGhpcy5EaXNwbGF5PT1udWxsfHx0aGlzLkRpc3BsYXkpOwp2YXIgYT10aGlzLmdldF9vd25lcigpLmdldF9vd25lcigpLkNsaWVudFNldHRpbmdzLlJlc2l6aW5nOwpyZXR1cm4gYiYmdGhpcy5nZXRfcmVzaXphYmxlKCkmJmEmJmEuQWxsb3dDb2x1bW5SZXNpemUmJmEuQWxsb3dSZXNpemVUb0ZpdDsKfSxfZ2V0SXRlbUNvbnRhaW5lclRhYmxlVmlldzpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0X293bmVyKCk7CmlmKGEuZ2V0X2lkKCkuZW5kc1dpdGgoIl9IZWFkZXIiKSl7cmV0dXJuICRmaW5kKGEuZ2V0X293bmVyKCkuZ2V0X2lkKCkpLmdldF9tYXN0ZXJUYWJsZVZpZXcoKTsKfXJldHVybiBhOwp9LF9jYWNoZUJlc3RGaXRTaXplczpmdW5jdGlvbihhKXt2YXIgZj1hLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0ciIpWzBdOwppZighZil7cmV0dXJuOwp9dmFyIGM9dGhpcy5nZXRfb3duZXIoKS5nZXRfY29sdW1ucygpOwpmb3IodmFyIGU9MCxiPWMubGVuZ3RoOwplPGI7CmUrKyl7aWYoY1tlXS5fY2FuUmVzaXplVG9GaXQoKSl7dmFyIGQ9Zi5jZWxsc1tlXTsKaWYoZCl7Y1tlXS5fY2FjaGVkQmVzdEZpdFNpemU9ZC5vZmZzZXRXaWR0aDsKaWYoKCR0ZWxlcmlrLmlzSUUmJlN5cy5Ccm93c2VyLnZlcnNpb24+PTkpfHwoJHRlbGVyaWsuaXNGaXJlZm94JiZTeXMuQnJvd3Nlci52ZXJzaW9uPj02KSl7Y1tlXS5fY2FjaGVkQmVzdEZpdFNpemUrKzsKfX19fX0sX2NyZWF0ZUZpdFRlc3RDb250YWluZXI6ZnVuY3Rpb24oaixtKXt2YXIgcj1qLnBhcmVudE5vZGU7CnZhciBhPXIuaWQrIl9GaXRUZXN0Q29udGFpbmVyIjsKdmFyIG89YSsiX0ZpdFRlc3RUYWJsZSI7CnZhciBxPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTsKdmFyIGw9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CnEuYXBwZW5kQ2hpbGQobCk7CmwuaWQ9YTsKbC5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiOwpsLnN0eWxlLnZpc2liaWxpdHk9ImhpZGRlbiI7CmlmKGoudEJvZGllcy5sZW5ndGg+MCl7bC5pbm5lckhUTUw9Ijx0YWJsZSBjbGFzcz0nIitqLmNsYXNzTmFtZSsiJyBjZWxsc3BhY2luZz0nMCcgYm9yZGVyPScwJyBzdHlsZT0nIitqLnN0eWxlLmNzc1RleHQrIjt0YWJsZS1sYXlvdXQ6YXV0bzt3aGl0ZS1zcGFjZTpub3dyYXA7d2lkdGg6YXV0bzsnPjx0Ym9keT4iK2oudEJvZGllc1tqLnRCb2RpZXMubGVuZ3RoLTFdLmlubmVySFRNTCsiPC90Ym9keT48L3RhYmxlPiI7Cn12YXIgbj1sLmNoaWxkTm9kZXNbMF07Cm4uaWQ9bzsKdmFyIGQ9W107CmZvcih2YXIgcD0wLGg9bi5yb3dzLmxlbmd0aDsKcDxoOwpwKyspe3ZhciBrPW4ucm93c1twXTsKaWYoIShrLmlkJiZrLmlkLmluZGV4T2Yoai5pZCk+LTEpKXtkLnB1c2goayk7Cn19dmFyIHM9ZC5wb3AoKTsKd2hpbGUocyl7bi5kZWxldGVSb3cocy5yb3dJbmRleCk7CnM9ZC5wb3AoKTsKfWlmKCFtKXt2YXIgZT1uLmNyZWF0ZVRIZWFkKCk7CnZhciBiPWUuaW5zZXJ0Um93KC0xKTsKdmFyIGM9dGhpcy5nZXRfZWxlbWVudCgpLnBhcmVudE5vZGU7CnZhciBmPWMuY2VsbHM7CmZvcih2YXIgcD0wLGg9Zi5sZW5ndGg7CnA8aDsKcCsrKXt2YXIgZz1iLmluc2VydENlbGwocCk7CmcuY2xhc3NOYW1lPWZbcF0uY2xhc3NOYW1lOwpnLnN0eWxlLmNzc1RleHQ9ZltwXS5zdHlsZS5jc3NUZXh0OwpnLnN0eWxlLndpZHRoPSJhdXRvIjsKaWYoJHRlbGVyaWsuaXNJRSYmU3lzLkJyb3dzZXIudmVyc2lvbjw9Nyl7Zy5pbm5lckhUTUw9Ijxub2JyPiIrZltwXS5pbm5lckhUTUwrIjwvbm9icj4iOwp9ZWxzZXtnLmlubmVySFRNTD1mW3BdLmlubmVySFRNTDsKfX19ci5hcHBlbmRDaGlsZChxLmNoaWxkTm9kZXNbMF0pOwpyZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobyk7Cn0sX3JlbW92ZUZpdFRlc3RDb250YWluZXI6ZnVuY3Rpb24oYSl7dmFyIGI9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYS5wYXJlbnROb2RlLmlkKyJfRml0VGVzdENvbnRhaW5lciIpOwppZihiKXtiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYik7Cn19LF9jbGVhckJlc3RGaXRDYWNoZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0X293bmVyKCkuZ2V0X2NvbHVtbnMoKTsKZm9yKHZhciBjPTAsYj1hLmxlbmd0aDsKYzxiOwpjKyspe2FbY10uX2NhY2hlZEJlc3RGaXRTaXplPW51bGw7Cn19LF9vbkNsaWNrOmZ1bmN0aW9uKGEpe3RoaXMuX293bmVyLl9vd25lci5yYWlzZV9jb2x1bW5DbGljayhuZXcgVGVsZXJpay5XZWIuVUkuR3JpZENvbHVtbkV2ZW50QXJncyh0aGlzLGEpKTsKfSxfb25EYmxDbGljazpmdW5jdGlvbihhKXt0aGlzLl9vd25lci5fb3duZXIucmFpc2VfY29sdW1uRGJsQ2xpY2sobmV3IFRlbGVyaWsuV2ViLlVJLkdyaWRDb2x1bW5FdmVudEFyZ3ModGhpcyxhKSk7CmlmKHRoaXMuX2lzTW91c2VPdmVyUmVzaXplSGFuZGxlKGEpKXt0aGlzLnJlc2l6ZVRvRml0KCk7Cn19LF9vbk1vdXNlT3ZlcjpmdW5jdGlvbihhKXt0aGlzLl9vd25lci5fb3duZXIucmFpc2VfY29sdW1uTW91c2VPdmVyKG5ldyBUZWxlcmlrLldlYi5VSS5HcmlkQ29sdW1uRXZlbnRBcmdzKHRoaXMsYSkpOwppZih0aGlzLl9vd25lci5fb3duZXIuU2tpbiE9IiIpe1N5cy5VSS5Eb21FbGVtZW50LmFkZENzc0NsYXNzKHRoaXMuZ2V0X2VsZW1lbnQoKSwicmdIZWFkZXJPdmVyIik7Cn19LF9vbk1vdXNlT3V0OmZ1bmN0aW9uKGEpe3RoaXMuX293bmVyLl9vd25lci5yYWlzZV9jb2x1bW5Nb3VzZU91dChuZXcgVGVsZXJpay5XZWIuVUkuR3JpZENvbHVtbkV2ZW50QXJncyh0aGlzLGEpKTsKaWYodGhpcy5fb3duZXIuX293bmVyLlNraW4hPSIiKXtTeXMuVUkuRG9tRWxlbWVudC5yZW1vdmVDc3NDbGFzcyh0aGlzLmdldF9lbGVtZW50KCksInJnSGVhZGVyT3ZlciIpOwp9fSxnZXRfcmVzaXphYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGEuUmVzaXphYmxlOwp9LHNldF9yZXNpemFibGU6ZnVuY3Rpb24oYSl7aWYodGhpcy5fZGF0YS5SZXNpemFibGUhPWEpe3RoaXMuX2RhdGEuUmVzaXphYmxlPWE7Cn19LGdldF9yZW9yZGVyYWJsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kYXRhLlJlb3JkZXJhYmxlOwp9LGdldF9jb2x1bW5Hcm91cE5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YS5Db2x1bW5Hcm91cE5hbWU7Cn0sZ2V0X3NlbGVjdGFibGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YS5TZWxlY3RhYmxlOwp9LHNldF9yZW9yZGVyYWJsZTpmdW5jdGlvbihhKXtpZih0aGlzLl9kYXRhLlJlb3JkZXJhYmxlIT1hKXt0aGlzLl9kYXRhLlJlb3JkZXJhYmxlPWE7Cn19LGdldF91bmlxdWVOYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGEuVW5pcXVlTmFtZTsKfSxnZXRfZGF0YUZpZWxkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGEuRGF0YUZpZWxkOwp9LGdldF9yZWFkT25seTpmdW5jdGlvbigpe3JldHVybih0eXBlb2YodGhpcy5fZGF0YS5SZWFkT25seSkhPSJ1bmRlZmluZWQiKT90cnVlOmZhbHNlOwp9LGdldF9kYXRhVHlwZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kYXRhLkRhdGFUeXBlTmFtZTsKfSxnZXRfZmlsdGVyRnVuY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YS5DdXJyZW50RmlsdGVyRnVuY3Rpb25OYW1lOwp9LHNldF9maWx0ZXJGdW5jdGlvbjpmdW5jdGlvbihhKXtpZih0aGlzLl9kYXRhLkN1cnJlbnRGaWx0ZXJGdW5jdGlvbk5hbWUhPWEpe3RoaXMuX2RhdGEuQ3VycmVudEZpbHRlckZ1bmN0aW9uTmFtZT1hOwp9fSxnZXRfZmlsdGVyRGVsYXk6ZnVuY3Rpb24oKXtyZXR1cm4odHlwZW9mKHRoaXMuX2RhdGEuRmlsdGVyRGVsYXkpPT0idW5kZWZpbmVkIik/bnVsbDp0aGlzLl9kYXRhLkZpbHRlckRlbGF5Owp9LHNldF9maWx0ZXJEZWxheTpmdW5jdGlvbihhKXtpZih0aGlzLl9kYXRhLkZpbHRlckRlbGF5IT1hKXt0aGlzLl9kYXRhLkZpbHRlckRlbGF5PWE7Cn19fTsKVGVsZXJpay5XZWIuVUkuR3JpZENvbHVtbi5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5HcmlkQ29sdW1uIixTeXMuVUkuQ29udHJvbCk7ClRlbGVyaWsuV2ViLlVJLkdyaWRDb2x1bW5FdmVudEFyZ3M9ZnVuY3Rpb24oYixhKXtUZWxlcmlrLldlYi5VSS5HcmlkQ29sdW1uRXZlbnRBcmdzLmluaXRpYWxpemVCYXNlKHRoaXMpOwp0aGlzLl9ncmlkQ29sdW1uPWI7CnRoaXMuX2RvbUV2ZW50PWE7Cn07ClRlbGVyaWsuV2ViLlVJLkdyaWRDb2x1bW5FdmVudEFyZ3MucHJvdG90eXBlPXtnZXRfZ3JpZENvbHVtbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ncmlkQ29sdW1uOwp9LGdldF9kb21FdmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kb21FdmVudDsKfX07ClRlbGVyaWsuV2ViLlVJLkdyaWRDb2x1bW5FdmVudEFyZ3MucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuR3JpZENvbHVtbkV2ZW50QXJncyIsU3lzLkV2ZW50QXJncyk7ClRlbGVyaWsuV2ViLlVJLkdyaWRDb2x1bW5DYW5jZWxFdmVudEFyZ3M9ZnVuY3Rpb24oYixhKXtUZWxlcmlrLldlYi5VSS5HcmlkQ29sdW1uQ2FuY2VsRXZlbnRBcmdzLmluaXRpYWxpemVCYXNlKHRoaXMpOwp0aGlzLl9ncmlkQ29sdW1uPWI7CnRoaXMuX2RvbUV2ZW50PWE7Cn07ClRlbGVyaWsuV2ViLlVJLkdyaWRDb2x1bW5DYW5jZWxFdmVudEFyZ3MucHJvdG90eXBlPXtnZXRfZ3JpZENvbHVtbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ncmlkQ29sdW1uOwp9LGdldF9kb21FdmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kb21FdmVudDsKfX07ClRlbGVyaWsuV2ViLlVJLkdyaWRDb2x1bW5DYW5jZWxFdmVudEFyZ3MucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuR3JpZENvbHVtbkNhbmNlbEV2ZW50QXJncyIsU3lzLkNhbmNlbEV2ZW50QXJncyk7ClRlbGVyaWsuV2ViLlVJLkdyaWRIZWFkZXJNZW51Q2FuY2VsRXZlbnRBcmdzPWZ1bmN0aW9uKGEsYyxiKXtUZWxlcmlrLldlYi5VSS5HcmlkSGVhZGVyTWVudUNhbmNlbEV2ZW50QXJncy5pbml0aWFsaXplQmFzZSh0aGlzLFthLGNdKTsKdGhpcy5fbWVudT1iOwp9OwpUZWxlcmlrLldlYi5VSS5HcmlkSGVhZGVyTWVudUNhbmNlbEV2ZW50QXJncy5wcm90b3R5cGU9e2dldF9tZW51OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21lbnU7Cn19OwpUZWxlcmlrLldlYi5VSS5HcmlkSGVhZGVyTWVudUNhbmNlbEV2ZW50QXJncy5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5HcmlkSGVhZGVyTWVudUNhbmNlbEV2ZW50QXJncyIsVGVsZXJpay5XZWIuVUkuR3JpZENvbHVtbkNhbmNlbEV2ZW50QXJncyk7ClR5cGUucmVnaXN0ZXJOYW1lc3BhY2UoIlRlbGVyaWsuV2ViLlVJIik7ClRlbGVyaWsuV2ViLlVJLkdyaWRDb2x1bW5BbmltYXRpb249ZnVuY3Rpb24oKXtUZWxlcmlrLldlYi5VSS5HcmlkQ29sdW1uQW5pbWF0aW9uLmluaXRpYWxpemVCYXNlKHRoaXMpOwp0aGlzLiQ9bnVsbDsKdGhpcy5fb3duZXI9e307CnRoaXMuX21vdXNlTW92ZURlbGVnYXRlPW51bGw7CnRoaXMuX21vdWVVcERlbGVnYXRlPW51bGw7CnRoaXMuXyRhbmltYXRlZENvbnRhaW5lcj1udWxsOwp0aGlzLl8kaW5uZXJDb250YWluZXI9bnVsbDsKdGhpcy5fYW5pbWF0ZWRIZWFkZXJPZmZzZXQ9MDsKdGhpcy5fZHJhZ1RvR3JvdXBDb2x1bW49bnVsbDsKdGhpcy5fbmV4dENlbGxQb3NpdGlvbj0wOwp0aGlzLl9hbmltYXRlZEhlYWRlckNlbGxzPVtdOwp0aGlzLl9yZXZlcnRQZW5kaW5nQ2VsbHM9W107CnRoaXMuX2luaXRpYWxEcmFnZ2VkSGVhZGVyQ2VsbEluZGV4PS0xOwp0aGlzLl9kcmFnZ2VkSGVhZGVyQ2VsbEluZGV4PS0xOwp0aGlzLl9yZW9yZGVyRHVyYXRpb249MzAwOwp0aGlzLl9yZXZlcnREdXJhdGlvbj0zMDA7CnRoaXMuX2FsbG93Q29sdW1uc1Jlb3JkZXJBbmltYXRpb249ZmFsc2U7CnRoaXMuX2FsbG93Q29sdW1uUmV2ZXJ0QW5pbWF0aW9uPWZhbHNlOwp0aGlzLl9hbGxvd0RyYWdUb0dyb3VwPWZhbHNlOwp0aGlzLl9hbGxvd0ZyZWVNb3ZlPWZhbHNlOwp9OwpUZWxlcmlrLldlYi5VSS5HcmlkQ29sdW1uQW5pbWF0aW9uLnByb3RvdHlwZT17aW5pdGlhbGl6ZTpmdW5jdGlvbigpe1RlbGVyaWsuV2ViLlVJLkdyaWRDb2x1bW5BbmltYXRpb24uY2FsbEJhc2VNZXRob2QodGhpcywiaW5pdGlhbGl6ZSIpOwp2YXIgYT10aGlzLmdldF9vd25lcigpLkNsaWVudFNldHRpbmdzOwp0aGlzLl9hbGxvd0NvbHVtbnNSZW9yZGVyQW5pbWF0aW9uPWEuQW5pbWF0aW9uLkFsbG93Q29sdW1uUmVvcmRlckFuaW1hdGlvbiYmYS5BbGxvd0NvbHVtbnNSZW9yZGVyJiZhLkNvbHVtbnNSZW9yZGVyTWV0aG9kPT0xOwp0aGlzLl9hbGxvd0NvbHVtblJldmVydEFuaW1hdGlvbj1hLkFuaW1hdGlvbi5BbGxvd0NvbHVtblJldmVydEFuaW1hdGlvbjsKdGhpcy5fYWxsb3dEcmFnVG9Hcm91cD1hLkFsbG93RHJhZ1RvR3JvdXA7CnRoaXMuX2FsbG93RnJlZU1vdmU9dGhpcy5fYWxsb3dEcmFnVG9Hcm91cDsKdGhpcy5fbW91c2VNb3ZlRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9tb3VzZU1vdmUpOwp0aGlzLl9tb3VzZVVwRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9tb3VzZVVwKTsKdGhpcy4kPSR0ZWxlcmlrLiQ7CihmdW5jdGlvbihiKXtiLmZuLm91dGVySHRtbD1mdW5jdGlvbihjKXtpZighdGhpc1swXSl7cmV0dXJuIG51bGw7Cn12YXIgZD1jP3RoaXMuZXEoMCkuY2xvbmUoKTp0aGlzLmVxKDApLmNsb25lKCkuZW1wdHkoKTsKcmV0dXJuIGIoIjxwPiIpLmFwcGVuZChkKS5odG1sKCk7Cn07Cn0pKHRoaXMuJCk7Cn0sX21vdXNlRG93bjpmdW5jdGlvbihhLGMpe3ZhciBiPWEudGFyZ2V0fHxhLnNyY0VsZW1lbnQ7CmlmKGIhPT1jLmdldF9lbGVtZW50KCkpe3JldHVybjsKfXRoaXMuX2RyYWdUb0dyb3VwQ29sdW1uPWM7CmlmKHRoaXMuX2FsbG93Q29sdW1uc1Jlb3JkZXJBbmltYXRpb24pe3RoaXMuX2NyZWF0ZUFuaW1hdGVkQ29udGFpbmVyKGEudGFyZ2V0KTsKdGhpcy4kKGRvY3VtZW50KS5tb3VzZW1vdmUodGhpcy5fbW91c2VNb3ZlRGVsZWdhdGUpOwp9ZWxzZXt0aGlzLl9jcmVhdGVEcmFnZ2VkSGVhZGVyQ2VsbChhKTsKfXRoaXMuJChkb2N1bWVudCkubW91c2V1cCh0aGlzLl9tb3VzZVVwRGVsZWdhdGUpOwpUZWxlcmlrLldlYi5VSS5HcmlkLkNsZWFyRG9jdW1lbnRFdmVudHMoKTsKfSxfY3JlYXRlRHJhZ2dlZEhlYWRlckNlbGw6ZnVuY3Rpb24oYSl7VGVsZXJpay5XZWIuVUkuR3JpZC5DcmVhdGVEcmFnRHJvcChhLHRoaXMuX2RyYWdUb0dyb3VwQ29sdW1uLHRydWUpOwp9LF9jcmVhdGVBbmltYXRlZENvbnRhaW5lcjpmdW5jdGlvbihkKXt2YXIgYT10aGlzLiQoZCk7CnZhciBjPWEuY2xvc2VzdCgidGFibGUiKTsKdGhpcy5fYW5pbWF0ZWRIZWFkZXJPZmZzZXQ9Yy5vZmZzZXQoKTsKdGhpcy5fYW5pbWF0ZWRIZWFkZXJPZmZzZXQudG9wPWEub2Zmc2V0KCkudG9wOwp0aGlzLl8kaW5uZXJDb250YWluZXI9dGhpcy4kKHRoaXMuX2NoYW5nZUVsZW1lbnRUYWcoYy5jbG9uZSgpLmVtcHR5KCksImRpdiIpKS5jc3Moe2hlaWdodDoiMTAwJSIsb3ZlcmZsb3c6dGhpcy5fYWxsb3dGcmVlTW92ZT8idmlzaWJsZSI6ImhpZGRlbiIscGFkZGluZzoiMCIsbWFyZ2luOiIwIixwb3NpdGlvbjoiYWJzb2x1dGUiLGJvcmRlcjoibm9uZSJ9KTsKdGhpcy5fJGFuaW1hdGVkQ29udGFpbmVyPXRoaXMuJCh0aGlzLiQodGhpcy5nZXRfb3duZXIoKS5nZXRfZWxlbWVudCgpKS5vdXRlckh0bWwoKSkuYXBwZW5kKHRoaXMuXyRpbm5lckNvbnRhaW5lcikuY3NzKHtsZWZ0OnRoaXMuX2FuaW1hdGVkSGVhZGVyT2Zmc2V0LmxlZnQrInB4Iix0b3A6dGhpcy5fYW5pbWF0ZWRIZWFkZXJPZmZzZXQudG9wKyJweCIsd2lkdGg6Yy5wYXJlbnQoKS53aWR0aCgpKyJweCIsaGVpZ2h0OmEub3V0ZXJIZWlnaHQoKS0xKyJweCIsb3ZlcmZsb3c6dGhpcy5fYWxsb3dGcmVlTW92ZT8idmlzaWJsZSI6ImhpZGRlbiIscGFkZGluZzoiMCIsbWFyZ2luOiIwIixwb3NpdGlvbjoiYWJzb2x1dGUiLGJvcmRlclN0eWxlOiJub25lIG5vbmUgc29saWQgbm9uZSJ9KS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KTsKdmFyIGI9dGhpczsKdGhpcy4kKCJ0aCIsYS5wYXJlbnQoKSkuZWFjaChmdW5jdGlvbihlKXtpZih0aGlzLmNsaWVudFdpZHRoPT09MCl7cmV0dXJuOwp9dmFyIGc9Yi5fY3JlYXRlQW5pbWF0ZWRDZWxsKHRoaXMpOwppZih0aGlzPT09ZCl7Zy5hZGRDbGFzcygicmdEcmFnZ2VkSGVhZGVyIikuYXR0cigidGl0bGUiLCIiKS5jc3Moe29wYWNpdHk6IjAuOCIsekluZGV4OiI5OTk5In0pOwpiLl9kcmFnZ2VkSGVhZGVyQ2VsbEluZGV4PWIuX2FuaW1hdGVkSGVhZGVyQ2VsbHMubGVuZ3RoOwpiLl9pbml0aWFsRHJhZ2dlZEhlYWRlckNlbGxJbmRleD1iLl9kcmFnZ2VkSGVhZGVyQ2VsbEluZGV4Owp9dmFyIGY9dGhpczsKYi5fJGlubmVyQ29udGFpbmVyLmFwcGVuZChnKTsKYi5fYW5pbWF0ZWRIZWFkZXJDZWxscy5wdXNoKG5ldyBUZWxlcmlrLldlYi5VSS5HcmlkQW5pbWF0ZWRIZWFkZXJDZWxsKGcsYi5nZXRfcmVvcmRlckR1cmF0aW9uKCksZi5VbmlxdWVOYW1lKSk7Cn0pOwp9LF9jcmVhdGVBbmltYXRlZENlbGw6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy4kKGEpOwpyZXR1cm4gdGhpcy5fY2hhbmdlRWxlbWVudFRhZyhhLCJkaXYiKS5jc3Moe3Bvc2l0aW9uOiJhYnNvbHV0ZSIsbGVmdDp0aGlzLl9nZXROZXh0Q2VsbFBvc2l0aW9uKGEpLHdpZHRoOmIud2lkdGgoKSsicHgiLGN1cnNvcjoiZGVmYXVsdCJ9KTsKfSxfZ2V0TmV4dENlbGxQb3NpdGlvbjpmdW5jdGlvbihiKXt2YXIgYT10aGlzLl9uZXh0Q2VsbFBvc2l0aW9uOwp0aGlzLl9uZXh0Q2VsbFBvc2l0aW9uKz10aGlzLiQoYikub3V0ZXJXaWR0aCgpOwpyZXR1cm4gYTsKfSxfY2hhbmdlRWxlbWVudFRhZzpmdW5jdGlvbihhLGIpe2E9YS5qcXVlcnkmJmEubGVuZ3RoP2FbMF06YTsKaWYoIWEudGFnTmFtZSl7cmV0dXJuOwp9dmFyIGU9dGhpcy4kKGEpLmh0bWwoKTsKdmFyIGM9dGhpcy4kKGEpLm91dGVySHRtbCgpOwp2YXIgZD1hLnRhZ05hbWUudG9Mb3dlckNhc2UoKTsKYz1jLnJlcGxhY2UoIjwiK2EudGFnTmFtZSwiPCIrZCkucmVwbGFjZShhLnRhZ05hbWUrIj4iLGQrIj4iKTsKcmV0dXJuIHRoaXMuJChjLnJlcGxhY2UoIjwiK2QsIjwiK2IpLnJlcGxhY2UoZCsiPiIsYisiPiIpKS5odG1sKGUpOwp9LF9tb3VzZU1vdmU6ZnVuY3Rpb24oYSl7aWYoJHRlbGVyaWsuaXNJRTgpe3RoaXMuX21vdXNlTW92ZURlbGF5ZWQoYSk7Cn1lbHNle3RoaXMuX2hhbmRsZU1vdXNlTW92ZUludGVybmFsKGEpOwp9fSxfbW91c2VNb3ZlRGVsYXllZDpmdW5jdGlvbihhKXtpZighdGhpcy5fbW91c2VNb3ZlSW5Qcm9ncmVzcyl7dGhpcy5fbW91c2VNb3ZlSW5Qcm9ncmVzcz10cnVlOwp2YXIgYj10aGlzOwp0aGlzLl9tb3VzZU1vdmVUaW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtiLl9oYW5kbGVNb3VzZU1vdmVJbnRlcm5hbChhKTsKYi5fbW91c2VNb3ZlSW5Qcm9ncmVzcz1mYWxzZTsKfSwwKTsKfX0sX2hhbmRsZU1vdXNlTW92ZUludGVybmFsOmZ1bmN0aW9uKGEpe3RoaXMuX3NldE1vdmVEaXJlY3Rpb24oYSk7CnRoaXMuX2dldERyYWdnZWRIZWFkZXJDZWxsKCkubW92ZVdpdGhDdXJzb3IoYSx0aGlzLl9hbGxvd0ZyZWVNb3ZlKTsKdGhpcy5fbW91c2VUcmFja09yaWdpbj10aGlzLl9nZXRNb3VzZVRyYWNrT3JpZ2luKGEpOwppZih0aGlzLl9pc1RyYWNrT3JpZ2luT3ZlckhlYWRlcigpJiYhdGhpcy5fZ2V0RHJhZ2dlZEhlYWRlckNlbGwoKS5pc1BvaW50T3Zlck9yaWdpbih0aGlzLl9tb3VzZVRyYWNrT3JpZ2luKSl7dGhpcy5fcmVvcmRlckhlYWRlckNlbGxzKCk7Cn1lbHNle3RoaXMuX3JldmVydEhlYWRlckNlbGxzVG9PcmlnaW4oKTsKfWlmKHRoaXMuX2FsbG93RHJhZ1RvR3JvdXApe3RoaXMuX3VwZGF0ZUdyb3VwUGFuZWxJbmRpY2F0b3JzKGEpOwp9fSxfdXBkYXRlR3JvdXBQYW5lbEluZGljYXRvcnM6ZnVuY3Rpb24oYSl7aWYodGhpcy5faXNEcmFnZ2VkSGVhZGVyT3Zlckdyb3VwUGFuZWwoKSl7VGVsZXJpay5XZWIuVUkuR3JpZC5DcmVhdGVSZW9yZGVySW5kaWNhdG9ycyh0aGlzLmdldF9vd25lcigpLl9ncm91cFBhbmVsLmdldF9lbGVtZW50KCksdGhpcy5nZXRfb3duZXIoKS5Ta2luLHRoaXMuZ2V0X293bmVyKCkuX2ltYWdlc1BhdGgsdHJ1ZSx0aGlzLmdldF9vd25lcigpLmdldF9pZCgpKTsKVGVsZXJpay5XZWIuVUkuR3JpZC5Nb3ZlUmVvcmRlckluZGljYXRvcnMoYSx0aGlzLmdldF9vd25lcigpLl9ncm91cFBhbmVsLmdldF9lbGVtZW50KCksdHJ1ZSx0aGlzLmdldF9vd25lcigpLmdldF9pZCgpKTsKfWVsc2V7dGhpcy5faGlkZVJlb3JkZXJJbmRpY2F0b3JzKCk7Cn19LF9oaWRlUmVvcmRlckluZGljYXRvcnM6ZnVuY3Rpb24oKXtpZihUZWxlcmlrLldlYi5VSS5HcmlkLlJlb3JkZXJJbmRpY2F0b3IxKXtUZWxlcmlrLldlYi5VSS5HcmlkLlJlb3JkZXJJbmRpY2F0b3IxLnN0eWxlLnZpc2liaWxpdHk9ImhpZGRlbiI7ClRlbGVyaWsuV2ViLlVJLkdyaWQuUmVvcmRlckluZGljYXRvcjEuc3R5bGUuZGlzcGxheT0ibm9uZSI7ClRlbGVyaWsuV2ViLlVJLkdyaWQuUmVvcmRlckluZGljYXRvcjEuc3R5bGUucG9zaXRpb249ImFic29sdXRlIjsKVGVsZXJpay5XZWIuVUkuR3JpZC5SZW9yZGVySW5kaWNhdG9yMi5zdHlsZS52aXNpYmlsaXR5PVRlbGVyaWsuV2ViLlVJLkdyaWQuUmVvcmRlckluZGljYXRvcjEuc3R5bGUudmlzaWJpbGl0eTsKVGVsZXJpay5XZWIuVUkuR3JpZC5SZW9yZGVySW5kaWNhdG9yMi5zdHlsZS5kaXNwbGF5PVRlbGVyaWsuV2ViLlVJLkdyaWQuUmVvcmRlckluZGljYXRvcjEuc3R5bGUuZGlzcGxheTsKVGVsZXJpay5XZWIuVUkuR3JpZC5SZW9yZGVySW5kaWNhdG9yMi5zdHlsZS5wb3NpdGlvbj1UZWxlcmlrLldlYi5VSS5HcmlkLlJlb3JkZXJJbmRpY2F0b3IxLnN0eWxlLnBvc2l0aW9uOwp9fSxfZ2V0TW92ZURpcmVjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tb3ZlRGlyZWN0aW9ufHwwOwp9LF9zZXRNb3ZlRGlyZWN0aW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX3ByZXZQYWdlWHx8YS5wYWdlWDsKdGhpcy5fbW92ZURpcmVjdGlvbj1hLnBhZ2VYLWI7CnRoaXMuX3ByZXZQYWdlWD1hLnBhZ2VYOwp9LF9pc1RyYWNrT3JpZ2luT3ZlckhlYWRlcjpmdW5jdGlvbigpe3ZhciBhPVRlbGVyaWsuV2ViLlVJLkdyaWQuQW5pbWF0aW9uOwppZih0aGlzLl9tb3VzZVRyYWNrT3JpZ2luKXtyZXR1cm4gYS5jb250YWluc1BvaW50KGEuZ2V0Qm91bmRpbmdSZWN0YW5nbGUodGhpcy5fJGFuaW1hdGVkQ29udGFpbmVyKSx0aGlzLl9tb3VzZVRyYWNrT3JpZ2luKTsKfXJldHVybiBmYWxzZTsKfSxfZ2V0TGFzdE1vdmVkSGVhZGVyV2lkdGg6ZnVuY3Rpb24oKXtpZighdGhpcy5fbGFzdE1vdmVkQ2VsbFdpZHRoKXt0aGlzLl9sYXN0TW92ZWRDZWxsV2lkdGg9dGhpcy5fZ2V0RHJhZ2dlZEhlYWRlckNlbGwoKS5nZXRfYW5pbWF0aW9uV2lkdGgoKTsKfXJldHVybiB0aGlzLl9sYXN0TW92ZWRDZWxsV2lkdGg7Cn0sX3VwZGF0ZUxhc3RNb3ZlZEhlYWRlcldpZHRoOmZ1bmN0aW9uKGEpe3RoaXMuX2xhc3RNb3ZlZENlbGxXaWR0aD1NYXRoLm1heChhLmdldF9hbmltYXRpb25XaWR0aCgpLHRoaXMuX2dldERyYWdnZWRIZWFkZXJDZWxsKCkuZ2V0X2FuaW1hdGlvbldpZHRoKCkpOwp9LF9yZW9yZGVySGVhZGVyQ2VsbHM6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLl9hbmltYXRlZEhlYWRlck9mZnNldC5sZWZ0K3RoaXMuX2dldERyYWdnZWRIZWFkZXJDZWxsKCkuZ2V0X2RyYWdnZWRQb3NpdGlvbigpOwp2YXIgYT1jOwp2YXIgYj10aGlzLl9kcmFnZ2VkSGVhZGVyQ2VsbEluZGV4Owp2YXIgZD1udWxsOwppZih0aGlzLl9nZXRNb3ZlRGlyZWN0aW9uKCk+MHx8YTx0aGlzLl9tb3VzZVRyYWNrT3JpZ2luLmxlZnQpe2ErPXRoaXMuX2dldExhc3RNb3ZlZEhlYWRlcldpZHRoKCk7CndoaWxlKGE8dGhpcy5fbW91c2VUcmFja09yaWdpbi5sZWZ0JiZiPHRoaXMuX2FuaW1hdGVkSGVhZGVyQ2VsbHMubGVuZ3RoLTEpe2IrKzsKZD10aGlzLl9hbmltYXRlZEhlYWRlckNlbGxzW2JdOwphKz1kLmdldF9hbmltYXRpb25XaWR0aCgpOwppZihkLmNhbk1vdmUoKSl7dGhpcy5fbW92ZUNlbGwoYiwibGVmdCIpOwp9fX1lbHNle2lmKHRoaXMuX2dldE1vdmVEaXJlY3Rpb24oKTwwfHxhPj10aGlzLl9tb3VzZVRyYWNrT3JpZ2luLmxlZnQpe3doaWxlKGE+dGhpcy5fbW91c2VUcmFja09yaWdpbi5sZWZ0JiZiPjApe2ItLTsKZD10aGlzLl9hbmltYXRlZEhlYWRlckNlbGxzW2JdOwphLT1kLmdldF9hbmltYXRpb25XaWR0aCgpOwppZihkLmNhbk1vdmUoKSl7dGhpcy5fbW92ZUNlbGwoYiwicmlnaHQiKTsKfX19fX0sX21vdmVDZWxsOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5fYW5pbWF0ZWRIZWFkZXJDZWxsc1thXTsKaWYoYy5pc1BvaW50T3Zlcih0aGlzLl9tb3VzZVRyYWNrT3JpZ2luKSl7dGhpcy5fdXBkYXRlTGFzdE1vdmVkSGVhZGVyV2lkdGgoYyk7CnRoaXMuX2dldERyYWdnZWRIZWFkZXJDZWxsKCkuc2V0X2RyYWdnZWRQb3NpdGlvbihjLmdldF9jdXJyZW50UG9zaXRpb24oKSk7Cn1lbHNle2lmKGMuaXNQb2ludE92ZXJPcmlnaW4odGhpcy5fbW91c2VUcmFja09yaWdpbikpe3RoaXMuX3VwZGF0ZUxhc3RNb3ZlZEhlYWRlcldpZHRoKGMpOwp0aGlzLl9nZXREcmFnZ2VkSGVhZGVyQ2VsbCgpLnNldF9kcmFnZ2VkUG9zaXRpb24oYy5nZXRfb3JpZ2luYWxQb3NpdGlvbigpKTsKfX10aGlzLl9leGNoYW5nZUNlbGxQb3NpdGlvbihhKTsKdGhpcy5fdXBkYXRlUmV2ZXJ0U3RhdGUoYyk7CmlmKGI9PT0ibGVmdCIpe2MubW92ZUxlZnQodGhpcy5fZ2V0RHJhZ2dlZEhlYWRlckNlbGwoKS5nZXRfYW5pbWF0aW9uV2lkdGgoKSk7Cn1lbHNle2MubW92ZVJpZ2h0KHRoaXMuX2dldERyYWdnZWRIZWFkZXJDZWxsKCkuZ2V0X2FuaW1hdGlvbldpZHRoKCkpOwp9fSxfdXBkYXRlUmV2ZXJ0U3RhdGU6ZnVuY3Rpb24oYSl7aWYoYS5pc0F0T3JpZ2luKCkpe3RoaXMuX3JldmVydFBlbmRpbmdDZWxscy5wdXNoKGEpOwp9ZWxzZXtpZih0aGlzLl9yZXZlcnRQZW5kaW5nQ2VsbHMubGVuZ3RoPjApe3ZhciBiPUFycmF5LmluZGV4T2YodGhpcy5fcmV2ZXJ0UGVuZGluZ0NlbGxzLGEpOwppZihiPi0xKXt0aGlzLl9yZXZlcnRQZW5kaW5nQ2VsbHMuc3BsaWNlKGIsMSk7Cn19fX0sX2V4Y2hhbmdlQ2VsbFBvc2l0aW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX2RyYWdnZWRIZWFkZXJDZWxsSW5kZXg7CnZhciBjPXRoaXMuX2dldERyYWdnZWRIZWFkZXJDZWxsKCk7CnRoaXMuX2FuaW1hdGVkSGVhZGVyQ2VsbHMuc3BsaWNlKGIsMSk7CnRoaXMuX2FuaW1hdGVkSGVhZGVyQ2VsbHMuc3BsaWNlKGEsMCxjKTsKdGhpcy5fZHJhZ2dlZEhlYWRlckNlbGxJbmRleD1hOwp9LF9yZXZlcnRIZWFkZXJDZWxsc1RvT3JpZ2luOmZ1bmN0aW9uKCl7aWYodGhpcy5fcmV2ZXJ0UGVuZGluZ0NlbGxzLmxlbmd0aD4wKXtpZih0aGlzLl9pbml0aWFsRHJhZ2dlZEhlYWRlckNlbGxJbmRleCE9PXRoaXMuX2RyYWdnZWRIZWFkZXJDZWxsSW5kZXgpe3RoaXMuX2V4Y2hhbmdlQ2VsbFBvc2l0aW9uKHRoaXMuX2luaXRpYWxEcmFnZ2VkSGVhZGVyQ2VsbEluZGV4KTsKfXZhciBhPXRoaXMuX2dldERyYWdnZWRIZWFkZXJDZWxsKCk7CmlmKGEuZ2V0X2RyYWdnZWRQb3NpdGlvbigpIT09YS5nZXRfb3JpZ2luYWxQb3NpdGlvbigpKXt0aGlzLl91cGRhdGVMYXN0TW92ZWRIZWFkZXJXaWR0aChhKTsKYS5zZXRfZHJhZ2dlZFBvc2l0aW9uKGEuZ2V0X29yaWdpbmFsUG9zaXRpb24oKSk7Cn13aGlsZSh0aGlzLl9yZXZlcnRQZW5kaW5nQ2VsbHMubGVuZ3RoKXt0aGlzLl9yZXZlcnRQZW5kaW5nQ2VsbHMucG9wKCkubW92ZVRvT3JpZ2luKCk7Cn19fSxfZ2V0TW91c2VUcmFja09yaWdpbjpmdW5jdGlvbihiKXt2YXIgYT17bGVmdDpiLnBhZ2VYLHRvcDpiLnBhZ2VZfTsKdmFyIGM9VGVsZXJpay5XZWIuVUkuR3JpZC5BbmltYXRpb24uZ2V0VHJhY2tlZFBvaW50KCk7CmlmKCF0aGlzLl9hbGxvd0ZyZWVNb3ZlJiZjKXthLnRvcD1jLnRvcDsKfXJldHVybiBhOwp9LF9nZXREcmFnZ2VkSGVhZGVyQ2VsbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hbmltYXRlZEhlYWRlckNlbGxzW3RoaXMuX2RyYWdnZWRIZWFkZXJDZWxsSW5kZXhdOwp9LF9pc0RyYWdnZWRIZWFkZXJPdmVyR3JvdXBQYW5lbDpmdW5jdGlvbigpe2lmKHRoaXMuX21vdXNlVHJhY2tPcmlnaW4pe3JldHVybiB0aGlzLl9hbGxvd0RyYWdUb0dyb3VwJiZ0aGlzLmdldF9vd25lcigpLl9ncm91cFBhbmVsJiZUZWxlcmlrLldlYi5VSS5HcmlkLkFuaW1hdGlvbi5jb250YWluc1BvaW50KHRoaXMuX2dldEdyb3VwUGFuZWxCb3VuZGluZ1JlY3RhbmdsZSgpLHRoaXMuX21vdXNlVHJhY2tPcmlnaW4pOwp9cmV0dXJuIGZhbHNlOwp9LF9nZXRHcm91cFBhbmVsQm91bmRpbmdSZWN0YW5nbGU6ZnVuY3Rpb24oKXtpZighdGhpcy5fY2FjaGVkR3JvdXBQYW5lbFJlY3Qpe3RoaXMuX2NhY2hlZEdyb3VwUGFuZWxSZWN0PVRlbGVyaWsuV2ViLlVJLkdyaWQuQW5pbWF0aW9uLmdldEJvdW5kaW5nUmVjdGFuZ2xlKHRoaXMuZ2V0X293bmVyKCkuX2dyb3VwUGFuZWwuZ2V0X2VsZW1lbnQoKSk7Cn1yZXR1cm4gdGhpcy5fY2FjaGVkR3JvdXBQYW5lbFJlY3Q7Cn0sX21vdXNlVXA6ZnVuY3Rpb24oYSl7Y2xlYXJUaW1lb3V0KHRoaXMuX21vdXNlTW92ZVRpbWVvdXQpOwppZih0aGlzLl9hbGxvd0NvbHVtbnNSZW9yZGVyQW5pbWF0aW9uKXt2YXIgZj10aGlzLl9nZXREcmFnZ2VkSGVhZGVyQ2VsbCgpLmdldF9lbGVtZW50KCkucGFyZW50KClbMF0uaWQ7CnZhciBkPSRmaW5kKGYpOwppZih0aGlzLmdldF9vd25lcigpLkNsaWVudFNldHRpbmdzLkFsbG93Q29sdW1uc1Jlb3JkZXImJnRoaXMuX2lzVHJhY2tPcmlnaW5PdmVySGVhZGVyKCkpe3ZhciBiPXRoaXMuX2dldFJlb3JkZXJDb2x1bW5OYW1lcygpOwppZihiJiZkKXtkLnJlb3JkZXJDb2x1bW5zKGIuZmlyc3QsYi5zZWNvbmQpOwp9dGhpcy5fY2xlYXJBbmltYXRpb25EYXRhKCk7CnRoaXMuX3JlbW92ZUFuaW1hdGVkQ29udGFpbmVyKCk7ClRlbGVyaWsuV2ViLlVJLkdyaWQuUmVzdG9yZURvY3VtZW50RXZlbnRzKCk7CnJldHVybjsKfXRoaXMuX3JldmVydEhlYWRlckNlbGxzVG9PcmlnaW4oKTsKaWYodGhpcy5nZXRfb3duZXIoKS5DbGllbnRTZXR0aW5ncy5BbGxvd0RyYWdUb0dyb3VwJiZ0aGlzLl9pc0RyYWdnZWRIZWFkZXJPdmVyR3JvdXBQYW5lbCgpKXt2YXIgYz1kLmdldENvbHVtbkJ5VW5pcXVlTmFtZSh0aGlzLl9nZXREcmFnZ2VkSGVhZGVyQ2VsbCgpLmdldF9jb2x1bW5OYW1lKCkpOwppZihjJiZjLl9kYXRhLkdyb3VwYWJsZSl7dGhpcy5fY2xlYXJBbmltYXRpb25EYXRhKCk7CnRoaXMuX3JlbW92ZUFuaW1hdGVkQ29udGFpbmVyKCk7CnRoaXMuX2hpZGVSZW9yZGVySW5kaWNhdG9ycygpOwpkLmdyb3VwQ29sdW1uKGMuZ2V0X2VsZW1lbnQoKS5VbmlxdWVOYW1lKTsKfX1lbHNle3RoaXMuX21vdmVEcmFnZ2VkQ2VsbFRvT3JpZ2luKCk7Cn19ZWxzZXtpZih0aGlzLl9hbGxvd0RyYWdUb0dyb3VwJiZ0aGlzLl9kcmFnVG9Hcm91cENvbHVtbil7dGhpcy5fZHJhZ1RvR3JvdXBDb2x1bW4uX29uTW91c2VVcEhhbmRsZXIoYSk7CmlmKHRoaXMuX2FsbG93Q29sdW1uUmV2ZXJ0QW5pbWF0aW9uKXtUZWxlcmlrLldlYi5VSS5HcmlkLkFuaW1hdGVSZXZlcnREcmFnRHJvcCh0aGlzLl9kcmFnVG9Hcm91cENvbHVtbix0aGlzLmdldF9yZXZlcnREdXJhdGlvbigpKTsKfX19dGhpcy5fY2xlYXJBbmltYXRpb25EYXRhKCk7ClRlbGVyaWsuV2ViLlVJLkdyaWQuUmVzdG9yZURvY3VtZW50RXZlbnRzKCk7Cn0sX2dldFJlb3JkZXJDb2x1bW5OYW1lczpmdW5jdGlvbigpe3ZhciBhPXRoaXMuX2dldERyYWdnZWRIZWFkZXJDZWxsKCkuZ2V0X2NvbHVtbk5hbWUoKTsKdmFyIGI9IiI7CmZvcih2YXIgYz0wOwpjPHRoaXMuX3JldmVydFBlbmRpbmdDZWxscy5sZW5ndGg7CmMrKyl7dmFyIGQ9dGhpcy5fcmV2ZXJ0UGVuZGluZ0NlbGxzW2NdOwppZighZC5pc0RyYWdnZWQoKSYmZC5nZXRfb3JpZ2luYWxQb3NpdGlvbigpPT09dGhpcy5fZ2V0RHJhZ2dlZEhlYWRlckNlbGwoKS5nZXRfY3VycmVudFBvc2l0aW9uKCkpe2I9ZC5nZXRfY29sdW1uTmFtZSgpOwpicmVhazsKfX1pZihhJiZiJiZhIT09Yil7cmV0dXJue2ZpcnN0OmEsc2Vjb25kOmJ9Owp9cmV0dXJuIG51bGw7Cn0sX21vdmVEcmFnZ2VkQ2VsbFRvT3JpZ2luOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5fZ2V0RHJhZ2dlZEhlYWRlckNlbGwoKTsKaWYodGhpcy5fYWxsb3dDb2x1bW5SZXZlcnRBbmltYXRpb24pe3ZhciBhPXRoaXM7CmIuZ2V0X2VsZW1lbnQoKS5hbmltYXRlKHtsZWZ0OmIuZ2V0X29yaWdpbmFsUG9zaXRpb24oKSx0b3A6MH0sdGhpcy5nZXRfcmV2ZXJ0RHVyYXRpb24oKSxmdW5jdGlvbigpe2EuX3JlbW92ZUFuaW1hdGVkQ29udGFpbmVyKCk7Cn0pOwp9ZWxzZXt0aGlzLl9yZW1vdmVBbmltYXRlZENvbnRhaW5lcigpOwp9fSxfY2xlYXJBbmltYXRpb25EYXRhOmZ1bmN0aW9uKCl7dGhpcy5fbW91c2VUcmFja09yaWdpbj0tMTsKdGhpcy5fbmV4dENlbGxQb3NpdGlvbj0wOwp0aGlzLl9yZXZlcnRQZW5kaW5nQ2VsbHM9W107CnRoaXMuX2FuaW1hdGVkSGVhZGVyQ2VsbHM9W107CnRoaXMuX2RyYWdnZWRIZWFkZXJDZWxsSW5kZXg9LTE7CnRoaXMuX2luaXRpYWxEcmFnZ2VkSGVhZGVyQ2VsbEluZGV4PS0xOwp0aGlzLl9sYXN0TW92ZWRDZWxsV2lkdGg9bnVsbDsKdGhpcy5fbW92ZURpcmVjdGlvbj0wOwp0aGlzLl9wcmV2UGFnZVg9MDsKdGhpcy5fbW91c2VNb3ZlSW5Qcm9ncmVzcz1mYWxzZTsKdGhpcy5fZHJhZ1RvR3JvdXBDb2x1bW49bnVsbDsKVGVsZXJpay5XZWIuVUkuR3JpZC5BbmltYXRpb24uY2xlYXJFbGVtZW50UmVsYXRpdmVNb3VzZVBvaW50KCk7CnRoaXMuX2NsZWFySGFuZGxlcnMoKTsKfSxfY2xlYXJIYW5kbGVyczpmdW5jdGlvbigpe3RoaXMuJChkb2N1bWVudCkudW5iaW5kKCJtb3VzZW1vdmUiLHRoaXMuX21vdXNlTW92ZURlbGVnYXRlKTsKdGhpcy4kKGRvY3VtZW50KS51bmJpbmQoIm1vdXNldXAiLHRoaXMuX21vdXNlVXBEZWxlZ2F0ZSk7Cn0sX3JlbW92ZUFuaW1hdGVkQ29udGFpbmVyOmZ1bmN0aW9uKCl7dGhpcy5fJGFuaW1hdGVkQ29udGFpbmVyLnJlbW92ZSgpOwp9LGdldF9yZW9yZGVyRHVyYXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVvcmRlckR1cmF0aW9uOwp9LHNldF9yZW9yZGVyRHVyYXRpb246ZnVuY3Rpb24oYSl7dGhpcy5fcmVvcmRlckR1cmF0aW9uPWE7Cn0sZ2V0X3JldmVydER1cmF0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JldmVydER1cmF0aW9uOwp9LHNldF9yZXZlcnREdXJhdGlvbjpmdW5jdGlvbihhKXt0aGlzLl9yZXZlcnREdXJhdGlvbj1hOwp9LGdldF9vd25lcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vd25lcjsKfSxzZXRfb3duZXI6ZnVuY3Rpb24oYSl7dGhpcy5fb3duZXI9YTsKfX07ClRlbGVyaWsuV2ViLlVJLkdyaWRDb2x1bW5BbmltYXRpb24ucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuR3JpZENvbHVtbkFuaW1hdGlvbiIsU3lzLkNvbXBvbmVudCk7ClRlbGVyaWsuV2ViLlVJLkdyaWRBbmltYXRlZEhlYWRlckNlbGw9ZnVuY3Rpb24oYSxjLGIpe3RoaXMuXyRlbGVtZW50PWE7CnRoaXMuX2NvbHVtbk5hbWU9YjsKdGhpcy5fb3JpZ2luYWxQb3NpdGlvbj1wYXJzZUludChhLmNzcygibGVmdCIpLDEwKTsKdGhpcy5fY3VycmVudFBvc2l0aW9uPXRoaXMuX29yaWdpbmFsUG9zaXRpb247CnRoaXMuY2xhc3NOYW1lPXRoaXMuXyRlbGVtZW50WzBdLmNsYXNzTmFtZTsKdGhpcy5fYW5pbWF0ZWQ9ZmFsc2U7CnRoaXMuX2FuaW1hdGlvbkR1cmF0aW9uPWM7CnRoaXMuX29yaWdpbmFsT2Zmc2V0PXRoaXMuXyRlbGVtZW50Lm9mZnNldCgpOwp0aGlzLl9vcmlnaW5hbFBhcmVudE9mZnNldD10aGlzLl8kZWxlbWVudC5wYXJlbnQoKS5vZmZzZXQoKTsKdGhpcy5fb3JpZ2luQm91bmRpbmdSZWN0YW5nbGU9e2xlZnQ6dGhpcy5fb3JpZ2luYWxQYXJlbnRPZmZzZXQubGVmdCt0aGlzLmdldF9vcmlnaW5hbFBvc2l0aW9uKCksdG9wOnRoaXMuX29yaWdpbmFsT2Zmc2V0LnRvcCx3aWR0aDp0aGlzLmdldF9hbmltYXRpb25XaWR0aCgpLGhlaWdodDp0aGlzLmdldF9lbGVtZW50KCkub3V0ZXJIZWlnaHQoKX07Cn07ClRlbGVyaWsuV2ViLlVJLkdyaWRBbmltYXRlZEhlYWRlckNlbGwucHJvdG90eXBlPXtpc0RyYWdnZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fJGVsZW1lbnRbMF0uY2xhc3NOYW1lLmluZGV4T2YoInJnRHJhZ2dlZEhlYWRlciIpPi0xOwp9LGdldF9lbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuXyRlbGVtZW50Owp9LGdldF9jb2x1bW5OYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbHVtbk5hbWU7Cn0saXNBdE9yaWdpbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldF9jdXJyZW50UG9zaXRpb24oKT09PXRoaXMuZ2V0X29yaWdpbmFsUG9zaXRpb24oKTsKfSxnZXRfb3JpZ2luYWxQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcmlnaW5hbFBvc2l0aW9uOwp9LGdldF9jdXJyZW50UG9zaXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3VycmVudFBvc2l0aW9uOwp9LGdldF9kcmFnZ2VkUG9zaXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3VycmVudFBvc2l0aW9uOwp9LHNldF9kcmFnZ2VkUG9zaXRpb246ZnVuY3Rpb24oYSl7aWYodGhpcy5pc0RyYWdnZWQoKSl7dGhpcy5fY3VycmVudFBvc2l0aW9uPWE7Cn19LGdldF9hbmltYXRpb25XaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl8kZWxlbWVudC5vdXRlcldpZHRoKCk7Cn0sZ2V0X2FuaW1hdGlvbkR1cmF0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FuaW1hdGlvbkR1cmF0aW9uOwp9LGlzUG9pbnRPdmVyOmZ1bmN0aW9uKGEpe3JldHVybiBUZWxlcmlrLldlYi5VSS5HcmlkLkFuaW1hdGlvbi5jb250YWluc1BvaW50KFRlbGVyaWsuV2ViLlVJLkdyaWQuQW5pbWF0aW9uLmdldEJvdW5kaW5nUmVjdGFuZ2xlKHRoaXMuZ2V0X2VsZW1lbnQoKSksYSk7Cn0saXNQb2ludE92ZXJPcmlnaW46ZnVuY3Rpb24oYSl7cmV0dXJuIFRlbGVyaWsuV2ViLlVJLkdyaWQuQW5pbWF0aW9uLmNvbnRhaW5zUG9pbnQodGhpcy5fb3JpZ2luQm91bmRpbmdSZWN0YW5nbGUsYSk7Cn0sY2FuTW92ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNsYXNzTmFtZS5pbmRleE9mKCJyZ0dyb3VwQ29sIik8MCYmdGhpcy5jbGFzc05hbWUuaW5kZXhPZigicmdFeHBhbmRDb2wiKTwwOwp9LGNhbk1vdmVMZWZ0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2FuTW92ZSgpJiZ0aGlzLmdldF9jdXJyZW50UG9zaXRpb24oKT4wJiZ0aGlzLmdldF9vcmlnaW5hbFBvc2l0aW9uKCk8PXRoaXMuZ2V0X2N1cnJlbnRQb3NpdGlvbigpOwp9LGNhbk1vdmVSaWdodDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuXyRlbGVtZW50LnBhcmVudCgpLndpZHRoKCktdGhpcy5fJGVsZW1lbnQub3V0ZXJXaWR0aCgpOwpyZXR1cm4gdGhpcy5jYW5Nb3ZlKCkmJnRoaXMuZ2V0X2N1cnJlbnRQb3NpdGlvbigpPGEmJnRoaXMuZ2V0X29yaWdpbmFsUG9zaXRpb24oKT49dGhpcy5nZXRfY3VycmVudFBvc2l0aW9uKCk7Cn0sbW92ZUxlZnQ6ZnVuY3Rpb24oYSl7dGhpcy5tb3ZlVG8oYSwibGVmdCIpOwp9LG1vdmVSaWdodDpmdW5jdGlvbihhKXt0aGlzLm1vdmVUbyhhLCJyaWdodCIpOwp9LG1vdmVUb09yaWdpbjpmdW5jdGlvbigpe3RoaXMubW92ZVRvKDAsIm9yaWdpbiIpOwp9LG1vdmVUbzpmdW5jdGlvbihhLGIpe3ZhciBjPXtsZWZ0Om51bGx9Owpzd2l0Y2goYil7Y2FzZSJsZWZ0IjppZih0aGlzLmNhbk1vdmVMZWZ0KCkpe2MubGVmdD10aGlzLmdldF9jdXJyZW50UG9zaXRpb24oKT09PXRoaXMuZ2V0X29yaWdpbmFsUG9zaXRpb24oKT90aGlzLmdldF9vcmlnaW5hbFBvc2l0aW9uKCktYTp0aGlzLmdldF9vcmlnaW5hbFBvc2l0aW9uKCk7Cn1icmVhazsKY2FzZSJyaWdodCI6aWYodGhpcy5jYW5Nb3ZlUmlnaHQoKSl7Yy5sZWZ0PXRoaXMuZ2V0X2N1cnJlbnRQb3NpdGlvbigpPT09dGhpcy5nZXRfb3JpZ2luYWxQb3NpdGlvbigpP3RoaXMuZ2V0X29yaWdpbmFsUG9zaXRpb24oKSthOnRoaXMuZ2V0X29yaWdpbmFsUG9zaXRpb24oKTsKfWJyZWFrOwpjYXNlIm9yaWdpbiI6aWYodGhpcy5nZXRfY3VycmVudFBvc2l0aW9uIT09dGhpcy5nZXRfb3JpZ2luYWxQb3NpdGlvbigpKXtjLmxlZnQ9dGhpcy5nZXRfb3JpZ2luYWxQb3NpdGlvbigpOwp9YnJlYWs7Cn1pZihjLmxlZnQhPT1udWxsKXt0aGlzLl9jdXJyZW50UG9zaXRpb249Yy5sZWZ0Owp2YXIgZD10aGlzOwpzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZC5fJGVsZW1lbnQuc3RvcChmYWxzZSxmYWxzZSkuYW5pbWF0ZShjLGQuZ2V0X2FuaW1hdGlvbkR1cmF0aW9uKCkpOwp9LDEwKTsKfX0sbW92ZVdpdGhDdXJzb3I6ZnVuY3Rpb24oYixjKXtpZih0aGlzLmlzRHJhZ2dlZCgpKXt2YXIgYT17fTsKaWYoYyl7YS5sZWZ0PWIucGFnZVgtdGhpcy5fb3JpZ2luYWxQYXJlbnRPZmZzZXQubGVmdCsicHgiOwphLnRvcD1iLnBhZ2VZLXRoaXMuX29yaWdpbmFsUGFyZW50T2Zmc2V0LnRvcCsicHgiOwp9ZWxzZXtpZighVGVsZXJpay5XZWIuVUkuR3JpZC5BbmltYXRpb24uZ2V0RWxlbWVudFJlbGF0aXZlVHJhY2tlZFBvaW50KCkpe1RlbGVyaWsuV2ViLlVJLkdyaWQuQW5pbWF0aW9uLnRyYWNrRWxlbWVudFJlbGF0aXZlTW91c2VQb2ludCh0aGlzLmdldF9lbGVtZW50KCksYik7Cn1hLmxlZnQ9Yi5wYWdlWC10aGlzLl9vcmlnaW5hbFBhcmVudE9mZnNldC5sZWZ0LVRlbGVyaWsuV2ViLlVJLkdyaWQuQW5pbWF0aW9uLmdldEVsZW1lbnRSZWxhdGl2ZVRyYWNrZWRQb2ludCgpLmxlZnQrInB4IjsKfXRoaXMuZ2V0X2VsZW1lbnQoKS5jc3MoYSk7Cn19fTsKVHlwZS5yZWdpc3Rlck5hbWVzcGFjZSgiVGVsZXJpay5XZWIuVUkuR3JpZCIpOwpUeXBlLnJlZ2lzdGVyTmFtZXNwYWNlKCJUZWxlcmlrLldlYi5VSS5HcmlkLkFuaW1hdGlvbiIpOwpUZWxlcmlrLldlYi5VSS5HcmlkLkFuaW1hdGlvbi5nZXRCb3VuZGluZ1JlY3RhbmdsZT1mdW5jdGlvbihhKXthPWEuanF1ZXJ5P2E6JHRlbGVyaWsuJChhKTsKdmFyIGI9YS5vZmZzZXQoKTsKdmFyIGM9e307CmMubGVmdD1jLng9Yi5sZWZ0OwpjLndpZHRoPWEub3V0ZXJXaWR0aCgpOwpjLnRvcD1jLnk9Yi50b3A7CmMuaGVpZ2h0PWEub3V0ZXJIZWlnaHQoKTsKcmV0dXJuIGM7Cn07ClRlbGVyaWsuV2ViLlVJLkdyaWQuQW5pbWF0aW9uLmNvbnRhaW5zUG9pbnQ9ZnVuY3Rpb24oYixhKXtpZih0eXBlb2YoYi54KT09PSJ1bmRlZmluZWQiKXtiLng9Yi5sZWZ0Owp9aWYodHlwZW9mKGIueSk9PT0idW5kZWZpbmVkIil7Yi55PWIudG9wOwp9aWYodHlwZW9mKGEueCk9PT0idW5kZWZpbmVkIil7YS54PWEubGVmdDsKfWlmKHR5cGVvZihhLnkpPT09InVuZGVmaW5lZCIpe2EueT1hLnRvcDsKfXJldHVybiAkdGVsZXJpay5jb250YWluc1BvaW50KGIsYS54LGEueSk7Cn07ClRlbGVyaWsuV2ViLlVJLkdyaWQuQW5pbWF0aW9uLnRyYWNrRWxlbWVudFJlbGF0aXZlTW91c2VQb2ludD1mdW5jdGlvbihhLGIpe2lmKCFiLnBhZ2VYKXskdGVsZXJpay4kLmV2ZW50LmZpeChiKTsKfWE9YS5qcXVlcnk/YTokdGVsZXJpay4kKGEpOwp2YXIgYz1hLm9mZnNldCgpOwpUZWxlcmlrLldlYi5VSS5HcmlkLkFuaW1hdGlvbi5fdHJhY2tlZEVsZW1lbnQ9YTsKdmFyIGQ9VGVsZXJpay5XZWIuVUkuR3JpZC5BbmltYXRpb24uX3RyYWNrZWRFbGVtZW50UmVsYXRpdmVNb3VzZVBvaW50PXt9OwpkLmxlZnQ9ZC54PWIucGFnZVgtYy5sZWZ0OwpkLnRvcD1kLnk9Yi5wYWdlWS1jLnRvcDsKfTsKVGVsZXJpay5XZWIuVUkuR3JpZC5BbmltYXRpb24uZ2V0VHJhY2tlZFBvaW50PWZ1bmN0aW9uKCl7dmFyIGE9VGVsZXJpay5XZWIuVUkuR3JpZC5BbmltYXRpb24uZ2V0RWxlbWVudFJlbGF0aXZlVHJhY2tlZFBvaW50KCk7CmlmKCFUZWxlcmlrLldlYi5VSS5HcmlkLkFuaW1hdGlvbi5fdHJhY2tlZEVsZW1lbnR8fCFhKXtyZXR1cm4gbnVsbDsKfXZhciBiPVRlbGVyaWsuV2ViLlVJLkdyaWQuQW5pbWF0aW9uLl90cmFja2VkRWxlbWVudC5vZmZzZXQoKTsKdmFyIGM9e307CmMubGVmdD1jLng9Yi5sZWZ0K2EubGVmdDsKYy50b3A9Yy55PWIudG9wK2EudG9wOwpyZXR1cm4gYzsKfTsKVGVsZXJpay5XZWIuVUkuR3JpZC5BbmltYXRpb24uZ2V0RWxlbWVudFJlbGF0aXZlVHJhY2tlZFBvaW50PWZ1bmN0aW9uKCl7cmV0dXJuIFRlbGVyaWsuV2ViLlVJLkdyaWQuQW5pbWF0aW9uLl90cmFja2VkRWxlbWVudFJlbGF0aXZlTW91c2VQb2ludDsKfTsKVGVsZXJpay5XZWIuVUkuR3JpZC5BbmltYXRpb24uY2xlYXJFbGVtZW50UmVsYXRpdmVNb3VzZVBvaW50PWZ1bmN0aW9uKCl7VGVsZXJpay5XZWIuVUkuR3JpZC5BbmltYXRpb24uX3RyYWNrZWRFbGVtZW50PW51bGw7ClRlbGVyaWsuV2ViLlVJLkdyaWQuQW5pbWF0aW9uLl90cmFja2VkRWxlbWVudFJlbGF0aXZlTW91c2VQb2ludD1udWxsOwp9OwpUeXBlLnJlZ2lzdGVyTmFtZXNwYWNlKCJUZWxlcmlrLldlYi5VSSIpOwpUZWxlcmlrLldlYi5VSS5HcmlkQ29sdW1uUmVzaXplcj1mdW5jdGlvbihiLGMpe1RlbGVyaWsuV2ViLlVJLkdyaWRDb2x1bW5SZXNpemVyLmluaXRpYWxpemVCYXNlKHRoaXMpOwp0aGlzLl9pc1JlYWxUaW1lUmVzaXplPWM7CnRoaXMuX2NvbHVtbj1iOwp0aGlzLl9pc1JlYWxUaW1lUmVzaXplPWM7CnRoaXMuX2N1cnJlbnRXaWR0aD1udWxsOwp0aGlzLl9sZWZ0UmVzaXplcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CnRoaXMuX2xlZnRSZXNpemVyLnN0eWxlLmJhY2tncm91bmRDb2xvcj0ibmF2eSI7CnRoaXMuX2xlZnRSZXNpemVyLnN0eWxlLndpZHRoPSIxcHgiOwp0aGlzLl9sZWZ0UmVzaXplci5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiOwp0aGlzLl9sZWZ0UmVzaXplci5zdHlsZS5jdXJzb3I9ImUtcmVzaXplIjsKdGhpcy5fcmlnaHRSZXNpemVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTsKdGhpcy5fcmlnaHRSZXNpemVyLnN0eWxlLmJhY2tncm91bmRDb2xvcj0ibmF2eSI7CnRoaXMuX3JpZ2h0UmVzaXplci5zdHlsZS53aWR0aD0iMXB4IjsKdGhpcy5fcmlnaHRSZXNpemVyLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSI7CnRoaXMuX3JpZ2h0UmVzaXplci5zdHlsZS5jdXJzb3I9ImUtcmVzaXplIjsKdGhpcy5fcmVzaXplclRvb2xUaXA9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwp0aGlzLl9yZXNpemVyVG9vbFRpcC5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiOwp0aGlzLl9yZXNpemVyVG9vbFRpcC5zdHlsZS56SW5kZXg9MTAwMDA7CnRoaXMuX3Jlc2l6ZXJUb29sVGlwLnN0eWxlLmRpc3BsYXk9KHRoaXMuX2NvbHVtbi5fb3duZXIuX293bmVyLkNsaWVudFNldHRpbmdzLkNsaWVudE1lc3NhZ2VzLkNvbHVtblJlc2l6ZVRvb2x0aXBGb3JtYXRTdHJpbmc9PSIiKT8ibm9uZSI6IiI7CnRoaXMuX3Jlc2l6ZXJUb29sVGlwRm9ybWF0U3RyaW5nPXRoaXMuX2NvbHVtbi5fb3duZXIuX293bmVyLkNsaWVudFNldHRpbmdzLkNsaWVudE1lc3NhZ2VzLkNvbHVtblJlc2l6ZVRvb2x0aXBGb3JtYXRTdHJpbmc7CmlmKHRoaXMuX2NvbHVtbi5fb3duZXIuX293bmVyLlNraW4hPSIiKXt0aGlzLl9yZXNpemVyVG9vbFRpcC5jbGFzc05hbWU9U3RyaW5nLmZvcm1hdCgiR3JpZFRvb2xUaXAgR3JpZFRvb2xUaXBfezB9Iix0aGlzLl9jb2x1bW4uX293bmVyLl9vd25lci5Ta2luKTsKfWlmKCF0aGlzLl9jb2x1bW4uX293bmVyLl9vd25lci5fZW1iZWRkZWRTa2lufHx0aGlzLl9jb2x1bW4uX293bmVyLl9vd25lci5Ta2luPT0iIil7dGhpcy5fcmVzaXplclRvb2xUaXAuc3R5bGUuYmFja2dyb3VuZENvbG9yPSIjRjVGNURDIjsKdGhpcy5fcmVzaXplclRvb2xUaXAuc3R5bGUuYm9yZGVyPSIxcHggc29saWQiOwp0aGlzLl9yZXNpemVyVG9vbFRpcC5zdHlsZS5mb250PSJpY29uIjsKdGhpcy5fcmVzaXplclRvb2xUaXAuc3R5bGUucGFkZGluZz0iMnB4IjsKfXZhciBhPXRoaXMuX2NvbHVtbi5nZXRfZWxlbWVudCgpLm9mZnNldFdpZHRoOwp0aGlzLl9yZXNpemVyVG9vbFRpcC5pbm5lckhUTUw9dGhpcy5fYXBwbHlUb29sdGlwVGV4dChhKTsKZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLl9sZWZ0UmVzaXplcik7CmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5fcmlnaHRSZXNpemVyKTsKZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLl9yZXNpemVyVG9vbFRpcCk7CnRoaXMuX3Jlc2l6ZXJUb29sVGlwLnN0eWxlLndpZHRoPXRoaXMuX3Jlc2l6ZXJUb29sVGlwLmNsaWVudFdpZHRoKyhwYXJzZUludChhLDEwKS50b1N0cmluZygpLmxlbmd0aD49Mz8wOjEwKSsicHgiOwp0aGlzLkNhbkRlc3Ryb3k9dHJ1ZTsKdGhpcy5fb25Nb3VzZVVwRGVsZWdhdGU9JHRlbGVyaWsuYWRkTW9iaWxlSGFuZGxlcih0aGlzLGRvY3VtZW50LCJtb3VzZXVwIix0aGlzLl9vbk1vdXNlVXBIYW5kbGVyLG51bGwsdHJ1ZSk7CnRoaXMuX29uTW91c2VNb3ZlRGVsZWdhdGU9JHRlbGVyaWsuYWRkTW9iaWxlSGFuZGxlcih0aGlzLHRoaXMuX2NvbHVtbi5fb3duZXIuX293bmVyLmdldF9lbGVtZW50KCksIm1vdXNlbW92ZSIsdGhpcy5fb25Nb3VzZU1vdmVIYW5kbGVyKTsKfTsKVGVsZXJpay5XZWIuVUkuR3JpZENvbHVtblJlc2l6ZXIucHJvdG90eXBlPXtkaXNwb3NlOmZ1bmN0aW9uKCl7dHJ5e3RoaXMuX2Rlc3Ryb3koKTsKfWNhdGNoKGEpe31pZih0aGlzLl9vbk1vdXNlVXBEZWxlZ2F0ZSl7JHRlbGVyaWsucmVtb3ZlTW9iaWxlSGFuZGxlcihkb2N1bWVudCwibW91c2V1cCIsdGhpcy5fb25Nb3VzZVVwRGVsZWdhdGUsbnVsbCx0cnVlKTsKfWlmKHRoaXMuX29uTW91c2VNb3ZlRGVsZWdhdGUpeyR0ZWxlcmlrLnJlbW92ZU1vYmlsZUhhbmRsZXIodGhpcy5fY29sdW1uLl9vd25lci5fb3duZXIuZ2V0X2VsZW1lbnQoKSwibW91c2Vtb3ZlIix0aGlzLl9vbk1vdXNlTW92ZURlbGVnYXRlKTsKfXRoaXMuX2xlZnRSZXNpemVyPW51bGw7CnRoaXMuX3JpZ2h0UmVzaXplcj1udWxsOwp0aGlzLl9yZXNpemVyVG9vbFRpcD1udWxsOwp9LF9wb3NpdGlvbjpmdW5jdGlvbihhKXt0aGlzLl9sZWZ0UmVzaXplci5zdHlsZS50b3A9VGVsZXJpay5XZWIuVUkuR3JpZC5GaW5kUG9zWSh0aGlzLl9jb2x1bW4uZ2V0X2VsZW1lbnQoKSkrInB4IjsKdGhpcy5fbGVmdFJlc2l6ZXIuc3R5bGUubGVmdD1UZWxlcmlrLldlYi5VSS5HcmlkLkZpbmRQb3NYKHRoaXMuX2NvbHVtbi5nZXRfZWxlbWVudCgpKSsicHgiOwp0aGlzLl9yaWdodFJlc2l6ZXIuc3R5bGUudG9wPXRoaXMuX2xlZnRSZXNpemVyLnN0eWxlLnRvcDsKdGhpcy5fcmlnaHRSZXNpemVyLnN0eWxlLmxlZnQ9cGFyc2VJbnQodGhpcy5fbGVmdFJlc2l6ZXIuc3R5bGUubGVmdCkrdGhpcy5fY29sdW1uLmdldF9lbGVtZW50KCkub2Zmc2V0V2lkdGgrInB4IjsKdmFyIGI9cGFyc2VJbnQodGhpcy5fcmlnaHRSZXNpemVyLnN0eWxlLnRvcCktdGhpcy5fcmVzaXplclRvb2xUaXAub2Zmc2V0SGVpZ2h0LTI7CmlmKGI8MCl7Yis9KHRoaXMuX3Jlc2l6ZXJUb29sVGlwLm9mZnNldEhlaWdodCt0aGlzLl9jb2x1bW4uZ2V0X2VsZW1lbnQoKS5vZmZzZXRIZWlnaHQrMik7Cn10aGlzLl9yZXNpemVyVG9vbFRpcC5zdHlsZS50b3A9YisicHgiOwp2YXIgYz1wYXJzZUludCh0aGlzLl9yaWdodFJlc2l6ZXIuc3R5bGUubGVmdCktNTsKdGhpcy5fcmVzaXplclRvb2xUaXAuc3R5bGUubGVmdD1jKyJweCI7CmlmKCR0ZWxlcmlrLmVsZW1lbnRPdmVyZmxvd3NSaWdodCgkdGVsZXJpay5nZXRWaWV3UG9ydFNpemUoKSx0aGlzLl9yZXNpemVyVG9vbFRpcCkpe3RoaXMuX3Jlc2l6ZXJUb29sVGlwLnN0eWxlLmxlZnQ9KGMtdGhpcy5fcmVzaXplclRvb2xUaXAub2Zmc2V0V2lkdGgpKyJweCI7Cn1pZihwYXJzZUludCh0aGlzLl9sZWZ0UmVzaXplci5zdHlsZS5sZWZ0KTxUZWxlcmlrLldlYi5VSS5HcmlkLkZpbmRQb3NYKHRoaXMuX2NvbHVtbi5fb3duZXIuZ2V0X2VsZW1lbnQoKSkpe3RoaXMuX2xlZnRSZXNpemVyLnN0eWxlLmRpc3BsYXk9Im5vbmUiOwp9aWYoIXRoaXMuX2NvbHVtbi5fb3duZXIuX293bmVyLkNsaWVudFNldHRpbmdzLlNjcm9sbGluZy5BbGxvd1Njcm9sbCl7dGhpcy5fbGVmdFJlc2l6ZXIuc3R5bGUuaGVpZ2h0PXRoaXMuX2NvbHVtbi5fb3duZXIuZ2V0X2VsZW1lbnQoKS50Qm9kaWVzWzBdLm9mZnNldEhlaWdodCt0aGlzLl9jb2x1bW4uX293bmVyLmdldF9lbGVtZW50KCkudEhlYWQub2Zmc2V0SGVpZ2h0KyJweCI7Cn1lbHNle2lmKHRoaXMuX2NvbHVtbi5fb3duZXIuX293bmVyLkNsaWVudFNldHRpbmdzLlNjcm9sbGluZy5Vc2VTdGF0aWNIZWFkZXJzKXt0aGlzLl9sZWZ0UmVzaXplci5zdHlsZS5oZWlnaHQ9dGhpcy5fY29sdW1uLl9vd25lci5fb3duZXIuX2dyaWREYXRhRGl2LmNsaWVudEhlaWdodCt0aGlzLl9jb2x1bW4uX293bmVyLmdldF9lbGVtZW50KCkudEhlYWQub2Zmc2V0SGVpZ2h0KyJweCI7Cn1lbHNle3RoaXMuX2xlZnRSZXNpemVyLnN0eWxlLmhlaWdodD10aGlzLl9jb2x1bW4uX293bmVyLl9vd25lci5fZ3JpZERhdGFEaXYuY2xpZW50SGVpZ2h0KyJweCI7Cn19dGhpcy5fcmlnaHRSZXNpemVyLnN0eWxlLmhlaWdodD10aGlzLl9sZWZ0UmVzaXplci5zdHlsZS5oZWlnaHQ7Cn0sX29uTW91c2VVcEhhbmRsZXI6ZnVuY3Rpb24oYSl7dGhpcy5fZGVzdHJveShhKTsKfSxfb25Nb3VzZU1vdmVIYW5kbGVyOmZ1bmN0aW9uKGEpe2lmKCR0ZWxlcmlrLmlzVG91Y2hEZXZpY2Upe2EucHJldmVudERlZmF1bHQoKTsKfXRoaXMuX21vdmUoYSk7Cn0sX2Rlc3Ryb3k6ZnVuY3Rpb24oYSl7aWYodGhpcy5DYW5EZXN0cm95KXtpZih0aGlzLl9vbk1vdXNlVXBEZWxlZ2F0ZSl7JHRlbGVyaWsucmVtb3ZlTW9iaWxlSGFuZGxlcihkb2N1bWVudCwibW91c2V1cCIsdGhpcy5fb25Nb3VzZVVwRGVsZWdhdGUsbnVsbCx0cnVlKTsKdGhpcy5fb25Nb3VzZVVwRGVsZWdhdGU9bnVsbDsKfWlmKHRoaXMuX29uTW91c2VNb3ZlRGVsZWdhdGUpeyR0ZWxlcmlrLnJlbW92ZU1vYmlsZUhhbmRsZXIodGhpcy5fY29sdW1uLl9vd25lci5fb3duZXIuZ2V0X2VsZW1lbnQoKSwibW91c2Vtb3ZlIix0aGlzLl9vbk1vdXNlTW92ZURlbGVnYXRlKTsKdGhpcy5fb25Nb3VzZU1vdmVEZWxlZ2F0ZT1udWxsOwp9aWYodGhpcy5fY3VycmVudFdpZHRoIT1udWxsKXtpZih0aGlzLl9jdXJyZW50V2lkdGg+MCl7dGhpcy5fY29sdW1uLl9vd25lci5yZXNpemVDb2x1bW4odGhpcy5fY29sdW1uLmdldF9lbGVtZW50KCkuY2VsbEluZGV4LHRoaXMuX2N1cnJlbnRXaWR0aCk7CnRoaXMuX2N1cnJlbnRXaWR0aD1udWxsOwp9fWRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGhpcy5fbGVmdFJlc2l6ZXIpOwpkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRoaXMuX3JpZ2h0UmVzaXplcik7CmRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGhpcy5fcmVzaXplclRvb2xUaXApOwp0aGlzLkNhbkRlc3Ryb3k9ZmFsc2U7Cn19LF9tb3ZlOmZ1bmN0aW9uKGIpe3RoaXMuX2xlZnRSZXNpemVyLnN0eWxlLmxlZnQ9VGVsZXJpay5XZWIuVUkuR3JpZC5GaW5kUG9zWCh0aGlzLl9jb2x1bW4uZ2V0X2VsZW1lbnQoKSkrInB4IjsKdGhpcy5fcmlnaHRSZXNpemVyLnN0eWxlLmxlZnQ9cGFyc2VJbnQodGhpcy5fbGVmdFJlc2l6ZXIuc3R5bGUubGVmdCkrKFRlbGVyaWsuV2ViLlVJLkdyaWQuR2V0RXZlbnRQb3NYKGIpLVRlbGVyaWsuV2ViLlVJLkdyaWQuRmluZFBvc1godGhpcy5fY29sdW1uLmdldF9lbGVtZW50KCkpKSsicHgiOwp2YXIgZz1wYXJzZUludCh0aGlzLl9yaWdodFJlc2l6ZXIuc3R5bGUubGVmdCktNTsKdGhpcy5fcmVzaXplclRvb2xUaXAuc3R5bGUubGVmdD1nKyJweCI7CmlmKCR0ZWxlcmlrLmVsZW1lbnRPdmVyZmxvd3NSaWdodCgkdGVsZXJpay5nZXRWaWV3UG9ydFNpemUoKSx0aGlzLl9yZXNpemVyVG9vbFRpcCkpe3RoaXMuX3Jlc2l6ZXJUb29sVGlwLnN0eWxlLmxlZnQ9KGctdGhpcy5fcmVzaXplclRvb2xUaXAub2Zmc2V0V2lkdGgpKyJweCI7Cn12YXIgZj1wYXJzZUludCh0aGlzLl9yaWdodFJlc2l6ZXIuc3R5bGUubGVmdCktcGFyc2VJbnQodGhpcy5fbGVmdFJlc2l6ZXIuc3R5bGUubGVmdCk7CnZhciBjPXRoaXMuX2NvbHVtbi5nZXRfZWxlbWVudCgpLnNjcm9sbFdpZHRoLWY7CnZhciBkPXRoaXMuX3Jlc2l6ZXJUb29sVGlwLm9mZnNldEhlaWdodDsKdGhpcy5fcmVzaXplclRvb2xUaXAuaW5uZXJIVE1MPXRoaXMuX2FwcGx5VG9vbHRpcFRleHQoZik7CmlmKHRoaXMuX3Jlc2l6ZXJUb29sVGlwLm9mZnNldEhlaWdodD5kKXt0aGlzLl9yZXNpemVyVG9vbFRpcC5zdHlsZS53aWR0aD1wYXJzZUludCh0aGlzLl9yZXNpemVyVG9vbFRpcC5zdHlsZS53aWR0aCkrMTArInB4IjsKfWlmKCFUZWxlcmlrLldlYi5VSS5HcmlkLkZpcmVFdmVudCh0aGlzLl9jb2x1bW4uX293bmVyLCJPbkNvbHVtblJlc2l6aW5nIixbdGhpcy5fY29sdW1uLkluZGV4LGZdKSl7cmV0dXJuOwp9aWYoZjw9MCl7dGhpcy5fcmlnaHRSZXNpemVyLnN0eWxlLmxlZnQ9dGhpcy5fcmlnaHRSZXNpemVyLnN0eWxlLmxlZnQ7CnRoaXMuX2Rlc3Ryb3koYik7CnJldHVybjsKfXRoaXMuX2N1cnJlbnRXaWR0aD1mOwppZih0aGlzLl9pc1JlYWxUaW1lUmVzaXplKXt2YXIgYT0obmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJTYWZhcmkiKSE9LTEpP1RlbGVyaWsuV2ViLlVJLkdyaWQuR2V0UmVhbENlbGxJbmRleCh0aGlzLl9jb2x1bW4uX293bmVyLHRoaXMuX2NvbHVtbi5nZXRfZWxlbWVudCgpKTp0aGlzLl9jb2x1bW4uZ2V0X2VsZW1lbnQoKS5jZWxsSW5kZXg7CnRoaXMuX2NvbHVtbi5fb3duZXIucmVzaXplQ29sdW1uKGEsZik7Cn1lbHNle3RoaXMuX2N1cnJlbnRXaWR0aD1mOwpyZXR1cm47Cn1pZihUZWxlcmlrLldlYi5VSS5HcmlkLkZpbmRQb3NYKHRoaXMuX2xlZnRSZXNpemVyKSE9VGVsZXJpay5XZWIuVUkuR3JpZC5GaW5kUG9zWCh0aGlzLl9jb2x1bW4uZ2V0X2VsZW1lbnQoKSkpe3RoaXMuX2xlZnRSZXNpemVyLnN0eWxlLmxlZnQ9VGVsZXJpay5XZWIuVUkuR3JpZC5GaW5kUG9zWCh0aGlzLl9jb2x1bW4uZ2V0X2VsZW1lbnQoKSkrInB4IjsKfWlmKFRlbGVyaWsuV2ViLlVJLkdyaWQuRmluZFBvc1godGhpcy5fcmlnaHRSZXNpemVyKSE9KFRlbGVyaWsuV2ViLlVJLkdyaWQuRmluZFBvc1godGhpcy5fY29sdW1uLmdldF9lbGVtZW50KCkpK3RoaXMuX2NvbHVtbi5nZXRfZWxlbWVudCgpLm9mZnNldFdpZHRoKSl7dGhpcy5fcmlnaHRSZXNpemVyLnN0eWxlLmxlZnQ9VGVsZXJpay5XZWIuVUkuR3JpZC5GaW5kUG9zWCh0aGlzLl9jb2x1bW4uZ2V0X2VsZW1lbnQoKSkrdGhpcy5fY29sdW1uLmdldF9lbGVtZW50KCkub2Zmc2V0V2lkdGgrInB4IjsKfWlmKFRlbGVyaWsuV2ViLlVJLkdyaWQuRmluZFBvc1kodGhpcy5fbGVmdFJlc2l6ZXIpIT1UZWxlcmlrLldlYi5VSS5HcmlkLkZpbmRQb3NZKHRoaXMuX2NvbHVtbi5nZXRfZWxlbWVudCgpKSl7dGhpcy5fbGVmdFJlc2l6ZXIuc3R5bGUudG9wPVRlbGVyaWsuV2ViLlVJLkdyaWQuRmluZFBvc1kodGhpcy5fY29sdW1uLmdldF9lbGVtZW50KCkpKyJweCI7CnRoaXMuX3JpZ2h0UmVzaXplci5zdHlsZS50b3A9VGVsZXJpay5XZWIuVUkuR3JpZC5GaW5kUG9zWSh0aGlzLl9jb2x1bW4uZ2V0X2VsZW1lbnQoKSkrInB4IjsKfWlmKCF0aGlzLl9jb2x1bW4uX293bmVyLl9vd25lci5DbGllbnRTZXR0aW5ncy5TY3JvbGxpbmcuQWxsb3dTY3JvbGwpe3RoaXMuX2xlZnRSZXNpemVyLnN0eWxlLmhlaWdodD10aGlzLl9jb2x1bW4uX293bmVyLmdldF9lbGVtZW50KCkudEJvZGllc1swXS5vZmZzZXRIZWlnaHQrdGhpcy5fY29sdW1uLl9vd25lci5nZXRfZWxlbWVudCgpLnRIZWFkLm9mZnNldEhlaWdodCsicHgiOwp9ZWxzZXtpZih0aGlzLl9jb2x1bW4uX293bmVyLl9vd25lci5DbGllbnRTZXR0aW5ncy5TY3JvbGxpbmcuVXNlU3RhdGljSGVhZGVycyl7dGhpcy5fbGVmdFJlc2l6ZXIuc3R5bGUuaGVpZ2h0PXRoaXMuX2NvbHVtbi5fb3duZXIuX293bmVyLl9ncmlkRGF0YURpdi5jbGllbnRIZWlnaHQrdGhpcy5fY29sdW1uLl9vd25lci5nZXRfZWxlbWVudCgpLnRIZWFkLm9mZnNldEhlaWdodCsicHgiOwp9ZWxzZXt0aGlzLl9sZWZ0UmVzaXplci5zdHlsZS5oZWlnaHQ9dGhpcy5fY29sdW1uLl9vd25lci5fb3duZXIuX2dyaWREYXRhRGl2LmNsaWVudEhlaWdodCsicHgiOwp9fXRoaXMuX3JpZ2h0UmVzaXplci5zdHlsZS5oZWlnaHQ9dGhpcy5fbGVmdFJlc2l6ZXIuc3R5bGUuaGVpZ2h0Owp9LF9hcHBseVRvb2x0aXBUZXh0OmZ1bmN0aW9uKGEpe3ZhciBiPS9cezBbXlx9XSpcfS9nOwpyZXR1cm4gdGhpcy5fcmVzaXplclRvb2xUaXBGb3JtYXRTdHJpbmcucmVwbGFjZShiLGEpOwp9fTsKVGVsZXJpay5XZWIuVUkuR3JpZENvbHVtblJlc2l6ZXIucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuR3JpZENvbHVtblJlc2l6ZXIiLG51bGwsU3lzLklEaXNwb3NhYmxlKTsKVHlwZS5yZWdpc3Rlck5hbWVzcGFjZSgiVGVsZXJpay5XZWIuVUkiKTsKVHlwZS5yZWdpc3Rlck5hbWVzcGFjZSgiVGVsZXJpay5XZWIuVUkuR3JpZCIpOwpUZWxlcmlrLldlYi5VSS5HcmlkLl91bmlxdWVJRFRvQ2xpZW50SUQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZSgvWyQ6XS9nLCJfIik7Cn07ClRlbGVyaWsuV2ViLlVJLkdyaWQuZ2V0VGFibGVIZWFkZXJSb3c9ZnVuY3Rpb24oYyl7dmFyIGE9bnVsbDsKaWYoYy50SGVhZCl7Zm9yKHZhciBiPTA7CmI8Yy50SGVhZC5yb3dzLmxlbmd0aDsKYisrKXtpZihjLnRIZWFkLnJvd3NbYl0hPW51bGwpe2lmKGMudEhlYWQucm93c1tiXS5jZWxsc1swXSE9bnVsbCl7aWYoYy50SGVhZC5yb3dzW2JdLmNlbGxzWzBdLnRhZ05hbWUhPW51bGwpe2lmKGMudEhlYWQucm93c1tiXS5jZWxsc1swXS50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJ0aCIpe2E9Yy50SGVhZC5yb3dzW2JdOwpicmVhazsKfX19fX19cmV0dXJuIGE7Cn07ClRlbGVyaWsuV2ViLlVJLkdyaWQuaGFzRXZlbnRBdHRhY2hlZD1mdW5jdGlvbihiLGYsZSl7aWYoKHR5cGVvZihiLl9ldmVudHMpIT09Im9iamVjdCIpfHwoYi5fZXZlbnRzPT1udWxsKSl7cmV0dXJuIGZhbHNlOwp9dmFyIGE9Yi5fZXZlbnRzW2ZdOwppZighKGEgaW5zdGFuY2VvZiBBcnJheSkpe3JldHVybiBmYWxzZTsKfWZvcih2YXIgZD0wLGM9YS5sZW5ndGg7CmQ8YzsKZCsrKXtpZihhW2RdLmhhbmRsZXI9PT1lKXtyZXR1cm4gdHJ1ZTsKfX1yZXR1cm4gZmFsc2U7Cn07ClRlbGVyaWsuV2ViLlVJLkdyaWQuQ2hhbmdlUGFnZVNpemVDb21ib0hhbmRsZXI9ZnVuY3Rpb24oZyxlKXtpZihlLmdldF9pdGVtKCkpe3ZhciBiPWUuZ2V0X2l0ZW0oKS5nZXRfYXR0cmlidXRlcygpLmdldEF0dHJpYnV0ZSgib3duZXJUYWJsZVZpZXdJZCIpOwp2YXIgZj1udWxsOwppZihnLmdldF92YWx1ZSgpKXtmPWcuZ2V0X3ZhbHVlKCk7Cn1lbHNle2Y9Zy5nZXRfdGV4dCgpOwp9aWYoYiYmZil7dmFyIGQ9cGFyc2VJbnQoZik7CnZhciBjPSRmaW5kKGIpOwppZihjKXt2YXIgYT1lLmdldF9pdGVtKCkuZ2V0X2F0dHJpYnV0ZXMoKS5nZXRBdHRyaWJ1dGUoInNlb1JlZGlyZWN0VXJsIik7CmlmKGEpe3dpbmRvdy5sb2NhdGlvbi5ocmVmPWE7CnJldHVybiBmYWxzZTsKfWMuc2V0X3BhZ2VTaXplKGQpOwp9fX19OwpUZWxlcmlrLldlYi5VSS5HcmlkLkdldFJlYWxDZWxsSW5kZXg9ZnVuY3Rpb24oYyxhKXtmb3IodmFyIGI9MDsKYjxjLmdldF9jb2x1bW5zKCkubGVuZ3RoOwpiKyspe2lmKGMuZ2V0X2NvbHVtbnMoKVtiXS5nZXRfZWxlbWVudCgpPT1hKXtyZXR1cm4gYjsKfX19OwpUZWxlcmlrLldlYi5VSS5HcmlkLkNvcHlBdHRyaWJ1dGVzPWZ1bmN0aW9uKGMsYSl7Zm9yKHZhciBkPTA7CmQ8YS5hdHRyaWJ1dGVzLmxlbmd0aDsKZCsrKXt0cnl7aWYoYS5hdHRyaWJ1dGVzW2RdLm5hbWUudG9Mb3dlckNhc2UoKT09ImlkIil7Y29udGludWU7Cn1pZihhLmF0dHJpYnV0ZXNbZF0udmFsdWUhPW51bGwmJmEuYXR0cmlidXRlc1tkXS52YWx1ZSE9Im51bGwiJiZhLmF0dHJpYnV0ZXNbZF0udmFsdWUhPSIiKXtjLnNldEF0dHJpYnV0ZShhLmF0dHJpYnV0ZXNbZF0ubmFtZSxhLmF0dHJpYnV0ZXNbZF0udmFsdWUpOwp9fWNhdGNoKGIpe2NvbnRpbnVlOwp9fX07ClRlbGVyaWsuV2ViLlVJLkdyaWQuUG9zaXRpb25EcmFnRWxlbWVudD1mdW5jdGlvbihhLGQpe3ZhciBiPSR0ZWxlcmlrLmlzVG91Y2hEZXZpY2U/JHRlbGVyaWsuZ2V0VG91Y2hFdmVudExvY2F0aW9uKGQpLng6ZC5jbGllbnRYOwp2YXIgYz0kdGVsZXJpay5pc1RvdWNoRGV2aWNlPyR0ZWxlcmlrLmdldFRvdWNoRXZlbnRMb2NhdGlvbihkKS55OmQuY2xpZW50WTsKYS5zdHlsZS50b3A9Yytkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wK2RvY3VtZW50LmJvZHkuc2Nyb2xsVG9wKzErInB4IjsKYS5zdHlsZS5sZWZ0PWIrZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQrZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0KzErInB4IjsKaWYoJHRlbGVyaWsuaXNPcGVyYXx8KCR0ZWxlcmlrLmlzT3BlcmF8fCR0ZWxlcmlrLmlzU2FmYXJpMikpe2Euc3R5bGUudG9wPXBhcnNlSW50KGEuc3R5bGUudG9wKS1kb2N1bWVudC5ib2R5LnNjcm9sbFRvcCsicHgiOwp9fTsKVGVsZXJpay5XZWIuVUkuR3JpZC5DbGVhckRvY3VtZW50RXZlbnRzPWZ1bmN0aW9uKCl7aWYoZG9jdW1lbnQub25tb3VzZWRvd24hPXRoaXMubW91c2VEb3duSGFuZGxlcil7dGhpcy5kb2N1bWVudE9uTW91c2VEb3duPWRvY3VtZW50Lm9ubW91c2Vkb3duOwp9aWYoZG9jdW1lbnQub25zZWxlY3RzdGFydCE9dGhpcy5zZWxlY3RTdGFydEhhbmRsZXIpe3RoaXMuZG9jdW1lbnRPblNlbGVjdFN0YXJ0PWRvY3VtZW50Lm9uc2VsZWN0c3RhcnQ7Cn1pZihkb2N1bWVudC5vbmRyYWdzdGFydCE9dGhpcy5kcmFnU3RhcnRIYW5kbGVyKXt0aGlzLmRvY3VtZW50T25EcmFnU3RhcnQ9ZG9jdW1lbnQub25kcmFnc3RhcnQ7Cn10aGlzLm1vdXNlRG93bkhhbmRsZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIGZhbHNlOwp9Owp0aGlzLnNlbGVjdFN0YXJ0SGFuZGxlcj1mdW5jdGlvbigpe3JldHVybiBmYWxzZTsKfTsKdGhpcy5kcmFnU3RhcnRIYW5kbGVyPWZ1bmN0aW9uKCl7cmV0dXJuIGZhbHNlOwp9Owpkb2N1bWVudC5vbm1vdXNlZG93bj10aGlzLm1vdXNlRG93bkhhbmRsZXI7CmRvY3VtZW50Lm9uc2VsZWN0c3RhcnQ9dGhpcy5zZWxlY3RTdGFydEhhbmRsZXI7CmRvY3VtZW50Lm9uZHJhZ3N0YXJ0PXRoaXMuZHJhZ1N0YXJ0SGFuZGxlcjsKfTsKVGVsZXJpay5XZWIuVUkuR3JpZC5SZXN0b3JlRG9jdW1lbnRFdmVudHM9ZnVuY3Rpb24oKXtpZigodHlwZW9mKHRoaXMuZG9jdW1lbnRPbk1vdXNlRG93bik9PSJmdW5jdGlvbiIpJiYoZG9jdW1lbnQub25tb3VzZWRvd24hPXRoaXMubW91c2VEb3duSGFuZGxlcikpe2RvY3VtZW50Lm9ubW91c2Vkb3duPXRoaXMuZG9jdW1lbnRPbk1vdXNlRG93bjsKfWVsc2V7ZG9jdW1lbnQub25tb3VzZWRvd249IiI7Cn1pZigodHlwZW9mKHRoaXMuZG9jdW1lbnRPblNlbGVjdFN0YXJ0KT09ImZ1bmN0aW9uIikmJihkb2N1bWVudC5vbnNlbGVjdHN0YXJ0IT10aGlzLnNlbGVjdFN0YXJ0SGFuZGxlcikpe2RvY3VtZW50Lm9uc2VsZWN0c3RhcnQ9dGhpcy5kb2N1bWVudE9uU2VsZWN0U3RhcnQ7Cn1lbHNle2RvY3VtZW50Lm9uc2VsZWN0c3RhcnQ9IiI7Cn1pZigodHlwZW9mKHRoaXMuZG9jdW1lbnRPbkRyYWdTdGFydCk9PSJmdW5jdGlvbiIpJiYoZG9jdW1lbnQub25kcmFnc3RhcnQhPXRoaXMuZHJhZ1N0YXJ0SGFuZGxlcikpe2RvY3VtZW50Lm9uZHJhZ3N0YXJ0PXRoaXMuZG9jdW1lbnRPbkRyYWdTdGFydDsKfWVsc2V7ZG9jdW1lbnQub25kcmFnc3RhcnQ9IiI7Cn19OwpUZWxlcmlrLldlYi5VSS5HcmlkLklzQ2hpbGRPZj1mdW5jdGlvbihhLGIpe2lmKCFhKXtyZXR1cm4gZmFsc2U7Cn13aGlsZShhLnBhcmVudE5vZGUpe2lmKGEucGFyZW50Tm9kZT09Yil7cmV0dXJuIHRydWU7Cn1hPWEucGFyZW50Tm9kZTsKfXJldHVybiBmYWxzZTsKfTsKVGVsZXJpay5XZWIuVUkuR3JpZC5HZXRDdXJyZW50RWxlbWVudD1mdW5jdGlvbihhKXtpZighYSl7dmFyIGE9d2luZG93LmV2ZW50Owp9dmFyIGI7CmlmKGEuc3JjRWxlbWVudCl7Yj1hLnNyY0VsZW1lbnQ7Cn1lbHNle2I9YS50YXJnZXQ7Cn1yZXR1cm4gYjsKfTsKVGVsZXJpay5XZWIuVUkuR3JpZC5HZXRDdXJyZW50VG91Y2hFbGVtZW50PWZ1bmN0aW9uKGEpe2lmKCR0ZWxlcmlrLmlzVG91Y2hEZXZpY2Upe3ZhciBiPSR0ZWxlcmlrLmdldFRvdWNoVGFyZ2V0KGEpOwpyZXR1cm4gYjsKfX07ClRlbGVyaWsuV2ViLlVJLkdyaWQuQ3JlYXRlUmVvcmRlckluZGljYXRvcnM9ZnVuY3Rpb24oZyxjLGgsZixiKXtpZigodGhpcy5SZW9yZGVySW5kaWNhdG9yMT09bnVsbCkmJih0aGlzLlJlb3JkZXJJbmRpY2F0b3IyPT1udWxsKSl7dGhpcy5SZW9yZGVySW5kaWNhdG9yMT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CnRoaXMuUmVvcmRlckluZGljYXRvcjI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwppZihoIT0iIil7dmFyIGk9bmV3IEltYWdlKCk7Cmkuc3JjPWgrIk1vdmVEb3duLmdpZiI7CnZhciBqPW5ldyBJbWFnZSgpOwpqLnNyYz1oKyJNb3ZlVXAuZ2lmIjsKdGhpcy5SZW9yZGVySW5kaWNhdG9yMS5pbm5lckhUTUw9JzxpbWcgc3JjPSInK2grJ01vdmVEb3duLmdpZiIgYWx0PSJyZW9yZGVyIGluZGljYXRvciIgLz4nOwp0aGlzLlJlb3JkZXJJbmRpY2F0b3IyLmlubmVySFRNTD0nPGltZyBzcmM9IicraCsnTW92ZVVwLmdpZiIgYWx0PSJyZW9yZGVyIGluZGljYXRvciIgLz4nOwp0aGlzLlJlb3JkZXJJbmRpY2F0b3IxLmNsYXNzTmFtZT0iR3JpZFJlb3JkZXJUb3BJbWFnZV8iK2M7CnRoaXMuUmVvcmRlckluZGljYXRvcjIuY2xhc3NOYW1lPSJHcmlkUmVvcmRlckJvdHRvbUltYWdlXyIrYzsKfWVsc2V7aWYoYz09IiIpe3RoaXMuUmVvcmRlckluZGljYXRvcjEuaW5uZXJIVE1MPSImZGFycjsiOwp0aGlzLlJlb3JkZXJJbmRpY2F0b3IyLmlubmVySFRNTD0iJnVhcnI7IjsKfWVsc2V7dGhpcy5SZW9yZGVySW5kaWNhdG9yMS5jbGFzc05hbWU9IkdyaWRSZW9yZGVyVG9wIEdyaWRSZW9yZGVyVG9wXyIrYzsKdGhpcy5SZW9yZGVySW5kaWNhdG9yMi5jbGFzc05hbWU9IkdyaWRSZW9yZGVyQm90dG9tIEdyaWRSZW9yZGVyQm90dG9tXyIrYzsKfX10aGlzLlJlb3JkZXJJbmRpY2F0b3IxLnN0eWxlLmJhY2tncm91bmRDb2xvcj0idHJhbnNwYXJlbnQiOwp0aGlzLlJlb3JkZXJJbmRpY2F0b3IxLnN0eWxlLmNvbG9yPSJkYXJrYmx1ZSI7CnRoaXMuUmVvcmRlckluZGljYXRvcjEuc3R5bGUuZm9udFNpemU9IjFweCI7CnRoaXMuUmVvcmRlckluZGljYXRvcjIuc3R5bGUuYmFja2dyb3VuZENvbG9yPXRoaXMuUmVvcmRlckluZGljYXRvcjEuc3R5bGUuYmFja2dyb3VuZENvbG9yOwp0aGlzLlJlb3JkZXJJbmRpY2F0b3IyLnN0eWxlLmNvbG9yPXRoaXMuUmVvcmRlckluZGljYXRvcjEuc3R5bGUuY29sb3I7CnRoaXMuUmVvcmRlckluZGljYXRvcjIuc3R5bGUuZm9udFNpemU9dGhpcy5SZW9yZGVySW5kaWNhdG9yMS5zdHlsZS5mb250U2l6ZTsKdmFyIGE9JGZpbmQoYik7CnZhciBlPTA7CnZhciBkPTA7CmlmKGYmJmcubm9kZU5hbWU9PSJUSCImJmEmJmEuR3JpZERhdGFEaXYpe3ZhciBlPWEuR3JpZERhdGFEaXYuc2Nyb2xsTGVmdDsKaWYoIWEuQ2xpZW50U2V0dGluZ3MuU2Nyb2xsaW5nLlVzZVN0YXRpY0hlYWRlcnMpe3ZhciBkPWEuR3JpZERhdGFEaXYuc2Nyb2xsVG9wOwp9fXRoaXMuUmVvcmRlckluZGljYXRvcjEuc3R5bGUudG9wPVRlbGVyaWsuV2ViLlVJLkdyaWQuRmluZFBvc1koZyktdGhpcy5SZW9yZGVySW5kaWNhdG9yMS5vZmZzZXRIZWlnaHQrInB4IjsKdGhpcy5SZW9yZGVySW5kaWNhdG9yMS5zdHlsZS5sZWZ0PVRlbGVyaWsuV2ViLlVJLkdyaWQuRmluZFBvc1goZykrInB4IjsKdGhpcy5SZW9yZGVySW5kaWNhdG9yMi5zdHlsZS50b3A9VGVsZXJpay5XZWIuVUkuR3JpZC5GaW5kUG9zWShnKStnLm9mZnNldEhlaWdodCsicHgiOwp0aGlzLlJlb3JkZXJJbmRpY2F0b3IyLnN0eWxlLmxlZnQ9dGhpcy5SZW9yZGVySW5kaWNhdG9yMS5zdHlsZS5sZWZ0Owp0aGlzLlJlb3JkZXJJbmRpY2F0b3IxLnN0eWxlLnZpc2liaWxpdHk9ImhpZGRlbiI7CnRoaXMuUmVvcmRlckluZGljYXRvcjEuc3R5bGUuZGlzcGxheT0ibm9uZSI7CnRoaXMuUmVvcmRlckluZGljYXRvcjEuc3R5bGUucG9zaXRpb249ImFic29sdXRlIjsKdGhpcy5SZW9yZGVySW5kaWNhdG9yMi5zdHlsZS52aXNpYmlsaXR5PXRoaXMuUmVvcmRlckluZGljYXRvcjEuc3R5bGUudmlzaWJpbGl0eTsKdGhpcy5SZW9yZGVySW5kaWNhdG9yMi5zdHlsZS5kaXNwbGF5PXRoaXMuUmVvcmRlckluZGljYXRvcjEuc3R5bGUuZGlzcGxheTsKdGhpcy5SZW9yZGVySW5kaWNhdG9yMi5zdHlsZS5wb3NpdGlvbj10aGlzLlJlb3JkZXJJbmRpY2F0b3IxLnN0eWxlLnBvc2l0aW9uOwpkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuUmVvcmRlckluZGljYXRvcjEpOwpkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuUmVvcmRlckluZGljYXRvcjIpOwppZihoIT0iIil7dGhpcy5SZW9yZGVySW5kaWNhdG9yMS5zdHlsZS5tYXJnaW5MZWZ0PS1wYXJzZUludChpLndpZHRoLzIpKyJweCI7CnRoaXMuUmVvcmRlckluZGljYXRvcjIuc3R5bGUubWFyZ2luTGVmdD0tcGFyc2VJbnQoai53aWR0aC8yKSsicHgiOwppPW51bGw7Cmo9bnVsbDsKfX19OwpUZWxlcmlrLldlYi5VSS5HcmlkLk5hdmlnYXRlVG9QYWdlPWZ1bmN0aW9uKGMsYSl7dmFyIGI9JGZpbmQoYyk7CmlmKGIpe2IucGFnZShhKTsKfX07ClRlbGVyaWsuV2ViLlVJLkdyaWQuRGVzdHJveVJlb3JkZXJJbmRpY2F0b3JzPWZ1bmN0aW9uKCl7aWYoKHRoaXMuUmVvcmRlckluZGljYXRvcjEhPW51bGwpJiYodGhpcy5SZW9yZGVySW5kaWNhdG9yMiE9bnVsbCkpe2RvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGhpcy5SZW9yZGVySW5kaWNhdG9yMSk7CmRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGhpcy5SZW9yZGVySW5kaWNhdG9yMik7CnRoaXMuUmVvcmRlckluZGljYXRvcjE9bnVsbDsKdGhpcy5SZW9yZGVySW5kaWNhdG9yMj1udWxsOwp9fTsKVGVsZXJpay5XZWIuVUkuR3JpZC5Nb3ZlUmVvcmRlckluZGljYXRvcnM9ZnVuY3Rpb24oaCxpLGcsYil7aWYoKHRoaXMuUmVvcmRlckluZGljYXRvcjEhPW51bGwpJiYodGhpcy5SZW9yZGVySW5kaWNhdG9yMiE9bnVsbCkpe3RoaXMuUmVvcmRlckluZGljYXRvcjEuc3R5bGUudmlzaWJpbGl0eT0idmlzaWJsZSI7CnRoaXMuUmVvcmRlckluZGljYXRvcjEuc3R5bGUuZGlzcGxheT0iIjsKdGhpcy5SZW9yZGVySW5kaWNhdG9yMi5zdHlsZS52aXNpYmlsaXR5PSJ2aXNpYmxlIjsKdGhpcy5SZW9yZGVySW5kaWNhdG9yMi5zdHlsZS5kaXNwbGF5PSIiOwp2YXIgYT0kZmluZChiKTsKdmFyIGQ9MDsKdmFyIGM9MDsKaWYoZyYmaS5ub2RlTmFtZT09IlRIIiYmYSYmYS5HcmlkRGF0YURpdil7dmFyIGQ9YS5HcmlkRGF0YURpdi5zY3JvbGxMZWZ0OwppZighYS5DbGllbnRTZXR0aW5ncy5TY3JvbGxpbmcuVXNlU3RhdGljSGVhZGVycyl7dmFyIGM9YS5HcmlkRGF0YURpdi5zY3JvbGxUb3A7Cn19dmFyIGY9MDsKaWYoZyYmaS5ub2RlTmFtZT09IlRIIiYmYSYmdGhpcy5fY29sdW1uSW5pdGlhdG9ySW5kZXghPW51bGwmJnRoaXMuX2NvbHVtbk92ZXJJbmRleCE9bnVsbCYmdGhpcy5fY29sdW1uSW5pdGlhdG9ySW5kZXg8dGhpcy5fY29sdW1uT3ZlckluZGV4KXtmPWkub2Zmc2V0V2lkdGg7Cn10aGlzLlJlb3JkZXJJbmRpY2F0b3IxLnN0eWxlLnRvcD1UZWxlcmlrLldlYi5VSS5HcmlkLkZpbmRQb3NZKGkpLXRoaXMuUmVvcmRlckluZGljYXRvcjEub2Zmc2V0SGVpZ2h0KyJweCI7CnRoaXMuUmVvcmRlckluZGljYXRvcjEuc3R5bGUubGVmdD1UZWxlcmlrLldlYi5VSS5HcmlkLkZpbmRQb3NYKGkpK2YrInB4IjsKdGhpcy5SZW9yZGVySW5kaWNhdG9yMi5zdHlsZS50b3A9VGVsZXJpay5XZWIuVUkuR3JpZC5GaW5kUG9zWShpKStpLm9mZnNldEhlaWdodCsicHgiOwp0aGlzLlJlb3JkZXJJbmRpY2F0b3IyLnN0eWxlLmxlZnQ9dGhpcy5SZW9yZGVySW5kaWNhdG9yMS5zdHlsZS5sZWZ0Owp9fTsKVGVsZXJpay5XZWIuVUkuR3JpZC5nZXRWaXNpYmxlQ29scz1mdW5jdGlvbihjKXt2YXIgYT0wOwpmb3IodmFyIGI9MCxkPWMubGVuZ3RoOwpiPGQ7CmIrKyl7aWYoY1tiXS5zdHlsZS5kaXNwbGF5PT0ibm9uZSIpe2NvbnRpbnVlOwp9YSsrOwp9cmV0dXJuIGE7Cn07ClRlbGVyaWsuV2ViLlVJLkdyaWQuaGlkZVNob3dDZWxscz1mdW5jdGlvbihlLGcsbyxhKXt2YXIgaD1UZWxlcmlrLldlYi5VSS5HcmlkLmdldFZpc2libGVDb2xzKGEpOwp2YXIgcT0kZmluZChlLmlkKTsKZm9yKHZhciBtPTAsZj1lLnJvd3MubGVuZ3RoOwptPGY7Cm0rKyl7dmFyIHA9ZmFsc2U7CnZhciBuPTA7CnZhciBjPW51bGw7CmlmKGUucm93c1ttXS5jZWxscy5sZW5ndGghPWgpe2lmKGUucm93c1ttXS5jZWxscy5sZW5ndGg9PTEpe2Uucm93c1ttXS5jZWxsc1swXS5jb2xTcGFuPWh8fDE7Cn1lbHNle2Zvcih2YXIgaz0wOwprPGUucm93c1ttXS5jZWxscy5sZW5ndGg7CmsrKyl7Yz1lLnJvd3NbbV0uY2VsbHNba107CmlmKFRlbGVyaWsuV2ViLlVJLkdyaWQuX3RyeVNldENvbFNwYW5PbkRldGFpbFRhYmxlKGMpKXtpZihxJiYhcS5faXNIZWxwZXJDb2x1bW5UeXBlKHEuZ2V0X2NvbHVtbnMoKVtnXS5fZGF0YS5Db2x1bW5UeXBlKSl7cD10cnVlOwpicmVhazsKfWJyZWFrOwp9bj1jLmNvbFNwYW47CmlmKChuPjEmJmsrbj49Zyl8fChjLnBhcmVudE5vZGUuY2xhc3NOYW1lLmluZGV4T2YoInJnR3JvdXBIZWFkZXIiKSE9LTEmJmMuY2xhc3NOYW1lLmluZGV4T2YoInJnR3JvdXBDb2wiKT09LTEpKXtpZighbyl7dmFyIGI9ZS5yb3dzW21dLmNlbGxzW2tdLmNvbFNwYW4tMTsKaWYoYjw9MCl7Yj0xOwp9ZS5yb3dzW21dLmNlbGxzW2tdLmNvbFNwYW49YjsKfWVsc2V7ZS5yb3dzW21dLmNlbGxzW2tdLmNvbFNwYW49ZS5yb3dzW21dLmNlbGxzW2tdLmNvbFNwYW4rMTsKfWJyZWFrOwp9fX19ZWxzZXtmb3IodmFyIGs9MDsKazxlLnJvd3NbbV0uY2VsbHMubGVuZ3RoOwprKyspe2M9ZS5yb3dzW21dLmNlbGxzW2tdOwppZihUZWxlcmlrLldlYi5VSS5HcmlkLl90cnlTZXRDb2xTcGFuT25EZXRhaWxUYWJsZShjKSl7dmFyIHE9JGZpbmQoZS5pZCk7CmlmKHEmJiFxLl9pc0hlbHBlckNvbHVtblR5cGUocS5nZXRfY29sdW1ucygpW2ddLl9kYXRhLkNvbHVtblR5cGUpKXtwPXRydWU7CmJyZWFrOwp9fX19Yz1lLnJvd3NbbV0uY2VsbHNbZ107CnZhciBkPTE7CmlmKCFvJiYhcCl7aWYoYyE9bnVsbCYmYy5jb2xTcGFuPT1kJiZjLnN0eWxlLmRpc3BsYXkhPSJub25lIil7Yy5zdHlsZS5kaXNwbGF5PSJub25lIjsKaWYobmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoIm1zaWUiKSE9LTEmJm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKCI2LjAiKSE9LTEpe1RlbGVyaWsuV2ViLlVJLkdyaWQuX2hpZGVTaG93U2VsZWN0KGMsbyk7Cn19fWVsc2V7aWYoIXApe2lmKGMhPW51bGwmJmMuY29sU3Bhbj09ZCYmYy5zdHlsZS5kaXNwbGF5PT0ibm9uZSIpe2Muc3R5bGUuZGlzcGxheT0od2luZG93Lm5ldHNjYXBlKT8idGFibGUtY2VsbCI6IiI7Cn1pZihuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZigibXNpZSIpIT0tMSYmbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoIjYuMCIpIT0tMSl7VGVsZXJpay5XZWIuVUkuR3JpZC5faGlkZVNob3dTZWxlY3QoYyxvKTsKfX19fX07ClRlbGVyaWsuV2ViLlVJLkdyaWQuX3RyeVNldENvbFNwYW5PbkRldGFpbFRhYmxlPWZ1bmN0aW9uKGEpe3ZhciBiPSR0ZWxlcmlrLmdldEZpcnN0Q2hpbGRCeVRhZ05hbWUoYSwidGFibGUiLDApOwp2YXIgYzsKaWYoYil7Yz0kZmluZChiLmlkKTsKfWlmKGMpe3ZhciBkPWMuZ2V0X3BhcmVudFZpZXcoKS5fZ2V0VmlzaWJsZUNvbHVtbnNDb3VudCgpOwphLmNvbFNwYW49ZDsKcmV0dXJuIHRydWU7Cn1yZXR1cm4gZmFsc2U7Cn07ClRlbGVyaWsuV2ViLlVJLkdyaWQuX2hpZGVTaG93U2VsZWN0PWZ1bmN0aW9uKGEsZCl7aWYoIWEpe3JldHVybjsKfXZhciBiPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInNlbGVjdCIpOwpmb3IodmFyIGM9MDsKYzxiLmxlbmd0aDsKYysrKXtiW2NdLnN0eWxlLmRpc3BsYXk9KGQpPyIiOiJub25lIjsKfX07ClRlbGVyaWsuV2ViLlVJLkdyaWQuRmluZFBvc1g9ZnVuY3Rpb24oYSl7cmV0dXJuIFRlbGVyaWsuV2ViLlVJLkdyaWQuR2V0TG9jYXRpb24oYSkueDsKfTsKVGVsZXJpay5XZWIuVUkuR3JpZC5GaW5kUG9zWT1mdW5jdGlvbihhKXtyZXR1cm4gVGVsZXJpay5XZWIuVUkuR3JpZC5HZXRMb2NhdGlvbihhKS55Owp9OwpUZWxlcmlrLldlYi5VSS5HcmlkLkNyZWF0ZURyYWdEcm9wPWZ1bmN0aW9uKGQsYixnKXtpZihnKXt2YXIgaD1iLmdldF9lbGVtZW50KCkucGFyZW50Tm9kZTsKdGhpcy5fY29sdW1uSW5pdGlhdG9ySW5kZXg9Yi5nZXRfb3duZXIoKS5fZ2V0Q2VsbEluZGV4QnlDb2x1bW5VbmlxdWVOYW1lRnJvbVRhYmxlUm93RWxlbWVudChoLGIuZ2V0X2VsZW1lbnQoKS5VbmlxdWVOYW1lKTsKfVRlbGVyaWsuV2ViLlVJLkdyaWQuQ3JlYXRlUmVvcmRlckluZGljYXRvcnMoYi5nZXRfZWxlbWVudCgpLGIuX293bmVyLl9vd25lci5Ta2luLGIuX293bmVyLl9vd25lci5faW1hZ2VzUGF0aCxnLGIuX293bmVyLl9vd25lci5nZXRfaWQoKSk7CnRoaXMuX21vdmVIZWFkZXJEaXY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CnZhciBjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRhYmxlIik7CmlmKHRoaXMuX21vdmVIZWFkZXJEaXYubWVyZ2VBdHRyaWJ1dGVzKXt0aGlzLl9tb3ZlSGVhZGVyRGl2Lm1lcmdlQXR0cmlidXRlcyhiLl9vd25lci5fb3duZXIuZ2V0X2VsZW1lbnQoKSk7Cn1lbHNle1RlbGVyaWsuV2ViLlVJLkdyaWQuQ29weUF0dHJpYnV0ZXModGhpcy5fbW92ZUhlYWRlckRpdixiLmdldF9lbGVtZW50KCkpOwp9dGhpcy5fbW92ZUhlYWRlckRpdi5zdHlsZS5tYXJnaW49MDsKaWYoYy5tZXJnZUF0dHJpYnV0ZXMpe2MubWVyZ2VBdHRyaWJ1dGVzKGIuX293bmVyLmdldF9lbGVtZW50KCkpOwp9ZWxzZXtUZWxlcmlrLldlYi5VSS5HcmlkLkNvcHlBdHRyaWJ1dGVzKGMsYi5fb3duZXIuZ2V0X2VsZW1lbnQoKSk7Cn1jLnN0eWxlLm1hcmdpbj0iMHB4IjsKYy5zdHlsZS5oZWlnaHQ9Yi5nZXRfZWxlbWVudCgpLm9mZnNldEhlaWdodCsicHgiOwpjLnN0eWxlLndpZHRoPWIuZ2V0X2VsZW1lbnQoKS5vZmZzZXRXaWR0aCsicHgiOwpjLnN0eWxlLmJvcmRlcj0iMHB4IjsKYy5zdHlsZS5ib3JkZXJDb2xsYXBzZT0iY29sbGFwc2UiOwpjLnN0eWxlLnBhZGRpbmc9IjBweCI7CnZhciBmPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRoZWFkIik7CnZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRyIik7CmMuYXBwZW5kQ2hpbGQoZik7CmYuYXBwZW5kQ2hpbGQoYSk7CmEuYXBwZW5kQ2hpbGQoYi5nZXRfZWxlbWVudCgpLmNsb25lTm9kZSh0cnVlKSk7CnRoaXMuX21vdmVIZWFkZXJEaXYuYXBwZW5kQ2hpbGQoYyk7CmlmKCEkdGVsZXJpay5pc0lFKXt0aGlzLl9tb3ZlSGVhZGVyRGl2LmNsYXNzTmFtZSs9IiAiK2IuX293bmVyLl9vd25lci5nZXRfZWxlbWVudCgpLmNsYXNzTmFtZTsKfWRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5fbW92ZUhlYWRlckRpdik7CnRoaXMuX21vdmVIZWFkZXJEaXYuc3R5bGUuaGVpZ2h0PWMuc3R5bGUuaGVpZ2h0Owp0aGlzLl9tb3ZlSGVhZGVyRGl2LnN0eWxlLndpZHRoPWMuc3R5bGUud2lkdGg7CnRoaXMuX21vdmVIZWFkZXJEaXYuc3R5bGUucG9zaXRpb249ImFic29sdXRlIjsKdGhpcy5fbW92ZUhlYWRlckRpdi5zdHlsZS5jdXJzb3I9Im1vdmUiOwp0aGlzLl9tb3ZlSGVhZGVyRGl2LnN0eWxlLmRpc3BsYXk9Im5vbmUiOwp0aGlzLl9tb3ZlSGVhZGVyRGl2LlVuaXF1ZU5hbWU9Yi5nZXRfZWxlbWVudCgpLlVuaXF1ZU5hbWU7ClRlbGVyaWsuV2ViLlVJLkdyaWQuQ2xlYXJEb2N1bWVudEV2ZW50cygpOwp9OwpUZWxlcmlrLldlYi5VSS5HcmlkLk1vdmVEcmFnRHJvcD1mdW5jdGlvbihjLGEsaCl7aWYodGhpcy5fbW92ZUhlYWRlckRpdiE9bnVsbCl7aWYodHlwZW9mKHRoaXMuX21vdmVIZWFkZXJEaXYuc3R5bGUuZmlsdGVyKSE9InVuZGVmaW5lZCIpe3RoaXMuX21vdmVIZWFkZXJEaXYuc3R5bGUuZmlsdGVyPSJhbHBoYShvcGFjaXR5PTgwKTsiOwp9ZWxzZXtpZih0eXBlb2YodGhpcy5fbW92ZUhlYWRlckRpdi5zdHlsZS5Nb3pPcGFjaXR5KSE9InVuZGVmaW5lZCIpe3RoaXMuX21vdmVIZWFkZXJEaXYuc3R5bGUuTW96T3BhY2l0eT0wLjg7Cn1lbHNle2lmKHR5cGVvZih0aGlzLl9tb3ZlSGVhZGVyRGl2LnN0eWxlLm9wYWNpdHkpIT0idW5kZWZpbmVkIil7dGhpcy5fbW92ZUhlYWRlckRpdi5zdHlsZS5vcGFjaXR5PTAuODsKfX19dGhpcy5fbW92ZUhlYWRlckRpdi5zdHlsZS52aXNpYmlsaXR5PSIiOwp0aGlzLl9tb3ZlSGVhZGVyRGl2LnN0eWxlLmRpc3BsYXk9IiI7ClRlbGVyaWsuV2ViLlVJLkdyaWQuUG9zaXRpb25EcmFnRWxlbWVudCh0aGlzLl9tb3ZlSGVhZGVyRGl2LGMpOwp2YXIgZDsKaWYoJHRlbGVyaWsuaXNUb3VjaERldmljZSl7ZD0kdGVsZXJpay5nZXRUb3VjaFRhcmdldChjKTsKfWVsc2V7ZD1UZWxlcmlrLldlYi5VSS5HcmlkLkdldEN1cnJlbnRFbGVtZW50KGMpOwp9aWYoZCE9bnVsbCl7aWYoaCYmZC50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJ0aCIpe3RoaXMuX2NvbHVtbk92ZXJJbmRleD1hLmdldF9vd25lcigpLl9nZXRDZWxsSW5kZXhCeUNvbHVtblVuaXF1ZU5hbWVGcm9tVGFibGVSb3dFbGVtZW50KGQucGFyZW50Tm9kZSxkLlVuaXF1ZU5hbWUpOwp9ZWxzZXtpZihoJiZkLnBhcmVudE5vZGUmJmQucGFyZW50Tm9kZS50YWdOYW1lJiZkLnBhcmVudE5vZGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT0idGgiKXt0aGlzLl9jb2x1bW5PdmVySW5kZXg9YS5nZXRfb3duZXIoKS5fZ2V0Q2VsbEluZGV4QnlDb2x1bW5VbmlxdWVOYW1lRnJvbVRhYmxlUm93RWxlbWVudChkLnBhcmVudE5vZGUucGFyZW50Tm9kZSxkLnBhcmVudE5vZGUuVW5pcXVlTmFtZSk7CmQ9ZC5wYXJlbnROb2RlOwp9fWlmKFRlbGVyaWsuV2ViLlVJLkdyaWQuSXNDaGlsZE9mKGQsYS5fb3duZXIuZ2V0X2VsZW1lbnQoKSl8fChhLl9vd25lci5fb3duZXIuQ2xpZW50U2V0dGluZ3MuQWxsb3dEcmFnVG9Hcm91cCYmYS5fb3duZXIuX293bmVyLl9ncm91cFBhbmVsJiYoVGVsZXJpay5XZWIuVUkuR3JpZC5Jc0NoaWxkT2YoZCxhLl9vd25lci5fb3duZXIuX2dyb3VwUGFuZWwuZ2V0X2VsZW1lbnQoKSl8fCgkdGVsZXJpay5pc1RvdWNoRGV2aWNlJiZkPT1hLl9vd25lci5fb3duZXIuX2dyb3VwUGFuZWwuZ2V0X2VsZW1lbnQoKSkpKSl7aWYoZCE9YS5nZXRfZWxlbWVudCgpJiZkLnBhcmVudE5vZGU9PWEuZ2V0X2VsZW1lbnQoKS5wYXJlbnROb2RlKXtpZighYS5faGllcmFyY2hpY2FsSW5kZXgpe3ZhciBiPWEuX293bmVyLmdldENvbHVtbkJ5VW5pcXVlTmFtZShkLlVuaXF1ZU5hbWUpOwp2YXIgZj10cnVlOwppZihhLl9vd25lci5faGFzTXVsdGlIZWFkZXJzKXtmPSEhYSYmISFiJiZhLmdldF9jb2x1bW5Hcm91cE5hbWUoKT09Yi5nZXRfY29sdW1uR3JvdXBOYW1lKCk7Cn1pZihiJiZiLl9kYXRhLlJlb3JkZXJhYmxlJiZiLl9vd25lci5fb3duZXIuQ2xpZW50U2V0dGluZ3MuQWxsb3dDb2x1bW5zUmVvcmRlciYmZil7ZC50aXRsZT1hLl9vd25lci5fb3duZXIuQ2xpZW50U2V0dGluZ3MuQ2xpZW50TWVzc2FnZXMuRHJvcEhlcmVUb1Jlb3JkZXI7ClRlbGVyaWsuV2ViLlVJLkdyaWQuTW92ZVJlb3JkZXJJbmRpY2F0b3JzKGMsZCxoLGEuX293bmVyLl9vd25lci5nZXRfaWQoKSk7Cn19ZWxzZXtpZihkLnBhcmVudE5vZGUuY2VsbHMmJmQhPWQucGFyZW50Tm9kZS5jZWxsc1tkLnBhcmVudE5vZGUuY2VsbHMubGVuZ3RoLTFdKXtkLnRpdGxlPWEuX293bmVyLl9vd25lci5DbGllbnRTZXR0aW5ncy5DbGllbnRNZXNzYWdlcy5Ecm9wSGVyZVRvUmVvcmRlcjsKVGVsZXJpay5XZWIuVUkuR3JpZC5Nb3ZlUmVvcmRlckluZGljYXRvcnMoYyxkLGgsYS5fb3duZXIuX293bmVyLmdldF9pZCgpKTsKfX19ZWxzZXtpZihhLl9vd25lci5fb3duZXIuQ2xpZW50U2V0dGluZ3MuQWxsb3dEcmFnVG9Hcm91cCYmYS5fb3duZXIuX293bmVyLl9ncm91cFBhbmVsJiYoVGVsZXJpay5XZWIuVUkuR3JpZC5Jc0NoaWxkT2YoZCxhLl9vd25lci5fb3duZXIuX2dyb3VwUGFuZWwuZ2V0X2VsZW1lbnQoKSl8fCgkdGVsZXJpay5pc1RvdWNoRGV2aWNlJiZkPT1hLl9vd25lci5fb3duZXIuX2dyb3VwUGFuZWwuZ2V0X2VsZW1lbnQoKSkpKXtUZWxlcmlrLldlYi5VSS5HcmlkLk1vdmVSZW9yZGVySW5kaWNhdG9ycyhjLGEuX293bmVyLl9vd25lci5fZ3JvdXBQYW5lbC5nZXRfZWxlbWVudCgpLGgsYS5fb3duZXIuX293bmVyLmdldF9pZCgpKTsKfWVsc2V7VGVsZXJpay5XZWIuVUkuR3JpZC5SZW9yZGVySW5kaWNhdG9yMS5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iOwpUZWxlcmlrLldlYi5VSS5HcmlkLlJlb3JkZXJJbmRpY2F0b3IxLnN0eWxlLmRpc3BsYXk9Im5vbmUiOwpUZWxlcmlrLldlYi5VSS5HcmlkLlJlb3JkZXJJbmRpY2F0b3IxLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSI7ClRlbGVyaWsuV2ViLlVJLkdyaWQuUmVvcmRlckluZGljYXRvcjIuc3R5bGUudmlzaWJpbGl0eT1UZWxlcmlrLldlYi5VSS5HcmlkLlJlb3JkZXJJbmRpY2F0b3IxLnN0eWxlLnZpc2liaWxpdHk7ClRlbGVyaWsuV2ViLlVJLkdyaWQuUmVvcmRlckluZGljYXRvcjIuc3R5bGUuZGlzcGxheT1UZWxlcmlrLldlYi5VSS5HcmlkLlJlb3JkZXJJbmRpY2F0b3IxLnN0eWxlLmRpc3BsYXk7ClRlbGVyaWsuV2ViLlVJLkdyaWQuUmVvcmRlckluZGljYXRvcjIuc3R5bGUucG9zaXRpb249VGVsZXJpay5XZWIuVUkuR3JpZC5SZW9yZGVySW5kaWNhdG9yMS5zdHlsZS5wb3NpdGlvbjsKfX1pZihhKXt2YXIgZz1hLl9vd25lci5fb3duZXI7Cn1pZihnJiZnLkNsaWVudFNldHRpbmdzLlNjcm9sbGluZy5BbGxvd1Njcm9sbCYmZy5fZ3JpZERhdGFEaXYpe1RlbGVyaWsuV2ViLlVJLkdyaWQuQXV0b1Njcm9sbEhvcml6b250YWxseShnLGQpOwp9fWVsc2V7aWYoVGVsZXJpay5XZWIuVUkuR3JpZC5SZW9yZGVySW5kaWNhdG9yMS5zdHlsZS52aXNpYmlsaXR5IT0iaGlkZGVuIil7VGVsZXJpay5XZWIuVUkuR3JpZC5SZW9yZGVySW5kaWNhdG9yMS5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iOwpUZWxlcmlrLldlYi5VSS5HcmlkLlJlb3JkZXJJbmRpY2F0b3IxLnN0eWxlLmRpc3BsYXk9Im5vbmUiOwpUZWxlcmlrLldlYi5VSS5HcmlkLlJlb3JkZXJJbmRpY2F0b3IxLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSI7ClRlbGVyaWsuV2ViLlVJLkdyaWQuUmVvcmRlckluZGljYXRvcjIuc3R5bGUudmlzaWJpbGl0eT1UZWxlcmlrLldlYi5VSS5HcmlkLlJlb3JkZXJJbmRpY2F0b3IxLnN0eWxlLnZpc2liaWxpdHk7ClRlbGVyaWsuV2ViLlVJLkdyaWQuUmVvcmRlckluZGljYXRvcjIuc3R5bGUuZGlzcGxheT1UZWxlcmlrLldlYi5VSS5HcmlkLlJlb3JkZXJJbmRpY2F0b3IxLnN0eWxlLmRpc3BsYXk7ClRlbGVyaWsuV2ViLlVJLkdyaWQuUmVvcmRlckluZGljYXRvcjIuc3R5bGUucG9zaXRpb249VGVsZXJpay5XZWIuVUkuR3JpZC5SZW9yZGVySW5kaWNhdG9yMS5zdHlsZS5wb3NpdGlvbjsKfX19fX07ClRlbGVyaWsuV2ViLlVJLkdyaWQuQXV0b1Njcm9sbEhvcml6b250YWxseT1mdW5jdGlvbihrLGYpe2lmKCFrfHwhdGhpc3x8ay5DbGllbnRTZXR0aW5ncy5TY3JvbGxpbmcuRnJvemVuQ29sdW1uc0NvdW50PjApe3JldHVybjsKfXZhciBoLGo7CnZhciBlPWsuX2dyaWREYXRhRGl2OwppZighZXx8IXRoaXMuX21vdmVIZWFkZXJEaXYpe3JldHVybjsKfXZhciBnPVRlbGVyaWsuV2ViLlVJLkdyaWQuR2V0TG9jYXRpb24odGhpcy5fbW92ZUhlYWRlckRpdik7Cmg9VGVsZXJpay5XZWIuVUkuR3JpZC5HZXRMb2NhdGlvbihlKS54OwpqPWgrZS5vZmZzZXRXaWR0aDsKdmFyIGE9ZS5zY3JvbGxMZWZ0PD0wOwp2YXIgaT1lLnNjcm9sbExlZnQ+PShlLnNjcm9sbFdpZHRoLWUub2Zmc2V0V2lkdGgrMTYpOwp2YXIgZD1nLngtaDsKdmFyIGI9ai1nLng7CmlmKGQ8KDUwK1RlbGVyaWsuV2ViLlVJLkdyaWQuR2V0U2Nyb2xsQmFyV2lkdGgoKSkmJiFhKXt2YXIgYz0oMTAtKGQvNSkpOwplLnNjcm9sbExlZnQ9ZS5zY3JvbGxMZWZ0LWM7CndpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7VGVsZXJpay5XZWIuVUkuR3JpZC5BdXRvU2Nyb2xsSG9yaXpvbnRhbGx5KGssZik7Cn0sMTAwKTsKVGVsZXJpay5XZWIuVUkuR3JpZC5IaWRlUmVvcmRlckluZGljYXRvcnMoKTsKfWVsc2V7aWYoYjwoNTArVGVsZXJpay5XZWIuVUkuR3JpZC5HZXRTY3JvbGxCYXJXaWR0aCgpKSYmIWkpe3ZhciBjPSgxMC0oYi81KSk7CmUuc2Nyb2xsTGVmdD1lLnNjcm9sbExlZnQrYzsKd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtUZWxlcmlrLldlYi5VSS5HcmlkLkF1dG9TY3JvbGxIb3Jpem9udGFsbHkoayxmKTsKfSwxMDApOwpUZWxlcmlrLldlYi5VSS5HcmlkLkhpZGVSZW9yZGVySW5kaWNhdG9ycygpOwp9fX07ClRlbGVyaWsuV2ViLlVJLkdyaWQuSGlkZVJlb3JkZXJJbmRpY2F0b3JzPWZ1bmN0aW9uKCl7aWYoIVRlbGVyaWsuV2ViLlVJLkdyaWQuUmVvcmRlckluZGljYXRvcjF8fCFUZWxlcmlrLldlYi5VSS5HcmlkLlJlb3JkZXJJbmRpY2F0b3IyKXtyZXR1cm47Cn1UZWxlcmlrLldlYi5VSS5HcmlkLlJlb3JkZXJJbmRpY2F0b3IxLnN0eWxlLnZpc2liaWxpdHk9ImhpZGRlbiI7ClRlbGVyaWsuV2ViLlVJLkdyaWQuUmVvcmRlckluZGljYXRvcjEuc3R5bGUuZGlzcGxheT0ibm9uZSI7ClRlbGVyaWsuV2ViLlVJLkdyaWQuUmVvcmRlckluZGljYXRvcjEuc3R5bGUucG9zaXRpb249ImFic29sdXRlIjsKVGVsZXJpay5XZWIuVUkuR3JpZC5SZW9yZGVySW5kaWNhdG9yMi5zdHlsZS52aXNpYmlsaXR5PVRlbGVyaWsuV2ViLlVJLkdyaWQuUmVvcmRlckluZGljYXRvcjEuc3R5bGUudmlzaWJpbGl0eTsKVGVsZXJpay5XZWIuVUkuR3JpZC5SZW9yZGVySW5kaWNhdG9yMi5zdHlsZS5kaXNwbGF5PVRlbGVyaWsuV2ViLlVJLkdyaWQuUmVvcmRlckluZGljYXRvcjEuc3R5bGUuZGlzcGxheTsKVGVsZXJpay5XZWIuVUkuR3JpZC5SZW9yZGVySW5kaWNhdG9yMi5zdHlsZS5wb3NpdGlvbj1UZWxlcmlrLldlYi5VSS5HcmlkLlJlb3JkZXJJbmRpY2F0b3IxLnN0eWxlLnBvc2l0aW9uOwp9OwpUZWxlcmlrLldlYi5VSS5HcmlkLkRlc3Ryb3lEcmFnRHJvcD1mdW5jdGlvbigpe2lmKHRoaXMuX21vdmVIZWFkZXJEaXYhPW51bGwpe3ZhciBhPXRoaXMuX21vdmVIZWFkZXJEaXYucGFyZW50Tm9kZTsKYS5yZW1vdmVDaGlsZCh0aGlzLl9tb3ZlSGVhZGVyRGl2KTsKdGhpcy5fbW92ZUhlYWRlckRpdj1udWxsOwpUZWxlcmlrLldlYi5VSS5HcmlkLlJlc3RvcmVEb2N1bWVudEV2ZW50cygpOwp9dGhpcy5fY29sdW1uSW5pdGlhdG9ySW5kZXg9bnVsbDsKdGhpcy5fY29sdW1uT3ZlckluZGV4PW51bGw7ClRlbGVyaWsuV2ViLlVJLkdyaWQuRGVzdHJveVJlb3JkZXJJbmRpY2F0b3JzKCk7Cn07ClRlbGVyaWsuV2ViLlVJLkdyaWQuQW5pbWF0ZVJldmVydERyYWdEcm9wPWZ1bmN0aW9uKGMsYil7aWYoIXRoaXMuX21vdmVIZWFkZXJEaXYpe3JldHVybjsKfWI9Ynx8MzAwOwp2YXIgYT10aGlzLl9tb3ZlSGVhZGVyRGl2OwppZigkdGVsZXJpay4kKXsoZnVuY3Rpb24oZCl7dmFyIGU9JHRlbGVyaWsuZ2V0TG9jYXRpb24oYy5nZXRfZWxlbWVudCgpKTsKZChhKS5jbG9uZSgpLmFwcGVuZFRvKGEucGFyZW50Tm9kZSkuYW5pbWF0ZSh7bGVmdDplLngsdG9wOmUueX0sYixmdW5jdGlvbigpe2QodGhpcykucmVtb3ZlKCk7Cn0pOwp9KSgkdGVsZXJpay4kKTsKfVRlbGVyaWsuV2ViLlVJLkdyaWQuRGVzdHJveURyYWdEcm9wKCk7Cn07ClRlbGVyaWsuV2ViLlVJLkdyaWQuR2V0Rmlyc3RQYXJlbnRCeVRhZ05hbWU9ZnVuY3Rpb24oYSxiKXt3aGlsZShhJiZhLnBhcmVudE5vZGUpe2lmKGEudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT1iLnRvTG93ZXJDYXNlKCkpe3JldHVybiBhOwp9YT1hLnBhcmVudE5vZGU7Cn1yZXR1cm4gbnVsbDsKfTsKVGVsZXJpay5XZWIuVUkuR3JpZC5HZXRGaXJzdFBhcmVudFJvd1dpdGhJRD1mdW5jdGlvbihhKXt3aGlsZShhJiZhLnBhcmVudE5vZGUpe2lmKGEudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT0idHIiJiZhLmlkIT11bmRlZmluZWQmJmEuaWQhPSIiKXtyZXR1cm4gYTsKfWE9YS5wYXJlbnROb2RlOwp9cmV0dXJuIG51bGw7Cn07ClRlbGVyaWsuV2ViLlVJLkdyaWQuQ3JlYXRlQ29sdW1uUmVzaXplcnM9ZnVuY3Rpb24oYSxiKXtUZWxlcmlrLldlYi5VSS5HcmlkLkNsZWFyRG9jdW1lbnRFdmVudHMoKTsKdGhpcy5MZWZ0UmVzaXplcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CnRoaXMuTGVmdFJlc2l6ZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yPSJuYXZ5IjsKdGhpcy5MZWZ0UmVzaXplci5zdHlsZS53aWR0aD0iMXB4IjsKdGhpcy5MZWZ0UmVzaXplci5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiOwp0aGlzLkxlZnRSZXNpemVyLnN0eWxlLmN1cnNvcj0iZS1yZXNpemUiOwp0aGlzLlJpZ2h0UmVzaXplcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CnRoaXMuUmlnaHRSZXNpemVyLnN0eWxlLmJhY2tncm91bmRDb2xvcj0ibmF2eSI7CnRoaXMuUmlnaHRSZXNpemVyLnN0eWxlLndpZHRoPSIxcHgiOwp0aGlzLlJpZ2h0UmVzaXplci5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiOwp0aGlzLlJpZ2h0UmVzaXplci5zdHlsZS5jdXJzb3I9ImUtcmVzaXplIjsKdGhpcy5SZXNpemVyVG9vbFRpcD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CnRoaXMuUmVzaXplclRvb2xUaXAuc3R5bGUuYmFja2dyb3VuZENvbG9yPSIjRjVGNURDIjsKdGhpcy5SZXNpemVyVG9vbFRpcC5zdHlsZS5ib3JkZXI9IjFweCBzb2xpZCI7CnRoaXMuUmVzaXplclRvb2xUaXAuc3R5bGUucG9zaXRpb249ImFic29sdXRlIjsKdGhpcy5SZXNpemVyVG9vbFRpcC5zdHlsZS5mb250PSJpY29uIjsKdGhpcy5SZXNpemVyVG9vbFRpcC5zdHlsZS5wYWRkaW5nPSIyIjsKdGhpcy5SZXNpemVyVG9vbFRpcC5pbm5lckhUTUw9IldpZHRoOiA8Yj4iK2EuZ2V0X2VsZW1lbnQoKS5vZmZzZXRXaWR0aCsiPC9iPiA8ZW0+cGl4ZWxzPC9lbT4iOwp0aGlzLkxlZnRSZXNpemVyLnN0eWxlLmRpc3BsYXk9dGhpcy5SZXNpemVyVG9vbFRpcC5zdHlsZS5kaXNwbGF5PXRoaXMuUmVzaXplclRvb2xUaXAuc3R5bGUuZGlzcGxheT0ibm9uZSI7CmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5MZWZ0UmVzaXplcik7CmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5SaWdodFJlc2l6ZXIpOwpkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuUmVzaXplclRvb2xUaXApOwpUZWxlcmlrLldlYi5VSS5HcmlkLk1vdmVDb2x1bW5SZXNpemVycyhhLGIpOwp9OwpUZWxlcmlrLldlYi5VSS5HcmlkLkRlc3Ryb3lDb2x1bW5SZXNpemVycz1mdW5jdGlvbigpe1RlbGVyaWsuV2ViLlVJLkdyaWQuUmVzdG9yZURvY3VtZW50RXZlbnRzKCk7CmlmKHRoaXMuTGVmdFJlc2l6ZXImJnRoaXMuTGVmdFJlc2l6ZXIucGFyZW50Tm9kZSl7ZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0aGlzLkxlZnRSZXNpemVyKTsKdGhpcy5MZWZ0UmVzaXplcj1udWxsOwp9aWYodGhpcy5SaWdodFJlc2l6ZXImJnRoaXMuUmlnaHRSZXNpemVyLnBhcmVudE5vZGUpe2RvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGhpcy5SaWdodFJlc2l6ZXIpOwp0aGlzLlJpZ2h0UmVzaXplcj1udWxsOwp9aWYodGhpcy5SZXNpemVyVG9vbFRpcCYmdGhpcy5SZXNpemVyVG9vbFRpcC5wYXJlbnROb2RlKXtkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRoaXMuUmVzaXplclRvb2xUaXApOwp0aGlzLlJlc2l6ZXJUb29sVGlwPW51bGw7Cn19OwpUZWxlcmlrLldlYi5VSS5HcmlkLk1vdmVDb2x1bW5SZXNpemVycz1mdW5jdGlvbihjLGEpe2lmKCF0aGlzLkxlZnRSZXNpemVyfHwhdGhpcy5SaWdodFJlc2l6ZXJ8fCF0aGlzLlJpZ2h0UmVzaXplcil7cmV0dXJuOwp9dGhpcy5MZWZ0UmVzaXplci5zdHlsZS5kaXNwbGF5PXRoaXMuUmlnaHRSZXNpemVyLnN0eWxlLmRpc3BsYXk9dGhpcy5SZXNpemVyVG9vbFRpcC5zdHlsZS5kaXNwbGF5PSIiOwp0aGlzLkxlZnRSZXNpemVyLnN0eWxlLnRvcD1UZWxlcmlrLldlYi5VSS5HcmlkLkZpbmRQb3NZKGMuZ2V0X2VsZW1lbnQoKSkrInB4IjsKdGhpcy5MZWZ0UmVzaXplci5zdHlsZS5sZWZ0PVRlbGVyaWsuV2ViLlVJLkdyaWQuRmluZFBvc1goYy5nZXRfZWxlbWVudCgpKSsicHgiOwp0aGlzLlJpZ2h0UmVzaXplci5zdHlsZS50b3A9dGhpcy5MZWZ0UmVzaXplci5zdHlsZS50b3A7CnRoaXMuUmlnaHRSZXNpemVyLnN0eWxlLmxlZnQ9VGVsZXJpay5XZWIuVUkuR3JpZC5HZXRFdmVudFBvc1goYSktNSsicHgiOwp0aGlzLlJlc2l6ZXJUb29sVGlwLnN0eWxlLnRvcD1wYXJzZUludCh0aGlzLlJpZ2h0UmVzaXplci5zdHlsZS50b3ApLTIwKyJweCI7CnRoaXMuUmVzaXplclRvb2xUaXAuc3R5bGUubGVmdD1wYXJzZUludCh0aGlzLlJpZ2h0UmVzaXplci5zdHlsZS5sZWZ0KS01KyJweCI7CmlmKHBhcnNlSW50KHRoaXMuTGVmdFJlc2l6ZXIuc3R5bGUubGVmdCk8VGVsZXJpay5XZWIuVUkuR3JpZC5GaW5kUG9zWChjLl9vd25lci5nZXRfZWxlbWVudCgpKSl7dGhpcy5MZWZ0UmVzaXplci5zdHlsZS5kaXNwbGF5PSJub25lIjsKfWlmKCFjLl9vd25lci5fb3duZXIuQ2xpZW50U2V0dGluZ3MuU2Nyb2xsaW5nLkFsbG93U2Nyb2xsKXt0aGlzLkxlZnRSZXNpemVyLnN0eWxlLmhlaWdodD1jLl9vd25lci5nZXRfZWxlbWVudCgpLnRCb2RpZXNbMF0ub2Zmc2V0SGVpZ2h0K2MuX293bmVyLmdldF9lbGVtZW50KCkudEhlYWQub2Zmc2V0SGVpZ2h0KyJweCI7Cn1lbHNle3ZhciBiPSRnZXQoYy5fb3duZXIuX293bmVyLkNsaWVudElEKyJfR3JpZERhdGEiKTsKaWYoYy5fb3duZXIuX293bmVyLkNsaWVudFNldHRpbmdzLlNjcm9sbGluZy5Vc2VTdGF0aWNIZWFkZXJzKXt0aGlzLkxlZnRSZXNpemVyLnN0eWxlLmhlaWdodD1iLmNsaWVudEhlaWdodCtjLl9vd25lci5nZXRfZWxlbWVudCgpLnRIZWFkLm9mZnNldEhlaWdodCsicHgiOwp9ZWxzZXt0aGlzLkxlZnRSZXNpemVyLnN0eWxlLmhlaWdodD1iLmNsaWVudEhlaWdodCsicHgiOwp9fXRoaXMuUmlnaHRSZXNpemVyLnN0eWxlLmhlaWdodD10aGlzLkxlZnRSZXNpemVyLnN0eWxlLmhlaWdodDsKdmFyIGQ9cGFyc2VJbnQodGhpcy5SaWdodFJlc2l6ZXIuc3R5bGUubGVmdCktcGFyc2VJbnQodGhpcy5MZWZ0UmVzaXplci5zdHlsZS5sZWZ0KTsKdGhpcy5SZXNpemVyVG9vbFRpcC5pbm5lckhUTUw9IldpZHRoOiA8Yj4iK2QrIjwvYj4gPGVtPnBpeGVsczwvZW0+IjsKaWYoYy5fb3duZXIuX293bmVyLkNsaWVudFNldHRpbmdzLlJlc2l6aW5nLkVuYWJsZVJlYWxUaW1lUmVzaXplKXtpZihkPjApe2MuZ2V0X2VsZW1lbnQoKS5zdHlsZS53aWR0aD1kKyJweCI7CnRoaXMuUmlnaHRSZXNpemVyLnN0eWxlLmxlZnQ9cGFyc2VJbnQodGhpcy5MZWZ0UmVzaXplci5zdHlsZS5sZWZ0KStjLmdldF9lbGVtZW50KCkub2Zmc2V0V2lkdGgrInB4IjsKfX1pZihwYXJzZUludCh0aGlzLlJpZ2h0UmVzaXplci5zdHlsZS5sZWZ0KTw9cGFyc2VJbnQodGhpcy5MZWZ0UmVzaXplci5zdHlsZS5sZWZ0KS0xKXtUZWxlcmlrLldlYi5VSS5HcmlkLkRlc3Ryb3lDb2x1bW5SZXNpemVycygpOwp9fTsKVGVsZXJpay5XZWIuVUkuR3JpZC5GaW5kU2Nyb2xsUG9zWD1mdW5jdGlvbihhKXt2YXIgYj0wOwp3aGlsZShhLnBhcmVudE5vZGUpe2lmKHR5cGVvZihhLnBhcmVudE5vZGUuc2Nyb2xsTGVmdCk9PSJudW1iZXIiKXtiKz1hLnBhcmVudE5vZGUuc2Nyb2xsTGVmdDsKfWE9YS5wYXJlbnROb2RlOwp9aWYoZG9jdW1lbnQuYm9keS5jdXJyZW50U3R5bGUmJmRvY3VtZW50LmJvZHkuY3VycmVudFN0eWxlLm1hcmdpbkxlZnQuaW5kZXhPZigicHgiKSE9LTEmJiF3aW5kb3cub3BlcmEpe2I9cGFyc2VJbnQoYiktcGFyc2VJbnQoZG9jdW1lbnQuYm9keS5jdXJyZW50U3R5bGUubWFyZ2luTGVmdCk7Cn1yZXR1cm4gYjsKfTsKVGVsZXJpay5XZWIuVUkuR3JpZC5GaW5kU2Nyb2xsUG9zWT1mdW5jdGlvbihhKXt2YXIgYj0wOwp3aGlsZShhLnBhcmVudE5vZGUpe2lmKHR5cGVvZihhLnBhcmVudE5vZGUuc2Nyb2xsVG9wKT09Im51bWJlciIpe2IrPWEucGFyZW50Tm9kZS5zY3JvbGxUb3A7Cn1hPWEucGFyZW50Tm9kZTsKfWlmKGRvY3VtZW50LmJvZHkuY3VycmVudFN0eWxlJiZkb2N1bWVudC5ib2R5LmN1cnJlbnRTdHlsZS5tYXJnaW5Ub3AuaW5kZXhPZigicHgiKSE9LTEmJiF3aW5kb3cub3BlcmEpe2I9cGFyc2VJbnQoYiktcGFyc2VJbnQoZG9jdW1lbnQuYm9keS5jdXJyZW50U3R5bGUubWFyZ2luVG9wKTsKfXJldHVybiBiOwp9OwpUZWxlcmlrLldlYi5VSS5HcmlkLkdldEV2ZW50UG9zWD1mdW5jdGlvbihhKXtpZigkdGVsZXJpay5pc1RvdWNoRGV2aWNlKXtyZXR1cm4gJHRlbGVyaWsuZ2V0VG91Y2hFdmVudExvY2F0aW9uKGEpLng7Cn1lbHNle3JldHVybiBwYXJzZUludChhLmNsaWVudFgpK3BhcnNlSW50KCR0ZWxlcmlrLmdldFNjcm9sbE9mZnNldChkb2N1bWVudC5ib2R5LHRydWUpLngpOwp9fTsKVGVsZXJpay5XZWIuVUkuR3JpZC5HZXRFdmVudFBvc1k9ZnVuY3Rpb24oYSl7aWYoJHRlbGVyaWsuaXNUb3VjaERldmljZSl7cmV0dXJuICR0ZWxlcmlrLmdldFRvdWNoRXZlbnRMb2NhdGlvbihhKS55Owp9ZWxzZXtyZXR1cm4gcGFyc2VJbnQoYS5jbGllbnRZKStwYXJzZUludCgkdGVsZXJpay5nZXRTY3JvbGxPZmZzZXQoZG9jdW1lbnQuYm9keSx0cnVlKS55KTsKfX07ClRlbGVyaWsuV2ViLlVJLkdyaWQuSXNTY3JvbGxPbkxlZnRTaWRlPWZ1bmN0aW9uKCl7aWYodHlwZW9mKHRoaXMuX0lzU2Nyb2xsT25MZWZ0U2lkZSk9PSJ1bmRlZmluZWQiKXtUZWxlcmlrLldlYi5VSS5HcmlkLmdldFNjcm9sbEJhckhlaWdodCgpOwp9cmV0dXJuIHRoaXMuX0lzU2Nyb2xsT25MZWZ0U2lkZTsKfTsKVGVsZXJpay5XZWIuVUkuR3JpZC5nZXRTY3JvbGxCYXJIZWlnaHQ9ZnVuY3Rpb24oKXt0cnl7aWYodHlwZW9mKHRoaXMuc2Nyb2xsYmFySGVpZ2h0KT09InVuZGVmaW5lZCIpe3ZhciBlLGI9MDsKdmFyIGQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CmQuc3R5bGUucG9zaXRpb249ImFic29sdXRlIjsKZC5zdHlsZS50b3A9Ii0xMDAwcHgiOwpkLnN0eWxlLmxlZnQ9Ii0xMDAwcHgiOwpkLnN0eWxlLndpZHRoPSIxMDBweCI7CmQuc3R5bGUuaGVpZ2h0PSIxMDBweCI7CmQuc3R5bGUub3ZlcmZsb3c9ImF1dG8iOwp2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKYy5zdHlsZS53aWR0aD0iMTAwMHB4IjsKYy5zdHlsZS5oZWlnaHQ9IjEwMDBweCI7CmQuYXBwZW5kQ2hpbGQoYyk7CmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZCk7CmU9ZC5vZmZzZXRIZWlnaHQ7CmI9ZC5jbGllbnRIZWlnaHQ7CmRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZG9jdW1lbnQuYm9keS5sYXN0Q2hpbGQpOwp0aGlzLnNjcm9sbGJhckhlaWdodD1lLWI7CmlmKHRoaXMuc2Nyb2xsYmFySGVpZ2h0PD0wfHxiPT0wKXt0aGlzLnNjcm9sbGJhckhlaWdodD0xNjsKfWQuZGlyPSJydGwiOwp2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKYS5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiOwphLnN0eWxlLmxlZnQ9IjAiOwphLnN0eWxlLmhlaWdodD0iMTAwJSI7CmEuc3R5bGUud2lkdGg9IjEwMCUiOwpkLmFwcGVuZENoaWxkKGEpOwppZigkdGVsZXJpay5pc09wZXJhKXthLnN0eWxlLmxlZnQ9IiI7CmEuc3R5bGUud2lkdGg9IjEwMHB4IjsKfWRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZCk7CnRoaXMuX0lzU2Nyb2xsT25MZWZ0U2lkZT1mYWxzZTsKaWYoJHRlbGVyaWsuJChkKS5vZmZzZXQoKS5sZWZ0IT0kdGVsZXJpay4kKGEpLm9mZnNldCgpLmxlZnQpe3RoaXMuX0lzU2Nyb2xsT25MZWZ0U2lkZT10cnVlOwp9ZC5yZW1vdmVDaGlsZChjKTsKZC5yZW1vdmVDaGlsZChhKTsKZC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGQpOwpkPW51bGw7CmM9bnVsbDsKYT1udWxsOwp9cmV0dXJuIHRoaXMuc2Nyb2xsYmFySGVpZ2h0Owp9Y2F0Y2goZil7dGhpcy5fSXNTY3JvbGxPbkxlZnRTaWRlPWZhbHNlOwpyZXR1cm4gZmFsc2U7Cn19OwpUZWxlcmlrLldlYi5VSS5HcmlkLkdldFNjcm9sbEJhcldpZHRoPWZ1bmN0aW9uKCl7dHJ5e2lmKHR5cGVvZih0aGlzLnNjcm9sbGJhcldpZHRoKT09InVuZGVmaW5lZCIpe3ZhciBkLGI9MDsKdmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CmUuc3R5bGUucG9zaXRpb249ImFic29sdXRlIjsKZS5zdHlsZS50b3A9Ii0xMDAwcHgiOwplLnN0eWxlLmxlZnQ9Ii0xMDAwcHgiOwplLnN0eWxlLndpZHRoPSIxMDBweCI7CmUuc3R5bGUub3ZlcmZsb3c9ImF1dG8iOwp2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKYy5zdHlsZS53aWR0aD0iMTAwMHB4IjsKZS5hcHBlbmRDaGlsZChjKTsKZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlKTsKZD1lLm9mZnNldFdpZHRoOwpiPWUuY2xpZW50V2lkdGg7CmRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZG9jdW1lbnQuYm9keS5sYXN0Q2hpbGQpOwp0aGlzLnNjcm9sbGJhcldpZHRoPWQtYjsKaWYodGhpcy5zY3JvbGxiYXJXaWR0aDw9MHx8Yj09MCl7dGhpcy5zY3JvbGxiYXJXaWR0aD0xNjsKfWUucmVtb3ZlQ2hpbGQoYyk7CmUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlKTsKZT1udWxsOwpjPW51bGw7Cn1yZXR1cm4gdGhpcy5zY3JvbGxiYXJXaWR0aDsKfWNhdGNoKGEpe3JldHVybiBmYWxzZTsKfX07ClRlbGVyaWsuV2ViLlVJLkdyaWQuSXNSaWdodFRvTGVmdD1mdW5jdGlvbihhKXt0cnl7d2hpbGUoYSYmYSE9ZG9jdW1lbnQpe2lmKCR0ZWxlcmlrLmdldEN1cnJlbnRTdHlsZShhLCJkaXJlY3Rpb24iKT09InJ0bCIpe3JldHVybiB0cnVlOwp9YT1hLnBhcmVudE5vZGU7Cn1yZXR1cm4gZmFsc2U7Cn1jYXRjaChiKXtyZXR1cm4gZmFsc2U7Cn19OwpUZWxlcmlrLldlYi5VSS5HcmlkLkZpcmVFdmVudD1mdW5jdGlvbihhLGQsYyl7dHJ5e3ZhciBiPXRydWU7CmlmKHR5cGVvZihhW2RdKT09InN0cmluZyIpe2V2YWwoYVtkXSk7Cn1lbHNle2lmKHR5cGVvZihhW2RdKT09ImZ1bmN0aW9uIil7aWYoYyl7c3dpdGNoKGMubGVuZ3RoKXtjYXNlIDE6Yj1hW2RdKGNbMF0pOwpicmVhazsKY2FzZSAyOmI9YVtkXShjWzBdLGNbMV0pOwpicmVhazsKfX1lbHNle2I9YVtkXSgpOwp9fX1pZih0eXBlb2YoYikhPSJib29sZWFuIil7cmV0dXJuIHRydWU7Cn1lbHNle3JldHVybiBiOwp9fWNhdGNoKGUpe3Rocm93IGU7Cn19OwpUZWxlcmlrLldlYi5VSS5HcmlkLkdldFRhYmxlQ29sR3JvdXA9ZnVuY3Rpb24oYSl7dHJ5e3JldHVybiBhLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJjb2xncm91cCIpWzBdOwp9Y2F0Y2goYil7cmV0dXJuIGZhbHNlOwp9fTsKVGVsZXJpay5XZWIuVUkuR3JpZC5SZW1vdmVIaWRkZW5Db2xHcm91cENvbHM9ZnVuY3Rpb24oZCl7dHJ5e3ZhciBjPWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImNvbCIpOwpmb3IodmFyIGE9MDsKYTxjLmxlbmd0aDsKYSsrKXtpZihjW2FdLnN0eWxlLmRpc3BsYXkmJmNbYV0uc3R5bGUuZGlzcGxheT09Im5vbmUiKXtjW2FdLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoY1thXSk7CmEtLTsKfX19Y2F0Y2goYil7fX07ClRlbGVyaWsuV2ViLlVJLkdyaWQuR2V0VGFibGVDb2xHcm91cENvbHM9ZnVuY3Rpb24oZCl7dHJ5e3ZhciBiPW5ldyBBcnJheSgpOwp2YXIgYT1kLmNoaWxkTm9kZXNbMF07CmZvcih2YXIgYz0wOwpjPGQuY2hpbGROb2Rlcy5sZW5ndGg7CmMrKyl7aWYoKGQuY2hpbGROb2Rlc1tjXS50YWdOYW1lKSYmKGQuY2hpbGROb2Rlc1tjXS50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJjb2wiKSl7YltiLmxlbmd0aF09ZC5jaGlsZE5vZGVzW2NdOwp9fXJldHVybiBiOwp9Y2F0Y2goZSl7cmV0dXJuIGZhbHNlOwp9fTsKVGVsZXJpay5XZWIuVUkuR3JpZC5DbGVhckl0ZW1TdHlsZT1mdW5jdGlvbihmLGQsYSl7U3lzLlVJLkRvbUVsZW1lbnQucmVtb3ZlQ3NzQ2xhc3MoZixhKTsKaWYoZCl7dmFyIGI9Zi5zdHlsZS5jc3NUZXh0LnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvIC9nLCIiKTsKdmFyIGU9Yi5zcGxpdCgiOyIpOwpmb3IodmFyIGM9MDsKYzxlLmxlbmd0aDsKYysrKXtpZihkLmluZGV4T2YoZVtjXSkhPS0xKXtlW2NdPSIiOwp9fWYuc3R5bGUuY3NzVGV4dD1lLmpvaW4oIjsiKTsKfX07ClRlbGVyaWsuV2ViLlVJLkdyaWQuU2V0SXRlbVN0eWxlPWZ1bmN0aW9uKGEsYixjKXtTeXMuVUkuRG9tRWxlbWVudC5hZGRDc3NDbGFzcyhhLGMpOwppZihiKXthLnN0eWxlLmNzc1RleHQ9YS5zdHlsZS5jc3NUZXh0KyI7IitiOwp9fTsKVGVsZXJpay5XZWIuVUkuR3JpZC5TY3JvbGxJbnRvVmlldz1mdW5jdGlvbihkKXt2YXIgaT1UZWxlcmlrLldlYi5VSS5HcmlkLmdldFNjcm9sbGFibGVDb250YWluZXIoZCl8fChkb2N1bWVudC5ib2R5fHxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpOwp2YXIgYz1kOwp2YXIgYT0kdGVsZXJpay5nZXRMb2NhdGlvbihjKS55LSR0ZWxlcmlrLmdldExvY2F0aW9uKGkpLnksZj1hK2kuc2Nyb2xsVG9wLGc9ZitjLm9mZnNldEhlaWdodDsKdmFyIGU9aS5jbGllbnRIZWlnaHQ7CnZhciBiPXBhcnNlSW50KGkuc2Nyb2xsVG9wLDEwKTsKdmFyIGg9YitlOwppZihjLm9mZnNldEhlaWdodD5lfHxmPGIpe2kuc2Nyb2xsVG9wPWY7Cn1lbHNle2lmKGc+aCl7aS5zY3JvbGxUb3A9Zy1lOwp9fWkuc2Nyb2xsVG9wPWkuc2Nyb2xsVG9wOwp9OwpUZWxlcmlrLldlYi5VSS5HcmlkLmdldFNjcm9sbGFibGVDb250YWluZXI9ZnVuY3Rpb24oYSl7aWYoIWF8fCFhLnBhcmVudE5vZGUpe3JldHVybjsKfXZhciBkPW51bGw7CnZhciBiPWEucGFyZW50Tm9kZTsKd2hpbGUoYiE9bnVsbCl7aWYoYi50YWdOYW1lLnRvVXBwZXJDYXNlKCk9PSJCT0RZIil7ZD1iOwpicmVhazsKfXZhciBjPSR0ZWxlcmlrLmdldEN1cnJlbnRTdHlsZShiLCJvdmVyZmxvd1kiKTsKaWYoYz09InNjcm9sbCJ8fGM9PSJhdXRvIil7ZD1iOwpicmVhazsKfWI9Yi5wYXJlbnROb2RlOwp9cmV0dXJuIGQ7Cn07ClRlbGVyaWsuV2ViLlVJLkdyaWQuR2V0TmVzdGVkVGFibGVWaWV3PWZ1bmN0aW9uKGEpe3ZhciBiPW51bGw7CnZhciBjPVRlbGVyaWsuV2ViLlVJLkdyaWQuR2V0TmVzdGVkVGFibGUoYSk7CmlmKGMpe2I9JGZpbmQoYy5pZC5zcGxpdCgiX18iKVswXSk7Cn1yZXR1cm4gYjsKfTsKVGVsZXJpay5XZWIuVUkuR3JpZC5HZXRMYXN0TmVzdGVkVGFibGVWaWV3PWZ1bmN0aW9uKGEpe3ZhciBiPW51bGw7CnZhciBjPVRlbGVyaWsuV2ViLlVJLkdyaWQuR2V0TGFzdE5lc3RlZFRhYmxlKGEpOwppZihjKXtiPSRmaW5kKGMuaWQuc3BsaXQoIl9fIilbMF0pOwp9cmV0dXJuIGI7Cn07ClRlbGVyaWsuV2ViLlVJLkdyaWQuR2V0UHJldmlvdXNOZXN0ZWRUYWJsZVZpZXc9ZnVuY3Rpb24oYil7dmFyIGE9bnVsbDsKaWYoYi5wcmV2aW91c1NpYmxpbmcmJmIucHJldmlvdXNTaWJsaW5nLnByZXZpb3VzU2libGluZyl7YT1UZWxlcmlrLldlYi5VSS5HcmlkLkdldE5lc3RlZFRhYmxlVmlldyhiLnByZXZpb3VzU2libGluZyk7Cn1yZXR1cm4gYTsKfTsKVGVsZXJpay5XZWIuVUkuR3JpZC5HZXROZXN0ZWRUYWJsZT1mdW5jdGlvbihiKXt2YXIgZD1udWxsOwp2YXIgYz1UZWxlcmlrLldlYi5VSS5HcmlkLkdldE5vZGVOZXh0U2libGluZ0J5VGFnTmFtZShiLCJ0ciIpOwppZihjKXt2YXIgYT1jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0YWJsZSIpOwppZihhLmxlbmd0aD4wJiZhWzBdLmlkLmluZGV4T2YoIkRldGFpbCIpIT0tMSl7ZD1hWzBdOwp9fXJldHVybiBkOwp9OwpUZWxlcmlrLldlYi5VSS5HcmlkLkdldExhc3ROZXN0ZWRUYWJsZT1mdW5jdGlvbihmKXt2YXIgZD1udWxsOwp2YXIgYj1UZWxlcmlrLldlYi5VSS5HcmlkLkdldE5vZGVOZXh0U2libGluZ0J5VGFnTmFtZShmLCJ0ciIpOwppZihiKXt2YXIgYT1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0YWJsZSIpOwpmb3IodmFyIGU9YS5sZW5ndGgtMTsKZT49MDsKZS0tKXt2YXIgYz1hW2VdOwppZihjLmlkLmluZGV4T2YoIkRldGFpbCIpIT0tMSYmYy5pZC5pbmRleE9mKCJfbWFpblRhYmxlIik9PS0xKXtkPWM7CmJyZWFrOwp9fX1yZXR1cm4gZDsKfTsKVGVsZXJpay5XZWIuVUkuR3JpZC5HZXROb2RlTmV4dFNpYmxpbmdCeVRhZ05hbWU9ZnVuY3Rpb24oYSxiKXt2YXIgYT1hLm5leHRTaWJsaW5nOwp3aGlsZShhIT1udWxsJiYoYS5ub2RlVHlwZT09M3x8KGEudGFnTmFtZSYmYS50YWdOYW1lLnRvTG93ZXJDYXNlKCkhPWIudG9Mb3dlckNhc2UoKSkpKXthPWEubmV4dFNpYmxpbmc7Cn1yZXR1cm4gYTsKfTsKVGVsZXJpay5XZWIuVUkuR3JpZC5HZXROb2RlUHJldmlvdXNTaWJsaW5nQnlUYWdOYW1lPWZ1bmN0aW9uKGEsYil7dmFyIGE9YS5wcmV2aW91c1NpYmxpbmc7CndoaWxlKChhIT1udWxsKSYmKGEubm9kZVR5cGU9PTN8fChhLnRhZ05hbWUmJmEudGFnTmFtZS50b0xvd2VyQ2FzZSgpIT1iLnRvTG93ZXJDYXNlKCkpKSl7YT1hLnByZXZpb3VzU2libGluZzsKfXJldHVybiBhOwp9OwpUZWxlcmlrLldlYi5VSS5HcmlkLkNsZWFyQmVzdEZpdENhY2hlPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYz0wLGI9YS5sZW5ndGg7CmM8YjsKYysrKXthW2NdLl9jYWNoZWRCZXN0Rml0U2l6ZT1udWxsOwp9fTsKVGVsZXJpay5XZWIuVUkuR3JpZC5HZXRMb2NhdGlvbj1mdW5jdGlvbihhKXtpZigkdGVsZXJpay5pc09wZXJhKXtyZXR1cm4gJHRlbGVyaWsub3JpZ2luYWxHZXRMb2NhdGlvbihhKTsKfXJldHVybiAkdGVsZXJpay5nZXRMb2NhdGlvbihhKTsKfTsKVGVsZXJpay5XZWIuVUkuR3JpZC5HZXRHcmlkPWZ1bmN0aW9uKGEpe3doaWxlKCEhYSl7aWYoYS50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJkaXYiJiZhLmlkJiYkZmluZChhLmlkKSl7cmV0dXJuICRmaW5kKGEuaWQpOwp9YT1hLnBhcmVudE5vZGU7Cn1yZXR1cm4gbnVsbDsKfTsKVGVsZXJpay5XZWIuVUkuR3JpZC5DbGllbnRTdGF0ZURhdGE9ZnVuY3Rpb24gQ2xpZW50U3RhdGVEYXRhKCl7dmFyIGE9e307CnRoaXMuYWRkPWZ1bmN0aW9uKGIsYyl7YVtiXT1jOwp9Owp0aGlzLnRvU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIGI9IiI7CnZhciBkPW51bGw7CmZvcih2YXIgYyBpbiBhKXtiKz1jOwpkPWFbY107CmlmKHR5cGVvZihkKSE9InVuZGVmaW5lZCImJmQhPW51bGwpe2IrPSIsIjsKYis9YVtjXTsKfWIrPSI7IjsKfXJldHVybiBiOwp9Owp9OwpUZWxlcmlrLldlYi5VSS5HcmlkLmdldE11bHRpSGVhZGVyQ2VsbHM9ZnVuY3Rpb24oYil7dmFyIGU9Ik11bHRpSGVhZGVyIjsKdmFyIGM9Yi5nZXRfZWxlbWVudCgpOwp2YXIgaD1jLnRIZWFkLnJvd3M7CnZhciBrPVtdOwpmb3IodmFyIGY9MDsKZjxoLmxlbmd0aDsKZisrKXt2YXIgbD1oW2ZdOwpmb3IodmFyIGE9MDsKYTxsLmNlbGxzLmxlbmd0aDsKYSsrKXt2YXIgZz1sLmNlbGxzW2FdOwppZihnLmlkJiZnLmlkLmluZGV4T2YoZSk+LTEpe2sucHVzaChnKTsKfX19dmFyIGQ7CmlmKGIuZ2V0X2lkKCkuaW5kZXhPZigiRGV0YWlsIik+LTEpe2Q9ZS5sZW5ndGgrYi5nZXRfaWQoKS5sZW5ndGgrMTsKfWVsc2V7ZD1lLmxlbmd0aCtiLmdldF9vd25lcigpLmdldF9tYXN0ZXJUYWJsZVZpZXcoKS5nZXRfaWQoKS5sZW5ndGgrMTsKfWsuc29ydChmdW5jdGlvbihqLGkpe3JldHVybiBqLmlkLnNsaWNlKGQpLWkuaWQuc2xpY2UoZCk7Cn0pOwpyZXR1cm4gazsKfTsKVHlwZS5yZWdpc3Rlck5hbWVzcGFjZSgiVGVsZXJpay5XZWIuVUkiKTsKVGVsZXJpay5XZWIuVUkuR3JpZEl0ZW1SZXNpemVyPWZ1bmN0aW9uKGEpe1RlbGVyaWsuV2ViLlVJLkdyaWRJdGVtUmVzaXplci5pbml0aWFsaXplQmFzZSh0aGlzKTsKdGhpcy5fb3duZXI9YTsKdGhpcy5fb25SZXNpemVNb3VzZVVwRGVsZWdhdGU9bnVsbDsKdGhpcy5fY2VsbHNXaXRoRXZlbnRzPVtdOwp9OwpUZWxlcmlrLldlYi5VSS5HcmlkSXRlbVJlc2l6ZXIucHJvdG90eXBlPXtkaXNwb3NlOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7CmE8dGhpcy5fY2VsbHNXaXRoRXZlbnRzLmxlbmd0aDsKYSsrKXskY2xlYXJIYW5kbGVycyh0aGlzLl9jZWxsc1dpdGhFdmVudHNbYV0pOwp0aGlzLl9jZWxsc1dpdGhFdmVudHNbYV0uX2V2ZW50cz1udWxsOwp0aGlzLl9jZWxsc1dpdGhFdmVudHNbYV0uX29uUmVzaXplTW91c2VEb3duRGVsZWdhdGU9bnVsbDsKfXRoaXMuX2NlbGxzV2l0aEV2ZW50cz1udWxsOwp0aGlzLl9kZXN0cm95Um93UmVzaXplcigpOwppZih0aGlzLl9vblJlc2l6ZU1vdXNlVXBEZWxlZ2F0ZSl7JHRlbGVyaWsucmVtb3ZlRXh0ZXJuYWxIYW5kbGVyKGRvY3VtZW50LCJtb3VzZXVwIix0aGlzLl9vblJlc2l6ZU1vdXNlVXBEZWxlZ2F0ZSk7Cn19LF9kZXRlY3RSZXNpemVDdXJzb3JzT25JdGVtczpmdW5jdGlvbihnLGgpe3ZhciBhPXRoaXM7CmlmKChoIT1udWxsKSYmKGgudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT0idGQiKSYmIXRoaXMuX293bmVyLk1vdmVIZWFkZXJEaXYpe3ZhciBjPVRlbGVyaWsuV2ViLlVJLkdyaWQuR2V0Rmlyc3RQYXJlbnRCeVRhZ05hbWUoaCwidHIiKTsKdmFyIGw9ZmFsc2U7CndoaWxlKGMmJlRlbGVyaWsuV2ViLlVJLkdyaWQuSXNDaGlsZE9mKGMsdGhpcy5fb3duZXIuZ2V0X2VsZW1lbnQoKSkpe2lmKGMuaWQmJmMuaWQuc3BsaXQoIl9fIikubGVuZ3RoPT0yKXtsPXRydWU7CmJyZWFrOwp9Yz1UZWxlcmlrLldlYi5VSS5HcmlkLkdldEZpcnN0UGFyZW50QnlUYWdOYW1lKGMucGFyZW50Tm9kZSwidHIiKTsKfWlmKCFsKXtyZXR1cm47Cn12YXIgZD1oLnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlOwp2YXIgaz0kZmluZChkLmlkKTsKaWYoayE9bnVsbCl7aWYoIWsuZ2V0X2VsZW1lbnQoKSl7cmV0dXJuOwp9aWYoIWsuZ2V0X2VsZW1lbnQoKS50Qm9kaWVzWzBdKXtyZXR1cm47Cn12YXIgaT1UZWxlcmlrLldlYi5VSS5HcmlkLkdldEV2ZW50UG9zWShnKTsKdmFyIGY9JHRlbGVyaWsuaXNTYWZhcmk/VGVsZXJpay5XZWIuVUkuR3JpZC5GaW5kUG9zWShjKTpUZWxlcmlrLldlYi5VSS5HcmlkLkZpbmRQb3NZKGgpOwp2YXIgYj1mK2gub2Zmc2V0SGVpZ2h0Owp0aGlzLl9yZXNpemVUb2xlcmFuY2U9NTsKdmFyIGo9aC50aXRsZTsKaWYoKGk+Yi10aGlzLl9yZXNpemVUb2xlcmFuY2UpJiYoaTxiK3RoaXMuX3Jlc2l6ZVRvbGVyYW5jZSkpe2guc3R5bGUuY3Vyc29yPSJuLXJlc2l6ZSI7CmgudGl0bGU9dGhpcy5fb3duZXIuQ2xpZW50U2V0dGluZ3MuQ2xpZW50TWVzc2FnZXMuRHJhZ1RvUmVzaXplOwppZighaC5fb25SZXNpemVNb3VzZURvd25EZWxlZ2F0ZSl7aC5fb25SZXNpemVNb3VzZURvd25EZWxlZ2F0ZT1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX29uUmVzaXplTW91c2VEb3duSGFuZGxlcik7CiRhZGRIYW5kbGVyKGgsIm1vdXNlZG93biIsaC5fb25SZXNpemVNb3VzZURvd25EZWxlZ2F0ZSk7CnRoaXMuX2NlbGxzV2l0aEV2ZW50c1t0aGlzLl9jZWxsc1dpdGhFdmVudHMubGVuZ3RoXT1oOwp9fWVsc2V7aC5zdHlsZS5jdXJzb3I9ImRlZmF1bHQiOwpoLnRpdGxlPSIiOwppZihoLl9vblJlc2l6ZU1vdXNlRG93bkRlbGVnYXRlKXtpZihoLl9ldmVudHMhPW51bGwpeyRyZW1vdmVIYW5kbGVyKGgsIm1vdXNlZG93biIsaC5fb25SZXNpemVNb3VzZURvd25EZWxlZ2F0ZSk7Cn1oLl9vblJlc2l6ZU1vdXNlRG93bkRlbGVnYXRlPW51bGw7CmguX2V2ZW50cz1udWxsOwp9fX19fSxfbW92ZUl0ZW1SZXNpemVyOmZ1bmN0aW9uKGEpe2lmKCh0aGlzLl9vd25lci5fcm93UmVzaXplciE9InVuZGVmaW5lZCIpJiYodGhpcy5fb3duZXIuX3Jvd1Jlc2l6ZXIhPW51bGwpJiYodGhpcy5fb3duZXIuX3Jvd1Jlc2l6ZXIucGFyZW50Tm9kZSE9bnVsbCkpe3RoaXMuX293bmVyLl9yb3dSZXNpemVyLnN0eWxlLnRvcD1UZWxlcmlrLldlYi5VSS5HcmlkLkdldEV2ZW50UG9zWShhKSsicHgiOwppZih0aGlzLl9vd25lci5DbGllbnRTZXR0aW5ncy5SZXNpemluZy5FbmFibGVSZWFsVGltZVJlc2l6ZSl7dGhpcy5fZGVzdHJveVJvd1Jlc2l6ZXJBbmRSZXNpemVSb3coYSxmYWxzZSk7CnRoaXMuX3VwZGF0ZVJvd1Jlc2l6ZXJXaWR0aChhKTsKfX19LF9kZXN0cm95Um93UmVzaXplckFuZFJlc2l6ZVJvdzpmdW5jdGlvbihmLGQpe2lmKCh0aGlzLl9vd25lci5fY2VsbFRvUmVzaXplIT0idW5kZWZpbmVkIikmJih0aGlzLl9vd25lci5fY2VsbFRvUmVzaXplIT1udWxsKSYmKHRoaXMuX293bmVyLl9jZWxsVG9SZXNpemUudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT0idGQiKSYmKHRoaXMuX293bmVyLl9yb3dSZXNpemVyIT0idW5kZWZpbmVkIikmJih0aGlzLl9vd25lci5fcm93UmVzaXplciE9bnVsbCkpe3ZhciBiOwp2YXIgYT0kdGVsZXJpay5pc1NhZmFyaT9UZWxlcmlrLldlYi5VSS5HcmlkLkZpbmRQb3NZKHRoaXMuX293bmVyLl9jZWxsVG9SZXNpemUucGFyZW50Tm9kZSk6VGVsZXJpay5XZWIuVUkuR3JpZC5GaW5kUG9zWSh0aGlzLl9vd25lci5fY2VsbFRvUmVzaXplKTsKaWYodGhpcy5fZ3JpZERhdGFEaXYpe2I9cGFyc2VJbnQodGhpcy5fb3duZXIuX3Jvd1Jlc2l6ZXIuc3R5bGUudG9wKSt0aGlzLl9ncmlkRGF0YURpdi5zY3JvbGxUb3AtKGEpOwp9ZWxzZXtiPXBhcnNlSW50KHRoaXMuX293bmVyLl9yb3dSZXNpemVyLnN0eWxlLnRvcCktKGEpOwp9aWYoYj4wKXt2YXIgYz10aGlzLl9vd25lci5fY2VsbFRvUmVzaXplLnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlOwp2YXIgZz0kZmluZChjLmlkKTsKaWYoZyE9bnVsbCl7Zy5yZXNpemVJdGVtKHRoaXMuX293bmVyLl9jZWxsVG9SZXNpemUucGFyZW50Tm9kZS5yb3dJbmRleCxiKTsKfX19aWYoZCl7dGhpcy5fZGVzdHJveVJvd1Jlc2l6ZXIoKTsKfX0sX3VwZGF0ZVJvd1Jlc2l6ZXJXaWR0aDpmdW5jdGlvbihhKXt2YXIgYz1UZWxlcmlrLldlYi5VSS5HcmlkLkdldEN1cnJlbnRFbGVtZW50KGEpOwppZigoYyE9bnVsbCkmJihjLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09InRkIikpe3ZhciBiPXRoaXMuX293bmVyLl9yb3dSZXNpemVyUmVmVGFibGU7CmlmKGIhPW51bGwpe3RoaXMuX293bmVyLl9yb3dSZXNpemVyLnN0eWxlLndpZHRoPXRoaXMuX293bmVyLmdldF9lbGVtZW50KCkub2Zmc2V0V2lkdGgrInB4IjsKfX19LF9jcmVhdGVSb3dSZXNpemVyOmZ1bmN0aW9uKGQpe3RoaXMuX2Rlc3Ryb3lSb3dSZXNpemVyKCk7CnZhciBjPVRlbGVyaWsuV2ViLlVJLkdyaWQuR2V0Q3VycmVudEVsZW1lbnQoZCk7CmlmKChjIT1udWxsKSYmKGMudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT0idGQiKSl7aWYoYy5jZWxsSW5kZXg+MCl7dmFyIGI9Yy5wYXJlbnROb2RlLnJvd0luZGV4OwpjPWMucGFyZW50Tm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUucm93c1tiXS5jZWxsc1swXTsKfXRoaXMuX293bmVyLl9yb3dSZXNpemVyPW51bGw7CnRoaXMuX293bmVyLl9jZWxsVG9SZXNpemU9YzsKdmFyIGE9Yy5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZTsKdmFyIGc9JGZpbmQoYS5pZCk7CnRoaXMuX293bmVyLl9yb3dSZXNpemVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwp0aGlzLl9vd25lci5fcm93UmVzaXplci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9Im5hdnkiOwp0aGlzLl9vd25lci5fcm93UmVzaXplci5zdHlsZS5oZWlnaHQ9IjFweCI7CnRoaXMuX293bmVyLl9yb3dSZXNpemVyLnN0eWxlLmZvbnRTaXplPSIxIjsKdGhpcy5fb3duZXIuX3Jvd1Jlc2l6ZXIuc3R5bGUucG9zaXRpb249ImFic29sdXRlIjsKdGhpcy5fb3duZXIuX3Jvd1Jlc2l6ZXIuc3R5bGUuY3Vyc29yPSJuLXJlc2l6ZSI7CmlmKGchPW51bGwpe3RoaXMuX293bmVyLl9yb3dSZXNpemVyUmVmVGFibGU9ZzsKdGhpcy5fb3duZXIuX3Jvd1Jlc2l6ZXIuc3R5bGUud2lkdGg9dGhpcy5fb3duZXIuZ2V0X2VsZW1lbnQoKS5vZmZzZXRXaWR0aCsicHgiOwp0aGlzLl9vd25lci5fcm93UmVzaXplci5zdHlsZS5sZWZ0PVRlbGVyaWsuV2ViLlVJLkdyaWQuRmluZFBvc1godGhpcy5fb3duZXIuZ2V0X2VsZW1lbnQoKSkrInB4IjsKfXRoaXMuX293bmVyLl9yb3dSZXNpemVyLnN0eWxlLnRvcD1UZWxlcmlrLldlYi5VSS5HcmlkLkdldEV2ZW50UG9zWShkKSsicHgiOwp2YXIgZj1kb2N1bWVudC5ib2R5OwpmLmFwcGVuZENoaWxkKHRoaXMuX293bmVyLl9yb3dSZXNpemVyKTsKfX0sX2Rlc3Ryb3lSb3dSZXNpemVyOmZ1bmN0aW9uKCl7aWYoKHRoaXMuX293bmVyLl9yb3dSZXNpemVyIT0idW5kZWZpbmVkIikmJih0aGlzLl9vd25lci5fcm93UmVzaXplciE9bnVsbCkmJih0aGlzLl9vd25lci5fcm93UmVzaXplci5wYXJlbnROb2RlIT1udWxsKSl7dmFyIGE9dGhpcy5fb3duZXIuX3Jvd1Jlc2l6ZXIucGFyZW50Tm9kZTsKYS5yZW1vdmVDaGlsZCh0aGlzLl9vd25lci5fcm93UmVzaXplcik7CnRoaXMuX293bmVyLl9yb3dSZXNpemVyPW51bGw7CnRoaXMuX293bmVyLl9yb3dSZXNpemVyUmVmVGFibGU9bnVsbDsKfX0sX29uUmVzaXplTW91c2VEb3duSGFuZGxlcjpmdW5jdGlvbihhKXt2YXIgYj1UZWxlcmlrLldlYi5VSS5HcmlkLkdldEN1cnJlbnRFbGVtZW50KGEpOwppZihiKXtpZihiLnRhZ05hbWUudG9Mb3dlckNhc2UoKSE9InRkIil7cmV0dXJuOwp9JGNsZWFySGFuZGxlcnMoYik7Cn10aGlzLl9jcmVhdGVSb3dSZXNpemVyKGEpOwpUZWxlcmlrLldlYi5VSS5HcmlkLkNsZWFyRG9jdW1lbnRFdmVudHMoKTsKdGhpcy5fb25SZXNpemVNb3VzZVVwRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vblJlc2l6ZU1vdXNlVXBIYW5kbGVyKTsKJHRlbGVyaWsuYWRkRXh0ZXJuYWxIYW5kbGVyKGRvY3VtZW50LCJtb3VzZXVwIix0aGlzLl9vblJlc2l6ZU1vdXNlVXBEZWxlZ2F0ZSk7CnRoaXMuX293bmVyLl9pc1Jvd1Jlc2l6ZT10cnVlOwp9LF9vblJlc2l6ZU1vdXNlVXBIYW5kbGVyOmZ1bmN0aW9uKGEpeyR0ZWxlcmlrLnJlbW92ZUV4dGVybmFsSGFuZGxlcihkb2N1bWVudCwibW91c2V1cCIsdGhpcy5fb25SZXNpemVNb3VzZVVwRGVsZWdhdGUpOwp0aGlzLl9vd25lci5faXNSb3dSZXNpemU9bnVsbDsKdGhpcy5fZGVzdHJveVJvd1Jlc2l6ZXJBbmRSZXNpemVSb3coYSx0cnVlKTsKVGVsZXJpay5XZWIuVUkuR3JpZC5SZXN0b3JlRG9jdW1lbnRFdmVudHMoKTsKfX07ClRlbGVyaWsuV2ViLlVJLkdyaWRJdGVtUmVzaXplci5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5HcmlkSXRlbVJlc2l6ZXIiLG51bGwsU3lzLklEaXNwb3NhYmxlKTsKVGVsZXJpay5XZWIuVUkuR3JpZERhdGFJdGVtPWZ1bmN0aW9uKGEpe1RlbGVyaWsuV2ViLlVJLkdyaWREYXRhSXRlbS5pbml0aWFsaXplQmFzZSh0aGlzLFthXSk7CnRoaXMuX293bmVyPXt9Owp0aGlzLl9kYXRhPXt9Owp0aGlzLl9zZWxlY3RlZD1mYWxzZTsKdGhpcy5fc2VsZWN0YWJsZT10cnVlOwp0aGlzLl9leHBhbmRlZD1mYWxzZTsKdGhpcy5fZGlzcGxheT1mYWxzZTsKdGhpcy5fZGF0YUtleVZhbHVlPW51bGw7CnRoaXMuX2RhdGFJdGVtPW51bGw7CnRoaXMuX2l0ZW1JbmRleEhpZXJhcmNoaWNhbD0iIjsKfTsKVGVsZXJpay5XZWIuVUkuR3JpZERhdGFJdGVtLnByb3RvdHlwZT17aW5pdGlhbGl6ZTpmdW5jdGlvbigpe1RlbGVyaWsuV2ViLlVJLkdyaWREYXRhSXRlbS5jYWxsQmFzZU1ldGhvZCh0aGlzLCJpbml0aWFsaXplIik7Cn0sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuX293bmVyLl9vd25lci5yYWlzZV9yb3dEZXN0cm95aW5nKG5ldyBUZWxlcmlrLldlYi5VSS5HcmlkRGF0YUl0ZW1FdmVudEFyZ3ModGhpcy5nZXRfZWxlbWVudCgpLG51bGwpKTsKaWYodGhpcy5nZXRfZWxlbWVudCgpKXskY2xlYXJIYW5kbGVycyh0aGlzLmdldF9lbGVtZW50KCkpOwp0aGlzLl9lbGVtZW50LmNvbnRyb2w9bnVsbDsKfVRlbGVyaWsuV2ViLlVJLkdyaWREYXRhSXRlbS5jYWxsQmFzZU1ldGhvZCh0aGlzLCJkaXNwb3NlIik7Cn0sZ2V0X2l0ZW1JbmRleEhpZXJhcmNoaWNhbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pdGVtSW5kZXhIaWVyYXJjaGljYWw7Cn0sZ2V0X293bmVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX293bmVyOwp9LGdldF9jZWxsOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldF9wYXJlbnQoKS5nZXRDZWxsQnlDb2x1bW5VbmlxdWVOYW1lKHRoaXMsYSk7Cn0sZ2V0X2RhdGFJdGVtOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGFJdGVtOwp9LGZpbmRDb250cm9sOmZ1bmN0aW9uKGEpe3JldHVybiAkdGVsZXJpay5maW5kQ29udHJvbCh0aGlzLmdldF9lbGVtZW50KCksYSk7Cn0sZmluZEVsZW1lbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuICR0ZWxlcmlrLmZpbmRFbGVtZW50KHRoaXMuZ2V0X2VsZW1lbnQoKSxhKTsKfSxnZXREYXRhS2V5VmFsdWU6ZnVuY3Rpb24oYil7dmFyIGM9dGhpcy5nZXRfZWxlbWVudCgpLmlkLnNwbGl0KCJfXyIpWzFdOwp2YXIgYT1udWxsOwppZih0aGlzLl9vd25lci5fb3duZXIuX2NsaWVudEtleVZhbHVlcyYmdGhpcy5fb3duZXIuX293bmVyLl9jbGllbnRLZXlWYWx1ZXNbY10pe2E9dGhpcy5fb3duZXIuX293bmVyLl9jbGllbnRLZXlWYWx1ZXNbY107Cn1yZXR1cm4oYSk/YVtiXTpudWxsOwp9LGdldF9zZWxlY3RlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zZWxlY3RlZDsKfSxzZXRfc2VsZWN0ZWQ6ZnVuY3Rpb24oYil7aWYoIXRoaXMuZ2V0X3NlbGVjdGFibGUoKSl7cmV0dXJuOwp9aWYodGhpcy5fc2VsZWN0ZWQhPWIpe3ZhciBhPXtjdHJsS2V5OmZhbHNlfTsKaWYoIXRoaXMuX293bmVyLl9vd25lci5fc2VsZWN0aW9uLl9zZWxlY3RSb3dJbnRlcm5hbCh0aGlzLmdldF9lbGVtZW50KCksYSx0cnVlLHRydWUsdHJ1ZSkpe3JldHVybjsKfXRoaXMuX3NlbGVjdGVkPWI7Cn19LGdldF9zZWxlY3RhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NlbGVjdGFibGU7Cn0sZ2V0X2V4cGFuZGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V4cGFuZGVkOwp9LHNldF9leHBhbmRlZDpmdW5jdGlvbihhKXtpZih0aGlzLl9leHBhbmRlZCE9YSl7aWYoYSYmIXRoaXMuX293bmVyLmV4cGFuZEl0ZW0odGhpcy5nZXRfZWxlbWVudCgpKSl7cmV0dXJuOwp9aWYoIWEmJiF0aGlzLl9vd25lci5jb2xsYXBzZUl0ZW0odGhpcy5nZXRfZWxlbWVudCgpKSl7cmV0dXJuOwp9dGhpcy5fZXhwYW5kZWQ9YTsKfX0sZ2V0X25lc3RlZFZpZXdzOmZ1bmN0aW9uKCl7dmFyIGg9W107CnZhciBjPVRlbGVyaWsuV2ViLlVJLkdyaWQuR2V0Tm9kZU5leHRTaWJsaW5nQnlUYWdOYW1lKHRoaXMuZ2V0X2VsZW1lbnQoKSwidHIiKTsKaWYodGhpcy5nZXRfb3duZXIoKS5fZGF0YS5oYXNEZXRhaWxJdGVtVGVtcGxhdGUpe2M9VGVsZXJpay5XZWIuVUkuR3JpZC5HZXROb2RlTmV4dFNpYmxpbmdCeVRhZ05hbWUoYywidHIiKTsKfWlmKGMpe3ZhciBhPXRoaXMuZ2V0X293bmVyKCkuZ2V0X2VsZW1lbnQoKS5pZC5zcGxpdCgiRGV0YWlsIikubGVuZ3RoOwp2YXIgYj1jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0YWJsZSIpOwpmb3IodmFyIGc9MCxlPWIubGVuZ3RoOwpnPGU7CmcrKyl7dmFyIGQ9YltnXTsKaWYoZC5pZC5pbmRleE9mKCJEZXRhaWwiKSE9LTEmJmQuaWQuaW5kZXhPZigiX21haW5UYWJsZSIpPT0tMSYmYSsxPT1kLmlkLnNwbGl0KCJEZXRhaWwiKS5sZW5ndGgpe3ZhciBmPSRmaW5kKGQuaWQpOwppZihmKXtBcnJheS5hZGQoaCxmKTsKfX19fXJldHVybiBoOwp9LGdldF9kaXNwbGF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Rpc3BsYXk7Cn0sc2V0X2Rpc3BsYXk6ZnVuY3Rpb24oYSl7aWYodGhpcy5fZGlzcGxheSE9YSl7dGhpcy5fZGlzcGxheT1hOwp9fSxnZXRfaXNJbkVkaXRNb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIEFycmF5LmluZGV4T2YodGhpcy5nZXRfb3duZXIoKS5nZXRfb3duZXIoKS5fZWRpdEluZGV4ZXMsdGhpcy5faXRlbUluZGV4SGllcmFyY2hpY2FsKT4tMTsKfSxnZXRfZWRpdEZvcm1JdGVtOmZ1bmN0aW9uKCl7aWYoJHRlbGVyaWsuJCl7dmFyIGI9JHRlbGVyaWsuJCh0aGlzLmdldF9lbGVtZW50KCkpLm5leHQoKTsKaWYoYi5jaGlsZHJlbigidGQiKS5jaGlsZHJlbigiZGl2LnJnRWRpdEZvcm0iKS5sZW5ndGgpe3JldHVybiBiLmdldCgwKTsKfXJldHVybiBudWxsOwp9dmFyIGE9VGVsZXJpay5XZWIuVUkuR3JpZC5HZXROb2RlTmV4dFNpYmxpbmdCeVRhZ05hbWUodGhpcy5nZXRfZWxlbWVudCgpLCJ0ciIpOwppZihhJiZhLmNlbGxzKXtmb3IodmFyIGM9MDsKYzxhLmNlbGxzLmxlbmd0aDsKYysrKXtpZigkdGVsZXJpay5nZXRDaGlsZEJ5Q2xhc3NOYW1lKGEuY2VsbHNbY10sInJnRWRpdEZvcm0iKSl7cmV0dXJuIGE7Cn19fXJldHVybiBudWxsOwp9fTsKVGVsZXJpay5XZWIuVUkuR3JpZERhdGFJdGVtLnJlZ2lzdGVyQ2xhc3MoIlRlbGVyaWsuV2ViLlVJLkdyaWREYXRhSXRlbSIsU3lzLlVJLkNvbnRyb2wpOwpUeXBlLnJlZ2lzdGVyTmFtZXNwYWNlKCJUZWxlcmlrLldlYi5VSSIpOwpUZWxlcmlrLldlYi5VSS5HcmlkU2Nyb2xsaW5nPWZ1bmN0aW9uKCl7VGVsZXJpay5XZWIuVUkuR3JpZFNjcm9sbGluZy5pbml0aWFsaXplQmFzZSh0aGlzKTsKdGhpcy5fb3duZXI9e307CnRoaXMuX29uR3JpZFNjcm9sbERlbGVnYXRlPW51bGw7Cn07ClRlbGVyaWsuV2ViLlVJLkdyaWRTY3JvbGxpbmcucHJvdG90eXBlPXtpbml0aWFsaXplOmZ1bmN0aW9uKCl7VGVsZXJpay5XZWIuVUkuR3JpZFNjcm9sbGluZy5jYWxsQmFzZU1ldGhvZCh0aGlzLCJpbml0aWFsaXplIik7CnRoaXMuQWxsb3dTY3JvbGw9dGhpcy5fb3duZXIuQ2xpZW50U2V0dGluZ3MuU2Nyb2xsaW5nLkFsbG93U2Nyb2xsOwp0aGlzLlVzZVN0YXRpY0hlYWRlcnM9dGhpcy5fb3duZXIuQ2xpZW50U2V0dGluZ3MuU2Nyb2xsaW5nLlVzZVN0YXRpY0hlYWRlcnM7CmlmKCF0aGlzLl9vd25lci5jYW5SZXBhaW50KCkpe3RoaXMuX3Nob3VsZEluaXRpYWxpemVMYXlvdXRBbmRTY3JvbGw9dHJ1ZTsKdGhpcy5fb3duZXIuYWRkX3BhcmVudFNob3duKHRoaXMuX293bmVyLmdldF9lbGVtZW50KCkpOwp9ZWxzZXt0aGlzLl9pbml0aWFsaXplRGltZW5zaW9ucygpOwp0aGlzLl9pbml0aWFsaXplU2Nyb2xsKCk7Cn1pZihUZWxlcmlrLldlYi5VSS5Ub3VjaFNjcm9sbEV4dGVuZGVyLl9nZXROZWVkc1Njcm9sbEV4dGVuZGVyKCkmJiF0aGlzLl9kcm9wRG93blRvdWNoU2Nyb2xsKXt0aGlzLl9jcmVhdGVUb3VjaFNjcm9sbEV4dGVuZGVyKHRydWUpOwp9fSx1cGRhdGVkOmZ1bmN0aW9uKCl7VGVsZXJpay5XZWIuVUkuR3JpZFNjcm9sbGluZy5jYWxsQmFzZU1ldGhvZCh0aGlzLCJ1cGRhdGVkIik7Cn0sZGlzcG9zZTpmdW5jdGlvbigpe2lmKHRoaXMuX29uUmVzaXplRGVsZWdhdGUpe3RyeXskcmVtb3ZlSGFuZGxlcih3aW5kb3csInJlc2l6ZSIsdGhpcy5fb25SZXNpemVEZWxlZ2F0ZSk7CnRoaXMuX29uUmVzaXplRGVsZWdhdGU9bnVsbDsKfWNhdGNoKGEpe319aWYodGhpcy5fb25HcmlkRnJvemVuU2Nyb2xsRGVsZWdhdGUpeyRyZW1vdmVIYW5kbGVyKHRoaXMuX2Zyb3plblNjcm9sbCwic2Nyb2xsIix0aGlzLl9vbkdyaWRGcm96ZW5TY3JvbGxEZWxlZ2F0ZSk7CnRoaXMuX29uR3JpZEZyb3plblNjcm9sbERlbGVnYXRlPW51bGw7Cn1pZih0aGlzLl9vbkdyaWRTY3JvbGxEZWxlZ2F0ZSl7aWYodGhpcy5fb3duZXIuR3JpZERhdGFEaXYpeyRyZW1vdmVIYW5kbGVyKHRoaXMuX293bmVyLkdyaWREYXRhRGl2LCJzY3JvbGwiLHRoaXMuX29uR3JpZFNjcm9sbERlbGVnYXRlKTsKfWlmKHRoaXMuX293bmVyLkdyaWRIZWFkZXJEaXYpeyRyZW1vdmVIYW5kbGVyKHRoaXMuX293bmVyLkdyaWRIZWFkZXJEaXYsInNjcm9sbCIsdGhpcy5fb25HcmlkU2Nyb2xsRGVsZWdhdGUpOwp9dGhpcy5fb25HcmlkU2Nyb2xsRGVsZWdhdGU9bnVsbDsKfWlmKHRoaXMuX2Zyb3plblNjcm9sbCl7JGNsZWFySGFuZGxlcnModGhpcy5fZnJvemVuU2Nyb2xsKTsKfXRoaXMuX2NyZWF0ZVRvdWNoU2Nyb2xsRXh0ZW5kZXIoZmFsc2UpOwpUZWxlcmlrLldlYi5VSS5HcmlkU2Nyb2xsaW5nLmNhbGxCYXNlTWV0aG9kKHRoaXMsImRpc3Bvc2UiKTsKfSxfaW5pdGlhbGl6ZURpbWVuc2lvbnM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzOwp0aGlzLm9uV2luZG93UmVzaXplKCk7CnRoaXMuaW5pdGlhbGl6ZUF1dG9MYXlvdXQoKTsKdGhpcy5hcHBseUZyb3plblNjcm9sbCgpOwp2YXIgZD0wOwp0aGlzLl9vblJlc2l6ZURlbGVnYXRlPUZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMuX293bmVyLGZ1bmN0aW9uKCl7dmFyIGU9dGhpczsKY2xlYXJJbnRlcnZhbChkKTsKZD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Y2xlYXJJbnRlcnZhbChkKTsKZS5yZXBhaW50KCk7Cn0sMjAwKTsKfSk7CmlmKG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKCJtc2llIikhPS0xKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7JGFkZEhhbmRsZXIod2luZG93LCJyZXNpemUiLGEuX29uUmVzaXplRGVsZWdhdGUpOwp9LDApOwp9ZWxzZXskYWRkSGFuZGxlcih3aW5kb3csInJlc2l6ZSIsdGhpcy5fb25SZXNpemVEZWxlZ2F0ZSk7Cn1pZih0aGlzLl9vd25lci5DbGllbnRTZXR0aW5ncy5TY3JvbGxpbmcuRnJvemVuQ29sdW1uc0NvdW50PjApe2lmKHRoaXMuX293bmVyLkNsaWVudFNldHRpbmdzLlJlc2l6aW5nLkFsbG93Um93UmVzaXplKXt0aGlzLl9vd25lci5DbGllbnRTZXR0aW5ncy5TY3JvbGxpbmcuRnJvemVuQ29sdW1uc0NvdW50Kys7Cn1pZih0aGlzLl9vd25lci5NYXN0ZXJUYWJsZVZpZXdIZWFkZXImJnRoaXMuX293bmVyLk1hc3RlclRhYmxlVmlld0hlYWRlci5fZGF0YS5fY29sdW1uc0RhdGEpe2Zvcih2YXIgYz0wLGI9dGhpcy5fb3duZXIuTWFzdGVyVGFibGVWaWV3SGVhZGVyLl9kYXRhLl9jb2x1bW5zRGF0YS5sZW5ndGg7CmM8YjsKYysrKXtpZih0aGlzLl9vd25lci5NYXN0ZXJUYWJsZVZpZXdIZWFkZXIuX2RhdGEuX2NvbHVtbnNEYXRhW2NdLkNvbHVtblR5cGU9PSJHcmlkRXhwYW5kQ29sdW1uIil7dGhpcy5fb3duZXIuQ2xpZW50U2V0dGluZ3MuU2Nyb2xsaW5nLkZyb3plbkNvbHVtbnNDb3VudCsrOwp9fX19fSxfY3JlYXRlVG91Y2hTY3JvbGxFeHRlbmRlcjpmdW5jdGlvbihjKXt2YXIgYT10aGlzLl9vd25lci5HcmlkRGF0YURpdjsKaWYoYSl7dmFyIGI9dGhpcy5fZHJvcERvd25Ub3VjaFNjcm9sbDsKaWYoYil7aWYoIWMpe2IuZGlzcG9zZSgpOwp0aGlzLl9kcm9wRG93blRvdWNoU2Nyb2xsPW51bGw7Cn19ZWxzZXtpZihjKXt0aGlzLl9kcm9wRG93blRvdWNoU2Nyb2xsPW5ldyBUZWxlcmlrLldlYi5VSS5Ub3VjaFNjcm9sbEV4dGVuZGVyKGEpOwp0aGlzLl9kcm9wRG93blRvdWNoU2Nyb2xsLmluaXRpYWxpemUoKTsKfX19fSxhcHBseUZyb3plblNjcm9sbDpmdW5jdGlvbigpe3RoaXMuX2Zyb3plblNjcm9sbD0kZ2V0KHRoaXMuX293bmVyLkNsaWVudElEKyJfRnJvemVuIik7CnZhciBiPVRlbGVyaWsuV2ViLlVJLkdyaWQuZ2V0U2Nyb2xsQmFySGVpZ2h0KCk7CmlmKHRoaXMuX2Zyb3plblNjcm9sbCl7dmFyIGE9JGdldCh0aGlzLl9vd25lci5DbGllbnRJRCsiX0Zyb3plblNjcm9sbCIpOwp0aGlzLl9vbkdyaWRGcm96ZW5TY3JvbGxEZWxlZ2F0ZT1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMub25HcmlkRnJvemVuU2Nyb2xsKTsKJGFkZEhhbmRsZXIodGhpcy5fZnJvemVuU2Nyb2xsLCJzY3JvbGwiLHRoaXMuX29uR3JpZEZyb3plblNjcm9sbERlbGVnYXRlKTsKdGhpcy5ncmlkTWFzdGVyVGFibGVXaWR0aD10aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3KCkuZ2V0X2VsZW1lbnQoKS5vZmZzZXRXaWR0aDsKYS5zdHlsZS53aWR0aD10aGlzLl9vd25lci5HcmlkRGF0YURpdi5zY3JvbGxXaWR0aCsicHgiOwphLnN0eWxlLmhlaWdodD1iKyJweCI7CmlmKHRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXcoKS5nZXRfZWxlbWVudCgpLm9mZnNldFdpZHRoPnRoaXMuX293bmVyLkdyaWREYXRhRGl2LmNsaWVudFdpZHRoKXtpZigkdGVsZXJpay5pc0lFKXtiKys7Cn10aGlzLl9mcm96ZW5TY3JvbGwuc3R5bGUuaGVpZ2h0PWIrInB4IjsKaWYodGhpcy5fb3duZXIuQ2xpZW50U2V0dGluZ3MuU2Nyb2xsaW5nLlNhdmVTY3JvbGxQb3NpdGlvbiYmdHlwZW9mIHRoaXMuX293bmVyLkNsaWVudFNldHRpbmdzLlNjcm9sbGluZy5TY3JvbGxMZWZ0IT0idW5kZWZpbmVkIil7dGhpcy5fZnJvemVuU2Nyb2xsLnNjcm9sbExlZnQ9dGhpcy5fb3duZXIuQ2xpZW50U2V0dGluZ3MuU2Nyb2xsaW5nLlNjcm9sbExlZnQ7Cn1pZih0aGlzLl9vd25lci5HcmlkRGF0YURpdi5zdHlsZS5vdmVyZmxvd1ghPW51bGwpe3RoaXMuX293bmVyLkdyaWREYXRhRGl2LnN0eWxlLm92ZXJmbG93WD0iaGlkZGVuIjsKfWVsc2V7dGhpcy5fZnJvemVuU2Nyb2xsLnN0eWxlLm1hcmdpblRvcD0iLSIrYisicHgiOwp0aGlzLl9mcm96ZW5TY3JvbGwuc3R5bGUuekluZGV4PTk5OTk5Owp0aGlzLl9mcm96ZW5TY3JvbGwuc3R5bGUucG9zaXRpb249InJlbGF0aXZlIjsKfWlmKCh3aW5kb3cubmV0c2NhcGUpKXt0aGlzLl9mcm96ZW5TY3JvbGwuc3R5bGUud2lkdGg9dGhpcy5fb3duZXIuR3JpZERhdGFEaXYub2Zmc2V0V2lkdGgtYisicHgiOwp9aWYoVGVsZXJpay5XZWIuVUkuR3JpZC5Jc1JpZ2h0VG9MZWZ0KHRoaXMuX293bmVyLkdyaWRIZWFkZXJEaXYpJiZUZWxlcmlrLldlYi5VSS5HcmlkLklzU2Nyb2xsT25MZWZ0U2lkZSgpKXt0aGlzLl9mcm96ZW5TY3JvbGwuc3R5bGUubWFyZ2luTGVmdD1iKyJweCI7Cn1lbHNle2lmKCEoVGVsZXJpay5XZWIuVUkuR3JpZC5Jc1JpZ2h0VG9MZWZ0KHRoaXMuX293bmVyLkdyaWRIZWFkZXJEaXYpJiYkdGVsZXJpay5pc1NhZmFyaSkpe3RoaXMuX2Zyb3plblNjcm9sbC5zdHlsZS5tYXJnaW5SaWdodD1iKyJweCI7Cn19aWYodGhpcy5fb3duZXIuR3JpZEhlYWRlckRpdiYmdGhpcy5fb3duZXIuR3JpZERhdGFEaXYpe2lmKCh0aGlzLl9vd25lci5HcmlkRGF0YURpdi5jbGllbnRXaWR0aD09dGhpcy5fb3duZXIuR3JpZERhdGFEaXYub2Zmc2V0V2lkdGgpKXtpZih0eXBlb2YodGhpcy5fZnJvemVuU2Nyb2xsLnN0eWxlLm92ZXJmbG93WCkhPSJ1bmRlZmluZWQiJiZ0eXBlb2YodGhpcy5fZnJvemVuU2Nyb2xsLnN0eWxlLm92ZXJmbG93WSkhPSJ1bmRlZmluZWQiKXt0aGlzLl9mcm96ZW5TY3JvbGwuc3R5bGUub3ZlcmZsb3dYPSJhdXRvIjsKdGhpcy5fZnJvemVuU2Nyb2xsLnN0eWxlLm92ZXJmbG93WT0iaGlkZGVuIjsKaWYod2luZG93Lm5ldHNjYXBlKXt0aGlzLl9mcm96ZW5TY3JvbGwuc3R5bGUud2lkdGg9cGFyc2VJbnQodGhpcy5fZnJvemVuU2Nyb2xsLnN0eWxlLndpZHRoKStiKyJweCI7Cn19fX1pZigkdGVsZXJpay5pc0lFOCl7dGhpcy5fZnJvemVuU2Nyb2xsLnN0eWxlLm92ZXJmbG93WD0ic2Nyb2xsIjsKfX1lbHNle3RoaXMuX2Zyb3plblNjcm9sbC5zdHlsZS5oZWlnaHQ9MDsKfXRoaXMuaXNGcm96ZW5TY3JvbGw9dHJ1ZTsKdGhpcy5ncmlkRGF0YVRhYmxlV2lkdGg9dGhpcy5fb3duZXIuR3JpZERhdGFEaXYuY2xpZW50V2lkdGg7CnRoaXMuaXNGcm96ZW5TY3JvbGxBcHBsaWVkPXRydWU7Cn19LG9uR3JpZEZyb3plblJlc2l6ZWQ6ZnVuY3Rpb24oKXt2YXIgZT1UZWxlcmlrLldlYi5VSS5HcmlkLmdldFNjcm9sbEJhckhlaWdodCgpLGM9JGdldCh0aGlzLl9vd25lci5DbGllbnRJRCsiX0Zyb3plblNjcm9sbCIpOwppZih0aGlzLmdyaWREYXRhVGFibGVXaWR0aCE9dGhpcy5fb3duZXIuR3JpZERhdGFEaXYuY2xpZW50V2lkdGgpe3RoaXMuZ3JpZERhdGFUYWJsZVdpZHRoPXRoaXMuX293bmVyLkdyaWREYXRhRGl2LmNsaWVudFdpZHRoOwppZih0aGlzLmdyaWRNYXN0ZXJUYWJsZVdpZHRoPnRoaXMuZ3JpZERhdGFUYWJsZVdpZHRoKXt0aGlzLl9mcm96ZW5TY3JvbGwuc3R5bGUuaGVpZ2h0PWUrInB4IjsKaWYodGhpcy5fb3duZXIuR3JpZERhdGFEaXYuc3R5bGUub3ZlcmZsb3dYIT1udWxsKXt0aGlzLl9vd25lci5HcmlkRGF0YURpdi5zdHlsZS5vdmVyZmxvd1g9ImhpZGRlbiI7Cn1lbHNle3RoaXMuX2Zyb3plblNjcm9sbC5zdHlsZS5tYXJnaW5Ub3A9Ii0iK2UrInB4IjsKdGhpcy5fZnJvemVuU2Nyb2xsLnN0eWxlLnpJbmRleD05OTk5OTsKdGhpcy5fZnJvemVuU2Nyb2xsLnN0eWxlLnBvc2l0aW9uPSJyZWxhdGl2ZSI7Cn1pZigod2luZG93Lm5ldHNjYXBlKSl7dGhpcy5fZnJvemVuU2Nyb2xsLnN0eWxlLndpZHRoPXRoaXMuX293bmVyLkdyaWREYXRhRGl2Lm9mZnNldFdpZHRoLWUrInB4IjsKdGhpcy5fZnJvemVuU2Nyb2xsLnN0eWxlLm1hcmdpblJpZ2h0PWUrInB4IjsKfWlmKHRoaXMuX293bmVyLkdyaWRIZWFkZXJEaXYmJnRoaXMuX293bmVyLkdyaWREYXRhRGl2KXtpZigodGhpcy5fb3duZXIuR3JpZERhdGFEaXYuY2xpZW50V2lkdGg9PXRoaXMuX293bmVyLkdyaWREYXRhRGl2Lm9mZnNldFdpZHRoKSl7aWYodHlwZW9mKHRoaXMuX2Zyb3plblNjcm9sbC5zdHlsZS5vdmVyZmxvd1gpIT0idW5kZWZpbmVkIiYmdHlwZW9mKHRoaXMuX2Zyb3plblNjcm9sbC5zdHlsZS5vdmVyZmxvd1kpIT0idW5kZWZpbmVkIil7dGhpcy5fZnJvemVuU2Nyb2xsLnN0eWxlLm92ZXJmbG93WD0iYXV0byI7CnRoaXMuX2Zyb3plblNjcm9sbC5zdHlsZS5vdmVyZmxvd1k9ImhpZGRlbiI7CmlmKHdpbmRvdy5uZXRzY2FwZSl7dGhpcy5fZnJvemVuU2Nyb2xsLnN0eWxlLndpZHRoPXBhcnNlSW50KHRoaXMuX2Zyb3plblNjcm9sbC5zdHlsZS53aWR0aCkrZSsicHgiOwp0aGlzLl9mcm96ZW5TY3JvbGwuc3R5bGUubWFyZ2luUmlnaHQ9MDsKfX19fWlmKCR0ZWxlcmlrLmlzSUU4KXt0aGlzLl9mcm96ZW5TY3JvbGwuc3R5bGUub3ZlcmZsb3dYPSJzY3JvbGwiOwp9fWVsc2V7dGhpcy5fZnJvemVuU2Nyb2xsLnNjcm9sbExlZnQ9MDsKdGhpcy5fZnJvemVuU2Nyb2xsLnN0eWxlLmhlaWdodD0wOwp2YXIgYj10aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3KCkuZ2V0X2NvbHVtbnMoKTsKZm9yKHZhciBkPTAsYT1iLmxlbmd0aDsKZDxhOwpkKyspe2lmKCFiW2RdLmdldF92aXNpYmxlKCkpe3RoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXcoKS5zaG93Q29sdW1uKGQpOwp9fX19fSxvbkdyaWRGcm96ZW5TY3JvbGw6ZnVuY3Rpb24oYil7aWYoIXRoaXMuX2Zyb3plblNjcm9sbENvdW50ZXIpe3RoaXMuX2Zyb3plblNjcm9sbENvdW50ZXI9MDsKfXRoaXMuX2Zyb3plblNjcm9sbENvdW50ZXIrKzsKdmFyIGE9dGhpczsKYS5fY3VycmVudEVsZW1lbnQ9VGVsZXJpay5XZWIuVUkuR3JpZC5HZXRDdXJyZW50RWxlbWVudChiKTsKVGVsZXJpay5XZWIuVUkuR3JpZC5mcm96ZW5TY3JvbGxIYW5sZGVyPWZ1bmN0aW9uKG4pe3ZhciBnPTEwOwppZigkdGVsZXJpay5pc09wZXJhKXtnPW5hdmlnYXRvci51c2VyQWdlbnQuc3Vic3RyaW5nKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiVmVyc2lvbi8iKSsiVmVyc2lvbiIubGVuZ3RoKzEpKjE7Cn1pZihhLl9mcm96ZW5TY3JvbGxDb3VudGVyIT1uKXtyZXR1cm47Cn1pZighYS5fbGFzdFNjcm9sbEluZGV4KXthLl9sYXN0U2Nyb2xsSW5kZXg9MDsKfXZhciB4PWEuX2N1cnJlbnRFbGVtZW50OwppZihhLl9vd25lci5DbGllbnRTZXR0aW5ncy5TY3JvbGxpbmcuRnJvemVuQ29sdW1uc0NvdW50PmEuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXdIZWFkZXIoKS5nZXRfY29sdW1ucygpLmxlbmd0aCl7YS5pc0Zyb3plblNjcm9sbD1mYWxzZTsKfWlmKGEuaXNGcm96ZW5TY3JvbGwpe3ZhciB3PVtdOwp3Ll9nZXRQcmV2aW91c05vdEZyb3plbkNvbHVtbldpZHRoPWZ1bmN0aW9uKGope3ZhciB5PTA7CmZvcih2YXIgaz0wOwprPHRoaXMubGVuZ3RoLTE7CmsrKyl7aWYodGhpc1trXS5JbmRleDxqKXt5Kz10aGlzW2tdLldpZHRoOwp9fXJldHVybiB5Owp9Owp2YXIgYz1hLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3KCkuX2dldEZpcnN0RGF0YVJvdygpOwpmb3IodmFyIHY9YS5fb3duZXIuQ2xpZW50U2V0dGluZ3MuU2Nyb2xsaW5nLkZyb3plbkNvbHVtbnNDb3VudDsKdjxhLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3KCkuZ2V0X2NvbHVtbnMoKS5sZW5ndGg7CnYrKyl7dmFyIGU9YS5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlldygpLmdldF9jb2x1bW5zKClbdl07CnZhciBzPWZhbHNlOwppZigod2luZG93Lm5ldHNjYXBlfHwkdGVsZXJpay5pc1NhZmFyaXx8JHRlbGVyaWsuaXNJRTh8fCgkdGVsZXJpay5pc09wZXJhJiZnPjEwLjEpKSYmZS5nZXRfZWxlbWVudCgpLnN0eWxlLmRpc3BsYXk9PSJub25lIil7ZS5nZXRfZWxlbWVudCgpLnN0eWxlLmRpc3BsYXk9InRhYmxlLWNlbGwiOwpzPXRydWU7Cn12YXIgaDsKaWYoJHRlbGVyaWsuaXNJRTlNb2RlKXtoPWEuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXcoKS5Db2xHcm91cC5Db2xzW3ZdLnN0eWxlLndpZHRoLnJlcGxhY2UoInB4IiwiIikqMTsKfWVsc2V7aWYoISgkdGVsZXJpay5pc0lFNnx8JHRlbGVyaWsuaXNJRTcpJiZhLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3KCkuQ29sR3JvdXAuQ29sc1t2XS5zdHlsZS53aWR0aC5pbmRleE9mKCJweCIpPi0xKXtoPShlLmdldF9lbGVtZW50KCkub2Zmc2V0V2lkdGg+MCk/YS5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlldygpLkNvbEdyb3VwLkNvbHNbdl0uc3R5bGUud2lkdGgucmVwbGFjZSgicHgiLCIiKSoxOih0eXBlb2YoYyk9PSJ1bmRlZmluZWQiPzA6Yy5jZWxsc1t2XS5vZmZzZXRXaWR0aCk7Cn1lbHNle2g9KGUuZ2V0X2VsZW1lbnQoKS5vZmZzZXRXaWR0aD4wKT9lLmdldF9lbGVtZW50KCkub2Zmc2V0V2lkdGg6KHR5cGVvZihjKT09InVuZGVmaW5lZCI/MDpjLmNlbGxzW3ZdLm9mZnNldFdpZHRoKTsKfX13W3cubGVuZ3RoXT17SW5kZXg6dixXaWR0aDpoLEZyb3plbkRpc3BsYXk6dHJ1ZX07CmlmKHR5cGVvZihlLkZyb3plbkRpc3BsYXkpPT0iYm9vbGVhbiIpe3dbdy5sZW5ndGgtMV0uRnJvemVuRGlzcGxheT1lLkZyb3plbkRpc3BsYXk7Cn1pZigod2luZG93Lm5ldHNjYXBlfHwkdGVsZXJpay5pc1NhZmFyaXx8JHRlbGVyaWsuaXNJRTh8fCgkdGVsZXJpay5pc09wZXJhJiZnPjEwLjEpKSYmcyl7ZS5nZXRfZWxlbWVudCgpLnN0eWxlLmRpc3BsYXk9Im5vbmUiOwpzPWZhbHNlOwp9fXZhciBkPTA7CnZhciBwPS0xOwppZigoeC5zY3JvbGxXaWR0aC14Lm9mZnNldFdpZHRoKSE9MCl7cD14LnNjcm9sbFdpZHRoLXgub2Zmc2V0V2lkdGg7Cn1kPU1hdGguZmxvb3IoKHguc2Nyb2xsTGVmdC9wKSoxMDApOwppZihkPDApe2Q9LTEqZDsKfWlmKGQ+MTAwKXtkPTEwMDsKfWlmKFRlbGVyaWsuV2ViLlVJLkdyaWQuSXNSaWdodFRvTGVmdChhLl9vd25lci5HcmlkSGVhZGVyRGl2KSYmKCR0ZWxlcmlrLmlzU2FmYXJpfHwkdGVsZXJpay5pc0lFNykpe2Q9MTAwLWQ7Cn12YXIgdD1hLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3KCkuZ2V0X2NvbHVtbnMoKTsKdmFyIHY9MDsKd2hpbGUodjx3Lmxlbmd0aCl7dmFyIGU9d1t2XTsKdmFyIG09dy5fZ2V0UHJldmlvdXNOb3RGcm96ZW5Db2x1bW5XaWR0aChlLkluZGV4KTsKaWYoKHguc2Nyb2xsV2lkdGgteC5vZmZzZXRXaWR0aCk8MCl7YnJlYWs7Cn12YXIgZj1NYXRoLmZsb29yKCgoZS5XaWR0aCttKS9wKSoxMDApOwppZihmPD1kKXtpZihlLkZyb3plbkRpc3BsYXkpe2EuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXdIZWFkZXIoKS5faGlkZU5vdEZyb3plbkNvbHVtbihlLkluZGV4KTsKfX1lbHNle2lmKCFlLkZyb3plbkRpc3BsYXkpe2EuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXdIZWFkZXIoKS5fc2hvd05vdEZyb3plbkNvbHVtbihlLkluZGV4KTsKfX12Kys7CmlmKHY9PSh3Lmxlbmd0aC0xKSYmZD09MTAwKXt2YXIgdT0wOwp2YXIgcT0wOwp2YXIgbz0wOwpmb3IodmFyIGw9MDsKbDx0Lmxlbmd0aC0xOwpsKyspe2lmKHR5cGVvZih0W2xdLkZyb3plbkRpc3BsYXkpPT0iYm9vbGVhbiImJiF0W2xdLkZyb3plbkRpc3BsYXkpe3UrPXdbb10uV2lkdGg7Cm8rKzsKcT1sOwp9fWlmKCh1LXApPDApe3ZhciByPXdbb107CmEuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXdIZWFkZXIoKS5faGlkZU5vdEZyb3plbkNvbHVtbihyLkluZGV4KTsKfX19YS5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0hlYWRlcigpLmdldF9lbGVtZW50KCkuc3R5bGUudGFibGVMYXlvdXQ9ImF1dG8iOwphLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3SGVhZGVyKCkuZ2V0X2VsZW1lbnQoKS5zdHlsZS50YWJsZUxheW91dD0iZml4ZWQiOwphLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3KCkuZ2V0X2VsZW1lbnQoKS5zdHlsZS53aWR0aD1hLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3SGVhZGVyKCkuZ2V0X2VsZW1lbnQoKS5vZmZzZXRXaWR0aCsicHgiOwphLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3KCkuZ2V0X2VsZW1lbnQoKS5zdHlsZS50YWJsZUxheW91dD0iYXV0byI7CmEuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXcoKS5nZXRfZWxlbWVudCgpLnN0eWxlLnRhYmxlTGF5b3V0PSJmaXhlZCI7CmEuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXdIZWFkZXIoKS5nZXRfZWxlbWVudCgpLnN0eWxlLndpZHRoPSIxMDAlIjsKYS5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlldygpLmdldF9lbGVtZW50KCkuc3R5bGUud2lkdGg9IjEwMCUiOwppZihkPT0xMDAmJigkdGVsZXJpay5pc0ZpcmVmb3h8fCR0ZWxlcmlrLmlzSUU3KSl7YS5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0hlYWRlcigpLmdldF9lbGVtZW50KCkuc3R5bGUud2lkdGg9YS5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0hlYWRlcigpLmdldF9lbGVtZW50KCkub2Zmc2V0V2lkdGgrInB4IjsKYS5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0hlYWRlcigpLmdldF9lbGVtZW50KCkuc3R5bGUudGFibGVMYXlvdXQ9ImF1dG8iOwphLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3SGVhZGVyKCkuZ2V0X2VsZW1lbnQoKS5zdHlsZS50YWJsZUxheW91dD0iZml4ZWQiOwphLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3KCkuZ2V0X2VsZW1lbnQoKS5zdHlsZS53aWR0aD1hLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3SGVhZGVyKCkuZ2V0X2VsZW1lbnQoKS5vZmZzZXRXaWR0aCsicHgiOwphLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3KCkuZ2V0X2VsZW1lbnQoKS5zdHlsZS50YWJsZUxheW91dD0iYXV0byI7CmEuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXdIZWFkZXIoKS5nZXRfZWxlbWVudCgpLnN0eWxlLnRhYmxlTGF5b3V0PSIiOwpzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYoJHRlbGVyaWsuaXNGaXJlZm94JiZTeXMuQnJvd3Nlci52ZXJzaW9uPj00KXthLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3KCkuZ2V0X2VsZW1lbnQoKS5zdHlsZS50YWJsZUxheW91dD0iZml4ZWQiOwp9YS5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0hlYWRlcigpLmdldF9lbGVtZW50KCkuc3R5bGUudGFibGVMYXlvdXQ9ImF1dG8iOwphLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3SGVhZGVyKCkuZ2V0X2VsZW1lbnQoKS5zdHlsZS50YWJsZUxheW91dD0iZml4ZWQiOwp9LDEwMCk7Cn1pZihhLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3Rm9vdGVyKCkpe2EuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXdGb290ZXIoKS5nZXRfZWxlbWVudCgpLnN0eWxlLndpZHRoPWEuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXdIZWFkZXIoKS5nZXRfZWxlbWVudCgpLm9mZnNldFdpZHRoKyJweCI7CmEuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXdGb290ZXIoKS5nZXRfZWxlbWVudCgpLnN0eWxlLnRhYmxlTGF5b3V0PSJhdXRvIjsKYS5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0Zvb3RlcigpLmdldF9lbGVtZW50KCkuc3R5bGUudGFibGVMYXlvdXQ9ImZpeGVkIjsKfX1lbHNle2EuX293bmVyLkdyaWREYXRhRGl2LnNjcm9sbExlZnQ9eC5zY3JvbGxMZWZ0Owp9YS5fZnJvemVuU2Nyb2xsQ291bnRlcj0wOwphLl9vd25lci51cGRhdGVDbGllbnRTdGF0ZSgpOwp9OwpzZXRUaW1lb3V0KCJUZWxlcmlrLldlYi5VSS5HcmlkLmZyb3plblNjcm9sbEhhbmxkZXIoIit0aGlzLl9mcm96ZW5TY3JvbGxDb3VudGVyKyIpIiwwKTsKfSxvbldpbmRvd1Jlc2l6ZTpmdW5jdGlvbigpe3RoaXMuc2V0SGVhZGVyQW5kRm9vdGVyRGl2c1dpZHRoKCk7CnRoaXMuc2V0RGF0YURpdkhlaWdodCgpOwppZih0aGlzLmlzRnJvemVuU2Nyb2xsQXBwbGllZCl7dGhpcy5vbkdyaWRGcm96ZW5SZXNpemVkKCk7Cn19LHNldEhlYWRlckFuZEZvb3RlckRpdnNXaWR0aDpmdW5jdGlvbigpe3ZhciBtPXRoaXMuX293bmVyLGI9bS5nZXRfZWxlbWVudCgpLGk9bS5nZXRfbWFzdGVyVGFibGVWaWV3KCksYT1tLkdyaWREYXRhRGl2LGg9bS5HcmlkSGVhZGVyRGl2OwppZighaXx8IWF8fCFoKXtyZXR1cm47Cn12YXIgaj1pLmdldF9lbGVtZW50KCksZT1UZWxlcmlrLldlYi5VSS5HcmlkLmdldFNjcm9sbEJhckhlaWdodCgpLGs9bmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoIm1zaWUiKT4tMTsKaWYoayl7aWYoYS5vZmZzZXRXaWR0aD4wJiYoai5vZmZzZXRXaWR0aD49Yi5vZmZzZXRXaWR0aC1lfHxqLm9mZnNldEhlaWdodD5hLm9mZnNldEhlaWdodCkmJihkb2N1bWVudC5jb21wYXRNb2RlJiZkb2N1bWVudC5jb21wYXRNb2RlIT0iQmFja0NvbXBhdCIpKXt2YXIgYz1hLm9mZnNldFdpZHRoLWU7CmlmKGM+MCl7aWYoJHRlbGVyaWsuaXNJRTYmJnRoaXMuX29uUmVzaXplRGVsZWdhdGUpe2lmKFRlbGVyaWsuV2ViLlVJLkdyaWQuaGFzRXZlbnRBdHRhY2hlZCh3aW5kb3csInJlc2l6ZSIsdGhpcy5fb25SZXNpemVEZWxlZ2F0ZSkpeyRyZW1vdmVIYW5kbGVyKHdpbmRvdywicmVzaXplIix0aGlzLl9vblJlc2l6ZURlbGVnYXRlKTsKfX1oLnN0eWxlLndpZHRoPWMrInB4IjsKaWYoJHRlbGVyaWsuaXNJRTYmJnRoaXMuX29uUmVzaXplRGVsZWdhdGUpe3ZhciBuPXRoaXM7CnNldFRpbWVvdXQoZnVuY3Rpb24oKXskYWRkSGFuZGxlcih3aW5kb3csInJlc2l6ZSIsbi5fb25SZXNpemVEZWxlZ2F0ZSk7Cn0sMCk7Cn19fWVsc2V7aWYoYS5vZmZzZXRXaWR0aD4wKXtpZigkdGVsZXJpay5pc0lFNiYmdGhpcy5fb25SZXNpemVEZWxlZ2F0ZSl7aWYoVGVsZXJpay5XZWIuVUkuR3JpZC5oYXNFdmVudEF0dGFjaGVkKHdpbmRvdywicmVzaXplIix0aGlzLl9vblJlc2l6ZURlbGVnYXRlKSl7JHJlbW92ZUhhbmRsZXIod2luZG93LCJyZXNpemUiLHRoaXMuX29uUmVzaXplRGVsZWdhdGUpOwp9fWguc3R5bGUud2lkdGg9YS5vZmZzZXRXaWR0aCsicHgiOwppZigkdGVsZXJpay5pc0lFNiYmdGhpcy5fb25SZXNpemVEZWxlZ2F0ZSl7dmFyIG49dGhpczsKc2V0VGltZW91dChmdW5jdGlvbigpeyRhZGRIYW5kbGVyKHdpbmRvdywicmVzaXplIixuLl9vblJlc2l6ZURlbGVnYXRlKTsKfSwwKTsKfX19fXZhciBnPVRlbGVyaWsuV2ViLlVJLkdyaWQuSXNSaWdodFRvTGVmdChoKSYmVGVsZXJpay5XZWIuVUkuR3JpZC5Jc1Njcm9sbE9uTGVmdFNpZGUoKTsKaWYoai5vZmZzZXRXaWR0aD49Yi5vZmZzZXRXaWR0aC1lfHxqLm9mZnNldEhlaWdodD5hLm9mZnNldEhlaWdodHx8IWspe2lmKCghZyYmcGFyc2VJbnQoaC5zdHlsZS5tYXJnaW5SaWdodCkhPT1lKXx8KGcmJnBhcnNlSW50KGguc3R5bGUubWFyZ2luTGVmdCkhPT1lKSl7aWYoIWcpe2guc3R5bGUubWFyZ2luUmlnaHQ9ZSsicHgiOwpoLnN0eWxlLm1hcmdpbkxlZnQ9aC5zdHlsZS5wYWRkaW5nUmlnaHQ9IiI7Cn1lbHNle2guc3R5bGUubWFyZ2luTGVmdD1lKyJweCI7Cmguc3R5bGUubWFyZ2luUmlnaHQ9aC5zdHlsZS5wYWRkaW5nUmlnaHQ9IiI7Cn19fWVsc2V7aC5zdHlsZS5wYWRkaW5nTGVmdD1oLnN0eWxlLnBhZGRpbmdSaWdodD0iIjsKfXNldFRpbWVvdXQoZnVuY3Rpb24oKXtpZihhLmNsaWVudFdpZHRoPT09YS5vZmZzZXRXaWR0aCl7aC5zdHlsZS53aWR0aD0iMTAwJSI7Cmguc3R5bGUubWFyZ2luUmlnaHQ9aC5zdHlsZS5wYWRkaW5nUmlnaHQ9IiI7Cmguc3R5bGUubWFyZ2luTGVmdD1oLnN0eWxlLnBhZGRpbmdMZWZ0PSIiOwp9fSwwKTsKdmFyIGw9dGhpcy5fb3duZXIuR3JpZEZvb3RlckRpdjsKaWYobCl7bC5zdHlsZS5wYWRkaW5nUmlnaHQ9aC5zdHlsZS5wYWRkaW5nUmlnaHQ7Cmwuc3R5bGUucGFkZGluZ0xlZnQ9aC5zdHlsZS5wYWRkaW5nTGVmdDsKbC5zdHlsZS53aWR0aD1oLnN0eWxlLndpZHRoOwpsLnN0eWxlLm1hcmdpblJpZ2h0PWguc3R5bGUubWFyZ2luUmlnaHQ7Cmwuc3R5bGUubWFyZ2luTGVmdD1oLnN0eWxlLm1hcmdpbkxlZnQ7Cn12YXIgZD10aGlzLl9vd25lci5fZ3JvdXBQYW5lbCxmPXRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXdIZWFkZXIoKTsKaWYoZCYmZC5faXRlbXMubGVuZ3RoPjAmJmsmJmYpe2ouc3R5bGUud2lkdGg9Zi5nZXRfZWxlbWVudCgpLm9mZnNldFdpZHRoKyJweCI7Cn19LHNldERhdGFEaXZIZWlnaHQ6ZnVuY3Rpb24oKXtpZih0aGlzLl9vd25lci5HcmlkRGF0YURpdiYmdGhpcy5fb3duZXIuZ2V0X2VsZW1lbnQoKS5zdHlsZS5oZWlnaHQhPSIiKXt0aGlzLl9vd25lci5HcmlkRGF0YURpdi5zdHlsZS5oZWlnaHQ9IjEwcHgiOwp2YXIgYT0wOwppZih0aGlzLl9vd25lci5fZ3JvdXBQYW5lbENsaWVudElEIT0iIil7dmFyIGQ9JGdldCh0aGlzLl9vd25lci5fZ3JvdXBQYW5lbENsaWVudElEKTsKaWYoZCl7YSs9ZC5vZmZzZXRIZWlnaHQ7Cn19aWYodGhpcy5fb3duZXIuR3JpZEhlYWRlckRpdil7YSs9dGhpcy5fb3duZXIuR3JpZEhlYWRlckRpdi5vZmZzZXRIZWlnaHQ7Cn1pZih0aGlzLl9vd25lci5HcmlkRm9vdGVyRGl2KXthKz10aGlzLl9vd25lci5HcmlkRm9vdGVyRGl2Lm9mZnNldEhlaWdodDsKfWlmKHRoaXMuX293bmVyLlBhZ2VyQ29udHJvbCl7YSs9dGhpcy5fb3duZXIuUGFnZXJDb250cm9sLm9mZnNldEhlaWdodDsKfWlmKHRoaXMuX293bmVyLlRvcFBhZ2VyQ29udHJvbCl7YSs9dGhpcy5fb3duZXIuVG9wUGFnZXJDb250cm9sLm9mZnNldEhlaWdodDsKfWlmKHRoaXMuX293bmVyLkNsaWVudFNldHRpbmdzLlNjcm9sbGluZy5Gcm96ZW5Db2x1bW5zQ291bnQ+MCl7YSs9VGVsZXJpay5XZWIuVUkuR3JpZC5nZXRTY3JvbGxCYXJIZWlnaHQoKTsKfXZhciBiPXRoaXMuX293bmVyLmdldF9lbGVtZW50KCkuY2xpZW50SGVpZ2h0LWE7CmlmKGI+MCl7dmFyIGM9dGhpcy5fb3duZXIuZ2V0X2VsZW1lbnQoKS5zdHlsZS5wb3NpdGlvbjsKaWYod2luZG93Lm5ldHNjYXBlKXt0aGlzLl9vd25lci5nZXRfZWxlbWVudCgpLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSI7Cn10aGlzLl9vd25lci5HcmlkRGF0YURpdi5zdHlsZS5oZWlnaHQ9YisicHgiOwppZih3aW5kb3cubmV0c2NhcGUpe3RoaXMuX293bmVyLmdldF9lbGVtZW50KCkuc3R5bGUucG9zaXRpb249YzsKfX19fSxpbml0aWFsaXplQXV0b0xheW91dDpmdW5jdGlvbigpe3ZhciBrPXRoaXMuX293bmVyLk1hc3RlclRhYmxlVmlldzsKdmFyIHQ9dGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0hlYWRlcigpOwppZih0aGlzLkFsbG93U2Nyb2xsJiZ0aGlzLlVzZVN0YXRpY0hlYWRlcnMmJmsmJnQpe3ZhciBsPWsuZ2V0X2VsZW1lbnQoKTsKdmFyIG09dC5nZXRfZWxlbWVudCgpOwp2YXIgYT1rLl9nZXRGaXJzdERhdGFSb3coKTsKaWYoIWEpe2wuc3R5bGUud2lkdGg9bS5vZmZzZXRXaWR0aCsicHgiOwpyZXR1cm47Cn1pZihsLnN0eWxlLnRhYmxlTGF5b3V0IT09ImF1dG8iKXtyZXR1cm47Cn1sLnN0eWxlLnRhYmxlTGF5b3V0PW0uc3R5bGUudGFibGVMYXlvdXQ9ImF1dG8iOwp2YXIgcz10LkhlYWRlclJvdzsKdmFyIGY9MDsKdmFyIGg9bnVsbDsKaWYocyl7aD1zLmNlbGxzOwp9ZWxzZXtpZih0Lk11bHRpSGVhZGVyQ2VsbHMpe2g9dC5NdWx0aUhlYWRlckNlbGxzOwp9fWlmKGghPW51bGwpe2Y9TWF0aC5taW4oaC5sZW5ndGgsYS5jZWxscy5sZW5ndGgpOwp9dmFyIGM9dGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0Zvb3RlcigpOwp2YXIgbz1jP2MuZ2V0X2VsZW1lbnQoKTpudWxsOwp2YXIgaj0wOwp2YXIgbj0kdGVsZXJpay5pc0lFNnx8JHRlbGVyaWsuaXNJRTc7CmlmKG4pe3ZhciBnPXRoaXMuX2dldENvbFdpZHRoQ29ycmVjdGlvbnMoZixtLGsuZ2V0X2NvbHVtbnMoKSk7Cn1mb3IodmFyIHE9MDsKcTxmOwpxKyspe3ZhciBlPXRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXdIZWFkZXIoKS5Db2xHcm91cC5Db2xzW3FdOwppZighZXx8KGUuc3R5bGUud2lkdGghPSIiJiYhd2luZG93Lm5ldHNjYXBlKSl7Y29udGludWU7Cn12YXIgcD1NYXRoLm1heChoW3FdLm9mZnNldFdpZHRoLGEuY2VsbHNbcV0ub2Zmc2V0V2lkdGgpOwppZihvKXt2YXIgcj1vLnRCb2RpZXNbMF0ucm93c1swXTsKdmFyIGQ9cj9yLmNlbGxzW3FdOm51bGw7CmlmKGQmJmQub2Zmc2V0V2lkdGg+cCl7cD1kLm9mZnNldFdpZHRoOwp9fWorPXA7CmlmKHA8PTApe2NvbnRpbnVlOwp9dmFyIGI9MDsKaWYobiYmZ1txXSl7Yj1nW3FdOwp9ZS5zdHlsZS53aWR0aD0ocCtiKSsicHgiOwprLkNvbEdyb3VwLkNvbHNbcV0uc3R5bGUud2lkdGg9cCsicHgiOwppZihjJiZjLkNvbEdyb3VwKXtjLkNvbEdyb3VwLkNvbHNbcV0uc3R5bGUud2lkdGg9cCsicHgiOwp9fWwuc3R5bGUudGFibGVMYXlvdXQ9bS5zdHlsZS50YWJsZUxheW91dD0iZml4ZWQiOwppZihvKXtvLnN0eWxlLnRhYmxlTGF5b3V0PSJmaXhlZCI7Cn1pZih3aW5kb3cubmV0c2NhcGUmJmo+MCl7bC5zdHlsZS53aWR0aD1tLnN0eWxlLndpZHRoPWorInB4IjsKdGhpcy5vbldpbmRvd1Jlc2l6ZSgpOwp9fX0saW5pdGlhbGl6ZVNhdmVTY3JvbGxQb3NpdGlvbjpmdW5jdGlvbigpe2lmKCF0aGlzLl9vd25lci5DbGllbnRTZXR0aW5ncy5TY3JvbGxpbmcuU2F2ZVNjcm9sbFBvc2l0aW9uKXtyZXR1cm47Cn1pZih0aGlzLl9vd25lci5DbGllbnRTZXR0aW5ncy5TY3JvbGxpbmcuU2Nyb2xsVG9wIT0iIiYmIXRoaXMuX293bmVyLkNsaWVudFNldHRpbmdzLlNjcm9sbGluZy5FbmFibGVWaXJ0dWFsU2Nyb2xsUGFnaW5nKXt0aGlzLl9vd25lci5HcmlkRGF0YURpdi5zY3JvbGxUb3A9dGhpcy5fb3duZXIuQ2xpZW50U2V0dGluZ3MuU2Nyb2xsaW5nLlNjcm9sbFRvcDsKfXZhciBhPSRnZXQodGhpcy5fb3duZXIuQ2xpZW50SUQrIl9Gcm96ZW4iKTsKaWYodGhpcy5fb3duZXIuQ2xpZW50U2V0dGluZ3MuU2Nyb2xsaW5nLlNjcm9sbExlZnQmJnRoaXMuX293bmVyLkNsaWVudFNldHRpbmdzLlNjcm9sbGluZy5TY3JvbGxMZWZ0IT0iIil7aWYodGhpcy5fb3duZXIuR3JpZEhlYWRlckRpdiYmIWEpe3RoaXMuX293bmVyLkdyaWRIZWFkZXJEaXYuc2Nyb2xsTGVmdD10aGlzLl9vd25lci5DbGllbnRTZXR0aW5ncy5TY3JvbGxpbmcuU2Nyb2xsTGVmdDsKfWlmKHRoaXMuX293bmVyLkdyaWRGb290ZXJEaXYmJiFhKXt0aGlzLl9vd25lci5HcmlkRm9vdGVyRGl2LnNjcm9sbExlZnQ9dGhpcy5fb3duZXIuQ2xpZW50U2V0dGluZ3MuU2Nyb2xsaW5nLlNjcm9sbExlZnQ7Cn1pZihhKXthLnNjcm9sbExlZnQ9dGhpcy5fb3duZXIuQ2xpZW50U2V0dGluZ3MuU2Nyb2xsaW5nLlNjcm9sbExlZnQ7Cn1lbHNle3RoaXMuX293bmVyLkdyaWREYXRhRGl2LnNjcm9sbExlZnQ9dGhpcy5fb3duZXIuQ2xpZW50U2V0dGluZ3MuU2Nyb2xsaW5nLlNjcm9sbExlZnQ7Cn19ZWxzZXtpZighYSYmVGVsZXJpay5XZWIuVUkuR3JpZC5Jc1JpZ2h0VG9MZWZ0KHRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXcoKS5nZXRfZWxlbWVudCgpKSl7aWYoKG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKCJmaXJlZm94LzMiKSE9LTF8fCgkdGVsZXJpay5pc0lFJiYhKCR0ZWxlcmlrLmlzSUU3fHwkdGVsZXJpay5pc0lFNikpKSYmVGVsZXJpay5XZWIuVUkuR3JpZC5Jc1JpZ2h0VG9MZWZ0KHRoaXMuX293bmVyLmdldF9lbGVtZW50KCkpKXt0aGlzLl9vd25lci5HcmlkRGF0YURpdi5zY3JvbGxMZWZ0PTA7Cn1lbHNle3RoaXMuX293bmVyLkdyaWREYXRhRGl2LnNjcm9sbExlZnQ9dGhpcy5fb3duZXIuR3JpZERhdGFEaXYuc2Nyb2xsV2lkdGg7Cn19fX0sX2luaXRpYWxpemVTY3JvbGw6ZnVuY3Rpb24oKXt2YXIgYj10aGlzOwp2YXIgYT1mdW5jdGlvbigpe2IuaW5pdGlhbGl6ZVNhdmVTY3JvbGxQb3NpdGlvbigpOwp9OwppZih3aW5kb3cubmV0c2NhcGUmJiF3aW5kb3cub3BlcmEpe3dpbmRvdy5zZXRUaW1lb3V0KGEsMCk7Cn1lbHNle2EoKTsKfXRoaXMuX2luaXRpYWxpemVWaXJ0dWFsU2Nyb2xsUGFnaW5nKCk7CmlmKHRoaXMuX293bmVyLkdyaWREYXRhRGl2fHx0aGlzLl9vd25lci5HcmlkSGVhZGVyRGl2KXt0aGlzLl9vbkdyaWRTY3JvbGxEZWxlZ2F0ZT1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX29uR3JpZFNjcm9sbCk7CmlmKHRoaXMuX293bmVyLkdyaWREYXRhRGl2KXskYWRkSGFuZGxlcnModGhpcy5fb3duZXIuR3JpZERhdGFEaXYse3Njcm9sbDp0aGlzLl9vbkdyaWRTY3JvbGxEZWxlZ2F0ZX0pOwp9aWYodGhpcy5fb3duZXIuR3JpZEhlYWRlckRpdil7JGFkZEhhbmRsZXJzKHRoaXMuX293bmVyLkdyaWRIZWFkZXJEaXYse3Njcm9sbDp0aGlzLl9vbkdyaWRTY3JvbGxEZWxlZ2F0ZX0pOwp9fX0sX2hpZGVSYWRDb21ib0JveGVzOmZ1bmN0aW9uKCl7aWYoVGVsZXJpay5XZWIuVUkuUmFkQ29tYm9Cb3gpe3ZhciBsPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJkaXYiKTsKdmFyIGM9W107CmZvcih2YXIgaD0wLGQ9bC5sZW5ndGg7Cmg8ZDsKaCsrKXt2YXIgYj1sW2hdOwppZihTeXMuVUkuRG9tRWxlbWVudC5jb250YWluc0Nzc0NsYXNzKGIsInJjYlNsaWRlIikpe0FycmF5LmFkZChjLGIpOwp9fWZvcih2YXIgaD0wLGQ9Yy5sZW5ndGg7Cmg8ZDsKaCsrKXt2YXIgaz1jW2hdLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJkaXYiKTsKaWYoayl7Zm9yKHZhciBlPTAsZj1rLmxlbmd0aDsKZTxmOwplKyspe2lmKGtbZV0uaWQuaW5kZXhPZigiX0Ryb3BEb3duIik+LTEpe3ZhciBhPWtbZV0uaWQuc3Vic3RyKDAsa1tlXS5pZC5pbmRleE9mKCJfRHJvcERvd24iKSk7CnZhciBnPSRmaW5kKGEpOwppZihnJiZnLmdldF9kcm9wRG93blZpc2libGUoKSYmVGVsZXJpay5XZWIuVUkuR3JpZC5Jc0NoaWxkT2YoZy5nZXRfZWxlbWVudCgpLHRoaXMuX293bmVyLmdldF9lbGVtZW50KCkpKXtnLmhpZGVEcm9wRG93bigpOwp9fX19fX19LF9vbkdyaWRTY3JvbGw6ZnVuY3Rpb24oYyl7aWYodGhpcy5fb3duZXIuX2dldEZpbHRlck1lbnUoKSl7dGhpcy5fb3duZXIuX2dldEZpbHRlck1lbnUoKS5oaWRlKCk7Cn10aGlzLl9oaWRlUmFkQ29tYm9Cb3hlcygpOwppZihUZWxlcmlrLldlYi5VSS5SYWREYXRlUGlja2VyKXt2YXIgYj1UZWxlcmlrLldlYi5VSS5SYWREYXRlUGlja2VyLlBvcHVwSW5zdGFuY2VzOwpmb3IodmFyIGEgaW4gYil7aWYoJGZpbmQoYSkmJigoJGZpbmQoYSkuZ2V0X2lkKCkuaW5kZXhPZih0aGlzLl9vd25lci5DbGllbnRJRCsiX2dkdGNTaGFyZWRDYWxlbmRhciIpPi0xKXx8KCRmaW5kKGEpLmdldF9pZCgpLmluZGV4T2YodGhpcy5fb3duZXIuQ2xpZW50SUQrIl9nZHRjU2hhcmVkVGltZVZpZXciKT4tMSkpKXtUZWxlcmlrLldlYi5VSS5SYWREYXRlUGlja2VyLlBvcHVwSW5zdGFuY2VzW2FdLkhpZGUoKTsKfX19dmFyIGQ9KGMuc3JjRWxlbWVudCk/Yy5zcmNFbGVtZW50OmMudGFyZ2V0OwppZih3aW5kb3cub3BlcmEmJnRoaXMuaXNGcm96ZW5TY3JvbGwpe3RoaXMuX293bmVyLkdyaWREYXRhRGl2LnNjcm9sbExlZnQ9dGhpcy5fb3duZXIuR3JpZEhlYWRlckRpdi5zY3JvbGxMZWZ0PTA7CnJldHVybjsKfWlmKHRoaXMuVXNlU3RhdGljSGVhZGVycyl7dGhpcy5fdXBkYXRlRGF0YURpdlNjcm9sbFBvcyhkKTsKfWlmKCFUZWxlcmlrLldlYi5VSS5HcmlkU2VsZWN0aW9ufHwoVGVsZXJpay5XZWIuVUkuR3JpZFNlbGVjdGlvbiYmdGhpcy5fb3duZXIuQ2xpZW50U2V0dGluZ3MuRW5hYmxlUG9zdEJhY2tPblJvd0NsaWNrKXx8KHRoaXMuX293bmVyLl9zZWxlY3RlZEl0ZW1zSW50ZXJuYWwubGVuZ3RoPjAmJnRoaXMuX293bmVyLl9zZWxlY3RlZEluZGV4ZXMubGVuZ3RoPT0wKSl7dmFyIGc9dGhpcy5fb3duZXIuX3NlbGVjdGVkSXRlbXNJbnRlcm5hbDsKaWYoZy5sZW5ndGg+MCl7Zm9yKHZhciBmPTA7CmY8Zy5sZW5ndGg7CmYrKyl7aWYoZyE9bnVsbCYmIUFycmF5LmNvbnRhaW5zKHRoaXMuX293bmVyLl9zZWxlY3RlZEluZGV4ZXMsZ1tmXS5pdGVtSW5kZXgpKXtBcnJheS5hZGQodGhpcy5fb3duZXIuX3NlbGVjdGVkSW5kZXhlcyxnW2ZdLml0ZW1JbmRleCk7Cn19fX10aGlzLl9vd25lci51cGRhdGVDbGllbnRTdGF0ZSgpOwp0aGlzLl9vd25lci5yYWlzZV9zY3JvbGwobmV3IFRlbGVyaWsuV2ViLlVJLkdyaWRTY3JvbGxFdmVudEFyZ3ModGhpcy5fb3duZXIuX2dyaWREYXRhRGl2KSk7Cn0sX3VwZGF0ZURhdGFEaXZTY3JvbGxQb3M6ZnVuY3Rpb24oYSl7aWYoIWEpe3JldHVybjsKfWlmKCF0aGlzLmlzRnJvemVuU2Nyb2xsKXtpZih0aGlzLl9vd25lci5HcmlkSGVhZGVyRGl2KXtpZihhPT10aGlzLl9vd25lci5HcmlkSGVhZGVyRGl2KXtpZigkdGVsZXJpay5pc1NhZmFyaSl7aWYodGhpcy5fb3duZXIuR3JpZEhlYWRlckRpdi5zY3JvbGxMZWZ0JiZ0aGlzLl9vd25lci5HcmlkSGVhZGVyRGl2LnNjcm9sbExlZnQhPXRoaXMuX293bmVyLkdyaWREYXRhRGl2LnNjcm9sbExlZnQpe3RoaXMuX293bmVyLkdyaWREYXRhRGl2LnNjcm9sbExlZnQ9dGhpcy5fb3duZXIuR3JpZEhlYWRlckRpdi5zY3JvbGxMZWZ0Owp9fWVsc2V7dGhpcy5fb3duZXIuR3JpZERhdGFEaXYuc2Nyb2xsTGVmdD10aGlzLl9vd25lci5HcmlkSGVhZGVyRGl2LnNjcm9sbExlZnQ7Cn19aWYoYT09dGhpcy5fb3duZXIuR3JpZERhdGFEaXYpe2lmKCR0ZWxlcmlrLmlzU2FmYXJpKXtpZih0aGlzLl9vd25lci5HcmlkSGVhZGVyRGl2LnNjcm9sbExlZnQhPXRoaXMuX293bmVyLkdyaWREYXRhRGl2LnNjcm9sbExlZnQpe3RoaXMuX293bmVyLkdyaWRIZWFkZXJEaXYuc2Nyb2xsTGVmdD10aGlzLl9vd25lci5HcmlkRGF0YURpdi5zY3JvbGxMZWZ0Owp9fWVsc2V7dGhpcy5fb3duZXIuR3JpZEhlYWRlckRpdi5zY3JvbGxMZWZ0PXRoaXMuX293bmVyLkdyaWREYXRhRGl2LnNjcm9sbExlZnQ7Cn19fWlmKHRoaXMuX293bmVyLkdyaWRGb290ZXJEaXYpe3RoaXMuX293bmVyLkdyaWRGb290ZXJEaXYuc2Nyb2xsTGVmdD10aGlzLl9vd25lci5HcmlkRGF0YURpdi5zY3JvbGxMZWZ0Owp9fWVsc2V7aWYodGhpcy5fb3duZXIuR3JpZEhlYWRlckRpdil7aWYoJHRlbGVyaWsuaXNTYWZhcmkpe2lmKHRoaXMuX293bmVyLkdyaWRIZWFkZXJEaXYuc2Nyb2xsTGVmdCYmdGhpcy5fb3duZXIuR3JpZEhlYWRlckRpdi5zY3JvbGxMZWZ0IT10aGlzLl9vd25lci5HcmlkRGF0YURpdi5zY3JvbGxMZWZ0KXt0aGlzLl9vd25lci5HcmlkSGVhZGVyRGl2LnNjcm9sbExlZnQ9dGhpcy5fb3duZXIuR3JpZERhdGFEaXYuc2Nyb2xsTGVmdDsKfX1lbHNle3RoaXMuX293bmVyLkdyaWRIZWFkZXJEaXYuc2Nyb2xsTGVmdD10aGlzLl9vd25lci5HcmlkRGF0YURpdi5zY3JvbGxMZWZ0Owp9fWlmKHRoaXMuX293bmVyLkdyaWRGb290ZXJEaXYpe3RoaXMuX293bmVyLkdyaWRGb290ZXJEaXYuc2Nyb2xsTGVmdD10aGlzLl9vd25lci5HcmlkRGF0YURpdi5zY3JvbGxMZWZ0Owp9fX0sX2luaXRpYWxpemVWaXJ0dWFsU2Nyb2xsUGFnaW5nOmZ1bmN0aW9uKGkpe2lmKCF0aGlzLl9vd25lci5DbGllbnRTZXR0aW5ncy5TY3JvbGxpbmcuRW5hYmxlVmlydHVhbFNjcm9sbFBhZ2luZyl7cmV0dXJuOwp9dGhpcy5fc2Nyb2xsQ291bnRlcj0wOwp0aGlzLl9jdXJyZW50QUpBWFNjcm9sbFRvcD0wOwppZih0aGlzLl9vd25lci5DbGllbnRTZXR0aW5ncy5TY3JvbGxpbmcuQUpBWFNjcm9sbFRvcCE9IiImJnR5cGVvZih0aGlzLl9vd25lci5DbGllbnRTZXR0aW5ncy5TY3JvbGxpbmcuQUpBWFNjcm9sbFRvcCkhPSJ1bmRlZmluZWQiKXt0aGlzLl9jdXJyZW50QUpBWFNjcm9sbFRvcD10aGlzLl9vd25lci5DbGllbnRTZXR0aW5ncy5TY3JvbGxpbmcuQUpBWFNjcm9sbFRvcDsKfXZhciBmPXRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXcoKS5nZXRfY3VycmVudFBhZ2VJbmRleCgpKnRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXcoKS5nZXRfcGFnZVNpemUoKSoyMDsKdmFyIGM9dGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlldygpLmdldF9wYWdlQ291bnQoKSp0aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3KCkuZ2V0X3BhZ2VTaXplKCkqMjA7CnZhciBqPWMtZjsKdmFyIGQ9dGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlldygpLmdldF9lbGVtZW50KCk7CnZhciBnOwp2YXIgaDsKaWYoKCR0ZWxlcmlrLmlzSUU4fHwkdGVsZXJpay5pc1NhZmFyaXx8JHRlbGVyaWsuaXNPcGVyYSkmJmQpe2lmKGQucGFyZW50Tm9kZSl7Zz0kZ2V0KCJkdW1teURpdlRvcCIsZC5wYXJlbnROb2RlKTsKaWYoIWcpe2c9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CmcuaW5uZXJIVE1MPSImbmJzcDsiOwpnLnN0eWxlLmhlaWdodD0iMXB4IjsKZy5pZD0iZHVtbXlEaXZUb3AiOwpnLnN0eWxlLm1hcmdpblRvcD0iLTFweCI7CmQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZyxkKTsKfWg9JGdldCgiZHVtbXlEaXZCb3R0b20iLGQucGFyZW50Tm9kZSk7CmlmKCFoKXtoPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwpoLmlubmVySFRNTD0iJm5ic3A7IjsKaC5zdHlsZS5oZWlnaHQ9IjFweCI7CmguaWQ9ImR1bW15RGl2Qm90dG9tIjsKaC5zdHlsZS5tYXJnaW5Cb3R0b209Ii0xcHgiOwpkLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoaCk7Cn19fXZhciBlPWQub2Zmc2V0SGVpZ2h0Owp2YXIgYT0kdGVsZXJpay5pc09wZXJhJiYrU3lzLkJyb3dzZXIudmVyc2lvbjw5Ljg7CmlmKGkmJihhfHwoJHRlbGVyaWsuaXNGaXJlZm94JiYhJHRlbGVyaWsuaXNGaXJlZm94MykpKXtpZihkLnN0eWxlLm1hcmdpbkJvdHRvbSE9IiIpe2U9ZS1wYXJzZUludChkLnN0eWxlLm1hcmdpbkJvdHRvbSk7Cn1pZihkLnN0eWxlLm1hcmdpblRvcCE9IiIpe2U9ZS1wYXJzZUludChkLnN0eWxlLm1hcmdpblRvcCk7Cn19dmFyIGI9dGhpcy5fb3duZXIuX2dyaWREYXRhRGl2Lm9mZnNldEhlaWdodDsKaWYoIWEpe2lmKCgkdGVsZXJpay5pc0lFOHx8JHRlbGVyaWsuaXNPcGVyYSkmJmcmJmgpe2cuc3R5bGUuaGVpZ2h0PU1hdGgubWF4KGYsMCkrInB4IjsKaWYoaj49Yil7aC5zdHlsZS5oZWlnaHQ9TWF0aC5tYXgoai1lLDApKyJweCI7Cn1lbHNle2guc3R5bGUuaGVpZ2h0PU1hdGgubWF4KGItZSwwKSsicHgiOwp9fWVsc2V7ZC5zdHlsZS5tYXJnaW5Ub3A9ZisicHgiOwppZihqPj1iKXtkLnN0eWxlLm1hcmdpbkJvdHRvbT1qLWUrInB4IjsKfWVsc2V7ZC5zdHlsZS5tYXJnaW5Cb3R0b209Yi1lKyJweCI7Cn19fWVsc2V7ZC5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiOwpkLnN0eWxlLnRvcD1mKyJweCI7CmQuc3R5bGUubWFyZ2luQm90dG9tPWMtZSsicHgiOwp9dGhpcy5fb3duZXIuX2dyaWREYXRhRGl2LnNjcm9sbFRvcD1mOwp0aGlzLl9jdXJyZW50QUpBWFNjcm9sbFRvcD1mOwp0aGlzLl9jcmVhdGVTY3JvbGxlclRvb2xUaXAoKTsKdmFyIGs9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vbkFqYXhTY3JvbGxIYW5kbGVyKTsKJGFkZEhhbmRsZXIodGhpcy5fb3duZXIuX2dyaWREYXRhRGl2LCJzY3JvbGwiLGspOwp9LF9jcmVhdGVTY3JvbGxlclRvb2xUaXA6ZnVuY3Rpb24oKXt2YXIgYT0kZ2V0KHRoaXMuX293bmVyLmdldF9pZCgpKyJTY3JvbGxlclRvb2xUaXAiKTsKaWYoIWEpe3RoaXMuX3Njcm9sbGVyVG9vbFRpcD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CnRoaXMuX3Njcm9sbGVyVG9vbFRpcC5pZD10aGlzLl9vd25lci5nZXRfaWQoKSsiU2Nyb2xsZXJUb29sVGlwIjsKdGhpcy5fc2Nyb2xsZXJUb29sVGlwLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSI7CnRoaXMuX3Njcm9sbGVyVG9vbFRpcC5zdHlsZS56SW5kZXg9MTAwMDA7CnRoaXMuX3Njcm9sbGVyVG9vbFRpcC5zdHlsZS5kaXNwbGF5PSJub25lIjsKaWYodGhpcy5fb3duZXIuU2tpbiE9IiIpe3RoaXMuX3Njcm9sbGVyVG9vbFRpcC5jbGFzc05hbWU9U3RyaW5nLmZvcm1hdCgiR3JpZFRvb2xUaXBfezB9Iix0aGlzLl9vd25lci5Ta2luKTsKfWlmKCF0aGlzLl9vd25lci5fZW1iZWRkZWRTa2lufHx0aGlzLl9vd25lci5Ta2luPT0iIil7dGhpcy5fc2Nyb2xsZXJUb29sVGlwLnN0eWxlLmJvcmRlcj0iMXB4IHNvbGlkIjsKdGhpcy5fc2Nyb2xsZXJUb29sVGlwLnN0eWxlLmJhY2tncm91bmRDb2xvcj0iI0Y1RjVEQyI7CnRoaXMuX3Njcm9sbGVyVG9vbFRpcC5zdHlsZS5mb250PSJpY29uIjsKdGhpcy5fc2Nyb2xsZXJUb29sVGlwLnN0eWxlLnBhZGRpbmc9IjJweCI7Cn1kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuX3Njcm9sbGVyVG9vbFRpcCk7Cn19LF9vbkFqYXhTY3JvbGxIYW5kbGVyOmZ1bmN0aW9uKGQpe3ZhciBiPXRoaXMuX293bmVyLl9ncmlkRGF0YURpdjsKaWYoYil7dGhpcy5fY3VycmVudFNjcm9sbFRvcD1iLnNjcm9sbFRvcDsKfXRoaXMuX3Njcm9sbENvdW50ZXIrKzsKdmFyIGc9dGhpczsKVGVsZXJpay5XZWIuVUkuR3JpZC5BamF4U2Nyb2xsSW50ZXJuYWw9ZnVuY3Rpb24oZSl7aWYoZy5fc2Nyb2xsQ291bnRlciE9ZSl7cmV0dXJuOwp9dmFyIGg9Zy5fb3duZXIuX2dyaWREYXRhRGl2OwppZihnLl9jdXJyZW50QUpBWFNjcm9sbFRvcCE9aC5zY3JvbGxUb3Ape2lmKGcuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXcoKS5nZXRfY3VycmVudFBhZ2VJbmRleCgpPT1hKXtyZXR1cm47Cn1nLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3KCkucGFnZShhKzEpOwp9Zy5fc2Nyb2xsQ291bnRlcj0wOwpnLl9oaWRlU2Nyb2xsZXJUb29sVGlwKCk7Cn07CnRoaXMuX293bmVyLnJhaXNlX3Njcm9sbChuZXcgVGVsZXJpay5XZWIuVUkuR3JpZFNjcm9sbEV2ZW50QXJncyhiKSk7CnZhciBmPVRlbGVyaWsuV2ViLlVJLkdyaWQuZ2V0U2Nyb2xsQmFySGVpZ2h0KCk7CnZhciBjPWIuc2Nyb2xsVG9wLyhiLnNjcm9sbEhlaWdodC1iLm9mZnNldEhlaWdodCtmKTsKdmFyIGE9TWF0aC5yb3VuZCgodGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlldygpLmdldF9wYWdlQ291bnQoKS0xKSpjKTsKd2luZG93LnNldFRpbWVvdXQoIlRlbGVyaWsuV2ViLlVJLkdyaWQuQWpheFNjcm9sbEludGVybmFsKCIrdGhpcy5fc2Nyb2xsQ291bnRlcisiKSIsNTAwKTsKdGhpcy5fc2hvd1Njcm9sbGVyVG9vbHRpcChjLGEpOwp9LF9zaG93U2Nyb2xsZXJUb29sdGlwOmZ1bmN0aW9uKGIsZSl7dmFyIGQ9JGdldCh0aGlzLl9vd25lci5nZXRfaWQoKSsiU2Nyb2xsZXJUb29sVGlwIik7CmlmKGQpe3ZhciBhPXRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXcoKS5nZXRfcGFnZUNvdW50KCk7CnRoaXMuX2FwcGx5UGFnZXJUb29sdGlwVGV4dChkLGUsYSk7CnZhciBjPXRoaXMuX293bmVyLl9ncmlkRGF0YURpdjsKZC5zdHlsZS5kaXNwbGF5PSIiOwpkLnN0eWxlLnRvcD1wYXJzZUludChUZWxlcmlrLldlYi5VSS5HcmlkLkZpbmRQb3NZKGMpKStNYXRoLnJvdW5kKGMub2Zmc2V0SGVpZ2h0KmIpKyJweCI7CmQuc3R5bGUubGVmdD1wYXJzZUludChUZWxlcmlrLldlYi5VSS5HcmlkLkZpbmRQb3NYKGMpKStjLm9mZnNldFdpZHRoLShjLm9mZnNldFdpZHRoLWMuY2xpZW50V2lkdGgpLWQub2Zmc2V0V2lkdGgrInB4IjsKfX0sX2FwcGx5UGFnZXJUb29sdGlwVGV4dDpmdW5jdGlvbihhLGcsaCl7aWYodGhpcy5fb3duZXIuQ2xpZW50U2V0dGluZ3MuQ2xpZW50TWVzc2FnZXMuUGFnZXJUb29sdGlwRm9ybWF0U3RyaW5nPT0iIil7YS5zdHlsZS5kaXNwbGF5PSJub25lIjsKfWVsc2V7dmFyIGY9dGhpcy5fb3duZXIuQ2xpZW50U2V0dGluZ3MuQ2xpZW50TWVzc2FnZXMuUGFnZXJUb29sdGlwRm9ybWF0U3RyaW5nOwp2YXIgYz0vXHswW15cfV0qXH0vZzsKdmFyIGI9L1x7MVteXH1dKlx9L2c7CnZhciBkPSgoZz09MCk/MTpnKzEpOwp2YXIgZT1oOwpmPWYucmVwbGFjZShjLGQpLnJlcGxhY2UoYixlKTsKYS5pbm5lckhUTUw9ZjsKfX0sX2hpZGVTY3JvbGxlclRvb2xUaXA6ZnVuY3Rpb24oKXt2YXIgYT10aGlzOwpzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIGI9JGdldChhLl9vd25lci5nZXRfaWQoKSsiU2Nyb2xsZXJUb29sVGlwIik7CmlmKGImJmIucGFyZW50Tm9kZSl7Yi5zdHlsZS5kaXNwbGF5PSJub25lIjsKfX0sMjAwKTsKfSxfY29ycmVjdFdpZHRoRm9ySUU6ZnVuY3Rpb24oYSl7cmV0dXJuIHBhcnNlSW50KGEuY3VycmVudFN0eWxlLmJvcmRlckxlZnRXaWR0aCkrcGFyc2VJbnQoYS5jdXJyZW50U3R5bGUuYm9yZGVyUmlnaHRXaWR0aCkrcGFyc2VJbnQoYS5jdXJyZW50U3R5bGUucGFkZGluZ0xlZnQpK3BhcnNlSW50KGEuY3VycmVudFN0eWxlLnBhZGRpbmdSaWdodCk7Cn0sX2dldENvbFdpZHRoQ29ycmVjdGlvbnM6ZnVuY3Rpb24oZixlLGEpe3ZhciBjPXt9OwppZihlJiZlLnRIZWFkJiZlLnRIZWFkLnJvd3MubGVuZ3RoPjApe3ZhciBoPWUudEhlYWQucm93c1swXS5jZWxsczsKdmFyIGc9MDsKdmFyIGQ9MDsKZm9yKHZhciBiPTA7CmI8YS5sZW5ndGg7CmIrKyl7aWYoYj09ZyYmaFtkXSl7Zys9aFtkXS5jb2xTcGFuOwpkKys7Cn1lbHNle2lmKGFbYl0pe2NbYl09dGhpcy5fY29ycmVjdFdpZHRoRm9ySUUoYVtiXS5nZXRfZWxlbWVudCgpKTsKfX19fXJldHVybiBjOwp9fTsKVGVsZXJpay5XZWIuVUkuR3JpZFNjcm9sbGluZy5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5HcmlkU2Nyb2xsaW5nIixTeXMuQ29tcG9uZW50KTsKVGVsZXJpay5XZWIuVUkuR3JpZFNjcm9sbEV2ZW50QXJncz1mdW5jdGlvbihhKXtUZWxlcmlrLldlYi5VSS5HcmlkU2Nyb2xsRXZlbnRBcmdzLmluaXRpYWxpemVCYXNlKHRoaXMpOwp0aGlzLnNjcm9sbFRvcD1hLnNjcm9sbFRvcDsKdGhpcy5zY3JvbGxMZWZ0PWEuc2Nyb2xsTGVmdDsKdGhpcy5zY3JvbGxDb250cm9sPWE7CnRoaXMuaXNPblRvcD0oYS5zY3JvbGxUb3A9PTApP3RydWU6ZmFsc2U7CnZhciBiPVRlbGVyaWsuV2ViLlVJLkdyaWQuZ2V0U2Nyb2xsQmFySGVpZ2h0KCk7CmlmKGEuY2xpZW50V2lkdGg9PWEuc2Nyb2xsV2lkdGgpe2I9MDsKfXRoaXMuaXNPbkJvdHRvbT0oKGEuc2Nyb2xsSGVpZ2h0LWEub2Zmc2V0SGVpZ2h0K2IpPT1hLnNjcm9sbFRvcCk/dHJ1ZTpmYWxzZTsKfTsKVGVsZXJpay5XZWIuVUkuR3JpZFNjcm9sbEV2ZW50QXJncy5wcm90b3R5cGU9e2dldF9zY3JvbGxUb3A6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zY3JvbGxUb3A7Cn0sZ2V0X3Njcm9sbExlZnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zY3JvbGxMZWZ0Owp9LGdldF9zY3JvbGxDb250cm9sOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2Nyb2xsQ29udHJvbDsKfSxnZXRfaXNPblRvcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzT25Ub3A7Cn0sZ2V0X2lzT25Cb3R0b206ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc09uQm90dG9tOwp9fTsKVGVsZXJpay5XZWIuVUkuR3JpZFNjcm9sbEV2ZW50QXJncy5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5HcmlkU2Nyb2xsRXZlbnRBcmdzIixTeXMuRXZlbnRBcmdzKTsKVHlwZS5yZWdpc3Rlck5hbWVzcGFjZSgiVGVsZXJpay5XZWIuVUkiKTsKVGVsZXJpay5XZWIuVUkuR3JpZFNlbGVjdGlvbj1mdW5jdGlvbigpe1RlbGVyaWsuV2ViLlVJLkdyaWRTZWxlY3Rpb24uaW5pdGlhbGl6ZUJhc2UodGhpcyk7CnRoaXMuX293bmVyPXt9Owp0aGlzLl9tYXN0ZXJUYWJsZT1udWxsOwp0aGlzLl9zZWxlY3Rpb25JblByb2dyZXNzPWZhbHNlOwp0aGlzLl9sYXN0U2VsZWN0ZWRJdGVtSW5kZXg9bnVsbDsKfTsKVGVsZXJpay5XZWIuVUkuR3JpZFNlbGVjdGlvbi5wcm90b3R5cGU9e2luaXRpYWxpemU6ZnVuY3Rpb24oKXtUZWxlcmlrLldlYi5VSS5HcmlkU2VsZWN0aW9uLmNhbGxCYXNlTWV0aG9kKHRoaXMsImluaXRpYWxpemUiKTsKaWYodGhpcy5fb3duZXIuX21hc3RlckNsaWVudElEPT1udWxsKXtyZXR1cm47Cn0kYWRkSGFuZGxlcnModGhpcy5fb3duZXIuZ2V0X2VsZW1lbnQoKSx7Y2xpY2s6RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9jbGljayl9KTsKdGhpcy5fbWFzdGVyVGFibGU9JGdldCh0aGlzLl9vd25lci5fbWFzdGVyQ2xpZW50SUQpLnRCb2RpZXNbMF07CmlmKHRoaXMuX293bmVyLkNsaWVudFNldHRpbmdzLlNlbGVjdGluZy5FbmFibGVEcmFnVG9TZWxlY3RSb3dzJiZ0aGlzLl9vd25lci5BbGxvd011bHRpUm93U2VsZWN0aW9uJiYhdGhpcy5fb3duZXIuQ2xpZW50U2V0dGluZ3MuU2VsZWN0aW5nLlVzZUNsaWVudFNlbGVjdENvbHVtbk9ubHkpeyRhZGRIYW5kbGVycyh0aGlzLl9tYXN0ZXJUYWJsZSx7bW91c2Vkb3duOkZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5fbW91c2Vkb3duKX0pOwokYWRkSGFuZGxlcnModGhpcy5fbWFzdGVyVGFibGUse21vdXNlbW92ZTpGdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX21vdXNlbW92ZSl9KTsKJGFkZEhhbmRsZXJzKHRoaXMuX21hc3RlclRhYmxlLHttb3VzZXVwOkZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5fbW91c2V1cCl9KTsKJHRlbGVyaWsuYWRkRXh0ZXJuYWxIYW5kbGVyKGRvY3VtZW50LCJtb3VzZXVwIixGdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX21vdXNldXApKTsKfWlmKHRoaXMuX293bmVyLl9zZWxlY3RlZEl0ZW1zSW50ZXJuYWwubGVuZ3RoPjApe3ZhciBiPW51bGw7CmZvcih2YXIgYT0wOwphPHRoaXMuX293bmVyLl9zZWxlY3RlZEl0ZW1zSW50ZXJuYWwubGVuZ3RoOwphKyspe2I9dGhpcy5fb3duZXIuX3NlbGVjdGVkSXRlbXNJbnRlcm5hbFthXS5pdGVtSW5kZXg7CmlmKCFBcnJheS5jb250YWlucyh0aGlzLl9vd25lci5fc2VsZWN0ZWRJbmRleGVzLGIpKXtBcnJheS5hZGQodGhpcy5fb3duZXIuX3NlbGVjdGVkSW5kZXhlcyxiKTsKfX19fSx1cGRhdGVkOmZ1bmN0aW9uKCl7VGVsZXJpay5XZWIuVUkuR3JpZFNlbGVjdGlvbi5jYWxsQmFzZU1ldGhvZCh0aGlzLCJ1cGRhdGVkIik7Cn0sZGlzcG9zZTpmdW5jdGlvbigpe2lmKHRoaXMuX21hc3RlclRhYmxlKXskY2xlYXJIYW5kbGVycyh0aGlzLl9tYXN0ZXJUYWJsZSk7CnRoaXMuX21hc3RlclRhYmxlLl9ldmVudHM9bnVsbDsKfXRoaXMuX21hc3RlclRhYmxlPW51bGw7CnRoaXMuX293bmVyPW51bGw7ClRlbGVyaWsuV2ViLlVJLkdyaWRTZWxlY3Rpb24uY2FsbEJhc2VNZXRob2QodGhpcywiZGlzcG9zZSIpOwp9LGdldF9vd25lcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vd25lcjsKfSxzZXRfb3duZXI6ZnVuY3Rpb24oYSl7dGhpcy5fb3duZXI9YTsKfSxfbW91c2Vkb3duOmZ1bmN0aW9uKGEpe2lmKHRoaXMuX293bmVyLkNsaWVudFNldHRpbmdzLlNlbGVjdGluZy5FbmFibGVEcmFnVG9TZWxlY3RSb3dzJiZ0aGlzLl9vd25lci5BbGxvd011bHRpUm93U2VsZWN0aW9uJiYhdGhpcy5fb3duZXIuX3Jvd1Jlc2l6ZXImJmEucmF3RXZlbnQuYnV0dG9uIT0yKXt0aGlzLl9jcmVhdGVSb3dTZWxlY3RvckFyZWEoYSk7Cn19LF9tb3VzZW1vdmU6ZnVuY3Rpb24oYSl7aWYodGhpcy5fb3duZXIuX2lzUm93RHJhZ2dlZCgpKXt0aGlzLl9kZXN0cm95Um93U2VsZWN0b3JBcmVhKGEpOwpyZXR1cm47Cn10aGlzLl9yZXNpemVSb3dTZWxlY3RvckFyZWEoYSk7Cn0sX21vdXNldXA6ZnVuY3Rpb24oYSl7dGhpcy5fZGVzdHJveVJvd1NlbGVjdG9yQXJlYShhKTsKfSxfY3JlYXRlUm93U2VsZWN0b3JBcmVhOmZ1bmN0aW9uKGIpe2lmKGIuY3RybEtleSl7cmV0dXJuOwp9dmFyIGE9bnVsbDsKaWYoYi5zcmNFbGVtZW50KXthPWIuc3JjRWxlbWVudDsKfWVsc2V7aWYoYi50YXJnZXQpe2E9Yi50YXJnZXQ7Cn19aWYoIWF8fGE9PW51bGx8fCFhLnRhZ05hbWUpe3JldHVybjsKfWlmKGEudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT0iaW5wdXQifHxhLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09InRleHRhcmVhInx8YS50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJzZWxlY3QifHxhLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09Im9wdGlvbiIpe3JldHVybjsKfWlmKCghdGhpcy5fb3duZXIuQ2xpZW50U2V0dGluZ3MuU2VsZWN0aW5nLkFsbG93Um93U2VsZWN0KXx8KCF0aGlzLl9vd25lci5BbGxvd011bHRpUm93U2VsZWN0aW9uKSl7cmV0dXJuOwp9dmFyIGM9VGVsZXJpay5XZWIuVUkuR3JpZC5HZXRDdXJyZW50RWxlbWVudChiKTsKaWYoKCFjKXx8KCFUZWxlcmlrLldlYi5VSS5HcmlkLklzQ2hpbGRPZihjLHRoaXMuX293bmVyLmdldF9lbGVtZW50KCkpKSl7cmV0dXJuOwp9dGhpcy5fZmlyc3RSb3c9VGVsZXJpay5XZWIuVUkuR3JpZC5HZXRGaXJzdFBhcmVudEJ5VGFnTmFtZShjLCJ0ciIpOwppZih0aGlzLl9maXJzdFJvdy5pZD09IiIpe3JldHVybjsKfWlmKCF0aGlzLl9yb3dTZWxlY3RvckFyZWEpe3RoaXMuX3Jvd1NlbGVjdG9yQXJlYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7CnRoaXMuX3Jvd1NlbGVjdG9yQXJlYS5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiOwp0aGlzLl9yb3dTZWxlY3RvckFyZWEuc3R5bGUuekluZGV4PTEwMDAxMDA7CmlmKHRoaXMuX293bmVyLlNraW4hPSIiKXt0aGlzLl9yb3dTZWxlY3RvckFyZWEuY2xhc3NOYW1lPVN0cmluZy5mb3JtYXQoIkdyaWRSb3dTZWxlY3Rvcl97MH0iLHRoaXMuX293bmVyLlNraW4pOwp9aWYoIXRoaXMuX293bmVyLl9lbWJlZGRlZFNraW58fHRoaXMuX293bmVyLlNraW49PSIiKXt0aGlzLl9yb3dTZWxlY3RvckFyZWEuc3R5bGUuYmFja2dyb3VuZENvbG9yPSJuYXZ5IjsKfWlmKCJvcGFjaXR5IiBpbiB0aGlzLl9yb3dTZWxlY3RvckFyZWEuc3R5bGUpe3RoaXMuX3Jvd1NlbGVjdG9yQXJlYS5zdHlsZS5vcGFjaXR5PTAuMTsKfWVsc2V7aWYoIk1vek9wYWNpdHkiIGluIHRoaXMuX3Jvd1NlbGVjdG9yQXJlYS5zdHlsZSl7dGhpcy5fcm93U2VsZWN0b3JBcmVhLnN0eWxlLk1vek9wYWNpdHk9MS8xMDsKfWVsc2V7dGhpcy5fcm93U2VsZWN0b3JBcmVhLnN0eWxlLmZpbHRlcj0iYWxwaGEob3BhY2l0eT0xMCk7IjsKfX1pZih0aGlzLl9vd25lci5fZ3JpZERhdGFEaXYpe3RoaXMuX3Jvd1NlbGVjdG9yQXJlYS5zdHlsZS50b3A9VGVsZXJpay5XZWIuVUkuR3JpZC5GaW5kUG9zWSh0aGlzLl9maXJzdFJvdykrdGhpcy5fb3duZXIuX2dyaWREYXRhRGl2LnNjcm9sbFRvcCsicHgiOwp0aGlzLl9yb3dTZWxlY3RvckFyZWEuc3R5bGUubGVmdD1UZWxlcmlrLldlYi5VSS5HcmlkLkZpbmRQb3NYKHRoaXMuX2ZpcnN0Um93KSt0aGlzLl9vd25lci5fZ3JpZERhdGFEaXYuc2Nyb2xsTGVmdCsicHgiOwppZihwYXJzZUludCh0aGlzLl9yb3dTZWxlY3RvckFyZWEuc3R5bGUubGVmdCk8VGVsZXJpay5XZWIuVUkuR3JpZC5GaW5kUG9zWCh0aGlzLl9vd25lci5nZXRfZWxlbWVudCgpKSl7dGhpcy5fcm93U2VsZWN0b3JBcmVhLnN0eWxlLmxlZnQ9VGVsZXJpay5XZWIuVUkuR3JpZC5GaW5kUG9zWCh0aGlzLl9vd25lci5nZXRfZWxlbWVudCgpKSsicHgiOwp9fWVsc2V7dGhpcy5fcm93U2VsZWN0b3JBcmVhLnN0eWxlLnRvcD1UZWxlcmlrLldlYi5VSS5HcmlkLkZpbmRQb3NZKHRoaXMuX2ZpcnN0Um93KSsicHgiOwp0aGlzLl9yb3dTZWxlY3RvckFyZWEuc3R5bGUubGVmdD1UZWxlcmlrLldlYi5VSS5HcmlkLkZpbmRQb3NYKHRoaXMuX2ZpcnN0Um93KSsicHgiOwp9ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLl9yb3dTZWxlY3RvckFyZWEpOwp0aGlzLl9vd25lci5nZXRfZWxlbWVudCgpLmZvY3VzKCk7ClRlbGVyaWsuV2ViLlVJLkdyaWQuQ2xlYXJEb2N1bWVudEV2ZW50cygpOwp0aGlzLl9vd25lci5nZXRfZWxlbWVudCgpLmJsdXIoKTsKfX0sX2Rlc3Ryb3lSb3dTZWxlY3RvckFyZWE6ZnVuY3Rpb24oail7aWYodGhpcy5fcm93U2VsZWN0b3JBcmVhKXt2YXIgYz10aGlzLl9yb3dTZWxlY3RvckFyZWEuc3R5bGUuaGVpZ2h0Owpkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRoaXMuX3Jvd1NlbGVjdG9yQXJlYSk7CnRoaXMuX3Jvd1NlbGVjdG9yQXJlYT1udWxsOwpUZWxlcmlrLldlYi5VSS5HcmlkLlJlc3RvcmVEb2N1bWVudEV2ZW50cygpOwp2YXIgZz1UZWxlcmlrLldlYi5VSS5HcmlkLkdldEN1cnJlbnRFbGVtZW50KGopOwp2YXIgZjsKaWYoKCFnKXx8KCFUZWxlcmlrLldlYi5VSS5HcmlkLklzQ2hpbGRPZihnLHRoaXMuX293bmVyLmdldF9lbGVtZW50KCkpKSl7cmV0dXJuOwp9dmFyIGw9VGVsZXJpay5XZWIuVUkuR3JpZC5HZXRGaXJzdFBhcmVudEJ5VGFnTmFtZShnLCJ0ZCIpOwppZigoZy50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJ0ZCIpfHwoZy50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJ0ciIpfHwobCYmbC50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJ0ZCIpKXtpZihnLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09InRkIil7Zj1nLnBhcmVudE5vZGU7Cn1lbHNle2lmKGwudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT0idGQiKXtmPWwucGFyZW50Tm9kZTsKfWVsc2V7aWYoZy50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJ0ciIpe2Y9ZzsKfX19aWYodGhpcy5fZmlyc3RSb3cucGFyZW50Tm9kZS5wYXJlbnROb2RlLmlkPT1mLnBhcmVudE5vZGUucGFyZW50Tm9kZS5pZCl7dmFyIGg9KHRoaXMuX2ZpcnN0Um93LnJvd0luZGV4PGYucm93SW5kZXgpP3RoaXMuX2ZpcnN0Um93LnJvd0luZGV4OmYucm93SW5kZXg7CnZhciBhPShoPT10aGlzLl9maXJzdFJvdy5yb3dJbmRleCk/Zi5yb3dJbmRleDp0aGlzLl9maXJzdFJvdy5yb3dJbmRleDsKdGhpcy5fc2VsZWN0aW9uSW5Qcm9ncmVzcz10cnVlOwp0aGlzLl9vd25lci5fa2V5Ym9hcmROYXZpZ2F0aW9uUHJvcGVydGllcy5sYXN0Q2xpY2tTZWxlY3RlZEl0ZW09ZjsKZm9yKHZhciBrPWg7Cms8YSsxOwprKyspe2lmKGs9PWEpe3RoaXMuX3NlbGVjdGlvbkluUHJvZ3Jlc3M9ZmFsc2U7Cn12YXIgZD10aGlzLl9maXJzdFJvdy5wYXJlbnROb2RlLnBhcmVudE5vZGUucm93c1trXTsKaWYoZC5pZD09IiIpe2NvbnRpbnVlOwp9aWYoZCl7aWYoYyE9IiIpe3ZhciBiPSRmaW5kKGQuaWQpOwppZihiKXtiLnNldF9zZWxlY3RlZCh0cnVlKTsKfWVsc2V7dmFyIG09JGZpbmQoZC5pZC5zcGxpdCgiX18iKVswXSk7Cm0uc2VsZWN0SXRlbShkKTsKfX19fX1lbHNle319fX0sX3Jlc2l6ZVJvd1NlbGVjdG9yQXJlYTpmdW5jdGlvbihnKXtpZigodGhpcy5fcm93U2VsZWN0b3JBcmVhKSYmKHRoaXMuX3Jvd1NlbGVjdG9yQXJlYS5wYXJlbnROb2RlKSl7dmFyIGY9VGVsZXJpay5XZWIuVUkuR3JpZC5HZXRDdXJyZW50RWxlbWVudChnKTsKaWYoKCFmKXx8KCFUZWxlcmlrLldlYi5VSS5HcmlkLklzQ2hpbGRPZihmLHRoaXMuX293bmVyLmdldF9lbGVtZW50KCkpKSl7cmV0dXJuOwp9dmFyIGM9cGFyc2VJbnQodGhpcy5fcm93U2VsZWN0b3JBcmVhLnN0eWxlLmxlZnQpOwp2YXIgaD1UZWxlcmlrLldlYi5VSS5HcmlkLkdldEV2ZW50UG9zWChnKTsKdmFyIGQ9cGFyc2VJbnQodGhpcy5fcm93U2VsZWN0b3JBcmVhLnN0eWxlLnRvcCk7CnZhciBpPVRlbGVyaWsuV2ViLlVJLkdyaWQuR2V0RXZlbnRQb3NZKGcpOwppZihpPj0kdGVsZXJpay5nZXRMb2NhdGlvbih0aGlzLl9yb3dTZWxlY3RvckFyZWEpLnkrdGhpcy5fcm93U2VsZWN0b3JBcmVhLm9mZnNldEhlaWdodCYmdGhpcy5fcm93U2VsZWN0b3JBcmVhLmRyYWdEaXJlY3Rpb25Ub3Ape3RoaXMuX3Jvd1NlbGVjdG9yQXJlYS5kcmFnRGlyZWN0aW9uVG9wPW51bGw7Cn1pZigoaC1jLTUpPjApe3RoaXMuX3Jvd1NlbGVjdG9yQXJlYS5zdHlsZS53aWR0aD1oLWMtNSsicHgiOwp9aWYodGhpcy5fcm93U2VsZWN0b3JBcmVhLm9mZnNldFdpZHRoPnRoaXMuX293bmVyLmdldF9lbGVtZW50KCkub2Zmc2V0V2lkdGgpe3RoaXMuX3Jvd1NlbGVjdG9yQXJlYS5zdHlsZS53aWR0aD10aGlzLl9vd25lci5nZXRfZWxlbWVudCgpLm9mZnNldFdpZHRoKyJweCI7Cn1pZihpPmQmJiF0aGlzLl9yb3dTZWxlY3RvckFyZWEuZHJhZ0RpcmVjdGlvblRvcCl7aWYoKGktZC01KT4wKXt0aGlzLl9yb3dTZWxlY3RvckFyZWEuc3R5bGUuaGVpZ2h0PWktZC01KyJweCI7Cn19ZWxzZXtpZighdGhpcy5fcm93U2VsZWN0b3JBcmVhLmRyYWdEaXJlY3Rpb25Ub3Ape3RoaXMuX3Jvd1NlbGVjdG9yQXJlYS5kcmFnRGlyZWN0aW9uVG9wPXRydWU7Cn1pZigoZC1pLTUpPjB8fHRoaXMuX3Jvd1NlbGVjdG9yQXJlYS5kcmFnRGlyZWN0aW9uVG9wKXt0aGlzLl9yb3dTZWxlY3RvckFyZWEuc3R5bGUudG9wPWktNSsicHgiOwp2YXIgYj1UZWxlcmlrLldlYi5VSS5HcmlkLkZpbmRQb3NZKHRoaXMuX2ZpcnN0Um93KS1wYXJzZUludCh0aGlzLl9yb3dTZWxlY3RvckFyZWEuc3R5bGUudG9wKS01OwppZihiPjApe2lmKHRoaXMuX293bmVyLl9ncmlkRGF0YURpdil7aWYoKHRoaXMuX293bmVyLl9ncmlkRGF0YURpdi5vZmZzZXRIZWlnaHQrdGhpcy5fb3duZXIuX2dyaWREYXRhRGl2Lm9mZnNldFRvcCk+cGFyc2VJbnQodGhpcy5fcm93U2VsZWN0b3JBcmVhLnN0eWxlLnRvcCkrYil7dGhpcy5fcm93U2VsZWN0b3JBcmVhLnN0eWxlLmhlaWdodD1iKyJweCI7Cn1lbHNle3ZhciBhPSh0aGlzLl9vd25lci5fZ3JpZERhdGFEaXYub2Zmc2V0SGVpZ2h0K3RoaXMuX293bmVyLl9ncmlkRGF0YURpdi5vZmZzZXRUb3ApLXBhcnNlSW50KHRoaXMuX3Jvd1NlbGVjdG9yQXJlYS5zdHlsZS50b3ApLTU7CnRoaXMuX3Jvd1NlbGVjdG9yQXJlYS5zdHlsZS5oZWlnaHQ9KGE+PTApP2ErInB4IjowKyJweCI7Cn19ZWxzZXt0aGlzLl9yb3dTZWxlY3RvckFyZWEuc3R5bGUuaGVpZ2h0PWIrInB4IjsKfX19fX19LF9zaG91bGRSYWlzZVJvd0V2ZW50OmZ1bmN0aW9uKGIpe3ZhciBjOwp2YXIgYT0oYi50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJpbnB1dCImJmIudHlwZS50b0xvd2VyQ2FzZSgpPT0iY2hlY2tib3giJiYoYi5pZCYmYi5pZC5pbmRleE9mKCJTZWxlY3RDaGVja0JveCIpIT0tMSkpOwppZigoYi50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJpbnB1dCImJiFhKXx8Yi50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJzZWxlY3QifHxiLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09Im9wdGlvbiJ8fGIudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT0iYnV0dG9uInx8Yi50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJhInx8Yi50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJ0ZXh0YXJlYSJ8fGIudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT0iaW1nIil7Yz1mYWxzZTsKfWVsc2V7Yz10cnVlOwp9cmV0dXJuIGM7Cn0sX2NsaWNrOmZ1bmN0aW9uKGYpe3ZhciBjPShmLnRhcmdldCk/Zi50YXJnZXQ6Zi5zcmNFbGVtZW50OwppZigkdGVsZXJpay5pc1RvdWNoRGV2aWNlJiZjLm5vZGVUeXBlPT0zKXtjPWMucGFyZW50Tm9kZTsKfWlmKCFjLnRhZ05hbWUpe3JldHVybjsKfWlmKGMudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT0ibGFiZWwiJiZjLmh0bWxGb3Ipe3JldHVybjsKfXZhciBoPWMuaWQmJmMuaWQuaW5kZXhPZigiUm93RHJhZ0hhbmRsZSIpPi0xOwppZighdGhpcy5fc2hvdWxkUmFpc2VSb3dFdmVudChjKSYmIWgpe3JldHVybjsKfXZhciBrPShjLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09ImlucHV0IiYmYy50eXBlLnRvTG93ZXJDYXNlKCk9PSJjaGVja2JveCImJihjLmlkJiZjLmlkLmluZGV4T2YoIlNlbGVjdENoZWNrQm94IikhPS0xKSk7CnZhciBtPXRoaXMuX293bmVyOwppZihrJiZtLkNsaWVudFNldHRpbmdzLkFsbG93S2V5Ym9hcmROYXZpZ2F0aW9uKXttLmdldF9lbGVtZW50KCkuZm9jdXMoKTsKfWlmKG0uQ2xpZW50U2V0dGluZ3MuU2VsZWN0aW5nJiZtLkNsaWVudFNldHRpbmdzLlNlbGVjdGluZy5BbGxvd1Jvd1NlbGVjdCl7aWYoZi5jdHJsS2V5KXttLl9rZXlib2FyZE5hdmlnYXRpb25Qcm9wZXJ0aWVzLmhvbGRpbmdDdHJsPXRydWU7Cn1pZihjLnRhZ05hbWUudG9Mb3dlckNhc2UoKSE9InRyIil7Yz1UZWxlcmlrLldlYi5VSS5HcmlkLkdldEZpcnN0UGFyZW50QnlUYWdOYW1lKGMsInRyIik7CndoaWxlKGMmJmMuaWQuc3BsaXQoIl9fIikubGVuZ3RoIT09MiYmYy5wYXJlbnROb2RlKXtjPVRlbGVyaWsuV2ViLlVJLkdyaWQuR2V0Rmlyc3RQYXJlbnRCeVRhZ05hbWUoYy5wYXJlbnROb2RlLCJ0ciIpOwp9fWlmKG0uQ2xpZW50U2V0dGluZ3MuU2VsZWN0aW5nLlVzZUNsaWVudFNlbGVjdENvbHVtbk9ubHkmJiFrJiZ0aGlzLl9maW5kQ2xpZW50U2VsZWN0Q29sdW1uKGMpJiYhaCl7fWVsc2V7dmFyIGk9YzsKdmFyIGE9ZmFsc2U7CndoaWxlKGMmJlRlbGVyaWsuV2ViLlVJLkdyaWQuSXNDaGlsZE9mKGMsbS5nZXRfZWxlbWVudCgpKSl7aWYoYy5pZCYmYy5pZC5zcGxpdCgiX18iKS5sZW5ndGg9PTIpe2E9dHJ1ZTsKYnJlYWs7Cn1jPVRlbGVyaWsuV2ViLlVJLkdyaWQuR2V0Rmlyc3RQYXJlbnRCeVRhZ05hbWUoYy5wYXJlbnROb2RlLCJ0ciIpOwp9aWYoIWEpe2M9aTsKfWlmKGMmJihjLnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlPT1tLmdldF9lbGVtZW50KCl8fGMucGFyZW50Tm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGU9PW0uX2dyaWREYXRhRGl2fHxBcnJheS5jb250YWlucyhtLmdldF9kZXRhaWxUYWJsZXMoKSwkZmluZChjLnBhcmVudE5vZGUucGFyZW50Tm9kZS5pZCkpKSYmYy5pZCYmYy5pZC5zcGxpdCgiX18iKS5sZW5ndGg9PTIpe2lmKG0uZ2V0X2FsbG93TXVsdGlSb3dTZWxlY3Rpb24oKSl7aWYoZi5zaGlmdEtleSl7dmFyIGQ9bS5fc2VhcmNoUm93SW5kZXgoYy5pZCk7CnZhciBiPXRoaXMuX2xhc3RTZWxlY3RlZEl0ZW1JbmRleDsKdGhpcy5fc2VsZWN0aW9uSW5Qcm9ncmVzcz10cnVlOwppZighaXNOYU4ocGFyc2VJbnQoYikpKXtpZihiPGQpe20uX2NsZWFyU2VsZWN0ZWRJdGVtc0V4Y2x1ZGluZ0ludGVydmFsKGIsZCk7Cm0uX3NlbGVjdEl0ZW1zSW5JbnRlcnZhbChiLGQsMSk7Cn1lbHNle2lmKGI+ZCl7bS5fY2xlYXJTZWxlY3RlZEl0ZW1zRXhjbHVkaW5nSW50ZXJ2YWwoZCxiKTsKbS5fc2VsZWN0SXRlbXNJbkludGVydmFsKGQsYiwxKTsKfWVsc2V7bS5fY2xlYXJTZWxlY3RlZEl0ZW1zRXhjbHVkaW5nSW50ZXJ2YWwoYixiKTsKfX19ZWxzZXt0aGlzLl9sYXN0U2VsZWN0ZWRJdGVtSW5kZXg9ZDsKfX1pZihmLmN0cmxLZXl8fCghZi5jdHJsS2V5JiYhZi5zaGlmdEtleSkpe3RoaXMuX2xhc3RTZWxlY3RlZEl0ZW1JbmRleD1tLl9zZWFyY2hSb3dJbmRleChjLmlkKTsKfXRoaXMuX3NlbGVjdGlvbkluUHJvZ3Jlc3M9ZmFsc2U7CnRoaXMuX3NlbGVjdFJvd0ludGVybmFsKGMsZixrLHRydWUsdHJ1ZSk7Cn1lbHNle2lmKGspe3ZhciBsPUFycmF5LmNvbnRhaW5zKG0uX3NlbGVjdGVkSW5kZXhlcyxjLmlkLnNwbGl0KCJfXyIpWzFdKTsKdGhpcy5fc2VsZWN0Um93SW50ZXJuYWwoYyxmLGwsbCx0cnVlKTsKfWVsc2V7dGhpcy5fc2VsZWN0Um93SW50ZXJuYWwoYyxmLGZhbHNlLGZhbHNlLHRydWUpOwp9fW0uX2tleWJvYXJkTmF2aWdhdGlvblByb3BlcnRpZXMubGFzdENsaWNrU2VsZWN0ZWRJdGVtPWM7Cn19fWlmKG0uQ2xpZW50U2V0dGluZ3MmJm0uQ2xpZW50U2V0dGluZ3MuRW5hYmxlUG9zdEJhY2tPblJvd0NsaWNrJiZjKXtpZihjJiZjLnRhZ05hbWUudG9Mb3dlckNhc2UoKSE9InRyIil7Yz1UZWxlcmlrLldlYi5VSS5HcmlkLkdldEZpcnN0UGFyZW50QnlUYWdOYW1lKGMsInRyIik7Cn1pZihjJiZjLmlkIT0iIiYmYy5pZC5zcGxpdCgiX18iKS5sZW5ndGg9PTIpe3ZhciBqPWMuaWQuc3BsaXQoIl9fIilbMV07CnZhciBnPW0uQ2xpZW50U2V0dGluZ3MuUG9zdEJhY2tGdW5jdGlvbjsKZz1nLnJlcGxhY2UoInswfSIsbS5VbmlxdWVJRCk7Cmc9Zy5yZXBsYWNlKCJ7MX0iLCJSb3dDbGljazsiK2opOwpzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZXZhbChnKTsKfSwxMDApOwp9fX0sX3NlbGVjdFJvd0ludGVybmFsOmZ1bmN0aW9uKHUsZCxxLGcsYSx2KXt2YXIgcDsKaWYodHlwZW9mKHYpPT0idW5kZWZpbmVkIil7dj10cnVlOwpwPWZhbHNlOwp9ZWxzZXtwPXY7Cn12YXIgbD11LmlkLnNwbGl0KCJfXyIpWzFdOwp2YXIgeD0kZmluZCh1LmlkLnNwbGl0KCJfXyIpWzBdKTsKeC5nZXRfZGF0YUl0ZW1zKCk7CnZhciByPSRmaW5kKHUuaWQpOwppZihyJiYhci5nZXRfc2VsZWN0YWJsZSgpKXt0aGlzLl9zZWxlY3RSb3dJbnRlcm5hbFNldEFjdGl2ZVJvdyh1LGQpOwpyZXR1cm47Cn1pZighcSl7dmFyIG89KGQucmF3RXZlbnQmJiFkLnJhd0V2ZW50Lm1ldGFLZXkpfHwkdGVsZXJpay5pc1RvdWNoRGV2aWNlOwppZighdGhpcy5fb3duZXIuQWxsb3dNdWx0aVJvd1NlbGVjdGlvbnx8KHRoaXMuX293bmVyLkFsbG93TXVsdGlSb3dTZWxlY3Rpb24mJighKGQuY3RybEtleXx8ZC5zaGlmdEtleSkmJm8pKSl7aWYoIWQuc2hpZnRLZXkpe3RoaXMuX293bmVyLl9rZXlib2FyZE5hdmlnYXRpb25Qcm9wZXJ0aWVzLmxhc3RTZWxlY3RlZFJvd0luZGV4PXRoaXMuX293bmVyLl9zZWFyY2hSb3dJbmRleCh1LmlkKTsKfWlmKHRoaXMuX293bmVyLl9zZWxlY3RlZEl0ZW1zSW50ZXJuYWwubGVuZ3RoPjApe3ZhciB0PXRoaXMuX293bmVyLl9zZWxlY3RlZEl0ZW1zSW50ZXJuYWwubGVuZ3RoLTE7CndoaWxlKHQ+PTApe3ZhciBzPSRnZXQodGhpcy5fb3duZXIuX3NlbGVjdGVkSXRlbXNJbnRlcm5hbFt0XS5pZCk7CmlmKHM9PW51bGwpe0FycmF5LnJlbW92ZSh0aGlzLl9vd25lci5fc2VsZWN0ZWRJdGVtc0ludGVybmFsLHRoaXMuX293bmVyLl9zZWxlY3RlZEl0ZW1zSW50ZXJuYWxbdF0pOwpBcnJheS5yZW1vdmUodGhpcy5fb3duZXIuX3NlbGVjdGVkSW5kZXhlcyx0aGlzLl9vd25lci5fc2VsZWN0ZWRJbmRleGVzW3RdKTsKdC0tOwpjb250aW51ZTsKfXZhciByPSRmaW5kKHMuaWQpOwppZihyJiYhci5nZXRfc2VsZWN0YWJsZSgpKXt0LS07CmNvbnRpbnVlOwp9dmFyIGs9bmV3IFRlbGVyaWsuV2ViLlVJLkdyaWREYXRhSXRlbUNhbmNlbEV2ZW50QXJncyhzLGQpOwp0aGlzLl9vd25lci5yYWlzZV9yb3dEZXNlbGVjdGluZyhrKTsKaWYoay5nZXRfY2FuY2VsKCkpe3QtLTsKY29udGludWU7Cn1TeXMuVUkuRG9tRWxlbWVudC5yZW1vdmVDc3NDbGFzcyhzLHguX2RhdGEuX3NlbGVjdGVkSXRlbVN0eWxlQ2xhc3MpOwppZih4Ll9kYXRhLl9zZWxlY3RlZEl0ZW1TdHlsZSl7dmFyIG49cy5zdHlsZS5jc3NUZXh0LnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvIC9nLCIiKTsKdmFyIGg9bi5zcGxpdCgiOyIpOwpmb3IodmFyIG09MDsKbTxoLmxlbmd0aDsKbSsrKXtpZih4Ll9kYXRhLl9zZWxlY3RlZEl0ZW1TdHlsZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoaFttXSkhPS0xKXtoW21dPSIiOwp9fXMuc3R5bGUuY3NzVGV4dD1oLmpvaW4oIjsiKTsKfXRoaXMuX2NoZWNrQ2xpZW50U2VsZWN0Q29sdW1uKHMsZmFsc2UpOwp2YXIgZj0kZmluZCh0aGlzLl9vd25lci5fc2VsZWN0ZWRJdGVtc0ludGVybmFsW3RdLmlkKTsKaWYoZil7Zi5fc2VsZWN0ZWQ9ZmFsc2U7Cn1BcnJheS5yZW1vdmUodGhpcy5fb3duZXIuX3NlbGVjdGVkSXRlbXNJbnRlcm5hbCx0aGlzLl9vd25lci5fc2VsZWN0ZWRJdGVtc0ludGVybmFsW3RdKTsKQXJyYXkucmVtb3ZlKHRoaXMuX293bmVyLl9zZWxlY3RlZEluZGV4ZXMsdGhpcy5fb3duZXIuX3NlbGVjdGVkSW5kZXhlc1t0XSk7CmlmKHRoaXMuX293bmVyLmdldF9lbmFibGVBcmlhU3VwcG9ydCgpKXtzLnNldEF0dHJpYnV0ZSgiYXJpYS1zZWxlY3RlZCIsImZhbHNlIik7Cn10aGlzLl9vd25lci5yYWlzZV9yb3dEZXNlbGVjdGVkKG5ldyBUZWxlcmlrLldlYi5VSS5HcmlkRGF0YUl0ZW1FdmVudEFyZ3MocyxkKSk7CnQ9TWF0aC5taW4odGhpcy5fb3duZXIuX3NlbGVjdGVkSXRlbXNJbnRlcm5hbC5sZW5ndGgsdCk7CnQtLTsKfX12YXIgdz10aGlzLl9nZXRUYWJsZUhlYWRlclJvdyh1LnBhcmVudE5vZGUucGFyZW50Tm9kZSk7CmlmKHcpe3RoaXMuX2NoZWNrQ2xpZW50U2VsZWN0Q29sdW1uKHcsZmFsc2UpOwp9fX1pZighQXJyYXkuY29udGFpbnModGhpcy5fb3duZXIuX3NlbGVjdGVkSW5kZXhlcyxsKSl7aWYoIXRoaXMuX293bmVyLkFsbG93TXVsdGlSb3dTZWxlY3Rpb24mJnRoaXMuX293bmVyLl9zZWxlY3RlZEluZGV4ZXMubGVuZ3RoPjApe3RoaXMuX2NoZWNrQ2xpZW50U2VsZWN0Q29sdW1uKHUsZmFsc2UpOwp9ZWxzZXtpZighcXx8dil7dmFyIGs9bmV3IFRlbGVyaWsuV2ViLlVJLkdyaWREYXRhSXRlbUNhbmNlbEV2ZW50QXJncyh1LGQpOwp0aGlzLl9vd25lci5yYWlzZV9yb3dTZWxlY3Rpbmcoayk7CmlmKGsuZ2V0X2NhbmNlbCgpKXtpZihxKXt0aGlzLl9jaGVja0NsaWVudFNlbGVjdENvbHVtbih1LGZhbHNlKTsKaWYodS5wYXJlbnROb2RlIT1udWxsJiZ0eXBlb2YodS5wYXJlbnROb2RlKSE9InVuZGVmaW5lZCImJnUucGFyZW50Tm9kZS5wYXJlbnROb2RlIT1udWxsJiZ0eXBlb2YodS5wYXJlbnROb2RlLnBhcmVudE5vZGUpIT0idW5kZWZpbmVkIil7dmFyIHc9dGhpcy5fZ2V0VGFibGVIZWFkZXJSb3codS5wYXJlbnROb2RlLnBhcmVudE5vZGUpOwppZih3KXt0aGlzLl9jaGVja0NsaWVudFNlbGVjdENvbHVtbih3LGZhbHNlKTsKfX19cmV0dXJuIGZhbHNlOwp9U3lzLlVJLkRvbUVsZW1lbnQuYWRkQ3NzQ2xhc3ModSx4Ll9kYXRhLl9zZWxlY3RlZEl0ZW1TdHlsZUNsYXNzKTsKaWYoeC5fZGF0YS5fc2VsZWN0ZWRJdGVtU3R5bGUhPSIiKXt1LnN0eWxlLmNzc1RleHQ9dS5zdHlsZS5jc3NUZXh0KyI7Iit4Ll9kYXRhLl9zZWxlY3RlZEl0ZW1TdHlsZTsKfUFycmF5LmFkZCh0aGlzLl9vd25lci5fc2VsZWN0ZWRJdGVtc0ludGVybmFsLHtpdGVtSW5kZXg6bCxpZDp1LmlkfSk7CkFycmF5LmFkZCh0aGlzLl9vd25lci5fc2VsZWN0ZWRJbmRleGVzLGwpOwp0aGlzLl9jaGVja0NsaWVudFNlbGVjdENvbHVtbih1LHRydWUpOwp2YXIgZj0kZmluZCh1LmlkKTsKaWYoZil7Zi5fc2VsZWN0ZWQ9dHJ1ZTsKfWlmKHRoaXMuX293bmVyLmdldF9lbmFibGVBcmlhU3VwcG9ydCgpKXt1LnNldEF0dHJpYnV0ZSgiYXJpYS1zZWxlY3RlZCIsInRydWUiKTsKfXRoaXMuX293bmVyLnJhaXNlX3Jvd1NlbGVjdGVkKG5ldyBUZWxlcmlrLldlYi5VSS5HcmlkRGF0YUl0ZW1FdmVudEFyZ3ModSxkKSk7CnZhciBjPTA7CnZhciBiPXguZ2V0X2RhdGFJdGVtcygpOwpmb3IodmFyIHQ9MDsKbGVuPWIubGVuZ3RoLHQ8bGVuOwp0Kyspe2lmKCFiW3RdLmdldF9zZWxlY3RhYmxlKCkmJiFiW3RdLmdldF9zZWxlY3RlZCgpKXtjKys7Cn19aWYoIXAmJnguZ2V0X3NlbGVjdGVkSXRlbXMoKS5sZW5ndGg9PXguZ2V0X2RhdGFJdGVtcygpLmxlbmd0aC1jKXtpZih1LnBhcmVudE5vZGUhPW51bGwmJnR5cGVvZih1LnBhcmVudE5vZGUpIT0idW5kZWZpbmVkIiYmdS5wYXJlbnROb2RlLnBhcmVudE5vZGUhPW51bGwmJnR5cGVvZih1LnBhcmVudE5vZGUucGFyZW50Tm9kZSkhPSJ1bmRlZmluZWQiKXt2YXIgdz10aGlzLl9nZXRUYWJsZUhlYWRlclJvdyh1LnBhcmVudE5vZGUucGFyZW50Tm9kZSk7CmlmKHcpe3RoaXMuX2NoZWNrQ2xpZW50U2VsZWN0Q29sdW1uKHcsdHJ1ZSk7Cn19fX19fWVsc2V7aWYoKGd8fChxJiYhdikpJiYhZC5zaGlmdEtleSl7dmFyIGs9bmV3IFRlbGVyaWsuV2ViLlVJLkdyaWREYXRhSXRlbUNhbmNlbEV2ZW50QXJncyh1LGQpOwp0aGlzLl9vd25lci5yYWlzZV9yb3dEZXNlbGVjdGluZyhrKTsKaWYoIWsuZ2V0X2NhbmNlbCgpKXtTeXMuVUkuRG9tRWxlbWVudC5yZW1vdmVDc3NDbGFzcyh1LHguX2RhdGEuX3NlbGVjdGVkSXRlbVN0eWxlQ2xhc3MpOwppZih4Ll9kYXRhLl9zZWxlY3RlZEl0ZW1TdHlsZSl7dmFyIG49dS5zdHlsZS5jc3NUZXh0LnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvIC9nLCIiKTsKdmFyIGg9bi5zcGxpdCgiOyIpOwpmb3IodmFyIG09MDsKbTxoLmxlbmd0aDsKbSsrKXtpZih4Ll9kYXRhLl9zZWxlY3RlZEl0ZW1TdHlsZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoaFttXSkhPS0xKXtoW21dPSIiOwp9fXUuc3R5bGUuY3NzVGV4dD1oLmpvaW4oIjsiKTsKfWZvcih2YXIgdD0wOwp0PHRoaXMuX293bmVyLl9zZWxlY3RlZEl0ZW1zSW50ZXJuYWwubGVuZ3RoOwp0Kyspe2lmKHRoaXMuX293bmVyLl9zZWxlY3RlZEl0ZW1zSW50ZXJuYWxbdF0uaXRlbUluZGV4PT1sKXt2YXIgZj0kZmluZCh0aGlzLl9vd25lci5fc2VsZWN0ZWRJdGVtc0ludGVybmFsW3RdLmlkKTsKaWYoZil7Zi5fc2VsZWN0ZWQ9ZmFsc2U7Cn1BcnJheS5yZW1vdmUodGhpcy5fb3duZXIuX3NlbGVjdGVkSXRlbXNJbnRlcm5hbCx0aGlzLl9vd25lci5fc2VsZWN0ZWRJdGVtc0ludGVybmFsW3RdKTsKYnJlYWs7Cn19Zm9yKHZhciB0PTA7CnQ8dGhpcy5fb3duZXIuX3NlbGVjdGVkSW5kZXhlcy5sZW5ndGg7CnQrKyl7aWYodGhpcy5fb3duZXIuX3NlbGVjdGVkSW5kZXhlc1t0XT09bCl7QXJyYXkucmVtb3ZlKHRoaXMuX293bmVyLl9zZWxlY3RlZEluZGV4ZXMsdGhpcy5fb3duZXIuX3NlbGVjdGVkSW5kZXhlc1t0XSk7CmJyZWFrOwp9fXRoaXMuX2NoZWNrQ2xpZW50U2VsZWN0Q29sdW1uKHUsZmFsc2UpOwppZih0aGlzLl9vd25lci5nZXRfZW5hYmxlQXJpYVN1cHBvcnQoKSl7dS5zZXRBdHRyaWJ1dGUoImFyaWEtc2VsZWN0ZWQiLCJmYWxzZSIpOwp9dGhpcy5fb3duZXIucmFpc2Vfcm93RGVzZWxlY3RlZChuZXcgVGVsZXJpay5XZWIuVUkuR3JpZERhdGFJdGVtRXZlbnRBcmdzKHUsZCkpOwppZih1LnBhcmVudE5vZGUhPW51bGwmJnR5cGVvZih1LnBhcmVudE5vZGUpIT0idW5kZWZpbmVkIiYmdS5wYXJlbnROb2RlLnBhcmVudE5vZGUhPW51bGwmJnR5cGVvZih1LnBhcmVudE5vZGUucGFyZW50Tm9kZSkhPSJ1bmRlZmluZWQiKXt2YXIgdz10aGlzLl9nZXRUYWJsZUhlYWRlclJvdyh1LnBhcmVudE5vZGUucGFyZW50Tm9kZSk7CmlmKHcpe3RoaXMuX2NoZWNrQ2xpZW50U2VsZWN0Q29sdW1uKHcsZmFsc2UpOwp9fX19fWlmKGEpe3RoaXMuX293bmVyLnVwZGF0ZUNsaWVudFN0YXRlKCk7Cn10aGlzLl9zZWxlY3RSb3dJbnRlcm5hbFNldEFjdGl2ZVJvdyh1LGQpOwpyZXR1cm4gdHJ1ZTsKfSxfc2VsZWN0Um93SW50ZXJuYWxTZXRBY3RpdmVSb3c6ZnVuY3Rpb24oYSxiKXtpZih0aGlzLl9vd25lci5DbGllbnRTZXR0aW5ncy5BbGxvd0tleWJvYXJkTmF2aWdhdGlvbil7aWYodGhpcy5fc2VsZWN0aW9uSW5Qcm9ncmVzcyYmdGhpcy5fb3duZXIuZ2V0X2FsbG93TXVsdGlSb3dTZWxlY3Rpb24oKSl7cmV0dXJuIHRydWU7Cn1pZih0aGlzLl9vd25lci5fYWN0aXZlUm93JiZhLmlkIT10aGlzLl9vd25lci5fYWN0aXZlUm93LmlkKXt0aGlzLl9vd25lci5fc2V0QWN0aXZlUm93KGEsYik7Cn19fSxfY2hlY2tDbGllbnRTZWxlY3RDb2x1bW46ZnVuY3Rpb24oZSxhKXt2YXIgYj1lLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJpbnB1dCIpOwpmb3IodmFyIGM9MDsKYzxiLmxlbmd0aDsKYysrKXt2YXIgZD1iW2NdOwppZihkLnR5cGUudG9Mb3dlckNhc2UoKSE9ImNoZWNrYm94Iil7Y29udGludWU7Cn1pZihkLmlkJiZkLmlkLmluZGV4T2YoIlNlbGVjdENoZWNrQm94IikhPS0xKXtkLmNoZWNrZWQ9YTsKaWYoJHRlbGVyaWsuaXNTYWZhcmkpe2Quc2FmYXJpY2hlY2tlZD1hOwp9fX19LF9nZXRUYWJsZUhlYWRlclJvdzpmdW5jdGlvbihhKXt2YXIgYz1UZWxlcmlrLldlYi5VSS5HcmlkLmdldFRhYmxlSGVhZGVyUm93KGEpOwp2YXIgYj10aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3KCkuX2hhc011bHRpSGVhZGVyczsKaWYoYyl7aWYoYiYmYy5wYXJlbnROb2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09InRoZWFkIil7cmV0dXJuIGMucGFyZW50Tm9kZTsKfXJldHVybiBjOwp9Yz0kZ2V0KFN0cmluZy5mb3JtYXQoInswfV9IZWFkZXIiLHRoaXMuZ2V0X293bmVyKCkuZ2V0X21hc3RlclRhYmxlVmlldygpLmdldF9pZCgpKSk7CmlmKGMpe2M9VGVsZXJpay5XZWIuVUkuR3JpZC5nZXRUYWJsZUhlYWRlclJvdyhjKTsKfWlmKGImJmMucGFyZW50Tm9kZS50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJ0aGVhZCIpe3JldHVybiBjLnBhcmVudE5vZGU7Cn1yZXR1cm4gYzsKfSxfZmluZENsaWVudFNlbGVjdENvbHVtbjpmdW5jdGlvbihjKXtpZighYyl7cmV0dXJuOwp9dmFyIGQ9Yy5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaW5wdXQiKTsKaWYoIWQpe3JldHVybjsKfWZvcih2YXIgYj0wOwpiPGQubGVuZ3RoOwpiKyspe3ZhciBhPWRbYl07CmlmKGEudHlwZS50b0xvd2VyQ2FzZSgpIT0iY2hlY2tib3giKXtjb250aW51ZTsKfWlmKGEuaWQmJmEuaWQuaW5kZXhPZigiU2VsZWN0Q2hlY2tCb3giKSE9LTEpe3JldHVybiBhOwp9fX19OwpUZWxlcmlrLldlYi5VSS5HcmlkU2VsZWN0aW9uLnJlZ2lzdGVyQ2xhc3MoIlRlbGVyaWsuV2ViLlVJLkdyaWRTZWxlY3Rpb24iLFN5cy5Db21wb25lbnQpOwpUeXBlLnJlZ2lzdGVyTmFtZXNwYWNlKCJUZWxlcmlrLldlYi5VSSIpOwpUZWxlcmlrLldlYi5VSS5HcmlkVGFibGVWaWV3PWZ1bmN0aW9uKGEpe1RlbGVyaWsuV2ViLlVJLkdyaWRUYWJsZVZpZXcuaW5pdGlhbGl6ZUJhc2UodGhpcyxbYV0pOwp0aGlzLl9vd25lcj17fTsKdGhpcy5fZGF0YT17fTsKdGhpcy5faGlkZGVuQ29scz17fTsKdGhpcy5fZGF0YUl0ZW1zPVtdOwp0aGlzLl9jYWNoZWRJdGVtcz1bXTsKdGhpcy5fY29sdW1uc0ludGVybmFsPVtdOwp0aGlzLl9zb3J0RXhwcmVzc2lvbnM9bmV3IFRlbGVyaWsuV2ViLlVJLkdyaWRTb3J0RXhwcmVzc2lvbnMoKTsKdGhpcy5fZmlsdGVyRXhwcmVzc2lvbnM9bmV3IFRlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJFeHByZXNzaW9ucygpOwp0aGlzLl9maXJzdERhdGFSb3c9bnVsbDsKdGhpcy5fZGF0YVNvdXJjZT1udWxsOwp0aGlzLl92aXJ0dWFsSXRlbUNvdW50PTA7CnRoaXMuX3BhZ2VCdXR0b25Db3VudD0xMDsKdGhpcy5faGFzRGV0YWlsVGFibGVzPWZhbHNlOwp0aGlzLl9oYXNNdWx0aUhlYWRlcnM9ZmFsc2U7CnRoaXMuX2hpZXJhcmNoeUxvYWRNb2RlPSJTZXJ2ZXJPbkRlbWFuZCI7CnRoaXMuX19zaG91bGRQZXJmb3JtRmlsdGVyaW5nPXRydWU7CnRoaXMuX3Nob3VsZEF1dG9Qb3N0QmFja09uRmlsdGVyPXRydWU7CnRoaXMuX3JhbmdlVmFsaWRhdGlvbkluUHJvY2Vzcz1mYWxzZTsKdGhpcy5fZ3JvdXBMZXZlbHNDb3VudD0wOwp0aGlzLl9vcmlnaW5hbEdyb3VwTGV2ZWw9bnVsbDsKdGhpcy5fcmVzaXplZENvbHVtbnNEYXRhPW5ldyBUZWxlcmlrLldlYi5VSS5HcmlkLkNsaWVudFN0YXRlRGF0YSgpOwp0aGlzLl9oaWRlZEl0ZW1zRGF0YT1uZXcgVGVsZXJpay5XZWIuVUkuR3JpZC5DbGllbnRTdGF0ZURhdGEoKTsKdGhpcy5fc2hvd2VkSXRlbXNEYXRhPW5ldyBUZWxlcmlrLldlYi5VSS5HcmlkLkNsaWVudFN0YXRlRGF0YSgpOwp0aGlzLl9yZXNpemVkSXRlbXNEYXRhPW5ldyBUZWxlcmlrLldlYi5VSS5HcmlkLkNsaWVudFN0YXRlRGF0YSgpOwp0aGlzLl9yZXNpemVkQ29udHJvbERhdGE9bmV3IFRlbGVyaWsuV2ViLlVJLkdyaWQuQ2xpZW50U3RhdGVEYXRhKCk7Cn07ClRlbGVyaWsuV2ViLlVJLkdyaWRUYWJsZVZpZXcucHJvdG90eXBlPXtpbml0aWFsaXplOmZ1bmN0aW9uKCl7VGVsZXJpay5XZWIuVUkuR3JpZFRhYmxlVmlldy5jYWxsQmFzZU1ldGhvZCh0aGlzLCJpbml0aWFsaXplIik7CmlmKHRoaXMuX2RhdGEuX3NlbGVjdGVkSXRlbVN0eWxlQ2xhc3M9PSIiJiZ0aGlzLl9kYXRhLl9zZWxlY3RlZEl0ZW1TdHlsZT09IiIpe3RoaXMuX2RhdGEuX3NlbGVjdGVkSXRlbVN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOm5hdnk7Y29sb3I6d2hpdGU7IjsKfWlmKHRoaXMuX2RhdGEuX3JlbmRlckFjdGl2ZUl0ZW1TdHlsZUNsYXNzPT0iIiYmdGhpcy5fZGF0YS5fcmVuZGVyQWN0aXZlSXRlbVN0eWxlPT0iIil7dGhpcy5fZGF0YS5fcmVuZGVyQWN0aXZlSXRlbVN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOm5hdnk7Y29sb3I6d2hpdGU7IjsKfXRoaXMuQ29sR3JvdXA9VGVsZXJpay5XZWIuVUkuR3JpZC5HZXRUYWJsZUNvbEdyb3VwKHRoaXMuZ2V0X2VsZW1lbnQoKSk7CmlmKHRoaXMuQ29sR3JvdXApe2lmKCR0ZWxlcmlrLmlzSUUmJmRvY3VtZW50LmRvY3VtZW50TW9kZSYmZG9jdW1lbnQuZG9jdW1lbnRNb2RlPD03KXtUZWxlcmlrLldlYi5VSS5HcmlkLlJlbW92ZUhpZGRlbkNvbEdyb3VwQ29scyh0aGlzLkNvbEdyb3VwKTsKfXRoaXMuQ29sR3JvdXAuQ29scz1UZWxlcmlrLldlYi5VSS5HcmlkLkdldFRhYmxlQ29sR3JvdXBDb2xzKHRoaXMuQ29sR3JvdXApOwp9aWYoJHRlbGVyaWsucXVpcmtzTW9kZSl7Zm9yKHZhciBnPTA7Cmc8dGhpcy5Db2xHcm91cC5Db2xzLmxlbmd0aDsKZysrKXtpZih0aGlzLkNvbEdyb3VwLkNvbHNbZ10uc3R5bGUuZGlzcGxheT09Im5vbmUiKXt0aGlzLkNvbEdyb3VwLkNvbHNbZ10uc3R5bGUuZGlzcGxheT0iIjsKfX19dGhpcy5QYWdlU2l6ZT10aGlzLl9kYXRhLlBhZ2VTaXplOwp0aGlzLlBhZ2VDb3VudD10aGlzLl9kYXRhLlBhZ2VDb3VudDsKdGhpcy5DdXJyZW50UGFnZUluZGV4PXRoaXMuX2RhdGEuQ3VycmVudFBhZ2VJbmRleDsKdGhpcy5fdmlydHVhbEl0ZW1Db3VudD10aGlzLl9kYXRhLlZpcnR1YWxJdGVtQ291bnQ7CnRoaXMuX3BhZ2VCdXR0b25Db3VudD10aGlzLl9kYXRhLlBhZ2VCdXR0b25Db3VudDsKdGhpcy5faGFzRGV0YWlsVGFibGVzPXRoaXMuX2RhdGEuSGFzRGV0YWlsVGFibGVzOwp0aGlzLl9oYXNNdWx0aUhlYWRlcnM9dGhpcy5fZGF0YS5IYXNNdWx0aUhlYWRlcnM7CmlmKHRoaXMuX2RhdGEuR3JvdXBMZXZlbHNDb3VudCl7dGhpcy5fZ3JvdXBMZXZlbHNDb3VudD10aGlzLl9kYXRhLkdyb3VwTGV2ZWxzQ291bnQ7Cn1pZih0aGlzLl9kYXRhLkhpZXJhcmNoeUxvYWRNb2RlKXt0aGlzLl9oaWVyYXJjaHlMb2FkTW9kZT10aGlzLl9kYXRhLkhpZXJhcmNoeUxvYWRNb2RlOwp9dmFyIGU9KHRoaXMuX293bmVyLkNsaWVudFNldHRpbmdzLlNjcm9sbGluZyYmdGhpcy5fb3duZXIuQ2xpZW50U2V0dGluZ3MuU2Nyb2xsaW5nLkFsbG93U2Nyb2xsJiZ0aGlzLl9vd25lci5DbGllbnRTZXR0aW5ncy5TY3JvbGxpbmcuVXNlU3RhdGljSGVhZGVycyk7CmlmKCh0aGlzLmdldF9lbGVtZW50KCkuaWQuaW5kZXhPZigiX0hlYWRlciIpIT0tMSYmZSl8fCghZSYmdGhpcy5nZXRfZWxlbWVudCgpLmlkLmluZGV4T2YoIl9IZWFkZXIiKT09LTEpfHwodGhpcy5nZXRfZWxlbWVudCgpLmlkLmluZGV4T2YoIl9EZXRhaWwiKSE9LTEpKXt2YXIgaD1bXTsKaWYodGhpcy5faGFzTXVsdGlIZWFkZXJzKXtoPVRlbGVyaWsuV2ViLlVJLkdyaWQuZ2V0TXVsdGlIZWFkZXJDZWxscyh0aGlzKTsKdGhpcy5NdWx0aUhlYWRlckNlbGxzPWg7Cn1lbHNle3ZhciBtPVRlbGVyaWsuV2ViLlVJLkdyaWQuZ2V0VGFibGVIZWFkZXJSb3codGhpcy5nZXRfZWxlbWVudCgpKTsKfWlmKCFtKXt2YXIgYT0kZ2V0KHRoaXMuZ2V0X2VsZW1lbnQoKS5pZCsiX0hlYWRlciIpOwppZihhKXttPVRlbGVyaWsuV2ViLlVJLkdyaWQuZ2V0VGFibGVIZWFkZXJSb3coYSk7Cn19dGhpcy5IZWFkZXJSb3c9bTsKdmFyIGM9dGhpcy5fZGF0YS5fY29sdW1uc0RhdGE7CmZvcih2YXIgaz0wOwprPGMubGVuZ3RoOwprKyspe2lmKCFtJiYoIWh8fCFoW2tdKSl7Y29udGludWU7Cn12YXIgZD1jW2tdOwp2YXIgbD10aGlzLl9oYXNNdWx0aUhlYWRlcnM/aFtrXTptLmNlbGxzW2tdOwppZighbCl7Y29udGludWU7Cn10aGlzLl9vd25lci5yYWlzZV9jb2x1bW5DcmVhdGluZyhuZXcgU3lzLkV2ZW50QXJncygpKTsKdmFyIGI9JGNyZWF0ZShUZWxlcmlrLldlYi5VSS5HcmlkQ29sdW1uLHtfb3duZXI6dGhpcyxfZGF0YTpkfSxudWxsLG51bGwsbCk7CnZhciBmPW5ldyBTeXMuRXZlbnRBcmdzKCk7CmYuZ2V0X2NvbHVtbj1mdW5jdGlvbigpe3JldHVybiBiOwp9OwpBcnJheS5hZGQodGhpcy5fY29sdW1uc0ludGVybmFsLGIpOwp0aGlzLl9vd25lci5yYWlzZV9jb2x1bW5DcmVhdGVkKGYpOwp9fWlmKCR0ZWxlcmlrLmlzSUUmJmRvY3VtZW50LmRvY3VtZW50TW9kZSYmZG9jdW1lbnQuZG9jdW1lbnRNb2RlPD03KXt0aGlzLl9zZXRIZWFkZXJGb290ZXJTcGFuKCk7Cn1pZih0aGlzLl9vd25lci5nZXRfZXZlbnRzKCkuZ2V0SGFuZGxlcigicm93Q3JlYXRpbmciKXx8dGhpcy5fb3duZXIuZ2V0X2V2ZW50cygpLmdldEhhbmRsZXIoInJvd0NyZWF0ZWQiKSl7dGhpcy5nZXRfZGF0YUl0ZW1zKCk7Cn19LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLl9vd25lci5yYWlzZV90YWJsZURlc3Ryb3lpbmcoU3lzLkV2ZW50QXJncy5FbXB0eSk7CiRjbGVhckhhbmRsZXJzKHRoaXMuZ2V0X2VsZW1lbnQoKSk7CmlmKHRoaXMuZ2V0X2VsZW1lbnQoKS50Qm9kaWVzWzBdKXskY2xlYXJIYW5kbGVycyh0aGlzLmdldF9lbGVtZW50KCkudEJvZGllc1swXSk7Cn1mb3IodmFyIGE9MDsKYTx0aGlzLl9kYXRhSXRlbXMubGVuZ3RoOwphKyspe2lmKHRoaXMuX2RhdGFJdGVtc1thXSl7dGhpcy5fZGF0YUl0ZW1zW2FdLmRpc3Bvc2UoKTsKdGhpcy5fZGF0YUl0ZW1zW2FdPW51bGw7Cn19aWYodGhpcy5fY2FjaGVkSXRlbXMpe2Zvcih2YXIgYT0wOwphPHRoaXMuX2NhY2hlZEl0ZW1zLmxlbmd0aDsKYSsrKXtpZih0aGlzLl9jYWNoZWRJdGVtc1thXSl7dGhpcy5fY2FjaGVkSXRlbXNbYV0uZGlzcG9zZSgpOwp0aGlzLl9jYWNoZWRJdGVtc1thXT1udWxsOwp9fX10aGlzLl9kYXRhSXRlbXM9W107CmlmKHRoaXMuQ29sR3JvdXAhPW51bGwmJnRoaXMuQ29sR3JvdXAuQ29scyE9bnVsbCl7dGhpcy5Db2xHcm91cC5Db2xzPW51bGw7Cn1pZih0aGlzLkNvbEdyb3VwIT1udWxsKXt0aGlzLkNvbEdyb3VwPW51bGw7Cn10aGlzLl9lbGVtZW50LmNvbnRyb2w9bnVsbDsKVGVsZXJpay5XZWIuVUkuR3JpZFRhYmxlVmlldy5jYWxsQmFzZU1ldGhvZCh0aGlzLCJkaXNwb3NlIik7Cn0sZ2V0X2NvbHVtbnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29sdW1uc0ludGVybmFsOwp9LHNob3dGaWx0ZXJJdGVtOmZ1bmN0aW9uKCl7dGhpcy5fdG9nZ2xlRmlsdGVySXRlbVZpc2liaWxpdHkodHJ1ZSk7Cn0saGlkZUZpbHRlckl0ZW06ZnVuY3Rpb24oKXt0aGlzLl90b2dnbGVGaWx0ZXJJdGVtVmlzaWJpbGl0eShmYWxzZSk7Cn0sZ2V0X2lzRmlsdGVySXRlbVZpc2libGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YS5pc0ZpbHRlckl0ZW1FeHBhbmRlZDsKfSxfdG9nZ2xlRmlsdGVySXRlbVZpc2liaWxpdHk6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fZ2V0VGFibGVGaWx0ZXJSb3coKTsKaWYoYiYmYSE9dGhpcy5fZGF0YS5pc0ZpbHRlckl0ZW1FeHBhbmRlZCl7aWYoYSl7Yi5zdHlsZS5kaXNwbGF5PSIiOwp9ZWxzZXtiLnN0eWxlLmRpc3BsYXk9Im5vbmUiOwp9dGhpcy5fZGF0YS5pc0ZpbHRlckl0ZW1FeHBhbmRlZD1hOwpBcnJheS5hZGQodGhpcy5fb3duZXIuX2V4cGFuZGVkRmlsdGVySXRlbXMsdGhpcy5fZGF0YS5VbmlxdWVJRCsiISIpOwp0aGlzLl9vd25lci51cGRhdGVDbGllbnRTdGF0ZSgpOwp9fSxnZXRfdGFibGVGaWx0ZXJSb3c6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0VGFibGVGaWx0ZXJSb3coKTsKfSxfZ2V0VGFibGVGaWx0ZXJSb3c6ZnVuY3Rpb24oKXtmaWx0ZXJSb3c9bnVsbDsKdmFyIGM9dGhpcy5nZXRfZWxlbWVudCgpOwppZihjLnRIZWFkKXtpZih0aGlzLl9oYXNNdWx0aUhlYWRlcnMpe2Zvcih2YXIgYj0wOwpiPGMudEhlYWQucm93cy5sZW5ndGg7CmIrKyl7dmFyIGE9Yy50SGVhZC5yb3dzW2JdOwppZihhLmNsYXNzTmFtZSYmYS5jbGFzc05hbWUuaW5kZXhPZigicmdGaWx0ZXJSb3ciKT4tMSl7cmV0dXJuIGE7Cn19fWlmKCF0aGlzLkhlYWRlclJvdyl7cmV0dXJuIG51bGw7Cn12YXIgZD0odGhpcy5IZWFkZXJSb3cpP3RoaXMuSGVhZGVyUm93LnJvd0luZGV4OjE7CmZvcih2YXIgYj1kOwpiPGMudEhlYWQucm93cy5sZW5ndGg7CmIrKyl7aWYoYy50SGVhZC5yb3dzW2JdIT1udWxsKXtpZihjLnRIZWFkLnJvd3NbYl0uY2VsbHNbMF0hPW51bGwpe2lmKGMudEhlYWQucm93c1tiXS5jZWxsc1swXS50YWdOYW1lIT1udWxsKXtpZihjLnRIZWFkLnJvd3NbYl0uY2VsbHNbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpIT0idGgiKXtmaWx0ZXJSb3c9Yy50SGVhZC5yb3dzW2JdOwpicmVhazsKfX19fX19ZWxzZXtpZih0aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3SGVhZGVyKCkmJnRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXdIZWFkZXIoKS5nZXRfZWxlbWVudCgpKXtjPXRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXdIZWFkZXIoKS5nZXRfZWxlbWVudCgpOwppZihjLnRIZWFkJiZ0aGlzLl9oYXNNdWx0aUhlYWRlcnMpe2Zvcih2YXIgYj0wOwpiPGMudEhlYWQucm93cy5sZW5ndGg7CmIrKyl7dmFyIGE9Yy50SGVhZC5yb3dzW2JdOwppZihhLmNsYXNzTmFtZSYmYS5jbGFzc05hbWUuaW5kZXhPZigicmdGaWx0ZXJSb3ciKT4tMSl7cmV0dXJuIGE7Cn19fWZvcih2YXIgYj0xOwpiPGMucm93cy5sZW5ndGg7CmIrKyl7aWYoYy50SGVhZC5yb3dzW2JdIT1udWxsKXtpZihjLnRIZWFkLnJvd3NbYl0uY2VsbHNbMF0hPW51bGwpe2lmKGMudEhlYWQucm93c1tiXS5jZWxsc1swXS50YWdOYW1lIT1udWxsKXtmaWx0ZXJSb3c9Yy50SGVhZC5yb3dzW2JdOwpicmVhazsKfX19fX19cmV0dXJuIGZpbHRlclJvdzsKfSxfaGFuZGxlQXV0b1Bvc3RCYWNrT25GaWx0ZXJXaXRob3V0RGVsYXk6ZnVuY3Rpb24oZSxiLGcpe3ZhciBkPSRmaW5kKGUpOwp2YXIgYT1kLmdldF90ZXh0Qm94VmFsdWUoKTsKaWYodGhpcy5fY3VycmVudEZpbHRlclRpbWVvdXRJRCl7Y2xlYXJUaW1lb3V0KHRoaXMuX2N1cnJlbnRGaWx0ZXJUaW1lb3V0SUQpOwp9dHJ5e3ZhciBjPXRoaXMuZ2V0X2lkKCk7CnRoaXMuX2N1cnJlbnRGaWx0ZXJUaW1lb3V0SUQ9c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBqPSRmaW5kKGMpOwp2YXIgaD1kLmdldF90ZXh0Qm94VmFsdWUoKTsKdmFyIGk9ZC5wYXJzZURhdGUoaCk7CmlmKCFqLl9zaG91bGRBdXRvUG9zdEJhY2tPbkZpbHRlcil7cmV0dXJuOwp9aWYoaSE9bnVsbCl7ZC5zZXRfc2VsZWN0ZWREYXRlKGkpOwppZihkLmdldF9zZWxlY3RlZERhdGUoKSl7ai5maWx0ZXIoYixqLl9nZXRGaWx0ZXJDb250cm9sVmFsdWUoYikpOwp9fWVsc2V7aWYoaD09IiIpe2lmKGouX19zaG91bGRQZXJmb3JtRmlsdGVyaW5nKXtqLmZpbHRlcihiLCIiKTsKfWVsc2V7dGhpcy5fX3Nob3VsZFBlcmZvcm1GaWx0ZXJpbmc9dHJ1ZTsKfX19fSxnKTsKfWNhdGNoKGYpe319LF9oYW5kbGVBdXRvUG9zdEJhY2tPbkZpbHRlcldpdGhEZWxheTpmdW5jdGlvbihmLGUsYixoKXt2YXIgYz0kZmluZChlKTsKdmFyIGQ9Zj9mOndpbmRvdy5ldmVudDsKaWYodGhpcy5fY3VycmVudEZpbHRlclRpbWVvdXRJRCl7Y2xlYXJUaW1lb3V0KHRoaXMuX2N1cnJlbnRGaWx0ZXJUaW1lb3V0SUQpOwp9dHJ5e3ZhciBhPXRoaXMuZ2V0X2lkKCk7CmlmKGQua2V5Q29kZT09MTN8fGQua2V5Q29kZT09MjApe2QuY2FuY2VsQnViYmxlPXRydWU7CmQucmV0dXJuVmFsdWU9ZmFsc2U7CmlmKGQuc3RvcFByb3BhZ2F0aW9uKXtkLnN0b3BQcm9wYWdhdGlvbigpOwpkLnByZXZlbnREZWZhdWx0KCk7Cn10aGlzLl9jdXJyZW50RmlsdGVyVGltZW91dElEPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgaz0kZmluZChhKTsKdmFyIGk9Yy5nZXRfdGV4dEJveFZhbHVlKCk7CnZhciBqPWMucGFyc2VEYXRlKGkpOwppZihqIT1udWxsKXtjLnNldF9zZWxlY3RlZERhdGUoaik7Cn1lbHNle2lmKGk9PSIiKXtjLnNldF9zZWxlY3RlZERhdGUoaSk7Cn19fSwwKTsKfWVsc2V7dGhpcy5fY3VycmVudEZpbHRlclRpbWVvdXRJRD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIGs9JGZpbmQoYSk7CnZhciBpPWMuZ2V0X3RleHRCb3hWYWx1ZSgpOwp2YXIgaj1jLnBhcnNlRGF0ZShpKTsKaWYoaiE9bnVsbCl7Yy5zZXRfc2VsZWN0ZWREYXRlKGopOwp9ZWxzZXtpZihpPT0iIil7Yy5zZXRfc2VsZWN0ZWREYXRlKGkpOwp9fX0saCk7Cn19Y2F0Y2goZyl7fX0sX2ZpbHRlck9uS2V5RG93bldpdGhEZWxheTpmdW5jdGlvbihmLGEsYyxiLGcpe3ZhciBlPWY/Zjp3aW5kb3cuZXZlbnQ7CmlmKGUua2V5Q29kZT09OHx8ZS5rZXlDb2RlPT00Nil7aWYodGhpcy5fY3VycmVudEZpbHRlclRpbWVvdXRJRCl7Y2xlYXJUaW1lb3V0KHRoaXMuX2N1cnJlbnRGaWx0ZXJUaW1lb3V0SUQpOwp9dmFyIGQ9dGhpcy5nZXRfaWQoKTsKaWYoISR0ZWxlcmlrLmlzT3BlcmF8fGcpe3RoaXMuX2N1cnJlbnRGaWx0ZXJUaW1lb3V0SUQ9c2V0VGltZW91dChmdW5jdGlvbigpeyRmaW5kKGQpLmZpbHRlcihjLCRnZXQoYSkudmFsdWUpOwp9LGIpOwp9ZWxzZXt0aGlzLl9jdXJyZW50RmlsdGVyVGltZW91dElEPXNldFRpbWVvdXQoZnVuY3Rpb24oKXskZ2V0KGEpLmJsdXIoKTsKfSxiKTsKfX19LF9maWx0ZXJPbktleVByZXNzV2l0aERlbGF5OmZ1bmN0aW9uKGYsYSxjLGIsZyl7dmFyIGU9Zj9mOndpbmRvdy5ldmVudDsKdmFyIGQ9dGhpcy5nZXRfaWQoKTsKaWYoJHRlbGVyaWsuaXNGaXJlZm94JiYoKGUua2V5Q29kZT49MzMmJmUua2V5Q29kZTw9NDApfHwoZS5rZXlDb2RlPj0xMTImJmUua2V5Q29kZTw9MTIzKXx8KGUua2V5Q29kZT49MTYmJmUua2V5Q29kZTw9MjApfHwoZS5rZXlDb2RlPj0xNDQmJmUua2V5Q29kZTw9MTQ1KXx8KGUua2V5Q29kZT49OTImJmUua2V5Q29kZTw9OTMpKSl7cmV0dXJuOwp9aWYodGhpcy5fY3VycmVudEZpbHRlclRpbWVvdXRJRCl7Y2xlYXJUaW1lb3V0KHRoaXMuX2N1cnJlbnRGaWx0ZXJUaW1lb3V0SUQpOwp9aWYoZS5rZXlDb2RlPT0xMyl7ZS5jYW5jZWxCdWJibGU9dHJ1ZTsKZS5yZXR1cm5WYWx1ZT1mYWxzZTsKaWYoKGUucHJldmVudERlZmF1bHQpKXtlLnByZXZlbnREZWZhdWx0KCk7CmUuc3RvcFByb3BhZ2F0aW9uKCk7Cn1pZighJHRlbGVyaWsuaXNPcGVyYXx8Zyl7dGhpcy5fY3VycmVudEZpbHRlclRpbWVvdXRJRD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7JGZpbmQoZCkuZmlsdGVyKGMsJGdldChhKS52YWx1ZSk7Cn0sMCk7Cn1lbHNle3RoaXMuX2N1cnJlbnRGaWx0ZXJUaW1lb3V0SUQ9c2V0VGltZW91dChmdW5jdGlvbigpeyRnZXQoYSkuYmx1cigpOwp9LDApOwp9cmV0dXJuIGZhbHNlOwp9ZWxzZXtpZighJHRlbGVyaWsuaXNPcGVyYXx8Zyl7dGhpcy5fY3VycmVudEZpbHRlclRpbWVvdXRJRD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7JGZpbmQoZCkuZmlsdGVyKGMsJGdldChhKS52YWx1ZSk7Cn0sYik7Cn1lbHNle3RoaXMuX2N1cnJlbnRGaWx0ZXJUaW1lb3V0SUQ9c2V0VGltZW91dChmdW5jdGlvbigpeyRnZXQoYSkuYmx1cigpOwp9LGIpOwp9fX0sX2ZpbHRlck5vRGVsYXk6ZnVuY3Rpb24oYSxjKXt2YXIgYj10aGlzLmdldF9pZCgpOwppZih0aGlzLl9jdXJyZW50RmlsdGVyVGltZW91dElEKXtjbGVhclRpbWVvdXQodGhpcy5fY3VycmVudEZpbHRlclRpbWVvdXRJRCk7Cn10aGlzLl9jdXJyZW50RmlsdGVyVGltZW91dElEPXNldFRpbWVvdXQoZnVuY3Rpb24oKXskZmluZChiKS5maWx0ZXIoYywkZ2V0KGEpLnZhbHVlKTsKfSwwKTsKfSxnZXRfY2xpZW50RGF0YUtleU5hbWVzOmZ1bmN0aW9uKCl7dmFyIGE9W107CmlmKHRoaXMuX2RhdGEuY2xpZW50RGF0YUtleU5hbWVzKXthPXRoaXMuX2RhdGEuY2xpZW50RGF0YUtleU5hbWVzOwp9cmV0dXJuIGE7Cn0sZ2V0X2RhdGFJdGVtczpmdW5jdGlvbigpe2lmKHRoaXMuX2RhdGFJdGVtcy5sZW5ndGg+MHx8KHRoaXMuX2NhY2hlZEl0ZW1zJiZ0aGlzLl9jYWNoZWRJdGVtcy5sZW5ndGg+MCkpe3JldHVybiB0aGlzLl9kYXRhSXRlbXM7Cn12YXIgYj0oJHRlbGVyaWsuaXNPcGVyYSk/dGhpcy5nZXRfZWxlbWVudCgpOnRoaXMuZ2V0X2VsZW1lbnQoKS50Qm9kaWVzWzBdOwp2YXIgZD1iLnJvd3M7CmZvcih2YXIgbj0wLHA9ZC5sZW5ndGg7Cm48cDsKbisrKXt2YXIgZj1kW25dOwppZighZi5pZCl7Y29udGludWU7Cn12YXIgbT0kZmluZChmLmlkKTsKdmFyIGU9e307CnZhciBjPXRoaXMuX293bmVyOwp0aGlzLl9vd25lci5yYWlzZV9yb3dDcmVhdGluZyhuZXcgU3lzLkV2ZW50QXJncygpKTsKdmFyIG89dHJ1ZTsKdmFyIGE9Yy5fdW5zZWxlY3RhYmxlSXRlbXNJbnRlcm5hbDsKZm9yKHZhciBrPTA7Cmxlbj1hLmxlbmd0aCxrPGxlbjsKaysrKXtpZihhW2tdLmlkPT1mLmlkKXtvPWZhbHNlOwpicmVhazsKfX12YXIgZz1mYWxzZTsKZm9yKHZhciBrPTA7Cms8dGhpcy5fb3duZXIuX3NlbGVjdGVkSXRlbXNJbnRlcm5hbC5sZW5ndGg7CmsrKyl7aWYodGhpcy5fb3duZXIuX3NlbGVjdGVkSXRlbXNJbnRlcm5hbFtrXS5pZD09Zi5pZCl7Zz10cnVlOwpicmVhazsKfX12YXIgaD1mYWxzZTsKaWYodGhpcy5fb3duZXIuX2V4cGFuZEl0ZW1zW2YuaWQuc3BsaXQoIl9fIilbMV1dKXtoPXRydWU7Cn1mb3IodmFyIGs9MDsKazx0aGlzLl9vd25lci5fZXhwYW5kZWRJdGVtcy5sZW5ndGg7CmsrKyl7aWYodGhpcy5fb3duZXIuX2V4cGFuZGVkSXRlbXNba109PWYuaWQuc3BsaXQoIl9fIilbMV0pe2g9IWg7CmJyZWFrOwp9fWlmKCFtKXttPSRjcmVhdGUoVGVsZXJpay5XZWIuVUkuR3JpZERhdGFJdGVtLHtfb3duZXI6dGhpcyxfZGF0YTplfSxudWxsLG51bGwsZik7Cn1tLl9zZWxlY3RhYmxlPW87Cm0uX3NlbGVjdGVkPWc7Cm0uX2V4cGFuZGVkPWg7Cm0uX2l0ZW1JbmRleEhpZXJhcmNoaWNhbD1mLmlkLnNwbGl0KCJfXyIpWzFdOwp0aGlzLl9kYXRhSXRlbXNbdGhpcy5fZGF0YUl0ZW1zLmxlbmd0aF09bTsKdGhpcy5fb3duZXIucmFpc2Vfcm93Q3JlYXRlZChuZXcgVGVsZXJpay5XZWIuVUkuR3JpZERhdGFJdGVtRXZlbnRBcmdzKGYsbnVsbCkpOwp9cmV0dXJuIHRoaXMuX2RhdGFJdGVtczsKfSxnZXRfb3duZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3duZXI7Cn0sZ2V0X25hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YS5OYW1lOwp9LGdldF9pc0l0ZW1JbnNlcnRlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kYXRhLklzSXRlbUluc2VydGVkOwp9LGdldF9pbnNlcnRJdGVtOmZ1bmN0aW9uKCl7dmFyIGE9JGZpbmQodGhpcy5nZXRfb3duZXIoKS5nZXRfaWQoKSk7CnZhciBiPW51bGw7CmZ1bmN0aW9uIGMoZyl7Zm9yKHZhciBoPTA7Cmg8Zy5sZW5ndGg7CmgrKyl7dmFyIGY9Z1toXTsKaWYoZi5jbGFzc05hbWUuaW5kZXhPZigicmdFZGl0Um93Iik+LTEpe3JldHVybiBmOwp9ZWxzZXt2YXIgaj1mLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJkaXYiKVswXTsKaWYoaiYmai5jbGFzc05hbWUuaW5kZXhPZigicmdFZGl0Rm9ybSIpPi0xKXtyZXR1cm4gZjsKfX19cmV0dXJuIG51bGw7Cn1pZih0aGlzPT09YS5nZXRfbWFzdGVyVGFibGVWaWV3KCkmJmEuQ2xpZW50U2V0dGluZ3MuU2Nyb2xsaW5nLkFsbG93U2Nyb2xsJiZhLkNsaWVudFNldHRpbmdzLlNjcm9sbGluZy5Vc2VTdGF0aWNIZWFkZXJzKXtpZihhLkdyaWRIZWFkZXJEaXYpe3ZhciBkPWEuR3JpZEhlYWRlckRpdi5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGhlYWQiKVswXTsKaWYoZCl7Yj1jKGQucm93cyk7Cn1pZighYiYmYS5QYWdlckNvbnRyb2wpe2I9YyhhLlBhZ2VyQ29udHJvbC5yb3dzKTsKfX19ZWxzZXt2YXIgZT10aGlzLmdldF9lbGVtZW50KCk7CmlmKGUudEhlYWQpe2I9YyhlLnRIZWFkLnJvd3MpOwp9aWYoIWImJmUudEZvb3Qpe2I9YyhlLnRGb290LnJvd3MpOwp9fXJldHVybiBiOwp9LGdldF9lZGl0SXRlbXM6ZnVuY3Rpb24oKXt2YXIgYz1bXTsKdmFyIGE9dGhpcy5nZXRfZGF0YUl0ZW1zKCk7CmZvcih2YXIgYj0wOwpiPGEubGVuZ3RoOwpiKyspe2lmKGFbYl0uZ2V0X2lzSW5FZGl0TW9kZSgpKXtjW2MubGVuZ3RoXT1hW2JdOwp9fXJldHVybiBjOwp9LF9oYW5kbGVyS2V5RG93bkluSW5zZXJJdGVtOmZ1bmN0aW9uKGEpe3ZhciBjPWEua2V5Q29kZXx8YS5jaGFyQ29kZTsKdmFyIGQ9KGM9PXRoaXMuX293bmVyLkNsaWVudFNldHRpbmdzLktleWJvYXJkTmF2aWdhdGlvblNldHRpbmdzLkV4aXRFZGl0SW5zZXJ0TW9kZUtleSk7CnZhciBiPShjPT10aGlzLl9vd25lci5DbGllbnRTZXR0aW5ncy5LZXlib2FyZE5hdmlnYXRpb25TZXR0aW5ncy5VcGRhdGVJbnNlcnRJdGVtS2V5KTsKaWYoIXRoaXMuZ2V0X293bmVyKCkuX2NhbkhhbmRsZUtleWJvYXJkQWN0aW9uKGEpKXtyZXR1cm47Cn1pZihkKXt0aGlzLmNhbmNlbEluc2VydCgpOwphLmNhbmNlbEJ1YmJsZT10cnVlOwphLnJldHVyblZhbHVlPWZhbHNlOwppZihhLnN0b3BQcm9wYWdhdGlvbil7YS5wcmV2ZW50RGVmYXVsdCgpOwphLnN0b3BQcm9wYWdhdGlvbigpOwp9fWVsc2V7aWYoYil7dGhpcy5pbnNlcnRJdGVtKCk7CmEuY2FuY2VsQnViYmxlPXRydWU7CmEucmV0dXJuVmFsdWU9ZmFsc2U7CmlmKGEuc3RvcFByb3BhZ2F0aW9uKXthLnByZXZlbnREZWZhdWx0KCk7CmEuc3RvcFByb3BhZ2F0aW9uKCk7Cn19fXJldHVybiBmYWxzZTsKfSxfc2hvd05vdEZyb3plbkNvbHVtbjpmdW5jdGlvbihhKXt0aGlzLl9oaWRlU2hvd05vdEZyb3plbkNvbHVtbihhLHRydWUpOwp9LF9oaWRlTm90RnJvemVuQ29sdW1uOmZ1bmN0aW9uKGEpe3RoaXMuX2hpZGVTaG93Tm90RnJvemVuQ29sdW1uKGEsZmFsc2UpOwp9LHNob3dDb2x1bW46ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IFRlbGVyaWsuV2ViLlVJLkdyaWRDb2x1bW5DYW5jZWxFdmVudEFyZ3ModGhpcy5nZXRfY29sdW1ucygpW2FdLG51bGwpOwp0aGlzLl9vd25lci5yYWlzZV9jb2x1bW5TaG93aW5nKGIpOwppZihiLmdldF9jYW5jZWwoKSl7cmV0dXJuIGZhbHNlOwp9dGhpcy5faGlkZVNob3dDb2x1bW4oYSx0cnVlKTsKdmFyIGM9dGhpcy5fZGF0YS5VbmlxdWVJRCsiLCIrdGhpcy5nZXRfY29sdW1ucygpW2FdLmdldF91bmlxdWVOYW1lKCk7CmlmKCFBcnJheS5jb250YWlucyh0aGlzLl9vd25lci5fc2hvd2VkQ29sdW1ucyxjKSl7QXJyYXkuYWRkKHRoaXMuX293bmVyLl9zaG93ZWRDb2x1bW5zLGMpOwp9aWYoQXJyYXkuY29udGFpbnModGhpcy5fb3duZXIuX2hpZGVkQ29sdW1ucyxjKSl7QXJyYXkucmVtb3ZlKHRoaXMuX293bmVyLl9oaWRlZENvbHVtbnMsYyk7Cn10aGlzLl9vd25lci51cGRhdGVDbGllbnRTdGF0ZSgpOwokZmluZCh0aGlzLl9vd25lci5nZXRfaWQoKSkucmVwYWludCgpOwp2YXIgYj1uZXcgVGVsZXJpay5XZWIuVUkuR3JpZENvbHVtbkV2ZW50QXJncyh0aGlzLmdldF9jb2x1bW5zKClbYV0sbnVsbCk7CnRoaXMuX293bmVyLnJhaXNlX2NvbHVtblNob3duKGIpOwp9LGhpZGVDb2x1bW46ZnVuY3Rpb24oYSl7aWYodGhpcy5fZ2V0VmlzaWJsZUNvbHVtbnNDb3VudCgpPT0xKXt2YXIgYj10aGlzLmdldF9jb2x1bW5zKClbYV0uX2RhdGEuQ29sdW1uVHlwZTsKaWYoIXRoaXMuX2lzSGVscGVyQ29sdW1uVHlwZShiKSl7cmV0dXJuOwp9fXZhciBjPW5ldyBUZWxlcmlrLldlYi5VSS5HcmlkQ29sdW1uQ2FuY2VsRXZlbnRBcmdzKHRoaXMuZ2V0X2NvbHVtbnMoKVthXSxudWxsKTsKdGhpcy5fb3duZXIucmFpc2VfY29sdW1uSGlkaW5nKGMpOwppZihjLmdldF9jYW5jZWwoKSl7cmV0dXJuIGZhbHNlOwp9dGhpcy5faGlkZVNob3dDb2x1bW4oYSxmYWxzZSk7CnZhciBkPXRoaXMuX2RhdGEuVW5pcXVlSUQrIiwiK3RoaXMuZ2V0X2NvbHVtbnMoKVthXS5nZXRfdW5pcXVlTmFtZSgpOwppZighQXJyYXkuY29udGFpbnModGhpcy5fb3duZXIuX2hpZGVkQ29sdW1ucyxkKSl7QXJyYXkuYWRkKHRoaXMuX293bmVyLl9oaWRlZENvbHVtbnMsZCk7Cn1pZihBcnJheS5jb250YWlucyh0aGlzLl9vd25lci5fc2hvd2VkQ29sdW1ucyxkKSl7QXJyYXkucmVtb3ZlKHRoaXMuX293bmVyLl9zaG93ZWRDb2x1bW5zLGQpOwp9dGhpcy5fb3duZXIudXBkYXRlQ2xpZW50U3RhdGUoKTsKdmFyIGM9bmV3IFRlbGVyaWsuV2ViLlVJLkdyaWRDb2x1bW5FdmVudEFyZ3ModGhpcy5nZXRfY29sdW1ucygpW2FdLG51bGwpOwp0aGlzLl9vd25lci5yYWlzZV9jb2x1bW5IaWRkZW4oYyk7Cn0sX2dldFZpc2libGVDb2x1bW5zQ291bnQ6ZnVuY3Rpb24oKXt2YXIgZT0wOwp2YXIgYT10aGlzLmdldF9jb2x1bW5zKCk7CnZhciBiPW51bGw7CnZhciBkPW51bGw7CmZvcih2YXIgYz0wOwpsZW49YS5sZW5ndGgsYzxsZW47CmMrKyl7Yj1hW2NdOwpkPWIuX2RhdGEuQ29sdW1uVHlwZTsKaWYodGhpcy5faXNIZWxwZXJDb2x1bW5UeXBlKGQpfHxiLmdldF9lbGVtZW50KCkuc3R5bGUuZGlzcGxheT09Im5vbmUiKXtjb250aW51ZTsKfWUrKzsKfXJldHVybiBlOwp9LF9pc0hlbHBlckNvbHVtblR5cGU6ZnVuY3Rpb24oYSl7aWYoYT09IkdyaWRFeHBhbmRDb2x1bW4ifHxhPT0iR3JpZEdyb3VwU3BsaXR0ZXJDb2x1bW4ifHxhPT0iR3JpZFJvd0luZGljYXRvckNvbHVtbiJ8fGE9PSJHcmlkRHJhZ0Ryb3BDb2x1bW4iKXtyZXR1cm4gdHJ1ZTsKfXJldHVybiBmYWxzZTsKfSxfaGlkZVNob3dDb2x1bW46ZnVuY3Rpb24oYSxjKXt2YXIgYz10aGlzLmdldF9jb2x1bW5zKClbYV0uRGlzcGxheT1jOwppZih0aGlzLmdldF9jb2x1bW5zKClbYV0uX2RhdGEpe3RoaXMuZ2V0X2NvbHVtbnMoKVthXS5fZGF0YS5EaXNwbGF5PWM7Cn12YXIgYj1mYWxzZTsKaWYodGhpcy5nZXRfb3duZXIoKS5DbGllbnRTZXR0aW5ncy5SZXNpemluZyYmdGhpcy5nZXRfb3duZXIoKS5DbGllbnRTZXR0aW5ncy5SZXNpemluZy5FbmFibGVSZWFsVGltZVJlc2l6ZSl7Yj10aGlzLmdldF9vd25lcigpLkNsaWVudFNldHRpbmdzLlJlc2l6aW5nLkVuYWJsZVJlYWxUaW1lUmVzaXplOwp9aWYodGhpcyE9dGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0hlYWRlcigpJiZ0aGlzIT10aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3Rm9vdGVyKCkmJnRoaXMhPXRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXcoKSl7aWYoISR0ZWxlcmlrLmlzSUV8fFN5cy5Ccm93c2VyLnZlcnNpb24+PTgpe3RoaXMuX2hpZGVTaG93Q29sKHRoaXMsYSxjKTsKfWVsc2V7aWYoJHRlbGVyaWsuaXNJRTcpe3RoaXMuX3JlbW92ZVJlc3RvcmVDb2wodGhpcyxhLGMpOwp9fVRlbGVyaWsuV2ViLlVJLkdyaWQuaGlkZVNob3dDZWxscyh0aGlzLmdldF9lbGVtZW50KCksYSxjLHRoaXMuQ29sR3JvdXAuQ29scyk7CnRoaXMuX3NldEhlYWRlckZvb3RlclNwYW4oKTsKcmV0dXJuOwp9aWYodGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0hlYWRlcigpKXtpZighJHRlbGVyaWsuaXNJRXx8U3lzLkJyb3dzZXIudmVyc2lvbj49OCl7dGhpcy5faGlkZVNob3dDb2wodGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0hlYWRlcigpLGEsYyk7Cn1UZWxlcmlrLldlYi5VSS5HcmlkLmhpZGVTaG93Q2VsbHModGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0hlYWRlcigpLmdldF9lbGVtZW50KCksYSxjLHRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXcoKS5Db2xHcm91cC5Db2xzKTsKfWlmKHRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXcoKSl7aWYoISR0ZWxlcmlrLmlzSUV8fFN5cy5Ccm93c2VyLnZlcnNpb24+PTgpe3RoaXMuX2hpZGVTaG93Q29sKHRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXcoKSxhLGMpOwp9ZWxzZXtpZigkdGVsZXJpay5pc0lFNyl7dGhpcy5fcmVtb3ZlUmVzdG9yZUNvbCh0aGlzLGEsYyk7Cn19VGVsZXJpay5XZWIuVUkuR3JpZC5oaWRlU2hvd0NlbGxzKHRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXcoKS5nZXRfZWxlbWVudCgpLGEsYyx0aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3KCkuQ29sR3JvdXAuQ29scyk7Cn1pZih0aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3Rm9vdGVyKCkpe2lmKCEkdGVsZXJpay5pc0lFfHxTeXMuQnJvd3Nlci52ZXJzaW9uPj04KXt0aGlzLl9oaWRlU2hvd0NvbCh0aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3Rm9vdGVyKCksYSxjKTsKfVRlbGVyaWsuV2ViLlVJLkdyaWQuaGlkZVNob3dDZWxscyh0aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3Rm9vdGVyKCkuZ2V0X2VsZW1lbnQoKSxhLGMsdGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0Zvb3RlcigpLkNvbEdyb3VwLkNvbHMpOwp9dGhpcy5fc2V0SGVhZGVyRm9vdGVyU3BhbigpOwp9LF9yZW1vdmVSZXN0b3JlQ29sOmZ1bmN0aW9uKHEsaCxvKXt2YXIgaj1xLmdldF9jb2x1bW5zKCk7CnZhciBkPXEuZ2V0X2NvbHVtbnMoKVtoXTsKdmFyIGc9ZC5nZXRfdW5pcXVlTmFtZSgpOwp2YXIgZj1xLmdldF9lbGVtZW50KCk7CnZhciBwPSIiOwp2YXIgYz1mLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJjb2xncm91cCIpWzBdOwp2YXIgYj1jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJjb2wiKTsKaWYocSYmcS5Db2xHcm91cCYmcS5Db2xHcm91cC5Db2xzJiZxLkNvbEdyb3VwLkNvbHNbaF0pe2lmKCFvKXtpZih0aGlzLl9oaWRkZW5Db2xzW2ddJiZ0aGlzLl9oaWRkZW5Db2xzW2ddLmNvbHVtbkluZGV4PT1oJiZ0aGlzLl9oaWRkZW5Db2xzW2ddLnBvc2l0aW9uPT1oKXtyZXR1cm47Cn10aGlzLl9oaWRkZW5Db2xzW2ddPXtjb2x1bW5JbmRleDpoLHBvc2l0aW9uOmh9Owpmb3IodmFyIGw9MDsKbDxqLmxlbmd0aDsKbCsrKXt2YXIgbj1qW2xdLmdldF91bmlxdWVOYW1lKCk7CnZhciBlPXRoaXMuX2hpZGRlbkNvbHNbaltsXS5nZXRfdW5pcXVlTmFtZSgpXTsKaWYoZSE9dW5kZWZpbmVkKXtpZihlLmNvbHVtbkluZGV4PHRoaXMuX2hpZGRlbkNvbHNbZ10uY29sdW1uSW5kZXgpe3RoaXMuX2hpZGRlbkNvbHNbZ10ucG9zaXRpb24tLTsKfWVsc2V7aWYoZS5jb2x1bW5JbmRleD50aGlzLl9oaWRkZW5Db2xzW2ddLmNvbHVtbkluZGV4KXtlLnBvc2l0aW9uLS07Cn19fX1mb3IodmFyIG09MDsKbTxiLmxlbmd0aDsKbSsrKXtpZihtPT10aGlzLl9oaWRkZW5Db2xzW2ddLnBvc2l0aW9uKXt0aGlzLl9oaWRkZW5Db2xzW2ddLmNvbD1iW3RoaXMuX2hpZGRlbkNvbHNbZ10ucG9zaXRpb25dOwpjLnJlbW92ZUNoaWxkKGJbdGhpcy5faGlkZGVuQ29sc1tnXS5wb3NpdGlvbl0pOwpicmVhazsKfX19ZWxzZXtpZighdGhpcy5faGlkZGVuQ29sc1tnXSl7cmV0dXJuOwp9dmFyIGE9dGhpcy5faGlkZGVuQ29sc1tnXS5wb3NpdGlvbjsKZm9yKHZhciBsPTA7Cmw8ai5sZW5ndGg7CmwrKyl7dmFyIG49altsXS5nZXRfdW5pcXVlTmFtZSgpOwp2YXIgZT10aGlzLl9oaWRkZW5Db2xzW2pbbF0uZ2V0X3VuaXF1ZU5hbWUoKV07CmlmKGUhPXVuZGVmaW5lZCl7aWYoZS5jb2x1bW5JbmRleD50aGlzLl9oaWRkZW5Db2xzW2ddLmNvbHVtbkluZGV4KXtlLnBvc2l0aW9uKys7Cn19fWlmKGE+PWIubGVuZ3RoKXtjLmFwcGVuZENoaWxkKHRoaXMuX2hpZGRlbkNvbHNbZ10uY29sKTsKfWVsc2V7Yy5pbnNlcnRCZWZvcmUodGhpcy5faGlkZGVuQ29sc1tnXS5jb2wsYlt0aGlzLl9oaWRkZW5Db2xzW2ddLnBvc2l0aW9uXSk7Cn19fX0sX3NldEhlYWRlckZvb3RlclNwYW46ZnVuY3Rpb24oKXt2YXIgYj1mdW5jdGlvbihtKXtpZighbSl7cmV0dXJuIDA7Cn12YXIgbD0wOwpmb3IodmFyIGk9MCxrPW0ubGVuZ3RoOwppPGs7CmkrKyl7bCs9bVtpXS5jb2xTcGFuOwp9cmV0dXJuIGw7Cn07CnZhciBhPXRoaXMuZ2V0X2VsZW1lbnQoKS50Rm9vdDsKdmFyIGY9dGhpcy5nZXRfZWxlbWVudCgpLnRIZWFkOwp2YXIgZD1NYXRoLm1heCh0aGlzLl9nZXRWaXNpYmxlQ29sdW1ucygpLmxlbmd0aCwxKTsKaWYoYSYmYS5yb3dzKXtmb3IodmFyIGg9MCxlPWEucm93cy5sZW5ndGg7Cmg8ZTsKaCsrKXtpZihhLnJvd3NbaF0uY2VsbHMmJmEucm93c1toXS5jZWxsc1swXSl7dmFyIGM9YihhLnJvd3NbaF0uY2VsbHMpOwppZihkPmMpe2Eucm93c1toXS5jZWxsc1swXS5jb2xTcGFuPWQ7Cn19fX1pZihmJiZmLnJvd3Mpe2Zvcih2YXIgaD0wLGU9Zi5yb3dzLmxlbmd0aDsKaDxlOwpoKyspe2lmKGYucm93c1toXSYmKGYucm93c1toXT09dGhpcy5nZXRfZWxlbWVudCgpLkhlYWRlclJvd3x8KGYucm93c1toXS5jZWxscy5sZW5ndGg+MCYmZi5yb3dzW2hdLmNlbGxzWzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09InRoIikpKXt2YXIgZz0odGhpcy5nZXRfZWxlbWVudCgpLnRCb2RpZXMmJnRoaXMuZ2V0X2VsZW1lbnQoKS50Qm9kaWVzWzBdKT90aGlzLmdldF9lbGVtZW50KCkudEJvZGllc1swXTpudWxsOwppZihnJiZnLnJvd3MmJmcuc3R5bGUuZGlzcGxheT09Im5vbmUiJiZnLnJvd3NbMF0uY2VsbHMubGVuZ3RoPT0xJiZnLnJvd3NbMF0uY2VsbHNbMF0uY29sU3Bhbil7Zy5yb3dzWzBdLmNlbGxzWzBdLmNvbFNwYW49ZDsKfWJyZWFrOwp9aWYoZi5yb3dzW2hdJiZmLnJvd3NbaF0uY2VsbHMmJmYucm93c1toXS5jZWxscy5sZW5ndGg+MCYmZi5yb3dzW2hdLmNlbGxzWzBdKXt2YXIgYz1iKGYucm93c1toXS5jZWxscyk7CmlmKGQ+Yyl7Zi5yb3dzW2hdLmNlbGxzWzBdLmNvbFNwYW49ZDsKfX19fX0sX2dldFZpc2libGVDb2x1bW5zOmZ1bmN0aW9uKCl7dmFyIGM9W107CmlmKHRoaXMuZ2V0X2NvbHVtbnMoKSl7dmFyIGE9dGhpcy5nZXRfY29sdW1ucygpOwpmb3IodmFyIGQ9MCxiPWEubGVuZ3RoOwpkPGI7CmQrKyl7dmFyIGU9YVtkXTsKaWYoZS5nZXRfZWxlbWVudCgpLnN0eWxlLnZpc2liaWxpdHkhPSJoaWRkZW4iJiZlLmdldF9lbGVtZW50KCkuc3R5bGUuZGlzcGxheSE9Im5vbmUiJiYoZS5EaXNwbGF5PT1udWxsfHxlLkRpc3BsYXkpKXtBcnJheS5hZGQoYyxlKTsKfX19cmV0dXJuIGM7Cn0sX2hpZGVTaG93Q29sOmZ1bmN0aW9uKGMsYSxkKXtpZihjJiZjLkNvbEdyb3VwJiZjLkNvbEdyb3VwLkNvbHMmJmMuQ29sR3JvdXAuQ29sc1thXSl7dmFyIGI9KGMuQ29sR3JvdXAuQ29sc1thXS5zdHlsZS5kaXNwbGF5PT0iIik/dHJ1ZTpmYWxzZTsKaWYoYiE9ZCl7Yy5Db2xHcm91cC5Db2xzW2FdLnN0eWxlLmRpc3BsYXk9KGQpPyIiOiJub25lIjsKfX19LF9oaWRlU2hvd05vdEZyb3plbkNvbHVtbjpmdW5jdGlvbihhLGUpe3ZhciBiPTEwOwppZigkdGVsZXJpay5pc09wZXJhKXtiPW5hdmlnYXRvci51c2VyQWdlbnQuc3Vic3RyaW5nKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiVmVyc2lvbi8iKSsiVmVyc2lvbiIubGVuZ3RoKzEpKjE7Cn1pZih0aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3SGVhZGVyKCkpe3RoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXdIZWFkZXIoKS5nZXRfY29sdW1ucygpW2FdLkZyb3plbkRpc3BsYXk9ZTsKaWYoIXdpbmRvdy5uZXRzY2FwZSYmbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoInNhZmFyaSIpPT0tMSl7dGhpcy5faGlkZVNob3dDb2wodGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0hlYWRlcigpLGEsZSk7CmlmKCR0ZWxlcmlrLmlzSUU4fHwkdGVsZXJpay5pc0lFOU1vZGV8fCgkdGVsZXJpay5pc09wZXJhJiZiPjEwLjEpKXtUZWxlcmlrLldlYi5VSS5HcmlkLmhpZGVTaG93Q2VsbHModGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0hlYWRlcigpLmdldF9lbGVtZW50KCksYSxlLHRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXdIZWFkZXIoKS5Db2xHcm91cC5Db2xzKTsKfXRoaXMuX3NldEhlYWRlckZvb3RlclNwYW4oKTsKaWYoISR0ZWxlcmlrLmlzSUU2KXt2YXIgYz10aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3SGVhZGVyKCkuZ2V0X2VsZW1lbnQoKS5nZXRFbGVtZW50c0J5VGFnTmFtZSgic2VsZWN0Iik7CmlmKGMubGVuZ3RoPjApe3ZhciBkPXRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXdIZWFkZXIoKS5nZXRfZWxlbWVudCgpOwpzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Zm9yKHZhciBnPTAsaD1kLnJvd3MubGVuZ3RoOwpnPGg7CmcrKyl7dmFyIGY9ZC5yb3dzW2ddLmNlbGxzW2FdOwpUZWxlcmlrLldlYi5VSS5HcmlkLl9oaWRlU2hvd1NlbGVjdChmLGUpOwp9fSwwKTsKfX19ZWxzZXt0aGlzLl9oaWRlU2hvd0NvbCh0aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3SGVhZGVyKCksYSxlKTsKVGVsZXJpay5XZWIuVUkuR3JpZC5oaWRlU2hvd0NlbGxzKHRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXdIZWFkZXIoKS5nZXRfZWxlbWVudCgpLGEsZSx0aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3SGVhZGVyKCkuQ29sR3JvdXAuQ29scyk7CnRoaXMuX3NldEhlYWRlckZvb3RlclNwYW4oKTsKfX1pZih0aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3KCkpe3RoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXcoKS5nZXRfY29sdW1ucygpW2FdLkZyb3plbkRpc3BsYXk9ZTsKaWYoIXdpbmRvdy5uZXRzY2FwZSYmbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoInNhZmFyaSIpPT0tMSl7dGhpcy5faGlkZVNob3dDb2wodGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlldygpLGEsZSk7CmlmKCR0ZWxlcmlrLmlzSUU4fHwkdGVsZXJpay5pc0lFOU1vZGV8fCgkdGVsZXJpay5pc09wZXJhJiZiPjEwLjEpKXtUZWxlcmlrLldlYi5VSS5HcmlkLmhpZGVTaG93Q2VsbHModGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlldygpLmdldF9lbGVtZW50KCksYSxlLHRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXcoKS5Db2xHcm91cC5Db2xzKTsKfXRoaXMuX3NldEhlYWRlckZvb3RlclNwYW4oKTsKaWYoISR0ZWxlcmlrLmlzSUU2KXt2YXIgYz10aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3KCkuZ2V0X2VsZW1lbnQoKS5nZXRFbGVtZW50c0J5VGFnTmFtZSgic2VsZWN0Iik7CmlmKGMubGVuZ3RoPjApe3ZhciBkPXRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXcoKS5nZXRfZWxlbWVudCgpOwpzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Zm9yKHZhciBnPTAsaD1kLnJvd3MubGVuZ3RoOwpnPGg7CmcrKyl7dmFyIGY9ZC5yb3dzW2ddLmNlbGxzW2FdOwpUZWxlcmlrLldlYi5VSS5HcmlkLl9oaWRlU2hvd1NlbGVjdChmLGUpOwp9fSwwKTsKfX19ZWxzZXt0aGlzLl9oaWRlU2hvd0NvbCh0aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3KCksYSxlKTsKVGVsZXJpay5XZWIuVUkuR3JpZC5oaWRlU2hvd0NlbGxzKHRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXcoKS5nZXRfZWxlbWVudCgpLGEsZSx0aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3KCkuQ29sR3JvdXAuQ29scyk7CnRoaXMuX3NldEhlYWRlckZvb3RlclNwYW4oKTsKfX1pZih0aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3Rm9vdGVyKCkpe2lmKCF3aW5kb3cubmV0c2NhcGUmJm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKCJzYWZhcmkiKT09LTEpe3RoaXMuX2hpZGVTaG93Q29sKHRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXdGb290ZXIoKSxhLGUpOwppZigkdGVsZXJpay5pc0lFOHx8JHRlbGVyaWsuaXNJRTlNb2RlfHwoJHRlbGVyaWsuaXNPcGVyYSYmYj4xMC4xKSl7VGVsZXJpay5XZWIuVUkuR3JpZC5oaWRlU2hvd0NlbGxzKHRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXdGb290ZXIoKS5nZXRfZWxlbWVudCgpLGEsZSx0aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3Rm9vdGVyKCkuQ29sR3JvdXAuQ29scyk7Cn10aGlzLl9zZXRIZWFkZXJGb290ZXJTcGFuKCk7CmlmKCEkdGVsZXJpay5pc0lFNil7dmFyIGM9dGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0Zvb3RlcigpLmdldF9lbGVtZW50KCkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInNlbGVjdCIpOwppZihjLmxlbmd0aD4wKXt2YXIgZD10aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3Rm9vdGVyKCkuZ2V0X2VsZW1lbnQoKTsKc2V0VGltZW91dChmdW5jdGlvbigpe2Zvcih2YXIgZz0wLGg9ZC5yb3dzLmxlbmd0aDsKZzxoOwpnKyspe3ZhciBmPWQucm93c1tnXS5jZWxsc1thXTsKVGVsZXJpay5XZWIuVUkuR3JpZC5faGlkZVNob3dTZWxlY3QoZixlKTsKfX0sMCk7Cn19fWVsc2V7dGhpcy5faGlkZVNob3dDb2wodGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0Zvb3RlcigpLGEsZSk7ClRlbGVyaWsuV2ViLlVJLkdyaWQuaGlkZVNob3dDZWxscyh0aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3Rm9vdGVyKCkuZ2V0X2VsZW1lbnQoKSxhLGUsdGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0Zvb3RlcigpLkNvbEdyb3VwLkNvbHMpOwp0aGlzLl9zZXRIZWFkZXJGb290ZXJTcGFuKCk7Cn19fSxoaWRlSXRlbTpmdW5jdGlvbihmKXtpZighdGhpcy5fY2FuU2hvd0hpZGVJdGVtKGYpKXtyZXR1cm4gZmFsc2U7Cn12YXIgYj1udWxsOwppZih0aGlzLmdldF9lbGVtZW50KCkmJnRoaXMuZ2V0X2VsZW1lbnQoKS50Qm9kaWVzLmxlbmd0aD4xKXt2YXIgZT0kdGVsZXJpay5nZXRGaXJzdENoaWxkQnlUYWdOYW1lKHRoaXMuZ2V0X2VsZW1lbnQoKSwidGJvZHkiLDApOwppZihlJiZlLnJvd3NbZl0pe2I9ZS5yb3dzW2ZdOwp9fWVsc2V7aWYodGhpcy5nZXRfZWxlbWVudCgpJiZ0aGlzLmdldF9lbGVtZW50KCkudEJvZGllc1swXSYmdGhpcy5nZXRfZWxlbWVudCgpLnRCb2RpZXNbMF0ucm93c1tmXSl7Yj10aGlzLmdldF9lbGVtZW50KCkudEJvZGllc1swXS5yb3dzW2ZdOwp9fXZhciBkPW5ldyBUZWxlcmlrLldlYi5VSS5HcmlkRGF0YUl0ZW1DYW5jZWxFdmVudEFyZ3MoYixudWxsKTsKdGhpcy5fb3duZXIucmFpc2Vfcm93SGlkaW5nKGQpOwppZihkLmdldF9jYW5jZWwoKSl7cmV0dXJuIGZhbHNlOwp9aWYoYil7Yi5zdHlsZS5kaXNwbGF5PSJub25lIjsKfWlmKGImJmIuaWQhPSIiJiZiLmlkLnNwbGl0KCJfXyIpLmxlbmd0aD09Mil7dmFyIGE9Yi5pZC5zcGxpdCgiX18iKVsxXTsKdmFyIGM9dGhpcy5faGlkZWRJdGVtc0RhdGE7CmMuYWRkKFN0cmluZy5mb3JtYXQoInswfSx7MX0iLHRoaXMuZ2V0X2lkKCksYSkpOwp0aGlzLl9vd25lci5faGlkZWRJdGVtcz1jLnRvU3RyaW5nKCk7CnRoaXMuX293bmVyLnVwZGF0ZUNsaWVudFN0YXRlKCk7Cn0kZmluZCh0aGlzLl9vd25lci5nZXRfaWQoKSkuX2dldFBvc2l0aW9uZWREYXRhSXRlbXModHJ1ZSk7CnZhciBkPW5ldyBUZWxlcmlrLldlYi5VSS5HcmlkRGF0YUl0ZW1FdmVudEFyZ3MoYixudWxsKTsKdGhpcy5fb3duZXIucmFpc2Vfcm93SGlkZGVuKGQpOwp9LHNob3dJdGVtOmZ1bmN0aW9uKGYpe2lmKCF0aGlzLl9jYW5TaG93SGlkZUl0ZW0oZikpe3JldHVybiBmYWxzZTsKfXZhciBjPW51bGw7CmlmKHRoaXMuZ2V0X2VsZW1lbnQoKSYmdGhpcy5nZXRfZWxlbWVudCgpLnRCb2RpZXMubGVuZ3RoPjEpe3ZhciBlPSR0ZWxlcmlrLmdldEZpcnN0Q2hpbGRCeVRhZ05hbWUodGhpcy5nZXRfZWxlbWVudCgpLCJ0Ym9keSIsMCk7CmlmKGUmJmUucm93c1tmXSl7Yz1lLnJvd3NbZl07Cn19ZWxzZXtpZih0aGlzLmdldF9lbGVtZW50KCkmJnRoaXMuZ2V0X2VsZW1lbnQoKS50Qm9kaWVzWzBdJiZ0aGlzLmdldF9lbGVtZW50KCkudEJvZGllc1swXS5yb3dzW2ZdKXtjPXRoaXMuZ2V0X2VsZW1lbnQoKS50Qm9kaWVzWzBdLnJvd3NbZl07Cn19dmFyIGQ9bmV3IFRlbGVyaWsuV2ViLlVJLkdyaWREYXRhSXRlbUNhbmNlbEV2ZW50QXJncyhjLG51bGwpOwp0aGlzLl9vd25lci5yYWlzZV9yb3dTaG93aW5nKGQpOwppZihkLmdldF9jYW5jZWwoKSl7cmV0dXJuIGZhbHNlOwp9aWYoYyl7aWYod2luZG93Lm5ldHNjYXBlKXtjLnN0eWxlLmRpc3BsYXk9InRhYmxlLXJvdyI7Cn1lbHNle2Muc3R5bGUuZGlzcGxheT0iIjsKfX1pZihjJiZjLmlkIT0iIiYmYy5pZC5zcGxpdCgiX18iKS5sZW5ndGg9PTIpe3ZhciBhPWMuaWQuc3BsaXQoIl9fIilbMV07CnZhciBiPXRoaXMuX3Nob3dlZEl0ZW1zRGF0YTsKYi5hZGQoU3RyaW5nLmZvcm1hdCgiezB9LHsxfSIsdGhpcy5nZXRfaWQoKSxhKSk7CnRoaXMuX293bmVyLl9zaG93ZWRJdGVtcz1iLnRvU3RyaW5nKCk7CnRoaXMuX293bmVyLnVwZGF0ZUNsaWVudFN0YXRlKCk7Cn0kZmluZCh0aGlzLl9vd25lci5nZXRfaWQoKSkuX2dldFBvc2l0aW9uZWREYXRhSXRlbXModHJ1ZSk7CnZhciBkPW5ldyBUZWxlcmlrLldlYi5VSS5HcmlkRGF0YUl0ZW1FdmVudEFyZ3MoYyxudWxsKTsKdGhpcy5fb3duZXIucmFpc2Vfcm93U2hvd24oZCk7Cn0sX2NhblNob3dIaWRlSXRlbTpmdW5jdGlvbihiKXtpZihpc05hTihwYXJzZUludChiKSkpe3ZhciBhPSdSb3cgaW5kZXggbXVzdCBiZSBvZiB0eXBlICJOdW1iZXIiISc7CmFsZXJ0KGEpOwpyZXR1cm4gZmFsc2U7Cn1pZihiPDApe3ZhciBhPSJSb3cgaW5kZXggbXVzdCBiZSBub24tbmVnYXRpdmUhIjsKYWxlcnQoYSk7CnJldHVybiBmYWxzZTsKfWlmKHRoaXMuZ2V0X2VsZW1lbnQoKSYmdGhpcy5nZXRfZWxlbWVudCgpLnRCb2RpZXMubGVuZ3RoPjEpe3ZhciBjPSR0ZWxlcmlrLmdldEZpcnN0Q2hpbGRCeVRhZ05hbWUodGhpcy5nZXRfZWxlbWVudCgpLCJ0Ym9keSIsMCk7CmlmKGMmJmMucm93c1tiXSYmKGI+Yy5yb3dzW2JdLmxlbmd0aC0xKSl7dmFyIGE9IlJvdyBpbmRleCBtdXN0IGJlIGxlc3MgdGhhbiByb3dzIGNvdW50ISI7CmFsZXJ0KGEpOwpyZXR1cm4gZmFsc2U7Cn19ZWxzZXtpZih0aGlzLmdldF9lbGVtZW50KCkmJnRoaXMuZ2V0X2VsZW1lbnQoKS50Qm9kaWVzWzBdJiZ0aGlzLmdldF9lbGVtZW50KCkudEJvZGllc1swXS5yb3dzW2JdJiYoYj4odGhpcy5nZXRfZWxlbWVudCgpLnRCb2RpZXNbMF0ucm93c1tiXS5sZW5ndGgtMSkpKXt2YXIgYT0iUm93IGluZGV4IG11c3QgYmUgbGVzcyB0aGFuIHJvd3MgY291bnQhIjsKYWxlcnQoYSk7CnJldHVybiBmYWxzZTsKfX1yZXR1cm4gdHJ1ZTsKfSxfZ2V0Um93c0Zyb21Cb2R5OmZ1bmN0aW9uKGIpe3ZhciBhPWIubGVuZ3RoOwp2YXIgZD1uZXcgQXJyYXkoKTsKZm9yKHZhciBjPTA7CmM8YTsKYysrKXtpZihiW2NdLnBhcmVudE5vZGUudGFnTmFtZS50b1VwcGVyQ2FzZSgpPT0iVEJPRFkiKXtyZXR1cm4gYltjXS5wYXJlbnROb2RlLnJvd3M7Cn19fSxfZ2V0Rmlyc3REYXRhUm93OmZ1bmN0aW9uKCl7aWYodGhpcy5fZmlyc3REYXRhUm93IT1udWxsKXtyZXR1cm4gdGhpcy5fZmlyc3REYXRhUm93Owp9aWYodGhpcy5fZGF0YUl0ZW1zLmxlbmd0aD4wKXtyZXR1cm4gdGhpcy5fZGF0YUl0ZW1zWzBdLmdldF9lbGVtZW50KCk7Cn12YXIgYj1bXTsKaWYoJHRlbGVyaWsuaXNPcGVyYSl7Yj10aGlzLl9nZXRSb3dzRnJvbUJvZHkodGhpcy5nZXRfZWxlbWVudCgpLnJvd3MpOwp9ZWxzZXt2YXIgZD10aGlzLmdldF9lbGVtZW50KCkudEJvZGllczsKaWYoZC5sZW5ndGg+MCl7Yj1kWzBdLnJvd3M7Cn19Zm9yKHZhciBjPTAsZT1iLmxlbmd0aDsKYzxlOwpjKyspe3ZhciBhPWJbY107CmlmKGEuaWQhPSIiJiZhLmlkLnNwbGl0KCJfXyIpLmxlbmd0aD09Mil7dGhpcy5fZmlyc3RSb3c9YTsKYnJlYWs7Cn19cmV0dXJuIHRoaXMuX2ZpcnN0Um93Owp9LF9nZXROZXh0RGF0YVJvdzpmdW5jdGlvbihhKXt2YXIgYj1udWxsOwp2YXIgYzsKaWYoJHRlbGVyaWsuaXNPcGVyYSl7Yz10aGlzLl9nZXRSb3dzRnJvbUJvZHkodGhpcy5nZXRfZWxlbWVudCgpLnJvd3MpOwp9ZWxzZXtjPXRoaXMuZ2V0X2VsZW1lbnQoKS50Qm9kaWVzWzBdLnJvd3M7Cn1mb3IodmFyIGQ9YS5zZWN0aW9uUm93SW5kZXgrMSxlPWMubGVuZ3RoOwpkPGU7CmQrKyl7dmFyIGE9Y1tkXTsKaWYoYS5pZCE9IiImJmEuaWQuc3BsaXQoIl9fIikubGVuZ3RoPT0yKXtiPWE7CmJyZWFrOwp9fXJldHVybiBiOwp9LF9nZXROZXN0ZWRUYWJsZVdoZW5Sb3dJc0luRWRpdE1vZGU6ZnVuY3Rpb24oYil7dmFyIGQ9bnVsbDsKdmFyIGM9VGVsZXJpay5XZWIuVUkuR3JpZC5HZXROb2RlTmV4dFNpYmxpbmdCeVRhZ05hbWUoYiwidHIiKTsKaWYodGhpcy5fZGF0YS5oYXNEZXRhaWxJdGVtVGVtcGxhdGUpe2M9VGVsZXJpay5XZWIuVUkuR3JpZC5HZXROb2RlTmV4dFNpYmxpbmdCeVRhZ05hbWUoYywidHIiKTsKfWlmKGMpe3ZhciBhPWMubmV4dFNpYmxpbmcuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRhYmxlIik7CmlmKGEubGVuZ3RoPjAmJmFbMF0uaWQuaW5kZXhPZigiRGV0YWlsIikhPS0xKXtkPWFbMF07Cn19cmV0dXJuIGQ7Cn0sX2dldE5leHROZXN0ZWREYXRhUm93OmZ1bmN0aW9uKGgpe3ZhciBjPW51bGw7CnZhciBiPW51bGw7CnZhciBkPWguaWQ7CnZhciBlPSRmaW5kKGQpOwppZih0aGlzLl9vd25lci5DbGllbnRTZXR0aW5ncy5BbGxvd0tleWJvYXJkTmF2aWdhdGlvbiYmZSYmZS5nZXRfaXNJbkVkaXRNb2RlKCkpe2I9dGhpcy5fZ2V0TmVzdGVkVGFibGVXaGVuUm93SXNJbkVkaXRNb2RlKGgpOwp9ZWxzZXtpZih0aGlzLl9kYXRhLmhhc0RldGFpbEl0ZW1UZW1wbGF0ZSl7dmFyIGc9VGVsZXJpay5XZWIuVUkuR3JpZC5HZXROb2RlTmV4dFNpYmxpbmdCeVRhZ05hbWUoaCwidHIiKTsKYj1UZWxlcmlrLldlYi5VSS5HcmlkLkdldE5lc3RlZFRhYmxlKGcpOwp9ZWxzZXtiPVRlbGVyaWsuV2ViLlVJLkdyaWQuR2V0TmVzdGVkVGFibGUoaCk7Cn19aWYoYil7dmFyIGE7CmlmKCR0ZWxlcmlrLmlzT3BlcmEpe2E9dGhpcy5fZ2V0Um93c0Zyb21Cb2R5KHRoaXMuZ2V0X2VsZW1lbnQoKS5yb3dzKTsKfWVsc2V7YT10aGlzLmdldF9lbGVtZW50KCkudEJvZGllc1swXS5yb3dzOwp9Zm9yKHZhciBmPTA7CmY8YS5sZW5ndGg7CmYrKyl7dmFyIGg9YVtmXTsKaWYoaC5pZCE9IiImJmguaWQuc3BsaXQoIl9fIikubGVuZ3RoPT0yKXtjPWg7CmJyZWFrOwp9fX1yZXR1cm4gYzsKfSxfZ2V0UHJldmlvdXNEYXRhUm93OmZ1bmN0aW9uKGEpe3ZhciBkPW51bGw7CnZhciBiOwppZigkdGVsZXJpay5pc09wZXJhKXtiPXRoaXMuX2dldFJvd3NGcm9tQm9keSh0aGlzLmdldF9lbGVtZW50KCkucm93cyk7Cn1lbHNle2I9dGhpcy5nZXRfZWxlbWVudCgpLnRCb2RpZXNbMF0ucm93czsKfWZvcih2YXIgYz1hLnNlY3Rpb25Sb3dJbmRleC0xOwpjPj0wOwpjLS0pe3ZhciBhPWJbY107CmlmKGEuaWQhPSIiJiZhLmlkLnNwbGl0KCJfXyIpLmxlbmd0aD09Mil7ZD1hOwpicmVhazsKfX1yZXR1cm4gZDsKfSxfZ2V0UHJldmlvdXNOZXN0ZWREYXRhUm93OmZ1bmN0aW9uKGEpe3ZhciBkPW51bGw7CnZhciBlPVRlbGVyaWsuV2ViLlVJLkdyaWQuR2V0TmVzdGVkVGFibGUoYSk7CmlmKGUpe3ZhciBiOwppZigkdGVsZXJpay5pc09wZXJhKXtiPXRoaXMuX2dldFJvd3NGcm9tQm9keSh0aGlzLmdldF9lbGVtZW50KCkucm93cyk7Cn1lbHNle2I9dGhpcy5nZXRfZWxlbWVudCgpLnRCb2RpZXNbMF0ucm93czsKfWZvcih2YXIgYz1hLnNlY3Rpb25Sb3dJbmRleC0xOwpjPj0wOwpjLS0pe3ZhciBhPWJbY107CmlmKGEuaWQhPSIiJiZhLmlkLnNwbGl0KCJfXyIpLmxlbmd0aD09Mil7ZD1hOwpicmVhazsKfX19cmV0dXJuIGQ7Cn0sZ2V0X3BhcmVudFZpZXc6ZnVuY3Rpb24oKXt2YXIgYT1udWxsOwppZih0aGlzLmdldF9pZCgpIT10aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3KCkuZ2V0X2lkKCkpe2E9JGZpbmQodGhpcy5nZXRfcGFyZW50Um93KCkuaWQuc3BsaXQoIl9fIilbMF0pOwp9cmV0dXJuIGE7Cn0sZ2V0X3BhcmVudFJvdzpmdW5jdGlvbigpe3ZhciBhPW51bGw7CmlmKHRoaXMuZ2V0X2lkKCkhPXRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXcoKS5nZXRfaWQoKSl7YT10aGlzLmdldF9lbGVtZW50KCkucGFyZW50Tm9kZS5wYXJlbnROb2RlLnByZXZpb3VzU2libGluZzsKfXJldHVybiBhOwp9LGdldF9zZWxlY3RlZEl0ZW1zOmZ1bmN0aW9uKCl7dmFyIGQ9W107CmZvcih2YXIgYz0wOwpjPHRoaXMuX293bmVyLl9zZWxlY3RlZEl0ZW1zSW50ZXJuYWwubGVuZ3RoOwpjKyspe3ZhciBiPXRoaXMuX293bmVyLl9zZWxlY3RlZEl0ZW1zSW50ZXJuYWxbY10uaWQuc3BsaXQoIl9fIilbMF07CmlmKGI9PXRoaXMuZ2V0X2lkKCkpe3ZhciBhPSRmaW5kKHRoaXMuX293bmVyLl9zZWxlY3RlZEl0ZW1zSW50ZXJuYWxbY10uaWQpOwppZihhPT1udWxsKXtpZigkZ2V0KHRoaXMuX293bmVyLl9zZWxlY3RlZEl0ZW1zSW50ZXJuYWxbY10uaWQpKXthPSRjcmVhdGUoVGVsZXJpay5XZWIuVUkuR3JpZERhdGFJdGVtLHtfb3duZXI6dGhpcyxfZGF0YTp0aGlzLl9kYXRhLF9zZWxlY3RlZDp0cnVlfSxudWxsLG51bGwsJGdldCh0aGlzLl9vd25lci5fc2VsZWN0ZWRJdGVtc0ludGVybmFsW2NdLmlkKSk7CkFycmF5LmFkZChkLGEpOwp9fWVsc2V7aWYoYSYmYS5fb3duZXIuZ2V0X2VsZW1lbnQoKS5pZD09dGhpcy5nZXRfZWxlbWVudCgpLmlkKXtBcnJheS5hZGQoZCxhKTsKfX19fXJldHVybiBkOwp9LHNlbGVjdEFsbEl0ZW1zOmZ1bmN0aW9uKCl7aWYoIXRoaXMuX293bmVyLkFsbG93TXVsdGlSb3dTZWxlY3Rpb24pe3JldHVybjsKfXZhciBkPSgkdGVsZXJpay5pc09wZXJhKT90aGlzLmdldF9lbGVtZW50KCk6dGhpcy5nZXRfZWxlbWVudCgpLnRCb2RpZXNbMF07CnZhciBiPWQucm93czsKaWYoIWIpe3JldHVybjsKfWZvcih2YXIgYz0wLGU9Yi5sZW5ndGg7CmM8ZTsKYysrKXt2YXIgZj1iW2NdOwppZighZi5pZCl7Y29udGludWU7Cn12YXIgYT0kZmluZChmLmlkKTsKaWYoYSl7YS5zZXRfc2VsZWN0ZWQodHJ1ZSk7Cn1lbHNle3RoaXMuc2VsZWN0SXRlbShmKTsKfX19LGNsZWFyU2VsZWN0ZWRJdGVtczpmdW5jdGlvbigpe2lmKHRoaXMuX293bmVyLl9zZWxlY3RlZEl0ZW1zSW50ZXJuYWwubGVuZ3RoPjApe3ZhciBhPXRoaXMuX293bmVyLl9zZWxlY3RlZEl0ZW1zSW50ZXJuYWwubGVuZ3RoLTE7CndoaWxlKGE+PTApe3ZhciBiPSRmaW5kKHRoaXMuX293bmVyLl9zZWxlY3RlZEl0ZW1zSW50ZXJuYWxbYV0uaWQpOwppZihiKXtpZihiLl9vd25lci5nZXRfZWxlbWVudCgpLmlkPT10aGlzLmdldF9lbGVtZW50KCkuaWQpe2Iuc2V0X3NlbGVjdGVkKGZhbHNlKTsKfX1lbHNle2lmKCRnZXQodGhpcy5fb3duZXIuX3NlbGVjdGVkSXRlbXNJbnRlcm5hbFthXS5pZCkucGFyZW50Tm9kZS5wYXJlbnROb2RlLmlkPT10aGlzLmdldF9lbGVtZW50KCkuaWQpe3RoaXMuZGVzZWxlY3RJdGVtKCRnZXQodGhpcy5fb3duZXIuX3NlbGVjdGVkSXRlbXNJbnRlcm5hbFthXS5pZCkpOwp9fWE9TWF0aC5taW4odGhpcy5fb3duZXIuX3NlbGVjdGVkSXRlbXNJbnRlcm5hbC5sZW5ndGgsYSk7CmEtLTsKfX19LGNsZWFyU2VsZWN0ZWRDZWxsczpmdW5jdGlvbigpe2lmKHRoaXMuX293bmVyLl9jZWxsU2VsZWN0aW9uIT1udWxsKXt0aGlzLl9vd25lci5fY2VsbFNlbGVjdGlvbi5fZGVzZWxlY3RUYWJsZVZpZXdDZWxscyh0aGlzKTsKfX0sc2VsZWN0SXRlbTpmdW5jdGlvbihhKXthPXRoaXMuX2dldFJvd0J5SW5kZXhPckl0ZW1JbmRleEhpZXJhcmNoaWNhbChhKTsKaWYodGhpcy5fb3duZXIuX3NlbGVjdGlvbiYmYSYmYS5pZCl7aWYoIXRoaXMuX293bmVyLkFsbG93TXVsdGlSb3dTZWxlY3Rpb24pe3RoaXMuY2xlYXJTZWxlY3RlZEl0ZW1zKCk7Cn10aGlzLl9vd25lci5fa2V5Ym9hcmROYXZpZ2F0aW9uUHJvcGVydGllcy5sYXN0Q2xpY2tTZWxlY3RlZEl0ZW09YTsKdGhpcy5fb3duZXIuX3NlbGVjdGlvbi5fc2VsZWN0Um93SW50ZXJuYWwoYSx7Y3RybEtleTpmYWxzZX0sdHJ1ZSxmYWxzZSx0cnVlKTsKfX0sZGVzZWxlY3RJdGVtOmZ1bmN0aW9uKGEpe2E9dGhpcy5fZ2V0Um93QnlJbmRleE9ySXRlbUluZGV4SGllcmFyY2hpY2FsKGEpOwppZih0aGlzLl9vd25lci5fc2VsZWN0aW9uJiZhJiZhLmlkKXt0aGlzLl9vd25lci5fc2VsZWN0aW9uLl9zZWxlY3RSb3dJbnRlcm5hbChhLHtjdHJsS2V5OmZhbHNlfSx0cnVlLHRydWUsdHJ1ZSk7Cn19LF9nZXRSb3dCeUluZGV4T3JJdGVtSW5kZXhIaWVyYXJjaGljYWw6ZnVuY3Rpb24oYil7aWYodHlwZW9mKGIpPT0ibnVtYmVyIil7dmFyIGs9bnVsbDsKaWYodGhpcy5nZXRfZWxlbWVudCgpLnRCb2RpZXMubGVuZ3RoPjApe2lmKHRoaXMuZ2V0X2VsZW1lbnQoKS50Qm9kaWVzWzBdLnJvd3NbYl0pe2s9dGhpcy5nZXRfZWxlbWVudCgpLnRCb2RpZXNbMF0ucm93c1tiXTsKfWlmKGsmJihrLmlkPT0iInx8IWsuaWQuZW5kc1dpdGgoYi50b1N0cmluZygpKSkpe3doaWxlKGsmJiFrLmlkLmVuZHNXaXRoKGIudG9TdHJpbmcoKSkpe2s9dGhpcy5fZ2V0TmV4dERhdGFSb3coayk7Cn19fWI9azsKfWlmKHR5cGVvZihiKT09InN0cmluZyIpe3ZhciBjPWI7CmI9JGdldCh0aGlzLmdldF9lbGVtZW50KCkuaWQrIl9fIitiKTsKaWYoIWIpe3ZhciBlPWMuc3BsaXQoIjoiKTsKdmFyIGg9ZS5sZW5ndGg7CmlmKGg+MSl7dmFyIGY9dGhpczsKdmFyIGs9Zi5nZXRfZGF0YUl0ZW1zKClbZVswXV07CmlmKCFrKXtpZihmLmdldF9kYXRhSXRlbXMoKS5sZW5ndGg9PTEpe2s9Zi5nZXRfZGF0YUl0ZW1zKClbMF07Cn1lbHNle2s9Zi5nZXRfZGF0YUl0ZW1zKClbZVswXS5zcGxpdCgiX18iKVsxXV07Cn19Zm9yKHZhciBnPTE7Cmc8aDsKZysrKXt2YXIgaj1lW2ddLnNwbGl0KCJfIilbMV07CmY9ay5nZXRfbmVzdGVkVmlld3MoKVswXTsKaWYoIWYpe2Y9dGhpczsKfWlmKGYuZ2V0X2RhdGFJdGVtcygpLmxlbmd0aD09MSl7az1mLmdldF9kYXRhSXRlbXMoKVswXTsKfWVsc2V7az1mLmdldF9kYXRhSXRlbXMoKVtqXTsKfX1iPWsuZ2V0X2VsZW1lbnQoKTsKfWVsc2V7dmFyIGE9cGFyc2VJbnQoZVswXS5zcGxpdCgiX18iKVsxXSwxMCk7CnZhciBkPXRoaXMuZ2V0X2RhdGFJdGVtcygpOwppZighaXNOYU4oYSkmJmE8ZC5sZW5ndGgpe2I9ZFthXS5nZXRfZWxlbWVudCgpOwp9ZWxzZXtiPW51bGw7Cn19fX1yZXR1cm4gYjsKfSxyZW9yZGVyQ29sdW1uczpmdW5jdGlvbihtLGYpe2lmKCF0aGlzLl9vd25lci5DbGllbnRTZXR0aW5ncy5BbGxvd0NvbHVtbnNSZW9yZGVyKXtyZXR1cm47Cn1pZih0aGlzLl9vd25lci5DbGllbnRTZXR0aW5ncy5Db2x1bW5zUmVvcmRlck1ldGhvZCE9MSl7cmV0dXJuOwp9dmFyIGU9dGhpcy5nZXRDb2x1bW5CeVVuaXF1ZU5hbWUobSk7CnZhciBqPXRoaXMuZ2V0Q29sdW1uQnlVbmlxdWVOYW1lKGYpOwppZighZXx8IWope3JldHVybjsKfXZhciBrPWUuZ2V0X2VsZW1lbnQoKS5wYXJlbnROb2RlOwp2YXIgaT10aGlzLl9nZXRDZWxsSW5kZXhCeUNvbHVtblVuaXF1ZU5hbWVGcm9tVGFibGVSb3dFbGVtZW50KGssbSk7CnZhciBkPXRoaXMuX2dldENlbGxJbmRleEJ5Q29sdW1uVW5pcXVlTmFtZUZyb21UYWJsZVJvd0VsZW1lbnQoayxmKTsKdmFyIGE9dGhpcy5fb3duZXIuQ2xpZW50U2V0dGluZ3MuUmVvcmRlckNvbHVtbnNPbkNsaWVudDsKdGhpcy5fb3duZXIuQ2xpZW50U2V0dGluZ3MuUmVvcmRlckNvbHVtbnNPbkNsaWVudD10cnVlOwp2YXIgYj10aGlzLl9vd25lci5DbGllbnRTZXR0aW5ncy5Db2x1bW5zUmVvcmRlck1ldGhvZDsKdGhpcy5fb3duZXIuQ2xpZW50U2V0dGluZ3MuQ29sdW1uc1Jlb3JkZXJNZXRob2Q9MDsKaWYoZD5pKXt2YXIgaD1uZXcgVGVsZXJpay5XZWIuVUkuR3JpZENvbHVtbkNhbmNlbEV2ZW50QXJncyhlLG51bGwpOwp0aGlzLl9vd25lci5yYWlzZV9jb2x1bW5Nb3ZpbmdUb0xlZnQoaCk7CmlmKGguZ2V0X2NhbmNlbCgpKXtyZXR1cm4gZmFsc2U7Cn13aGlsZShpPGQpe3ZhciBnPXRoaXMuZ2V0Q29sdW1uVW5pcXVlTmFtZUJ5Q2VsbEluZGV4KGssaSsxKTsKdmFyIGM9dGhpcy5nZXRDb2x1bW5VbmlxdWVOYW1lQnlDZWxsSW5kZXgoayxpKTsKdGhpcy5zd2FwQ29sdW1ucyhnLGMpOwppKys7Cn12YXIgaD1uZXcgVGVsZXJpay5XZWIuVUkuR3JpZENvbHVtbkV2ZW50QXJncyhlLG51bGwpOwp0aGlzLl9vd25lci5yYWlzZV9jb2x1bW5Nb3ZlZFRvTGVmdChoKTsKfWVsc2V7dmFyIGg9bmV3IFRlbGVyaWsuV2ViLlVJLkdyaWRDb2x1bW5DYW5jZWxFdmVudEFyZ3MoZSxudWxsKTsKdGhpcy5fb3duZXIucmFpc2VfY29sdW1uTW92aW5nVG9SaWdodChoKTsKaWYoaC5nZXRfY2FuY2VsKCkpe3JldHVybiBmYWxzZTsKfXdoaWxlKGQ8aSl7dmFyIGc9dGhpcy5nZXRDb2x1bW5VbmlxdWVOYW1lQnlDZWxsSW5kZXgoayxpLTEpOwp2YXIgYz10aGlzLmdldENvbHVtblVuaXF1ZU5hbWVCeUNlbGxJbmRleChrLGkpOwp0aGlzLnN3YXBDb2x1bW5zKGcsYyk7CmktLTsKfXZhciBoPW5ldyBUZWxlcmlrLldlYi5VSS5HcmlkQ29sdW1uRXZlbnRBcmdzKGUsbnVsbCk7CnRoaXMuX293bmVyLnJhaXNlX2NvbHVtbk1vdmVkVG9SaWdodChoKTsKfXRoaXMuX293bmVyLkNsaWVudFNldHRpbmdzLkNvbHVtbnNSZW9yZGVyTWV0aG9kPWI7CnRoaXMuX293bmVyLkNsaWVudFNldHRpbmdzLlJlb3JkZXJDb2x1bW5zT25DbGllbnQ9YTsKaWYoIXRoaXMuX293bmVyLkNsaWVudFNldHRpbmdzLlJlb3JkZXJDb2x1bW5zT25DbGllbnQpe3ZhciBsPXRoaXMuX293bmVyLkNsaWVudFNldHRpbmdzLlBvc3RCYWNrRnVuY3Rpb247Cmw9bC5yZXBsYWNlKCJ7MH0iLHRoaXMuX293bmVyLlVuaXF1ZUlEKTsKZXZhbChsKTsKcmV0dXJuOwp9fSxzd2FwQ29sdW1uczpmdW5jdGlvbihnLGYpe3ZhciBlPXRoaXMuZ2V0Q29sdW1uQnlVbmlxdWVOYW1lKGcpOwp2YXIgbD10aGlzLmdldENvbHVtbkJ5VW5pcXVlTmFtZShmKTsKaWYoIWV8fCFsKXtyZXR1cm47Cn1pZighdGhpcy5fb3duZXIuQ2xpZW50U2V0dGluZ3MuQWxsb3dDb2x1bW5zUmVvcmRlcil7cmV0dXJuOwp9aWYoIWUuZ2V0X3Jlb3JkZXJhYmxlKCl8fCFsLmdldF9yZW9yZGVyYWJsZSgpKXtyZXR1cm47Cn1pZighdGhpcy5fb3duZXIuQ2xpZW50U2V0dGluZ3MuUmVvcmRlckNvbHVtbnNPbkNsaWVudCl7dmFyIG89dGhpcy5fb3duZXIuQ2xpZW50U2V0dGluZ3MuUG9zdEJhY2tGdW5jdGlvbjsKbz1vLnJlcGxhY2UoInswfSIsdGhpcy5fb3duZXIuVW5pcXVlSUQpOwpvPW8ucmVwbGFjZSgiezF9IiwiUmVvcmRlckNvbHVtbnMsIit0aGlzLl9kYXRhLlVuaXF1ZUlEKyIsIitlLmdldF91bmlxdWVOYW1lKCkrIiwiK2wuZ2V0X3VuaXF1ZU5hbWUoKSk7CmV2YWwobyk7CnJldHVybjsKfWlmKHRoaXMuX293bmVyLkNsaWVudFNldHRpbmdzLkNvbHVtbnNSZW9yZGVyTWV0aG9kIT0wKXtyZXR1cm47Cn12YXIgbj10aGlzLl9nZXRDZWxsSW5kZXhCeUNvbHVtblVuaXF1ZU5hbWVGcm9tVGFibGVSb3dFbGVtZW50KGUuZ2V0X2VsZW1lbnQoKS5wYXJlbnROb2RlLGcpOwp2YXIgaz10aGlzLl9nZXRDZWxsSW5kZXhCeUNvbHVtblVuaXF1ZU5hbWVGcm9tVGFibGVSb3dFbGVtZW50KGwuZ2V0X2VsZW1lbnQoKS5wYXJlbnROb2RlLGYpOwp2YXIgaD1uZXcgU3lzLkNhbmNlbEV2ZW50QXJncygpOwpoLmdldF9ncmlkU291cmNlQ29sdW1uPWZ1bmN0aW9uKCl7cmV0dXJuIGU7Cn07CmguZ2V0X2dyaWRUYXJnZXRDb2x1bW49ZnVuY3Rpb24oKXtyZXR1cm4gbDsKfTsKdGhpcy5fb3duZXIucmFpc2VfY29sdW1uU3dhcHBpbmcoaCk7CmlmKGguZ2V0X2NhbmNlbCgpKXtyZXR1cm4gZmFsc2U7Cn1pZih0aGlzLmdldF9pZCgpJiZ0aGlzLmdldF9pZCgpLmluZGV4T2YoIkRldGFpbCIpIT0tMSl7dGhpcy5fcmVvcmRlckNvbHVtbnNJbnRlcm5hbChnLGYpOwp9aWYodGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0hlYWRlcigpKXtpZih0aGlzLl9oYXNNdWx0aUhlYWRlcnMpe3ZhciByPXRoaXMuTXVsdGlIZWFkZXJDZWxsc1tuXTsKdmFyIGI9dGhpcy5NdWx0aUhlYWRlckNlbGxzW2tdOwppZihyJiZiJiZyLlVuaXF1ZU5hbWUudG9Mb3dlckNhc2UoKT09Zy50b0xvd2VyQ2FzZSgpJiZiLlVuaXF1ZU5hbWUudG9Mb3dlckNhc2UoKT09Zi50b0xvd2VyQ2FzZSgpKXt0aGlzLl9yZW9yZGVyQ29udHJvbHMocixiKTsKfX1lbHNle3RoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXdIZWFkZXIoKS5fcmVvcmRlckNvbHVtbnNJbnRlcm5hbChnLGYpOwp9fWlmKHRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXcoKSl7aWYodGhpcy5faGFzTXVsdGlIZWFkZXJzJiYhKHRoaXMuX293bmVyLkNsaWVudFNldHRpbmdzLlNjcm9sbGluZyYmdGhpcy5fb3duZXIuQ2xpZW50U2V0dGluZ3MuU2Nyb2xsaW5nLkFsbG93U2Nyb2xsJiZ0aGlzLl9vd25lci5DbGllbnRTZXR0aW5ncy5TY3JvbGxpbmcuVXNlU3RhdGljSGVhZGVycykpe3ZhciByPXRoaXMuTXVsdGlIZWFkZXJDZWxsc1tuXTsKdmFyIGI9dGhpcy5NdWx0aUhlYWRlckNlbGxzW2tdOwppZihyJiZiJiZyLlVuaXF1ZU5hbWUudG9Mb3dlckNhc2UoKT09Zy50b0xvd2VyQ2FzZSgpJiZiLlVuaXF1ZU5hbWUudG9Mb3dlckNhc2UoKT09Zi50b0xvd2VyQ2FzZSgpKXt0aGlzLl9yZW9yZGVyQ29udHJvbHMocixiKTsKfX10aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3KCkuX3Jlb3JkZXJDb2x1bW5zSW50ZXJuYWwoZyxmKTsKfWlmKHRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXdGb290ZXIoKSl7dmFyIG09KHRoaXMuX293bmVyLkNsaWVudFNldHRpbmdzLlNjcm9sbGluZyYmdGhpcy5fb3duZXIuQ2xpZW50U2V0dGluZ3MuU2Nyb2xsaW5nLkFsbG93U2Nyb2xsJiZ0aGlzLl9vd25lci5DbGllbnRTZXR0aW5ncy5TY3JvbGxpbmcuVXNlU3RhdGljSGVhZGVycyk7CmlmKCh0aGlzLmdldF9pZCgpJiZ0aGlzLmdldF9pZCgpLmluZGV4T2YoIkRldGFpbCIpPT0tMSkmJm0pe3RoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXdGb290ZXIoKS5fcmVvcmRlckZvb3RlckluU3RhdGljSGVhZGVycyhnLGYpOwp9ZWxzZXt0aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3Rm9vdGVyKCkuX3Jlb3JkZXJDb2x1bW5zSW50ZXJuYWwoZyxmKTsKfX12YXIgYz1sLmdldF9lbGVtZW50KCkuVW5pcXVlTmFtZTsKdmFyIGQ9ZS5nZXRfZWxlbWVudCgpLlVuaXF1ZU5hbWU7CmUuZ2V0X2VsZW1lbnQoKS5VbmlxdWVOYW1lPWM7CmwuZ2V0X2VsZW1lbnQoKS5VbmlxdWVOYW1lPWQ7CnZhciBwPWwuX2RhdGE7CmwuX2RhdGE9ZS5fZGF0YTsKZS5fZGF0YT1wOwp0aGlzLmdldF9jb2x1bW5zKClba109bDsKdGhpcy5nZXRfY29sdW1ucygpW25dPWU7CmlmKHRoaXMuX293bmVyLkNsaWVudFNldHRpbmdzLkFsbG93S2V5Ym9hcmROYXZpZ2F0aW9uJiYhdGhpcy5fb3duZXIuX2NlbGxTZWxlY3Rpb24hPW51bGwpe3ZhciBqPXRoaXMuZ2V0X2VsZW1lbnQoKS5yb3dzOwpmb3IodmFyIHE9MDsKcTxqLmxlbmd0aDsKcSsrKXtpZihqW3FdLmlkPT0iInx8altxXS5pZD09dW5kZWZpbmVkKXtjb250aW51ZTsKfWVsc2V7dGhpcy5fb3duZXIuX2NlbGxTZWxlY3Rpb24uX3NldEFjdGl2ZUNlbGxFbGVtZW50KGpbcV0uY2VsbHNba10pOwpicmVhazsKfX19dGhpcy5fY29weUNvbEF0dHJpYnV0ZXModGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlldygpLkNvbEdyb3VwLkNvbHNbbl0sdGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlldygpLkNvbEdyb3VwLkNvbHNba10pOwppZih0aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3SGVhZGVyKCkmJnRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXdIZWFkZXIoKS5Db2xHcm91cCl7dGhpcy5fY29weUNvbEF0dHJpYnV0ZXModGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0hlYWRlcigpLkNvbEdyb3VwLkNvbHNbbl0sdGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0hlYWRlcigpLkNvbEdyb3VwLkNvbHNba10pOwp9aWYodGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0Zvb3RlcigpJiZ0aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3Rm9vdGVyKCkuQ29sR3JvdXApe3RoaXMuX2NvcHlDb2xBdHRyaWJ1dGVzKHRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXdGb290ZXIoKS5Db2xHcm91cC5Db2xzW25dLHRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXdGb290ZXIoKS5Db2xHcm91cC5Db2xzW2tdKTsKfXZhciBoPW5ldyBTeXMuRXZlbnRBcmdzKCk7CmguZ2V0X2dyaWRTb3VyY2VDb2x1bW49ZnVuY3Rpb24oKXtyZXR1cm4gZTsKfTsKaC5nZXRfZ3JpZFRhcmdldENvbHVtbj1mdW5jdGlvbigpe3JldHVybiBsOwp9Owp0aGlzLl9vd25lci5yYWlzZV9jb2x1bW5Td2FwcGVkKGgpOwp2YXIgYT10aGlzLl9kYXRhLlVuaXF1ZUlEKyIsIitnKyIsIitmOwpBcnJheS5hZGQodGhpcy5fb3duZXIuX3Jlb3JkZXJlZENvbHVtbnMsYSk7CnRoaXMuX293bmVyLnVwZGF0ZUNsaWVudFN0YXRlKCk7CmlmKHRoaXMuX293bmVyLkNsaWVudFNldHRpbmdzLlJlc2l6aW5nLkFsbG93Q29sdW1uUmVzaXplJiZ0aGlzLl9vd25lci5DbGllbnRTZXR0aW5ncy5SZXNpemluZy5BbGxvd1Jlc2l6ZVRvRml0KXtUZWxlcmlrLldlYi5VSS5HcmlkLkNsZWFyQmVzdEZpdENhY2hlKHRoaXMuZ2V0X2NvbHVtbnMoKSk7Cn19LF9jb3B5Q29sQXR0cmlidXRlczpmdW5jdGlvbihnLGUpe2lmKGcmJmUpe3ZhciBmPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNvbCIpOwp2YXIgYz1mYWxzZTsKdmFyIGI9ZmFsc2U7CmlmKGcuc3R5bGUud2lkdGg9PSIiJiZlLnN0eWxlLndpZHRoIT0iIil7Yj10cnVlOwp9aWYoZS5zdHlsZS53aWR0aD09IiImJmcuc3R5bGUud2lkdGghPSIiKXtjPXRydWU7Cn12YXIgZD1nLnN0eWxlLmRpc3BsYXk7CnZhciBhPWUuc3R5bGUuZGlzcGxheTsKJHRlbGVyaWsubWVyZ2VFbGVtZW50QXR0cmlidXRlcyhnLGYsZmFsc2UpOwokdGVsZXJpay5tZXJnZUVsZW1lbnRBdHRyaWJ1dGVzKGUsZyxmYWxzZSk7CiR0ZWxlcmlrLm1lcmdlRWxlbWVudEF0dHJpYnV0ZXMoZixlLGZhbHNlKTsKZy5zdHlsZS5kaXNwbGF5PWE7CmUuc3R5bGUuZGlzcGxheT1kOwppZihjKXtnLnN0eWxlLndpZHRoPSIiOwp9aWYoYil7ZS5zdHlsZS53aWR0aD0iIjsKfX19LF9yZW9yZGVyRm9vdGVySW5TdGF0aWNIZWFkZXJzOmZ1bmN0aW9uKGUsYSl7Zm9yKHZhciBkPTA7CmQ8dGhpcy5nZXRfZWxlbWVudCgpLnJvd3MubGVuZ3RoOwpkKyspe3ZhciBmPXRoaXMuZ2V0X2VsZW1lbnQoKS5yb3dzW2RdOwp2YXIgYj10aGlzLl9nZXRDZWxsQnlGb290ZXJDb2x1bW5VbmlxdWVOYW1lRnJvbVRhYmxlUm93RWxlbWVudChmLGUpOwp2YXIgYz10aGlzLl9nZXRDZWxsQnlGb290ZXJDb2x1bW5VbmlxdWVOYW1lRnJvbVRhYmxlUm93RWxlbWVudChmLGEpOwppZighYnx8IWMpe2NvbnRpbnVlOwp9dGhpcy5fcmVvcmRlckNvbnRyb2xzKGIsYyk7Cn19LF9nZXRDZWxsQnlGb290ZXJDb2x1bW5VbmlxdWVOYW1lRnJvbVRhYmxlUm93RWxlbWVudDpmdW5jdGlvbihiLGQpe2Zvcih2YXIgYz0wLGE9dGhpcy5nZXRfb3duZXIoKS5nZXRfbWFzdGVyVGFibGVWaWV3KCkuZ2V0X2NvbHVtbnMoKS5sZW5ndGg7CmM8YTsKYysrKXtpZih0aGlzLmdldF9vd25lcigpLmdldF9tYXN0ZXJUYWJsZVZpZXcoKS5nZXRfY29sdW1ucygpW2NdLmdldF9lbGVtZW50KCkuVW5pcXVlTmFtZS50b1VwcGVyQ2FzZSgpPT1kLnRvVXBwZXJDYXNlKCkpe3JldHVybiBiLmNlbGxzW2NdOwp9fXJldHVybiBudWxsOwp9LF9yZW9yZGVyQ29sdW1uc0ludGVybmFsOmZ1bmN0aW9uKGUsYSl7Zm9yKHZhciBkPTA7CmQ8dGhpcy5nZXRfZWxlbWVudCgpLnJvd3MubGVuZ3RoOwpkKyspe3ZhciBmPXRoaXMuZ2V0X2VsZW1lbnQoKS5yb3dzW2RdOwppZighZi5pZCYmZi5wYXJlbnROb2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09InRib2R5Iil7Y29udGludWU7Cn1pZih0aGlzLl9oYXNNdWx0aUhlYWRlcnMmJmYuY2xhc3NOYW1lLmluZGV4T2YoInJnTXVsdGlIZWFkZXJSb3ciKT4tMSl7Y29udGludWU7Cn12YXIgYj10aGlzLl9nZXRDZWxsQnlDb2x1bW5VbmlxdWVOYW1lRnJvbVRhYmxlUm93RWxlbWVudChmLGUpOwp2YXIgYz10aGlzLl9nZXRDZWxsQnlDb2x1bW5VbmlxdWVOYW1lRnJvbVRhYmxlUm93RWxlbWVudChmLGEpOwppZighYnx8IWMpe2NvbnRpbnVlOwp9dGhpcy5fcmVvcmRlckNvbnRyb2xzKGIsYyk7Cn19LF9yZW9yZGVyQ29udHJvbHM6ZnVuY3Rpb24oZixoKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKdmFyIGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7CmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYik7CnRoaXMuX21vdmVOb2RlcyhmLGIpOwp0aGlzLl9tb3ZlTm9kZXMoaCxhKTsKdmFyIGc9Zi5zdHlsZS5jc3NUZXh0Owp2YXIgZD1oLnN0eWxlLmNzc1RleHQ7CnZhciBjPWYuY2xhc3NOYW1lOwp2YXIgZT1oLmNsYXNzTmFtZTsKZi5pbm5lckhUTUw9aC5pbm5lckhUTUw9IiI7CnRoaXMuX21vdmVOb2RlcyhiLGgpOwp0aGlzLl9tb3ZlTm9kZXMoYSxmKTsKdGhpcy5fcmVjcmVhdGVDb250cm9scyhmKTsKdGhpcy5fcmVjcmVhdGVDb250cm9scyhoKTsKZi5zdHlsZS5jc3NUZXh0PWQ7Cmguc3R5bGUuY3NzVGV4dD1nOwpmLmNsYXNzTmFtZT1lOwpoLmNsYXNzTmFtZT1jOwphLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSk7CmIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKTsKfSxfbW92ZU5vZGVzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5jaGlsZE5vZGVzOwp3aGlsZShjLmxlbmd0aD4wKXtiLmFwcGVuZENoaWxkKGNbMF0pOwp9fSxfcmVjcmVhdGVDb250cm9sczpmdW5jdGlvbihjKXt2YXIgYj1jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIik7CmZvcih2YXIgZD0wLGY9Yi5sZW5ndGg7CmQ8ZjsKZCsrKXt2YXIgYT1iW2RdOwppZih0eXBlb2YoYS5pZCkhPSJ1bmRlZmluZWQiJiZhLmlkIT0iIil7dmFyIGU9JGZpbmQoYS5pZCk7CmlmKCFlKXtjb250aW51ZTsKfWUuX2VsZW1lbnQ9JGdldChhLmlkKTsKfX19LGdldENvbHVtbkJ5VW5pcXVlTmFtZTpmdW5jdGlvbihiKXtmb3IodmFyIGE9MDsKYTx0aGlzLmdldF9jb2x1bW5zKCkubGVuZ3RoOwphKyspe2lmKHRoaXMuZ2V0X2NvbHVtbnMoKVthXS5nZXRfZWxlbWVudCgpLlVuaXF1ZU5hbWU9PWIpe3JldHVybiB0aGlzLmdldF9jb2x1bW5zKClbYV07Cn19cmV0dXJuIG51bGw7Cn0sZ2V0Q2VsbEJ5Q29sdW1uVW5pcXVlTmFtZTpmdW5jdGlvbihhLGMpe2Zvcih2YXIgYj0wOwpiPHRoaXMuZ2V0X2NvbHVtbnMoKS5sZW5ndGg7CmIrKyl7aWYodGhpcy5nZXRfY29sdW1ucygpW2JdLmdldF9lbGVtZW50KCkuVW5pcXVlTmFtZS50b1VwcGVyQ2FzZSgpPT1jLnRvVXBwZXJDYXNlKCkpe3JldHVybiBhLmdldF9lbGVtZW50KCkuY2VsbHNbYl07Cn19cmV0dXJuIG51bGw7Cn0sX2dldENlbGxCeUNvbHVtblVuaXF1ZU5hbWVGcm9tVGFibGVSb3dFbGVtZW50OmZ1bmN0aW9uKGEsYyl7Zm9yKHZhciBiPTA7CmI8dGhpcy5nZXRfY29sdW1ucygpLmxlbmd0aDsKYisrKXtpZih0aGlzLmdldF9jb2x1bW5zKClbYl0uZ2V0X2VsZW1lbnQoKS5VbmlxdWVOYW1lLnRvVXBwZXJDYXNlKCk9PWMudG9VcHBlckNhc2UoKSl7cmV0dXJuIGEuY2VsbHNbYl07Cn19cmV0dXJuIG51bGw7Cn0sX2dldENlbGxJbmRleEJ5Q29sdW1uVW5pcXVlTmFtZUZyb21UYWJsZVJvd0VsZW1lbnQ6ZnVuY3Rpb24oYSxjKXtpZighY3x8Yz09IiIpe3JldHVybiBudWxsOwp9Zm9yKHZhciBiPTA7CmI8dGhpcy5nZXRfY29sdW1ucygpLmxlbmd0aDsKYisrKXtpZih0aGlzLmdldF9jb2x1bW5zKClbYl0uZ2V0X2VsZW1lbnQoKS5VbmlxdWVOYW1lLnRvVXBwZXJDYXNlKCk9PWMudG9VcHBlckNhc2UoKSl7cmV0dXJuIGI7Cn19cmV0dXJuIG51bGw7Cn0sZ2V0Q29sdW1uVW5pcXVlTmFtZUJ5Q2VsbEluZGV4OmZ1bmN0aW9uKGIsYSl7Zm9yKHZhciBjPTA7CmM8Yi5jZWxscy5sZW5ndGg7CmMrKyl7aWYoYi5jZWxsc1tjXS5VbmlxdWVOYW1lJiZjPT1hKXtyZXR1cm4gYi5jZWxsc1tjXS5VbmlxdWVOYW1lOwp9fXJldHVybiBudWxsOwp9LF9zbGlkZXJDbGllbnRWYWx1ZUNoYW5nZWQ6ZnVuY3Rpb24oYyxlKXt2YXIgYT0kZ2V0KGMpOwp2YXIgZD0kZmluZChlKTsKaWYoYSYmZCl7dmFyIGI9ZC5nZXRfdmFsdWUoKTsKdGhpcy5fYXBwbHlQYWdlckxhYmVsVGV4dChhLGIsdGhpcy5nZXRfcGFnZUNvdW50KCkpOwp9fSxfYXBwbHlQYWdlckxhYmVsVGV4dDpmdW5jdGlvbihjLGcsaCl7dmFyIGY9dGhpcy5fb3duZXIuQ2xpZW50U2V0dGluZ3MuQ2xpZW50TWVzc2FnZXMuUGFnZXJUb29sdGlwRm9ybWF0U3RyaW5nOwp2YXIgYj0vXHswW15cfV0qXH0vZzsKdmFyIGE9L1x7MVteXH1dKlx9L2c7CnZhciBkPSgoZz09MCk/MTpnKzEpOwp2YXIgZT1oOwpmPWYucmVwbGFjZShiLGQpLnJlcGxhY2UoYSxlKTsKYy5pbm5lckhUTUw9ZjsKfSxyZXNpemVJdGVtOmZ1bmN0aW9uKGksYyxiKXtpZighdGhpcy5fb3duZXIuQ2xpZW50U2V0dGluZ3MuUmVzaXppbmcuQWxsb3dSb3dSZXNpemUpe3JldHVybjsKfXZhciBlPXRoaXMuZ2V0X2VsZW1lbnQoKS5yb3dzW2ldOwppZihlJiZlLmlkIT0iIiYmZS5pZC5zcGxpdCgiX18iKS5sZW5ndGg9PTIpe3ZhciBoPW5ldyBUZWxlcmlrLldlYi5VSS5HcmlkRGF0YUl0ZW1DYW5jZWxFdmVudEFyZ3MoZSxudWxsKTsKdGhpcy5fb3duZXIucmFpc2Vfcm93UmVzaXppbmcoaCk7CmlmKGguZ2V0X2NhbmNlbCgpKXtyZXR1cm4gZmFsc2U7Cn19dmFyIGc9dGhpcy5nZXRfZWxlbWVudCgpLnN0eWxlLnRhYmxlTGF5b3V0Owp0aGlzLmdldF9lbGVtZW50KCkuc3R5bGUudGFibGVMYXlvdXQ9IiI7CnZhciBmPXRoaXMuZ2V0X2VsZW1lbnQoKS5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlOwp2YXIgaj0kZmluZChmLmlkKTsKdmFyIGQ7CmlmKGohPW51bGwpe2Q9ai5nZXRfZWxlbWVudCgpLnN0eWxlLnRhYmxlTGF5b3V0OwpqLmdldF9lbGVtZW50KCkuc3R5bGUudGFibGVMYXlvdXQ9IiI7Cn1pZighYil7aWYodGhpcy5nZXRfZWxlbWVudCgpKXtpZih0aGlzLmdldF9lbGVtZW50KCkucm93c1tpXSl7aWYodGhpcy5nZXRfZWxlbWVudCgpLnJvd3NbaV0uY2VsbHNbMF0pe3RoaXMuZ2V0X2VsZW1lbnQoKS5yb3dzW2ldLmNlbGxzWzBdLnN0eWxlLmhlaWdodD1jKyJweCI7CnRoaXMuZ2V0X2VsZW1lbnQoKS5yb3dzW2ldLnN0eWxlLmhlaWdodD1jKyJweCI7Cn19fX1lbHNle2lmKHRoaXMuZ2V0X2VsZW1lbnQoKSl7aWYodGhpcy5nZXRfZWxlbWVudCgpLnRCb2RpZXNbMF0pe2lmKHRoaXMuZ2V0X2VsZW1lbnQoKS50Qm9kaWVzWzBdLnJvd3NbaV0pe2lmKHRoaXMuZ2V0X2VsZW1lbnQoKS50Qm9kaWVzWzBdLnJvd3NbaV0uY2VsbHNbMF0pe3RoaXMuZ2V0X2VsZW1lbnQoKS50Qm9kaWVzWzBdLnJvd3NbaV0uY2VsbHNbMF0uc3R5bGUuaGVpZ2h0PWMrInB4IjsKdGhpcy5nZXRfZWxlbWVudCgpLnRCb2RpZXNbMF0ucm93c1tpXS5zdHlsZS5oZWlnaHQ9YysicHgiOwp9fX19fXRoaXMuZ2V0X2VsZW1lbnQoKS5zdHlsZS50YWJsZUxheW91dD1nOwppZihqIT1udWxsKXtqLmdldF9lbGVtZW50KCkuc3R5bGUudGFibGVMYXlvdXQ9ZDsKfWlmKGUmJmUuaWQhPSIiJiZlLmlkLnNwbGl0KCJfXyIpLmxlbmd0aD09Mil7dmFyIGE9ZS5pZC5zcGxpdCgiX18iKVsxXTsKdmFyIGs9dGhpcy5fcmVzaXplZEl0ZW1zRGF0YTsKay5hZGQoU3RyaW5nLmZvcm1hdCgiezB9LHsxfSIsdGhpcy5nZXRfaWQoKSxhKSxjKTsKdGhpcy5fb3duZXIuX3Jlc2l6ZWRJdGVtcz1rLnRvU3RyaW5nKCk7CnRoaXMuX293bmVyLnJhaXNlX3Jvd1Jlc2l6ZWQobmV3IFRlbGVyaWsuV2ViLlVJLkdyaWREYXRhSXRlbUV2ZW50QXJncyhlLG51bGwpKTsKfXRoaXMuX293bmVyLnVwZGF0ZUNsaWVudFN0YXRlKCk7Cn0scmVzaXplQ29sdW1uOmZ1bmN0aW9uKGwsYil7dmFyIHI9ZmFsc2U7CmlmKCgkdGVsZXJpay5pc0lFN3x8JHRlbGVyaWsuaXNJRTYpJiYhJHRlbGVyaWsucXVpcmtzTW9kZSl7dmFyIGs9dGhpcy5nZXRfY29sdW1ucygpW2xdLmdldF9lbGVtZW50KCk7CnZhciBpPXBhcnNlSW50KCR0ZWxlcmlrLmdldEN1cnJlbnRTdHlsZShrLCJib3JkZXJMZWZ0V2lkdGgiLDApLDEwKStwYXJzZUludCgkdGVsZXJpay5nZXRDdXJyZW50U3R5bGUoaywicGFkZGluZ0xlZnQiLDApLDEwKStwYXJzZUludCgkdGVsZXJpay5nZXRDdXJyZW50U3R5bGUoaywicGFkZGluZ1JpZ2h0IiwwKSwxMCkrcGFyc2VJbnQoJHRlbGVyaWsuZ2V0Q3VycmVudFN0eWxlKGssImJvcmRlclJpZ2h0V2lkdGgiLDApLDEwKTsKaWYoYj5pKXtiLT1pOwpyPXRydWU7Cn19aWYoIXRoaXMuX3ZhbGlkYXRlUmVzaXplQ29sdW1uUGFyYW1zKGwsYikpe3JldHVybjsKfWlmKHR5cGVvZihsKT09InN0cmluZyIpe2w9cGFyc2VJbnQobCk7Cn12YXIgZj1uZXcgVGVsZXJpay5XZWIuVUkuR3JpZENvbHVtbkNhbmNlbEV2ZW50QXJncyh0aGlzLmdldF9jb2x1bW5zKClbbF0sbnVsbCk7CnRoaXMuX293bmVyLnJhaXNlX2NvbHVtblJlc2l6aW5nKGYpOwppZihmLmdldF9jYW5jZWwoKSl7cmV0dXJuIGZhbHNlOwp9dmFyIGU9dGhpcy5nZXRfZWxlbWVudCgpLm9mZnNldFdpZHRoOwp2YXIgZD10aGlzLl9vd25lci5nZXRfZWxlbWVudCgpLm9mZnNldFdpZHRoLXBhcnNlSW50KCR0ZWxlcmlrLmdldEN1cnJlbnRTdHlsZSh0aGlzLl9vd25lci5nZXRfZWxlbWVudCgpLCJib3JkZXJMZWZ0V2lkdGgiLDApKS1wYXJzZUludCgkdGVsZXJpay5nZXRDdXJyZW50U3R5bGUodGhpcy5fb3duZXIuZ2V0X2VsZW1lbnQoKSwiYm9yZGVyUmlnaHRXaWR0aCIsMCkpOwppZih0aGlzPT10aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3KCkmJnRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXdIZWFkZXIoKSl7dGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0hlYWRlcigpLnJlc2l6ZUNvbHVtbihsLGIpOwp9aWYodGhpcy5IZWFkZXJSb3cpe3ZhciBvPWw7CmlmKCR0ZWxlcmlrLmlzSUU3fHwkdGVsZXJpay5pc0lFNil7dmFyIGg9MDsKdmFyIG09MDsKZm9yKHZhciBwPTA7CnA8dGhpcy5IZWFkZXJSb3cuY2VsbHMubGVuZ3RoOwpwKyspe2lmKHRoaXMuSGVhZGVyUm93LmNlbGxzW3BdLnN0eWxlLmRpc3BsYXk9PSJub25lIil7aCsrOwp9ZWxzZXttKys7CmlmKG09PWwrMSl7YnJlYWs7Cn19fW89cGFyc2VJbnQoaCttKS0xOwp9dmFyIGM9dGhpcy5IZWFkZXJSb3cuY2VsbHNbb10ub2Zmc2V0V2lkdGgtYjsKaWYoKCR0ZWxlcmlrLmlzSUU3fHwkdGVsZXJpay5pc0lFNikmJiEkdGVsZXJpay5xdWlya3NNb2RlJiZyKXtjLT1pOwp9fWlmKCgkdGVsZXJpay5pc0ZpcmVmb3gyJiZ0aGlzLmdldF9lbGVtZW50KCkuc3R5bGUudGFibGVMYXlvdXQ9PSJmaXhlZCIpfHwkdGVsZXJpay5pc1NhZmFyaSl7aWYodGhpcy5IZWFkZXJSb3cpe2lmKHRoaXMuSGVhZGVyUm93LmNlbGxzW2xdKXt0aGlzLkhlYWRlclJvdy5jZWxsc1tsXS5zdHlsZS53aWR0aD1iKyJweCI7Cn19aWYodGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0hlYWRlcigpJiYodGhpcy5nZXRfaWQoKT09dGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0hlYWRlcigpLmdldF9pZCgpKSl7dmFyIGE9dGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlldygpLmdldF9lbGVtZW50KCkudEJvZGllc1swXS5yb3dzW3RoaXMuX293bmVyLkNsaWVudFNldHRpbmdzLkZpcnN0RGF0YVJvd0NsaWVudFJvd0luZGV4XTsKaWYoYSl7aWYoYS5jZWxsc1tsXSl7YS5jZWxsc1tsXS5zdHlsZS53aWR0aD1iKyJweCI7Cn19aWYodGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0Zvb3RlcigpJiZ0aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3Rm9vdGVyKCkuZ2V0X2VsZW1lbnQoKSl7aWYodGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0Zvb3RlcigpLmdldF9lbGVtZW50KCkudEJvZGllc1swXS5yb3dzWzBdJiZ0aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3Rm9vdGVyKCkuZ2V0X2VsZW1lbnQoKS50Qm9kaWVzWzBdLnJvd3NbMF0uY2VsbHNbbF0pe2lmKGI+MCl7dGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0Zvb3RlcigpLmdldF9lbGVtZW50KCkudEJvZGllc1swXS5yb3dzWzBdLmNlbGxzW2xdLnN0eWxlLndpZHRoPWIrInB4IjsKfX19fX1pZih0aGlzLkNvbEdyb3VwKXtpZih0aGlzLkNvbEdyb3VwLkNvbHNbbF0pe2lmKGI+MCl7dGhpcy5Db2xHcm91cC5Db2xzW2xdLnN0eWxlLndpZHRoPWIrInB4IjsKfX19aWYodGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0hlYWRlcigpJiYodGhpcy5nZXRfaWQoKT09dGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0hlYWRlcigpLmdldF9pZCgpKSl7aWYodGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlldygpLkNvbEdyb3VwKXtpZih0aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3KCkuQ29sR3JvdXAuQ29sc1tsXSl7aWYoYj4wKXt0aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3KCkuQ29sR3JvdXAuQ29sc1tsXS5zdHlsZS53aWR0aD1iKyJweCI7Cn19fWlmKHRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXdGb290ZXIoKSYmdGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0Zvb3RlcigpLkNvbEdyb3VwKXtpZih0aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3Rm9vdGVyKCkuQ29sR3JvdXAuQ29sc1tsXSl7aWYoYj4wKXt0aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3Rm9vdGVyKCkuQ29sR3JvdXAuQ29sc1tsXS5zdHlsZS53aWR0aD1iKyJweCI7Cn19fX1pZihiLnRvU3RyaW5nKCkuaW5kZXhPZigicHgiKSE9LTEpe2I9Yi5yZXBsYWNlKCJweCIsIiIpOwp9aWYoYi50b1N0cmluZygpLmluZGV4T2YoIiUiKT09LTEpe2I9YisicHgiOwp9dmFyIG49dGhpcy5fcmVzaXplZENvbHVtbnNEYXRhOwpuLmFkZChTdHJpbmcuZm9ybWF0KCJ7MH0sezF9Iix0aGlzLl9kYXRhLlVuaXF1ZUlELHRoaXMuZ2V0X2NvbHVtbnMoKVtsXS5nZXRfdW5pcXVlTmFtZSgpKSxiKTsKdmFyIHE9bi50b1N0cmluZygpOwp0aGlzLl9vd25lci5fcmVzaXplZENvbHVtbnM9cTsKdGhpcy5fb3duZXIudXBkYXRlQ2xpZW50U3RhdGUoKTsKaWYodGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0hlYWRlcigpKXt0aGlzLl9vd25lci5DbGllbnRTZXR0aW5ncy5SZXNpemluZy5SZXNpemVHcmlkT25Db2x1bW5SZXNpemU9dHJ1ZTsKfWlmKHRoaXMuX293bmVyLkNsaWVudFNldHRpbmdzLlJlc2l6aW5nLlJlc2l6ZUdyaWRPbkNvbHVtblJlc2l6ZSl7aWYoYyE9bnVsbCl7dGhpcy5fcmVzaXplR3JpZE9uQ29sdW1uUmVzaXplKGwsYyxlKTsKfX1lbHNle3RoaXMuX25vUmVzaXplR3JpZE9uQ29sdW1uUmVzaXplKGUsbCxkKTsKfWlmKHRoaXMuX293bmVyLkdyb3VwUGFuZWxPYmplY3QmJnRoaXMuX293bmVyLkdyb3VwUGFuZWxPYmplY3QuSXRlbXMubGVuZ3RoPjAmJm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKCJtc2llIikhPS0xKXtpZih0aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3KCkmJnRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXdIZWFkZXIoKSl7dGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlldygpLmdldF9lbGVtZW50KCkuc3R5bGUud2lkdGg9dGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0hlYWRlcigpLmdldF9lbGVtZW50KCkub2Zmc2V0V2lkdGgrInB4IjsKfX12YXIgZj1uZXcgVGVsZXJpay5XZWIuVUkuR3JpZENvbHVtbkV2ZW50QXJncyh0aGlzLmdldF9jb2x1bW5zKClbbF0sbnVsbCk7CnRoaXMuX293bmVyLnJhaXNlX2NvbHVtblJlc2l6ZWQoZik7CmlmKHdpbmRvdy5uZXRzY2FwZSl7dGhpcy5nZXRfZWxlbWVudCgpLnN0eWxlLmNzc1RleHQ9dGhpcy5nZXRfZWxlbWVudCgpLnN0eWxlLmNzc1RleHQ7Cn1pZigkZ2V0KHRoaXMuX293bmVyLkNsaWVudElEKyJfRnJvemVuIikmJmMhPW51bGwpe3ZhciBnPSRnZXQodGhpcy5fb3duZXIuQ2xpZW50SUQrIl9Gcm96ZW5TY3JvbGwiKTsKZy5zdHlsZS53aWR0aD1nLm9mZnNldFdpZHRoLWMrInB4IjsKfX0sX3Jlc2l6ZUdyaWRPbkNvbHVtblJlc2l6ZTpmdW5jdGlvbihrLGIsZCl7dmFyIHA7CnZhciBsOwp2YXIgbjsKaWYodGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0hlYWRlcigpJiYodGhpcy5nZXRfaWQoKT09dGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0hlYWRlcigpLmdldF9pZCgpKSl7dGhpcy5nZXRfZWxlbWVudCgpLnN0eWxlLndpZHRoPShkLWIpKyJweCI7CnRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXcoKS5nZXRfZWxlbWVudCgpLnN0eWxlLndpZHRoPXRoaXMuZ2V0X2VsZW1lbnQoKS5zdHlsZS53aWR0aDsKZm9yKHZhciBxPTA7CnE8dGhpcy5Db2xHcm91cC5Db2xzLmxlbmd0aDsKcSsrKXtpZihxIT1rJiZ0aGlzLkNvbEdyb3VwLkNvbHNbcV0uc3R5bGUud2lkdGg9PSIiKXt2YXIgcz1xOwppZigkdGVsZXJpay5pc0lFN3x8JHRlbGVyaWsuaXNJRTYpe3ZhciBlPTA7CnZhciByPTA7CmZvcih2YXIgbz0wOwpvPHRoaXMuSGVhZGVyUm93LmNlbGxzLmxlbmd0aDsKbysrKXtpZih0aGlzLkhlYWRlclJvdy5jZWxsc1tvXS5zdHlsZS5kaXNwbGF5PT0ibm9uZSIpe2UrKzsKfWVsc2V7cisrOwppZihyPT1xKzEpe2JyZWFrOwp9fX1zPXBhcnNlSW50KGUrciktMTsKfWlmKHRoaXMuSGVhZGVyUm93LmNlbGxzW3NdLnN0eWxlLmRpc3BsYXkhPSJub25lIil7dmFyIGY9dGhpcy5IZWFkZXJSb3cuY2VsbHNbc10ub2Zmc2V0V2lkdGg7CmlmKCgkdGVsZXJpay5pc0lFN3x8JHRlbGVyaWsuaXNJRTYpJiYhJHRlbGVyaWsucXVpcmtzTW9kZSl7dmFyIGg9dGhpcy5IZWFkZXJSb3cuY2VsbHNbc107CnZhciBnPXBhcnNlSW50KCR0ZWxlcmlrLmdldEN1cnJlbnRTdHlsZShoLCJib3JkZXJMZWZ0V2lkdGgiLDApLDEwKStwYXJzZUludCgkdGVsZXJpay5nZXRDdXJyZW50U3R5bGUoaCwicGFkZGluZ0xlZnQiLDApLDEwKStwYXJzZUludCgkdGVsZXJpay5nZXRDdXJyZW50U3R5bGUoaCwicGFkZGluZ1JpZ2h0IiwwKSwxMCkrcGFyc2VJbnQoJHRlbGVyaWsuZ2V0Q3VycmVudFN0eWxlKGgsImJvcmRlclJpZ2h0V2lkdGgiLDApLDEwKTsKaWYoZj5nKXtmLT1nOwp9fXRoaXMuQ29sR3JvdXAuQ29sc1txXS5zdHlsZS53aWR0aD1mKyJweCI7CnRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXcoKS5Db2xHcm91cC5Db2xzW3FdLnN0eWxlLndpZHRoPXRoaXMuQ29sR3JvdXAuQ29sc1txXS5zdHlsZS53aWR0aDsKaWYodGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0Zvb3RlcigpJiZ0aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3Rm9vdGVyKCkuQ29sR3JvdXApe3RoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXdGb290ZXIoKS5Db2xHcm91cC5Db2xzW3FdLnN0eWxlLndpZHRoPXRoaXMuQ29sR3JvdXAuQ29sc1txXS5zdHlsZS53aWR0aDsKfX19fWlmKHRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXdGb290ZXIoKSYmdGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0Zvb3RlcigpLmdldF9lbGVtZW50KCkpe3RoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXdGb290ZXIoKS5nZXRfZWxlbWVudCgpLnN0eWxlLndpZHRoPXRoaXMuZ2V0X2VsZW1lbnQoKS5zdHlsZS53aWR0aDsKfXZhciBjPSh0aGlzLmdldF9lbGVtZW50KCkuc2Nyb2xsV2lkdGg+dGhpcy5nZXRfZWxlbWVudCgpLm9mZnNldFdpZHRoKT90aGlzLmdldF9lbGVtZW50KCkuc2Nyb2xsV2lkdGg6dGhpcy5nZXRfZWxlbWVudCgpLm9mZnNldFdpZHRoOwp2YXIgbT10aGlzLl9vd25lci5fZ3JpZERhdGFEaXYub2Zmc2V0V2lkdGg7CnA9YysicHgiOwpsPW0rInB4IjsKbj10aGlzLl9vd25lci5nZXRfZWxlbWVudCgpLm9mZnNldEhlaWdodCsicHgiOwp9ZWxzZXtpZih0aGlzLmdldF9lbGVtZW50KCkub2Zmc2V0V2lkdGg8PXRoaXMuX293bmVyLmdldF9lbGVtZW50KCkub2Zmc2V0V2lkdGgpe3RoaXMuZ2V0X2VsZW1lbnQoKS5zdHlsZS53aWR0aD0odGhpcy5nZXRfZWxlbWVudCgpLm9mZnNldFdpZHRoLWIpKyJweCI7Cn1lbHNle3RoaXMuZ2V0X2VsZW1lbnQoKS5zdHlsZS53aWR0aD10aGlzLmdldF9lbGVtZW50KCkub2Zmc2V0V2lkdGgrInB4IjsKfXRoaXMuX293bmVyLmdldF9lbGVtZW50KCkuc3R5bGUud2lkdGg9dGhpcy5nZXRfZWxlbWVudCgpLnN0eWxlLndpZHRoOwp2YXIgYz0odGhpcy5nZXRfZWxlbWVudCgpLnNjcm9sbFdpZHRoPnRoaXMuZ2V0X2VsZW1lbnQoKS5vZmZzZXRXaWR0aCk/dGhpcy5nZXRfZWxlbWVudCgpLnNjcm9sbFdpZHRoOnRoaXMuZ2V0X2VsZW1lbnQoKS5vZmZzZXRXaWR0aDsKcD1jKyJweCI7Cmw9dGhpcy5fb3duZXIuZ2V0X2VsZW1lbnQoKS5vZmZzZXRXaWR0aCsicHgiOwpuPXRoaXMuX293bmVyLmdldF9lbGVtZW50KCkub2Zmc2V0SGVpZ2h0KyJweCI7Cn12YXIgYT10aGlzLl9yZXNpemVkQ29udHJvbERhdGE7CmEuYWRkKHRoaXMuX2RhdGEuVW5pcXVlSUQsU3RyaW5nLmZvcm1hdCgiezB9LHsxfSx7Mn0iLHAsbCxuKSk7CnRoaXMuX293bmVyLl9yZXNpemVkQ29udHJvbD1hLnRvU3RyaW5nKCk7CnRoaXMuX293bmVyLnVwZGF0ZUNsaWVudFN0YXRlKCk7Cn0sX25vUmVzaXplR3JpZE9uQ29sdW1uUmVzaXplOmZ1bmN0aW9uKGQsZSxjKXt2YXIgYj0odGhpcy5nZXRfZWxlbWVudCgpLm9mZnNldFdpZHRoLWMpL3RoaXMuQ29sR3JvdXAuQ29scy5sZW5ndGg7CnZhciBmPSIiOwpmb3IodmFyIGE9ZSsxOwphPHRoaXMuQ29sR3JvdXAuQ29scy5sZW5ndGg7CmErKyl7dmFyIGc9MDsKaWYodGhpcy5Db2xHcm91cC5Db2xzW2FdLnN0eWxlLndpZHRoIT0iIil7Zz1wYXJzZUludCh0aGlzLkNvbEdyb3VwLkNvbHNbYV0uc3R5bGUud2lkdGgpLWI7Cn1pZih0aGlzLkhlYWRlclJvdyl7Zz10aGlzLkhlYWRlclJvdy5jZWxsc1thXS5zY3JvbGxXaWR0aC1iOwp9dGhpcy5IZWFkZXJSb3cuY2VsbHNbYV0uc3R5bGUud2lkdGg9IiI7CnRoaXMuQ29sR3JvdXAuQ29sc1thXS5zdHlsZS53aWR0aD0iIjsKaWYodGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0hlYWRlcigpJiZ0aGlzLmdldF9pZCgpPT10aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3SGVhZGVyKCkuZ2V0X2lkKCkpe3RoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXcoKS5Db2xHcm91cC5Db2xzW2FdLnN0eWxlLndpZHRoPSIiOwp0aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3SGVhZGVyKCkuZ2V0X2VsZW1lbnQoKS5jZWxsc1thXS5zdHlsZS53aWR0aD0iIjsKfWlmKHRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXdGb290ZXIoKSl7dGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0Zvb3RlcigpLkNvbEdyb3VwLkNvbHNbYV0uc3R5bGUud2lkdGg9IiI7CnRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXdGb290ZXIoKS5nZXRfZWxlbWVudCgpLmNlbGxzW2FdLnN0eWxlLndpZHRoPSIiOwp9fWlmKGM+MCl7dGhpcy5fb3duZXIuZ2V0X2VsZW1lbnQoKS5zdHlsZS53aWR0aD1jKyJweCI7Cn10aGlzLmdldF9lbGVtZW50KCkuc3R5bGUud2lkdGg9ZCsicHgiOwppZih0aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3SGVhZGVyKCkmJnRoaXMuZ2V0X2lkKCk9PXRoaXMuX293bmVyLmdldF9tYXN0ZXJUYWJsZVZpZXdIZWFkZXIoKS5nZXRfaWQoKSl7dGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlldygpLmdldF9lbGVtZW50KCkuc3R5bGUud2lkdGg9dGhpcy5nZXRfZWxlbWVudCgpLnN0eWxlLndpZHRoOwp9aWYodGhpcy5fb3duZXIuZ2V0X21hc3RlclRhYmxlVmlld0Zvb3RlcigpKXt0aGlzLl9vd25lci5nZXRfbWFzdGVyVGFibGVWaWV3Rm9vdGVyKCkuZ2V0X2VsZW1lbnQoKS5zdHlsZS53aWR0aD10aGlzLmdldF9lbGVtZW50KCkuc3R5bGUud2lkdGg7Cn19LF92YWxpZGF0ZVJlc2l6ZUNvbHVtblBhcmFtczpmdW5jdGlvbihiLGMpe2lmKGlzTmFOKHBhcnNlSW50KGIpKSl7dmFyIGE9J0NvbHVtbiBpbmRleCBtdXN0IGJlIG9mIHR5cGUgIk51bWJlciIhJzsKYWxlcnQoYSk7CnJldHVybiBmYWxzZTsKfWlmKGlzTmFOKHBhcnNlSW50KGMpKSl7dmFyIGE9J0NvbHVtbiB3aWR0aCBtdXN0IGJlIG9mIHR5cGUgIk51bWJlciIhJzsKYWxlcnQoYSk7CnJldHVybiBmYWxzZTsKfWlmKGI8MCl7dmFyIGE9IkNvbHVtbiBpbmRleCBtdXN0IGJlIG5vbi1uZWdhdGl2ZSEiOwphbGVydChhKTsKcmV0dXJuIGZhbHNlOwp9aWYoYzwwKXt2YXIgYT0iQ29sdW1uIHdpZHRoIG11c3QgYmUgbm9uLW5lZ2F0aXZlISI7CmFsZXJ0KGEpOwpyZXR1cm4gZmFsc2U7Cn1pZihiPih0aGlzLmdldF9jb2x1bW5zKCkubGVuZ3RoLTEpKXt2YXIgYT0iQ29sdW1uIGluZGV4IG11c3QgYmUgbGVzcyB0aGFuIGNvbHVtbnMgY291bnQhIjsKYWxlcnQoYSk7CnJldHVybiBmYWxzZTsKfWlmKCF0aGlzLl9vd25lci5DbGllbnRTZXR0aW5ncy5SZXNpemluZy5BbGxvd0NvbHVtblJlc2l6ZSl7cmV0dXJuIGZhbHNlOwp9aWYoIXRoaXMuZ2V0X2NvbHVtbnMoKSl7cmV0dXJuIGZhbHNlOwp9aWYoIXRoaXMuZ2V0X2NvbHVtbnMoKVtiXS5nZXRfcmVzaXphYmxlKCkpe3JldHVybiBmYWxzZTsKfXJldHVybiB0cnVlOwp9LHJlc2l6ZUNvbHVtblRvRml0OmZ1bmN0aW9uKGEpe2lmKHR5cGVvZihhKT09PSJzdHJpbmciKXthPXRoaXMuZ2V0Q29sdW1uQnlVbmlxdWVOYW1lKGEpOwp9aWYodHlwZW9mKGEpPT09Im51bWJlciIpe2E9dGhpcy5nZXRfY29sdW1ucygpW2FdOwp9aWYodHlwZW9mKGEpPT09Im9iamVjdCImJmEucmVzaXplVG9GaXQpe2EucmVzaXplVG9GaXQoKTsKfX0sZ2V0X2FsbG93UGFnaW5nOmZ1bmN0aW9uKCl7cmV0dXJuICEhdGhpcy5fZGF0YS5BbGxvd1BhZ2luZzsKfSxnZXRfcGFnZUNvdW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuUGFnZUNvdW50Owp9LGdldF9wYWdlU2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLlBhZ2VTaXplOwp9LHNldF9wYWdlU2l6ZTpmdW5jdGlvbihhKXtpZih0aGlzLlBhZ2VTaXplIT1hKXt0aGlzLlBhZ2VTaXplPWE7CnRoaXMuc2V0X2N1cnJlbnRQYWdlSW5kZXgoMCx0cnVlKTsKdGhpcy5maXJlQ29tbWFuZCgiUGFnZVNpemUiLGEpOwp0aGlzLl91cGRhdGVQYWdlcigpOwp9fSxnZXRfdmlydHVhbEl0ZW1Db3VudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92aXJ0dWFsSXRlbUNvdW50Owp9LHNldF92aXJ0dWFsSXRlbUNvdW50OmZ1bmN0aW9uKGEpe2lmKHRoaXMuX3ZpcnR1YWxJdGVtQ291bnQhPWF8fGE9PT0wKXt0aGlzLl92aXJ0dWFsSXRlbUNvdW50PWE7CmlmKGE9PTAmJighdGhpcy5fZGF0YVNvdXJjZXx8dGhpcy5fZGF0YVNvdXJjZS5sZW5ndGg9PTApKXt0aGlzLnNldF9jdXJyZW50UGFnZUluZGV4KDAsdHJ1ZSk7Cn1lbHNle3RoaXMuc2V0X2N1cnJlbnRQYWdlSW5kZXgoMCxmYWxzZSk7Cn10aGlzLl91cGRhdGVQYWdlcigpOwp0aGlzLl9pbml0aWFsaXplVmlydHVhbFNjcm9sbFBhZ2luZygpOwp9fSxzZXRfcGFnZUJ1dHRvbkNvdW50OmZ1bmN0aW9uKGEpe3RoaXMuX3BhZ2VCdXR0b25Db3VudD1hOwp0aGlzLl91cGRhdGVQYWdlcigpOwp9LGdldF9wYWdlQnV0dG9uQ291bnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFnZUJ1dHRvbkNvdW50Owp9LF9pbml0aWFsaXplVmlydHVhbFNjcm9sbFBhZ2luZzpmdW5jdGlvbigpe3ZhciBhPSRmaW5kKHRoaXMuZ2V0X293bmVyKCkuZ2V0X2lkKCkpOwppZihhLl9zY3JvbGxpbmcpe2EuX3Njcm9sbGluZy5faW5pdGlhbGl6ZVZpcnR1YWxTY3JvbGxQYWdpbmcodHJ1ZSk7Cn19LF91cGRhdGVQYWdlcjpmdW5jdGlvbigpe3ZhciBhPU1hdGguY2VpbCh0aGlzLmdldF92aXJ0dWFsSXRlbUNvdW50KCkvdGhpcy5nZXRfcGFnZVNpemUoKSk7CnRoaXMuUGFnZUNvdW50PWE7CnZhciBjPVN0cmluZy5mb3JtYXQoInswfVBDTiIsdGhpcy5nZXRfaWQoKSk7CnZhciBiPVN0cmluZy5mb3JtYXQoInswfUZJUCIsdGhpcy5nZXRfaWQoKSk7CnZhciBlPVN0cmluZy5mb3JtYXQoInswfURTQyIsdGhpcy5nZXRfaWQoKSk7CnZhciBmPVN0cmluZy5mb3JtYXQoInswfUxJUCIsdGhpcy5nZXRfaWQoKSk7CnZhciBkPXRoaXMuX2RhdGEucGFnZU9mTGFiZWxDbGllbnRJRDsKdGhpcy5fcG9wdWxhdGVQYWdlclN0YXRzRWxlbWVudHMoYyxiLGYsZSxkKTsKYz1TdHJpbmcuZm9ybWF0KCJ7MH1QQ05Ub3AiLHRoaXMuZ2V0X2lkKCkpOwpiPVN0cmluZy5mb3JtYXQoInswfUZJUFRvcCIsdGhpcy5nZXRfaWQoKSk7CmU9U3RyaW5nLmZvcm1hdCgiezB9RFNDVG9wIix0aGlzLmdldF9pZCgpKTsKZj1TdHJpbmcuZm9ybWF0KCJ7MH1MSVBUb3AiLHRoaXMuZ2V0X2lkKCkpOwpkPXRoaXMuX2RhdGEucGFnZU9mTGFiZWxUb3BDbGllbnRJRDsKdGhpcy5fcG9wdWxhdGVQYWdlclN0YXRzRWxlbWVudHMoYyxiLGYsZSxkKTsKdGhpcy5fcmVmcmVzaFBhZ2VyU2xpZGVyKCk7CnRoaXMuX3JlZnJlc2hBZHZhbmNlZFBhZ2VUZXh0Qm94ZXMoKTsKdGhpcy5fcmVmcmVzaERyb3BEb3duUGFnZXIoKTsKdGhpcy5fZ2VuZXJhdGVOdW1lcmljUGFnZXIoKTsKdGhpcy5fc2V0UGFnZXJWaXNpYmlsaXR5KGE+MXx8dGhpcy5fZGF0YS5QYWdlckFsd2F5c1Zpc2libGUpOwp9LF9yZWZyZXNoUGFnZXJTbGlkZXI6ZnVuY3Rpb24oKXtpZih0aGlzLl9kYXRhLnNsaWRlckNsaWVudElEJiZ0aGlzLl9kYXRhLnNsaWRlckNsaWVudElEIT0iIil7dGhpcy5fc2V0U2xpZGVyVmFsdWUoJGZpbmQodGhpcy5fZGF0YS5zbGlkZXJDbGllbnRJRCksdGhpcy5nZXRfcGFnZUNvdW50KCksdGhpcy5fZGF0YS5zbGlkZXJMYWJlbENsaWVudElEKTsKfWlmKHRoaXMuX2RhdGEuc2xpZGVyVG9wQ2xpZW50SUQmJnRoaXMuX2RhdGEuc2xpZGVyVG9wQ2xpZW50SUQhPSIiKXt0aGlzLl9zZXRTbGlkZXJWYWx1ZSgkZmluZCh0aGlzLl9kYXRhLnNsaWRlclRvcENsaWVudElEKSx0aGlzLmdldF9wYWdlQ291bnQoKSx0aGlzLl9kYXRhLnNsaWRlclRvcExhYmVsQ2xpZW50SUQpOwp9fSxfcmVmcmVzaEFkdmFuY2VkUGFnZVRleHRCb3hlczpmdW5jdGlvbigpe2lmKHRoaXMuX2RhdGEuZ29Ub1BhZ2VUZXh0Qm94Q2xpZW50SUQmJnRoaXMuX2RhdGEuZ29Ub1BhZ2VUZXh0Qm94Q2xpZW50SUQhPSIiKXt0aGlzLl9zZXRUZXh0Qm94VmFsdWUoJGZpbmQodGhpcy5fZGF0YS5nb1RvUGFnZVRleHRCb3hDbGllbnRJRCksdGhpcy5QYWdlQ291bnR8fDEpOwp9aWYodGhpcy5fZGF0YS5nb1RvUGFnZVRleHRCb3hUb3BDbGllbnRJRCYmdGhpcy5fZGF0YS5nb1RvUGFnZVRleHRCb3hUb3BDbGllbnRJRCE9IiIpe3RoaXMuX3NldFRleHRCb3hWYWx1ZSgkZmluZCh0aGlzLl9kYXRhLmdvVG9QYWdlVGV4dEJveFRvcENsaWVudElEKSx0aGlzLlBhZ2VDb3VudHx8MSk7Cn1pZih0aGlzLl9kYXRhLmNoYW5nZVBhZ2VTaXplVGV4dEJveENsaWVudElEJiZ0aGlzLl9kYXRhLmNoYW5nZVBhZ2VTaXplVGV4dEJveENsaWVudElEIT0iIil7dGhpcy5fc2V0VGV4dEJveFZhbHVlKCRmaW5kKHRoaXMuX2RhdGEuY2hhbmdlUGFnZVNpemVUZXh0Qm94Q2xpZW50SUQpLHRoaXMuZ2V0X3ZpcnR1YWxJdGVtQ291bnQoKXx8MSx0aGlzLlBhZ2VTaXplKTsKfWlmKHRoaXMuX2RhdGEuY2hhbmdlUGFnZVNpemVUZXh0Qm94VG9wQ2xpZW50SUQmJnRoaXMuX2RhdGEuY2hhbmdlUGFnZVNpemVUZXh0Qm94VG9wQ2xpZW50SUQhPSIiKXt0aGlzLl9zZXRUZXh0Qm94VmFsdWUoJGZpbmQodGhpcy5fZGF0YS5jaGFuZ2VQYWdlU2l6ZVRleHRCb3hUb3BDbGllbnRJRCksdGhpcy5nZXRfdmlydHVhbEl0ZW1Db3VudCgpfHwxLHRoaXMuUGFnZVNpemUpOwp9fSxfcmVmcmVzaERyb3BEb3duUGFnZXI6ZnVuY3Rpb24oKXtpZih0aGlzLl9kYXRhLmNoYW5nZVBhZ2VTaXplQ29tYm9Cb3hUb3BDbGllbnRJRCYmdGhpcy5fZGF0YS5jaGFuZ2VQYWdlU2l6ZUNvbWJvQm94VG9wQ2xpZW50SUQhPSIiKXt0aGlzLl9zZXRDaGFuZ2VQYWdlQ29tYm9TZWxlY3RlZFZhbHVlKCRmaW5kKHRoaXMuX2RhdGEuY2hhbmdlUGFnZVNpemVDb21ib0JveFRvcENsaWVudElEKSx0aGlzLlBhZ2VTaXplKTsKfWlmKHRoaXMuX2RhdGEuY2hhbmdlUGFnZVNpemVDb21ib0JveENsaWVudElEJiZ0aGlzLl9kYXRhLmNoYW5nZVBhZ2VTaXplQ29tYm9Cb3hDbGllbnRJRCE9IiIpe3RoaXMuX3NldENoYW5nZVBhZ2VDb21ib1NlbGVjdGVkVmFsdWUoJGZpbmQodGhpcy5fZGF0YS5jaGFuZ2VQYWdlU2l6ZUNvbWJvQm94Q2xpZW50SUQpLHRoaXMuUGFnZVNpemUpOwp9fSxfc2V0Q2hhbmdlUGFnZUNvbWJvU2VsZWN0ZWRWYWx1ZTpmdW5jdGlvbihqLGcpe2lmKGohPW51bGwpe3ZhciBkPWouZmluZEl0ZW1CeVZhbHVlKGcpOwppZihkKXtqLnRyYWNrQ2hhbmdlcygpOwpkLnNlbGVjdCgpOwpqLmNvbW1pdENoYW5nZXMoKTsKfWVsc2V7dmFyIGY9ai5nZXRfaXRlbXMoKTsKdmFyIGM9Zi5nZXRfY291bnQoKTsKdmFyIGE7CmZvcih2YXIgaD0wLGU9Zi5nZXRfY291bnQoKTsKaDxlOwpoKyspe2lmKGYuZ2V0SXRlbShoKS5nZXRfdmFsdWUoKT5nKXthPWYuZ2V0SXRlbShoKS5nZXRfYXR0cmlidXRlcygpLmdldEF0dHJpYnV0ZSgib3duZXJUYWJsZVZpZXdJZCIpOwpjPWg7CmJyZWFrOwp9fWoudHJhY2tDaGFuZ2VzKCk7CnZhciBiPW5ldyBUZWxlcmlrLldlYi5VSS5SYWRDb21ib0JveEl0ZW0oKTsKYi5zZXRfdGV4dChnLnRvU3RyaW5nKCkpOwpiLnNldF92YWx1ZShnKTsKZi5pbnNlcnQoYyxiKTsKYi5nZXRfYXR0cmlidXRlcygpLnNldEF0dHJpYnV0ZSgib3duZXJUYWJsZVZpZXdJZCIsYSk7CmIuc2VsZWN0KCk7CmouY29tbWl0Q2hhbmdlcygpOwp9fX0sX3NldFNsaWRlclZhbHVlOmZ1bmN0aW9uKGEsYixjKXtpZihhIT1udWxsKXtiPU1hdGgubWF4KGItMSwwKTsKYS5zZXRfbWF4aW11bVZhbHVlKGIpOwp0aGlzLl9hcHBseVBhZ2VyTGFiZWxUZXh0KCRnZXQoYyksMCxiKzEpOwp9fSxfc2V0VGV4dEJveFZhbHVlOmZ1bmN0aW9uKGEsYixjKXtpZihhIT1udWxsKXtpZih0eXBlb2YoYikhPSJ1bmRlZmluZWQiKXthLnNldF9tYXhWYWx1ZShiKTsKfWlmKHR5cGVvZihjKSE9InVuZGVmaW5lZCIpe2Euc2V0X3ZhbHVlKE1hdGgubWluKGMsYikpOwp9fX0sX3BvcHVsYXRlUGFnZXJTdGF0c0VsZW1lbnRzOmZ1bmN0aW9uKGUsZCxpLGgsZyl7aWYoJGdldChlKSl7JGdldChlKS5pbm5lckhUTUw9dGhpcy5QYWdlQ291bnQ7Cn1pZihnJiZnIT0iIiYmJGdldChnKSl7JGdldChnKS5pbm5lckhUTUw9U3RyaW5nLmZvcm1hdCgiIG9mIHswfSIsdGhpcy5QYWdlQ291bnR8fDEpOwp9aWYoJGdldChkKSl7aWYodGhpcy5nZXRfdmlydHVhbEl0ZW1Db3VudCgpPT0wKXskZ2V0KGQpLmlubmVySFRNTD0wOwp9ZWxzZXskZ2V0KGQpLmlubmVySFRNTD0odGhpcy5nZXRfY3VycmVudFBhZ2VJbmRleCgpKzEpKnRoaXMuZ2V0X3BhZ2VTaXplKCktdGhpcy5nZXRfcGFnZVNpemUoKSsxOwp9fWlmKCRnZXQoaCkpeyRnZXQoaCkuaW5uZXJIVE1MPXRoaXMuZ2V0X3ZpcnR1YWxJdGVtQ291bnQoKTsKfWlmKCRnZXQoaSkpe3ZhciBiPXRoaXMuZ2V0X3ZpcnR1YWxJdGVtQ291bnQoKTsKdmFyIGM9KHRoaXMuZ2V0X2N1cnJlbnRQYWdlSW5kZXgoKSsxKSp0aGlzLmdldF9wYWdlU2l6ZSgpOwppZihjPmIpe2M9YjsKfSRnZXQoaSkuaW5uZXJIVE1MPWM7Cn1pZigkZ2V0KGkpJiYkZ2V0KGgpKXt2YXIgYT1wYXJzZUludCgkZ2V0KGkpLmlubmVySFRNTCk7CnZhciBmPXBhcnNlSW50KCRnZXQoaCkuaW5uZXJIVE1MKTsKaWYoYT5mKXskZ2V0KGkpLmlubmVySFRNTD1mOwp9fX0sX2dlbmVyYXRlTnVtZXJpY1BhZ2VyOmZ1bmN0aW9uKCl7dGhpcy5fcG9wdWxhdGVOdW1lcmljUGFnZXJEaXYoJGdldChTdHJpbmcuZm9ybWF0KCJ7MH1OUFBIVG9wIix0aGlzLmdldF9pZCgpKSkpOwp0aGlzLl9wb3B1bGF0ZU51bWVyaWNQYWdlckRpdigkZ2V0KFN0cmluZy5mb3JtYXQoInswfU5QUEgiLHRoaXMuZ2V0X2lkKCkpKSk7Cn0sX3BvcHVsYXRlTnVtZXJpY1BhZ2VyRGl2OmZ1bmN0aW9uKGQpe2lmKGQpe2QuaW5uZXJIVE1MPSIiOwp2YXIgZz1uZXcgU3lzLlN0cmluZ0J1aWxkZXIoKTsKdmFyIGI9MTsKdmFyIGY9dGhpcy5fcGFnZUJ1dHRvbkNvdW50OwppZih0aGlzLmdldF9jdXJyZW50UGFnZUluZGV4KCkrMT5mKXtiPShNYXRoLmZsb29yKHRoaXMuZ2V0X2N1cnJlbnRQYWdlSW5kZXgoKS9mKSpmKSsxOwp9dmFyIGM9TWF0aC5taW4odGhpcy5QYWdlQ291bnQsKGIrZiktMSk7CmlmKGI+Zil7Zy5hcHBlbmQoJzxhIGhyZWY9IiMiJyk7CmcuYXBwZW5kKFN0cmluZy5mb3JtYXQoIiBvbmNsaWNrPVwiVGVsZXJpay5XZWIuVUkuR3JpZC5OYXZpZ2F0ZVRvUGFnZSgnezB9Jyx7MX0pOyByZXR1cm4gZmFsc2U7XCIiLHRoaXMuZ2V0X2lkKCksTWF0aC5tYXgoYi1mLDApKSk7CmcuYXBwZW5kKCI+PHNwYW4+Li4uPC9zcGFuPjwvYT4iKTsKfWZvcih2YXIgZT1iLGE9YzsKZTw9YTsKZSsrKXtpZihlPT0odGhpcy5nZXRfY3VycmVudFBhZ2VJbmRleCgpKzEpKXtnLmFwcGVuZCgnPGEgaHJlZj0iIyInKTsKZy5hcHBlbmQoJyBvbmNsaWNrPSJyZXR1cm4gZmFsc2U7IiBjbGFzcz0icmdDdXJyZW50UGFnZSInKTsKZy5hcHBlbmQoU3RyaW5nLmZvcm1hdCgiPjxzcGFuPnswfTwvc3Bhbj48L2E+IixlKSk7Cn1lbHNle2cuYXBwZW5kKCc8YSBocmVmPSIjIicpOwpnLmFwcGVuZChTdHJpbmcuZm9ybWF0KCIgb25jbGljaz1cIlRlbGVyaWsuV2ViLlVJLkdyaWQuTmF2aWdhdGVUb1BhZ2UoJ3swfScsezF9KTsgcmV0dXJuIGZhbHNlO1wiIix0aGlzLmdldF9pZCgpLGUpKTsKZy5hcHBlbmQoU3RyaW5nLmZvcm1hdCgiPjxzcGFuPnswfTwvc3Bhbj48L2E+IixlKSk7Cn19aWYoYzx0aGlzLlBhZ2VDb3VudCl7Zy5hcHBlbmQoJzxhIGhyZWY9IiMiJyk7CmcuYXBwZW5kKFN0cmluZy5mb3JtYXQoIiBvbmNsaWNrPVwiVGVsZXJpay5XZWIuVUkuR3JpZC5OYXZpZ2F0ZVRvUGFnZSgnezB9Jyx7MX0pOyByZXR1cm4gZmFsc2U7XCIiLHRoaXMuZ2V0X2lkKCksYysxKSk7CmcuYXBwZW5kKCI+PHNwYW4+Li4uPC9zcGFuPjwvYT4iKTsKfWQuaW5uZXJIVE1MPWcudG9TdHJpbmcoKTsKfX0sZ2V0X2N1cnJlbnRQYWdlSW5kZXg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5DdXJyZW50UGFnZUluZGV4Owp9LHNldF9jdXJyZW50UGFnZUluZGV4OmZ1bmN0aW9uKG8sZyl7aWYodGhpcy5DdXJyZW50UGFnZUluZGV4IT1vKXt0aGlzLkN1cnJlbnRQYWdlSW5kZXg9bzsKdmFyIHA9U3RyaW5nLmZvcm1hdCgiezB9Q1BJIix0aGlzLmdldF9pZCgpKTsKdmFyIGs9U3RyaW5nLmZvcm1hdCgiezB9UENOIix0aGlzLmdldF9pZCgpKTsKdmFyIGo9U3RyaW5nLmZvcm1hdCgiezB9RklQIix0aGlzLmdldF9pZCgpKTsKdmFyIG49U3RyaW5nLmZvcm1hdCgiezB9TElQIix0aGlzLmdldF9pZCgpKTsKdmFyIG09U3RyaW5nLmZvcm1hdCgiezB9RFNDIix0aGlzLmdldF9pZCgpKTsKdmFyIGg9U3RyaW5nLmZvcm1hdCgiezB9Q1BJVG9wIix0aGlzLmdldF9pZCgpKTsKdmFyIGw9U3RyaW5nLmZvcm1hdCgiezB9UENOVG9wIix0aGlzLmdldF9pZCgpKTsKdmFyIGk9U3RyaW5nLmZvcm1hdCgiezB9RklQVG9wIix0aGlzLmdldF9pZCgpKTsKdmFyIGQ9U3RyaW5nLmZvcm1hdCgiezB9TElQVG9wIix0aGlzLmdldF9pZCgpKTsKdmFyIGM9U3RyaW5nLmZvcm1hdCgiezB9RFNDVG9wIix0aGlzLmdldF9pZCgpKTsKaWYoJGdldChwKSl7JGdldChwKS5pbm5lckhUTUw9bysxOwp9aWYoJGdldChqKSl7JGdldChqKS5pbm5lckhUTUw9KG8rMSkqdGhpcy5nZXRfcGFnZVNpemUoKS10aGlzLmdldF9wYWdlU2l6ZSgpKzE7Cn12YXIgYT0wOwppZigkZ2V0KG0pKXthPXBhcnNlSW50KCRnZXQobSkuaW5uZXJIVE1MKTsKfWlmKCRnZXQobikpe3ZhciBlPShvKzEpKnRoaXMuZ2V0X3BhZ2VTaXplKCk7CmlmKGU+YSl7ZT1hOwp9JGdldChuKS5pbm5lckhUTUw9ZTsKfWlmKCRnZXQoaCkpeyRnZXQoaCkuaW5uZXJIVE1MPW8rMTsKfWlmKCRnZXQoaSkpeyRnZXQoaSkuaW5uZXJIVE1MPShvKzEpKnRoaXMuZ2V0X3BhZ2VTaXplKCktdGhpcy5nZXRfcGFnZVNpemUoKSsxOwp9dmFyIGE9MDsKaWYoJGdldChjKSl7YT1wYXJzZUludCgkZ2V0KGMpLmlubmVySFRNTCk7Cn1pZigkZ2V0KGQpKXt2YXIgZT0obysxKSp0aGlzLmdldF9wYWdlU2l6ZSgpOwppZihlPmEpe2U9YTsKfSRnZXQoZCkuaW5uZXJIVE1MPWU7Cn10aGlzLl9nZW5lcmF0ZU51bWVyaWNQYWdlcigpOwppZih0aGlzLl9kYXRhLnNsaWRlckNsaWVudElEJiZ0aGlzLl9kYXRhLnNsaWRlckNsaWVudElEIT0iIiYmdGhpcy5fZGF0YS5zbGlkZXJUb3BDbGllbnRJRCYmdGhpcy5fZGF0YS5zbGlkZXJUb3BDbGllbnRJRCE9IiIpe3ZhciBmPSRmaW5kKHRoaXMuX2RhdGEuc2xpZGVyQ2xpZW50SUQpOwppZihmKXtmLnNldF92YWx1ZShvKTsKfWY9JGZpbmQodGhpcy5fZGF0YS5zbGlkZXJUb3BDbGllbnRJRCk7CmlmKGYpe2Yuc2V0X3ZhbHVlKG8pOwp9fWlmKHRoaXMuX2RhdGEuZ29Ub1BhZ2VUZXh0Qm94Q2xpZW50SUQmJnRoaXMuX2RhdGEuZ29Ub1BhZ2VUZXh0Qm94Q2xpZW50SUQhPSIiJiZ0aGlzLl9kYXRhLmdvVG9QYWdlVGV4dEJveFRvcENsaWVudElEJiZ0aGlzLl9kYXRhLmdvVG9QYWdlVGV4dEJveFRvcENsaWVudElEIT0iIil7dmFyIGI9JGZpbmQodGhpcy5fZGF0YS5nb1RvUGFnZVRleHRCb3hDbGllbnRJRCk7CmlmKGIhPW51bGwpe2Iuc2V0X3ZhbHVlKG8rMSk7Cn1iPSRmaW5kKHRoaXMuX2RhdGEuZ29Ub1BhZ2VUZXh0Qm94VG9wQ2xpZW50SUQpOwppZihiIT1udWxsKXtiLnNldF92YWx1ZShvKzEpOwp9fWlmKCFnKXt0aGlzLmZpcmVDb21tYW5kKCJQYWdlIixvKTsKfX19LGdldF9kYXRhU291cmNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGFTb3VyY2U7Cn0sc2V0X2RhdGFTb3VyY2U6ZnVuY3Rpb24oYSl7aWYodGhpcy5fZGF0YVNvdXJjZSE9YSl7dGhpcy5fZGF0YVNvdXJjZT1hOwp9fSxnZXRfYWxsb3dNdWx0aUNvbHVtblNvcnRpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YS5BbGxvd011bHRpQ29sdW1uU29ydGluZzsKfSxzZXRfYWxsb3dNdWx0aUNvbHVtblNvcnRpbmc6ZnVuY3Rpb24oYSl7aWYodGhpcy5fZGF0YS5BbGxvd011bHRpQ29sdW1uU29ydGluZyE9YSl7dGhpcy5fZGF0YS5BbGxvd011bHRpQ29sdW1uU29ydGluZz1hOwp9fSxnZXRfYWxsb3dOYXR1cmFsU29ydDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kYXRhLkFsbG93TmF0dXJhbFNvcnQ7Cn0sc2V0X2FsbG93TmF0dXJhbFNvcnQ6ZnVuY3Rpb24oYSl7aWYodGhpcy5fZGF0YS5BbGxvd05hdHVyYWxTb3J0IT1hKXt0aGlzLl9kYXRhLkFsbG93TmF0dXJhbFNvcnQ9YTsKfX0sX3NldFBhZ2VyVmlzaWJpbGl0eTpmdW5jdGlvbihnKXt2YXIgaD1nPyIiOiJub25lIjsKaWYodGhpcy5nZXRfZWxlbWVudCgpLnRGb290KXt2YXIgYT10aGlzLmdldF9lbGVtZW50KCkudEZvb3Q7CmlmKGEucm93cyl7Zm9yKHZhciBqPTAsZT1hLnJvd3MubGVuZ3RoOwpqPGU7CmorKyl7aWYoYS5yb3dzW2pdLmNsYXNzTmFtZS5pbmRleE9mKCJyZ1BhZ2VyIik+LTEpe2Eucm93c1tqXS5zdHlsZS5kaXNwbGF5PWg7Cn19fX1lbHNle3ZhciBiPSRnZXQoU3RyaW5nLmZvcm1hdCgiezB9X1BhZ2VyIix0aGlzLmdldF9pZCgpKSk7CmlmKGIpe3ZhciBkPWIucm93c3x8KGIudEJvZGllcyYmYi50Qm9kaWVzWzBdLnJvd3MpOwppZihkJiZkLmxlbmd0aCl7Zm9yKHZhciBqPTAsZT1kLmxlbmd0aDsKajxlOwpqKyspe2lmKGRbal0uY2xhc3NOYW1lLmluZGV4T2YoInJnUGFnZXIiKT4tMSl7ZFtqXS5zdHlsZS5kaXNwbGF5PWg7Cn19fX19dmFyIGY9dGhpcy5nZXRfZWxlbWVudCgpLnRIZWFkOwppZihmKXtmb3IodmFyIGo9MCxlPWYucm93cy5sZW5ndGg7Cmo8ZTsKaisrKXtpZihmLnJvd3Nbal0uY2xhc3NOYW1lLmluZGV4T2YoInJnUGFnZXIiKT4tMSl7Zi5yb3dzW2pdLnN0eWxlLmRpc3BsYXk9aDsKfX19ZWxzZXt2YXIgYz0kZ2V0KFN0cmluZy5mb3JtYXQoInswfV9Ub3BQYWdlciIsdGhpcy5nZXRfaWQoKSkpOwppZihjKXt2YXIgZD1jLnJvd3N8fChjLnRCb2RpZXMmJmMudEJvZGllc1swXS5yb3dzKTsKaWYoZCYmZC5sZW5ndGgpe2Zvcih2YXIgaj0wLGU9ZC5sZW5ndGg7Cmo8ZTsKaisrKXtpZihkW2pdLmNsYXNzTmFtZS5pbmRleE9mKCJyZ1BhZ2VyIik+LTEpe2Rbal0uc3R5bGUuZGlzcGxheT1oOwp9fX19fX0sZGF0YUJpbmQ6ZnVuY3Rpb24oKXt2YXIgVD0kdGVsZXJpay5nZXRFbGVtZW50QnlDbGFzc05hbWUodGhpcy5nZXRfZWxlbWVudCgpLCJyZ05vUmVjb3JkcyIpOwppZihUKXtpZih0aGlzLl9kYXRhU291cmNlLmxlbmd0aD4wKXtULnN0eWxlLmRpc3BsYXk9Im5vbmUiOwp9ZWxzZXtULnN0eWxlLmRpc3BsYXk9IiI7CnRoaXMuX3NldFBhZ2VyVmlzaWJpbGl0eSh0aGlzLl9kYXRhLlBhZ2VyQWx3YXlzVmlzaWJsZSk7Cn19dmFyIFI9dGhpcy5nZXRfZGF0YUl0ZW1zKCk7CnZhciByPXRoaXMuZ2V0X2NvbHVtbnMoKTsKaWYodGhpcy5fb3duZXIuQ2xpZW50U2V0dGluZ3MuUmVzaXppbmcuQWxsb3dDb2x1bW5SZXNpemUmJnRoaXMuX293bmVyLkNsaWVudFNldHRpbmdzLlJlc2l6aW5nLkFsbG93UmVzaXplVG9GaXQpe1RlbGVyaWsuV2ViLlVJLkdyaWQuQ2xlYXJCZXN0Rml0Q2FjaGUodGhpcy5nZXRfY29sdW1ucygpKTsKfXZhciBRPSgkdGVsZXJpay5pc09wZXJhKT90aGlzLmdldF9lbGVtZW50KCk6dGhpcy5nZXRfZWxlbWVudCgpLnRCb2RpZXNbMF07CmlmKHRoaXMuX2RhdGFTb3VyY2UubGVuZ3RoPFIubGVuZ3RofHxRLnJvd3MubGVuZ3RoPT0xKXtmb3IodmFyIEg9MCxkPVIubGVuZ3RoOwpIPGQ7CkgrKyl7UltIXS5nZXRfZWxlbWVudCgpLnN0eWxlLmRpc3BsYXk9Im5vbmUiOwp9dGhpcy5fY2FjaGVEYXRhSXRlbXMoKTsKfWZvcih2YXIgSD0wLGQ9dGhpcy5fZGF0YVNvdXJjZS5sZW5ndGg7Ckg8ZDsKSCsrKXt2YXIgcz1SW0hdOwppZihzPT1udWxsKXtzPXRoaXMuX2dldE5leHRDYWNoZWRJdGVtKCk7CmlmKHMpe0FycmF5LmFkZCh0aGlzLl9kYXRhSXRlbXMscyk7Cn19dmFyIHg9bnVsbDsKaWYocz09bnVsbCl7dGhpcy5fb3duZXIucmFpc2Vfcm93Q3JlYXRpbmcobmV3IFN5cy5FdmVudEFyZ3MoKSk7CnZhciBiPVEuaW5zZXJ0Um93KC0xKTsKaWYoIXgpe3g9ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpOwpmb3IodmFyIEY9MCxwPXIubGVuZ3RoOwpGPHA7CkYrKyl7eC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZCIpKTsKfX1iLmFwcGVuZENoaWxkKHguY2xvbmVOb2RlKHRydWUpKTsKdmFyIEQ7CnZhciBnPXRydWU7CmlmKFIubGVuZ3RoPjApe3ZhciBmPVJbUi5sZW5ndGgtMV07CkQ9Zi5nZXRfaWQoKTsKfWVsc2V7RD1TdHJpbmcuZm9ybWF0KCJ7MH1fX3sxfSIsdGhpcy5nZXRfaWQoKSwwKTsKYi5jbGFzc05hbWU9InJnUm93IjsKZz1mYWxzZTsKfWlmKEg9PTEpe2lmKHRoaXMuX293bmVyLkNsaWVudFNldHRpbmdzLkVuYWJsZUFsdGVybmF0aW5nSXRlbXMpe2IuY2xhc3NOYW1lPSJyZ0FsdFJvdyI7Cn1lbHNle2IuY2xhc3NOYW1lPSJyZ1JvdyI7Cn19dmFyIEc9cGFyc2VJbnQoRC5zcGxpdCgiX18iKVsxXSkrKGc/MTowKTsKYi5pZD1TdHJpbmcuZm9ybWF0KCJ7MH1fX3sxfSIsRC5zcGxpdCgiX18iKVswXSxHKTsKaWYoUltSLmxlbmd0aC0yXSl7Yi5jbGFzc05hbWU9UltSLmxlbmd0aC0yXS5nZXRfZWxlbWVudCgpLmNsYXNzTmFtZTsKfXM9JGNyZWF0ZShUZWxlcmlrLldlYi5VSS5HcmlkRGF0YUl0ZW0se19vd25lcjp0aGlzLF9kYXRhOnt9LF9pdGVtSW5kZXhIaWVyYXJjaGljYWw6IiIrR30sbnVsbCxudWxsLGIpOwp0aGlzLl9jbGVhclJvd0NsYXNzU3R5bGVzKHMuZ2V0X2VsZW1lbnQoKSk7CnRoaXMuX293bmVyLnJhaXNlX3Jvd0NyZWF0ZWQobmV3IFRlbGVyaWsuV2ViLlVJLkdyaWREYXRhSXRlbUV2ZW50QXJncyhiLG51bGwpKTsKQXJyYXkuYWRkKHRoaXMuX2RhdGFJdGVtcyxzKTsKfWlmKHMuZ2V0X2VsZW1lbnQoKS5zdHlsZS5kaXNwbGF5PT0ibm9uZSIpe3MuZ2V0X2VsZW1lbnQoKS5zdHlsZS5kaXNwbGF5PSgkdGVsZXJpay5pc0lFKT8iIjoidGFibGUtcm93IjsKfXZhciBJPUFycmF5LmNvbnRhaW5zKHRoaXMuX293bmVyLl9lZGl0SW5kZXhlcyxzLl9pdGVtSW5kZXhIaWVyYXJjaGljYWwpJiZ0aGlzLl9kYXRhLkVkaXRNb2RlPT0iSW5QbGFjZSI7CmlmKHRoaXMuZ2V0X293bmVyKCkuX2NsaWVudEtleVZhbHVlcyYmdGhpcy5fZGF0YSYmdGhpcy5fZGF0YS5jbGllbnREYXRhS2V5TmFtZXMpe2Zvcih2YXIgTj0wLEw9dGhpcy5fZGF0YS5jbGllbnREYXRhS2V5TmFtZXMubGVuZ3RoOwpOPEw7Ck4rKyl7dmFyIFY9dGhpcy5fZGF0YS5jbGllbnREYXRhS2V5TmFtZXNbTl07CnZhciBNPSh0aGlzLl9kYXRhU291cmNlW0hdKT90aGlzLl9kYXRhU291cmNlW0hdW1ZdOm51bGw7CmlmKHRoaXMuZ2V0X293bmVyKCkuX2NsaWVudEtleVZhbHVlc1tzLl9pdGVtSW5kZXhIaWVyYXJjaGljYWxdKXt0aGlzLmdldF9vd25lcigpLl9jbGllbnRLZXlWYWx1ZXNbcy5faXRlbUluZGV4SGllcmFyY2hpY2FsXVtWXT1NOwp9ZWxzZXtpZih0aGlzLmdldF9vd25lcigpLl9jbGllbnRLZXlWYWx1ZXNbcy5faXRlbUluZGV4SGllcmFyY2hpY2FsXSE9bnVsbCl7dmFyIEo9dGhpcy5nZXRfb3duZXIoKS5fY2xpZW50S2V5VmFsdWVzW3MuX2l0ZW1JbmRleEhpZXJhcmNoaWNhbF07CkpbVl09TTsKdGhpcy5nZXRfb3duZXIoKS5fY2xpZW50S2V5VmFsdWVzW3MuX2l0ZW1JbmRleEhpZXJhcmNoaWNhbF09SjsKfWVsc2V7dmFyIEo9bmV3IE9iamVjdCgpOwpKW1ZdPU07CnRoaXMuZ2V0X293bmVyKCkuX2NsaWVudEtleVZhbHVlc1tzLl9pdGVtSW5kZXhIaWVyYXJjaGljYWxdPUo7Cn19fX1pZih0aGlzLl9kYXRhLl9kYXRhQmluZFRlbXBsYXRlcyl7dGhpcy5fZmlsbFRlbXBsYXRlRWRpdG9yc0RhdGEocyx0aGlzLl9kYXRhU291cmNlW0hdKTsKfWZvcih2YXIgRj0wLHA9ci5sZW5ndGg7CkY8cDsKRisrKXt2YXIgQz1yW0ZdLmdldF91bmlxdWVOYW1lKCk7CnZhciBtPXRoaXMuZ2V0Q2VsbEJ5Q29sdW1uVW5pcXVlTmFtZShzLEMpOwppZighbSl7Y29udGludWU7Cn12YXIgdj1yW0ZdLl9kYXRhLkRhdGFGaWVsZDsKaWYodHlwZW9mKHYpPT0idW5kZWZpbmVkIil7dj1DOwp9dmFyIHU9dGhpcy5fZGF0YVNvdXJjZVtIXVt2XTsKaWYodT09bnVsbCl7dT0iIjsKfWlmKHR5cGVvZih1KSE9InVuZGVmaW5lZCIpe2lmKHJbRl0uX2RhdGEuQ29sdW1uVHlwZT09IkdyaWRDaGVja0JveENvbHVtbiIpe3ZhciBBPW0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoImlucHV0Iik7CmlmKEEubGVuZ3RoPjAmJkFbMF0udHlwZT09ImNoZWNrYm94Iil7QVswXS5jaGVja2VkPXU7Cn1lbHNle3ZhciBYPSc8c3BhbiBkaXNhYmxlZD0iZGlzYWJsZWQiPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgZGlzYWJsZWQ9ImRpc2FibGVkIiB7MH0vPjwvc3Bhbj4nOwppZih1KXttLmlubmVySFRNTD1TdHJpbmcuZm9ybWF0KFgsJ2NoZWNrZWQ9ImNoZWNrZWQiICcpOwp9ZWxzZXttLmlubmVySFRNTD1TdHJpbmcuZm9ybWF0KFgsIiIpOwp9fXRoaXMuX2ZpbGxFZGl0b3JzRGF0YShzLHJbRl0sdSk7Cn1lbHNle2lmKHJbRl0uX2RhdGEuQ29sdW1uVHlwZT09IkdyaWRUZW1wbGF0ZUNvbHVtbiJ8fHJbRl0uX2RhdGEuQ29sdW1uVHlwZT09IkdyaWRCdXR0b25Db2x1bW4ifHxyW0ZdLl9kYXRhLkNvbHVtblR5cGU9PSJHcmlkRWRpdENvbW1hbmRDb2x1bW4ifHxyW0ZdLl9kYXRhLkNvbHVtblR5cGU9PSJHcmlkRXhwYW5kQ29sdW1uInx8cltGXS5fZGF0YS5Db2x1bW5UeXBlPT0iR3JpZENsaWVudERlbGV0ZUNvbHVtbiJ8fHJbRl0uX2RhdGEuQ29sdW1uVHlwZT09IkdyaWRDbGllbnRTZWxlY3RDb2x1bW4ifHxyW0ZdLl9kYXRhLkNvbHVtblR5cGU9PSJHcmlkR3JvdXBTcGxpdHRlckNvbHVtbiIpe2lmKHJbRl0uX2RhdGEuQ29sdW1uVHlwZT09IkdyaWRUZW1wbGF0ZUNvbHVtbiIpe2lmKHJbRl0uX2RhdGEuQ2xpZW50SXRlbVRlbXBsYXRlPT1udWxsKXtpZih0aGlzLl9vd25lci5fZWRpdEluZGV4ZXMubGVuZ3RoPjAmJkFycmF5LmNvbnRhaW5zKHRoaXMuX293bmVyLl9lZGl0SW5kZXhlcyxzLl9pdGVtSW5kZXhIaWVyYXJjaGljYWwpKXtpZih0aGlzLl9kYXRhLkVkaXRNb2RlIT0iSW5QbGFjZSIpe209dGhpcy5fZ2V0RWRpdEZvcm1DZWxsQnlVbmlxdWVOYW1lKHMscltGXSk7Cn19dGhpcy5fZmlsbFRlbXBsYXRlRWRpdG9yc0RhdGEocyx0aGlzLl9kYXRhU291cmNlW0hdLG0pOwp9ZWxzZXt2YXIgdD10aGlzLl9nZXRCaW5kaW5nQ29udGV4dCh0aGlzLl9kYXRhU291cmNlW0hdLEgpOwp2YXIgVT1UZWxlcmlrLldlYi5VSS5UZW1wbGF0ZS5jb21waWxlKHJbRl0uX2RhdGEuQ2xpZW50SXRlbVRlbXBsYXRlKTsKaWYoVSl7bS5pbm5lckhUTUw9VSh0KTsKfX19aWYocltGXS5fZGF0YS5Db2x1bW5UeXBlPT0iR3JpZENsaWVudFNlbGVjdENvbHVtbiIpe3ZhciBBPW0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoImlucHV0Iik7CmlmKCEoQS5sZW5ndGg+MCYmKEFbMF0uaWQmJkFbMF0uaWQuaW5kZXhPZigiU2VsZWN0Q2hlY2tCb3giKSE9LTEpKSl7bS5pbm5lckhUTUw9U3RyaW5nLmZvcm1hdCgiPGlucHV0IHR5cGU9J2NoZWNrYm94JyBpZD0nezB9X1NlbGVjdENoZWNrQm94JyAvPiIsdGhpcy5nZXRfaWQoKSsiX18iK3MuX2l0ZW1JbmRleEhpZXJhcmNoaWNhbCk7Cn19aWYocltGXS5fZGF0YS5Db2x1bW5UeXBlPT0iR3JpZEJ1dHRvbkNvbHVtbiIpe2lmKCEodGhpcy5fZGF0YS5FZGl0TW9kZT09IkluUGxhY2UiJiZBcnJheS5jb250YWlucyh0aGlzLl9vd25lci5fZWRpdEluZGV4ZXMscy5faXRlbUluZGV4SGllcmFyY2hpY2FsKSkpe3ZhciB3PXRoaXMuX2RhdGFTb3VyY2VbSF1bcltGXS5fZGF0YS5EYXRhVGV4dEZpZWxkXTsKaWYoKHc9PXVuZGVmaW5lZHx8dz09IiIpKXt3PXJbRl0uX2RhdGEuVGV4dDsKfXZhciBPOwp2YXIgcT10aGlzLmdldF9wYWdlU2l6ZSgpOwpmdW5jdGlvbiBvKCl7c3dpdGNoKHJbRl0uX2RhdGEuQnV0dG9uVHlwZSl7Y2FzZSJQdXNoQnV0dG9uIjpPPSc8aW5wdXQgdHlwZT0ic3VibWl0IiB2YWx1ZT0iezB9IiBvbmNsaWNrPSJ7MX0iLz4nOwpicmVhazsKY2FzZSJMaW5rQnV0dG9uIjpPPSc8YSBocmVmPSIjIiBvbmNsaWNrPSJ7MX0iPnswfTwvYT4nOwpicmVhazsKY2FzZSJJbWFnZUJ1dHRvbiI6Tz0nPGlucHV0IHR5cGU9ImltYWdlIiB0aXRsZT0iezB9IiBhbHQ9InswfSIgc3JjPSInK3JbRl0uX2RhdGEuSW1hZ2VVcmwrJyIgb25jbGljaz0iezF9Ii8+JzsKYnJlYWs7Cn12YXIgaT1yW0ZdLl9kYXRhLkNvbW1hbmRBcmd1bWVudDsKaWYoaT09dW5kZWZpbmVkfHxpPT0iIil7aT1zLl9pdGVtSW5kZXhIaWVyYXJjaGljYWw7Cn12YXIgaj1TdHJpbmcuZm9ybWF0KCJpZighJGZpbmQoJ3swfScpLmZpcmVDb21tYW5kKCd7MX0nLCd7Mn0nKSkgcmV0dXJuIGZhbHNlOyIsdGhpcy5nZXRfaWQoKSxyW0ZdLl9kYXRhLkNvbW1hbmROYW1lLGkpOwptLmlubmVySFRNTD1TdHJpbmcuZm9ybWF0KE8sdyxqKTsKfWlmKHE8dGhpcy5fZGF0YVNvdXJjZS5sZW5ndGgmJkg+cS0xKXtvLmNhbGwodGhpcyk7Cn1lbHNle3N3aXRjaChyW0ZdLl9kYXRhLkJ1dHRvblR5cGUpe2Nhc2UiUHVzaEJ1dHRvbiI6Tz1tLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJpbnB1dCIpWzBdOwppZighTyl7by5jYWxsKHRoaXMpOwp9Ty52YWx1ZT13OwpicmVhazsKY2FzZSJMaW5rQnV0dG9uIjpPPW0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoImEiKVswXTsKaWYoIU8pe28uY2FsbCh0aGlzKTsKfU8uaW5uZXJIVE1MPXc7CmJyZWFrOwpjYXNlIkltYWdlQnV0dG9uIjpPPW0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoImlucHV0IilbMF07CmlmKCFPKXtvLmNhbGwodGhpcyk7Cn1PLnRpdGxlPXc7Ck8uYWx0PXc7CmJyZWFrOwp9fX19fWVsc2V7aWYocltGXS5fZGF0YS5Db2x1bW5UeXBlPT0iR3JpZEh5cGVyTGlua0NvbHVtbiIpe3ZhciB5PW0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoImEiKTsKaWYoeS5sZW5ndGg+MCl7dmFyIGE9eVswXTsKdGhpcy5fcHJlcGFyZUh5cGVyTGlua0NvbHVtbkVsZW1lbnQoYSxyW0ZdLHRoaXMuX2RhdGFTb3VyY2VbSF0pOwp9ZWxzZXttLmlubmVySFRNTD0iPGEgLz4iOwp0aGlzLl9wcmVwYXJlSHlwZXJMaW5rQ29sdW1uRWxlbWVudCgkdGVsZXJpay5nZXRGaXJzdENoaWxkQnlUYWdOYW1lKG0sImEiKSxyW0ZdLHRoaXMuX2RhdGFTb3VyY2VbSF0sdHJ1ZSk7Cn19ZWxzZXtpZihyW0ZdLl9kYXRhLkNvbHVtblR5cGU9PSJHcmlkSW1hZ2VDb2x1bW4iKXt2YXIgbj1tLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJpbWciKTsKaWYobi5sZW5ndGg+MCl7dmFyIFA9blswXTsKdGhpcy5fcHJlcGFyZUltYWdlQ29sdW1uRWxlbWVudChQLHJbRl0sdGhpcy5fZGF0YVNvdXJjZVtIXSk7Cn1lbHNle20uaW5uZXJIVE1MPSI8aW1nIC8+IjsKdGhpcy5fcHJlcGFyZUltYWdlQ29sdW1uRWxlbWVudCgkdGVsZXJpay5nZXRGaXJzdENoaWxkQnlUYWdOYW1lKG0sImltZyIpLHJbRl0sdGhpcy5fZGF0YVNvdXJjZVtIXSx0cnVlKTsKfX1lbHNle2lmKHJbRl0uX2RhdGEuQ29sdW1uVHlwZT09IkdyaWRDYWxjdWxhdGVkQ29sdW1uIil7dmFyIFM9IiI7CmlmKHR5cGVvZihyW0ZdLl9kYXRhLkV4cHJlc3Npb24pIT0idW5kZWZpbmVkIiYmcltGXS5fZGF0YS5FeHByZXNzaW9uIT0iIil7dmFyIGM9W107CmZvcih2YXIgTj0wOwpOPHJbRl0uX2RhdGEuRGF0YUZpZWxkcy5sZW5ndGg7Ck4rKyl7dmFyIHY9cltGXS5fZGF0YS5EYXRhRmllbGRzW05dOwpBcnJheS5hZGQoYyx0aGlzLl9kYXRhU291cmNlW0hdW3ZdKTsKfXZhciBoPWV2YWwoIlN0cmluZy5mb3JtYXQoJyIrcltGXS5fZGF0YS5FeHByZXNzaW9uKyInLCIrYy5qb2luKCIsIikrIikiKTsKdmFyIFc9cltGXS5fZGF0YS5EYXRhRm9ybWF0U3RyaW5nOwppZihXPT0iIil7Vz0iezB9IjsKfXZhciBlPSIiOwp0cnl7ZT1ldmFsKGgpOwp9Y2F0Y2goeil7fVM9U3RyaW5nLmxvY2FsZUZvcm1hdChXLGUpOwp9bS5pbm5lckhUTUw9KFMhPT0iIik/UzoiJm5ic3A7IjsKfWVsc2V7aWYoIUkpe2lmKHR5cGVvZihyW0ZdLl9kYXRhLkRhdGFGb3JtYXRTdHJpbmcpIT0idW5kZWZpbmVkIiYmcltGXS5fZGF0YS5EYXRhRm9ybWF0U3RyaW5nIT0iIil7aWYodS50b1N0cmluZygpLmluZGV4T2YoIi9EYXRlKCIpIT0tMSl7dT1uZXcgRGF0ZShwYXJzZUludCh1LnJlcGxhY2UoIi9EYXRlKCIsIiIpLnJlcGxhY2UoIikvIiwiIikpKTsKfXZhciBTPVN0cmluZy5sb2NhbGVGb3JtYXQocltGXS5fZGF0YS5EYXRhRm9ybWF0U3RyaW5nLHUpOwptLmlubmVySFRNTD0oUyE9PSIiKT9TOiImbmJzcDsiOwp9ZWxzZXttLmlubmVySFRNTD0odSE9PSIiKT91OiImbmJzcDsiOwp9fWVsc2V7aWYodGhpcy5fZGF0YS5FZGl0TW9kZT09IkluUGxhY2UiKXt0aGlzLl9maWxsRWRpdG9yc0RhdGEocyxyW0ZdLHUpOwp9fWlmKHRoaXMuX2RhdGEuRWRpdE1vZGUhPSJJblBsYWNlIil7dGhpcy5fZmlsbEVkaXRvcnNEYXRhKHMscltGXSx1KTsKfX19fX19fWVsc2V7fX12YXIgRT1uZXcgT2JqZWN0KCk7CnZhciBCPXRoaXMuX2RhdGFTb3VyY2VbSF07CkUuZ2V0X2RhdGFJdGVtPWZ1bmN0aW9uKCl7cmV0dXJuIEI7Cn07CkUuZ2V0X2l0ZW09ZnVuY3Rpb24oKXtyZXR1cm4gczsKfTsKcy5fZGF0YUl0ZW09QjsKdGhpcy5fb3duZXIucmFpc2Vfcm93RGF0YUJvdW5kKEUpOwp9JGZpbmQodGhpcy5fb3duZXIuZ2V0X2lkKCkpLl9nZXRQb3NpdGlvbmVkRGF0YUl0ZW1zKHRydWUpOwp0aGlzLl9vd25lci5yYWlzZV9kYXRhQm91bmQoU3lzLkV2ZW50QXJncy5FbXB0eSk7CmZvcih2YXIgSD0wLHA9ci5sZW5ndGg7Ckg8cDsKSCsrKXt2YXIgbD1mYWxzZTsKaWYocltIXS5nZXRfZWxlbWVudCgpLnN0eWxlLnZpc2liaWxpdHkhPSJoaWRkZW4iJiYocltIXS5EaXNwbGF5PT1udWxsfHxyW0hdLkRpc3BsYXk9PXRydWUpJiYocltIXS5fZGF0YS5EaXNwbGF5PT1udWxsfHxyW0hdLl9kYXRhLkRpc3BsYXkpKXtsPXRydWU7Cn1pZighbCl7dGhpcy5faGlkZVNob3dDb2x1bW4oSCxsKTsKfX1pZih0aGlzLmdldF9pZCgpPT10aGlzLmdldF9vd25lcigpLl9tYXN0ZXJDbGllbnRJRCl7dmFyIEs9JGZpbmQodGhpcy5nZXRfb3duZXIoKS5nZXRfaWQoKSk7CmlmKEsuX3Njcm9sbGluZyl7Sy5fc2Nyb2xsaW5nLl9pbml0aWFsaXplVmlydHVhbFNjcm9sbFBhZ2luZyh0cnVlKTsKfX19LF9jbGVhclJvd0NsYXNzU3R5bGVzOmZ1bmN0aW9uKGYpe3ZhciBlPVsicmdTZWxlY3RlZFJvdyJdOwp2YXIgYT1bInJnU2VsZWN0ZWRDZWxsIl07CmZvcih2YXIgZD0wOwpkPGUubGVuZ3RoOwpkKyspe1N5cy5VSS5Eb21FbGVtZW50LnJlbW92ZUNzc0NsYXNzKGYsZVtkXSk7Cn1mb3IodmFyIGQ9MDsKZDxhLmxlbmd0aDsKZCsrKXt2YXIgYz1mLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0ZCIpOwpmb3IodmFyIGI9MDsKYy5sZW5ndGg8ZDsKZCsrKXtTeXMuVUkuRG9tRWxlbWVudC5yZW1vdmVDc3NDbGFzcyhjW2JdLGFbZF0pOwp9fX0sX2dldEJpbmRpbmdDb250ZXh0OmZ1bmN0aW9uKGIsYSl7cmV0dXJuIHRoaXMuX2V4dGVuZCh7fSxiLHtpdGVtOmIsaW5kZXg6YSxkYXRhSW5kZXg6dHlwZW9mKGEpIT09InVuZGVmaW5lZCI/KHRoaXMuZ2V0X2N1cnJlbnRQYWdlSW5kZXgoKSp0aGlzLmdldF9wYWdlU2l6ZSgpKSthOm51bGwsaXNTZWxlY3RlZDp0eXBlb2YoYSkhPT0idW5kZWZpbmVkIiYmQXJyYXkuY29udGFpbnModGhpcy5fb3duZXIuX3NlbGVjdGVkSW5kZXhlcyxhKyIiKSxvd25lcjp0aGlzLGZvcm1hdDp0aGlzLl9mb3JtYXRWYWx1ZX0pOwp9LF9mb3JtYXRWYWx1ZTpmdW5jdGlvbihhLGIpe2lmKHR5cGVvZihhKT09PSJ1bmRlZmluZWQifHxhPT09bnVsbCl7cmV0dXJuIiI7Cn1pZihhLnRvU3RyaW5nKCkuaW5kZXhPZigiL0RhdGUoIikhPS0xKXthPW5ldyBEYXRlKHBhcnNlSW50KGEucmVwbGFjZSgiL0RhdGUoIiwiIikucmVwbGFjZSgiKS8iLCIiKSkpOwp9aWYoYil7aWYoYi5pbmRleE9mKCJ7MDoiKTwwKXtiPSJ7MDoiK2IrIn0iOwp9fWVsc2V7Yj0iezB9IjsKfXJldHVybiBTdHJpbmcubG9jYWxlRm9ybWF0KGIsYSk7Cn0sX2V4dGVuZDpmdW5jdGlvbihlLGIpe2lmKGFyZ3VtZW50cy5sZW5ndGg+Mil7Zm9yKHZhciBkPTE7CmQ8YXJndW1lbnRzLmxlbmd0aDsKZCsrKXt0aGlzLl9leHRlbmQoZSxhcmd1bWVudHNbZF0pOwp9fWVsc2V7Zm9yKHZhciBjIGluIGIpe2VbY109YltjXTsKfX1yZXR1cm4gZTsKfSxfY2FjaGVEYXRhSXRlbXM6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLmdldF9kYXRhSXRlbXMoKTsKaWYodGhpcy5fY2FjaGVkSXRlbXMmJnRoaXMuX2NhY2hlZEl0ZW1zLmxlbmd0aD4wKXt2YXIgYz10aGlzLl9jYWNoZWRJdGVtczsKdGhpcy5fY2FjaGVkSXRlbXM9Yi5zcGxpY2UodGhpcy5fZGF0YVNvdXJjZS5sZW5ndGgsYi5sZW5ndGgtdGhpcy5fZGF0YVNvdXJjZS5sZW5ndGgpOwpmb3IodmFyIGE9MDsKYTxjLmxlbmd0aDsKYSsrKXt0aGlzLl9jYWNoZWRJdGVtc1t0aGlzLl9jYWNoZWRJdGVtcy5sZW5ndGhdPWNbYV07Cn1jPW51bGw7Cn1lbHNle3RoaXMuX2NhY2hlZEl0ZW1zPWIuc3BsaWNlKHRoaXMuX2RhdGFTb3VyY2UubGVuZ3RoLGIubGVuZ3RoLXRoaXMuX2RhdGFTb3VyY2UubGVuZ3RoKTsKfX0sX2dldE5leHRDYWNoZWRJdGVtOmZ1bmN0aW9uKCl7aWYodGhpcy5fY2FjaGVkSXRlbXMmJnRoaXMuX2NhY2hlZEl0ZW1zLmxlbmd0aD4wKXtyZXR1cm4gdGhpcy5fY2FjaGVkSXRlbXMuc3BsaWNlKDAsMSlbMF07Cn19LF9wcmVwYXJlSHlwZXJMaW5rQ29sdW1uRWxlbWVudDpmdW5jdGlvbihkLGIsZyxmKXtpZighZHx8IWJ8fCFnKXtyZXR1cm47Cn1pZihmKXtpZihiLl9kYXRhLk5hdmlnYXRlVXJsJiZiLl9kYXRhLk5hdmlnYXRlVXJsIT0iIil7ZC5ocmVmPWIuX2RhdGEuTmF2aWdhdGVVcmw7Cn1pZihiLl9kYXRhLlRhcmdldCYmYi5fZGF0YS5UYXJnZXQhPSIiKXtkLnRhcmdldD1iLl9kYXRhLlRhcmdldDsKfWlmKGIuX2RhdGEuVGV4dCYmYi5fZGF0YS5UZXh0IT0iIil7ZC5pbm5lckhUTUw9Yi5fZGF0YS5UZXh0Owp9fXZhciBlPWIuX2RhdGEuRGF0YVRleHRGb3JtYXRTdHJpbmc7CnZhciBjPXRoaXMuX2dldEZvcm1hdGVkRGF0YVRleHQoZSxiLl9kYXRhLkRhdGFUZXh0RmllbGQsZyk7CnZhciBhPXRoaXMuX2NvcHlEYXRhRmllbGRzVmFsdWVzVG9BcnJheShiLl9kYXRhLkRhdGFOYXZpZ2F0ZVVybEZpZWxkcyxnKTsKaWYoYSYmYS5sZW5ndGg+MCl7dmFyIGg9ZXZhbCgiU3RyaW5nLmZvcm1hdCgnIitiLl9kYXRhLkRhdGFOYXZpZ2F0ZVVybEZvcm1hdFN0cmluZysiJywiK2Euam9pbigiLCIpKyIpIik7CmQuaHJlZj1oOwp9aWYoKGUmJmUhPSIiKXx8KGIuX2RhdGEuRGF0YVRleHRGaWVsZCYmYi5fZGF0YS5EYXRhVGV4dEZpZWxkIT0iIikpe2QuaW5uZXJIVE1MPWM7Cn19LF9wcmVwYXJlSW1hZ2VDb2x1bW5FbGVtZW50OmZ1bmN0aW9uKGgsYixmLGUpe2lmKCFofHwhYnx8IWYpe3JldHVybjsKfWlmKGUpe2lmKGIuX2RhdGEuSW1hZ2VVcmwmJmIuX2RhdGEuSW1hZ2VVcmwhPSIiKXtoLnNyYz1iLl9kYXRhLkltYWdlVXJsOwp9aWYoYi5fZGF0YS5BbHRlcm5hdGVUZXh0JiZiLl9kYXRhLkFsdGVybmF0ZVRleHQhPSIiKXtoLmFsdD1oLnRpdGxlPWIuX2RhdGEuQWx0ZXJuYXRlVGV4dDsKfX12YXIgZD1iLl9kYXRhLkRhdGFBbHRlcm5hdGVUZXh0Rm9ybWF0U3RyaW5nOwp2YXIgYz10aGlzLl9nZXRGb3JtYXRlZERhdGFUZXh0KGQsYi5fZGF0YS5EYXRhQWx0ZXJuYXRlVGV4dEZpZWxkLGYpOwp2YXIgYT10aGlzLl9jb3B5RGF0YUZpZWxkc1ZhbHVlc1RvQXJyYXkoYi5fZGF0YS5EYXRhSW1hZ2VVcmxGaWVsZHMsZik7CmlmKGEmJmEubGVuZ3RoPjApe3ZhciBnPWV2YWwoIlN0cmluZy5mb3JtYXQoJyIrYi5fZGF0YS5EYXRhSW1hZ2VVcmxGb3JtYXRTdHJpbmcrIicsIithLmpvaW4oIiwiKSsiKSIpOwpoLnNyYz1nOwp9aWYoYi5fZGF0YS5JbWFnZUhlaWdodCYmYi5fZGF0YS5JbWFnZUhlaWdodCE9IiIpe2guc3R5bGUuaGVpZ2h0PWIuX2RhdGEuSW1hZ2VIZWlnaHQ7Cn1pZihiLl9kYXRhLkltYWdlV2lkdGgmJmIuX2RhdGEuSW1hZ2VXaWR0aCE9IiIpe2guc3R5bGUud2lkdGg9Yi5fZGF0YS5JbWFnZVdpZHRoOwp9aWYoKGQmJmQhPSIiKXx8KGIuX2RhdGEuRGF0YUFsdGVybmF0ZVRleHRGaWVsZCYmYi5fZGF0YS5EYXRhQWx0ZXJuYXRlVGV4dEZpZWxkIT0iIikpe2guYWx0PWgudGl0bGU9YzsKfX0sX2dldEZvcm1hdGVkRGF0YVRleHQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBTdHJpbmcubG9jYWxlRm9ybWF0KChhPT0iIik/InswfSI6YSxjW2JdKTsKfSxfY29weURhdGFGaWVsZHNWYWx1ZXNUb0FycmF5OmZ1bmN0aW9uKGEsYyl7dmFyIGQ9W107CmlmKCFhfHwhYyl7cmV0dXJuIGQ7Cn1mb3IodmFyIGI9MDsKYjxhLmxlbmd0aDsKYisrKXt2YXIgZT1hW2JdOwppZih0eXBlb2YoY1tlXSkhPSJudW1iZXIiKXtBcnJheS5hZGQoZCxTdHJpbmcuZm9ybWF0KCInezB9JyIsY1tlXSkpOwp9ZWxzZXtBcnJheS5hZGQoZCxjW2VdKTsKfX1yZXR1cm4gZDsKfSxfZmlsbFRlbXBsYXRlRWRpdG9yc0RhdGE6ZnVuY3Rpb24oZCxlLGgpe3ZhciBsPW51bGw7CmlmKHRoaXMuX293bmVyLl9lZGl0SW5kZXhlcy5sZW5ndGg+MCYmQXJyYXkuY29udGFpbnModGhpcy5fb3duZXIuX2VkaXRJbmRleGVzLGUuX2l0ZW1JbmRleEhpZXJhcmNoaWNhbCkpe2lmKGg9PW51bGwpe2lmKGQuX293bmVyLl9kYXRhLkVkaXRNb2RlPT0iSW5QbGFjZSIpe2w9ZC5nZXRfZWxlbWVudCgpOwp9ZWxzZXtsPWQuZ2V0X2VsZW1lbnQoKS5uZXh0U2libGluZzsKfX19ZWxzZXtsPWQuZ2V0X2VsZW1lbnQoKTsKfWlmKCFsJiYhaCl7cmV0dXJuOwp9aWYoIWgpe2lmKCFsLnRhZ05hbWUpe3JldHVybjsKfWlmKGwudGFnTmFtZS50b0xvd2VyQ2FzZSgpIT0idHIiKXtyZXR1cm47Cn19Zm9yKHZhciBhIGluIGUpe3ZhciBqPSR0ZWxlcmlrLmZpbmRDb250cm9sKChoIT1udWxsKT9oOmwsYSk7CmlmKGohPW51bGwpe3ZhciBmPU9iamVjdC5nZXRUeXBlKGopLmdldE5hbWUoKTsKaWYoZj09IlRlbGVyaWsuV2ViLlVJLlJhZFRleHRCb3gifHxmPT0iVGVsZXJpay5XZWIuVUkuUmFkTnVtZXJpY1RleHRCb3gifHxmPT0iVGVsZXJpay5XZWIuVUkuUmFkTWFza2VkVGV4dEJveCIpe2ouc2V0X3ZhbHVlKGVbYV0pOwpjb250aW51ZTsKfWlmKGY9PSJUZWxlcmlrLldlYi5VSS5SYWREYXRlSW5wdXQiKXtqLnNldF9zZWxlY3RlZERhdGUoZVthXSk7CmNvbnRpbnVlOwp9aWYoZj09IlRlbGVyaWsuV2ViLlVJLlJhZERhdGVQaWNrZXIiKXtqLnNldF9zZWxlY3RlZERhdGUoZVthXSk7CmNvbnRpbnVlOwp9aWYoZj09IlRlbGVyaWsuV2ViLlVJLlJhZEVkaXRvciIpe2ouc2V0X2h0bWwoZVthXSk7CmNvbnRpbnVlOwp9aWYoZj09IlRlbGVyaWsuV2ViLlVJLlJhZENvbWJvQm94Iil7dmFyIGM9ai5maW5kSXRlbUJ5VmFsdWUoZVthXSk7CmlmKGMpe2Muc2VsZWN0KCk7Cn1lbHNle2ouc2V0X3ZhbHVlKGVbYV0pOwp9Y29udGludWU7Cn19dmFyIGI9JHRlbGVyaWsuZmluZEVsZW1lbnQoKGghPW51bGwpP2g6bCxhKTsKaWYoYiE9bnVsbCl7aWYoYi50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJpbnB1dCIpe2lmKGIudHlwZSE9ImNoZWNrYm94IiYmYi50eXBlIT0icmFkaW8iKXtiLnZhbHVlPWVbYV07CmNvbnRpbnVlOwp9ZWxzZXtiLmNoZWNrZWQ9ZVthXTsKY29udGludWU7Cn19ZWxzZXtpZihiLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09InNwYW4iKXtiLmlubmVySFRNTD1lW2FdOwpjb250aW51ZTsKfWVsc2V7aWYoYi50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJ0ZXh0YXJlYSIpe2IuaW5uZXJIVE1MPWVbYV07CmNvbnRpbnVlOwp9ZWxzZXtpZihiLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09InNlbGVjdCIpe3ZhciBpPWIub3B0aW9uczsKZm9yKHZhciBnPTA7Cmc8aS5sZW5ndGg7CmcrKyl7aWYoaVtnXS52YWx1ZT09ZVthXSl7aVtnXS5zZWxlY3RlZD10cnVlOwp9fX19fX19fX0sX2dldEVkaXRGb3JtQ2VsbEJ5VW5pcXVlTmFtZTpmdW5jdGlvbihkLGEpe3ZhciBlPW51bGw7CnZhciBjPWQuZ2V0X2VsZW1lbnQoKS5uZXh0U2libGluZzsKaWYoYz09bnVsbCl7cmV0dXJuOwp9aWYoIWMudGFnTmFtZSl7cmV0dXJuOwp9aWYoYy50YWdOYW1lLnRvTG93ZXJDYXNlKCkhPSJ0ciIpe3JldHVybjsKfXZhciBnPWMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRkIik7CmZvcih2YXIgZj0wLGg9Zy5sZW5ndGg7CmY8aDsKZisrKXtpZighZ1tmXS5pZHx8Z1tmXS5pZD09IiIpe2NvbnRpbnVlOwp9dmFyIGI9Z1tmXS5pZC5zcGxpdCgiX18iKTsKaWYoYltiLmxlbmd0aC0xXSYmYltiLmxlbmd0aC0xXT09YS5nZXRfdW5pcXVlTmFtZSgpKXtlPWdbZl07CmJyZWFrOwp9fXJldHVybiBlOwp9LF9maWxsRWRpdG9yc0RhdGE6ZnVuY3Rpb24oZixhLGcpe3ZhciBiPWEuX2RhdGEuQ29sdW1uVHlwZTsKdmFyIGg9bnVsbDsKaWYoYS5fb3duZXIuX2RhdGEuRWRpdE1vZGU9PSJJblBsYWNlIil7aD10aGlzLmdldENlbGxCeUNvbHVtblVuaXF1ZU5hbWUoZixhLmdldF91bmlxdWVOYW1lKCkpOwp9ZWxzZXtoPXRoaXMuX2dldEVkaXRGb3JtQ2VsbEJ5VW5pcXVlTmFtZShmLGEpOwp9aWYoaD09bnVsbCl7cmV0dXJuOwp9aWYoYj09IkdyaWRCb3VuZENvbHVtbiIpe3ZhciBsPWguZ2V0RWxlbWVudHNCeVRhZ05hbWUoImlucHV0Iik7CmlmKGwubGVuZ3RoPjApe2xbMF0udmFsdWU9ZzsKfX1pZihiPT0iR3JpZERhdGVUaW1lQ29sdW1uIil7dmFyIGw9aC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaW5wdXQiKTsKZm9yKHZhciBkPTA7CmQ8bC5sZW5ndGg7CmQrKyl7dmFyIGU9JGZpbmQobFtkXS5pZCk7CmlmKGUhPW51bGwpe2Uuc2V0X3NlbGVjdGVkRGF0ZShnKTsKfX19aWYoYj09IkdyaWROdW1lcmljQ29sdW1uIil7dmFyIGw9aC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaW5wdXQiKTsKZm9yKHZhciBkPTA7CmQ8bC5sZW5ndGg7CmQrKyl7dmFyIGo9JGZpbmQobFtkXS5pZCk7CmlmKGohPW51bGwpe2ouc2V0X3ZhbHVlKGcpOwp9fX1pZihiPT0iR3JpZEhUTUxFZGl0b3JDb2x1bW4iKXt2YXIgbD1oLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0ZXh0YXJlYSIpOwpmb3IodmFyIGQ9MDsKZDxsLmxlbmd0aDsKZCsrKXt2YXIgaj0kZmluZChsW2RdLmlkKTsKaWYoaiE9bnVsbCl7ai5zZXRfaHRtbChnKTsKfX19aWYoYj09IkdyaWREcm9wRG93bkNvbHVtbiIpe3ZhciBsPWguZ2V0RWxlbWVudHNCeVRhZ05hbWUoImlucHV0Iik7CmZvcih2YXIgZD0wOwpkPGwubGVuZ3RoOwpkKyspe3ZhciBqPSRmaW5kKGxbZF0uaWQucmVwbGFjZSgiX0lucHV0IiwiIikpOwppZihqIT1udWxsKXt2YXIgYz1qLmZpbmRJdGVtQnlWYWx1ZShnKTsKaWYoYyl7Yy5zZWxlY3QoKTsKfX19dmFyIGk9aC5nZXRFbGVtZW50c0J5VGFnTmFtZSgib3B0aW9uIik7CmZvcih2YXIgZD0wOwpkPGkubGVuZ3RoOwpkKyspe2lmKGlbZF0udmFsdWU9PWcpe2lbZF0uc2VsZWN0ZWQ9dHJ1ZTsKfX19aWYoYj09IkdyaWRDaGVja0JveENvbHVtbiIpe3ZhciBsPWguZ2V0RWxlbWVudHNCeVRhZ05hbWUoImlucHV0Iik7CmlmKGwubGVuZ3RoPT0xJiZsWzBdLnR5cGU9PSJjaGVja2JveCIpe2xbMF0uY2hlY2tlZD1nOwp9fX0sZXh0cmFjdFZhbHVlc0Zyb21JdGVtOmZ1bmN0aW9uKHApe3A9dGhpcy5fZ2V0Um93QnlJbmRleE9ySXRlbUluZGV4SGllcmFyY2hpY2FsKHApOwppZihUZWxlcmlrLldlYi5VSS5HcmlkLkdldEZpcnN0UGFyZW50QnlUYWdOYW1lKHAsInRhYmxlIikhPT10aGlzLmdldF9lbGVtZW50KCkpe3JldHVybiBudWxsOwp9dGhpcy5nZXRfZGF0YUl0ZW1zKCk7CnZhciBzPSRmaW5kKHAuaWQpOwp2YXIgcT10aGlzLmdldF9jb2x1bW5zKCk7CnZhciB1PXt9Owpmb3IodmFyIHY9MCx4PXEubGVuZ3RoOwp2PHg7CnYrKyl7dmFyIGU9cVt2XTsKdmFyIHc9ZS5nZXRfdW5pcXVlTmFtZSgpOwp2YXIgbT1lLl9kYXRhLkNvbHVtblR5cGU7CnZhciBkPWUuX2RhdGEuRGF0YUZpZWxkOwp2YXIgZzsKaWYodGhpcy5fZGF0YS5FZGl0TW9kZSE9IkluUGxhY2UiKXt2YXIgYj1wLmlkLmluZGV4T2YoIl9fIik+LTE/cC5uZXh0U2libGluZzpwOwp2YXIgbj1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0ZCIpOwpmb3IodmFyIG89MCx0PW4ubGVuZ3RoOwpvPHQ7Cm8rKyl7aWYoIW5bb10uaWR8fG5bb10uaWQuaW5kZXhPZigiX18iKTwwKXtjb250aW51ZTsKfXZhciBoPW5bb10uaWQuc3BsaXQoIl9fIik7CmlmKGhbaC5sZW5ndGgtMV09PWUuZ2V0X3VuaXF1ZU5hbWUoKSl7Zz1uW29dOwpicmVhazsKfX19ZWxzZXtpZihzKXtnPXRoaXMuZ2V0Q2VsbEJ5Q29sdW1uVW5pcXVlTmFtZShzLHcpOwp9ZWxzZXtnPXRoaXMuX2dldENlbGxCeUNvbHVtblVuaXF1ZU5hbWVGcm9tVGFibGVSb3dFbGVtZW50KHAsdyk7Cn19aWYoIWcpe2NvbnRpbnVlOwp9aWYobT09IkdyaWRCb3VuZENvbHVtbiIpe3ZhciBmPWcuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImlucHV0Iik7CmlmKGYubGVuZ3RoPT0xKXt1W2RdPWZbMF0udmFsdWU7Cn19aWYobT09IkdyaWREYXRlVGltZUNvbHVtbiIpe3ZhciBmPWcuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImlucHV0Iik7CmZvcih2YXIgdD0wOwp0PGYubGVuZ3RoOwp0Kyspe3ZhciBjPSRmaW5kKGZbdF0uaWQpOwppZihjIT1udWxsKXt1W2RdPWMuZ2V0X3NlbGVjdGVkRGF0ZSgpOwp9fX1pZihtPT0iR3JpZE51bWVyaWNDb2x1bW4iKXt2YXIgZj1nLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJpbnB1dCIpOwpmb3IodmFyIHQ9MDsKdDxmLmxlbmd0aDsKdCsrKXt2YXIgYT0kZmluZChmW3RdLmlkKTsKaWYoYSE9bnVsbCl7dVtkXT1hLmdldF92YWx1ZSgpOwp9fX1pZihtPT0iR3JpZEhUTUxFZGl0b3JDb2x1bW4iKXt2YXIgZj1nLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0ZXh0YXJlYSIpOwpmb3IodmFyIHQ9MDsKdDxmLmxlbmd0aDsKdCsrKXt2YXIgYT0kZmluZChmW3RdLm5hbWUucmVwbGFjZSgvXCQvZ2ksIl8iKSl8fCRmaW5kKGZbdF0uaWQpOwppZihhJiZhLmdldF9odG1sKXt1W2RdPWEuZ2V0X2h0bWwoKTsKfX19aWYobT09IkdyaWREcm9wRG93bkNvbHVtbiIpe3ZhciBmPWcuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImlucHV0Iik7CmZvcih2YXIgdD0wOwp0PGYubGVuZ3RoOwp0Kyspe3ZhciBhPSRmaW5kKGZbdF0uaWQucmVwbGFjZSgiX0lucHV0IiwiIikpOwppZihhIT1udWxsKXt1W2RdPWEuZ2V0X3ZhbHVlKCk7Cn19dmFyIHI9Zy5nZXRFbGVtZW50c0J5VGFnTmFtZSgic2VsZWN0Iik7CmlmKHIubGVuZ3RoPjApe3ZhciB5PXJbMF07CnVbZF09eS5vcHRpb25zW3kuc2VsZWN0ZWRJbmRleF0udmFsdWU7Cn19aWYobT09IkdyaWRDaGVja0JveENvbHVtbiIpe3ZhciBmPWcuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImlucHV0Iik7CmlmKGYubGVuZ3RoPT0xJiZmWzBdLnR5cGU9PSJjaGVja2JveCIpe3VbZF09ZlswXS5jaGVja2VkOwp9fX1yZXR1cm4gdTsKfSxleHRyYWN0T2xkVmFsdWVzRnJvbUl0ZW06ZnVuY3Rpb24oYil7Yj10aGlzLl9nZXRSb3dCeUluZGV4T3JJdGVtSW5kZXhIaWVyYXJjaGljYWwoYik7CnRoaXMuZ2V0X2RhdGFJdGVtcygpOwp2YXIgYT0kZmluZChiLmlkKTsKdmFyIGM9e307CmlmKGEhPW51bGwpe2M9YS5nZXRfZGF0YUl0ZW0oKTsKfXJldHVybiBjOwp9LGV4dHJhY3RLZXlzRnJvbUl0ZW06ZnVuY3Rpb24oYil7dmFyIGE9e307CmI9dGhpcy5fZ2V0Um93QnlJbmRleE9ySXRlbUluZGV4SGllcmFyY2hpY2FsKGIpOwppZihiJiZiLmlkJiZiLmlkLmluZGV4T2YoIl9fIik+LTEpe3ZhciBkPWIuaWQuc3BsaXQoIl9fIilbMV07CmlmKHRoaXMuX293bmVyLl9jbGllbnRLZXlWYWx1ZXMmJnRoaXMuX293bmVyLl9jbGllbnRLZXlWYWx1ZXNbZF0pe3ZhciBlPXRoaXMuX293bmVyLl9jbGllbnRLZXlWYWx1ZXNbZF07CmZvcih2YXIgYyBpbiBlKXthW2NdPWVbY107Cn19fXJldHVybiBhOwp9LGV4cGFuZEl0ZW06ZnVuY3Rpb24oYil7Yj10aGlzLl9nZXRSb3dCeUluZGV4T3JJdGVtSW5kZXhIaWVyYXJjaGljYWwoYik7CnZhciBhPTA7CmlmKHRoaXMuX2RhdGEuX2NvbHVtbnNEYXRhJiZ0aGlzLl9kYXRhLl9jb2x1bW5zRGF0YS5sZW5ndGg+MCYmdGhpcy5fZGF0YS5fY29sdW1uc0RhdGFbMF0uQ29sdW1uVHlwZT09IkdyaWRHcm91cFNwbGl0dGVyQ29sdW1uIil7YT0xOwp9dmFyIGM9Yi5jZWxsc1thXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaW5wdXQiKVswXTsKaWYoYz09dW5kZWZpbmVkKXtjPWIuY2VsbHNbYV0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoImltZyIpWzBdOwp9dGhpcy5fZW5zdXJlRXhwYW5kQ29sbGFwc2VCdXR0b25zKGMsZmFsc2UpOwpyZXR1cm4gdGhpcy5fZXhwYW5kUm93KGIpOwp9LF9leHBhbmRSb3c6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuX293bmVyLkNsaWVudFNldHRpbmdzLkFsbG93RXhwYW5kQ29sbGFwc2Upe3JldHVybiBmYWxzZTsKfXZhciBkPWE7CnZhciBmPWQuaWQuc3BsaXQoIl9fIilbMV07CnZhciBoPTE7CmlmKCEkZmluZChkLmlkKSl7dmFyIG09JGZpbmQoZC5pZC5zcGxpdCgiX18iKVswXSk7CmlmKG0pe20uZ2V0X2RhdGFJdGVtcygpOwp9fXZhciBnPSRmaW5kKGQuaWQpOwppZihnJiZnLmdldF9pc0luRWRpdE1vZGUoKSYmdGhpcy5fZGF0YS5FZGl0TW9kZSE9IkluUGxhY2UiKXtoPTI7Cn12YXIgaT10aGlzLl9kYXRhLmhhc0RldGFpbEl0ZW1UZW1wbGF0ZT8xOjA7CnZhciBiPWQucGFyZW50Tm9kZS5yb3dzW2Quc2VjdGlvblJvd0luZGV4K2graV07CmlmKGImJmIuc3R5bGUuZGlzcGxheT09Im5vbmUiKXt2YXIgZT1uZXcgVGVsZXJpay5XZWIuVUkuR3JpZERhdGFJdGVtQ2FuY2VsRXZlbnRBcmdzKGQsbnVsbCk7CmUuZ2V0X25lc3RlZFZpZXdJdGVtPWZ1bmN0aW9uKCl7cmV0dXJuIGI7Cn07CnRoaXMuX293bmVyLnJhaXNlX2hpZXJhcmNoeUV4cGFuZGluZyhlKTsKaWYoZS5nZXRfY2FuY2VsKCkpe3JldHVybiBmYWxzZTsKfXZhciBjPSRmaW5kKGQuaWQpOwppZihjKXtjLl9leHBhbmRlZD10cnVlOwp9Yi5zdHlsZS5kaXNwbGF5PSh3aW5kb3cubmV0c2NhcGUpPyJ0YWJsZS1yb3ciOiIiOwp2YXIgZT1uZXcgVGVsZXJpay5XZWIuVUkuR3JpZERhdGFJdGVtRXZlbnRBcmdzKGQsbnVsbCk7CmUuZ2V0X25lc3RlZFZpZXdJdGVtPWZ1bmN0aW9uKCl7cmV0dXJuIGI7Cn07CnRoaXMuX293bmVyLnJhaXNlX2hpZXJhcmNoeUV4cGFuZGVkKGUpOwpBcnJheS5hZGQodGhpcy5fb3duZXIuX2V4cGFuZGVkSXRlbXMsZik7CnRoaXMuX293bmVyLnVwZGF0ZUNsaWVudFN0YXRlKCk7Cn1pZih0aGlzLmdldF9lbGVtZW50KCkucGFyZW50Tm9kZS5wYXJlbnROb2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09InRyIil7aWYodGhpcy5nZXRfaWQoKSE9dGhpcy5fb3duZXIuX21hc3RlckNsaWVudElEKXt2YXIgaj10aGlzLmdldF9lbGVtZW50KCkucGFyZW50Tm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZTsKdmFyIGw9JGZpbmQoai5pZCk7CnZhciBrPWoucm93c1t0aGlzLmdldF9lbGVtZW50KCkucGFyZW50Tm9kZS5wYXJlbnROb2RlLnJvd0luZGV4LTFdOwppZihrKXtsLl9leHBhbmRSb3coayk7Cn19fXJldHVybiB0cnVlOwp9LGNvbGxhcHNlSXRlbTpmdW5jdGlvbihiKXtiPXRoaXMuX2dldFJvd0J5SW5kZXhPckl0ZW1JbmRleEhpZXJhcmNoaWNhbChiKTsKdmFyIGE9MDsKaWYodGhpcy5fZGF0YS5fY29sdW1uc0RhdGEmJnRoaXMuX2RhdGEuX2NvbHVtbnNEYXRhLmxlbmd0aD4wJiZ0aGlzLl9kYXRhLl9jb2x1bW5zRGF0YVswXS5Db2x1bW5UeXBlPT0iR3JpZEdyb3VwU3BsaXR0ZXJDb2x1bW4iKXthPTE7Cn12YXIgYz1iLmNlbGxzW2FdLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJpbnB1dCIpWzBdOwppZihjPT11bmRlZmluZWQpe2M9Yi5jZWxsc1thXS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaW1nIilbMF07Cn10aGlzLl9lbnN1cmVFeHBhbmRDb2xsYXBzZUJ1dHRvbnMoYyx0cnVlKTsKcmV0dXJuIHRoaXMuX2NvbGxhcHNlUm93KGIpOwp9LF9wZXJmb3JtQ29sbGFwc2VJdGVtOmZ1bmN0aW9uKGIpe2I9dGhpcy5fZ2V0Um93QnlJbmRleE9ySXRlbUluZGV4SGllcmFyY2hpY2FsKGIpOwp2YXIgYT0wOwppZih0aGlzLl9kYXRhLl9jb2x1bW5zRGF0YSYmdGhpcy5fZGF0YS5fY29sdW1uc0RhdGEubGVuZ3RoPjAmJnRoaXMuX2RhdGEuX2NvbHVtbnNEYXRhWzBdLkNvbHVtblR5cGU9PSJHcmlkR3JvdXBTcGxpdHRlckNvbHVtbiIpe2E9MTsKfXZhciBlPWIuY2VsbHNbYV0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoImlucHV0IilbMF07CmlmKGU9PXVuZGVmaW5lZCl7ZT1iLmNlbGxzW2FdLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJpbWciKVswXTsKfXRoaXMuX2Vuc3VyZUV4cGFuZENvbGxhcHNlQnV0dG9ucyhlLHRydWUpOwppZighJGZpbmQoYi5pZCkpe3ZhciBkPSRmaW5kKGIuaWQuc3BsaXQoIl9fIilbMF0pOwp0aGlzLl9vd25lci5fZW5zdXJlRGF0YUl0ZW1zQ3JlYXRlZChkKTsKfXZhciBjPSRmaW5kKGIuaWQpLmdldF9pc0luRWRpdE1vZGUoKTsKaWYoYyl7aWYoYi5uZXh0U2libGluZyl7aWYodGhpcy5fZGF0YS5oYXNEZXRhaWxJdGVtVGVtcGxhdGUpe2I9Yi5uZXh0U2libGluZzsKfWlmKGIubmV4dFNpYmxpbmcpe2I9Yi5uZXh0U2libGluZzsKfX19cmV0dXJuIHRoaXMuX2NvbGxhcHNlUm93KGIpOwp9LF9jb2xsYXBzZVJvdzpmdW5jdGlvbihiKXtpZighdGhpcy5fb3duZXIuQ2xpZW50U2V0dGluZ3MuQWxsb3dFeHBhbmRDb2xsYXBzZSl7cmV0dXJuIGZhbHNlOwp9dmFyIGg9YjsKdmFyIGE9aC5pZC5zcGxpdCgiX18iKVsxXTsKdmFyIGk9MTsKaWYodGhpcy5fb3duZXIuX2VkaXRJbmRleGVzLmxlbmd0aD4wJiZ0aGlzLl9oaWVyYXJjaHlMb2FkTW9kZT09IkNsaWVudCImJnRoaXMuX2RhdGEuRWRpdE1vZGUhPSJJblBsYWNlIil7dmFyIGc9dGhpcy5nZXRfZGF0YUl0ZW1zKCk7CmlmKCRmaW5kKGguaWQpLmdldF9pc0luRWRpdE1vZGUoKSl7aSs9MTsKfX12YXIgZT10aGlzLl9kYXRhLmhhc0RldGFpbEl0ZW1UZW1wbGF0ZT8xOjA7CnZhciBmPWgucGFyZW50Tm9kZS5yb3dzW2guc2VjdGlvblJvd0luZGV4K2krZV07CmlmKGYmJmYuc3R5bGUuZGlzcGxheSE9Im5vbmUiKXt2YXIgYz1uZXcgVGVsZXJpay5XZWIuVUkuR3JpZERhdGFJdGVtQ2FuY2VsRXZlbnRBcmdzKGgsbnVsbCk7CmMuZ2V0X25lc3RlZFZpZXdJdGVtPWZ1bmN0aW9uKCl7cmV0dXJuIGY7Cn07CnRoaXMuX293bmVyLnJhaXNlX2hpZXJhcmNoeUNvbGxhcHNpbmcoYyk7CmlmKGMuZ2V0X2NhbmNlbCgpKXtyZXR1cm4gZmFsc2U7Cn12YXIgZD0kZmluZChoLmlkKTsKaWYoZCl7ZC5fZXhwYW5kZWQ9ZmFsc2U7Cn1mLnN0eWxlLmRpc3BsYXk9Im5vbmUiOwp2YXIgYz1uZXcgVGVsZXJpay5XZWIuVUkuR3JpZERhdGFJdGVtRXZlbnRBcmdzKGgsbnVsbCk7CmMuZ2V0X25lc3RlZFZpZXdJdGVtPWZ1bmN0aW9uKCl7cmV0dXJuIGY7Cn07CnRoaXMuX293bmVyLnJhaXNlX2hpZXJhcmNoeUNvbGxhcHNlZChjKTsKQXJyYXkuYWRkKHRoaXMuX293bmVyLl9leHBhbmRlZEl0ZW1zLGEpOwp0aGlzLl9vd25lci51cGRhdGVDbGllbnRTdGF0ZSgpOwp9cmV0dXJuIHRydWU7Cn0sX2Vuc3VyZUV4cGFuZENvbGxhcHNlQnV0dG9uczpmdW5jdGlvbihjLGEpe2lmKCFjKXtyZXR1cm47Cn1pZihhKXtpZihjLnRpdGxlPT10aGlzLl9vd25lci5faGllcmFyY2h5U2V0dGluZ3MuQ29sbGFwc2VUb29sdGlwKXtjLnRpdGxlPXRoaXMuX293bmVyLl9oaWVyYXJjaHlTZXR0aW5ncy5FeHBhbmRUb29sdGlwOwp9aWYoYy5zcmMpe3ZhciBiPXRoaXMuZ2V0X2NvbHVtbnMoKVtjLnBhcmVudE5vZGUuY2VsbEluZGV4XTsKaWYoYil7Yy5zcmM9Yi5fZGF0YS5FeHBhbmRJbWFnZVVybDsKfX1lbHNle3ZhciBiPXRoaXMuZ2V0X2NvbHVtbnMoKVtjLnBhcmVudE5vZGUuY2VsbEluZGV4XTsKaWYoYiYmYy5jbGFzc05hbWUuaW5kZXhPZigicmdDb2xsYXBzZSIpIT09LTEpe2MuY2xhc3NOYW1lPSJyZ0V4cGFuZCI7Cn1pZihjLnRleHRDb250ZW50JiZjLnRleHRDb250ZW50PT0iLSIpe2MudGV4dENvbnRlbnQ9IisiOwp9fWlmKHRoaXMuX293bmVyLmdldF9lbmFibGVBcmlhU3VwcG9ydCgpKXtjLnNldEF0dHJpYnV0ZSgiYXJpYS1leHBhbmRlZCIsImZhbHNlIik7CmMucGFyZW50Tm9kZS5wYXJlbnROb2RlLnNldEF0dHJpYnV0ZSgiYXJpYS1leHBhbmRlZCIsImZhbHNlIik7Cn19ZWxzZXtpZihjLnRpdGxlPT10aGlzLl9vd25lci5faGllcmFyY2h5U2V0dGluZ3MuRXhwYW5kVG9vbHRpcCl7Yy50aXRsZT10aGlzLl9vd25lci5faGllcmFyY2h5U2V0dGluZ3MuQ29sbGFwc2VUb29sdGlwOwp9aWYoYy5zcmMpe3ZhciBiPXRoaXMuZ2V0X2NvbHVtbnMoKVtjLnBhcmVudE5vZGUuY2VsbEluZGV4XTsKaWYoYil7Yy5zcmM9Yi5fZGF0YS5Db2xsYXBzZUltYWdlVXJsOwp9fWVsc2V7dmFyIGI9dGhpcy5nZXRfY29sdW1ucygpW2MucGFyZW50Tm9kZS5jZWxsSW5kZXhdOwppZihiJiZjLmNsYXNzTmFtZS5pbmRleE9mKCJyZ0V4cGFuZCIpIT09LTEpe2MuY2xhc3NOYW1lPSJyZ0NvbGxhcHNlIjsKfWlmKGMudGV4dENvbnRlbnQmJmMudGV4dENvbnRlbnQ9PSIrIil7Yy50ZXh0Q29udGVudD0iLSI7Cn19aWYodGhpcy5fb3duZXIuZ2V0X2VuYWJsZUFyaWFTdXBwb3J0KCkpe2Muc2V0QXR0cmlidXRlKCJhcmlhLWV4cGFuZGVkIiwidHJ1ZSIpOwpjLnBhcmVudE5vZGUucGFyZW50Tm9kZS5zZXRBdHRyaWJ1dGUoImFyaWEtZXhwYW5kZWQiLCJ0cnVlIik7Cn19fSxfdG9nZ2xlRXhwYW5kOmZ1bmN0aW9uKGksYyl7aWYoIXRoaXMuX293bmVyLkNsaWVudFNldHRpbmdzLkFsbG93RXhwYW5kQ29sbGFwc2Upe3JldHVybjsKfXZhciBhPWkucGFyZW50Tm9kZS5wYXJlbnROb2RlOwp2YXIgaD0xOwppZih0aGlzLl9vd25lci5fZWRpdEluZGV4ZXMubGVuZ3RoPjAmJnRoaXMuX2hpZXJhcmNoeUxvYWRNb2RlPT0iQ2xpZW50IiYmdGhpcy5fZGF0YS5FZGl0TW9kZSE9IkluUGxhY2UiKXt2YXIgZj10aGlzLmdldF9kYXRhSXRlbXMoKTsKaWYoJGZpbmQoYS5pZCkuZ2V0X2lzSW5FZGl0TW9kZSgpKXtoKz0xOwp9fXZhciBiPXRoaXMuX2RhdGEuaGFzRGV0YWlsSXRlbVRlbXBsYXRlPzE6MDsKdmFyIGQ9YS5wYXJlbnROb2RlLnJvd3NbYS5zZWN0aW9uUm93SW5kZXgraCtiXTsKdmFyIGc9JGZpbmQodGhpcy5fb3duZXIuZ2V0X2lkKCkpOwppZihkLnN0eWxlLmRpc3BsYXkhPSJub25lIil7aWYoIXRoaXMuX2NvbGxhcHNlUm93KGEpKXtyZXR1cm4gZmFsc2U7Cn10aGlzLl9lbnN1cmVFeHBhbmRDb2xsYXBzZUJ1dHRvbnMoaSx0cnVlKTsKfWVsc2V7aWYoIXRoaXMuX2V4cGFuZFJvdyhhKSl7cmV0dXJuIGZhbHNlOwp9dGhpcy5fZW5zdXJlRXhwYW5kQ29sbGFwc2VCdXR0b25zKGksZmFsc2UpOwp9aWYoZy5DbGllbnRTZXR0aW5ncy5BbGxvd0tleWJvYXJkTmF2aWdhdGlvbil7Zy5nZXRfZWxlbWVudCgpLmZvY3VzKCk7Cn1pZihnLkNsaWVudFNldHRpbmdzLkFsbG93S2V5Ym9hcmROYXZpZ2F0aW9ufHxnLmdldF9hbGxvd011bHRpUm93U2VsZWN0aW9uKCkpe2cuX2dldFBvc2l0aW9uZWREYXRhSXRlbXModHJ1ZSk7Cn19LF9wcmV2aW91c1JvdzpmdW5jdGlvbihiKXt2YXIgYT1iLnByZXZpb3VzU2libGluZzsKaWYodGhpcy5fZGF0YS5oYXNEZXRhaWxJdGVtVGVtcGxhdGUmJmEuY2xhc3NOYW1lJiYoYS5jbGFzc05hbWUuaW5kZXhPZigicmdSb3ciKSE9LTF8fGEuY2xhc3NOYW1lLmluZGV4T2YoInJnQWx0Um93IikhPS0xKSl7YT1iLnByZXZpb3VzU2libGluZzsKfXJldHVybiBhOwp9LF9wcmV2aW91c0RhdGFJdGVtRWxlbWVudDpmdW5jdGlvbihiKXt2YXIgYT10aGlzOwppZihhLl9pc0RhdGFJdGVtRWxlbWVudChiKSl7cmV0dXJuIGI7Cn13aGlsZSghYS5faXNEYXRhSXRlbUVsZW1lbnQoYikmJmIpe2I9Yi5wcmV2aW91c1NpYmxpbmc7Cn1pZighYS5faXNEYXRhSXRlbUVsZW1lbnQoYikpe3JldHVybiBudWxsOwp9cmV0dXJuIGI7Cn0sX2lzRGF0YUl0ZW1FbGVtZW50OmZ1bmN0aW9uKGEpe3JldHVybihhJiYoYS5jbGFzc05hbWUmJigoYS5jbGFzc05hbWUuaW5kZXhPZigicmdSb3ciKSE9LTF8fGEuY2xhc3NOYW1lLmluZGV4T2YoInJnQWx0Um93IikhPS0xKSYmYS5pZC5pbmRleE9mKCJfXyIpIT0tMSkpKTsKfSxfdG9nZ2xlR3JvdXBzRXhwYW5kOmZ1bmN0aW9uKG4seSx4LEYpe3ZhciBtPWZhbHNlOwppZigheCl7bT10cnVlOwp9dmFyIGs9bjsKdmFyIGM9dHlwZW9mKHgpPT09InVuZGVmaW5lZCI/ZmFsc2U6dHJ1ZTsKaWYodHlwZW9mKHgpPT09InVuZGVmaW5lZCIpe3g9azsKfWlmKCF0aGlzLl9vd25lci5DbGllbnRTZXR0aW5ncy5BbGxvd0dyb3VwRXhwYW5kQ29sbGFwc2Upe3JldHVybjsKfXZhciB3PWsuaWQuc3BsaXQoIl9fIilbMF07CnZhciB1PSRmaW5kKHcpOwp2YXIgcT1rLmlkLnNwbGl0KCJfXyIpWzFdOwp2YXIgaD1rLmlkLnNwbGl0KCJfXyIpWzJdOwppZighdGhpcy5fb3JpZ2luYWxHcm91cExldmVsKXt0aGlzLl9vcmlnaW5hbEdyb3VwTGV2ZWw9aDsKfWlmKHBhcnNlSW50KGgsMTApPHBhcnNlSW50KHRoaXMuX29yaWdpbmFsR3JvdXBMZXZlbCl8fG0pe3RoaXMuX29yaWdpbmFsR3JvdXBMZXZlbD1oOwp9dmFyIGE9ay5wYXJlbnROb2RlLmNlbGxJbmRleDsKdmFyIGY9ay5wYXJlbnROb2RlLnBhcmVudE5vZGUuc2VjdGlvblJvd0luZGV4Owp2YXIgRT11LmdldF9lbGVtZW50KCkudEJvZGllc1swXTsKdmFyIHQ9dGhpcy5nZXRfY29sdW1ucygpW2FdOwp2YXIgcj1uZXcgU3lzLkNhbmNlbEV2ZW50QXJncygpOwp2YXIgZz1mYWxzZTsKaWYodGhpcy5faXNHcm91cEJ1dHRvbkNvbGxhcHNlKGspKXtnPXRydWU7Cn1pZih0eXBlb2YoRikhPT0idW5kZWZpbmVkIil7Zz1GOwp9aWYoIWMpe2lmKGcpe3RoaXMuX293bmVyLnJhaXNlX2dyb3VwQ29sbGFwc2luZyhyKTsKfWVsc2V7dGhpcy5fb3duZXIucmFpc2VfZ3JvdXBFeHBhbmRpbmcocik7Cn19aWYoci5nZXRfY2FuY2VsKCkpe3JldHVybiBmYWxzZTsKfWlmKGs9PT14KXtpZih0KXtpZihrLnNyYyl7aWYoIWcpe2suc3JjPXQuX2RhdGEuQ29sbGFwc2VJbWFnZVVybDsKay50aXRsZT11Ll9vd25lci5fZ3JvdXBpbmdTZXR0aW5ncy5Db2xsYXBzZVRvb2x0aXA7CmlmKHRoaXMuX293bmVyLmdldF9lbmFibGVBcmlhU3VwcG9ydCgpKXtrLnNldEF0dHJpYnV0ZSgiYXJpYS1leHBhbmRlZCIsInRydWUiKTsKay5wYXJlbnROb2RlLnBhcmVudE5vZGUuc2V0QXR0cmlidXRlKCJhcmlhLWV4cGFuZGVkIiwidHJ1ZSIpOwp9fWVsc2V7ay5zcmM9dC5fZGF0YS5FeHBhbmRJbWFnZVVybDsKay50aXRsZT11Ll9vd25lci5fZ3JvdXBpbmdTZXR0aW5ncy5FeHBhbmRUb29sdGlwOwppZih0aGlzLl9vd25lci5nZXRfZW5hYmxlQXJpYVN1cHBvcnQoKSl7ay5zZXRBdHRyaWJ1dGUoImFyaWEtZXhwYW5kZWQiLCJmYWxzZSIpOwprLnBhcmVudE5vZGUucGFyZW50Tm9kZS5zZXRBdHRyaWJ1dGUoImFyaWEtZXhwYW5kZWQiLCJmYWxzZSIpOwp9fX1lbHNle2lmKCFnKXtrLmNsYXNzTmFtZT0icmdDb2xsYXBzZSI7CmsudGl0bGU9dS5fb3duZXIuX2dyb3VwaW5nU2V0dGluZ3MuQ29sbGFwc2VUb29sdGlwOwppZih0aGlzLl9vd25lci5nZXRfZW5hYmxlQXJpYVN1cHBvcnQoKSl7ay5zZXRBdHRyaWJ1dGUoImFyaWEtZXhwYW5kZWQiLCJ0cnVlIik7CmsucGFyZW50Tm9kZS5wYXJlbnROb2RlLnNldEF0dHJpYnV0ZSgiYXJpYS1leHBhbmRlZCIsInRydWUiKTsKfX1lbHNle2suY2xhc3NOYW1lPSJyZ0V4cGFuZCI7CmsudGl0bGU9dS5fb3duZXIuX2dyb3VwaW5nU2V0dGluZ3MuRXhwYW5kVG9vbHRpcDsKaWYodGhpcy5fb3duZXIuZ2V0X2VuYWJsZUFyaWFTdXBwb3J0KCkpe2suc2V0QXR0cmlidXRlKCJhcmlhLWV4cGFuZGVkIiwiZmFsc2UiKTsKay5wYXJlbnROb2RlLnBhcmVudE5vZGUuc2V0QXR0cmlidXRlKCJhcmlhLWV4cGFuZGVkIiwiZmFsc2UiKTsKfX19fX12YXIgej0ibm9uZSI7CmlmKCFnJiZ0aGlzLl9pc0dyb3VwQnV0dG9uQ29sbGFwc2Uoaykpe3o9KHdpbmRvdy5uZXRzY2FwZSk/InRhYmxlLXJvdyI6IiI7Cn1pZih0aGlzLl9vd25lci5fZ3JvdXBpbmdTZXR0aW5ncy5SZXRhaW5Hcm91cEZvb3RlcnNWaXNpYmlsaXR5JiYheS5ncm91cExldmVsKXt5Lmdyb3VwTGV2ZWw9aDsKfXZhciBiPWg7CnZhciB2PWZhbHNlOwp2YXIgQj1wYXJzZUludCh0aGlzLl9ncm91cExldmVsc0NvdW50KS1wYXJzZUludCh0aGlzLl9vcmlnaW5hbEdyb3VwTGV2ZWwsMTApOwp2YXIgST1wYXJzZUludCh0aGlzLl9ncm91cExldmVsc0NvdW50LDEwKS1wYXJzZUludChoLDEwKTsKZm9yKHZhciBkPWYrMTsKZDxFLnJvd3MubGVuZ3RoOwpkKyspe3ZhciBEPUUucm93c1tkXTsKdmFyIEM9dGhpcy5fcHJldmlvdXNSb3coRS5yb3dzW2RdKTsKaWYoRC5jbGFzc05hbWUuaW5kZXhPZigicmdSb3ciKTwwJiZELmNsYXNzTmFtZS5pbmRleE9mKCJyZ0FsdFJvdyIpPDAmJkMmJkMuaWQpe3ZhciBHPXRoaXMuX2dldEV4cGFuZEJ1dHRvbihDKTsKaWYoRyYmIXRoaXMuX2lzR3JvdXBCdXR0b25Db2xsYXBzZShHKSYmRC5jbGFzc05hbWUuaW5kZXhPZigicmdGb290ZXIiKT09LTEpe2NvbnRpbnVlOwp9fXZhciBvOwppZihELmlkfHxELmNsYXNzTmFtZS5pbmRleE9mKCJyZ0dyb3VwSGVhZGVyIikhPT0tMSl7bz10aGlzLl9nZXRHcm91cEV4cGFuZEJ1dHRvbihEKTsKfWlmKCFvKXtpZihiPT1oKXtpZihCPjApe0Quc3R5bGUuZGlzcGxheT16Owp9aWYoRC5jbGFzc05hbWUuaW5kZXhPZigicmdGb290ZXIiKSE9LTEpe0ItLTsKfWVsc2V7RC5zdHlsZS5kaXNwbGF5PXo7Cn19aWYoej09IiJ8fHo9PSJ0YWJsZS1yb3ciKXtpZihELmNsYXNzTmFtZS5pbmRleE9mKCJyZ0Zvb3RlciIpIT0tMSl7dmFyIEE9MTsKaWYodGhpcy5fb3duZXIuX2dyb3VwaW5nU2V0dGluZ3MuUmV0YWluR3JvdXBGb290ZXJzVmlzaWJpbGl0eSl7QT0yOwp9aWYoSTw9QSl7RC5zdHlsZS5kaXNwbGF5PXo7Cn1JLS07Cn19fWVsc2V7Yj1vLmlkLnNwbGl0KCJfXyIpWzJdOwppZihiPT1ofHwocGFyc2VJbnQoYik8cGFyc2VJbnQoaCkpKXtpZih5Lmdyb3VwTGV2ZWwmJmg9PXkuZ3JvdXBMZXZlbCYmej09Im5vbmUiKXt2YXIgSD1oLWIrMTsKZm9yKHZhciBzPTA7CnM8SDsKcysrKXt2YXIgRD1FLnJvd3NbZC1zLTFdOwppZighRC5pZCl7RC5zdHlsZS5kaXNwbGF5PSIiOwp9fX1icmVhazsKfWVsc2V7aWYocGFyc2VJbnQoYiktcGFyc2VJbnQoaCk9PTEpe2lmKG8uc3JjPT1rLnNyY3x8KGsuY2xhc3NOYW1lPT1vLmNsYXNzTmFtZSkpe2lmKG89PT14KXtpZih6PT0ibm9uZSIpe2lmKGsuc3JjKXtvLnNyYz10Ll9kYXRhLkNvbGxhcHNlSW1hZ2VVcmw7Cn1lbHNle28uY2xhc3NOYW1lPSJyZ0NvbGxhcHNlIjsKfX19dmFyIGw9ZmFsc2U7CmlmKCFnKXtpZighdGhpcy5faXNHcm91cEJ1dHRvbkNvbGxhcHNlKGspKXtsPXRydWU7Cn19ZWxzZXtsPWc7Cn10aGlzLl90b2dnbGVHcm91cHNFeHBhbmQobyx5LGssbCk7Ckk9cGFyc2VJbnQodGhpcy5fZ3JvdXBMZXZlbHNDb3VudCwxMCktcGFyc2VJbnQoaCwxMCk7Cn1ELnN0eWxlLmRpc3BsYXk9ejsKfX19aWYoZD09RS5yb3dzLmxlbmd0aC0xKXt2PXRydWU7Cn19aWYoeS5ncm91cExldmVsJiZ2JiZ5Lmdyb3VwTGV2ZWw9PWgmJno9PSJub25lIil7dmFyIEg9aCoxKzE7CmZvcih2YXIgcz0wOwpzPEg7CnMrKyl7dmFyIEQ9RS5yb3dzW0Uucm93cy5sZW5ndGgtcy0xXTsKaWYoIUQuaWQpe0Quc3R5bGUuZGlzcGxheT0iIjsKfX19aWYoaz09PXgpe2lmKEFycmF5LmNvbnRhaW5zKHRoaXMuX293bmVyLl9leHBhbmRlZEdyb3VwSXRlbXMsdS5fZGF0YS5VbmlxdWVJRCsiISIrcSkpe0FycmF5LnJlbW92ZSh0aGlzLl9vd25lci5fZXhwYW5kZWRHcm91cEl0ZW1zLHUuX2RhdGEuVW5pcXVlSUQrIiEiK3EpOwp9ZWxzZXtBcnJheS5hZGQodGhpcy5fb3duZXIuX2V4cGFuZGVkR3JvdXBJdGVtcyx1Ll9kYXRhLlVuaXF1ZUlEKyIhIitxKTsKfX10aGlzLl9vd25lci51cGRhdGVDbGllbnRTdGF0ZSgpOwp2YXIgcj1uZXcgU3lzLkV2ZW50QXJncygpOwppZighYyl7aWYoZyl7dGhpcy5fb3duZXIucmFpc2VfZ3JvdXBDb2xsYXBzZWQocik7Cn1lbHNle3RoaXMuX293bmVyLnJhaXNlX2dyb3VwRXhwYW5kZWQocik7Cn19dmFyIHA9JGZpbmQodGhpcy5fb3duZXIuZ2V0X2lkKCkpOwpwLl9nZXRQb3NpdGlvbmVkRGF0YUl0ZW1zKHRydWUpOwp9LF9pc0dyb3VwQnV0dG9uQ29sbGFwc2U6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wYXJlbnROb2RlLmNlbGxJbmRleDsKdmFyIGM9YS5wYXJlbnROb2RlLnBhcmVudE5vZGUuc2VjdGlvblJvd0luZGV4Owp2YXIgZD10aGlzLmdldF9jb2x1bW5zKClbYl07CnZhciBlPWQuX2RhdGEuQ29sbGFwc2VJbWFnZVVybDsKaWYoKGEuY2xhc3NOYW1lJiZhLmNsYXNzTmFtZS5pbmRleE9mKCJyZ0NvbGxhcHNlIikhPT0tMSl8fChhLnNyYyYmYS5zcmMuaW5kZXhPZihlKSE9PS0xKSl7cmV0dXJuIHRydWU7Cn1yZXR1cm4gZmFsc2U7Cn0sX2dldEdyb3VwRXhwYW5kQnV0dG9uOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9maW5kQnV0dG9uQnlDbGlja1NjcmlwdChhLCJfdG9nZ2xlR3JvdXBzRXhwYW5kIik7Cn0sX2dldEV4cGFuZEJ1dHRvbjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fZmluZEJ1dHRvbkJ5Q2xpY2tTY3JpcHQoYSwiX3RvZ2dsZUV4cGFuZCIpOwp9LF9maW5kQnV0dG9uQnlDbGlja1NjcmlwdDpmdW5jdGlvbihiLGMpe3ZhciBkPW51bGw7CnZhciBqPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImltZyIpOwpmb3IodmFyIGY9MCxoPWoubGVuZ3RoOwpmPGg7CmYrKyl7dmFyIGc9altmXTsKaWYoZy5vbmNsaWNrIT1udWxsJiZnLm9uY2xpY2sudG9TdHJpbmcoKS5pbmRleE9mKGMpIT0tMSl7ZD1nOwpicmVhazsKfX12YXIgYT1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJpbnB1dCIpOwpmb3IodmFyIGY9MCxoPWEubGVuZ3RoOwpmPGg7CmYrKyl7dmFyIGU9YVtmXTsKaWYoZS5vbmNsaWNrIT1udWxsJiZlLm9uY2xpY2sudG9TdHJpbmcoKS5pbmRleE9mKGMpIT0tMSl7ZD1lOwpicmVhazsKfX1yZXR1cm4gZDsKfSxlZGl0SXRlbTpmdW5jdGlvbihiKXtiPXRoaXMuX2dldFJvd0J5SW5kZXhPckl0ZW1JbmRleEhpZXJhcmNoaWNhbChiKTsKdmFyIGE9Yi5pZC5zcGxpdCgiX18iKVsxXTsKaWYoIXRoaXMuZmlyZUNvbW1hbmQoIkVkaXQiLGEpKXtyZXR1cm4gZmFsc2U7Cn19LHVwZGF0ZUl0ZW06ZnVuY3Rpb24oYil7Yj10aGlzLl9nZXRSb3dCeUluZGV4T3JJdGVtSW5kZXhIaWVyYXJjaGljYWwoYik7CnZhciBhPWIuaWQuc3BsaXQoIl9fIilbMV07CmlmKCF0aGlzLmZpcmVDb21tYW5kKCJVcGRhdGUiLGEpKXtyZXR1cm4gZmFsc2U7Cn19LGRlbGV0ZUl0ZW06ZnVuY3Rpb24oYil7Yj10aGlzLl9nZXRSb3dCeUluZGV4T3JJdGVtSW5kZXhIaWVyYXJjaGljYWwoYik7CnZhciBhPWIuaWQuc3BsaXQoIl9fIilbMV07CmlmKCF0aGlzLmZpcmVDb21tYW5kKCJEZWxldGUiLGEpKXtyZXR1cm4gZmFsc2U7Cn19LHJlYmluZDpmdW5jdGlvbigpe2lmKCF0aGlzLmZpcmVDb21tYW5kKCJSZWJpbmRHcmlkIiwiIikpe3JldHVybiBmYWxzZTsKfX0saW5zZXJ0SXRlbTpmdW5jdGlvbigpe2lmKCF0aGlzLmZpcmVDb21tYW5kKCJQZXJmb3JtSW5zZXJ0IiwiIikpe3JldHVybiBmYWxzZTsKfX0sc2hvd0luc2VydEl0ZW06ZnVuY3Rpb24oKXtpZighdGhpcy5maXJlQ29tbWFuZCgiSW5pdEluc2VydCIsIiIpKXtyZXR1cm4gZmFsc2U7Cn19LGNhbmNlbEluc2VydDpmdW5jdGlvbigpe2lmKCF0aGlzLmZpcmVDb21tYW5kKCJDYW5jZWxJbnNlcnQiLCIiKSl7cmV0dXJuIGZhbHNlOwp9fSxzb3J0OmZ1bmN0aW9uKGYpe3ZhciBjPW5ldyBUZWxlcmlrLldlYi5VSS5HcmlkU29ydEV4cHJlc3Npb24oKTsKdmFyIGQ9Zi5zcGxpdCgiICIpWzBdOwp2YXIgYj1UZWxlcmlrLldlYi5VSS5HcmlkU29ydE9yZGVyLkFzY2VuZGluZzsKdmFyIGU9LTE7CnZhciBhPXRoaXMuX3NvcnRFeHByZXNzaW9ucy5maW5kKGQpOwppZihhIT1udWxsKXtlPWEuZ2V0X3NvcnRPcmRlcigpOwp9aWYoZi50b1VwcGVyQ2FzZSgpLmluZGV4T2YoIiBBU0MiKSE9LTEpe2I9VGVsZXJpay5XZWIuVUkuR3JpZFNvcnRPcmRlci5Bc2NlbmRpbmc7Cn1lbHNle2lmKGYudG9VcHBlckNhc2UoKS5pbmRleE9mKCIgREVTQyIpIT0tMSl7Yj1UZWxlcmlrLldlYi5VSS5HcmlkU29ydE9yZGVyLkRlc2NlbmRpbmc7Cn1lbHNle2lmKGEhPW51bGwpe2lmKGU9PVRlbGVyaWsuV2ViLlVJLkdyaWRTb3J0T3JkZXIuTm9uZSl7Yj1UZWxlcmlrLldlYi5VSS5HcmlkU29ydE9yZGVyLkFzY2VuZGluZzsKfWVsc2V7aWYoZT09VGVsZXJpay5XZWIuVUkuR3JpZFNvcnRPcmRlci5Bc2NlbmRpbmcpe2I9VGVsZXJpay5XZWIuVUkuR3JpZFNvcnRPcmRlci5EZXNjZW5kaW5nOwp9ZWxzZXtpZih0aGlzLmdldF9hbGxvd05hdHVyYWxTb3J0KCkpe2I9VGVsZXJpay5XZWIuVUkuR3JpZFNvcnRPcmRlci5Ob25lOwp9ZWxzZXtiPVRlbGVyaWsuV2ViLlVJLkdyaWRTb3J0T3JkZXIuQXNjZW5kaW5nOwp9fX19ZWxzZXtiPVRlbGVyaWsuV2ViLlVJLkdyaWRTb3J0T3JkZXIuQXNjZW5kaW5nOwp9fX1pZihhIT1udWxsKXt0aGlzLl9zb3J0RXhwcmVzc2lvbnMucmVtb3ZlKGEpOwp9aWYoIXRoaXMuZ2V0X2FsbG93TXVsdGlDb2x1bW5Tb3J0aW5nKCkpe2Zvcih2YXIgZz0wOwpnPHRoaXMuX3NvcnRFeHByZXNzaW9ucy5fYXJyYXkubGVuZ3RoOwpnKyspe3RoaXMuX3Nob3dTb3J0SWNvbkZvckZpZWxkKHRoaXMuX3NvcnRFeHByZXNzaW9ucy5fYXJyYXlbZ10uZ2V0X2ZpZWxkTmFtZSgpLFRlbGVyaWsuV2ViLlVJLkdyaWRTb3J0T3JkZXIuTm9uZSk7Cn10aGlzLl9zb3J0RXhwcmVzc2lvbnMuY2xlYXIoKTsKfWlmKGIhPWUpe3RoaXMuX3Nob3dTb3J0SWNvbkZvckZpZWxkKGQsYik7Cn1pZihiIT1UZWxlcmlrLldlYi5VSS5HcmlkU29ydE9yZGVyLk5vbmUpe2Muc2V0X2ZpZWxkTmFtZShkKTsKYy5zZXRfc29ydE9yZGVyKGIpOwp0aGlzLl9zb3J0RXhwcmVzc2lvbnMuYWRkKGMpOwp9aWYoIXRoaXMuZmlyZUNvbW1hbmQoIlNvcnQiLGYpKXtyZXR1cm4gZmFsc2U7Cn19LF9zaG93U29ydEljb25Gb3JGaWVsZDpmdW5jdGlvbihkLGIpe2lmKCFkfHxkPT0iIil7cmV0dXJuOwp9aWYodHlwZW9mIGI9PSJ1bmRlZmluZWQiKXtyZXR1cm47Cn12YXIgYz0ibm9uZSI7CnZhciBhPSJub25lIjsKaWYoYj09VGVsZXJpay5XZWIuVUkuR3JpZFNvcnRPcmRlci5Ob25lKXt9ZWxzZXtpZihiPT1UZWxlcmlrLldlYi5VSS5HcmlkU29ydE9yZGVyLkRlc2NlbmRpbmcpe2M9Im5vbmUiOwphPSIiOwp9ZWxzZXtpZihiPT1UZWxlcmlrLldlYi5VSS5HcmlkU29ydE9yZGVyLkFzY2VuZGluZyl7Yz0iIjsKYT0ibm9uZSI7Cn19fXZhciBmPVN0cmluZy5mb3JtYXQoInswfV9fezF9X19Tb3J0QXNjIix0aGlzLmdldF9pZCgpLGQpOwp2YXIgZT1TdHJpbmcuZm9ybWF0KCJ7MH1fX3sxfV9fU29ydERlc2MiLHRoaXMuZ2V0X2lkKCksZCk7CmlmKCRnZXQoZikpe3ZhciBoPSR0ZWxlcmlrLmdldENoaWxkcmVuQnlDbGFzc05hbWUoJGdldChmKS5wYXJlbnROb2RlLCJyZ1NvcnQiKTsKZm9yKHZhciBnPTA7Cmc8aC5sZW5ndGg7CmcrKyl7aFtnXS5zdHlsZS5kaXNwbGF5PSJub25lIjsKfSRnZXQoZikuc3R5bGUuZGlzcGxheT1jOwp9aWYoJGdldChlKSl7JGdldChlKS5zdHlsZS5kaXNwbGF5PWE7Cn19LGNsZWFyU29ydDpmdW5jdGlvbihiKXtpZighYil7dmFyIGQ9dGhpcy5nZXRfc29ydEV4cHJlc3Npb25zKCk7CmZvcih2YXIgYz0wOwpjPGQuZ2V0X2NvdW50KCk7CmMrKyl7dGhpcy5fc2hvd1NvcnRJY29uRm9yRmllbGQoZC5nZXRJdGVtKGMpLmdldF9maWVsZE5hbWUoKSxUZWxlcmlrLldlYi5VSS5HcmlkU29ydE9yZGVyLk5vbmUpOwp9dGhpcy5nZXRfc29ydEV4cHJlc3Npb25zKCkuY2xlYXIoKTsKcmV0dXJuIHRoaXMuZmlyZUNvbW1hbmQoIkNsZWFyU29ydCIsIiIpOwp9dmFyIGE9dGhpcy5nZXRfc29ydEV4cHJlc3Npb25zKCkuZmluZChiKTsKaWYoYSl7dGhpcy5fc2hvd1NvcnRJY29uRm9yRmllbGQoYixUZWxlcmlrLldlYi5VSS5HcmlkU29ydE9yZGVyLk5vbmUpOwp0aGlzLmdldF9zb3J0RXhwcmVzc2lvbnMoKS5yZW1vdmUoYSk7Cn1yZXR1cm4gdGhpcy5maXJlQ29tbWFuZCgiQ2xlYXJTb3J0IixiKTsKfSxnZXRfc29ydEV4cHJlc3Npb25zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NvcnRFeHByZXNzaW9uczsKfSxmaWx0ZXI6ZnVuY3Rpb24oaCxmLGosYixpKXt2YXIgaz1uZXcgVGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckV4cHJlc3Npb24oKTsKdmFyIGE9dGhpcy5nZXRDb2x1bW5CeVVuaXF1ZU5hbWUoaCk7CmlmKCFhKXtyZXR1cm47Cn12YXIgZD1mYWxzZTsKaWYodHlwZW9mKGopPT0idW5kZWZpbmVkIil7aj1hLmdldF9maWx0ZXJGdW5jdGlvbigpOwpkPXRydWU7Cn1lbHNle2lmKHR5cGVvZihqKT09InN0cmluZyIpe2Euc2V0X2ZpbHRlckZ1bmN0aW9uKGopOwp9fWlmKCgodHlwZW9mKGopPT0ibnVtYmVyIiYmVGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uLk5vRmlsdGVyPT1qKXx8KHR5cGVvZihqKT09InN0cmluZyImJlRlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbi5wYXJzZShqKT09VGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uLk5vRmlsdGVyKSkmJihhLmdldF9maWx0ZXJEZWxheSgpIT1udWxsfHwoZiE9bnVsbCYmZiE9PSIiJiZkKSkpe2o9KGEuZ2V0X2RhdGFUeXBlKCk9PSJTeXN0ZW0uU3RyaW5nIik/IkNvbnRhaW5zIjoiRXF1YWxUbyI7CmlmKGEuX2RhdGEuRW5hYmxlUmFuZ2VGaWx0ZXJpbmcpe2o9IkJldHdlZW4iOwp9fXZhciBnPSIiOwpzd2l0Y2goYS5fZGF0YS5Db2x1bW5UeXBlKXtjYXNlIkdyaWRIeXBlckxpbmtDb2x1bW4iOmc9YS5fZGF0YS5EYXRhVGV4dEZpZWxkOwpicmVhazsKY2FzZSJHcmlkSW1hZ2VDb2x1bW4iOmc9YS5fZGF0YS5EYXRhQWx0ZXJuYXRlVGV4dEZpZWxkOwpicmVhazsKY2FzZSJHcmlkQmluYXJ5SW1hZ2VDb2x1bW4iOmc9YS5fZGF0YS5EYXRhQWx0ZXJuYXRlVGV4dEZpZWxkOwpicmVhazsKY2FzZSJHcmlkQ2FsY3VsYXRlZENvbHVtbiI6Zz1TdHJpbmcuZm9ybWF0KCJ7MH1SZXN1bHQiLGEuX2RhdGEuVW5pcXVlTmFtZSk7CmJyZWFrOwpjYXNlIkdyaWRBdHRhY2htZW50Q29sdW1uIjpnPWEuX2RhdGEuRGF0YVRleHRGaWVsZCsiIiE9IiI/YS5fZGF0YS5EYXRhVGV4dEZpZWxkOmEuX2RhdGEuRmlsZU5hbWVUZXh0RmllbGQ7CmJyZWFrOwpkZWZhdWx0Omc9YS5fZGF0YS5EYXRhRmllbGQ7CmJyZWFrOwp9aWYoYil7dGhpcy5fdXBkYXRlRmlsdGVyQ29udHJvbFZhbHVlKGYsaCxqKTsKfWsuc2V0X2ZpZWxkTmFtZShnKTsKay5zZXRfY29sdW1uVW5pcXVlTmFtZShoKTsKay5zZXRfZGF0YVR5cGVOYW1lKGEuX2RhdGEuRGF0YVR5cGVOYW1lKTsKaWYoZiYmZi5yZXBsYWNlKXtmPWYucmVwbGFjZSgvJy9nLCJcXCciKTsKfXZhciBjPXRoaXMuX2ZpbHRlckV4cHJlc3Npb25zLmZpbmQoay5nZXRfY29sdW1uVW5pcXVlTmFtZSgpKTsKaWYoYyE9bnVsbCYmIWkpe2lmKFRlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbi5wYXJzZShqKT09VGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uLk5vRmlsdGVyKXt0aGlzLl9maWx0ZXJFeHByZXNzaW9ucy5yZW1vdmUoYyk7Cn1jLnNldF9maWx0ZXJGdW5jdGlvbihqKTsKYy5zZXRfZmllbGRWYWx1ZShmKTsKfWVsc2V7ay5zZXRfZmlsdGVyRnVuY3Rpb24oaik7Cmsuc2V0X2ZpZWxkVmFsdWUoZik7CnRoaXMuX2ZpbHRlckV4cHJlc3Npb25zLmFkZChrKTsKfXRoaXMuc2V0X2N1cnJlbnRQYWdlSW5kZXgoMCx0cnVlKTsKaWYoZiYmZi5pbmRleE9mJiZmLmluZGV4T2YoIjsiKSE9LTEpe2Y9Zi5yZXBsYWNlKC87L2csIl4jIik7Cn1pZighaSl7aWYoIXRoaXMuZmlyZUNvbW1hbmQoIkZpbHRlciIsaCsifD8iK2YrInw/IitqKSl7dmFyIGU9KCJOb0ZpbHRlciI9PWopOwppZihlJiZhLl9kYXRhLkNvbHVtblR5cGU9PSJHcmlkRGF0ZVRpbWVDb2x1bW4iKXt0aGlzLl91cGRhdGVGaWx0ZXJDb250cm9sVmFsdWUoZixoLGopOwp9cmV0dXJuIGZhbHNlOwp9fX0sX3VwZGF0ZUZpbHRlckNvbnRyb2xWYWx1ZTpmdW5jdGlvbihlLGcsaSl7dmFyIGQ9QXJyYXkuY29udGFpbnMoWyJOb0ZpbHRlciIsIklzTnVsbCIsIk5vdElzTnVsbCIsIklzRW1wdHkiLCJOb3RJc0VtcHR5Il0saSk7CnZhciBiPXRoaXMuX2dldFRhYmxlRmlsdGVyUm93KCk7CmlmKCFiKXtyZXR1cm47Cn12YXIgZj10aGlzLl9nZXRDZWxsSW5kZXhCeUNvbHVtblVuaXF1ZU5hbWVGcm9tVGFibGVSb3dFbGVtZW50KGIsZyk7CmlmKGY9PW51bGwpe3JldHVybjsKfXZhciBoPWIuY2VsbHNbZl0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoImlucHV0IilbMF07CmlmKCFoKXtyZXR1cm47Cn12YXIgYT10aGlzLmdldENvbHVtbkJ5VW5pcXVlTmFtZShnKTsKaWYodHlwZW9mIGU9PSJvYmplY3QiJiZlPT09bnVsbCl7ZT0iIjsKfWlmKGEmJmEuX2RhdGEuQ29sdW1uVHlwZT09IkdyaWREYXRlVGltZUNvbHVtbiIpe3ZhciBqPSRmaW5kKGguaWQpOwppZihqJiYoT2JqZWN0LmdldFR5cGUoaikuZ2V0TmFtZSgpPT0iVGVsZXJpay5XZWIuVUkuUmFkRGF0ZVRpbWVQaWNrZXIifHxPYmplY3QuZ2V0VHlwZShqKS5nZXROYW1lKCk9PSJUZWxlcmlrLldlYi5VSS5SYWREYXRlUGlja2VyIikpe2lmKGQpe2ouZ2V0X2RhdGVJbnB1dCgpLmNsZWFyKCk7Cn1lbHNle2lmKHR5cGVvZiBlPT0ic3RyaW5nIil7ai5zZXRfc2VsZWN0ZWREYXRlKG5ldyBEYXRlKGUpKTsKfWVsc2V7ai5zZXRfc2VsZWN0ZWREYXRlKGUpOwp9fX1lbHNle2lmKCFqKXtqPSRmaW5kKGguaWQucmVwbGFjZSgiX3RleHQiLCIiKSk7CmlmKGomJk9iamVjdC5nZXRUeXBlKGopLmdldE5hbWUoKT09IlRlbGVyaWsuV2ViLlVJLlJhZERhdGVJbnB1dCIpe2lmKGQpe2ouY2xlYXIoKTsKfWVsc2V7aWYodHlwZW9mIGU9PSJzdHJpbmciKXtqLnNldF9zZWxlY3RlZERhdGUobmV3IERhdGUoZSkpOwp9ZWxzZXtqLnNldF9zZWxlY3RlZERhdGUoZSk7Cn19fX19fWVsc2V7aWYoYSYmYS5fZGF0YS5Db2x1bW5UeXBlPT0iR3JpZE51bWVyaWNDb2x1bW4iKXt2YXIgYz0kZmluZChoLmlkLnJlcGxhY2UoIl90ZXh0IiwiIikpOwppZihjJiZPYmplY3QuZ2V0VHlwZShjKS5nZXROYW1lKCk9PSJUZWxlcmlrLldlYi5VSS5SYWROdW1lcmljVGV4dEJveCIpe2lmKGQpe2MuY2xlYXIoKTsKfWVsc2V7Yy5zZXRfdmFsdWUoZSk7Cn19fWVsc2V7aWYoaC50eXBlJiZoLnR5cGU9PSJjaGVja2JveCIpe2guY2hlY2tlZD0oZCk/ZmFsc2U6ISFlOwp9ZWxzZXtpZihoLnR5cGUmJmgudHlwZT09InRleHQiKXtoLnZhbHVlPShkKT8iIjplOwp9fX19fSxfZ2V0RmlsdGVyQ29udHJvbFZhbHVlOmZ1bmN0aW9uKGIpe3ZhciBlPXRoaXMuX2dldEZpbHRlckNvbnRyb2xWYWx1ZUJ5SW5kZXgoYiwwKTsKaWYodGhpcy5nZXRDb2x1bW5CeVVuaXF1ZU5hbWUoYikuX2RhdGEuRW5hYmxlUmFuZ2VGaWx0ZXJpbmcpe3ZhciBmPXRoaXMuX2dldEZpbHRlckNlbGxCeUNvbHVtblVuaXF1ZU5hbWUoYik7CnZhciBkOwp2YXIgYT0kdGVsZXJpay5maW5kQ29udHJvbChmLFN0cmluZy5mb3JtYXQoIlJESVBGMnswfSIsYikpOwppZihhKXtkPWEuZ2V0X2RhdGVJbnB1dCgpOwp9ZWxzZXtkPSR0ZWxlcmlrLmZpbmRDb250cm9sKGYsU3RyaW5nLmZvcm1hdCgiUkRJRjJ7MH0iLGIpKTsKfXZhciBjPWQuZ2V0X3ZhbHVlKCk7CmlmKGU9PW51bGx8fGU9PSIifHxjPT1udWxsfHxjPT0iIil7cmV0dXJuIG51bGw7Cn1lPWUucmVwbGFjZSgvXHMvZywiLCIpOwpjPWMucmVwbGFjZSgvXHMvZywiLCIpOwplKz0iICIrYzsKfXJldHVybiBlOwp9LF9nZXRGaWx0ZXJDb250cm9sVmFsdWVCeUluZGV4OmZ1bmN0aW9uKGEsYyxlKXt2YXIgZj10aGlzLl9nZXRGaWx0ZXJDZWxsQnlDb2x1bW5VbmlxdWVOYW1lKGEpOwp2YXIgZD1mLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJpbnB1dCIpW2NdOwppZighZCl7cmV0dXJuIG51bGw7Cn1pZihkLnR5cGU9PSJjaGVja2JveCIpe3JldHVybiBkLmNoZWNrZWQ7Cn12YXIgYj1kLmlkLmVuZHNXaXRoKCJfdGV4dCIpPyRmaW5kKGQuaWQuc3Vic3RyKDAsZC5pZC5sZW5ndGgtNSkpOmQuaWQuZW5kc1dpdGgoIl9DbGllbnRTdGF0ZSIpPyRmaW5kKGQuaWQuc3Vic3RyKDAsZC5pZC5sZW5ndGgtMTIpKTokZmluZChkLmlkKTsKaWYoYil7c3dpdGNoKE9iamVjdC5nZXRUeXBlKGIpLmdldE5hbWUoKSl7Y2FzZSJUZWxlcmlrLldlYi5VSS5SYWROdW1lcmljVGV4dEJveCI6cmV0dXJuIGIuZ2V0X2VkaXRWYWx1ZSgpOwpjYXNlIlRlbGVyaWsuV2ViLlVJLlJhZFRleHRCb3giOmNhc2UiVGVsZXJpay5XZWIuVUkuUmFkTWFza2VkVGV4dEJveCI6Y2FzZSJUZWxlcmlrLldlYi5VSS5SYWREYXRlSW5wdXQiOmNhc2UiVGVsZXJpay5XZWIuVUkuUmFkUmF0aW5nIjpyZXR1cm4gYi5nZXRfdmFsdWUoKTsKY2FzZSJUZWxlcmlrLldlYi5VSS5SYWREYXRlUGlja2VyIjpjYXNlIlRlbGVyaWsuV2ViLlVJLlJhZERhdGVUaW1lUGlja2VyIjpjYXNlIlRlbGVyaWsuV2ViLlVJLlJhZFRpbWVQaWNrZXIiOnJldHVybiBiLmdldF9kYXRlSW5wdXQoKS5nZXRfdmFsdWUoKTsKZGVmYXVsdDppZih0eXBlb2YoYi5nZXRfdmFsdWUpPT09ImZ1bmN0aW9uIil7cmV0dXJuIGIuZ2V0X3ZhbHVlKCk7Cn19fWlmKGUmJiFiKXtyZXR1cm4gbnVsbDsKfXJldHVybiBkLnZhbHVlOwp9LF9yYW5nZVZhbGlkYXRpb25IYW5kbGVyOmZ1bmN0aW9uKGQsYixjKXtpZih0aGlzLl9yYW5nZVZhbGlkYXRpb25JblByb2Nlc3Mpe3JldHVybjsKfXRoaXMuX3JhbmdlVmFsaWRhdGlvbkluUHJvY2Vzcz10cnVlOwp2YXIgaT10aGlzLl9nZXRGaWx0ZXJDZWxsQnlDb2x1bW5VbmlxdWVOYW1lKGMpOwp2YXIgYT0kdGVsZXJpay5maW5kQ29udHJvbChpLFN0cmluZy5mb3JtYXQoIlJESVBGezB9IixjKSk7CnZhciBlOwp2YXIgZzsKaWYoYSl7ZT1hLmdldF9kYXRlSW5wdXQoKTsKdmFyIGg9JHRlbGVyaWsuZmluZENvbnRyb2woaSxTdHJpbmcuZm9ybWF0KCJSRElQRjJ7MH0iLGMpKTsKZz1oLmdldF9kYXRlSW5wdXQoKTsKfWVsc2V7ZT0kdGVsZXJpay5maW5kQ29udHJvbChpLFN0cmluZy5mb3JtYXQoIlJESUZ7MH0iLGMpKTsKZz0kdGVsZXJpay5maW5kQ29udHJvbChpLFN0cmluZy5mb3JtYXQoIlJESUYyezB9IixjKSk7Cn1pZihUZWxlcmlrLldlYi5VSS5EYXRlUGlja2VyUG9wdXBPcGVuaW5nRXZlbnRBcmdzLmlzSW5zdGFuY2VPZlR5cGUoYikpe3RoaXMuX3NldENvbnRyb2xzUmFuZ2VWYWxpZGF0aW9uKGQsYSxoKTsKfWVsc2V7aWYoVGVsZXJpay5XZWIuVUkuRGF0ZVBpY2tlclBvcHVwQ2xvc2luZ0V2ZW50QXJncy5pc0luc3RhbmNlT2ZUeXBlKGIpKXt0aGlzLl9jbGVhckNvbnRyb2xzUmFuZ2VWYWxpZGF0aW9uKGEsaCk7Cn1lbHNle2lmKFRlbGVyaWsuV2ViLlVJLklucHV0VmFsdWVDaGFuZ2luZ0V2ZW50QXJncy5pc0luc3RhbmNlT2ZUeXBlKGIpKXt2YXIgZj10cnVlOwppZihhLmdldF9kYXRlSW5wdXQmJmQuZ2V0X2lkKCk9PT1hLmdldF9kYXRlSW5wdXQoKS5nZXRfaWQoKSl7aWYoIWIuZ2V0X25ld1ZhbHVlKCl8fCFnLmdldF9zZWxlY3RlZERhdGUoKSl7Zj1mYWxzZTsKfX1lbHNle2lmKCFhLmdldF9zZWxlY3RlZERhdGUoKXx8IWIuZ2V0X25ld1ZhbHVlKCkpe2Y9ZmFsc2U7Cn19dGhpcy5fc2hvdWxkQXV0b1Bvc3RCYWNrT25GaWx0ZXI9ZjsKdGhpcy5fc2V0Q29udHJvbHNSYW5nZVZhbGlkYXRpb24oZCxlLGcpOwp9ZWxzZXtpZihUZWxlcmlrLldlYi5VSS5EYXRlSW5wdXRWYWx1ZUNoYW5nZWRFdmVudEFyZ3MuaXNJbnN0YW5jZU9mVHlwZShiKSl7dGhpcy5fY2xlYXJDb250cm9sc1JhbmdlVmFsaWRhdGlvbihlLGcpOwp9fX19dGhpcy5fcmFuZ2VWYWxpZGF0aW9uSW5Qcm9jZXNzPWZhbHNlOwp9LF9nZXRGaWx0ZXJDZWxsQnlDb2x1bW5VbmlxdWVOYW1lOmZ1bmN0aW9uKGMpe3ZhciBiPXRoaXMuX2dldFRhYmxlRmlsdGVyUm93KCk7CmlmKCFiKXtyZXR1cm4gbnVsbDsKfXZhciBhPXRoaXMuX2dldENlbGxJbmRleEJ5Q29sdW1uVW5pcXVlTmFtZUZyb21UYWJsZVJvd0VsZW1lbnQoYixjKTsKaWYoYT09bnVsbCl7cmV0dXJuIG51bGw7Cn1yZXR1cm4gYi5jZWxsc1thXTsKfSxfc2V0Q29udHJvbHNSYW5nZVZhbGlkYXRpb246ZnVuY3Rpb24oYSxjLGUpe3RoaXMuX2NsZWFyQ29udHJvbHNSYW5nZVZhbGlkYXRpb24oYyxlKTsKaWYoYS5nZXRfaWQoKT09PWMuZ2V0X2lkKCkpe3ZhciBkPWUuZ2V0X3NlbGVjdGVkRGF0ZSgpOwppZihkKXthLnNldF9tYXhEYXRlKGUuZ2V0X3NlbGVjdGVkRGF0ZSgpKTsKfWVsc2V7aWYoZS5zZXRfdmFsdWUpe2Uuc2V0X3ZhbHVlKGUuZ2V0X3RleHRCb3hWYWx1ZSgpKTsKfX19ZWxzZXtpZihhLmdldF9pZCgpPT09ZS5nZXRfaWQoKSl7dmFyIGI9Yy5nZXRfc2VsZWN0ZWREYXRlKCk7CmlmKGIpe2Uuc2V0X21pbkRhdGUoYik7Cn1lbHNle2lmKGMuc2V0X3ZhbHVlKXtjLnNldF92YWx1ZShjLmdldF90ZXh0Qm94VmFsdWUoKSk7Cn19fX19LF9jbGVhckNvbnRyb2xzUmFuZ2VWYWxpZGF0aW9uOmZ1bmN0aW9uKGMsZCl7dmFyIGE9bmV3IERhdGUoMTkwMCwxLDEpOwp2YXIgYj1uZXcgRGF0ZSgyMDk5LDEyLDMxKTsKYy5zZXRfbWF4RGF0ZShiKTsKZC5zZXRfbWluRGF0ZShhKTsKfSxjbGVhclNlbGVjdGVkQ29sdW1uczpmdW5jdGlvbigpe3ZhciBiPXRoaXMuZ2V0X2NvbHVtbnMoKTsKZm9yKHZhciBhPTA7CmE8Yi5sZW5ndGg7CmErKyl7aWYoYlthXS5nZXRfc2VsZWN0ZWQoKSl7YlthXS5zZXRfc2VsZWN0ZWQoZmFsc2UpOwp9fX0sY2xlYXJGaWx0ZXI6ZnVuY3Rpb24oYil7aWYoIWIpe2Zvcih2YXIgYz0wOwpjPHRoaXMuX2ZpbHRlckV4cHJlc3Npb25zLmdldF9jb3VudCgpOwpjKyspe3ZhciBhPXRoaXMuX2ZpbHRlckV4cHJlc3Npb25zLmdldEl0ZW0oYyk7CnRoaXMuX3VwZGF0ZUZpbHRlckNvbnRyb2xWYWx1ZShudWxsLGEuZ2V0X2NvbHVtblVuaXF1ZU5hbWUoKSxUZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24uTm9GaWx0ZXIpOwp2YXIgZT10aGlzLmdldENvbHVtbkJ5VW5pcXVlTmFtZShhLmdldF9jb2x1bW5VbmlxdWVOYW1lKCkpOwppZihlKXtlLnNldF9maWx0ZXJGdW5jdGlvbigiTm9GaWx0ZXIiKTsKfX10aGlzLl9maWx0ZXJFeHByZXNzaW9ucy5jbGVhcigpOwpyZXR1cm4gdGhpcy5maXJlQ29tbWFuZCgiQ2xlYXJGaWx0ZXIiLCIiKTsKfXZhciBlPXRoaXMuZ2V0Q29sdW1uQnlVbmlxdWVOYW1lKGIpOwppZighZSl7cmV0dXJuIGZhbHNlOwp9dmFyIGQ9dGhpcy5fZmlsdGVyRXhwcmVzc2lvbnMuZmluZChiKTsKaWYoIWQpe2Q9bmV3IFRlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJFeHByZXNzaW9uKCk7CmQuc2V0X2NvbHVtblVuaXF1ZU5hbWUoYik7CmQuc2V0X2ZpbHRlckZ1bmN0aW9uKCJOb0ZpbHRlciIpOwp0aGlzLl9maWx0ZXJFeHByZXNzaW9ucy5hZGQoZCk7Cn1yZXR1cm4gdGhpcy5maWx0ZXIoYiwiIiwiTm9GaWx0ZXIiLHRydWUpOwp9LGdldF9maWx0ZXJFeHByZXNzaW9uczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9maWx0ZXJFeHByZXNzaW9uczsKfSxwYWdlOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMuZ2V0X2N1cnJlbnRQYWdlSW5kZXgoKTsKaWYoYj09Ik5leHQiKXthKys7Cn1lbHNle2lmKGI9PSJQcmV2Iil7YS0tOwp9ZWxzZXtpZihiPT0iRmlyc3QiKXthPTA7Cn1lbHNle2lmKGI9PSJMYXN0Iil7YT10aGlzLmdldF9wYWdlQ291bnQoKS0xOwp9ZWxzZXthPXBhcnNlSW50KGIpLTE7Cn19fX1pZihhPDB8fGE+KHRoaXMuZ2V0X3BhZ2VDb3VudCgpLTEpKXtyZXR1cm4gZmFsc2U7Cn10aGlzLnNldF9jdXJyZW50UGFnZUluZGV4KGEsdHJ1ZSk7CmlmKCF0aGlzLmZpcmVDb21tYW5kKCJQYWdlIixiKSl7cmV0dXJuIGZhbHNlOwp9fSxleHBvcnRUb0V4Y2VsOmZ1bmN0aW9uKCl7aWYoIXRoaXMuZmlyZUNvbW1hbmQoIkV4cG9ydFRvRXhjZWwiLCIiKSl7cmV0dXJuIGZhbHNlOwp9fSxleHBvcnRUb1dvcmQ6ZnVuY3Rpb24oKXtpZighdGhpcy5maXJlQ29tbWFuZCgiRXhwb3J0VG9Xb3JkIiwiIikpe3JldHVybiBmYWxzZTsKfX0sZXhwb3J0VG9Dc3Y6ZnVuY3Rpb24oKXtpZighdGhpcy5maXJlQ29tbWFuZCgiRXhwb3J0VG9Dc3YiLCIiKSl7cmV0dXJuIGZhbHNlOwp9fSxleHBvcnRUb1BkZjpmdW5jdGlvbigpe2lmKCF0aGlzLmZpcmVDb21tYW5kKCJFeHBvcnRUb1BkZiIsIiIpKXtyZXR1cm4gZmFsc2U7Cn19LGVkaXRTZWxlY3RlZEl0ZW1zOmZ1bmN0aW9uKCl7aWYoIXRoaXMuZmlyZUNvbW1hbmQoIkVkaXRTZWxlY3RlZCIsIiIpKXtyZXR1cm4gZmFsc2U7Cn19LHVwZGF0ZUVkaXRlZEl0ZW1zOmZ1bmN0aW9uKCl7aWYoIXRoaXMuZmlyZUNvbW1hbmQoIlVwZGF0ZUVkaXRlZCIsIiIpKXtyZXR1cm4gZmFsc2U7Cn19LGRlbGV0ZVNlbGVjdGVkSXRlbXM6ZnVuY3Rpb24oKXtpZighdGhpcy5maXJlQ29tbWFuZCgiRGVsZXRlU2VsZWN0ZWQiLCIiKSl7cmV0dXJuIGZhbHNlOwp9fSxlZGl0QWxsSXRlbXM6ZnVuY3Rpb24oKXtpZighdGhpcy5maXJlQ29tbWFuZCgiRWRpdEFsbCIsIiIpKXtyZXR1cm4gZmFsc2U7Cn19LGNhbmNlbEFsbDpmdW5jdGlvbigpe2lmKCF0aGlzLmZpcmVDb21tYW5kKCJDYW5jZWxBbGwiLCIiKSl7cmV0dXJuIGZhbHNlOwp9fSxjYW5jZWxVcGRhdGU6ZnVuY3Rpb24oYil7Yj10aGlzLl9nZXRSb3dCeUluZGV4T3JJdGVtSW5kZXhIaWVyYXJjaGljYWwoYik7CnZhciBhPWIuaWQuc3BsaXQoIl9fIilbMV07CmlmKCF0aGlzLmZpcmVDb21tYW5kKCJDYW5jZWxVcGRhdGUiLGEpKXtyZXR1cm4gZmFsc2U7Cn19LGdyb3VwQ29sdW1uOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmZpcmVDb21tYW5kKCJHcm91cEJ5Q29sdW1uIixhKSl7cmV0dXJuIGZhbHNlOwp9fSx1bmdyb3VwQ29sdW1uOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmZpcmVDb21tYW5kKCJVbkdyb3VwQnlDb2x1bW4iLGEpKXtyZXR1cm4gZmFsc2U7Cn19LF91bmdyb3VwQnlFeHByZXNzaW9uOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmZpcmVDb21tYW5kKCJVbkdyb3VwQnlFeHByZXNzaW9uIixhKSl7cmV0dXJuIGZhbHNlOwp9fSxfY2xpZW50RGVsZXRlOmZ1bmN0aW9uKGYpe3ZhciBqPVRlbGVyaWsuV2ViLlVJLkdyaWQuR2V0Q3VycmVudEVsZW1lbnQoZik7CnZhciBsPWoucGFyZW50Tm9kZS5wYXJlbnROb2RlOwp2YXIgZD1sLnBhcmVudE5vZGUucGFyZW50Tm9kZTsKdmFyIGg9bC5pZC5zcGxpdCgiX18iKVsxXTsKdmFyIGM9bC5jZWxscy5sZW5ndGg7CnZhciBhPWwucm93SW5kZXg7CnZhciBnPW5ldyBUZWxlcmlrLldlYi5VSS5HcmlkRGF0YUl0ZW1DYW5jZWxFdmVudEFyZ3MobCxmKTsKdGhpcy5fb3duZXIucmFpc2Vfcm93RGVsZXRpbmcoZyk7CmlmKGcuZ2V0X2NhbmNlbCgpKXtyZXR1cm4gZmFsc2U7Cn1pZih0aGlzLmdldF9vd25lcigpLmdldF9ldmVudHMoKS5nZXRIYW5kbGVyKCJjb21tYW5kIikhPW51bGwpe3RoaXMuZmlyZUNvbW1hbmQoIkRlbGV0ZSIsaCk7Cn1kLmRlbGV0ZVJvdyhsLnJvd0luZGV4KTsKZm9yKHZhciBiPWE7CmI8ZC5yb3dzLmxlbmd0aDsKYisrKXtpZihkLnJvd3NbYl0uY2VsbHMubGVuZ3RoIT1jJiZkLnJvd3NbYl0uc3R5bGUuZGlzcGxheSE9Im5vbmUiKXtkLmRlbGV0ZVJvdyhiKTsKYi0tOwp9ZWxzZXticmVhazsKfX1pZihkLnRCb2RpZXNbMF0ucm93cy5sZW5ndGg9PTEmJmQudEJvZGllc1swXS5yb3dzWzBdLnN0eWxlLmRpc3BsYXk9PSJub25lIil7ZC50Qm9kaWVzWzBdLnJvd3NbMF0uc3R5bGUuZGlzcGxheT0iIjsKfXRoaXMuX293bmVyLnJhaXNlX3Jvd0RlbGV0ZWQobmV3IFRlbGVyaWsuV2ViLlVJLkdyaWREYXRhSXRlbUV2ZW50QXJncyhsLGYpKTsKQXJyYXkuYWRkKHRoaXMuX293bmVyLl9kZWxldGVkSXRlbXMsaCk7CnRoaXMuZGVzZWxlY3RJdGVtKGwpOwp2YXIgaz0kZmluZChsLmlkKTsKaWYoayl7ay5kaXNwb3NlKCk7CkFycmF5LnJlbW92ZSh0aGlzLl9kYXRhSXRlbXMsayk7Cn10aGlzLl9vd25lci51cGRhdGVDbGllbnRTdGF0ZSgpOwp9LGZpcmVDb21tYW5kOmZ1bmN0aW9uKGQsYSl7dmFyIGI9bmV3IFN5cy5DYW5jZWxFdmVudEFyZ3MoKTsKYi5nZXRfY29tbWFuZE5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gZDsKfTsKYi5nZXRfY29tbWFuZEFyZ3VtZW50PWZ1bmN0aW9uKCl7cmV0dXJuIGE7Cn07CnZhciBjPXRoaXM7CmIuZ2V0X3RhYmxlVmlldz1mdW5jdGlvbigpe3JldHVybiBjOwp9Owp0aGlzLl9vd25lci5yYWlzZV9jb21tYW5kKGIpOwppZihiLmdldF9jYW5jZWwoKSl7cmV0dXJuIGZhbHNlOwp9dGhpcy5fZXhlY3V0ZVBvc3RCYWNrRXZlbnQoIkZpcmVDb21tYW5kOiIrdGhpcy5fZGF0YS5VbmlxdWVJRCsiOyIrZCsiOyIrYSk7Cn0sX2V4ZWN1dGVQb3N0QmFja0V2ZW50OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX293bmVyLkNsaWVudFNldHRpbmdzLlBvc3RCYWNrRnVuY3Rpb247CmI9Yi5yZXBsYWNlKCJ7MH0iLHRoaXMuX293bmVyLlVuaXF1ZUlEKTsKYj1iLnJlcGxhY2UoInsxfSIsYSk7CmV2YWwoYik7Cn0scHJlcGFyZVNvcnRRdWVyeU9wdGlvbjpmdW5jdGlvbihjLGIpe2lmKGIhPW51bGwmJmIhPSIiJiZjLmdldF9jb3VudCgpPjApe3ZhciBkPWIuc3BsaXQoIiwiKTsKdmFyIGc9IiI7CnZhciBhPXRydWU7CmZvcih2YXIgZT0wOwplPGQubGVuZ3RoOwplKyspe2Zvcih2YXIgZj0wOwpmPGMuZ2V0X2NvdW50KCk7CmYrKyl7aWYoZFtlXS5pbmRleE9mKGMuZ2V0SXRlbShmKS5nZXRfZmllbGROYW1lKCkpPi0xKXthPWZhbHNlOwpicmVhazsKfX1pZihhKXtnKz1kW2VdKyIsICI7Cn1lbHNle2E9dHJ1ZTsKfX1yZXR1cm4gZy5zdWJzdHJpbmcoMCxnLmxhc3RJbmRleE9mKCIsIikpOwp9ZWxzZXtyZXR1cm4gYjsKfX0sZ2V0RGF0YVNlcnZpY2VRdWVyeTpmdW5jdGlvbihpLGEsYil7Yj10aGlzLnByZXBhcmVTb3J0UXVlcnlPcHRpb24odGhpcy5nZXRfc29ydEV4cHJlc3Npb25zKCksYik7CnZhciBkPXRoaXMuZ2V0X3NvcnRFeHByZXNzaW9ucygpLnRvU3RyaW5nKCkucmVwbGFjZSgvIEFTQy9nbSwiIGFzYyIpLnJlcGxhY2UoLyBERVNDL2dtLCIgZGVzYyIpOwp2YXIgZj10aGlzLmdldF9maWx0ZXJFeHByZXNzaW9ucygpLnRvRGF0YVNlcnZpY2UoKTsKdmFyIGg9dGhpcy5nZXRfY3VycmVudFBhZ2VJbmRleCgpOwp2YXIgZz10aGlzLmdldF9wYWdlU2l6ZSgpOwp2YXIgaz1uZXcgU3lzLlN0cmluZ0J1aWxkZXIoKTsKdmFyIGo9IiYkb3JkZXJieT17MH0iOwppZihiIT1udWxsJiZiIT0iIil7dmFyIGo9U3RyaW5nLmZvcm1hdChqLGIpOwppZihkIT0iIil7ais9IiwgezB9IjsKay5hcHBlbmQoU3RyaW5nLmZvcm1hdChqLGQpKTsKfWVsc2V7ay5hcHBlbmQoaik7Cn19ZWxzZXtpZihkIT0iIil7ay5hcHBlbmQoU3RyaW5nLmZvcm1hdChqLGQpKTsKfX12YXIgZT0iJiRmaWx0ZXI9ezB9IjsKaWYoYSE9bnVsbCYmYSE9IiIpe2U9U3RyaW5nLmZvcm1hdChlLGEpOwppZihmIT0iIil7ZSs9IiBhbmQgezB9IjsKay5hcHBlbmQoU3RyaW5nLmZvcm1hdChlLGYpKTsKfWVsc2V7ay5hcHBlbmQoZSk7Cn19ZWxzZXtpZihmIT0iIil7ay5hcHBlbmQoU3RyaW5nLmZvcm1hdChlLGYpKTsKfX1pZih0aGlzLl9vd25lci5faXNCb3VuZFRvU2VydmljZVR5cGUoVGVsZXJpay5XZWIuVUkuR3JpZENsaWVudERhdGFTZXJ2aWNlVHlwZS5PRGF0YSkpe2lmKHRoaXMuZ2V0X2FsbG93UGFnaW5nKCkpe2suYXBwZW5kKCImJGlubGluZWNvdW50PWFsbHBhZ2VzIik7Cn1pZih0aGlzLl9vd25lci5fZ2V0RGF0YVJlc3BvbnNlVHlwZSgpPT09Impzb25wIil7ay5hcHBlbmQoIiYkZm9ybWF0PWpzb24iKTsKfX1pZih0aGlzLmdldF9hbGxvd1BhZ2luZygpKXtrLmFwcGVuZChTdHJpbmcuZm9ybWF0KCImJHRvcD17MH0mJHNraXA9ezF9IixnLGgqZykpOwp9dmFyIGM9ay50b1N0cmluZygpOwppZihpLmluZGV4T2YoIj8iKT4tMSl7cmV0dXJuIGkrYzsKfXJldHVybiBpKyI/IitjLnN1YnN0cigxKTsKfX07ClRlbGVyaWsuV2ViLlVJLkdyaWRUYWJsZVZpZXcucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuR3JpZFRhYmxlVmlldyIsU3lzLlVJLkNvbnRyb2wpOwpUZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb249ZnVuY3Rpb24oKXt9OwpUZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24ucHJvdG90eXBlPXtOb0ZpbHRlcjowLENvbnRhaW5zOjEsRG9lc05vdENvbnRhaW46MixTdGFydHNXaXRoOjMsRW5kc1dpdGg6NCxFcXVhbFRvOjUsTm90RXF1YWxUbzo2LEdyZWF0ZXJUaGFuOjcsTGVzc1RoYW46OCxHcmVhdGVyVGhhbk9yRXF1YWxUbzo5LExlc3NUaGFuT3JFcXVhbFRvOjEwLEJldHdlZW46MTEsTm90QmV0d2VlbjoxMixJc0VtcHR5OjEzLE5vdElzRW1wdHk6MTQsSXNOdWxsOjE1LE5vdElzTnVsbDoxNixDdXN0b206MTd9OwpUZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24ucmVnaXN0ZXJFbnVtKCJUZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24iLGZhbHNlKTsKVGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uLl93cmFwTWV0aG9kPWZ1bmN0aW9uKGMsYixhKXt2YXIgZD1jW2JdOwpjW2JdPWZ1bmN0aW9uKCl7dmFyIGY9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTsKdmFyIGU9ZnVuY3Rpb24oKXtyZXR1cm4gZC5hcHBseShjLGYpOwp9OwpyZXR1cm4gYS5hcHBseShjLFtlXS5jb25jYXQoZikpOwp9Owp9OwpUZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24uX2VudW1QYXJzZU1ldGhvZD1mdW5jdGlvbihiLGMsYSl7cmV0dXJuKHR5cGVvZiBjPT0ibnVtYmVyIik/cmVzb2x2ZWRWYWx1ZT1jOmIoYywhIWEpOwp9OwpUZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24uX3dyYXBNZXRob2QoVGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uLCJwYXJzZSIsVGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uLl9lbnVtUGFyc2VNZXRob2QpOwpUZWxlcmlrLldlYi5VSS5HcmlkU29ydE9yZGVyPWZ1bmN0aW9uKCl7fTsKVGVsZXJpay5XZWIuVUkuR3JpZFNvcnRPcmRlci5wcm90b3R5cGU9e05vbmU6MCxBc2NlbmRpbmc6MSxEZXNjZW5kaW5nOjJ9OwpUZWxlcmlrLldlYi5VSS5HcmlkU29ydE9yZGVyLnJlZ2lzdGVyRW51bSgiVGVsZXJpay5XZWIuVUkuR3JpZFNvcnRPcmRlciIsZmFsc2UpOwpUZWxlcmlrLldlYi5VSS5HcmlkU29ydEV4cHJlc3Npb249ZnVuY3Rpb24oKXt0aGlzLl9maWVsZE5hbWU9IiI7CnRoaXMuX3NvcnRPcmRlcj1udWxsOwp9OwpUZWxlcmlrLldlYi5VSS5HcmlkU29ydEV4cHJlc3Npb24ucHJvdG90eXBlPXtnZXRfZmllbGROYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZpZWxkTmFtZTsKfSxzZXRfZmllbGROYW1lOmZ1bmN0aW9uKGEpe2lmKHRoaXMuX2ZpZWxkTmFtZSE9YSl7dGhpcy5fZmllbGROYW1lPWE7CnRoaXMuRmllbGROYW1lPWE7Cn19LGdldF9zb3J0T3JkZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc29ydE9yZGVyOwp9LHNldF9zb3J0T3JkZXI6ZnVuY3Rpb24oYSl7aWYodGhpcy5fc29ydE9yZGVyIT1hKXt0aGlzLl9zb3J0T3JkZXI9YTsKdGhpcy5Tb3J0T3JkZXI9YTsKfX0sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuX2ZpZWxkTmFtZT1udWxsOwp0aGlzLl9zb3J0T3JkZXI9bnVsbDsKfX07ClRlbGVyaWsuV2ViLlVJLkdyaWRTb3J0RXhwcmVzc2lvbi5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5HcmlkU29ydEV4cHJlc3Npb24iLG51bGwsU3lzLklEaXNwb3NhYmxlKTsKVGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uc09xbEZvcm1hdD1mdW5jdGlvbigpe3ZhciBhPXt9OwphW1RlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbi5Db250YWluc109InswfSBMSUtFICcqezF9KiciOwphW1RlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbi5Eb2VzTm90Q29udGFpbl09Ik5PVCAoezB9IExJS0UgJyp7MX0qJyI7CmFbVGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uLlN0YXJ0c1dpdGhdPSJ7MH0gTElLRSAnezF9KiciOwphW1RlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbi5FbmRzV2l0aF09InswfSBMSUtFICcqezF9IjsKYVtUZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24uRXF1YWxUb109InswfSA9IHsxfSI7CmFbVGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uLk5vdEVxdWFsVG9dPSJ7MH0gPD4gezF9IjsKYVtUZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24uR3JlYXRlclRoYW5dPSJ7MH0gPiB7MX0iOwphW1RlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbi5MZXNzVGhhbl09InswfSA8IHsxfSI7CmFbVGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uLkdyZWF0ZXJUaGFuT3JFcXVhbFRvXT0iezB9ID49IHsxfSI7CmFbVGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uLkxlc3NUaGFuT3JFcXVhbFRvXT0iezB9IDw9IHsxfSI7CmFbVGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uLkJldHdlZW5dPSIoezB9ID49IHsxfSkgQU5EICh7MH0gPD0gezJ9KSI7CmFbVGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uLk5vdEJldHdlZW5dPSIoezB9IDwgezF9KSBPUiAoezB9ID4gezJ9KSI7CmFbVGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uLklzRW1wdHldPSJ7MH0gPSAnJyI7CmFbVGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uLk5vdElzRW1wdHldPSJ7MH0gPD4gJyciOwphW1RlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbi5Jc051bGxdPSJ7MH0gPT0gbmlsIjsKYVtUZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24uTm90SXNOdWxsXT0iKHswfSAhPSBuaWwpIjsKcmV0dXJuIGE7Cn07ClRlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbnNTcWxGb3JtYXQ9ZnVuY3Rpb24oKXt2YXIgYT17fTsKYVtUZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24uQ29udGFpbnNdPSJbezB9XSBMSUtFICclezF9JSciOwphW1RlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbi5Eb2VzTm90Q29udGFpbl09Ilt7MH1dIE5PVCBMSUtFICclezF9JSciOwphW1RlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbi5TdGFydHNXaXRoXT0iW3swfV0gTElLRSAnezF9JSciOwphW1RlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbi5FbmRzV2l0aF09Ilt7MH1dIExJS0UgJyV7MX0nIjsKYVtUZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24uRXF1YWxUb109Ilt7MH1dID0gezF9IjsKYVtUZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24uTm90RXF1YWxUb109Ilt7MH1dIDw+IHsxfSI7CmFbVGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uLkdyZWF0ZXJUaGFuXT0iW3swfV0gPiB7MX0iOwphW1RlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbi5MZXNzVGhhbl09Ilt7MH1dIDwgezF9IjsKYVtUZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24uR3JlYXRlclRoYW5PckVxdWFsVG9dPSJbezB9XSA+PSB7MX0iOwphW1RlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbi5MZXNzVGhhbk9yRXF1YWxUb109Ilt7MH1dIDw9IHsxfSI7CmFbVGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uLkJldHdlZW5dPSIoW3swfV0gPj0gezF9KSBBTkQgKFt7MH1dIDw9IHsyfSkiOwphW1RlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbi5Ob3RCZXR3ZWVuXT0iKFt7MH1dIDwgezF9KSBPUiAoW3swfV0gPiB7Mn0pIjsKYVtUZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24uSXNFbXB0eV09Ilt7MH1dID0gJyciOwphW1RlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbi5Ob3RJc0VtcHR5XT0iW3swfV0gPD4gJyciOwphW1RlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbi5Jc051bGxdPSJbezB9XSBJUyBOVUxMIjsKYVtUZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24uTm90SXNOdWxsXT0iTk9UIChbezB9XSBJUyBOVUxMKSI7CnJldHVybiBhOwp9OwpUZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb25zRHluYW1pY0xpbnFGb3JtYXQ9ZnVuY3Rpb24oKXt2YXIgYT17fTsKYVtUZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24uQ29udGFpbnNdPSJ7MH0uQ29udGFpbnMoezF9KXsyfSI7CmFbVGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uLkRvZXNOb3RDb250YWluXT0iIXswfS5Db250YWlucyh7MX0pezJ9IjsKYVtUZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24uU3RhcnRzV2l0aF09InswfS5TdGFydHNXaXRoKHsxfSl7Mn0iOwphW1RlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbi5FbmRzV2l0aF09InswfS5FbmRzV2l0aCh7MX0pezJ9IjsKYVtUZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24uRXF1YWxUb109InswfSA9IHsxfXsyfSI7CmFbVGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uLk5vdEVxdWFsVG9dPSJ7MH0gPD4gezF9ezJ9IjsKYVtUZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24uR3JlYXRlclRoYW5dPSJ7MH0gPiB7MX17Mn0iOwphW1RlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbi5MZXNzVGhhbl09InswfSA8IHsxfXsyfSI7CmFbVGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uLkdyZWF0ZXJUaGFuT3JFcXVhbFRvXT0iezB9ID49IHsxfXsyfSI7CmFbVGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uLkxlc3NUaGFuT3JFcXVhbFRvXT0iezB9IDw9IHsxfXsyfSI7CmFbVGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uLkJldHdlZW5dPSIoezB9ID49IHsxfSkgQU5EICh7MH0gPD0gezJ9KSI7CmFbVGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uLk5vdEJldHdlZW5dPSIoezB9IDwgezF9KSBPUiAoezB9ID4gezJ9KSI7CmFbVGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uLklzRW1wdHldPSd7MH0gPSAiInsxfXsyfSc7CmFbVGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uLk5vdElzRW1wdHldPSd7MH0gPD4gIiJ7MX17Mn0nOwphW1RlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbi5Jc051bGxdPSJ7MH0gPT0gbnVsbHsxfXsyfSI7CmFbVGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uLk5vdElzTnVsbF09Iih7MH0gIT0gbnVsbCl7MX17Mn0iOwpyZXR1cm4gYTsKfTsKVGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uc0FET05ldERhdGFTZXJ2aWNlcz1mdW5jdGlvbigpe3ZhciBhPXt9OwphW1RlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbi5Db250YWluc109InN1YnN0cmluZ29mKHsxfSx7MH0pezJ9IjsKYVtUZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24uRG9lc05vdENvbnRhaW5dPSJub3Qgc3Vic3RyaW5nb2YoezF9LHswfSl7Mn0iOwphW1RlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbi5TdGFydHNXaXRoXT0ic3RhcnRzd2l0aCh7MH0sezF9KXsyfSI7CmFbVGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uLkVuZHNXaXRoXT0iZW5kc3dpdGgoezB9LHsxfSl7Mn0iOwphW1RlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbi5FcXVhbFRvXT0iezB9IGVxIHsxfXsyfSI7CmFbVGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uLk5vdEVxdWFsVG9dPSJ7MH0gbmUgezF9ezJ9IjsKYVtUZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24uR3JlYXRlclRoYW5dPSJ7MH0gZ3QgezF9ezJ9IjsKYVtUZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24uTGVzc1RoYW5dPSJ7MH0gbHQgezF9ezJ9IjsKYVtUZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24uR3JlYXRlclRoYW5PckVxdWFsVG9dPSJ7MH0gZ2UgezF9ezJ9IjsKYVtUZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24uTGVzc1RoYW5PckVxdWFsVG9dPSJ7MH0gbGUgezF9ezJ9IjsKYVtUZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24uQmV0d2Vlbl09Iih7MH0gZ2UgezF9IGFuZCB7MH0gbGUgezJ9KSI7CmFbVGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uLk5vdEJldHdlZW5dPSIoezB9IGxlIHsxfSBvciB7MH0gZ2UgezJ9KSI7CmFbVGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uLklzRW1wdHldPSJ7MH0gZXEgJyd7Mn0iOwphW1RlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbi5Ob3RJc0VtcHR5XT0iezB9IG5lICcnezJ9IjsKYVtUZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24uSXNOdWxsXT0iezB9IGVxIG51bGx7Mn0iOwphW1RlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbi5Ob3RJc051bGxdPSJ7MH0gbmUgbnVsbHsyfSI7CnJldHVybiBhOwp9OwpUZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRXhwcmVzc2lvbj1mdW5jdGlvbigpe3RoaXMuX2ZpZWxkTmFtZT0iIjsKdGhpcy5fZmllbGRWYWx1ZT1udWxsOwp0aGlzLl9maWx0ZXJGdW5jdGlvbj1udWxsOwp0aGlzLl9jb2x1bW5VbmlxdWVOYW1lPW51bGw7CnRoaXMuX2RhdGFUeXBlTmFtZT1udWxsOwp9OwpUZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRXhwcmVzc2lvbi5wcm90b3R5cGU9e2dldF9jb2x1bW5VbmlxdWVOYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbHVtblVuaXF1ZU5hbWU7Cn0sc2V0X2NvbHVtblVuaXF1ZU5hbWU6ZnVuY3Rpb24oYSl7aWYodGhpcy5fY29sdW1uVW5pcXVlTmFtZSE9YSl7dGhpcy5fY29sdW1uVW5pcXVlTmFtZT1hOwp0aGlzLkNvbHVtblVuaXF1ZU5hbWU9YTsKfX0sZ2V0X2ZpZWxkTmFtZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9maWVsZE5hbWU7Cn0sc2V0X2ZpZWxkTmFtZTpmdW5jdGlvbihhKXtpZih0aGlzLl9maWVsZE5hbWUhPWEpe3RoaXMuX2ZpZWxkTmFtZT1hOwp0aGlzLkZpZWxkTmFtZT1hOwp9fSxnZXRfZmllbGRWYWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9maWVsZFZhbHVlOwp9LHNldF9maWVsZFZhbHVlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuX2ZpZWxkVmFsdWUhPWEpe3RoaXMuX2ZpZWxkVmFsdWU9YTsKdGhpcy5GaWVsZFZhbHVlPWE7Cn19LGdldF9maWx0ZXJGdW5jdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9maWx0ZXJGdW5jdGlvbjsKfSxzZXRfZmlsdGVyRnVuY3Rpb246ZnVuY3Rpb24oYSl7aWYodGhpcy5fZmlsdGVyRnVuY3Rpb24hPWEpe3RoaXMuX2ZpbHRlckZ1bmN0aW9uPWE7CnRoaXMuRmlsdGVyRnVuY3Rpb249YTsKfX0sZ2V0X2RhdGFUeXBlTmFtZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kYXRhVHlwZU5hbWU7Cn0sc2V0X2RhdGFUeXBlTmFtZTpmdW5jdGlvbihhKXtpZih0aGlzLl9kYXRhVHlwZU5hbWUhPWEpe3RoaXMuX2RhdGFUeXBlTmFtZT1hOwp0aGlzLkRhdGFUeXBlTmFtZT1hOwp9fSx0b1N0cmluZzpmdW5jdGlvbihkKXt2YXIgYj0iIjsKaWYodHlwZW9mKGQpIT0idW5kZWZpbmVkIil7Yj1kOwp9dmFyIGY9dGhpcy5fZmllbGROYW1lOwppZihiIT0iIil7Zj1TdHJpbmcuZm9ybWF0KCJ7MH0uezF9IixiLGYpOwp9dmFyIGk9IiI7CmlmKHRoaXMuX2ZpbHRlckZ1bmN0aW9uIT1udWxsKXt2YXIgZz1UZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb25zU3FsRm9ybWF0KCk7CnZhciBlPWdbVGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uLnBhcnNlKHRoaXMuX2ZpbHRlckZ1bmN0aW9uKV07CmlmKGUhPW51bGwpe3ZhciBjPVRlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbi5wYXJzZSh0aGlzLl9maWx0ZXJGdW5jdGlvbik7CmlmKGMhPVRlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbi5CZXR3ZWVuJiZjIT1UZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24uTm90QmV0d2Vlbil7aWYoKHRoaXMuZ2V0X2RhdGFUeXBlTmFtZSgpPT0iU3lzdGVtLlN0cmluZyJ8fHRoaXMuZ2V0X2RhdGFUeXBlTmFtZSgpPT0iU3lzdGVtLkNoYXIiKSYmYz09VGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uLkNvbnRhaW5zfHxjPT1UZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24uRG9lc05vdENvbnRhaW58fGM9PVRlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbi5TdGFydHNXaXRofHxjPT1UZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24uRW5kc1dpdGgpe2k9U3RyaW5nLmZvcm1hdChlLGYsdGhpcy5fZmllbGRWYWx1ZSk7Cn1lbHNle2k9U3RyaW5nLmZvcm1hdChlLGYsdGhpcy5nZXRRdW90ZWRWYWx1ZSh0aGlzLl9maWVsZFZhbHVlKSk7Cn19ZWxzZXt2YXIgYT10aGlzLl9maWVsZFZhbHVlLnNwbGl0KCIgIilbMF07CnZhciBoPSh0aGlzLl9maWVsZFZhbHVlLnNwbGl0KCIgIikubGVuZ3RoPjApP3RoaXMuX2ZpZWxkVmFsdWUuc3BsaXQoIiAiKVsxXToiIjsKaT1TdHJpbmcuZm9ybWF0KGUsZix0aGlzLmdldFF1b3RlZFZhbHVlKGEpLHRoaXMuZ2V0UXVvdGVkVmFsdWUoaCkpOwp9fX1yZXR1cm4gaTsKfSx0b09xbDpmdW5jdGlvbihkKXt2YXIgYj0iIjsKaWYodHlwZW9mKGQpIT0idW5kZWZpbmVkIil7Yj1kOwp9dmFyIGY9dGhpcy5fZmllbGROYW1lOwppZihiIT0iIil7Zj1TdHJpbmcuZm9ybWF0KCJ7MH0uezF9IixiLGYpOwp9dmFyIGk9IiI7CmlmKHRoaXMuX2ZpbHRlckZ1bmN0aW9uIT1udWxsKXt2YXIgZz1UZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb25zT3FsRm9ybWF0KCk7CnZhciBlPWdbVGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uLnBhcnNlKHRoaXMuX2ZpbHRlckZ1bmN0aW9uKV07CmlmKGUhPW51bGwpe3ZhciBjPVRlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbi5wYXJzZSh0aGlzLl9maWx0ZXJGdW5jdGlvbik7CmlmKGMhPVRlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbi5CZXR3ZWVuJiZjIT1UZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24uTm90QmV0d2Vlbil7aWYoKHRoaXMuZ2V0X2RhdGFUeXBlTmFtZSgpPT0iU3lzdGVtLlN0cmluZyJ8fHRoaXMuZ2V0X2RhdGFUeXBlTmFtZSgpPT0iU3lzdGVtLkNoYXIiKSYmYz09VGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uLkNvbnRhaW5zfHxjPT1UZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24uRG9lc05vdENvbnRhaW58fGM9PVRlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbi5TdGFydHNXaXRofHxjPT1UZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24uRW5kc1dpdGgpe2k9U3RyaW5nLmZvcm1hdChlLGYsdGhpcy5fZmllbGRWYWx1ZSk7Cn1lbHNle2k9U3RyaW5nLmZvcm1hdChlLGYsdGhpcy5nZXRRdW90ZWRWYWx1ZSh0aGlzLl9maWVsZFZhbHVlKSk7Cn19ZWxzZXt2YXIgYT10aGlzLl9maWVsZFZhbHVlLnNwbGl0KCIgIilbMF07CnZhciBoPSh0aGlzLl9maWVsZFZhbHVlLnNwbGl0KCIgIikubGVuZ3RoPjApP3RoaXMuX2ZpZWxkVmFsdWUuc3BsaXQoIiAiKVsxXToiIjsKaT1TdHJpbmcuZm9ybWF0KGUsZix0aGlzLmdldFF1b3RlZFZhbHVlKGEpLHRoaXMuZ2V0UXVvdGVkVmFsdWUoaCkpOwp9fX1yZXR1cm4gaTsKfSxnZXRRdW90ZWRWYWx1ZTpmdW5jdGlvbihhKXtpZih0aGlzLmdldF9kYXRhVHlwZU5hbWUoKT09IlN5c3RlbS5TdHJpbmcifHx0aGlzLmdldF9kYXRhVHlwZU5hbWUoKT09IlN5c3RlbS5DaGFyInx8dGhpcy5nZXRfZGF0YVR5cGVOYW1lKCk9PSJTeXN0ZW0uRGF0ZVRpbWUifHx0aGlzLmdldF9kYXRhVHlwZU5hbWUoKT09IlN5c3RlbS5UaW1lU3BhbiJ8fHRoaXMuZ2V0X2RhdGFUeXBlTmFtZSgpPT0iU3lzdGVtLkd1aWQiKXtyZXR1cm4gU3RyaW5nLmZvcm1hdCgiJ3swfSciLGEpOwp9cmV0dXJuIGE7Cn0sZ2V0RGF0YVNlcnZpY2VWYWx1ZTpmdW5jdGlvbihhKXtpZih0aGlzLmdldF9kYXRhVHlwZU5hbWUoKT09IlN5c3RlbS5TdHJpbmcifHx0aGlzLmdldF9kYXRhVHlwZU5hbWUoKT09IlN5c3RlbS5DaGFyIil7cmV0dXJuIFN0cmluZy5mb3JtYXQoIid7MH0nIixhKTsKfWVsc2V7aWYodGhpcy5nZXRfZGF0YVR5cGVOYW1lKCk9PSJTeXN0ZW0uRGF0ZVRpbWUiKXtyZXR1cm4gU3RyaW5nLmZvcm1hdCgiZGF0ZXRpbWUnezB9JyIsbmV3IERhdGUoYSkuZm9ybWF0KCJ5eXl5LU1NLWRkVGhoOm1tOnNzIikpOwp9ZWxzZXtpZih0aGlzLmdldF9kYXRhVHlwZU5hbWUoKT09IlN5c3RlbS5UaW1lU3BhbiIpe3JldHVybiBTdHJpbmcuZm9ybWF0KCJ0aW1lJ3swfSciLGEpOwp9ZWxzZXtpZih0aGlzLmdldF9kYXRhVHlwZU5hbWUoKT09IlN5c3RlbS5HdWlkIil7cmV0dXJuIFN0cmluZy5mb3JtYXQoImd1aWQnezB9JyIsYSk7Cn19fX1yZXR1cm4gYTsKfSxnZXREeW5hbWljTGlucVZhbHVlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuZ2V0X2RhdGFUeXBlTmFtZSgpPT0iU3lzdGVtLlN0cmluZyIpe3JldHVybiBTdHJpbmcuZm9ybWF0KCciezB9IicsYSk7Cn1lbHNle2lmKHRoaXMuZ2V0X2RhdGFUeXBlTmFtZSgpLmluZGV4T2YoIkRhdGVUaW1lIikhPS0xKXtyZXR1cm4gU3RyaW5nLmZvcm1hdCgnRGF0ZVRpbWUuUGFyc2UoInswfSIpJyxhKTsKfWVsc2V7aWYodGhpcy5nZXRfZGF0YVR5cGVOYW1lKCkuaW5kZXhPZigiVGltZVNwYW4iKSE9LTEpe3JldHVybiBTdHJpbmcuZm9ybWF0KCdUaW1lU3Bhbi5QYXJzZSgiezB9IiknLGEpOwp9ZWxzZXtpZih0aGlzLmdldF9kYXRhVHlwZU5hbWUoKS5pbmRleE9mKCJHdWlkIikhPS0xKXtyZXR1cm4gU3RyaW5nLmZvcm1hdCgnR3VpZCh7MH0iKScsYSk7Cn19fX1yZXR1cm4gYTsKfSx0b0R5bmFtaWNMaW5xOmZ1bmN0aW9uKGIpe3ZhciBmPSIiOwppZih0eXBlb2YoYikhPSJ1bmRlZmluZWQiKXtmPWI7Cn12YXIgaT0iIjsKaWYodGhpcy5fZmlsdGVyRnVuY3Rpb24hPW51bGwpe3ZhciBoPVRlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbnNEeW5hbWljTGlucUZvcm1hdCgpOwp2YXIgZD1oW1RlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbi5wYXJzZSh0aGlzLl9maWx0ZXJGdW5jdGlvbildOwppZihkIT1udWxsKXt2YXIgYT1UZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24ucGFyc2UodGhpcy5fZmlsdGVyRnVuY3Rpb24pOwp2YXIgZT0iIjsKdmFyIGc9IiI7CmlmKGE9PVRlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbi5Jc051bGx8fGE9PVRlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbi5Ob3RJc051bGwpe2U9IiI7Cn1lbHNle2lmKGE9PVRlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbi5CZXR3ZWVufHxhPT1UZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24uTm90QmV0d2Vlbil7Zz10aGlzLmdldER5bmFtaWNMaW5xVmFsdWUodGhpcy5fZmllbGRWYWx1ZS5zcGxpdCgiICIpWzFdKTsKZT10aGlzLmdldER5bmFtaWNMaW5xVmFsdWUodGhpcy5fZmllbGRWYWx1ZS5zcGxpdCgiICIpWzBdKTsKfWVsc2V7ZT10aGlzLmdldER5bmFtaWNMaW5xVmFsdWUodGhpcy5fZmllbGRWYWx1ZSk7Cn19dmFyIGM9dGhpcy5fZmllbGROYW1lOwppZihmIT0iIil7Yz1TdHJpbmcuZm9ybWF0KCJ7MH0uezF9IixmLGMpOwp9aT1TdHJpbmcuZm9ybWF0KGQsYyxlLGcpOwp9fXJldHVybiBpOwp9LHRvRGF0YVNlcnZpY2U6ZnVuY3Rpb24oKXt2YXIgZj0iIjsKaWYodGhpcy5fZmlsdGVyRnVuY3Rpb24hPW51bGwpe3ZhciBlPVRlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJGdW5jdGlvbnNBRE9OZXREYXRhU2VydmljZXMoKTsKdmFyIGE9ZVtUZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24ucGFyc2UodGhpcy5fZmlsdGVyRnVuY3Rpb24pXTsKaWYoYSE9bnVsbCl7dmFyIGM9VGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uLnBhcnNlKHRoaXMuX2ZpbHRlckZ1bmN0aW9uKTsKdmFyIGI9IiI7CnZhciBkPSIiOwppZihjPT1UZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24uSXNOdWxsfHxjPT1UZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24uTm90SXNOdWxsKXtiPSIiOwp9ZWxzZXtpZihjPT1UZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRnVuY3Rpb24uQmV0d2Vlbnx8Yz09VGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckZ1bmN0aW9uLk5vdEJldHdlZW4pe2Q9dGhpcy5fZmllbGRWYWx1ZS5zcGxpdCgiICIpWzFdOwpiPXRoaXMuX2ZpZWxkVmFsdWUuc3BsaXQoIiAiKVswXTsKfWVsc2V7Yj10aGlzLl9maWVsZFZhbHVlOwp9fWY9U3RyaW5nLmZvcm1hdChhLHRoaXMuX2ZpZWxkTmFtZSx0aGlzLmdldERhdGFTZXJ2aWNlVmFsdWUoYiksKGQhPSIiKT90aGlzLmdldERhdGFTZXJ2aWNlVmFsdWUoZCk6ZCk7Cn19cmV0dXJuIGY7Cn0sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuX2ZpZWxkTmFtZT1udWxsOwp0aGlzLl9maWVsZFZhbHVlPW51bGw7CnRoaXMuX2ZpbHRlckZ1bmN0aW9uPW51bGw7CnRoaXMuX2NvbHVtblVuaXF1ZU5hbWU9bnVsbDsKdGhpcy5fZGF0YVR5cGVOYW1lPW51bGw7Cn19OwpUZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRXhwcmVzc2lvbi5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRXhwcmVzc2lvbiIsbnVsbCxTeXMuSURpc3Bvc2FibGUpOwpUZWxlcmlrLldlYi5VSS5Db2xsZWN0aW9uPWZ1bmN0aW9uKCl7dGhpcy5fYXJyYXk9bmV3IEFycmF5KCk7Cn07ClRlbGVyaWsuV2ViLlVJLkNvbGxlY3Rpb24ucHJvdG90eXBlPXthZGQ6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5fYXJyYXkubGVuZ3RoOwp0aGlzLmluc2VydChhLGIpOwp9LGluc2VydDpmdW5jdGlvbihiLGEpe0FycmF5Lmluc2VydCh0aGlzLl9hcnJheSxiLGEpOwp9LHJlbW92ZTpmdW5jdGlvbihhKXtBcnJheS5yZW1vdmUodGhpcy5fYXJyYXksYSk7Cn0scmVtb3ZlQXQ6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5nZXRJdGVtKGIpOwppZihhKXt0aGlzLnJlbW92ZShhKTsKfX0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLl9hcnJheT1uZXcgQXJyYXkoKTsKfSx0b0xpc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXJyYXk7Cn0sZ2V0X2NvdW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FycmF5Lmxlbmd0aDsKfSxnZXRJdGVtOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9hcnJheVthXTsKfSxpbmRleE9mOmZ1bmN0aW9uKGEpe3JldHVybiBBcnJheS5pbmRleE9mKHRoaXMuX2FycmF5LGEpOwp9LGZvckVhY2g6ZnVuY3Rpb24oYyl7Zm9yKHZhciBiPTAsYT10aGlzLmdldF9jb3VudCgpOwpiPGE7CmIrKyl7Yyh0aGlzLl9hcnJheVtiXSk7Cn19LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLl9hcnJheT1udWxsOwp9fTsKVGVsZXJpay5XZWIuVUkuQ29sbGVjdGlvbi5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5Db2xsZWN0aW9uIixudWxsLFN5cy5JRGlzcG9zYWJsZSk7ClRlbGVyaWsuV2ViLlVJLkdyaWRTb3J0RXhwcmVzc2lvbnM9ZnVuY3Rpb24oKXtUZWxlcmlrLldlYi5VSS5HcmlkU29ydEV4cHJlc3Npb25zLmluaXRpYWxpemVCYXNlKHRoaXMpOwp9OwpUZWxlcmlrLldlYi5VSS5HcmlkU29ydEV4cHJlc3Npb25zLnByb3RvdHlwZT17ZmluZDpmdW5jdGlvbihiKXtmb3IodmFyIGQ9MCxjPXRoaXMuZ2V0X2NvdW50KCk7CmQ8YzsKZCsrKXt2YXIgYT10aGlzLmdldEl0ZW0oZCk7CmlmKGEuZ2V0X2ZpZWxkTmFtZSgpPT1iKXtyZXR1cm4gYTsKfX1yZXR1cm4gbnVsbDsKfSxzb3J0T3JkZXJBc1N0cmluZzpmdW5jdGlvbihhKXtpZihhPT0wKXtyZXR1cm4iIjsKfWVsc2V7aWYoYT09MSl7cmV0dXJuIkFTQyI7Cn1lbHNle2lmKGE9PTIpe3JldHVybiJERVNDIjsKfX19fSx0b1N0cmluZzpmdW5jdGlvbigpe3ZhciBjPVtdOwpmb3IodmFyIGQ9MCxiPXRoaXMuZ2V0X2NvdW50KCk7CmQ8YjsKZCsrKXt2YXIgYT10aGlzLmdldEl0ZW0oZCk7CmNbYy5sZW5ndGhdPVN0cmluZy5mb3JtYXQoInswfSB7MX0iLGEuZ2V0X2ZpZWxkTmFtZSgpLHRoaXMuc29ydE9yZGVyQXNTdHJpbmcoYS5nZXRfc29ydE9yZGVyKCkpKTsKfXJldHVybiBjLmpvaW4oIiwiKTsKfX07ClRlbGVyaWsuV2ViLlVJLkdyaWRTb3J0RXhwcmVzc2lvbnMucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuR3JpZFNvcnRFeHByZXNzaW9ucyIsVGVsZXJpay5XZWIuVUkuQ29sbGVjdGlvbik7ClRlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJFeHByZXNzaW9ucz1mdW5jdGlvbigpe1RlbGVyaWsuV2ViLlVJLkdyaWRGaWx0ZXJFeHByZXNzaW9ucy5pbml0aWFsaXplQmFzZSh0aGlzKTsKfTsKVGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckV4cHJlc3Npb25zLnByb3RvdHlwZT17ZmluZDpmdW5jdGlvbihiKXtmb3IodmFyIGM9MCxhPXRoaXMuZ2V0X2NvdW50KCk7CmM8YTsKYysrKXt2YXIgZD10aGlzLmdldEl0ZW0oYyk7CmlmKGQuZ2V0X2NvbHVtblVuaXF1ZU5hbWUoKT09Yil7cmV0dXJuIGQ7Cn19cmV0dXJuIG51bGw7Cn0sdG9TdHJpbmc6ZnVuY3Rpb24oYil7dmFyIGQ9IiI7CmlmKHR5cGVvZihiKSE9InVuZGVmaW5lZCIpe2Q9YjsKfXZhciBmPVtdOwpmb3IodmFyIGU9MCxhPXRoaXMuZ2V0X2NvdW50KCk7CmU8YTsKZSsrKXt2YXIgYz10aGlzLmdldEl0ZW0oZSk7CmZbZi5sZW5ndGhdPWMudG9TdHJpbmcoZCk7Cn1yZXR1cm4gZi5qb2luKCIgQU5EICIpOwp9LHRvT3FsOmZ1bmN0aW9uKGIpe3ZhciBkPSIiOwppZih0eXBlb2YoYikhPSJ1bmRlZmluZWQiKXtkPWI7Cn12YXIgZj1bXTsKZm9yKHZhciBlPTAsYT10aGlzLmdldF9jb3VudCgpOwplPGE7CmUrKyl7dmFyIGM9dGhpcy5nZXRJdGVtKGUpOwpmW2YubGVuZ3RoXT1jLnRvT3FsKGQpOwp9cmV0dXJuIGYuam9pbigiIEFORCAiKTsKfSx0b0R5bmFtaWNMaW5xOmZ1bmN0aW9uKGIpe3ZhciBkPSIiOwppZih0eXBlb2YoYikhPSJ1bmRlZmluZWQiKXtkPWI7Cn12YXIgZj1bXTsKZm9yKHZhciBlPTAsYT10aGlzLmdldF9jb3VudCgpOwplPGE7CmUrKyl7dmFyIGM9dGhpcy5nZXRJdGVtKGUpOwpmW2YubGVuZ3RoXT1jLnRvRHluYW1pY0xpbnEoZCk7Cn1yZXR1cm4gZi5qb2luKCIgQU5EICIpOwp9LHRvRGF0YVNlcnZpY2U6ZnVuY3Rpb24oKXt2YXIgYz1bXTsKZm9yKHZhciBkPTAsYj10aGlzLmdldF9jb3VudCgpOwpkPGI7CmQrKyl7dmFyIGE9dGhpcy5nZXRJdGVtKGQpOwpjW2MubGVuZ3RoXT1hLnRvRGF0YVNlcnZpY2UoKTsKfXJldHVybiBjLmpvaW4oIiBhbmQgIik7Cn19OwpUZWxlcmlrLldlYi5VSS5HcmlkRmlsdGVyRXhwcmVzc2lvbnMucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuR3JpZEZpbHRlckV4cHJlc3Npb25zIixUZWxlcmlrLldlYi5VSS5Db2xsZWN0aW9uKTsKVHlwZS5yZWdpc3Rlck5hbWVzcGFjZSgiVGVsZXJpay5XZWIuVUkiKTsKVGVsZXJpay5XZWIuVUkuR3JpZEdyb3VwUGFuZWw9ZnVuY3Rpb24oYSl7VGVsZXJpay5XZWIuVUkuR3JpZEdyb3VwUGFuZWwuaW5pdGlhbGl6ZUJhc2UodGhpcyxbYV0pOwp0aGlzLl9vd25lcj17fTsKfTsKVGVsZXJpay5XZWIuVUkuR3JpZEdyb3VwUGFuZWwucHJvdG90eXBlPXtpbml0aWFsaXplOmZ1bmN0aW9uKCl7VGVsZXJpay5XZWIuVUkuR3JpZEdyb3VwUGFuZWwuY2FsbEJhc2VNZXRob2QodGhpcywiaW5pdGlhbGl6ZSIpOwp0aGlzLmdyb3VwUGFuZWxJdGVtQ291bnRlcj0wOwp0aGlzLl9jcmVhdGVHcm91cFBhbmVsSXRlbXModGhpcy5nZXRfZWxlbWVudCgpLDApOwp9LGRpc3Bvc2U6ZnVuY3Rpb24oKXskY2xlYXJIYW5kbGVycyh0aGlzLmdldF9lbGVtZW50KCkpOwp0aGlzLl9lbGVtZW50LmNvbnRyb2w9bnVsbDsKdGhpcy5fZ3JvdXBUb3VjaEl0ZW1zPVtdOwpUZWxlcmlrLldlYi5VSS5HcmlkR3JvdXBQYW5lbC5jYWxsQmFzZU1ldGhvZCh0aGlzLCJkaXNwb3NlIik7Cn0sX2NyZWF0ZUdyb3VwUGFuZWxJdGVtczpmdW5jdGlvbihiKXt0aGlzLl9pdGVtc0ludGVybmFsPWV2YWwodGhpcy5fb3duZXIuX2dyb3VwUGFuZWxJdGVtcyk7CnRoaXMuX2l0ZW1zPVtdOwpmb3IodmFyIGY9MDsKZjxiLnJvd3MubGVuZ3RoOwpmKyspe3ZhciBjPWZhbHNlOwp2YXIgZz1iLnJvd3NbZl07CmZvcih2YXIgZD0wOwpkPGcuY2VsbHMubGVuZ3RoOwpkKyspe3ZhciBlPWcuY2VsbHNbZF07CmlmKGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT0idGgiKXt2YXIgYTsKaWYodGhpcy5faXRlbXNJbnRlcm5hbFt0aGlzLmdyb3VwUGFuZWxJdGVtQ291bnRlcl0pe2E9dGhpcy5faXRlbXNJbnRlcm5hbFt0aGlzLmdyb3VwUGFuZWxJdGVtQ291bnRlcl0uSGllcmFyY2hpY2FsSW5kZXg7Cn1pZihhKXt0aGlzLl9pdGVtc1t0aGlzLl9pdGVtcy5sZW5ndGhdPSRjcmVhdGUoVGVsZXJpay5XZWIuVUkuR3JpZEdyb3VwUGFuZWxJdGVtLHtfaGllcmFyY2hpY2FsSW5kZXg6YSxfb3duZXI6dGhpc30sbnVsbCxudWxsLGUpOwpjPXRydWU7CnRoaXMuZ3JvdXBQYW5lbEl0ZW1Db3VudGVyKys7Cn19aWYoKGUuZmlyc3RDaGlsZCkmJihlLmZpcnN0Q2hpbGQudGFnTmFtZSkpe2lmKGUuZmlyc3RDaGlsZC50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJ0YWJsZSIpe3RoaXMuX2NyZWF0ZUdyb3VwUGFuZWxJdGVtcyhlLmZpcnN0Q2hpbGQpOwp9fX19fSxfaXNJdGVtOmZ1bmN0aW9uKGIpe2Zvcih2YXIgYT0wOwphPHRoaXMuX2l0ZW1zLmxlbmd0aDsKYSsrKXtpZih0aGlzLl9pdGVtc1thXS5nZXRfZWxlbWVudCgpPT1iKXtyZXR1cm4gdGhpcy5faXRlbXNbYV07Cn19cmV0dXJuIG51bGw7Cn19OwpUZWxlcmlrLldlYi5VSS5HcmlkR3JvdXBQYW5lbC5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5HcmlkR3JvdXBQYW5lbCIsU3lzLlVJLkNvbnRyb2wpOwpUZWxlcmlrLldlYi5VSS5HcmlkR3JvdXBQYW5lbEl0ZW09ZnVuY3Rpb24oYSl7VGVsZXJpay5XZWIuVUkuR3JpZEdyb3VwUGFuZWxJdGVtLmluaXRpYWxpemVCYXNlKHRoaXMsW2FdKTsKdGhpcy5faGllcmFyY2hpY2FsSW5kZXg9bnVsbDsKdGhpcy5fb3duZXI9e307Cn07ClRlbGVyaWsuV2ViLlVJLkdyaWRHcm91cFBhbmVsSXRlbS5wcm90b3R5cGU9e2luaXRpYWxpemU6ZnVuY3Rpb24oKXtUZWxlcmlrLldlYi5VSS5HcmlkR3JvdXBQYW5lbEl0ZW0uY2FsbEJhc2VNZXRob2QodGhpcywiaW5pdGlhbGl6ZSIpOwp0aGlzLmdldF9lbGVtZW50KCkuc3R5bGUuY3Vyc29yPSJtb3ZlIjsKdGhpcy5fb25Nb3VzZURvd25EZWxlZ2F0ZT0kdGVsZXJpay5hZGRNb2JpbGVIYW5kbGVyKHRoaXMsdGhpcy5nZXRfZWxlbWVudCgpLCJtb3VzZWRvd24iLHRoaXMuX29uTW91c2VEb3duSGFuZGxlcik7Cn0sZGlzcG9zZTpmdW5jdGlvbigpeyRjbGVhckhhbmRsZXJzKHRoaXMuZ2V0X2VsZW1lbnQoKSk7CnRoaXMuX2VsZW1lbnQuY29udHJvbD1udWxsOwpUZWxlcmlrLldlYi5VSS5HcmlkR3JvdXBQYW5lbEl0ZW0uY2FsbEJhc2VNZXRob2QodGhpcywiZGlzcG9zZSIpOwp9LF9vbk1vdXNlRG93bkhhbmRsZXI6ZnVuY3Rpb24oYSl7dGhpcy5fb25Nb3VzZVVwRGVsZWdhdGU9JHRlbGVyaWsuYWRkTW9iaWxlSGFuZGxlcih0aGlzLGRvY3VtZW50LCJtb3VzZXVwIix0aGlzLl9vbk1vdXNlVXBIYW5kbGVyLG51bGwsdHJ1ZSk7CnRoaXMuX29uTW91c2VNb3ZlRGVsZWdhdGU9JHRlbGVyaWsuYWRkTW9iaWxlSGFuZGxlcih0aGlzLGRvY3VtZW50LCJtb3VzZW1vdmUiLHRoaXMuX29uTW91c2VNb3ZlSGFuZGxlcixudWxsLHRydWUpOwpUZWxlcmlrLldlYi5VSS5HcmlkLkNyZWF0ZURyYWdEcm9wKGEsdGhpcyxmYWxzZSk7ClRlbGVyaWsuV2ViLlVJLkdyaWQuQ3JlYXRlUmVvcmRlckluZGljYXRvcnModGhpcy5nZXRfZWxlbWVudCgpLHRoaXMuX293bmVyLl9vd25lci5Ta2luLHRoaXMuX293bmVyLl9vd25lci5JbWFnZXNQYXRoLGZhbHNlLHRoaXMuX293bmVyLl9vd25lci5nZXRfaWQoKSk7Cn0sX29uTW91c2VVcEhhbmRsZXI6ZnVuY3Rpb24oYSl7JHRlbGVyaWsucmVtb3ZlTW9iaWxlSGFuZGxlcihkb2N1bWVudCwibW91c2V1cCIsdGhpcy5fb25Nb3VzZVVwRGVsZWdhdGUsbnVsbCx0cnVlKTsKJHRlbGVyaWsucmVtb3ZlTW9iaWxlSGFuZGxlcihkb2N1bWVudCwibW91c2Vtb3ZlIix0aGlzLl9vbk1vdXNlTW92ZURlbGVnYXRlLG51bGwsdHJ1ZSk7CnZhciBiPXRoaXMuX2ZpcmVEcm9wQWN0aW9uKGEpOwp2YXIgYz10aGlzLl9vd25lci5fb3duZXI7CnZhciBkPWMuQ2xpZW50U2V0dGluZ3MuQW5pbWF0aW9uJiZjLkNsaWVudFNldHRpbmdzLkFuaW1hdGlvbi5BbGxvd0NvbHVtblJldmVydEFuaW1hdGlvbjsKaWYoZCYmIWIpe1RlbGVyaWsuV2ViLlVJLkdyaWQuQW5pbWF0ZVJldmVydERyYWdEcm9wKHRoaXMsYy5DbGllbnRTZXR0aW5ncy5BbmltYXRpb24uQ29sdW1uUmV2ZXJ0QW5pbWF0aW9uRHVyYXRpb24pOwp9ZWxzZXtUZWxlcmlrLldlYi5VSS5HcmlkLkRlc3Ryb3lEcmFnRHJvcCgpOwp9fSxfb25Nb3VzZU1vdmVIYW5kbGVyOmZ1bmN0aW9uKGEpe2lmKCR0ZWxlcmlrLmlzVG91Y2hEZXZpY2Upe2EucHJldmVudERlZmF1bHQoKTsKfVRlbGVyaWsuV2ViLlVJLkdyaWQuTW92ZURyYWdEcm9wKGEsdGhpcyxmYWxzZSk7Cn0sX2ZpcmVEcm9wQWN0aW9uOmZ1bmN0aW9uKGcpe2lmKCR0ZWxlcmlrLmlzVG91Y2hEZXZpY2Upe2N1cnJlbnRFbGVtZW50PSR0ZWxlcmlrLmdldFRvdWNoVGFyZ2V0KGcpOwp9ZWxzZXtjdXJyZW50RWxlbWVudD1UZWxlcmlrLldlYi5VSS5HcmlkLkdldEN1cnJlbnRFbGVtZW50KGcpOwp9aWYoY3VycmVudEVsZW1lbnQhPW51bGwpe3ZhciBsPXRoaXMuX293bmVyLl9vd25lcjsKdmFyIGE9bnVsbDsKdmFyIGM9ZmFsc2U7CnZhciBmPSR0ZWxlcmlrLmdldEVsZW1lbnRzQnlDbGFzc05hbWUobC5nZXRfZWxlbWVudCgpLCJyZ0dyb3VwSXRlbSIsInRoIik7CmZvcih2YXIgaz0wOwprPGYubGVuZ3RoOwprKyspe2lmKCR0ZWxlcmlrLmlzTW91c2VPdmVyRWxlbWVudChmW2tdLGcpKXtjPXRydWU7CmE9ZltrXTsKYnJlYWs7Cn19aWYoJHRlbGVyaWsuaXNNb3VzZU92ZXJFbGVtZW50KHRoaXMuX293bmVyLmdldF9lbGVtZW50KCksZykpe2M9dHJ1ZTsKfXZhciBoPXRoaXMuX293bmVyLl9vd25lci5DbGllbnRTZXR0aW5ncy5Qb3N0QmFja0Z1bmN0aW9uOwpoPWgucmVwbGFjZSgiezB9Iix0aGlzLl9vd25lci5fb3duZXIuVW5pcXVlSUQpOwppZighYyYmKCEoVGVsZXJpay5XZWIuVUkuR3JpZC5Jc0NoaWxkT2YoY3VycmVudEVsZW1lbnQsdGhpcy5fb3duZXIuZ2V0X2VsZW1lbnQoKSl8fCR0ZWxlcmlrLmlzVG91Y2hEZXZpY2UmJmN1cnJlbnRFbGVtZW50PT10aGlzLl9vd25lci5nZXRfZWxlbWVudCgpKSkpe3ZhciBqPSJVbkdyb3VwQnlFeHByZXNzaW9uIjsKdmFyIG09dGhpcy5faGllcmFyY2hpY2FsSW5kZXg7CnZhciBkPW5ldyBTeXMuQ2FuY2VsRXZlbnRBcmdzKCk7CmQuZ2V0X2NvbW1hbmROYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIGo7Cn07CmQuZ2V0X2NvbW1hbmRBcmd1bWVudD1mdW5jdGlvbigpe3JldHVybiBtOwp9Owp0aGlzLl9vd25lci5fb3duZXIucmFpc2VfY29tbWFuZChkKTsKaWYoZC5nZXRfY2FuY2VsKCkpe3JldHVybiBmYWxzZTsKfWg9aC5yZXBsYWNlKCJ7MX0iLCJVbkdyb3VwQnlFeHByZXNzaW9uLCIrdGhpcy5faGllcmFyY2hpY2FsSW5kZXgpOwpldmFsKGgpOwpyZXR1cm4gdHJ1ZTsKfWVsc2V7dmFyIGI9dGhpcy5fb3duZXIuX2lzSXRlbShjdXJyZW50RWxlbWVudCk7CmlmKGI9PW51bGwmJmEhPW51bGwpe2N1cnJlbnRFbGVtZW50PWE7CmI9dGhpcy5fb3duZXIuX2lzSXRlbShjdXJyZW50RWxlbWVudCk7Cn1pZigoY3VycmVudEVsZW1lbnQhPXRoaXMuZ2V0X2VsZW1lbnQoKSkmJihiIT1udWxsKSYmKGN1cnJlbnRFbGVtZW50LnBhcmVudE5vZGU9PXRoaXMuZ2V0X2VsZW1lbnQoKS5wYXJlbnROb2RlKSl7dmFyIGo9IlJlb3JkZXJHcm91cEJ5RXhwcmVzc2lvbiI7CnZhciBtPXRoaXMuX2hpZXJhcmNoaWNhbEluZGV4KyIsIitiLl9oaWVyYXJjaGljYWxJbmRleDsKdmFyIGQ9bmV3IFN5cy5DYW5jZWxFdmVudEFyZ3MoKTsKZC5nZXRfY29tbWFuZE5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gajsKfTsKZC5nZXRfY29tbWFuZEFyZ3VtZW50PWZ1bmN0aW9uKCl7cmV0dXJuIG07Cn07CnRoaXMuX293bmVyLl9vd25lci5yYWlzZV9jb21tYW5kKGQpOwppZihkLmdldF9jYW5jZWwoKSl7cmV0dXJuIGZhbHNlOwp9aD1oLnJlcGxhY2UoInsxfSIsIlJlb3JkZXJHcm91cEJ5RXhwcmVzc2lvbiwiK3RoaXMuX2hpZXJhcmNoaWNhbEluZGV4KyIsIitiLl9oaWVyYXJjaGljYWxJbmRleCk7CmV2YWwoaCk7CnJldHVybiB0cnVlOwp9fX1yZXR1cm4gZmFsc2U7Cn19OwpUZWxlcmlrLldlYi5VSS5HcmlkR3JvdXBQYW5lbEl0ZW0ucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuR3JpZEdyb3VwUGFuZWxJdGVtIixTeXMuVUkuQ29udHJvbCk7ClR5cGUucmVnaXN0ZXJOYW1lc3BhY2UoIlRlbGVyaWsuV2ViLlVJIik7CiR0ZWxlcmlrLmZpbmRHcmlkPSRmaW5kOwokdGVsZXJpay50b0dyaWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGE7Cn07ClRlbGVyaWsuV2ViLlVJLlJhZEdyaWQ9ZnVuY3Rpb24oYil7dmFyIGE9WyJncmlkQ3JlYXRpbmciLCJncmlkQ3JlYXRlZCIsImdyaWREZXN0cm95aW5nIiwibWFzdGVyVGFibGVWaWV3Q3JlYXRpbmciLCJtYXN0ZXJUYWJsZVZpZXdDcmVhdGVkIiwidGFibGVDcmVhdGluZyIsInRhYmxlQ3JlYXRlZCIsInRhYmxlRGVzdHJveWluZyIsImNlbGxEZXNlbGVjdGVkIiwiY2VsbERlc2VsZWN0aW5nIiwiY2VsbFNlbGVjdGVkIiwiY2VsbFNlbGVjdGluZyIsImNvbHVtbkNyZWF0aW5nIiwiY29sdW1uQ3JlYXRlZCIsImNvbHVtbkRlc3Ryb3lpbmciLCJjb2x1bW5SZXNpemluZyIsImNvbHVtblJlc2l6ZWQiLCJjb2x1bW5Td2FwcGluZyIsImNvbHVtblN3YXBwZWQiLCJjb2x1bW5Nb3ZpbmdUb0xlZnQiLCJjb2x1bW5Nb3ZlZFRvTGVmdCIsImNvbHVtbk1vdmluZ1RvUmlnaHQiLCJjb2x1bW5Nb3ZlZFRvUmlnaHQiLCJjb2x1bW5IaWRpbmciLCJjb2x1bW5IaWRkZW4iLCJjb2x1bW5TaG93aW5nIiwiY29sdW1uU2hvd24iLCJyb3dDcmVhdGluZyIsInJvd0NyZWF0ZWQiLCJyb3dEZXN0cm95aW5nIiwicm93UmVzaXppbmciLCJyb3dSZXNpemVkIiwicm93SGlkaW5nIiwicm93SGlkZGVuIiwicm93U2hvd2luZyIsInJvd1Nob3duIiwicm93Q2xpY2siLCJyb3dEYmxDbGljayIsImNvbHVtbkNsaWNrIiwiY29sdW1uRGJsQ2xpY2siLCJyb3dTZWxlY3RpbmciLCJyb3dTZWxlY3RlZCIsInJvd0Rlc2VsZWN0aW5nIiwicm93RGVzZWxlY3RlZCIsInJvd01vdXNlT3ZlciIsInJvd01vdXNlT3V0IiwiY29sdW1uTW91c2VPdmVyIiwiY29sdW1uTW91c2VPdXQiLCJjb2x1bW5Db250ZXh0TWVudSIsInJvd0NvbnRleHRNZW51Iiwic2Nyb2xsIiwia2V5UHJlc3MiLCJoaWVyYXJjaHlFeHBhbmRpbmciLCJoaWVyYXJjaHlFeHBhbmRlZCIsImhpZXJhcmNoeUNvbGxhcHNpbmciLCJoaWVyYXJjaHlDb2xsYXBzZWQiLCJncm91cEV4cGFuZGluZyIsImdyb3VwRXhwYW5kZWQiLCJncm91cENvbGxhcHNpbmciLCJncm91cENvbGxhcHNlZCIsImFjdGl2ZVJvd0NoYW5naW5nIiwiYWN0aXZlUm93Q2hhbmdlZCIsInJvd0RlbGV0aW5nIiwicm93RGVsZXRlZCIsImZpbHRlck1lbnVTaG93aW5nIiwicm93RHJvcHBpbmciLCJyb3dEcm9wcGVkIiwicm93RHJhZ1N0YXJ0ZWQiLCJyb3dEcmFnZ2luZyIsInBvcFVwU2hvd2luZyIsImNvbW1hbmQiLCJyb3dEYXRhQm91bmQiLCJkYXRhQmluZGluZyIsImRhdGFCb3VuZCIsImhlYWRlck1lbnVTaG93aW5nIiwiZGF0YUJpbmRpbmdGYWlsZWQiLCJkYXRhU291cmNlUmVzb2x2ZWQiXTsKdGhpcy5faW5pdGlhbGl6ZUV2ZW50cyhhKTsKVGVsZXJpay5XZWIuVUkuUmFkR3JpZC5pbml0aWFsaXplQmFzZSh0aGlzLFtiXSk7CnRoaXMuU2tpbj0iRGVmYXVsdCI7CnRoaXMuX2ltYWdlc1BhdGg9IiI7CnRoaXMuX2VtYmVkZGVkU2tpbj10cnVlOwp0aGlzLkNsaWVudElEPW51bGw7CnRoaXMuVW5pcXVlSUQ9bnVsbDsKdGhpcy5fYWN0aXZlUm93SW5kZXg9IiI7CnRoaXMuX2FjdGl2ZVJvdz1udWxsOwp0aGlzLlNob3dHcm91cFBhbmVsPWZhbHNlOwp0aGlzLl9ncm91cFBhbmVsPW51bGw7CnRoaXMuX2dyb3VwUGFuZWxDbGllbnRJRD0iIjsKdGhpcy5fZ3JvdXBQYW5lbEl0ZW1zPSIiOwp0aGlzLl9ncmlkVGFibGVWaWV3c0RhdGE9IiI7CnRoaXMuX3BvcFVwSWRzPSIiOwp0aGlzLl9wb3BVcFNldHRpbmdzPXt9Owp0aGlzLkNsaWVudFNldHRpbmdzPXt9Owp0aGlzLl9zZWxlY3Rpb249bnVsbDsKdGhpcy5fY2VsbFNlbGVjdGlvbj1udWxsOwp0aGlzLl9zZWxlY3RlZENlbGxzSW5kZXhlcz1bXTsKdGhpcy5fc2VsZWN0ZWRDZWxsc0ludGVybmFsPVtdOwp0aGlzLl9zZWxlY3RlZEluZGV4ZXM9W107CnRoaXMuX3NlbGVjdGVkSXRlbXNJbnRlcm5hbD1bXTsKdGhpcy5fdW5zZWxlY3RhYmxlSXRlbXNJbnRlcm5hbD1bXTsKdGhpcy5fdW5zZWxlY3RhYmxlSXRlbXNJbmRleGVzPVtdOwp0aGlzLl9tYXN0ZXJDbGllbnRJRD0iIjsKdGhpcy5fc2Nyb2xsaW5nPW51bGw7CnRoaXMuX2dyaWRJdGVtUmVzaXplcj1udWxsOwp0aGlzLl9yZXNpemVkSXRlbXM9IiI7CnRoaXMuX3Jlc2l6ZWRDb2x1bW5zPSIiOwp0aGlzLl9yZXNpemVkQ29udHJvbD0iIjsKdGhpcy5faGlkZWRJdGVtcz0iIjsKdGhpcy5fc2hvd2VkSXRlbXM9IiI7CnRoaXMuX2hpZGVkQ29sdW1ucz1bXTsKdGhpcy5fc2hvd2VkQ29sdW1ucz1bXTsKdGhpcy5fcmVvcmRlcmVkQ29sdW1ucz1bXTsKdGhpcy5fZmlsdGVyTWVudURhdGE9e307CnRoaXMuX2ZpbHRlck1lbnU9bnVsbDsKdGhpcy5faGVhZGVyQ29udGV4dE1lbnU9bnVsbDsKdGhpcy5fZGV0YWlsVGFibGVzPVtdOwp0aGlzLl9jbGllbnRLZXlWYWx1ZXM9e307CnRoaXMuX29uS2V5RG93bkRlbGVnYXRlPW51bGw7CnRoaXMuX29uTW91c2VNb3ZlRGVsZWdhdGU9bnVsbDsKdGhpcy5faGllcmFyY2h5U2V0dGluZ3M9e307CnRoaXMuX2dyb3VwaW5nU2V0dGluZ3M9e307CnRoaXMuX2N1cnJlbnRQYWdlSW5kZXg9bnVsbDsKdGhpcy5fZXhwYW5kSXRlbXM9e307CnRoaXMuX2V4cGFuZGVkSXRlbXM9W107CnRoaXMuX2V4cGFuZGVkR3JvdXBJdGVtcz1bXTsKdGhpcy5fZGVsZXRlZEl0ZW1zPVtdOwp0aGlzLl9leHBhbmRlZEZpbHRlckl0ZW1zPVtdOwp0aGlzLl9pbml0aWFsaXplUmVxdWVzdEhhbmRsZXI9bnVsbDsKdGhpcy5fZW5kUmVxdWVzdEhhbmRsZXI9bnVsbDsKdGhpcy5fc3RhdHVzTGFiZWxJRD1udWxsOwp0aGlzLl9sb2FkaW5nVGV4dD1udWxsOwp0aGlzLl9yZWFkeVRleHQ9bnVsbDsKdGhpcy5fb25GaWx0ZXJNZW51Q2xpY2s9bnVsbDsKdGhpcy5fcG9wVXBMb2NhdGlvbnM9e307CnRoaXMuX3N1Ym1pdENvbnRyb2xzPVtdOwp0aGlzLl9hbGxvd1N1Ym1pdE9uRW50ZXI9ZmFsc2U7CnRoaXMuX3ZhbGlkYXRpb25Hcm91cD0iIjsKd2luZG93W3RoaXMuQ2xpZW50SURdPXRoaXM7CnRoaXMuX2Nhbk1vdmVSb3c9ZmFsc2U7CnRoaXMuX29yaWdpbmFsRHJhZ0l0ZW09bnVsbDsKdGhpcy5fZHJvcENsdWU9bnVsbDsKdGhpcy5fZHJhZ2dlZEl0ZW1zPVtdOwp0aGlzLl9kcmFnZ2VkSXRlbXNJbmRleGVzPVtdOwp0aGlzLl9kcmFnZ2luZ1Bvc2l0aW9uPSJhYm92ZSI7CnRoaXMuX2VkaXRJbmRleGVzPW51bGw7CnRoaXMuX2NvbnRyb2xUb0ZvY3VzPW51bGw7CnRoaXMuX2RvY3VtZW50S2V5RG93bkRlbGVnYXRlPW51bGw7CnRoaXMuX2RhdGFEaXZNb3VzZURvd25EZWxlZ2F0ZT1udWxsOwp0aGlzLl9kYXRhRGl2TW91c2VVcERlbGVnYXRlPW51bGw7CnRoaXMuX2RvY3VtZW50TW91c2VVcERlbGVnYXRlPW51bGw7CnRoaXMuX2RvY3VtZW50TW91c2VNb3ZlRGVsZWdhdGU9bnVsbDsKdGhpcy5fc2hvdWxkRm9jdXNPblBhZ2U9bnVsbDsKdGhpcy5fbGFzdFNlbGVjdGVkSXRlbUluZGV4PW51bGw7CnRoaXMuX2ludmlzaWJsZVBhcmVudHNBcnJheT1bXTsKdGhpcy5fYW5pbWF0aW9uPW51bGw7CnRoaXMuVmFsaWRhdGlvblNldHRpbmdzPXt9Owp0aGlzLl9lbmFibGVBcmlhU3VwcG9ydD1mYWxzZTsKdGhpcy5fcG9zaXRpb25lZERhdGFJdGVtcz1udWxsOwp0aGlzLl9wb3NpdGlvbmVkRGF0YUl0ZW1zSW5kZXhlcz1udWxsOwp0aGlzLl9rZXlib2FyZE5hdmlnYXRpb25Qcm9wZXJ0aWVzPXtwb3NpdGlvbmVkRGF0YUl0ZW1zOm51bGwscG9zaXRpb25lZERhdGFJdGVtc0luZGV4ZXM6bnVsbCxsYXN0Q2xpY2tTZWxlY3RlZEl0ZW06bnVsbCxjdXJyZW50U2VsZWN0ZWRJbmRleDowLGluaXRpYWxSb3dJbmRleDowLGRpcmVjdGlvbkluZGV4OjAsbGFzdFNlbGVjdGVkUm93SW5kZXg6bnVsbCxob2xkaW5nQ3RybDpmYWxzZSxmaXJzdFNlbGVjdGlvbjp0cnVlLHVuc2VsZWN0YWJsZUl0ZW1zQ291bnQ6MCxzZXRJbml0aWFsU3RhdGU6ZnVuY3Rpb24oKXt0aGlzLmluaXRpYWxSb3dJbmRleD10aGlzLmN1cnJlbnRTZWxlY3RlZEluZGV4Owp0aGlzLmRpcmVjdGlvbkluZGV4PTA7Cn19Owp0aGlzLm9kYXRhQ2xpZW50U2V0dGluZ3M9bnVsbDsKdGhpcy5fZGF0YUJpbmRpbmdXaXRoU2VsZWN0TWV0aG9kPWZhbHNlOwp9OwpUZWxlcmlrLldlYi5VSS5SYWRHcmlkLnByb3RvdHlwZT17aW5pdGlhbGl6ZTpmdW5jdGlvbigpe1RlbGVyaWsuV2ViLlVJLlJhZEdyaWQuY2FsbEJhc2VNZXRob2QodGhpcywiaW5pdGlhbGl6ZSIpOwppZigoIXRoaXMuX21hc3RlckNsaWVudElEKXx8KCEkZ2V0KHRoaXMuX21hc3RlckNsaWVudElEKSkpe3JldHVybjsKfXRoaXMuX2FwcGx5Q2VsbFNwYWNpbmdJZlJlcXVpcmVkKCk7CmlmKHRoaXMuQ2xpZW50U2V0dGluZ3Mpe2lmKCF0aGlzLkNsaWVudFNldHRpbmdzLlBvc3RCYWNrRnVuY3Rpb24pe3RoaXMuQ2xpZW50U2V0dGluZ3MuUG9zdEJhY2tGdW5jdGlvbj0iX19kb1Bvc3RCYWNrKCd7MH0nLCd7MX0nKSI7Cn1pZighdGhpcy5DbGllbnRTZXR0aW5ncy5BbGxvd0V4cGFuZENvbGxhcHNlKXt0aGlzLkNsaWVudFNldHRpbmdzLkFsbG93RXhwYW5kQ29sbGFwc2U9dHJ1ZTsKfWlmKHRoaXMuQ2xpZW50U2V0dGluZ3MuQWxsb3dHcm91cEV4cGFuZENvbGxhcHNlPT1udWxsKXt0aGlzLkNsaWVudFNldHRpbmdzLkFsbG93R3JvdXBFeHBhbmRDb2xsYXBzZT10cnVlOwp9aWYodHlwZW9mKHRoaXMuQ2xpZW50U2V0dGluZ3MuRW5hYmxlQWx0ZXJuYXRpbmdJdGVtcyk9PSJ1bmRlZmluZWQiKXt0aGlzLkNsaWVudFNldHRpbmdzLkVuYWJsZUFsdGVybmF0aW5nSXRlbXM9dHJ1ZTsKfWlmKCF0aGlzLkNsaWVudFNldHRpbmdzLkNvbHVtbnNSZW9yZGVyTWV0aG9kKXt0aGlzLkNsaWVudFNldHRpbmdzLkNvbHVtbnNSZW9yZGVyTWV0aG9kPTA7Cn1pZih0aGlzLkNsaWVudFNldHRpbmdzLkNsaWVudE1lc3NhZ2VzKXtpZih0eXBlb2YodGhpcy5DbGllbnRTZXR0aW5ncy5DbGllbnRNZXNzYWdlcy5EcmFnVG9Hcm91cE9yUmVvcmRlcik9PSJ1bmRlZmluZWQifHx0aGlzLkNsaWVudFNldHRpbmdzLkNsaWVudE1lc3NhZ2VzLkRyYWdUb0dyb3VwT3JSZW9yZGVyPT1udWxsKXt0aGlzLkNsaWVudFNldHRpbmdzLkNsaWVudE1lc3NhZ2VzLkRyYWdUb0dyb3VwT3JSZW9yZGVyPSJEcmFnIHRvIGdyb3VwIG9yIHJlb3JkZXIiOwp9aWYodHlwZW9mKHRoaXMuQ2xpZW50U2V0dGluZ3MuQ2xpZW50TWVzc2FnZXMuRHJhZ1RvUmVzaXplKT09InVuZGVmaW5lZCJ8fHRoaXMuQ2xpZW50U2V0dGluZ3MuQ2xpZW50TWVzc2FnZXMuRHJhZ1RvUmVzaXplPT1udWxsKXt0aGlzLkNsaWVudFNldHRpbmdzLkNsaWVudE1lc3NhZ2VzLkRyYWdUb1Jlc2l6ZT0iRHJhZyB0byByZXNpemUiOwp9aWYodHlwZW9mKHRoaXMuQ2xpZW50U2V0dGluZ3MuQ2xpZW50TWVzc2FnZXMuRHJvcEhlcmVUb1Jlb3JkZXIpPT0idW5kZWZpbmVkInx8dGhpcy5DbGllbnRTZXR0aW5ncy5DbGllbnRNZXNzYWdlcy5Ecm9wSGVyZVRvUmVvcmRlcj09bnVsbCl7dGhpcy5DbGllbnRTZXR0aW5ncy5DbGllbnRNZXNzYWdlcy5Ecm9wSGVyZVRvUmVvcmRlcj0iRHJvcCBoZXJlIHRvIHJlb3JkZXIiOwp9aWYodHlwZW9mKHRoaXMuQ2xpZW50U2V0dGluZ3MuQ2xpZW50TWVzc2FnZXMuUGFnZXJUb29sdGlwRm9ybWF0U3RyaW5nKT09InVuZGVmaW5lZCJ8fHRoaXMuQ2xpZW50U2V0dGluZ3MuQ2xpZW50TWVzc2FnZXMuUGFnZXJUb29sdGlwRm9ybWF0U3RyaW5nPT1udWxsKXt0aGlzLkNsaWVudFNldHRpbmdzLkNsaWVudE1lc3NhZ2VzLlBhZ2VyVG9vbHRpcEZvcm1hdFN0cmluZz0iUGFnZSA8c3Ryb25nPnswfTwvc3Ryb25nPiBvZiA8c3Ryb25nPnsxfTwvc3Ryb25nPiI7Cn1pZih0eXBlb2YodGhpcy5DbGllbnRTZXR0aW5ncy5DbGllbnRNZXNzYWdlcy5Db2x1bW5SZXNpemVUb29sdGlwRm9ybWF0U3RyaW5nKT09InVuZGVmaW5lZCJ8fHRoaXMuQ2xpZW50U2V0dGluZ3MuQ2xpZW50TWVzc2FnZXMuQ29sdW1uUmVzaXplVG9vbHRpcEZvcm1hdFN0cmluZz09bnVsbCl7dGhpcy5DbGllbnRTZXR0aW5ncy5DbGllbnRNZXNzYWdlcy5Db2x1bW5SZXNpemVUb29sdGlwRm9ybWF0U3RyaW5nPSJXaWR0aDogPHN0cm9uZz57MH08L3N0cm9uZz4gPGVtPnBpeGVsczwvZW0+IjsKfX1pZih0aGlzLkNsaWVudFNldHRpbmdzLkRhdGFCaW5kaW5nKXtpZighdGhpcy5DbGllbnRTZXR0aW5ncy5EYXRhQmluZGluZy5NYXhpbXVtUm93c1BhcmFtZXRlck5hbWUpe3RoaXMuQ2xpZW50U2V0dGluZ3MuRGF0YUJpbmRpbmcuTWF4aW11bVJvd3NQYXJhbWV0ZXJOYW1lPSJtYXhpbXVtUm93cyI7Cn1pZighdGhpcy5DbGllbnRTZXR0aW5ncy5EYXRhQmluZGluZy5TdGFydFJvd0luZGV4UGFyYW1ldGVyTmFtZSl7dGhpcy5DbGllbnRTZXR0aW5ncy5EYXRhQmluZGluZy5TdGFydFJvd0luZGV4UGFyYW1ldGVyTmFtZT0ic3RhcnRSb3dJbmRleCI7Cn1pZighdGhpcy5DbGllbnRTZXR0aW5ncy5EYXRhQmluZGluZy5Tb3J0UGFyYW1ldGVyTmFtZSl7dGhpcy5DbGllbnRTZXR0aW5ncy5EYXRhQmluZGluZy5Tb3J0UGFyYW1ldGVyTmFtZT0ic29ydEV4cHJlc3Npb24iOwp9aWYoIXRoaXMuQ2xpZW50U2V0dGluZ3MuRGF0YUJpbmRpbmcuRmlsdGVyUGFyYW1ldGVyTmFtZSl7dGhpcy5DbGllbnRTZXR0aW5ncy5EYXRhQmluZGluZy5GaWx0ZXJQYXJhbWV0ZXJOYW1lPSJmaWx0ZXJFeHByZXNzaW9uIjsKfX1pZih0aGlzLkNsaWVudFNldHRpbmdzLktleWJvYXJkTmF2aWdhdGlvblNldHRpbmdzLkFsbG93U3VibWl0T25FbnRlcil7dGhpcy5fYWxsb3dTdWJtaXRPbkVudGVyPXRoaXMuQ2xpZW50U2V0dGluZ3MuS2V5Ym9hcmROYXZpZ2F0aW9uU2V0dGluZ3MuQWxsb3dTdWJtaXRPbkVudGVyOwp9aWYodGhpcy5DbGllbnRTZXR0aW5ncy5LZXlib2FyZE5hdmlnYXRpb25TZXR0aW5ncy5WYWxpZGF0aW9uR3JvdXApe3RoaXMuX3ZhbGlkYXRpb25Hcm91cD10aGlzLkNsaWVudFNldHRpbmdzLktleWJvYXJkTmF2aWdhdGlvblNldHRpbmdzLlZhbGlkYXRpb25Hcm91cDsKfX1pZih0aGlzLkNsaWVudFNldHRpbmdzLkFuaW1hdGlvbiYmKHRoaXMuQ2xpZW50U2V0dGluZ3MuQW5pbWF0aW9uLkFsbG93Q29sdW1uUmVvcmRlckFuaW1hdGlvbnx8dGhpcy5DbGllbnRTZXR0aW5ncy5BbmltYXRpb24uQWxsb3dDb2x1bW5SZXZlcnRBbmltYXRpb24pJiYhdGhpcy5DbGllbnRTZXR0aW5ncy5TY3JvbGxpbmcuQWxsb3dTY3JvbGwpe3RoaXMuX2FuaW1hdGlvbj17fTsKdGhpcy5fYW5pbWF0aW9uLkNvbHVtbkFuaW1hdGlvbj0kY3JlYXRlKFRlbGVyaWsuV2ViLlVJLkdyaWRDb2x1bW5BbmltYXRpb24se3Jlb3JkZXJEdXJhdGlvbjp0aGlzLkNsaWVudFNldHRpbmdzLkFuaW1hdGlvbi5Db2x1bW5SZW9yZGVyQW5pbWF0aW9uRHVyYXRpb24scmV2ZXJ0RHVyYXRpb246dGhpcy5DbGllbnRTZXR0aW5ncy5BbmltYXRpb24uQ29sdW1uUmV2ZXJ0QW5pbWF0aW9uRHVyYXRpb259LG51bGwse293bmVyOnRoaXMuQ2xpZW50SUR9KTsKfWlmKHRoaXMuX2VkaXRJbmRleGVzIT1udWxsKXt0aGlzLl9lZGl0SW5kZXhlcz1ldmFsKHRoaXMuX2VkaXRJbmRleGVzKTsKfWlmKHRoaXMuQ2xpZW50U2V0dGluZ3MuQWxsb3dLZXlib2FyZE5hdmlnYXRpb24mJiF0aGlzLmdldF9hbGxvd0NlbGxTZWxlY3Rpb24oKSl7dGhpcy5fZG9jdW1lbnRLZXlEb3duRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9kb2N1bWVudEtleURvd24pOwokdGVsZXJpay5hZGRFeHRlcm5hbEhhbmRsZXIoZG9jdW1lbnQsImtleWRvd24iLHRoaXMuX2RvY3VtZW50S2V5RG93bkRlbGVnYXRlKTsKfWlmKHRoaXMuQ2xpZW50U2V0dGluZ3MuQWxsb3dSb3dzRHJhZ0Ryb3B8fCh0aGlzLmdldF9ldmVudHMoKS5nZXRIYW5kbGVyKCJyb3dEYmxDbGljayIpJiYkdGVsZXJpay5pc1RvdWNoRGV2aWNlKSl7dGhpcy5fb25Nb3VzZURvd25EZWxlZ2F0ZT0kdGVsZXJpay5hZGRNb2JpbGVIYW5kbGVyKHRoaXMsdGhpcy5nZXRfZWxlbWVudCgpLCJtb3VzZWRvd24iLHRoaXMuX21vdXNlRG93bik7Cn1pZih0aGlzLkNsaWVudFNldHRpbmdzLkFsbG93Um93c0RyYWdEcm9wKXt0aGlzLl9kb2N1bWVudE1vdXNlVXBEZWxlZ2F0ZT0kdGVsZXJpay5hZGRNb2JpbGVIYW5kbGVyKHRoaXMsZG9jdW1lbnQsIm1vdXNldXAiLHRoaXMuX21vdXNlVXAsbnVsbCx0cnVlKTsKdGhpcy5fZG9jdW1lbnRNb3VzZU1vdmVEZWxlZ2F0ZT0kdGVsZXJpay5hZGRNb2JpbGVIYW5kbGVyKHRoaXMsZG9jdW1lbnQsIm1vdXNlbW92ZSIsdGhpcy5fbW91c2VNb3ZlLG51bGwsdHJ1ZSk7Cn0kYWRkSGFuZGxlcnModGhpcy5nZXRfZWxlbWVudCgpLHtjbGljazpGdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX2NsaWNrKX0pOwokYWRkSGFuZGxlcnModGhpcy5nZXRfZWxlbWVudCgpLHtkYmxjbGljazpGdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX2RibGNsaWNrKX0pOwppZigkdGVsZXJpay5pc1RvdWNoRGV2aWNlJiYkdGVsZXJpay4kJiYkdGVsZXJpay4kLmZuLmRvdWJsZXRhcCl7JHRlbGVyaWsuJCh0aGlzLmdldF9lbGVtZW50KCkpLmRvdWJsZXRhcCh0aGlzLl9kYmxjbGljayk7Cn1pZigkdGVsZXJpay5pc09wZXJhKXskYWRkSGFuZGxlcnModGhpcy5nZXRfZWxlbWVudCgpLHttb3VzZWRvd246RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9jb250ZXh0bWVudSl9KTsKfWVsc2V7JGFkZEhhbmRsZXJzKHRoaXMuZ2V0X2VsZW1lbnQoKSx7Y29udGV4dG1lbnU6RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9jb250ZXh0bWVudSl9KTsKfWlmKCEkdGVsZXJpay5pc1RvdWNoRGV2aWNlKXt0aGlzLl9hdHRhY2hNb3VzZUhhbmRsZXJzKCk7Cn10aGlzLl9pbml0aWFsaXplU3VibWl0Q29udHJvbHMoKTsKdGhpcy5yYWlzZV9ncmlkQ3JlYXRpbmcobmV3IFN5cy5FdmVudEFyZ3MoKSk7CnRoaXMuQ29udHJvbD10aGlzLmdldF9lbGVtZW50KCk7CnRoaXMuZ2V0X2VsZW1lbnQoKS50YWJJbmRleD0wOwppZih0aGlzLlNob3dHcm91cFBhbmVsKXt2YXIgYT0kZ2V0KHRoaXMuX2dyb3VwUGFuZWxDbGllbnRJRCk7CmlmKGEpe3RoaXMuX2dyb3VwUGFuZWw9JGNyZWF0ZShUZWxlcmlrLldlYi5VSS5HcmlkR3JvdXBQYW5lbCx7X293bmVyOnRoaXN9LG51bGwsbnVsbCwkZ2V0KHRoaXMuX2dyb3VwUGFuZWxDbGllbnRJRCkpOwp9fXRoaXMuX2dyaWREYXRhRGl2PSRnZXQodGhpcy5nZXRfaWQoKSsiX0dyaWREYXRhIik7CmlmKHRoaXMuQ2xpZW50U2V0dGluZ3MmJih0aGlzLkNsaWVudFNldHRpbmdzLlNlbGVjdGluZyYmdGhpcy5DbGllbnRTZXR0aW5ncy5TZWxlY3RpbmcuQWxsb3dSb3dTZWxlY3QpfHx0aGlzLkNsaWVudFNldHRpbmdzLkVuYWJsZVBvc3RCYWNrT25Sb3dDbGljayl7dGhpcy5fc2VsZWN0aW9uPSRjcmVhdGUoVGVsZXJpay5XZWIuVUkuR3JpZFNlbGVjdGlvbix7X293bmVyOnRoaXN9LG51bGwse293bmVyOnRoaXMuQ2xpZW50SUR9KTsKfXRoaXMuX2ZpbGxTZWxlY3RlZENlbGxzSW5kZXhlcygpOwp0aGlzLl9maWxsVW5zZWxlY3RhYmxlSXRlbXNJbmRleGVzKCk7CmlmKHRoaXMuQ2xpZW50U2V0dGluZ3MmJnRoaXMuQ2xpZW50U2V0dGluZ3MuU2VsZWN0aW5nJiZ0aGlzLmdldF9hbGxvd0NlbGxTZWxlY3Rpb24oKSl7dGhpcy5fY2VsbFNlbGVjdGlvbj0kY3JlYXRlKFRlbGVyaWsuV2ViLlVJLkdyaWRDZWxsU2VsZWN0aW9uLHtfb3duZXI6dGhpcyxtdWx0aXBsZTp0aGlzLmdldF9hbGxvd011dGxpQ2VsbFNlbGVjdGlvbigpLGNvbHVtblNlbGVjdDp0aGlzLmdldF9hbGxvd0NvbHVtblNlbGVjdGlvbigpLG11bHRpQ29sdW1uU2VsZWN0OnRoaXMuZ2V0X2FsbG93TXVsdGlDb2x1bW5TZWxlY3Rpb24oKX0sbnVsbCx7b3duZXI6dGhpcy5DbGllbnRJRH0pOwp9dGhpcy5faW5pdGlhbGl6ZVRhYmxlVmlld3MoKTsKdGhpcy5HcmlkRGF0YURpdj0kZ2V0KHRoaXMuQ2xpZW50SUQrIl9HcmlkRGF0YSIpOwp0aGlzLkdyaWRIZWFkZXJEaXY9JGdldCh0aGlzLkNsaWVudElEKyJfR3JpZEhlYWRlciIpOwp0aGlzLkdyaWRGb290ZXJEaXY9JGdldCh0aGlzLkNsaWVudElEKyJfR3JpZEZvb3RlciIpOwp0aGlzLlBhZ2VyQ29udHJvbD0kZ2V0KHRoaXMuX21hc3RlckNsaWVudElEKyJfUGFnZXIiKTsKdGhpcy5Ub3BQYWdlckNvbnRyb2w9JGdldCh0aGlzLl9tYXN0ZXJDbGllbnRJRCsiX1RvcFBhZ2VyIik7CmlmKHRoaXMuQ2xpZW50U2V0dGluZ3MuU2Nyb2xsaW5nLkFsbG93U2Nyb2xsJiYkdGVsZXJpay5pc1RvdWNoRGV2aWNlKXt0aGlzLl9kYXRhRGl2TW91c2VEb3duRGVsZWdhdGU9JHRlbGVyaWsuYWRkTW9iaWxlSGFuZGxlcih0aGlzLHRoaXMuR3JpZERhdGFEaXYsIm1vdXNlZG93biIsdGhpcy5fZGF0YURpdk1vdXNlRG93bik7CnRoaXMuX2RhdGFEaXZNb3VzZVVwRGVsZWdhdGU9JHRlbGVyaWsuYWRkTW9iaWxlSGFuZGxlcih0aGlzLHRoaXMuR3JpZERhdGFEaXYsIm1vdXNldXAiLHRoaXMuX2RhdGFEaXZNb3VzZVVwKTsKfXZhciBkPVRlbGVyaWsuV2ViLlVJLkdyaWQuSXNSaWdodFRvTGVmdCh0aGlzLmdldF9tYXN0ZXJUYWJsZVZpZXcoKS5nZXRfZWxlbWVudCgpKTsKaWYoZCl7dGhpcy5nZXRfZWxlbWVudCgpLmNsYXNzTmFtZT1TdHJpbmcuZm9ybWF0KCJ7MH0gUmFkR3JpZFJUTCBSYWRHcmlkUlRMX3sxfSIsdGhpcy5nZXRfZWxlbWVudCgpLmNsYXNzTmFtZSx0aGlzLlNraW4pOwp9aWYodGhpcy5DbGllbnRTZXR0aW5ncyYmdGhpcy5DbGllbnRTZXR0aW5ncy5TY3JvbGxpbmcmJih0aGlzLkNsaWVudFNldHRpbmdzLlNjcm9sbGluZy5BbGxvd1Njcm9sbHx8KHRoaXMuQ2xpZW50U2V0dGluZ3MuU2Nyb2xsaW5nLkFsbG93U2Nyb2xsJiYodGhpcy5DbGllbnRTZXR0aW5ncy5TY3JvbGxpbmcuVXNlU3RhdGljSGVhZGVyc3x8dGhpcy5DbGllbnRTZXR0aW5ncy5TY3JvbGxpbmcuRW5hYmxlVmlydHVhbFNjcm9sbFBhZ2luZykpKSl7dGhpcy5fc2Nyb2xsaW5nPSRjcmVhdGUoVGVsZXJpay5XZWIuVUkuR3JpZFNjcm9sbGluZyx7X293bmVyOnRoaXN9LG51bGwsbnVsbCk7Cn1lbHNle3RoaXMucmVwYWludCgpOwp9aWYodGhpcy5fYWN0aXZlUm93SW5kZXgpe3ZhciBmPXRoaXMuZ2V0X21hc3RlclRhYmxlVmlldygpLl9nZXRSb3dCeUluZGV4T3JJdGVtSW5kZXhIaWVyYXJjaGljYWwodGhpcy5fYWN0aXZlUm93SW5kZXgpOwppZihmKXt0aGlzLnNldF9hY3RpdmVSb3coZik7Cn19aWYodGhpcy5fbGFzdFNlbGVjdGVkSXRlbUluZGV4IT1udWxsKXt0aGlzLl9zZWxlY3Rpb24uX2xhc3RTZWxlY3RlZEl0ZW1JbmRleD10aGlzLl9sYXN0U2VsZWN0ZWRJdGVtSW5kZXg7Cn10aGlzLl9hdHRhY2hEb21FdmVudHMoKTsKaWYoU3lzLldlYkZvcm1zJiZTeXMuV2ViRm9ybXMuUGFnZVJlcXVlc3RNYW5hZ2VyKXt2YXIgYj1TeXMuV2ViRm9ybXMuUGFnZVJlcXVlc3RNYW5hZ2VyLmdldEluc3RhbmNlKCk7CmlmKGIpe3RoaXMuX2luaXRpYWxpemVSZXF1ZXN0SGFuZGxlcj1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX2luaXRpYWxpemVSZXF1ZXN0KTsKYi5hZGRfaW5pdGlhbGl6ZVJlcXVlc3QodGhpcy5faW5pdGlhbGl6ZVJlcXVlc3RIYW5kbGVyKTsKfX10aGlzLnJhaXNlX2dyaWRDcmVhdGVkKG5ldyBTeXMuRXZlbnRBcmdzKCkpOwppZih0aGlzLl9zaG91bGRGb2N1c09uUGFnZSl7dHJ5e3RoaXMuX3Nob3VsZEZvY3VzT25QYWdlPWZhbHNlOwp0aGlzLmdldF9lbGVtZW50KCkuZm9jdXMoKTsKfWNhdGNoKGMpe319dGhpcy5faW5pdGlhbGl6ZVBvcFVwRWRpdEZvcm0oKTsKaWYodHlwZW9mKHRoaXMuQ2xpZW50U2V0dGluZ3MuRGF0YUJpbmRpbmcuTG9jYXRpb24pIT0idW5kZWZpbmVkIiYmdGhpcy5DbGllbnRTZXR0aW5ncy5EYXRhQmluZGluZy5Mb2NhdGlvbiE9IiIpe3RoaXMuX29uQ29tbWFuZERlbGVnYXRlPUZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5fb25Db21tYW5kKTsKdGhpcy5hZGRfY29tbWFuZCh0aGlzLl9vbkNvbW1hbmREZWxlZ2F0ZSk7CnRoaXMuX29uU3VjY2Vzc0RlbGVnYXRlPUZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5fb25TdWNjZXNzKTsKdGhpcy5fb25GYWlsRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vbkZhaWwpOwppZih0eXBlb2YodGhpcy5DbGllbnRTZXR0aW5ncy5EYXRhQmluZGluZy5TZWxlY3RNZXRob2QpIT0idW5kZWZpbmVkIiYmdGhpcy5DbGllbnRTZXR0aW5ncy5EYXRhQmluZGluZy5TZWxlY3RNZXRob2QhPSIiKXt0aGlzLl9kYXRhQmluZGluZ1dpdGhTZWxlY3RNZXRob2Q9dHJ1ZTsKdGhpcy5fZ2V0RGF0YSh0aGlzLkNsaWVudFNldHRpbmdzLkRhdGFCaW5kaW5nLkxvY2F0aW9uLHRoaXMuQ2xpZW50U2V0dGluZ3MuRGF0YUJpbmRpbmcuU2VsZWN0TWV0aG9kLHRoaXMuX2dldFJlcXVlc3REYXRhKCksdGhpcy5fb25TdWNjZXNzRGVsZWdhdGUsdGhpcy5fb25GYWlsRGVsZWdhdGUpOwp9ZWxzZXtpZih0eXBlb2YodGhpcy5DbGllbnRTZXR0aW5ncy5EYXRhQmluZGluZy5EYXRhU2VydmljZSkhPSJ1bmRlZmluZWQiJiZ0eXBlb2YodGhpcy5DbGllbnRTZXR0aW5ncy5EYXRhQmluZGluZy5EYXRhU2VydmljZS5UYWJsZU5hbWUpIT0idW5kZWZpbmVkIiYmdGhpcy5DbGllbnRTZXR0aW5ncy5EYXRhQmluZGluZy5EYXRhU2VydmljZS5UYWJsZU5hbWUhPSIiKXt0aGlzLl9nZXREYXRhU2VydmljZURhdGEodGhpcy5fb25TdWNjZXNzRGVsZWdhdGUsdGhpcy5fb25GYWlsRGVsZWdhdGUpOwp9fX1pZih0aGlzLmdldF9pc1VzaW5nT0RhdGFTb3VyY2UoKSl7dGhpcy5faW5pdGlhbGl6ZU9EYXRhU291cmNlQmluZGVyKCk7CnRoaXMuX29uQ29tbWFuZE9EYXRhU291cmNlRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vbkNvbW1hbmRPRGF0YVNvdXJjZSk7CnRoaXMuYWRkX2NvbW1hbmQodGhpcy5fb25Db21tYW5kT0RhdGFTb3VyY2VEZWxlZ2F0ZSk7Cn12YXIgZT10aGlzLl9jb250cm9sVG9Gb2N1czsKaWYodGhpcy5DbGllbnRTZXR0aW5ncy5BbGxvd0tleWJvYXJkTmF2aWdhdGlvbiYmZSE9bnVsbCYmZSE9IiIpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0cnl7dmFyIGg9ZmFsc2U7CnZhciBpPSRmaW5kKGUpOwppZihpPT1udWxsKXtpPSRnZXQoZSk7Cn1lbHNle2g9dHJ1ZTsKfWlmKGk9PW51bGwpe2k9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoZS5yZXBsYWNlKC9fL2lnLCIkIikpWzBdOwp9aWYoaSE9bnVsbCl7aWYoaS5mb2N1cyl7aS5mb2N1cygpOwp9ZWxzZXtpZihoKXtpZihpLl9mb2N1c2VkIT11bmRlZmluZWQpe2kuX2ZvY3VzZWQ9dHJ1ZTsKfWlmKGkuc2V0Rm9jdXMpe2kuc2V0Rm9jdXMoKTsKfX19aWYoaS5zZWxlY3Qpe2kuc2VsZWN0KCk7Cn19fWNhdGNoKGcpe319LDApOwp9aWYodGhpcy5nZXRfZW5hYmxlQXJpYVN1cHBvcnQoKSl7dGhpcy5faW5pdGlhbGl6ZUFyaWFTdXBwb3J0KCk7Cn19LF9pbml0aWFsaXplUG9wVXBFZGl0Rm9ybTpmdW5jdGlvbigpe2lmKHRoaXMuX3BvcFVwSWRzJiZ0aGlzLl9wb3BVcElkcyE9IiIpe3ZhciBjPWV2YWwodGhpcy5fcG9wVXBJZHMpOwp2YXIgZCxhPTIwOwpmb3IodmFyIG49MDsKbjxjLmxlbmd0aDsKbisrKXt2YXIgaz1jW25dOwp2YXIgbT0kZ2V0KGspOwppZihtKXt2YXIgZj1uZXcgU3lzLkNhbmNlbEV2ZW50QXJncygpOwpmLmdldF9wb3BVcD1mdW5jdGlvbigpe3JldHVybiBtOwp9Owp0aGlzLnJhaXNlX3BvcFVwU2hvd2luZyhmKTsKaWYoZi5nZXRfY2FuY2VsKCkpe2NvbnRpbnVlOwp9aWYodGhpcy5fcG9wVXBTZXR0aW5ncy5Nb2RhbCl7dmFyIGg9U3RyaW5nLmZvcm1hdCgibW9kYWxEaXZJZF97MH0iLHRoaXMuZ2V0X2lkKCkpOwppZighJGdldChoKSl7dmFyIG89ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7Cm8uaWQ9aDsKby5zdHlsZS53aWR0aD1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsV2lkdGgrInB4IjsKby5zdHlsZS5oZWlnaHQ9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodCsicHgiOwpvLmNsYXNzTmFtZT1TdHJpbmcuZm9ybWF0KCJHcmlkTW9kYWxfezB9Iix0aGlzLlNraW4pOwp0aGlzLl9vblJlc2l6ZURlbGVnYXRlPUZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5vbldpbmRvd1Jlc2l6ZSk7CnZhciBqPXRoaXM7CmlmKG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKCJtc2llIikhPS0xKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7JGFkZEhhbmRsZXIod2luZG93LCJyZXNpemUiLGouX29uUmVzaXplRGVsZWdhdGUpOwp9LDApOwp9ZWxzZXskYWRkSGFuZGxlcih3aW5kb3csInJlc2l6ZSIsdGhpcy5fb25SZXNpemVEZWxlZ2F0ZSk7Cn1vLnN0eWxlLnRvcD1vLnN0eWxlLmxlZnQ9MDsKby5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiOwpvLnN0eWxlLmJhY2tncm91bmRDb2xvcj0idGhyZWVkc2hhZG93IjsKby5zdHlsZS56SW5kZXg9dGhpcy5fcG9wVXBTZXR0aW5ncy5aSW5kZXgtMTA7CnRyeXtvLnN0eWxlLm9wYWNpdHk9IjAuNSI7Cn1jYXRjaChiKXt9aWYodHlwZW9mKG8uc3R5bGUuZmlsdGVyKSE9InVuZGVmaW5lZCIpe28uc3R5bGUuZmlsdGVyPSJhbHBoYShvcGFjaXR5PTUwKTsiOwp9ZWxzZXtpZih0eXBlb2Yoby5zdHlsZS5Nb3pPcGFjaXR5KSE9InVuZGVmaW5lZCIpe28uc3R5bGUuTW96T3BhY2l0eT0xLzI7Cn19dmFyIGc9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImZvcm0iKVswXTsKZy5hcHBlbmRDaGlsZChvKTsKfX1tLnN0eWxlLnpJbmRleD10aGlzLl9wb3BVcFNldHRpbmdzLlpJbmRleDsKZD1hKz0yMDsKaWYobS5zdHlsZS5sZWZ0PT0iIil7bS5zdHlsZS5sZWZ0PVRlbGVyaWsuV2ViLlVJLkdyaWQuRmluZFBvc1godGhpcy5nZXRfZWxlbWVudCgpKStkKyJweCI7Cn1pZihtLnN0eWxlLnRvcD09IiIpe20uc3R5bGUudG9wPVRlbGVyaWsuV2ViLlVJLkdyaWQuRmluZFBvc1kodGhpcy5nZXRfZWxlbWVudCgpKSthKyJweCI7Cn1tLnN0eWxlLmRpc3BsYXk9IiI7Cm0udGFiSW5kZXg9MDsKdmFyIGw9bS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiZGl2IilbMF07CmlmKCR0ZWxlcmlrLmlzSUU2KXtsLnN0eWxlLndpZHRoPW0ub2Zmc2V0V2lkdGgrInB4IjsKfXRoaXMucmVzaXplTW9kYWxCYWNrZ3JvdW5kKCk7Cm0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoImRpdiIpWzRdLnN0eWxlLmhlaWdodD1tLm9mZnNldEhlaWdodC1sLm9mZnNldEhlaWdodCsicHgiOwp0aGlzLl9wb3BVcExvY2F0aW9uc1tsLmlkXT1wYXJzZUludChtLnN0eWxlLmxlZnQpKyJweCwiK3BhcnNlSW50KG0uc3R5bGUudG9wKSsicHgiOwp0aGlzLnVwZGF0ZUNsaWVudFN0YXRlKCk7CiRhZGRIYW5kbGVycyhsLHttb3VzZWRvd246RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUobSx0aGlzLl9wb3BVcE1vdXNlRG93bil9KTsKJGFkZEhhbmRsZXJzKGRvY3VtZW50LHttb3VzZXVwOkZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKG0sdGhpcy5fcG9wVXBNb3VzZVVwKX0pOwokYWRkSGFuZGxlcnMoZG9jdW1lbnQse21vdXNlb3V0OkZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKG0sdGhpcy5fcG9wVXBNb3VzZU91dCl9KTsKaWYodGhpcy5DbGllbnRTZXR0aW5ncy5BbGxvd0tleWJvYXJkTmF2aWdhdGlvbiYmdGhpcy5DbGllbnRTZXR0aW5ncy5LZXlib2FyZE5hdmlnYXRpb25TZXR0aW5ncy5FbmFibGVLZXlib2FyZFNob3J0Y3V0cyl7JGFkZEhhbmRsZXIobSwia2V5cHJlc3MiLEZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHtwb3BVcEZvcm06bSxrZXlNYXBwaW5nczp0aGlzLkNsaWVudFNldHRpbmdzLktleWJvYXJkTmF2aWdhdGlvblNldHRpbmdzfSx0aGlzLl9wb3BVcEtleURvd24pKTsKfSR0ZWxlcmlrLmFkZEV4dGVybmFsSGFuZGxlcihkb2N1bWVudCwibW91c2Vtb3ZlIixGdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZShtLHRoaXMuX3BvcFVwTW91c2VNb3ZlKSk7Cn19fX0sX2RhdGFEaXZNb3VzZURvd246ZnVuY3Rpb24oYSl7dmFyIGI9JHRlbGVyaWsuZ2V0VG91Y2hUYXJnZXQoYSk7CmlmKHRoaXMuX3Njcm9sbGluZyYmYil7dmFyIGM9Yi50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJ0ZCImJlRlbGVyaWsuV2ViLlVJLkdyaWQuSXNDaGlsZE9mKGIsdGhpcy5HcmlkRGF0YURpdik7CmlmKCFjKXt0aGlzLl9zY3JvbGxpbmcuX2Ryb3BEb3duVG91Y2hTY3JvbGwuZGlzYWJsZSgpOwp9fX0sX2RhdGFEaXZNb3VzZVVwOmZ1bmN0aW9uKGEpe2lmKHRoaXMuX3Njcm9sbGluZyl7dGhpcy5fc2Nyb2xsaW5nLl9kcm9wRG93blRvdWNoU2Nyb2xsLmVuYWJsZSgpOwp9fSxfaW5pdGlhbGl6ZVN1Ym1pdENvbnRyb2xzOmZ1bmN0aW9uKCl7dGhpcy5fc3VibWl0Q29udHJvbHM9W3tOYW1lOiJpbnB1dCIsVHlwZToidGV4dCJ9XTsKfSxfc2hvdWxkRm9jdXNHcmlkT25Eb2N1bWVudEtleURvd246ZnVuY3Rpb24oYixjKXt2YXIgYT1iLnNyY0VsZW1lbnR8fGIuZXhwbGljaXRPcmlnaW5hbFRhcmdldDsKaWYoKGIuY3RybEtleSYmYz09dGhpcy5DbGllbnRTZXR0aW5ncy5LZXlib2FyZE5hdmlnYXRpb25TZXR0aW5ncy5Gb2N1c0tleSl8fCgoYz09dGhpcy5DbGllbnRTZXR0aW5ncy5LZXlib2FyZE5hdmlnYXRpb25TZXR0aW5ncy5FeHBhbmREZXRhaWxUYWJsZUtleXx8Yz09dGhpcy5DbGllbnRTZXR0aW5ncy5LZXlib2FyZE5hdmlnYXRpb25TZXR0aW5ncy5Db2xsYXBzZURldGFpbFRhYmxlS2V5KSYmdGhpcy5DbGllbnRTZXR0aW5ncyYmdGhpcy5DbGllbnRTZXR0aW5ncy5BbGxvd0tleWJvYXJkTmF2aWdhdGlvbiYmYSYmYS5pZD09dGhpcy5nZXRfZWxlbWVudCgpLmlkKSl7cmV0dXJuIHRydWU7Cn1yZXR1cm4gZmFsc2U7Cn0sX2RvY3VtZW50S2V5RG93bjpmdW5jdGlvbihhKXthPWF8fHdpbmRvdy5ldmVudDsKdmFyIGM9YS5rZXlDb2RlfHxhLmNoYXJDb2RlOwppZih0aGlzLl9zaG91bGRGb2N1c0dyaWRPbkRvY3VtZW50S2V5RG93bihhLGMpKXtpZih0aGlzLmdldF9lbGVtZW50KCkuZm9jdXMpe3RoaXMuZ2V0X2VsZW1lbnQoKS5mb2N1cygpOwppZih0aGlzLkNsaWVudFNldHRpbmdzLkFsbG93S2V5Ym9hcmROYXZpZ2F0aW9uJiYhdGhpcy5fYWN0aXZlUm93KXtpZih0aGlzLmdldF9tYXN0ZXJUYWJsZVZpZXcoKS5nZXRfZGF0YUl0ZW1zKCkubGVuZ3RoPjApe3ZhciBiPW51bGw7CmlmKHRoaXMuX3NlbGVjdGVkSXRlbXNJbnRlcm5hbC5sZW5ndGg+MCl7Yj0kZmluZCh0aGlzLl9zZWxlY3RlZEl0ZW1zSW50ZXJuYWxbMF0uaWQpOwp9ZWxzZXtiPXRoaXMuZ2V0X21hc3RlclRhYmxlVmlldygpLmdldF9kYXRhSXRlbXMoKVswXTsKfWlmKGIhPW51bGwpe3RoaXMuX3NldEFjdGl2ZVJvdyhiLmdldF9lbGVtZW50KCksYSk7CmlmKHRoaXMuQ2xpZW50U2V0dGluZ3MuU2VsZWN0aW5nJiZ0aGlzLkNsaWVudFNldHRpbmdzLlNlbGVjdGluZy5BbGxvd1Jvd1NlbGVjdCl7dGhpcy5fc2VsZWN0aW9uLl9zZWxlY3RSb3dJbnRlcm5hbChiLmdldF9lbGVtZW50KCksYSxmYWxzZSx0cnVlLHRydWUsZmFsc2UpOwp9fX19fX19LF9hdHRhY2hNb3VzZUhhbmRsZXJzOmZ1bmN0aW9uKCl7JGFkZEhhbmRsZXJzKHRoaXMuZ2V0X2VsZW1lbnQoKSx7bW91c2VvdmVyOkZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5fbW91c2VvdmVyKX0pOwokYWRkSGFuZGxlcnModGhpcy5nZXRfZWxlbWVudCgpLHttb3VzZW91dDpGdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX21vdXNlb3V0KX0pOwp9LF9nZXREYXRhU2VydmljZURhdGE6ZnVuY3Rpb24oYSxwLGwpe3ZhciBqPW5ldyBTeXMuQ2FuY2VsRXZlbnRBcmdzKCk7CnZhciBvPXRoaXMuQ2xpZW50U2V0dGluZ3MuRGF0YUJpbmRpbmcuTG9jYXRpb247CmouZ2V0X2xvY2F0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIG87Cn07Cmouc2V0X2xvY2F0aW9uPWZ1bmN0aW9uKGUpe289ZTsKfTsKdmFyIGg9dGhpcy5DbGllbnRTZXR0aW5ncy5EYXRhQmluZGluZy5EYXRhU2VydmljZS5UYWJsZU5hbWU7CmouZ2V0X3RhYmxlTmFtZT1mdW5jdGlvbigpe3JldHVybiBoOwp9OwpqLnNldF90YWJsZU5hbWU9ZnVuY3Rpb24oZSl7aD1lOwp9Owp2YXIgZz10aGlzLkNsaWVudFNldHRpbmdzLkRhdGFCaW5kaW5nLkRhdGFTZXJ2aWNlLkZpbHRlclF1ZXJ5T3B0aW9uOwpqLmdldF9maWx0ZXJRdWVyeU9wdGlvbj1mdW5jdGlvbigpe3JldHVybiBnOwp9OwpqLnNldF9maWx0ZXJRdWVyeU9wdGlvbj1mdW5jdGlvbihlKXtnPWU7Cn07CnZhciBjPXRoaXMuQ2xpZW50U2V0dGluZ3MuRGF0YUJpbmRpbmcuRGF0YVNlcnZpY2UuU29ydFF1ZXJ5T3B0aW9uOwpqLmdldF9zb3J0UXVlcnlPcHRpb249ZnVuY3Rpb24oKXtyZXR1cm4gYzsKfTsKai5zZXRfc29ydFF1ZXJ5T3B0aW9uPWZ1bmN0aW9uKGUpe2M9ZTsKfTsKdmFyIG49dGhpcy5nZXRfbWFzdGVyVGFibGVWaWV3KCkuZ2V0RGF0YVNlcnZpY2VRdWVyeShqLmdldF90YWJsZU5hbWUoKSxqLmdldF9maWx0ZXJRdWVyeU9wdGlvbigpLGouZ2V0X3NvcnRRdWVyeU9wdGlvbigpKTsKai5nZXRfcXVlcnk9ZnVuY3Rpb24oKXtyZXR1cm4gbjsKfTsKai5zZXRfcXVlcnk9ZnVuY3Rpb24oZSl7bj1lOwp9Owp2YXIgbT10aGlzLl9nZXREYXRhUmVzcG9uc2VUeXBlKCk7CmouZ2V0X3Jlc3BvbnNlVHlwZT1mdW5jdGlvbigpe3JldHVybiBtOwp9OwpqLnNldF9yZXNwb25zZVR5cGU9ZnVuY3Rpb24oZSl7bT1lOwp9Owp2YXIgaT10aGlzLl9pc0JvdW5kVG9TZXJ2aWNlVHlwZShUZWxlcmlrLldlYi5VSS5HcmlkQ2xpZW50RGF0YVNlcnZpY2VUeXBlLk9EYXRhKT8iJGNhbGxiYWNrIjpudWxsOwpqLmdldF9jYWxsYmFjaz1mdW5jdGlvbigpe3JldHVybiBpOwp9OwpqLnNldF9jYWxsYmFjaz1mdW5jdGlvbihlKXtpPWU7Cn07CnRoaXMucmFpc2VfZGF0YUJpbmRpbmcoaik7CmlmKGouZ2V0X2NhbmNlbCgpKXtyZXR1cm4gZmFsc2U7Cn12YXIgaz0odHlwZW9mKGwpIT0idW5kZWZpbmVkIik/bDpTdHJpbmcuZm9ybWF0KCJ7MH0vezF9IixqLmdldF9sb2NhdGlvbigpLGouZ2V0X3F1ZXJ5KCkpOwp0cnl7dmFyIGI9ZnVuY3Rpb24ocSxlKXtyZXR1cm4gcS5yZXBsYWNlKC9cXCcvZywiJyIpOwp9OwppZihtPT09Impzb25wIil7Yj1udWxsOwp9dmFyIGY9e3R5cGU6IkdFVCIsdXJsOmssY29udGVudFR5cGU6ImFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgiLGRhdGFGaWx0ZXI6YixkYXRhVHlwZTptLGpzb25wOmksc3VjY2VzczphLGVycm9yOnB9OwokdGVsZXJpay4kLmFqYXgoZik7Cn1jYXRjaChkKXt0aHJvdyBuZXcgRXJyb3IoZCk7Cn19LF9nZXREYXRhOmZ1bmN0aW9uKGEsZixkLGMsaSl7dmFyIGI9U3lzLlNlcmlhbGl6YXRpb24uSmF2YVNjcmlwdFNlcmlhbGl6ZXIuZGVzZXJpYWxpemUoZCk7CnZhciBoPW5ldyBTeXMuQ2FuY2VsRXZlbnRBcmdzKCk7CmguZ2V0X2xvY2F0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIGE7Cn07Cmguc2V0X2xvY2F0aW9uPWZ1bmN0aW9uKGUpe2E9ZTsKfTsKaC5nZXRfbWV0aG9kTmFtZT1mdW5jdGlvbigpe3JldHVybiBmOwp9OwpoLnNldF9tZXRob2ROYW1lPWZ1bmN0aW9uKGUpe2Y9ZTsKfTsKaC5nZXRfbWV0aG9kQXJndW1lbnRzPWZ1bmN0aW9uKCl7cmV0dXJuIGI7Cn07Cmguc2V0X21ldGhvZEFyZ3VtZW50cz1mdW5jdGlvbihlKXtiPWU7Cn07CnRoaXMucmFpc2VfZGF0YUJpbmRpbmcoaCk7CmlmKGguZ2V0X2NhbmNlbCgpKXtyZXR1cm4gZmFsc2U7Cn10cnl7JHRlbGVyaWsuJC5hamF4KHt0eXBlOiJQT1NUIix1cmw6aC5nZXRfbG9jYXRpb24oKSsiLyIraC5nZXRfbWV0aG9kTmFtZSgpLGRhdGE6U3lzLlNlcmlhbGl6YXRpb24uSmF2YVNjcmlwdFNlcmlhbGl6ZXIuc2VyaWFsaXplKGIpLGNvbnRlbnRUeXBlOiJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04IixkYXRhVHlwZToianNvbiIsc3VjY2VzczpjLGVycm9yOml9KTsKfWNhdGNoKGcpe3Rocm93IG5ldyBFcnJvcihnKTsKfX0sX2dldENhY2hlS2V5OmZ1bmN0aW9uKGEpe3JldHVybiBTdHJpbmcuZm9ybWF0KCJ7MH17MX17Mn17M30iLGEuZ2V0X2N1cnJlbnRQYWdlSW5kZXgoKSxhLmdldF9wYWdlU2l6ZSgpLGEuZ2V0X3NvcnRFeHByZXNzaW9ucygpLnRvU3RyaW5nKCksYS5nZXRfZmlsdGVyRXhwcmVzc2lvbnMoKS50b1N0cmluZygpKTsKfSxfZ2V0UmVxdWVzdERhdGE6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmdldF9tYXN0ZXJUYWJsZVZpZXcoKTsKdmFyIGQ9e307CmRbdGhpcy5DbGllbnRTZXR0aW5ncy5EYXRhQmluZGluZy5TdGFydFJvd0luZGV4UGFyYW1ldGVyTmFtZV09Yy5nZXRfY3VycmVudFBhZ2VJbmRleCgpKmMuZ2V0X3BhZ2VTaXplKCk7CmRbdGhpcy5DbGllbnRTZXR0aW5ncy5EYXRhQmluZGluZy5NYXhpbXVtUm93c1BhcmFtZXRlck5hbWVdPWMuZ2V0X3BhZ2VTaXplKCk7CnZhciBiPW51bGw7CmlmKHR5cGVvZih0aGlzLkNsaWVudFNldHRpbmdzLkRhdGFCaW5kaW5nLlNvcnRQYXJhbWV0ZXJUeXBlKT09InVuZGVmaW5lZCIpe2I9Yy5nZXRfc29ydEV4cHJlc3Npb25zKCkudG9MaXN0KCk7Cn1lbHNle2lmKHRoaXMuQ2xpZW50U2V0dGluZ3MuRGF0YUJpbmRpbmcuU29ydFBhcmFtZXRlclR5cGU9PVRlbGVyaWsuV2ViLlVJLkdyaWRDbGllbnREYXRhQmluZGluZ1BhcmFtZXRlclR5cGUuU3RyaW5nKXtiPWMuZ2V0X3NvcnRFeHByZXNzaW9ucygpLnRvU3RyaW5nKCk7Cn1lbHNle2lmKHRoaXMuQ2xpZW50U2V0dGluZ3MuRGF0YUJpbmRpbmcuU29ydFBhcmFtZXRlclR5cGU9PVRlbGVyaWsuV2ViLlVJLkdyaWRDbGllbnREYXRhQmluZGluZ1BhcmFtZXRlclR5cGUuTGlucSl7Yj1jLmdldF9zb3J0RXhwcmVzc2lvbnMoKS50b1N0cmluZygpOwp9ZWxzZXtpZih0aGlzLkNsaWVudFNldHRpbmdzLkRhdGFCaW5kaW5nLlNvcnRQYXJhbWV0ZXJUeXBlPT1UZWxlcmlrLldlYi5VSS5HcmlkQ2xpZW50RGF0YUJpbmRpbmdQYXJhbWV0ZXJUeXBlLk9xbCl7Yj1jLmdldF9zb3J0RXhwcmVzc2lvbnMoKS50b1N0cmluZygpOwp9fX19ZFt0aGlzLkNsaWVudFNldHRpbmdzLkRhdGFCaW5kaW5nLlNvcnRQYXJhbWV0ZXJOYW1lXT1iOwp2YXIgYT1udWxsOwppZih0eXBlb2YodGhpcy5DbGllbnRTZXR0aW5ncy5EYXRhQmluZGluZy5GaWx0ZXJQYXJhbWV0ZXJUeXBlKT09InVuZGVmaW5lZCIpe2E9Yy5nZXRfZmlsdGVyRXhwcmVzc2lvbnMoKS50b0xpc3QoKTsKfWVsc2V7aWYodGhpcy5DbGllbnRTZXR0aW5ncy5EYXRhQmluZGluZy5GaWx0ZXJQYXJhbWV0ZXJUeXBlPT1UZWxlcmlrLldlYi5VSS5HcmlkQ2xpZW50RGF0YUJpbmRpbmdQYXJhbWV0ZXJUeXBlLlN0cmluZyl7YT1jLmdldF9maWx0ZXJFeHByZXNzaW9ucygpLnRvU3RyaW5nKCk7Cn1lbHNle2lmKHRoaXMuQ2xpZW50U2V0dGluZ3MuRGF0YUJpbmRpbmcuRmlsdGVyUGFyYW1ldGVyVHlwZT09VGVsZXJpay5XZWIuVUkuR3JpZENsaWVudERhdGFCaW5kaW5nUGFyYW1ldGVyVHlwZS5MaW5xKXthPWMuZ2V0X2ZpbHRlckV4cHJlc3Npb25zKCkudG9EeW5hbWljTGlucSgpOwp9ZWxzZXtpZih0aGlzLkNsaWVudFNldHRpbmdzLkRhdGFCaW5kaW5nLkZpbHRlclBhcmFtZXRlclR5cGU9PVRlbGVyaWsuV2ViLlVJLkdyaWRDbGllbnREYXRhQmluZGluZ1BhcmFtZXRlclR5cGUuT3FsKXthPWMuZ2V0X2ZpbHRlckV4cHJlc3Npb25zKCkudG9PcWwoKTsKfX19fWRbdGhpcy5DbGllbnRTZXR0aW5ncy5EYXRhQmluZGluZy5GaWx0ZXJQYXJhbWV0ZXJOYW1lXT1hOwpyZXR1cm4gU3lzLlNlcmlhbGl6YXRpb24uSmF2YVNjcmlwdFNlcmlhbGl6ZXIuc2VyaWFsaXplKGQpOwp9LF9pc0JvdW5kVG9TZXJ2aWNlVHlwZTpmdW5jdGlvbihhKXtpZih0aGlzLkNsaWVudFNldHRpbmdzJiZ0aGlzLkNsaWVudFNldHRpbmdzLkRhdGFCaW5kaW5nJiZ0aGlzLkNsaWVudFNldHRpbmdzLkRhdGFCaW5kaW5nLkRhdGFTZXJ2aWNlKXtpZih0eXBlb2YodGhpcy5DbGllbnRTZXR0aW5ncy5EYXRhQmluZGluZy5EYXRhU2VydmljZS5UeXBlKSE9PSJ1bmRlZmluZWQiKXtyZXR1cm4gdGhpcy5DbGllbnRTZXR0aW5ncy5EYXRhQmluZGluZy5EYXRhU2VydmljZS5UeXBlPT09YTsKfWVsc2V7cmV0dXJuIGE9PT1UZWxlcmlrLldlYi5VSS5HcmlkQ2xpZW50RGF0YVNlcnZpY2VUeXBlLkFET05ldDsKfX1yZXR1cm4gZmFsc2U7Cn0sX2dldERhdGFSZXNwb25zZVR5cGU6ZnVuY3Rpb24oKXtpZih0aGlzLkNsaWVudFNldHRpbmdzJiZ0aGlzLkNsaWVudFNldHRpbmdzLkRhdGFCaW5kaW5nJiZ0aGlzLkNsaWVudFNldHRpbmdzLkRhdGFCaW5kaW5nLlJlc3BvbnNlVHlwZSl7c3dpdGNoKHRoaXMuQ2xpZW50U2V0dGluZ3MuRGF0YUJpbmRpbmcuUmVzcG9uc2VUeXBlKXtjYXNlIFRlbGVyaWsuV2ViLlVJLkdyaWRDbGllbnREYXRhUmVzcG9uc2VUeXBlLkpTT05QOnJldHVybiJqc29ucCI7CmRlZmF1bHQ6cmV0dXJuImpzb24iOwp9fXJldHVybiJqc29uIjsKfSxfb25TdWNjZXNzOmZ1bmN0aW9uKGkpe2lmKHR5cGVvZihpKSE9Im9iamVjdCJ8fGk9PW51bGwpe3JldHVybjsKfWlmKHR5cGVvZihpLmQpIT0idW5kZWZpbmVkIil7aT1pLmQ7Cn12YXIgYj10aGlzLmdldF9tYXN0ZXJUYWJsZVZpZXcoKTsKaWYodGhpcy5DbGllbnRTZXR0aW5ncy5EYXRhQmluZGluZy5FbmFibGVDYWNoaW5nKXt2YXIgaj10aGlzLl9nZXRDYWNoZUtleShiKTsKaWYoIXRoaXMuX2NhY2hlKXt0aGlzLl9jYWNoZT17fTsKfWlmKCF0aGlzLl9jYWNoZVtqXSl7dGhpcy5fY2FjaGVbal09aTsKfX12YXIgZj10cnVlOwp2YXIgZT1pOwppZihlLmdldF9kYXRhKXtlPWUuZ2V0X2RhdGEoKTsKfXZhciBjPTA7CnZhciBrOwp2YXIgZzsKaWYodHlwZW9mKHRoaXMuQ2xpZW50U2V0dGluZ3MuRGF0YUJpbmRpbmcuRGF0YVByb3BlcnR5TmFtZSk9PSJ1bmRlZmluZWQiKXtrPSJEYXRhIjsKfWVsc2V7az10aGlzLkNsaWVudFNldHRpbmdzLkRhdGFCaW5kaW5nLkRhdGFQcm9wZXJ0eU5hbWU7Cn1pZih0eXBlb2YodGhpcy5DbGllbnRTZXR0aW5ncy5EYXRhQmluZGluZy5Db3VudFByb3BlcnR5TmFtZSk9PSJ1bmRlZmluZWQiKXtnPSJDb3VudCI7Cn1lbHNle2c9dGhpcy5DbGllbnRTZXR0aW5ncy5EYXRhQmluZGluZy5Db3VudFByb3BlcnR5TmFtZTsKfWlmKHRoaXMuX2lzQm91bmRUb1NlcnZpY2VUeXBlKFRlbGVyaWsuV2ViLlVJLkdyaWRDbGllbnREYXRhU2VydmljZVR5cGUuT0RhdGEpJiZpLnJlc3VsdHMpe2U9aS5yZXN1bHRzOwppZighaXNOYU4oaS5fX2NvdW50KSl7Yz1pLl9fY291bnQ7CmY9ZmFsc2U7Cn1lbHNle2lmKCFiLmdldF9hbGxvd1BhZ2luZygpKXtjPTA7CmY9ZmFsc2U7Cn19fWVsc2V7aWYodHlwZW9mKGlba10pIT0idW5kZWZpbmVkIiYmdHlwZW9mKGlbZ10pIT0idW5kZWZpbmVkIil7Zj1mYWxzZTsKZT1pW2tdOwpjPWlbZ107Cn19aWYoZil7aWYodHlwZW9mKHRoaXMuQ2xpZW50U2V0dGluZ3MuRGF0YUJpbmRpbmcuU2VsZWN0Q291bnRNZXRob2QpIT0idW5kZWZpbmVkIiYmdGhpcy5DbGllbnRTZXR0aW5ncy5EYXRhQmluZGluZy5TZWxlY3RDb3VudE1ldGhvZCE9IiIpe3RoaXMuX29uU2VsZWN0Q291bnRTdWNjZXNzRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vblNlbGVjdENvdW50U3VjY2Vzcyk7CmlmKHR5cGVvZih0aGlzLkNsaWVudFNldHRpbmdzLkRhdGFCaW5kaW5nLkRhdGFTZXJ2aWNlKSE9InVuZGVmaW5lZCImJnR5cGVvZih0aGlzLkNsaWVudFNldHRpbmdzLkRhdGFCaW5kaW5nLkRhdGFTZXJ2aWNlLlRhYmxlTmFtZSkhPSJ1bmRlZmluZWQiJiZ0aGlzLkNsaWVudFNldHRpbmdzLkRhdGFCaW5kaW5nLkRhdGFTZXJ2aWNlLlRhYmxlTmFtZSE9IiIpe3ZhciBoPWIuZ2V0X2ZpbHRlckV4cHJlc3Npb25zKCkudG9TdHJpbmcoIml0IikucmVwbGFjZSgvJy9nLCciJykucmVwbGFjZSgvXFsvZywiIikucmVwbGFjZSgvXF0vZywiIik7CnZhciBhPVN0cmluZy5mb3JtYXQoInswfS97MX0/d2hlcmU9J3syfSciLHRoaXMuQ2xpZW50U2V0dGluZ3MuRGF0YUJpbmRpbmcuTG9jYXRpb24sdGhpcy5DbGllbnRTZXR0aW5ncy5EYXRhQmluZGluZy5TZWxlY3RDb3VudE1ldGhvZCxoKTsKdGhpcy5fZ2V0RGF0YVNlcnZpY2VEYXRhKHRoaXMuX29uU2VsZWN0Q291bnRTdWNjZXNzRGVsZWdhdGUsdGhpcy5fb25GYWlsRGVsZWdhdGUsYSk7Cn1lbHNle3RoaXMuX2dldERhdGEodGhpcy5DbGllbnRTZXR0aW5ncy5EYXRhQmluZGluZy5Mb2NhdGlvbix0aGlzLkNsaWVudFNldHRpbmdzLkRhdGFCaW5kaW5nLlNlbGVjdENvdW50TWV0aG9kLCJ7fSIsdGhpcy5fb25TZWxlY3RDb3VudFN1Y2Nlc3NEZWxlZ2F0ZSx0aGlzLl9vbkZhaWxEZWxlZ2F0ZSk7Cn19fWVsc2V7Yi5zZXRfdmlydHVhbEl0ZW1Db3VudChjKTsKfXZhciBkPW5ldyBUZWxlcmlrLldlYi5VSS5HcmlkRGF0YVNvdXJjZVJlc29sdmVkRXZlbnRBcmdzKGUpOwp0aGlzLnJhaXNlX2RhdGFTb3VyY2VSZXNvbHZlZChkKTsKZT1kLmdldF9kYXRhKCk7CmlmKGIuZ2V0X3ZpcnR1YWxJdGVtQ291bnQoKT09MCl7Yi5fdXBkYXRlUGFnZXIoKTsKfWIuc2V0X2RhdGFTb3VyY2UoZSk7CmIuZGF0YUJpbmQoKTsKfSxfb25GYWlsOmZ1bmN0aW9uKGcpe2lmKHR5cGVvZihnKSE9InVuZGVmaW5lZCIpe3ZhciBhPW5ldyBTeXMuRXZlbnRBcmdzKCk7CmlmKHR5cGVvZihnLnJlc3BvbnNlVGV4dCkhPSJ1bmRlZmluZWQiKXt2YXIgZjsKdHJ5e2Y9U3lzLlNlcmlhbGl6YXRpb24uSmF2YVNjcmlwdFNlcmlhbGl6ZXIuZGVzZXJpYWxpemUoZy5yZXNwb25zZVRleHQpOwp9Y2F0Y2goYyl7Zj1udWxsOwp9aWYoIWYpe3JldHVybjsKfWlmKGYuZXJyb3Ipe3ZhciBiPWYuZXJyb3I7CnZhciBkPShiLm1lc3NhZ2UmJmIubWVzc2FnZS52YWx1ZSk/Yi5tZXNzYWdlLnZhbHVlOiIiOwphPXRoaXMuX2NvbnN0cnVjdEVycm9yQXJnc09iamVjdChkLCIiLCIiKTsKfWVsc2V7YT10aGlzLl9jb25zdHJ1Y3RFcnJvckFyZ3NPYmplY3QoZi5NZXNzYWdlLGYuRXhjZXB0aW9uVHlwZSxmLlN0YWNrVHJhY2UpOwp9fX10aGlzLnJhaXNlX2RhdGFCaW5kaW5nRmFpbGVkKGEpOwp9LF9jb25zdHJ1Y3RFcnJvckFyZ3NPYmplY3Q6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPW5ldyBTeXMuRXZlbnRBcmdzKCk7CmQuZ2V0X21lc3NhZ2U9ZnVuY3Rpb24oKXtyZXR1cm4gYTsKfTsKZC5nZXRfZXhjZXB0aW9uVHlwZT1mdW5jdGlvbigpe3JldHVybiBiOwp9OwpkLmdldF9zdGFja1RyYWNlPWZ1bmN0aW9uKCl7cmV0dXJuIGM7Cn07CnJldHVybiBkOwp9LF9vblNlbGVjdENvdW50U3VjY2VzczpmdW5jdGlvbihiKXtpZih0eXBlb2YoYi5kKSE9InVuZGVmaW5lZCIpe2I9Yi5kOwp9aWYodHlwZW9mKGJbdGhpcy5DbGllbnRTZXR0aW5ncy5EYXRhQmluZGluZy5TZWxlY3RDb3VudE1ldGhvZF0pIT0idW5kZWZpbmVkIil7Yj1iW3RoaXMuQ2xpZW50U2V0dGluZ3MuRGF0YUJpbmRpbmcuU2VsZWN0Q291bnRNZXRob2RdOwp9dmFyIGE9dGhpcy5nZXRfbWFzdGVyVGFibGVWaWV3KCk7CmEuc2V0X3ZpcnR1YWxJdGVtQ291bnQoYik7Cn0sX29uQ29tbWFuZE9EYXRhU291cmNlOmZ1bmN0aW9uKGEsYil7Yi5zZXRfY2FuY2VsKHRydWUpOwppZih0aGlzLmdldF9pc1VzaW5nT0RhdGFTb3VyY2UoKSl7dGhpcy5fb25EYXRhTmVlZGVkKCk7Cn19LF9vbkNvbW1hbmQ6ZnVuY3Rpb24oZSxjKXtjLnNldF9jYW5jZWwodHJ1ZSk7CnZhciBiPXRoaXMuZ2V0X21hc3RlclRhYmxlVmlldygpOwppZih0aGlzLkNsaWVudFNldHRpbmdzLkRhdGFCaW5kaW5nLkVuYWJsZUNhY2hpbmcpe3ZhciBmPXRoaXMuX2dldENhY2hlS2V5KGIpOwppZighdGhpcy5fY2FjaGUpe3RoaXMuX2NhY2hlPXt9Owp9aWYodGhpcy5fY2FjaGVbZl0pe3RoaXMuX29uU3VjY2Vzcyh0aGlzLl9jYWNoZVtmXSk7CnJldHVybjsKfX1pZih0eXBlb2YodGhpcy5DbGllbnRTZXR0aW5ncy5EYXRhQmluZGluZy5TZWxlY3RNZXRob2QpIT0idW5kZWZpbmVkIiYmdGhpcy5DbGllbnRTZXR0aW5ncy5EYXRhQmluZGluZy5TZWxlY3RNZXRob2QhPSIiKXt0aGlzLl9nZXREYXRhKHRoaXMuQ2xpZW50U2V0dGluZ3MuRGF0YUJpbmRpbmcuTG9jYXRpb24sdGhpcy5DbGllbnRTZXR0aW5ncy5EYXRhQmluZGluZy5TZWxlY3RNZXRob2QsdGhpcy5fZ2V0UmVxdWVzdERhdGEoKSx0aGlzLl9vblN1Y2Nlc3NEZWxlZ2F0ZSx0aGlzLl9vbkZhaWxEZWxlZ2F0ZSk7Cn1lbHNle2lmKHR5cGVvZih0aGlzLkNsaWVudFNldHRpbmdzLkRhdGFCaW5kaW5nLkRhdGFTZXJ2aWNlKSE9InVuZGVmaW5lZCImJnR5cGVvZih0aGlzLkNsaWVudFNldHRpbmdzLkRhdGFCaW5kaW5nLkRhdGFTZXJ2aWNlLlRhYmxlTmFtZSkhPSJ1bmRlZmluZWQiJiZ0aGlzLkNsaWVudFNldHRpbmdzLkRhdGFCaW5kaW5nLkRhdGFTZXJ2aWNlLlRhYmxlTmFtZSE9IiIpe3ZhciBhPWIuZ2V0RGF0YVNlcnZpY2VRdWVyeSh0aGlzLkNsaWVudFNldHRpbmdzLkRhdGFCaW5kaW5nLkRhdGFTZXJ2aWNlLlRhYmxlTmFtZSx0aGlzLkNsaWVudFNldHRpbmdzLkRhdGFCaW5kaW5nLkRhdGFTZXJ2aWNlLkZpbHRlclF1ZXJ5T3B0aW9uLHRoaXMuQ2xpZW50U2V0dGluZ3MuRGF0YUJpbmRpbmcuRGF0YVNlcnZpY2UuU29ydFF1ZXJ5T3B0aW9uKTsKdmFyIGQ9U3RyaW5nLmZvcm1hdCgiezB9L3sxfSIsdGhpcy5DbGllbnRTZXR0aW5ncy5EYXRhQmluZGluZy5Mb2NhdGlvbixhKTsKdGhpcy5fZ2V0RGF0YVNlcnZpY2VEYXRhKHRoaXMuX29uU3VjY2Vzc0RlbGVnYXRlLHRoaXMuX29uRmFpbERlbGVnYXRlKTsKfX19LHJlcGFpbnQ6ZnVuY3Rpb24oKXtpZighdGhpcy5jYW5SZXBhaW50KCkpe3RoaXMuYWRkX3BhcmVudFNob3duKHRoaXMuZ2V0X2VsZW1lbnQoKSk7CnJldHVybjsKfWVsc2V7dGhpcy5fY2xlYXJQYXJlbnRTaG93SGFuZGxlcnMoKTsKfWlmKCF0aGlzLl9zY3JvbGxpbmcmJnRoaXMuR3JpZERhdGFEaXYpe3RoaXMuX3Njcm9sbGluZz0kZmluZCh0aGlzLmdldF9pZCgpKS5fc2Nyb2xsaW5nOwp9aWYoVGVsZXJpay5XZWIuVUkuR3JpZFNjcm9sbGluZyYmdGhpcy5fc2Nyb2xsaW5nKXtpZih0aGlzLl9zY3JvbGxpbmcuX3Nob3VsZEluaXRpYWxpemVMYXlvdXRBbmRTY3JvbGwpe3RoaXMuX3Njcm9sbGluZy5fc2hvdWxkSW5pdGlhbGl6ZUxheW91dEFuZFNjcm9sbD1mYWxzZTsKdGhpcy5fc2Nyb2xsaW5nLl9pbml0aWFsaXplRGltZW5zaW9ucygpOwp0aGlzLl9zY3JvbGxpbmcuX2luaXRpYWxpemVTY3JvbGwoKTsKfWVsc2V7dGhpcy5fc2Nyb2xsaW5nLm9uV2luZG93UmVzaXplKCk7Cn19ZWxzZXtpZih0aGlzLl9yZXBhaW50V2lkdGhGbGFnKXt0aGlzLmdldF9lbGVtZW50KCkuc3R5bGUud2lkdGg9IiI7Cn12YXIgYT0wOwppZighIXRoaXMuX21hc3RlckNsaWVudElEJiZ0aGlzLmdldF9tYXN0ZXJUYWJsZVZpZXcoKSE9bnVsbCl7YT10aGlzLmdldF9tYXN0ZXJUYWJsZVZpZXcoKS5nZXRfZWxlbWVudCgpLm9mZnNldFdpZHRoOwp9aWYodGhpcy5nZXRfZWxlbWVudCgpLm9mZnNldFdpZHRoPGEpe3RoaXMuZ2V0X2VsZW1lbnQoKS5zdHlsZS53aWR0aD1hKyJweCI7CnRoaXMuX3JlcGFpbnRXaWR0aEZsYWc9dHJ1ZTsKfX19LG9uV2luZG93UmVzaXplOmZ1bmN0aW9uKCl7dGhpcy5yZXNpemVNb2RhbEJhY2tncm91bmQoKTsKfSxyZXNpemVNb2RhbEJhY2tncm91bmQ6ZnVuY3Rpb24oKXt2YXIgZD1TdHJpbmcuZm9ybWF0KCJtb2RhbERpdklkX3swfSIsdGhpcy5nZXRfaWQoKSk7CnZhciBhPSRnZXQoZCk7CmlmKGEpe2Euc3R5bGUud2lkdGg9IjFweCI7CmEuc3R5bGUuaGVpZ2h0PSIxcHgiOwp2YXIgYj1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7CnZhciBjPWRvY3VtZW50LmJvZHk7CmlmKCR0ZWxlcmlrLmlzSUU4JiYoKGIuc2Nyb2xsV2lkdGg8Yi5vZmZzZXRXaWR0aCYmYi5zY3JvbGxIZWlnaHQ+Yi5vZmZzZXRIZWlnaHQpfHwoYi5zY3JvbGxXaWR0aDxiLm9mZnNldFdpZHRoJiZiLnNjcm9sbEhlaWdodDxiLm9mZnNldEhlaWdodCl8fChiLnNjcm9sbEhlaWdodDxiLm9mZnNldEhlaWdodCYmYi5zY3JvbGxXaWR0aD5iLm9mZnNldFdpZHRoKSkpe2Euc3R5bGUud2lkdGg9Yi5zY3JvbGxXaWR0aCsicHgiOwphLnN0eWxlLmhlaWdodD1iLnNjcm9sbEhlaWdodCsicHgiOwp9ZWxzZXthLnN0eWxlLndpZHRoPU1hdGgubWF4KE1hdGgubWF4KGIuc2Nyb2xsV2lkdGgsYy5zY3JvbGxXaWR0aCksTWF0aC5tYXgoYi5vZmZzZXRXaWR0aCxjLm9mZnNldFdpZHRoKSkrInB4IjsKYS5zdHlsZS5oZWlnaHQ9TWF0aC5tYXgoTWF0aC5tYXgoYi5zY3JvbGxIZWlnaHQsYy5zY3JvbGxIZWlnaHQpLE1hdGgubWF4KGIub2Zmc2V0SGVpZ2h0LGMub2Zmc2V0SGVpZ2h0KSkrInB4IjsKfX19LF9wb3BVcEtleURvd246ZnVuY3Rpb24oZil7dmFyIGQ9Zi5rZXlDb2RlfHxmLmNoYXJDb2RlOwp2YXIgYT0oZD09dGhpcy5rZXlNYXBwaW5ncy5FeGl0RWRpdEluc2VydE1vZGVLZXkpOwp2YXIgYz0oZD09dGhpcy5rZXlNYXBwaW5ncy5VcGRhdGVJbnNlcnRJdGVtS2V5KTsKdmFyIGk9VGVsZXJpay5XZWIuVUkuR3JpZC5HZXRGaXJzdFBhcmVudEJ5VGFnTmFtZSh0aGlzLnBvcFVwRm9ybSwidHIiKS5wcmV2aW91c1NpYmxpbmc7CmlmKGkuaWQ9PSIiKXtyZXR1cm47Cn12YXIgYj1pLmlkLnNwbGl0KCJfXyIpWzBdOwp2YXIgZz0kZmluZChiKTsKaWYoIWcpe3JldHVybjsKfWlmKCFnLmdldF9vd25lcigpLl9jYW5IYW5kbGVLZXlib2FyZEFjdGlvbihmKSl7cmV0dXJuOwp9aWYoYSl7dmFyIGg9bmV3IFRlbGVyaWsuV2ViLlVJLkdyaWRLZXlQcmVzc0V2ZW50QXJncyhmKTsKZy5nZXRfb3duZXIoKS5yYWlzZV9rZXlQcmVzcyhoKTsKaWYoIWguZ2V0X2NhbmNlbCgpKXtnLmNhbmNlbFVwZGF0ZShpKTsKfWYucHJldmVudERlZmF1bHQoKTsKZi5zdG9wUHJvcGFnYXRpb24oKTsKfWVsc2V7aWYoYyl7dmFyIGg9bmV3IFRlbGVyaWsuV2ViLlVJLkdyaWRLZXlQcmVzc0V2ZW50QXJncyhmKTsKZy5nZXRfb3duZXIoKS5yYWlzZV9rZXlQcmVzcyhoKTsKaWYoIWguZ2V0X2NhbmNlbCgpKXtnLnVwZGF0ZUl0ZW0oaSk7Cn1mLnByZXZlbnREZWZhdWx0KCk7CmYuc3RvcFByb3BhZ2F0aW9uKCk7Cn19fSxfcG9wVXBNb3VzZURvd246ZnVuY3Rpb24oYSl7dGhpcy5jYW5Nb3ZlPXRydWU7CnRoaXMub3JpZ2luYWxMZWZ0PXRoaXMub2Zmc2V0TGVmdC1hLmNsaWVudFg7CnRoaXMub3JpZ2luYWxUb3A9dGhpcy5vZmZzZXRUb3AtYS5jbGllbnRZOwppZighKCR0ZWxlcmlrLmlzRmlyZWZveCYmYS5idXR0b249PTImJm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiTWFjIikpKXtUZWxlcmlrLldlYi5VSS5HcmlkLkNsZWFyRG9jdW1lbnRFdmVudHMoKTsKfXJldHVybiBmYWxzZTsKfSxfcG9wVXBNb3VzZU91dDpmdW5jdGlvbihhKXtpZighdGhpcy5jYW5Nb3ZlKXtyZXR1cm47Cn12YXIgYjsKaWYoYS5yYXdFdmVudC5yZWxhdGVkVGFyZ2V0KXtiPWEucmF3RXZlbnQucmVsYXRlZFRhcmdldDsKfWVsc2V7Yj1hLnJhd0V2ZW50LnRvRWxlbWVudDsKfWlmKCFiKXt0aGlzLmNhbk1vdmU9ZmFsc2U7ClRlbGVyaWsuV2ViLlVJLkdyaWQuUmVzdG9yZURvY3VtZW50RXZlbnRzKCk7Cn1yZXR1cm4gZmFsc2U7Cn0sX3BvcFVwTW91c2VVcDpmdW5jdGlvbihjKXtpZighdGhpcy5jYW5Nb3ZlKXtyZXR1cm47Cn10aGlzLmNhbk1vdmU9ZmFsc2U7CnZhciBkPXRoaXMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImRpdiIpWzBdOwp2YXIgZz1kLmlkOwp2YXIgYT1nLnNwbGl0KCJfXyIpWzBdOwp2YXIgYj0kZmluZChhKTsKaWYoYil7dmFyIGY9Yi5fb3duZXI7CmYuX3BvcFVwTG9jYXRpb25zW2ddPXRoaXMuc3R5bGUubGVmdCsiLCIrdGhpcy5zdHlsZS50b3A7CmYudXBkYXRlQ2xpZW50U3RhdGUoKTsKZi5yZXNpemVNb2RhbEJhY2tncm91bmQoKTsKfVRlbGVyaWsuV2ViLlVJLkdyaWQuUmVzdG9yZURvY3VtZW50RXZlbnRzKCk7Cn0sX3BvcFVwTW91c2VNb3ZlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuY2FuTW92ZSl7dGhpcy5zdHlsZS5sZWZ0PWEuY2xpZW50WCt0aGlzLm9yaWdpbmFsTGVmdCsicHgiOwp0aGlzLnN0eWxlLnRvcD1hLmNsaWVudFkrdGhpcy5vcmlnaW5hbFRvcCsicHgiOwpyZXR1cm4gZmFsc2U7Cn19LF9pc1Jvd0RyYWdnZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuICRnZXQoU3RyaW5nLmZvcm1hdCgiezB9X0RyYWdnZWRSb3dzIix0aGlzLmdldF9pZCgpKSkhPW51bGw7Cn0sX21vdXNlT3V0OmZ1bmN0aW9uKGEpe30sX21vdXNlRG93bjpmdW5jdGlvbihjKXt2YXIgZDsKaWYoJHRlbGVyaWsuaXNUb3VjaERldmljZSl7ZD0kdGVsZXJpay5nZXRUb3VjaFRhcmdldChjKTsKaWYoZC50YWdOYW1lJiZkLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09InRkIiYmdGhpcy5nZXRfZXZlbnRzKCkuZ2V0SGFuZGxlcigicm93RGJsQ2xpY2siKSl7JHRlbGVyaWsuY2FuY2VsUmF3RXZlbnQoYyk7Cn19ZWxzZXtkPVRlbGVyaWsuV2ViLlVJLkdyaWQuR2V0Q3VycmVudEVsZW1lbnQoYyk7Cn12YXIgaz1kLmlkJiZkLmlkLmluZGV4T2YoIlJvd0RyYWdIYW5kbGUiKT4tMTsKaWYodGhpcy5DbGllbnRTZXR0aW5ncy5TY3JvbGxpbmcuQWxsb3dTY3JvbGwmJiR0ZWxlcmlrLmlzVG91Y2hEZXZpY2UmJnRoaXMuQ2xpZW50U2V0dGluZ3MuQWxsb3dSb3dzRHJhZ0Ryb3AmJiFrJiZkLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09InRkIiYmVGVsZXJpay5XZWIuVUkuR3JpZC5Jc0NoaWxkT2YoZCx0aGlzLkdyaWREYXRhRGl2KSl7cmV0dXJuICR0ZWxlcmlrLmNhbmNlbFJhd0V2ZW50KCk7Cn12YXIgbD1UZWxlcmlrLldlYi5VSS5HcmlkLkdldEZpcnN0UGFyZW50QnlUYWdOYW1lKGQsInRyIik7CmlmKCFsfHxsLmlkPT0iIil7cmV0dXJuOwp9dmFyIGY9dGhpcy5nZXRfbWFzdGVyVGFibGVWaWV3KCkuX2dldFJvd0J5SW5kZXhPckl0ZW1JbmRleEhpZXJhcmNoaWNhbChsKTsKdmFyIHE9Zi5pZC5zcGxpdCgiX18iKVswXTsKdmFyIGc9JGZpbmQocSk7CmlmKCFnfHwoZy5fZGF0YS5fdXNlRHJhZ0NvbHVtbiYmIWspKXtyZXR1cm47Cn1pZigoIXRoaXMuX2NhblJpc2VSb3dFdmVudChjKSYmIWspfHwodGhpcy5faXNSb3dSZXNpemUmJnRoaXMuX2lzUm93UmVzaXplPT10cnVlKSl7cmV0dXJuOwp9aWYodGhpcy5fc2VsZWN0ZWRJbmRleGVzLmxlbmd0aD09MCYmdGhpcy5nZXRfYWxsb3dNdWx0aVJvd1NlbGVjdGlvbigpJiZ0aGlzLkNsaWVudFNldHRpbmdzLlNlbGVjdGluZy5FbmFibGVEcmFnVG9TZWxlY3RSb3dzJiYhayl7cmV0dXJuOwp9aWYodGhpcy5nZXRfYWxsb3dNdWx0aVJvd1NlbGVjdGlvbigpJiYoYy5jdHJsS2V5fHwoYy5yYXdFdmVudCYmYy5yYXdFdmVudC5tZXRhS2V5KSkpe3JldHVybjsKfWlmKHRoaXMuX2RyYWdnZWRJdGVtcyl7dGhpcy5fZHJhZ2dlZEl0ZW1zPVtdOwp9dmFyIHI9ZmFsc2U7CmZvcih2YXIgYT0wOwphPHRoaXMuX3NlbGVjdGVkSXRlbXNJbnRlcm5hbC5sZW5ndGg7CmErKyl7aWYodGhpcy5fc2VsZWN0ZWRJdGVtc0ludGVybmFsW2FdLmlkPT1sLmlkKXtyPXRydWU7CmJyZWFrOwp9fWlmKCFyKXt2YXIgcD10aGlzLmdldF9hbGxvd011bHRpUm93U2VsZWN0aW9uKCkmJiF0aGlzLkNsaWVudFNldHRpbmdzLlNlbGVjdGluZy5FbmFibGVEcmFnVG9TZWxlY3RSb3dzOwppZihUZWxlcmlrLldlYi5VSS5HcmlkU2VsZWN0aW9uJiZ0aGlzLl9zZWxlY3Rpb24mJihwfHwhdGhpcy5nZXRfYWxsb3dNdWx0aVJvd1NlbGVjdGlvbigpfHxrKSl7dmFyIGg9dGhpcy5DbGllbnRTZXR0aW5ncy5FbmFibGVQb3N0QmFja09uUm93Q2xpY2s7CnRoaXMuQ2xpZW50U2V0dGluZ3MuRW5hYmxlUG9zdEJhY2tPblJvd0NsaWNrPWZhbHNlOwp0aGlzLl9zZWxlY3Rpb24uX2NsaWNrKGMpOwp0aGlzLkNsaWVudFNldHRpbmdzLkVuYWJsZVBvc3RCYWNrT25Sb3dDbGljaz1oOwppZih0aGlzLl9zZWxlY3RlZEl0ZW1zSW50ZXJuYWwubGVuZ3RoPT0wfHx0aGlzLl9zZWxlY3RlZEl0ZW1zSW50ZXJuYWxbMF0uaWQhPWwuaWQpe3JldHVybjsKfX1lbHNle3JldHVybjsKfX10aGlzLl9jYW5Nb3ZlUm93PXRydWU7CnRoaXMuX29yaWdpbmFsRHJhZ0l0ZW09bDsKdmFyIGo9bmV3IFRlbGVyaWsuV2ViLlVJLkdyaWREYXRhSXRlbUNhbmNlbEV2ZW50QXJncyhsLGMpOwp0aGlzLnJhaXNlX3Jvd0RyYWdTdGFydGVkKGopOwppZihqLmdldF9jYW5jZWwoKSl7cmV0dXJuOwp9dGhpcy5fZHJhZ2dlZFJvdz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKdGhpcy5fZHJhZ2dlZFJvdy5pZD1TdHJpbmcuZm9ybWF0KCJ7MH1fRHJhZ2dlZFJvd3MiLHRoaXMuZ2V0X2lkKCkpOwp0aGlzLl9kcmFnZ2VkUm93LnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSI7CnRoaXMuX2RyYWdnZWRSb3cuY2xhc3NOYW1lPXRoaXMuZ2V0X2VsZW1lbnQoKS5jbGFzc05hbWU7CnZhciBuPVtdOwp2YXIgYj1nLmdldF9zZWxlY3RlZEl0ZW1zKCk7CmZvcih2YXIgYT0wOwphPGIubGVuZ3RoOwphKyspe2lmKEFycmF5LmNvbnRhaW5zKGcuZ2V0X2RhdGFJdGVtcygpLGJbYV0pKXt2YXIgbz1iW2FdLmdldF9lbGVtZW50KCk7Cm5bbi5sZW5ndGhdPVN0cmluZy5mb3JtYXQoIjx0ciBjbGFzcz0nezB9Jz4iLG8uY2xhc3NOYW1lKTsKbltuLmxlbmd0aF09by5pbm5lckhUTUw7Cm5bbi5sZW5ndGhdPSI8L3RyPiI7CkFycmF5LmFkZCh0aGlzLl9kcmFnZ2VkSXRlbXMsYlthXSk7Cn19dGhpcy5fZHJhZ2dlZFJvdy5pbm5lckhUTUw9U3RyaW5nLmZvcm1hdCgiPHRhYmxlIGNsYXNzPSd7MH0nPjx0Ym9keT57MX08L3Rib2R5PjwvdGFibGU+IixsLnBhcmVudE5vZGUucGFyZW50Tm9kZS5jbGFzc05hbWUsbi5qb2luKCIiKSk7CnZhciBtPXRoaXMuX2RyYWdnZWRSb3cuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRhYmxlIilbMF07CmlmKHRoaXMuX2RyYWdnZWRSb3cubWVyZ2VBdHRyaWJ1dGVzKXt0aGlzLl9kcmFnZ2VkUm93Lm1lcmdlQXR0cmlidXRlcyh0aGlzLmdldF9lbGVtZW50KCkpOwp9ZWxzZXtUZWxlcmlrLldlYi5VSS5HcmlkLkNvcHlBdHRyaWJ1dGVzKHRoaXMuX2RyYWdnZWRSb3csdGhpcy5nZXRfZWxlbWVudCgpKTsKfXRoaXMuX2RyYWdnZWRSb3cuY2xhc3NOYW1lKz1TdHJpbmcuZm9ybWF0KCIgR3JpZERyYWdnZWRSb3dzIEdyaWREcmFnZ2VkUm93c197MH0iLHRoaXMuU2tpbik7CnRoaXMuX2RyYWdnZWRSb3cuc3R5bGUuaGVpZ2h0PSIiOwppZihtLm1lcmdlQXR0cmlidXRlcyl7bS5tZXJnZUF0dHJpYnV0ZXMobC5wYXJlbnROb2RlLnBhcmVudE5vZGUpOwp9ZWxzZXtUZWxlcmlrLldlYi5VSS5HcmlkLkNvcHlBdHRyaWJ1dGVzKG0sbC5wYXJlbnROb2RlLnBhcmVudE5vZGUpOwp9bS5zdHlsZS5oZWlnaHQ9IiI7Cm0uc3R5bGUubWFyZ2luPSIiOwp0aGlzLl9kcmFnZ2VkUm93LnN0eWxlLnpJbmRleD05OTk5OTsKdGhpcy5fZHJhZ2dlZFJvdy5zdHlsZS5kaXNwbGF5PSJub25lIjsKdGhpcy5fZHJhZ2dlZFJvdy5zdHlsZS53aWR0aD10aGlzLmdldF9lbGVtZW50KCkub2Zmc2V0V2lkdGgrInB4IjsKZG9jdW1lbnQuYm9keS5pbnNlcnRCZWZvcmUodGhpcy5fZHJhZ2dlZFJvdyxkb2N1bWVudC5ib2R5LmZpcnN0Q2hpbGQpOwp0aGlzLl9jcmVhdGVEcm9wQ2x1ZSgpOwppZighKCR0ZWxlcmlrLmlzRmlyZWZveCYmYy5idXR0b249PTImJm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiTWFjIikpKXtUZWxlcmlrLldlYi5VSS5HcmlkLkNsZWFyRG9jdW1lbnRFdmVudHMoKTsKfXJldHVybiBmYWxzZTsKfSxfY3JlYXRlRHJvcENsdWU6ZnVuY3Rpb24oKXt0aGlzLl9kcm9wQ2x1ZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLl9kcm9wQ2x1ZSk7CnRoaXMuX2Ryb3BDbHVlLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSI7CnRoaXMuX2Ryb3BDbHVlLnN0eWxlLmhlaWdodD0iNXB4IjsKfSxfcG9zaXRpb25Ecm9wQ2x1ZTpmdW5jdGlvbihjKXtpZih0aGlzLl9kcm9wQ2x1ZT09Yy50YXJnZXQpe3JldHVybjsKfWlmKCF0aGlzLmdldF9tYXN0ZXJUYWJsZVZpZXcoKSl7cmV0dXJuOwp9dmFyIGQ7CmlmKCR0ZWxlcmlrLmlzVG91Y2hEZXZpY2Upe2Q9JHRlbGVyaWsuZ2V0VG91Y2hUYXJnZXQoYyk7Cn1lbHNle2Q9VGVsZXJpay5XZWIuVUkuR3JpZC5HZXRDdXJyZW50RWxlbWVudChjKTsKfXZhciBmPW51bGw7CmlmKGQpe3ZhciBpPVRlbGVyaWsuV2ViLlVJLkdyaWQuR2V0Rmlyc3RQYXJlbnRCeVRhZ05hbWUoZCwidHIiKTsKaWYoaSYmaS5pZCE9IiIpe3ZhciBnPXRoaXMuX2dldFBhcmVudFJhZEdyaWRDb250cm9sKGQpOwppZihUZWxlcmlrLldlYi5VSS5HcmlkLklzQ2hpbGRPZihkLHRoaXMuZ2V0X2VsZW1lbnQoKSkpe2lmKGkhPXRoaXMuX29yaWdpbmFsRHJhZ0l0ZW0pe2Y9dGhpcy5nZXRfbWFzdGVyVGFibGVWaWV3KCkuX2dldFJvd0J5SW5kZXhPckl0ZW1JbmRleEhpZXJhcmNoaWNhbChpKTsKfX1lbHNle2lmKGcpe2lmKCFnLmdldF9tYXN0ZXJUYWJsZVZpZXcoKSl7cmV0dXJuOwp9dmFyIGk9VGVsZXJpay5XZWIuVUkuR3JpZC5HZXRGaXJzdFBhcmVudEJ5VGFnTmFtZShkLCJ0ciIpOwpmPWcuZ2V0X21hc3RlclRhYmxlVmlldygpLl9nZXRSb3dCeUluZGV4T3JJdGVtSW5kZXhIaWVyYXJjaGljYWwoaSk7Cn19fWVsc2V7aWYoaSYmaS5jbGFzc05hbWUmJmkuY2xhc3NOYW1lLmluZGV4T2YoInJnTm9SZWNvcmRzIikhPS0xKXtmPWk7Cn19fWlmKCFmKXt0aGlzLl9kcm9wQ2x1ZS5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iOwpyZXR1cm47Cn10aGlzLl9kcm9wQ2x1ZS5yb3c9ZjsKdGhpcy5fZHJvcENsdWUuc3R5bGUud2lkdGg9Zi5vZmZzZXRXaWR0aCsicHgiOwp2YXIgYj1mOwp2YXIgaD0kdGVsZXJpay5nZXRMb2NhdGlvbihiKTsKdGhpcy5fZHJvcENsdWUuc3R5bGUubGVmdD1oLngrInB4IjsKdmFyIGE7CmlmKCR0ZWxlcmlrLmlzVG91Y2hEZXZpY2Upe2E9JHRlbGVyaWsuZ2V0VG91Y2hFdmVudExvY2F0aW9uKGMpOwp9ZWxzZXthPXRoaXMuX2dldE1vdXNlUG9zaXRpb24oYyk7Cn10aGlzLl9kcm9wQ2x1ZS5zdHlsZS5kaXNwbGF5PSIiOwp0aGlzLl9kcm9wQ2x1ZS5zdHlsZS52aXNpYmlsaXR5PSJ2aXNpYmxlIjsKaWYoYS55PChoLnkrKGIub2Zmc2V0SGVpZ2h0LzIpKSl7dGhpcy5fZHJvcENsdWUuc3R5bGUudG9wPShoLnkpKyJweCI7CmlmKHRoaXMuU2tpbiE9IiIpe3RoaXMuX2Ryb3BDbHVlLmNsYXNzTmFtZT1TdHJpbmcuZm9ybWF0KCJHcmlkSXRlbURyb3BJbmRpY2F0b3IgR3JpZEl0ZW1Ecm9wSW5kaWNhdG9yX3swfSIsdGhpcy5Ta2luKTsKfWVsc2V7dGhpcy5fZHJvcENsdWUuc3R5bGUuYm9yZGVyVG9wPSIxcHggZG90dGVkIGJsYWNrIjsKdGhpcy5fZHJvcENsdWUuc3R5bGVbImZvbnQtc2l6ZSJdPSIzcHgiOwp0aGlzLl9kcm9wQ2x1ZS5zdHlsZVsibGluZS1oZWlnaHQiXT0iM3B4IjsKdGhpcy5fZHJvcENsdWUuc3R5bGUuaGVpZ2h0PSIxcHgiOwp0aGlzLl9kcm9wQ2x1ZS5jbGFzc05hbWU9IkdyaWRJdGVtRHJvcEluZGljYXRvciI7Cn10aGlzLl9kcmFnZ2luZ1Bvc2l0aW9uPSJhYm92ZSI7Cn1lbHNle3RoaXMuX2Ryb3BDbHVlLnN0eWxlLnRvcD0oaC55K2Iub2Zmc2V0SGVpZ2h0KSsicHgiOwppZih0aGlzLlNraW4hPSIiKXt0aGlzLl9kcm9wQ2x1ZS5jbGFzc05hbWU9U3RyaW5nLmZvcm1hdCgiR3JpZEl0ZW1Ecm9wSW5kaWNhdG9yIEdyaWRJdGVtRHJvcEluZGljYXRvcl97MH0iLHRoaXMuU2tpbik7Cn1lbHNle3RoaXMuX2Ryb3BDbHVlLnN0eWxlLmJvcmRlclRvcD0iMXB4IGRvdHRlZCBibGFjayI7CnRoaXMuX2Ryb3BDbHVlLnN0eWxlWyJmb250LXNpemUiXT0iM3B4IjsKdGhpcy5fZHJvcENsdWUuc3R5bGVbImxpbmUtaGVpZ2h0Il09IjNweCI7CnRoaXMuX2Ryb3BDbHVlLnN0eWxlLmhlaWdodD0iMXB4IjsKdGhpcy5fZHJvcENsdWUuY2xhc3NOYW1lPSJHcmlkSXRlbURyb3BJbmRpY2F0b3IiOwp9dGhpcy5fZHJhZ2dpbmdQb3NpdGlvbj0iYmVsb3ciOwp9fSxfZ2V0TW91c2VQb3NpdGlvbjpmdW5jdGlvbihhKXt2YXIgYj0kdGVsZXJpay5nZXRTY3JvbGxPZmZzZXQoZG9jdW1lbnQuYm9keSx0cnVlKTsKdmFyIGQ9YS5jbGllbnRYOwp2YXIgYz1hLmNsaWVudFk7CmQrPWIueDsKYys9Yi55OwpyZXR1cm57eDpkLHk6Y307Cn0sX21vdXNlVXA6ZnVuY3Rpb24oeil7dGhpcy5fY2FuTW92ZVJvdz1mYWxzZTsKaWYodGhpcy5fZHJhZ2dlZFJvdyl7aWYoIXRoaXMuZ2V0X21hc3RlclRhYmxlVmlldygpKXt0aGlzLl9jbGVhckRyYWcoKTsKcmV0dXJuOwp9dGhpcy5fZHJhZ2dlZFJvdy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuX2RyYWdnZWRSb3cpOwp0aGlzLl9kcmFnZ2VkUm93PW51bGw7CnZhciBzOwppZigkdGVsZXJpay5pc1RvdWNoRGV2aWNlKXtzPSR0ZWxlcmlrLmdldFRvdWNoVGFyZ2V0KHopOwp9ZWxzZXtzPVRlbGVyaWsuV2ViLlVJLkdyaWQuR2V0Q3VycmVudEVsZW1lbnQoeik7Cn1pZihzKXtpZihzPT10aGlzLl9kcm9wQ2x1ZSl7cz10aGlzLl9kcm9wQ2x1ZS5yb3c7Cn1lbHNle2lmKHMuaWQmJnMuaWQuaW5kZXhPZigiX0dyaWREYXRhIikhPS0xKXt2YXIgYT0kZmluZChzLmlkLnJlcGxhY2UoIl9HcmlkRGF0YSIsIiIpKTsKaWYoYSYmT2JqZWN0LmdldFR5cGUoYSkuZ2V0TmFtZSgpPT0iVGVsZXJpay5XZWIuVUkuUmFkR3JpZCIpe3ZhciBoPWEuZ2V0X21hc3RlclRhYmxlVmlldygpLmdldF9lbGVtZW50KCkucm93czsKaWYoaC5sZW5ndGg+MCl7cz1oW2gubGVuZ3RoLTFdLmNlbGxzWzBdOwp0aGlzLl9kcmFnZ2luZ1Bvc2l0aW9uPSJiZWxvdyI7Cn19fX12YXIgcD1UZWxlcmlrLldlYi5VSS5HcmlkLkdldEZpcnN0UGFyZW50QnlUYWdOYW1lKHMsInRyIik7CmlmKHA9PXRoaXMuX29yaWdpbmFsRHJhZ0l0ZW0pe3RoaXMuX2NsZWFyRHJhZygpOwpyZXR1cm47Cn12YXIgRj10aGlzLl9kcmFnZ2luZ1Bvc2l0aW9uOwppZihwJiZwLmlkPT0iIil7cD1udWxsOwpGPW51bGw7Cn12YXIgbj10aGlzLl9kcmFnZ2VkSXRlbXM7CnZhciBEPW5ldyBUZWxlcmlrLldlYi5VSS5HcmlkRHJhZ0Ryb3BDYW5jZWxFdmVudEFyZ3MocCx6LG4scyxudWxsLEYpOwp0aGlzLnJhaXNlX3Jvd0Ryb3BwaW5nKEQpOwppZighRC5nZXRfY2FuY2VsKCkpe3ZhciB4PXRoaXMuX2dldFBhcmVudFJhZEdyaWRDb250cm9sKHMpOwppZih4KXt2YXIgQz1UZWxlcmlrLldlYi5VSS5HcmlkLkdldEZpcnN0UGFyZW50QnlUYWdOYW1lKHMsInRyIik7CmlmKCFDfHxDPT10aGlzLl9vcmlnaW5hbERyYWdJdGVtfHwheC5nZXRfbWFzdGVyVGFibGVWaWV3KCkpe3RoaXMuX2NsZWFyRHJhZygpOwpyZXR1cm47Cn12YXIgYj1DOwp2YXIgQT14LmdldF9tYXN0ZXJUYWJsZVZpZXcoKS5fZGF0YS5VbmlxdWVJRDsKaWYoQy5pZCE9IiIpe2I9eC5nZXRfbWFzdGVyVGFibGVWaWV3KCkuX2dldFJvd0J5SW5kZXhPckl0ZW1JbmRleEhpZXJhcmNoaWNhbChDKTsKdmFyIG09JGZpbmQoYi5pZC5zcGxpdCgiX18iKVswXSk7CmlmKG0pe0E9bS5fZGF0YS5VbmlxdWVJRDsKfX1lbHNle3ZhciBxPWZhbHNlOwppZih4LmdldF9tYXN0ZXJUYWJsZVZpZXcoKS5nZXRfZWxlbWVudCgpLnRCb2RpZXMubGVuZ3RoPjApe2Zvcih2YXIgdD0wLGY9eC5nZXRfbWFzdGVyVGFibGVWaWV3KCkuZ2V0X2VsZW1lbnQoKS50Qm9kaWVzWzBdLnJvd3MubGVuZ3RoOwp0PGY7CnQrKyl7aWYoQz09eC5nZXRfbWFzdGVyVGFibGVWaWV3KCkuZ2V0X2VsZW1lbnQoKS50Qm9kaWVzWzBdLnJvd3NbdF0pe3E9dHJ1ZTsKYnJlYWs7Cn12YXIgbD14LmdldF9tYXN0ZXJUYWJsZVZpZXcoKS5nZXRfZWxlbWVudCgpLnRCb2RpZXNbMF0ucm93c1t0XS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGFibGUiKTsKZm9yKHZhciB1PTAsbz1sLmxlbmd0aDsKdTxvOwp1Kyspe2lmKGxbdV0mJnRoaXMuX2lzQ2hpbGRSb3dFbGVtZW50KEMsbFt1XSkpe3ZhciBCPSRmaW5kKGxbdV0uaWQpOwppZihCKXtBPUIuX2RhdGEuVW5pcXVlSUQ7Cn1xPXRydWU7CmJyZWFrOwp9fWlmKHEpe2JyZWFrOwp9fX1pZighcSl7cmV0dXJuOwp9fXZhciBuPXRoaXMuX2RyYWdnZWRJdGVtczsKdmFyIHk9bnVsbDsKaWYoYi5pZCE9IiIpe3k9bmV3IFRlbGVyaWsuV2ViLlVJLkdyaWREcmFnRHJvcENhbmNlbEV2ZW50QXJncyhiLHosbixudWxsLHgsdGhpcy5fZHJhZ2dpbmdQb3NpdGlvbik7Cn1lbHNle3ZhciBkPVRlbGVyaWsuV2ViLlVJLkdyaWQuR2V0Rmlyc3RQYXJlbnRSb3dXaXRoSUQoYik7CmlmKGQhPW51bGwmJmQuaWQhPSIiKXtiPWQ7Cnk9bmV3IFRlbGVyaWsuV2ViLlVJLkdyaWREcmFnRHJvcENhbmNlbEV2ZW50QXJncyhiLHosbixudWxsLHgsdGhpcy5fZHJhZ2dpbmdQb3NpdGlvbik7Cn1lbHNle3k9bmV3IFRlbGVyaWsuV2ViLlVJLkdyaWREcmFnRHJvcENhbmNlbEV2ZW50QXJncyhudWxsLHosbixudWxsLHgsdGhpcy5fZHJhZ2dpbmdQb3NpdGlvbik7Cn19dGhpcy5yYWlzZV9yb3dEcm9wcGVkKHkpOwp0aGlzLl9kcmFnZ2VkSXRlbXNJbmRleGVzPVtdOwpmb3IodmFyIHY9MCxFPW4ubGVuZ3RoOwp2PEU7CnYrKyl7QXJyYXkuYWRkKHRoaXMuX2RyYWdnZWRJdGVtc0luZGV4ZXMsblt2XS5faXRlbUluZGV4SGllcmFyY2hpY2FsKTsKfXRoaXMudXBkYXRlQ2xpZW50U3RhdGUoKTsKdmFyIGc9Yi5pZC5zcGxpdCgiX18iKVsxXTsKdmFyIHc9U3RyaW5nLmZvcm1hdCgiezB9LHsxfSx7Mn0sezN9IixnLHguVW5pcXVlSUQsdGhpcy5fZHJhZ2dpbmdQb3NpdGlvbixBKTsKdGhpcy5nZXRfbWFzdGVyVGFibGVWaWV3KCkuZmlyZUNvbW1hbmQoIlJvd0Ryb3BwZWQiLHcpOwp9ZWxzZXt2YXIgYz1ELmdldF9kZXN0aW5hdGlvbkh0bWxFbGVtZW50KCk7CnZhciBuPXRoaXMuX2RyYWdnZWRJdGVtczsKdmFyIHk9bmV3IFRlbGVyaWsuV2ViLlVJLkdyaWREcmFnRHJvcENhbmNlbEV2ZW50QXJncyhudWxsLHosbixjLG51bGwsbnVsbCk7CnRoaXMucmFpc2Vfcm93RHJvcHBlZCh5KTsKdGhpcy5fZHJhZ2dlZEl0ZW1zSW5kZXhlcz1bXTsKZm9yKHZhciB2PTAsRT1uLmxlbmd0aDsKdjxFOwp2Kyspe0FycmF5LmFkZCh0aGlzLl9kcmFnZ2VkSXRlbXNJbmRleGVzLG5bdl0uX2l0ZW1JbmRleEhpZXJhcmNoaWNhbCk7Cn10aGlzLnVwZGF0ZUNsaWVudFN0YXRlKCk7CmlmKGMuaWQpe3ZhciB3PVN0cmluZy5mb3JtYXQoInswfSx7MX0sezJ9LHszfSIsYy5pZCwiIiwiIiwiIik7Cn10aGlzLmdldF9tYXN0ZXJUYWJsZVZpZXcoKS5maXJlQ29tbWFuZCgiUm93RHJvcHBlZEh0bWwiLHcpOwp9fX1UZWxlcmlrLldlYi5VSS5HcmlkLlJlc3RvcmVEb2N1bWVudEV2ZW50cygpOwp9dGhpcy5fY2xlYXJEcmFnKCk7Cn0sX2NsZWFyRHJhZzpmdW5jdGlvbigpe2lmKHRoaXMuX2Ryb3BDbHVlKXtkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRoaXMuX2Ryb3BDbHVlKTsKdGhpcy5fZHJvcENsdWU9bnVsbDsKfWlmKHRoaXMuX2RyYWdnZWRJdGVtcyl7dGhpcy5fZHJhZ2dlZEl0ZW1zPVtdOwp9dGhpcy5fZHJhZ2dpbmdQb3NpdGlvbj0iYWJvdmUiOwpUZWxlcmlrLldlYi5VSS5HcmlkLlJlc3RvcmVEb2N1bWVudEV2ZW50cygpOwp9LF9pc0NoaWxkUm93RWxlbWVudDpmdW5jdGlvbihiLGMpe2Zvcih2YXIgYT0wLGQ9Yy50Qm9kaWVzWzBdLnJvd3MubGVuZ3RoOwphPGQ7CmErKyl7aWYoYj09Yy50Qm9kaWVzWzBdLnJvd3NbYV0pe3JldHVybiB0cnVlOwp9fXJldHVybiBmYWxzZTsKfSxfZ2V0UGFyZW50UmFkR3JpZENvbnRyb2w6ZnVuY3Rpb24oYSl7d2hpbGUoYSl7aWYoYS5pZCYmYS5pZCE9IiIpe3RyeXt2YXIgYj0kZmluZChhLmlkKTsKaWYoYiYmT2JqZWN0LmdldFR5cGUoYikuZ2V0TmFtZSgpPT0iVGVsZXJpay5XZWIuVUkuUmFkR3JpZCIpe3JldHVybiBiOwp9fWNhdGNoKGMpe319YT1hLnBhcmVudE5vZGU7Cn1yZXR1cm4gbnVsbDsKfSxfY2FuY2VsRXZlbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGZhbHNlOwp9LF9tb3VzZU1vdmU6ZnVuY3Rpb24oYSl7aWYodGhpcy5fY2FuTW92ZVJvdyYmdGhpcy5fZHJhZ2dlZFJvdyl7dmFyIGI9bmV3IFN5cy5FdmVudEFyZ3MoKTsKYi5nZXRfZG9tRXZlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gYTsKfTsKdGhpcy5yYWlzZV9yb3dEcmFnZ2luZyhiKTsKdGhpcy5fZHJhZ2dlZFJvdy5zdHlsZS5kaXNwbGF5PSIiOwp0aGlzLl9kcmFnZ2VkUm93LnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSI7ClRlbGVyaWsuV2ViLlVJLkdyaWQuUG9zaXRpb25EcmFnRWxlbWVudCh0aGlzLl9kcmFnZ2VkUm93LGEpOwp0aGlzLl9wb3NpdGlvbkRyb3BDbHVlKGEpOwppZih0aGlzLkNsaWVudFNldHRpbmdzLlNjcm9sbGluZy5BbGxvd1Njcm9sbCYmdGhpcy5HcmlkRGF0YURpdiYmdGhpcy5DbGllbnRTZXR0aW5ncy5BbGxvd0F1dG9TY3JvbGxPbkRyYWdEcm9wKXt0aGlzLl9hdXRvU2Nyb2xsKCk7Cn1pZigkdGVsZXJpay5pc1RvdWNoRGV2aWNlKXskdGVsZXJpay5jYW5jZWxSYXdFdmVudChhKTsKfXJldHVybiBmYWxzZTsKfX0sX2F1dG9TY3JvbGw6ZnVuY3Rpb24oKXt2YXIgaixhOwp2YXIgZD10aGlzLkdyaWREYXRhRGl2OwppZighdGhpcy5fZHJhZ2dlZFJvd3x8IXRoaXMuR3JpZERhdGFEaXYpe3JldHVybjsKfXZhciBmPSR0ZWxlcmlrLmdldExvY2F0aW9uKHRoaXMuX2RyYWdnZWRSb3cpOwpqPSR0ZWxlcmlrLmdldExvY2F0aW9uKGQpLnk7CmE9aitkLm9mZnNldEhlaWdodDsKdmFyIGc9ZC5zY3JvbGxUb3A8PTA7CnZhciBpPWQuc2Nyb2xsVG9wPj0oZC5zY3JvbGxIZWlnaHQtZC5vZmZzZXRIZWlnaHQrMTYpOwp2YXIgYz1mLnktajsKdmFyIGI9YS1mLnk7CnZhciBoPXRoaXM7CmlmKGM8NTAmJiFnKXt2YXIgZT0oMTAtKGMvNSkpOwpkLnNjcm9sbFRvcD1kLnNjcm9sbFRvcC1lOwp3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2guX2F1dG9TY3JvbGwoKTsKfSwxMDApOwp9ZWxzZXtpZihiPDUwJiYhaSl7dmFyIGU9KDEwLShiLzUpKTsKZC5zY3JvbGxUb3A9ZC5zY3JvbGxUb3ArZTsKd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtoLl9hdXRvU2Nyb2xsKHRoaXMuX21vdXNlUG9zKTsKfSwxMDApOwp9fX0sX2ZpbGxTZWxlY3RlZENlbGxzSW5kZXhlczpmdW5jdGlvbigpe2lmKHRoaXMuX3NlbGVjdGVkQ2VsbHNJbnRlcm5hbC5sZW5ndGg+MCl7dmFyIGI9bnVsbDsKZm9yKHZhciBhPTA7CmE8dGhpcy5fc2VsZWN0ZWRDZWxsc0ludGVybmFsLmxlbmd0aDsKYSsrKXtiPXRoaXMuX3NlbGVjdGVkQ2VsbHNJbnRlcm5hbFthXS5jZWxsSW5kZXg7CmlmKCFBcnJheS5jb250YWlucyh0aGlzLl9zZWxlY3RlZENlbGxzSW5kZXhlcyxiKSl7QXJyYXkuYWRkKHRoaXMuX3NlbGVjdGVkQ2VsbHNJbmRleGVzLGIpOwp9fX19LF9maWxsVW5zZWxlY3RhYmxlSXRlbXNJbmRleGVzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fdW5zZWxlY3RhYmxlSXRlbXNJbnRlcm5hbDsKaWYoYS5sZW5ndGg+MCl7dmFyIGM9bnVsbDsKZm9yKHZhciBiPTA7Cmxlbj1hLmxlbmd0aCxiPGxlbjsKYisrKXtjPWFbYl0uaXRlbUluZGV4OwppZighQXJyYXkuY29udGFpbnMoYSxjKSl7QXJyYXkuYWRkKHRoaXMuX3Vuc2VsZWN0YWJsZUl0ZW1zSW5kZXhlcyxjKTsKfX19fSxkaXNwb3NlOmZ1bmN0aW9uKCl7dmFyIGg9JGdldChTdHJpbmcuZm9ybWF0KCJtb2RhbERpdklkX3swfSIsdGhpcy5nZXRfaWQoKSkpOwppZihoKXtoLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaCk7Cn1pZih0aGlzLl9vblJlc2l6ZURlbGVnYXRlKXt0cnl7JHJlbW92ZUhhbmRsZXIod2luZG93LCJyZXNpemUiLHRoaXMuX29uUmVzaXplRGVsZWdhdGUpOwp0aGlzLl9vblJlc2l6ZURlbGVnYXRlPW51bGw7Cn1jYXRjaChkKXt9fWlmKHRoaXMuX2dyaWRJdGVtUmVzaXplcil7dGhpcy5fZ3JpZEl0ZW1SZXNpemVyLmRpc3Bvc2UoKTsKfWlmKHRoaXMuX3BvcFVwSWRzJiZ0aGlzLl9wb3BVcElkcyE9IiIpe3ZhciBmPWV2YWwodGhpcy5fcG9wVXBJZHMpOwpmb3IodmFyIGc9MDsKZzxmLmxlbmd0aDsKZysrKXt2YXIgYz0kZ2V0KGZbZ10pOwppZihjKXt2YXIgYT1jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJkaXYiKTsKaWYoYS5sZW5ndGg+MCl7JGNsZWFySGFuZGxlcnMoYVswXSk7Cn19fX1pZih0aGlzLl9pc0FqYXhSZXF1ZXN0KXt9dGhpcy5yYWlzZV9ncmlkRGVzdHJveWluZyhuZXcgU3lzLkV2ZW50QXJncygpKTsKJGNsZWFySGFuZGxlcnModGhpcy5nZXRfZWxlbWVudCgpKTsKaWYodGhpcy5fc2VsZWN0aW9uKXt0aGlzLl9zZWxlY3Rpb24uZGlzcG9zZSgpOwp9aWYodGhpcy5fc2Nyb2xsaW5nKXt0aGlzLl9zY3JvbGxpbmcuZGlzcG9zZSgpOwp9aWYodGhpcy5fZmlsdGVyTWVudSl7aWYodGhpcy5fb25GaWx0ZXJNZW51Q2xpY2spe3RoaXMuX2ZpbHRlck1lbnUucmVtb3ZlX2l0ZW1DbGlja2VkKHRoaXMuX29uRmlsdGVyTWVudUNsaWNraW5nKTsKdGhpcy5fZmlsdGVyTWVudS5yZW1vdmVfaXRlbUNsaWNrZWQodGhpcy5fb25GaWx0ZXJNZW51Q2xpY2spOwp0aGlzLl9maWx0ZXJNZW51LnJlbW92ZV9oaWRkZW4odGhpcy5fb25GaWx0ZXJNZW51SGlkZGVuRGVsZWdhdGUpOwp0aGlzLl9vbkZpbHRlck1lbnVIaWRkZW5EZWxlZ2F0ZT1udWxsOwp9dGhpcy5fZmlsdGVyTWVudT1udWxsOwp9aWYodGhpcy5faGVhZGVyQ29udGV4dE1lbnUpe3RoaXMuX2hlYWRlckNvbnRleHRNZW51PW51bGw7Cn1pZihTeXMuV2ViRm9ybXMmJlN5cy5XZWJGb3Jtcy5QYWdlUmVxdWVzdE1hbmFnZXIpe3ZhciBiPVN5cy5XZWJGb3Jtcy5QYWdlUmVxdWVzdE1hbmFnZXIuZ2V0SW5zdGFuY2UoKTsKaWYoYiYmdGhpcy5faW5pdGlhbGl6ZVJlcXVlc3RIYW5kbGVyKXtiLnJlbW92ZV9pbml0aWFsaXplUmVxdWVzdCh0aGlzLl9pbml0aWFsaXplUmVxdWVzdEhhbmRsZXIpOwp9fWlmKHRoaXMuR3JpZERhdGFEaXYpeyRjbGVhckhhbmRsZXJzKHRoaXMuR3JpZERhdGFEaXYpOwp9aWYodGhpcy5HcmlkSGVhZGVyRGl2KXskY2xlYXJIYW5kbGVycyh0aGlzLkdyaWRIZWFkZXJEaXYpOwp9aWYodGhpcy5HcmlkRm9vdGVyRGl2KXskY2xlYXJIYW5kbGVycyh0aGlzLkdyaWRGb290ZXJEaXYpOwp9aWYodGhpcy5fZ3JvdXBQYW5lbCYmdGhpcy5fZ3JvdXBQYW5lbC5nZXRfZWxlbWVudCgpKXskY2xlYXJIYW5kbGVycyh0aGlzLl9ncm91cFBhbmVsLmdldF9lbGVtZW50KCkpOwp9dGhpcy5fZHJhZ2dlZEl0ZW1zPW51bGw7CnRoaXMuQ29udHJvbD1udWxsOwp0aGlzLkdyaWREYXRhRGl2PW51bGw7CnRoaXMuR3JpZEhlYWRlckRpdj1udWxsOwp0aGlzLkdyaWRGb290ZXJEaXY9bnVsbDsKdGhpcy5QYWdlckNvbnRyb2w9bnVsbDsKdGhpcy5Ub3BQYWdlckNvbnRyb2w9bnVsbDsKdGhpcy5NYXN0ZXJUYWJsZVZpZXc9bnVsbDsKdGhpcy5NYXN0ZXJUYWJsZVZpZXdIZWFkZXI9bnVsbDsKdGhpcy5NYXN0ZXJUYWJsZVZpZXdGb290ZXI9bnVsbDsKdGhpcy5faGlkZWRDb2x1bW5zPVtdOwp0aGlzLl9zaG93ZWRDb2x1bW5zPVtdOwppZih0aGlzLmdldF9pc1VzaW5nT0RhdGFTb3VyY2UoKSl7dGhpcy5fZmxhdEJpbmRlci5fc291cmNlLnJlbW92ZV9yZXF1ZXN0U3VjY2VlZGVkKHRoaXMuX29EYXRhUmVxdWVzdFN1Y2NlZWRlZERlbGVnYXRlKTsKdGhpcy5fb0RhdGFSZXF1ZXN0U3VjY2VlZGVkRGVsZWdhdGU9bnVsbDsKfWlmKHRoaXMuQ2xpZW50U2V0dGluZ3MuQWxsb3dLZXlib2FyZE5hdmlnYXRpb24mJnRoaXMuX2RvY3VtZW50S2V5RG93bkRlbGVnYXRlKXskdGVsZXJpay5yZW1vdmVFeHRlcm5hbEhhbmRsZXIoZG9jdW1lbnQsImtleWRvd24iLHRoaXMuX2RvY3VtZW50S2V5RG93bkRlbGVnYXRlKTsKdGhpcy5fZG9jdW1lbnRLZXlEb3duRGVsZWdhdGU9bnVsbDsKfWlmKHRoaXMuQ2xpZW50U2V0dGluZ3MuQWxsb3dSb3dzRHJhZ0Ryb3Ape2lmKCR0ZWxlcmlrLmlzVG91Y2hEZXZpY2UpeyR0ZWxlcmlrLnJlbW92ZU1vYmlsZUhhbmRsZXIodGhpcy5nZXRfZWxlbWVudCgpLCJtb3VzZWRvd24iLHRoaXMuX29uTW91c2VEb3duRGVsZWdhdGUpOwp0aGlzLl9vbk1vdXNlRG93bkRlbGVnYXRlPW51bGw7Cn0kdGVsZXJpay5yZW1vdmVNb2JpbGVIYW5kbGVyKGRvY3VtZW50LCJtb3VzZXVwIix0aGlzLl9kb2N1bWVudE1vdXNlVXBEZWxlZ2F0ZSxudWxsLHRydWUpOwp0aGlzLl9kb2N1bWVudE1vdXNlVXBEZWxlZ2F0ZT1udWxsOwokdGVsZXJpay5yZW1vdmVNb2JpbGVIYW5kbGVyKGRvY3VtZW50LCJtb3VzZW1vdmUiLHRoaXMuX2RvY3VtZW50TW91c2VNb3ZlRGVsZWdhdGUsbnVsbCx0cnVlKTsKdGhpcy5fZG9jdW1lbnRNb3VzZU1vdmVEZWxlZ2F0ZT1udWxsOwp9aWYodGhpcy5DbGllbnRTZXR0aW5ncy5TY3JvbGxpbmcuQWxsb3dTY3JvbGwmJiR0ZWxlcmlrLmlzVG91Y2hEZXZpY2UpeyR0ZWxlcmlrLnJlbW92ZU1vYmlsZUhhbmRsZXIodGhpcy5HcmlkRGF0YURpdiwibW91c2Vkb3duIix0aGlzLl9kYXRhRGl2TW91c2VEb3duRGVsZWdhdGUpOwp0aGlzLl9kYXRhRGl2TW91c2VEb3duRGVsZWdhdGU9bnVsbDsKJHRlbGVyaWsucmVtb3ZlTW9iaWxlSGFuZGxlcih0aGlzLkdyaWREYXRhRGl2LCJtb3VzZXVwIix0aGlzLl9kYXRhRGl2TW91c2VVcERlbGVnYXRlKTsKdGhpcy5fZGF0YURpdk1vdXNlVXBEZWxlZ2F0ZT1udWxsOwp9d2luZG93W3RoaXMuQ2xpZW50SURdPW51bGw7ClRlbGVyaWsuV2ViLlVJLlJhZEdyaWQuY2FsbEJhc2VNZXRob2QodGhpcywiZGlzcG9zZSIpOwp9LF9pbml0aWFsaXplUmVxdWVzdDpmdW5jdGlvbihnLGQpe3ZhciBhPWQuZ2V0X3Bvc3RCYWNrRWxlbWVudCgpOwppZihkLmdldF9wb3N0QmFja0VsZW1lbnQoKT09dGhpcy5nZXRfZWxlbWVudCgpfHxUZWxlcmlrLldlYi5VSS5HcmlkLklzQ2hpbGRPZihhLHRoaXMuZ2V0X2VsZW1lbnQoKSkpe2lmKHRoaXMuX3N0YXR1c0xhYmVsSUQpe3ZhciBmPVsicmdFeHBYTFMiLCJyZ0V4cERPQyIsInJnRXhwUERGIiwicmdFeHBDU1YiXTsKdmFyIGM9dHJ1ZTsKdmFyIGU9YS5jbGFzc05hbWU7CmZvcih2YXIgYj0wOwpsZW49Zi5sZW5ndGgsYjxsZW47CmIrKyl7aWYoZS5pbmRleE9mKGZbYl0pIT0tMSl7Yz1mYWxzZTsKYnJlYWs7Cn19aWYoYyl7dmFyIGg9JGdldCh0aGlzLl9zdGF0dXNMYWJlbElEKTsKaWYoaCl7aC50aXRsZT10aGlzLl9sb2FkaW5nVGV4dDsKaC5zdHlsZS52aXNpYmlsaXR5PSJ2aXNpYmxlIjsKfX19dGhpcy5faXNBamF4UmVxdWVzdD10cnVlOwp9fSxfaW5pdGlhbGl6ZU9EYXRhU291cmNlQmluZGVyOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxjPWIuZ2V0X29kYXRhQ2xpZW50U2V0dGluZ3MoKS5PRGF0YVNvdXJjZUlELGQ9JGZpbmQoYyk7CmlmKCFkKXt2YXIgYT1TdHJpbmcuZm9ybWF0KCJEYXRhU291cmNlIHdpdGggaWQgezB9IHdhcyBub3QgZm91bmQgb24gdGhlIHBhZ2UiLGMpOwphbGVydChhKTsKfWVsc2V7Yi5fZmxhdEJpbmRlcj1uZXcgVGVsZXJpay5XZWIuVUkuUmFkT0RhdGFEYXRhU291cmNlLkJpbmRlci5GbGF0KGQsYik7CmIuX2ZsYXRCaW5kZXIuaW5pdGlhbGl6ZSgpOwpiLl9vRGF0YVJlcXVlc3RTdWNjZWVkZWREZWxlZ2F0ZT1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZShiLGIuX29uT0RhdGFSZXF1ZXN0U3VjY2VlZGVkKTsKZC5hZGRfcmVxdWVzdFN1Y2NlZWRlZChiLl9vRGF0YVJlcXVlc3RTdWNjZWVkZWREZWxlZ2F0ZSk7CmIuX29uRGF0YU5lZWRlZCgpOwp9fSxfb25EYXRhTmVlZGVkOmZ1bmN0aW9uKGIpe3ZhciBlPXtldmVudHM6e2ZhaWw6ZnVuY3Rpb24oaSl7dGhpcy5fb25GYWlsKGkpOwp9fX07CnZhciBjPXt9OwpjLmZpbHRlcj17fTsKYy5maWx0ZXIuZmlsdGVycz1bXTsKdmFyIGQ9dGhpcy5nZXRfbWFzdGVyVGFibGVWaWV3KCkuZ2V0X2ZpbHRlckV4cHJlc3Npb25zKCk7CmZvcih2YXIgaD0wOwpoPGQuZ2V0X2NvdW50KCk7CmgrKyl7dmFyIGc9ZC5nZXRJdGVtKGgpOwp2YXIgZj1nLmdldF9maWVsZFZhbHVlKCk7CnZhciBhPVtdOwppZihmLnNwbGl0KXthPWYuc3BsaXQoIiAiKTsKfWlmKGcuRmlsdGVyRnVuY3Rpb249PSJCZXR3ZWVuIil7Zy5zZXRfZmlsdGVyRnVuY3Rpb24oIkdyZWF0ZXJUaGFuT3JFcXVhbFRvIik7Cmcuc2V0X2ZpZWxkVmFsdWUoYVswXSk7CmMuZmlsdGVyLmZpbHRlcnMucHVzaCh0aGlzLl9jb252ZXJ0VG9PRGF0YUZpbHRlckV4cHJKc29uKGcpKTsKZy5zZXRfZmlsdGVyRnVuY3Rpb24oIkxlc3NUaGFuT3JFcXVhbFRvIik7Cmcuc2V0X2ZpZWxkVmFsdWUoYVsxXSk7CmMuZmlsdGVyLmZpbHRlcnMucHVzaCh0aGlzLl9jb252ZXJ0VG9PRGF0YUZpbHRlckV4cHJKc29uKGcpKTsKfWVsc2V7aWYoZy5GaWx0ZXJGdW5jdGlvbj09Ik5vdEJldHdlZW4iKXtnLnNldF9maWx0ZXJGdW5jdGlvbigiTGVzc1RoYW5PckVxdWFsVG8iKTsKZy5zZXRfZmllbGRWYWx1ZShhWzBdKTsKYy5maWx0ZXIuZmlsdGVycy5wdXNoKHRoaXMuX2NvbnZlcnRUb09EYXRhRmlsdGVyRXhwckpzb24oZykpOwpnLnNldF9maWx0ZXJGdW5jdGlvbigiR3JlYXRlclRoYW5PckVxdWFsVG8iKTsKZy5zZXRfZmllbGRWYWx1ZShhWzFdKTsKYy5maWx0ZXIuZmlsdGVycy5wdXNoKHRoaXMuX2NvbnZlcnRUb09EYXRhRmlsdGVyRXhwckpzb24oZykpOwpjLmZpbHRlci5sb2dpYz0ib3IiOwp9ZWxzZXtpZihnLkZpbHRlckZ1bmN0aW9uPT0iRG9lc05vdENvbnRhaW4iKXtyZXR1cm47Cn1lbHNle2MuZmlsdGVyLmZpbHRlcnMucHVzaCh0aGlzLl9jb252ZXJ0VG9PRGF0YUZpbHRlckV4cHJKc29uKGcpKTsKfX19fXZhciBqPXRoaXMuZ2V0X21hc3RlclRhYmxlVmlldygpLmdldF9zb3J0RXhwcmVzc2lvbnMoKTsKYy5zb3J0PVtdOwpmb3IodmFyIGg9MDsKaDxqLmdldF9jb3VudCgpOwpoKyspe3ZhciBnPWouZ2V0SXRlbShoKTsKYy5zb3J0LnB1c2goe2ZpZWxkOmcuRmllbGROYW1lLGRpcjpnLlNvcnRPcmRlcj09MT8iYXNjIjoiZGVzYyJ9KTsKfWMucGFnZT10aGlzLmdldF9tYXN0ZXJUYWJsZVZpZXcoKS5nZXRfY3VycmVudFBhZ2VJbmRleCgpOwpjLnBhZ2VTaXplPXRoaXMuZ2V0X21hc3RlclRhYmxlVmlldygpLmdldF9wYWdlU2l6ZSgpOwppZihlIT11bmRlZmluZWQpe2UuZGF0YT1jOwp0aGlzLl9mbGF0QmluZGVyLmZldGNoKGUpOwp9ZWxzZXt0aGlzLl9mbGF0QmluZGVyLmZldGNoKCk7Cn19LF9vbk9EYXRhUmVxdWVzdFN1Y2NlZWRlZDpmdW5jdGlvbihmLGUpe3ZhciBhPXRoaXMuZ2V0X21hc3RlclRhYmxlVmlldygpOwppZih0aGlzLkNsaWVudFNldHRpbmdzLkRhdGFCaW5kaW5nLkVuYWJsZUNhY2hpbmcpe3ZhciBnPXRoaXMuX2dldENhY2hlS2V5KGEpOwppZighdGhpcy5fY2FjaGUpe3RoaXMuX2NhY2hlPXt9Owp9aWYoIXRoaXMuX2NhY2hlW2ddKXt0aGlzLl9jYWNoZVtnXT1lOwp9fXZhciBjPWUuZ2V0X2RhdGEoKSxiPWUuZ2V0X2NvdW50KCksZD1uZXcgVGVsZXJpay5XZWIuVUkuR3JpZERhdGFTb3VyY2VSZXNvbHZlZEV2ZW50QXJncyhjKTsKYS5zZXRfdmlydHVhbEl0ZW1Db3VudChiKTsKdGhpcy5yYWlzZV9kYXRhU291cmNlUmVzb2x2ZWQoZCk7CmlmKGEuZ2V0X3ZpcnR1YWxJdGVtQ291bnQoKT09MCl7YS5fdXBkYXRlUGFnZXIoKTsKfWEuc2V0X2RhdGFTb3VyY2UoYyk7CmEuZGF0YUJpbmQoKTsKfSxfY29udmVydFRvT0RhdGFGaWx0ZXJFeHBySnNvbjpmdW5jdGlvbihjKXt2YXIgYT17fSxiPWMuZ2V0X2ZpZWxkTmFtZSgpOwpzd2l0Y2goYy5GaWx0ZXJGdW5jdGlvbil7Y2FzZSJFcXVhbFRvIjphPXRoaXMuX2dldE9EYXRhRmlsdGVyRXhwcmVzc2lvbkpzb24oYiwiZXEiLGMuRmllbGRWYWx1ZSk7CmJyZWFrOwpjYXNlIk5vdEVxdWFsVG8iOmE9dGhpcy5fZ2V0T0RhdGFGaWx0ZXJFeHByZXNzaW9uSnNvbihiLCJuZXEiLGMuRmllbGRWYWx1ZSk7CmJyZWFrOwpjYXNlIkdyZWF0ZXJUaGFuIjphPXRoaXMuX2dldE9EYXRhRmlsdGVyRXhwcmVzc2lvbkpzb24oYiwiZ3QiLGMuRmllbGRWYWx1ZSk7CmJyZWFrOwpjYXNlIkxlc3NUaGFuIjphPXRoaXMuX2dldE9EYXRhRmlsdGVyRXhwcmVzc2lvbkpzb24oYiwibHQiLGMuRmllbGRWYWx1ZSk7CmJyZWFrOwpjYXNlIkdyZWF0ZXJUaGFuT3JFcXVhbFRvIjphPXRoaXMuX2dldE9EYXRhRmlsdGVyRXhwcmVzc2lvbkpzb24oYiwiZ3RlIixjLkZpZWxkVmFsdWUpOwpicmVhazsKY2FzZSJMZXNzVGhhbk9yRXF1YWxUbyI6YT10aGlzLl9nZXRPRGF0YUZpbHRlckV4cHJlc3Npb25Kc29uKGIsImx0ZSIsYy5GaWVsZFZhbHVlKTsKYnJlYWs7CmNhc2UiU3RhcnRzV2l0aCI6YT10aGlzLl9nZXRPRGF0YUZpbHRlckV4cHJlc3Npb25Kc29uKGIsInN0YXJ0c3dpdGgiLGMuRmllbGRWYWx1ZSk7CmJyZWFrOwpjYXNlIkVuZHNXaXRoIjphPXRoaXMuX2dldE9EYXRhRmlsdGVyRXhwcmVzc2lvbkpzb24oYiwiZW5kc3dpdGgiLGMuRmllbGRWYWx1ZSk7CmJyZWFrOwpjYXNlIkNvbnRhaW5zIjphPXRoaXMuX2dldE9EYXRhRmlsdGVyRXhwcmVzc2lvbkpzb24oYiwiY29udGFpbnMiLGMuRmllbGRWYWx1ZSk7CmJyZWFrOwpjYXNlIkJldHdlZW4iOmE9dGhpcy5fZ2V0T0RhdGFGaWx0ZXJFeHByZXNzaW9uSnNvbihiLCJjb250YWlucyIsYy5GaWVsZFZhbHVlKTsKYnJlYWs7CmNhc2UiSXNFbXB0eSI6YT10aGlzLl9nZXRPRGF0YUZpbHRlckV4cHJlc3Npb25Kc29uKGIsImVxIiwiIik7CmJyZWFrOwpjYXNlIk5vdElzRW1wdHkiOmE9dGhpcy5fZ2V0T0RhdGFGaWx0ZXJFeHByZXNzaW9uSnNvbihiLCJuZXEiLCIiKTsKYnJlYWs7CmNhc2UiSXNOdWxsIjphPXRoaXMuX2dldE9EYXRhRmlsdGVyRXhwcmVzc2lvbkpzb24oYiwiZXEiLG51bGwpOwpicmVhazsKY2FzZSJOb3RJc051bGwiOmE9dGhpcy5fZ2V0T0RhdGFGaWx0ZXJFeHByZXNzaW9uSnNvbihiLCJuZXEiLG51bGwpOwpicmVhazsKfXJldHVybiBhOwp9LF9nZXRPRGF0YUZpbHRlckV4cHJlc3Npb25Kc29uOmZ1bmN0aW9uKGEsYixkKXt2YXIgYz17fTsKYz17ZmllbGQ6YSxvcGVyYXRvcjpiLHZhbHVlOmR9OwpyZXR1cm4gYzsKfSxnZXRfZmxhdE1vZGVsOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRfb2RhdGFDbGllbnRTZXR0aW5ncygpOwp2YXIgYj1UZWxlcmlrLldlYi5VSS5SYWRPRGF0YURhdGFTb3VyY2UuQmluZGVyLkZsYXQuTW9kZWwoYSk7CmIucGFyc2U9ZnVuY3Rpb24oYyl7cmV0dXJuIGM7Cn07CnJldHVybiBiOwp9LGdldF9hbGxvd0FjdGl2ZVJvd0N5Y2xlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuQ2xpZW50U2V0dGluZ3MuS2V5Ym9hcmROYXZpZ2F0aW9uU2V0dGluZ3MuQWxsb3dBY3RpdmVSb3dDeWNsZTsKfSxzZXRfYWxsb3dBY3RpdmVSb3dDeWNsZTpmdW5jdGlvbihhKXt0aGlzLkNsaWVudFNldHRpbmdzLktleWJvYXJkTmF2aWdhdGlvblNldHRpbmdzLkFsbG93QWN0aXZlUm93Q3ljbGU9YTsKfSxnZXRfb2RhdGFDbGllbnRTZXR0aW5nczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vZGF0YUNsaWVudFNldHRpbmdzOwp9LHNldF9vZGF0YUNsaWVudFNldHRpbmdzOmZ1bmN0aW9uKGEpe3RoaXMuX29kYXRhQ2xpZW50U2V0dGluZ3M9YTsKfSxnZXRfaXNVc2luZ09EYXRhU291cmNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29kYXRhQ2xpZW50U2V0dGluZ3MhPW51bGw7Cn0sZ2V0X3NlbGVjdGVkQ2VsbHNJbmRleGVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NlbGVjdGVkQ2VsbHNJbmRleGVzOwp9LGdldF9zZWxlY3RlZEl0ZW1zSW50ZXJuYWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2VsZWN0ZWRJdGVtc0ludGVybmFsOwp9LHNldF9zZWxlY3RlZEl0ZW1zSW50ZXJuYWw6ZnVuY3Rpb24oYSl7aWYodGhpcy5fc2VsZWN0ZWRJdGVtc0ludGVybmFsIT1hKXt0aGlzLl9zZWxlY3RlZEl0ZW1zSW50ZXJuYWw9YTsKfX0sZ2V0X2V4cGFuZEl0ZW1zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V4cGFuZEl0ZW1zOwp9LHNldF9leHBhbmRJdGVtczpmdW5jdGlvbihhKXtpZih0aGlzLl9leHBhbmRJdGVtcyE9YSl7dGhpcy5fZXhwYW5kSXRlbXM9YTsKfX0sZ2V0X2hpZGVkQ29sdW1uczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9oaWRlZENvbHVtbnM7Cn0sc2V0X2hpZGVkQ29sdW1uczpmdW5jdGlvbihhKXtpZih0aGlzLl9oaWRlZENvbHVtbnMhPWEpe3RoaXMuX2hpZGVkQ29sdW1ucz1hOwp0aGlzLnVwZGF0ZUNsaWVudFN0YXRlKCk7Cn19LGdldF9zaG93ZWRDb2x1bW5zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Nob3dlZENvbHVtbnM7Cn0sc2V0X3Nob3dlZENvbHVtbnM6ZnVuY3Rpb24oYSl7aWYodGhpcy5fc2hvd2VkQ29sdW1ucyE9YSl7dGhpcy5fc2hvd2VkQ29sdW1ucz1hOwp0aGlzLnVwZGF0ZUNsaWVudFN0YXRlKCk7Cn19LGdldF9zZWxlY3RlZENlbGxzSW50ZXJuYWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2VsZWN0ZWRDZWxsc0ludGVybmFsOwp9LHNldF9zZWxlY3RlZENlbGxzSW50ZXJuYWw6ZnVuY3Rpb24oYSl7aWYodGhpcy5fc2VsZWN0ZWRDZWxsc0ludGVybmFsIT1hKXt0aGlzLl9zZWxlY3RlZENlbGxzSW50ZXJuYWw9YTsKfX0sZ2V0X3Vuc2VsZWN0YWJsZUl0ZW1zSW50ZXJuYWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdW5zZWxlY3RhYmxlSXRlbXNJbnRlcm5hbDsKfSxzZXRfdW5zZWxlY3RhYmxlSXRlbXNJbnRlcm5hbDpmdW5jdGlvbihhKXtpZih0aGlzLl91bnNlbGVjdGFibGVJdGVtc0ludGVybmFsIT1hKXt0aGlzLl91bnNlbGVjdGFibGVJdGVtc0ludGVybmFsPWE7Cn19LGdldF9hbGxvd0NlbGxTZWxlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5DbGllbnRTZXR0aW5ncy5TZWxlY3RpbmcuQ2VsbFNlbGVjdGlvbk1vZGU+VGVsZXJpay5XZWIuVUkuR3JpZENlbGxTZWxlY3Rpb25Nb2RlLk5vbmU7Cn0sZ2V0X2FsbG93TXV0bGlDZWxsU2VsZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuQ2xpZW50U2V0dGluZ3MuU2VsZWN0aW5nLkNlbGxTZWxlY3Rpb25Nb2RlPlRlbGVyaWsuV2ViLlVJLkdyaWRDZWxsU2VsZWN0aW9uTW9kZS5TaW5nbGVDZWxsOwp9LGdldF9hbGxvd0NvbHVtblNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLkNsaWVudFNldHRpbmdzLlNlbGVjdGluZy5DZWxsU2VsZWN0aW9uTW9kZT5UZWxlcmlrLldlYi5VSS5HcmlkQ2VsbFNlbGVjdGlvbk1vZGUuTXVsdGlDZWxsOwp9LGdldF9hbGxvd011bHRpQ29sdW1uU2VsZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuQ2xpZW50U2V0dGluZ3MuU2VsZWN0aW5nLkNlbGxTZWxlY3Rpb25Nb2RlPlRlbGVyaWsuV2ViLlVJLkdyaWRDZWxsU2VsZWN0aW9uTW9kZS5Db2x1bW47Cn0sZ2V0X2FsbG93TXVsdGlSb3dTZWxlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5BbGxvd011bHRpUm93U2VsZWN0aW9uOwp9LHNldF9hbGxvd011bHRpUm93U2VsZWN0aW9uOmZ1bmN0aW9uKGEpe2lmKHRoaXMuQWxsb3dNdWx0aVJvd1NlbGVjdGlvbiE9YSl7dGhpcy5BbGxvd011bHRpUm93U2VsZWN0aW9uPWE7Cn19LGdldF9tYXN0ZXJUYWJsZVZpZXc6ZnVuY3Rpb24oKXtyZXR1cm4gJGZpbmQodGhpcy5fbWFzdGVyQ2xpZW50SUQpOwp9LGdldF9tYXN0ZXJUYWJsZVZpZXdIZWFkZXI6ZnVuY3Rpb24oKXtyZXR1cm4gJGZpbmQodGhpcy5fbWFzdGVyQ2xpZW50SUQrIl9IZWFkZXIiKTsKfSxnZXRfbWFzdGVyVGFibGVWaWV3Rm9vdGVyOmZ1bmN0aW9uKCl7cmV0dXJuICRmaW5kKHRoaXMuX21hc3RlckNsaWVudElEKyJfRm9vdGVyIik7Cn0sZ2V0X3NlbGVjdGVkSXRlbXM6ZnVuY3Rpb24oKXt2YXIgYT1bXTsKZm9yKHZhciBiPTA7CmI8dGhpcy5fc2VsZWN0ZWRJdGVtc0ludGVybmFsLmxlbmd0aDsKYisrKXtBcnJheS5hZGQoYSwkZmluZCh0aGlzLl9zZWxlY3RlZEl0ZW1zSW50ZXJuYWxbYl0uaWQpKTsKfXJldHVybiBhOwp9LGdldF9lZGl0SW5kZXhlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lZGl0SW5kZXhlczsKfSxnZXRfZWRpdEl0ZW1zOmZ1bmN0aW9uKCl7dmFyIGE9W107CnZhciBkPXRoaXMuZ2V0X21hc3RlclRhYmxlVmlldygpOwpmdW5jdGlvbiBiKGssaSl7dmFyIGo9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoay5nZXRfaWQoKSsiX18iK2kpOwppZihqKXtrLmdldF9kYXRhSXRlbXMoKTsKcmV0dXJuICRmaW5kKGouaWQpOwp9cmV0dXJuIG51bGw7Cn1mb3IodmFyIGc9MCxlPXRoaXMuX2VkaXRJbmRleGVzLmxlbmd0aDsKZzxlOwpnKyspe3ZhciBoPXRoaXMuX2VkaXRJbmRleGVzW2ddOwppZihoLmluZGV4T2YoIjoiKT4tMSl7Zm9yKHZhciBmPTA7CmY8dGhpcy5fZGV0YWlsVGFibGVzLmxlbmd0aDsKZisrKXt2YXIgYz1iKHRoaXMuX2RldGFpbFRhYmxlc1tmXSxoKTsKaWYoYyl7YVthLmxlbmd0aF09YzsKYnJlYWs7Cn19fWVsc2V7dmFyIGM9YihkLGgpOwppZihjKXthW2EubGVuZ3RoXT1jOwp9fX1yZXR1cm4gYTsKfSxjbGVhclNlbGVjdGVkSXRlbXM6ZnVuY3Rpb24oKXtpZih0aGlzLl9zZWxlY3RlZEl0ZW1zSW50ZXJuYWwubGVuZ3RoPjApe3ZhciBhPXRoaXMuX3NlbGVjdGVkSXRlbXNJbnRlcm5hbC5sZW5ndGgtMTsKd2hpbGUoYT49MCl7dmFyIGI9JGZpbmQodGhpcy5fc2VsZWN0ZWRJdGVtc0ludGVybmFsW2FdLmlkKTsKaWYoYil7Yi5zZXRfc2VsZWN0ZWQoZmFsc2UpOwp9ZWxzZXt0aGlzLl9zZWxlY3Rpb24uX3NlbGVjdFJvd0ludGVybmFsKCRnZXQodGhpcy5fc2VsZWN0ZWRJdGVtc0ludGVybmFsW2FdLmlkKSx7Y3RybEtleTpmYWxzZX0sdHJ1ZSx0cnVlLHRydWUpOwp9YS0tOwp9fX0sY2xlYXJTZWxlY3RlZENlbGxzOmZ1bmN0aW9uKCl7aWYodGhpcy5fY2VsbFNlbGVjdGlvbiE9bnVsbCl7dGhpcy5fY2VsbFNlbGVjdGlvbi5fY2xlYXIoKTsKfX0sX2luaXRpYWxpemVUYWJsZVZpZXdzOmZ1bmN0aW9uKCl7dmFyIGY9ZXZhbCh0aGlzLl9ncmlkVGFibGVWaWV3c0RhdGEpOwpmb3IodmFyIGU9MDsKZTxmLmxlbmd0aDsKZSsrKXt2YXIgYz1mW2VdOwppZighYy5DbGllbnRJRCl7Y29udGludWU7Cn1pZigkZmluZChjLkNsaWVudElEKSE9bnVsbCl7Y29udGludWU7Cn1pZigkZ2V0KGMuQ2xpZW50SUQpPT1udWxsKXtjb250aW51ZTsKfWlmKHRoaXMuX21hc3RlckNsaWVudElEIT1jLkNsaWVudElEKXt0aGlzLnJhaXNlX3RhYmxlQ3JlYXRpbmcobmV3IFN5cy5FdmVudEFyZ3MoKSk7Cn12YXIgYT0kY3JlYXRlKFRlbGVyaWsuV2ViLlVJLkdyaWRUYWJsZVZpZXcse19vd25lcjp0aGlzLF9kYXRhOmN9LG51bGwsbnVsbCwkZ2V0KGMuQ2xpZW50SUQpKTsKaWYodGhpcy5fbWFzdGVyQ2xpZW50SUQhPWMuQ2xpZW50SUQpe3ZhciBkPW5ldyBTeXMuRXZlbnRBcmdzKCk7CmQuZ2V0X3RhYmxlVmlldz1mdW5jdGlvbigpe3JldHVybiBhOwp9OwpBcnJheS5hZGQodGhpcy5fZGV0YWlsVGFibGVzLGEpOwp0aGlzLnJhaXNlX3RhYmxlQ3JlYXRlZChkKTsKfWlmKHRoaXMuX21hc3RlckNsaWVudElEPT1jLkNsaWVudElEKXt0aGlzLnJhaXNlX21hc3RlclRhYmxlVmlld0NyZWF0aW5nKG5ldyBTeXMuRXZlbnRBcmdzKCkpOwp0aGlzLk1hc3RlclRhYmxlVmlldz1hOwp0aGlzLnJhaXNlX21hc3RlclRhYmxlVmlld0NyZWF0ZWQobmV3IFN5cy5FdmVudEFyZ3MoKSk7CmlmKCRnZXQoYy5DbGllbnRJRCsiX0hlYWRlciIpKXtpZigkdGVsZXJpay5pc0lFJiZkb2N1bWVudC5kb2N1bWVudE1vZGUmJmRvY3VtZW50LmRvY3VtZW50TW9kZT09Nyl7aWYodGhpcy5NYXN0ZXJUYWJsZVZpZXcuZ2V0X2VsZW1lbnQoKS5zdHlsZS53aWR0aD09IjEwMCUiKXt0aGlzLk1hc3RlclRhYmxlVmlldy5nZXRfZWxlbWVudCgpLnN0eWxlLndpZHRoPSJhdXRvIjsKfX10aGlzLk1hc3RlclRhYmxlVmlld0hlYWRlcj0kY3JlYXRlKFRlbGVyaWsuV2ViLlVJLkdyaWRUYWJsZVZpZXcse19vd25lcjp0aGlzLF9kYXRhOmN9LG51bGwsbnVsbCwkZ2V0KGMuQ2xpZW50SUQrIl9IZWFkZXIiKSk7CmlmKCR0ZWxlcmlrLmlzSUUmJmRvY3VtZW50LmRvY3VtZW50TW9kZSYmZG9jdW1lbnQuZG9jdW1lbnRNb2RlPT03JiZ0aGlzLk1hc3RlclRhYmxlVmlld0hlYWRlciE9bnVsbCl7dmFyIGI9dGhpcy5NYXN0ZXJUYWJsZVZpZXdIZWFkZXIuZ2V0X2VsZW1lbnQoKS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiQ09MIikubGVuZ3RoOwppZihiPjApeyR0ZWxlcmlrLmdldENoaWxkcmVuQnlUYWdOYW1lKHRoaXMuTWFzdGVyVGFibGVWaWV3SGVhZGVyLmdldF9lbGVtZW50KCksInRib2R5IilbMF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoIlREIilbMF0uY29sU3Bhbj1iOwp9fXRoaXMuTWFzdGVyVGFibGVWaWV3Ll9jb2x1bW5zSW50ZXJuYWw9dGhpcy5NYXN0ZXJUYWJsZVZpZXdIZWFkZXIuX2NvbHVtbnNJbnRlcm5hbDsKfWlmKCRnZXQoYy5DbGllbnRJRCsiX0Zvb3RlciIpKXt0aGlzLk1hc3RlclRhYmxlVmlld0Zvb3Rlcj0kY3JlYXRlKFRlbGVyaWsuV2ViLlVJLkdyaWRUYWJsZVZpZXcse19vd25lcjp0aGlzLF9kYXRhOmN9LG51bGwsbnVsbCwkZ2V0KGMuQ2xpZW50SUQrIl9Gb290ZXIiKSk7Cn19fX0sZ2V0X2RldGFpbFRhYmxlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZXRhaWxUYWJsZXM7Cn0sZ2V0X2VuYWJsZUFyaWFTdXBwb3J0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuYWJsZUFyaWFTdXBwb3J0Owp9LF9pbml0aWFsaXplQXJpYVN1cHBvcnQ6ZnVuY3Rpb24oKXt2YXIgaz10aGlzLmdldF9lbGVtZW50KCk7Cmsuc2V0QXR0cmlidXRlKCJhcmlhLXJlYWRvbmx5IiwidHJ1ZSIpOwppZih0aGlzLl9kZXRhaWxUYWJsZXMubGVuZ3RoKXtrLnNldEF0dHJpYnV0ZSgicm9sZSIsInRyZWVncmlkIik7Cn1lbHNle2suc2V0QXR0cmlidXRlKCJyb2xlIiwiZ3JpZCIpOwp9dmFyIGM9ZnVuY3Rpb24obil7bi5zZXRBdHRyaWJ1dGUoInJvbGUiLCJjb2x1bW5oZWFkZXIiKTsKaWYoIW4ucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoInJvbGUiKSl7bi5wYXJlbnROb2RlLnNldEF0dHJpYnV0ZSgicm9sZSIsInJvdyIpOwp9dmFyIGk9bi5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYSIpWzBdOwppZihpKXt2YXIgbz1uLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJpbnB1dCIpWzBdOwppZihvKXtpZihvLmNsYXNzTmFtZS5pbmRleE9mKCJyZ1NvcnRBc2MiKT4tMSl7bi5zZXRBdHRyaWJ1dGUoImFyaWEtc29ydCIsImFzY2VuZGluZyIpOwp9ZWxzZXtpZihvLmNsYXNzTmFtZS5pbmRleE9mKCJyZ1NvcnREZXNjIik+LTEpe24uc2V0QXR0cmlidXRlKCJhcmlhLXNvcnQiLCJkZXNjZW5kaW5nIik7Cn19fWVsc2V7bi5zZXRBdHRyaWJ1dGUoImFyaWEtc29ydCIsIm5vbmUiKTsKfX19OwppZihrLnF1ZXJ5U2VsZWN0b3JBbGwpe3ZhciBmPWsucXVlcnlTZWxlY3RvckFsbCgidGgucmdIZWFkZXIiKTsKZm9yKHZhciBqPTAsZT1mLmxlbmd0aDsKajxlOwpqKyspe2MoZltqXSk7Cn19ZWxzZXt2YXIgZj1rLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0aCIpOwpmb3IodmFyIGo9MCxlPWYubGVuZ3RoOwpqPGU7CmorKyl7dmFyIGE9ZltqXTsKaWYoYS5jbGFzc05hbWUuaW5kZXhPZigicmdIZWFkZXIiKT4tMSl7YyhhKTsKfX19dmFyIGw9ay5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGQiKTsKZm9yKHZhciBqPTAsZT1sLmxlbmd0aDsKajxlOwpqKyspe3ZhciBoPWxbal07CnZhciBtPWgucGFyZW50Tm9kZTsKdmFyIGQ9bS5jbGFzc05hbWU7CmlmKGguY2xhc3NOYW1lLmluZGV4T2YoInJnRXhwYW5kQ29sIik+LTF8fGguY2xhc3NOYW1lLmluZGV4T2YoInJnR3JvdXBDb2wiKT4tMSl7aC5zZXRBdHRyaWJ1dGUoInJvbGUiLCJwcmVzZW50YXRpb24iKTsKaWYoZC5pbmRleE9mKCJyZ0dyb3VwSGVhZGVyIik+LTF8fG0uaWQpe3ZhciBiPWguZ2V0RWxlbWVudHNCeVRhZ05hbWUoImlucHV0IilbMF07CmlmKGIpe2lmKGIuY2xhc3NOYW1lLmluZGV4T2YoInJnQ29sbGFwc2UiKT4tMSl7bS5zZXRBdHRyaWJ1dGUoImFyaWEtZXhwYW5kZWQiLCJ0cnVlIik7CmIuc2V0QXR0cmlidXRlKCJhcmlhLWV4cGFuZGVkIiwidHJ1ZSIpOwp9ZWxzZXtpZihiLmNsYXNzTmFtZS5pbmRleE9mKCJyZ0V4cGFuZCIpPi0xKXttLnNldEF0dHJpYnV0ZSgiYXJpYS1leHBhbmRlZCIsImZhbHNlIik7CmIuc2V0QXR0cmlidXRlKCJhcmlhLWV4cGFuZGVkIiwiZmFsc2UiKTsKfX19aWYoZC5pbmRleE9mKCJyZ0dyb3VwSGVhZGVyIik+LTEmJiFtLmdldEF0dHJpYnV0ZSgicm9sZSIpKXttLnNldEF0dHJpYnV0ZSgicm9sZSIsInJvd2dyb3VwIik7Cn19fWVsc2V7aWYoZC5pbmRleE9mKCJyZ1JvdyIpPi0xfHxkLmluZGV4T2YoInJnQWx0Um93Iik+LTF8fGQuaW5kZXhPZigicmdGb290ZXIiKT4tMSl7aC5zZXRBdHRyaWJ1dGUoInJvbGUiLCJncmlkY2VsbCIpOwppZighbS5nZXRBdHRyaWJ1dGUoInJvbGUiKSl7bS5zZXRBdHRyaWJ1dGUoInJvbGUiLCJyb3ciKTsKaWYoZC5pbmRleE9mKCJyZ1NlbGVjdGVkUm93Iik+LTEpe20uc2V0QXR0cmlidXRlKCJhcmlhLXNlbGVjdGVkIiwidHJ1ZSIpOwptLnRhYkluZGV4PTE7Cn19fWVsc2V7aWYoaC5jbGFzc05hbWUuaW5kZXhPZigicmdDb21tYW5kQ2VsbCIpPi0xJiYhbS5nZXRBdHRyaWJ1dGUoInJvbGUiKSl7aC5zZXRBdHRyaWJ1dGUoInJvbGUiLCJwcmVzZW50YXRpb24iKTsKbS5zZXRBdHRyaWJ1dGUoInJvbGUiLCJwcmVzZW50YXRpb24iKTsKfWVsc2V7aWYobS5jbGFzc05hbWUuaW5kZXhPZigicmdQYWdlciIpPi0xJiYhbS5nZXRBdHRyaWJ1dGUoInJvbGUiKSl7bS5zZXRBdHRyaWJ1dGUoInJvbGUiLCJwcmVzZW50YXRpb24iKTsKfWVsc2V7aWYobS5jbGFzc05hbWUuaW5kZXhPZigicmdFZGl0Um93Iik+LTEmJiFtLmdldEF0dHJpYnV0ZSgicm9sZSIpKXttLnNldEF0dHJpYnV0ZSgicm9sZSIsInJvdyIpOwptLnNldEF0dHJpYnV0ZSgiYXJpYS1yZWFkb25seSIsImZhbHNlIik7Cn1lbHNle2lmKCFtLmlkKXt2YXIgZz1tLnBhcmVudE5vZGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT09InRhYmxlIj9tLnBhcmVudE5vZGU6bS5wYXJlbnROb2RlLnBhcmVudE5vZGU7CmlmKGcmJmcuY2xhc3NOYW1lLmluZGV4T2YoInJnTWFzdGVyVGFibGUiKT4tMXx8Zy5jbGFzc05hbWUuaW5kZXhPZigicmdEZXRhaWxUYWJsZSIpPi0xKXtoLnNldEF0dHJpYnV0ZSgicm9sZSIsInByZXNlbnRhdGlvbiIpOwppZighbS5nZXRBdHRyaWJ1dGUoInJvbGUiKSl7bS5zZXRBdHRyaWJ1dGUoInJvbGUiLCJwcmVzZW50YXRpb24iKTsKfX19fX19fX19aWYodGhpcy5fZ3JvdXBQYW5lbCl7dGhpcy5fZ3JvdXBQYW5lbC5nZXRfZWxlbWVudCgpLnNldEF0dHJpYnV0ZSgicm9sZSIsInByZXNlbnRhdGlvbiIpOwp9fSxfYXBwbHlDZWxsU3BhY2luZ0lmUmVxdWlyZWQ6ZnVuY3Rpb24oKXtpZigkdGVsZXJpay5pc0lFJiZkb2N1bWVudC5kb2N1bWVudE1vZGUmJmRvY3VtZW50LmRvY3VtZW50TW9kZTw4KXt2YXIgYT10aGlzLmdldF9lbGVtZW50KCkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRhYmxlIik7CmZvcih2YXIgYz0wLGI9YS5sZW5ndGg7CmM8YjsKYysrKXt2YXIgZD1hW2NdOwppZihkLmNsYXNzTmFtZS5pbmRleE9mKCJyZ01hc3RlclRhYmxlIik+LTF8fGQuY2xhc3NOYW1lLmluZGV4T2YoInJnRGV0YWlsVGFibGUiKT4tMXx8ZC5jbGFzc05hbWUuaW5kZXhPZigicmdHcm91cFBhbmVsIik+LTF8fHBhcnNlSW50KGQuc3R5bGUuYm9yZGVyU3BhY2luZyk9PT0wKXtpZihkLmdldEF0dHJpYnV0ZSgiY2VsbFNwYWNpbmciKT09IiIpe2Quc2V0QXR0cmlidXRlKCJjZWxsU3BhY2luZyIsIjAiKTsKZC5jZWxsU3BhY2luZz0wOwp9fX19fSxfaW5pdGlhbGl6ZUV2ZW50czpmdW5jdGlvbihlKXtpZihlKXt2YXIgYj10aGlzOwpmb3IodmFyIGQ9MCxhPWUubGVuZ3RoOwpkPGE7CmQrKyl7dmFyIGM9ZVtkXTsKdGhpc1siYWRkXyIrY109ZnVuY3Rpb24oZil7cmV0dXJuIGZ1bmN0aW9uKGcpe3RoaXMuZ2V0X2V2ZW50cygpLmFkZEhhbmRsZXIoZixnKTsKfTsKfShjKTsKdGhpc1sicmVtb3ZlXyIrY109ZnVuY3Rpb24oZil7cmV0dXJuIGZ1bmN0aW9uKGcpe3RoaXMuZ2V0X2V2ZW50cygpLnJlbW92ZUhhbmRsZXIoZixnKTsKfTsKfShjKTsKdGhpc1sicmFpc2VfIitjXT1mdW5jdGlvbihmKXtyZXR1cm4gZnVuY3Rpb24oZyl7dGhpcy5yYWlzZUV2ZW50KGYsZyk7Cn07Cn0oYyk7Cn19fSxfc2VsZWN0QWxsUm93czpmdW5jdGlvbihnLGssail7dmFyIGQ9KGouc3JjRWxlbWVudCk/ai5zcmNFbGVtZW50OmoudGFyZ2V0Owp2YXIgYz0kZmluZChnKTsKdmFyIGY9Yy5nZXRfZWxlbWVudCgpOwp2YXIgYj0oZC5jaGVja2VkKT90cnVlOmZhbHNlOwpmb3IodmFyIGg9MCxhPWYucm93cy5sZW5ndGg7Cmg8YTsKaCsrKXt2YXIgbD1mLnJvd3NbaF07CmlmKCFsLmlkfHxsLnN0eWxlLmRpc3BsYXk9PSJub25lIil7Y29udGludWU7Cn10aGlzLl9zZWxlY3Rpb24uX3NlbGVjdFJvd0ludGVybmFsKGwsaix0cnVlLGZhbHNlLGZhbHNlLGIpOwp9aWYoZi5yb3dzLmxlbmd0aD4wKXt0aGlzLnVwZGF0ZUNsaWVudFN0YXRlKCk7Cn19LF9zaG93RmlsdGVyTWVudTpmdW5jdGlvbihiLGMsZyl7dmFyIGs9JGZpbmQoYik7CnZhciBmPWsuZ2V0Q29sdW1uQnlVbmlxdWVOYW1lKGMpOwp2YXIgZD10aGlzLl9nZXRGaWx0ZXJNZW51KCk7CmlmKHRoaXMuX2ZpbHRlck1lbnUpe3RoaXMuX2ZpbHRlck1lbnUuaGlkZSgpOwp2YXIgaD10aGlzLl9maWx0ZXJNZW51Owp2YXIgYT1uZXcgU3lzLkNhbmNlbEV2ZW50QXJncygpOwphLmdldF9tZW51PWZ1bmN0aW9uKCl7cmV0dXJuIGg7Cn07CmEuZ2V0X3RhYmxlVmlldz1mdW5jdGlvbigpe3JldHVybiBrOwp9OwphLmdldF9jb2x1bW49ZnVuY3Rpb24oKXtyZXR1cm4gZjsKfTsKYS5nZXRfZG9tRXZlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gZzsKfTsKdGhpcy5yYWlzZV9maWx0ZXJNZW51U2hvd2luZyhhKTsKaWYoYS5nZXRfY2FuY2VsKCkpe3JldHVybjsKfXRoaXMuX2J1aWxkRmlsdGVyTWVudUl0ZW1MaXN0KHRoaXMuX2ZpbHRlck1lbnUsZi5fZGF0YS5GaWx0ZXJMaXN0T3B0aW9ucyxmLl9kYXRhLkRhdGFUeXBlTmFtZSxmLl9kYXRhLkN1cnJlbnRGaWx0ZXJGdW5jdGlvbixmKTsKdGhpcy5fb25GaWx0ZXJNZW51Q2xpY2tpbmc9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9maWx0ZXJNZW51Q2xpY2tpbmdIYW5kbGVyKTsKdGhpcy5fZmlsdGVyTWVudS5hZGRfaXRlbUNsaWNraW5nKHRoaXMuX29uRmlsdGVyTWVudUNsaWNraW5nKTsKdmFyIGk9VGVsZXJpay5XZWIuVUkuR3JpZC5HZXRDdXJyZW50RWxlbWVudChnKTsKaWYoaSl7JHRlbGVyaWsuYWRkQ3NzQ2xhc3NlcyhpLFsicmdGaWx0ZXJBY3RpdmUiXSk7Cn10aGlzLl9vbkZpbHRlck1lbnVIaWRkZW5EZWxlZ2F0ZT1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh7b3BlbmVyOmksY29udGV4dDp0aGlzfSx0aGlzLl9vbkZpbHRlck1lbnVIaWRkZW4pOwp0aGlzLl9maWx0ZXJNZW51LmFkZF9oaWRkZW4odGhpcy5fb25GaWx0ZXJNZW51SGlkZGVuRGVsZWdhdGUpOwppZigkdGVsZXJpay5pc1RvdWNoRGV2aWNlKXt2YXIgbD0kdGVsZXJpay5nZXRUb3VjaEV2ZW50TG9jYXRpb24oZykueDsKdmFyIGo9JHRlbGVyaWsuZ2V0VG91Y2hFdmVudExvY2F0aW9uKGcpLnk7CnRoaXMuX2ZpbHRlck1lbnUuc2hvd0F0KGwsaik7CiR0ZWxlcmlrLmNhbmNlbFJhd0V2ZW50KGcpOwp9ZWxzZXt0aGlzLl9maWx0ZXJNZW51LnNob3coZyk7Cn19fSxfb25GaWx0ZXJNZW51SGlkZGVuOmZ1bmN0aW9uKGEsYil7aWYodGhpcy5vcGVuZXIpeyR0ZWxlcmlrLnJlbW92ZUNzc0NsYXNzZXModGhpcy5vcGVuZXIsWyJyZ0ZpbHRlckFjdGl2ZSJdKTsKdGhpcy5vcGVuZXI9bnVsbDsKfWlmKHRoaXMuY29udGV4dCYmdGhpcy5jb250ZXh0Ll9maWx0ZXJNZW51KXtpZih0aGlzLmNvbnRleHQuX29uRmlsdGVyTWVudUNsaWNraW5nKXt0aGlzLmNvbnRleHQuX2ZpbHRlck1lbnUucmVtb3ZlX2l0ZW1DbGlja2luZyh0aGlzLmNvbnRleHQuX29uRmlsdGVyTWVudUNsaWNraW5nKTsKfWlmKHRoaXMuY29udGV4dC5fb25GaWx0ZXJNZW51SGlkZGVuRGVsZWdhdGUpe3RoaXMuY29udGV4dC5fZmlsdGVyTWVudS5yZW1vdmVfaGlkZGVuKHRoaXMuY29udGV4dC5fb25GaWx0ZXJNZW51SGlkZGVuRGVsZWdhdGUpOwp9dGhpcy5jb250ZXh0Ll9vbkZpbHRlck1lbnVIaWRkZW5EZWxlZ2F0ZT1udWxsOwp9fSxfZ2V0RmlsdGVyTWVudTpmdW5jdGlvbigpe2lmKFRlbGVyaWsuV2ViLlVJLlJhZENvbnRleHRNZW51JiYhdGhpcy5fZmlsdGVyTWVudSl7dGhpcy5fZmlsdGVyTWVudT0kZmluZCh0aGlzLkNsaWVudElEKyJfcmZsdE1lbnUiKTsKfXJldHVybiB0aGlzLl9maWx0ZXJNZW51Owp9LGdldF9oZWFkZXJNZW51OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldEhlYWRlckNvbnRleHRNZW51KCk7Cn0sX2dldEhlYWRlckNvbnRleHRNZW51OmZ1bmN0aW9uKCl7aWYoVGVsZXJpay5XZWIuVUkuUmFkQ29udGV4dE1lbnUmJiF0aGlzLl9oZWFkZXJDb250ZXh0TWVudSl7dGhpcy5faGVhZGVyQ29udGV4dE1lbnU9JGZpbmQodGhpcy5DbGllbnRJRCsiX3JnaGNNZW51Iik7Cn1yZXR1cm4gdGhpcy5faGVhZGVyQ29udGV4dE1lbnU7Cn0sX2ZpbHRlck1lbnVDbGlja2luZ0hhbmRsZXI6ZnVuY3Rpb24oZyxiKXt2YXIgZj1iLmdldF9pdGVtKCkuX2ZpbHRlck1lbnVfdGFibGVJRDsKdmFyIGU9JGZpbmQoZik7CmlmKCFlKXtyZXR1cm47Cn12YXIgaD1iLmdldF9pdGVtKCkuZ2V0X3ZhbHVlKCk7CnZhciBjPWIuZ2V0X2l0ZW0oKS5fZmlsdGVyTWVudV9jb2x1bW5fdW5pcXVlTmFtZTsKdmFyIGE9ZS5fZ2V0RmlsdGVyQ29udHJvbFZhbHVlKGMpOwppZihoPT0iTm9GaWx0ZXIiKXtlLl91cGRhdGVGaWx0ZXJDb250cm9sVmFsdWUoYSxjLGgpOwp9ZWxzZXtpZigoYT09bnVsbHx8YT09PSIiKSYmaCE9IklzRW1wdHkiJiZoIT0iTm90SXNFbXB0eSImJmghPSJJc051bGwiJiZoIT0iTm90SXNOdWxsIil7Zy5oaWRlKCk7CnJldHVybjsKfX1pZighZS5maWx0ZXIoYyxhLGgpKXt2YXIgZD10aGlzLmdldF9tYXN0ZXJUYWJsZVZpZXcoKTsKaWYoZCl7ZC5fX3Nob3VsZFBlcmZvcm1GaWx0ZXJpbmc9ZmFsc2U7Cn1iLnNldF9jYW5jZWwodHJ1ZSk7CnRoaXMuX2ZpbHRlck1lbnUucmVtb3ZlX2l0ZW1DbGlja2luZyh0aGlzLl9vbkZpbHRlck1lbnVDbGlja2luZyk7Cn1nLmhpZGUoKTsKfSxfYnVpbGRGaWx0ZXJNZW51SXRlbUxpc3Q6ZnVuY3Rpb24oZSxmLGQsYSxiKXt2YXIgZz1iLl9kYXRhLkNvbHVtblR5cGU7CnZhciBrPWIuX2RhdGEuRW5hYmxlUmFuZ2VGaWx0ZXJpbmc7CnZhciBqPW51bGw7CmZvcih2YXIgaD0wOwpoPGUuZ2V0X2l0ZW1zKCkuZ2V0X2NvdW50KCk7CmgrKyl7dmFyIGM9ZS5nZXRfaXRlbXMoKS5nZXRJdGVtKGgpOwpqPWMuZ2V0X3ZhbHVlKCk7CmMuX2ZpbHRlck1lbnVfY29sdW1uX3VuaXF1ZU5hbWU9Yi5nZXRfdW5pcXVlTmFtZSgpOwpjLl9maWx0ZXJNZW51X3RhYmxlSUQ9Yi5fb3duZXIuX2RhdGEuQ2xpZW50SUQ7CmlmKGQ9PSJTeXN0ZW0uQm9vbGVhbiIpe2lmKChqPT0iR3JlYXRlclRoYW4iKXx8KGo9PSJMZXNzVGhhbiIpfHwoaj09IkdyZWF0ZXJUaGFuT3JFcXVhbFRvIil8fChqPT0iTGVzc1RoYW5PckVxdWFsVG8iKXx8KGo9PSJCZXR3ZWVuIil8fChqPT0iTm90QmV0d2VlbiIpKXtjLnNldF92aXNpYmxlKGZhbHNlKTsKY29udGludWU7Cn19aWYoZCE9IlN5c3RlbS5TdHJpbmciKXtpZigoaj09IlN0YXJ0c1dpdGgiKXx8KGo9PSJFbmRzV2l0aCIpfHwoaj09IkNvbnRhaW5zIil8fChqPT0iRG9lc05vdENvbnRhaW4iKXx8KGo9PSJJc0VtcHR5Iil8fChqPT0iTm90SXNFbXB0eSIpKXtjLnNldF92aXNpYmxlKGZhbHNlKTsKY29udGludWU7Cn19aWYoZj09MCl7aWYoaj09IkN1c3RvbSIpe2Muc2V0X3Zpc2libGUoZmFsc2UpOwpjb250aW51ZTsKfX1pZihnPT0iR3JpZERhdGVUaW1lQ29sdW1uIiYmayYmKGo9PSJFcXVhbFRvInx8aj09IkdyZWF0ZXJUaGFuInx8aj09IkdyZWF0ZXJUaGFuT3JFcXVhbFRvInx8aj09Ikxlc3NUaGFuInx8aj09Ikxlc3NUaGFuT3JFcXVhbFRvInx8aj09Ik5vdEVxdWFsVG8iKSl7Yy5zZXRfdmlzaWJsZShmYWxzZSk7CmNvbnRpbnVlOwp9aWYoKChnPT0iR3JpZERhdGVUaW1lQ29sdW1uIiYmIWspfHxnPT0iR3JpZE1hc2tlZENvbHVtbiJ8fGc9PSJHcmlkTnVtZXJpY0NvbHVtbiJ8fGc9PSJHcmlkUmF0aW5nQ29sdW1uIikmJigoaj09IkJldHdlZW4iKXx8KGo9PSJOb3RCZXR3ZWVuIikpKXtjLnNldF92aXNpYmxlKGZhbHNlKTsKY29udGludWU7Cn1pZihqPT1iLl9kYXRhLkN1cnJlbnRGaWx0ZXJGdW5jdGlvbk5hbWUpe2MuX2ZvY3VzZWQ9dHJ1ZTsKYy5fdXBkYXRlTGlua0NsYXNzKCk7Cn1lbHNle2MuX2ZvY3VzZWQ9ZmFsc2U7CmMuX3VwZGF0ZUxpbmtDbGFzcygpOwp9Yy5zZXRfdmlzaWJsZSh0cnVlKTsKfX0sc2F2ZUNsaWVudFN0YXRlOmZ1bmN0aW9uKCl7dmFyIGI9e307CmIuc2VsZWN0ZWRJbmRleGVzPXRoaXMuX3NlbGVjdGVkSW5kZXhlczsKYi5zZWxlY3RlZENlbGxzSW5kZXhlcz10aGlzLl9zZWxlY3RlZENlbGxzSW5kZXhlczsKYi51bnNlbGVjdGFibGVJdGVtc0luZGV4ZXM9dGhpcy5fdW5zZWxlY3RhYmxlSXRlbXNJbmRleGVzOwpiLnJlb3JkZXJlZENvbHVtbnM9dGhpcy5fcmVvcmRlcmVkQ29sdW1uczsKYi5leHBhbmRlZEl0ZW1zPXRoaXMuX2V4cGFuZGVkSXRlbXM7CmIuZXhwYW5kZWRHcm91cEl0ZW1zPXRoaXMuX2V4cGFuZGVkR3JvdXBJdGVtczsKaWYodGhpcy5fZXhwYW5kZWRGaWx0ZXJJdGVtcyl7Yi5leHBhbmRlZEZpbHRlckl0ZW1zPXRoaXMuX2V4cGFuZGVkRmlsdGVySXRlbXM7Cn1iLmRlbGV0ZWRJdGVtcz10aGlzLl9kZWxldGVkSXRlbXM7CmlmKHRoaXMuX3Jlc2l6ZWRDb2x1bW5zIT0iIil7Yi5yZXNpemVkQ29sdW1ucz10aGlzLl9yZXNpemVkQ29sdW1uczsKfWlmKHRoaXMuX3Jlc2l6ZWRDb250cm9sIT0iIil7Yi5yZXNpemVkQ29udHJvbD10aGlzLl9yZXNpemVkQ29udHJvbDsKfWlmKHRoaXMuX3Jlc2l6ZWRJdGVtcyE9IiIpe2IucmVzaXplZEl0ZW1zPXRoaXMuX3Jlc2l6ZWRJdGVtczsKfWlmKHRoaXMuX2hpZGVkSXRlbXMhPSIiKXtiLmhpZGVkSXRlbXM9dGhpcy5faGlkZWRJdGVtczsKfWlmKHRoaXMuX3Nob3dlZEl0ZW1zIT0iIil7Yi5zaG93ZWRJdGVtcz10aGlzLl9zaG93ZWRJdGVtczsKfWlmKHRoaXMuX2hpZGVkQ29sdW1ucyl7Yi5oaWRlZENvbHVtbnM9dGhpcy5faGlkZWRDb2x1bW5zOwp9aWYodGhpcy5fc2hvd2VkQ29sdW1ucyl7Yi5zaG93ZWRDb2x1bW5zPXRoaXMuX3Nob3dlZENvbHVtbnM7Cn1pZih0aGlzLl9hY3RpdmVSb3cpe2IuYWN0aXZlUm93SW5kZXg9dGhpcy5fYWN0aXZlUm93LmlkOwp9aWYodGhpcy5fZ3JpZERhdGFEaXYpe2lmKCRnZXQodGhpcy5DbGllbnRJRCsiX0Zyb3plbiIpKXtiLnNjcm9sbGVkUG9zaXRpb249dGhpcy5fZ3JpZERhdGFEaXYuc2Nyb2xsVG9wKyIsIiskZ2V0KHRoaXMuQ2xpZW50SUQrIl9Gcm96ZW4iKS5zY3JvbGxMZWZ0Owp9ZWxzZXtiLnNjcm9sbGVkUG9zaXRpb249dGhpcy5fZ3JpZERhdGFEaXYuc2Nyb2xsVG9wKyIsIit0aGlzLl9ncmlkRGF0YURpdi5zY3JvbGxMZWZ0Owp9fWlmKHRoaXMuX3BvcFVwTG9jYXRpb25zKXtiLnBvcFVwTG9jYXRpb25zPXRoaXMuX3BvcFVwTG9jYXRpb25zOwp9aWYodGhpcy5fZHJhZ2dlZEl0ZW1zSW5kZXhlcyl7Yi5kcmFnZ2VkSXRlbXNJbmRleGVzPXRoaXMuX2RyYWdnZWRJdGVtc0luZGV4ZXM7Cn1pZih0aGlzLl9zaG91bGRGb2N1c09uUGFnZSl7Yi5zaG91bGRGb2N1c09uUGFnZT10aGlzLl9zaG91bGRGb2N1c09uUGFnZTsKfXZhciBhPXRoaXMuX3NlbGVjdGlvbjsKaWYoYSYmYS5fbGFzdFNlbGVjdGVkSXRlbUluZGV4KXtiLmxhc3RTZWxlY3RlZEl0ZW1JbmRleD1hLl9sYXN0U2VsZWN0ZWRJdGVtSW5kZXg7Cn1yZXR1cm4gU3lzLlNlcmlhbGl6YXRpb24uSmF2YVNjcmlwdFNlcmlhbGl6ZXIuc2VyaWFsaXplKGIpOwp9LF9hdHRhY2hEb21FdmVudHM6ZnVuY3Rpb24oKXt0aGlzLl9vbktleURvd25EZWxlZ2F0ZT1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX29uS2V5RG93bkhhbmRsZXIpOwp0aGlzLl9vbktleVByZXNzRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vbktleVByZXNzSGFuZGxlcik7CnRoaXMuX29uTW91c2VNb3ZlRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vbk1vdXNlTW92ZUhhbmRsZXIpOwokYWRkSGFuZGxlcih0aGlzLmdldF9lbGVtZW50KCksImtleWRvd24iLHRoaXMuX29uS2V5RG93bkRlbGVnYXRlKTsKJGFkZEhhbmRsZXIodGhpcy5nZXRfZWxlbWVudCgpLCJrZXlwcmVzcyIsdGhpcy5fb25LZXlQcmVzc0RlbGVnYXRlKTsKJGFkZEhhbmRsZXIodGhpcy5nZXRfZWxlbWVudCgpLCJtb3VzZW1vdmUiLHRoaXMuX29uTW91c2VNb3ZlRGVsZWdhdGUpOwp9LF9vbk1vdXNlTW92ZUhhbmRsZXI6ZnVuY3Rpb24oYSl7dmFyIGI9VGVsZXJpay5XZWIuVUkuR3JpZC5HZXRDdXJyZW50RWxlbWVudChhKTsKaWYodGhpcy5DbGllbnRTZXR0aW5ncyYmdGhpcy5DbGllbnRTZXR0aW5ncy5SZXNpemluZy5BbGxvd1Jvd1Jlc2l6ZSl7aWYodGhpcy5fZ3JpZEl0ZW1SZXNpemVyPT1udWxsKXt0aGlzLl9ncmlkSXRlbVJlc2l6ZXI9bmV3IFRlbGVyaWsuV2ViLlVJLkdyaWRJdGVtUmVzaXplcih0aGlzKTsKfXRoaXMuX2dyaWRJdGVtUmVzaXplci5fZGV0ZWN0UmVzaXplQ3Vyc29yc09uSXRlbXMoYSxiKTsKdGhpcy5fZ3JpZEl0ZW1SZXNpemVyLl9tb3ZlSXRlbVJlc2l6ZXIoYSk7Cn19LF9vbktleURvd25IYW5kbGVyOmZ1bmN0aW9uKGIpe3ZhciBjPWIua2V5Q29kZXx8Yi5jaGFyQ29kZTsKaWYodGhpcy5faXNTaG9ydEN1dEtleVByZXNzZWQoYikpe3RoaXMuX3JhaXNlS2V5UHJlc3NJbnRlcm5hbChiKTsKfXZhciBhPWM9PXRoaXMuQ2xpZW50U2V0dGluZ3MuS2V5Ym9hcmROYXZpZ2F0aW9uU2V0dGluZ3MuRGVsZXRlQWN0aXZlUm93OwppZihhKXt0aGlzLl9yYWlzZUtleVByZXNzSW50ZXJuYWwoYik7Cn12YXIgZj0oYz49MzcmJmM8PTQwKTsKdmFyIGQ9KGM9PTMzfHxjPT0zNCk7CmlmKCgoU3lzLkJyb3dzZXIuYWdlbnQ9PVN5cy5Ccm93c2VyLkludGVybmV0RXhwbG9yZXJ8fCR0ZWxlcmlrLmlzQ2hyb21lfHwkdGVsZXJpay5pc1NhZmFyaSkmJihmfHxkKSl8fCgoJHRlbGVyaWsuaXNDaHJvbWV8fCR0ZWxlcmlrLmlzU2FmYXJpKSYmYz09dGhpcy5DbGllbnRTZXR0aW5ncy5LZXlib2FyZE5hdmlnYXRpb25TZXR0aW5ncy5FeGl0RWRpdEluc2VydE1vZGVLZXkpKXt0aGlzLl9yYWlzZUtleVByZXNzSW50ZXJuYWwoYik7Cn19LF9vbktleVByZXNzSGFuZGxlcjpmdW5jdGlvbihhKXt0aGlzLl9yYWlzZUtleVByZXNzSW50ZXJuYWwoYSk7Cn0sX3JhaXNlS2V5UHJlc3NJbnRlcm5hbDpmdW5jdGlvbihhKXt2YXIgYj1uZXcgVGVsZXJpay5XZWIuVUkuR3JpZEtleVByZXNzRXZlbnRBcmdzKGEpOwp0aGlzLnJhaXNlX2tleVByZXNzKGIpOwppZihiLmdldF9jYW5jZWwoKSl7cmV0dXJuOwp9dGhpcy5faGFuZGxlR3JpZEtleWJvYXJkQWN0aW9uKGEpOwp9LF92YWxpZGF0ZUVkaXRJbnNlcnRGb3JtOmZ1bmN0aW9uKGEpe2lmKHRoaXMuVmFsaWRhdGlvblNldHRpbmdzLkVuYWJsZVZhbGlkYXRpb24pe3ZhciBkPXRoaXMuVmFsaWRhdGlvblNldHRpbmdzLkNvbW1hbmRzVG9WYWxpZGF0ZTsKaWYoZC50b1N0cmluZygpLmluZGV4T2YoYSk+LTEpe3ZhciBjPXRoaXMuX3ZhbGlkYXRpb25Hcm91cDsKaWYodHlwZW9mKFBhZ2VfQ2xpZW50VmFsaWRhdGUpPT0iZnVuY3Rpb24iKXt2YXIgYj1QYWdlX0NsaWVudFZhbGlkYXRlKGMpOwppZihiIT10cnVlKXtyZXR1cm4gZmFsc2U7Cn19fX1yZXR1cm4gdHJ1ZTsKfSxfZ2V0VGFibGVWaWV3QnlDb250cm9sSW50b0l0OmZ1bmN0aW9uKGcpe3ZhciBlPWcuaWQuc3BsaXQoIl8iKTsKdmFyIGg9MDsKZm9yKHZhciBmPTA7CmY8ZS5sZW5ndGg7CmYrKyl7aWYoZVtmXS5pbmRleE9mKCJEZXRhaWwiKT4tMSl7aD1mOwp9fXZhciBkPSIiOwp2YXIgYz1uZXcgQXJyYXkoKTsKaWYoaD4wKXtmb3IodmFyIGY9MDsKZjxoKzE7CmYrKyl7Yy5wdXNoKGVbZl0pOwp9ZD1jLmpvaW4oIl8iKTsKfWlmKCFkKXt2YXIgYj1UZWxlcmlrLldlYi5VSS5HcmlkLkdldEZpcnN0UGFyZW50QnlUYWdOYW1lKGcsInRhYmxlIik7CndoaWxlKGImJmIuaWQuaW5kZXhPZih0aGlzLkNsaWVudElEKT09LTEpe2I9VGVsZXJpay5XZWIuVUkuR3JpZC5HZXRGaXJzdFBhcmVudEJ5VGFnTmFtZShiLnBhcmVudE5vZGUsInRhYmxlIik7Cn1pZihiKXtkPWIuaWQ7Cn19dmFyIGE9JGZpbmQoZCk7CmlmKCFhKXthPXRoaXMuZ2V0X21hc3RlclRhYmxlVmlldygpOwp9cmV0dXJuIGE7Cn0sX2NhbmNlbERlZmF1bHRBY3Rpb246ZnVuY3Rpb24oYSl7aWYoYS5wcmV2ZW50RGVmYXVsdCl7YS5wcmV2ZW50RGVmYXVsdCgpOwp9YS5yZXR1cm5WYWx1ZT1mYWxzZTsKaWYoYS5zdG9wUHJvcGFnYXRpb24pe2Euc3RvcFByb3BhZ2F0aW9uKCk7CmEuY2FuY2VsQnViYmxlPXRydWU7Cn19LF9oYW5kbGVHcmlkS2V5Ym9hcmRBY3Rpb246ZnVuY3Rpb24oYil7dmFyIHA9Yi5rZXlDb2RlfHxiLmNoYXJDb2RlOwppZih0aGlzLkNsaWVudFNldHRpbmdzJiZ0aGlzLkNsaWVudFNldHRpbmdzLkFsbG93S2V5Ym9hcmROYXZpZ2F0aW9uJiZ0aGlzLkNsaWVudFNldHRpbmdzLlNlbGVjdGluZy5DZWxsU2VsZWN0aW9uTW9kZT09VGVsZXJpay5XZWIuVUkuR3JpZENlbGxTZWxlY3Rpb25Nb2RlLk5vbmUpe3ZhciBmPXRoaXMuX2FsbG93U3VibWl0T25FbnRlcjsKdmFyIGs9dGhpcy5fY2FuSGFuZGxlS2V5Ym9hcmRBY3Rpb24oYik7CmlmKCFrJiYhZil7cmV0dXJuOwp9ZWxzZXtpZigoZikmJihwPT0xMykpe3ZhciBqPVRlbGVyaWsuV2ViLlVJLkdyaWQuR2V0Q3VycmVudEVsZW1lbnQoYik7CmlmKGoudHlwZSYmai50eXBlLnRvTG93ZXJDYXNlKCk9PSJ0ZXh0YXJlYSIpe3JldHVybjsKfXZhciBkPWZhbHNlOwpmb3IodmFyIG89MDsKbzx0aGlzLl9zdWJtaXRDb250cm9scy5sZW5ndGg7Cm8rKyl7aWYoKGoudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT10aGlzLl9zdWJtaXRDb250cm9sc1tvXS5OYW1lKSYmKGoudHlwZS50b0xvd2VyQ2FzZSgpPT10aGlzLl9zdWJtaXRDb250cm9sc1tvXS5UeXBlKSl7ZD10cnVlOwp9fWlmKGoudHlwZSYmIWQmJmoudHlwZS50b0xvd2VyQ2FzZSgpPT0iY2hlY2tib3giKXt0aGlzLl9jYW5jZWxEZWZhdWx0QWN0aW9uKGIpOwpyZXR1cm47Cn1pZighZCYmKHRoaXMuX2VkaXRJbmRleGVzLmxlbmd0aD4wKSl7cmV0dXJuOwp9dmFyIHE9dGhpcy5fZ2V0VGFibGVWaWV3QnlDb250cm9sSW50b0l0KGopOwppZihkJiZxLmdldF9pc0l0ZW1JbnNlcnRlZCgpKXtpZih0aGlzLl92YWxpZGF0ZUVkaXRJbnNlcnRGb3JtKCJQZWZyb3JtSW5zZXJ0Iikpe3EuaW5zZXJ0SXRlbSgpOwp0aGlzLl9jYW5jZWxEZWZhdWx0QWN0aW9uKGIpOwpyZXR1cm47Cn19fX12YXIgbj0ocD09Mzh8fHA9PTQwKTsKdmFyIGE9dGhpcy5fc2hvdWxkU2VsZWN0T25TcGFjZShiLHApOwp2YXIgZz10aGlzLkNsaWVudFNldHRpbmdzLktleWJvYXJkTmF2aWdhdGlvblNldHRpbmdzLkVuYWJsZUtleWJvYXJkU2hvcnRjdXRzJiYocD09MTMpOwp2YXIgaD0ocD09dGhpcy5DbGllbnRTZXR0aW5ncy5LZXlib2FyZE5hdmlnYXRpb25TZXR0aW5ncy5FeHBhbmREZXRhaWxUYWJsZUtleXx8cD09dGhpcy5DbGllbnRTZXR0aW5ncy5LZXlib2FyZE5hdmlnYXRpb25TZXR0aW5ncy5Db2xsYXBzZURldGFpbFRhYmxlS2V5KTsKdmFyIG09KHA9PTMzfHxwPT0zNCkmJms7CnZhciBsPXRoaXMuQ2xpZW50U2V0dGluZ3MuS2V5Ym9hcmROYXZpZ2F0aW9uU2V0dGluZ3MuRW5hYmxlS2V5Ym9hcmRTaG9ydGN1dHMmJihwPT10aGlzLkNsaWVudFNldHRpbmdzLktleWJvYXJkTmF2aWdhdGlvblNldHRpbmdzLkV4aXRFZGl0SW5zZXJ0TW9kZUtleXx8cD09dGhpcy5DbGllbnRTZXR0aW5ncy5LZXlib2FyZE5hdmlnYXRpb25TZXR0aW5ncy5VcGRhdGVJbnNlcnRJdGVtS2V5KTsKdmFyIGM9dGhpcy5DbGllbnRTZXR0aW5ncy5LZXlib2FyZE5hdmlnYXRpb25TZXR0aW5ncy5FbmFibGVLZXlib2FyZFNob3J0Y3V0cyYmKHA9PXRoaXMuQ2xpZW50U2V0dGluZ3MuS2V5Ym9hcmROYXZpZ2F0aW9uU2V0dGluZ3MuRGVsZXRlQWN0aXZlUm93KTsKaWYobil7dGhpcy5faGFuZGxlQWN0aXZlUm93TmF2aWdhdGlvbihiKTsKfWVsc2V7aWYoaCl7aWYodGhpcy5nZXRfaWQoKT09PWIudGFyZ2V0LmlkKXt0aGlzLl9oYW5kbGVBY3RpdmVSb3dFeHBhbmRDb2xsYXBzZShiKTsKfX1lbHNle2lmKGEpe3RoaXMuX2hhbmRsZUFjdGl2ZVJvd1NlbGVjdGlvbihiKTsKfWVsc2V7aWYobCl7dGhpcy5faGFuZGxlRXhpdEVkaXRNb2RlT3JVcGRhdGVJdGVtKGIscCk7CmlmKCh0eXBlb2YoYi5yYXdFdmVudC5yZXR1cm5WYWx1ZSk9PSJ1bmRlZmluZWQifHwodHlwZW9mKGIucmF3RXZlbnQucmV0dXJuVmFsdWUpPT0iYm9vbGVhbiImJmIucmF3RXZlbnQucmV0dXJuVmFsdWUpKSYmcD09dGhpcy5DbGllbnRTZXR0aW5ncy5LZXlib2FyZE5hdmlnYXRpb25TZXR0aW5ncy5VcGRhdGVJbnNlcnRJdGVtS2V5KXt0aGlzLl9oYW5kbGVBY3RpdmVSb3dFZGl0KGIpOwp0aGlzLl9jYW5jZWxEZWZhdWx0QWN0aW9uKGIpOwp9fWVsc2V7aWYoYyl7dGhpcy5faGFuZGxlRGVsZXRlQWN0aXZlUm93KCk7Cn1lbHNle2lmKG0pe3RoaXMuX2hhbmRsZVBhZ2luZyhiKTsKfWVsc2V7aWYoYi5jdHJsS2V5KXt0aGlzLl9oYW5kbGVTaG9ydEN1dEtleShiKTsKfX19fX19fX19LF9zaG91bGRTZWxlY3RPblNwYWNlOmZ1bmN0aW9uKGIsYyl7dmFyIGE9Yi50YXJnZXQudGFnTmFtZS50b1VwcGVyQ2FzZSgpOwp2YXIgZD10aGlzLkNsaWVudFNldHRpbmdzLlNlbGVjdGluZzsKaWYoYz09MzImJmQmJmQuQWxsb3dSb3dTZWxlY3QmJmEhPSJJTlBVVCImJmEhPSJURVhUQVJFQSIpe3JldHVybiB0cnVlOwp9cmV0dXJuIGZhbHNlOwp9LF9jYW5IYW5kbGVLZXlib2FyZEFjdGlvbjpmdW5jdGlvbihhKXt2YXIgYz1hLmtleUNvZGV8fGEuY2hhckNvZGU7CmlmKChjPT0zMnx8Yz09MTN8fGM9PTMzfHxjPT0zNHx8Yz09MTI3KSYmdGhpcy5DbGllbnRTZXR0aW5ncy5LZXlib2FyZE5hdmlnYXRpb25TZXR0aW5ncy5FbmFibGVLZXlib2FyZFNob3J0Y3V0cyl7dmFyIGI9VGVsZXJpay5XZWIuVUkuR3JpZC5HZXRDdXJyZW50RWxlbWVudChhKTsKdmFyIGQ9KGIudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT0iaW5wdXQiJiZiLnR5cGUudG9Mb3dlckNhc2UoKT09ImNoZWNrYm94IiYmKGIuaWQmJmIuaWQuaW5kZXhPZigiU2VsZWN0Q2hlY2tCb3giKSE9LTEpKTsKaWYoYz09MTI3JiZiLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09ImlucHV0IiYmYi50eXBlPT0idGV4dCIpe3JldHVybiBmYWxzZTsKfWlmKGM9PTMzfHxjPT0zNCl7aWYoYi50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJpbnB1dCJ8fGIudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT0idGV4dGFyZWEiKXtyZXR1cm4gZmFsc2U7Cn19ZWxzZXtpZigoYi50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJpbnB1dCImJiFkKXx8Yi50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJzZWxlY3QifHxiLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09Im9wdGlvbiJ8fGIudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT0iYnV0dG9uInx8Yi50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJhInx8Yi50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJ0ZXh0YXJlYSJ8fGIudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT0iaW1nIil7cmV0dXJuIGZhbHNlOwp9fX1yZXR1cm4gdHJ1ZTsKfSxfaGFuZGxlU2hvcnRDdXRLZXk6ZnVuY3Rpb24oYSl7dmFyIGI9YS5rZXlDb2RlfHxhLmNoYXJDb2RlOwpzd2l0Y2goYil7Y2FzZSB0aGlzLkNsaWVudFNldHRpbmdzLktleWJvYXJkTmF2aWdhdGlvblNldHRpbmdzLkluaXRJbnNlcnRLZXk6aWYodGhpcy5fYWN0aXZlUm93KXt0aGlzLl9nZXRSb3codGhpcy5fYWN0aXZlUm93LmlkKS5nZXRfb3duZXIoKS5zaG93SW5zZXJ0SXRlbSgpOwphLnByZXZlbnREZWZhdWx0KCk7Cn1icmVhazsKY2FzZSB0aGlzLkNsaWVudFNldHRpbmdzLktleWJvYXJkTmF2aWdhdGlvblNldHRpbmdzLlJlYmluZEtleTppZih0aGlzLl9hY3RpdmVSb3cpe3RoaXMuX2dldFJvdyh0aGlzLl9hY3RpdmVSb3cuaWQpLmdldF9vd25lcigpLnJlYmluZCgpOwphLnByZXZlbnREZWZhdWx0KCk7Cn1icmVhazsKZGVmYXVsdDpicmVhazsKfX0sX2lzU2hvcnRDdXRLZXlQcmVzc2VkOmZ1bmN0aW9uKGEpe3ZhciBiPWEua2V5Q29kZXx8YS5jaGFyQ29kZTsKaWYoYS5jdHJsS2V5KXtzd2l0Y2goYil7Y2FzZSB0aGlzLkNsaWVudFNldHRpbmdzLktleWJvYXJkTmF2aWdhdGlvblNldHRpbmdzLkluaXRJbnNlcnRLZXk6cmV0dXJuIHRydWU7CmJyZWFrOwpjYXNlIHRoaXMuQ2xpZW50U2V0dGluZ3MuS2V5Ym9hcmROYXZpZ2F0aW9uU2V0dGluZ3MuUmViaW5kS2V5OnJldHVybiB0cnVlOwpicmVhazsKZGVmYXVsdDpyZXR1cm4gZmFsc2U7CmJyZWFrOwp9fX0sX2hhbmRsZURlbGV0ZUFjdGl2ZVJvdzpmdW5jdGlvbigpe2lmKHRoaXMuX2FjdGl2ZVJvdyl7dmFyIGE9JGZpbmQodGhpcy5fYWN0aXZlUm93LmlkLnNwbGl0KCJfXyIpWzBdKTsKaWYoYSl7YS5kZWxldGVJdGVtKHRoaXMuX2FjdGl2ZVJvdyk7Cn19fSxfZ2V0Um93OmZ1bmN0aW9uKGIpe3ZhciBhPSRmaW5kKGIpOwppZighYSl7dmFyIGQ9Yi5zcGxpdCgiX18iKVswXTsKdmFyIGM9JGZpbmQoZCk7CnRoaXMuX2Vuc3VyZURhdGFJdGVtc0NyZWF0ZWQoYyk7CmE9JGZpbmQoYik7Cn1yZXR1cm4gYTsKfSxfaGFuZGxlUGFnaW5nOmZ1bmN0aW9uKGIpe3ZhciBhPW51bGw7CnZhciBkPW51bGw7CnZhciBjPWIua2V5Q29kZXx8Yi5jaGFyQ29kZTsKdmFyIGY9bnVsbDsKaWYodGhpcy5fYWN0aXZlUm93KXtmPXRoaXMuX2dldFJvdyh0aGlzLl9hY3RpdmVSb3cuaWQpLmdldF9vd25lcigpOwphPWYuZ2V0X2N1cnJlbnRQYWdlSW5kZXgoKTsKZD1mLmdldF9wYWdlQ291bnQoKTsKfWlmKGM9PTMzKXthKys7CmlmKGE8ZCl7dGhpcy5fc2hvdWxkRm9jdXNPblBhZ2U9dHJ1ZTsKdGhpcy51cGRhdGVDbGllbnRTdGF0ZSgpOwppZih0aGlzLl9hY3RpdmVSb3cpe2YucGFnZSgiTmV4dCIpOwp9fX1lbHNle2EtLTsKaWYoYT4tMSl7dGhpcy5fc2hvdWxkRm9jdXNPblBhZ2U9dHJ1ZTsKdGhpcy51cGRhdGVDbGllbnRTdGF0ZSgpOwppZih0aGlzLl9hY3RpdmVSb3cpe2YucGFnZSgiUHJldiIpOwp9fX1iLnJhd0V2ZW50LnJldHVyblZhbHVlPWZhbHNlOwpiLnJhd0V2ZW50LmNhbmNlbEJ1YmJsZT10cnVlOwppZihiLnN0b3BQcm9wYWdhdGlvbil7Yi5wcmV2ZW50RGVmYXVsdCgpOwpiLnN0b3BQcm9wYWdhdGlvbigpOwp9fSxfaGFuZGxlRXhpdEVkaXRNb2RlT3JVcGRhdGVJdGVtOmZ1bmN0aW9uKGQsbSl7dmFyIG49VGVsZXJpay5XZWIuVUkuR3JpZC5HZXRDdXJyZW50RWxlbWVudChkKTsKdmFyIGc9VGVsZXJpay5XZWIuVUkuR3JpZC5HZXRGaXJzdFBhcmVudEJ5VGFnTmFtZShuLCJ0ciIpOwppZihtPT10aGlzLkNsaWVudFNldHRpbmdzLktleWJvYXJkTmF2aWdhdGlvblNldHRpbmdzLkV4aXRFZGl0SW5zZXJ0TW9kZUtleSYmdGhpcy5fYWN0aXZlUm93JiZ0aGlzLl9nZXRSb3codGhpcy5fYWN0aXZlUm93LmlkKS5fb3duZXIuZ2V0X2lzSXRlbUluc2VydGVkKCkpe3RoaXMuX2dldFJvdyh0aGlzLl9hY3RpdmVSb3cuaWQpLl9vd25lci5jYW5jZWxJbnNlcnQoKTsKZC5yYXdFdmVudC5yZXR1cm5WYWx1ZT1mYWxzZTsKZC5yYXdFdmVudC5jYW5jZWxCdWJibGU9dHJ1ZTsKaWYoZC5zdG9wUHJvcGFnYXRpb24pe2QucHJldmVudERlZmF1bHQoKTsKZC5zdG9wUHJvcGFnYXRpb24oKTsKfXJldHVybiBmYWxzZTsKfWlmKG09PXRoaXMuQ2xpZW50U2V0dGluZ3MuS2V5Ym9hcmROYXZpZ2F0aW9uU2V0dGluZ3MuRXhpdEVkaXRJbnNlcnRNb2RlS2V5KXtpZih0aGlzLl9hY3RpdmVSb3cpe3ZhciBoPXRoaXMuX2FjdGl2ZVJvdy5pZDsKdmFyIGM9JGZpbmQoaCk7CmlmKCFjKXt2YXIgbz0kZmluZChoLnNwbGl0KCJfXyIpWzBdKTsKdGhpcy5fb3duZXIuX2Vuc3VyZURhdGFJdGVtc0NyZWF0ZWQobyk7CmM9JGZpbmQoaCk7Cn1pZihjLmdldF9pc0luRWRpdE1vZGUoKSl7dmFyIGs9Yy5nZXRfZWxlbWVudCgpOwp2YXIgZj10aGlzLmlzR3JpZERhdGFSb3coayk7CmYuY2FuY2VsVXBkYXRlKGspOwpkLnJhd0V2ZW50LnJldHVyblZhbHVlPWZhbHNlOwpkLnJhd0V2ZW50LmNhbmNlbEJ1YmJsZT10cnVlOwppZihkLnN0b3BQcm9wYWdhdGlvbil7ZC5wcmV2ZW50RGVmYXVsdCgpOwpkLnN0b3BQcm9wYWdhdGlvbigpOwp9fX1yZXR1cm4gZmFsc2U7Cn1pZihnPT1udWxsfHx0eXBlb2YoZyk9PSJ1bmRlZmluZWQiKXtyZXR1cm4gZmFsc2U7Cn12YXIgYj10aGlzLmlzR3JpZERhdGFSb3coZyk7CmlmKGIhPW51bGwmJnR5cGVvZihiKSE9InVuZGVmaW5lZCIpe2lmKHRoaXMuaXNJbkVkaXRNb2RlQnlIaWVyYXJjaGljYWxJbmRleChnLmlkLnNwbGl0KCJfXyIpWzFdKSl7aWYobT09dGhpcy5DbGllbnRTZXR0aW5ncy5LZXlib2FyZE5hdmlnYXRpb25TZXR0aW5ncy5FeGl0RWRpdEluc2VydE1vZGVLZXkpe2IuY2FuY2VsVXBkYXRlKGcpOwp9ZWxzZXtpZihtPT10aGlzLkNsaWVudFNldHRpbmdzLktleWJvYXJkTmF2aWdhdGlvblNldHRpbmdzLlVwZGF0ZUluc2VydEl0ZW1LZXkpe2lmKHRoaXMuX3ZhbGlkYXRlRWRpdEluc2VydEZvcm0oIlVwZGF0ZSIpKXtiLnVwZGF0ZUl0ZW0oZyk7Cn19fWQucmF3RXZlbnQucmV0dXJuVmFsdWU9ZmFsc2U7CmQucmF3RXZlbnQuY2FuY2VsQnViYmxlPXRydWU7CmlmKGQuc3RvcFByb3BhZ2F0aW9uKXtkLnByZXZlbnREZWZhdWx0KCk7CmQuc3RvcFByb3BhZ2F0aW9uKCk7Cn1yZXR1cm4gZmFsc2U7Cn19ZWxzZXt2YXIgaj0kdGVsZXJpay4kKG4pLnBhcmVudHMoInRyIik7CnZhciBhOwpmb3IodmFyIGw9MDsKbDxqLmxlbmd0aDsKbCsrKXthPWpbbF0ucHJldmlvdXNTaWJsaW5nOwppZihhIT1udWxsJiZ0eXBlb2YoYSkhPSJ1bmRlZmluZWQiJiZhLnRhZ05hbWU9PSJUUiIpe2I9dGhpcy5pc0dyaWREYXRhUm93KGEpOwppZihiIT1udWxsJiZ0eXBlb2YoYikhPSJ1bmRlZmluZWQiKXtpZihtPT10aGlzLkNsaWVudFNldHRpbmdzLktleWJvYXJkTmF2aWdhdGlvblNldHRpbmdzLkV4aXRFZGl0SW5zZXJ0TW9kZUtleSl7Yi5jYW5jZWxVcGRhdGUoYSk7Cn1lbHNle2lmKG09PXRoaXMuQ2xpZW50U2V0dGluZ3MuS2V5Ym9hcmROYXZpZ2F0aW9uU2V0dGluZ3MuVXBkYXRlSW5zZXJ0SXRlbUtleSl7aWYodGhpcy5fdmFsaWRhdGVFZGl0SW5zZXJ0Rm9ybSgiVXBkYXRlIikpe2IudXBkYXRlSXRlbShhKTsKfX19ZC5yYXdFdmVudC5yZXR1cm5WYWx1ZT1mYWxzZTsKZC5yYXdFdmVudC5jYW5jZWxCdWJibGU9dHJ1ZTsKaWYoZC5zdG9wUHJvcGFnYXRpb24pe2QucHJldmVudERlZmF1bHQoKTsKZC5zdG9wUHJvcGFnYXRpb24oKTsKfWJyZWFrOwp9fX1yZXR1cm4gZmFsc2U7Cn19LGlzR3JpZERhdGFSb3c6ZnVuY3Rpb24oYil7aWYoYi5pZD09IiIpe3JldHVybjsKfXZhciBhPXRoaXMuZ2V0X21hc3RlclRhYmxlVmlldygpLl9nZXRSb3dCeUluZGV4T3JJdGVtSW5kZXhIaWVyYXJjaGljYWwoYik7CnZhciBkPWEuaWQuc3BsaXQoIl9fIilbMF07CnZhciBjPSRmaW5kKGQpOwppZihjIT1udWxsJiZ0eXBlb2YoYykhPSJ1bmRlZmluZWQiKXtyZXR1cm4gYzsKfWVsc2V7cmV0dXJuOwp9fSxpc0luRWRpdE1vZGVCeUhpZXJhcmNoaWNhbEluZGV4OmZ1bmN0aW9uKGIpe2lmKHRoaXMuX2VkaXRJbmRleGVzIT1udWxsJiZ0eXBlb2YodGhpcy5fZWRpdEluZGV4ZXMpIT0idW5kZWZpbmVkIil7Zm9yKHZhciBhPTA7CmE8dGhpcy5fZWRpdEluZGV4ZXMubGVuZ3RoOwphKyspe2lmKHRoaXMuX2VkaXRJbmRleGVzW2FdPT1iKXtyZXR1cm4gdHJ1ZTsKfX1yZXR1cm4gZmFsc2U7Cn1lbHNle3JldHVybiBmYWxzZTsKfX0sX3Nob3VsZFNraXBOYXZpZ2F0aW9uOmZ1bmN0aW9uKGIsYSl7aWYoYiE9bnVsbCYmYi50YWdOYW1lJiYhYSYmKGIudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT0iaW5wdXQifHxiLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09InRleHRhcmVhInx8Yi50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJzZWxlY3QiKSl7cmV0dXJuIHRydWU7Cn1yZXR1cm4gZmFsc2U7Cn0sX2hhbmRsZUFjdGl2ZVJvd05hdmlnYXRpb246ZnVuY3Rpb24oeCl7dmFyIEc9eC5rZXlDb2RlfHx4LmNoYXJDb2RlOwp2YXIgdD1UZWxlcmlrLldlYi5VSS5HcmlkLkdldEN1cnJlbnRFbGVtZW50KHgpOwp2YXIgQz0odC50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJpbnB1dCImJnQudHlwZS50b0xvd2VyQ2FzZSgpPT0iY2hlY2tib3giJiYodC5pZCYmdC5pZC5pbmRleE9mKCJTZWxlY3RDaGVja0JveCIpIT0tMSkpOwppZih0aGlzLl9zaG91bGRTa2lwTmF2aWdhdGlvbih0LEMpKXtyZXR1cm47Cn12YXIgcT10aGlzLl9nZXRQb3NpdGlvbmVkRGF0YUl0ZW1zKCk7CmlmKHEubGVuZ3RoPD0wKXtyZXR1cm47Cn12YXIgaj10aGlzLl9rZXlib2FyZE5hdmlnYXRpb25Qcm9wZXJ0aWVzOwp2YXIgcj0zODsKdmFyIG09NDA7CnZhciB6PXRoaXMuZ2V0X2FsbG93QWN0aXZlUm93Q3ljbGUoKTsKdmFyIG89dGhpcy5fYWN0aXZlUm93Owp2YXIgdj10aGlzLkNsaWVudFNldHRpbmdzOwppZihvJiZ2LlNlbGVjdGluZyYmIXYuU2VsZWN0aW5nLkFsbG93Um93U2VsZWN0KXtqLmN1cnJlbnRTZWxlY3RlZEluZGV4PXRoaXMuX3NlYXJjaFJvd0luZGV4KG8uaWQpOwp9aWYodi5TZWxlY3RpbmcmJnYuU2VsZWN0aW5nLkFsbG93Um93U2VsZWN0KXt0aGlzLl9zZWxlY3Rpb24uX3NlbGVjdGlvbkluUHJvZ3Jlc3M9dHJ1ZTsKdmFyIEQ9dGhpcy5fc2VsZWN0aW9uOwp2YXIgYj1mYWxzZTsKdmFyIHk9dHJ1ZTsKdmFyIEU9W107CmZvcih2YXIgYz0wOwpsZW49cS5sZW5ndGgsYzxsZW47CmMrKyl7aWYocVtjXS5nZXRfc2VsZWN0ZWQoKSl7RVtFLmxlbmd0aF09cVtjXTsKfX1pZihqLmZpcnN0U2VsZWN0aW9uKXtpZihvKXtqLmN1cnJlbnRTZWxlY3RlZEluZGV4PXRoaXMuX3NlYXJjaFJvd0luZGV4KG8uaWQpOwp0aGlzLl9jbGVhclNlbGVjdGVkSXRlbXNFeGNsdWRpbmdJbnRlcnZhbChqLmN1cnJlbnRTZWxlY3RlZEluZGV4LGouY3VycmVudFNlbGVjdGVkSW5kZXgpOwpqLmxhc3RTZWxlY3RlZFJvd0luZGV4PWouY3VycmVudFNlbGVjdGVkSW5kZXg7CnRoaXMuX3NlbGVjdGlvbi5fbGFzdFNlbGVjdGVkSXRlbUluZGV4PWouY3VycmVudFNlbGVjdGVkSW5kZXg7Cn1lbHNle2lmKEUubGVuZ3RoPjApe2ouY3VycmVudFNlbGVjdGVkSW5kZXg9dGhpcy5fc2VhcmNoUm93SW5kZXgoRVswXS5nZXRfaWQoKSk7CmoubGFzdFNlbGVjdGVkUm93SW5kZXg9ai5jdXJyZW50U2VsZWN0ZWRJbmRleDsKdGhpcy5fc2VsZWN0aW9uLl9sYXN0U2VsZWN0ZWRJdGVtSW5kZXg9ai5jdXJyZW50U2VsZWN0ZWRJbmRleDsKfX1qLnNldEluaXRpYWxTdGF0ZSgpOwp9aWYoRS5sZW5ndGg+MSYmai5jdXJyZW50U2VsZWN0ZWRJbmRleCE9PXVuZGVmaW5lZCl7aWYoai5sYXN0Q2xpY2tTZWxlY3RlZEl0ZW0pe3ZhciBwPXRoaXMuX3NlYXJjaFJvd0luZGV4KGoubGFzdENsaWNrU2VsZWN0ZWRJdGVtLmlkKTsKaWYocCl7ai5jdXJyZW50U2VsZWN0ZWRJbmRleD1wOwp9aWYocCYmai5jdXJyZW50U2VsZWN0ZWRJbmRleD09PXAmJnguc2hpZnRLZXkpe3RoaXMuX2NsZWFyU2VsZWN0ZWRJdGVtc0V4Y2x1ZGluZ0ludGVydmFsKHAscCk7CmlmKCFxW2ouY3VycmVudFNlbGVjdGVkSW5kZXhdLmdldF9zZWxlY3RlZCgpKXtELl9zZWxlY3RSb3dJbnRlcm5hbChxW2ouY3VycmVudFNlbGVjdGVkSW5kZXhdLmdldF9lbGVtZW50KCkseCx0cnVlLHRydWUsZmFsc2UpOwp9Yj10cnVlOwpqLnNldEluaXRpYWxTdGF0ZSgpOwp9fX1lbHNle2lmKEUubGVuZ3RoPjAmJmoubGFzdENsaWNrU2VsZWN0ZWRJdGVtKXtqLmN1cnJlbnRTZWxlY3RlZEluZGV4PXRoaXMuX3NlYXJjaFJvd0luZGV4KGoubGFzdENsaWNrU2VsZWN0ZWRJdGVtLmlkKTsKai5zZXRJbml0aWFsU3RhdGUoKTsKfWVsc2V7aWYoIW8pe2lmKEc9PXIpe2ouY3VycmVudFNlbGVjdGVkSW5kZXg9MTsKfX19fWlmKGouY3VycmVudFNlbGVjdGVkSW5kZXg9PSJ1bmRlZmluZWQifHxpc05hTihqLmN1cnJlbnRTZWxlY3RlZEluZGV4KXx8ai5jdXJyZW50U2VsZWN0ZWRJbmRleD09bnVsbCl7aWYoRz09cil7ai5jdXJyZW50U2VsZWN0ZWRJbmRleD0xOwp9ZWxzZXtpZihHPT1tKXtqLmN1cnJlbnRTZWxlY3RlZEluZGV4PTA7Cn19fWoubGFzdENsaWNrU2VsZWN0ZWRJdGVtPW51bGw7CmlmKChqLmhvbGRpbmdDdHJsJiZ4LnNoaWZ0S2V5JiYheC5jdHJsS2V5JiYhYikpe2ouc2V0SW5pdGlhbFN0YXRlKCk7CmlmKG8mJiRmaW5kKG8uaWQpLmdldF9zZWxlY3RlZCgpfHxFLmxlbmd0aD4xJiYhai5ob2xkaW5nQ3RybCl7dGhpcy5fY2xlYXJTZWxlY3RlZEl0ZW1zRXhjbHVkaW5nSW50ZXJ2YWwoai5pbml0aWFsUm93SW5kZXgsai5pbml0aWFsUm93SW5kZXgpOwppZighcVtqLmluaXRpYWxSb3dJbmRleF0uZ2V0X3NlbGVjdGVkKCkpe0QuX3NlbGVjdFJvd0ludGVybmFsKHFbai5pbml0aWFsUm93SW5kZXhdLmdldF9lbGVtZW50KCkseCx0cnVlLHRydWUsZmFsc2UpOwp9fWVsc2V7dmFyIG49ai5sYXN0U2VsZWN0ZWRSb3dJbmRleDsKai5pbml0aWFsUm93SW5kZXg9bjsKaWYoKGouY3VycmVudFNlbGVjdGVkSW5kZXg8bnx8eikmJihHPT1yfHwheiYmRz09bSkpe2lmKG4+ai5jdXJyZW50U2VsZWN0ZWRJbmRleCl7dGhpcy5fY2xlYXJTZWxlY3RlZEl0ZW1zRXhjbHVkaW5nSW50ZXJ2YWwoai5jdXJyZW50U2VsZWN0ZWRJbmRleCxuKTsKfWVsc2V7dGhpcy5fY2xlYXJTZWxlY3RlZEl0ZW1zSW5JbnRlcnZhbChuLGouY3VycmVudFNlbGVjdGVkSW5kZXgpOwp9dGhpcy5fc2VsZWN0SXRlbXNJbkludGVydmFsKG4sai5jdXJyZW50U2VsZWN0ZWRJbmRleCwtMSk7Cn1lbHNle2lmKEc9PW18fCF6KXtpZihqLmN1cnJlbnRTZWxlY3RlZEluZGV4Pm4pe3RoaXMuX2NsZWFyU2VsZWN0ZWRJdGVtc0V4Y2x1ZGluZ0ludGVydmFsKG4sai5jdXJyZW50U2VsZWN0ZWRJbmRleCk7Cn1lbHNle3RoaXMuX2NsZWFyU2VsZWN0ZWRJdGVtc0luSW50ZXJ2YWwoai5jdXJyZW50U2VsZWN0ZWRJbmRleCxuKTsKfXRoaXMuX3NlbGVjdEl0ZW1zSW5JbnRlcnZhbChuLGouY3VycmVudFNlbGVjdGVkSW5kZXgsMSk7Cn19fX12YXIgdT1qLmN1cnJlbnRTZWxlY3RlZEluZGV4Owp2YXIgZj1xW2ouY3VycmVudFNlbGVjdGVkSW5kZXhdOwp2YXIgQT1qLmRpcmVjdGlvbkluZGV4Owp2YXIgQj1qLmN1cnJlbnRTZWxlY3RlZEluZGV4Owp2YXIgaz1HOwppZihrPT1yKXtrPW07Cn1lbHNle2s9cjsKfXdoaWxlKGYmJiFmLmdldF9zZWxlY3RhYmxlKCkpe0I9dGhpcy5fZ2V0TmV4dEluZGV4KGssZmFsc2UsQik7CmY9cVtCXTsKfXZhciBhPShqLmRpcmVjdGlvbkluZGV4PjAmJkc9PW0pfHwoai5kaXJlY3Rpb25JbmRleDwwJiZHPT1yKTsKaWYoai5jdXJyZW50U2VsZWN0ZWRJbmRleD09PWouaW5pdGlhbFJvd0luZGV4JiZhJiZxLmxlbmd0aC1qLnVuc2VsZWN0YWJsZUl0ZW1zQ291bnQ9PT1FLmxlbmd0aCl7eT1mYWxzZTsKfX1qLmN1cnJlbnRTZWxlY3RlZEluZGV4PXRoaXMuX2dldE5leHRJbmRleChHLHRydWUpOwppZih2LlNlbGVjdGluZyYmdi5TZWxlY3RpbmcuQWxsb3dSb3dTZWxlY3Qpe2lmKCgheC5zaGlmdEtleXx8RS5sZW5ndGg9PT0wKSl7aWYocVtqLmN1cnJlbnRTZWxlY3RlZEluZGV4XS5nZXRfc2VsZWN0YWJsZSgpKXtqLnNldEluaXRpYWxTdGF0ZSgpOwp9fXZhciBGPWouZGlyZWN0aW9uSW5kZXg+MCYmRz09cjsKdmFyIEg9ai5kaXJlY3Rpb25JbmRleDwwJiZHPT1tOwp2YXIgZD1qLmN1cnJlbnRTZWxlY3RlZEluZGV4Owp3aGlsZSghcVtkXS5nZXRfc2VsZWN0YWJsZSgpKXtkPXRoaXMuX2dldE5leHRJbmRleChHLGZhbHNlLGQpOwp9aWYoZD09PWouaW5pdGlhbFJvd0luZGV4JiYoRnx8SHx8KEEhPT0wJiZqLmRpcmVjdGlvbkluZGV4PT09MCkpKXtpZihxLmxlbmd0aC1qLnVuc2VsZWN0YWJsZUl0ZW1zQ291bnQ9PT1FLmxlbmd0aCl7eT1mYWxzZTsKfWVsc2V7aWYoZi5nZXRfc2VsZWN0ZWQoKSYmcVtqLmN1cnJlbnRTZWxlY3RlZEluZGV4XS5nZXRfc2VsZWN0YWJsZSgpJiYheC5jdHJsS2V5KXt2YXIgbD17Y3RybEtleTpmYWxzZX07CkQuX3NlbGVjdFJvd0ludGVybmFsKGYuZ2V0X2VsZW1lbnQoKSxsLHRydWUsdHJ1ZSxmYWxzZSk7Cn12YXIgaD1qLmN1cnJlbnRTZWxlY3RlZEluZGV4OwpqLmN1cnJlbnRTZWxlY3RlZEluZGV4PWQ7Cmouc2V0SW5pdGlhbFN0YXRlKCk7CmouY3VycmVudFNlbGVjdGVkSW5kZXg9aDsKfX1pZihmJiZmLmdldF9zZWxlY3RlZCgpJiZxW2ouY3VycmVudFNlbGVjdGVkSW5kZXhdLmdldF9zZWxlY3RlZCgpJiZ5KXt2YXIgcz1qLmN1cnJlbnRTZWxlY3RlZEluZGV4Owp3aGlsZShxW3NdJiYhcVtzXS5nZXRfc2VsZWN0YWJsZSgpKXtzPXRoaXMuX2dldE5leHRJbmRleChHLGZhbHNlLHMpOwp9aWYoIXguY3RybEtleSYmeC5zaGlmdEtleSYmcVtzXSYmcVtzXS5nZXRfc2VsZWN0ZWQoKSYmcVtzXS5nZXRfc2VsZWN0YWJsZSgpKXtpZihmLmdldF9zZWxlY3RlZCgpKXt2YXIgbD17Y3RybEtleTpmYWxzZX07CkQuX3NlbGVjdFJvd0ludGVybmFsKGYuZ2V0X2VsZW1lbnQoKSxsLHRydWUsdHJ1ZSxmYWxzZSk7Cn19fWVsc2V7aWYoZiYmIWYuZ2V0X3NlbGVjdGVkKCkmJnguY3RybEtleSYmeC5zaGlmdEtleSl7dmFyIGw9e2N0cmxLZXk6eC5jdHJsS2V5fTsKRC5fc2VsZWN0Um93SW50ZXJuYWwoZi5nZXRfZWxlbWVudCgpLGwsdHJ1ZSx0cnVlLGZhbHNlKTsKfWVsc2V7aWYoeC5zaGlmdEtleSYmbyYmai5maXJzdFNlbGVjdGlvbil7dmFyIGc9ai5jdXJyZW50U2VsZWN0ZWRJbmRleDsKai5jdXJyZW50U2VsZWN0ZWRJbmRleD1COwpqLnNldEluaXRpYWxTdGF0ZSgpOwpqLmN1cnJlbnRTZWxlY3RlZEluZGV4PWc7CmlmKCFmLmdldF9zZWxlY3RlZCgpKXt2YXIgbD17Y3RybEtleTpmYWxzZX07CkQuX3NlbGVjdFJvd0ludGVybmFsKG8sbCx0cnVlLHRydWUsZmFsc2UpOwp9fX19aWYoeC5jdHJsS2V5KXtqLmhvbGRpbmdDdHJsPXRydWU7Cn1lbHNle2ouaG9sZGluZ0N0cmw9ZmFsc2U7Cn10aGlzLl9zZWxlY3Rpb24uX3NlbGVjdGlvbkluUHJvZ3Jlc3M9ZmFsc2U7Cn10aGlzLl9zZXRBY3RpdmVSb3cocVtqLmN1cnJlbnRTZWxlY3RlZEluZGV4XS5nZXRfZWxlbWVudCgpLHgpOwp2YXIgdz1mYWxzZTsKaWYodi5TZWxlY3RpbmcmJnYuU2VsZWN0aW5nLkFsbG93Um93U2VsZWN0KXtpZigheC5jdHJsS2V5fHx4LmN0cmxLZXkmJnguc2hpZnRLZXkpe3c9dHJ1ZTsKRC5fc2VsZWN0Um93SW50ZXJuYWwocVtqLmN1cnJlbnRTZWxlY3RlZEluZGV4XS5nZXRfZWxlbWVudCgpLHgsZmFsc2UsdHJ1ZSx0cnVlLGZhbHNlKTsKfWlmKCF3KXt0aGlzLnVwZGF0ZUNsaWVudFN0YXRlKCk7Cn1pZihvJiYkZmluZChvLmlkKS5nZXRfc2VsZWN0ZWQoKSYmIXguc2hpZnRLZXkmJnguY3RybEtleSYmdyl7ai5sYXN0U2VsZWN0ZWRSb3dJbmRleD1qLmN1cnJlbnRTZWxlY3RlZEluZGV4Owp9fWouZmlyc3RTZWxlY3Rpb249ZmFsc2U7CngucHJldmVudERlZmF1bHQoKTsKfSxfZ2V0TmV4dEluZGV4OmZ1bmN0aW9uKGQsYSxpKXt2YXIgZT10aGlzLl9nZXRQb3NpdGlvbmVkRGF0YUl0ZW1zKCk7CnZhciBnPXRoaXMuX2tleWJvYXJkTmF2aWdhdGlvblByb3BlcnRpZXM7CnZhciBoPXRoaXMuZ2V0X2FsbG93QWN0aXZlUm93Q3ljbGUoKTsKdmFyIGM9Mzg7CnZhciBiPTQwOwp2YXIgZj1nLmN1cnJlbnRTZWxlY3RlZEluZGV4OwppZihpKXtmPWk7Cn1pZihkPT1jKXtmLS07CmlmKGY8MCl7aWYoaCl7Zj1lLmxlbmd0aC0xOwp9ZWxzZXtmPTA7Cn19aWYoYSl7Zy5kaXJlY3Rpb25JbmRleCsrOwp9fWVsc2V7aWYoZD09Yil7ZisrOwppZihmPmUubGVuZ3RoLTEpe2lmKGgpe2Y9MDsKfWVsc2V7Zj1lLmxlbmd0aC0xOwp9fWlmKGEpe2cuZGlyZWN0aW9uSW5kZXgtLTsKfX19cmV0dXJuIGY7Cn0sX2NsZWFyU2VsZWN0ZWRJdGVtc0V4Y2x1ZGluZ0ludGVydmFsOmZ1bmN0aW9uKGUsYyl7dmFyIGI9MDsKdmFyIGE9W107CmZvcih2YXIgZD0wOwpkPHRoaXMuX3NlbGVjdGVkSXRlbXNJbnRlcm5hbC5sZW5ndGg7CmQrKyl7Yj10aGlzLl9zZWFyY2hSb3dJbmRleCh0aGlzLl9zZWxlY3RlZEl0ZW1zSW50ZXJuYWxbZF0uaWQpOwppZihiPGV8fGI+Yyl7YS5wdXNoKGIpOwp9fWZvcih2YXIgZD0wOwpkPGEubGVuZ3RoOwpkKyspe3RoaXMuX3Bvc2l0aW9uZWREYXRhSXRlbXNbYVtkXV0uc2V0X3NlbGVjdGVkKGZhbHNlKTsKfX0sX2NsZWFyU2VsZWN0ZWRJdGVtc0luSW50ZXJ2YWw6ZnVuY3Rpb24oZSxjKXt2YXIgYj0wOwp2YXIgYT1bXTsKZm9yKHZhciBkPTA7CmQ8dGhpcy5fc2VsZWN0ZWRJdGVtc0ludGVybmFsLmxlbmd0aDsKZCsrKXtiPXRoaXMuX3NlYXJjaFJvd0luZGV4KHRoaXMuX3NlbGVjdGVkSXRlbXNJbnRlcm5hbFtkXS5pZCk7CmlmKGI+ZSYmYjxjKXthLnB1c2goYik7Cn19Zm9yKHZhciBkPTA7CmQ8YS5sZW5ndGg7CmQrKyl7dGhpcy5fcG9zaXRpb25lZERhdGFJdGVtc1thW2RdXS5zZXRfc2VsZWN0ZWQoZmFsc2UpOwp9fSxfc2VsZWN0SXRlbXNJbkludGVydmFsOmZ1bmN0aW9uKGMsZSxkKXt2YXIgYj10aGlzLl9nZXRQb3NpdGlvbmVkRGF0YUl0ZW1zKCk7CnZhciBmPWM7CmUrPWQ7CmRve2lmKGY8MCl7Zj1iLmxlbmd0aC0xOwp9ZWxzZXtpZihmPmIubGVuZ3RoLTEpe2Y9MDsKfX1pZihiW2ZdJiYhYltmXS5nZXRfc2VsZWN0ZWQoKSl7dmFyIGE9e2N0cmxLZXk6ZmFsc2V9Owp0aGlzLl9zZWxlY3Rpb24uX3NlbGVjdFJvd0ludGVybmFsKGJbZl0uZ2V0X2VsZW1lbnQoKSxhLHRydWUsdHJ1ZSxmYWxzZSk7Cn1mKz1kOwp9d2hpbGUoZiE9PWUpOwp9LF9nZXRQb3NpdGlvbmVkRGF0YUl0ZW1zOmZ1bmN0aW9uKGMpe3ZhciBhPXRoaXMuX3Bvc2l0aW9uZWREYXRhSXRlbXM7CmlmKGEmJmEubGVuZ3RoPjAmJiFjKXtyZXR1cm4gYTsKfXRoaXMuX2tleWJvYXJkTmF2aWdhdGlvblByb3BlcnRpZXMudW5zZWxlY3RhYmxlSXRlbXNDb3VudD0wOwphPXRoaXMuX2dldEFsbENoaWxkSXRlbXNSZWN1cnNpdmUodGhpcy5nZXRfbWFzdGVyVGFibGVWaWV3KCkpOwp0aGlzLl9wb3NpdGlvbmVkRGF0YUl0ZW1zSW5kZXhlcz17fTsKZm9yKHZhciBiPTA7Cmxlbj1hLmxlbmd0aCxiPGxlbjsKYisrKXt0aGlzLl9wb3NpdGlvbmVkRGF0YUl0ZW1zSW5kZXhlc1thW2JdLmdldF9pZCgpXT1iOwp9dGhpcy5fa2V5Ym9hcmROYXZpZ2F0aW9uUHJvcGVydGllcy5maXJzdFNlbGVjdGlvbj10cnVlOwp0aGlzLl9wb3NpdGlvbmVkRGF0YUl0ZW1zPWE7CnJldHVybiBhOwp9LF9nZXRBbGxDaGlsZEl0ZW1zUmVjdXJzaXZlOmZ1bmN0aW9uKGIpe2lmKCFifHwoYiYmKGIuZ2V0X2VsZW1lbnQoKS5wYXJlbnROb2RlLnBhcmVudE5vZGUuc3R5bGUuZGlzcGxheT09PSJub25lIikpKXtyZXR1cm5bXTsKfXZhciBmPVtdOwp2YXIgZz1iLmdldF9kYXRhSXRlbXMoKTsKZm9yKHZhciBrPTAsZT1nLmxlbmd0aDsKazxlOwprKyspe3ZhciBkPWdba107CmlmKGQuZ2V0X2VsZW1lbnQoKS5zdHlsZS5kaXNwbGF5PT09Im5vbmUiKXtjb250aW51ZTsKfWlmKCFkLmdldF9zZWxlY3RhYmxlKCkmJiFkLmdldF9zZWxlY3RlZCgpKXt0aGlzLl9rZXlib2FyZE5hdmlnYXRpb25Qcm9wZXJ0aWVzLnVuc2VsZWN0YWJsZUl0ZW1zQ291bnQrKzsKfWZbZi5sZW5ndGhdPWQ7CnZhciBsPWQuZ2V0X25lc3RlZFZpZXdzKCk7CmlmKGwubGVuZ3RoKXtmb3IodmFyIGE9MCxtPWwubGVuZ3RoOwphPG07CmErKyl7dmFyIGg9bFthXTsKdmFyIGM9dGhpcy5fZ2V0QWxsQ2hpbGRJdGVtc1JlY3Vyc2l2ZShoKTsKaWYoYy5sZW5ndGgpe0FycmF5LmFkZFJhbmdlKGYsYyk7Cn19fX1yZXR1cm4gZjsKfSxfc2VhcmNoUm93SW5kZXg6ZnVuY3Rpb24oYSl7dGhpcy5fZ2V0UG9zaXRpb25lZERhdGFJdGVtcygpOwpyZXR1cm4gdGhpcy5fcG9zaXRpb25lZERhdGFJdGVtc0luZGV4ZXNbYV07Cn0sX3NldEFjdGl2ZVJvdzpmdW5jdGlvbihhLGMpe2lmKGEmJnRoaXMuQ2xpZW50U2V0dGluZ3MmJnRoaXMuQ2xpZW50U2V0dGluZ3MuQWxsb3dLZXlib2FyZE5hdmlnYXRpb24pe3ZhciBkPW5ldyBUZWxlcmlrLldlYi5VSS5HcmlkRGF0YUl0ZW1DYW5jZWxFdmVudEFyZ3ModGhpcy5fYWN0aXZlUm93fHxhLGMpOwp0aGlzLnJhaXNlX2FjdGl2ZVJvd0NoYW5naW5nKGQpOwppZihkLmdldF9jYW5jZWwoKSl7cmV0dXJuOwp9aWYodGhpcy5fYWN0aXZlUm93KXt2YXIgYj0kZmluZCh0aGlzLl9hY3RpdmVSb3cuaWQuc3BsaXQoIl9fIilbMF0pOwpUZWxlcmlrLldlYi5VSS5HcmlkLkNsZWFySXRlbVN0eWxlKHRoaXMuX2FjdGl2ZVJvdyxiLl9kYXRhLl9yZW5kZXJBY3RpdmVJdGVtU3R5bGUsYi5fZGF0YS5fcmVuZGVyQWN0aXZlSXRlbVN0eWxlQ2xhc3MpOwp9dGhpcy5fYWN0aXZlUm93PWE7CnZhciBlPSRmaW5kKGEuaWQuc3BsaXQoIl9fIilbMF0pOwpUZWxlcmlrLldlYi5VSS5HcmlkLlNldEl0ZW1TdHlsZShhLGUuX2RhdGEuX3JlbmRlckFjdGl2ZUl0ZW1TdHlsZSxlLl9kYXRhLl9yZW5kZXJBY3RpdmVJdGVtU3R5bGVDbGFzcyk7ClRlbGVyaWsuV2ViLlVJLkdyaWQuU2Nyb2xsSW50b1ZpZXcoYSk7CnRoaXMudXBkYXRlQ2xpZW50U3RhdGUoKTsKdGhpcy5yYWlzZV9hY3RpdmVSb3dDaGFuZ2VkKG5ldyBUZWxlcmlrLldlYi5VSS5HcmlkRGF0YUl0ZW1FdmVudEFyZ3ModGhpcy5fYWN0aXZlUm93LGMpKTsKfX0sY2xlYXJBY3RpdmVSb3c6ZnVuY3Rpb24oKXtpZih0aGlzLl9hY3RpdmVSb3cpe3ZhciBhPSRmaW5kKHRoaXMuX2FjdGl2ZVJvdy5pZC5zcGxpdCgiX18iKVswXSk7ClRlbGVyaWsuV2ViLlVJLkdyaWQuQ2xlYXJJdGVtU3R5bGUodGhpcy5fYWN0aXZlUm93LGEuX2RhdGEuX3JlbmRlckFjdGl2ZUl0ZW1TdHlsZSxhLl9kYXRhLl9yZW5kZXJBY3RpdmVJdGVtU3R5bGVDbGFzcyk7CnRoaXMuX2FjdGl2ZVJvdz1udWxsOwp0aGlzLnVwZGF0ZUNsaWVudFN0YXRlKCk7Cn19LHNldF9hY3RpdmVSb3c6ZnVuY3Rpb24oYSl7dGhpcy5fc2V0QWN0aXZlUm93KGEsbnVsbCk7Cn0sX2Vuc3VyZURhdGFJdGVtc0NyZWF0ZWQ6ZnVuY3Rpb24oYSl7aWYoYS5fZGF0YUl0ZW1zLmxlbmd0aD09MCl7YS5nZXRfZGF0YUl0ZW1zKCk7Cn19LF9oYW5kbGVBY3RpdmVSb3dFeHBhbmRDb2xsYXBzZTpmdW5jdGlvbihnKXt2YXIgZD1nLmtleUNvZGV8fGcuY2hhckNvZGU7CmlmKCF0aGlzLl9hY3RpdmVSb3cpe3JldHVybjsKfXZhciBiPSRmaW5kKHRoaXMuX2FjdGl2ZVJvdy5pZC5zcGxpdCgiX18iKVswXSk7CnRoaXMuX2Vuc3VyZURhdGFJdGVtc0NyZWF0ZWQoYik7CnZhciBrPWIuX2hpZXJhcmNoeUxvYWRNb2RlOwp2YXIgZj1rPT0iU2VydmVyT25EZW1hbmQifHxrPT0iU2VydmVyQmluZCI7CmlmKGQ9PXRoaXMuQ2xpZW50U2V0dGluZ3MuS2V5Ym9hcmROYXZpZ2F0aW9uU2V0dGluZ3MuQ29sbGFwc2VEZXRhaWxUYWJsZUtleSl7dmFyIGg9Yi5fZ2V0TmV4dE5lc3RlZERhdGFSb3codGhpcy5fYWN0aXZlUm93KTsKaWYoZiYmaCl7dGhpcy5fc2hvdWxkRm9jdXNPblBhZ2U9dHJ1ZTsKdmFyIGo9dGhpcy5fYWN0aXZlUm93LmlkKyIjIyI7CmIuZmlyZUNvbW1hbmQoIkV4cGFuZENvbGxhcHNlIixqKTsKfWlmKGgmJmgucGFyZW50Tm9kZS5zdHlsZS5kaXNwbGF5IT0ibm9uZSJ8fGgmJiRmaW5kKHRoaXMuX2FjdGl2ZVJvdy5pZCkuZ2V0X2lzSW5FZGl0TW9kZSgpJiZoLnBhcmVudE5vZGUuc3R5bGUuZGlzcGxheSE9Im5vbmUiKXtiLl9wZXJmb3JtQ29sbGFwc2VJdGVtKHRoaXMuX2FjdGl2ZVJvdyk7CnRoaXMuX2dldFBvc2l0aW9uZWREYXRhSXRlbXModHJ1ZSk7Cn19ZWxzZXtpZihkPT10aGlzLkNsaWVudFNldHRpbmdzLktleWJvYXJkTmF2aWdhdGlvblNldHRpbmdzLkV4cGFuZERldGFpbFRhYmxlS2V5KXt2YXIgYT1UZWxlcmlrLldlYi5VSS5HcmlkLkdldE5vZGVOZXh0U2libGluZ0J5VGFnTmFtZSh0aGlzLl9hY3RpdmVSb3csInRyIik7CmlmKCRmaW5kKHRoaXMuX2FjdGl2ZVJvdy5pZCkuZ2V0X2lzSW5FZGl0TW9kZSgpKXthPVRlbGVyaWsuV2ViLlVJLkdyaWQuR2V0Tm9kZU5leHRTaWJsaW5nQnlUYWdOYW1lKGEsInRyIik7Cn1pZighYi5faXNEYXRhSXRlbUVsZW1lbnQoYSkmJmIuX2RhdGEuaGFzRGV0YWlsSXRlbVRlbXBsYXRlKXthPVRlbGVyaWsuV2ViLlVJLkdyaWQuR2V0Tm9kZU5leHRTaWJsaW5nQnlUYWdOYW1lKGEsInRyIik7Cn1pZihhJiZhLnN0eWxlLmRpc3BsYXk9PSJub25lIil7Yi5leHBhbmRJdGVtKHRoaXMuX2FjdGl2ZVJvdyk7CnRoaXMuX2dldFBvc2l0aW9uZWREYXRhSXRlbXModHJ1ZSk7CnRoaXMuZ2V0X2VsZW1lbnQoKS5mb2N1cygpOwp9ZWxzZXtpZihiLl9oYXNEZXRhaWxUYWJsZXMmJmYpe3ZhciBsPSRmaW5kKHRoaXMuX2FjdGl2ZVJvdy5pZCk7CnZhciBjPWwuZ2V0X25lc3RlZFZpZXdzKClbMF07CnZhciBpPXRoaXMuX2FjdGl2ZVJvdy5pZDsKaWYobCl7dmFyIGI9JGZpbmQoaS5zcGxpdCgiX18iKVswXSk7CnRoaXMuX2Vuc3VyZURhdGFJdGVtc0NyZWF0ZWQoYik7Cn12YXIgbT0kZmluZChpKS5nZXRfaXNJbkVkaXRNb2RlKCk7CmlmKChjJiZkPT10aGlzLkNsaWVudFNldHRpbmdzLktleWJvYXJkTmF2aWdhdGlvblNldHRpbmdzLkNvbGxhcHNlRGV0YWlsVGFibGVLZXkpfHwoIWMmJmQ9PXRoaXMuQ2xpZW50U2V0dGluZ3MuS2V5Ym9hcmROYXZpZ2F0aW9uU2V0dGluZ3MuRXhwYW5kRGV0YWlsVGFibGVLZXkpKXt0aGlzLl9zaG91bGRGb2N1c09uUGFnZT10cnVlOwp2YXIgaj10aGlzLl9hY3RpdmVSb3cuaWQrIiMjIjsKYi5maXJlQ29tbWFuZCgiRXhwYW5kQ29sbGFwc2UiLGopOwp9fX19fX0sX2hhbmRsZUFjdGl2ZVJvd1NlbGVjdGlvbjpmdW5jdGlvbihhKXtpZih0aGlzLl9hY3RpdmVSb3cpe3RoaXMuX3NlbGVjdGlvbi5fc2VsZWN0Um93SW50ZXJuYWwodGhpcy5fYWN0aXZlUm93LHtjdHJsS2V5Oih0aGlzLmdldF9hbGxvd011bHRpUm93U2VsZWN0aW9uKCkmJmEuY3RybEtleSl9LGZhbHNlLHRydWUsdHJ1ZSk7CmlmKHRoaXMuQ2xpZW50U2V0dGluZ3MuQWxsb3dLZXlib2FyZE5hdmlnYXRpb24pe3ZhciBjPXRoaXMuX2tleWJvYXJkTmF2aWdhdGlvblByb3BlcnRpZXM7CnZhciBiPXRoaXMuX2dldFBvc2l0aW9uZWREYXRhSXRlbXMoKVtjLmN1cnJlbnRTZWxlY3RlZEluZGV4XTsKaWYoYiYmYi5nZXRfc2VsZWN0ZWQoKSl7Yy5sYXN0U2VsZWN0ZWRSb3dJbmRleD1jLmN1cnJlbnRTZWxlY3RlZEluZGV4Owp9Yy5sYXN0Q2xpY2tTZWxlY3RlZEl0ZW09dGhpcy5fZ2V0UG9zaXRpb25lZERhdGFJdGVtcygpW2MuY3VycmVudFNlbGVjdGVkSW5kZXhdLmdldF9lbGVtZW50KCk7CnRoaXMuX3NldEFjdGl2ZVJvdyh0aGlzLl9hY3RpdmVSb3csYSk7Cn1hLnByZXZlbnREZWZhdWx0KCk7Cn19LF9oYW5kbGVBY3RpdmVSb3dFZGl0OmZ1bmN0aW9uKGEpe2lmKHRoaXMuX2FjdGl2ZVJvdyl7YS5wcmV2ZW50RGVmYXVsdCgpOwp2YXIgYj0kZmluZCh0aGlzLl9hY3RpdmVSb3cuaWQuc3BsaXQoIl9fIilbMF0pOwppZihiKXtiLmVkaXRJdGVtKHRoaXMuX2FjdGl2ZVJvdyk7Cn19fSxfY2xpY2s6ZnVuY3Rpb24oYil7aWYoIXRoaXMuX2NhblJpc2VSb3dFdmVudChiKSl7cmV0dXJuOwp9aWYoISF0aGlzLkNsaWVudFNldHRpbmdzLkFsbG93S2V5Ym9hcmROYXZpZ2F0aW9uJiZ0aGlzLkNsaWVudFNldHRpbmdzLlNlbGVjdGluZy5DZWxsU2VsZWN0aW9uTW9kZT09VGVsZXJpay5XZWIuVUkuR3JpZENlbGxTZWxlY3Rpb25Nb2RlLk5vbmUpe2lmKCR0ZWxlcmlrLmlzSUUpe2lmKHRoaXMuZ2V0X2VsZW1lbnQoKS5zZXRBY3RpdmUpe3RyeXt0aGlzLmdldF9lbGVtZW50KCkuc2V0QWN0aXZlKCk7Cn1jYXRjaChhKXt9fX1lbHNle2lmKHRoaXMuZ2V0X2VsZW1lbnQoKS5mb2N1cyl7dGhpcy5nZXRfZWxlbWVudCgpLmZvY3VzKCk7Cn19fXZhciBjPVRlbGVyaWsuV2ViLlVJLkdyaWQuR2V0Rmlyc3RQYXJlbnRCeVRhZ05hbWUoVGVsZXJpay5XZWIuVUkuR3JpZC5HZXRDdXJyZW50RWxlbWVudChiKSwidHIiKTsKaWYoYyYmYy5pZCE9IiImJmMuaWQuc3BsaXQoIl9fIikubGVuZ3RoPT0yKXt0aGlzLnJhaXNlX3Jvd0NsaWNrKG5ldyBUZWxlcmlrLldlYi5VSS5HcmlkRGF0YUl0ZW1FdmVudEFyZ3MoYyxiKSk7Cn19LF9kYmxjbGljazpmdW5jdGlvbihiKXt2YXIgYTsKaWYoJHRlbGVyaWsuaXNUb3VjaERldmljZSl7dmFyIGQ9JHRlbGVyaWsuZ2V0VG91Y2hUYXJnZXQoYiksYT1UZWxlcmlrLldlYi5VSS5HcmlkLkdldEdyaWQoZCk7CiR0ZWxlcmlrLmNhbmNlbFJhd0V2ZW50KGIpOwppZighYSl7cmV0dXJuOwp9fWVsc2V7YT10aGlzOwp9aWYoIWEuX2NhblJpc2VSb3dFdmVudChiKSl7cmV0dXJuOwp9dmFyIGM9VGVsZXJpay5XZWIuVUkuR3JpZC5HZXRGaXJzdFBhcmVudEJ5VGFnTmFtZShUZWxlcmlrLldlYi5VSS5HcmlkLkdldEN1cnJlbnRFbGVtZW50KGIpLCJ0ciIpOwppZihjJiZjLmlkIT0iIil7YS5yYWlzZV9yb3dEYmxDbGljayhuZXcgVGVsZXJpay5XZWIuVUkuR3JpZERhdGFJdGVtRXZlbnRBcmdzKGMsYikpOwp9fSxfY29udGV4dG1lbnU6ZnVuY3Rpb24oYil7aWYoJHRlbGVyaWsuaXNPcGVyYSYmYi5idXR0b24hPTIpe3JldHVybjsKfXZhciBhPVRlbGVyaWsuV2ViLlVJLkdyaWQuR2V0Rmlyc3RQYXJlbnRCeVRhZ05hbWUoVGVsZXJpay5XZWIuVUkuR3JpZC5HZXRDdXJyZW50RWxlbWVudChiKSwidHIiKTsKdmFyIGM9bnVsbDsKaWYoYSYmYS5pZCE9IiImJmEuaWQuc3BsaXQoIl9fIikubGVuZ3RoPT0yKXtjPW5ldyBUZWxlcmlrLldlYi5VSS5HcmlkRGF0YUl0ZW1DYW5jZWxFdmVudEFyZ3MoYSxiKTsKdGhpcy5yYWlzZV9yb3dDb250ZXh0TWVudShjKTsKfWlmKChjJiYhYy5nZXRfY2FuY2VsKCkpJiZ0aGlzLmdldF9ldmVudHMoKS5nZXRIYW5kbGVyKCJyb3dDb250ZXh0TWVudSIpKXtpZihiLnByZXZlbnREZWZhdWx0KXtiLnByZXZlbnREZWZhdWx0KCk7Cn1lbHNle2IucmV0dXJuVmFsdWU9ZmFsc2U7CnJldHVybiBmYWxzZTsKfX19LF9tb3VzZW92ZXI6ZnVuY3Rpb24oYSl7aWYodGhpcy5fb3ZlclJvdyl7dGhpcy5yYWlzZV9yb3dNb3VzZU91dChuZXcgVGVsZXJpay5XZWIuVUkuR3JpZERhdGFJdGVtRXZlbnRBcmdzKHRoaXMuX292ZXJSb3csYSkpOwppZih0aGlzLlNraW4hPSIiJiZ0aGlzLkNsaWVudFNldHRpbmdzLkVuYWJsZVJvd0hvdmVyU3R5bGUpe1N5cy5VSS5Eb21FbGVtZW50LnJlbW92ZUNzc0NsYXNzKHRoaXMuX292ZXJSb3csInJnSG92ZXJlZFJvdyIpOwp9fXZhciBiPVRlbGVyaWsuV2ViLlVJLkdyaWQuR2V0Rmlyc3RQYXJlbnRCeVRhZ05hbWUoVGVsZXJpay5XZWIuVUkuR3JpZC5HZXRDdXJyZW50RWxlbWVudChhKSwidHIiKTsKaWYoYiYmYi5pZCE9IiImJmIuaWQuc3BsaXQoIl9fIikubGVuZ3RoPT0yKXt0aGlzLnJhaXNlX3Jvd01vdXNlT3ZlcihuZXcgVGVsZXJpay5XZWIuVUkuR3JpZERhdGFJdGVtRXZlbnRBcmdzKGIsYSkpOwppZih0aGlzLlNraW4hPSIiJiZ0aGlzLkNsaWVudFNldHRpbmdzLkVuYWJsZVJvd0hvdmVyU3R5bGUpe1N5cy5VSS5Eb21FbGVtZW50LmFkZENzc0NsYXNzKGIsInJnSG92ZXJlZFJvdyIpOwp9dGhpcy5fb3ZlclJvdz1iOwp9fSxfbW91c2VvdXQ6ZnVuY3Rpb24oYSl7aWYodGhpcy5fb3ZlclJvdyYmKCghJHRlbGVyaWsuaXNJRTgmJiFkb2N1bWVudC5kb2N1bWVudE1vZGUpfHwhJHRlbGVyaWsuaXNNb3VzZU92ZXJFbGVtZW50KHRoaXMuX292ZXJSb3csYSkpKXt0aGlzLnJhaXNlX3Jvd01vdXNlT3V0KG5ldyBUZWxlcmlrLldlYi5VSS5HcmlkRGF0YUl0ZW1FdmVudEFyZ3ModGhpcy5fb3ZlclJvdyxhKSk7CmlmKHRoaXMuU2tpbiE9IiImJnRoaXMuQ2xpZW50U2V0dGluZ3MuRW5hYmxlUm93SG92ZXJTdHlsZSl7U3lzLlVJLkRvbUVsZW1lbnQucmVtb3ZlQ3NzQ2xhc3ModGhpcy5fb3ZlclJvdywicmdIb3ZlcmVkUm93Iik7Cn10aGlzLl9vdmVyUm93PW51bGw7Cn19LF9jYW5SaXNlUm93RXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI7CmlmKCR0ZWxlcmlrLmlzVG91Y2hEZXZpY2Upe2I9JHRlbGVyaWsuZ2V0VG91Y2hUYXJnZXQoYSk7Cn1lbHNle2I9VGVsZXJpay5XZWIuVUkuR3JpZC5HZXRDdXJyZW50RWxlbWVudChhKTsKfWlmKCFifHwhYi50YWdOYW1lfHxiLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09ImlucHV0Inx8Yi50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJzZWxlY3QifHxiLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09Im9wdGlvbiJ8fGIudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT0iYnV0dG9uInx8Yi50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJhInx8Yi50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJ0ZXh0YXJlYSJ8fGIudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT0iaW1nIil7cmV0dXJuIGZhbHNlOwp9aWYodGhpcy5nZXRfbWFzdGVyVGFibGVWaWV3KCkmJiFUZWxlcmlrLldlYi5VSS5HcmlkLklzQ2hpbGRPZihiLHRoaXMuZ2V0X21hc3RlclRhYmxlVmlldygpLmdldF9lbGVtZW50KCkpKXtyZXR1cm4gZmFsc2U7Cn1yZXR1cm4gdHJ1ZTsKfSxjb25maXJtOmZ1bmN0aW9uKGQsZixoLGksYil7aWYod2luZG93LmNvbmZpcm1SZXN1bHQpe3dpbmRvdy5jb25maXJtUmVzdWx0PWZhbHNlOwpyZXR1cm4gdHJ1ZTsKfWlmKHR5cGVvZihHZXRSYWRXaW5kb3dNYW5hZ2VyKT09InVuZGVmaW5lZCIpe3JldHVybiBjb25maXJtKGQpOwp9dmFyIGs9R2V0UmFkV2luZG93TWFuYWdlcigpOwppZighayl7cmV0dXJuIGNvbmZpcm0oZCk7Cn12YXIgYT1mLnNyY0VsZW1lbnQ/Zi5zcmNFbGVtZW50OmYudGFyZ2V0Owp2YXIgaj1yYWRjb25maXJtKGQsZywodHlwZW9mKGkpIT0idW5kZWZpbmVkIik/aToyODAsKHR5cGVvZihiKSE9InVuZGVmaW5lZCIpP2I6MjAwLHRoaXMsKHR5cGVvZihoKSE9InVuZGVmaW5lZCIpP2g6IkNvbmZpcm0iKTsKdmFyIGM9dGhpcy5nZXRfbWFzdGVyVGFibGVWaWV3KCk7CmZ1bmN0aW9uIGcoZSl7aWYoZSl7aWYoISR0ZWxlcmlrLmlzSUUpe2lmKGEub25jbGljay50b1N0cmluZygpLmluZGV4T2YoIl9jbGllbnREZWxldGUoZXZlbnQpIik+LTEpe2MuX2NsaWVudERlbGV0ZShmKTsKcmV0dXJuIGZhbHNlOwp9fXdpbmRvdy5jb25maXJtUmVzdWx0PXRydWU7CmlmKGEuaHJlZiYmKHdpbmRvdy5uZXRzY2FwZXx8JHRlbGVyaWsuaXNTYWZhcmkpKXtldmFsKGEuaHJlZik7CndpbmRvdy5jb25maXJtUmVzdWx0PWZhbHNlOwpyZXR1cm47Cn1pZih3aW5kb3cubmV0c2NhcGUmJmEudHlwZSYmKGEudHlwZS50b0xvd2VyQ2FzZSgpPT0iaW1hZ2UifHxhLnR5cGUudG9Mb3dlckNhc2UoKT09InN1Ym1pdCJ8fGEudHlwZS50b0xvd2VyQ2FzZSgpPT0iYnV0dG9uIikmJiFhLmNsaWNrKXtfX2RvUG9zdEJhY2soYS5uYW1lLCIiKTsKd2luZG93LmNvbmZpcm1SZXN1bHQ9ZmFsc2U7CnJldHVybjsKfWlmKGEuY2xpY2spe2EuY2xpY2soZik7Cn19cmV0dXJuIGZhbHNlOwp9cmV0dXJuIGZhbHNlOwp9fTsKVGVsZXJpay5XZWIuVUkuUmFkR3JpZC5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5SYWRHcmlkIixUZWxlcmlrLldlYi5VSS5SYWRXZWJDb250cm9sKTsKVGVsZXJpay5XZWIuVUkuR3JpZEtleVByZXNzRXZlbnRBcmdzPWZ1bmN0aW9uKGEpe1RlbGVyaWsuV2ViLlVJLkdyaWRLZXlQcmVzc0V2ZW50QXJncy5pbml0aWFsaXplQmFzZSh0aGlzKTsKdGhpcy5fa2V5Q29kZT1hLmtleUNvZGV8fGEuY2hhckNvZGU7CnRoaXMuX2lzU2hpZnRQcmVzc2VkPWEuc2hpZnRLZXk7CnRoaXMuX2lzQ3RybFByZXNzZWQ9YS5jdHJsS2V5Owp0aGlzLl9pc0FsdFByZXNzZWQ9YS5hbHRLZXk7CnRoaXMuX2RvbUV2ZW50PWE7Cn07ClRlbGVyaWsuV2ViLlVJLkdyaWRLZXlQcmVzc0V2ZW50QXJncy5wcm90b3R5cGU9e2dldF9rZXlDb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2tleUNvZGU7Cn0sZ2V0X2lzU2hpZnRQcmVzc2VkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzU2hpZnRQcmVzc2VkOwp9LGdldF9pc0N0cmxQcmVzc2VkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzQ3RybFByZXNzZWQ7Cn0sZ2V0X2lzQWx0UHJlc3NlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0FsdFByZXNzZWQ7Cn0sZ2V0X2RvbUV2ZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RvbUV2ZW50Owp9fTsKVGVsZXJpay5XZWIuVUkuR3JpZEtleVByZXNzRXZlbnRBcmdzLnJlZ2lzdGVyQ2xhc3MoIlRlbGVyaWsuV2ViLlVJLkdyaWRLZXlQcmVzc0V2ZW50QXJncyIsU3lzLkNhbmNlbEV2ZW50QXJncyk7ClRlbGVyaWsuV2ViLlVJLkdyaWREcmFnRHJvcENhbmNlbEV2ZW50QXJncz1mdW5jdGlvbihiLGYsZSxkLGMsYSl7VGVsZXJpay5XZWIuVUkuR3JpZERyYWdEcm9wQ2FuY2VsRXZlbnRBcmdzLmluaXRpYWxpemVCYXNlKHRoaXMpOwp0aGlzLl90YXJnZXRJdGVtSWQ9IiI7CnRoaXMuX3RhcmdldEl0ZW1JbmRleEhpZXJhcmNoaWNhbD0iIjsKdGhpcy5fdGFyZ2V0R3JpZERhdGFJdGVtPW51bGw7CnRoaXMuX3RhcmdldEl0ZW1UYWJsZVZpZXc9bnVsbDsKdGhpcy5fdGFyZ2V0SXRlbURhdGFLZXlWYWx1ZXM9bnVsbDsKaWYoYil7dGhpcy5fdGFyZ2V0SXRlbUlkPWIuaWQ7CnRoaXMuX3RhcmdldEl0ZW1JbmRleEhpZXJhcmNoaWNhbD10aGlzLl90YXJnZXRJdGVtSWQuc3BsaXQoIl9fIilbMV07CnRoaXMuX3RhcmdldEl0ZW1UYWJsZVZpZXc9JGZpbmQodGhpcy5fdGFyZ2V0SXRlbUlkLnNwbGl0KCJfXyIpWzBdKTsKaWYodGhpcy5fdGFyZ2V0SXRlbVRhYmxlVmlldyYmdGhpcy5fdGFyZ2V0SXRlbVRhYmxlVmlldy5fb3duZXIuX2NsaWVudEtleVZhbHVlcyYmdGhpcy5fdGFyZ2V0SXRlbVRhYmxlVmlldy5fb3duZXIuX2NsaWVudEtleVZhbHVlc1t0aGlzLl90YXJnZXRJdGVtSW5kZXhIaWVyYXJjaGljYWxdKXt0aGlzLl90YXJnZXRJdGVtRGF0YUtleVZhbHVlcz10aGlzLl90YXJnZXRJdGVtVGFibGVWaWV3Ll9vd25lci5fY2xpZW50S2V5VmFsdWVzW3RoaXMuX3RhcmdldEl0ZW1JbmRleEhpZXJhcmNoaWNhbF07Cn19dGhpcy5fZG9tRXZlbnQ9ZjsKdGhpcy5fZHJhZ2VkSXRlbXM9ZTsKdGhpcy5faHRtbEVsZW1lbnQ9ZDsKdGhpcy5fdGFyZ2V0UmFkR3JpZD1jOwp0aGlzLl9kcm9wUG9zaXRpb249YTsKfTsKVGVsZXJpay5XZWIuVUkuR3JpZERyYWdEcm9wQ2FuY2VsRXZlbnRBcmdzLnByb3RvdHlwZT17Z2V0X3RhcmdldEdyaWREYXRhSXRlbTpmdW5jdGlvbigpe2lmKHRoaXMuX3RhcmdldEl0ZW1UYWJsZVZpZXcmJiF0aGlzLl90YXJnZXRHcmlkRGF0YUl0ZW0pe3RoaXMuX3RhcmdldEl0ZW1UYWJsZVZpZXcuZ2V0X2RhdGFJdGVtcygpOwp0aGlzLl90YXJnZXRHcmlkRGF0YUl0ZW09JGZpbmQodGhpcy5fdGFyZ2V0SXRlbUlkKTsKfXJldHVybiB0aGlzLl90YXJnZXRHcmlkRGF0YUl0ZW07Cn0sZ2V0X3RhcmdldEl0ZW1JbmRleEhpZXJhcmNoaWNhbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90YXJnZXRJdGVtSW5kZXhIaWVyYXJjaGljYWw7Cn0sZ2V0X3RhcmdldEl0ZW1JZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90YXJnZXRJdGVtSWQ7Cn0sZ2V0X3RhcmdldEl0ZW1UYWJsZVZpZXc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGFyZ2V0SXRlbVRhYmxlVmlldzsKfSxnZXRfZG9tRXZlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZG9tRXZlbnQ7Cn0sZ2V0X1RhcmdldERhdGFLZXlWYWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4odGhpcy5fdGFyZ2V0SXRlbURhdGFLZXlWYWx1ZXMpP3RoaXMuX3RhcmdldEl0ZW1EYXRhS2V5VmFsdWVzW2FdOm51bGw7Cn0sZ2V0X2RyYWdnZWRJdGVtczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kcmFnZWRJdGVtczsKfSxnZXRfZGVzdGluYXRpb25IdG1sRWxlbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9odG1sRWxlbWVudDsKfSxzZXRfZGVzdGluYXRpb25IdG1sRWxlbWVudDpmdW5jdGlvbihhKXt0aGlzLl9odG1sRWxlbWVudD1hOwp9LGdldF90YXJnZXRSYWRHcmlkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RhcmdldFJhZEdyaWQ7Cn0sZ2V0X2Ryb3BQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kcm9wUG9zaXRpb247Cn19OwpUZWxlcmlrLldlYi5VSS5HcmlkRHJhZ0Ryb3BDYW5jZWxFdmVudEFyZ3MucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuR3JpZERyYWdEcm9wQ2FuY2VsRXZlbnRBcmdzIixTeXMuQ2FuY2VsRXZlbnRBcmdzKTsKVGVsZXJpay5XZWIuVUkuR3JpZERhdGFJdGVtRXZlbnRBcmdzPWZ1bmN0aW9uKGIsYSl7VGVsZXJpay5XZWIuVUkuR3JpZERhdGFJdGVtRXZlbnRBcmdzLmluaXRpYWxpemVCYXNlKHRoaXMpOwp0aGlzLl9pZD0iIjsKdGhpcy5faXRlbUluZGV4SGllcmFyY2hpY2FsPSIiOwp0aGlzLl9ncmlkRGF0YUl0ZW09bnVsbDsKdGhpcy5fdGFibGVWaWV3PW51bGw7CnRoaXMuX2RhdGFLZXlWYWx1ZXM9bnVsbDsKaWYoYil7dGhpcy5faWQ9Yi5pZDsKdGhpcy5faXRlbUluZGV4SGllcmFyY2hpY2FsPXRoaXMuX2lkLnNwbGl0KCJfXyIpWzFdOwp0aGlzLl90YWJsZVZpZXc9JGZpbmQodGhpcy5faWQuc3BsaXQoIl9fIilbMF0pOwppZih0aGlzLl90YWJsZVZpZXcmJnRoaXMuX3RhYmxlVmlldy5fb3duZXIuX2NsaWVudEtleVZhbHVlcyYmdGhpcy5fdGFibGVWaWV3Ll9vd25lci5fY2xpZW50S2V5VmFsdWVzW3RoaXMuX2l0ZW1JbmRleEhpZXJhcmNoaWNhbF0pe3RoaXMuX2RhdGFLZXlWYWx1ZXM9dGhpcy5fdGFibGVWaWV3Ll9vd25lci5fY2xpZW50S2V5VmFsdWVzW3RoaXMuX2l0ZW1JbmRleEhpZXJhcmNoaWNhbF07Cn19dGhpcy5fZG9tRXZlbnQ9YTsKfTsKVGVsZXJpay5XZWIuVUkuR3JpZERhdGFJdGVtRXZlbnRBcmdzLnByb3RvdHlwZT17Z2V0X2l0ZW06ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRfZ3JpZERhdGFJdGVtKCk7Cn0sZ2V0X2dyaWREYXRhSXRlbTpmdW5jdGlvbigpe2lmKHRoaXMuX3RhYmxlVmlldyYmIXRoaXMuX2dyaWREYXRhSXRlbSl7dGhpcy5fZ3JpZERhdGFJdGVtPSRmaW5kKHRoaXMuX2lkKTsKaWYoIXRoaXMuX2dyaWREYXRhSXRlbSl7dGhpcy5fdGFibGVWaWV3LmdldF9kYXRhSXRlbXMoKTsKdGhpcy5fZ3JpZERhdGFJdGVtPSRmaW5kKHRoaXMuX2lkKTsKfX1yZXR1cm4gdGhpcy5fZ3JpZERhdGFJdGVtOwp9LGdldF9pdGVtSW5kZXhIaWVyYXJjaGljYWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXRlbUluZGV4SGllcmFyY2hpY2FsOwp9LGdldF9pZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pZDsKfSxnZXRfdGFibGVWaWV3OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RhYmxlVmlldzsKfSxnZXRfZG9tRXZlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZG9tRXZlbnQ7Cn0sZ2V0RGF0YUtleVZhbHVlOmZ1bmN0aW9uKGEpe3JldHVybih0aGlzLl9kYXRhS2V5VmFsdWVzKT90aGlzLl9kYXRhS2V5VmFsdWVzW2FdOm51bGw7Cn19OwpUZWxlcmlrLldlYi5VSS5HcmlkRGF0YUl0ZW1FdmVudEFyZ3MucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuR3JpZERhdGFJdGVtRXZlbnRBcmdzIixTeXMuRXZlbnRBcmdzKTsKVGVsZXJpay5XZWIuVUkuR3JpZERhdGFJdGVtQ2FuY2VsRXZlbnRBcmdzPWZ1bmN0aW9uKGIsYSl7VGVsZXJpay5XZWIuVUkuR3JpZERhdGFJdGVtQ2FuY2VsRXZlbnRBcmdzLmluaXRpYWxpemVCYXNlKHRoaXMpOwp0aGlzLl9pZD0iIjsKdGhpcy5faXRlbUluZGV4SGllcmFyY2hpY2FsPSIiOwp0aGlzLl9ncmlkRGF0YUl0ZW09bnVsbDsKdGhpcy5fdGFibGVWaWV3PW51bGw7CnRoaXMuX2RhdGFLZXlWYWx1ZXM9bnVsbDsKaWYoYil7dGhpcy5faWQ9Yi5pZDsKdGhpcy5faXRlbUluZGV4SGllcmFyY2hpY2FsPXRoaXMuX2lkLnNwbGl0KCJfXyIpWzFdOwp0aGlzLl90YWJsZVZpZXc9JGZpbmQodGhpcy5faWQuc3BsaXQoIl9fIilbMF0pOwppZih0aGlzLl90YWJsZVZpZXcmJnRoaXMuX3RhYmxlVmlldy5fb3duZXIuX2NsaWVudEtleVZhbHVlcyYmdGhpcy5fdGFibGVWaWV3Ll9vd25lci5fY2xpZW50S2V5VmFsdWVzW3RoaXMuX2l0ZW1JbmRleEhpZXJhcmNoaWNhbF0pe3RoaXMuX2RhdGFLZXlWYWx1ZXM9dGhpcy5fdGFibGVWaWV3Ll9vd25lci5fY2xpZW50S2V5VmFsdWVzW3RoaXMuX2l0ZW1JbmRleEhpZXJhcmNoaWNhbF07Cn19dGhpcy5fZG9tRXZlbnQ9YTsKfTsKVGVsZXJpay5XZWIuVUkuR3JpZERhdGFJdGVtQ2FuY2VsRXZlbnRBcmdzLnByb3RvdHlwZT17Z2V0X2dyaWREYXRhSXRlbTpmdW5jdGlvbigpe2lmKHRoaXMuX3RhYmxlVmlldyYmIXRoaXMuX2dyaWREYXRhSXRlbSl7dGhpcy5fdGFibGVWaWV3LmdldF9kYXRhSXRlbXMoKTsKdGhpcy5fZ3JpZERhdGFJdGVtPSRmaW5kKHRoaXMuX2lkKTsKfXJldHVybiB0aGlzLl9ncmlkRGF0YUl0ZW07Cn0sZ2V0X2l0ZW1JbmRleEhpZXJhcmNoaWNhbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pdGVtSW5kZXhIaWVyYXJjaGljYWw7Cn0sZ2V0X2lkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lkOwp9LGdldF90YWJsZVZpZXc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGFibGVWaWV3Owp9LGdldF9kb21FdmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kb21FdmVudDsKfSxnZXREYXRhS2V5VmFsdWU6ZnVuY3Rpb24oYSl7cmV0dXJuKHRoaXMuX2RhdGFLZXlWYWx1ZXMpP3RoaXMuX2RhdGFLZXlWYWx1ZXNbYV06bnVsbDsKfX07ClRlbGVyaWsuV2ViLlVJLkdyaWREYXRhSXRlbUNhbmNlbEV2ZW50QXJncy5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5HcmlkRGF0YUl0ZW1DYW5jZWxFdmVudEFyZ3MiLFN5cy5DYW5jZWxFdmVudEFyZ3MpOwpUZWxlcmlrLldlYi5VSS5HcmlkQ2xpZW50RGF0YUJpbmRpbmdQYXJhbWV0ZXJUeXBlPWZ1bmN0aW9uKCl7fTsKVGVsZXJpay5XZWIuVUkuR3JpZENsaWVudERhdGFCaW5kaW5nUGFyYW1ldGVyVHlwZS5wcm90b3R5cGU9e1N0cmluZzowLExpc3Q6MSxMaW5xOjIsT3FsOjN9OwpUZWxlcmlrLldlYi5VSS5HcmlkQ2xpZW50RGF0YUJpbmRpbmdQYXJhbWV0ZXJUeXBlLnJlZ2lzdGVyRW51bSgiVGVsZXJpay5XZWIuVUkuR3JpZENsaWVudERhdGFCaW5kaW5nUGFyYW1ldGVyVHlwZSIsZmFsc2UpOwpUZWxlcmlrLldlYi5VSS5HcmlkQ2xpZW50RGF0YVJlc3BvbnNlVHlwZT1mdW5jdGlvbigpe307ClRlbGVyaWsuV2ViLlVJLkdyaWRDbGllbnREYXRhUmVzcG9uc2VUeXBlLnByb3RvdHlwZT17SlNPTjowLEpTT05QOjF9OwpUZWxlcmlrLldlYi5VSS5HcmlkQ2xpZW50RGF0YVJlc3BvbnNlVHlwZS5yZWdpc3RlckVudW0oIlRlbGVyaWsuV2ViLlVJLkdyaWRDbGllbnREYXRhUmVzcG9uc2VUeXBlIik7ClRlbGVyaWsuV2ViLlVJLkdyaWRDbGllbnREYXRhU2VydmljZVR5cGU9ZnVuY3Rpb24oKXt9OwpUZWxlcmlrLldlYi5VSS5HcmlkQ2xpZW50RGF0YVNlcnZpY2VUeXBlLnByb3RvdHlwZT17QURPTmV0OjAsT0RhdGE6MX07ClRlbGVyaWsuV2ViLlVJLkdyaWRDbGllbnREYXRhU2VydmljZVR5cGUucmVnaXN0ZXJFbnVtKCJUZWxlcmlrLldlYi5VSS5HcmlkQ2xpZW50RGF0YVNlcnZpY2VUeXBlIik7ClRlbGVyaWsuV2ViLlVJLkdyaWREYXRhU291cmNlUmVzb2x2ZWRFdmVudEFyZ3M9ZnVuY3Rpb24oYSl7VGVsZXJpay5XZWIuVUkuR3JpZERhdGFTb3VyY2VSZXNvbHZlZEV2ZW50QXJncy5pbml0aWFsaXplQmFzZSh0aGlzKTsKdGhpcy5fZGF0YT1hOwp9OwpUZWxlcmlrLldlYi5VSS5HcmlkRGF0YVNvdXJjZVJlc29sdmVkRXZlbnRBcmdzLnByb3RvdHlwZT17Z2V0X2RhdGE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YTsKfSxzZXRfZGF0YTpmdW5jdGlvbihhKXt0aGlzLl9kYXRhPWE7Cn19OwpUZWxlcmlrLldlYi5VSS5HcmlkRGF0YVNvdXJjZVJlc29sdmVkRXZlbnRBcmdzLnJlZ2lzdGVyQ2xhc3MoIlRlbGVyaWsuV2ViLlVJLkdyaWREYXRhU291cmNlUmVzb2x2ZWRFdmVudEFyZ3MiLFN5cy5FdmVudEFyZ3MpOwpUZWxlcmlrLldlYi5VSS5HcmlkQ2VsbFNlbGVjdEV2ZW50QXJncz1mdW5jdGlvbihjLGIpe1RlbGVyaWsuV2ViLlVJLkdyaWRDZWxsU2VsZWN0RXZlbnRBcmdzLmluaXRpYWxpemVCYXNlKHRoaXMpOwp0aGlzLnJvdz1iKGMpLnBhcmVudCgidHJbaWRdIik7CnRoaXMucm93RWxlbWVudD10aGlzLnJvd1swXTsKdGhpcy5faWQ9IiI7CnRoaXMuX3RhYmxlVmlldz1udWxsOwp0aGlzLl9jb2w9bnVsbDsKaWYodGhpcy5yb3dFbGVtZW50KXt0aGlzLl9pdGVtSW5kZXhIaWVyYXJjaGljYWw9dGhpcy5yb3dFbGVtZW50LmlkLnNwbGl0KCJfXyIpWzFdOwp0aGlzLl9pZD10aGlzLnJvd0VsZW1lbnQuaWQ7CnRoaXMuX3RhYmxlVmlldz0kZmluZCh0aGlzLl9pZC5zcGxpdCgiX18iKVswXSk7Cn12YXIgYT10aGlzLl90YWJsZVZpZXcuZ2V0X2NvbHVtbnMoKTsKZm9yKHZhciBkPTAsZT0wOwpkPGEubGVuZ3RoOwpkKyspe2lmKGU9PWIoYykuaW5kZXgoKSl7dGhpcy5fY29sPWFbZF07Cn1lKys7Cn19OwpUZWxlcmlrLldlYi5VSS5HcmlkQ2VsbFNlbGVjdEV2ZW50QXJncy5wcm90b3R5cGU9e2dldF9yb3c6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb3dFbGVtZW50Owp9LGdldF9jb2x1bW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29sOwp9LGdldF9ncmlkRGF0YUl0ZW06ZnVuY3Rpb24oKXtpZih0aGlzLl90YWJsZVZpZXcmJiF0aGlzLl9ncmlkRGF0YUl0ZW0pe3RoaXMuX3RhYmxlVmlldy5nZXRfZGF0YUl0ZW1zKCk7CnRoaXMuX2dyaWREYXRhSXRlbT0kZmluZCh0aGlzLl9pZCk7Cn1yZXR1cm4gdGhpcy5fZ3JpZERhdGFJdGVtOwp9LGdldF90YWJsZVZpZXc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGFibGVWaWV3Owp9LGdldF9jZWxsSW5kZXhIaWVyYXJjaGljYWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXRlbUluZGV4SGllcmFyY2hpY2FsKyImIit0aGlzLmdldF9jb2x1bW4oKS5nZXRfdW5pcXVlTmFtZSgpOwp9fTsKVGVsZXJpay5XZWIuVUkuR3JpZENlbGxTZWxlY3RFdmVudEFyZ3MucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuR3JpZENlbGxTZWxlY3RFdmVudEFyZ3MiLFN5cy5FdmVudEFyZ3MpOwpUZWxlcmlrLldlYi5VSS5HcmlkQ2VsbFNlbGVjdENhbmNlbEV2ZW50QXJncz1mdW5jdGlvbihjLGIpe1RlbGVyaWsuV2ViLlVJLkdyaWRDZWxsU2VsZWN0Q2FuY2VsRXZlbnRBcmdzLmluaXRpYWxpemVCYXNlKHRoaXMpOwp0aGlzLnJvdz1iKGMpLnBhcmVudCgidHJbaWRdIik7CnRoaXMucm93RWxlbWVudD10aGlzLnJvd1swXTsKdGhpcy5faWQ9IiI7CnRoaXMuX3RhYmxlVmlldz1udWxsOwp0aGlzLl9jb2w9bnVsbDsKaWYodGhpcy5yb3dFbGVtZW50KXt0aGlzLl9pZD10aGlzLnJvd0VsZW1lbnQuaWQ7CnRoaXMuX3RhYmxlVmlldz0kZmluZCh0aGlzLl9pZC5zcGxpdCgiX18iKVswXSk7Cn12YXIgYT10aGlzLl90YWJsZVZpZXcuZ2V0X2NvbHVtbnMoKTsKZm9yKHZhciBkPTAsZT0wOwpkPGEubGVuZ3RoOwpkKyspe2lmKGU9PWIoYykuaW5kZXgoKSl7dGhpcy5fY29sPWFbZF07Cn1lKys7Cn19OwpUZWxlcmlrLldlYi5VSS5HcmlkQ2VsbFNlbGVjdENhbmNlbEV2ZW50QXJncy5wcm90b3R5cGU9e2dldF9yb3c6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb3dFbGVtZW50Owp9LGdldF9jb2x1bW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29sOwp9LGdldF9ncmlkRGF0YUl0ZW06ZnVuY3Rpb24oKXtpZih0aGlzLl90YWJsZVZpZXcmJiF0aGlzLl9ncmlkRGF0YUl0ZW0pe3RoaXMuX3RhYmxlVmlldy5nZXRfZGF0YUl0ZW1zKCk7CnRoaXMuX2dyaWREYXRhSXRlbT0kZmluZCh0aGlzLl9pZCk7Cn1yZXR1cm4gdGhpcy5fZ3JpZERhdGFJdGVtOwp9fTsKVGVsZXJpay5XZWIuVUkuR3JpZENlbGxTZWxlY3RDYW5jZWxFdmVudEFyZ3MucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuR3JpZENlbGxTZWxlY3RDYW5jZWxFdmVudEFyZ3MiLFN5cy5DYW5jZWxFdmVudEFyZ3MpOwpUZWxlcmlrLldlYi5VSS5HcmlkQ2VsbFNlbGVjdGlvbk1vZGU9ZnVuY3Rpb24oKXt9OwpUZWxlcmlrLldlYi5VSS5HcmlkQ2VsbFNlbGVjdGlvbk1vZGUucHJvdG90eXBlPXtOb25lOjAsU2luZ2xlQ2VsbDoxLE11bHRpQ2VsbDoyLENvbHVtbjozLE11bHRpQ29sdW1uOjR9OwpUZWxlcmlrLldlYi5VSS5HcmlkQ2VsbFNlbGVjdGlvbk1vZGUucmVnaXN0ZXJFbnVtKCJUZWxlcmlrLldlYi5VSS5HcmlkQ2VsbFNlbGVjdGlvbk1vZGUiLGZhbHNlKTsKDQovKiBFTkQgVGVsZXJpay5XZWIuVUkuR3JpZC5SYWRHcmlkU2NyaXB0cy5qcyAqLw0KLyogU1RBUlQgVGVsZXJpay5XZWIuVUkuQ29tbW9uLk5hdmlnYXRpb24uT0RhdGEuT0RhdGEuanMgKi8NCihmdW5jdGlvbihjLGIpe3ZhciBhPSJUZWxlcmlrLk9EYXRhLkl0ZW1zVXJsIixmPSIkY2FsbGJhY2siLGU9ImFwcGxpY2F0aW9uL2pzb24iLGQ9ezA6Impzb24iLDE6Impzb25wIn07CmMuTmF2aWdhdGlvbkNvbnRyb2xPRGF0YVNldHRpbmdzPWZ1bmN0aW9uKGgpe2MuTmF2aWdhdGlvbkNvbnRyb2xPRGF0YVNldHRpbmdzLmluaXRpYWxpemVCYXNlKHRoaXMsW2hdKTsKdmFyIGc9aC5PRGF0YVNldHRpbmdzOwp0aGlzLl9wYXRoPWguUGF0aDsKdGhpcy5fb2RhdGE9dHJ1ZTsKdGhpcy5fcmVzcG9uc2VUeXBlPWcuUmVzcG9uc2VUeXBlOwppZighdGhpcy5nZXRfaXNFbXB0eSgpKXt0aGlzLl90cmVlPW5ldyBjLk9EYXRhQmluZGVyVHJlZShnLkluaXRpYWxDb250YWluZXJOYW1lLGcuRW50aXRpZXMsZy5FbnRpdHlDb250YWluZXIpOwp9fTsKYy5OYXZpZ2F0aW9uQ29udHJvbE9EYXRhU2V0dGluZ3MucHJvdG90eXBlPXtnZXRfcGF0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYXRoOwp9LGdldF9yZXNwb25zZVR5cGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVzcG9uc2VUeXBlOwp9LGdldF90cmVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RyZWU7Cn0sZ2V0X2lzRW1wdHk6ZnVuY3Rpb24oKXt2YXIgZz10aGlzLl9vZGF0YTsKcmV0dXJuIHRoaXMuX3BhdGg9PSIifHwoZy5Jbml0aWFsQ29udGFpbmVyTmFtZT09IiJ8fGcuRW50aXRpZXM+MCk7Cn19OwpjLk5hdmlnYXRpb25Db250cm9sT0RhdGFTZXR0aW5ncy5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5OYXZpZ2F0aW9uQ29udHJvbE9EYXRhU2V0dGluZ3MiLGMuV2ViU2VydmljZVNldHRpbmdzKTsKYy5PRGF0YUJpbmRlclRyZWU9ZnVuY3Rpb24oaCxpLGcpe3RoaXMuX2VudGl0aWVzPWk7CnRoaXMuX21hcD1nOwp0aGlzLl9sb2FkZWQ9ZmFsc2U7CnRoaXMuX3RyZWU9dGhpcy5fYnVpbGRUcmVlKGgpOwp9OwpjLk9EYXRhQmluZGVyVHJlZS5wcm90b3R5cGU9e2dldF9zZXR0aW5nc0J5RGVwdGg6ZnVuY3Rpb24oZyl7ZnVuY3Rpb24gaChqLGkpe2lmKGo9PWcpe3JldHVybiBpOwp9cmV0dXJuIGgoKytqLGkuY2hpbGQpOwp9cmV0dXJuIGgoMCx0aGlzLl90cmVlKTsKfSxfYnVpbGRUcmVlOmZ1bmN0aW9uKGgpe3ZhciBnPSEhaD90aGlzLl9nZXRFbnRpdHlTZXRCeU5hbWUoaCk6dGhpcy5fbWFwWzBdOwpyZXR1cm4gdGhpcy5fYnVpbGROb2RlKGcsdGhpcy5fZmluZENoaWxkQ2FsbGJhY2spOwp9LF9maW5kQ2hpbGRDYWxsYmFjazpmdW5jdGlvbihoKXtpZighaCl7cmV0dXJuOwp9dmFyIGc9dGhpcy5fZ2V0RW50aXR5U2V0QnlOYW1lKGgpOwpyZXR1cm4gdGhpcy5fYnVpbGROb2RlKGcsdGhpcy5fZmluZENoaWxkQ2FsbGJhY2spOwp9LF9idWlsZE5vZGU6ZnVuY3Rpb24oZyxrKXt2YXIgaj10aGlzLl9nZXRFbnRpdHlCeU5hbWUoZy5OYW1lKSxoPXRoaXMsaT17bmFtZTpnLk5hbWUsdHlwZTpnLkVudGl0eVR5cGUsZW50aXR5OmosY2hpbGQ6ay5hcHBseShoLFtqLk5hdmlnYXRpb25Qcm9wZXJ0eV0pfTsKcmV0dXJuIGk7Cn0sX2dldEJ5TmFtZTpmdW5jdGlvbihrLGgpe2Zvcih2YXIgaj0wOwpqPGsubGVuZ3RoOwpqKyspe3ZhciBnPWtbal07CmlmKGcuTmFtZT09PWgpe3JldHVybiBnOwp9fX0sX2dldEVudGl0eUJ5TmFtZTpmdW5jdGlvbihnKXtyZXR1cm4gdGhpcy5fZ2V0QnlOYW1lKHRoaXMuX2VudGl0aWVzLHRoaXMuX2dldEVudGl0eVNldEJ5TmFtZShnKS5FbnRpdHlUeXBlKTsKfSxfZ2V0RW50aXR5U2V0QnlOYW1lOmZ1bmN0aW9uKGcpe3JldHVybiB0aGlzLl9nZXRCeU5hbWUodGhpcy5fbWFwLGcpOwp9fTsKYy5OYXZpZ2F0aW9uQ29udHJvbE9EYXRhTG9hZGVyPWZ1bmN0aW9uKGgsZyl7Yy5OYXZpZ2F0aW9uQ29udHJvbE9EYXRhTG9hZGVyLmluaXRpYWxpemVCYXNlKHRoaXMsW2hdKTsKaWYoZyl7dGhpcy5fZXhwYW5kQ2FsbGJhY2s9ZzsKfWVsc2V7dGhpcy5fZXhwYW5kQ2FsbGJhY2s9ZnVuY3Rpb24oKXtyZXR1cm4gLTE7Cn07Cn19OwpjLk5hdmlnYXRpb25Db250cm9sT0RhdGFMb2FkZXIucHJvdG90eXBlPXtfY3JlYXRlUm9vdFVybDpmdW5jdGlvbihoLGcpe2lmKGhbaC5sZW5ndGgtMV09PSIvIil7cGFnZT1oLnNsaWNlKDAsaC5sZW5ndGgtMSk7Cn1yZXR1cm4gaCsiLyIrZzsKfSxfZ2V0RGVmZmVyZWRJdGVtc1VybDpmdW5jdGlvbihoKXt2YXIgZz1oLmdldF9hdHRyaWJ1dGVzKCk7CnZhciBpPWcuZ2V0QXR0cmlidXRlKGEpOwpnLnJlbW92ZUF0dHJpYnV0ZShhKTsKcmV0dXJuIGk7Cn0sX2FwcGVuZFF1ZXJ5U3RyaW5nUGFyYW1ldGVyczpmdW5jdGlvbihnKXtyZXR1cm4gZysiLz8kZm9ybWF0PWpzb24iOwp9LF9nZXRBamF4U2V0dGluZ3M6ZnVuY3Rpb24oaCl7aD10aGlzLl9hcHBlbmRRdWVyeVN0cmluZ1BhcmFtZXRlcnMoaCk7CnZhciBnPXRoaXMuZ2V0X3dlYlNlcnZpY2VTZXR0aW5ncygpOwpyZXR1cm57dXJsOmgsaGVhZGVyczp7QWNjZXB0czplfSxkYXRhVHlwZTpkW2cuZ2V0X3Jlc3BvbnNlVHlwZSgpXSxqc29ucDpmfTsKfSxnZXRfZXhwYW5kQ2FsbGJhY2s6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXhwYW5kQ2FsbGJhY2s7Cn0sbG9hZERhdGE6ZnVuY3Rpb24oayxtKXt2YXIgaj10aGlzLmdldF93ZWJTZXJ2aWNlU2V0dGluZ3MoKSxoLGksZz1mYWxzZSxsPWouZ2V0X3RyZWUoKTsKaWYoai5nZXRfaXNFbXB0eSgpKXtyZXR1cm47Cn1pZihrLmlzUm9vdExldmVsKXtoPWwuZ2V0X3NldHRpbmdzQnlEZXB0aCgwKTsKaT10aGlzLl9nZXRBamF4U2V0dGluZ3ModGhpcy5fY3JlYXRlUm9vdFVybChqLmdldF9wYXRoKCksaC5uYW1lKSk7Cn1lbHNle2k9dGhpcy5fZ2V0QWpheFNldHRpbmdzKHRoaXMuX2dldERlZmZlcmVkSXRlbXNVcmwobSkpLGxldmVsPW0uZ2V0X2xldmVsKCkrMSxoPWouZ2V0X3RyZWUoKS5nZXRfc2V0dGluZ3NCeURlcHRoKGxldmVsKTsKZz10cnVlOwp9dGhpcy5fc2VuZEFqYXhSZXF1ZXN0KGksbSxoLmVudGl0eSx0aGlzLl9vbldlYlNlcnZpY2VTdWNjZXNzKTsKaWYoZyl7dGhpcy5fcmFpc2VFdmVudCgibG9hZGluZ1N0YXJ0ZWQiLG5ldyBUZWxlcmlrLldlYi5VSS5XZWJTZXJ2aWNlTG9hZGVyRXZlbnRBcmdzKG0pKTsKfX0sX3NlbmRBamF4UmVxdWVzdDpmdW5jdGlvbihoLGwsZyxrKXt2YXIgaT10aGlzLGo9Yi5hamF4KGgpOwpqLmZhaWwoZnVuY3Rpb24obil7dmFyIG09e2dldF9tZXNzYWdlOmZ1bmN0aW9uKCl7cmV0dXJuIG4uc3RhdHVzVGV4dDsKfX07CmkuX29uV2ViU2VydmljZUVycm9yKG0sbCk7Cn0pLmRvbmUoZnVuY3Rpb24obyl7dmFyIG49W10sbT1pLl9zYW5pdGl6ZShvKTsKYi5lYWNoKG0sZnVuY3Rpb24ocSxwKXtuW24ubGVuZ3RoXT17VGV4dDpwW2cuRGF0YVRleHRGaWVsZF0sVmFsdWU6cFtnLkRhdGFWYWx1ZUZpZWxkXSxFeHBhbmRNb2RlOmkuZ2V0X2V4cGFuZENhbGxiYWNrKCkoZy5OYXZpZ2F0aW9uUHJvcGVydHkpLEF0dHJpYnV0ZXM6KGZ1bmN0aW9uKCl7aWYoZy5OYXZpZ2F0aW9uUHJvcGVydHkmJnBbZy5OYXZpZ2F0aW9uUHJvcGVydHldKXtyZXR1cm57IlRlbGVyaWsuT0RhdGEuSXRlbXNVcmwiOnBbZy5OYXZpZ2F0aW9uUHJvcGVydHldLl9fZGVmZXJyZWQudXJpfTsKfWVsc2V7cmV0dXJue307Cn19KSgpfTsKfSk7CmsuYXBwbHkoaSxbbixsXSk7Cn0pOwp9LF9zYW5pdGl6ZTpmdW5jdGlvbihnKXt2YXIgaD1nLmQucmVzdWx0cz9nLmQucmVzdWx0czpnLmQ7CmlmKCEoaCBpbnN0YW5jZW9mIEFycmF5KSl7aD1iLm1ha2VBcnJheShoKTsKfXJldHVybiBoOwp9fTsKYy5OYXZpZ2F0aW9uQ29udHJvbE9EYXRhTG9hZGVyLnJlZ2lzdGVyQ2xhc3MoIlRlbGVyaWsuV2ViLlVJLk5hdmlnYXRpb25Db250cm9sT0RhdGFMb2FkZXIiLGMuV2ViU2VydmljZUxvYWRlcik7Cn0pKFRlbGVyaWsuV2ViLlVJLCR0ZWxlcmlrLiQpOwoNCi8qIEVORCBUZWxlcmlrLldlYi5VSS5Db21tb24uTmF2aWdhdGlvbi5PRGF0YS5PRGF0YS5qcyAqLw0KLyogU1RBUlQgVGVsZXJpay5XZWIuVUkuQ29tbW9uLk5hdmlnYXRpb24uTmF2aWdhdGlvblNjcmlwdHMuanMgKi8NClR5cGUucmVnaXN0ZXJOYW1lc3BhY2UoIlRlbGVyaWsuV2ViLlVJIik7ClRlbGVyaWsuV2ViLlVJLkF0dHJpYnV0ZUNvbGxlY3Rpb249ZnVuY3Rpb24oYSl7dGhpcy5fb3duZXI9YTsKdGhpcy5fZGF0YT17fTsKdGhpcy5fa2V5cz1bXTsKfTsKVGVsZXJpay5XZWIuVUkuQXR0cmlidXRlQ29sbGVjdGlvbi5wcm90b3R5cGU9e2dldEF0dHJpYnV0ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fZGF0YVthXTsKfSxzZXRBdHRyaWJ1dGU6ZnVuY3Rpb24oYixjKXt0aGlzLl9hZGQoYixjKTsKdmFyIGE9e307CmFbYl09YzsKdGhpcy5fb3duZXIuX25vdGlmeVByb3BlcnR5Q2hhbmdlZCgiYXR0cmlidXRlcyIsYSk7Cn0sX2FkZDpmdW5jdGlvbihhLGIpe2lmKEFycmF5LmluZGV4T2YodGhpcy5fa2V5cyxhKTwwKXtBcnJheS5hZGQodGhpcy5fa2V5cyxhKTsKfXRoaXMuX2RhdGFbYV09YjsKfSxyZW1vdmVBdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7QXJyYXkucmVtb3ZlKHRoaXMuX2tleXMsYSk7CmRlbGV0ZSB0aGlzLl9kYXRhW2FdOwp9LF9sb2FkOmZ1bmN0aW9uKGMsYSl7aWYoYSl7Zm9yKHZhciBiPTAsZT1jLmxlbmd0aDsKYjxlOwpiKyspe3RoaXMuX2FkZChjW2JdLktleSxjW2JdLlZhbHVlKTsKfX1lbHNle2Zvcih2YXIgZCBpbiBjKXt0aGlzLl9hZGQoZCxjW2RdKTsKfX19LGdldF9jb3VudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9rZXlzLmxlbmd0aDsKfX07ClRlbGVyaWsuV2ViLlVJLkF0dHJpYnV0ZUNvbGxlY3Rpb24ucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuQXR0cmlidXRlQ29sbGVjdGlvbiIpOwpUeXBlLnJlZ2lzdGVyTmFtZXNwYWNlKCJUZWxlcmlrLldlYi5VSSIpOwpUZWxlcmlrLldlYi5KYXZhU2NyaXB0U2VyaWFsaXplcj17X3N0cmluZ1JlZ0V4Om5ldyBSZWdFeHAoJ1siXGJcZlxuXHJcdFxcXFxceDAwLVx4MUZdJywiaSIpLHNlcmlhbGl6ZTpmdW5jdGlvbihiKXt2YXIgYT1uZXcgVGVsZXJpay5XZWIuU3RyaW5nQnVpbGRlcigpOwpUZWxlcmlrLldlYi5KYXZhU2NyaXB0U2VyaWFsaXplci5fc2VyaWFsaXplV2l0aEJ1aWxkZXIoYixhKTsKcmV0dXJuIGEudG9TdHJpbmcoKTsKfSxfc2VyaWFsaXplV2l0aEJ1aWxkZXI6ZnVuY3Rpb24oYSxiKXt2YXIgajsKc3dpdGNoKHR5cGVvZiBhKXtjYXNlIm9iamVjdCI6aWYoYSl7aWYoYS5jb25zdHJ1Y3Rvcj09QXJyYXkpe2IuYXBwZW5kKCJbIik7CmZvcihqPTA7Cmo8YS5sZW5ndGg7Cisrail7aWYoaj4wKXtiLmFwcGVuZCgiLCIpOwp9dGhpcy5fc2VyaWFsaXplV2l0aEJ1aWxkZXIoYVtqXSxiKTsKfWIuYXBwZW5kKCJdIik7Cn1lbHNle2lmKGEuY29uc3RydWN0b3I9PURhdGUpe2IuYXBwZW5kKCciXFwvRGF0ZSgnKTsKYi5hcHBlbmQoYS5nZXRUaW1lKCkpOwpiLmFwcGVuZCgnKVxcLyInKTsKYnJlYWs7Cn12YXIgZT1bXTsKdmFyIGc9MDsKZm9yKHZhciBkIGluIGEpe2lmKGQuc3RhcnRzV2l0aCgiJCIpKXtjb250aW51ZTsKfWVbZysrXT1kOwp9Yi5hcHBlbmQoInsiKTsKdmFyIGs9ZmFsc2U7CmZvcihqPTA7Cmo8ZzsKaisrKXt2YXIgaD1hW2Vbal1dOwppZih0eXBlb2YgaCE9PSJ1bmRlZmluZWQiJiZ0eXBlb2YgaCE9PSJmdW5jdGlvbiIpe2lmKGspe2IuYXBwZW5kKCIsIik7Cn1lbHNle2s9dHJ1ZTsKfXRoaXMuX3NlcmlhbGl6ZVdpdGhCdWlsZGVyKGVbal0sYik7CmIuYXBwZW5kKCI6Iik7CnRoaXMuX3NlcmlhbGl6ZVdpdGhCdWlsZGVyKGgsYik7Cn19Yi5hcHBlbmQoIn0iKTsKfX1lbHNle2IuYXBwZW5kKCJudWxsIik7Cn1icmVhazsKY2FzZSJudW1iZXIiOmlmKGlzRmluaXRlKGEpKXtiLmFwcGVuZChTdHJpbmcoYSkpOwp9ZWxzZXt0aHJvdyBFcnJvci5pbnZhbGlkT3BlcmF0aW9uKFN5cy5SZXMuY2Fubm90U2VyaWFsaXplTm9uRmluaXRlTnVtYmVycyk7Cn1icmVhazsKY2FzZSJzdHJpbmciOmIuYXBwZW5kKCciJyk7CmlmKFN5cy5Ccm93c2VyLmFnZW50PT09U3lzLkJyb3dzZXIuU2FmYXJpfHxUZWxlcmlrLldlYi5KYXZhU2NyaXB0U2VyaWFsaXplci5fc3RyaW5nUmVnRXgudGVzdChhKSl7dmFyIGY9YS5sZW5ndGg7CmZvcihqPTA7Cmo8ZjsKKytqKXt2YXIgYz1hLmNoYXJBdChqKTsKaWYoYz49IiAiKXtpZihjPT09IlxcInx8Yz09PSciJyl7Yi5hcHBlbmQoIlxcIik7Cn1iLmFwcGVuZChjKTsKfWVsc2V7c3dpdGNoKGMpe2Nhc2UiXGIiOmIuYXBwZW5kKCJcXGIiKTsKYnJlYWs7CmNhc2UiXGYiOmIuYXBwZW5kKCJcXGYiKTsKYnJlYWs7CmNhc2UiXG4iOmIuYXBwZW5kKCJcXG4iKTsKYnJlYWs7CmNhc2UiXHIiOmIuYXBwZW5kKCJcXHIiKTsKYnJlYWs7CmNhc2UiXHQiOmIuYXBwZW5kKCJcXHQiKTsKYnJlYWs7CmRlZmF1bHQ6Yi5hcHBlbmQoIlxcdTAwIik7CmlmKGMuY2hhckNvZGVBdCgpPDE2KXtiLmFwcGVuZCgiMCIpOwp9Yi5hcHBlbmQoYy5jaGFyQ29kZUF0KCkudG9TdHJpbmcoMTYpKTsKfX19fWVsc2V7Yi5hcHBlbmQoYSk7Cn1iLmFwcGVuZCgnIicpOwpicmVhazsKY2FzZSJib29sZWFuIjpiLmFwcGVuZChhLnRvU3RyaW5nKCkpOwpicmVhazsKZGVmYXVsdDpiLmFwcGVuZCgibnVsbCIpOwpicmVhazsKfX19OwpUZWxlcmlrLldlYi5VSS5DaGFuZ2VMb2c9ZnVuY3Rpb24oKXt0aGlzLl9vcENvZGVJbnNlcnQ9MTsKdGhpcy5fb3BDb2RlRGVsZXRlPTI7CnRoaXMuX29wQ29kZUNsZWFyPTM7CnRoaXMuX29wQ29kZVByb3BlcnR5Q2hhbmdlZD00Owp0aGlzLl9vcENvZGVSZW9yZGVyPTU7CnRoaXMuX2xvZ0VudHJpZXM9bnVsbDsKfTsKVGVsZXJpay5XZWIuVUkuQ2hhbmdlTG9nLnByb3RvdHlwZT17aW5pdGlhbGl6ZTpmdW5jdGlvbigpe3RoaXMuX2xvZ0VudHJpZXM9W107CnRoaXMuX3NlcmlhbGl6ZWRFbnRyaWVzPW51bGw7Cn0sbG9nSW5zZXJ0OmZ1bmN0aW9uKGIpe3ZhciBhPXt9OwphLlR5cGU9dGhpcy5fb3BDb2RlSW5zZXJ0OwphLkluZGV4PWIuX2dldEhpZXJhcmNoaWNhbEluZGV4KCk7CmEuRGF0YT1iLl9nZXREYXRhKCk7CkFycmF5LmFkZCh0aGlzLl9sb2dFbnRyaWVzLGEpOwp9LGxvZ0RlbGV0ZTpmdW5jdGlvbihiKXt2YXIgYT17fTsKYS5UeXBlPXRoaXMuX29wQ29kZURlbGV0ZTsKYS5JbmRleD1iLl9nZXRIaWVyYXJjaGljYWxJbmRleCgpOwpBcnJheS5hZGQodGhpcy5fbG9nRW50cmllcyxhKTsKfSxsb2dDbGVhcjpmdW5jdGlvbihiKXt2YXIgYT17fTsKYS5UeXBlPXRoaXMuX29wQ29kZUNsZWFyOwppZihiLl9nZXRIaWVyYXJjaGljYWxJbmRleCl7YS5JbmRleD1iLl9nZXRIaWVyYXJjaGljYWxJbmRleCgpOwp9QXJyYXkuYWRkKHRoaXMuX2xvZ0VudHJpZXMsYSk7Cn0sbG9nUHJvcGVydHlDaGFuZ2VkOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD17fTsKZC5UeXBlPXRoaXMuX29wQ29kZVByb3BlcnR5Q2hhbmdlZDsKZC5JbmRleD1hLl9nZXRIaWVyYXJjaGljYWxJbmRleCgpOwpkLkRhdGE9e307CmQuRGF0YVtiXT1jOwpBcnJheS5hZGQodGhpcy5fbG9nRW50cmllcyxkKTsKfSxsb2dSZW9yZGVyOmZ1bmN0aW9uKGEsYyxiKXtBcnJheS5hZGQodGhpcy5fbG9nRW50cmllcyx7VHlwZTp0aGlzLl9vcENvZGVSZW9yZGVyLEluZGV4OmMrIiIsRGF0YTp7TmV3SW5kZXg6YisiIn19KTsKfSxzZXJpYWxpemU6ZnVuY3Rpb24oKXtpZih0aGlzLl9sb2dFbnRyaWVzLmxlbmd0aD09MCl7aWYodGhpcy5fc2VyaWFsaXplZEVudHJpZXM9PW51bGwpe3JldHVybiJbXSI7Cn1yZXR1cm4gdGhpcy5fc2VyaWFsaXplZEVudHJpZXM7Cn12YXIgYT1UZWxlcmlrLldlYi5KYXZhU2NyaXB0U2VyaWFsaXplci5zZXJpYWxpemUodGhpcy5fbG9nRW50cmllcyk7CmlmKHRoaXMuX3NlcmlhbGl6ZWRFbnRyaWVzPT1udWxsKXt0aGlzLl9zZXJpYWxpemVkRW50cmllcz1hOwp9ZWxzZXt0aGlzLl9zZXJpYWxpemVkRW50cmllcz10aGlzLl9zZXJpYWxpemVkRW50cmllcy5zdWJzdHJpbmcoMCx0aGlzLl9zZXJpYWxpemVkRW50cmllcy5sZW5ndGgtMSkrIiwiK2Euc3Vic3RyaW5nKDEpOwp9dGhpcy5fbG9nRW50cmllcz1bXTsKcmV0dXJuIHRoaXMuX3NlcmlhbGl6ZWRFbnRyaWVzOwp9fTsKVGVsZXJpay5XZWIuVUkuQ2hhbmdlTG9nLnJlZ2lzdGVyQ2xhc3MoIlRlbGVyaWsuV2ViLlVJLkNoYW5nZUxvZyIpOwpUeXBlLnJlZ2lzdGVyTmFtZXNwYWNlKCJUZWxlcmlrLldlYi5VSSIpOwpUZWxlcmlrLldlYi5VSS5Qcm9wZXJ0eUJhZz1mdW5jdGlvbihhKXt0aGlzLl9kYXRhPXt9Owp0aGlzLl9vd25lcj1hOwp9OwpUZWxlcmlrLldlYi5VSS5Qcm9wZXJ0eUJhZy5wcm90b3R5cGU9e2dldFZhbHVlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5fZGF0YVthXTsKaWYodHlwZW9mKGMpPT09InVuZGVmaW5lZCIpe3JldHVybiBiOwp9cmV0dXJuIGM7Cn0sc2V0VmFsdWU6ZnVuY3Rpb24oYSxjLGIpe3RoaXMuX2RhdGFbYV09YzsKaWYoYil7dGhpcy5fb3duZXIuX25vdGlmeVByb3BlcnR5Q2hhbmdlZChhLGMpOwp9fSxsb2FkOmZ1bmN0aW9uKGEpe3RoaXMuX2RhdGE9YTsKfX07ClRlbGVyaWsuV2ViLlVJLkNvbnRyb2xJdGVtPWZ1bmN0aW9uKCl7dGhpcy5fa2V5PW51bGw7CnRoaXMuX2VsZW1lbnQ9bnVsbDsKdGhpcy5fcGFyZW50PW51bGw7CnRoaXMuX3RleHQ9bnVsbDsKdGhpcy5fY2hpbGRyZW49bnVsbDsKdGhpcy5fY2hpbGRDb250cm9sc0NyZWF0ZWQ9ZmFsc2U7CnRoaXMuX2l0ZW1EYXRhPW51bGw7CnRoaXMuX2NvbnRyb2w9bnVsbDsKdGhpcy5fcHJvcGVydGllcz1uZXcgVGVsZXJpay5XZWIuVUkuUHJvcGVydHlCYWcodGhpcyk7Cn07ClRlbGVyaWsuV2ViLlVJLkNvbnRyb2xJdGVtLnByb3RvdHlwZT17X3Nob3VsZE5hdmlnYXRlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRfbmF2aWdhdGVVcmwoKTsKaWYoIWEpe3JldHVybiBmYWxzZTsKfXJldHVybiAhYS5lbmRzV2l0aCgiIyIpOwp9LF9nZXROYXZpZ2F0ZVVybDpmdW5jdGlvbigpe2lmKHRoaXMuZ2V0X2xpbmtFbGVtZW50KCkpe3JldHVybiB0aGlzLl9wcm9wZXJ0aWVzLmdldFZhbHVlKCJuYXZpZ2F0ZVVybCIsdGhpcy5nZXRfbGlua0VsZW1lbnQoKS5nZXRBdHRyaWJ1dGUoImhyZWYiLDIpKTsKfXJldHVybiB0aGlzLl9wcm9wZXJ0aWVzLmdldFZhbHVlKCJuYXZpZ2F0ZVVybCIsbnVsbCk7Cn0sX2luaXRpYWxpemU6ZnVuY3Rpb24oYixhKXt0aGlzLnNldF9lbGVtZW50KGEpOwp0aGlzLl9wcm9wZXJ0aWVzLmxvYWQoYik7CmlmKGIuYXR0cmlidXRlcyl7dGhpcy5nZXRfYXR0cmlidXRlcygpLl9sb2FkKGIuYXR0cmlidXRlcyk7Cn10aGlzLl9pdGVtRGF0YT1iLml0ZW1zOwp9LF9kaXNwb3NlOmZ1bmN0aW9uKCl7aWYodGhpcy5fY2hpbGRyZW4pe3RoaXMuX2NoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24oYSl7YS5fZGlzcG9zZSgpOwp9KTsKfWlmKHRoaXMuX2VsZW1lbnQpe3RoaXMuX2VsZW1lbnQuX2l0ZW09bnVsbDsKdGhpcy5fZWxlbWVudD1udWxsOwp9aWYodGhpcy5fY29udHJvbCl7dGhpcy5fY29udHJvbD1udWxsOwp9fSxfaW5pdGlhbGl6ZVJlbmRlcmVkSXRlbTpmdW5jdGlvbigpe3ZhciBiPXRoaXMuX2NoaWxkcmVuOwppZighYnx8Yi5nZXRfY291bnQoKTwxKXtyZXR1cm47Cn12YXIgZT10aGlzLl9nZXRDaGlsZEVsZW1lbnRzKCk7CmZvcih2YXIgYz0wLGE9Yi5nZXRfY291bnQoKTsKYzxhOwpjKyspe3ZhciBkPWIuZ2V0SXRlbShjKTsKaWYoIWQuZ2V0X2VsZW1lbnQoKSl7ZC5zZXRfZWxlbWVudChlW2NdKTsKaWYodGhpcy5fc2hvdWxkSW5pdGlhbGl6ZUNoaWxkKGQpKXtkLl9pbml0aWFsaXplUmVuZGVyZWRJdGVtKCk7Cn19fX0sZmluZENvbnRyb2w6ZnVuY3Rpb24oYSl7cmV0dXJuICR0ZWxlcmlrLmZpbmRDb250cm9sKHRoaXMuZ2V0X2VsZW1lbnQoKSxhKTsKfSxnZXRfYXR0cmlidXRlczpmdW5jdGlvbigpe2lmKCF0aGlzLl9hdHRyaWJ1dGVzKXt0aGlzLl9hdHRyaWJ1dGVzPW5ldyBUZWxlcmlrLldlYi5VSS5BdHRyaWJ1dGVDb2xsZWN0aW9uKHRoaXMpOwp9cmV0dXJuIHRoaXMuX2F0dHJpYnV0ZXM7Cn0sZ2V0X2VsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZWxlbWVudDsKfSxzZXRfZWxlbWVudDpmdW5jdGlvbihhKXt0aGlzLl9lbGVtZW50PWE7CnRoaXMuX2VsZW1lbnQuX2l0ZW09dGhpczsKdGhpcy5fZWxlbWVudC5faXRlbVR5cGVOYW1lPU9iamVjdC5nZXRUeXBlTmFtZSh0aGlzKTsKfSxnZXRfcGFyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhcmVudDsKfSxzZXRfcGFyZW50OmZ1bmN0aW9uKGEpe3RoaXMuX3BhcmVudD1hOwp9LGdldF90ZXh0OmZ1bmN0aW9uKCl7aWYodGhpcy5fdGV4dCE9PW51bGwpe3JldHVybiB0aGlzLl90ZXh0Owp9aWYodGhpcy5fdGV4dD10aGlzLl9wcm9wZXJ0aWVzLmdldFZhbHVlKCJ0ZXh0IiwiIikpe3JldHVybiB0aGlzLl90ZXh0Owp9aWYoIXRoaXMuZ2V0X2VsZW1lbnQoKSl7cmV0dXJuIiI7Cn12YXIgYT10aGlzLmdldF90ZXh0RWxlbWVudCgpOwppZighYSl7cmV0dXJuIiI7Cn1pZih0eXBlb2YoYS5pbm5lclRleHQpIT0idW5kZWZpbmVkIil7dGhpcy5fdGV4dD1hLmlubmVyVGV4dDsKfWVsc2V7dGhpcy5fdGV4dD1hLnRleHRDb250ZW50Owp9aWYoJHRlbGVyaWsuaXNTYWZhcmkyKXt0aGlzLl90ZXh0PWEuaW5uZXJIVE1MOwp9cmV0dXJuIHRoaXMuX3RleHQ7Cn0sc2V0X3RleHQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRfdGV4dEVsZW1lbnQoKTsKaWYoYil7Yi5pbm5lckhUTUw9YTsKfXRoaXMuX3RleHQ9YTsKdGhpcy5fcHJvcGVydGllcy5zZXRWYWx1ZSgidGV4dCIsYSx0cnVlKTsKfSxnZXRfdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvcGVydGllcy5nZXRWYWx1ZSgidmFsdWUiLG51bGwpOwp9LHNldF92YWx1ZTpmdW5jdGlvbihhKXt0aGlzLl9wcm9wZXJ0aWVzLnNldFZhbHVlKCJ2YWx1ZSIsYSx0cnVlKTsKfSxnZXRfaXRlbURhdGE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXRlbURhdGE7Cn0sZ2V0X2luZGV4OmZ1bmN0aW9uKCl7aWYoIXRoaXMuZ2V0X3BhcmVudCgpKXtyZXR1cm4gLTE7Cn1yZXR1cm4gdGhpcy5nZXRfcGFyZW50KCkuX2dldENoaWxkcmVuKCkuaW5kZXhPZih0aGlzKTsKfSxzZXRfZW5hYmxlZDpmdW5jdGlvbihhKXt0aGlzLl9wcm9wZXJ0aWVzLnNldFZhbHVlKCJlbmFibGVkIixhLHRydWUpOwp9LGdldF9lbmFibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Byb3BlcnRpZXMuZ2V0VmFsdWUoImVuYWJsZWQiLHRydWUpPT10cnVlOwp9LGdldF9pc0VuYWJsZWQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl9nZXRDb250cm9sKCk7CmlmKGEpe3JldHVybiBhLmdldF9lbmFibGVkKCkmJnRoaXMuZ2V0X2VuYWJsZWQoKTsKfXJldHVybiB0aGlzLmdldF9lbmFibGVkKCk7Cn0sc2V0X3Zpc2libGU6ZnVuY3Rpb24oYSl7dGhpcy5fcHJvcGVydGllcy5zZXRWYWx1ZSgidmlzaWJsZSIsYSk7Cn0sZ2V0X3Zpc2libGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvcGVydGllcy5nZXRWYWx1ZSgidmlzaWJsZSIsdHJ1ZSk7Cn0sZ2V0X2xldmVsOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRfcGFyZW50KCk7CnZhciBiPTA7CndoaWxlKGEpe2lmKFRlbGVyaWsuV2ViLlVJLkNvbnRyb2xJdGVtQ29udGFpbmVyLmlzSW5zdGFuY2VPZlR5cGUoYSkpe3JldHVybiBiOwp9YisrOwphPWEuZ2V0X3BhcmVudCgpOwp9cmV0dXJuIGI7Cn0sZ2V0X2lzTGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldF9pbmRleCgpPT10aGlzLmdldF9wYXJlbnQoKS5fZ2V0Q2hpbGRyZW4oKS5nZXRfY291bnQoKS0xOwp9LGdldF9pc0ZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0X2luZGV4KCk9PTA7Cn0sZ2V0X25leHRTaWJsaW5nOmZ1bmN0aW9uKCl7aWYoIXRoaXMuZ2V0X3BhcmVudCgpKXtyZXR1cm4gbnVsbDsKfXJldHVybiB0aGlzLmdldF9wYXJlbnQoKS5fZ2V0Q2hpbGRyZW4oKS5nZXRJdGVtKHRoaXMuZ2V0X2luZGV4KCkrMSk7Cn0sZ2V0X3ByZXZpb3VzU2libGluZzpmdW5jdGlvbigpe2lmKCF0aGlzLmdldF9wYXJlbnQoKSl7cmV0dXJuIG51bGw7Cn1yZXR1cm4gdGhpcy5nZXRfcGFyZW50KCkuX2dldENoaWxkcmVuKCkuZ2V0SXRlbSh0aGlzLmdldF9pbmRleCgpLTEpOwp9LHRvSnNvblN0cmluZzpmdW5jdGlvbigpe3JldHVybiBTeXMuU2VyaWFsaXphdGlvbi5KYXZhU2NyaXB0U2VyaWFsaXplci5zZXJpYWxpemUodGhpcy5fZ2V0RGF0YSgpKTsKfSxfZ2V0SGllcmFyY2hpY2FsSW5kZXg6ZnVuY3Rpb24oKXt2YXIgYz1bXTsKdmFyIGI9dGhpcy5fZ2V0Q29udHJvbCgpOwp2YXIgYT10aGlzOwp3aGlsZShhIT1iKXtjW2MubGVuZ3RoXT1hLmdldF9pbmRleCgpOwphPWEuZ2V0X3BhcmVudCgpOwp9cmV0dXJuIGMucmV2ZXJzZSgpLmpvaW4oIjoiKTsKfSxfZ2V0Q2hpbGRyZW46ZnVuY3Rpb24oKXt0aGlzLl9lbnN1cmVDaGlsZENvbnRyb2xzKCk7CnJldHVybiB0aGlzLl9jaGlsZHJlbjsKfSxfZW5zdXJlQ2hpbGRDb250cm9sczpmdW5jdGlvbigpe2lmKCF0aGlzLl9jaGlsZENvbnRyb2xzQ3JlYXRlZCl7dGhpcy5fY3JlYXRlQ2hpbGRDb250cm9scygpOwp0aGlzLl9jaGlsZENvbnRyb2xzQ3JlYXRlZD10cnVlOwp9fSxfc2V0Q3NzQ2xhc3M6ZnVuY3Rpb24oYixhKXtpZihiLmNsYXNzTmFtZSE9YSl7Yi5jbGFzc05hbWU9YTsKfX0sX2NyZWF0ZUNoaWxkQ29udHJvbHM6ZnVuY3Rpb24oKXt0aGlzLl9jaGlsZHJlbj10aGlzLl9jcmVhdGVJdGVtQ29sbGVjdGlvbigpOwp9LF9jcmVhdGVJdGVtQ29sbGVjdGlvbjpmdW5jdGlvbigpe30sX2dldENvbnRyb2w6ZnVuY3Rpb24oKXtpZighdGhpcy5fY29udHJvbCl7dmFyIGE9dGhpcy5nZXRfcGFyZW50KCk7CmlmKGEpe2lmKFRlbGVyaWsuV2ViLlVJLkNvbnRyb2xJdGVtQ29udGFpbmVyLmlzSW5zdGFuY2VPZlR5cGUoYSkpe3RoaXMuX2NvbnRyb2w9YTsKfWVsc2V7dGhpcy5fY29udHJvbD1hLl9nZXRDb250cm9sKCk7Cn19fXJldHVybiB0aGlzLl9jb250cm9sOwp9LF9nZXRBbGxJdGVtczpmdW5jdGlvbigpe3ZhciBhPVtdOwp0aGlzLl9nZXRBbGxJdGVtc1JlY3Vyc2l2ZShhLHRoaXMpOwpyZXR1cm4gYTsKfSxfZ2V0QWxsSXRlbXNSZWN1cnNpdmU6ZnVuY3Rpb24oYSxiKXt2YXIgZT1iLl9nZXRDaGlsZHJlbigpOwpmb3IodmFyIGM9MDsKYzxlLmdldF9jb3VudCgpOwpjKyspe3ZhciBkPWUuZ2V0SXRlbShjKTsKQXJyYXkuYWRkKGEsZCk7CnRoaXMuX2dldEFsbEl0ZW1zUmVjdXJzaXZlKGEsZCk7Cn19LF9nZXREYXRhOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fcHJvcGVydGllcy5fZGF0YTsKZGVsZXRlIGEuaXRlbXM7CmEudGV4dD10aGlzLmdldF90ZXh0KCk7CmlmKHRoaXMuZ2V0X2F0dHJpYnV0ZXMoKS5nZXRfY291bnQoKT4wKXthLmF0dHJpYnV0ZXM9dGhpcy5nZXRfYXR0cmlidXRlcygpLl9kYXRhOwp9cmV0dXJuIGE7Cn0sX25vdGlmeVByb3BlcnR5Q2hhbmdlZDpmdW5jdGlvbihiLGMpe3ZhciBhPXRoaXMuX2dldENvbnRyb2woKTsKaWYoYSl7YS5faXRlbVByb3BlcnR5Q2hhbmdlZCh0aGlzLGIsYyk7Cn19LF9sb2FkRnJvbURpY3Rpb25hcnk6ZnVuY3Rpb24oYixhKXtpZih0eXBlb2YoYi5UZXh0KSE9InVuZGVmaW5lZCIpe3RoaXMuc2V0X3RleHQoYi5UZXh0KTsKfWlmKHR5cGVvZihiLktleSkhPSJ1bmRlZmluZWQiKXt0aGlzLnNldF90ZXh0KGIuS2V5KTsKfWlmKHR5cGVvZihiLlZhbHVlKSE9InVuZGVmaW5lZCImJmIuVmFsdWUhPT0iIil7dGhpcy5zZXRfdmFsdWUoYi5WYWx1ZSk7Cn1pZih0eXBlb2YoYi5FbmFibGVkKSE9InVuZGVmaW5lZCImJmIuRW5hYmxlZCE9PXRydWUpe3RoaXMuc2V0X2VuYWJsZWQoYi5FbmFibGVkKTsKfWlmKGIuQXR0cmlidXRlcyl7dGhpcy5nZXRfYXR0cmlidXRlcygpLl9sb2FkKGIuQXR0cmlidXRlcyxhKTsKfX0sX2NyZWF0ZURvbUVsZW1lbnQ6ZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ1bCIpOwp2YXIgYj1bXTsKdGhpcy5fcmVuZGVyKGIpOwphLmlubmVySFRNTD1iLmpvaW4oIiIpOwpyZXR1cm4gYS5maXJzdENoaWxkOwp9LGdldF9jc3NDbGFzczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wcm9wZXJ0aWVzLmdldFZhbHVlKCJjc3NDbGFzcyIsIiIpOwp9LHNldF9jc3NDbGFzczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldF9jc3NDbGFzcygpOwp0aGlzLl9wcm9wZXJ0aWVzLnNldFZhbHVlKCJjc3NDbGFzcyIsYSx0cnVlKTsKdGhpcy5fYXBwbHlDc3NDbGFzcyhhLGIpOwp9LGdldF9rZXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvcGVydGllcy5nZXRWYWx1ZSgia2V5IixudWxsKTsKfSxzZXRfa2V5OmZ1bmN0aW9uKGEpe3RoaXMuX3Byb3BlcnRpZXMuc2V0VmFsdWUoImtleSIsYSx0cnVlKTsKfSxfYXBwbHlDc3NDbGFzczpmdW5jdGlvbigpe319OwpUZWxlcmlrLldlYi5VSS5Db250cm9sSXRlbS5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5Db250cm9sSXRlbSIpOwpUeXBlLnJlZ2lzdGVyTmFtZXNwYWNlKCJUZWxlcmlrLldlYi5VSSIpOwpUZWxlcmlrLldlYi5VSS5Db250cm9sSXRlbUNvbGxlY3Rpb249ZnVuY3Rpb24oYSl7dGhpcy5fYXJyYXk9bmV3IEFycmF5KCk7CnRoaXMuX3BhcmVudD1hOwp0aGlzLl9jb250cm9sPW51bGw7Cn07ClRlbGVyaWsuV2ViLlVJLkNvbnRyb2xJdGVtQ29sbGVjdGlvbi5wcm90b3R5cGU9e2FkZDpmdW5jdGlvbihiKXt2YXIgYT10aGlzLl9hcnJheS5sZW5ndGg7CnRoaXMuaW5zZXJ0KGEsYik7Cn0saW5zZXJ0OmZ1bmN0aW9uKGIsYSl7dmFyIGM9YS5nZXRfcGFyZW50KCk7CnZhciBkPXRoaXMuX3BhcmVudC5fZ2V0Q29udHJvbCgpOwppZihjKXtjLl9nZXRDaGlsZHJlbigpLnJlbW92ZShhKTsKfWlmKGQpe2QuX2NoaWxkSW5zZXJ0aW5nKGIsYSx0aGlzLl9wYXJlbnQpOwp9QXJyYXkuaW5zZXJ0KHRoaXMuX2FycmF5LGIsYSk7CmEuc2V0X3BhcmVudCh0aGlzLl9wYXJlbnQpOwppZihkKXtkLl9jaGlsZEluc2VydGVkKGIsYSx0aGlzLl9wYXJlbnQpOwpkLl9sb2dJbnNlcnRlZChhKTsKfX0scmVtb3ZlOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMuX3BhcmVudC5fZ2V0Q29udHJvbCgpOwppZihhKXthLl9jaGlsZFJlbW92aW5nKGIpOwp9QXJyYXkucmVtb3ZlKHRoaXMuX2FycmF5LGIpOwppZihhKXthLl9jaGlsZFJlbW92ZWQoYix0aGlzLl9wYXJlbnQpOwp9Yi5zZXRfcGFyZW50KG51bGwpOwpiLl9jb250cm9sPW51bGw7Cn0scmVtb3ZlQXQ6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5nZXRJdGVtKGIpOwppZihhKXt0aGlzLnJlbW92ZShhKTsKfX0sY2xlYXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl9wYXJlbnQuX2dldENvbnRyb2woKTsKaWYoYSl7YS5fbG9nQ2xlYXJpbmcodGhpcy5fcGFyZW50KTsKYS5fY2hpbGRyZW5DbGVhcmVkKHRoaXMuX3BhcmVudCk7Cn10aGlzLl9hcnJheT1uZXcgQXJyYXkoKTsKfSxnZXRfY291bnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXJyYXkubGVuZ3RoOwp9LGdldEl0ZW06ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX2FycmF5W2FdOwp9LGluZGV4T2Y6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz10aGlzLl9hcnJheS5sZW5ndGg7CmI8YzsKYisrKXtpZih0aGlzLl9hcnJheVtiXT09PWEpe3JldHVybiBiOwp9fXJldHVybiAtMTsKfSxmb3JFYWNoOmZ1bmN0aW9uKGMpe2Zvcih2YXIgYj0wLGE9dGhpcy5nZXRfY291bnQoKTsKYjxhOwpiKyspe2ModGhpcy5fYXJyYXlbYl0pOwp9fSx0b0FycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FycmF5LnNsaWNlKDApOwp9fTsKVGVsZXJpay5XZWIuVUkuQ29udHJvbEl0ZW1Db2xsZWN0aW9uLnJlZ2lzdGVyQ2xhc3MoIlRlbGVyaWsuV2ViLlVJLkNvbnRyb2xJdGVtQ29sbGVjdGlvbiIpOwpmdW5jdGlvbiBXZWJGb3JtX0NhbGxiYWNrQ29tcGxldGUoKXtmb3IodmFyIGI9MDsKYjxfX3BlbmRpbmdDYWxsYmFja3MubGVuZ3RoOwpiKyspe3ZhciBhPV9fcGVuZGluZ0NhbGxiYWNrc1tiXTsKaWYoYSYmYS54bWxSZXF1ZXN0JiYoYS54bWxSZXF1ZXN0LnJlYWR5U3RhdGU9PTQpKXtfX3BlbmRpbmdDYWxsYmFja3NbYl09bnVsbDsKV2ViRm9ybV9FeGVjdXRlQ2FsbGJhY2soYSk7CmlmKCFhLmFzeW5jKXtfX3N5bmNocm9ub3VzQ2FsbEJhY2tJbmRleD0tMTsKfXZhciBjPSJfX0NBTExCQUNLRlJBTUUiK2I7CnZhciBkPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGMpOwppZihkKXtkLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZCk7Cn19fX1UeXBlLnJlZ2lzdGVyTmFtZXNwYWNlKCJUZWxlcmlrLldlYi5VSSIpOwpUZWxlcmlrLldlYi5VSS5Db250cm9sSXRlbUNvbnRhaW5lcj1mdW5jdGlvbihhKXtUZWxlcmlrLldlYi5VSS5Db250cm9sSXRlbUNvbnRhaW5lci5pbml0aWFsaXplQmFzZSh0aGlzLFthXSk7CnRoaXMuX2NoaWxkQ29udHJvbHNDcmVhdGVkPWZhbHNlOwp0aGlzLl9lbmFibGVkPXRydWU7CnRoaXMuX2xvZz1uZXcgVGVsZXJpay5XZWIuVUkuQ2hhbmdlTG9nKCk7CnRoaXMuX2VuYWJsZUNsaWVudFN0YXRlUGVyc2lzdGVuY2U9ZmFsc2U7CnRoaXMuX2V2ZW50TWFwPW5ldyBUZWxlcmlrLldlYi5VSS5FdmVudE1hcCgpOwp0aGlzLl9hdHRyaWJ1dGVzPW5ldyBUZWxlcmlrLldlYi5VSS5BdHRyaWJ1dGVDb2xsZWN0aW9uKHRoaXMpOwp0aGlzLl9jaGlsZHJlbj1udWxsOwp0aGlzLl9vZGF0YUNsaWVudFNldHRpbmdzPW51bGw7Cn07ClRlbGVyaWsuV2ViLlVJLkNvbnRyb2xJdGVtQ29udGFpbmVyLnByb3RvdHlwZT17aW5pdGlhbGl6ZTpmdW5jdGlvbigpe1RlbGVyaWsuV2ViLlVJLkNvbnRyb2xJdGVtQ29udGFpbmVyLmNhbGxCYXNlTWV0aG9kKHRoaXMsImluaXRpYWxpemUiKTsKdGhpcy5fZW5zdXJlQ2hpbGRDb250cm9scygpOwp0aGlzLl9sb2cuaW5pdGlhbGl6ZSgpOwp0aGlzLl9pbml0aWFsaXplRXZlbnRNYXAoKTsKaWYodGhpcy5nZXRfaXNVc2luZ09EYXRhU291cmNlKCkpe3RoaXMuX2luaXRpYWxpemVPRGF0YVNvdXJjZUJpbmRlcigpOwp9fSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5fZXZlbnRNYXAuZGlzcG9zZSgpOwppZih0aGlzLl9jaGlsZENvbnRyb2xzQ3JlYXRlZCl7Zm9yKHZhciBhPTA7CmE8dGhpcy5fZ2V0Q2hpbGRyZW4oKS5nZXRfY291bnQoKTsKYSsrKXt0aGlzLl9nZXRDaGlsZHJlbigpLmdldEl0ZW0oYSkuX2Rpc3Bvc2UoKTsKfX1UZWxlcmlrLldlYi5VSS5Db250cm9sSXRlbUNvbnRhaW5lci5jYWxsQmFzZU1ldGhvZCh0aGlzLCJkaXNwb3NlIik7Cn0sdHJhY2tDaGFuZ2VzOmZ1bmN0aW9uKCl7dGhpcy5fZW5hYmxlQ2xpZW50U3RhdGVQZXJzaXN0ZW5jZT10cnVlOwp9LHNldF9lbmFibGVkOmZ1bmN0aW9uKGEpe3RoaXMuX2VuYWJsZWQ9YTsKfSxnZXRfZW5hYmxlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmFibGVkOwp9LGNvbW1pdENoYW5nZXM6ZnVuY3Rpb24oKXt0aGlzLnVwZGF0ZUNsaWVudFN0YXRlKCk7CnRoaXMuX2VuYWJsZUNsaWVudFN0YXRlUGVyc2lzdGVuY2U9ZmFsc2U7Cn0sZ2V0X2F0dHJpYnV0ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXR0cmlidXRlczsKfSxzZXRfYXR0cmlidXRlczpmdW5jdGlvbihhKXt0aGlzLl9hdHRyaWJ1dGVzLl9sb2FkKGEpOwp9LGdldF9pc1VzaW5nT0RhdGFTb3VyY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb2RhdGFDbGllbnRTZXR0aW5ncyE9bnVsbDsKfSxnZXRfb2RhdGFDbGllbnRTZXR0aW5nczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vZGF0YUNsaWVudFNldHRpbmdzOwp9LHNldF9vZGF0YUNsaWVudFNldHRpbmdzOmZ1bmN0aW9uKGEpe3RoaXMuX29kYXRhQ2xpZW50U2V0dGluZ3M9YTsKfSxfaW5pdGlhbGl6ZUV2ZW50TWFwOmZ1bmN0aW9uKCl7dGhpcy5fZXZlbnRNYXAuaW5pdGlhbGl6ZSh0aGlzKTsKfSxfaW5pdGlhbGl6ZU9EYXRhU291cmNlQmluZGVyOmZ1bmN0aW9uKCl7fSxfZ2V0Q2hpbGRyZW46ZnVuY3Rpb24oKXt0aGlzLl9lbnN1cmVDaGlsZENvbnRyb2xzKCk7CnJldHVybiB0aGlzLl9jaGlsZHJlbjsKfSxfZXh0cmFjdEVycm9yTWVzc2FnZTpmdW5jdGlvbihhKXtpZihhLmdldF9tZXNzYWdlKXtyZXR1cm4gYS5nZXRfbWVzc2FnZSgpOwp9ZWxzZXtyZXR1cm4gYS5yZXBsYWNlKC8oXGQqXHwuKikvLCIiKTsKfX0sX25vdGlmeVByb3BlcnR5Q2hhbmdlZDpmdW5jdGlvbihhLGIpe30sX2NoaWxkSW5zZXJ0aW5nOmZ1bmN0aW9uKGIsYSxjKXt9LF9jaGlsZEluc2VydGVkOmZ1bmN0aW9uKGIsYSxjKXtpZighYy5fY2hpbGRDb250cm9sc0NyZWF0ZWQpe3JldHVybjsKfWlmKCFjLmdldF9lbGVtZW50KCkpe3JldHVybjsKfXZhciBlPWEuX2NyZWF0ZURvbUVsZW1lbnQoKTsKdmFyIGQ9ZS5wYXJlbnROb2RlOwp0aGlzLl9hdHRhY2hDaGlsZEl0ZW0oYSxlLGMpOwp0aGlzLl9kZXN0cm95RG9tRWxlbWVudChkKTsKaWYoIWEuZ2V0X2VsZW1lbnQoKSl7YS5zZXRfZWxlbWVudChlKTsKYS5faW5pdGlhbGl6ZVJlbmRlcmVkSXRlbSgpOwp9ZWxzZXthLnNldF9lbGVtZW50KGUpOwp9fSxfYXR0YWNoQ2hpbGRJdGVtOmZ1bmN0aW9uKGIsYSxlKXt2YXIgZD1lLmdldF9jaGlsZExpc3RFbGVtZW50KCk7CmlmKCFkKXtkPWUuX2NyZWF0ZUNoaWxkTGlzdEVsZW1lbnQoKTsKfXZhciBjPWIuZ2V0X25leHRTaWJsaW5nKCk7CnZhciBmPWM/Yy5nZXRfZWxlbWVudCgpOm51bGw7CmUuZ2V0X2NoaWxkTGlzdEVsZW1lbnQoKS5pbnNlcnRCZWZvcmUoYSxmKTsKfSxfZGVzdHJveURvbUVsZW1lbnQ6ZnVuY3Rpb24oYSl7dmFyIGM9InJhZENvbnRyb2xzRWxlbWVudENvbnRhaW5lciI7CnZhciBiPSRnZXQoYyk7CmlmKCFiKXtiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwpiLmlkPWM7CmIuc3R5bGUuZGlzcGxheT0ibm9uZSI7CmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYik7Cn1iLmFwcGVuZENoaWxkKGEpOwpiLmlubmVySFRNTD0iIjsKfSxfY2hpbGRyZW5DbGVhcmVkOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wOwpiPGEuX2dldENoaWxkcmVuKCkuZ2V0X2NvdW50KCk7CmIrKyl7YS5fZ2V0Q2hpbGRyZW4oKS5nZXRJdGVtKGIpLl9kaXNwb3NlKCk7Cn12YXIgYz1hLmdldF9jaGlsZExpc3RFbGVtZW50KCk7CmlmKGMpe2MuaW5uZXJIVE1MPSIiOwp9fSxfY2hpbGRSZW1vdmluZzpmdW5jdGlvbihhKXt0aGlzLl9sb2dSZW1vdmluZyhhKTsKfSxfY2hpbGRSZW1vdmVkOmZ1bmN0aW9uKGIsYSl7Yi5fZGlzcG9zZSgpOwp9LF9jcmVhdGVDaGlsZExpc3RFbGVtZW50OmZ1bmN0aW9uKCl7dGhyb3cgRXJyb3Iubm90SW1wbGVtZW50ZWQoKTsKfSxfY3JlYXRlRG9tRWxlbWVudDpmdW5jdGlvbigpe3Rocm93IEVycm9yLm5vdEltcGxlbWVudGVkKCk7Cn0sX2dldENvbnRyb2w6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpczsKfSxfbG9nSW5zZXJ0ZWQ6ZnVuY3Rpb24oYSl7aWYoIWEuZ2V0X3BhcmVudCgpLl9jaGlsZENvbnRyb2xzQ3JlYXRlZHx8IXRoaXMuX2VuYWJsZUNsaWVudFN0YXRlUGVyc2lzdGVuY2Upe3JldHVybjsKfXRoaXMuX2xvZy5sb2dJbnNlcnQoYSk7CnZhciBjPWEuX2dldEFsbEl0ZW1zKCk7CmZvcih2YXIgYj0wOwpiPGMubGVuZ3RoOwpiKyspe3RoaXMuX2xvZy5sb2dJbnNlcnQoY1tiXSk7Cn19LF9sb2dSZW1vdmluZzpmdW5jdGlvbihhKXtpZih0aGlzLl9lbmFibGVDbGllbnRTdGF0ZVBlcnNpc3RlbmNlKXt0aGlzLl9sb2cubG9nRGVsZXRlKGEpOwp9fSxfbG9nQ2xlYXJpbmc6ZnVuY3Rpb24oYSl7aWYodGhpcy5fZW5hYmxlQ2xpZW50U3RhdGVQZXJzaXN0ZW5jZSl7dGhpcy5fbG9nLmxvZ0NsZWFyKGEpOwp9fSxfaXRlbVByb3BlcnR5Q2hhbmdlZDpmdW5jdGlvbihhLGIsYyl7aWYodGhpcy5fZW5hYmxlQ2xpZW50U3RhdGVQZXJzaXN0ZW5jZSl7dGhpcy5fbG9nLmxvZ1Byb3BlcnR5Q2hhbmdlZChhLGIsYyk7Cn19LF9lbnN1cmVDaGlsZENvbnRyb2xzOmZ1bmN0aW9uKCl7aWYoIXRoaXMuX2NoaWxkQ29udHJvbHNDcmVhdGVkKXt0aGlzLl9jcmVhdGVDaGlsZENvbnRyb2xzKCk7CnRoaXMuX2NoaWxkQ29udHJvbHNDcmVhdGVkPXRydWU7Cn19LF9jcmVhdGVDaGlsZENvbnRyb2xzOmZ1bmN0aW9uKCl7dGhyb3cgRXJyb3Iubm90SW1wbGVtZW50ZWQoKTsKfSxfZXh0cmFjdEl0ZW1Gcm9tRG9tRWxlbWVudDpmdW5jdGlvbihhKXt0aGlzLl9lbnN1cmVDaGlsZENvbnRyb2xzKCk7CndoaWxlKGEmJmEubm9kZVR5cGUhPT05KXtpZihhLl9pdGVtJiZ0aGlzLl92ZXJpZnlDaGlsZFR5cGUoYS5faXRlbVR5cGVOYW1lKSl7cmV0dXJuIGEuX2l0ZW07Cn1hPWEucGFyZW50Tm9kZTsKfXJldHVybiBudWxsOwp9LF92ZXJpZnlDaGlsZFR5cGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT10aGlzLl9jaGlsZFR5cGVOYW1lOwp9LF9nZXRBbGxJdGVtczpmdW5jdGlvbigpe3ZhciBiPVtdOwpmb3IodmFyIGM9MDsKYzx0aGlzLl9nZXRDaGlsZHJlbigpLmdldF9jb3VudCgpOwpjKyspe3ZhciBhPXRoaXMuX2dldENoaWxkcmVuKCkuZ2V0SXRlbShjKTsKQXJyYXkuYWRkKGIsYSk7CkFycmF5LmFkZFJhbmdlKGIsYS5fZ2V0QWxsSXRlbXMoKSk7Cn1yZXR1cm4gYjsKfSxfZmluZEl0ZW1CeVRleHQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fZ2V0QWxsSXRlbXMoKTsKZm9yKHZhciBjPTA7CmM8Yi5sZW5ndGg7CmMrKyl7aWYoYltjXS5nZXRfdGV4dCgpPT1hKXtyZXR1cm4gYltjXTsKfX1yZXR1cm4gbnVsbDsKfSxfZmluZEl0ZW1CeVZhbHVlOmZ1bmN0aW9uKGMpe3ZhciBhPXRoaXMuX2dldEFsbEl0ZW1zKCk7CmZvcih2YXIgYj0wOwpiPGEubGVuZ3RoOwpiKyspe2lmKGFbYl0uZ2V0X3ZhbHVlKCk9PWMpe3JldHVybiBhW2JdOwp9fXJldHVybiBudWxsOwp9LF9maW5kSXRlbUJ5QXR0cmlidXRlOmZ1bmN0aW9uKGIsZCl7dmFyIGE9dGhpcy5fZ2V0QWxsSXRlbXMoKTsKZm9yKHZhciBjPTA7CmM8YS5sZW5ndGg7CmMrKyl7aWYoYVtjXS5nZXRfYXR0cmlidXRlcygpLmdldEF0dHJpYnV0ZShiKT09ZCl7cmV0dXJuIGFbY107Cn19cmV0dXJuIG51bGw7Cn0sX2ZpbmRJdGVtQnlBYnNvbHV0ZVVybDpmdW5jdGlvbihjKXt2YXIgYT10aGlzLl9nZXRBbGxJdGVtcygpOwpmb3IodmFyIGI9MDsKYjxhLmxlbmd0aDsKYisrKXtpZihhW2JdLmdldF9saW5rRWxlbWVudCgpJiZhW2JdLmdldF9saW5rRWxlbWVudCgpLmhyZWY9PWMpe3JldHVybiBhW2JdOwp9fXJldHVybiBudWxsOwp9LF9maW5kSXRlbUJ5VXJsOmZ1bmN0aW9uKGMpe3ZhciBhPXRoaXMuX2dldEFsbEl0ZW1zKCk7CmZvcih2YXIgYj0wOwpiPGEubGVuZ3RoOwpiKyspe2lmKGFbYl0uZ2V0X25hdmlnYXRlVXJsKCk9PWMpe3JldHVybiBhW2JdOwp9fXJldHVybiBudWxsOwp9LF9maW5kSXRlbUJ5SGllcmFyY2hpY2FsSW5kZXg6ZnVuY3Rpb24oZSl7dmFyIGE9bnVsbDsKdmFyIGY9dGhpczsKdmFyIGI9ZS5zcGxpdCgiOiIpOwpmb3IodmFyIGQ9MDsKZDxiLmxlbmd0aDsKZCsrKXt2YXIgYz1wYXJzZUludChiW2RdKTsKaWYoZi5fZ2V0Q2hpbGRyZW4oKS5nZXRfY291bnQoKTw9Yyl7cmV0dXJuIG51bGw7Cn1hPWYuX2dldENoaWxkcmVuKCkuZ2V0SXRlbShjKTsKZj1hOwp9cmV0dXJuIGE7Cn19OwpUZWxlcmlrLldlYi5VSS5Db250cm9sSXRlbUNvbnRhaW5lci5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5Db250cm9sSXRlbUNvbnRhaW5lciIsVGVsZXJpay5XZWIuVUkuUmFkV2ViQ29udHJvbCk7ClR5cGUucmVnaXN0ZXJOYW1lc3BhY2UoIlRlbGVyaWsuV2ViLlVJIik7ClRlbGVyaWsuV2ViLlVJLkV2ZW50TWFwPWZ1bmN0aW9uKCl7dGhpcy5fb3duZXI9bnVsbDsKdGhpcy5fZWxlbWVudD1udWxsOwp0aGlzLl9ldmVudE1hcD17fTsKdGhpcy5fb25Eb21FdmVudERlbGVnYXRlPW51bGw7CnRoaXMuX2Jyb3dzZXJIYW5kbGVycz17fTsKfTsKVGVsZXJpay5XZWIuVUkuRXZlbnRNYXAucHJvdG90eXBlPXtpbml0aWFsaXplOmZ1bmN0aW9uKGIsYSl7dGhpcy5fb3duZXI9YjsKaWYoIWEpe2E9dGhpcy5fb3duZXIuZ2V0X2VsZW1lbnQoKTsKfXRoaXMuX2VsZW1lbnQ9YTsKfSxza2lwRWxlbWVudDpmdW5jdGlvbihhLGYpe3ZhciBiPWEudGFyZ2V0OwppZihiLm5vZGVUeXBlPT0zKXtyZXR1cm4gZmFsc2U7Cn12YXIgZD1iLnRhZ05hbWUudG9Mb3dlckNhc2UoKTsKdmFyIGM9Yi5jbGFzc05hbWU7CmlmKGQ9PSJzZWxlY3QiKXtyZXR1cm4gdHJ1ZTsKfWlmKGQ9PSJvcHRpb24iKXtyZXR1cm4gdHJ1ZTsKfWlmKGQ9PSJhIiYmKCFmfHxjLmluZGV4T2YoZik8MCkpe3JldHVybiB0cnVlOwp9aWYoZD09ImlucHV0Iil7cmV0dXJuIHRydWU7Cn1pZihkPT0ibGFiZWwiKXtyZXR1cm4gdHJ1ZTsKfWlmKGQ9PSJ0ZXh0YXJlYSIpe3JldHVybiB0cnVlOwp9aWYoZD09ImJ1dHRvbiIpe3JldHVybiB0cnVlOwp9cmV0dXJuIGZhbHNlOwp9LGRpc3Bvc2U6ZnVuY3Rpb24oKXtpZih0aGlzLl9vbkRvbUV2ZW50RGVsZWdhdGUpe2Zvcih2YXIgYSBpbiB0aGlzLl9ldmVudE1hcCl7aWYodGhpcy5fc2hvdWxkVXNlRXZlbnRDYXB0dXJlKGEpKXt2YXIgZD10aGlzLl9icm93c2VySGFuZGxlcnNbYV07CnRoaXMuX2VsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLGQsdHJ1ZSk7Cn1lbHNleyR0ZWxlcmlrLnJlbW92ZUhhbmRsZXIodGhpcy5fZWxlbWVudCxhLHRoaXMuX29uRG9tRXZlbnREZWxlZ2F0ZSk7Cn19dGhpcy5fb25Eb21FdmVudERlbGVnYXRlPW51bGw7CnZhciBiPXRydWU7CmlmKHRoaXMuX2VsZW1lbnQuX2V2ZW50cyl7Zm9yKHZhciBjIGluIHRoaXMuX2VsZW1lbnQuX2V2ZW50cyl7aWYodGhpcy5fZWxlbWVudC5fZXZlbnRzW2NdLmxlbmd0aD4wKXtiPWZhbHNlOwpicmVhazsKfX1pZihiKXt0aGlzLl9lbGVtZW50Ll9ldmVudHM9bnVsbDsKfX19fSxhZGRIYW5kbGVyRm9yQ2xhc3NOYW1lOmZ1bmN0aW9uKGcsZSxmKXtpZih0eXBlb2YodGhpcy5fZXZlbnRNYXBbZ10pPT0idW5kZWZpbmVkIil7dGhpcy5fZXZlbnRNYXBbZ109e307CmlmKHRoaXMuX3Nob3VsZFVzZUV2ZW50Q2FwdHVyZShnKSl7dmFyIGM9dGhpcy5fZ2V0RG9tRXZlbnREZWxlZ2F0ZSgpOwp2YXIgYj10aGlzLl9lbGVtZW50Owp2YXIgYT1mdW5jdGlvbihoKXtyZXR1cm4gYy5jYWxsKGIsbmV3IFN5cy5VSS5Eb21FdmVudChoKSk7Cn07CnRoaXMuX2Jyb3dzZXJIYW5kbGVyc1tnXT1hOwpiLmFkZEV2ZW50TGlzdGVuZXIoZyxhLHRydWUpOwp9ZWxzZXskdGVsZXJpay5hZGRIYW5kbGVyKHRoaXMuX2VsZW1lbnQsZyx0aGlzLl9nZXREb21FdmVudERlbGVnYXRlKCkpOwp9fXZhciBkPXRoaXMuX2V2ZW50TWFwW2ddOwpkW2VdPWY7Cn0sYWRkSGFuZGxlckZvckNsYXNzTmFtZXM6ZnVuY3Rpb24oYSxiLGMpe2lmKCEoYiBpbnN0YW5jZW9mIEFycmF5KSl7Yj1iLnNwbGl0KC9bLFxzXSsvZyk7Cn1mb3IodmFyIGQ9MDsKZDxiLmxlbmd0aDsKZCsrKXt0aGlzLmFkZEhhbmRsZXJGb3JDbGFzc05hbWUoYSxiW2RdLGMpOwp9fSxfb25Eb21FdmVudDpmdW5jdGlvbihiKXt2YXIgYT10aGlzLl9ldmVudE1hcFtiLnR5cGVdOwppZighYSl7cmV0dXJuOwp9dmFyIGg9Yi50YXJnZXQ7CndoaWxlKGgmJmgubm9kZVR5cGUhPT05KXt2YXIgYz1oLmNsYXNzTmFtZTsKaWYoIWMpe2g9aC5wYXJlbnROb2RlOwpjb250aW51ZTsKfXZhciBnPSh0eXBlb2YgYz09InN0cmluZyIpP2Muc3BsaXQoIiAiKTpbXTsKdmFyIGY9bnVsbDsKZm9yKHZhciBkPTA7CmQ8Zy5sZW5ndGg7CmQrKyl7Zj1hW2dbZF1dOwppZihmKXticmVhazsKfX1pZihmKXt0aGlzLl9maWxsRXZlbnRGaWVsZHMoYixoKTsKaWYoZi5jYWxsKHRoaXMuX293bmVyLGIpIT10cnVlKXtpZighaC5wYXJlbnROb2RlKXtiLnN0b3BQcm9wYWdhdGlvbigpOwp9cmV0dXJuOwp9fWlmKGg9PXRoaXMuX2VsZW1lbnQpe3JldHVybjsKfWg9aC5wYXJlbnROb2RlOwp9fSxfZmlsbEV2ZW50RmllbGRzOmZ1bmN0aW9uKGEsZCl7YS5ldmVudE1hcFRhcmdldD1kOwppZihhLnJhd0V2ZW50LnJlbGF0ZWRUYXJnZXQpe2EuZXZlbnRNYXBSZWxhdGVkVGFyZ2V0PWEucmF3RXZlbnQucmVsYXRlZFRhcmdldDsKfWVsc2V7aWYoYS50eXBlPT0ibW91c2VvdmVyIil7YS5ldmVudE1hcFJlbGF0ZWRUYXJnZXQ9YS5yYXdFdmVudC5mcm9tRWxlbWVudDsKfWVsc2V7YS5ldmVudE1hcFJlbGF0ZWRUYXJnZXQ9YS5yYXdFdmVudC50b0VsZW1lbnQ7Cn19aWYoIWEuZXZlbnRNYXBSZWxhdGVkVGFyZ2V0KXtyZXR1cm47Cn10cnl7dmFyIGI9YS5ldmVudE1hcFJlbGF0ZWRUYXJnZXQuY2xhc3NOYW1lOwp9Y2F0Y2goYyl7YS5ldmVudE1hcFJlbGF0ZWRUYXJnZXQ9dGhpcy5fZWxlbWVudDsKfX0sX3Nob3VsZFVzZUV2ZW50Q2FwdHVyZTpmdW5jdGlvbihhKXtyZXR1cm4oYT09ImJsdXIifHxhPT0iZm9jdXMiKSYmISR0ZWxlcmlrLmlzSUU7Cn0sX2dldERvbUV2ZW50RGVsZWdhdGU6ZnVuY3Rpb24oKXtpZighdGhpcy5fb25Eb21FdmVudERlbGVnYXRlKXt0aGlzLl9vbkRvbUV2ZW50RGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vbkRvbUV2ZW50KTsKfXJldHVybiB0aGlzLl9vbkRvbUV2ZW50RGVsZWdhdGU7Cn19OwpUZWxlcmlrLldlYi5VSS5FdmVudE1hcC5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5FdmVudE1hcCIpOwooZnVuY3Rpb24oYSl7VHlwZS5yZWdpc3Rlck5hbWVzcGFjZSgiVGVsZXJpay5XZWIuVUkiKTsKVGVsZXJpay5XZWIuVUkuQW5pbWF0aW9uVHlwZT1mdW5jdGlvbigpe307ClRlbGVyaWsuV2ViLlVJLkFuaW1hdGlvblR5cGUudG9FYXNpbmc9ZnVuY3Rpb24oYil7cmV0dXJuImVhc2UiK1RlbGVyaWsuV2ViLlVJLkFuaW1hdGlvblR5cGUudG9TdHJpbmcoYik7Cn07ClRlbGVyaWsuV2ViLlVJLkFuaW1hdGlvblR5cGUucHJvdG90eXBlPXtOb25lOjAsTGluZWFyOjEsSW5RdWFkOjIsT3V0UXVhZDozLEluT3V0UXVhZDo0LEluQ3ViaWM6NSxPdXRDdWJpYzo2LEluT3V0Q3ViaWM6NyxJblF1YXJ0OjgsT3V0UXVhcnQ6OSxJbk91dFF1YXJ0OjEwLEluUXVpbnQ6MTEsT3V0UXVpbnQ6MTIsSW5PdXRRdWludDoxMyxJblNpbmU6MTQsT3V0U2luZToxNSxJbk91dFNpbmU6MTYsSW5FeHBvOjE3LE91dEV4cG86MTgsSW5PdXRFeHBvOjE5LEluQmFjazoyMCxPdXRCYWNrOjIxLEluT3V0QmFjazoyMixJbkJvdW5jZToyMyxPdXRCb3VuY2U6MjQsSW5PdXRCb3VuY2U6MjUsSW5FbGFzdGljOjI2LE91dEVsYXN0aWM6MjcsSW5PdXRFbGFzdGljOjI4fTsKVGVsZXJpay5XZWIuVUkuQW5pbWF0aW9uVHlwZS5yZWdpc3RlckVudW0oIlRlbGVyaWsuV2ViLlVJLkFuaW1hdGlvblR5cGUiKTsKVGVsZXJpay5XZWIuVUkuQW5pbWF0aW9uU2V0dGluZ3M9ZnVuY3Rpb24oYil7dGhpcy5fdHlwZT1UZWxlcmlrLldlYi5VSS5BbmltYXRpb25UeXBlLk91dFF1YXJ0Owp0aGlzLl9kdXJhdGlvbj0zMDA7CmlmKHR5cGVvZihiLnR5cGUpIT0idW5kZWZpbmVkIil7dGhpcy5fdHlwZT1iLnR5cGU7Cn1pZih0eXBlb2YoYi5kdXJhdGlvbikhPSJ1bmRlZmluZWQiKXt0aGlzLl9kdXJhdGlvbj1iLmR1cmF0aW9uOwp9fTsKVGVsZXJpay5XZWIuVUkuQW5pbWF0aW9uU2V0dGluZ3MucHJvdG90eXBlPXtnZXRfdHlwZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90eXBlOwp9LHNldF90eXBlOmZ1bmN0aW9uKGIpe3RoaXMuX3R5cGU9YjsKfSxnZXRfZHVyYXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZHVyYXRpb247Cn0sc2V0X2R1cmF0aW9uOmZ1bmN0aW9uKGIpe3RoaXMuX2R1cmF0aW9uPWI7Cn19OwpUZWxlcmlrLldlYi5VSS5BbmltYXRpb25TZXR0aW5ncy5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5BbmltYXRpb25TZXR0aW5ncyIpOwpUZWxlcmlrLldlYi5VSS5qU2xpZGVEaXJlY3Rpb249ZnVuY3Rpb24oKXt9OwpUZWxlcmlrLldlYi5VSS5qU2xpZGVEaXJlY3Rpb24ucHJvdG90eXBlPXtVcDoxLERvd246MixMZWZ0OjMsUmlnaHQ6NH07ClRlbGVyaWsuV2ViLlVJLmpTbGlkZURpcmVjdGlvbi5yZWdpc3RlckVudW0oIlRlbGVyaWsuV2ViLlVJLmpTbGlkZURpcmVjdGlvbiIpOwpUZWxlcmlrLldlYi5VSS5qU2xpZGU9ZnVuY3Rpb24oZCxlLGIsYyl7dGhpcy5fYW5pbWF0ZWRFbGVtZW50PWQ7CnRoaXMuX2VsZW1lbnQ9ZC5wYXJlbnROb2RlOwp0aGlzLl9leHBhbmRBbmltYXRpb249ZTsKdGhpcy5fY29sbGFwc2VBbmltYXRpb249YjsKdGhpcy5fZGlyZWN0aW9uPVRlbGVyaWsuV2ViLlVJLmpTbGlkZURpcmVjdGlvbi5Eb3duOwp0aGlzLl9leHBhbmRpbmc9bnVsbDsKaWYoYz09bnVsbCl7dGhpcy5fZW5hYmxlT3ZlcmxheT10cnVlOwp9ZWxzZXt0aGlzLl9lbmFibGVPdmVybGF5PWM7Cn10aGlzLl9ldmVudHM9bnVsbDsKdGhpcy5fb3ZlcmxheT1udWxsOwp0aGlzLl9hbmltYXRpb25FbmRlZERlbGVnYXRlPW51bGw7Cn07ClRlbGVyaWsuV2ViLlVJLmpTbGlkZS5wcm90b3R5cGU9e2luaXRpYWxpemU6ZnVuY3Rpb24oKXtpZihUZWxlcmlrLldlYi5VSS5PdmVybGF5LklzU3VwcG9ydGVkKCkmJnRoaXMuX2VuYWJsZU92ZXJsYXkpe3ZhciBiPXRoaXMuZ2V0X2FuaW1hdGVkRWxlbWVudCgpOwp0aGlzLl9vdmVybGF5PW5ldyBUZWxlcmlrLldlYi5VSS5PdmVybGF5KGIpOwp0aGlzLl9vdmVybGF5LmluaXRpYWxpemUoKTsKfXRoaXMuX2FuaW1hdGlvbkVuZGVkRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9hbmltYXRpb25FbmRlZCk7Cn0sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuX2FuaW1hdGVkRWxlbWVudD1udWxsOwp0aGlzLl9ldmVudHM9bnVsbDsKaWYodGhpcy5fb3ZlcmxheSl7dGhpcy5fb3ZlcmxheS5kaXNwb3NlKCk7CnRoaXMuX292ZXJsYXk9bnVsbDsKfXRoaXMuX2FuaW1hdGlvbkVuZGVkRGVsZWdhdGU9bnVsbDsKdGhpcy5fZWxlbWVudD1udWxsOwp0aGlzLl9leHBhbmRBbmltYXRpb249bnVsbDsKdGhpcy5fY29sbGFwc2VBbmltYXRpb249bnVsbDsKfSxnZXRfZWxlbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbGVtZW50Owp9LGdldF9hbmltYXRlZEVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYW5pbWF0ZWRFbGVtZW50Owp9LHNldF9hbmltYXRlZEVsZW1lbnQ6ZnVuY3Rpb24oYil7dGhpcy5fYW5pbWF0ZWRFbGVtZW50PWI7CmlmKHRoaXMuX292ZXJsYXkpe3RoaXMuX292ZXJsYXkuc2V0X3RhcmdldEVsZW1lbnQodGhpcy5fYW5pbWF0ZWRFbGVtZW50KTsKfX0sZ2V0X2RpcmVjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kaXJlY3Rpb247Cn0sc2V0X2RpcmVjdGlvbjpmdW5jdGlvbihiKXt0aGlzLl9kaXJlY3Rpb249YjsKfSxnZXRfZXZlbnRzOmZ1bmN0aW9uKCl7aWYoIXRoaXMuX2V2ZW50cyl7dGhpcy5fZXZlbnRzPW5ldyBTeXMuRXZlbnRIYW5kbGVyTGlzdCgpOwp9cmV0dXJuIHRoaXMuX2V2ZW50czsKfSx1cGRhdGVTaXplOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRfYW5pbWF0ZWRFbGVtZW50KCk7CnZhciBkPXRoaXMuZ2V0X2VsZW1lbnQoKTsKdmFyIGY9MDsKaWYoZS5zdHlsZS50b3Ape2Y9TWF0aC5tYXgocGFyc2VJbnQoZS5zdHlsZS50b3ApLDApOwp9dmFyIGI9MDsKaWYoZS5zdHlsZS5sZWZ0KXtiPU1hdGgubWF4KHBhcnNlSW50KGUuc3R5bGUubGVmdCksMCk7Cn12YXIgYz1lLm9mZnNldEhlaWdodCtmOwppZihkLnN0eWxlLmhlaWdodCE9YysicHgiKXtkLnN0eWxlLmhlaWdodD1NYXRoLm1heChjLDApKyJweCI7Cn12YXIgZz1lLm9mZnNldFdpZHRoK2I7CmlmKGQuc3R5bGUud2lkdGghPWcrInB4Iil7ZC5zdHlsZS53aWR0aD1NYXRoLm1heChnLDApKyJweCI7Cn1pZih0aGlzLl9vdmVybGF5KXt0aGlzLl91cGRhdGVPdmVybGF5KCk7Cn19LHNob3c6ZnVuY3Rpb24oKXt0aGlzLl9zaG93RWxlbWVudCgpOwp9LGV4cGFuZDpmdW5jdGlvbigpe3RoaXMuX2V4cGFuZGluZz10cnVlOwp0aGlzLl9yZXNldFN0YXRlKHRydWUpOwp2YXIgYj1udWxsOwp2YXIgYz1udWxsOwpzd2l0Y2godGhpcy5nZXRfZGlyZWN0aW9uKCkpe2Nhc2UgVGVsZXJpay5XZWIuVUkualNsaWRlRGlyZWN0aW9uLlVwOmNhc2UgVGVsZXJpay5XZWIuVUkualNsaWRlRGlyZWN0aW9uLkxlZnQ6Yj1wYXJzZUludCh0aGlzLl9nZXRTaXplKCkpOwpjPTA7CmJyZWFrOwpjYXNlIFRlbGVyaWsuV2ViLlVJLmpTbGlkZURpcmVjdGlvbi5Eb3duOmNhc2UgVGVsZXJpay5XZWIuVUkualNsaWRlRGlyZWN0aW9uLlJpZ2h0OmI9cGFyc2VJbnQodGhpcy5fZ2V0UG9zaXRpb24oKSk7CmM9MDsKYnJlYWs7Cn10aGlzLl9leHBhbmRBbmltYXRpb25TdGFydGVkKCk7CmlmKChiPT1jKXx8KHRoaXMuX2V4cGFuZEFuaW1hdGlvbi5nZXRfdHlwZSgpPT1UZWxlcmlrLldlYi5VSS5BbmltYXRpb25UeXBlLk5vbmUpKXt0aGlzLl9zZXRQb3NpdGlvbihjKTsKdGhpcy5nZXRfYW5pbWF0ZWRFbGVtZW50KCkuc3R5bGUudmlzaWJpbGl0eT0idmlzaWJsZSI7CnRoaXMuX2FuaW1hdGlvbkVuZGVkKCk7Cn1lbHNle3RoaXMuX3BsYXlBbmltYXRpb24odGhpcy5fZXhwYW5kQW5pbWF0aW9uLGMpOwp9fSxjb2xsYXBzZTpmdW5jdGlvbigpe3RoaXMuX3Jlc2V0U3RhdGUoKTsKdGhpcy5fZXhwYW5kaW5nPWZhbHNlOwp2YXIgYj1udWxsOwp2YXIgZD1udWxsOwp2YXIgYz1wYXJzZUludCh0aGlzLl9nZXRTaXplKCkpOwp2YXIgZT1wYXJzZUludCh0aGlzLl9nZXRQb3NpdGlvbigpKTsKc3dpdGNoKHRoaXMuZ2V0X2RpcmVjdGlvbigpKXtjYXNlIFRlbGVyaWsuV2ViLlVJLmpTbGlkZURpcmVjdGlvbi5VcDpjYXNlIFRlbGVyaWsuV2ViLlVJLmpTbGlkZURpcmVjdGlvbi5MZWZ0OmI9MDsKZD1jOwpicmVhazsKY2FzZSBUZWxlcmlrLldlYi5VSS5qU2xpZGVEaXJlY3Rpb24uRG93bjpjYXNlIFRlbGVyaWsuV2ViLlVJLmpTbGlkZURpcmVjdGlvbi5SaWdodDpiPTA7CmQ9ZS1jOwpicmVhazsKfXRoaXMuX2NvbGxhcHNlQW5pbWF0aW9uU3RhcnRlZCgpOwppZigoYj09ZCl8fCh0aGlzLl9jb2xsYXBzZUFuaW1hdGlvbi5nZXRfdHlwZSgpPT1UZWxlcmlrLldlYi5VSS5BbmltYXRpb25UeXBlLk5vbmUpKXt0aGlzLl9zZXRQb3NpdGlvbihkKTsKdGhpcy5fYW5pbWF0aW9uRW5kZWQoKTsKfWVsc2V7dGhpcy5fcGxheUFuaW1hdGlvbih0aGlzLl9jb2xsYXBzZUFuaW1hdGlvbixkKTsKfX0sYWRkX2NvbGxhcHNlQW5pbWF0aW9uU3RhcnRlZDpmdW5jdGlvbihiKXt0aGlzLmdldF9ldmVudHMoKS5hZGRIYW5kbGVyKCJjb2xsYXBzZUFuaW1hdGlvblN0YXJ0ZWQiLGIpOwp9LHJlbW92ZV9jb2xsYXBzZUFuaW1hdGlvblN0YXJ0ZWQ6ZnVuY3Rpb24oYil7dGhpcy5nZXRfZXZlbnRzKCkucmVtb3ZlSGFuZGxlcigiY29sbGFwc2VBbmltYXRpb25TdGFydGVkIixiKTsKfSxhZGRfY29sbGFwc2VBbmltYXRpb25FbmRlZDpmdW5jdGlvbihiKXt0aGlzLmdldF9ldmVudHMoKS5hZGRIYW5kbGVyKCJjb2xsYXBzZUFuaW1hdGlvbkVuZGVkIixiKTsKfSxyZW1vdmVfY29sbGFwc2VBbmltYXRpb25FbmRlZDpmdW5jdGlvbihiKXt0aGlzLmdldF9ldmVudHMoKS5yZW1vdmVIYW5kbGVyKCJjb2xsYXBzZUFuaW1hdGlvbkVuZGVkIixiKTsKfSxhZGRfZXhwYW5kQW5pbWF0aW9uU3RhcnRlZDpmdW5jdGlvbihiKXt0aGlzLmdldF9ldmVudHMoKS5hZGRIYW5kbGVyKCJleHBhbmRBbmltYXRpb25TdGFydGVkIixiKTsKfSxyZW1vdmVfZXhwYW5kQW5pbWF0aW9uU3RhcnRlZDpmdW5jdGlvbihiKXt0aGlzLmdldF9ldmVudHMoKS5yZW1vdmVIYW5kbGVyKCJleHBhbmRBbmltYXRpb25TdGFydGVkIixiKTsKfSxhZGRfZXhwYW5kQW5pbWF0aW9uRW5kZWQ6ZnVuY3Rpb24oYil7dGhpcy5nZXRfZXZlbnRzKCkuYWRkSGFuZGxlcigiZXhwYW5kQW5pbWF0aW9uRW5kZWQiLGIpOwp9LHJlbW92ZV9leHBhbmRBbmltYXRpb25FbmRlZDpmdW5jdGlvbihiKXt0aGlzLmdldF9ldmVudHMoKS5yZW1vdmVIYW5kbGVyKCJleHBhbmRBbmltYXRpb25FbmRlZCIsYik7Cn0sX3BsYXlBbmltYXRpb246ZnVuY3Rpb24oZCxiKXt0aGlzLmdldF9hbmltYXRlZEVsZW1lbnQoKS5zdHlsZS52aXNpYmlsaXR5PSJ2aXNpYmxlIjsKdmFyIGM9dGhpcy5fZ2V0QW5pbWF0aW9uUXVlcnkoKTsKdmFyIGc9dGhpcy5fZ2V0QW5pbWF0ZWRTdHlsZVByb3BlcnR5KCk7CnZhciBlPXt9OwplW2ddPWI7CnZhciBmPWQuZ2V0X2R1cmF0aW9uKCk7CmMuc3RvcChmYWxzZSkuYW5pbWF0ZShlLGYsVGVsZXJpay5XZWIuVUkuQW5pbWF0aW9uVHlwZS50b0Vhc2luZyhkLmdldF90eXBlKCkpLHRoaXMuX2FuaW1hdGlvbkVuZGVkRGVsZWdhdGUpOwp9LF9leHBhbmRBbmltYXRpb25TdGFydGVkOmZ1bmN0aW9uKCl7dGhpcy5fcmFpc2VFdmVudCgiZXhwYW5kQW5pbWF0aW9uU3RhcnRlZCIsU3lzLkV2ZW50QXJncy5FbXB0eSk7Cn0sX2NvbGxhcHNlQW5pbWF0aW9uU3RhcnRlZDpmdW5jdGlvbigpe3RoaXMuX3JhaXNlRXZlbnQoImNvbGxhcHNlQW5pbWF0aW9uU3RhcnRlZCIsU3lzLkV2ZW50QXJncy5FbXB0eSk7Cn0sX2FuaW1hdGlvbkVuZGVkOmZ1bmN0aW9uKCl7aWYodGhpcy5fZXhwYW5kaW5nKXtpZih0aGlzLl9lbGVtZW50KXt0aGlzLl9lbGVtZW50LnN0eWxlLm92ZXJmbG93PSJ2aXNpYmxlIjsKfXRoaXMuX3JhaXNlRXZlbnQoImV4cGFuZEFuaW1hdGlvbkVuZGVkIixTeXMuRXZlbnRBcmdzLkVtcHR5KTsKfWVsc2V7aWYodGhpcy5fZWxlbWVudCl7dGhpcy5fZWxlbWVudC5zdHlsZS5kaXNwbGF5PSJub25lIjsKfXRoaXMuX3JhaXNlRXZlbnQoImNvbGxhcHNlQW5pbWF0aW9uRW5kZWQiLFN5cy5FdmVudEFyZ3MuRW1wdHkpOwp9aWYodGhpcy5fb3ZlcmxheSl7dGhpcy5fdXBkYXRlT3ZlcmxheSgpOwp9fSxfdXBkYXRlT3ZlcmxheTpmdW5jdGlvbigpe3RoaXMuX292ZXJsYXkudXBkYXRlUG9zaXRpb24oKTsKfSxfc2hvd0VsZW1lbnQ6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLmdldF9hbmltYXRlZEVsZW1lbnQoKTsKdmFyIGM9dGhpcy5nZXRfZWxlbWVudCgpOwppZighYyl7cmV0dXJuOwp9aWYoIWMuc3R5bGUpe3JldHVybjsKfWMuc3R5bGUuZGlzcGxheT0oYy50YWdOYW1lLnRvVXBwZXJDYXNlKCkhPSJUQUJMRSIpPyJibG9jayI6IiI7CmIuc3R5bGUuZGlzcGxheT0oYi50YWdOYW1lLnRvVXBwZXJDYXNlKCkhPSJUQUJMRSIpPyJibG9jayI6IiI7CmMuc3R5bGUub3ZlcmZsb3c9ImhpZGRlbiI7Cn0sX3Jlc2V0U3RhdGU6ZnVuY3Rpb24oYyl7dGhpcy5fc3RvcEFuaW1hdGlvbigpOwp0aGlzLl9zaG93RWxlbWVudCgpOwppZihjKXt2YXIgYj10aGlzLmdldF9hbmltYXRlZEVsZW1lbnQoKTsKc3dpdGNoKHRoaXMuZ2V0X2RpcmVjdGlvbigpKXtjYXNlIFRlbGVyaWsuV2ViLlVJLmpTbGlkZURpcmVjdGlvbi5VcDpiLnN0eWxlLnRvcD1iLm9mZnNldEhlaWdodCsicHgiOwpicmVhazsKY2FzZSBUZWxlcmlrLldlYi5VSS5qU2xpZGVEaXJlY3Rpb24uRG93bjpiLnN0eWxlLnRvcD0tYi5vZmZzZXRIZWlnaHQrInB4IjsKYnJlYWs7CmNhc2UgVGVsZXJpay5XZWIuVUkualNsaWRlRGlyZWN0aW9uLkxlZnQ6Yi5zdHlsZS5sZWZ0PWIub2Zmc2V0V2lkdGgrInB4IjsKYnJlYWs7CmNhc2UgVGVsZXJpay5XZWIuVUkualNsaWRlRGlyZWN0aW9uLlJpZ2h0OmIuc3R5bGUubGVmdD0tYi5vZmZzZXRXaWR0aCsicHgiOwpicmVhazsKZGVmYXVsdDpFcnJvci5hcmd1bWVudE91dE9mUmFuZ2UoImRpcmVjdGlvbiIsdGhpcy5nZXRfZGlyZWN0aW9uKCksIlNsaWRlIGRpcmVjdGlvbiBpcyBpbnZhbGlkLiBVc2Ugb25lIG9mIHRoZSB2YWx1ZXMgaW4gdGhlIFRlbGVyaWsuV2ViLlVJLlNsaWRlRGlyZWN0aW9uIGVudW1lcmF0aW9uLiIpOwpicmVhazsKfX19LF9zdG9wQW5pbWF0aW9uOmZ1bmN0aW9uKCl7dGhpcy5fZ2V0QW5pbWF0aW9uUXVlcnkoKS5zdG9wKGZhbHNlLHRydWUpOwp9LF9nZXRBbmltYXRpb25RdWVyeTpmdW5jdGlvbigpe3ZhciBiPVt0aGlzLmdldF9hbmltYXRlZEVsZW1lbnQoKV07CmlmKHRoaXMuX2VuYWJsZU92ZXJsYXkmJnRoaXMuX292ZXJsYXkpe2JbYi5sZW5ndGhdPXRoaXMuX292ZXJsYXkuZ2V0X2VsZW1lbnQoKTsKfXJldHVybiBhKGIpOwp9LF9nZXRTaXplOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5nZXRfYW5pbWF0ZWRFbGVtZW50KCk7CnN3aXRjaCh0aGlzLmdldF9kaXJlY3Rpb24oKSl7Y2FzZSBUZWxlcmlrLldlYi5VSS5qU2xpZGVEaXJlY3Rpb24uVXA6Y2FzZSBUZWxlcmlrLldlYi5VSS5qU2xpZGVEaXJlY3Rpb24uRG93bjpyZXR1cm4gYi5vZmZzZXRIZWlnaHQ7CmJyZWFrOwpjYXNlIFRlbGVyaWsuV2ViLlVJLmpTbGlkZURpcmVjdGlvbi5MZWZ0OmNhc2UgVGVsZXJpay5XZWIuVUkualNsaWRlRGlyZWN0aW9uLlJpZ2h0OnJldHVybiBiLm9mZnNldFdpZHRoOwpicmVhazsKZGVmYXVsdDpyZXR1cm4gMDsKfX0sX3NldFBvc2l0aW9uOmZ1bmN0aW9uKGQpe3ZhciBjPXRoaXMuZ2V0X2FuaW1hdGVkRWxlbWVudCgpOwp2YXIgYj10aGlzLl9nZXRBbmltYXRlZFN0eWxlUHJvcGVydHkoKTsKYy5zdHlsZVtiXT1kOwp9LF9nZXRQb3NpdGlvbjpmdW5jdGlvbigpe3ZhciBiPXRoaXMuZ2V0X2FuaW1hdGVkRWxlbWVudCgpOwp2YXIgYz10aGlzLl9nZXRBbmltYXRlZFN0eWxlUHJvcGVydHkoKTsKcmV0dXJuIGIuc3R5bGVbY118fDA7Cn0sX2dldEFuaW1hdGVkU3R5bGVQcm9wZXJ0eTpmdW5jdGlvbigpe3N3aXRjaCh0aGlzLmdldF9kaXJlY3Rpb24oKSl7Y2FzZSBUZWxlcmlrLldlYi5VSS5qU2xpZGVEaXJlY3Rpb24uVXA6Y2FzZSBUZWxlcmlrLldlYi5VSS5qU2xpZGVEaXJlY3Rpb24uRG93bjpyZXR1cm4idG9wIjsKY2FzZSBUZWxlcmlrLldlYi5VSS5qU2xpZGVEaXJlY3Rpb24uTGVmdDpjYXNlIFRlbGVyaWsuV2ViLlVJLmpTbGlkZURpcmVjdGlvbi5SaWdodDpyZXR1cm4ibGVmdCI7Cn19LF9yYWlzZUV2ZW50OmZ1bmN0aW9uKGIsZCl7dmFyIGM9dGhpcy5nZXRfZXZlbnRzKCkuZ2V0SGFuZGxlcihiKTsKaWYoYyl7aWYoIWQpe2Q9U3lzLkV2ZW50QXJncy5FbXB0eTsKfWModGhpcyxkKTsKfX19OwpUZWxlcmlrLldlYi5VSS5qU2xpZGUucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkualNsaWRlIixudWxsLFN5cy5JRGlzcG9zYWJsZSk7Cn0pKCR0ZWxlcmlrLiQpOwpUeXBlLnJlZ2lzdGVyTmFtZXNwYWNlKCJUZWxlcmlrLldlYi5VSSIpOwpUZWxlcmlrLldlYi5VSS5PdmVybGF5PWZ1bmN0aW9uKGEpe3RoaXMuX3RhcmdldEVsZW1lbnQ9YTsKdGhpcy5fZWxlbWVudD1udWxsOwp9OwpUZWxlcmlrLldlYi5VSS5PdmVybGF5LklzU3VwcG9ydGVkPWZ1bmN0aW9uKCl7cmV0dXJuICR0ZWxlcmlrLmlzSUU7Cn07ClRlbGVyaWsuV2ViLlVJLk92ZXJsYXkucHJvdG90eXBlPXtpbml0aWFsaXplOmZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CmEuaW5uZXJIVE1MPSI8aWZyYW1lPllvdXIgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IGlubGluZSBmcmFtZXMgb3IgaXMgY3VycmVudGx5IGNvbmZpZ3VyZWQgbm90IHRvIGRpc3BsYXkgaW5saW5lIGZyYW1lcy48L2lmcmFtZT4iOwp0aGlzLl9lbGVtZW50PWEuZmlyc3RDaGlsZDsKdGhpcy5fZWxlbWVudC5zcmM9ImFib3V0OmJsYW5rIjsKdGhpcy5fdGFyZ2V0RWxlbWVudC5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLl9lbGVtZW50LHRoaXMuX3RhcmdldEVsZW1lbnQpOwppZih0aGlzLl90YXJnZXRFbGVtZW50LnN0eWxlLnpJbmRleD4wKXt0aGlzLl9lbGVtZW50LnN0eWxlLnpJbmRleD10aGlzLl90YXJnZXRFbGVtZW50LnN0eWxlLnpJbmRleC0xOwp9dGhpcy5fZWxlbWVudC5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiOwp0aGlzLl9lbGVtZW50LnN0eWxlLmJvcmRlcj0iMHB4IjsKdGhpcy5fZWxlbWVudC5mcmFtZUJvcmRlcj0wOwp0aGlzLl9lbGVtZW50LnN0eWxlLmZpbHRlcj0icHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LkFscGhhKHN0eWxlPTAsb3BhY2l0eT0wKSI7CnRoaXMuX2VsZW1lbnQudGFiSW5kZXg9LTE7CmlmKCEkdGVsZXJpay5pc1NhZmFyaSYmISR0ZWxlcmlrLmlzSUUxME1vZGUpe2Eub3V0ZXJIVE1MPW51bGw7Cn10aGlzLnVwZGF0ZVBvc2l0aW9uKCk7Cn0sZGlzcG9zZTpmdW5jdGlvbigpe2lmKHRoaXMuX2VsZW1lbnQucGFyZW50Tm9kZSl7dGhpcy5fZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuX2VsZW1lbnQpOwp9dGhpcy5fdGFyZ2V0RWxlbWVudD1udWxsOwp0aGlzLl9lbGVtZW50PW51bGw7Cn0sZ2V0X3RhcmdldEVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGFyZ2V0RWxlbWVudDsKfSxzZXRfdGFyZ2V0RWxlbWVudDpmdW5jdGlvbihhKXt0aGlzLl90YXJnZXRFbGVtZW50PWE7Cn0sZ2V0X2VsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZWxlbWVudDsKfSx1cGRhdGVQb3NpdGlvbjpmdW5jdGlvbigpe3RoaXMuX2VsZW1lbnQuc3R5bGUudG9wPXRoaXMuX3RvVW5pdCh0aGlzLl90YXJnZXRFbGVtZW50LnN0eWxlLnRvcCk7CnRoaXMuX2VsZW1lbnQuc3R5bGUubGVmdD10aGlzLl90b1VuaXQodGhpcy5fdGFyZ2V0RWxlbWVudC5zdHlsZS5sZWZ0KTsKdGhpcy5fZWxlbWVudC5zdHlsZS53aWR0aD10aGlzLl90YXJnZXRFbGVtZW50Lm9mZnNldFdpZHRoKyJweCI7CnRoaXMuX2VsZW1lbnQuc3R5bGUuaGVpZ2h0PXRoaXMuX3RhcmdldEVsZW1lbnQub2Zmc2V0SGVpZ2h0KyJweCI7Cn0sX3RvVW5pdDpmdW5jdGlvbihhKXtpZighYSl7cmV0dXJuIjBweCI7Cn1yZXR1cm4gcGFyc2VJbnQoYSkrInB4IjsKfX07ClRlbGVyaWsuV2ViLlVJLk92ZXJsYXkucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuT3ZlcmxheSIsbnVsbCxTeXMuSURpc3Bvc2FibGUpOwpUeXBlLnJlZ2lzdGVyTmFtZXNwYWNlKCJUZWxlcmlrLldlYi5VSSIpOwpUZWxlcmlrLldlYi5VSS5TbGlkZURpcmVjdGlvbj1mdW5jdGlvbigpe307ClRlbGVyaWsuV2ViLlVJLlNsaWRlRGlyZWN0aW9uLnByb3RvdHlwZT17VXA6MSxEb3duOjIsTGVmdDozLFJpZ2h0OjR9OwpUZWxlcmlrLldlYi5VSS5TbGlkZURpcmVjdGlvbi5yZWdpc3RlckVudW0oIlRlbGVyaWsuV2ViLlVJLlNsaWRlRGlyZWN0aW9uIik7ClRlbGVyaWsuV2ViLlVJLlNsaWRlPWZ1bmN0aW9uKGMsZCxhLGIpe3RoaXMuX2Zwcz02MDsKdGhpcy5fYW5pbWF0ZWRFbGVtZW50PWM7CnRoaXMuX2VsZW1lbnQ9Yy5wYXJlbnROb2RlOwp0aGlzLl9leHBhbmRBbmltYXRpb249ZDsKdGhpcy5fY29sbGFwc2VBbmltYXRpb249YTsKdGhpcy5fZGlyZWN0aW9uPVRlbGVyaWsuV2ViLlVJLlNsaWRlRGlyZWN0aW9uLkRvd247CnRoaXMuX2FuaW1hdGlvbj1udWxsOwp0aGlzLl9leHBhbmRpbmc9bnVsbDsKaWYoYj09bnVsbCl7dGhpcy5fZW5hYmxlT3ZlcmxheT10cnVlOwp9ZWxzZXt0aGlzLl9lbmFibGVPdmVybGF5PWI7Cn10aGlzLl9ldmVudHM9bnVsbDsKdGhpcy5fb3ZlcmxheT1udWxsOwp0aGlzLl9hbmltYXRpb25FbmRlZERlbGVnYXRlPW51bGw7CnRoaXMuX2V4cGFuZEFuaW1hdGlvblN0YXJ0ZWREZWxlZ2F0ZT1udWxsOwp0aGlzLl91cGRhdGVPdmVybGF5RGVsZWdhdGU9bnVsbDsKfTsKVGVsZXJpay5XZWIuVUkuU2xpZGUucHJvdG90eXBlPXtpbml0aWFsaXplOmZ1bmN0aW9uKCl7aWYoVGVsZXJpay5XZWIuVUkuT3ZlcmxheS5Jc1N1cHBvcnRlZCgpJiZ0aGlzLl9lbmFibGVPdmVybGF5KXt2YXIgYT10aGlzLmdldF9hbmltYXRlZEVsZW1lbnQoKTsKdGhpcy5fb3ZlcmxheT1uZXcgVGVsZXJpay5XZWIuVUkuT3ZlcmxheShhKTsKdGhpcy5fb3ZlcmxheS5pbml0aWFsaXplKCk7Cn10aGlzLl9hbmltYXRpb25FbmRlZERlbGVnYXRlPUZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5fYW5pbWF0aW9uRW5kZWQpOwp0aGlzLl9leHBhbmRBbmltYXRpb25TdGFydGVkRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9leHBhbmRBbmltYXRpb25TdGFydGVkKTsKdGhpcy5fdXBkYXRlT3ZlcmxheURlbGVnYXRlPUZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5fdXBkYXRlT3ZlcmxheSk7Cn0sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuX2FuaW1hdGVkRWxlbWVudD1udWxsOwp0aGlzLl9ldmVudHM9bnVsbDsKdGhpcy5fZGlzcG9zZUFuaW1hdGlvbigpOwppZih0aGlzLl9vdmVybGF5KXt0aGlzLl9vdmVybGF5LmRpc3Bvc2UoKTsKdGhpcy5fb3ZlcmxheT1udWxsOwp9dGhpcy5fYW5pbWF0aW9uRW5kZWREZWxlZ2F0ZT1udWxsOwp0aGlzLl9leHBhbmRBbmltYXRpb25TdGFydGVkRGVsZWdhdGU9bnVsbDsKdGhpcy5fdXBkYXRlT3ZlcmxheURlbGVnYXRlPW51bGw7Cn0sZ2V0X2VsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZWxlbWVudDsKfSxnZXRfYW5pbWF0ZWRFbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FuaW1hdGVkRWxlbWVudDsKfSxzZXRfYW5pbWF0ZWRFbGVtZW50OmZ1bmN0aW9uKGEpe3RoaXMuX2FuaW1hdGVkRWxlbWVudD1hOwppZih0aGlzLl9vdmVybGF5KXt0aGlzLl9vdmVybGF5LnNldF90YXJnZXRFbGVtZW50KHRoaXMuX2FuaW1hdGVkRWxlbWVudCk7Cn19LGdldF9kaXJlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGlyZWN0aW9uOwp9LHNldF9kaXJlY3Rpb246ZnVuY3Rpb24oYSl7dGhpcy5fZGlyZWN0aW9uPWE7Cn0sZ2V0X2V2ZW50czpmdW5jdGlvbigpe2lmKCF0aGlzLl9ldmVudHMpe3RoaXMuX2V2ZW50cz1uZXcgU3lzLkV2ZW50SGFuZGxlckxpc3QoKTsKfXJldHVybiB0aGlzLl9ldmVudHM7Cn0sdXBkYXRlU2l6ZTpmdW5jdGlvbigpe3ZhciBkPXRoaXMuZ2V0X2FuaW1hdGVkRWxlbWVudCgpOwp2YXIgYz10aGlzLmdldF9lbGVtZW50KCk7CnZhciBlPTA7CmlmKGQuc3R5bGUudG9wKXtlPU1hdGgubWF4KHBhcnNlSW50KGQuc3R5bGUudG9wKSwwKTsKfXZhciBhPTA7CmlmKGQuc3R5bGUubGVmdCl7YT1NYXRoLm1heChwYXJzZUludChkLnN0eWxlLmxlZnQpLDApOwp9dmFyIGI9ZC5vZmZzZXRIZWlnaHQrZTsKaWYoYy5zdHlsZS5oZWlnaHQhPWIrInB4Iil7Yy5zdHlsZS5oZWlnaHQ9TWF0aC5tYXgoYiwwKSsicHgiOwp9dmFyIGY9ZC5vZmZzZXRXaWR0aCthOwppZihjLnN0eWxlLndpZHRoIT1mKyJweCIpe2Muc3R5bGUud2lkdGg9TWF0aC5tYXgoZiwwKSsicHgiOwp9aWYodGhpcy5fb3ZlcmxheSl7dGhpcy5fdXBkYXRlT3ZlcmxheSgpOwp9fSxzaG93OmZ1bmN0aW9uKCl7dGhpcy5fc2hvd0VsZW1lbnQoKTsKfSxleHBhbmQ6ZnVuY3Rpb24oKXt0aGlzLl9leHBhbmRpbmc9dHJ1ZTsKdGhpcy5nZXRfYW5pbWF0ZWRFbGVtZW50KCkuc3R5bGUudmlzaWJpbGl0eT0iaGlkZGVuIjsKdGhpcy5fcmVzZXRTdGF0ZSh0cnVlKTsKdmFyIGE9bnVsbDsKdmFyIGI9bnVsbDsKc3dpdGNoKHRoaXMuZ2V0X2RpcmVjdGlvbigpKXtjYXNlIFRlbGVyaWsuV2ViLlVJLlNsaWRlRGlyZWN0aW9uLlVwOmNhc2UgVGVsZXJpay5XZWIuVUkuU2xpZGVEaXJlY3Rpb24uTGVmdDphPXBhcnNlSW50KHRoaXMuX2dldFNpemUoKSk7CmI9MDsKYnJlYWs7CmNhc2UgVGVsZXJpay5XZWIuVUkuU2xpZGVEaXJlY3Rpb24uRG93bjpjYXNlIFRlbGVyaWsuV2ViLlVJLlNsaWRlRGlyZWN0aW9uLlJpZ2h0OmE9cGFyc2VJbnQodGhpcy5fZ2V0UG9zaXRpb24oKSk7CmI9MDsKYnJlYWs7Cn1pZih0aGlzLl9hbmltYXRpb24pe3RoaXMuX2FuaW1hdGlvbi5zdG9wKCk7Cn1pZigoYT09Yil8fCh0aGlzLl9leHBhbmRBbmltYXRpb24uZ2V0X3R5cGUoKT09VGVsZXJpay5XZWIuVUkuQW5pbWF0aW9uVHlwZS5Ob25lKSl7dGhpcy5fZXhwYW5kQW5pbWF0aW9uU3RhcnRlZCgpOwp0aGlzLl9zZXRQb3NpdGlvbihiKTsKdGhpcy5fYW5pbWF0aW9uRW5kZWQoKTsKdGhpcy5nZXRfYW5pbWF0ZWRFbGVtZW50KCkuc3R5bGUudmlzaWJpbGl0eT0idmlzaWJsZSI7Cn1lbHNle3RoaXMuX3BsYXlBbmltYXRpb24odGhpcy5fZXhwYW5kQW5pbWF0aW9uLGEsYik7Cn19LGNvbGxhcHNlOmZ1bmN0aW9uKCl7dGhpcy5fcmVzZXRTdGF0ZSgpOwp0aGlzLl9leHBhbmRpbmc9ZmFsc2U7CnZhciBhPW51bGw7CnZhciBjPW51bGw7CnZhciBiPXBhcnNlSW50KHRoaXMuX2dldFNpemUoKSk7CnZhciBkPXBhcnNlSW50KHRoaXMuX2dldFBvc2l0aW9uKCkpOwpzd2l0Y2godGhpcy5nZXRfZGlyZWN0aW9uKCkpe2Nhc2UgVGVsZXJpay5XZWIuVUkuU2xpZGVEaXJlY3Rpb24uVXA6Y2FzZSBUZWxlcmlrLldlYi5VSS5TbGlkZURpcmVjdGlvbi5MZWZ0OmE9MDsKYz1iOwpicmVhazsKY2FzZSBUZWxlcmlrLldlYi5VSS5TbGlkZURpcmVjdGlvbi5Eb3duOmNhc2UgVGVsZXJpay5XZWIuVUkuU2xpZGVEaXJlY3Rpb24uUmlnaHQ6YT0wOwpjPWQtYjsKYnJlYWs7Cn1pZih0aGlzLl9hbmltYXRpb24pe3RoaXMuX2FuaW1hdGlvbi5zdG9wKCk7Cn1pZigoYT09Yyl8fCh0aGlzLl9jb2xsYXBzZUFuaW1hdGlvbi5nZXRfdHlwZSgpPT1UZWxlcmlrLldlYi5VSS5BbmltYXRpb25UeXBlLk5vbmUpKXt0aGlzLl9zZXRQb3NpdGlvbihjKTsKdGhpcy5fYW5pbWF0aW9uRW5kZWQoKTsKfWVsc2V7dGhpcy5fcGxheUFuaW1hdGlvbih0aGlzLl9jb2xsYXBzZUFuaW1hdGlvbixhLGMpOwp9fSxhZGRfY29sbGFwc2VBbmltYXRpb25FbmRlZDpmdW5jdGlvbihhKXt0aGlzLmdldF9ldmVudHMoKS5hZGRIYW5kbGVyKCJjb2xsYXBzZUFuaW1hdGlvbkVuZGVkIixhKTsKfSxyZW1vdmVfY29sbGFwc2VBbmltYXRpb25FbmRlZDpmdW5jdGlvbihhKXt0aGlzLmdldF9ldmVudHMoKS5yZW1vdmVIYW5kbGVyKCJjb2xsYXBzZUFuaW1hdGlvbkVuZGVkIixhKTsKfSxhZGRfZXhwYW5kQW5pbWF0aW9uRW5kZWQ6ZnVuY3Rpb24oYSl7dGhpcy5nZXRfZXZlbnRzKCkuYWRkSGFuZGxlcigiZXhwYW5kQW5pbWF0aW9uRW5kZWQiLGEpOwp9LHJlbW92ZV9leHBhbmRBbmltYXRpb25FbmRlZDpmdW5jdGlvbihhKXt0aGlzLmdldF9ldmVudHMoKS5yZW1vdmVIYW5kbGVyKCJleHBhbmRBbmltYXRpb25FbmRlZCIsYSk7Cn0sYWRkX2V4cGFuZEFuaW1hdGlvblN0YXJ0ZWQ6ZnVuY3Rpb24oYSl7dGhpcy5nZXRfZXZlbnRzKCkuYWRkSGFuZGxlcigiZXhwYW5kQW5pbWF0aW9uU3RhcnRlZCIsYSk7Cn0scmVtb3ZlX2V4cGFuZEFuaW1hdGlvblN0YXJ0ZWQ6ZnVuY3Rpb24oYSl7dGhpcy5nZXRfZXZlbnRzKCkucmVtb3ZlSGFuZGxlcigiZXhwYW5kQW5pbWF0aW9uU3RhcnRlZCIsYSk7Cn0sX3BsYXlBbmltYXRpb246ZnVuY3Rpb24oYSxmLGIpe3ZhciBlPWEuZ2V0X2R1cmF0aW9uKCk7CnZhciBnPXRoaXMuX2dldEFuaW1hdGVkU3R5bGVQcm9wZXJ0eSgpOwp2YXIgYz1UZWxlcmlrLldlYi5VSS5BbmltYXRpb25GdW5jdGlvbnMuQ2FsY3VsYXRlQW5pbWF0aW9uUG9pbnRzKGEsZixiLHRoaXMuX2Zwcyk7CnZhciBkPXRoaXMuZ2V0X2FuaW1hdGVkRWxlbWVudCgpOwpkLnN0eWxlLnZpc2liaWxpdHk9InZpc2libGUiOwppZih0aGlzLl9hbmltYXRpb24pe3RoaXMuX2FuaW1hdGlvbi5zZXRfdGFyZ2V0KGQpOwp0aGlzLl9hbmltYXRpb24uc2V0X2R1cmF0aW9uKGUvMTAwMCk7CnRoaXMuX2FuaW1hdGlvbi5zZXRfcHJvcGVydHlLZXkoZyk7CnRoaXMuX2FuaW1hdGlvbi5zZXRfdmFsdWVzKGMpOwp9ZWxzZXt0aGlzLl9hbmltYXRpb249bmV3ICRUV0EuRGlzY3JldGVBbmltYXRpb24oZCxlLzEwMDAsdGhpcy5fZnBzLCJzdHlsZSIsZyxjKTsKdGhpcy5fYW5pbWF0aW9uLmFkZF9zdGFydGVkKHRoaXMuX2V4cGFuZEFuaW1hdGlvblN0YXJ0ZWREZWxlZ2F0ZSk7CnRoaXMuX2FuaW1hdGlvbi5hZGRfZW5kZWQodGhpcy5fYW5pbWF0aW9uRW5kZWREZWxlZ2F0ZSk7CmlmKHRoaXMuX292ZXJsYXkpe3RoaXMuX2FuaW1hdGlvbi5hZGRfb25UaWNrKHRoaXMuX3VwZGF0ZU92ZXJsYXlEZWxlZ2F0ZSk7Cn19dGhpcy5fYW5pbWF0aW9uLnBsYXkoKTsKfSxfYW5pbWF0aW9uRW5kZWQ6ZnVuY3Rpb24oKXtpZih0aGlzLl9leHBhbmRpbmcpe3RoaXMuZ2V0X2VsZW1lbnQoKS5zdHlsZS5vdmVyZmxvdz0idmlzaWJsZSI7CnRoaXMuX3JhaXNlRXZlbnQoImV4cGFuZEFuaW1hdGlvbkVuZGVkIixTeXMuRXZlbnRBcmdzLkVtcHR5KTsKfWVsc2V7dGhpcy5nZXRfZWxlbWVudCgpLnN0eWxlLmRpc3BsYXk9Im5vbmUiOwp0aGlzLl9yYWlzZUV2ZW50KCJjb2xsYXBzZUFuaW1hdGlvbkVuZGVkIixTeXMuRXZlbnRBcmdzLkVtcHR5KTsKfWlmKHRoaXMuX292ZXJsYXkpe3RoaXMuX3VwZGF0ZU92ZXJsYXkoKTsKfX0sX2V4cGFuZEFuaW1hdGlvblN0YXJ0ZWQ6ZnVuY3Rpb24oKXt0aGlzLl9yYWlzZUV2ZW50KCJleHBhbmRBbmltYXRpb25TdGFydGVkIixTeXMuRXZlbnRBcmdzLkVtcHR5KTsKfSxfdXBkYXRlT3ZlcmxheTpmdW5jdGlvbigpe3RoaXMuX292ZXJsYXkudXBkYXRlUG9zaXRpb24oKTsKfSxfc2hvd0VsZW1lbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldF9hbmltYXRlZEVsZW1lbnQoKTsKdmFyIGI9dGhpcy5nZXRfZWxlbWVudCgpOwppZighYil7cmV0dXJuOwp9aWYoIWIuc3R5bGUpe3JldHVybjsKfWIuc3R5bGUuZGlzcGxheT0oYi50YWdOYW1lLnRvVXBwZXJDYXNlKCkhPSJUQUJMRSIpPyJibG9jayI6IiI7CmEuc3R5bGUuZGlzcGxheT0oYS50YWdOYW1lLnRvVXBwZXJDYXNlKCkhPSJUQUJMRSIpPyJibG9jayI6IiI7CmIuc3R5bGUub3ZlcmZsb3c9ImhpZGRlbiI7Cn0sX3Jlc2V0U3RhdGU6ZnVuY3Rpb24oYil7dGhpcy5fc3RvcEFuaW1hdGlvbigpOwp0aGlzLl9zaG93RWxlbWVudCgpOwppZihiKXt2YXIgYT10aGlzLmdldF9hbmltYXRlZEVsZW1lbnQoKTsKc3dpdGNoKHRoaXMuZ2V0X2RpcmVjdGlvbigpKXtjYXNlIFRlbGVyaWsuV2ViLlVJLlNsaWRlRGlyZWN0aW9uLlVwOmEuc3R5bGUudG9wPSIwcHgiOwpicmVhazsKY2FzZSBUZWxlcmlrLldlYi5VSS5TbGlkZURpcmVjdGlvbi5Eb3duOmEuc3R5bGUudG9wPS1hLm9mZnNldEhlaWdodCsicHgiOwpicmVhazsKY2FzZSBUZWxlcmlrLldlYi5VSS5TbGlkZURpcmVjdGlvbi5MZWZ0OmEuc3R5bGUubGVmdD1hLm9mZnNldFdpZHRoKyJweCI7CmJyZWFrOwpjYXNlIFRlbGVyaWsuV2ViLlVJLlNsaWRlRGlyZWN0aW9uLlJpZ2h0OmEuc3R5bGUubGVmdD0tYS5vZmZzZXRXaWR0aCsicHgiOwpicmVhazsKZGVmYXVsdDpFcnJvci5hcmd1bWVudE91dE9mUmFuZ2UoImRpcmVjdGlvbiIsdGhpcy5nZXRfZGlyZWN0aW9uKCksIlNsaWRlIGRpcmVjdGlvbiBpcyBpbnZhbGlkLiBVc2Ugb25lIG9mIHRoZSB2YWx1ZXMgaW4gdGhlIFRlbGVyaWsuV2ViLlVJLlNsaWRlRGlyZWN0aW9uIGVudW1lcmF0aW9uLiIpOwpicmVhazsKfX19LF9nZXRTaXplOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRfYW5pbWF0ZWRFbGVtZW50KCk7CnN3aXRjaCh0aGlzLmdldF9kaXJlY3Rpb24oKSl7Y2FzZSBUZWxlcmlrLldlYi5VSS5TbGlkZURpcmVjdGlvbi5VcDpjYXNlIFRlbGVyaWsuV2ViLlVJLlNsaWRlRGlyZWN0aW9uLkRvd246cmV0dXJuIGEub2Zmc2V0SGVpZ2h0OwpicmVhazsKY2FzZSBUZWxlcmlrLldlYi5VSS5TbGlkZURpcmVjdGlvbi5MZWZ0OmNhc2UgVGVsZXJpay5XZWIuVUkuU2xpZGVEaXJlY3Rpb24uUmlnaHQ6cmV0dXJuIGEub2Zmc2V0V2lkdGg7CmJyZWFrOwpkZWZhdWx0OnJldHVybiAwOwp9fSxfc2V0UG9zaXRpb246ZnVuY3Rpb24oYyl7dmFyIGI9dGhpcy5nZXRfYW5pbWF0ZWRFbGVtZW50KCk7CnZhciBhPXRoaXMuX2dldEFuaW1hdGVkU3R5bGVQcm9wZXJ0eSgpOwpiLnN0eWxlW2FdPWM7Cn0sX2dldFBvc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRfYW5pbWF0ZWRFbGVtZW50KCk7CnZhciBiPXRoaXMuX2dldEFuaW1hdGVkU3R5bGVQcm9wZXJ0eSgpOwpyZXR1cm4gYS5zdHlsZVtiXTsKfSxfZ2V0QW5pbWF0ZWRTdHlsZVByb3BlcnR5OmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuZ2V0X2RpcmVjdGlvbigpKXtjYXNlIFRlbGVyaWsuV2ViLlVJLlNsaWRlRGlyZWN0aW9uLlVwOmNhc2UgVGVsZXJpay5XZWIuVUkuU2xpZGVEaXJlY3Rpb24uRG93bjpyZXR1cm4idG9wIjsKY2FzZSBUZWxlcmlrLldlYi5VSS5TbGlkZURpcmVjdGlvbi5MZWZ0OmNhc2UgVGVsZXJpay5XZWIuVUkuU2xpZGVEaXJlY3Rpb24uUmlnaHQ6cmV0dXJuImxlZnQiOwp9fSxfc3RvcEFuaW1hdGlvbjpmdW5jdGlvbigpe2lmKHRoaXMuX2FuaW1hdGlvbil7dGhpcy5fYW5pbWF0aW9uLnN0b3AoKTsKfX0sX2Rpc3Bvc2VBbmltYXRpb246ZnVuY3Rpb24oKXtpZih0aGlzLl9hbmltYXRpb24pe3RoaXMuX2FuaW1hdGlvbi5kaXNwb3NlKCk7CnRoaXMuX2FuaW1hdGlvbj1udWxsOwp9fSxfcmFpc2VFdmVudDpmdW5jdGlvbihhLGMpe3ZhciBiPXRoaXMuZ2V0X2V2ZW50cygpLmdldEhhbmRsZXIoYSk7CmlmKGIpe2lmKCFjKXtjPVN5cy5FdmVudEFyZ3MuRW1wdHk7Cn1iKHRoaXMsYyk7Cn19fTsKVGVsZXJpay5XZWIuVUkuU2xpZGUucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuU2xpZGUiLG51bGwsU3lzLklEaXNwb3NhYmxlKTsKKGZ1bmN0aW9uKCl7dmFyIGE9VGVsZXJpay5XZWIuVUk7CmEuVGVtcGxhdGVSZW5kZXJlcj17cmVuZGVyVGVtcGxhdGU6ZnVuY3Rpb24oYyxpLGcpe3ZhciBoPXRoaXMuX2dldFRlbXBsYXRlRnVuY3Rpb24oaSxnKSxmOwppZighaCl7cmV0dXJuIG51bGw7Cn10cnl7Zj1oKGMpOwp9Y2F0Y2goZCl7dGhyb3cgRXJyb3IuaW52YWxpZE9wZXJhdGlvbihTdHJpbmcuZm9ybWF0KCJFcnJvciByZW5kZXJpbmcgdGVtcGxhdGU6IHswfSIsZC5tZXNzYWdlKSk7Cn1pZihpJiZpLnJhaXNlRXZlbnQpe3ZhciBiPW5ldyBhLlJhZFRlbXBsYXRlQm91bmRFdmVudEFyZ3MoYyxoLGYpOwppLnJhaXNlRXZlbnQoInRlbXBsYXRlRGF0YUJvdW5kIixiKTsKZj1iLmdldF9odG1sKCk7Cn1yZXR1cm4gZjsKfSxfZ2V0VGVtcGxhdGVGdW5jdGlvbjpmdW5jdGlvbihoLGIpe3ZhciBnPWIuZ2V0X2NsaWVudFRlbXBsYXRlKCk7CmlmKCFnJiZoKXtnPWguZ2V0X2NsaWVudFRlbXBsYXRlKCk7Cn1pZighZyl7cmV0dXJuIG51bGw7Cn1pZihoKXtpZighaC5fdGVtcGxhdGVDYWNoZSl7aC5fdGVtcGxhdGVDYWNoZT17fTsKfXZhciBmPWguX3RlbXBsYXRlQ2FjaGVbZ107CmlmKGYpe3JldHVybiBmOwp9fXRyeXt2YXIgZD1hLlRlbXBsYXRlLmNvbXBpbGUoZyk7Cn1jYXRjaChjKXt0aHJvdyBFcnJvci5pbnZhbGlkT3BlcmF0aW9uKFN0cmluZy5mb3JtYXQoIkVycm9yIGNyZWF0aW5nIHRlbXBsYXRlOiB7MH0iLGMubWVzc2FnZSkpOwp9aWYoaCl7aC5fdGVtcGxhdGVDYWNoZVtnXT1kOwp9cmV0dXJuIGQ7Cn19OwphLlJhZFRlbXBsYXRlQm91bmRFdmVudEFyZ3M9ZnVuY3Rpb24oYixjLGQpe2EuUmFkVGVtcGxhdGVCb3VuZEV2ZW50QXJncy5pbml0aWFsaXplQmFzZSh0aGlzKTsKdGhpcy5fZGF0YUl0ZW09YjsKdGhpcy5fdGVtcGxhdGU9YzsKdGhpcy5faHRtbD1kOwp9OwphLlJhZFRlbXBsYXRlQm91bmRFdmVudEFyZ3MucHJvdG90eXBlPXtnZXRfZGF0YUl0ZW06ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YUl0ZW07Cn0sc2V0X2h0bWw6ZnVuY3Rpb24oYil7dGhpcy5faHRtbD1iOwp9LGdldF9odG1sOmZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLl9odG1sOwp9LGdldF90ZW1wbGF0ZTpmdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5fdGVtcGxhdGU7Cn19OwphLlJhZFRlbXBsYXRlQm91bmRFdmVudEFyZ3MucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuUmFkVGVtcGxhdGVCb3VuZEV2ZW50QXJncyIsU3lzLkV2ZW50QXJncyk7Cn0pKCk7Cg0KLyogRU5EIFRlbGVyaWsuV2ViLlVJLkNvbW1vbi5OYXZpZ2F0aW9uLk5hdmlnYXRpb25TY3JpcHRzLmpzICovDQovKiBTVEFSVCBUZWxlcmlrLldlYi5VSS5Db21ib0JveC5SYWRDb21ib0JveFNjcmlwdHMuanMgKi8NClR5cGUucmVnaXN0ZXJOYW1lc3BhY2UoIlRlbGVyaWsuV2ViLlVJIik7CihmdW5jdGlvbigpe3ZhciBhPVRlbGVyaWsuV2ViLlVJOwphLlJhZENvbWJvQm94SXRlbT1mdW5jdGlvbigpe2EuUmFkQ29tYm9Cb3hJdGVtLmluaXRpYWxpemVCYXNlKHRoaXMpOwp9OwphLlJhZENvbWJvQm94SXRlbS5fcmVnRXhFc2NhcGU9ZnVuY3Rpb24oYil7cmV0dXJuIGIucmVwbGFjZSgvWy1bXF17fSgpKis/LixcXF4kfCNcc10vZywiXFwkJiIpOwp9Owp9KSgpOwooZnVuY3Rpb24oKXt2YXIgYj0kdGVsZXJpay4kLGM9VGVsZXJpay5XZWIuVUksYT1jLlJhZENvbWJvQm94SXRlbTsKYy5SYWRDb21ib0JveEl0ZW0ucHJvdG90eXBlPXtfc2hvdWxkSW5pdGlhbGl6ZUNoaWxkOmZ1bmN0aW9uKGQpe3JldHVybiBmYWxzZTsKfSxnZXRfdGV4dDpmdW5jdGlvbigpe2lmKHRoaXMuX3RleHQhPT1udWxsKXtyZXR1cm4gdGhpcy5fcmVtb3ZlRW1UYWdzKHRoaXMuX3RleHQpOwp9aWYoKHRoaXMuX3RleHQ9dGhpcy5fcHJvcGVydGllcy5nZXRWYWx1ZSgidGV4dCIsbnVsbCkpIT1udWxsKXtyZXR1cm4gdGhpcy5fcmVtb3ZlRW1UYWdzKHRoaXMuX3RleHQpOwp9aWYoIXRoaXMuZ2V0X2VsZW1lbnQoKSl7cmV0dXJuIiI7Cn12YXIgZD10aGlzLmdldF90ZXh0RWxlbWVudCgpOwppZighZCl7cmV0dXJuIiI7Cn1pZih0eXBlb2YoZC5pbm5lclRleHQpIT0idW5kZWZpbmVkIil7dGhpcy5fdGV4dD1kLmlubmVyVGV4dDsKfWVsc2V7dGhpcy5fdGV4dD1kLnRleHRDb250ZW50Owp9aWYoJHRlbGVyaWsuaXNTYWZhcmkyKXt0aGlzLl90ZXh0PWQuaW5uZXJIVE1MOwp9ZWxzZXtpZigkdGVsZXJpay5pc1NhZmFyaSl7dGhpcy5fdGV4dD1kLnRleHRDb250ZW50Owp9fXJldHVybiB0aGlzLl9yZW1vdmVFbVRhZ3ModGhpcy5fdGV4dCk7Cn0sZ2V0X2Jhc2VUZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGMuUmFkQ29tYm9Cb3hJdGVtLmNhbGxCYXNlTWV0aG9kKHRoaXMsImdldF90ZXh0Iik7Cn0sc2V0X3RleHQ6ZnVuY3Rpb24oaCl7dmFyIGQ9dGhpcy5nZXRfZWxlbWVudCgpLGU9dGhpcy5nZXRfdGV4dEVsZW1lbnQoKSxnPXRoaXMuZ2V0X2NvbWJvQm94KCksZj10aGlzLmdldF9jaGVja0JveEVsZW1lbnQoKTsKaWYoZCYmZC5jbGFzc05hbWUuaW5kZXhPZigicmNiVGVtcGxhdGUiKT09LTEmJmUmJmcuX2NoZWNrQm94ZXM9PWZhbHNlKXtlLmlubmVySFRNTD1oOwp9ZWxzZXtpZihkJiZnLl9jaGVja0JveGVzJiZmKXtmWzBdLm5leHRTaWJsaW5nLm5vZGVWYWx1ZT1oOwppZih0aGlzLmdldF9jaGVja2VkKCkpe2cuX3VwZGF0ZUNvbWJvQm94VGV4dCgpOwp9fX10aGlzLl90ZXh0PWg7CnRoaXMuX3Byb3BlcnRpZXMuc2V0VmFsdWUoInRleHQiLGgsdHJ1ZSk7Cn0sX3JlbW92ZUVtVGFnczpmdW5jdGlvbihkKXt2YXIgZT1kLmluZGV4T2YoIjxlbT4iKTsKdmFyIGY9ZC5pbmRleE9mKCI8L2VtPiIpOwppZihlPj0wJiZmPmUpe2Q9U3RyaW5nLmZvcm1hdCgiezB9ezF9ezJ9IixkLnN1YnN0cigwLGUpLGQuc3Vic3RyKGUrNCxmLWUtNCksZC5zdWJzdHIoZis1KSk7Cn1yZXR1cm4gZDsKfSxzZXRfdmlzaWJsZTpmdW5jdGlvbihmKXt2YXIgZT10aGlzLmdldF92aXNpYmxlKCkhPWYsZD10aGlzLmdldF9lbGVtZW50KCk7CmlmKCFlKXtyZXR1cm47Cn1jLlJhZENvbWJvQm94SXRlbS5jYWxsQmFzZU1ldGhvZCh0aGlzLCJzZXRfdmlzaWJsZSIsW2ZdKTsKaWYoZil7ZC5zdHlsZS5kaXNwbGF5PSIiOwp9ZWxzZXtkLnN0eWxlLmRpc3BsYXk9Im5vbmUiOwp9fSxjbGVhckVtVGFnczpmdW5jdGlvbigpe3ZhciBkPXRoaXM7CmIodGhpcy5nZXRfZWxlbWVudCgpKS5maW5kKCJlbSIpLmNvbnRlbnRzKCkudW53cmFwKCkucGFyZW50KCkuZWFjaChmdW5jdGlvbigpe2lmKCR0ZWxlcmlrLmlzSUUpe2QuX25vcm1hbGl6ZSh0aGlzKTsKfWVsc2V7dGhpcy5ub3JtYWxpemUoKTsKfX0pOwp9LF9ub3JtYWxpemU6ZnVuY3Rpb24oZCl7dmFyIGY9ZC5maXJzdENoaWxkLGU7CndoaWxlKGYpe2lmKGYubm9kZVR5cGU9PTMpe3doaWxlKChlPWYubmV4dFNpYmxpbmcpJiZlLm5vZGVUeXBlPT0zKXtmLmFwcGVuZERhdGEoZS5kYXRhKTsKZC5yZW1vdmVDaGlsZChlKTsKfX1lbHNle3RoaXMuX25vcm1hbGl6ZShmKTsKfWY9Zi5uZXh0U2libGluZzsKfX0sX2hpZ2hsaWdodDpmdW5jdGlvbihoLGQpe3ZhciBnPXRoaXMsZT1mdW5jdGlvbihpKXtyZXR1cm4gYS5TVFJJTkdfRU1fU1RBUlQraSthLlNUUklOR19FTV9FTkQ7Cn0sZj1mYWxzZTsKYihkKS5jb250ZW50cygpLmVhY2goZnVuY3Rpb24oKXtpZih0aGlzLm5vZGVUeXBlIT0xKXt2YXIgaj1iKHRoaXMpLnRleHQoKTsKaWYoaC50ZXN0KGopKXt2YXIgaT1qLnJlcGxhY2UoaCxlKTsKaT1jLlJhZENvbWJvQm94Lmh0bWxFbmNvZGUoaSk7Cmk9aS5yZXBsYWNlKGEuUkVHRVhfRU1fU1RBUlRfSFRNTF9FTkNPREVELGEuU1RSSU5HX0VNX1NUQVJUKS5yZXBsYWNlKGEuUkVHRVhfRU1fRU5EX0hUTUxfRU5DT0RFRCxhLlNUUklOR19FTV9FTkQpOwppZighYih0aGlzKS5zaWJsaW5ncygpKXtwYXJlbnQuaW5uZXJIVE1MPWk7Cn1lbHNle2IodGhpcykucmVwbGFjZVdpdGgoaSk7Cn1mPXRydWU7Cn19ZWxzZXtpZihnLl9oaWdobGlnaHQoaCx0aGlzKSl7Zj10cnVlOwp9fX0pOwpyZXR1cm4gZjsKfSxoaWdobGlnaHRUZXh0OmZ1bmN0aW9uKGcsZCl7dGhpcy5jbGVhckVtVGFncygpOwppZihkPT09IiIpe3JldHVybiB0cnVlOwp9dmFyIGg9YS5fcmVnRXhFc2NhcGUoZCksZj1udWxsOwppZihnPT1jLlJhZENvbWJvQm94RmlsdGVyLlN0YXJ0c1dpdGgpe2Y9bmV3IFJlZ0V4cCgiXlxccyoiK2gsImltIik7Cn1lbHNle2lmKGc9PWMuUmFkQ29tYm9Cb3hGaWx0ZXIuQ29udGFpbnMpe2Y9bmV3IFJlZ0V4cChoLCJnaW0iKTsKfX12YXIgZT10aGlzLl9oaWdobGlnaHQoZix0aGlzLmdldF9lbGVtZW50KCkpOwpyZXR1cm4gZTsKfSxfY3JlYXRlRG9tRWxlbWVudDpmdW5jdGlvbigpe3ZhciBkPXRoaXMuZ2V0X2NvbWJvQm94KCkuZ2V0X3NpbXBsZVJlbmRlcmluZygpLGU9ZD9kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTpkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ1bCIpLGY9W107CmlmKGQpe2ZbZi5sZW5ndGhdPSI8c2VsZWN0PiI7Cn10aGlzLl9yZW5kZXIoZik7CmlmKGQpe2ZbZi5sZW5ndGhdPSI8L3NlbGVjdD4iOwp9ZS5pbm5lckhUTUw9Zi5qb2luKCIiKTsKaWYoZCl7cmV0dXJuIGUuZmlyc3RDaGlsZC5maXJzdENoaWxkOwp9ZWxzZXtyZXR1cm4gZS5maXJzdENoaWxkOwp9fSxfcmVuZGVyOmZ1bmN0aW9uKGQpe2lmKHRoaXMuZ2V0X2NvbWJvQm94KCkuZ2V0X3NpbXBsZVJlbmRlcmluZygpKXt0aGlzLl9yZW5kZXJPcHRpb25FbGVtZW50KGQpOwp9ZWxzZXt0aGlzLl9yZW5kZXJMaUVsZW1lbnQoZCk7Cn19LF9yZW5kZXJPcHRpb25FbGVtZW50OmZ1bmN0aW9uKGQpe2RbZC5sZW5ndGhdPSI8b3B0aW9uIjsKaWYodGhpcy5nZXRfdmFsdWUoKSl7ZFtkLmxlbmd0aF09IiB2YWx1ZT0nIit0aGlzLmdldF92YWx1ZSgpKyInIjsKfWlmKCF0aGlzLmdldF9lbmFibGVkKCkpe2RbZC5sZW5ndGhdPSIgZGlzYWJsZWQ9J2Rpc2FibGVkJyI7Cn1pZih0aGlzLmdldF9zZWxlY3RlZCgpKXtkW2QubGVuZ3RoXT0iIHNlbGVjdGVkPSdzZWxlY3RlZCciOwp9ZFtkLmxlbmd0aF09Ij4iOwpkW2QubGVuZ3RoXT10aGlzLmdldF90ZXh0KCk7CmRbZC5sZW5ndGhdPSI8L29wdGlvbj4iOwp9LF9yZW5kZXJMaUVsZW1lbnQ6ZnVuY3Rpb24oZSl7dmFyIGQ9dGhpcy5fcmVuZGVyZWRDbGllbnRUZW1wbGF0ZTsKZVtlLmxlbmd0aF09IjxsaSBjbGFzcz0nIjsKaWYodGhpcy5nZXRfZW5hYmxlZCgpKXtlW2UubGVuZ3RoXT0icmNiSXRlbSI7CmlmKHRoaXMuZ2V0X2lzU2VwYXJhdG9yKCkpe2VbZS5sZW5ndGhdPSIgcmNiU2VwYXJhdG9yIjsKfX1lbHNle2VbZS5sZW5ndGhdPSJyY2JEaXNhYmxlZCI7Cn1pZihkKXtlW2UubGVuZ3RoXT0iIHJjYlRlbXBsYXRlIjsKfWVbZS5sZW5ndGhdPSInPiI7CmlmKHRoaXMuZ2V0X2ltYWdlVXJsKCkmJiFkKXt0aGlzLl9yZW5kZXJJbWFnZShlKTsKfWlmKHRoaXMuZ2V0X2NvbWJvQm94KCkuX2NoZWNrQm94ZXMpe3RoaXMuX3JlbmRlckNoZWNrQm94KGUpOwp9aWYoZCl7ZVtlLmxlbmd0aF09ZDsKfWVsc2V7ZVtlLmxlbmd0aF09dGhpcy5nZXRfdGV4dCgpOwp9ZVtlLmxlbmd0aF09IjwvbGk+IjsKfSxfcmVuZGVyQ2hlY2tCb3g6ZnVuY3Rpb24oZCl7ZFtkLmxlbmd0aF09IjxpbnB1dCB0eXBlPSdjaGVja2JveCcgY2xhc3M9J3JjYkNoZWNrQm94JyI7CmlmKHRoaXMuZ2V0X2NoZWNrZWQoKSl7ZFtkLmxlbmd0aF09IiBjaGVja2VkPSdjaGVja2VkJyI7Cn1pZighdGhpcy5nZXRfZW5hYmxlZCgpKXtkW2QubGVuZ3RoXT0iIGRpc2FibGVkPSdkaXNhYmxlZCciOwp9ZFtkLmxlbmd0aF09IiAvPiI7Cn0sX3JlbmRlckltYWdlOmZ1bmN0aW9uKGQpe2RbZC5sZW5ndGhdPSI8aW1nIGFsdD0nJyBzcmM9JyIrdGhpcy5nZXRfaW1hZ2VVcmwoKSsiJyBjbGFzcz0ncmNiSW1hZ2UnIjsKaWYoIXRoaXMuZ2V0X2VuYWJsZWQoKSl7ZFtkLmxlbmd0aF09IiBkaXNhYmxlZD0nZGlzYWJsZWQnIjsKfWRbZC5sZW5ndGhdPSIvPiI7CnJldHVybiBkOwp9LF91cGRhdGVJbWFnZVNyYzpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0X2ltYWdlVXJsKCksZD10aGlzLmdldF9kaXNhYmxlZEltYWdlVXJsKCk7CmlmKCF0aGlzLmdldF9lbmFibGVkKCkmJmQpe2U9ZDsKfWlmKGUmJnRoaXMuZ2V0X2VsZW1lbnQoKSl7dmFyIGY9dGhpcy5nZXRfaW1hZ2VFbGVtZW50KCk7CmlmKCFmKXtmPXRoaXMuX2NyZWF0ZUltYWdlRWxlbWVudCgpOwp9ZT1lLnJlcGxhY2UoLyZhbXA7L2lnLCImIik7CmlmKGUhPWYuc3JjKXtmLnNyYz1lOwp9fX0sX2NyZWF0ZUltYWdlRWxlbWVudDpmdW5jdGlvbigpe3RoaXMuX2ltYWdlRWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKTsKdGhpcy5faW1hZ2VFbGVtZW50LmNsYXNzTmFtZT0icmNiSW1hZ2UiOwppZighdGhpcy5nZXRfZW5hYmxlZCgpKXt0aGlzLl9pbWFnZUVsZW1lbnQuZGlzYWJsZWQ9ImRpc2FibGVkIjsKfXZhciBkPXRoaXMuZ2V0X2VsZW1lbnQoKTsKaWYoZC5maXJzdENoaWxkKXtkLmluc2VydEJlZm9yZSh0aGlzLl9pbWFnZUVsZW1lbnQsZC5maXJzdENoaWxkKTsKfWVsc2V7ZC5hcHBlbmRDaGlsZCh0aGlzLl9pbWFnZUVsZW1lbnQpOwp9cmV0dXJuIHRoaXMuX2ltYWdlRWxlbWVudDsKfSxnZXRfY2hlY2tCb3hFbGVtZW50OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX2NoZWNrQm94RWxlbWVudCl7aWYoIXRoaXMuZ2V0X2NsaWVudFRlbXBsYXRlKCkpe3RoaXMuX2NoZWNrQm94RWxlbWVudD1iKHRoaXMuZ2V0X2VsZW1lbnQoKSkuZmluZCgibGFiZWwgPiBpbnB1dCIpfHxudWxsOwp9ZWxzZXt0aGlzLl9jaGVja0JveEVsZW1lbnQ9Yih0aGlzLmdldF9lbGVtZW50KCkpLmNoaWxkcmVuKCJpbnB1dFt0eXBlPSdjaGVja2JveCddIikuZ2V0KDApfHxudWxsOwp9fXJldHVybiB0aGlzLl9jaGVja0JveEVsZW1lbnQ7Cn0sZ2V0X2ltYWdlRWxlbWVudDpmdW5jdGlvbigpe2lmKCF0aGlzLl9pbWFnZUVsZW1lbnQpe3ZhciBkPXRoaXMuZ2V0X2VsZW1lbnQoKTsKdGhpcy5faW1hZ2VFbGVtZW50PSR0ZWxlcmlrLmdldEZpcnN0Q2hpbGRCeVRhZ05hbWUoZCwiaW1nIiwwKTsKfXJldHVybiB0aGlzLl9pbWFnZUVsZW1lbnQ7Cn0sZ2V0X2Rpc2FibGVkSW1hZ2VVcmw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvcGVydGllcy5nZXRWYWx1ZSgiZGlzYWJsZWRJbWFnZVVybCIsbnVsbCk7Cn0sc2V0X2Rpc2FibGVkSW1hZ2VVcmw6ZnVuY3Rpb24oZCl7dGhpcy5fcHJvcGVydGllcy5zZXRWYWx1ZSgiZGlzYWJsZWRJbWFnZVVybCIsZCx0cnVlKTsKdGhpcy5fdXBkYXRlSW1hZ2VTcmMoKTsKfSxnZXRfaW1hZ2VVcmw6ZnVuY3Rpb24oKXtpZih0aGlzLl9pbWFnZVVybD10aGlzLl9wcm9wZXJ0aWVzLmdldFZhbHVlKCJpbWFnZVVybCIsbnVsbCkpe3JldHVybiB0aGlzLl9pbWFnZVVybDsKfWlmKCF0aGlzLl9pbWFnZVVybCl7dmFyIGQ9dGhpcy5nZXRfaW1hZ2VFbGVtZW50KCk7CmlmKGQpe3RoaXMuX2ltYWdlVXJsPWQuc3JjOwp9fXJldHVybiB0aGlzLl9pbWFnZVVybDsKfSxzZXRfaW1hZ2VVcmw6ZnVuY3Rpb24oZCl7dGhpcy5faW1hZ2VVcmw9ZDsKdGhpcy5fcHJvcGVydGllcy5zZXRWYWx1ZSgiaW1hZ2VVcmwiLGQsdHJ1ZSk7CnRoaXMuX3VwZGF0ZUltYWdlU3JjKCk7Cn0sZ2V0X3ZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Byb3BlcnRpZXMuZ2V0VmFsdWUoInZhbHVlIiwiIik7Cn0sc2VsZWN0OmZ1bmN0aW9uKCl7dGhpcy5fc2VsZWN0KG51bGwpOwp9LGhpZGU6ZnVuY3Rpb24oKXt0aGlzLnNldF92aXNpYmxlKGZhbHNlKTsKfSxzaG93OmZ1bmN0aW9uKCl7dGhpcy5zZXRfdmlzaWJsZSh0cnVlKTsKfSxjaGVjazpmdW5jdGlvbigpe3RoaXMuc2V0X2NoZWNrZWQodHJ1ZSk7Cn0sdW5jaGVjazpmdW5jdGlvbigpe3RoaXMuc2V0X2NoZWNrZWQoZmFsc2UpOwp9LGdldF9jaGVja2VkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Byb3BlcnRpZXMuZ2V0VmFsdWUoImNoZWNrZWQiLGZhbHNlKT09dHJ1ZTsKfSxzZXRfY2hlY2tlZDpmdW5jdGlvbihmKXtpZighdGhpcy5nZXRfZW5hYmxlZCgpKXtyZXR1cm47Cn10aGlzLl9zZXRDaGVja2VkKGYpOwp2YXIgZD10aGlzLmdldF9jb21ib0JveCgpLGU9dGhpcy5nZXRfaW5kZXgoKTsKaWYoZCl7aWYoZil7ZC5fcmVnaXN0ZXJDaGVja2VkSW5kZXgoZSk7Cn1lbHNle2QuX3VucmVnaXN0ZXJDaGVja2VkSW5kZXgoZSk7Cn1kLl91cGRhdGVDb21ib0JveFRleHQoKTsKaWYoZC5fY2hlY2tBbGxJdGVtc0VsZW1lbnQhPW51bGwpe2QuX3VwZGF0ZUNoZWNrQWxsU3RhdGUoKTsKfX19LF9zZXRDaGVja2VkOmZ1bmN0aW9uKGQpe3RoaXMuX3Byb3BlcnRpZXMuc2V0VmFsdWUoImNoZWNrZWQiLGQpOwp0aGlzLl91cGRhdGVDaGVja0JveENoZWNrZWRTdGF0ZShkKTsKfSxfdXBkYXRlQ2hlY2tCb3hDaGVja2VkU3RhdGU6ZnVuY3Rpb24oZCl7dmFyIGU9Yih0aGlzLmdldF9jaGVja0JveEVsZW1lbnQoKSk7CmlmKGVbMF0pe2lmKGQpe2UuYXR0cigiY2hlY2tlZCIsImNoZWNrZWQiKTsKfWVsc2V7ZS5yZW1vdmVBdHRyKCJjaGVja2VkIik7Cn19fSxfc2VsZWN0OmZ1bmN0aW9uKGYpe2lmKCF0aGlzLmdldF9pc0VuYWJsZWQoKXx8dGhpcy5nZXRfaXNTZXBhcmF0b3IoKSl7cmV0dXJuOwp9dmFyIGc9dGhpcy5nZXRfY29tYm9Cb3goKTsKaWYoIWcuZ2V0X3NpbXBsZVJlbmRlcmluZygpJiZnLnJhaXNlX3NlbGVjdGVkSW5kZXhDaGFuZ2luZyh0aGlzLGYpPT10cnVlKXtyZXR1cm47Cn12YXIgZD1nLmdldF90ZXh0KCk7Cmxhc3RTZXBhcmF0b3JJbmRleD1nLl9nZXRMYXN0U2VwYXJhdG9ySW5kZXgoZCksdGV4dFRvU2V0PWQuc3Vic3RyaW5nKDAsbGFzdFNlcGFyYXRvckluZGV4KzEpK3RoaXMuZ2V0X3RleHQoKSxzZWxlY3RlZEl0ZW09Zy5nZXRfc2VsZWN0ZWRJdGVtKCk7CmlmKHNlbGVjdGVkSXRlbSl7c2VsZWN0ZWRJdGVtLnNldF9zZWxlY3RlZChmYWxzZSk7Cn1nLnNldF90ZXh0KHRleHRUb1NldCk7Cmcuc2V0X29yaWdpbmFsVGV4dCh0ZXh0VG9TZXQpOwpnLnNldF92YWx1ZSh0aGlzLmdldF92YWx1ZSgpKTsKZy5zZXRfc2VsZWN0ZWRJdGVtKHRoaXMpOwpnLnNldF9zZWxlY3RlZEluZGV4KHRoaXMuZ2V0X2luZGV4KCkpOwppZihnLmdldF9zaW1wbGVSZW5kZXJpbmcoKSl7dGhpcy5nZXRfZWxlbWVudCgpLnNlbGVjdGVkPSJzZWxlY3RlZCI7Cn10aGlzLnNldF9zZWxlY3RlZCh0cnVlKTsKdGhpcy5oaWdobGlnaHQoKTsKZy5yYWlzZV9zZWxlY3RlZEluZGV4Q2hhbmdlZCh0aGlzLGYpOwp2YXIgaD17Q29tbWFuZDoiU2VsZWN0IixJbmRleDp0aGlzLmdldF9pbmRleCgpfTsKZy5wb3N0YmFjayhoKTsKfSxfY3JlYXRlQ2hpbGRDb250cm9sczpmdW5jdGlvbigpe30sdW5IaWdobGlnaHQ6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLmdldF9jb21ib0JveCgpOwppZighZC5nZXRfaXNUZW1wbGF0ZWQoKXx8ZC5nZXRfaGlnaGxpZ2h0VGVtcGxhdGVkSXRlbXMoKSl7dGhpcy5fcmVwbGFjZUNzc0NsYXNzKHRoaXMuZ2V0X2VsZW1lbnQoKSwicmNiSG92ZXJlZCIsInJjYkl0ZW0iKTsKfWQuc2V0X2hpZ2hsaWdodGVkSXRlbShudWxsKTsKfSxoaWdobGlnaHQ6ZnVuY3Rpb24oKXtpZighdGhpcy5nZXRfaXNFbmFibGVkKCl8fHRoaXMuZ2V0X2lzU2VwYXJhdG9yKCkpe3JldHVybjsKfXZhciBlPXRoaXMuZ2V0X2NvbWJvQm94KCk7CmlmKCFlLmdldF9pc1RlbXBsYXRlZCgpfHxlLmdldF9oaWdobGlnaHRUZW1wbGF0ZWRJdGVtcygpKXt2YXIgZD1lLmdldF9oaWdobGlnaHRlZEl0ZW0oKTsKaWYoZCl7ZC51bkhpZ2hsaWdodCgpOwp9dmFyIGY9dGhpcy5nZXRfZWxlbWVudCgpOwppZihmKXt0aGlzLl9yZXBsYWNlQ3NzQ2xhc3MoZiwicmNiSXRlbSIsInJjYkhvdmVyZWQiKTsKfX1lLnNldF9oaWdobGlnaHRlZEl0ZW0odGhpcyk7Cn0sc2Nyb2xsT25Ub3A6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLmdldF9jb21ib0JveCgpOwppZihkJiZkLmdldF9zaW1wbGVSZW5kZXJpbmcoKSl7cmV0dXJuOwp9dmFyIGU9dGhpcy5nZXRfZWxlbWVudCgpLm9mZnNldFRvcCxmPWQuX2dldEhlYWRlckVsZW1lbnQoKTsKaWYoZil7ZT1lLWYub2Zmc2V0SGVpZ2h0Owp9ZC5nZXRfY2hpbGRMaXN0RWxlbWVudFdyYXBwZXIoKS5zY3JvbGxUb3A9ZTsKfSxzY3JvbGxJbnRvVmlldzpmdW5jdGlvbigpe3ZhciBpPXRoaXMuZ2V0X2NvbWJvQm94KCksZT10aGlzLmdldF9lbGVtZW50KCk7CmlmKGkmJmkuZ2V0X3NpbXBsZVJlbmRlcmluZygpKXtyZXR1cm47Cn12YXIgZD1lLm9mZnNldFRvcCxmPWUub2Zmc2V0SGVpZ2h0LGc9aS5nZXRfY2hpbGRMaXN0RWxlbWVudFdyYXBwZXIoKTsKZHJvcERvd25PZmZzZXQ9Zy5zY3JvbGxUb3A7CmRyb3BEb3duVmlzaWJsZUhlaWdodD1nLm9mZnNldEhlaWdodDsKaWYoZCtmPmRyb3BEb3duT2Zmc2V0K2Ryb3BEb3duVmlzaWJsZUhlaWdodCl7Zy5zY3JvbGxUb3A9ZCtmLWRyb3BEb3duVmlzaWJsZUhlaWdodDsKaWYoZy5jbGllbnRXaWR0aDxnLnNjcm9sbFdpZHRoKXt2YXIgaD1jLlJhZENvbWJvQm94Ll9nZXRTY3JvbGxCYXJXaWR0aCgpOwpnLnNjcm9sbFRvcCs9aDsKfX1lbHNle2lmKGQrZjw9ZHJvcERvd25PZmZzZXQpe2cuc2Nyb2xsVG9wPWQ7Cn19fSxuZXh0SXRlbTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldF9jb21ib0JveCgpLmdldF9pdGVtcygpLmdldEl0ZW0odGhpcy5nZXRfaW5kZXgoKSsxKTsKfSxfcmVwbGFjZUNzc0NsYXNzOmZ1bmN0aW9uKGQsZSxmKXtkLmNsYXNzTmFtZT1kLmNsYXNzTmFtZS5yZXBsYWNlKGUsZik7Cn0sX2NyZWF0ZUNoaWxkTGlzdEVsZW1lbnQ6ZnVuY3Rpb24oKXt2YXIgZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ1bCIpOwp0aGlzLmdldF9jb21ib2JveCgpLmdldF9kcm9wRG93bkVsZW1lbnQoKS5hcHBlbmRDaGlsZChkKTsKfSxzZXRfc2VsZWN0ZWQ6ZnVuY3Rpb24oZCl7dGhpcy5fcHJvcGVydGllcy5zZXRWYWx1ZSgic2VsZWN0ZWQiLGQpOwp9LGdldF9zZWxlY3RlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wcm9wZXJ0aWVzLmdldFZhbHVlKCJzZWxlY3RlZCIsZmFsc2UpOwp9LGdldF9oaWdobGlnaHRlZDpmdW5jdGlvbigpe3ZhciBkPXRoaXMuZ2V0X2NvbWJvQm94KCk7CmlmKCFkKXtyZXR1cm4gZmFsc2U7Cn1yZXR1cm4gZC5nZXRfaGlnaGxpZ2h0ZWRJdGVtKCk9PXRoaXM7Cn0sZGlzYWJsZTpmdW5jdGlvbigpe3RoaXMuX2NoYW5nZUVuYWJsZWRTdGF0ZShmYWxzZSk7Cn0sZW5hYmxlOmZ1bmN0aW9uKCl7dGhpcy5fY2hhbmdlRW5hYmxlZFN0YXRlKHRydWUpOwp9LF9jaGFuZ2VFbmFibGVkU3RhdGU6ZnVuY3Rpb24oZil7dGhpcy5zZXRfZW5hYmxlZChmKTsKdmFyIGU9dGhpcy5nZXRfY29tYm9Cb3goKSxkPXRoaXMuZ2V0X2VsZW1lbnQoKTsKaWYoZSYmZS5nZXRfc2ltcGxlUmVuZGVyaW5nKCkpe2Y/ZC5yZW1vdmVBdHRyaWJ1dGUoImRpc2FibGVkIik6ZC5kaXNhYmxlZD0iZGlzYWJsZWQiOwp9ZWxzZXtmP2QuY2xhc3NOYW1lPSJyY2JJdGVtIjpkLmNsYXNzTmFtZT0icmNiRGlzYWJsZWQiOwp9fSxzZXRfZW5hYmxlZDpmdW5jdGlvbihkKXt0aGlzLl9wcm9wZXJ0aWVzLnNldFZhbHVlKCJlbmFibGVkIixkLHRydWUpOwp2YXIgZT1iKHRoaXMuZ2V0X2NoZWNrQm94RWxlbWVudCgpKTsKaWYoZVswXSl7aWYoIWQpe2UuYXR0cigiZGlzYWJsZWQiLCJkaXNhYmxlZCIpOwp9ZWxzZXtlLnJlbW92ZUF0dHIoImRpc2FibGVkIik7Cn19dGhpcy5fdXBkYXRlSW1hZ2VTcmMoKTsKfSxnZXRfdGV4dEVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRfZWxlbWVudCgpOwp9LGdldF9jb21ib0JveDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYXJlbnQ7Cn0sX2dldEhpZXJhcmNoaWNhbEluZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0X2luZGV4KCk7Cn0sZ2V0X2lzU2VwYXJhdG9yOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Byb3BlcnRpZXMuZ2V0VmFsdWUoImlzU2VwYXJhdG9yIixmYWxzZSk7Cn0sc2V0X2lzU2VwYXJhdG9yOmZ1bmN0aW9uKGQpe3RoaXMuX3Byb3BlcnRpZXMuc2V0VmFsdWUoImlzU2VwYXJhdG9yIixkLHRydWUpOwp2YXIgZT10aGlzLmdldF9lbGVtZW50KCk7CmlmKGUpe1N5cy5VSS5Eb21FbGVtZW50LnRvZ2dsZUNzc0NsYXNzKGUsInJjYlNlcGFyYXRvciIpOwp9fSxnZXRfY2xpZW50VGVtcGxhdGU6ZnVuY3Rpb24oKXtpZih0aGlzLl9jbGllbnRUZW1wbGF0ZSl7cmV0dXJuIHRoaXMuX2NsaWVudFRlbXBsYXRlOwp9ZWxzZXtpZih0aGlzLmdldF9jb21ib0JveCgpKXtyZXR1cm4gdGhpcy5nZXRfY29tYm9Cb3goKS5nZXRfY2xpZW50VGVtcGxhdGUoKTsKfWVsc2V7cmV0dXJuIG51bGw7Cn19fSxzZXRfY2xpZW50VGVtcGxhdGU6ZnVuY3Rpb24oZCl7dGhpcy5fY2xpZW50VGVtcGxhdGU9ZDsKfSxiaW5kVGVtcGxhdGU6ZnVuY3Rpb24oZCl7aWYoIWQpe2Q9dGhpcy5fZXh0cmFjdERhdGFJdGVtKCk7Cn10aGlzLl9yZW5kZXJlZENsaWVudFRlbXBsYXRlPWMuVGVtcGxhdGVSZW5kZXJlci5yZW5kZXJUZW1wbGF0ZShkLHRoaXMuZ2V0X2NvbWJvQm94KCksdGhpcyk7CmlmKHRoaXMuZ2V0X2VsZW1lbnQoKSl7dGhpcy5fYXBwbHlUZW1wbGF0ZSgpOwp9fSxfZXh0cmFjdERhdGFJdGVtOmZ1bmN0aW9uKCl7cmV0dXJue1RleHQ6dGhpcy5nZXRfdGV4dCgpLFZhbHVlOnRoaXMuZ2V0X3ZhbHVlKCksSW1hZ2VVcmw6dGhpcy5nZXRfaW1hZ2VVcmwoKSxEaXNhYmxlZEltYWdlVXJsOnRoaXMuZ2V0X2Rpc2FibGVkSW1hZ2VVcmwoKSxBdHRyaWJ1dGVzOnRoaXMuZ2V0X2F0dHJpYnV0ZXMoKS5fZGF0YX07Cn0sX2FwcGx5VGVtcGxhdGU6ZnVuY3Rpb24oKXtpZighdGhpcy5fcmVuZGVyZWRDbGllbnRUZW1wbGF0ZSl7cmV0dXJuOwp9dmFyIGQ9dGhpcy5nZXRfdGV4dEVsZW1lbnQoKSxmPWIodGhpcy5nZXRfZWxlbWVudCgpKS5jaGlsZHJlbigiaW5wdXRbdHlwZT0nY2hlY2tib3gnXSIpLmdldCgwKSxlPSIiOwppZihmKXtlPWYub3V0ZXJIVE1MOwp9ZSs9dGhpcy5fcmVuZGVyZWRDbGllbnRUZW1wbGF0ZTsKZC5pbm5lckhUTUw9ZTsKYihkKS5hZGRDbGFzcygicmNiVGVtcGxhdGUiKTsKfSxfYXBwbHlDc3NDbGFzczpmdW5jdGlvbihlLGQpe3RoaXMuX3JlbW92ZUNsYXNzRnJvbUVsZW1lbnQoZCk7CnRoaXMuX2FkZENsYXNzVG9FbGVtZW50KGUpOwp9LF9yZW1vdmVDbGFzc0Zyb21FbGVtZW50OmZ1bmN0aW9uKGQpe2IodGhpcy5nZXRfZWxlbWVudCgpKS5yZW1vdmVDbGFzcyhkKTsKfSxfYWRkQ2xhc3NUb0VsZW1lbnQ6ZnVuY3Rpb24oZCl7Yih0aGlzLmdldF9lbGVtZW50KCkpLmFkZENsYXNzKGQpOwp9LF9kaXNwb3NlOmZ1bmN0aW9uKCl7Yy5SYWRDb21ib0JveEl0ZW0uY2FsbEJhc2VNZXRob2QodGhpcywiX2Rpc3Bvc2UiKTsKdGhpcy5fcGFyZW50PW51bGw7Cn19OwpjLlJhZENvbWJvQm94SXRlbS5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5SYWRDb21ib0JveEl0ZW0iLGMuQ29udHJvbEl0ZW0pOwp9KSgpOwooZnVuY3Rpb24oKXt2YXIgYT0kdGVsZXJpay4kOwp2YXIgYj1UZWxlcmlrLldlYi5VSTsKVGVsZXJpay5XZWIuVUkuUmFkQ29tYm9Cb3hJdGVtQ29sbGVjdGlvbj1mdW5jdGlvbihjKXtUZWxlcmlrLldlYi5VSS5SYWRDb21ib0JveEl0ZW1Db2xsZWN0aW9uLmluaXRpYWxpemVCYXNlKHRoaXMsW2NdKTsKfTsKYi5SYWRDb21ib0JveEl0ZW1Db2xsZWN0aW9uLnByb3RvdHlwZT17Y2xlYXI6ZnVuY3Rpb24oKXt2YXIgZz10aGlzLl9wYXJlbnQuX2dldENvbnRyb2woKTsKaWYoZy5fY2hlY2tCb3hlcyl7Zy5fY2hlY2tlZEluZGljZXNKc29uPSJbXSI7CmcuX2NoZWNrZWRJbmRpY2VzPVtdOwp2YXIgZT1nLmdldF9pdGVtcygpOwpmb3IodmFyIGY9MCxkPWUuZ2V0X2NvdW50KCk7CmY8ZDsKZisrKXt2YXIgYz1nLmdldF9pdGVtcygpLmdldEl0ZW0oZik7CmMuc2V0X2NoZWNrZWQoZmFsc2UpOwp9Zy51cGRhdGVDbGllbnRTdGF0ZSgpOwp9Yi5SYWRDb21ib0JveEl0ZW1Db2xsZWN0aW9uLmNhbGxCYXNlTWV0aG9kKHRoaXMsImNsZWFyIik7Cn19OwpiLlJhZENvbWJvQm94SXRlbUNvbGxlY3Rpb24ucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuUmFkQ29tYm9Cb3hJdGVtQ29sbGVjdGlvbiIsYi5Db250cm9sSXRlbUNvbGxlY3Rpb24pOwp9KSgpOwooZnVuY3Rpb24oKXt2YXIgYT1UZWxlcmlrLldlYi5VSTsKYS5SYWRDb21ib0JveEV2ZW50QXJncz1mdW5jdGlvbihiKXthLlJhZENvbWJvQm94RXZlbnRBcmdzLmluaXRpYWxpemVCYXNlKHRoaXMpOwp0aGlzLl9kb21FdmVudD1iOwp9OwphLlJhZENvbWJvQm94RXZlbnRBcmdzLnByb3RvdHlwZT17Z2V0X2RvbUV2ZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RvbUV2ZW50Owp9fTsKYS5SYWRDb21ib0JveEV2ZW50QXJncy5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5SYWRDb21ib0JveEV2ZW50QXJncyIsU3lzLkV2ZW50QXJncyk7CmEuUmFkQ29tYm9Cb3hDYW5jZWxFdmVudEFyZ3M9ZnVuY3Rpb24oYil7YS5SYWRDb21ib0JveENhbmNlbEV2ZW50QXJncy5pbml0aWFsaXplQmFzZSh0aGlzKTsKdGhpcy5fZG9tRXZlbnQ9YjsKfTsKYS5SYWRDb21ib0JveENhbmNlbEV2ZW50QXJncy5wcm90b3R5cGU9e2dldF9kb21FdmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kb21FdmVudDsKfX07CmEuUmFkQ29tYm9Cb3hDYW5jZWxFdmVudEFyZ3MucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuUmFkQ29tYm9Cb3hDYW5jZWxFdmVudEFyZ3MiLFN5cy5DYW5jZWxFdmVudEFyZ3MpOwphLlJhZENvbWJvQm94SXRlbUV2ZW50QXJncz1mdW5jdGlvbihjLGIpe2EuUmFkQ29tYm9Cb3hJdGVtRXZlbnRBcmdzLmluaXRpYWxpemVCYXNlKHRoaXMpOwp0aGlzLl9pdGVtPWM7CnRoaXMuX2RvbUV2ZW50PWI7Cn07CmEuUmFkQ29tYm9Cb3hJdGVtRXZlbnRBcmdzLnByb3RvdHlwZT17Z2V0X2l0ZW06ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXRlbTsKfSxnZXRfZG9tRXZlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZG9tRXZlbnQ7Cn19OwphLlJhZENvbWJvQm94SXRlbUV2ZW50QXJncy5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5SYWRDb21ib0JveEl0ZW1FdmVudEFyZ3MiLFN5cy5FdmVudEFyZ3MpOwphLlJhZENvbWJvQm94SXRlbUNhbmNlbEV2ZW50QXJncz1mdW5jdGlvbihjLGIpe1RlbGVyaWsuV2ViLlVJLlJhZENvbWJvQm94SXRlbUNhbmNlbEV2ZW50QXJncy5pbml0aWFsaXplQmFzZSh0aGlzKTsKdGhpcy5faXRlbT1jOwp0aGlzLl9kb21FdmVudD1iOwp9OwphLlJhZENvbWJvQm94SXRlbUNhbmNlbEV2ZW50QXJncy5wcm90b3R5cGU9e2dldF9pdGVtOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2l0ZW07Cn0sZ2V0X2RvbUV2ZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RvbUV2ZW50Owp9fTsKYS5SYWRDb21ib0JveEl0ZW1DYW5jZWxFdmVudEFyZ3MucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuUmFkQ29tYm9Cb3hJdGVtQ2FuY2VsRXZlbnRBcmdzIixTeXMuQ2FuY2VsRXZlbnRBcmdzKTsKYS5SYWRDb21ib0JveFJlcXVlc3RFdmVudEFyZ3M9ZnVuY3Rpb24oYixjKXtUZWxlcmlrLldlYi5VSS5SYWRDb21ib0JveFJlcXVlc3RFdmVudEFyZ3MuaW5pdGlhbGl6ZUJhc2UodGhpcyk7CnRoaXMuX3RleHQ9YjsKdGhpcy5fZG9tRXZlbnQ9YzsKfTsKYS5SYWRDb21ib0JveFJlcXVlc3RFdmVudEFyZ3MucHJvdG90eXBlPXtnZXRfdGV4dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90ZXh0Owp9LGdldF9kb21FdmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kb21FdmVudDsKfX07CmEuUmFkQ29tYm9Cb3hSZXF1ZXN0RXZlbnRBcmdzLnJlZ2lzdGVyQ2xhc3MoIlRlbGVyaWsuV2ViLlVJLlJhZENvbWJvQm94UmVxdWVzdEV2ZW50QXJncyIsU3lzLkV2ZW50QXJncyk7CmEuUmFkQ29tYm9Cb3hSZXF1ZXN0Q2FuY2VsRXZlbnRBcmdzPWZ1bmN0aW9uKGIsZCxjKXthLlJhZENvbWJvQm94UmVxdWVzdENhbmNlbEV2ZW50QXJncy5pbml0aWFsaXplQmFzZSh0aGlzKTsKdGhpcy5fdGV4dD1iOwp0aGlzLl9jb250ZXh0PWQ7CnRoaXMuX2RvbUV2ZW50PWM7Cn07CmEuUmFkQ29tYm9Cb3hSZXF1ZXN0Q2FuY2VsRXZlbnRBcmdzLnByb3RvdHlwZT17Z2V0X3RleHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGV4dDsKfSxnZXRfY29udGV4dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb250ZXh0Owp9LGdldF9kb21FdmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kb21FdmVudDsKfX07CmEuUmFkQ29tYm9Cb3hSZXF1ZXN0Q2FuY2VsRXZlbnRBcmdzLnJlZ2lzdGVyQ2xhc3MoIlRlbGVyaWsuV2ViLlVJLlJhZENvbWJvQm94UmVxdWVzdENhbmNlbEV2ZW50QXJncyIsU3lzLkNhbmNlbEV2ZW50QXJncyk7CmEuUmFkQ29tYm9Cb3hJdGVtc1JlcXVlc3RGYWlsZWRFdmVudEFyZ3M9ZnVuY3Rpb24oYixkLGMpe2EuUmFkQ29tYm9Cb3hJdGVtc1JlcXVlc3RGYWlsZWRFdmVudEFyZ3MuaW5pdGlhbGl6ZUJhc2UodGhpcyk7CnRoaXMuX3RleHQ9YjsKdGhpcy5fZXJyb3JNZXNzYWdlPWQ7CnRoaXMuX2RvbUV2ZW50PWM7Cn07CmEuUmFkQ29tYm9Cb3hJdGVtc1JlcXVlc3RGYWlsZWRFdmVudEFyZ3MucHJvdG90eXBlPXtnZXRfdGV4dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90ZXh0Owp9LGdldF9lcnJvck1lc3NhZ2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXJyb3JNZXNzYWdlOwp9LGdldF9kb21FdmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kb21FdmVudDsKfX07CmEuUmFkQ29tYm9Cb3hJdGVtc1JlcXVlc3RGYWlsZWRFdmVudEFyZ3MucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuUmFkQ29tYm9Cb3hJdGVtc1JlcXVlc3RGYWlsZWRFdmVudEFyZ3MiLGEuUmFkQ29tYm9Cb3hDYW5jZWxFdmVudEFyZ3MpOwphLlJhZENvbWJvQm94SXRlbURhdGFCb3VuZEV2ZW50QXJncz1mdW5jdGlvbihjLGIpe2EuUmFkQ29tYm9Cb3hJdGVtRGF0YUJvdW5kRXZlbnRBcmdzLmluaXRpYWxpemVCYXNlKHRoaXMsW2NdKTsKdGhpcy5fZGF0YUl0ZW09YjsKfTsKYS5SYWRDb21ib0JveEl0ZW1EYXRhQm91bmRFdmVudEFyZ3MucHJvdG90eXBlPXtnZXRfZGF0YUl0ZW06ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YUl0ZW07Cn19OwphLlJhZENvbWJvQm94SXRlbURhdGFCb3VuZEV2ZW50QXJncy5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5SYWRDb21ib0JveEl0ZW1EYXRhQm91bmRFdmVudEFyZ3MiLGEuUmFkQ29tYm9Cb3hJdGVtRXZlbnRBcmdzKTsKfSkoKTsKKGZ1bmN0aW9uKCl7dmFyIGE9JHRlbGVyaWsuJDsKdmFyIGI9VGVsZXJpay5XZWIuVUk7CmEucmVnaXN0ZXJFbnVtKGIsIktleXMiLHtUYWI6OSxFbnRlcjoxMyxTaGlmdDoxNixFc2NhcGU6MjcsU3BhY2U6MzIsUGFnZVVwOjMzLFBhZ2VEb3duOjM0LEVuZDozNSxIb21lOjM2LExlZnQ6MzcsVXA6MzgsUmlnaHQ6MzksRG93bjo0MCxJbnNlcnQ6NDUsRGVsOjQ2LFplcm86NDgsTnVtcGFkMDo5NixOdW1wYWQ5OjEwNSxGMToxMTIsRjEyOjEyMyxEZWxldGU6MTI3fSk7CmEucmVnaXN0ZXJFbnVtKGIsIlJhZENvbWJvQm94RmlsdGVyIix7Tm9uZTowLENvbnRhaW5zOjEsU3RhcnRzV2l0aDoyfSk7CmEucmVnaXN0ZXJFbnVtKGIsIlJhZENvbWJvQm94RXhwYW5kRGlyZWN0aW9uIix7VXA6MSxEb3duOjJ9KTsKYS5yZWdpc3RlckVudW0oYiwiUmFkQ29tYm9Cb3hDaGVja2VkSXRlbXNUZXh0cyIse0ZpdEluSW5wdXQ6MCxEaXNwbGF5QWxsSW5JbnB1dDoxfSk7Cn0pKCk7CiR0ZWxlcmlrLmZpbmRDb21ib0JveD0kZmluZDsKJHRlbGVyaWsudG9Db21ib0JveD1mdW5jdGlvbihhKXtyZXR1cm4gYTsKfTsKKGZ1bmN0aW9uKCl7dmFyIGE9JHRlbGVyaWsuJDsKdmFyIGI9VGVsZXJpay5XZWIuVUk7ClR5cGUucmVnaXN0ZXJOYW1lc3BhY2UoIlRlbGVyaWsuV2ViLlVJIik7CmIuUmFkQ29tYm9Cb3g9ZnVuY3Rpb24oYyl7Yi5SYWRDb21ib0JveC5pbml0aWFsaXplQmFzZSh0aGlzLFtjXSk7CnRoaXMuX2NhbGxiYWNrVGV4dD0iIjsKdGhpcy5fZmlsdGVyVGV4dD0iIjsKdGhpcy5fY2hpbGRyZW49bnVsbDsKdGhpcy5fdmlydHVhbFNjcm9sbD1mYWxzZTsKdGhpcy5faXRlbURhdGE9bnVsbDsKdGhpcy5fc2VsZWN0ZWRJdGVtPW51bGw7CnRoaXMuX3NlbGVjdGVkSW5kZXg9bnVsbDsKdGhpcy5fc2V0U2VsZWN0ZWRJdGVtPWZhbHNlOwp0aGlzLl9lbmFibGVJdGVtQ2FjaGluZz1mYWxzZTsKdGhpcy5fb3BlbkRyb3BEb3duT25Mb2FkPWZhbHNlOwp0aGlzLl9hbGxvd0N1c3RvbVRleHQ9ZmFsc2U7CnRoaXMuX21hcmtGaXJzdE1hdGNoPWZhbHNlOwppZih0aGlzLmdldF9zaW1wbGVSZW5kZXJpbmcoKSl7dGhpcy5fb3JpZ2luYWxUZXh0PXRoaXMuZ2V0X3NlbGVjdEVsZW1lbnRUZXh0KCk7Cn1lbHNle3RoaXMuX29yaWdpbmFsVGV4dD10aGlzLmdldF9pbnB1dERvbUVsZW1lbnQoKS52YWx1ZTsKfXZhciBjPXRoaXMuZ2V0X2lucHV0RG9tRWxlbWVudCgpfHx0aGlzLmdldF9zZWxlY3RFbGVtZW50KCk7CmMuc2V0QXR0cmlidXRlKCJhdXRvY29tcGxldGUiLCJvZmYiKTsKdGhpcy5fY2FjaGVkVGV4dD10aGlzLl9vcmlnaW5hbFRleHQ7CnRoaXMuX2NhY2hlZE9mZnNldEhlaWdodD0iIjsKdGhpcy5fdGV4dD0iIjsKdGhpcy5fdmFsdWU9IiI7CnRoaXMuX3Bvc3RCYWNrUmVmZXJlbmNlPW51bGw7CnRoaXMuX2Ryb3BEb3duRWxlbWVudD1udWxsOwp0aGlzLl9pbnB1dERvbUVsZW1lbnQ9bnVsbDsKdGhpcy5faW1hZ2VEb21FbGVtZW50PW51bGw7CnRoaXMuX3RhYmxlRWxlbWVudD1udWxsOwp0aGlzLl9pc1RlbXBsYXRlZD1mYWxzZTsKdGhpcy5fcmVxdWVzdFRpbWVvdXRJRD0wOwp0aGlzLl9oaWdobGlnaHRUZW1wbGF0ZWRJdGVtcz1mYWxzZTsKdGhpcy5fY2xpZW50U3RhdGU9e3ZhbHVlOiIiLHRleHQ6IiIsZW5hYmxlZDp0cnVlLGxvZ0VudHJpZXM6W10sY2hlY2tlZEluZGljZXM6W10sY2hlY2tlZEl0ZW1zVGV4dE92ZXJmbG93czpmYWxzZX07CnRoaXMuX3VuaXF1ZUlkPW51bGw7CnRoaXMuX3JpZ2h0VG9MZWZ0PWZhbHNlOwp0aGlzLl9pc0RldGFjaGVkPWZhbHNlOwp0aGlzLl9vdmVybGF5PW51bGw7CnRoaXMuX2VuYWJsZVNjcmVlbkJvdW5kYXJ5RGV0ZWN0aW9uPXRydWU7CnRoaXMuX3N1cHByZXNzQ2hhbmdlPWZhbHNlOwp0aGlzLl9sYXN0S2V5Q29kZT1udWxsOwp0aGlzLl9sb2FkaW5nRGl2PW51bGw7CnRoaXMuX3Nob3dNb3JlUmVzdWx0c0JveD1mYWxzZTsKdGhpcy5fZm9jdXNlZD1mYWxzZTsKdGhpcy5fY2F1c2VzVmFsaWRhdGlvbj10cnVlOwp0aGlzLl93ZWJTZXJ2aWNlU2V0dGluZ3M9bmV3IGIuV2ViU2VydmljZVNldHRpbmdzKHt9KTsKdGhpcy5fd2ViU2VydmljZUxvYWRlcj1udWxsOwp0aGlzLl9lbmFibGVkPXRydWU7CnRoaXMuX2ZpcmVFdmVudHM9dGhpcy5fZW5hYmxlZDsKdGhpcy5fc2xpZGU9bnVsbDsKdGhpcy5fZXhwYW5kQW5pbWF0aW9uPW5ldyBiLkFuaW1hdGlvblNldHRpbmdzKHt9KTsKdGhpcy5fY29sbGFwc2VBbmltYXRpb249bmV3IGIuQW5pbWF0aW9uU2V0dGluZ3Moe30pOwp0aGlzLl9zbGlkZURpcmVjdGlvbj1iLmpTbGlkZURpcmVjdGlvbi5Eb3duOwp0aGlzLl9hbmltYXRpb25FbmRlZERlbGVnYXRlPW51bGw7CnRoaXMuX2FuaW1hdGlvblN0YXJ0ZWREZWxlZ2F0ZT1udWxsOwp0aGlzLl9zaG93RHJvcERvd25PblRleHRib3hDbGljaz10cnVlOwp0aGlzLl9kcm9wRG93bldpZHRoPSIiOwp0aGlzLl9oZWlnaHQ9IiI7CnRoaXMuX21heEhlaWdodD0iIjsKdGhpcy5fY2hpbGRMaXN0RWxlbWVudFdyYXBwZXI9bnVsbDsKdGhpcy5fc2tpbj0iIjsKdGhpcy5fc2tpcExvYWRpbmdJdGVtcz1mYWxzZTsKdGhpcy5fYWpheFJlcXVlc3Q9ZmFsc2U7CnRoaXMuX3BlbmRpbmdBamF4UmVxdWVzdHNDb3VudD0wOwp0aGlzLl9lbXB0eU1lc3NhZ2U9bnVsbDsKdGhpcy5fZGlzcG9zZWQ9ZmFsc2U7CnRoaXMuX2Rpc3Bvc2VDaGlsZEVsZW1lbnRzPXRydWU7CnRoaXMuX2ZpcnN0T3BlbmluZ09mRHJvcERvd249dHJ1ZTsKdGhpcy5fbG9kSXNBdXRvbWF0aWM9ZmFsc2U7CnRoaXMuX2VuYWJsZU92ZXJsYXk9dHJ1ZTsKdGhpcy5fbWluRmlsdGVyTGVuZ3RoPTA7CnRoaXMuX2NsaWVudFRlbXBsYXRlPW51bGw7CnRoaXMuX2l0ZW1zUGVyUmVxdWVzdD0tMTsKdGhpcy5fY29tcGVuc2F0ZVZhbHVlUHJvcGVydHlDaGFuZ2VFdmVudD10cnVlOwp0aGlzLl9pc0FzcE5ldDM1PWZhbHNlOwp0aGlzLmxvZEhhc2hUYWJsZT17fTsKdGhpcy5fY2hlY2tCb3hlcz1mYWxzZTsKdGhpcy5fY2hlY2tlZEluZGljZXM9W107CnRoaXMuX2NoZWNrZWRJbmRpY2VzSnNvbj0iW10iOwp0aGlzLl9wb3N0QmFja09uQ2hlY2s9ZmFsc2U7CnRoaXMuX2NoZWNrZWRJdGVtc1RleHRPdmVyZmxvd3M9ZmFsc2U7CnRoaXMuX2VuYWJsZUNoZWNrQWxsSXRlbXNDaGVja0JveD1mYWxzZTsKdGhpcy5fY2hlY2tBbGxJdGVtc0VsZW1lbnQ9bnVsbDsKdGhpcy5fY2hlY2tlZEl0ZW1zVGV4dHM9Yi5SYWRDb21ib0JveENoZWNrZWRJdGVtc1RleHRzLkZpdEluSW5wdXQ7CnRoaXMuX2FsbENoZWNrZWQ9ZmFsc2U7CnRoaXMuX2VzY0tleVByZXNzZWQ9ZmFsc2U7CnRoaXMuX2RlZmF1bHRJdGVtPW51bGw7CnRoaXMuX2RlZmF1bHRWYWx1ZT1udWxsOwp0aGlzLl9kZWZhdWx0VGV4dD1udWxsOwp9OwpiLlJhZENvbWJvQm94LnByb3RvdHlwZT17aW5pdGlhbGl6ZTpmdW5jdGlvbigpe2IuQ29udHJvbEl0ZW1Db250YWluZXIuY2FsbEJhc2VNZXRob2QodGhpcywiaW5pdGlhbGl6ZSIpOwpBcnJheS5hZGQoYi5SYWRDb21ib0JveC5Db21ib0JveGVzLHRoaXMpOwp0aGlzLl9jbGllbnRTdGF0ZS52YWx1ZT10aGlzLl92YWx1ZTsKdGhpcy5fY2xpZW50U3RhdGUudGV4dD10aGlzLl90ZXh0OwppZih0aGlzLl9kZWZhdWx0VmFsdWUhPW51bGwmJnRoaXMuX3RleHQ9PXRoaXMuX2RlZmF1bHRUZXh0KXt0aGlzLmdldF9lbGVtZW50KCkudmFsdWU9dGhpcy5fZGVmYXVsdFZhbHVlOwp9ZWxzZXt0aGlzLmdldF9lbGVtZW50KCkudmFsdWU9dGhpcy5fdGV4dDsKfXRoaXMuX2xvZy5pbml0aWFsaXplKCk7CnRoaXMuX2luaXRpYWxpemVFdmVudE1hcCgpOwppZih0aGlzLmdldF9zaW1wbGVSZW5kZXJpbmcoKSl7dGhpcy5faW5pdGlhbGl6ZVNlbGVjdCgpOwp9ZWxzZXt0aGlzLl9pbml0aWFsaXplQW5pbWF0aW9uKCk7CnRoaXMuX2luaXRpYWxpemVEcm9wRG93bigpOwp0aGlzLl9pbml0aWFsaXplVGFibGVFdmVudHMoKTsKdGhpcy5faW5pdGlhbGl6ZUlucHV0RXZlbnRzKCk7CmlmKHRoaXMuX3ZpcnR1YWxTY3JvbGwpe3RoaXMuX2luaXRpYWxpemVWaXJ0dWFsU2Nyb2xsKCk7Cn1pZih0aGlzLmdldF9tb3JlUmVzdWx0c0JveEVsZW1lbnQoKSl7dGhpcy5faW5pdGlhbGl6ZU1vcmVSZXN1bHRzQm94KCk7Cn1pZih0aGlzLmdldF9pbWFnZURvbUVsZW1lbnQoKSl7dGhpcy5faW5pdGlhbGl6ZUltYWdlRXZlbnRzKCk7Cn1pZih0aGlzLl9jaGVja0JveGVzKXt0aGlzLl9pbml0aWFsaXplQ2hlY2tCb3hlcygpOwp9dGhpcy5faW5pdGlhbGl6ZURvY3VtZW50RXZlbnRzKCk7CnRoaXMuX2luaXRpYWxpemVXaW5kb3dFdmVudHMoKTsKaWYoYi5SYWRDb21ib0JveC5fZ2V0TmVlZHNGYWtlSW5wdXQoKSl7dGhpcy5fZGVwbG95RmFrZUlucHV0KCk7Cn10aGlzLnJlcGFpbnQoKTsKdGhpcy5nZXRfdGFibGVFbGVtZW50KCkuc3R5bGUuZGlzcGxheT0iIjsKaWYoJHRlbGVyaWsuaXNSaWdodFRvTGVmdCh0aGlzLmdldF9lbGVtZW50KCkpKXt0aGlzLl9pbml0UmlnaHRUb0xlZnQoKTsKfXRoaXMuYXBwbHlXYWlBcmlhKCk7Cn1pZih0aGlzLl9vcGVuRHJvcERvd25PbkxvYWQmJiF0aGlzLmdldF9kcm9wRG93blZpc2libGUoKSl7dGhpcy5zaG93RHJvcERvd24oKTsKfWlmKHRoaXMuZ2V0X2lzVXNpbmdPRGF0YVNvdXJjZSgpKXt0aGlzLl9pbml0aWFsaXplT0RhdGFTb3VyY2VCaW5kZXIoKTsKfWlmKHRoaXMuX2ZpcmVFdmVudHMpe3RoaXMucmFpc2VFdmVudCgibG9hZCIsbnVsbCk7Cn19LF9pbml0aWFsaXplVGFibGVFdmVudHM6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmdldF90YWJsZUVsZW1lbnQoKTsKdGhpcy5fb25UYWJsZUhvdmVyRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vblRhYmxlSG92ZXIpOwokdGVsZXJpay5hZGRFeHRlcm5hbEhhbmRsZXIoYywibW91c2VvdmVyIix0aGlzLl9vblRhYmxlSG92ZXJEZWxlZ2F0ZSk7CnRoaXMuX29uVGFibGVPdXREZWxlZ2F0ZT1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX29uVGFibGVPdXQpOwokdGVsZXJpay5hZGRFeHRlcm5hbEhhbmRsZXIoYywibW91c2VvdXQiLHRoaXMuX29uVGFibGVPdXREZWxlZ2F0ZSk7Cn0sX2luaXRpYWxpemVJbnB1dEV2ZW50czpmdW5jdGlvbigpe3ZhciBkPXRoaXMuZ2V0X2lucHV0RG9tRWxlbWVudCgpOwppZigkdGVsZXJpay5pc0lFKXt0aGlzLl9vblByb3BlcnR5Q2hhbmdlRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vbklucHV0UHJvcGVydHlDaGFuZ2UpOwokdGVsZXJpay5hZGRFeHRlcm5hbEhhbmRsZXIoZCwicHJvcGVydHljaGFuZ2UiLHRoaXMuX29uUHJvcGVydHlDaGFuZ2VEZWxlZ2F0ZSk7CnZhciBjPXRoaXM7CmEoZCkuYmluZCgia2V5dXAiLGZ1bmN0aW9uKCl7Yy5fb25LZXlVcCgpOwp9KS5iaW5kKCJwYXN0ZSIsZnVuY3Rpb24oKXtjLl9vblBhc3RlKCk7Cn0pLmJpbmQoImNoYW5nZSIsZnVuY3Rpb24oKXtjLl9vbkNoYW5nZSgpOwp9KTsKfXRoaXMuX29uRm9jdXNEZWxlZ2F0ZT1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX29uRm9jdXMpOwokdGVsZXJpay5hZGRIYW5kbGVyKGQsImZvY3VzIix0aGlzLl9vbkZvY3VzRGVsZWdhdGUpOwp0aGlzLl9vbklucHV0Q2VsbE1vdXNlVXBEZWxlZ2F0ZT1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX29uSW5wdXRDZWxsQ2xpY2spOwokdGVsZXJpay5hZGRFeHRlcm5hbEhhbmRsZXIoZC5wYXJlbnROb2RlLCJtb3VzZXVwIix0aGlzLl9vbklucHV0Q2VsbE1vdXNlVXBEZWxlZ2F0ZSk7CnRoaXMuX2V2ZW50TWFwLmFkZEhhbmRsZXJGb3JDbGFzc05hbWUoImtleWRvd24iLCJyY2JJbnB1dCIsdGhpcy5fb25LZXlEb3duKTsKdGhpcy5fZXZlbnRNYXAuYWRkSGFuZGxlckZvckNsYXNzTmFtZSgia2V5cHJlc3MiLCJyY2JJbnB1dCIsdGhpcy5fb25LZXlQcmVzcyk7CmlmKCEkdGVsZXJpay5pc0lFKXt0aGlzLl9ldmVudE1hcC5hZGRIYW5kbGVyRm9yQ2xhc3NOYW1lKCJpbnB1dCIsInJjYklucHV0Iix0aGlzLl9vbklucHV0Q2hhbmdlKTsKfX0sX2luaXRpYWxpemVJbWFnZUV2ZW50czpmdW5jdGlvbigpe3ZhciBjPXRoaXMuZ2V0X2ltYWdlRG9tRWxlbWVudCgpOwp0aGlzLl9vbkltYWdlQ2xpY2tEZWxlZ2F0ZT1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX29uSW1hZ2VDbGljayk7CiR0ZWxlcmlrLmFkZEhhbmRsZXIoYywiY2xpY2siLHRoaXMuX29uSW1hZ2VDbGlja0RlbGVnYXRlKTsKfSxfaW5pdGlhbGl6ZVdpbmRvd0V2ZW50czpmdW5jdGlvbigpe3RoaXMuX29uV2luZG93UmVzaXplRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vbldpbmRvd1Jlc2l6ZSk7CiR0ZWxlcmlrLmFkZEhhbmRsZXIod2luZG93LCJyZXNpemUiLHRoaXMuX29uV2luZG93UmVzaXplRGVsZWdhdGUpOwp0aGlzLl9vbldpbmRvd1VubG9hZERlbGVnYXRlPUZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5fb25XaW5kb3dVbmxvYWQpOwokdGVsZXJpay5hZGRIYW5kbGVyKHdpbmRvdywidW5sb2FkIix0aGlzLl9vbldpbmRvd1VubG9hZERlbGVnYXRlKTsKaWYodGhpcy5fb3BlbkRyb3BEb3duT25Mb2FkKXt0aGlzLl9vbk9wZW5PbkxvYWQ9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLnNob3dEcm9wRG93bik7CiR0ZWxlcmlrLmFkZEhhbmRsZXIod2luZG93LCJsb2FkIix0aGlzLl9vbk9wZW5PbkxvYWQpOwp9fSxfaW5pdGlhbGl6ZURvY3VtZW50RXZlbnRzOmZ1bmN0aW9uKCl7dGhpcy5fb25Eb2N1bWVudENsaWNrRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vbkRvY3VtZW50Q2xpY2spOwppZigkdGVsZXJpay5pc0lFKXtkb2N1bWVudC5hdHRhY2hFdmVudCgib25tb3VzZWRvd24iLHRoaXMuX29uRG9jdW1lbnRDbGlja0RlbGVnYXRlKTsKZG9jdW1lbnQuYXR0YWNoRXZlbnQoIm9uY29udGV4dG1lbnUiLHRoaXMuX29uRG9jdW1lbnRDbGlja0RlbGVnYXRlKTsKfWVsc2V7JHRlbGVyaWsuYWRkSGFuZGxlcihkb2N1bWVudCwibW91c2Vkb3duIix0aGlzLl9vbkRvY3VtZW50Q2xpY2tEZWxlZ2F0ZSk7CiR0ZWxlcmlrLmFkZEhhbmRsZXIoZG9jdW1lbnQsImNvbnRleHRtZW51Iix0aGlzLl9vbkRvY3VtZW50Q2xpY2tEZWxlZ2F0ZSk7Cn19LF9kZXRhY2hJbnB1dEV2ZW50czpmdW5jdGlvbigpe3ZhciBjPXRoaXMuZ2V0X2lucHV0RG9tRWxlbWVudCgpOwppZigkdGVsZXJpay5pc0lFKXskdGVsZXJpay5yZW1vdmVFeHRlcm5hbEhhbmRsZXIoYywicHJvcGVydHljaGFuZ2UiLHRoaXMuX29uUHJvcGVydHlDaGFuZ2VEZWxlZ2F0ZSk7CnRoaXMuX29uUHJvcGVydHlDaGFuZ2VEZWxlZ2F0ZT1udWxsOwp9YShjKS51bmJpbmQoImtleXVwIikudW5iaW5kKCJwYXN0ZSIpLnVuYmluZCgiY2hhbmdlIik7CiR0ZWxlcmlrLnJlbW92ZUhhbmRsZXIoYywiZm9jdXMiLHRoaXMuX29uRm9jdXNEZWxlZ2F0ZSk7CnRoaXMuX29uRm9jdXNEZWxlZ2F0ZT1udWxsOwppZihjLnBhcmVudE5vZGUpeyR0ZWxlcmlrLnJlbW92ZUV4dGVybmFsSGFuZGxlcihjLnBhcmVudE5vZGUsIm1vdXNldXAiLHRoaXMuX29uSW5wdXRDZWxsTW91c2VVcERlbGVnYXRlKTsKdGhpcy5fb25JbnB1dENlbGxNb3VzZVVwRGVsZWdhdGU9bnVsbDsKfX0sX2RldGFjaEltYWdlRXZlbnRzOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5nZXRfaW1hZ2VEb21FbGVtZW50KCk7CiR0ZWxlcmlrLnJlbW92ZUhhbmRsZXIoYywiY2xpY2siLHRoaXMuX29uSW1hZ2VDbGlja0RlbGVnYXRlKTsKdGhpcy5fb25JbWFnZUNsaWNrRGVsZWdhdGU9bnVsbDsKfSxfZGV0YWNoV2luZG93RXZlbnRzOmZ1bmN0aW9uKCl7aWYodGhpcy5fb3BlbkRyb3BEb3duT25Mb2FkKXskdGVsZXJpay5yZW1vdmVIYW5kbGVyKHdpbmRvdywibG9hZCIsdGhpcy5fb25PcGVuT25Mb2FkKTsKdGhpcy5fb25PcGVuT25Mb2FkPW51bGw7Cn0kdGVsZXJpay5yZW1vdmVIYW5kbGVyKHdpbmRvdywidW5sb2FkIix0aGlzLl9vbldpbmRvd1VubG9hZERlbGVnYXRlKTsKJHRlbGVyaWsucmVtb3ZlSGFuZGxlcih3aW5kb3csInJlc2l6ZSIsdGhpcy5fb25XaW5kb3dSZXNpemVEZWxlZ2F0ZSk7CnRoaXMuX29uV2luZG93VW5sb2FkRGVsZWdhdGU9bnVsbDsKdGhpcy5fb25XaW5kb3dSZXNpemVEZWxlZ2F0ZT1udWxsOwp9LF9kZXRhY2hEb2N1bWVudEV2ZW50czpmdW5jdGlvbigpe2lmKCR0ZWxlcmlrLmlzSUUpe2RvY3VtZW50LmRldGFjaEV2ZW50KCJvbm1vdXNlZG93biIsdGhpcy5fb25Eb2N1bWVudENsaWNrRGVsZWdhdGUpOwpkb2N1bWVudC5kZXRhY2hFdmVudCgib25jb250ZXh0bWVudSIsdGhpcy5fb25Eb2N1bWVudENsaWNrRGVsZWdhdGUpOwp9ZWxzZXskdGVsZXJpay5yZW1vdmVIYW5kbGVyKGRvY3VtZW50LCJtb3VzZWRvd24iLHRoaXMuX29uRG9jdW1lbnRDbGlja0RlbGVnYXRlKTsKJHRlbGVyaWsucmVtb3ZlSGFuZGxlcihkb2N1bWVudCwiY29udGV4dG1lbnUiLHRoaXMuX29uRG9jdW1lbnRDbGlja0RlbGVnYXRlKTsKfXRoaXMuX29uRG9jdW1lbnRDbGlja0RlbGVnYXRlPW51bGw7Cn0sX2RldGFjaFRhYmxlRXZlbnRzOmZ1bmN0aW9uKCl7JHRlbGVyaWsucmVtb3ZlRXh0ZXJuYWxIYW5kbGVyKHRoaXMuZ2V0X3RhYmxlRWxlbWVudCgpLCJtb3VzZW92ZXIiLHRoaXMuX29uVGFibGVIb3ZlckRlbGVnYXRlKTsKJHRlbGVyaWsucmVtb3ZlRXh0ZXJuYWxIYW5kbGVyKHRoaXMuZ2V0X3RhYmxlRWxlbWVudCgpLCJtb3VzZW91dCIsdGhpcy5fb25UYWJsZU91dERlbGVnYXRlKTsKdGhpcy5fb25UYWJsZUhvdmVyRGVsZWdhdGU9bnVsbDsKdGhpcy5fb25UYWJsZU91dERlbGVnYXRlPW51bGw7Cn0sZGlzcG9zZTpmdW5jdGlvbigpe0FycmF5LnJlbW92ZShiLlJhZENvbWJvQm94LkNvbWJvQm94ZXMsdGhpcyk7CmlmKHRoaXMuZ2V0X3NpbXBsZVJlbmRlcmluZygpKXt0aGlzLl9kaXNwb3NlU2VsZWN0KCk7Cn1lbHNle3ZhciBjPVN5cy5XZWJGb3Jtcz9TeXMuV2ViRm9ybXMuUGFnZVJlcXVlc3RNYW5hZ2VyLmdldEluc3RhbmNlKCkuZ2V0X2lzSW5Bc3luY1Bvc3RCYWNrKCk6ZmFsc2U7CnRoaXMuX2Rpc3Bvc2VDaGlsZEVsZW1lbnRzPWMmJnRoaXMuX2lzRGV0YWNoZWQ7CnRoaXMuX2Rpc3Bvc2VBbmltYXRpb24oKTsKaWYodGhpcy5fY2hlY2tCb3hlcyl7dGhpcy5fZGV0YWNoQ2hlY2tCb3hFdmVudHMoKTsKfXRoaXMuX2RldGFjaFdpbmRvd0V2ZW50cygpOwp0aGlzLl9kZXRhY2hJbnB1dEV2ZW50cygpOwp0aGlzLl9kZXRhY2hEb2N1bWVudEV2ZW50cygpOwp0aGlzLl9kZXRhY2hEcm9wRG93bkV2ZW50cygpOwppZih0aGlzLmdldF90YWJsZUVsZW1lbnQoKSl7dGhpcy5fZGV0YWNoVGFibGVFdmVudHMoKTsKfWlmKHRoaXMuZ2V0X2ltYWdlRG9tRWxlbWVudCgpKXt0aGlzLl9kZXRhY2hJbWFnZUV2ZW50cygpOwp9aWYodGhpcy5nZXRfbW9yZVJlc3VsdHNCb3hFbGVtZW50KCkpe3RoaXMuX2RldGFjaE1vcmVSZXN1bHRzQm94RXZlbnRzKCk7Cn1pZih0aGlzLl92aXJ0dWFsU2Nyb2xsJiZ0aGlzLl9vbkRyb3BEb3duU2Nyb2xsRGVsZWdhdGUpe3RoaXMuX2RldGFjaFZpcnR1YWxTY3JvbGxFdmVudHMoKTsKfXRoaXMuX2FuaW1hdGVkRWxlbWVudD1udWxsOwp0aGlzLl9hbmltYXRlZENvbnRhaW5lcj1udWxsOwp0aGlzLl9yZW1vdmVEcm9wRG93bigpOwp0aGlzLl9hbmltYXRpb25Db250YWluZXI9bnVsbDsKfWlmKHRoaXMuX2hpZ2hsaWdodGVkSXRlbSl7dGhpcy5faGlnaGxpZ2h0ZWRJdGVtPW51bGw7Cn1pZih0aGlzLl9zZWxlY3RlZEl0ZW0pe3RoaXMuX3NlbGVjdGVkSXRlbT1udWxsOwp9dGhpcy5fZGlzcG9zZWQ9dHJ1ZTsKdGhpcy5fZXhwYW5kQW5pbWF0aW9uPW51bGw7CnRoaXMuX2NvbGxhcHNlQW5pbWF0aW9uPW51bGw7CnRoaXMuX3dlYlNlcnZpY2VTZXR0aW5ncz1udWxsOwpiLlJhZENvbWJvQm94LmNhbGxCYXNlTWV0aG9kKHRoaXMsImRpc3Bvc2UiKTsKaWYodGhpcy5fY2hpbGRyZW4pe3RoaXMuX2NoaWxkcmVuPW51bGw7Cn1pZih0aGlzLl9mYWtlSW5wdXQpe3RoaXMuX2Zha2VJbnB1dD1udWxsOwp9aWYoIXRoaXMuZ2V0X3NpbXBsZVJlbmRlcmluZygpKXt0aGlzLl9udWxsaWZ5RXZlbnRFeHBhbmRvcygpOwp9fSxfbnVsbGlmeUV2ZW50RXhwYW5kb3M6ZnVuY3Rpb24oKXt0aGlzLl90YWJsZUVsZW1lbnQuX2V2ZW50cz1udWxsOwp0aGlzLl90YWJsZUVsZW1lbnQ9bnVsbDsKdGhpcy5faW5wdXREb21FbGVtZW50Ll9ldmVudHM9bnVsbDsKdGhpcy5faW5wdXREb21FbGVtZW50PW51bGw7CnRoaXMuX2ltYWdlRG9tRWxlbWVudC5fZXZlbnRzPW51bGw7CnRoaXMuX2ltYWdlRG9tRWxlbWVudD1udWxsOwppZih0aGlzLl9jaGlsZExpc3RFbGVtZW50KXt0aGlzLl9jaGlsZExpc3RFbGVtZW50Ll9ldmVudHM9bnVsbDsKdGhpcy5fY2hpbGRMaXN0RWxlbWVudD1udWxsOwp9dGhpcy5fY2hpbGRMaXN0RWxlbWVudFdyYXBwZXIuX2V2ZW50cz1udWxsOwp0aGlzLl9jaGlsZExpc3RFbGVtZW50V3JhcHBlcj1udWxsOwp9LGFwcGx5V2FpQXJpYTpmdW5jdGlvbigpe2lmKCF0aGlzLmdldF9lbmFibGVBcmlhU3VwcG9ydCgpKXtyZXR1cm47Cn1pZighdGhpcy5nZXRfYWxsb3dDdXN0b21UZXh0KCkpe3JldHVybjsKfWlmKHRoaXMuZ2V0X21hcmtGaXJzdE1hdGNoKCkpe3JldHVybjsKfWlmKHRoaXMuZ2V0X2VuYWJsZUxvYWRPbkRlbWFuZCgpKXtyZXR1cm47Cn1pZih0aGlzLmdldF9maWx0ZXIoKSE9Yi5SYWRDb21ib0JveEZpbHRlci5Ob25lKXtyZXR1cm47Cn12YXIgZz10aGlzLmdldF90YWJsZUVsZW1lbnQoKSxkPXRoaXMuZ2V0X2VsZW1lbnQoKSxqPXRoaXMuZ2V0X2lucHV0RG9tRWxlbWVudCgpLGY9dGhpcy5nZXRfY2hpbGRMaXN0RWxlbWVudCgpLGg9dGhpcy5nZXRfaXRlbXMoKTsKYShkKS5maW5kKCIucmNiRm9jdXNlZCwgLnJjYklucHV0Q2VsbCwgLnJjYlJlYWRPbmx5LCAucmNiSW5wdXRDZWxsTGVmdCwgLnJjYkFycm93Q2VsbCwgLnJjYkFycm93Q2VsbFJpZ2h0LCAucmNiU2Nyb2xsLCAucmNiU2xpZGUiKS5hdHRyKCJyb2xlIiwicHJlc2VudGF0aW9uIik7CmEoZykuYXR0cigicm9sZSIsInByZXNlbnRhdGlvbiIpOwphKGQuaWQrIl9BcnJvdyIpLmF0dHIoInJvbGUiLCJwcmVzZW50YXRpb24iKTsKYShkLmlkKyJfRHJvcERvd24iKS5hdHRyKCJyb2xlIiwicHJlc2VudGF0aW9uIik7CmQuc2V0QXR0cmlidXRlKCJyb2xlIiwiY29tYm9ib3giKTsKZC5zZXRBdHRyaWJ1dGUoImFyaWEtbGFiZWxsZWRieSIsImxhYmVsIik7CmQuc2V0QXR0cmlidXRlKCJhcmlhLW93bnMiLGQuaWQrIm93bmVkX2xpc3QiKTsKai5zZXRBdHRyaWJ1dGUoInJvbGUiLCJ0ZXh0Ym94Iik7Cmouc2V0QXR0cmlidXRlKCJhcmlhLWhhc3BvcHVwIiwidHJ1ZSIpOwpmLnNldEF0dHJpYnV0ZSgicm9sZSIsImxpc3QiKTsKZi5zZXRBdHRyaWJ1dGUoImlkIixkLmlkKyJvd25lZF9saXN0Iik7CmZvcih2YXIgaz0wOwprPGguZ2V0X2NvdW50KCk7CmsrKyl7dmFyIGU9aC5nZXRJdGVtKGspOwp2YXIgYz1lLmdldF9lbGVtZW50KCk7CmMuc2V0QXR0cmlidXRlKCJyb2xlIiwibGlzdGl0ZW0iKTsKfX0sX2FwcGx5RW1wdHlNZXNzYWdlOmZ1bmN0aW9uKCl7aWYodGhpcy5nZXRfZW1wdHlNZXNzYWdlKCkmJnRoaXMuZ2V0X3RleHQoKT09IiIpe3RoaXMuX3N1cHByZXNzQ2hhbmdlPXRydWU7CnRoaXMuZ2V0X2lucHV0RG9tRWxlbWVudCgpLnZhbHVlPXRoaXMuZ2V0X2VtcHR5TWVzc2FnZSgpOwp0aGlzLmdldF9pbnB1dERvbUVsZW1lbnQoKS5jbGFzc05hbWUrPSIgcmNiRW1wdHlNZXNzYWdlIjsKdGhpcy5fc3VwcHJlc3NDaGFuZ2U9ZmFsc2U7Cn19LF9jaGVja0lzVGhpc1BhcnRPZldvcmQ6ZnVuY3Rpb24oZCxjKXt2YXIgZT0iIjsKaWYodGhpcy5nZXRfc2VsZWN0ZWRJdGVtKCkpe2U9dGhpcy5nZXRfc2VsZWN0ZWRJdGVtKCkuZ2V0X3RleHQoKTsKfXZhciBmPWUubGFzdEluZGV4T2YoYyk7CmlmKGY+LTEmJmY9PWQpe3JldHVybiB0cnVlOwp9cmV0dXJuIGZhbHNlOwp9LF9jaGlsZEluc2VydGVkOmZ1bmN0aW9uKGQsYyxlKXtiLlJhZENvbWJvQm94LmNhbGxCYXNlTWV0aG9kKHRoaXMsIl9jaGlsZEluc2VydGVkIixbZCxjLGVdKTsKaWYoIXRoaXMuX2NoaWxkQ29udHJvbHNDcmVhdGVkKXtyZXR1cm47Cn1pZih0aGlzLl9jaGVja0JveGVzKXtpZihjLmdldF9jaGVja2VkKCkpe3RoaXMuX3JlZ2lzdGVyQ2hlY2tlZEluZGV4KGQpOwp0aGlzLl91cGRhdGVDaGVja2VkSW5kaWNlc0pzb24oKTsKfXRoaXMuX3VwZGF0ZUNvbWJvQm94VGV4dCgpOwppZih0aGlzLl9jaGVja0FsbEl0ZW1zRWxlbWVudCE9bnVsbCl7dGhpcy5fdXBkYXRlQ2hlY2tBbGxTdGF0ZSgpOwp9fX0sX2NoaWxkUmVtb3ZlZDpmdW5jdGlvbihjLGUpe3ZhciBmPWMuZ2V0X2VsZW1lbnQoKTsKaWYoZS5nZXRfaXRlbXMoKS5nZXRfY291bnQoKT09MCYmIXRoaXMuZ2V0X3NpbXBsZVJlbmRlcmluZygpJiYhdGhpcy5fZ2V0SGVhZGVyRWxlbWVudCgpJiYhdGhpcy5fZ2V0Rm9vdGVyRWxlbWVudCgpKXtmPWUuX2NoaWxkTGlzdEVsZW1lbnQ7CmUuX2NoaWxkTGlzdEVsZW1lbnQ9bnVsbDsKfWlmKGYpe2YuaW5uZXJIVE1MPSIiOwppZihmLnBhcmVudE5vZGUpe2YucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChmKTsKfWY9bnVsbDsKfWlmKGM9PXRoaXMuZ2V0X3NlbGVjdGVkSXRlbSgpKXt0aGlzLnNldF9zZWxlY3RlZEl0ZW0obnVsbCk7CnRoaXMuc2V0X2hpZ2hsaWdodGVkSXRlbShudWxsKTsKdGhpcy5zZXRfdGV4dCgiIik7CmlmKHRoaXMuZ2V0X3NpbXBsZVJlbmRlcmluZygpKXt2YXIgZD10aGlzLmdldF9zZWxlY3RlZE9wdGlvbigpOwppZihkKXtkLl9pdGVtLnNlbGVjdCgpOwp9fX1pZih0aGlzLl9jaGVja0JveGVzKXt0aGlzLl91cGRhdGVDaGVja2VkSW5kaWNlcygpOwp0aGlzLl91cGRhdGVDb21ib0JveFRleHQoKTsKfWIuUmFkQ29tYm9Cb3guY2FsbEJhc2VNZXRob2QodGhpcywiX2NoaWxkUmVtb3ZlZCIsW2MsZV0pOwp9LF9jaGlsZFJlbW92aW5nOmZ1bmN0aW9uKGMpe3ZhciBkPWMuZ2V0X2luZGV4KCk7CmlmKHRoaXMuX2l0ZW1EYXRhKXtBcnJheS5yZW1vdmUodGhpcy5faXRlbURhdGEsdGhpcy5faXRlbURhdGFbZF0pOwp9Yi5SYWRDb21ib0JveC5jYWxsQmFzZU1ldGhvZCh0aGlzLCJfY2hpbGRSZW1vdmluZyIsW2NdKTsKfSxfY2hpbGRyZW5DbGVhcmVkOmZ1bmN0aW9uKGMpe3RoaXMuc2V0X3NlbGVjdGVkSXRlbShudWxsKTsKdGhpcy5zZXRfaGlnaGxpZ2h0ZWRJdGVtKG51bGwpOwp2YXIgZT1jLmdldF9jaGlsZExpc3RFbGVtZW50KCk7CnZhciBmPWMuZ2V0X2l0ZW1zKCkuZ2V0X2NvdW50KCk7CmlmKGUmJiF0aGlzLl9nZXRIZWFkZXJFbGVtZW50KCkmJiF0aGlzLl9nZXRGb290ZXJFbGVtZW50KCkpe2Zvcih2YXIgZD0wOwpkPGY7CmQrKyl7Yy5nZXRfaXRlbXMoKS5nZXRJdGVtKGQpLl9kaXNwb3NlKCk7Cn1lLmlubmVySFRNTD0iIjsKZT1udWxsOwp9ZWxzZXtpZihlKXtmb3IodmFyIGQ9MDsKZDxmOwpkKyspe3RoaXMuX2NoaWxkUmVtb3ZlZChjLmdldF9pdGVtcygpLmdldEl0ZW0oZCksYyk7Cn19fWlmKHRoaXMuX2NoZWNrQm94ZXMpe3RoaXMuX3VwZGF0ZUNoZWNrZWRJbmRpY2VzKCk7CnRoaXMuX3VwZGF0ZUNvbWJvQm94VGV4dCgpOwp9fSxfY3JlYXRlQ2hpbGRDb250cm9sczpmdW5jdGlvbigpe3RoaXMuX2NoaWxkcmVuPW5ldyBiLlJhZENvbWJvQm94SXRlbUNvbGxlY3Rpb24odGhpcyk7CmIuUmFkQ29tYm9Cb3guX2NyZWF0ZUNoaWxkQ29udHJvbHModGhpcyx0aGlzLl9jaGlsZHJlbik7Cn0sX2Vuc3VyZUNoaWxkQ29udHJvbHM6ZnVuY3Rpb24oKXtpZighdGhpcy5fY2hpbGRDb250cm9sc0NyZWF0ZWQpe3RoaXMuX2NyZWF0ZUNoaWxkQ29udHJvbHMoKTsKdGhpcy5fY2hpbGRDb250cm9sc0NyZWF0ZWQ9dHJ1ZTsKaWYoIXRoaXMuX3NldFNlbGVjdGVkSXRlbSl7dGhpcy5fc2V0U2VsZWN0ZWRJdGVtPXRydWU7CnRoaXMuX3NldEZpcnN0U2VsZWN0ZWRJdGVtKCk7Cn19fSxfZmluZEl0ZW1Ub1NlbGVjdDpmdW5jdGlvbihjKXt2YXIgZT10aGlzLmZpbmRJdGVtQnlWYWx1ZSh0aGlzLmdldF92YWx1ZSgpKTsKaWYoIWUpe3ZhciBkPWMhPXVuZGVmaW5lZD9jOnRoaXMuZ2V0X3RleHQoKTsKZT10aGlzLmZpbmRJdGVtQnlUZXh0KGQpOwp9cmV0dXJuIGU7Cn0sX2ZpbmROZWFyZXN0SXRlbTpmdW5jdGlvbihjKXt3aGlsZShjLm5vZGVUeXBlIT09OSl7aWYoYy5faXRlbSYmYi5SYWRDb21ib0JveEl0ZW0uaXNJbnN0YW5jZU9mVHlwZShjLl9pdGVtKSl7cmV0dXJuIGMuX2l0ZW07Cn1jPWMucGFyZW50Tm9kZTsKfXJldHVybiBudWxsOwp9LF9nZXRGb290ZXJFbGVtZW50OmZ1bmN0aW9uKCl7aWYodGhpcy5nZXRfZHJvcERvd25FbGVtZW50KCkpe3JldHVybiAkdGVsZXJpay5nZXRDaGlsZEJ5Q2xhc3NOYW1lKHRoaXMuZ2V0X2Ryb3BEb3duRWxlbWVudCgpLCJyY2JGb290ZXIiLDApOwp9cmV0dXJuIG51bGw7Cn0sX2dldEhlYWRlckVsZW1lbnQ6ZnVuY3Rpb24oKXtpZih0aGlzLmdldF9kcm9wRG93bkVsZW1lbnQoKSl7cmV0dXJuICR0ZWxlcmlrLmdldENoaWxkQnlDbGFzc05hbWUodGhpcy5nZXRfZHJvcERvd25FbGVtZW50KCksInJjYkhlYWRlciIsMCk7Cn1yZXR1cm4gbnVsbDsKfSxfZ2V0SW5wdXRDdXJzb3JQb3NpdGlvbjpmdW5jdGlvbigpe3ZhciBmPXRoaXMuZ2V0X2lucHV0RG9tRWxlbWVudCgpOwp2YXIgZT1mLnNlbGVjdGlvblN0YXJ0OwppZigkdGVsZXJpay5pc0lFKXt0cnl7dmFyIGM9ZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCkuZHVwbGljYXRlKCk7CmMubW92ZVN0YXJ0KCJzZW50ZW5jZSIsLTEwMDAwMCk7CmU9Yy50ZXh0Lmxlbmd0aDsKfWNhdGNoKGQpe319cmV0dXJuIGU7Cn0sX2dldElucHV0U2VsZWN0aW9uUmFuZ2U6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldF9pbnB1dERvbUVsZW1lbnQoKTsKdmFyIGY9e307CmlmKCR0ZWxlcmlrLmlzSUUpe3RyeXt2YXIgYz1kb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTsKZi5zdGFydD1lLnZhbHVlLmluZGV4T2YoYy50ZXh0KTsKZi5lbmQ9Zi5zdGFydCtjLnRleHQubGVuZ3RoOwp9Y2F0Y2goZCl7fX1lbHNle2Yuc3RhcnQ9ZS5zZWxlY3Rpb25TdGFydDsKZi5lbmQ9ZS5zZWxlY3Rpb25FbmQ7Cn1yZXR1cm4gZjsKfSxfZ2V0SW5wdXRUYXJnZXRTZWxlY3Rpb246ZnVuY3Rpb24oZCl7dmFyIGM9dGhpcy5nZXRfdGV4dCgpOwp2YXIgZz17c3RhcnRJbmRleDowLGxlbmd0aDowfTsKaWYoIXRoaXMuZ2V0X2F1dG9Db21wbGV0ZVNlcGFyYXRvcigpKXtnLmxlbmd0aD1jLmxlbmd0aDsKcmV0dXJuIGc7Cn1pZihkPT0wKXtyZXR1cm4gZzsKfWlmKGQ9PWMubGVuZ3RoKXtnLnN0YXJ0SW5kZXg9Yy5sZW5ndGg7CnJldHVybiBnOwp9dmFyIGU9dGhpcy5fZ2V0U3Vycm91bmRpbmdTZXBhcmF0b3JJbmRpY2VzKGQpOwp2YXIgZj1lLmJlZm9yZTsKdmFyIGg9ZS5hZnRlcjsKaWYoaD09ZCsxKXtnLnN0YXJ0SW5kZXg9aC0xOwpyZXR1cm4gZzsKfWlmKGY9PWQpe2cuc3RhcnRJbmRleD1kOwpyZXR1cm4gZzsKfWcuc3RhcnRJbmRleD1mOwpnLmxlbmd0aD1oLWY7CmlmKGUubGFzdD09aCl7Zy5sZW5ndGgtLTsKfXJldHVybiBnOwp9LF9nZXRTdXJyb3VuZGluZ1NlcGFyYXRvckluZGljZXM6ZnVuY3Rpb24oYyl7dmFyIGU9dGhpcy5nZXRfdGV4dCgpOwp2YXIgaD10aGlzLmdldF9hdXRvQ29tcGxldGVTZXBhcmF0b3IoKTsKdmFyIGY9bmV3IFJlZ0V4cCgiXFxzKlsiK2grIl1cXHMqIiwiZ2kiKTsKdmFyIGc9MDsKdmFyIGQ9MDsKd2hpbGUoZi5leGVjKGUpJiZmLmxhc3RJbmRleDw9Yyl7Zz1mLmxhc3RJbmRleDsKfWQ9Zi5sYXN0SW5kZXg+MD9mLmxhc3RJbmRleDplLmxlbmd0aDsKcmV0dXJue2JlZm9yZTpnLGFmdGVyOmQsbGFzdDpmLmxhc3RJbmRleH07Cn0sX2dldFRyaW1TdGFydGluZ1NwYWNlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb2RJc0F1dG9tYXRpY3x8KHRoaXMuZ2V0X2F1dG9Db21wbGV0ZVNlcGFyYXRvcigpIT1udWxsJiYhdGhpcy5nZXRfZW5hYmxlTG9hZE9uRGVtYW5kKCkpOwp9LF9nZXRSZWxhdGVkVGFyZ2V0OmZ1bmN0aW9uKGQpe3ZhciBnPWQudG9FbGVtZW50fHxkLnJlbGF0ZWRUYXJnZXR8fGQuZnJvbUVsZW1lbnQ7CmlmKCFnKXtyZXR1cm4gbnVsbDsKfXRyeXt2YXIgZj1nLnRhZ05hbWU7Cn1jYXRjaChjKXtnPW51bGw7Cn1yZXR1cm4gZzsKfSxfZ2V0TGFzdFNlcGFyYXRvcjpmdW5jdGlvbihjKXtpZighdGhpcy5nZXRfYXV0b0NvbXBsZXRlU2VwYXJhdG9yKCkpe3JldHVybiBudWxsOwp9dmFyIGQ9dGhpcy5fZ2V0TGFzdFNlcGFyYXRvckluZGV4KGMpOwpyZXR1cm4gYy5jaGFyQXQoZCk7Cn0sX2dldExhc3RTZXBhcmF0b3JJbmRleDpmdW5jdGlvbihjKXt2YXIgZz0tMTsKaWYoIXRoaXMuZ2V0X2F1dG9Db21wbGV0ZVNlcGFyYXRvcigpKXtyZXR1cm4gZzsKfWZvcih2YXIgZj0wLGQ9dGhpcy5nZXRfYXV0b0NvbXBsZXRlU2VwYXJhdG9yKCkubGVuZ3RoOwpmPGQ7CmYrKyl7dmFyIGU9dGhpcy5nZXRfYXV0b0NvbXBsZXRlU2VwYXJhdG9yKCkuY2hhckF0KGYpOwp2YXIgaD1jLmxhc3RJbmRleE9mKGUpOwppZihoPmcmJiF0aGlzLl9jaGVja0lzVGhpc1BhcnRPZldvcmQoaCxlKSl7Zz1oOwp9fXJldHVybiBnOwp9LF9oaWdobGlnaHRGaXJzdE1hdGNoOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5fZmluZEl0ZW1Ub1NlbGVjdCgpOwppZihjJiZjLmdldF9lbmFibGVkKCkmJiFjLmdldF9pc1NlcGFyYXRvcigpKXtjLmhpZ2hsaWdodCgpOwp9fSxfaW5pdFJpZ2h0VG9MZWZ0OmZ1bmN0aW9uKCl7dGhpcy5fcmlnaHRUb0xlZnQ9dHJ1ZTsKaWYodGhpcy5fc2tpbil7dGhpcy5nZXRfZWxlbWVudCgpLmNsYXNzTmFtZT1TdHJpbmcuZm9ybWF0KCJ7MH0gUmFkQ29tYm9Cb3hfcnRsIFJhZENvbWJvQm94X3sxfV9ydGwiLHRoaXMuZ2V0X2VsZW1lbnQoKS5jbGFzc05hbWUsdGhpcy5fc2tpbik7CnRoaXMuZ2V0X2Ryb3BEb3duRWxlbWVudCgpLmNsYXNzTmFtZT1TdHJpbmcuZm9ybWF0KCJ7MH0gUmFkQ29tYm9Cb3hEcm9wRG93bl9ydGwgUmFkQ29tYm9Cb3hEcm9wRG93bl97MX1fcnRsIix0aGlzLmdldF9kcm9wRG93bkVsZW1lbnQoKS5jbGFzc05hbWUsdGhpcy5fc2tpbik7Cn1pZih0aGlzLmdldF9pbWFnZURvbUVsZW1lbnQoKSl7aWYoU3lzLlVJLkRvbUVsZW1lbnQuY29udGFpbnNDc3NDbGFzcyh0aGlzLmdldF9pbWFnZURvbUVsZW1lbnQoKS5wYXJlbnROb2RlLCJyY2JBcnJvd0NlbGxSaWdodCIpKXt0aGlzLl9yZXBsYWNlQ3NzQ2xhc3ModGhpcy5nZXRfaW1hZ2VEb21FbGVtZW50KCkucGFyZW50Tm9kZSwicmNiQXJyb3dDZWxsUmlnaHQiLCJyY2JBcnJvd0NlbGxMZWZ0Iik7CnRoaXMuZ2V0X2lucHV0RG9tRWxlbWVudCgpLnBhcmVudE5vZGUuY2xhc3NOYW1lPSJyY2JJbnB1dENlbGwgcmNiSW5wdXRDZWxsUmlnaHQiOwp9ZWxzZXt0aGlzLl9yZXBsYWNlQ3NzQ2xhc3ModGhpcy5nZXRfaW1hZ2VEb21FbGVtZW50KCkucGFyZW50Tm9kZSwicmNiQXJyb3dDZWxsTGVmdCIsInJjYkFycm93Q2VsbFJpZ2h0Iik7CnRoaXMuZ2V0X2lucHV0RG9tRWxlbWVudCgpLnBhcmVudE5vZGUuY2xhc3NOYW1lPSJyY2JJbnB1dENlbGwgcmNiSW5wdXRDZWxsTGVmdCI7Cn19fSxfbG9nSW5zZXJ0ZWQ6ZnVuY3Rpb24oYyl7aWYoIWMuZ2V0X3BhcmVudCgpLl9jaGlsZENvbnRyb2xzQ3JlYXRlZHx8IXRoaXMuX2VuYWJsZUNsaWVudFN0YXRlUGVyc2lzdGVuY2Upe3JldHVybjsKfXRoaXMuX2xvZy5sb2dJbnNlcnQoYyk7Cn0sX29uQ2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy5fY29tcGVuc2F0ZVZhbHVlUHJvcGVydHlDaGFuZ2VFdmVudD10cnVlOwp9LF9vbkRvY3VtZW50Q2xpY2s6ZnVuY3Rpb24oYyl7aWYoIWMpe2M9ZXZlbnQ7Cn12YXIgZD1jLnRhcmdldHx8Yy5zcmNFbGVtZW50Owp2YXIgZz10aGlzLmdldF9vcmlnaW5hbFRleHQoKTsKd2hpbGUoZC5ub2RlVHlwZSE9PTkpe2lmKGQucGFyZW50Tm9kZT09bnVsbHx8ZD09dGhpcy5nZXRfZWxlbWVudCgpfHxkPT10aGlzLmdldF9kcm9wRG93bkVsZW1lbnQoKSl7cmV0dXJuOwp9ZD1kLnBhcmVudE5vZGU7Cn1pZih0aGlzLl9mb2N1c2VkKXt0aGlzLl9yYWlzZUNsaWVudEJsdXIoYyk7CnRoaXMuX3NlbGVjdEl0ZW1PbkJsdXIoYyk7CmlmKHRoaXMuZ2V0X3RleHQoKSE9ZyYmZyE9dGhpcy5fZW1wdHlNZXNzYWdlJiZ0aGlzLl9jaGVja0JveGVzKXtpZih0aGlzLnJhaXNlX3RleHRDaGFuZ2UodGhpcyxjKT09dHJ1ZSl7cmV0dXJuOwp9dmFyIGY9e0NvbW1hbmQ6IlRleHRDaGFuZ2VkIn07CnRoaXMucG9zdGJhY2soZik7Cn10aGlzLl9hcHBseUVtcHR5TWVzc2FnZSgpOwp0aGlzLl9mb2N1c2VkPWZhbHNlOwp9aWYodGhpcy5nZXRfZHJvcERvd25WaXNpYmxlKCkmJnRoaXMuZ2V0X2Nsb3NlRHJvcERvd25PbkJsdXIoKSl7dGhpcy5faGlkZURyb3BEb3duKGMpOwp9fSxfb25Gb2N1czpmdW5jdGlvbihjKXtpZih0aGlzLl9mb2N1c2VkKXtyZXR1cm47Cn1pZih0aGlzLmdldF9lbXB0eU1lc3NhZ2UoKSYmdGhpcy5nZXRfZW1wdHlNZXNzYWdlKCk9PXRoaXMuZ2V0X3RleHQoKSl7dGhpcy5fc3VwcHJlc3NDaGFuZ2U9dHJ1ZTsKdmFyIGY9dGhpcy5nZXRfaW5wdXREb21FbGVtZW50KCk7CmlmKGRvY3VtZW50LmRvY3VtZW50TW9kZT09PTgpe2YuZ2V0Q2xpZW50UmVjdHMoKTsKfWYudmFsdWU9dGhpcy5fdGV4dDsKaWYoZG9jdW1lbnQuZG9jdW1lbnRNb2RlIT09OCl7Zi5nZXRDbGllbnRSZWN0cygpOwp9Zi5jbGFzc05hbWU9InJjYklucHV0IjsKdGhpcy5fc3VwcHJlc3NDaGFuZ2U9ZmFsc2U7Cn12YXIgZD10aGlzLmdldF90YWJsZUVsZW1lbnQoKTsKaWYoZCE9bnVsbCl7KGZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe2QuY2xhc3NOYW1lPSJyY2JGb2N1c2VkIjsKfSwwKTsKfSkoKTsKfWlmKCFjJiZ0eXBlb2YoZXZlbnQpIT0idW5kZWZpbmVkIil7Yz1ldmVudDsKfXRoaXMuX2ZvY3VzZWQ9dHJ1ZTsKdGhpcy5fY2xpY2tlZEFmdGVyRm9jdXM9ZmFsc2U7CnRoaXMucmFpc2Vfb25DbGllbnRGb2N1cyhjKTsKcmV0dXJuIHRydWU7Cn0sX29uSW1hZ2VDbGljazpmdW5jdGlvbihjKXtpZih0aGlzLmdldF9kcm9wRG93blZpc2libGUoKSl7dGhpcy5nZXRfaW5wdXREb21FbGVtZW50KCkuZm9jdXMoKTsKfWlmKHRoaXMuX2VuYWJsZWQmJiR0ZWxlcmlrLmlzSUUmJnRoaXMuX2xhc3RUZXh0U2VsZWN0aW9uUGFyYW1zKXt0aGlzLnNlbGVjdFRleHQodGhpcy5fbGFzdFRleHRTZWxlY3Rpb25QYXJhbXMuc3RhcnRJbmRleCx0aGlzLl9sYXN0VGV4dFNlbGVjdGlvblBhcmFtcy5sZW5ndGgpOwp9aWYodGhpcy5fZW5hYmxlZCl7dGhpcy5fdG9nZ2xlRHJvcERvd24oYyk7Cn19LF9vbklucHV0Q2VsbENsaWNrOmZ1bmN0aW9uKGQpe2lmKCF0aGlzLl9lbmFibGVkKXtyZXR1cm47Cn1pZih0aGlzLmdldF90ZXh0KCkhPT10aGlzLmdldF9lbXB0eU1lc3NhZ2UoKSl7dmFyIGY9dGhpcy5fZ2V0SW5wdXRDdXJzb3JQb3NpdGlvbigpOwp2YXIgaD10aGlzLl9nZXRJbnB1dFRhcmdldFNlbGVjdGlvbihmKTsKdmFyIGM9ZmFsc2U7CmlmKHRoaXMuZ2V0X2F1dG9Db21wbGV0ZVNlcGFyYXRvcigpKXt2YXIgZz10aGlzLl9nZXRJbnB1dFNlbGVjdGlvblJhbmdlKCk7CmlmKGcuc3RhcnQ9PWcuZW5kKXtjPXRydWU7Cn19ZWxzZXtpZighdGhpcy5fY2xpY2tlZEFmdGVyRm9jdXMpe2M9dHJ1ZTsKfX1pZighdGhpcy5fY2xpY2tlZEFmdGVyRm9jdXMpe3RoaXMuX2NsaWNrZWRBZnRlckZvY3VzPXRydWU7Cn1pZigkdGVsZXJpay5pc0lFJiZ0aGlzLl9jbGlja2VkQWZ0ZXJGb2N1cyl7dGhpcy5fbGFzdFRleHRTZWxlY3Rpb25QYXJhbXM9bnVsbDsKfWlmKCR0ZWxlcmlrLmlzSUUmJmMpe3RoaXMuX2xhc3RUZXh0U2VsZWN0aW9uUGFyYW1zPXtzdGFydEluZGV4Omguc3RhcnRJbmRleCxsZW5ndGg6aC5sZW5ndGh9Owp9aWYoYyl7dGhpcy5zZWxlY3RUZXh0KGguc3RhcnRJbmRleCxoLmxlbmd0aCk7Cn19aWYoIXRoaXMuZ2V0X2Ryb3BEb3duVmlzaWJsZSgpJiZ0aGlzLl9zaG93RHJvcERvd25PblRleHRib3hDbGljayl7dGhpcy5fc2hvd0Ryb3BEb3duKGQpOwp9cmV0dXJuIHRydWU7Cn0sX29uSW5wdXRDaGFuZ2U6ZnVuY3Rpb24oKXtpZih0aGlzLl9lc2NLZXlQcmVzc2VkKXtpZih0aGlzLmdldF9lbmFibGVMb2FkT25EZW1hbmQoKSl7dmFyIGc9dGhpcy5nZXRfc2VsZWN0ZWRJdGVtKCk7CnZhciBmPXRoaXMuX2ZpbmRJdGVtVG9TZWxlY3QoKTsKaWYoKGc9PW51bGwmJmY9PW51bGwpfHwoZz09bnVsbCYmZiE9bnVsbCkpe2lmKHRoaXMuZmluZEl0ZW1CeVRleHQodGhpcy5fZmlsdGVyVGV4dCk9PW51bGwpe3RoaXMuZ2V0X2lucHV0RG9tRWxlbWVudCgpLnZhbHVlPXRoaXMuX3RleHQ7Cn1lbHNle3RoaXMuZ2V0X2lucHV0RG9tRWxlbWVudCgpLnZhbHVlPXRoaXMuX2ZpbHRlclRleHQ7Cn19ZWxzZXt0aGlzLmdldF9pbnB1dERvbUVsZW1lbnQoKS52YWx1ZT10aGlzLl90ZXh0Owp9fWVsc2V7dGhpcy5nZXRfaW5wdXREb21FbGVtZW50KCkudmFsdWU9dGhpcy5fdGV4dDsKfXRoaXMuX2VzY0tleVByZXNzZWQ9ZmFsc2U7CnJldHVybjsKfXZhciBjPXRoaXMuZ2V0X3RleHQoKTsKdmFyIGU9dGhpcy5fbG9kSXNBdXRvbWF0aWM/dGhpcy5nZXRMYXN0V29yZChjLHRoaXMuX2dldFRyaW1TdGFydGluZ1NwYWNlcygpKTpjOwppZigoISR0ZWxlcmlrLmlzSUV8fHRoaXMuX3VwZGF0ZUZpbHRlclRleHQpJiZlLmxlbmd0aD49dGhpcy5fbWluRmlsdGVyTGVuZ3RoKXt0aGlzLl9maWx0ZXJUZXh0PWU7Cn1pZigkdGVsZXJpay5pc0lFKXt0aGlzLl91cGRhdGVGaWx0ZXJUZXh0PWZhbHNlOwp9aWYoIXRoaXMuZ2V0X2VtcHR5TWVzc2FnZSgpfHxjIT10aGlzLmdldF9lbXB0eU1lc3NhZ2UoKSl7dGhpcy5fZW5zdXJlQ2hpbGRDb250cm9scygpOwp0aGlzLl90ZXh0PWM7Cn10aGlzLnNldF92YWx1ZSgiIik7CmlmKCF0aGlzLl9zdXBwcmVzc0NoYW5nZSl7aWYodGhpcy5nZXRfaW5wdXREb21FbGVtZW50KCkuY2xhc3NOYW1lLmluZGV4T2YoInJjYkVtcHR5TWVzc2FnZSIpPi0xKXt0aGlzLmdldF9pbnB1dERvbUVsZW1lbnQoKS5jbGFzc05hbWU9InJjYklucHV0IjsKfX10aGlzLmdldF9lbGVtZW50KCkudmFsdWU9dGhpcy5fdGV4dDsKdGhpcy51cGRhdGVDbGllbnRTdGF0ZSgpOwppZighdGhpcy5fc3VwcHJlc3NDaGFuZ2Upe3ZhciBkPXRoaXM7CmlmKHRoaXMuZ2V0X2VuYWJsZUxvYWRPbkRlbWFuZCgpJiZ0aGlzLl9maWx0ZXJUZXh0Lmxlbmd0aD49dGhpcy5fbWluRmlsdGVyTGVuZ3RoKXtpZih0aGlzLl9yZXF1ZXN0VGltZW91dElEPjApe3dpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fcmVxdWVzdFRpbWVvdXRJRCk7CnRoaXMuX3JlcXVlc3RUaW1lb3V0SUQ9MDsKfWlmKCF0aGlzLmdldF9kcm9wRG93blZpc2libGUoKSl7dGhpcy5fc2tpcExvYWRpbmdJdGVtcz10cnVlOwp0aGlzLnNob3dEcm9wRG93bigpOwp9dGhpcy5fcmVxdWVzdFRpbWVvdXRJRD13aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2lmKGQuX2Rpc3Bvc2VkKXtyZXR1cm47Cn1kLnJlcXVlc3RJdGVtcyhkLl9maWx0ZXJUZXh0LGZhbHNlKTsKfSxkLmdldF9pdGVtUmVxdWVzdFRpbWVvdXQoKSk7CnJldHVybjsKfWlmKHRoaXMuZ2V0X2ZpbHRlcigpPT1iLlJhZENvbWJvQm94RmlsdGVyLk5vbmUmJnRoaXMuX3Nob3VsZEhpZ2hsaWdodCgpKXtpZigkdGVsZXJpay5pc1NhZmFyaSl7c2V0VGltZW91dChmdW5jdGlvbigpe2QuaGlnaGxpZ2h0TWF0Y2hlcygpOwp9LDApOwp9ZWxzZXt0aGlzLmhpZ2hsaWdodE1hdGNoZXMoKTsKfX1lbHNle3RoaXMuaGlnaGxpZ2h0QWxsTWF0Y2hlcyh0aGlzLmdldF90ZXh0KCkpOwp9fX0sX29uSW5wdXRQcm9wZXJ0eUNoYW5nZTpmdW5jdGlvbigpe2lmKCFldmVudC5wcm9wZXJ0eU5hbWUpe2V2ZW50PWV2ZW50LnJhd0V2ZW50Owp9aWYoZXZlbnQucHJvcGVydHlOYW1lPT0idmFsdWUiKXt2YXIgYz10aGlzLmdldF90ZXh0KCk7CmlmKHRoaXMuX2NhY2hlZFRleHQhPWMpe3RoaXMuX2NhY2hlZFRleHQ9YzsKdGhpcy5fb25JbnB1dENoYW5nZSgpOwp9fX0sX29uVGFibGVIb3ZlcjpmdW5jdGlvbihjKXtpZighdGhpcy5fZW5hYmxlZCl7cmV0dXJuOwp9dmFyIGQ9dGhpcy5nZXRfdGFibGVFbGVtZW50KCk7CmlmKGQhPW51bGwmJmQuY2xhc3NOYW1lIT0icmNiRm9jdXNlZCIpe2QuY2xhc3NOYW1lPSJyY2JIb3ZlcmVkIjsKfX0sX29uVGFibGVPdXQ6ZnVuY3Rpb24oYyl7aWYoIXRoaXMuX2VuYWJsZWQpe3JldHVybjsKfWlmKCFjKXtjPWV2ZW50Owp9dmFyIGY9dGhpcy5nZXRfdGFibGVFbGVtZW50KCk7CnZhciBkPWMudGFyZ2V0fHxjLnNyY0VsZW1lbnQ7CnZhciBnPXRoaXMuX2dldFJlbGF0ZWRUYXJnZXQoYyk7CmlmKCFnKXtyZXR1cm47Cn13aGlsZShnJiZnLm5vZGVUeXBlIT09OSl7aWYoZy5wYXJlbnROb2RlJiZnLnBhcmVudE5vZGU9PWYpe3JldHVybjsKfWc9Zy5wYXJlbnROb2RlOwp9aWYoZiE9bnVsbCYmZi5jbGFzc05hbWU9PSJyY2JIb3ZlcmVkIil7Zi5jbGFzc05hbWU9IiI7Cn19LF9vbldpbmRvd1Jlc2l6ZTpmdW5jdGlvbigpe2lmKHRoaXMuZ2V0X2Ryb3BEb3duVmlzaWJsZSgpKXt0aGlzLl9wb3NpdGlvbkRyb3BEb3duKCk7Cn19LF9vbldpbmRvd1VubG9hZDpmdW5jdGlvbigpe3RoaXMuX2Rpc3Bvc2VDaGlsZEVsZW1lbnRzPWZhbHNlOwp9LF9hcHBlbmRUZXh0QWZ0ZXJMYXN0U2VwYXJhdG9yOmZ1bmN0aW9uKGUpe3ZhciBjPXRoaXMuZ2V0X3RleHQoKTsKdmFyIGQ9dGhpcy5fZ2V0TGFzdFNlcGFyYXRvckluZGV4KGMpOwp2YXIgZj1jLnN1YnN0cmluZygwLGQrMSkrZTsKdGhpcy5zZXRfdGV4dChmKTsKfSxfcmFpc2VDbGllbnRCbHVyOmZ1bmN0aW9uKGMpe2lmKHRoaXMuX2ZvY3VzZWQpe3ZhciBkPXRoaXMuZ2V0X3RhYmxlRWxlbWVudCgpOwppZihkIT1udWxsKXtkLmNsYXNzTmFtZT0iIjsKfXRoaXMucmFpc2Vfb25DbGllbnRCbHVyKGMpOwp9fSxfcmVwbGFjZUNzc0NsYXNzOmZ1bmN0aW9uKGMsZCxlKXtjLmNsYXNzTmFtZT1jLmNsYXNzTmFtZS5yZXBsYWNlKGQsZSk7Cn0sX3NldEZpcnN0U2VsZWN0ZWRJdGVtOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5fZmluZEl0ZW1Ub1NlbGVjdCgpOwppZihjJiYhYy5nZXRfaXNTZXBhcmF0b3IoKSl7dGhpcy5zZXRfc2VsZWN0ZWRJdGVtKGMpOwp9fSxfc2V0UmVhZE9ubHlDc3NDbGFzczpmdW5jdGlvbigpe3ZhciBjPXRoaXMuZ2V0X3RhYmxlRWxlbWVudCgpLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0ciIpWzBdOwppZih0aGlzLmdldF9yZWFkT25seSgpKXtTeXMuVUkuRG9tRWxlbWVudC5hZGRDc3NDbGFzcyhjLCJyY2JSZWFkT25seSIpOwp9ZWxzZXtTeXMuVUkuRG9tRWxlbWVudC5yZW1vdmVDc3NDbGFzcyhjLCJyY2JSZWFkT25seSIpOwp9fSxhZGRfb25DbGllbnRLZXlQcmVzc2luZzpmdW5jdGlvbihjKXt0aGlzLmdldF9ldmVudHMoKS5hZGRIYW5kbGVyKCJrZXlQcmVzc2luZyIsYyk7Cn0sY2xlYXJJdGVtczpmdW5jdGlvbigpe3RoaXMuZ2V0X2l0ZW1zKCkuY2xlYXIoKTsKdGhpcy5faXRlbURhdGE9bnVsbDsKfSxkaXNhYmxlOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5nZXRfdGFibGVFbGVtZW50KCk7CmlmKGQhPW51bGwpe2QuY2xhc3NOYW1lPSJyY2JEaXNhYmxlZCI7Cn10aGlzLnNldF9lbmFibGVkKGZhbHNlKTsKdmFyIGU9dGhpcy5nZXRfc2ltcGxlUmVuZGVyaW5nKCk/dGhpcy5nZXRfc2VsZWN0RWxlbWVudCgpOnRoaXMuZ2V0X2lucHV0RG9tRWxlbWVudCgpOwplLmRpc2FibGVkPSJkaXNhYmxlZCI7CnRoaXMuZGlzYWJsZUV2ZW50cygpOwp2YXIgZj10aGlzLmdldF9pdGVtcygpLmdldF9jb3VudCgpOwpmb3IodmFyIGM9MDsKYzxmOwpjKyspe3RoaXMuX2NoaWxkcmVuLmdldEl0ZW0oYykuZGlzYWJsZSgpOwp9fSxkaXNhYmxlRXZlbnRzOmZ1bmN0aW9uKCl7dGhpcy5fZmlyZUV2ZW50cz1mYWxzZTsKfSxlbmFibGU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldF9zaW1wbGVSZW5kZXJpbmcoKT90aGlzLmdldF9zZWxlY3RFbGVtZW50KCk6dGhpcy5nZXRfaW5wdXREb21FbGVtZW50KCk7CmUuZGlzYWJsZWQ9IiI7CnZhciBkPXRoaXMuZ2V0X3RhYmxlRWxlbWVudCgpOwppZihkIT1udWxsKXtkLmNsYXNzTmFtZT0iIjsKfWlmKHRoaXMuZ2V0X2NoZWNrQWxsQ2hlY2tCb3goKSl7dGhpcy5lbmFibGVDaGVja0FsbENoZWNrQm94KCk7Cn10aGlzLnNldF9lbmFibGVkKHRydWUpOwp0aGlzLmVuYWJsZUV2ZW50cygpOwp2YXIgYz10aGlzLmdldF9pdGVtcygpLmdldF9jb3VudCgpOwpmb3IodmFyIGY9MDsKZjxjOwpmKyspe3RoaXMuX2NoaWxkcmVuLmdldEl0ZW0oZikuZW5hYmxlKCk7Cn19LGVuYWJsZUV2ZW50czpmdW5jdGlvbigpe3RoaXMuX2ZpcmVFdmVudHM9dHJ1ZTsKfSxmaW5kSXRlbUJ5VGV4dDpmdW5jdGlvbihjKXt2YXIgZD10aGlzLmdldF9pdGVtcygpOwp2YXIgZj1kLmdldF9jb3VudCgpOwpmb3IodmFyIGU9MDsKZTxmOwplKyspe2lmKGQuZ2V0SXRlbShlKS5nZXRfdGV4dCgpPT1jKXtyZXR1cm4gZC5nZXRJdGVtKGUpOwp9fXJldHVybiBudWxsOwp9LGZpbmRJdGVtQnlWYWx1ZTpmdW5jdGlvbihjKXtpZihjIT09MCYmIWMpe3JldHVybiBudWxsOwp9dmFyIGQ9dGhpcy5nZXRfaXRlbXMoKTsKdmFyIGY9ZC5nZXRfY291bnQoKTsKZm9yKHZhciBlPTA7CmU8ZjsKZSsrKXtpZihkLmdldEl0ZW0oZSkuZ2V0X3ZhbHVlKCk9PWMpe3JldHVybiBkLmdldEl0ZW0oZSk7Cn19cmV0dXJuIG51bGw7Cn0sZ2V0X2FsbG93Q3VzdG9tVGV4dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hbGxvd0N1c3RvbVRleHQ7Cn0sZ2V0X2NhdXNlc1ZhbGlkYXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2F1c2VzVmFsaWRhdGlvbjsKfSxnZXRfZW1wdHlNZXNzYWdlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VtcHR5TWVzc2FnZTsKfSxnZXRfZW5hYmxlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmFibGVkOwp9LGdldF9oaWdobGlnaHRUZW1wbGF0ZWRJdGVtczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9oaWdobGlnaHRUZW1wbGF0ZWRJdGVtczsKfSxnZXRfaW1hZ2VEb21FbGVtZW50OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX2ltYWdlRG9tRWxlbWVudCl7dGhpcy5faW1hZ2VEb21FbGVtZW50PXRoaXMuX2dldENoaWxkRWxlbWVudCgiQXJyb3ciKTsKfXJldHVybiB0aGlzLl9pbWFnZURvbUVsZW1lbnQ7Cn0sZ2V0X2lucHV0RG9tRWxlbWVudDpmdW5jdGlvbigpe2lmKCF0aGlzLl9pbnB1dERvbUVsZW1lbnQpe3RoaXMuX2lucHV0RG9tRWxlbWVudD10aGlzLl9nZXRDaGlsZEVsZW1lbnQoIklucHV0Iik7Cn1yZXR1cm4gdGhpcy5faW5wdXREb21FbGVtZW50Owp9LGdldF9pc1RlbXBsYXRlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc1RlbXBsYXRlZDsKfSxnZXRfaXRlbXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0Q2hpbGRyZW4oKTsKfSxnZXRfbGFzdFdvcmQ6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmdldExhc3RXb3JkKHRoaXMuZ2V0X3RleHQoKSk7CnJldHVybiBjOwp9LGdldF9vcmlnaW5hbFRleHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3JpZ2luYWxUZXh0Owp9LGdldF9yZWFkT25seTpmdW5jdGlvbigpe3JldHVybiAhKHRoaXMuZ2V0X2FsbG93Q3VzdG9tVGV4dCgpfHx0aGlzLmdldF9tYXJrRmlyc3RNYXRjaCgpKSYmdGhpcy5nZXRfZmlsdGVyKCk9PWIuUmFkQ29tYm9Cb3hGaWx0ZXIuTm9uZTsKfSxnZXRfdGFibGVFbGVtZW50OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX3RhYmxlRWxlbWVudCl7dGhpcy5fdGFibGVFbGVtZW50PSR0ZWxlcmlrLmdldEZpcnN0Q2hpbGRCeVRhZ05hbWUodGhpcy5nZXRfZWxlbWVudCgpLCJ0YWJsZSIsMCk7Cn1yZXR1cm4gdGhpcy5fdGFibGVFbGVtZW50Owp9LGdldF90ZXh0OmZ1bmN0aW9uKCl7aWYodGhpcy5nZXRfc2ltcGxlUmVuZGVyaW5nKCkpe3JldHVybiB0aGlzLl90ZXh0Owp9ZWxzZXtyZXR1cm4gdGhpcy5nZXRfaW5wdXREb21FbGVtZW50KCkudmFsdWU7Cn19LGdldF92YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92YWx1ZTsKfSxnZXRfdmlzaWJsZUl0ZW1zOmZ1bmN0aW9uKCl7dmFyIGM9W107CnZhciBkPXRoaXMuX2dldENoaWxkcmVuKCkuZ2V0X2NvdW50KCk7CmZvcih2YXIgZT0wOwplPGQ7CmUrKyl7dmFyIGY9dGhpcy5fZ2V0Q2hpbGRyZW4oKS5nZXRJdGVtKGUpOwppZihmLmdldF92aXNpYmxlKCkpe0FycmF5LmFkZChjLGYpOwp9fXJldHVybiBjOwp9LGdldExhc3RXb3JkOmZ1bmN0aW9uKGMsZSl7dmFyIGY9LTE7CmlmKHRoaXMuZ2V0X2F1dG9Db21wbGV0ZVNlcGFyYXRvcigpIT1udWxsKXtmPXRoaXMuX2dldExhc3RTZXBhcmF0b3JJbmRleChjKTsKfXZhciBkPWMuc3Vic3RyaW5nKGYrMSxjLmxlbmd0aCk7CmlmKGUpe2Q9ZC5yZXBsYWNlKC9eICsvLCIiKTsKfXJldHVybiBkOwp9LG1lYXN1cmVUYWJsZVdpZHRoV2l0aExhYmVsOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5nZXRfZWxlbWVudCgpOwp2YXIgbD1hKGUpLmZpbmQoImxhYmVsIikuZ2V0KDApLmNsb25lTm9kZShmYWxzZSk7CnZhciBpPXRoaXMuZ2V0X3RhYmxlRWxlbWVudCgpLmNsb25lTm9kZShmYWxzZSk7CnZhciBjPWUuY2xvbmVOb2RlKGZhbHNlKTsKYy5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiOwpjLnN0eWxlLnRvcD0iLTEwMDBweCI7CmMuc3R5bGUubGVmdD0iLTEwMDBweCI7CmMuYXBwZW5kQ2hpbGQobCk7CmMuYXBwZW5kQ2hpbGQoaSk7CmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYyk7CnZhciBqPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRkIik7CnZhciBnPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRyIik7CmcuYXBwZW5kQ2hpbGQoaik7CnZhciBkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRib2R5Iik7CmQuYXBwZW5kQ2hpbGQoZyk7CmkuYXBwZW5kQ2hpbGQoZCk7CnZhciBmPWMub2Zmc2V0V2lkdGg7CnZhciBoPWwub2Zmc2V0V2lkdGg7CnZhciBrPWYtaDsKZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChjKTsKcmV0dXJuIGs7Cn0scG9zdGJhY2s6ZnVuY3Rpb24oZCl7aWYoIXRoaXMuX3Bvc3RCYWNrUmVmZXJlbmNlKXtyZXR1cm47Cn12YXIgYz10aGlzLl9wb3N0QmFja1JlZmVyZW5jZS5yZXBsYWNlKCJhcmd1bWVudHMiLFN5cy5TZXJpYWxpemF0aW9uLkphdmFTY3JpcHRTZXJpYWxpemVyLnNlcmlhbGl6ZShkKSk7CmlmKGIuUmFkQ29tYm9Cb3guaXNJRURvY3VtZW50TW9kZTgoKXx8JHRlbGVyaWsuaXNJRTlNb2RlKXt0aGlzLmdldF9lbGVtZW50KCkuZm9jdXMoKTsKfWV2YWwoYyk7Cn0scmVwYWludDpmdW5jdGlvbigpe2lmKHRoaXMuZ2V0X3NpbXBsZVJlbmRlcmluZygpKXtyZXR1cm47Cn12YXIgZT1hKHRoaXMuZ2V0X2VsZW1lbnQoKSkuZmluZCgibGFiZWwiKS5nZXQoMCk7CnZhciBoPXRoaXMuZ2V0X3RhYmxlRWxlbWVudCgpOwppZihlKXt2YXIgZz10aGlzLmdldF9lbGVtZW50KCkub2Zmc2V0V2lkdGg7CnZhciBmPWUub2Zmc2V0V2lkdGg7CnZhciBqPWctZjsKaWYoaj09MCl7dmFyIGM9dGhpcy5nZXRfZWxlbWVudCgpOwp2YXIgaT1jLnN0eWxlLndpZHRoOwppZihpLmluZGV4T2YoIiUiLDApPT0tMSl7aj10aGlzLm1lYXN1cmVUYWJsZVdpZHRoV2l0aExhYmVsKCk7Cn19aWYoaj4wKXt2YXIgZD0kdGVsZXJpay5nZXRNYXJnaW4oaCxUZWxlcmlrLldlYi5Cb3hTaWRlLlJpZ2h0KTsKaWYoai1kPj0wKXtqLT1kOwp9fWguc3R5bGUud2lkdGg9aisicHgiOwp9aC5zdHlsZS5kaXNwbGF5PSIiOwppZih0aGlzLl9mYWtlSW5wdXQpe3RoaXMuX3JlcGFpbnRGYWtlSW5wdXQoKTsKfX0sc2F2ZUNsaWVudFN0YXRlOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5fbG9nLl9sb2dFbnRyaWVzOwp2YXIgYz17bG9nRW50cmllczpkLHZhbHVlOnRoaXMuX3ZhbHVlLHRleHQ6dGhpcy5fdGV4dCxlbmFibGVkOnRoaXMuX2VuYWJsZWQsY2hlY2tlZEluZGljZXM6dGhpcy5fY2hlY2tlZEluZGljZXMsY2hlY2tlZEl0ZW1zVGV4dE92ZXJmbG93czp0aGlzLl9jaGVja2VkSXRlbXNUZXh0T3ZlcmZsb3dzfTsKcmV0dXJuIFN5cy5TZXJpYWxpemF0aW9uLkphdmFTY3JpcHRTZXJpYWxpemVyLnNlcmlhbGl6ZShjKTsKfSxzZWxlY3RUZXh0OmZ1bmN0aW9uKGYsZCl7aWYoIXRoaXMuZ2V0X2VuYWJsZVRleHRTZWxlY3Rpb24oKSl7cmV0dXJuOwp9aWYoKCF0aGlzLmdldF9lbmFibGVMb2FkT25EZW1hbmQoKSkmJih0aGlzLmdldF9yZWFkT25seSgpKSl7cmV0dXJuOwp9aWYodGhpcy5nZXRfaW5wdXREb21FbGVtZW50KCkuc2V0U2VsZWN0aW9uUmFuZ2Upe3RoaXMuZ2V0X2lucHV0RG9tRWxlbWVudCgpLnNldFNlbGVjdGlvblJhbmdlKGYsZitkKTsKfWVsc2V7dmFyIGU9dGhpcy5nZXRfaW5wdXREb21FbGVtZW50KCkuY3JlYXRlVGV4dFJhbmdlKCk7CmUubW92ZUVuZCgic2VudGVuY2UiLC0xMDAwMDApOwppZihmPT0wJiZkPT0wKXtlLmNvbGxhcHNlKHRydWUpOwpyZXR1cm47Cn1lLm1vdmVTdGFydCgiY2hhcmFjdGVyIixmKTsKZS5tb3ZlRW5kKCJjaGFyYWN0ZXIiLGQpOwp0cnl7ZS5zZWxlY3QoKTsKfWNhdGNoKGMpe319fSxzZXRfYWxsb3dDdXN0b21UZXh0OmZ1bmN0aW9uKGMpe3RoaXMuX2FsbG93Q3VzdG9tVGV4dD1jOwppZighdGhpcy5nZXRfc2ltcGxlUmVuZGVyaW5nKCkpe3RoaXMuX3NldFJlYWRPbmx5Q3NzQ2xhc3MoKTsKfX0sc2V0X2NhdXNlc1ZhbGlkYXRpb246ZnVuY3Rpb24oYyl7dGhpcy5fY2F1c2VzVmFsaWRhdGlvbj1jOwp9LHNldF9lbXB0eU1lc3NhZ2U6ZnVuY3Rpb24oYyl7aWYodGhpcy5fZW1wdHlNZXNzYWdlIT09Yyl7dGhpcy5fZW1wdHlNZXNzYWdlPWM7Cn10aGlzLl9hcHBseUVtcHR5TWVzc2FnZSgpOwp9LHNldF9lbmFibGVkOmZ1bmN0aW9uKGMpe3RoaXMuX2VuYWJsZWQ9YzsKdGhpcy51cGRhdGVDbGllbnRTdGF0ZSgpOwp9LHNldF9oaWdobGlnaHRUZW1wbGF0ZWRJdGVtczpmdW5jdGlvbihjKXt0aGlzLl9oaWdobGlnaHRUZW1wbGF0ZWRJdGVtcz1jOwp9LHNldF9pc1RlbXBsYXRlZDpmdW5jdGlvbihjKXt0aGlzLl9pc1RlbXBsYXRlZD1jOwp9LGdldF9jbGllbnRUZW1wbGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jbGllbnRUZW1wbGF0ZTsKfSxzZXRfY2xpZW50VGVtcGxhdGU6ZnVuY3Rpb24oYyl7dGhpcy5fY2xpZW50VGVtcGxhdGU9YzsKfSxzZXRfaXRlbURhdGE6ZnVuY3Rpb24oYyl7dGhpcy5faXRlbURhdGE9YzsKfSxzZXRfaXRlbXM6ZnVuY3Rpb24oYyl7dGhpcy5fY2hpbGRyZW49YzsKfSxzZXRfb3JpZ2luYWxUZXh0OmZ1bmN0aW9uKGMpe3RoaXMuX29yaWdpbmFsVGV4dD1jOwp9LHNldF90ZXh0OmZ1bmN0aW9uKGYpe2Y9Yi5SYWRDb21ib0JveC5odG1sRGVjb2RlKGYpOwp0aGlzLmdldF9lbGVtZW50KCkudmFsdWU9ZjsKdGhpcy5fc3VwcHJlc3NDaGFuZ2U9dHJ1ZTsKaWYoIXRoaXMuZ2V0X3NpbXBsZVJlbmRlcmluZygpKXt2YXIgYz10aGlzLmdldF9pbnB1dERvbUVsZW1lbnQoKTsKYy52YWx1ZT1mOwpjLmNsYXNzTmFtZT0icmNiSW5wdXQiOwp0aGlzLnNldF92YWx1ZSgiIik7CmlmKGMuZmlyZUV2ZW50JiZkb2N1bWVudC5jcmVhdGVFdmVudE9iamVjdCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRXZlbnRPYmplY3QoKTsKYy5maXJlRXZlbnQoIm9uY2hhbmdlIixlKTsKfWVsc2V7aWYoYy5kaXNwYXRjaEV2ZW50KXt2YXIgZD10cnVlOwp2YXIgZT1kb2N1bWVudC5jcmVhdGVFdmVudCgiSFRNTEV2ZW50cyIpOwplLmluaXRFdmVudCgiY2hhbmdlIixkLHRydWUpOwpjLmRpc3BhdGNoRXZlbnQoZSk7Cn19fXRoaXMuX3N1cHByZXNzQ2hhbmdlPWZhbHNlOwp0aGlzLl9lbnN1cmVDaGlsZENvbnRyb2xzKCk7CnRoaXMuX3RleHQ9ZjsKdGhpcy51cGRhdGVDbGllbnRTdGF0ZSgpOwp9LHNldF92YWx1ZTpmdW5jdGlvbihjKXt0aGlzLl92YWx1ZT1jOwp0aGlzLnVwZGF0ZUNsaWVudFN0YXRlKCk7Cn0sZ2V0X2xvY2FsaXphdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb2NhbGl6YXRpb247Cn0sc2V0X2xvY2FsaXphdGlvbjpmdW5jdGlvbihjKXt0aGlzLl9sb2NhbGl6YXRpb249U3lzLlNlcmlhbGl6YXRpb24uSmF2YVNjcmlwdFNlcmlhbGl6ZXIuZGVzZXJpYWxpemUoYyk7Cn19OwphLnJlZ2lzdGVyQ29udHJvbFByb3BlcnRpZXMoYi5SYWRDb21ib0JveCx7YXV0b0NvbXBsZXRlU2VwYXJhdG9yOm51bGwsYXBwZW5kSXRlbXM6ZmFsc2UsZW5kT2ZJdGVtczpmYWxzZSxlbmFibGVMb2FkT25EZW1hbmQ6ZmFsc2UsY2xvc2VEcm9wRG93bk9uQmx1cjp0cnVlLGNoYW5nZVRleHQ6dHJ1ZSxlbmFibGVUZXh0U2VsZWN0aW9uOnRydWUsZHJvcERvd25WaXNpYmxlOmZhbHNlLGhpZ2hsaWdodGVkSXRlbTpudWxsLGZpbHRlcjowLGNsaWVudERhdGFTdHJpbmc6bnVsbCxpc0Nhc2VTZW5zaXRpdmU6ZmFsc2UsaXRlbVJlcXVlc3RUaW1lb3V0OjMwMCxzaG93TW9yZU1lc3NhZ2U6IiIsZXJyb3JNZXNzYWdlOiJDYWxsQmFjayBFcnJvciEiLGxvYWRpbmdNZXNzYWdlOiJMb2FkaW5nLi4uIixvZmZzZXRYOjAsb2Zmc2V0WTowLGV4cGFuZERpcmVjdGlvbjoyLGVuYWJsZUFyaWFTdXBwb3J0OmZhbHNlfSk7CmEucmVnaXN0ZXJDb250cm9sRXZlbnRzKGIuUmFkQ29tYm9Cb3gsWyJsb2FkIiwia2V5UHJlc3NpbmciLCJ0ZXh0Q2hhbmdlIiwiaXRlbXNSZXF1ZXN0RmFpbGVkIiwic2VsZWN0ZWRJbmRleENoYW5naW5nIiwic2VsZWN0ZWRJbmRleENoYW5nZWQiLCJpdGVtc1JlcXVlc3RpbmciLCJpdGVtc1JlcXVlc3RlZCIsIml0ZW1EYXRhQm91bmQiLCJkcm9wRG93bk9wZW5pbmciLCJkcm9wRG93bk9wZW5lZCIsImRyb3BEb3duQ2xvc2luZyIsImRyb3BEb3duQ2xvc2VkIiwidGVtcGxhdGVEYXRhQm91bmQiLCJvbkNsaWVudEZvY3VzIiwib25DbGllbnRCbHVyIiwiaXRlbUNoZWNraW5nIiwiaXRlbUNoZWNrZWQiXSk7CmIuUmFkQ29tYm9Cb3guX3ByZUluaXRpYWxpemU9ZnVuY3Rpb24oZCl7dmFyIGM9JGdldChkKTsKdmFyIGU9ImlubGluZS1ibG9jayI7CmlmKCR0ZWxlcmlrLmlzSUU2fHwkdGVsZXJpay5pc0lFNyl7ZT0iaW5saW5lIjsKfWVsc2V7aWYoJHRlbGVyaWsuaXNGaXJlZm94Mil7ZT0iLW1vei1pbmxpbmUtc3RhY2siOwp9fWMuc3R5bGUuZGlzcGxheT1lOwp9OwpiLlJhZENvbWJvQm94LnJlZ2lzdGVyQ2xhc3MoIlRlbGVyaWsuV2ViLlVJLlJhZENvbWJvQm94IixiLkNvbnRyb2xJdGVtQ29udGFpbmVyKTsKfSkoKTsKKGZ1bmN0aW9uKCl7dmFyIGE9JHRlbGVyaWsuJDsKdmFyIGI9VGVsZXJpay5XZWIuVUk7CmIuUmFkQ29tYm9Cb3guX2NhbmNlbEV2ZW50PWZ1bmN0aW9uKGMpe2MucHJldmVudERlZmF1bHQoKTsKcmV0dXJuIGZhbHNlOwp9OwpiLlJhZENvbWJvQm94Ll9jcmVhdGVDaGlsZENvbnRyb2xzPWZ1bmN0aW9uKGwsaCl7dmFyIGQ9bC5nZXRfaXRlbURhdGEoKTsKaWYoIWQpe3JldHVybjsKfXZhciBtOwppZihsLmdldF9zaW1wbGVSZW5kZXJpbmcoKSl7bT1hKGwuZ2V0X3NlbGVjdEVsZW1lbnQoKSkuZmluZCgib3B0aW9uIikudG9BcnJheSgpOwp9ZWxzZXt2YXIgZT1sLmdldF9jaGlsZExpc3RFbGVtZW50KCk7CmlmKCFlKXtyZXR1cm47Cn1tPSR0ZWxlcmlrLmdldENoaWxkcmVuQnlUYWdOYW1lKGwuZ2V0X2NoaWxkTGlzdEVsZW1lbnQoKSwibGkiKTsKaWYobS5sZW5ndGg+MCYmbVswXS5jbGFzc05hbWU9PSJyY2JMb2FkaW5nIil7aj1qLTE7Cmc9MTsKfX12YXIgaj1tLmxlbmd0aDsKdmFyIGc9MDsKZm9yKHZhciBrPWcsYz1tLmxlbmd0aDsKazxjOwprKyspe3ZhciBmOwppZihhKG1ba10pLmhhc0NsYXNzKCJyY2JEZWZhdWx0SXRlbSIpKXtmPW5ldyBiLlJhZENvbWJvQm94RGVmYXVsdEl0ZW0oKTsKZi5zZXRfcGFyZW50KGwpOwpmLl9pbml0aWFsaXplKGRbay1nXSxtW2tdKTsKbC5fZGVmYXVsdEl0ZW09ZjsKY29udGludWU7Cn1lbHNle2Y9bmV3IGIuUmFkQ29tYm9Cb3hJdGVtKCk7CmguYWRkKGYpOwpmLl9pbml0aWFsaXplKGRbay1nXSxtW2tdKTsKfX19OwpiLlJhZENvbWJvQm94Ll9maXJlVmFsdWVQcm9wZXJ0eUNoYW5nZUV2ZW50PWZ1bmN0aW9uKGQpe3ZhciBjPWRvY3VtZW50LmNyZWF0ZUV2ZW50T2JqZWN0KCk7CmMucHJvcGVydHlOYW1lPSJ2YWx1ZSI7CmQuZmlyZUV2ZW50KCJvbnByb3BlcnR5Y2hhbmdlIixjKTsKfTsKYi5SYWRDb21ib0JveC5fZ2V0SXNJbklGcmFtZT1mdW5jdGlvbigpe3JldHVybiB3aW5kb3cudG9wIT13aW5kb3c7Cn07CmIuUmFkQ29tYm9Cb3guX2dldExvY2F0aW9uPWZ1bmN0aW9uKGMpe3ZhciBlPSR0ZWxlcmlrLmdldExvY2F0aW9uKGMpOwppZigoJHRlbGVyaWsuaXNPcGVyYSYmU3lzLkJyb3dzZXIudmVyc2lvbjw5LjgpfHwkdGVsZXJpay5pc1NhZmFyaSl7dmFyIGQ9Yy5wYXJlbnROb2RlOwp3aGlsZShkJiZkLnRhZ05hbWUudG9VcHBlckNhc2UoKSE9IkJPRFkiJiZkLnRhZ05hbWUudG9VcHBlckNhc2UoKSE9IkhUTUwiKXt2YXIgZj1hKGQpLmNzcygicG9zaXRpb24iKTsKaWYoZj09InJlbGF0aXZlInx8Zj09ImFic29sdXRlIil7ZS54Kz0kdGVsZXJpay5nZXRDb3JyZWN0U2Nyb2xsTGVmdChkKTsKZS55Kz1kLnNjcm9sbFRvcDsKfWQ9ZC5wYXJlbnROb2RlOwp9fXJldHVybiBlOwp9OwpiLlJhZENvbWJvQm94Ll9nZXROZWVkc0Zha2VJbnB1dD1mdW5jdGlvbigpe3JldHVybiAkdGVsZXJpay5pc0lFOCYmYi5SYWRDb21ib0JveC5fZ2V0SXNJbklGcmFtZSgpOwp9OwpiLlJhZENvbWJvQm94Ll9nZXRTY3JvbGxCYXJXaWR0aD1mdW5jdGlvbigpe2lmKGIuUmFkQ29tYm9Cb3guX3Njcm9sbGJhcldpZHRoKXtyZXR1cm4gYi5SYWRDb21ib0JveC5fc2Nyb2xsYmFyV2lkdGg7Cn12YXIgYyxkPTA7CnZhciBmPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwpmLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSI7CmYuc3R5bGUudG9wPSItMTAwMHB4IjsKZi5zdHlsZS5sZWZ0PSItMTAwMHB4IjsKZi5zdHlsZS53aWR0aD0iMTAwcHgiOwpmLnN0eWxlLmhlaWdodD0iNTBweCI7CmYuc3R5bGUub3ZlcmZsb3c9ImhpZGRlbiI7CnZhciBoPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwpoLnN0eWxlLndpZHRoPSIxMDAlIjsKaC5zdHlsZS5oZWlnaHQ9IjIwMHB4IjsKZi5hcHBlbmRDaGlsZChoKTsKZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChmKTsKdmFyIGU9aC5vZmZzZXRXaWR0aDsKZi5zdHlsZS5vdmVyZmxvdz0iYXV0byI7CnZhciBnPWgub2Zmc2V0V2lkdGg7CmIuUmFkQ29tYm9Cb3guX3Njcm9sbGJhcldpZHRoPWUtZzsKaWYoYi5SYWRDb21ib0JveC5fc2Nyb2xsYmFyV2lkdGg8PTApe2guc3R5bGUud2lkdGg9IjMwMHB4IjsKYz1mLm9mZnNldFdpZHRoOwpkPWYuY2xpZW50V2lkdGg7CmIuUmFkQ29tYm9Cb3guX3Njcm9sbGJhcldpZHRoPWMtZDsKfWlmKGIuUmFkQ29tYm9Cb3guX3Njcm9sbGJhcldpZHRoPD0wKXtiLlJhZENvbWJvQm94Ll9zY3JvbGxiYXJXaWR0aD0xNjsKfWRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZG9jdW1lbnQuYm9keS5sYXN0Q2hpbGQpOwpyZXR1cm4gYi5SYWRDb21ib0JveC5fc2Nyb2xsYmFyV2lkdGg7Cn07CmIuUmFkQ29tYm9Cb3guaHRtbERlY29kZT1mdW5jdGlvbihjKXtyZXR1cm4gYi5SYWRDb21ib0JveC5yZXBsYWNlKGMseyImYW1wOyI6IiYiLCImbHQ7IjoiPCIsIiZndDsiOiI+IiwiJnF1b3Q7IjonIid9KTsKfTsKYi5SYWRDb21ib0JveC5odG1sRW5jb2RlPWZ1bmN0aW9uKGMpe3JldHVybiBiLlJhZENvbWJvQm94LnJlcGxhY2UoYyx7IiYiOiImYW1wOyIsIjwiOiImbHQ7IiwiPiI6IiZndDsifSk7Cn07CmIuUmFkQ29tYm9Cb3guaXNJRURvY3VtZW50TW9kZTg9ZnVuY3Rpb24oKXtyZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRNb2RlJiZkb2N1bWVudC5kb2N1bWVudE1vZGU9PTg7Cn07CmIuUmFkQ29tYm9Cb3gucmVwbGFjZT1mdW5jdGlvbihlLGMpe2Zvcih2YXIgZCBpbiBjKXtlPWUucmVwbGFjZShuZXcgUmVnRXhwKGQsImciKSxjW2RdKTsKfXJldHVybiBlOwp9OwpiLlJhZENvbWJvQm94LkNvbWJvQm94ZXM9W107CmIuUmFkQ29tYm9Cb3guX2luaXRpYWxpemVJdGVtQ29uc3RhbnRzPWZ1bmN0aW9uKCl7dmFyIGM9Yi5SYWRDb21ib0JveEl0ZW07CmMuU1RSSU5HX0VNX1NUQVJUPSI8ZW0+IixjLlNUUklOR19FTV9TVEFSVF9IVE1MX0VOQ09ERUQ9Yi5SYWRDb21ib0JveC5odG1sRW5jb2RlKGMuU1RSSU5HX0VNX1NUQVJUKSxjLlJFR0VYX0VNX1NUQVJUX0hUTUxfRU5DT0RFRD1uZXcgUmVnRXhwKGMuU1RSSU5HX0VNX1NUQVJUX0hUTUxfRU5DT0RFRCwiZyIpLGMuU1RSSU5HX0VNX0VORD0iPC9lbT4iLGMuU1RSSU5HX0VNX0VORF9IVE1MX0VOQ09ERUQ9Yi5SYWRDb21ib0JveC5odG1sRW5jb2RlKGMuU1RSSU5HX0VNX0VORCksYy5TVFJJTkdfRU1fRU5EX0hUTUxfRU5DT0RFRF9SRUdFWF9FU0NBUEVEPWMuX3JlZ0V4RXNjYXBlKGMuU1RSSU5HX0VNX0VORF9IVE1MX0VOQ09ERUQpLGMuUkVHRVhfRU1fRU5EX0hUTUxfRU5DT0RFRD1uZXcgUmVnRXhwKGMuU1RSSU5HX0VNX0VORF9IVE1MX0VOQ09ERURfUkVHRVhfRVNDQVBFRCwiZyIpOwp9OwpiLlJhZENvbWJvQm94Ll9pbml0aWFsaXplSXRlbUNvbnN0YW50cygpOwp9KSgpOwooZnVuY3Rpb24oKXt2YXIgYT1UZWxlcmlrLldlYi5VSTsKYS5SYWRDb21ib0JveC5wcm90b3R5cGUucmFpc2VfaXRlbXNSZXF1ZXN0ZWQ9ZnVuY3Rpb24oYixjKXt2YXIgZD1uZXcgYS5SYWRDb21ib0JveFJlcXVlc3RFdmVudEFyZ3MoYixjKTsKdGhpcy5yYWlzZUV2ZW50KCJpdGVtc1JlcXVlc3RlZCIsZCk7Cn07CmEuUmFkQ29tYm9Cb3gucHJvdG90eXBlLnJhaXNlX2l0ZW1zUmVxdWVzdEZhaWxlZD1mdW5jdGlvbihiLGQsYyl7dmFyIGY9bmV3IGEuUmFkQ29tYm9Cb3hJdGVtc1JlcXVlc3RGYWlsZWRFdmVudEFyZ3MoYixkLGMpOwp0aGlzLnJhaXNlRXZlbnQoIml0ZW1zUmVxdWVzdEZhaWxlZCIsZik7CnJldHVybiBmLmdldF9jYW5jZWwoKTsKfTsKYS5SYWRDb21ib0JveC5wcm90b3R5cGUucmFpc2VfZHJvcERvd25DbG9zZWQ9ZnVuY3Rpb24oYil7dmFyIGM9bmV3IGEuUmFkQ29tYm9Cb3hFdmVudEFyZ3MoYik7CnRoaXMucmFpc2VFdmVudCgiZHJvcERvd25DbG9zZWQiLGMpOwp9OwphLlJhZENvbWJvQm94LnByb3RvdHlwZS5yYWlzZV9kcm9wRG93bkNsb3Npbmc9ZnVuY3Rpb24oYil7dmFyIGM9bmV3IGEuUmFkQ29tYm9Cb3hDYW5jZWxFdmVudEFyZ3MoYik7CnRoaXMucmFpc2VFdmVudCgiZHJvcERvd25DbG9zaW5nIixjKTsKcmV0dXJuIGMuZ2V0X2NhbmNlbCgpOwp9OwphLlJhZENvbWJvQm94LnByb3RvdHlwZS5yYWlzZV9kcm9wRG93bk9wZW5lZD1mdW5jdGlvbihiKXt2YXIgYz1uZXcgYS5SYWRDb21ib0JveEV2ZW50QXJncyhiKTsKdGhpcy5yYWlzZUV2ZW50KCJkcm9wRG93bk9wZW5lZCIsYyk7Cn07CmEuUmFkQ29tYm9Cb3gucHJvdG90eXBlLnJhaXNlX2Ryb3BEb3duT3BlbmluZz1mdW5jdGlvbihiKXt2YXIgYz1uZXcgYS5SYWRDb21ib0JveENhbmNlbEV2ZW50QXJncyhiKTsKdGhpcy5yYWlzZUV2ZW50KCJkcm9wRG93bk9wZW5pbmciLGMpOwpyZXR1cm4gYy5nZXRfY2FuY2VsKCk7Cn07CmEuUmFkQ29tYm9Cb3gucHJvdG90eXBlLnJhaXNlX2tleVByZXNzaW5nPWZ1bmN0aW9uKGIpe3RoaXMucmFpc2VFdmVudCgia2V5UHJlc3NpbmciLGIpOwp9OwphLlJhZENvbWJvQm94LnByb3RvdHlwZS5yYWlzZV9vbkNsaWVudEJsdXI9ZnVuY3Rpb24oYil7dmFyIGM9bmV3IGEuUmFkQ29tYm9Cb3hFdmVudEFyZ3MoYik7CnRoaXMucmFpc2VFdmVudCgib25DbGllbnRCbHVyIixjKTsKfTsKYS5SYWRDb21ib0JveC5wcm90b3R5cGUucmFpc2Vfb25DbGllbnRGb2N1cz1mdW5jdGlvbihiKXt2YXIgYz1uZXcgYS5SYWRDb21ib0JveEV2ZW50QXJncyhiKTsKdGhpcy5yYWlzZUV2ZW50KCJvbkNsaWVudEZvY3VzIixjKTsKfTsKYS5SYWRDb21ib0JveC5wcm90b3R5cGUucmFpc2Vfb25DbGllbnRLZXlQcmVzc2luZz1mdW5jdGlvbihiKXt2YXIgYz1uZXcgYS5SYWRDb21ib0JveEV2ZW50QXJncyhiKTsKdGhpcy5yYWlzZUV2ZW50KCJrZXlQcmVzc2luZyIsYyk7Cn07CmEuUmFkQ29tYm9Cb3gucHJvdG90eXBlLnJhaXNlX29uSXRlbUNoZWNraW5nPWZ1bmN0aW9uKGIsYyl7dmFyIGQ9bmV3IGEuUmFkQ29tYm9Cb3hJdGVtQ2FuY2VsRXZlbnRBcmdzKGIsYyk7CnRoaXMucmFpc2VFdmVudCgiaXRlbUNoZWNraW5nIixkKTsKcmV0dXJuIGQuZ2V0X2NhbmNlbCgpOwp9OwphLlJhZENvbWJvQm94LnByb3RvdHlwZS5yYWlzZV9vbkl0ZW1DaGVja2VkPWZ1bmN0aW9uKGIsYyl7dmFyIGQ9bmV3IGEuUmFkQ29tYm9Cb3hJdGVtRXZlbnRBcmdzKGIsYyk7CnRoaXMucmFpc2VFdmVudCgiaXRlbUNoZWNrZWQiLGQpOwp9OwphLlJhZENvbWJvQm94LnByb3RvdHlwZS5yYWlzZV9zZWxlY3RlZEluZGV4Q2hhbmdlZD1mdW5jdGlvbihiLGMpe3ZhciBkPW5ldyBhLlJhZENvbWJvQm94SXRlbUV2ZW50QXJncyhiLGMpOwp0aGlzLnJhaXNlRXZlbnQoInNlbGVjdGVkSW5kZXhDaGFuZ2VkIixkKTsKfTsKYS5SYWRDb21ib0JveC5wcm90b3R5cGUucmFpc2Vfc2VsZWN0ZWRJbmRleENoYW5naW5nPWZ1bmN0aW9uKGIsYyl7dmFyIGQ9bmV3IGEuUmFkQ29tYm9Cb3hJdGVtQ2FuY2VsRXZlbnRBcmdzKGIsYyk7CnRoaXMucmFpc2VFdmVudCgic2VsZWN0ZWRJbmRleENoYW5naW5nIixkKTsKcmV0dXJuIGQuZ2V0X2NhbmNlbCgpOwp9OwphLlJhZENvbWJvQm94LnByb3RvdHlwZS5yYWlzZV90ZXh0Q2hhbmdlPWZ1bmN0aW9uKGMsYil7dmFyIGM9bmV3IGEuUmFkQ29tYm9Cb3hDYW5jZWxFdmVudEFyZ3MoYik7CnRoaXMucmFpc2VFdmVudCgidGV4dENoYW5nZSIsYyk7CnJldHVybiBjLmdldF9jYW5jZWwoKTsKfTsKYS5SYWRDb21ib0JveC5wcm90b3R5cGUucmVtb3ZlX29uQ2xpZW50S2V5UHJlc3Npbmc9ZnVuY3Rpb24oYil7dGhpcy5nZXRfZXZlbnRzKCkucmVtb3ZlSGFuZGxlcigia2V5UHJlc3NpbmciLGIpOwp9Owp9KSgpOwooZnVuY3Rpb24oKXt2YXIgYj0kdGVsZXJpay4kOwp2YXIgYz1UZWxlcmlrLldlYi5VSTsKdmFyIGE9U3lzLlNlcmlhbGl6YXRpb24uSmF2YVNjcmlwdFNlcmlhbGl6ZXI7CmMuUmFkQ29tYm9Cb3gucHJvdG90eXBlLmdldF9jaGVja2VkSW5kaWNlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGVja2VkSW5kaWNlczsKfTsKYy5SYWRDb21ib0JveC5wcm90b3R5cGUuZ2V0X2NoZWNrZWRJdGVtcz1mdW5jdGlvbigpe3ZhciBmPVtdOwp2YXIgZT10aGlzLmdldF9pdGVtcygpOwpmb3IoaT0wOwppPGUuZ2V0X2NvdW50KCk7CmkrKyl7dmFyIGQ9dGhpcy5nZXRfaXRlbXMoKS5nZXRJdGVtKGkpOwppZihkIT1udWxsJiZkLmdldF9jaGVja2VkKCkpe0FycmF5LmFkZChmLGQpOwp9fXJldHVybiBmOwp9OwpjLlJhZENvbWJvQm94LnByb3RvdHlwZS5nZXRfY2hlY2tBbGxDaGVja0JveERpdkVsZW1lbnQ9ZnVuY3Rpb24oKXtpZih0aGlzLl9lbmFibGVDaGVja0FsbEl0ZW1zQ2hlY2tCb3gmJnRoaXMuX2NoZWNrQWxsSXRlbXNFbGVtZW50PT1udWxsKXt0aGlzLl9jaGVja0FsbEl0ZW1zRWxlbWVudD1iKHRoaXMuZ2V0X2Ryb3BEb3duRWxlbWVudCgpKS5maW5kKCIucmNiQ2hlY2tBbGxJdGVtcyIpOwp9cmV0dXJuIHRoaXMuX2NoZWNrQWxsSXRlbXNFbGVtZW50Owp9OwpjLlJhZENvbWJvQm94LnByb3RvdHlwZS5nZXRfY2hlY2tBbGxDaGVja0JveD1mdW5jdGlvbigpe3ZhciBkPW51bGw7CmlmKHRoaXMuX2NoZWNrQWxsSXRlbXNFbGVtZW50IT1udWxsKXtkPWIodGhpcy5nZXRfY2hlY2tBbGxDaGVja0JveERpdkVsZW1lbnQoKSkuZmluZCgiLnJjYkNoZWNrQWxsSXRlbXNDaGVja0JveCIpOwp9cmV0dXJuIGQ7Cn07CmMuUmFkQ29tYm9Cb3gucHJvdG90eXBlLmVuYWJsZUNoZWNrQWxsQ2hlY2tCb3g9ZnVuY3Rpb24oKXt0aGlzLmdldF9jaGVja0FsbENoZWNrQm94KCkucHJvcCgiZGlzYWJsZWQiLGZhbHNlKTsKfTsKYy5SYWRDb21ib0JveC5wcm90b3R5cGUuX2luaXRpYWxpemVDaGVja0JveGVzPWZ1bmN0aW9uKCl7dGhpcy5fdXBkYXRlQ2hlY2tlZEluZGljZXMoKTsKdGhpcy51cGRhdGVDbGllbnRTdGF0ZSgpOwp2YXIgZD10aGlzOwppZih0aGlzLl9lbmFibGVDaGVja0FsbEl0ZW1zQ2hlY2tCb3gmJnRoaXMuZ2V0X2NoZWNrQWxsQ2hlY2tCb3hEaXZFbGVtZW50KCkhPW51bGwpe3RoaXMuZ2V0X2NoZWNrQWxsQ2hlY2tCb3hEaXZFbGVtZW50KCkuYmluZCgiY2xpY2siLGZ1bmN0aW9uKGYpe2QuX29uQ2hlY2tBbGxJdGVtc0NoZWNrKGYpOwp9KS5iaW5kKCJtb3VzZW92ZXIiLGZ1bmN0aW9uKGYpe2QuX29uQ2hlY2tBbGxIb3ZlcihmKTsKfSkuYmluZCgibW91c2VvdXQiLGZ1bmN0aW9uKGYpe2QuX29uQ2hlY2tBbGxPdXQoZik7Cn0pOwp9Yih0aGlzLmdldF9jaGlsZExpc3RFbGVtZW50KCkpLm9uKCJjbGljayIsImxhYmVsIixmdW5jdGlvbihmKXtmLnN0b3BQcm9wYWdhdGlvbigpOwpkLl9vbkNoZWNrQm94Q2hlY2soZik7Cn0pOwp9OwpjLlJhZENvbWJvQm94LnByb3RvdHlwZS5fb25DaGVja0JveENoZWNrPWZ1bmN0aW9uKGYpe3ZhciBkPWYudGFyZ2V0Lm5vZGVOYW1lOwppZihkPT0iTEFCRUwiKXtmLnByZXZlbnREZWZhdWx0KCk7Cn12YXIgaD10aGlzLl9maW5kTmVhcmVzdEl0ZW0oZi50YXJnZXQpOwp2YXIgaj1oIT1udWxsP2g6dGhpcy5fZXh0cmFjdEl0ZW1Gcm9tRG9tRWxlbWVudChmLnRhcmdldCk7CmlmKHRoaXMucmFpc2Vfb25JdGVtQ2hlY2tpbmcoaixmKSl7Zi5wcmV2ZW50RGVmYXVsdCgpOwpyZXR1cm47Cn1qLnNldF9jaGVja2VkKCFqLmdldF9jaGVja2VkKCkpOwp0aGlzLnJhaXNlX29uSXRlbUNoZWNrZWQoaixmKTsKdGhpcy5fdXBkYXRlQ29tYm9Cb3hUZXh0KCk7CmlmKHRoaXMuX2NoZWNrQWxsSXRlbXNFbGVtZW50IT1udWxsKXt0aGlzLl91cGRhdGVDaGVja0FsbFN0YXRlKCk7Cn1pZih0aGlzLl9wb3N0QmFja09uQ2hlY2spe3ZhciBnPXtDb21tYW5kOiJDaGVjayIsSW5kZXg6ai5nZXRfaW5kZXgoKX07CnRoaXMucG9zdGJhY2soZyk7Cn19OwpjLlJhZENvbWJvQm94LnByb3RvdHlwZS5fb25DaGVja0FsbEl0ZW1zQ2hlY2s9ZnVuY3Rpb24oZil7aWYodGhpcy5fY2hlY2tCb3hlcyYmdGhpcy5fZW5hYmxlQ2hlY2tBbGxJdGVtc0NoZWNrQm94KXt2YXIgZz10aGlzLmdldF9pdGVtcygpOwp0aGlzLl9jaGVja2VkSW5kaWNlcz1bXTsKdGhpcy5fdG9nZ2xlQWxsQ2hlY2tlZChmKTsKZm9yKHZhciBoPTAsZD1nLmdldF9jb3VudCgpOwpoPGQ7CmgrKyl7dGhpcy5nZXRfaXRlbXMoKS5nZXRJdGVtKGgpLl9zZXRDaGVja2VkKHRoaXMuX2FsbENoZWNrZWQpOwp9dGhpcy5fdXBkYXRlQ2hlY2tBbGxTdGF0ZSgpOwp0aGlzLl91cGRhdGVDaGVja2VkSW5kaWNlcygpOwp0aGlzLl91cGRhdGVDb21ib0JveFRleHQoKTsKfX07CmMuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl90b2dnbGVBbGxDaGVja2VkPWZ1bmN0aW9uKGQpe2lmKCF0aGlzLl9hbGxDaGVja2VkKXt0aGlzLl9hbGxDaGVja2VkPXRydWU7Cn1lbHNle3RoaXMuX2FsbENoZWNrZWQ9ZmFsc2U7Cn19OwpjLlJhZENvbWJvQm94LnByb3RvdHlwZS5fb25DaGVja0FsbEhvdmVyPWZ1bmN0aW9uKGQpe2lmKCF0aGlzLl9lbmFibGVkKXtyZXR1cm47Cn12YXIgZj10aGlzLmdldF9oaWdobGlnaHRlZEl0ZW0oKTsKaWYoZiE9bnVsbCl7Zi51bkhpZ2hsaWdodCgpOwp9dGhpcy5fY2hlY2tBbGxJdGVtc0VsZW1lbnRbMF0uY2xhc3NOYW1lPSJyY2JDaGVja0FsbEl0ZW1zSG92ZXJlZCI7Cn07CmMuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9vbkNoZWNrQWxsT3V0PWZ1bmN0aW9uKGQpe3RoaXMuX2NoZWNrQWxsSXRlbXNFbGVtZW50WzBdLmNsYXNzTmFtZT0icmNiQ2hlY2tBbGxJdGVtcyI7Cn07CmMuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9kZXRhY2hDaGVja0JveEV2ZW50cz1mdW5jdGlvbigpe2IodGhpcy5nZXRfY2hpbGRMaXN0RWxlbWVudCgpKS5vZmYoKTsKaWYodGhpcy5fZW5hYmxlQ2hlY2tBbGxJdGVtc0NoZWNrQm94KXt0aGlzLmdldF9jaGVja0FsbENoZWNrQm94RGl2RWxlbWVudCgpLnVuYmluZCgiY2xpY2siKS51bmJpbmQoIm1vdXNlb3ZlciIpLnVuYmluZCgibW91c2VvdXQiKTsKfX07CmMuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl91cGRhdGVDaGVja0FsbFN0YXRlPWZ1bmN0aW9uKCl7aWYodGhpcy5nZXRfY2hlY2tlZEl0ZW1zKCkubGVuZ3RoPT10aGlzLmdldF9pdGVtcygpLmdldF9jb3VudCgpJiZ0aGlzLmdldF9pdGVtcygpLmdldF9jb3VudCgpPjApe3RoaXMuZ2V0X2NoZWNrQWxsQ2hlY2tCb3goKS5hdHRyKCJjaGVja2VkIiwiY2hlY2tlZCIpOwp9ZWxzZXt0aGlzLmdldF9jaGVja0FsbENoZWNrQm94KCkucmVtb3ZlQXR0cigiY2hlY2tlZCIpOwp9fTsKYy5SYWRDb21ib0JveC5wcm90b3R5cGUuX2NoZWNrZWRJdGVtc1RleHRzRml0SW5wdXRXaWR0aD1mdW5jdGlvbihkKXt2YXIgZj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKZi5pZD0iY2hlY2tlZEl0ZW1UZXh0c0RpdiI7CmYuc3R5bGUucG9zaXRpb249ImFic29sdXRlIjsKZi5zdHlsZS5mb250PSIxMnB4IFNlZ29lIFVJLEFyaWFsLHNhbnMtc2VyaWYiOwpmLnN0eWxlLnRvcD0iLTEwMDBweCI7CmYuc3R5bGUubGVmdD0iLTEwMDBweCI7CmYuaW5uZXJIVE1MPSIiOwpmLmlubmVySFRNTD1kOwpkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGYpOwp2YXIgZT10cnVlOwppZihmLmNsaWVudFdpZHRoPnRoaXMuZ2V0X2lucHV0RG9tRWxlbWVudCgpLmNsaWVudFdpZHRoKXtlPWZhbHNlOwp9ZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChmKTsKcmV0dXJuIGU7Cn07CmMuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl91cGRhdGVDb21ib0JveFRleHQ9ZnVuY3Rpb24oKXtpZighdGhpcy5fY2hlY2tCb3hlcyl7cmV0dXJuOwp9dmFyIGg9IiI7CnZhciBqPXRoaXMuZ2V0X2l0ZW1zKCk7CnZhciBkPWouZ2V0X2NvdW50KCk7CnZhciBmPXRoaXMuZ2V0X2xvY2FsaXphdGlvbigpOwpmb3IoaT0wOwppPHRoaXMuZ2V0X2NoZWNrZWRJbmRpY2VzKCkubGVuZ3RoOwppKyspe3ZhciBnPXRoaXMuX2NoaWxkcmVuLmdldEl0ZW0odGhpcy5fY2hlY2tlZEluZGljZXNbaV0pOwpoKz1nLmdldF90ZXh0KCkrIiwgIjsKfXZhciBlPWgucmVwbGFjZSgvLCQvLCIiKTsKZT1lLnN1YnN0cmluZygwLGUubGVuZ3RoLTIpOwppZih0aGlzLl9jaGVja2VkSW5kaWNlcy5sZW5ndGg9PWQmJmQ+MCYmdGhpcy5fY2hlY2tlZEl0ZW1zVGV4dHM9PWMuUmFkQ29tYm9Cb3hDaGVja2VkSXRlbXNUZXh0cy5GaXRJbklucHV0KXt0aGlzLnNldF90ZXh0KGYuQWxsSXRlbXNDaGVja2VkU3RyaW5nKTsKfWVsc2V7aWYoIXRoaXMuX2NoZWNrZWRJdGVtc1RleHRzRml0SW5wdXRXaWR0aChlKSYmdGhpcy5fY2hlY2tlZEluZGljZXMubGVuZ3RoPjEmJnRoaXMuX2NoZWNrZWRJdGVtc1RleHRzPT1jLlJhZENvbWJvQm94Q2hlY2tlZEl0ZW1zVGV4dHMuRml0SW5JbnB1dCl7dGhpcy5fY2hlY2tlZEl0ZW1zVGV4dE92ZXJmbG93cz10cnVlOwp0aGlzLnNldF90ZXh0KHRoaXMuX2NoZWNrZWRJbmRpY2VzLmxlbmd0aCsiICIrZi5JdGVtc0NoZWNrZWRTdHJpbmcpOwp9ZWxzZXtpZihkPT0wfHx0aGlzLl9jaGVja2VkSW5kaWNlcy5sZW5ndGg9PTApe3RoaXMuc2V0X3RleHQoIiIpOwp9ZWxzZXt0aGlzLnNldF90ZXh0KGUpOwp9fX19OwpjLlJhZENvbWJvQm94LnByb3RvdHlwZS5fdXBkYXRlQ2hlY2tlZEluZGljZXM9ZnVuY3Rpb24oKXtpZih0aGlzLl9jaGVja0JveGVzKXt2YXIgZj10aGlzLmdldF9pdGVtcygpOwp0aGlzLl9jaGVja2VkSW5kaWNlcz1bXTsKZm9yKHZhciBnPTAsZT1mLmdldF9jb3VudCgpOwpnPGU7CmcrKyl7dmFyIGQ9dGhpcy5nZXRfaXRlbXMoKS5nZXRJdGVtKGcpOwppZihkIT1udWxsJiZkLmdldF9jaGVja2VkKCkpe3RoaXMuX2NoZWNrZWRJbmRpY2VzW3RoaXMuX2NoZWNrZWRJbmRpY2VzLmxlbmd0aF09ZC5nZXRfaW5kZXgoKTsKfX10aGlzLl91cGRhdGVDaGVja2VkSW5kaWNlc0pzb24oKTsKfX07CmMuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl91cGRhdGVDaGVja2VkSW5kaWNlc0pzb249ZnVuY3Rpb24oKXt0aGlzLl9jaGVja2VkSW5kaWNlc0pzb249YS5zZXJpYWxpemUodGhpcy5fY2hlY2tlZEluZGljZXMpOwp0aGlzLnVwZGF0ZUNsaWVudFN0YXRlKCk7Cn07CmMuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9yZWdpc3RlckNoZWNrZWRJbmRleD1mdW5jdGlvbihkKXtpZihBcnJheS5pbmRleE9mKHRoaXMuX2NoZWNrZWRJbmRpY2VzLGQpPT0tMSl7QXJyYXkuYWRkKHRoaXMuX2NoZWNrZWRJbmRpY2VzLGQpOwp0aGlzLl91cGRhdGVDaGVja2VkSW5kaWNlc0pzb24oKTsKfX07CmMuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl91bnJlZ2lzdGVyQ2hlY2tlZEluZGV4PWZ1bmN0aW9uKGQpe0FycmF5LnJlbW92ZSh0aGlzLl9jaGVja2VkSW5kaWNlcyxkKTsKdGhpcy5fdXBkYXRlQ2hlY2tlZEluZGljZXNKc29uKCk7Cn07Cn0pKCk7CihmdW5jdGlvbigpe3ZhciBhPSR0ZWxlcmlrLiQ7CnZhciBiPVRlbGVyaWsuV2ViLlVJOwpiLlJhZENvbWJvQm94LnByb3RvdHlwZS5nZXRfZHJvcERvd25FbGVtZW50PWZ1bmN0aW9uKCl7aWYoIXRoaXMuX2Ryb3BEb3duRWxlbWVudCl7dGhpcy5fZHJvcERvd25FbGVtZW50PXRoaXMuX2dldENoaWxkRWxlbWVudCgiRHJvcERvd24iKTsKfXJldHVybiB0aGlzLl9kcm9wRG93bkVsZW1lbnQ7Cn07CmIuUmFkQ29tYm9Cb3gucHJvdG90eXBlLmF0dGFjaERyb3BEb3duPWZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5nZXRfZHJvcERvd25FbGVtZW50KCkucGFyZW50Tm9kZTsKYy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGMpOwp0aGlzLmdldF90YWJsZUVsZW1lbnQoKS5wYXJlbnROb2RlLmFwcGVuZENoaWxkKGMpOwp9OwpiLlJhZENvbWJvQm94LnByb3RvdHlwZS5zaG93RHJvcERvd249ZnVuY3Rpb24oKXtpZih0aGlzLl9lbmFibGVkKXt0aGlzLl9zaG93RHJvcERvd24obnVsbCk7Cn19OwpiLlJhZENvbWJvQm94LnByb3RvdHlwZS5oaWRlRHJvcERvd249ZnVuY3Rpb24oKXt0aGlzLl9oaWRlRHJvcERvd24obnVsbCk7Cn07CmIuUmFkQ29tYm9Cb3gucHJvdG90eXBlLnRvZ2dsZURyb3BEb3duPWZ1bmN0aW9uKCl7aWYodGhpcy5fZW5hYmxlZCl7dGhpcy5fdG9nZ2xlRHJvcERvd24obnVsbCk7Cn19OwpiLlJhZENvbWJvQm94LnByb3RvdHlwZS5nZXRfY2hpbGRMaXN0RWxlbWVudD1mdW5jdGlvbigpe2lmKCF0aGlzLl9jaGlsZExpc3RFbGVtZW50KXtpZih0aGlzLmdldF9zaW1wbGVSZW5kZXJpbmcoKSl7dGhpcy5fY2hpbGRMaXN0RWxlbWVudD10aGlzLmdldF9zZWxlY3RFbGVtZW50KCk7Cn1pZighdGhpcy5fY2hpbGRMaXN0RWxlbWVudCl7dmFyIGM9dGhpcy5nZXRfY2hpbGRMaXN0RWxlbWVudFdyYXBwZXIoKTsKdGhpcy5fY2hpbGRMaXN0RWxlbWVudD0kdGVsZXJpay5nZXRGaXJzdENoaWxkQnlUYWdOYW1lKGMsInVsIiwwKTsKfX1yZXR1cm4gdGhpcy5fY2hpbGRMaXN0RWxlbWVudDsKfTsKYi5SYWRDb21ib0JveC5wcm90b3R5cGUuZ2V0X2NoaWxkTGlzdEVsZW1lbnRXcmFwcGVyPWZ1bmN0aW9uKCl7aWYoIXRoaXMuX2NoaWxkTGlzdEVsZW1lbnRXcmFwcGVyKXt2YXIgYz10aGlzLmdldF9kcm9wRG93bkVsZW1lbnQoKTsKdmFyIGQ9dGhpcy5fZ2V0SGVhZGVyRWxlbWVudCgpPzE6MDsKdGhpcy5fY2hpbGRMaXN0RWxlbWVudFdyYXBwZXI9JHRlbGVyaWsuZ2V0Rmlyc3RDaGlsZEJ5VGFnTmFtZShjLCJkaXYiLGQpOwp9cmV0dXJuIHRoaXMuX2NoaWxkTGlzdEVsZW1lbnRXcmFwcGVyOwp9OwpiLlJhZENvbWJvQm94LnByb3RvdHlwZS5faW5pdGlhbGl6ZURyb3BEb3duPWZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5nZXRfY2hpbGRMaXN0RWxlbWVudCgpOwppZihjKXt0aGlzLl9vbkRyb3BEb3duQ2xpY2tEZWxlZ2F0ZT1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX29uRHJvcERvd25DbGljayk7CiR0ZWxlcmlrLmFkZEhhbmRsZXIoYywiY2xpY2siLHRoaXMuX29uRHJvcERvd25DbGlja0RlbGVnYXRlKTsKdGhpcy5fb25Ecm9wRG93bkhvdmVyRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vbkRyb3BEb3duSG92ZXIpOwokdGVsZXJpay5hZGRIYW5kbGVyKGMsIm1vdXNlb3ZlciIsdGhpcy5fb25Ecm9wRG93bkhvdmVyRGVsZWdhdGUpOwp0aGlzLl9jYW5jZWxEZWxlZ2F0ZT1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLGIuUmFkQ29tYm9Cb3guX2NhbmNlbEV2ZW50KTsKJHRlbGVyaWsuYWRkSGFuZGxlcihjLCJzZWxlY3RzdGFydCIsdGhpcy5fY2FuY2VsRGVsZWdhdGUpOwokdGVsZXJpay5hZGRIYW5kbGVyKGMsImRyYWdzdGFydCIsdGhpcy5fY2FuY2VsRGVsZWdhdGUpOwp0aGlzLl9vbkRyb3BEb3duT3V0RGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vbkRyb3BEb3duT3V0KTsKJHRlbGVyaWsuYWRkSGFuZGxlcihjLCJtb3VzZW91dCIsdGhpcy5fb25Ecm9wRG93bk91dERlbGVnYXRlKTsKaWYoJHRlbGVyaWsuaXNJRTgmJiR0ZWxlcmlrLnN0YW5kYXJkc01vZGUpe2Muc3R5bGUucG9zaXRpb249ImFic29sdXRlIjsKYy5zdHlsZS53aWR0aD0iMTAwJSI7Cn19dGhpcy5fZHVtbXlIYW5kbGVyRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9kdW1teUhhbmRsZXIpOwphKHRoaXMuZ2V0X2NoaWxkTGlzdEVsZW1lbnRXcmFwcGVyKCkpLmNsaWNrKHRoaXMuX2R1bW15SGFuZGxlckRlbGVnYXRlKTsKfTsKYi5SYWRDb21ib0JveC5wcm90b3R5cGUuX29uRHJvcERvd25DbGljaz1mdW5jdGlvbihjKXtpZih0aGlzLl9jaGVja0JveGVzKXtpZihhKGMudGFyZ2V0KS5hdHRyKCJ0eXBlIikhPSJjaGVja2JveCIpe3JldHVybjsKfX1pZih0aGlzLl9ldmVudE1hcC5za2lwRWxlbWVudChjLG51bGwpKXtyZXR1cm47Cn1pZighdGhpcy5fZW5hYmxlZCl7cmV0dXJuOwp9dmFyIGQ9dGhpcy5fZmluZE5lYXJlc3RJdGVtKGMudGFyZ2V0KTsKaWYoIWR8fCFkLmdldF9lbmFibGVkKCl8fGQuZ2V0X2lzU2VwYXJhdG9yKCkpe3JldHVybjsKfXRyeXt0aGlzLmdldF9pbnB1dERvbUVsZW1lbnQoKS5mb2N1cygpOwp9Y2F0Y2goYyl7fXRoaXMuX3BlcmZvcm1TZWxlY3QoZCxjKTsKdGhpcy5faGlkZURyb3BEb3duKGMpOwppZighdGhpcy5nZXRfaXNUZW1wbGF0ZWQoKSYmdGhpcy5nZXRfZmlsdGVyKCkhPWIuUmFkQ29tYm9Cb3hGaWx0ZXIuTm9uZSYmYy5zdG9wUHJvcGFnYXRpb24pe2Muc3RvcFByb3BhZ2F0aW9uKCk7Cn19OwpiLlJhZENvbWJvQm94LnByb3RvdHlwZS5fb25Ecm9wRG93bkhvdmVyPWZ1bmN0aW9uKGMpe2lmKCF0aGlzLl9lbmFibGVkfHx0aGlzLl9hamF4UmVxdWVzdHx8dGhpcy5fY29sbGFwc2luZyl7cmV0dXJuOwp9dmFyIGQ9dGhpcy5fZmluZE5lYXJlc3RJdGVtKGMudGFyZ2V0KTsKaWYoIWR8fCFkLmdldF9lbmFibGVkKCl8fGQuZ2V0X2lzU2VwYXJhdG9yKCkpe3JldHVybjsKfWQuaGlnaGxpZ2h0KCk7Cn07CmIuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9vbkRyb3BEb3duT3V0PWZ1bmN0aW9uKGQpe2lmKCF0aGlzLl9lbmFibGVkKXtyZXR1cm47Cn1pZighZCl7ZD1ldmVudDsKfXZhciBmPXRoaXMuX2dldFJlbGF0ZWRUYXJnZXQoZCk7CmlmKCFmKXtyZXR1cm47Cn13aGlsZShmJiZmLm5vZGVUeXBlIT09OSl7aWYoZi5wYXJlbnROb2RlPT10aGlzLmdldF9kcm9wRG93bkVsZW1lbnQoKSl7cmV0dXJuOwp9Zj1mLnBhcmVudE5vZGU7Cn12YXIgYz10aGlzLmdldF9oaWdobGlnaHRlZEl0ZW0oKTsKaWYoYyl7Yy51bkhpZ2hsaWdodCgpOwp9fTsKYi5SYWRDb21ib0JveC5wcm90b3R5cGUuX2R1bW15SGFuZGxlcj1mdW5jdGlvbigpe307CmIuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9kZXRhY2hEcm9wRG93bkV2ZW50cz1mdW5jdGlvbigpe3ZhciBjPXRoaXMuZ2V0X2NoaWxkTGlzdEVsZW1lbnQoKTsKaWYoYyl7JHRlbGVyaWsucmVtb3ZlSGFuZGxlcihjLCJjbGljayIsdGhpcy5fb25Ecm9wRG93bkNsaWNrRGVsZWdhdGUpOwokdGVsZXJpay5yZW1vdmVIYW5kbGVyKGMsIm1vdXNlb3ZlciIsdGhpcy5fb25Ecm9wRG93bkhvdmVyRGVsZWdhdGUpOwokdGVsZXJpay5yZW1vdmVIYW5kbGVyKGMsIm1vdXNlb3V0Iix0aGlzLl9vbkRyb3BEb3duT3V0RGVsZWdhdGUpOwokdGVsZXJpay5yZW1vdmVIYW5kbGVyKGMsInNlbGVjdHN0YXJ0Iix0aGlzLl9jYW5jZWxEZWxlZ2F0ZSk7CiR0ZWxlcmlrLnJlbW92ZUhhbmRsZXIoYywiZHJhZ3N0YXJ0Iix0aGlzLl9jYW5jZWxEZWxlZ2F0ZSk7CnRoaXMuX29uRHJvcERvd25DbGlja0RlbGVnYXRlPW51bGw7CnRoaXMuX29uRHJvcERvd25Ib3ZlckRlbGVnYXRlPW51bGw7CnRoaXMuX29uRHJvcERvd25PdXREZWxlZ2F0ZT1udWxsOwp0aGlzLl9jYW5jZWxEZWxlZ2F0ZT1udWxsOwp9YSh0aGlzLmdldF9jaGlsZExpc3RFbGVtZW50V3JhcHBlcigpKS51bmJpbmQoImNsaWNrIix0aGlzLl9kdW1teUhhbmRsZXJEZWxlZ2F0ZSk7CnRoaXMuX2R1bW15SGFuZGxlckRlbGVnYXRlPW51bGw7Cn07CmIuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9hcHBseVpJbmRleD1mdW5jdGlvbigpe2lmKHRoaXMuZ2V0X3NpbXBsZVJlbmRlcmluZygpKXtyZXR1cm47Cn12YXIgYz10aGlzLmdldF9lbGVtZW50KCkuc3R5bGUuekluZGV4Owp2YXIgZD10aGlzLmdldF9kcm9wRG93bkVsZW1lbnQoKS5wYXJlbnROb2RlLnN0eWxlLnpJbmRleDsKaWYoYz09MCl7Yz1kOwp9dGhpcy5nZXRfZHJvcERvd25FbGVtZW50KCkucGFyZW50Tm9kZS5zdHlsZS56SW5kZXg9YzsKfTsKYi5SYWRDb21ib0JveC5wcm90b3R5cGUuX3Nob3dEcm9wRG93bj1mdW5jdGlvbihkKXt2YXIgZj10aGlzLmdldF9pdGVtcygpLmdldF9jb3VudCgpOwppZih0aGlzLl9maXJzdE9wZW5pbmdPZkRyb3BEb3duKXt0aGlzLl9hcHBseVpJbmRleCgpOwppZihiLlRvdWNoU2Nyb2xsRXh0ZW5kZXIuX2dldE5lZWRzU2Nyb2xsRXh0ZW5kZXIoKSYmIXRoaXMuX2Ryb3BEb3duVG91Y2hTY3JvbGwmJnRoaXMuZ2V0X2NoaWxkTGlzdEVsZW1lbnRXcmFwcGVyKCkpe3RoaXMuX2Ryb3BEb3duVG91Y2hTY3JvbGw9bmV3IFRlbGVyaWsuV2ViLlVJLlRvdWNoU2Nyb2xsRXh0ZW5kZXIodGhpcy5nZXRfY2hpbGRMaXN0RWxlbWVudFdyYXBwZXIoKSk7CnRoaXMuX2Ryb3BEb3duVG91Y2hTY3JvbGwuaW5pdGlhbGl6ZSgpOwp9dGhpcy5fZmlyc3RPcGVuaW5nT2ZEcm9wRG93bj1mYWxzZTsKfXRoaXMuX2hpZ2hsaWdodEZpcnN0TWF0Y2goKTsKaWYodGhpcy5yYWlzZV9kcm9wRG93bk9wZW5pbmcoZCk9PXRydWUpe3JldHVybjsKfXZhciBjPXRoaXMuX2dldEFuaW1hdGlvbkNvbnRhaW5lcigpOwppZighYyl7cmV0dXJuOwp9dmFyIGc9dGhpcy5nZXRfdGV4dCgpOwppZih0aGlzLmdldF9lbXB0eU1lc3NhZ2UoKT09dGhpcy5nZXRfdGV4dCgpKXtnPSIiOwp9aWYodGhpcy5nZXRfZW5hYmxlTG9hZE9uRGVtYW5kKCkmJmY9PTAmJiF0aGlzLl9za2lwTG9hZGluZ0l0ZW1zKXtpZih0aGlzLl9sb2RJc0F1dG9tYXRpYyl7Zz10aGlzLmdldExhc3RXb3JkKGcsdGhpcy5fZ2V0VHJpbVN0YXJ0aW5nU3BhY2VzKCkpOwp9aWYoZy5sZW5ndGg+PXRoaXMuX21pbkZpbHRlckxlbmd0aCl7dGhpcy5yZXF1ZXN0SXRlbXMoZyxmYWxzZSk7Cn19ZWxzZXtpZih0aGlzLmdldF9pc1VzaW5nT0RhdGFTb3VyY2UoKSYmZj09MCl7dGhpcy5yZXF1ZXN0SXRlbXMoIiIsdHJ1ZSk7Cn19dGhpcy5fc2tpcExvYWRpbmdJdGVtcz1mYWxzZTsKYy5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iOwp0aGlzLmdldF9kcm9wRG93bkVsZW1lbnQoKS5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iOwppZigod2luZG93Lm5ldHNjYXBlJiYhd2luZG93Lm9wZXJhKXx8KCR0ZWxlcmlrLmlzSUU4JiYkdGVsZXJpay5zdGFuZGFyZHNNb2RlKSl7dGhpcy5nZXRfY2hpbGRMaXN0RWxlbWVudFdyYXBwZXIoKS5zdHlsZS5vdmVyZmxvdz0iaGlkZGVuIjsKfXRoaXMuX3NsaWRlLnNob3coKTsKdGhpcy5fcmVzZXRBbmltYXRlZEVsZW1lbnRQb3NpdGlvbigpOwp0aGlzLl9zbGlkZS5zZXRfZGlyZWN0aW9uKHRoaXMuZ2V0X3NsaWRlRGlyZWN0aW9uKCkpOwp0cnl7dGhpcy5nZXRfaW5wdXREb21FbGVtZW50KCkuZm9jdXMoKTsKfWNhdGNoKGQpe310aGlzLl9vbkZvY3VzKGQpOwp0aGlzLnNldF9kcm9wRG93blZpc2libGUodHJ1ZSk7CnRoaXMuX3Bvc2l0aW9uRHJvcERvd24oKTsKaWYoJHRlbGVyaWsuaXNJRTgmJiR0ZWxlcmlrLnN0YW5kYXJkc01vZGUpe3RoaXMuZ2V0X2NoaWxkTGlzdEVsZW1lbnRXcmFwcGVyKCkuc3R5bGUub3ZlcmZsb3c9ImF1dG8iOwp9dmFyIGg9dGhpcy5nZXRfZHJvcERvd25FbGVtZW50KCk7Cmguc3R5bGUudG9wPS1oLm9mZnNldEhlaWdodCsicHgiOwp0aGlzLl9za2lwRHJvcERvd25Qb3NpdGlvbmluZz10cnVlOwp0aGlzLl9zbGlkZS51cGRhdGVTaXplKCk7CnRoaXMuX3NraXBEcm9wRG93blBvc2l0aW9uaW5nPW51bGw7CmMuc3R5bGUudmlzaWJpbGl0eT0idmlzaWJsZSI7CnRoaXMuX3NsaWRlLmV4cGFuZCgpOwp0aGlzLnJhaXNlX2Ryb3BEb3duT3BlbmVkKGQpOwp9OwpiLlJhZENvbWJvQm94LnByb3RvdHlwZS5faGlkZURyb3BEb3duPWZ1bmN0aW9uKGMpe2lmKCF0aGlzLmdldF9kcm9wRG93blZpc2libGUoKSl7cmV0dXJuOwp9aWYodGhpcy5yYWlzZV9kcm9wRG93bkNsb3NpbmcoYyk9PXRydWUpe3JldHVybjsKfXRoaXMuX2NvbGxhcHNpbmc9dHJ1ZTsKdGhpcy5nZXRfZHJvcERvd25FbGVtZW50KCkuc3R5bGUuZGlzcGxheT0ibm9uZSI7CmlmKCF0aGlzLl9nZXRBbmltYXRpb25Db250YWluZXIoKSl7cmV0dXJuOwp9aWYod2luZG93Lm5ldHNjYXBlJiYhd2luZG93Lm9wZXJhKXt0aGlzLmdldF9jaGlsZExpc3RFbGVtZW50V3JhcHBlcigpLnNjcm9sbFRvcD0wOwp9dGhpcy5fc2xpZGUuY29sbGFwc2UoKTsKdGhpcy5zZXRfZHJvcERvd25WaXNpYmxlKGZhbHNlKTsKaWYodGhpcy5nZXRfZmlsdGVyKCkhPWIuUmFkQ29tYm9Cb3hGaWx0ZXIuTm9uZSl7dGhpcy5fcmVtb3ZlRW1UYWdzRnJvbUFsbEl0ZW1zKCk7Cn10aGlzLnJhaXNlX2Ryb3BEb3duQ2xvc2VkKGMpOwp9OwpiLlJhZENvbWJvQm94LnByb3RvdHlwZS5fdG9nZ2xlRHJvcERvd249ZnVuY3Rpb24oYyl7aWYodGhpcy5nZXRfZHJvcERvd25WaXNpYmxlKCkpe3RoaXMuX2hpZGVEcm9wRG93bihjKTsKfWVsc2V7dGhpcy5fc2hvd0Ryb3BEb3duKGMpOwp9fTsKYi5SYWRDb21ib0JveC5wcm90b3R5cGUuX2RldGFjaERyb3BEb3duPWZ1bmN0aW9uKCl7dmFyIGY9JHRlbGVyaWsuaXNJRT9kb2N1bWVudC5yZWFkeVN0YXRlPT0iY29tcGxldGUifHxkb2N1bWVudC5yZWFkeVN0YXRlPT0iaW50ZXJhY3RpdmUiOnRydWU7CmlmKGYmJighdGhpcy5faXNEZXRhY2hlZCkpe3ZhciBjPXRoaXMuX2ZpbmRQYXJlbnRGb3JtKCl8fGRvY3VtZW50LmJvZHk7CnZhciBkPXRoaXMuZ2V0X2Ryb3BEb3duRWxlbWVudCgpOwp2YXIgZT10aGlzLmdldF9kcm9wRG93bkVsZW1lbnQoKS5wYXJlbnROb2RlOwplLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZSk7CmUuc3R5bGUubWFyZ2luTGVmdD0iMCI7CmMuaW5zZXJ0QmVmb3JlKGUsYy5maXJzdENoaWxkKTsKdGhpcy5faXNEZXRhY2hlZD10cnVlOwp9fTsKYi5SYWRDb21ib0JveC5wcm90b3R5cGUuX2ZpbmRQYXJlbnRGb3JtPWZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5nZXRfZWxlbWVudCgpOwp3aGlsZShjJiZjLnRhZ05hbWUmJmMudGFnTmFtZS50b0xvd2VyQ2FzZSgpIT0iZm9ybSIpe2M9Yy5wYXJlbnROb2RlOwp9aWYoIWMudGFnTmFtZSl7Yz1udWxsOwp9cmV0dXJuIGM7Cn07CmIuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9wb3NpdGlvbkRyb3BEb3duPWZ1bmN0aW9uKCl7aWYodGhpcy5fc2tpcERyb3BEb3duUG9zaXRpb25pbmcpe3JldHVybjsKfXRoaXMuX2RldGFjaERyb3BEb3duKCk7CnZhciBrPXRoaXMuZ2V0X2VsZW1lbnQoKTsKdmFyIG89dGhpcy5fZ2V0QW5pbWF0aW9uQ29udGFpbmVyKCk7Cm8uc3R5bGUucG9zaXRpb249ImFic29sdXRlIjsKdmFyIGw9dGhpcy5nZXRfdGFibGVFbGVtZW50KCk7CnZhciBuPWEobCkub2Zmc2V0KCk7CnZhciBwPXRoaXMuZ2V0X2Ryb3BEb3duRWxlbWVudCgpOwp2YXIgZj1sLm9mZnNldFdpZHRoOwppZih0aGlzLl9kcm9wRG93bldpZHRoKXtmPXRoaXMuX2Ryb3BEb3duV2lkdGg7CmYtPSR0ZWxlcmlrLmdldEJvcmRlckJveChwKS5ob3Jpem9udGFsOwp9cC5zdHlsZS5kaXNwbGF5PSJibG9jayI7CnAuc3R5bGUud2lkdGg9ZisicHgiOwppZighdGhpcy5fZHJvcERvd25XaWR0aCl7dmFyIGo9cC5vZmZzZXRXaWR0aC1mOwppZihqPjAmJmo8Zil7cC5zdHlsZS53aWR0aD1mLWorInB4IjsKfX12YXIgcj1wLm9mZnNldEhlaWdodDsKaWYodGhpcy5nZXRfaXRlbXMoKS5nZXRfY291bnQoKT09MCl7dmFyIGM9bmV3IGIuUmFkQ29tYm9Cb3hJdGVtKCk7CmMuc2V0X3RleHQoIm1lYXN1cmluZyBpdGVtIik7CnRoaXMuZ2V0X2l0ZW1zKCkuYWRkKGMpOwp9aWYodGhpcy5faGVpZ2h0PT0iIiYmdGhpcy5nZXRfY2hpbGRMaXN0RWxlbWVudCgpKXtpZih0aGlzLl9tYXhIZWlnaHQ9PSIifHx0aGlzLl9jYWxjdWxhdGVJdGVtc0hlaWdodCgpPHRoaXMuX21heEhlaWdodCl7dGhpcy5fY2FjaGVkT2Zmc2V0SGVpZ2h0PXI7CnI9dGhpcy5fY2FsY3VsYXRlRHJvcERvd25IZWlnaHQoKTsKfWVsc2V7aWYodGhpcy5fbWF4SGVpZ2h0IT0iIil7aWYodGhpcy5fY2FjaGVkT2Zmc2V0SGVpZ2h0IT0iIil7cj10aGlzLl9jYWNoZWRPZmZzZXRIZWlnaHQ7Cn1wLnN0eWxlLmhlaWdodD0iIjsKdGhpcy5nZXRfY2hpbGRMaXN0RWxlbWVudFdyYXBwZXIoKS5zdHlsZS5oZWlnaHQ9dGhpcy5fbWF4SGVpZ2h0KyJweCI7Cn19fWlmKGMpe3RoaXMuZ2V0X2l0ZW1zKCkucmVtb3ZlKGMpOwp9dmFyIHE9dGhpcy5fZ2V0T2Zmc2V0UGFyZW50T2Zmc2V0KG8pOwp2YXIgaT1uLnRvcCt0aGlzLmdldF9vZmZzZXRZKCkrbC5vZmZzZXRIZWlnaHQtcS50b3A7CnZhciBlPW4ubGVmdCt0aGlzLmdldF9vZmZzZXRYKCktcS5sZWZ0OwppZih0aGlzLl9kcm9wRG93bldpZHRoJiZ0aGlzLl9yaWdodFRvTGVmdCl7ZT1uLmxlZnQrbC5vZmZzZXRXaWR0aC1wLm9mZnNldFdpZHRoOwp9dmFyIGw9dGhpcy5nZXRfdGFibGVFbGVtZW50KCk7CnZhciBuPWEobCkub2Zmc2V0KCk7CnZhciBvPXRoaXMuX2dldEFuaW1hdGlvbkNvbnRhaW5lcigpOwp2YXIgZz0kdGVsZXJpay5nZXRWaWV3UG9ydFNpemUoKTsKdmFyIGs9dGhpcy5nZXRfZWxlbWVudCgpOwp0aGlzLnNldF9zbGlkZURpcmVjdGlvbihiLmpTbGlkZURpcmVjdGlvbi5Eb3duKTsKdmFyIGQ9ZmFsc2U7CmlmKHRoaXMuX2VuYWJsZVNjcmVlbkJvdW5kYXJ5RGV0ZWN0aW9uKXtpZih0aGlzLmdldF9leHBhbmREaXJlY3Rpb24oKT09Yi5SYWRDb21ib0JveEV4cGFuZERpcmVjdGlvbi5Eb3duJiZ0aGlzLl9lbGVtZW50T3ZlcmZsb3dzQm90dG9tKGcscCxrKSl7dmFyIG09Yi5SYWRDb21ib0JveC5fZ2V0TG9jYXRpb24oayk7CnZhciBoPW0ueS1yOwppZihoPj0wKXtkPXRydWU7Cn19ZWxzZXtpZih0aGlzLmdldF9leHBhbmREaXJlY3Rpb24oKT09Yi5SYWRDb21ib0JveEV4cGFuZERpcmVjdGlvbi5VcCYmIXRoaXMuX2VsZW1lbnRPdmVyZmxvd3NUb3AocCxrKSl7ZD10cnVlOwp9fWlmKCF0aGlzLl9yaWdodFRvTGVmdCYmdGhpcy5fZWxlbWVudE92ZXJmbG93c1JpZ2h0U2NyZWVuQm9yZGVyKGcscCxsKSl7ZT1uLmxlZnQrbC5vZmZzZXRXaWR0aC1xLmxlZnQtcC5vZmZzZXRXaWR0aDsKfX1lbHNle2lmKHRoaXMuZ2V0X2V4cGFuZERpcmVjdGlvbigpPT1iLlJhZENvbWJvQm94RXhwYW5kRGlyZWN0aW9uLlVwKXtkPXRydWU7Cn19aWYoZCl7dGhpcy5zZXRfc2xpZGVEaXJlY3Rpb24oYi5qU2xpZGVEaXJlY3Rpb24uVXApOwppPW4udG9wLXRoaXMuZ2V0X29mZnNldFkoKS1xLnRvcC1wLm9mZnNldEhlaWdodDsKby5zdHlsZS5oZWlnaHQ9cC5vZmZzZXRIZWlnaHQ7Cn1pZigkdGVsZXJpay5pc01vYmlsZVNhZmFyaSl7aWYoIWRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wKXtpLT13aW5kb3cucGFnZVlPZmZzZXQ7Cn1pZighZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0KXtlLT13aW5kb3cucGFnZVhPZmZzZXQ7Cn19by5zdHlsZS50b3A9aSsicHgiOwpvLnN0eWxlLmxlZnQ9ZSsicHgiOwppZih0aGlzLl9yaWdodFRvTGVmdCl7cC5kaXI9InJ0bCI7Cn10aGlzLnNldF9kcm9wRG93blZpc2libGUodHJ1ZSk7Cn07CmIuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9jYWxjdWxhdGVEcm9wRG93bkhlaWdodD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0X3RhYmxlRWxlbWVudCgpOwp2YXIgbD1hKGUpLm9mZnNldCgpOwp2YXIgZj10aGlzLl9nZXRBbmltYXRpb25Db250YWluZXIoKTsKdmFyIGQ9dGhpcy5fZ2V0T2Zmc2V0UGFyZW50T2Zmc2V0KGYpOwp2YXIgZz0kdGVsZXJpay5nZXRWaWV3UG9ydFNpemUoKTsKdmFyIGs9bC50b3ArdGhpcy5nZXRfb2Zmc2V0WSgpK2Uub2Zmc2V0SGVpZ2h0LWQudG9wOwp2YXIgYz1nLmhlaWdodC1rOwp2YXIgbT1sLnRvcC10aGlzLmdldF9lbGVtZW50KCkub2Zmc2V0SGVpZ2h0Owp2YXIgaj1jOwppZih0aGlzLl9lbmFibGVTY3JlZW5Cb3VuZGFyeURldGVjdGlvbiYmYzxtKXtqPW07Cn12YXIgaT10aGlzLmdldF9jaGlsZExpc3RFbGVtZW50KCkub2Zmc2V0SGVpZ2h0OwppZih0aGlzLl9oZWlnaHQ9PSIiJiZ0aGlzLl9tYXhIZWlnaHQhPSIiJiZpPnRoaXMuX21heEhlaWdodCl7aT10aGlzLl9tYXhIZWlnaHQ7Cn12YXIgaD10aGlzLl9nZXRBZGRpdGlvbmFsRWxlbWVudHNIZWlnaHQoKTsKaWYoIShqPj0wJiYoaStoKT49aikpe2o9aStoOwp9aWYoaCYmaDxqKXtqLT1oOwp9aWYodGhpcy5fY2hlY2tCb3hlcyYmdGhpcy5fZW5hYmxlQ2hlY2tBbGxJdGVtc0NoZWNrQm94KXtqKz10aGlzLmdldF9jaGVja0FsbENoZWNrQm94RGl2RWxlbWVudCgpWzBdLm9mZnNldEhlaWdodDsKfXRoaXMuZ2V0X2NoaWxkTGlzdEVsZW1lbnRXcmFwcGVyKCkuc3R5bGUuaGVpZ2h0PWorInB4IjsKcmV0dXJuIGo7Cn07CmIuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9nZXRBZGRpdGlvbmFsRWxlbWVudHNIZWlnaHQ9ZnVuY3Rpb24oKXt2YXIgYz0wOwppZih0aGlzLl9nZXRIZWFkZXJFbGVtZW50KCkpe2MrPXRoaXMuX2dldEhlYWRlckVsZW1lbnQoKS5vZmZzZXRIZWlnaHQ7Cn1pZih0aGlzLl9nZXRGb290ZXJFbGVtZW50KCkpe2MrPXRoaXMuX2dldEZvb3RlckVsZW1lbnQoKS5vZmZzZXRIZWlnaHQ7Cn1pZih0aGlzLmdldF9tb3JlUmVzdWx0c0JveEVsZW1lbnQoKSl7Yys9dGhpcy5nZXRfbW9yZVJlc3VsdHNCb3hFbGVtZW50KCkub2Zmc2V0SGVpZ2h0Owp9cmV0dXJuIGM7Cn07CmIuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9jYWxjdWxhdGVJdGVtc0hlaWdodD1mdW5jdGlvbigpe3ZhciBlPTA7CnZhciBjPXRoaXMuZ2V0X2l0ZW1zKCkuZ2V0X2NvdW50KCk7CmZvcih2YXIgZD0wOwpkPGM7CmQrKyl7ZSs9dGhpcy5nZXRfaXRlbXMoKS5nZXRJdGVtKGQpLmdldF9lbGVtZW50KCkub2Zmc2V0SGVpZ2h0Owp9cmV0dXJuIGU7Cn07CmIuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9nZXRPZmZzZXRQYXJlbnRPZmZzZXQ9ZnVuY3Rpb24oZil7dmFyIGQ9MDsKdmFyIGU9MDsKdmFyIGg9YShmLm9mZnNldFBhcmVudCk7CmlmKGguY3NzKCJwb3NpdGlvbiIpIT0ic3RhdGljIil7dmFyIGc9aC5vZmZzZXQoKTsKZD1nLnRvcDsKZT1nLmxlZnQ7CmlmKGYub2Zmc2V0UGFyZW50PT1kb2N1bWVudC5ib2R5KXt2YXIgaj1wYXJzZUludChoLmNzcygidG9wIiksMTApOwppZighaXNOYU4oaikpe2QrPWo7Cn12YXIgaT1wYXJzZUludChoLmNzcygibGVmdCIpLDEwKTsKaWYoIWlzTmFOKGkpKXtlKz1pOwp9fX12YXIgYz17dG9wOmQsbGVmdDplfTsKcmV0dXJuIGM7Cn07CmIuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9lbGVtZW50T3ZlcmZsb3dzQm90dG9tPWZ1bmN0aW9uKGQsYyxmKXt2YXIgZT0kdGVsZXJpay5nZXRMb2NhdGlvbihmKS55K2Yub2Zmc2V0SGVpZ2h0K2Mub2Zmc2V0SGVpZ2h0OwpyZXR1cm4gZT5kLmhlaWdodDsKfTsKYi5SYWRDb21ib0JveC5wcm90b3R5cGUuX2VsZW1lbnRPdmVyZmxvd3NUb3A9ZnVuY3Rpb24oYyxnKXt2YXIgZT1hKHdpbmRvdykuc2Nyb2xsVG9wKCk7CnZhciBkPWcub2Zmc2V0VG9wLWU7CnZhciBmPWQtYy5vZmZzZXRIZWlnaHQ7CnJldHVybiBmPD0wOwp9OwpiLlJhZENvbWJvQm94LnByb3RvdHlwZS5fZWxlbWVudE92ZXJmbG93c1JpZ2h0U2NyZWVuQm9yZGVyPWZ1bmN0aW9uKGQsYyxmKXt2YXIgZT0kdGVsZXJpay5nZXRMb2NhdGlvbihmKS54K2Mub2Zmc2V0V2lkdGg7CnJldHVybiBlPmQud2lkdGg7Cn07CmIuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9yZW1vdmVEcm9wRG93bj1mdW5jdGlvbigpe3ZhciBjPXRoaXMuZ2V0X2Ryb3BEb3duRWxlbWVudCgpLnBhcmVudE5vZGU7CmMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjKTsKaWYodGhpcy5fZGlzcG9zZUNoaWxkRWxlbWVudHMpeyR0ZWxlcmlrLmRpc3Bvc2VFbGVtZW50KGMpOwp9aWYoISR0ZWxlcmlrLmlzU2FmYXJpJiYhJHRlbGVyaWsuaXNJRTEwTW9kZSl7Yy5vdXRlckhUTUw9bnVsbDsKfWlmKGIuVG91Y2hTY3JvbGxFeHRlbmRlci5fZ2V0TmVlZHNTY3JvbGxFeHRlbmRlcigpJiZ0aGlzLl9kcm9wRG93blRvdWNoU2Nyb2xsJiZ0aGlzLmdldF9jaGlsZExpc3RFbGVtZW50V3JhcHBlcigpKXt0aGlzLl9kcm9wRG93blRvdWNoU2Nyb2xsLmRpc3Bvc2UoKTsKfXRoaXMuX2Ryb3BEb3duRWxlbWVudD1udWxsOwp9Owp9KSgpOwooZnVuY3Rpb24oYSl7dmFyIGI9VGVsZXJpay5XZWIuVUk7CmIuUmFkQ29tYm9Cb3gucHJvdG90eXBlLmdldF9leHBhbmRBbmltYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXhwYW5kQW5pbWF0aW9uOwp9OwpiLlJhZENvbWJvQm94LnByb3RvdHlwZS5zZXRfZXhwYW5kQW5pbWF0aW9uPWZ1bmN0aW9uKGQpe3ZhciBjPVN5cy5TZXJpYWxpemF0aW9uLkphdmFTY3JpcHRTZXJpYWxpemVyLmRlc2VyaWFsaXplKGQpOwp0aGlzLl9leHBhbmRBbmltYXRpb249bmV3IGIuQW5pbWF0aW9uU2V0dGluZ3MoYyk7Cn07CmIuUmFkQ29tYm9Cb3gucHJvdG90eXBlLmdldF9jb2xsYXBzZUFuaW1hdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb2xsYXBzZUFuaW1hdGlvbjsKfTsKYi5SYWRDb21ib0JveC5wcm90b3R5cGUuc2V0X2NvbGxhcHNlQW5pbWF0aW9uPWZ1bmN0aW9uKGQpe3ZhciBjPVN5cy5TZXJpYWxpemF0aW9uLkphdmFTY3JpcHRTZXJpYWxpemVyLmRlc2VyaWFsaXplKGQpOwp0aGlzLl9jb2xsYXBzZUFuaW1hdGlvbj1uZXcgYi5BbmltYXRpb25TZXR0aW5ncyhjKTsKfTsKYi5SYWRDb21ib0JveC5wcm90b3R5cGUuZ2V0X3NsaWRlRGlyZWN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NsaWRlRGlyZWN0aW9uOwp9OwpiLlJhZENvbWJvQm94LnByb3RvdHlwZS5zZXRfc2xpZGVEaXJlY3Rpb249ZnVuY3Rpb24oYyl7dGhpcy5fc2xpZGVEaXJlY3Rpb249YzsKdGhpcy5fc2xpZGUuc2V0X2RpcmVjdGlvbihjKTsKfTsKYi5SYWRDb21ib0JveC5wcm90b3R5cGUuX2luaXRpYWxpemVBbmltYXRpb249ZnVuY3Rpb24oKXt2YXIgYz10aGlzLl9nZXRBbmltYXRlZEVsZW1lbnQoKTsKaWYoYyl7dGhpcy5fc2xpZGU9bmV3IGIualNsaWRlKGMsdGhpcy5nZXRfZXhwYW5kQW5pbWF0aW9uKCksdGhpcy5nZXRfY29sbGFwc2VBbmltYXRpb24oKSx0aGlzLl9lbmFibGVPdmVybGF5KTsKdGhpcy5fc2xpZGUuaW5pdGlhbGl6ZSgpOwp0aGlzLl9zbGlkZS5zZXRfZGlyZWN0aW9uKHRoaXMuZ2V0X3NsaWRlRGlyZWN0aW9uKCkpOwp9dGhpcy5fYW5pbWF0aW9uRW5kZWREZWxlZ2F0ZT1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX29uQW5pbWF0aW9uRW5kZWQpOwp0aGlzLl9zbGlkZS5hZGRfZXhwYW5kQW5pbWF0aW9uRW5kZWQodGhpcy5fYW5pbWF0aW9uRW5kZWREZWxlZ2F0ZSk7CnRoaXMuX3NsaWRlLmFkZF9jb2xsYXBzZUFuaW1hdGlvbkVuZGVkKHRoaXMuX2FuaW1hdGlvbkVuZGVkRGVsZWdhdGUpOwp0aGlzLl9hbmltYXRpb25TdGFydGVkRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vbkFuaW1hdGlvblN0YXJ0ZWQpOwp0aGlzLl9zbGlkZS5hZGRfZXhwYW5kQW5pbWF0aW9uU3RhcnRlZCh0aGlzLl9hbmltYXRpb25TdGFydGVkRGVsZWdhdGUpOwp0aGlzLl9zbGlkZS5hZGRfY29sbGFwc2VBbmltYXRpb25TdGFydGVkKHRoaXMuX2FuaW1hdGlvblN0YXJ0ZWREZWxlZ2F0ZSk7Cn07CmIuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9nZXRBbmltYXRlZEVsZW1lbnQ9ZnVuY3Rpb24oKXtpZighdGhpcy5fYW5pbWF0ZWRFbGVtZW50KXt0aGlzLl9hbmltYXRlZEVsZW1lbnQ9dGhpcy5nZXRfZHJvcERvd25FbGVtZW50KCk7Cn1yZXR1cm4gdGhpcy5fYW5pbWF0ZWRFbGVtZW50Owp9OwpiLlJhZENvbWJvQm94LnByb3RvdHlwZS5fZ2V0QW5pbWF0aW9uQ29udGFpbmVyPWZ1bmN0aW9uKCl7aWYoIXRoaXMuX2FuaW1hdGlvbkNvbnRhaW5lcil7aWYodGhpcy5nZXRfZHJvcERvd25FbGVtZW50KCkpe3RoaXMuX2FuaW1hdGlvbkNvbnRhaW5lcj10aGlzLmdldF9kcm9wRG93bkVsZW1lbnQoKS5wYXJlbnROb2RlOwp9fXJldHVybiB0aGlzLl9hbmltYXRpb25Db250YWluZXI7Cn07CmIuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9yZXNldEFuaW1hdGVkRWxlbWVudFBvc2l0aW9uPWZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5fZ2V0QW5pbWF0ZWRFbGVtZW50KCk7CmMuc3R5bGUudG9wPSIwcHgiOwpjLnN0eWxlLmxlZnQ9IjBweCI7Cn07CmIuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9vbkFuaW1hdGlvbkVuZGVkPWZ1bmN0aW9uKGMsZCl7dGhpcy5fY29sbGFwc2luZz1mYWxzZTsKaWYod2luZG93Lm5ldHNjYXBlJiYhd2luZG93Lm9wZXJhKXt0aGlzLmdldF9jaGlsZExpc3RFbGVtZW50V3JhcHBlcigpLnN0eWxlLm92ZXJmbG93PSJhdXRvIjsKfWlmKCR0ZWxlcmlrLmlzQ2hyb21lKXthKHRoaXMuZ2V0X2Ryb3BEb3duRWxlbWVudCgpKS5jc3MoIi13ZWJraXQtdHJhbnNmb3JtIiwidHJhbnNsYXRleigwKSIpLmNzcygiLXdlYmtpdC10cmFuc2Zvcm0iLCIiKTsKfX07CmIuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9vbkFuaW1hdGlvblN0YXJ0ZWQ9ZnVuY3Rpb24oYyxkKXtpZih3aW5kb3cubmV0c2NhcGUmJiF3aW5kb3cub3BlcmEpe3RoaXMuZ2V0X2NoaWxkTGlzdEVsZW1lbnRXcmFwcGVyKCkuc3R5bGUub3ZlcmZsb3c9ImhpZGRlbiI7Cn1pZih0aGlzLmdldF9kcm9wRG93blZpc2libGUoKSl7dmFyIGY9dGhpcy5nZXRfaGlnaGxpZ2h0ZWRJdGVtKCk7CmlmKGYpe2Yuc2Nyb2xsT25Ub3AoKTsKfX19OwpiLlJhZENvbWJvQm94LnByb3RvdHlwZS5fZGlzcG9zZUFuaW1hdGlvbj1mdW5jdGlvbigpe2lmKHRoaXMuX2FuaW1hdGlvbkVuZGVkRGVsZWdhdGUpe2lmKHRoaXMuX3NsaWRlKXt0aGlzLl9zbGlkZS5yZW1vdmVfZXhwYW5kQW5pbWF0aW9uRW5kZWQodGhpcy5fYW5pbWF0aW9uRW5kZWREZWxlZ2F0ZSk7CnRoaXMuX3NsaWRlLnJlbW92ZV9jb2xsYXBzZUFuaW1hdGlvbkVuZGVkKHRoaXMuX2FuaW1hdGlvbkVuZGVkRGVsZWdhdGUpOwp9dGhpcy5fYW5pbWF0aW9uRW5kZWREZWxlZ2F0ZT1udWxsOwp9aWYodGhpcy5fYW5pbWF0aW9uU3RhcnRlZERlbGVnYXRlKXtpZih0aGlzLl9zbGlkZSl7dGhpcy5fc2xpZGUucmVtb3ZlX2V4cGFuZEFuaW1hdGlvblN0YXJ0ZWQodGhpcy5fYW5pbWF0aW9uU3RhcnRlZERlbGVnYXRlKTsKdGhpcy5fc2xpZGUucmVtb3ZlX2NvbGxhcHNlQW5pbWF0aW9uU3RhcnRlZCh0aGlzLl9hbmltYXRpb25TdGFydGVkRGVsZWdhdGUpOwp9dGhpcy5fYW5pbWF0aW9uU3RhcnRlZERlbGVnYXRlPW51bGw7Cn1pZih0aGlzLl9zbGlkZSl7dGhpcy5fc2xpZGUuZGlzcG9zZSgpOwp0aGlzLl9zbGlkZT1udWxsOwp9fTsKfSkoJHRlbGVyaWsuJCk7CihmdW5jdGlvbigpe3ZhciBhPSR0ZWxlcmlrLiQ7CnZhciBiPVRlbGVyaWsuV2ViLlVJOwpiLlJhZENvbWJvQm94LnByb3RvdHlwZS5fY3JlYXRlRmFrZUlucHV0PWZ1bmN0aW9uKCl7dmFyIGM9YSgiPGlucHV0IGNsYXNzPSdyY2JGYWtlSW5wdXQnIHRhYmluZGV4PSctMScgLz4iKS5jc3Moe2JvcmRlcjowLHBhZGRpbmc6MCxtYXJnaW46MCxwb3NpdGlvbjoiYWJzb2x1dGUiLHpJbmRleDoxLGJhY2tncm91bmRDb2xvcjoidHJhbnNwYXJlbnQifSlbMF07CnJldHVybiBjOwp9OwpiLlJhZENvbWJvQm94LnByb3RvdHlwZS5fZGVwbG95RmFrZUlucHV0PWZ1bmN0aW9uKCl7aWYodGhpcy5nZXRfZWxlbWVudCgpLmN1cnJlbnRTdHlsZS5wb3NpdGlvbj09InN0YXRpYyIpe3RoaXMuZ2V0X2VsZW1lbnQoKS5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiOwp9dGhpcy5fZmFrZUlucHV0PXRoaXMuX2NyZWF0ZUZha2VJbnB1dCgpOwp2YXIgYz10aGlzLmdldF9pbnB1dERvbUVsZW1lbnQoKTsKYSh0aGlzLl9mYWtlSW5wdXQpLmFwcGVuZFRvKGMucGFyZW50Tm9kZSk7Cn07CmIuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9yZXBhaW50RmFrZUlucHV0PWZ1bmN0aW9uKCl7dmFyIGc9dGhpcy5nZXRfZWxlbWVudCgpOwp2YXIgbT0wOwp2YXIgbj0wOwp2YXIgZT0wOwp2YXIgZD0wOwppZihnLnN0eWxlLndpZHRoLmluZGV4T2YoIiUiKT09LTEpe3ZhciBoPXRoaXMuZ2V0X2lucHV0RG9tRWxlbWVudCgpOwp2YXIgaz1hKGgpLnBvc2l0aW9uKCk7CmlmKGgub2Zmc2V0V2lkdGg+MCl7bj1oLm9mZnNldEhlaWdodDsKZT1rLnRvcDsKZD1rLmxlZnQ7Cm09aC5vZmZzZXRXaWR0aDsKfWVsc2V7dmFyIGY9Zy5jbG9uZU5vZGUoZmFsc2UpOwpmLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSI7CmYuc3R5bGUudG9wPSItMTAwMHB4IjsKZi5zdHlsZS5sZWZ0PSItMTAwMHB4IjsKdmFyIGo9Zy5jbG9uZU5vZGUodHJ1ZSkuY2hpbGROb2RlczsKZm9yKHZhciBsPTA7Cmw8ai5sZW5ndGg7CmwrKyl7aWYoaltsXS50YWdOYW1lKXtpZihqW2xdLnRhZ05hbWUudG9VcHBlckNhc2UoKT09IkxBQkVMIil7Zi5hcHBlbmRDaGlsZChqW2xdKTsKfWlmKGpbbF0udGFnTmFtZS50b1VwcGVyQ2FzZSgpPT0iVEFCTEUiKXtmLmFwcGVuZENoaWxkKGpbbF0pOwp9fX1kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGYpOwp2YXIgYz1hKGYpLmZpbmQoIi5yY2JJbnB1dCIpLmdldCgwKTsKdmFyIG89YShmKS5maW5kKCJsYWJlbCIpLmdldCgwKTsKbT1jLm9mZnNldFdpZHRoOwpuPWMub2Zmc2V0SGVpZ2h0OwplPWMub2Zmc2V0VG9wOwppZihvKXtkPWMub2Zmc2V0TGVmdCtvLm9mZnNldFdpZHRoOwp9ZWxzZXtkPWMub2Zmc2V0TGVmdDsKfWRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZik7Cn19YSh0aGlzLl9mYWtlSW5wdXQpLmNzcyh7d2lkdGg6bSxoZWlnaHQ6bix0b3A6ZSxsZWZ0OmR9KTsKfTsKfSkoKTsKKGZ1bmN0aW9uKCl7dmFyIGE9VGVsZXJpay5XZWIuVUk7CmEuUmFkQ29tYm9Cb3gucHJvdG90eXBlLmhpZ2hsaWdodEFsbE1hdGNoZXM9ZnVuY3Rpb24oZCl7aWYodGhpcy5nZXRfZmlsdGVyKCk9PWEuUmFkQ29tYm9Cb3hGaWx0ZXIuTm9uZSl7cmV0dXJuOwp9aWYodGhpcy5nZXRfaGlnaGxpZ2h0ZWRJdGVtKCkpe3RoaXMuZ2V0X2hpZ2hsaWdodGVkSXRlbSgpLnVuSGlnaGxpZ2h0KCk7Cn12YXIgYj10aGlzLmdldExhc3RXb3JkKGQsdGhpcy5fZ2V0VHJpbVN0YXJ0aW5nU3BhY2VzKCkpOwppZih0aGlzLl9nZXRMYXN0U2VwYXJhdG9yKGQpPT1kLmNoYXJBdChkLmxlbmd0aC0xKSl7dGhpcy5fcmVtb3ZlRW1UYWdzRnJvbUFsbEl0ZW1zKCk7CnRoaXMuc2V0QWxsSXRlbXNWaXNpYmxlKHRydWUpOwpyZXR1cm47Cn12YXIgYz10aGlzLmdldF9maWx0ZXIoKTsKdGhpcy5nZXRfaXRlbXMoKS5mb3JFYWNoKGZ1bmN0aW9uKGYsZSl7aWYoZi5oaWdobGlnaHRUZXh0KGMsYikpe2Yuc2V0X3Zpc2libGUodHJ1ZSk7Cn1lbHNle2Yuc2V0X3Zpc2libGUoZmFsc2UpOwp9fSk7CmlmKHRoaXMuZ2V0X21hcmtGaXJzdE1hdGNoKCkpe3RoaXMuaGlnaGxpZ2h0Rmlyc3RWaXNpYmxlRW5hYmxlZEl0ZW0oKTsKfX07CmEuUmFkQ29tYm9Cb3gucHJvdG90eXBlLnNldEFsbEl0ZW1zVmlzaWJsZT1mdW5jdGlvbihiKXt2YXIgYj1iOwp0aGlzLmdldF9pdGVtcygpLmZvckVhY2goZnVuY3Rpb24oYyl7Yy5zZXRfdmlzaWJsZShiKTsKfSk7Cn07CmEuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9yZW1vdmVFbVRhZ3NGcm9tQWxsSXRlbXM9ZnVuY3Rpb24oKXtpZih0aGlzLmdldF9maWx0ZXIoKT09YS5SYWRDb21ib0JveEZpbHRlci5Ob25lKXtyZXR1cm47Cn10aGlzLmdldF9pdGVtcygpLmZvckVhY2goZnVuY3Rpb24oYil7Yi5jbGVhckVtVGFncygpOwp9KTsKfTsKfSkoKTsKKGZ1bmN0aW9uKCl7dmFyIGE9VGVsZXJpay5XZWIuVUk7CmEuUmFkQ29tYm9Cb3gucHJvdG90eXBlLmhpZ2hsaWdodE5leHRJdGVtPWZ1bmN0aW9uKGMpe3ZhciBiPXRoaXMuZ2V0X2hpZ2hsaWdodGVkSXRlbSgpOwppZighYil7Yj10aGlzLmdldF9zZWxlY3RlZEl0ZW0oKTsKfXZhciBmPTA7CnZhciBlPXRoaXMuZ2V0X3Zpc2libGVJdGVtcygpOwppZihiKXt2YXIgZD1lLmxlbmd0aDsKZm9yKHZhciBnPTA7Cmc8ZDsKZysrKXtpZihlW2ddPT1iKXtmPWcrMTsKYnJlYWs7Cn19fWY9dGhpcy5fZmluZE5leHRBdmFpbGFibGVJbmRleChmLGUubGVuZ3RoLGMpOwppZihjJiZmPT1lLmxlbmd0aCl7Zj10aGlzLl9maW5kTmV4dEF2YWlsYWJsZUluZGV4KDAsZixjKTsKfWlmKGY8ZS5sZW5ndGgpe2VbZl0uaGlnaGxpZ2h0KCk7CmVbZl0uc2Nyb2xsSW50b1ZpZXcoKTsKdmFyIGo9dGhpcy5fZ2V0TGFzdFNlcGFyYXRvckluZGV4KHRoaXMuZ2V0X3RleHQoKSk7CnZhciBoPXRoaXMuZ2V0X3RleHQoKS5zdWJzdHJpbmcoMCxqKzEpK2VbZl0uZ2V0X3RleHQoKTsKaWYodGhpcy5nZXRfY2hhbmdlVGV4dCgpKXt0aGlzLnNldF90ZXh0KGgpOwp0aGlzLnNldF92YWx1ZShlW2ZdLmdldF92YWx1ZSgpKTsKfX19OwphLlJhZENvbWJvQm94LnByb3RvdHlwZS5oaWdobGlnaHRQcmV2aW91c0l0ZW09ZnVuY3Rpb24oKXt2YXIgZD10aGlzLmdldF92aXNpYmxlSXRlbXMoKTsKdmFyIGI9dGhpcy5nZXRfaGlnaGxpZ2h0ZWRJdGVtKCk7CmlmKCFiKXtiPXRoaXMuZ2V0X3NlbGVjdGVkSXRlbSgpOwp9dmFyIGU9MDsKaWYoYil7dmFyIGM9ZC5sZW5ndGg7CmZvcih2YXIgZj0wOwpmPGM7CmYrKyl7aWYoZFtmXT09Yil7ZT1mLTE7Cn19fWU9dGhpcy5fZmluZFByZXZBdmFpbGFibGVJbmRleChlKTsKaWYoZT49MCl7ZFtlXS5oaWdobGlnaHQoKTsKZFtlXS5zY3JvbGxJbnRvVmlldygpOwp2YXIgaD10aGlzLl9nZXRMYXN0U2VwYXJhdG9ySW5kZXgodGhpcy5nZXRfdGV4dCgpKTsKdmFyIGc9dGhpcy5nZXRfdGV4dCgpLnN1YnN0cmluZygwLGgrMSkrZFtlXS5nZXRfdGV4dCgpOwppZih0aGlzLmdldF9jaGFuZ2VUZXh0KCkpe3RoaXMuc2V0X3RleHQoZyk7CnRoaXMuc2V0X3ZhbHVlKGRbZV0uZ2V0X3ZhbHVlKCkpOwp9fX07CmEuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9uZWVkc0l0ZW1Db21wbGV0aW9uPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fZ2V0SW5wdXRTZWxlY3Rpb25SYW5nZSgpOwp2YXIgZj10aGlzLl9nZXRTdXJyb3VuZGluZ1NlcGFyYXRvckluZGljZXMoZS5zdGFydCkuYmVmb3JlOwp2YXIgYj1mOwp2YXIgZD10aGlzLmdldF90ZXh0KCk7CnZhciBjPWQuc3Vic3RyaW5nKGIsZC5sZW5ndGgpOwppZih0aGlzLmZpbmRJdGVtQnlUZXh0KGMpPT1udWxsKXtyZXR1cm4gZmFsc2U7Cn1yZXR1cm4gdHJ1ZTsKfTsKYS5SYWRDb21ib0JveC5wcm90b3R5cGUuX29uS2V5RG93bj1mdW5jdGlvbihmKXt2YXIgZD1mLmtleUNvZGV8fGYud2hpY2g7CmlmKGQ9PWEuS2V5cy5Fc2NhcGUpe2YucHJldmVudERlZmF1bHQoKTsKfWlmKCR0ZWxlcmlrLmlzSUUmJmQhPWEuS2V5cy5Eb3duJiZkIT1hLktleXMuVXApe3RoaXMuX3VwZGF0ZUZpbHRlclRleHQ9dHJ1ZTsKfWlmKCF0aGlzLl9maXJlRXZlbnRzfHx0aGlzLl9hamF4UmVxdWVzdCl7cmV0dXJuOwp9aWYoJHRlbGVyaWsuaXNJRTlNb2RlJiYoZD09OHx8ZD09MTI3KSl7dGhpcy5fY29tcGVuc2F0ZVZhbHVlUHJvcGVydHlDaGFuZ2VFdmVudD10cnVlOwp9aWYoIWYpe2Y9ZXZlbnQ7Cn10aGlzLnJhaXNlX29uQ2xpZW50S2V5UHJlc3NpbmcoZik7CnRoaXMuX2xhc3RLZXlDb2RlPWQ7CmlmKGQ9PWEuS2V5cy5Fc2NhcGUpe2lmKCR0ZWxlcmlrLmlzRmlyZWZveCl7dGhpcy5faGlkZURyb3BEb3duKGYpOwp0aGlzLl9lc2NLZXlQcmVzc2VkPXRydWU7CnJldHVybjsKfWlmKHRoaXMuZ2V0X2Ryb3BEb3duVmlzaWJsZSgpKXt0aGlzLl9oaWRlRHJvcERvd24oZik7CnJldHVybjsKfX1lbHNle2lmKGQ9PT1hLktleXMuRW50ZXIpe2lmKHRoaXMuZ2V0X2Ryb3BEb3duVmlzaWJsZSgpKXt0aGlzLl9oaWRlRHJvcERvd24oZik7Cn12YXIgaD10aGlzLmZpbmRJdGVtQnlUZXh0KHRoaXMuZ2V0X3RleHQoKSk7CmlmKHRoaXMuZ2V0X2FsbG93Q3VzdG9tVGV4dCgpJiYhdGhpcy5nZXRfbWFya0ZpcnN0TWF0Y2goKSYmIWgpe2lmKHRoaXMucmFpc2Vfc2VsZWN0ZWRJbmRleENoYW5naW5nKG51bGwsZik9PWZhbHNlKXt2YXIgYj10aGlzLmdldF9zZWxlY3RlZEl0ZW0oKTsKdmFyIGo9dGhpcy5nZXRfaGlnaGxpZ2h0ZWRJdGVtKCk7CmlmKGIpe2Iuc2V0X3NlbGVjdGVkKGZhbHNlKTsKfWlmKGope2oudW5IaWdobGlnaHQoKTsKfXRoaXMuc2V0X3NlbGVjdGVkSXRlbShudWxsKTsKdGhpcy5zZXRfc2VsZWN0ZWRJbmRleChudWxsKTsKdGhpcy5zZXRfaGlnaGxpZ2h0ZWRJdGVtKG51bGwpOwp0aGlzLnJhaXNlX3NlbGVjdGVkSW5kZXhDaGFuZ2VkKG51bGwsZik7CnZhciBnPXtDb21tYW5kOiJTZWxlY3QiLEluZGV4Oi0xfTsKdGhpcy5wb3N0YmFjayhnKTsKfX1lbHNle3RoaXMuX3BlcmZvcm1TZWxlY3QodGhpcy5nZXRfaGlnaGxpZ2h0ZWRJdGVtKCksZik7Cn1pZih0aGlzLmdldF9tYXJrRmlyc3RNYXRjaCgpKXt2YXIgaT10aGlzLmdldF90ZXh0KCkubGVuZ3RoOwp0aGlzLnNlbGVjdFRleHQoaSxpKTsKfWYucmV0dXJuVmFsdWU9ZmFsc2U7CmlmKGYucHJldmVudERlZmF1bHQpe2YucHJldmVudERlZmF1bHQoKTsKfXJldHVybjsKfWVsc2V7aWYoZD09PWEuS2V5cy5Eb3duKXtmLnJldHVyblZhbHVlPWZhbHNlOwppZihmLmFsdEtleSl7dGhpcy5fdG9nZ2xlRHJvcERvd24oZik7CnJldHVybjsKfXRoaXMuaGlnaGxpZ2h0TmV4dEl0ZW0obnVsbCk7CmlmKGYucHJldmVudERlZmF1bHQpe2YucHJldmVudERlZmF1bHQoKTsKfXJldHVybjsKfWVsc2V7aWYoZD09PWEuS2V5cy5VcCl7Zi5yZXR1cm5WYWx1ZT1mYWxzZTsKaWYoZi5hbHRLZXkpe3RoaXMuX3RvZ2dsZURyb3BEb3duKGYpOwpyZXR1cm47Cn10aGlzLmhpZ2hsaWdodFByZXZpb3VzSXRlbSgpOwppZihmLnByZXZlbnREZWZhdWx0KXtmLnByZXZlbnREZWZhdWx0KCk7Cn1yZXR1cm47Cn1lbHNle2lmKGQ9PT1hLktleXMuVGFiKXtpZih0aGlzLmdldF9kcm9wRG93blZpc2libGUoKSl7dGhpcy5faGlkZURyb3BEb3duKGYpOwp9dGhpcy5fcmFpc2VDbGllbnRCbHVyKGYpOwp0aGlzLl9zZWxlY3RJdGVtT25CbHVyKGYpOwp0aGlzLl9hcHBseUVtcHR5TWVzc2FnZSgpOwp0aGlzLl9mb2N1c2VkPWZhbHNlOwpyZXR1cm47Cn19fX19aWYoZD09YS5LZXlzLkxlZnR8fGQ9PWEuS2V5cy5SaWdodCl7cmV0dXJuOwp9aWYoZD49YS5LZXlzLk51bXBhZDAmJmQ8PWEuS2V5cy5OdW1wYWQ5KXtkLT0oYS5LZXlzLk51bXBhZDAtYS5LZXlzLlplcm8pOwp9dmFyIGM9U3RyaW5nLmZyb21DaGFyQ29kZShkKTsKaWYoYyYmKCFmLmFsdEtleSkmJiEodGhpcy5nZXRfZW5hYmxlTG9hZE9uRGVtYW5kKCl8fCF0aGlzLmdldF9yZWFkT25seSgpKSl7dGhpcy5oaWdobGlnaHROZXh0SXRlbShjKTsKcmV0dXJuOwp9fTsKYS5SYWRDb21ib0JveC5wcm90b3R5cGUuX29uS2V5UHJlc3M9ZnVuY3Rpb24oYyl7aWYoIXRoaXMuX2ZpcmVFdmVudHMpe3JldHVybjsKfXZhciBmPWMuY2hhckNvZGV8fGMua2V5Q29kZTsKaWYodGhpcy5fYWpheFJlcXVlc3Qpe2lmKGY9PT1hLktleXMuRW50ZXIpe2MucmV0dXJuVmFsdWU9ZmFsc2U7CmlmKGMucHJldmVudERlZmF1bHQpe2MucHJldmVudERlZmF1bHQoKTsKfX1yZXR1cm47Cn12YXIgYj1bYS5LZXlzLlBhZ2VVcCxhLktleXMuUGFnZURvd24sYS5LZXlzLkVuZCxhLktleXMuSG9tZSxhLktleXMuSW5zZXJ0LGEuS2V5cy5EZWxldGVdOwpmb3IodmFyIGQ9MDsKZDxiLmxlbmd0aDsKZCsrKXtpZih0aGlzLl9sYXN0S2V5Q29kZT09YltkXSl7cmV0dXJuOwp9fWlmKCh0aGlzLmdldF9tYXJrRmlyc3RNYXRjaCgpKSYmKHRoaXMuZ2V0X2F1dG9Db21wbGV0ZVNlcGFyYXRvcigpKSYmKHRoaXMuZ2V0X2F1dG9Db21wbGV0ZVNlcGFyYXRvcigpPT09U3RyaW5nLmZyb21DaGFyQ29kZShmKSkmJih0aGlzLl9uZWVkc0l0ZW1Db21wbGV0aW9uKCkpKXt0aGlzLl9wZXJmb3JtU2VsZWN0KHRoaXMuZ2V0X2hpZ2hsaWdodGVkSXRlbSgpLGMpOwppZih0aGlzLmdldF9oaWdobGlnaHRlZEl0ZW0oKSl7dGhpcy5nZXRfaGlnaGxpZ2h0ZWRJdGVtKCkudW5IaWdobGlnaHQoKTsKfXZhciBnPXRoaXMuZ2V0X3RleHQoKS5sZW5ndGg7CnRoaXMuc2VsZWN0VGV4dChnLGcpOwp9fTsKYS5SYWRDb21ib0JveC5wcm90b3R5cGUuX29uS2V5VXA9ZnVuY3Rpb24oKXtpZih0aGlzLl9jb21wZW5zYXRlVmFsdWVQcm9wZXJ0eUNoYW5nZUV2ZW50KXt0aGlzLl9jb21wZW5zYXRlVmFsdWVQcm9wZXJ0eUNoYW5nZUV2ZW50PWZhbHNlOwphLlJhZENvbWJvQm94Ll9maXJlVmFsdWVQcm9wZXJ0eUNoYW5nZUV2ZW50KHRoaXMuZ2V0X2lucHV0RG9tRWxlbWVudCgpKTsKfX07CmEuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9vblBhc3RlPWZ1bmN0aW9uKCl7dGhpcy5fdXBkYXRlRmlsdGVyVGV4dD10cnVlOwppZih0aGlzLl9jb21wZW5zYXRlVmFsdWVQcm9wZXJ0eUNoYW5nZUV2ZW50KXt0aGlzLl9jb21wZW5zYXRlVmFsdWVQcm9wZXJ0eUNoYW5nZUV2ZW50PWZhbHNlOwphLlJhZENvbWJvQm94Ll9maXJlVmFsdWVQcm9wZXJ0eUNoYW5nZUV2ZW50KHRoaXMuZ2V0X2lucHV0RG9tRWxlbWVudCgpKTsKfX07CmEuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9maW5kTmV4dEF2YWlsYWJsZUluZGV4PWZ1bmN0aW9uKGYsZCxjKXt2YXIgYj10aGlzLmdldF92aXNpYmxlSXRlbXMoKTsKZm9yKHZhciBlPWY7CmU8ZDsKZSsrKXtpZihiW2VdLmdldF9lbmFibGVkKCkmJiFiW2VdLmdldF9pc1NlcGFyYXRvcigpKXtpZihjPT1udWxsKXtyZXR1cm4gZTsKfWlmKGMmJiFiW2VdLmdldF90ZXh0KCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKGMudG9Mb3dlckNhc2UoKSkpe3JldHVybiBlOwp9fX1yZXR1cm4gYi5sZW5ndGg7Cn07CmEuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9maW5kUHJldkF2YWlsYWJsZUluZGV4PWZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMuZ2V0X3Zpc2libGVJdGVtcygpOwppZihjLmxlbmd0aDwxKXtyZXR1cm4gLTE7Cn1mb3IodmFyIGQ9YjsKZD49MDsKZC0tKXtpZihjW2RdLmdldF9lbmFibGVkKCkmJiFjW2RdLmdldF9pc1NlcGFyYXRvcigpKXtyZXR1cm4gZDsKfX1yZXR1cm4gLTE7Cn07Cn0pKCk7CihmdW5jdGlvbigpe3ZhciBhPVRlbGVyaWsuV2ViLlVJLGI9U3lzLlNlcmlhbGl6YXRpb24uSmF2YVNjcmlwdFNlcmlhbGl6ZXI7CmEuUmFkQ29tYm9Cb3gucHJvdG90eXBlLmdldF9pdGVtRGF0YT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pdGVtRGF0YTsKfTsKYS5SYWRDb21ib0JveC5wcm90b3R5cGUuZ2V0X3dlYlNlcnZpY2VTZXR0aW5ncz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl93ZWJTZXJ2aWNlU2V0dGluZ3M7Cn07CmEuUmFkQ29tYm9Cb3gucHJvdG90eXBlLnNldF93ZWJTZXJ2aWNlU2V0dGluZ3M9ZnVuY3Rpb24oYyl7dmFyIGQ9Yi5kZXNlcmlhbGl6ZShjKTsKaWYoZC5PRGF0YVNldHRpbmdzKXt0aGlzLl93ZWJTZXJ2aWNlU2V0dGluZ3M9bmV3IGEuTmF2aWdhdGlvbkNvbnRyb2xPRGF0YVNldHRpbmdzKGQpOwp9ZWxzZXt0aGlzLl93ZWJTZXJ2aWNlU2V0dGluZ3M9bmV3IGEuV2ViU2VydmljZVNldHRpbmdzKGQpOwp9fTsKYS5SYWRDb21ib0JveC5wcm90b3R5cGUuZ2V0X2VuYWJsZUl0ZW1DYWNoaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuYWJsZUl0ZW1DYWNoaW5nOwp9OwphLlJhZENvbWJvQm94LnByb3RvdHlwZS5zZXRfZW5hYmxlSXRlbUNhY2hpbmc9ZnVuY3Rpb24oYyl7dGhpcy5fZW5hYmxlSXRlbUNhY2hpbmc9YzsKfTsKYS5SYWRDb21ib0JveC5wcm90b3R5cGUuZ2V0X21vcmVSZXN1bHRzQm94RWxlbWVudD1mdW5jdGlvbigpe3ZhciBjPXRoaXMuX2dldENoaWxkRWxlbWVudCgiTW9yZVJlc3VsdHNCb3giKTsKcmV0dXJuIGM7Cn07CmEuUmFkQ29tYm9Cb3gucHJvdG90eXBlLmdldF9tb3JlUmVzdWx0c0JveE1lc3NhZ2VFbGVtZW50PWZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5nZXRfbW9yZVJlc3VsdHNCb3hFbGVtZW50KCk7CnZhciBkPSR0ZWxlcmlrLmdldEZpcnN0Q2hpbGRCeVRhZ05hbWUoYywic3BhbiIsMCk7CnJldHVybiBkOwp9OwphLlJhZENvbWJvQm94LnByb3RvdHlwZS5jbGVhckNhY2hlPWZ1bmN0aW9uKCl7dGhpcy5sb2RIYXNoVGFibGU9e307Cn0sYS5SYWRDb21ib0JveC5wcm90b3R5cGUucmVxdWVzdEl0ZW1zPWZ1bmN0aW9uKGMsZCl7aWYodGhpcy5fZGlzcG9zZWQpe3JldHVybjsKfWlmKGQpe2lmKCh0aGlzLl9wZW5kaW5nQWpheFJlcXVlc3RzQ291bnQ+MCl8fHRoaXMuZ2V0X2VuZE9mSXRlbXMoKSl7cmV0dXJuOwp9fWVsc2V7dGhpcy5fZmlsdGVyVGV4dD1jOwp9dGhpcy5fZW5zdXJlQ2hpbGRDb250cm9scygpOwp0aGlzLl9hamF4UmVxdWVzdD10cnVlOwp2YXIgZz17fTsKdGhpcy5zZXRfYXBwZW5kSXRlbXMoZCk7CmcuVGV4dD1jOwpnLk51bWJlck9mSXRlbXM9MDsKaWYodGhpcy5nZXRfYXBwZW5kSXRlbXMoKSl7Zy5OdW1iZXJPZkl0ZW1zPXRoaXMuZ2V0X2l0ZW1zKCkuZ2V0X2NvdW50KCk7Cn12YXIgZj1uZXcgYS5SYWRDb21ib0JveFJlcXVlc3RDYW5jZWxFdmVudEFyZ3MoYyxnKTsKdGhpcy5yYWlzZUV2ZW50KCJpdGVtc1JlcXVlc3RpbmciLGYpOwppZihmLmdldF9jYW5jZWwoKSl7dGhpcy5fYWpheFJlcXVlc3Q9ZmFsc2U7CnJldHVybjsKfWlmKHRoaXMuZ2V0X2hpZ2hsaWdodGVkSXRlbSgpKXt0aGlzLmdldF9oaWdobGlnaHRlZEl0ZW0oKS51bkhpZ2hsaWdodCgpOwp9aWYoIXRoaXMuX2xvYWRpbmdEaXYpe3RoaXMuX2xvYWRpbmdEaXY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGkiKTsKdGhpcy5fbG9hZGluZ0Rpdi5jbGFzc05hbWU9InJjYkxvYWRpbmciOwp0aGlzLl9sb2FkaW5nRGl2LmlkPXRoaXMuZ2V0X2lkKCkrIl9Mb2FkaW5nRGl2IjsKdGhpcy5fbG9hZGluZ0Rpdi5pbm5lckhUTUw9dGhpcy5nZXRfbG9hZGluZ01lc3NhZ2UoKTsKaWYoIXRoaXMuZ2V0X2NoaWxkTGlzdEVsZW1lbnQoKSl7dGhpcy5fY3JlYXRlQ2hpbGRMaXN0RWxlbWVudCgpOwp9dGhpcy5nZXRfY2hpbGRMaXN0RWxlbWVudCgpLmluc2VydEJlZm9yZSh0aGlzLl9sb2FkaW5nRGl2LHRoaXMuZ2V0X2NoaWxkTGlzdEVsZW1lbnQoKS5maXJzdENoaWxkKTsKfWM9ZW5jb2RlVVJJQ29tcG9uZW50KGMpOwp0aGlzLl9jYWxsYmFja1RleHQ9YzsKdGhpcy5fcGVuZGluZ0FqYXhSZXF1ZXN0c0NvdW50Kys7CnZhciBlPXRoaXMuZ2V0X2lzVXNpbmdPRGF0YVNvdXJjZSgpfHx0aGlzLmdldF93ZWJTZXJ2aWNlU2V0dGluZ3MoKS5nZXRfaXNPRGF0YSgpOwppZih0aGlzLmdldF93ZWJTZXJ2aWNlU2V0dGluZ3MoKS5nZXRfbWV0aG9kKCl8fGUpe3RoaXMuX2RvTG9hZE9uRGVtYW5kRnJvbVdlYlNlcnZpY2UoYyxnKTsKfWVsc2V7dGhpcy5fZG9Mb2FkT25EZW1hbmQoYyxnKTsKfX07CmEuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9jcmVhdGVDaGlsZExpc3RFbGVtZW50PWZ1bmN0aW9uKCl7dmFyIGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidWwiKTsKYy5jbGFzc05hbWU9InJjYkxpc3QiOwp0aGlzLmdldF9jaGlsZExpc3RFbGVtZW50V3JhcHBlcigpLmFwcGVuZENoaWxkKGMpOwp0aGlzLl9vbkRyb3BEb3duQ2xpY2tEZWxlZ2F0ZT1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX29uRHJvcERvd25DbGljayk7CiR0ZWxlcmlrLmFkZEhhbmRsZXIodGhpcy5nZXRfY2hpbGRMaXN0RWxlbWVudCgpLCJjbGljayIsdGhpcy5fb25Ecm9wRG93bkNsaWNrRGVsZWdhdGUpOwp0aGlzLl9vbkRyb3BEb3duSG92ZXJEZWxlZ2F0ZT1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX29uRHJvcERvd25Ib3Zlcik7CiR0ZWxlcmlrLmFkZEhhbmRsZXIodGhpcy5nZXRfY2hpbGRMaXN0RWxlbWVudCgpLCJtb3VzZW92ZXIiLHRoaXMuX29uRHJvcERvd25Ib3ZlckRlbGVnYXRlKTsKdGhpcy5fY2FuY2VsRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyxhLlJhZENvbWJvQm94Ll9jYW5jZWxFdmVudCk7CiR0ZWxlcmlrLmFkZEhhbmRsZXIodGhpcy5nZXRfY2hpbGRMaXN0RWxlbWVudCgpLCJzZWxlY3RzdGFydCIsdGhpcy5fY2FuY2VsRGVsZWdhdGUpOwokdGVsZXJpay5hZGRIYW5kbGVyKHRoaXMuZ2V0X2NoaWxkTGlzdEVsZW1lbnQoKSwiZHJhZ3N0YXJ0Iix0aGlzLl9jYW5jZWxEZWxlZ2F0ZSk7CnRoaXMuX29uRHJvcERvd25PdXREZWxlZ2F0ZT1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX29uRHJvcERvd25PdXQpOwokdGVsZXJpay5hZGRIYW5kbGVyKHRoaXMuZ2V0X2NoaWxkTGlzdEVsZW1lbnQoKSwibW91c2VvdXQiLHRoaXMuX29uRHJvcERvd25PdXREZWxlZ2F0ZSk7CmlmKCR0ZWxlcmlrLmlzSUU4JiYkdGVsZXJpay5zdGFuZGFyZHNNb2RlKXtjLnN0eWxlLnBvc2l0aW9uPSJhYnNvbHV0ZSI7CmMuc3R5bGUud2lkdGg9IjEwMCUiOwp9cmV0dXJuIGM7Cn07CmEuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9pbml0aWFsaXplVmlydHVhbFNjcm9sbD1mdW5jdGlvbigpe3RoaXMuX29uRHJvcERvd25TY3JvbGxEZWxlZ2F0ZT1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX29uRHJvcERvd25TY3JvbGwpOwokdGVsZXJpay5hZGRIYW5kbGVyKHRoaXMuZ2V0X2NoaWxkTGlzdEVsZW1lbnRXcmFwcGVyKCksInNjcm9sbCIsdGhpcy5fb25Ecm9wRG93blNjcm9sbERlbGVnYXRlKTsKfTsKYS5SYWRDb21ib0JveC5wcm90b3R5cGUuX29uRHJvcERvd25TY3JvbGw9ZnVuY3Rpb24oaCl7aWYoIXRoaXMuX3ZpcnR1YWxTY3JvbGx8fHRoaXMuX2FqYXhSZXF1ZXN0fHx0aGlzLmdldF9lbmRPZkl0ZW1zKCkpe3JldHVybjsKfXZhciBkPXRoaXMuZ2V0X2l0ZW1zKCkuZ2V0X2NvdW50KCk7CnZhciBjPTIyOwp2YXIgZj0wOwppZihkPjApe2M9dGhpcy5nZXRfaXRlbXMoKS5nZXRJdGVtKDApLmdldF9lbGVtZW50KCkub2Zmc2V0SGVpZ2h0OwpmPXRoaXMuZ2V0X2l0ZW1zKCkuZ2V0SXRlbShkLTEpLmdldF9lbGVtZW50KCkub2Zmc2V0VG9wOwp9dmFyIGk9dGhpcy5nZXRfY2hpbGRMaXN0RWxlbWVudCgpOwp2YXIgaj0kdGVsZXJpay5nZXRGaXJzdENoaWxkQnlUYWdOYW1lKGksImRpdiIsMCk7CmlmKGope3ZhciBnPWoub2Zmc2V0SGVpZ2h0OwppZih0aGlzLmdldF9jaGlsZExpc3RFbGVtZW50V3JhcHBlcigpLnNjcm9sbFRvcCtnPj1pLm9mZnNldEhlaWdodC1nKXt0aGlzLnJlcXVlc3RJdGVtcyh0aGlzLl9maWx0ZXJUZXh0LHRydWUpOwp9fX07CmEuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9kZXRhY2hWaXJ0dWFsU2Nyb2xsRXZlbnRzPWZ1bmN0aW9uKCl7JHRlbGVyaWsucmVtb3ZlSGFuZGxlcih0aGlzLmdldF9jaGlsZExpc3RFbGVtZW50V3JhcHBlcigpLCJzY3JvbGwiLHRoaXMuX29uRHJvcERvd25TY3JvbGxEZWxlZ2F0ZSk7Cn07CmEuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9pbml0aWFsaXplTW9yZVJlc3VsdHNCb3g9ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmdldF9tb3JlUmVzdWx0c0JveEVsZW1lbnQoKTsKdGhpcy5fb25Nb3JlUmVzdWx0c0JveENsaWNrRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vbk1vcmVSZXN1bHRzQm94Q2xpY2spOwokdGVsZXJpay5hZGRIYW5kbGVyKGMsImNsaWNrIix0aGlzLl9vbk1vcmVSZXN1bHRzQm94Q2xpY2tEZWxlZ2F0ZSk7CnRoaXMuX29uTW9yZVJlc3VsdHNCb3hPdmVyRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vbk1vcmVSZXN1bHRzQm94T3Zlcik7CiR0ZWxlcmlrLmFkZEhhbmRsZXIoYywibW91c2VvdmVyIix0aGlzLl9vbk1vcmVSZXN1bHRzQm94T3ZlckRlbGVnYXRlKTsKdGhpcy5fb25Nb3JlUmVzdWx0c0JveE91dERlbGVnYXRlPUZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5fb25Nb3JlUmVzdWx0c0JveE91dCk7CiR0ZWxlcmlrLmFkZEhhbmRsZXIoYywibW91c2VvdXQiLHRoaXMuX29uTW9yZVJlc3VsdHNCb3hPdXREZWxlZ2F0ZSk7Cn07CmEuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9vbk1vcmVSZXN1bHRzQm94Q2xpY2s9ZnVuY3Rpb24oYyl7dGhpcy5yZXF1ZXN0SXRlbXModGhpcy5fZmlsdGVyVGV4dCx0cnVlKTsKfTsKYS5SYWRDb21ib0JveC5wcm90b3R5cGUuX29uTW9yZVJlc3VsdHNCb3hPdmVyPWZ1bmN0aW9uKGMpe3RoaXMuZ2V0X21vcmVSZXN1bHRzQm94RWxlbWVudCgpLnN0eWxlLmN1cnNvcj0icG9pbnRlciI7Cn07CmEuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9vbk1vcmVSZXN1bHRzQm94T3V0PWZ1bmN0aW9uKGMpe3RoaXMuZ2V0X21vcmVSZXN1bHRzQm94RWxlbWVudCgpLnN0eWxlLmN1cnNvcj0iZGVmYXVsdCI7Cn07CmEuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9kZXRhY2hNb3JlUmVzdWx0c0JveEV2ZW50cz1mdW5jdGlvbigpe3ZhciBjPXRoaXMuZ2V0X21vcmVSZXN1bHRzQm94RWxlbWVudCgpOwokdGVsZXJpay5yZW1vdmVIYW5kbGVyKGMsImNsaWNrIix0aGlzLl9vbk1vcmVSZXN1bHRzQm94Q2xpY2tEZWxlZ2F0ZSk7CiR0ZWxlcmlrLnJlbW92ZUhhbmRsZXIoYywibW91c2VvdmVyIix0aGlzLl9vbk1vcmVSZXN1bHRzQm94T3ZlckRlbGVnYXRlKTsKJHRlbGVyaWsucmVtb3ZlSGFuZGxlcihjLCJtb3VzZW91dCIsdGhpcy5fb25Nb3JlUmVzdWx0c0JveE91dERlbGVnYXRlKTsKfTsKYS5SYWRDb21ib0JveC5wcm90b3R5cGUuX2luaXRpYWxpemVXZWJTZXJ2aWNlTG9hZGVyPWZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5nZXRfd2ViU2VydmljZVNldHRpbmdzKCk7CmlmKGMuZ2V0X2lzT0RhdGEoKSl7dGhpcy5fd2ViU2VydmljZUxvYWRlcj1uZXcgYS5OYXZpZ2F0aW9uQ29udHJvbE9EYXRhTG9hZGVyKHRoaXMuZ2V0X3dlYlNlcnZpY2VTZXR0aW5ncygpKTsKfWVsc2V7dGhpcy5fd2ViU2VydmljZUxvYWRlcj1uZXcgYS5XZWJTZXJ2aWNlTG9hZGVyKHRoaXMuZ2V0X3dlYlNlcnZpY2VTZXR0aW5ncygpKTsKfXRoaXMuX3dlYlNlcnZpY2VMb2FkZXIuYWRkX2xvYWRpbmdTdWNjZXNzKEZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5fb25XZWJTZXJ2aWNlUmVzcG9uc2UpKTsKdGhpcy5fd2ViU2VydmljZUxvYWRlci5hZGRfbG9hZGluZ0Vycm9yKEZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5fb25XZWJTZXJ2aWNlRXJyb3IpKTsKfTsKYS5SYWRDb21ib0JveC5wcm90b3R5cGUuX2luaXRpYWxpemVPRGF0YVNvdXJjZUJpbmRlcj1mdW5jdGlvbigpe3ZhciBkPXRoaXMuZ2V0X29kYXRhQ2xpZW50U2V0dGluZ3MoKS5PRGF0YVNvdXJjZUlELGU9JGZpbmQoZCk7CmlmKCFlKXt2YXIgYz1TdHJpbmcuZm9ybWF0KCJEYXRhU291cmNlIHdpdGggaWQgezB9IHdhcyBub3QgZm91bmQgb24gdGhlIHBhZ2UiLGQpOwphbGVydChjKTsKfWVsc2V7dGhpcy5faGllcmFyaGljYWxCaW5kZXI9bmV3IGEuUmFkT0RhdGFEYXRhU291cmNlLkJpbmRlci5GbGF0KGUsdGhpcyk7CnRoaXMuX2hpZXJhcmhpY2FsQmluZGVyLmluaXRpYWxpemUoKTsKfX07CmEuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9vbkRhdGFOZWVkZWQ9ZnVuY3Rpb24oZSl7dmFyIGM9dGhpcy5nZXRfaXRlbXMoKSxmPWMuZ2V0X2NvdW50KCksZD17ZXZlbnRzOntyZXF1ZXN0aW5nOmZ1bmN0aW9uKGcpe2lmKHRoaXMuX3Nob3dNb3JlUmVzdWx0c0JveCl7Zy5zZXRfcGFnZVNpemUodGhpcy5faXRlbXNQZXJSZXF1ZXN0KTsKZy5zZXRfcGFnZUluZGV4KGMuZ2V0X2NvdW50KCkvdGhpcy5faXRlbXNQZXJSZXF1ZXN0KTsKfX0sc3VjY2VzczpmdW5jdGlvbihsLGgpe3ZhciBqPXRoaXMsaT1sLGc9aCxrPW5ldyBUZWxlcmlrLldlYi5VSS5XZWJTZXJ2aWNlTG9hZGVyU3VjY2Vzc0V2ZW50QXJncyhpLGopOwp0aGlzLl9wZW5kaW5nQWpheFJlcXVlc3RzQ291bnQtLTsKdGhpcy5zZXRfZW5kT2ZJdGVtcyhmPT1nKTsKdGhpcy5fb25XZWJTZXJ2aWNlUmVzcG9uc2UodGhpcyxrKTsKaWYodGhpcy5fc2hvd01vcmVSZXN1bHRzQm94KXt0aGlzLnNldF9zaG93TW9yZU1lc3NhZ2UodGhpcy5fZ2V0U2hvd01vcmVNZXNzYWdlKDEsdGhpcy5nZXRfaXRlbXMoKS5nZXRfY291bnQoKSxnKSk7CnRoaXMuX3VwZGF0ZU1vcmVSZXN1bHRzQm94KCk7Cn19LGZhaWw6ZnVuY3Rpb24oaCl7dmFyIGc9bmV3IFRlbGVyaWsuV2ViLlVJLldlYlNlcnZpY2VMb2FkZXJFcnJvckV2ZW50QXJncyhoLmdldF9tZXNzYWdlKCkpOwp0aGlzLl9vbldlYlNlcnZpY2VFcnJvcih0aGlzLGcpOwp9fX07CnRoaXMuX2hpZXJhcmhpY2FsQmluZGVyLmZldGNoKGQpOwp9OwphLlJhZENvbWJvQm94LnByb3RvdHlwZS5fZ2V0U2hvd01vcmVNZXNzYWdlPWZ1bmN0aW9uKGMsZCxlKXtyZXR1cm4gU3RyaW5nLmZvcm1hdCgiSXRlbXMgPGI+ezB9PC9iPi08Yj57MX08L2I+IG91dCBvZiA8Yj57Mn08L2I+IixjLGQsZSk7Cn0sYS5SYWRDb21ib0JveC5wcm90b3R5cGUuZ2V0X2ZsYXRNb2RlbD1mdW5jdGlvbigpe3ZhciBjPXRoaXMuZ2V0X29kYXRhQ2xpZW50U2V0dGluZ3MoKTsKcmV0dXJuIGEuUmFkT0RhdGFEYXRhU291cmNlLkJpbmRlci5GbGF0Lk1vZGVsKGMpOwp9LGEuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9kb0xvYWRPbkRlbWFuZD1mdW5jdGlvbihmLGope3ZhciBlPTA7CmlmKHRoaXMuZ2V0X2FwcGVuZEl0ZW1zKCkpe2U9dGhpcy5nZXRfaXRlbXMoKS5nZXRfY291bnQoKTsKfXZhciBoPXtDb21tYW5kOiJMT0QiLFRleHQ6ZixDbGllbnRTdGF0ZTp0aGlzLl9jbGllbnRTdGF0ZSxDb250ZXh0OmosTnVtYmVyT2ZJdGVtczplfTsKdmFyIGQ9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vbkNhbGxiYWNrUmVzcG9uc2UpOwp2YXIgYz1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX29uRXJyb3JSZWNlaXZlZCk7CmlmKHRoaXMuZ2V0X2VuYWJsZUl0ZW1DYWNoaW5nKCkmJnRoaXMubG9kSGFzaFRhYmxlW2YrIiQiK2VdIT1udWxsKXt0aGlzLl9vbkNhbGxiYWNrUmVzcG9uc2UodGhpcy5sb2RIYXNoVGFibGVbZisiJCIrZV0pOwp9ZWxzZXt2YXIgaT1uZXcgYS5DYWxsYmFja1NldHRpbmdzKHtpZDp0aGlzLl91bmlxdWVJZCxhcmd1bWVudHM6Yi5zZXJpYWxpemUoaCksb25DYWxsYmFja1N1Y2Nlc3M6ZCxjb250ZXh0OmYsb25DYWxsYmFja0Vycm9yOmMsaXNBc3luYzp0cnVlfSk7CnZhciBnPW5ldyBhLkNhbGxiYWNrTG9hZGVyKGkpOwpnLmludm9rZUNhbGxiYWNrTWV0aG9kKCk7Cn19OwphLlJhZENvbWJvQm94LnByb3RvdHlwZS5fZG9Mb2FkT25EZW1hbmRGcm9tV2ViU2VydmljZT1mdW5jdGlvbihjLGcpe2lmKCF0aGlzLl93ZWJTZXJ2aWNlTG9hZGVyKXt0aGlzLl9pbml0aWFsaXplV2ViU2VydmljZUxvYWRlcigpOwp9dmFyIGQ9e2NvbnRleHQ6Z30sZT10aGlzLmdldF93ZWJTZXJ2aWNlU2V0dGluZ3MoKTsKaWYoZS5nZXRfaXNPRGF0YSgpKXtkLmlzUm9vdExldmVsPXRydWU7Cn1pZihlLmdldF9pc1djZigpKXtkLmNvbnRleHQ9dGhpcy5fd2ViU2VydmljZUxvYWRlci5fc2VyaWFsaXplRGljdGlvbmFyeUFzS2V5VmFsdWVQYWlycyhkLmNvbnRleHQpOwp9dmFyIGY9Zy5OdW1iZXJPZkl0ZW1zOwppZih0aGlzLmdldF9lbmFibGVJdGVtQ2FjaGluZygpJiZ0aGlzLmxvZEhhc2hUYWJsZVtjKyIkIitmXSE9bnVsbCl7dGhpcy5fcGVuZGluZ0FqYXhSZXF1ZXN0c0NvdW50LS07CnRoaXMuX2FkZE5ld0l0ZW1zKGMsdGhpcy5sb2RIYXNoVGFibGVbYysiJCIrZl0pOwp9ZWxzZXtpZih0aGlzLmdldF9pc1VzaW5nT0RhdGFTb3VyY2UoKSl7dGhpcy5fb25EYXRhTmVlZGVkKCk7Cn1lbHNle3RoaXMuX3dlYlNlcnZpY2VMb2FkZXIubG9hZERhdGEoZCxjKTsKfX19OwphLlJhZENvbWJvQm94LnByb3RvdHlwZS5fb25DYWxsYmFja1Jlc3BvbnNlPWZ1bmN0aW9uKHApe2lmKHRoaXMuX2Rpc3Bvc2VkKXtyZXR1cm47Cn10aGlzLl9wZW5kaW5nQWpheFJlcXVlc3RzQ291bnQtLTsKdGhpcy5zZXRfc2VsZWN0ZWRJdGVtKG51bGwpOwp0aGlzLnNldF9oaWdobGlnaHRlZEl0ZW0obnVsbCk7CnZhciBqPXRoaXMuX2NoaWxkcmVuLmdldF9jb3VudCgpOwp2YXIgbT10aGlzLmdldF90ZXh0KCk7CnZhciBrPTA7CnZhciBkPXAuc3BsaXQoIl8kJF8iKVs0XTsKaWYoKHRoaXMuX3BlbmRpbmdBamF4UmVxdWVzdHNDb3VudD09MCkmJihkIT10aGlzLl9jYWxsYmFja1RleHQpKXt0aGlzLnJlcXVlc3RJdGVtcyh0aGlzLl9jYWxsYmFja1RleHQsdGhpcy5nZXRfYXBwZW5kSXRlbXMoKSk7CnJldHVybjsKfWlmKHRoaXMuZ2V0X2FwcGVuZEl0ZW1zKCkpe2s9dGhpcy5nZXRfaXRlbXMoKS5nZXRfY291bnQoKTsKfWlmKHRoaXMuZ2V0X2VuYWJsZUl0ZW1DYWNoaW5nKCkmJnRoaXMubG9kSGFzaFRhYmxlW2QrIiQiK2tdPT1udWxsKXt0aGlzLmxvZEhhc2hUYWJsZVtkKyIkIitrXT1wOwp9dmFyIGw9cC5zcGxpdCgiXyQkXyIpOwp2YXIgZzsKaWYobFswXT09IltdIil7Zz1udWxsOwp9ZWxzZXtnPWV2YWwobFswXSk7Cn1pZihsWzNdPT0iVHJ1ZSIpe3RoaXMuc2V0X2VuZE9mSXRlbXModHJ1ZSk7Cn1lbHNle3RoaXMuc2V0X2VuZE9mSXRlbXMoZmFsc2UpOwp9aWYodGhpcy5nZXRfYXBwZW5kSXRlbXMoKSYmdGhpcy5faXRlbURhdGEmJmcpe0FycmF5LmFkZFJhbmdlKHRoaXMuX2l0ZW1EYXRhLGcpOwp9ZWxzZXt0aGlzLl9pdGVtRGF0YT1nOwp9aWYodGhpcy5fbG9hZGluZ0Rpdil7aWYodGhpcy5fbG9hZGluZ0Rpdi5wYXJlbnROb2RlKXt0aGlzLl9sb2FkaW5nRGl2LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5fbG9hZGluZ0Rpdik7Cn10aGlzLl9sb2FkaW5nRGl2PW51bGw7Cn12YXIgcT10aGlzLmdldF9jaGlsZExpc3RFbGVtZW50KCk7CmlmKCFxKXtxPXRoaXMuX2NyZWF0ZUNoaWxkTGlzdEVsZW1lbnQoKTsKfXRoaXMuX2NoaWxkQ29udHJvbHNDcmVhdGVkPXRydWU7CnZhciBoPSR0ZWxlcmlrLmdldEZpcnN0Q2hpbGRCeVRhZ05hbWUocSwiZGl2IiwwKTsKaWYoaCl7aC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGgpOwp9aWYodGhpcy5nZXRfYXBwZW5kSXRlbXMoKSl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidWwiKTsKZS5pbm5lckhUTUw9bFsxXTsKdmFyIG89JHRlbGVyaWsuZ2V0Q2hpbGRyZW5CeVRhZ05hbWUoZSwibGkiKTsKdmFyIGM9by5sZW5ndGg7CmZvcih2YXIgbj0wOwpuPGM7Cm4rKyl7cS5hcHBlbmRDaGlsZChvW25dKTsKdGhpcy5fY2hpbGRDb250cm9sc0NyZWF0ZWQ9ZmFsc2U7CnZhciBmPW5ldyBhLlJhZENvbWJvQm94SXRlbSgpOwp0aGlzLl9jaGlsZHJlbi5hZGQoZik7CmYuX2luaXRpYWxpemUoZ1tuXSxvW25dKTsKfX1lbHNle3RoaXMuX2NoaWxkcmVuLmNsZWFyKCk7CnEuaW5uZXJIVE1MPWxbMV07CnRoaXMuX2NoaWxkQ29udHJvbHNDcmVhdGVkPWZhbHNlOwp0aGlzLl9jcmVhdGVDaGlsZENvbnRyb2xzKCk7Cn10aGlzLl9jaGlsZENvbnRyb2xzQ3JlYXRlZD10cnVlOwp0aGlzLl9yZXN0b3JlU2VsZWN0aW9uQWZ0ZXJSZXF1ZXN0KCk7CnRoaXMuc2V0X3Nob3dNb3JlTWVzc2FnZShsWzJdKTsKdGhpcy5fc2V0VXBEcm9wRG93bkFmdGVyUmVxdWVzdCh0aGlzLmdldF90ZXh0KCkscSxqKTsKfTsKYS5SYWRDb21ib0JveC5wcm90b3R5cGUuX29uV2ViU2VydmljZVJlc3BvbnNlPWZ1bmN0aW9uKGMsZyl7dGhpcy5fcGVuZGluZ0FqYXhSZXF1ZXN0c0NvdW50LS07CnZhciBlPWcuZ2V0X2RhdGEoKTsKdmFyIGY9Zy5nZXRfY29udGV4dCgpOwp2YXIgZD0wOwppZih0aGlzLmdldF9hcHBlbmRJdGVtcygpKXtkPXRoaXMuZ2V0X2l0ZW1zKCkuZ2V0X2NvdW50KCk7Cn1pZigodGhpcy5fcGVuZGluZ0FqYXhSZXF1ZXN0c0NvdW50PT0wKSYmKGYhPXRoaXMuX2NhbGxiYWNrVGV4dCkpe3RoaXMucmVxdWVzdEl0ZW1zKHRoaXMuX2NhbGxiYWNrVGV4dCx0aGlzLmdldF9hcHBlbmRJdGVtcygpKTsKcmV0dXJuOwp9aWYodGhpcy5nZXRfZW5hYmxlSXRlbUNhY2hpbmcoKSl7dGhpcy5sb2RIYXNoVGFibGVbZisiJCIrZF09ZTsKfXRoaXMuX2FkZE5ld0l0ZW1zKGYsZSk7Cn07CmEuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9hZGROZXdJdGVtcz1mdW5jdGlvbihtLHIpe3RoaXMuc2V0X3NlbGVjdGVkSXRlbShudWxsKTsKdGhpcy5zZXRfaGlnaGxpZ2h0ZWRJdGVtKG51bGwpOwp0aGlzLl9jaGlsZENvbnRyb2xzQ3JlYXRlZD10cnVlOwp2YXIgaD10aGlzLmdldF9pdGVtcygpLmdldF9jb3VudCgpOwppZih0aGlzLl9sb2FkaW5nRGl2KXtpZih0aGlzLl9sb2FkaW5nRGl2LnBhcmVudE5vZGUpe3RoaXMuX2xvYWRpbmdEaXYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLl9sb2FkaW5nRGl2KTsKfXRoaXMuX2xvYWRpbmdEaXY9bnVsbDsKfWlmKCF0aGlzLmdldF9hcHBlbmRJdGVtcygpKXt0aGlzLmNsZWFySXRlbXMoKTsKfXZhciBzPXRoaXMuZ2V0X2NoaWxkTGlzdEVsZW1lbnQoKTsKaWYoIXMpe3M9dGhpcy5fY3JlYXRlQ2hpbGRMaXN0RWxlbWVudCgpOwp9aWYodGhpcy5fdmlydHVhbFNjcm9sbCl7dGhpcy5fc2V0VXBTY3JvbGwodHJ1ZSxzKTsKfXZhciBqPW51bGw7CmlmKEFycmF5LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKHIpKXtqPXI7Cn1lbHNle2o9ci5JdGVtczsKdGhpcy5zZXRfZW5kT2ZJdGVtcyhyLkVuZE9mSXRlbXMpOwp0aGlzLnNldF9zaG93TW9yZU1lc3NhZ2Uoci5NZXNzYWdlKTsKfWo9anx8W107CnRoaXMuX2NoaWxkQ29udHJvbHNDcmVhdGVkPWZhbHNlOwp2YXIgbz10aGlzLmdldF93ZWJTZXJ2aWNlU2V0dGluZ3MoKS5nZXRfaXNXY2YoKTsKdmFyIGw9W107CmZvcih2YXIgZD0wLHA9ai5sZW5ndGg7CmQ8cDsKZCsrKXt2YXIgZT1uZXcgYS5SYWRDb21ib0JveEl0ZW0oKTsKdmFyIGY9altkXTsKZS5fbG9hZEZyb21EaWN0aW9uYXJ5KGYsbyk7CmUuX3JlbmRlcmVkQ2xpZW50VGVtcGxhdGU9YS5UZW1wbGF0ZVJlbmRlcmVyLnJlbmRlclRlbXBsYXRlKGYsdGhpcyxlKTsKdGhpcy5fY2hpbGRyZW4uYWRkKGUpOwplLl9yZW5kZXIobCk7Cn10aGlzLl9jaGlsZENvbnRyb2xzQ3JlYXRlZD10cnVlOwppZih0aGlzLmdldF9hcHBlbmRJdGVtcygpKXtzLmlubmVySFRNTD1zLmlubmVySFRNTCtsLmpvaW4oIiIpOwp9ZWxzZXtzLmlubmVySFRNTD1sLmpvaW4oIiIpOwp9dmFyIGs9dGhpcy5nZXRfZXZlbnRzKCkuZ2V0SGFuZGxlcigiaXRlbURhdGFCb3VuZCIpOwp2YXIgcT0kdGVsZXJpay5nZXRDaGlsZHJlbkJ5VGFnTmFtZShzLCJsaSIpOwpmb3IodmFyIGQ9MCxwPXRoaXMuX2NoaWxkcmVuLmdldF9jb3VudCgpOwpkPHA7CmQrKyl7dmFyIGU9dGhpcy5fY2hpbGRyZW4uZ2V0SXRlbShkKTsKZS5zZXRfZWxlbWVudChxW2RdKTsKdmFyIG49cC1qLmxlbmd0aDsKaWYoKGQ+PW4pJiZrKXt2YXIgZz1kLW47CnZhciBjPW5ldyBhLlJhZENvbWJvQm94SXRlbURhdGFCb3VuZEV2ZW50QXJncyhlLGpbZ10pOwp0aGlzLnJhaXNlRXZlbnQoIml0ZW1EYXRhQm91bmQiLGMpOwp9fXRoaXMuX3NldFVwRHJvcERvd25BZnRlclJlcXVlc3QobSxzLGgpOwp9OwphLlJhZENvbWJvQm94LnByb3RvdHlwZS5fc2V0VXBEcm9wRG93bkFmdGVyUmVxdWVzdD1mdW5jdGlvbihjLGUsZCl7aWYodGhpcy5fdmlydHVhbFNjcm9sbCl7dGhpcy5fc2V0VXBTY3JvbGwodGhpcy5nZXRfZW5kT2ZJdGVtcygpLGUpOwp9aWYodGhpcy5nZXRfYXBwZW5kSXRlbXMoKSYmKHRoaXMuZ2V0X2l0ZW1zKCkuZ2V0SXRlbShkKzEpIT1udWxsKSl7dGhpcy5nZXRfaXRlbXMoKS5nZXRJdGVtKGQrMSkuc2Nyb2xsSW50b1ZpZXcoKTsKfXRoaXMuX3VwZGF0ZU1vcmVSZXN1bHRzQm94KCk7CnRoaXMucmFpc2VfaXRlbXNSZXF1ZXN0ZWQoYyxudWxsKTsKaWYodGhpcy5nZXRfZmlsdGVyKCk9PWEuUmFkQ29tYm9Cb3hGaWx0ZXIuTm9uZSl7dGhpcy5oaWdobGlnaHRNYXRjaGVzKCk7Cn1lbHNle3ZhciBmPXRoaXMuZ2V0X2hpZ2hsaWdodGVkSXRlbSgpOwp0aGlzLmhpZ2hsaWdodEFsbE1hdGNoZXModGhpcy5fZmlsdGVyVGV4dCk7CmlmKGYpe2YuaGlnaGxpZ2h0KCk7Cn19aWYodGhpcy5nZXRfZHJvcERvd25WaXNpYmxlKCkpe3RoaXMuX3NraXBEcm9wRG93blBvc2l0aW9uaW5nPXRydWU7CmlmKHRoaXMuX3NsaWRlKXt0aGlzLl9zbGlkZS51cGRhdGVTaXplKCk7Cn10aGlzLl9za2lwRHJvcERvd25Qb3NpdGlvbmluZz1udWxsOwp0aGlzLl9wb3NpdGlvbkRyb3BEb3duKCk7Cn10aGlzLl9hamF4UmVxdWVzdD1mYWxzZTsKfTsKYS5SYWRDb21ib0JveC5wcm90b3R5cGUuX3VwZGF0ZU1vcmVSZXN1bHRzQm94PWZ1bmN0aW9uKCl7aWYodGhpcy5fc2hvd01vcmVSZXN1bHRzQm94JiZ0aGlzLmdldF9tb3JlUmVzdWx0c0JveE1lc3NhZ2VFbGVtZW50KCkpe3RoaXMuZ2V0X21vcmVSZXN1bHRzQm94TWVzc2FnZUVsZW1lbnQoKS5pbm5lckhUTUw9dGhpcy5nZXRfc2hvd01vcmVNZXNzYWdlKCk7Cn19LGEuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9zZXRVcFNjcm9sbD1mdW5jdGlvbihnLGYpe3ZhciBkPTIyOwp2YXIgZT10aGlzLmdldF9pdGVtcygpLmdldF9jb3VudCgpOwppZihlPjApe2Q9dGhpcy5nZXRfaXRlbXMoKS5nZXRJdGVtKDApLmdldF9lbGVtZW50KCkub2Zmc2V0SGVpZ2h0Owp9aWYoZyl7dmFyIGM9JHRlbGVyaWsuZ2V0Rmlyc3RDaGlsZEJ5VGFnTmFtZShmLCJkaXYiLDApOwppZihjKXtjLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYyk7Cn19ZWxzZXt2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKaWYodGhpcy5faGVpZ2h0PT0iIiYmdGhpcy5fbWF4SGVpZ2h0IT0iIil7Yy5zdHlsZS5oZWlnaHQ9dGhpcy5fbWF4SGVpZ2h0KyJweCI7Cn1lbHNle2Muc3R5bGUuaGVpZ2h0PXRoaXMuX2hlaWdodCsicHgiOwp9Zi5hcHBlbmRDaGlsZChjKTsKfX07CmEuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9vbkVycm9yUmVjZWl2ZWQ9ZnVuY3Rpb24oYyxlKXtpZih0aGlzLl9yZXF1ZXN0VGltZW91dElEPjApe3dpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fcmVxdWVzdFRpbWVvdXRJRCk7CnRoaXMuX3JlcXVlc3RUaW1lb3V0SUQ9MDsKfXZhciBkPXRoaXMuX2V4dHJhY3RFcnJvck1lc3NhZ2UoYyk7CmlmKHRoaXMucmFpc2VfaXRlbXNSZXF1ZXN0RmFpbGVkKGUsZCxudWxsKT09dHJ1ZSl7cmV0dXJuOwp9YWxlcnQoZCk7Cn07CmEuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9vbldlYlNlcnZpY2VFcnJvcj1mdW5jdGlvbihjLGYpe3ZhciBlPWYuZ2V0X21lc3NhZ2UoKTsKdmFyIGQ9Zi5nZXRfY29udGV4dCgpOwp0aGlzLl9vbkVycm9yUmVjZWl2ZWQoZSxkKTsKfTsKYS5SYWRDb21ib0JveC5wcm90b3R5cGUuX3Jlc3RvcmVTZWxlY3Rpb25BZnRlclJlcXVlc3Q9ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmZpbmRJdGVtQnlWYWx1ZSh0aGlzLmdldF92YWx1ZSgpKTsKaWYoYyYmYy5nZXRfZW5hYmxlZCgpJiYoIWMuZ2V0X2lzU2VwYXJhdG9yKCkpKXtjLnNldF9zZWxlY3RlZCh0cnVlKTsKYy5oaWdobGlnaHQoKTsKdGhpcy5zZXRfc2VsZWN0ZWRJdGVtKGMpOwp9fTsKfSkoKTsKKGZ1bmN0aW9uKCl7dmFyIGE9VGVsZXJpay5XZWIuVUk7CmEuUmFkQ29tYm9Cb3gucHJvdG90eXBlLmdldF9tYXJrRmlyc3RNYXRjaD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYXJrRmlyc3RNYXRjaDsKfTsKYS5SYWRDb21ib0JveC5wcm90b3R5cGUuc2V0X21hcmtGaXJzdE1hdGNoPWZ1bmN0aW9uKGIpe3RoaXMuX21hcmtGaXJzdE1hdGNoPWI7CmlmKCF0aGlzLmdldF9zaW1wbGVSZW5kZXJpbmcoKSl7dGhpcy5fc2V0UmVhZE9ubHlDc3NDbGFzcygpOwp9fTsKYS5SYWRDb21ib0JveC5wcm90b3R5cGUuZmluZEZpcnN0TWF0Y2g9ZnVuY3Rpb24oYil7aWYoIWIpe3JldHVybiBudWxsOwp9dmFyIGQ9dGhpcy5nZXRfaXRlbXMoKTsKdmFyIGY9ZC5nZXRfY291bnQoKTsKZm9yKHZhciBlPTA7CmU8ZjsKZSsrKXtpZihkLmdldEl0ZW0oZSkuZ2V0X3RleHQoKS5sZW5ndGg8Yi5sZW5ndGgpe2NvbnRpbnVlOwp9aWYoZC5nZXRJdGVtKGUpLmdldF9lbmFibGVkKCk9PWZhbHNlfHxkLmdldEl0ZW0oZSkuZ2V0X2lzU2VwYXJhdG9yKCkpe2NvbnRpbnVlOwp9dmFyIGM9ZC5nZXRJdGVtKGUpLmdldF90ZXh0KCkuc3Vic3RyaW5nKDAsYi5sZW5ndGgpOwppZighdGhpcy5nZXRfaXNDYXNlU2Vuc2l0aXZlKCkpe2lmKGMudG9Mb3dlckNhc2UoKT09Yi50b0xvd2VyQ2FzZSgpKXtyZXR1cm4gZC5nZXRJdGVtKGUpOwp9ZWxzZXtpZihjPT1iKXtyZXR1cm4gZC5nZXRJdGVtKGUpOwp9fX19cmV0dXJuIG51bGw7Cn07CmEuUmFkQ29tYm9Cb3gucHJvdG90eXBlLmhpZ2hsaWdodE1hdGNoZXM9ZnVuY3Rpb24oKXtpZighdGhpcy5nZXRfbWFya0ZpcnN0TWF0Y2goKSl7cmV0dXJuOwp9dmFyIGQ9dGhpcy5nZXRfdGV4dCgpOwp2YXIgZT10aGlzLmdldExhc3RXb3JkKGQsdGhpcy5fZ2V0VHJpbVN0YXJ0aW5nU3BhY2VzKCkpOwppZih0aGlzLl9nZXRMYXN0U2VwYXJhdG9yKGQpPT1kLmNoYXJBdChkLmxlbmd0aC0xKSl7cmV0dXJuOwp9dmFyIGo9dGhpcy5maW5kRmlyc3RNYXRjaChlKTsKaWYodGhpcy5nZXRfaGlnaGxpZ2h0ZWRJdGVtKCkpe3RoaXMuZ2V0X2hpZ2hsaWdodGVkSXRlbSgpLnVuSGlnaGxpZ2h0KCk7Cn1pZighail7aWYoZCYmIXRoaXMuZ2V0X2FsbG93Q3VzdG9tVGV4dCgpJiYhdGhpcy5nZXRfZW5hYmxlTG9hZE9uRGVtYW5kKCkpe3ZhciBnPXRoaXMuX2dldExhc3RTZXBhcmF0b3JJbmRleChkKTsKaWYoZzxkLmxlbmd0aC0xKXt2YXIgYj1kLnN1YnN0cmluZygwLGQubGVuZ3RoLTEpOwppZihiPT0iIiYmJHRlbGVyaWsuaXNTYWZhcmkpe3ZhciBmPXRoaXM7CndpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Zi5zZXRfdGV4dChiKTsKfSwwKTsKfWVsc2V7dGhpcy5zZXRfdGV4dChiKTsKdGhpcy5oaWdobGlnaHRNYXRjaGVzKCk7Cn19fXJldHVybjsKfWouaGlnaGxpZ2h0KCk7Cmouc2Nyb2xsT25Ub3AoKTsKdGhpcy5zZXRfdmFsdWUoai5nZXRfdmFsdWUoKSk7CnZhciBpOwp2YXIgaDsKdmFyIGc9dGhpcy5fZ2V0TGFzdFNlcGFyYXRvckluZGV4KGQpOwp2YXIgYz1kLnN1YnN0cmluZygwLGcrMSkrai5nZXRfdGV4dCgpOwppZihkIT1jKXt0aGlzLnNldF90ZXh0KGMpOwppPWcrZS5sZW5ndGgrMTsKaD1jLmxlbmd0aC1pOwp9ZWxzZXtpZih0aGlzLl9jYWxsYmFja1RleHQubGVuZ3RoPjApe2k9Zyt0aGlzLl9jYWxsYmFja1RleHQubGVuZ3RoKzE7Cmg9ZC5sZW5ndGgtaTsKfX1pZihpJiZoKXt0aGlzLnNlbGVjdFRleHQoaSxoKTsKfX07CmEuUmFkQ29tYm9Cb3gucHJvdG90eXBlLmhpZ2hsaWdodEZpcnN0VmlzaWJsZUVuYWJsZWRJdGVtPWZ1bmN0aW9uKCl7aWYodGhpcy5nZXRfdGV4dCgpLmxlbmd0aD4wKXt2YXIgZD10aGlzLmdldF92aXNpYmxlSXRlbXMoKTsKdmFyIGI9ZC5sZW5ndGg7CmZvcih2YXIgYz0wOwpjPGI7CmMrKyl7dmFyIGU9ZFtjXTsKaWYoZS5nZXRfZW5hYmxlZCgpPT10cnVlKXtlLmhpZ2hsaWdodCgpOwpyZXR1cm47Cn19fX07CmEuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9zaG91bGRIaWdobGlnaHQ9ZnVuY3Rpb24oKXtpZih0aGlzLl9sYXN0S2V5Q29kZTxhLktleXMuU3BhY2Upe3JldHVybiBmYWxzZTsKfWlmKCh0aGlzLl9sYXN0S2V5Q29kZT49YS5LZXlzLlBhZ2VVcCkmJih0aGlzLl9sYXN0S2V5Q29kZTw9YS5LZXlzLkRlbCkpe3JldHVybiBmYWxzZTsKfWlmKCh0aGlzLl9sYXN0S2V5Q29kZT49YS5LZXlzLkYxKSYmKHRoaXMuX2xhc3RLZXlDb2RlPD1hLktleXMuRjEyKSl7cmV0dXJuIGZhbHNlOwp9aWYodGhpcy5fbGFzdEtleUNvZGU9PWEuS2V5cy5EZWxldGUpe3JldHVybiBmYWxzZTsKfXJldHVybiB0cnVlOwp9Owp9KSgpOwooZnVuY3Rpb24oKXt2YXIgYT0kdGVsZXJpay4kOwp2YXIgYj1UZWxlcmlrLldlYi5VSTsKYi5SYWRDb21ib0JveC5wcm90b3R5cGUuZ2V0X3NlbGVjdGVkSW5kZXg9ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmdldF9zZWxlY3RlZEl0ZW0oKTsKaWYoYyl7cmV0dXJuIGMuZ2V0X2luZGV4KCk7Cn1yZXR1cm4gdGhpcy5fc2VsZWN0ZWRJbmRleDsKfTsKYi5SYWRDb21ib0JveC5wcm90b3R5cGUuc2V0X3NlbGVjdGVkSW5kZXg9ZnVuY3Rpb24oYyl7dGhpcy5fc2VsZWN0ZWRJbmRleD1jOwp9OwpiLlJhZENvbWJvQm94LnByb3RvdHlwZS5nZXRfc2VsZWN0ZWRJdGVtPWZ1bmN0aW9uKCl7aWYoIXRoaXMuX3NldFNlbGVjdGVkSXRlbSl7dGhpcy5fc2V0U2VsZWN0ZWRJdGVtPXRydWU7CnRoaXMuX3NldEZpcnN0U2VsZWN0ZWRJdGVtKCk7Cn1yZXR1cm4gdGhpcy5fc2VsZWN0ZWRJdGVtOwp9OwpiLlJhZENvbWJvQm94LnByb3RvdHlwZS5zZXRfc2VsZWN0ZWRJdGVtPWZ1bmN0aW9uKGMpe3RoaXMuX3NlbGVjdGVkSXRlbT1jOwp9OwpiLlJhZENvbWJvQm94LnByb3RvdHlwZS5jbGVhclNlbGVjdGlvbj1mdW5jdGlvbigpe3RoaXMuc2V0X3RleHQoIiIpOwp0aGlzLnNldF92YWx1ZSgiIik7CnRoaXMuc2V0X3NlbGVjdGVkSXRlbShudWxsKTsKdmFyIGM9dGhpcy5nZXRfaGlnaGxpZ2h0ZWRJdGVtKCk7CmlmKGMpe2MudW5IaWdobGlnaHQoKTsKfXRoaXMuX2FwcGx5RW1wdHlNZXNzYWdlKCk7Cn07CmIuUmFkQ29tYm9Cb3gucHJvdG90eXBlLl9wZXJmb3JtU2VsZWN0PWZ1bmN0aW9uKGMsZCl7aWYoYyYmYyE9dGhpcy5nZXRfc2VsZWN0ZWRJdGVtKCkmJiF0aGlzLmdldF9lbmFibGVMb2FkT25EZW1hbmQoKSl7Yy5fc2VsZWN0KGQpOwpyZXR1cm47Cn1pZihjJiZjPT10aGlzLmdldF9zZWxlY3RlZEl0ZW0oKSYmdGhpcy5nZXRMYXN0V29yZCh0aGlzLmdldF90ZXh0KCkpIT1jLmdldF90ZXh0KCkmJiF0aGlzLmdldF9yZWFkT25seSgpKXt0aGlzLl9hcHBlbmRUZXh0QWZ0ZXJMYXN0U2VwYXJhdG9yKGMuZ2V0X3RleHQoKSk7CnJldHVybjsKfWlmKGMmJmM9PXRoaXMuZ2V0X3NlbGVjdGVkSXRlbSgpKXtyZXR1cm47Cn1pZihjJiZ0aGlzLmdldF9vcmlnaW5hbFRleHQoKSE9Yy5nZXRfdGV4dCgpKXtjLl9zZWxlY3QoZCk7CnJldHVybjsKfWlmKGMmJighdGhpcy5nZXRfc2VsZWN0ZWRJdGVtKCl8fHRoaXMuZ2V0X3NlbGVjdGVkSXRlbSgpLmdldF92YWx1ZSgpIT1jLmdldF92YWx1ZSgpKSl7Yy5fc2VsZWN0KGQpOwpyZXR1cm47Cn12YXIgZz10aGlzLmdldF9vcmlnaW5hbFRleHQoKTsKaWYoZz09dGhpcy5nZXRfZW1wdHlNZXNzYWdlKCkpe2c9IiI7Cn1pZihnIT10aGlzLmdldF90ZXh0KCkpe2lmKHRoaXMuZ2V0X2hpZ2hsaWdodGVkSXRlbSgpKXt0aGlzLmdldF9oaWdobGlnaHRlZEl0ZW0oKS51bkhpZ2hsaWdodCgpOwp9aWYodGhpcy5yYWlzZV90ZXh0Q2hhbmdlKHRoaXMsZCk9PXRydWUpe3JldHVybjsKfXZhciBmPXtDb21tYW5kOiJUZXh0Q2hhbmdlZCJ9Owp0aGlzLnBvc3RiYWNrKGYpOwp9fTsKYi5SYWRDb21ib0JveC5wcm90b3R5cGUuX3NlbGVjdEl0ZW1PbkJsdXI9ZnVuY3Rpb24oZil7aWYodGhpcy5nZXRfZW1wdHlNZXNzYWdlKCkmJih0aGlzLmdldF90ZXh0KCk9PXRoaXMuZ2V0X2VtcHR5TWVzc2FnZSgpKSl7cmV0dXJuOwp9dmFyIGc7CmlmKHRoaXMuZ2V0X21hcmtGaXJzdE1hdGNoKCk9PXRydWUmJnRoaXMuZ2V0X2ZpbHRlcigpPT1iLlJhZENvbWJvQm94RmlsdGVyLk5vbmUmJnRoaXMuZ2V0X2FsbG93Q3VzdG9tVGV4dCgpPT1mYWxzZSYmdGhpcy5nZXRfZW5hYmxlTG9hZE9uRGVtYW5kKCk9PWZhbHNlJiZ0aGlzLmdldF9lbXB0eU1lc3NhZ2UoKSYmdGhpcy5nZXRfYXV0b0NvbXBsZXRlU2VwYXJhdG9yKCkpe2c9dGhpcy5nZXRfbGFzdFdvcmQoKTsKfXZhciBpPXRoaXMuX2ZpbmRJdGVtVG9TZWxlY3QoZyk7CmlmKGk9PW51bGwmJnRoaXMuX2RlZmF1bHRJdGVtIT1udWxsJiYodGhpcy5nZXRfdGV4dCgpPT0iInx8dGhpcy5nZXRfdGV4dCgpPT10aGlzLl9kZWZhdWx0SXRlbS5nZXRfdGV4dCgpKSl7aT10aGlzLl9kZWZhdWx0SXRlbTsKfXZhciBkPSF0aGlzLmdldF9lbmFibGVMb2FkT25EZW1hbmQoKSYmIXRoaXMuZ2V0X2FsbG93Q3VzdG9tVGV4dCgpOwppZighaSYmZCYmKHRoaXMuZ2V0X2l0ZW1zKCkuZ2V0X2NvdW50KCk+MCkmJiF0aGlzLmdldF9lbXB0eU1lc3NhZ2UoKSl7aWYodGhpcy5nZXRfZmlsdGVyKCkhPWIuUmFkQ29tYm9Cb3hGaWx0ZXIuTm9uZSl7aT10aGlzLmdldF9zZWxlY3RlZEl0ZW0oKTsKaWYoIWkpe3RoaXMuc2V0X3RleHQoIiIpOwp9fWVsc2V7aWYodGhpcy5nZXRfbWFya0ZpcnN0TWF0Y2goKSl7aWYodGhpcy5nZXRfdGV4dCgpPT0iIil7dGhpcy5zZXRfdGV4dCh0aGlzLl9vcmlnaW5hbFRleHQpOwp9dGhpcy5oaWdobGlnaHRNYXRjaGVzKCk7CnRoaXMuc2VsZWN0VGV4dCgwLDApOwppPXRoaXMuZ2V0X2hpZ2hsaWdodGVkSXRlbSgpOwp9fX1pZih0aGlzLmdldF9maWx0ZXIoKSE9Yi5SYWRDb21ib0JveEZpbHRlci5Ob25lKXt0aGlzLnNldEFsbEl0ZW1zVmlzaWJsZSh0cnVlKTsKfWlmKCFpKXt2YXIgYz10aGlzLmdldF9zZWxlY3RlZEl0ZW0oKTsKaWYoYyYmIWQpe2lmKHRoaXMucmFpc2Vfc2VsZWN0ZWRJbmRleENoYW5naW5nKG51bGwsZik9PXRydWUpe3RoaXMuc2V0X3RleHQoYy5nZXRfdGV4dCgpKTsKcmV0dXJuOwp9Yy5zZXRfc2VsZWN0ZWQoZmFsc2UpOwp0aGlzLnNldF9zZWxlY3RlZEl0ZW0obnVsbCk7CnRoaXMuc2V0X3NlbGVjdGVkSW5kZXgobnVsbCk7CnRoaXMucmFpc2Vfc2VsZWN0ZWRJbmRleENoYW5nZWQobnVsbCxmKTsKdmFyIGg9e0NvbW1hbmQ6IlNlbGVjdCIsSW5kZXg6LTF9Owp0aGlzLnBvc3RiYWNrKGgpOwpyZXR1cm47Cn1pZihjJiZkKXtpPWM7Cn19dGhpcy5fcGVyZm9ybVNlbGVjdChpLGYpOwp9Owp9KSgpOwooZnVuY3Rpb24oKXt2YXIgYT0kdGVsZXJpay4kOwp2YXIgYj1UZWxlcmlrLldlYi5VSTsKYi5SYWRDb21ib0JveC5wcm90b3R5cGUuZ2V0X3NlbGVjdEVsZW1lbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gYSh0aGlzLmdldF9lbGVtZW50KCkpLmZpbmQoInNlbGVjdCIpLmdldCgwKTsKfTsKYi5SYWRDb21ib0JveC5wcm90b3R5cGUuZ2V0X3NlbGVjdEVsZW1lbnRUZXh0PWZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5nZXRfc2VsZWN0RWxlbWVudCgpOwp2YXIgYz0iIjsKaWYoZC5vcHRpb25zLmxlbmd0aCYmZC5zZWxlY3RlZEluZGV4Pi0xKXtjPWQub3B0aW9uc1tkLnNlbGVjdGVkSW5kZXhdLnRleHQ7Cn1yZXR1cm4gYzsKfTsKYi5SYWRDb21ib0JveC5wcm90b3R5cGUuZ2V0X3NlbGVjdGVkT3B0aW9uPWZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5nZXRfc2VsZWN0RWxlbWVudCgpOwppZihjLm9wdGlvbnMubGVuZ3RoJiZjLnNlbGVjdGVkSW5kZXg+LTEpe3JldHVybiBjLm9wdGlvbnNbYy5zZWxlY3RlZEluZGV4XTsKfXJldHVybiBudWxsOwp9OwpiLlJhZENvbWJvQm94LnByb3RvdHlwZS5nZXRfc2ltcGxlUmVuZGVyaW5nPWZ1bmN0aW9uKCl7aWYodGhpcy5fc2ltcGxlUmVuZGVyaW5nPT11bmRlZmluZWQpe3RoaXMuX3NpbXBsZVJlbmRlcmluZz1mYWxzZTsKfWVsc2V7cmV0dXJuIHRoaXMuX3NpbXBsZVJlbmRlcmluZzsKfWlmKGEodGhpcy5nZXRfZWxlbWVudCgpKS5maW5kKCJzZWxlY3QiKS5sZW5ndGg+MCYmdGhpcy5nZXRfaW5wdXREb21FbGVtZW50KCk9PXVuZGVmaW5lZCl7dGhpcy5fc2ltcGxlUmVuZGVyaW5nPXRydWU7Cn1yZXR1cm4gdGhpcy5fc2ltcGxlUmVuZGVyaW5nOwp9OwpiLlJhZENvbWJvQm94LnByb3RvdHlwZS5faW5pdGlhbGl6ZVNlbGVjdD1mdW5jdGlvbigpe3ZhciBjPXRoaXM7CmEodGhpcy5nZXRfc2VsZWN0RWxlbWVudCgpKS5iaW5kKCJjaGFuZ2UiLGZ1bmN0aW9uKGQpe2MuX29uU2VsZWN0Q2hhbmdlKGQsYyk7Cn0pOwp9OwpiLlJhZENvbWJvQm94LnByb3RvdHlwZS5fb25TZWxlY3RDaGFuZ2U9ZnVuY3Rpb24oZCxmKXt2YXIgYz1kLnRhcmdldC5vcHRpb25zW2QudGFyZ2V0LnNlbGVjdGVkSW5kZXhdOwpmLl9lbnN1cmVDaGlsZENvbnRyb2xzKCk7CmYuX3BlcmZvcm1TZWxlY3QoYy5faXRlbSxkKTsKfTsKYi5SYWRDb21ib0JveC5wcm90b3R5cGUuX2Rpc3Bvc2VTZWxlY3Q9ZnVuY3Rpb24oKXthKHRoaXMuZ2V0X3NlbGVjdEVsZW1lbnQoKSkudW5iaW5kKCJjaGFuZ2UiKTsKfTsKfSkoKTsKKGZ1bmN0aW9uKGEsYil7YS5SYWRDb21ib0JveERlZmF1bHRJdGVtPWZ1bmN0aW9uKCl7YS5SYWRDb21ib0JveERlZmF1bHRJdGVtLmluaXRpYWxpemVCYXNlKHRoaXMpOwp9OwphLlJhZENvbWJvQm94RGVmYXVsdEl0ZW0ucHJvdG90eXBlPXtfc2VsZWN0OmZ1bmN0aW9uKGQpe2lmKCF0aGlzLmdldF9pc0VuYWJsZWQoKXx8dGhpcy5nZXRfaXNTZXBhcmF0b3IoKSl7cmV0dXJuOwp9dmFyIGY9dGhpcy5nZXRfY29tYm9Cb3goKTsKdmFyIGM9Zi5nZXRfdGV4dCgpOwpsYXN0U2VwYXJhdG9ySW5kZXg9Zi5fZ2V0TGFzdFNlcGFyYXRvckluZGV4KGMpLHRleHRUb1NldD1jLnN1YnN0cmluZygwLGxhc3RTZXBhcmF0b3JJbmRleCsxKSt0aGlzLmdldF90ZXh0KCksc2VsZWN0ZWRJdGVtPWYuZ2V0X3NlbGVjdGVkSXRlbSgpOwppZihzZWxlY3RlZEl0ZW0pe3NlbGVjdGVkSXRlbS5zZXRfc2VsZWN0ZWQoZmFsc2UpOwp9Zi5jbGVhclNlbGVjdGlvbigpOwpmLmdldF9pbnB1dERvbUVsZW1lbnQoKS52YWx1ZT10ZXh0VG9TZXQ7CmYuX2VsZW1lbnQudmFsdWU9dGhpcy5nZXRfdmFsdWUoKTsKZi5zZXRfdmFsdWUodGhpcy5nZXRfdmFsdWUoKSk7CnRoaXMuc2V0X3NlbGVjdGVkKHRydWUpOwp0aGlzLmhpZ2hsaWdodCgpOwp9fTsKYS5SYWRDb21ib0JveERlZmF1bHRJdGVtLnJlZ2lzdGVyQ2xhc3MoIlRlbGVyaWsuV2ViLlVJLlJhZENvbWJvQm94RGVmYXVsdEl0ZW0iLGEuUmFkQ29tYm9Cb3hJdGVtKTsKfSkoVGVsZXJpay5XZWIuVUksJHRlbGVyaWsuJCk7Cg0KLyogRU5EIFRlbGVyaWsuV2ViLlVJLkNvbWJvQm94LlJhZENvbWJvQm94U2NyaXB0cy5qcyAqLw0KLyogU1RBUlQgVGVsZXJpay5XZWIuVUkuQ29tbW9uLlNjcm9sbGluZy5TY3JvbGxpbmdTY3JpcHRzLmpzICovDQpUeXBlLnJlZ2lzdGVyTmFtZXNwYWNlKCJUZWxlcmlrLldlYi5VSSIpOwpUZWxlcmlrLldlYi5VSS5TY3JvbGxlck9yaWVudGF0aW9uPWZ1bmN0aW9uKCl7fTsKVGVsZXJpay5XZWIuVUkuU2Nyb2xsZXJPcmllbnRhdGlvbi5wcm90b3R5cGU9e1ZlcnRpY2FsOjAsSG9yaXpvbnRhbDoxfTsKVGVsZXJpay5XZWIuVUkuU2Nyb2xsZXJPcmllbnRhdGlvbi5yZWdpc3RlckVudW0oIlRlbGVyaWsuV2ViLlVJLlNjcm9sbGVyT3JpZW50YXRpb24iKTsKVGVsZXJpay5XZWIuVUkuU2Nyb2xsZXJTcGVlZD1mdW5jdGlvbigpe307ClRlbGVyaWsuV2ViLlVJLlNjcm9sbGVyU3BlZWQucHJvdG90eXBlPXtJbnZhbGlkOjAsU2xvdzoxLE1lZGl1bToyLEZhc3Q6MyxNb3VzZXdoZWVsRGVmYXVsdDoxMn07ClRlbGVyaWsuV2ViLlVJLlNjcm9sbGVyU3BlZWQucmVnaXN0ZXJFbnVtKCJUZWxlcmlrLldlYi5VSS5TY3JvbGxlclNwZWVkIik7ClRlbGVyaWsuV2ViLlVJLkFycm93UG9zaXRpb249ZnVuY3Rpb24oKXt9OwpUZWxlcmlrLldlYi5VSS5BcnJvd1Bvc2l0aW9uLnByb3RvdHlwZT17VG9wOjAsQm90dG9tOjEsTGVmdDoyLFJpZ2h0OjN9OwpUZWxlcmlrLldlYi5VSS5BcnJvd1Bvc2l0aW9uLnJlZ2lzdGVyRW51bSgiVGVsZXJpay5XZWIuVUkuQXJyb3dQb3NpdGlvbiIpOwpUZWxlcmlrLldlYi5VSS5TY3JvbGxlcj1mdW5jdGlvbihiLGEsYyl7dGhpcy5fdGltZXJJbnRlcnZhbD0xMDsKdGhpcy5fc2Nyb2xsZWRFbGVtZW50PWI7CnRoaXMuX2VsZW1lbnQ9YTsKdGhpcy5fb3JpZW50YXRpb249YzsKdGhpcy5fbWluUG9zaXRpb249MDsKdGhpcy5fbWF4UG9zaXRpb249bnVsbDsKdGhpcy5fY3VycmVudFBvc2l0aW9uPTA7CnRoaXMuX3NwZWVkPVRlbGVyaWsuV2ViLlVJLlNjcm9sbGVyU3BlZWQuSW52YWxpZDsKdGhpcy5fZGlyZWN0aW9uPTA7CnRoaXMuX2V2ZW50cz1udWxsOwp0aGlzLl90aW1lcj1udWxsOwp0aGlzLl9vblRpY2tEZWxlZ2F0ZT1udWxsOwp9OwpUZWxlcmlrLldlYi5VSS5TY3JvbGxlci5wcm90b3R5cGU9e2luaXRpYWxpemU6ZnVuY3Rpb24oKXt0aGlzLl9vblRpY2tEZWxlZ2F0ZT1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX29uVGljayk7CnRoaXMuX3RpbWVyPW5ldyBUZWxlcmlrLldlYi5UaW1lcigpOwp0aGlzLl90aW1lci5zZXRfaW50ZXJ2YWwodGhpcy5fdGltZXJJbnRlcnZhbCk7CnRoaXMuX3RpbWVyLmFkZF90aWNrKHRoaXMuX29uVGlja0RlbGVnYXRlKTsKfSxkaXNwb3NlOmZ1bmN0aW9uKCl7aWYodGhpcy5fdGltZXIpe3RoaXMuX3RpbWVyLmRpc3Bvc2UoKTsKfXRoaXMuX29uVGlja0RlbGVnYXRlPW51bGw7CnRoaXMuX2V2ZW50cz1udWxsOwp9LGdldF9lbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VsZW1lbnQ7Cn0sZ2V0X2V2ZW50czpmdW5jdGlvbigpe2lmKCF0aGlzLl9ldmVudHMpe3RoaXMuX2V2ZW50cz1uZXcgU3lzLkV2ZW50SGFuZGxlckxpc3QoKTsKfXJldHVybiB0aGlzLl9ldmVudHM7Cn0sYWRkX3Bvc2l0aW9uQ2hhbmdlZDpmdW5jdGlvbihhKXt0aGlzLmdldF9ldmVudHMoKS5hZGRIYW5kbGVyKCJwb3NpdGlvbkNoYW5nZWQiLGEpOwp9LHJlbW92ZV9wb3NpdGlvbkNoYW5nZWQ6ZnVuY3Rpb24oYSl7dGhpcy5nZXRfZXZlbnRzKCkucmVtb3ZlSGFuZGxlcigicG9zaXRpb25DaGFuZ2VkIixhKTsKfSxzZXRTY3JvbGxpbmdMaW1pdHM6ZnVuY3Rpb24oYixhKXt0aGlzLl9taW5Qb3NpdGlvbj1iOwp0aGlzLl9tYXhQb3NpdGlvbj1NYXRoLm1pbih0aGlzLl9nZXRFbGVtZW50U2l6ZSgpLGEpOwp9LGlzQXRNaW5Qb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jdXJyZW50UG9zaXRpb248PXRoaXMuX21pblBvc2l0aW9uOwp9LGlzQXRNYXhQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jdXJyZW50UG9zaXRpb24+PXRoaXMuX21heFBvc2l0aW9uOwp9LHJlc2V0U3RhdGU6ZnVuY3Rpb24oKXt0aGlzLl9yZXNldE92ZXJmbG93U3R5bGUoKTsKdGhpcy5fc2Nyb2xsVG8oMCk7Cn0sc3RhcnRTY3JvbGw6ZnVuY3Rpb24oYSxiKXt0aGlzLl9zcGVlZD1hOwp0aGlzLl9kaXJlY3Rpb249YjsKdGhpcy5fdGltZXIuc2V0X2VuYWJsZWQodHJ1ZSk7Cn0sY2hhbmdlU2Nyb2xsU3BlZWQ6ZnVuY3Rpb24oYSl7dGhpcy5fc3BlZWQ9YTsKfSxzdG9wU2Nyb2xsOmZ1bmN0aW9uKCl7dGhpcy5fc3BlZWQ9VGVsZXJpay5XZWIuVUkuU2Nyb2xsZXJTcGVlZC5JbnZhbGlkOwp0aGlzLl9kaXJlY3Rpb249MDsKdGhpcy5fdGltZXIuc2V0X2VuYWJsZWQoZmFsc2UpOwp9LHNjcm9sbFRvTWF4UG9zaXRpb246ZnVuY3Rpb24oKXt0aGlzLl9zY3JvbGxUbyh0aGlzLl9tYXhQb3NpdGlvbik7Cn0sX29uVGljazpmdW5jdGlvbigpe3ZhciBhPXRoaXMuX2N1cnJlbnRQb3NpdGlvbisodGhpcy5fZGlyZWN0aW9uKnRoaXMuX3NwZWVkKTsKYT1NYXRoLm1heChhLHRoaXMuX21pblBvc2l0aW9uKTsKYT1NYXRoLm1pbihhLHRoaXMuX21heFBvc2l0aW9uKTsKdGhpcy5fc2Nyb2xsVG8oYSk7CmlmKGE9PXRoaXMuX21pblBvc2l0aW9ufHxhPT10aGlzLl9tYXhQb3NpdGlvbil7dGhpcy5zdG9wU2Nyb2xsKCk7Cn19LF9zY3JvbGxUbzpmdW5jdGlvbihhKXt2YXIgYj0ibGVmdCI7CmlmKHRoaXMuX29yaWVudGF0aW9uPT1UZWxlcmlrLldlYi5VSS5TY3JvbGxlck9yaWVudGF0aW9uLlZlcnRpY2FsKXtiPSJ0b3AiOwp9dGhpcy5fY3VycmVudFBvc2l0aW9uPWE7CnRoaXMuX3Njcm9sbGVkRWxlbWVudC5zdHlsZVtiXT0tYSsicHgiOwp0aGlzLl9yYWlzZUV2ZW50KCJwb3NpdGlvbkNoYW5nZWQiLFN5cy5FdmVudEFyZ3MuRW1wdHkpOwp9LF9yZXNldE92ZXJmbG93U3R5bGU6ZnVuY3Rpb24oKXtpZigkdGVsZXJpay5pc0lFKXt0aGlzLl9lbGVtZW50LnN0eWxlLm92ZXJmbG93PSJ2aXNpYmxlIjsKaWYodGhpcy5fb3JpZW50YXRpb249PVRlbGVyaWsuV2ViLlVJLkl0ZW1GbG93LlZlcnRpY2FsKXt0aGlzLl9lbGVtZW50LnN0eWxlLm92ZXJmbG93WD0idmlzaWJsZSI7CnRoaXMuX2VsZW1lbnQuc3R5bGUub3ZlcmZsb3dZPSJoaWRkZW4iOwp9ZWxzZXt0aGlzLl9lbGVtZW50LnN0eWxlLm92ZXJmbG93WD0iaGlkZGVuIjsKdGhpcy5fZWxlbWVudC5zdHlsZS5vdmVyZmxvd1k9ImhpZGRlbiI7Cn19ZWxzZXt0aGlzLl9lbGVtZW50LnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iOwp9fSxfZ2V0RWxlbWVudFNpemU6ZnVuY3Rpb24oKXtpZih0aGlzLl9vcmllbnRhdGlvbj09VGVsZXJpay5XZWIuVUkuU2Nyb2xsZXJPcmllbnRhdGlvbi5WZXJ0aWNhbCl7cmV0dXJuIHRoaXMuX3Njcm9sbGVkRWxlbWVudC5vZmZzZXRIZWlnaHQ7Cn1lbHNle3JldHVybiB0aGlzLl9zY3JvbGxlZEVsZW1lbnQub2Zmc2V0V2lkdGg7Cn19LF9yYWlzZUV2ZW50OmZ1bmN0aW9uKGEsYyl7dmFyIGI9dGhpcy5nZXRfZXZlbnRzKCkuZ2V0SGFuZGxlcihhKTsKaWYoYil7aWYoIWMpe2M9U3lzLkV2ZW50QXJncy5FbXB0eTsKfWIodGhpcyxjKTsKfX19OwpUZWxlcmlrLldlYi5VSS5TY3JvbGxlci5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5TY3JvbGxlciIsbnVsbCxTeXMuSURpc3Bvc2FibGUpOwoNCi8qIEVORCBUZWxlcmlrLldlYi5VSS5Db21tb24uU2Nyb2xsaW5nLlNjcm9sbGluZ1NjcmlwdHMuanMgKi8NCi8qIFNUQVJUIFRlbGVyaWsuV2ViLlVJLk1lbnUuUmFkTWVudVNjcmlwdHMuanMgKi8NClRlbGVyaWsuV2ViLlVJLlJhZE1lbnVJdGVtRXZlbnRBcmdzPWZ1bmN0aW9uKGIsYSl7VGVsZXJpay5XZWIuVUkuUmFkTWVudUl0ZW1FdmVudEFyZ3MuaW5pdGlhbGl6ZUJhc2UodGhpcyk7CnRoaXMuX2l0ZW09YjsKdGhpcy5fZG9tRXZlbnQ9YXx8bnVsbDsKfTsKVGVsZXJpay5XZWIuVUkuUmFkTWVudUl0ZW1FdmVudEFyZ3MucHJvdG90eXBlPXtnZXRfaXRlbTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pdGVtOwp9LGdldF9kb21FdmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kb21FdmVudDsKfX07ClRlbGVyaWsuV2ViLlVJLlJhZE1lbnVJdGVtRXZlbnRBcmdzLnJlZ2lzdGVyQ2xhc3MoIlRlbGVyaWsuV2ViLlVJLlJhZE1lbnVJdGVtRXZlbnRBcmdzIixTeXMuRXZlbnRBcmdzKTsKVGVsZXJpay5XZWIuVUkuUmFkTWVudUl0ZW1DYW5jZWxFdmVudEFyZ3M9ZnVuY3Rpb24oYixhKXtUZWxlcmlrLldlYi5VSS5SYWRNZW51SXRlbUNhbmNlbEV2ZW50QXJncy5pbml0aWFsaXplQmFzZSh0aGlzKTsKdGhpcy5faXRlbT1iOwp0aGlzLl9kb21FdmVudD1hfHxudWxsOwp9OwpUZWxlcmlrLldlYi5VSS5SYWRNZW51SXRlbUNhbmNlbEV2ZW50QXJncy5wcm90b3R5cGU9e2dldF9pdGVtOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2l0ZW07Cn0sZ2V0X2RvbUV2ZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RvbUV2ZW50Owp9fTsKVGVsZXJpay5XZWIuVUkuUmFkTWVudUl0ZW1DYW5jZWxFdmVudEFyZ3MucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuUmFkTWVudUl0ZW1DYW5jZWxFdmVudEFyZ3MiLFN5cy5DYW5jZWxFdmVudEFyZ3MpOwpUZWxlcmlrLldlYi5VSS5SYWRNZW51TW91c2VPdmVyRXZlbnRBcmdzPWZ1bmN0aW9uKGIsYSl7VGVsZXJpay5XZWIuVUkuUmFkTWVudU1vdXNlT3ZlckV2ZW50QXJncy5pbml0aWFsaXplQmFzZSh0aGlzLFtiLGF8fG51bGxdKTsKfTsKVGVsZXJpay5XZWIuVUkuUmFkTWVudU1vdXNlT3ZlckV2ZW50QXJncy5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5SYWRNZW51TW91c2VPdmVyRXZlbnRBcmdzIixUZWxlcmlrLldlYi5VSS5SYWRNZW51SXRlbUV2ZW50QXJncyk7ClRlbGVyaWsuV2ViLlVJLlJhZE1lbnVNb3VzZU91dEV2ZW50QXJncz1mdW5jdGlvbihiLGEpe1RlbGVyaWsuV2ViLlVJLlJhZE1lbnVNb3VzZU91dEV2ZW50QXJncy5pbml0aWFsaXplQmFzZSh0aGlzLFtiLGF8fG51bGxdKTsKfTsKVGVsZXJpay5XZWIuVUkuUmFkTWVudU1vdXNlT3V0RXZlbnRBcmdzLnJlZ2lzdGVyQ2xhc3MoIlRlbGVyaWsuV2ViLlVJLlJhZE1lbnVNb3VzZU91dEV2ZW50QXJncyIsVGVsZXJpay5XZWIuVUkuUmFkTWVudUl0ZW1FdmVudEFyZ3MpOwpUZWxlcmlrLldlYi5VSS5SYWRNZW51SXRlbUZvY3VzRXZlbnRBcmdzPWZ1bmN0aW9uKGIsYSl7VGVsZXJpay5XZWIuVUkuUmFkTWVudUl0ZW1Gb2N1c0V2ZW50QXJncy5pbml0aWFsaXplQmFzZSh0aGlzLFtiLGF8fG51bGxdKTsKfTsKVGVsZXJpay5XZWIuVUkuUmFkTWVudUl0ZW1Gb2N1c0V2ZW50QXJncy5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5SYWRNZW51SXRlbUZvY3VzRXZlbnRBcmdzIixUZWxlcmlrLldlYi5VSS5SYWRNZW51SXRlbUV2ZW50QXJncyk7ClRlbGVyaWsuV2ViLlVJLlJhZE1lbnVJdGVtQmx1ckV2ZW50QXJncz1mdW5jdGlvbihiLGEpe1RlbGVyaWsuV2ViLlVJLlJhZE1lbnVJdGVtQmx1ckV2ZW50QXJncy5pbml0aWFsaXplQmFzZSh0aGlzLFtiLGF8fG51bGxdKTsKfTsKVGVsZXJpay5XZWIuVUkuUmFkTWVudUl0ZW1CbHVyRXZlbnRBcmdzLnJlZ2lzdGVyQ2xhc3MoIlRlbGVyaWsuV2ViLlVJLlJhZE1lbnVJdGVtQmx1ckV2ZW50QXJncyIsVGVsZXJpay5XZWIuVUkuUmFkTWVudUl0ZW1FdmVudEFyZ3MpOwpUZWxlcmlrLldlYi5VSS5SYWRNZW51SXRlbUNsaWNraW5nRXZlbnRBcmdzPWZ1bmN0aW9uKGIsYSl7VGVsZXJpay5XZWIuVUkuUmFkTWVudUl0ZW1DbGlja2luZ0V2ZW50QXJncy5pbml0aWFsaXplQmFzZSh0aGlzLFtiLGF8fG51bGxdKTsKfTsKVGVsZXJpay5XZWIuVUkuUmFkTWVudUl0ZW1DbGlja2luZ0V2ZW50QXJncy5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5SYWRNZW51SXRlbUNsaWNraW5nRXZlbnRBcmdzIixUZWxlcmlrLldlYi5VSS5SYWRNZW51SXRlbUNhbmNlbEV2ZW50QXJncyk7ClRlbGVyaWsuV2ViLlVJLlJhZE1lbnVJdGVtQ2xpY2tlZEV2ZW50QXJncz1mdW5jdGlvbihiLGEpe1RlbGVyaWsuV2ViLlVJLlJhZE1lbnVJdGVtQ2xpY2tlZEV2ZW50QXJncy5pbml0aWFsaXplQmFzZSh0aGlzLFtiLGF8fG51bGxdKTsKfTsKVGVsZXJpay5XZWIuVUkuUmFkTWVudUl0ZW1DbGlja2VkRXZlbnRBcmdzLnJlZ2lzdGVyQ2xhc3MoIlRlbGVyaWsuV2ViLlVJLlJhZE1lbnVJdGVtQ2xpY2tlZEV2ZW50QXJncyIsVGVsZXJpay5XZWIuVUkuUmFkTWVudUl0ZW1FdmVudEFyZ3MpOwpUZWxlcmlrLldlYi5VSS5SYWRNZW51SXRlbU9wZW5pbmdFdmVudEFyZ3M9ZnVuY3Rpb24oYixhKXtUZWxlcmlrLldlYi5VSS5SYWRNZW51SXRlbU9wZW5pbmdFdmVudEFyZ3MuaW5pdGlhbGl6ZUJhc2UodGhpcyxbYixhfHxudWxsXSk7Cn07ClRlbGVyaWsuV2ViLlVJLlJhZE1lbnVJdGVtT3BlbmluZ0V2ZW50QXJncy5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5SYWRNZW51SXRlbU9wZW5pbmdFdmVudEFyZ3MiLFRlbGVyaWsuV2ViLlVJLlJhZE1lbnVJdGVtQ2FuY2VsRXZlbnRBcmdzKTsKVGVsZXJpay5XZWIuVUkuUmFkTWVudUl0ZW1PcGVuZWRFdmVudEFyZ3M9ZnVuY3Rpb24oYixhKXtUZWxlcmlrLldlYi5VSS5SYWRNZW51SXRlbU9wZW5lZEV2ZW50QXJncy5pbml0aWFsaXplQmFzZSh0aGlzLFtiLGF8fG51bGxdKTsKfTsKVGVsZXJpay5XZWIuVUkuUmFkTWVudUl0ZW1PcGVuZWRFdmVudEFyZ3MucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuUmFkTWVudUl0ZW1PcGVuZWRFdmVudEFyZ3MiLFRlbGVyaWsuV2ViLlVJLlJhZE1lbnVJdGVtRXZlbnRBcmdzKTsKVGVsZXJpay5XZWIuVUkuUmFkTWVudUl0ZW1DbG9zaW5nRXZlbnRBcmdzPWZ1bmN0aW9uKGIsYSl7VGVsZXJpay5XZWIuVUkuUmFkTWVudUl0ZW1DbG9zaW5nRXZlbnRBcmdzLmluaXRpYWxpemVCYXNlKHRoaXMsW2IsYXx8bnVsbF0pOwp9OwpUZWxlcmlrLldlYi5VSS5SYWRNZW51SXRlbUNsb3NpbmdFdmVudEFyZ3MucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuUmFkTWVudUl0ZW1DbG9zaW5nRXZlbnRBcmdzIixUZWxlcmlrLldlYi5VSS5SYWRNZW51SXRlbUNhbmNlbEV2ZW50QXJncyk7ClRlbGVyaWsuV2ViLlVJLlJhZE1lbnVJdGVtQ2xvc2VkRXZlbnRBcmdzPWZ1bmN0aW9uKGIsYSl7VGVsZXJpay5XZWIuVUkuUmFkTWVudUl0ZW1DbG9zZWRFdmVudEFyZ3MuaW5pdGlhbGl6ZUJhc2UodGhpcyxbYixhfHxudWxsXSk7Cn07ClRlbGVyaWsuV2ViLlVJLlJhZE1lbnVJdGVtQ2xvc2VkRXZlbnRBcmdzLnJlZ2lzdGVyQ2xhc3MoIlRlbGVyaWsuV2ViLlVJLlJhZE1lbnVJdGVtQ2xvc2VkRXZlbnRBcmdzIixUZWxlcmlrLldlYi5VSS5SYWRNZW51SXRlbUV2ZW50QXJncyk7ClRlbGVyaWsuV2ViLlVJLlJhZE1lbnVJdGVtUG9wdWxhdGluZ0V2ZW50QXJncz1mdW5jdGlvbihiLGEpe1RlbGVyaWsuV2ViLlVJLlJhZE1lbnVJdGVtUG9wdWxhdGluZ0V2ZW50QXJncy5pbml0aWFsaXplQmFzZSh0aGlzLFtiXSk7CnRoaXMuX2NvbnRleHQ9YTsKfTsKVGVsZXJpay5XZWIuVUkuUmFkTWVudUl0ZW1Qb3B1bGF0aW5nRXZlbnRBcmdzLnByb3RvdHlwZT17Z2V0X2NvbnRleHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udGV4dDsKfX07ClRlbGVyaWsuV2ViLlVJLlJhZE1lbnVJdGVtUG9wdWxhdGluZ0V2ZW50QXJncy5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5SYWRNZW51SXRlbVBvcHVsYXRpbmdFdmVudEFyZ3MiLFRlbGVyaWsuV2ViLlVJLlJhZE1lbnVJdGVtQ2FuY2VsRXZlbnRBcmdzKTsKVGVsZXJpay5XZWIuVUkuUmFkTWVudUl0ZW1Qb3B1bGF0ZWRFdmVudEFyZ3M9ZnVuY3Rpb24oYSl7VGVsZXJpay5XZWIuVUkuUmFkTWVudUl0ZW1Qb3B1bGF0ZWRFdmVudEFyZ3MuaW5pdGlhbGl6ZUJhc2UodGhpcyxbYV0pOwp9OwpUZWxlcmlrLldlYi5VSS5SYWRNZW51SXRlbVBvcHVsYXRlZEV2ZW50QXJncy5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5SYWRNZW51SXRlbVBvcHVsYXRlZEV2ZW50QXJncyIsVGVsZXJpay5XZWIuVUkuUmFkTWVudUl0ZW1FdmVudEFyZ3MpOwpUZWxlcmlrLldlYi5VSS5SYWRNZW51SXRlbVBvcHVsYXRpb25GYWlsZWRFdmVudEFyZ3M9ZnVuY3Rpb24oYixhKXtUZWxlcmlrLldlYi5VSS5SYWRNZW51SXRlbVBvcHVsYXRpb25GYWlsZWRFdmVudEFyZ3MuaW5pdGlhbGl6ZUJhc2UodGhpcyxbYl0pOwp0aGlzLl9lcnJvck1lc3NhZ2U9YTsKfTsKVGVsZXJpay5XZWIuVUkuUmFkTWVudUl0ZW1Qb3B1bGF0aW9uRmFpbGVkRXZlbnRBcmdzLnByb3RvdHlwZT17Z2V0X2Vycm9yTWVzc2FnZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lcnJvck1lc3NhZ2U7Cn19OwpUZWxlcmlrLldlYi5VSS5SYWRNZW51SXRlbVBvcHVsYXRpb25GYWlsZWRFdmVudEFyZ3MucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuUmFkTWVudUl0ZW1Qb3B1bGF0aW9uRmFpbGVkRXZlbnRBcmdzIixUZWxlcmlrLldlYi5VSS5SYWRNZW51SXRlbUNhbmNlbEV2ZW50QXJncyk7CihmdW5jdGlvbigpe3ZhciBhPSR0ZWxlcmlrLiQsYj1UZWxlcmlrLldlYi5VSSxnPVN5cy5TZXJpYWxpemF0aW9uLkphdmFTY3JpcHRTZXJpYWxpemVyLGY9InJtSXRlbSIsZT0icm1MaW5rIixqPSJybVRvcEFycm93IixoPSJybUJvdHRvbUFycm93IixjPSJybUxlZnRBcnJvdyIsaT0icm1SaWdodEFycm93IixrPSR0ZWxlcmlrLmlzVG91Y2hEZXZpY2U/InRvdWNoc3RhcnQiOiJtb3VzZWRvd24iLGQ9JHRlbGVyaWsuaXNUb3VjaERldmljZT8idG91Y2hlbmQiOiJtb3VzZXVwIjsKVHlwZS5yZWdpc3Rlck5hbWVzcGFjZSgiVGVsZXJpay5XZWIuVUkiKTsKJHRlbGVyaWsuZmluZE1lbnU9JGZpbmQ7CiR0ZWxlcmlrLnRvTWVudT1mdW5jdGlvbihsKXtyZXR1cm4gbDsKfTsKYi5SYWRNZW51PWZ1bmN0aW9uKGwpe2IuUmFkTWVudS5pbml0aWFsaXplQmFzZSh0aGlzLFtsXSk7CnRoaXMuX2NoaWxkVHlwZU5hbWU9IlRlbGVyaWsuV2ViLlVJLlJhZE1lbnVJdGVtIjsKdGhpcy5fc2VsZWN0ZWRWYWx1ZT0iIjsKdGhpcy5faXRlbURhdGE9bnVsbDsKdGhpcy5fZXhwYW5kQW5pbWF0aW9uPW5ldyBiLkFuaW1hdGlvblNldHRpbmdzKHt9KTsKdGhpcy5fY29sbGFwc2VBbmltYXRpb249bmV3IGIuQW5pbWF0aW9uU2V0dGluZ3Moe30pOwp0aGlzLl9mbG93PWIuSXRlbUZsb3cuSG9yaXpvbnRhbDsKdGhpcy5fZGVmYXVsdEdyb3VwU2V0dGluZ3M9bmV3IGIuUmFkTWVudUl0ZW1Hcm91cFNldHRpbmdzKHt9KTsKdGhpcy5fY2hpbGRMaXN0RWxlbWVudD1udWxsOwp0aGlzLl9wb3N0QmFja1JlZmVyZW5jZT1udWxsOwp0aGlzLl9vbkNsaWNrRGVsZWdhdGU9bnVsbDsKdGhpcy5fd2ViU2VydmljZVNldHRpbmdzPW5ldyBiLldlYlNlcnZpY2VTZXR0aW5ncyh7fSk7CnRoaXMuX3BlcnNpc3RMb2FkT25EZW1hbmRJdGVtcz10cnVlOwp0aGlzLl9lbmFibGVPdmVybGF5PXRydWU7CnRoaXMuX2NoaWxkTGlzdEVsZW1lbnRDc3NDbGFzcz0iIjsKdGhpcy5fc2VsZWN0ZWRJdGVtSW5kZXg9bnVsbDsKdGhpcy5fZW5hYmxlZD10cnVlOwp0aGlzLl92aXNpYmxlPXRydWU7CnRoaXMuX29wZW5lZEl0ZW09bnVsbDsKdGhpcy5fbGFzdE9wZW5lZEl0ZW09bnVsbDsKdGhpcy5fY2hpbGRyZW5EZXRhY2hlZD1mYWxzZTsKdGhpcy5fb3JpZ2luYWxaSW5kZXg9bnVsbDsKdGhpcy5fZGVmYXVsdFpJbmRleD03MDAwOwp0aGlzLl96SW5kZXhJbmNyZW1lbnREZXB0aD0wOwp0aGlzLl9maXJlRXZlbnRzPXRydWU7CnRoaXMuX3dlYlNlcnZpY2VMb2FkZXI9bnVsbDsKdGhpcy5fb25Nb3VzZU91dERlbGVnYXRlPW51bGw7CnRoaXMuX29uQ2xpY2tEZWxlZ2F0ZT1udWxsOwp0aGlzLl9vblJlc2l6ZURlbGVnYXRlPW51bGw7CnRoaXMuX2Fib3V0VG9Db2xsYXBzZT1mYWxzZTsKdGhpcy5fcmlnaHRUb0xlZnQ9bnVsbDsKdGhpcy5fc2tpbj1udWxsOwp0aGlzLl9lbmFibGVJdGVtSW1hZ2VzUHJlbG9hZGluZz1mYWxzZTsKfTsKYi5SYWRNZW51Ll9jcmVhdGVDaGlsZENvbnRyb2xzPWZ1bmN0aW9uKGwsbSl7dmFyIG89bC5nZXRfaXRlbURhdGEoKTsKaWYoIW8pe3JldHVybjsKfXZhciBuPWwuZ2V0X2NoaWxkTGlzdEVsZW1lbnQoKTsKaWYoIW4pe3JldHVybjsKfWEobC5fZ2V0Q2hpbGRFbGVtZW50cygpKS5lYWNoKGZ1bmN0aW9uKHApe3ZhciBxPW5ldyBiLlJhZE1lbnVJdGVtKCk7Cm0uYWRkKHEpOwpxLl9pbml0aWFsaXplKG9bcF0sdGhpcyk7Cn0pOwp9OwpiLlJhZE1lbnUuX2FkanVzdENoaWxkcmVuV2lkdGg9ZnVuY3Rpb24obixxKXt2YXIgbT1uLmdldF9pdGVtcygpOwp2YXIgcD1tLmdldF9jb3VudCgpOwppZihxKXtmb3IodmFyIG89MDsKbzxwOwpvKyspe20uZ2V0SXRlbShvKS5fY2xlYXJXaWR0aCgpOwp9fXZhciBsPWIuUmFkTWVudS5fZ2V0TWF4Q2hpbGRXaWR0aChuKSsicHgiOwpiLlJhZE1lbnUuX3NldENoaWxkcmVuV2lkdGgobixsKTsKfTsKYi5SYWRNZW51Ll9nZXRNYXhDaGlsZFdpZHRoPWZ1bmN0aW9uKG4pe3ZhciBxPTA7CnZhciBvPW4uX2dldENvbnRyb2woKTsKdmFyIG09bi5nZXRfaXRlbXMoKTsKdmFyIHI9bS5nZXRfY291bnQoKTsKZm9yKHZhciBsPTA7Cmw8cjsKbCsrKXtpZihvLmdldF9yaWdodFRvTGVmdCgpKXt2YXIgdD1tLmdldEl0ZW0obCkuZ2V0X2ltYWdlRWxlbWVudCgpOwppZih0KXt0LnN0eWxlLnN0eWxlRmxvYXQ9ImxlZnQiOwp0LnN0eWxlLmNzc0Zsb2F0PSJsZWZ0IjsKfX12YXIgcz1tLmdldEl0ZW0obCkuX2dldFdpZHRoKCk7CnE9TWF0aC5tYXgocyxxKTsKfWlmKG4uZ2V0X2dyb3VwU2V0dGluZ3Mpe3ZhciBwPW4uZ2V0X2dyb3VwU2V0dGluZ3MoKS5nZXRfd2lkdGgoKTsKaWYocCl7cT1wOwp9fXJldHVybiBxOwp9OwpiLlJhZE1lbnUuX3NldENoaWxkcmVuV2lkdGg9ZnVuY3Rpb24obixxKXt2YXIgbz1uLl9nZXRDb250cm9sKCk7CnZhciBtPW4uZ2V0X2l0ZW1zKCk7CnZhciByPW0uZ2V0X2NvdW50KCk7CmZvcih2YXIgbD0wOwpsPHI7CmwrKyl7aWYoby5nZXRfcmlnaHRUb0xlZnQoKSl7dmFyIHM9bS5nZXRJdGVtKGwpLmdldF9pbWFnZUVsZW1lbnQoKTsKaWYocyl7cy5zdHlsZS5zdHlsZUZsb2F0PSJyaWdodCI7CnMuc3R5bGUuY3NzRmxvYXQ9InJpZ2h0IjsKfX1tLmdldEl0ZW0obCkuX3NldFdpZHRoKHEpOwp9dmFyIHA9bi5nZXRfY2hpbGRMaXN0RWxlbWVudCgpOwppZigoJHRlbGVyaWsuaXNJRTZ8fCR0ZWxlcmlrLnF1aXJrc01vZGUpKXtwLnN0eWxlLmNzc1RleHQ9cC5zdHlsZS5jc3NUZXh0Owp9fTsKYi5SYWRNZW51Ll9hZGp1c3RSb290SXRlbVdpZHRoPWZ1bmN0aW9uKG0sbil7dmFyIGw9JGdldChtKTsKdmFyIG89Yi5SYWRNZW51Ll9nZXRNYXhSb290SXRlbVdpZHRoKGwsbnx8bnVsbCk7CmIuUmFkTWVudS5fc2V0Um9vdEl0ZW1XaWR0aChsLG8sbnx8bnVsbCk7Cn07CmIuUmFkTWVudS5fZ2V0Q2hpbGRMaXN0RWxlbWVudD1mdW5jdGlvbihtKXt2YXIgbz0kdGVsZXJpay5nZXRGaXJzdENoaWxkQnlUYWdOYW1lKG0sInVsIiwwKTsKaWYoIW8pe3ZhciBuPSR0ZWxlcmlrLmdldEZpcnN0Q2hpbGRCeVRhZ05hbWUobSwiZGl2IiwwKTsKbz0kdGVsZXJpay5nZXRGaXJzdENoaWxkQnlUYWdOYW1lKG4sInVsIiwwKTsKaWYoIW8pe3ZhciBsPW47Cm49JHRlbGVyaWsuZ2V0Rmlyc3RDaGlsZEJ5VGFnTmFtZShsLCJkaXYiLDApOwpvPSR0ZWxlcmlrLmdldEZpcnN0Q2hpbGRCeVRhZ05hbWUobiwidWwiLDApOwp9fXJldHVybiBvOwp9OwpiLlJhZE1lbnUuX2dldE1heFJvb3RJdGVtV2lkdGg9ZnVuY3Rpb24ocyxvKXtpZighbyl7bz1iLlJhZE1lbnUuX2dldENoaWxkTGlzdEVsZW1lbnQocyk7Cn12YXIgbj1hKG8pLmNoaWxkcmVuKCIucm1JdGVtIik7CnZhciBxPW4ubGVuZ3RoOwp2YXIgcj0wOwpmb3IodmFyIG09MDsKbTxxOwptKyspe3ZhciBsPW5bbV07CmlmKGwubm9kZVR5cGU9PT0zKXtjb250aW51ZTsKfXZhciBwPSR0ZWxlcmlrLmdldEZpcnN0Q2hpbGRCeVRhZ05hbWUobCwiYSIsMCk7CnZhciB0OwppZihwKXt0PXAub2Zmc2V0V2lkdGg7Cn1lbHNle3Q9bC5vZmZzZXRXaWR0aDsKfXI9TWF0aC5tYXgocix0KTsKfXJldHVybiByOwp9OwpiLlJhZE1lbnUuX3NldFJvb3RJdGVtV2lkdGg9ZnVuY3Rpb24odix1LHMpe2lmKCFzKXtzPWIuUmFkTWVudS5fZ2V0Q2hpbGRMaXN0RWxlbWVudCh2KTsKfXZhciBxPWEocykuY2hpbGRyZW4oIi5ybUl0ZW0iKTsKdmFyIHQ9cS5sZW5ndGg7CmlmKHU9PTApe3JldHVybjsKfWZvcih2YXIgbj0wOwpuPHQ7Cm4rKyl7dmFyIGw9cVtuXTsKaWYobC5ub2RlVHlwZT09Myl7Y29udGludWU7Cn12YXIgcD0kdGVsZXJpay5nZXRGaXJzdENoaWxkQnlUYWdOYW1lKGwsImEiLDApOwppZighcCl7cD1sOwp9dmFyIG89dTsKdmFyIG09JHRlbGVyaWsuZ2V0UGFkZGluZ0JveChwKS5ob3Jpem9udGFsOwp2YXIgcj0kdGVsZXJpay5nZXRCb3JkZXJCb3gocCkuaG9yaXpvbnRhbDsKby09bStyOwp2YXIgdz1wLnN0eWxlLndpZHRoOwppZighd3x8byE9dyl7cC5zdHlsZS53aWR0aD1vKyJweCI7Cn19aWYoJHRlbGVyaWsuaXNTYWZhcmkpe3Muc3R5bGUud2lkdGg9dTsKfWlmKHYuc3R5bGUud2lkdGg9PT0iIiYmYi5SYWRNZW51Ll9yZXF1aXJlc1JpZ2h0VG9MZWZ0KHYpKXt2LnN0eWxlLndpZHRoPXUrInB4IjsKfX07CmIuUmFkTWVudS5fcmVxdWlyZXNSaWdodFRvTGVmdD1mdW5jdGlvbihtKXt2YXIgbD1tOwp3aGlsZShsLm5vZGVUeXBlIT09OSl7aWYobC5kaXI9PSJydGwiKXtyZXR1cm4gdHJ1ZTsKfWlmKGEobCkuY3NzKCJkaXJlY3Rpb24iKT09InJ0bCIpe3JldHVybiB0cnVlOwp9bD1sLnBhcmVudE5vZGU7Cn1yZXR1cm4gZmFsc2U7Cn07CmIuUmFkTWVudS5fYWRqdXN0TGlzdFdpZHRoPWZ1bmN0aW9uKGwsbSl7dmFyIG89YShsLmdldF9jaGlsZExpc3RFbGVtZW50KCkpOwp2YXIgbj0wOwphKG8pLmZpbmQoIi5ybUl0ZW0iKS5lYWNoKGZ1bmN0aW9uKCl7bis9dGhpcy5vZmZzZXRXaWR0aDsKdGhpcy5zdHlsZS5jbGVhcj0ibm9uZSI7Cn0pOwptPW18fDA7Cm0rKzsKaWYobj4wKXtpZigkdGVsZXJpay5xdWlya3NNb2RlKXtuKz0oby5jc3MoImJvcmRlci1sZWZ0LXN0eWxlIikhPSJub25lIj9wYXJzZUludChvLmNzcygiYm9yZGVyLWxlZnQtd2lkdGgiKSwxMCk6MCkrKG8uY3NzKCJib3JkZXItcmlnaHQtc3R5bGUiKSE9Im5vbmUiP3BhcnNlSW50KG8uY3NzKCJib3JkZXItcmlnaHQtd2lkdGgiKSwxMCk6MCkrKHBhcnNlSW50KG8uY3NzKCJwYWRkaW5nLWxlZnQiKSwxMCl8fDApKyhwYXJzZUludChvLmNzcygicGFkZGluZy1yaWdodCIpLDEwKXx8MCk7Cn1pZigkdGVsZXJpay5pc0lFOU1vZGUpe24rPTI7Cn1vWzBdLnN0eWxlLndpZHRoPW4rInB4IjsKfWVsc2V7aWYobTwzKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5SYWRNZW51Ll9hZGp1c3RMaXN0V2lkdGgobCxtKTsKfSwwKTsKfX19OwpiLlJhZE1lbnUuX2dldFZpZXdQb3J0U2l6ZT1mdW5jdGlvbigpe3ZhciBsPSR0ZWxlcmlrLmdldFZpZXdQb3J0U2l6ZSgpOwp2YXIgbT1kb2N1bWVudC5jb21wYXRNb2RlIT0iQ1NTMUNvbXBhdCI7CmlmKCR0ZWxlcmlrLmlzRmlyZWZveCYmbSl7bC5oZWlnaHQrPWRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOwp9cmV0dXJuIGw7Cn07CmIuUmFkTWVudS5fdXBkYXRlQ2hpbGRyZW5Qb3NpdGlvbkNsYXNzPWZ1bmN0aW9uKG0pe3ZhciBsPWZ1bmN0aW9uKG8pe2EobykuY2hpbGRyZW4oIi5ybUl0ZW0iKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5faXRlbSYmdGhpcy5faXRlbS5nZXRfdmlzaWJsZSgpKTsKfSkucmVtb3ZlQ2xhc3MoInJtRmlyc3Qgcm1MYXN0IikuZmlsdGVyKCI6Zmlyc3QiKS5hZGRDbGFzcygicm1GaXJzdCIpLmVuZCgpLmZpbHRlcigiOmxhc3QiKS5hZGRDbGFzcygicm1MYXN0Iik7Cn07CmlmKCFtKXtyZXR1cm47Cn12YXIgbj1tLmdldF9jaGlsZExpc3RFbGVtZW50KCk7CmlmKCFuKXtyZXR1cm47Cn1pZihhKG4pLmlzKCIucm1NdWx0aUNvbHVtbiIpKXthKG4pLmZpbmQoIj4gLnJtR3JvdXBDb2x1bW4gPiB1bCIpLmVhY2goZnVuY3Rpb24oKXtsKHRoaXMpOwp9KTsKfWVsc2V7bChuKTsKfX07CmIuUmFkTWVudS5fcmVtb3ZlQ2hpbGRMaXN0Q29ybmVycz1mdW5jdGlvbihsKXthKGwuZ2V0X2NoaWxkTGlzdEVsZW1lbnQoKSkuZmluZCgiLnJtVG9wUmlnaHQsIC5ybUJvdHRvbUxlZnQsIC5ybUJvdHRvbVJpZ2h0LCAucm1Ub3BGaXgsIC5ybUJvdHRvbUZpeCIpLnJlbW92ZSgpOwpsLl9yb3VuZGVkQ29ybmVyc1JlbmRlcmVkPWZhbHNlOwpsLl9zaGFkb3dzUmVuZGVyZWQ9ZmFsc2U7Cn07CmIuUmFkTWVudS5fcmVtb3ZlU2Nyb2xsV3JhcENvbnRhaW5lcj1mdW5jdGlvbihtKXtpZihtLl9zbGlkZSl7dmFyIGw9YShtLl9nZXRTY3JvbGxXcmFwRWxlbWVudCgpKS5hcHBlbmRUbyhtLl9zbGlkZS5nZXRfZWxlbWVudCgpKVswXTsKaWYobCl7YShtLmdldF9lbGVtZW50KCkpLmZpbmQoIi5ybVNjcm9sbFdyYXBDb250YWluZXIiKS5yZW1vdmUoKTsKbS5fc2xpZGUuc2V0X2FuaW1hdGVkRWxlbWVudChsKTsKfW0uX3JvdW5kZWRDb3JuZXJzUmVuZGVyZWQ9ZmFsc2U7Cm0uX3NoYWRvd3NSZW5kZXJlZD1mYWxzZTsKfX07CmIuUmFkTWVudS5fcmVuZGVyQ29ybmVyRWxlbWVudHM9ZnVuY3Rpb24obCxtKXt2YXIgcD1hKGwuX2dldFNjcm9sbFdyYXBFbGVtZW50KCkpOwp2YXIgbz0nPGxpIGNsYXNzPSJybVRvcFJpZ2h0Ij48L2xpPjxsaSBjbGFzcz0icm1Cb3R0b21MZWZ0Ij48L2xpPjxsaSBjbGFzcz0icm1Cb3R0b21SaWdodCI+PC9saT48bGkgY2xhc3M9InJtVG9wRml4Ij48L2xpPjxsaSBjbGFzcz0icm1Cb3R0b21GaXgiPjwvbGk+JzsKaWYobSl7bz0nPGxpIGNsYXNzPSJybVRvcFJpZ2h0IHJtVG9wU2hhZG93UmlnaHQiPjwvbGk+PGxpIGNsYXNzPSJybUJvdHRvbUxlZnQgcm1Cb3R0b21TaGFkb3dMZWZ0Ij48L2xpPjxsaSBjbGFzcz0icm1Cb3R0b21SaWdodCBybUJvdHRvbVNoYWRvd1JpZ2h0Ij48L2xpPic7Cn1pZihwLmxlbmd0aCl7dmFyIG49YShsLmdldF9lbGVtZW50KCkpLmZpbmQoIi5ybVNjcm9sbFdyYXBDb250YWluZXIiKTsKaWYoIW4ubGVuZ3RoKXtuPWEoJzxkaXYgY2xhc3M9InJtU2Nyb2xsV3JhcENvbnRhaW5lciI+JykuYXBwZW5kKHApLmFwcGVuZFRvKGwuX2dldEFuaW1hdGlvbkNvbnRhaW5lcigpKTsKbC5fYW5pbWF0ZWRFbGVtZW50PW5bMF07CmwuX3NsaWRlLnNldF9hbmltYXRlZEVsZW1lbnQobC5fZ2V0QW5pbWF0ZWRFbGVtZW50KCkpOwp9bi5wcmVwZW5kKG8pOwp9ZWxzZXthKGwuZ2V0X2NoaWxkTGlzdEVsZW1lbnQoKSkucHJlcGVuZChvKTsKfX07CmIuUmFkTWVudS5fZW5zdXJlQ29ybmVycz1mdW5jdGlvbihsLG0pe2lmKCR0ZWxlcmlrLmlzSUU2fHwkdGVsZXJpay5xdWlya3NNb2RlKXtpZihsLmdldF9lbmFibGVSb3VuZGVkQ29ybmVycygpfHxsLmdldF9lbmFibGVTaGFkb3dzKCkpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgbj1hKG0uX3NsaWRlLmdldF9lbGVtZW50KCkpLmNoaWxkcmVuKCIucm1TY3JvbGxXcmFwQ29udGFpbmVyIik7CnZhciByPW0uZ2V0X2NoaWxkTGlzdEVsZW1lbnQoKTsKdmFyIHA9MDsKdmFyIG89MDsKaWYoIW4ubGVuZ3RoKXtuPWEocik7CnIuc3R5bGUuY3NzVGV4dD1yLnN0eWxlLmNzc1RleHQ7CnA9bi5pbm5lcldpZHRoKCktNDsKbz1uLmlubmVySGVpZ2h0KCk7Cn1lbHNle3ZhciBxPWEobS5fZ2V0U2Nyb2xsV3JhcEVsZW1lbnQoKSk7CnA9cS5pbm5lcldpZHRoKCk7Cm89cS5pbm5lckhlaWdodCgpKzQ7Cn1hKG4pLmNoaWxkcmVuKCIucm1Ub3BSaWdodCIpLmhlaWdodChvKTsKYShuKS5jaGlsZHJlbigiLnJtVG9wRml4LCAucm1Cb3R0b21GaXgiKS53aWR0aChwKTsKYShuKS5jaGlsZHJlbigiLnJtQm90dG9tUmlnaHQsIC5ybUJvdHRvbUxlZnQiKS5hZGQocikuYWRkKG4pLmVhY2goZnVuY3Rpb24oKXt0aGlzLnN0eWxlLmNzc1RleHQ9dGhpcy5zdHlsZS5jc3NUZXh0Owp9KTsKYShuKS5jaGlsZHJlbigiLnJtQm90dG9tU2hhZG93TGVmdCIpLndpZHRoKG4uaW5uZXJXaWR0aCgpLTQpOwp9LDApOwp9fX07CmIuUmFkTWVudS5fcHJlbG9hZEl0ZW1JbWFnZXM9ZnVuY3Rpb24obil7dmFyIG09WyJpbWFnZVVybCIsImhvdmVyZWRJbWFnZVVybCIsImV4cGFuZGVkSW1hZ2VVcmwiLCJkaXNhYmxlZEltYWdlVXJsIiwiY2xpY2tlZEltYWdlVXJsIiwic2VsZWN0ZWRJbWFnZVVybCJdOwp2YXIgbD1mdW5jdGlvbihzKXtmb3IodmFyIHA9MDsKcDxzLmxlbmd0aDsKcCsrKXt2YXIgbz1zW3BdOwpmb3IodmFyIHE9MDsKcTxtLmxlbmd0aDsKcSsrKXt2YXIgcj1vW21bcV1dOwppZihyKXtiLlJhZE1lbnUuX3ByZWxvYWRJbWFnZShyKTsKfX1pZihvLml0ZW1zKXtsKG8uaXRlbXMpOwp9fX07Cmwobik7Cn07CmIuUmFkTWVudS5fcHJlbG9hZEltYWdlPWZ1bmN0aW9uKG0pe3ZhciBsPW5ldyBJbWFnZSgpOwpsLnNyYz1tOwp9OwpiLlJhZE1lbnUucHJvdG90eXBlPXtpbml0aWFsaXplOmZ1bmN0aW9uKCl7Yi5SYWRNZW51LmNhbGxCYXNlTWV0aG9kKHRoaXMsImluaXRpYWxpemUiKTsKdmFyIG09dGhpcy5nZXRfZWxlbWVudCgpOwptLnZhbHVlPXRoaXMuX3NlbGVjdGVkVmFsdWU7CmlmKHRoaXMuZ2V0X3JpZ2h0VG9MZWZ0KCkpe3RoaXMuX2luaXRSaWdodFRvTGVmdCgpOwp9aWYodGhpcy5fZmxvdz09Yi5JdGVtRmxvdy5WZXJ0aWNhbCYmdGhpcy5nZXRfY2hpbGRMaXN0RWxlbWVudCgpKXt0aGlzLl9hZGp1c3RSb290SXRlbVdpZHRoKCk7Cn10aGlzLl9vcmlnaW5hbFpJbmRleD1wYXJzZUludCgkdGVsZXJpay5nZXRDdXJyZW50U3R5bGUobSwiekluZGV4IikpOwppZighdGhpcy5fb3JpZ2luYWxaSW5kZXgpe20uc3R5bGUuekluZGV4PXRoaXMuX2RlZmF1bHRaSW5kZXg7CnRoaXMuX29yaWdpbmFsWkluZGV4PXRoaXMuX2RlZmF1bHRaSW5kZXg7Cn10aGlzLl9vbkNsaWNrRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vbkNsaWNrKTsKJHRlbGVyaWsuYWRkSGFuZGxlcihkb2N1bWVudCwiY2xpY2siLHRoaXMuX29uQ2xpY2tEZWxlZ2F0ZSk7CmlmKCF0aGlzLmdldF9jbGlja1RvT3BlbigpKXtpZigkdGVsZXJpay5pc0lFKXt0aGlzLl9vbk1vdXNlT3V0RGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vbk1vdXNlT3V0KTsKJHRlbGVyaWsuYWRkSGFuZGxlcihkb2N1bWVudCwkdGVsZXJpay5pc1RvdWNoRGV2aWNlPyJ0b3VjaGVuZCI6Im1vdXNlb3V0Iix0aGlzLl9vbk1vdXNlT3V0RGVsZWdhdGUpOwp9fXRoaXMuX29uUmVzaXplRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vblJlc2l6ZSk7CiR0ZWxlcmlrLmFkZEhhbmRsZXIod2luZG93LCJyZXNpemUiLHRoaXMuX29uUmVzaXplRGVsZWdhdGUpOwp0aGlzLl9ldmVudE1hcC5hZGRIYW5kbGVyRm9yQ2xhc3NOYW1lKCR0ZWxlcmlrLmlzVG91Y2hEZXZpY2U/InRvdWNoc3RhcnQiOiJtb3VzZW92ZXIiLGYsdGhpcy5fb25JdGVtTW91c2VPdmVyKTsKdGhpcy5fZXZlbnRNYXAuYWRkSGFuZGxlckZvckNsYXNzTmFtZSgkdGVsZXJpay5pc1RvdWNoRGV2aWNlPyJ0b3VjaGVuZCI6Im1vdXNlb3V0IixmLHRoaXMuX29uSXRlbU1vdXNlT3V0KTsKdGhpcy5fZXZlbnRNYXAuYWRkSGFuZGxlckZvckNsYXNzTmFtZSgiZHJhZ3N0YXJ0IixmLHRoaXMuX29uSXRlbURyYWdTdGFydCk7CnRoaXMuX2V2ZW50TWFwLmFkZEhhbmRsZXJGb3JDbGFzc05hbWUoImNsaWNrIixlLHRoaXMuX29uSXRlbUNsaWNrKTsKdGhpcy5fZXZlbnRNYXAuYWRkSGFuZGxlckZvckNsYXNzTmFtZSgiY2xpY2siLGYsdGhpcy5fb25JdGVtQ2xpY2spOwp0aGlzLl9ldmVudE1hcC5hZGRIYW5kbGVyRm9yQ2xhc3NOYW1lKCR0ZWxlcmlrLmlzVG91Y2hEZXZpY2U/InRvdWNoc3RhcnQiOiJtb3VzZW92ZXIiLGUsdGhpcy5fb25MaW5rTW91c2VPdmVyKTsKdGhpcy5fZXZlbnRNYXAuYWRkSGFuZGxlckZvckNsYXNzTmFtZSgkdGVsZXJpay5pc1RvdWNoRGV2aWNlPyJ0b3VjaGVuZCI6Im1vdXNlb3V0IixlLHRoaXMuX29uTGlua01vdXNlT3V0KTsKdGhpcy5fZXZlbnRNYXAuYWRkSGFuZGxlckZvckNsYXNzTmFtZShrLGUsdGhpcy5fb25MaW5rTW91c2VEb3duKTsKdGhpcy5fZXZlbnRNYXAuYWRkSGFuZGxlckZvckNsYXNzTmFtZShkLGUsdGhpcy5fb25MaW5rTW91c2VVcCk7CnRoaXMuX2V2ZW50TWFwLmFkZEhhbmRsZXJGb3JDbGFzc05hbWUoImJsdXIiLGUsdGhpcy5fb25MaW5rQmx1cik7CnRoaXMuX2V2ZW50TWFwLmFkZEhhbmRsZXJGb3JDbGFzc05hbWUoImRlYWN0aXZhdGUiLGUsdGhpcy5fb25MaW5rQmx1cik7CnRoaXMuX2V2ZW50TWFwLmFkZEhhbmRsZXJGb3JDbGFzc05hbWUoImZvY3VzIixlLHRoaXMuX29uTGlua0ZvY3VzKTsKdGhpcy5fZXZlbnRNYXAuYWRkSGFuZGxlckZvckNsYXNzTmFtZSgiYWN0aXZhdGUiLGUsdGhpcy5fb25MaW5rRm9jdXMpOwp0aGlzLl9ldmVudE1hcC5hZGRIYW5kbGVyRm9yQ2xhc3NOYW1lKCJrZXlkb3duIixlLHRoaXMuX29uTGlua0tleURvd24pOwppZigkdGVsZXJpay5pc0ZpcmVmb3gpe3RoaXMuX29uSXRlbU1vdXNld2hlZWxEZWxlZ2F0ZT1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX29uSXRlbU1vdXNld2hlZWwpOwokdGVsZXJpay5hZGRIYW5kbGVyKGRvY3VtZW50LCJET01Nb3VzZVNjcm9sbCIsdGhpcy5fb25JdGVtTW91c2V3aGVlbERlbGVnYXRlKTsKfXRoaXMuX2V2ZW50TWFwLmFkZEhhbmRsZXJGb3JDbGFzc05hbWUoIm1vdXNld2hlZWwiLGYsdGhpcy5fb25JdGVtTW91c2V3aGVlbCk7CnRoaXMuX2V2ZW50TWFwLmFkZEhhbmRsZXJGb3JDbGFzc05hbWUoayxqLHRoaXMuX29uVG9wQXJyb3dNb3VzZURvd24pOwp0aGlzLl9ldmVudE1hcC5hZGRIYW5kbGVyRm9yQ2xhc3NOYW1lKGQsaix0aGlzLl9vblRvcEFycm93TW91c2VVcCk7CnRoaXMuX2V2ZW50TWFwLmFkZEhhbmRsZXJGb3JDbGFzc05hbWUoJHRlbGVyaWsuaXNUb3VjaERldmljZT8idG91Y2hzdGFydCI6Im1vdXNlb3ZlciIsaix0aGlzLl9vblRvcEFycm93TW91c2VPdmVyKTsKdGhpcy5fZXZlbnRNYXAuYWRkSGFuZGxlckZvckNsYXNzTmFtZSgkdGVsZXJpay5pc1RvdWNoRGV2aWNlPyJ0b3VjaGVuZCI6Im1vdXNlb3V0IixqLHRoaXMuX29uVG9wQXJyb3dNb3VzZU91dCk7CnRoaXMuX2V2ZW50TWFwLmFkZEhhbmRsZXJGb3JDbGFzc05hbWUoImNsaWNrIixqLHRoaXMuX29uU2Nyb2xsQXJyb3dDbGlja2VkKTsKdGhpcy5fZXZlbnRNYXAuYWRkSGFuZGxlckZvckNsYXNzTmFtZShrLGgsdGhpcy5fb25Cb3R0b21BcnJvd01vdXNlRG93bik7CnRoaXMuX2V2ZW50TWFwLmFkZEhhbmRsZXJGb3JDbGFzc05hbWUoZCxoLHRoaXMuX29uQm90dG9tQXJyb3dNb3VzZVVwKTsKdGhpcy5fZXZlbnRNYXAuYWRkSGFuZGxlckZvckNsYXNzTmFtZSgkdGVsZXJpay5pc1RvdWNoRGV2aWNlPyJ0b3VjaHN0YXJ0IjoibW91c2VvdmVyIixoLHRoaXMuX29uQm90dG9tQXJyb3dNb3VzZU92ZXIpOwp0aGlzLl9ldmVudE1hcC5hZGRIYW5kbGVyRm9yQ2xhc3NOYW1lKCR0ZWxlcmlrLmlzVG91Y2hEZXZpY2U/InRvdWNoZW5kIjoibW91c2VvdXQiLGgsdGhpcy5fb25Cb3R0b21BcnJvd01vdXNlT3V0KTsKdGhpcy5fZXZlbnRNYXAuYWRkSGFuZGxlckZvckNsYXNzTmFtZSgiY2xpY2siLGgsdGhpcy5fb25TY3JvbGxBcnJvd0NsaWNrZWQpOwp0aGlzLl9ldmVudE1hcC5hZGRIYW5kbGVyRm9yQ2xhc3NOYW1lKGssYyx0aGlzLl9vbkxlZnRBcnJvd01vdXNlRG93bik7CnRoaXMuX2V2ZW50TWFwLmFkZEhhbmRsZXJGb3JDbGFzc05hbWUoZCxjLHRoaXMuX29uTGVmdEFycm93TW91c2VVcCk7CnRoaXMuX2V2ZW50TWFwLmFkZEhhbmRsZXJGb3JDbGFzc05hbWUoJHRlbGVyaWsuaXNUb3VjaERldmljZT8idG91Y2hzdGFydCI6Im1vdXNlb3ZlciIsYyx0aGlzLl9vbkxlZnRBcnJvd01vdXNlT3Zlcik7CnRoaXMuX2V2ZW50TWFwLmFkZEhhbmRsZXJGb3JDbGFzc05hbWUoJHRlbGVyaWsuaXNUb3VjaERldmljZT8idG91Y2hlbmQiOiJtb3VzZW91dCIsYyx0aGlzLl9vbkxlZnRBcnJvd01vdXNlT3V0KTsKdGhpcy5fZXZlbnRNYXAuYWRkSGFuZGxlckZvckNsYXNzTmFtZSgiY2xpY2siLGMsdGhpcy5fb25TY3JvbGxBcnJvd0NsaWNrZWQpOwp0aGlzLl9ldmVudE1hcC5hZGRIYW5kbGVyRm9yQ2xhc3NOYW1lKGssaSx0aGlzLl9vblJpZ2h0QXJyb3dNb3VzZURvd24pOwp0aGlzLl9ldmVudE1hcC5hZGRIYW5kbGVyRm9yQ2xhc3NOYW1lKGQsaSx0aGlzLl9vblJpZ2h0QXJyb3dNb3VzZVVwKTsKdGhpcy5fZXZlbnRNYXAuYWRkSGFuZGxlckZvckNsYXNzTmFtZSgkdGVsZXJpay5pc1RvdWNoRGV2aWNlPyJ0b3VjaHN0YXJ0IjoibW91c2VvdmVyIixpLHRoaXMuX29uUmlnaHRBcnJvd01vdXNlT3Zlcik7CnRoaXMuX2V2ZW50TWFwLmFkZEhhbmRsZXJGb3JDbGFzc05hbWUoJHRlbGVyaWsuaXNUb3VjaERldmljZT8idG91Y2hlbmQiOiJtb3VzZW91dCIsaSx0aGlzLl9vblJpZ2h0QXJyb3dNb3VzZU91dCk7CnRoaXMuX2V2ZW50TWFwLmFkZEhhbmRsZXJGb3JDbGFzc05hbWUoImNsaWNrIixpLHRoaXMuX29uU2Nyb2xsQXJyb3dDbGlja2VkKTsKdGhpcy5faW5pdGlhbGl6ZVNjcm9sbGVyKCk7CmlmKCF0aGlzLmdldF9lbmFibGVkKCkpe3RoaXMuc2V0X2VuYWJsZWQoZmFsc2UpOwp9aWYodGhpcy5nZXRfd2ViU2VydmljZVNldHRpbmdzKCkuZ2V0X2lzT0RhdGEoKSl7dGhpcy5faW5pdGlhbGl6ZVdlYlNlcnZpY2VMb2FkZXIoKTsKaWYodGhpcy5nZXRfaXRlbXMoKS5nZXRfY291bnQoKT09MCl7dmFyIGw9YS5yYWlzZUNhbmNlbGxhYmxlQ29udHJvbEV2ZW50KHRoaXMsIm1lbnVQb3B1bGF0aW5nIix7fSk7CmlmKCFsKXt0aGlzLl93ZWJTZXJ2aWNlTG9hZGVyLmxvYWREYXRhKHtpc1Jvb3RMZXZlbDp0cnVlfSx0aGlzKTsKfX19dGhpcy5fcmFpc2VFdmVudCgibG9hZCIsbnVsbCk7Cn0sZGlzcG9zZTpmdW5jdGlvbigpe2IuUmFkTWVudS5jYWxsQmFzZU1ldGhvZCh0aGlzLCJkaXNwb3NlIik7CmlmKHRoaXMuX29uQ2xpY2tEZWxlZ2F0ZSl7JHRlbGVyaWsucmVtb3ZlSGFuZGxlcihkb2N1bWVudCwiY2xpY2siLHRoaXMuX29uQ2xpY2tEZWxlZ2F0ZSk7CnRoaXMuX29uQ2xpY2tEZWxlZ2F0ZT1udWxsOwp9aWYodGhpcy5fb25Nb3VzZU91dERlbGVnYXRlKXskdGVsZXJpay5yZW1vdmVIYW5kbGVyKGRvY3VtZW50LCR0ZWxlcmlrLmlzVG91Y2hEZXZpY2U/InRvdWNoZW5kIjoibW91c2VvdXQiLHRoaXMuX29uTW91c2VPdXREZWxlZ2F0ZSk7CnRoaXMuX29uTW91c2VPdXREZWxlZ2F0ZT1udWxsOwp9aWYodGhpcy5fb25SZXNpemVEZWxlZ2F0ZSl7JHRlbGVyaWsucmVtb3ZlSGFuZGxlcih3aW5kb3csInJlc2l6ZSIsdGhpcy5fb25SZXNpemVEZWxlZ2F0ZSk7CnRoaXMuX29uUmVzaXplRGVsZWdhdGU9bnVsbDsKfWlmKHRoaXMuX29uSXRlbU1vdXNld2hlZWxEZWxlZ2F0ZSl7JHRlbGVyaWsucmVtb3ZlSGFuZGxlcihkb2N1bWVudCwiRE9NTW91c2VTY3JvbGwiLHRoaXMuX29uSXRlbU1vdXNld2hlZWxEZWxlZ2F0ZSk7CnRoaXMuX29uSXRlbU1vdXNld2hlZWxEZWxlZ2F0ZT1udWxsOwp9aWYodGhpcy5fZXZlbnRNYXApe3RoaXMuX2V2ZW50TWFwLmRpc3Bvc2UoKTsKdGhpcy5fZXZlbnRNYXA9bnVsbDsKfWlmKHRoaXMuX3Njcm9sbGVyKXt0aGlzLl9zY3JvbGxlci5kaXNwb3NlKCk7CnRoaXMuX3Njcm9sbGVyPW51bGw7Cn19LHJlcGFpbnQ6ZnVuY3Rpb24oKXt2YXIgbj10aGlzLl9mbG93PT1iLkl0ZW1GbG93LlZlcnRpY2FsOwppZihuKXt0aGlzLl9hZGp1c3RSb290SXRlbVdpZHRoKCk7Cn12YXIgbD10aGlzLmdldF9lbGVtZW50KCk7CmlmKHRoaXMuX3Njcm9sbGVyKXt2YXIgbT10aGlzLl9nZXRTY3JvbGxXcmFwRWxlbWVudCgpOwppZihuKXttLnN0eWxlLmhlaWdodD1sLnN0eWxlLmhlaWdodDsKfWVsc2V7bS5zdHlsZS53aWR0aD1sLnN0eWxlLndpZHRoOwp9dGhpcy5faW5pdGlhbGl6ZVNjcm9sbGVyKCk7Cn13aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2wuc3R5bGUuY3NzVGV4dD1sLnN0eWxlLmNzc1RleHQ7Cn0sMCk7Cn0sX2luaXRpYWxpemVPRGF0YVNvdXJjZUJpbmRlcjpmdW5jdGlvbigpe3ZhciBsPXRoaXM7CnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgbz1sLmdldF9vZGF0YUNsaWVudFNldHRpbmdzKCkuT0RhdGFTb3VyY2VJRCxwPSRmaW5kKG8pOwppZighcCl7dmFyIG49U3RyaW5nLmZvcm1hdCgiRGF0YVNvdXJjZSB3aXRoIGlkIHswfSB3YXMgbm90IGZvdW5kIG9uIHRoZSBwYWdlIixvKTsKYWxlcnQobik7CnJldHVybjsKfWwuX2hpZXJhcmhpY2FsQmluZGVyPW5ldyBiLlJhZE9EYXRhRGF0YVNvdXJjZS5CaW5kZXIuSGllcmFyaGljYWwocCxsKTsKbC5faGllcmFyaGljYWxCaW5kZXIuaW5pdGlhbGl6ZSgpOwp2YXIgbT1hLnJhaXNlQ2FuY2VsbGFibGVDb250cm9sRXZlbnQobCwibWVudVBvcHVsYXRpbmciLHt9KTsKaWYoIW0pe2wuX29uRGF0YU5lZWRlZCgpOwp9fSwxKTsKfSxfb25EYXRhTmVlZGVkOmZ1bmN0aW9uKG8pe3ZhciBsPW8hPXVuZGVmaW5lZD8xK28uZ2V0X2xldmVsKCk6MCxtPW8hPXVuZGVmaW5lZD9vLmdldF9rZXkoKToibnVsbCI7CnZhciBuPXtsZXZlbDpsLGtleTptLGV2ZW50czp7cmVxdWVzdGluZzpmdW5jdGlvbihxKXtpZihvKXt2YXIgcD1uZXcgVGVsZXJpay5XZWIuVUkuV2ViU2VydmljZUxvYWRlckV2ZW50QXJncyhvKTsKdGhpcy5fb25JdGVtTG9hZGluZ1N0YXJ0ZWQodGhpcyxwKTsKfX0sc3VjY2VzczpmdW5jdGlvbihxKXt2YXIgcD1vfHx0aGlzLHI9bmV3IFRlbGVyaWsuV2ViLlVJLldlYlNlcnZpY2VMb2FkZXJTdWNjZXNzRXZlbnRBcmdzKHEscCk7CnRoaXMuX29uSXRlbUxvYWRpbmdTdWNjZXNzKHRoaXMscik7Cn0sZmFpbDpmdW5jdGlvbihwKXt9fX07CnRoaXMuX2hpZXJhcmhpY2FsQmluZGVyLmZldGNoKG4pOwp9LGdldF9pdGVtczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRDaGlsZHJlbigpOwp9LHNldF9pdGVtczpmdW5jdGlvbihsKXt0aGlzLl9jaGlsZHJlbj1sOwp9LGdldF9jaGlsZExpc3RFbGVtZW50OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX2NoaWxkTGlzdEVsZW1lbnQpe3ZhciBtPXRoaXMuZ2V0X2VsZW1lbnQoKTsKdmFyIGw9dGhpcy5fZ2V0U2Nyb2xsV3JhcEVsZW1lbnQoKTsKaWYobCl7bT1sOwp9dGhpcy5fY2hpbGRMaXN0RWxlbWVudD0kdGVsZXJpay5nZXRGaXJzdENoaWxkQnlUYWdOYW1lKG0sInVsIiwwKTsKfXJldHVybiB0aGlzLl9jaGlsZExpc3RFbGVtZW50Owp9LGdldF9leHBhbmRBbmltYXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXhwYW5kQW5pbWF0aW9uOwp9LHNldF9leHBhbmRBbmltYXRpb246ZnVuY3Rpb24obSl7dmFyIGw9U3lzLlNlcmlhbGl6YXRpb24uSmF2YVNjcmlwdFNlcmlhbGl6ZXIuZGVzZXJpYWxpemUobSk7CnRoaXMuX2V4cGFuZEFuaW1hdGlvbj1uZXcgYi5BbmltYXRpb25TZXR0aW5ncyhsKTsKfSxnZXRfY29sbGFwc2VBbmltYXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29sbGFwc2VBbmltYXRpb247Cn0sc2V0X2NvbGxhcHNlQW5pbWF0aW9uOmZ1bmN0aW9uKG0pe3ZhciBsPVN5cy5TZXJpYWxpemF0aW9uLkphdmFTY3JpcHRTZXJpYWxpemVyLmRlc2VyaWFsaXplKG0pOwp0aGlzLl9jb2xsYXBzZUFuaW1hdGlvbj1uZXcgYi5BbmltYXRpb25TZXR0aW5ncyhsKTsKfSxnZXRfZGVmYXVsdEdyb3VwU2V0dGluZ3M6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVmYXVsdEdyb3VwU2V0dGluZ3M7Cn0sc2V0X2RlZmF1bHRHcm91cFNldHRpbmdzOmZ1bmN0aW9uKG0pe3ZhciBsPVN5cy5TZXJpYWxpemF0aW9uLkphdmFTY3JpcHRTZXJpYWxpemVyLmRlc2VyaWFsaXplKG0pOwp0aGlzLl9kZWZhdWx0R3JvdXBTZXR0aW5ncz1uZXcgYi5SYWRNZW51SXRlbUdyb3VwU2V0dGluZ3MobCk7Cn0sZ2V0X2l0ZW1EYXRhOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2l0ZW1EYXRhOwp9LHNldF9pdGVtRGF0YTpmdW5jdGlvbihsKXtpZih0aGlzLl9lbmFibGVJdGVtSW1hZ2VzUHJlbG9hZGluZyl7Yi5SYWRNZW51Ll9wcmVsb2FkSXRlbUltYWdlcyhsKTsKfXRoaXMuX2l0ZW1EYXRhPWw7Cn0sc2V0X2VuYWJsZWQ6ZnVuY3Rpb24obyl7Yi5SYWRNZW51LmNhbGxCYXNlTWV0aG9kKHRoaXMsInNldF9lbmFibGVkIixbb10pOwppZighdGhpcy5nZXRfaXNJbml0aWFsaXplZCgpKXtyZXR1cm47Cn10aGlzLmdldF9lbGVtZW50KCkuZGlzYWJsZWQ9IW87CnZhciBsPXRoaXMuZ2V0X2l0ZW1zKCk7CnZhciBuPWwuZ2V0X2NvdW50KCk7CmlmKCFvKXt0aGlzLmRpc2FibGVFdmVudHMoKTsKZm9yKHZhciBtPTA7Cm08bjsKbSsrKXtsLmdldEl0ZW0obSkuZGlzYWJsZSgpOwp9fWVsc2V7dGhpcy5lbmFibGVFdmVudHMoKTsKZm9yKHZhciBtPTA7Cm08bjsKbSsrKXtsLmdldEl0ZW0obSkuZW5hYmxlKCk7Cn19fSxnZXRfZm9jdXNlZEl0ZW06ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZm9jdXNlZEl0ZW07Cn0sZ2V0X29wZW5lZEl0ZW06ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3BlbmVkSXRlbTsKfSxnZXRfaGllcmFyY2h5TW9kZWw6ZnVuY3Rpb24oKXt2YXIgbT10aGlzLmdldF9vZGF0YUNsaWVudFNldHRpbmdzKCk7Cm0uRXhwYW5kTW9kZT1iLk1lbnVJdGVtRXhwYW5kTW9kZS5XZWJTZXJ2aWNlOwp2YXIgbD10aGlzLmdldF9kYXRhQmluZGluZ3MoKTsKaWYobCl7bFtsLmxlbmd0aC0xXS5FeHBhbmRNb2RlPWIuTWVudUl0ZW1FeHBhbmRNb2RlLkNsaWVudFNpZGU7Cn1tLkRhdGFCaW5kaW5ncz1sOwpyZXR1cm4gYi5SYWRPRGF0YURhdGFTb3VyY2UuQmluZGVyLkhpZXJhcmhpY2FsLk1vZGVsKG0pOwp9LGdldF93ZWJTZXJ2aWNlU2V0dGluZ3M6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fd2ViU2VydmljZVNldHRpbmdzOwp9LHNldF93ZWJTZXJ2aWNlU2V0dGluZ3M6ZnVuY3Rpb24obCl7dmFyIG09Zy5kZXNlcmlhbGl6ZShsKTsKaWYobS5PRGF0YVNldHRpbmdzKXt0aGlzLl93ZWJTZXJ2aWNlU2V0dGluZ3M9bmV3IGIuTmF2aWdhdGlvbkNvbnRyb2xPRGF0YVNldHRpbmdzKG0pOwp9ZWxzZXt0aGlzLl93ZWJTZXJ2aWNlU2V0dGluZ3M9bmV3IGIuV2ViU2VydmljZVNldHRpbmdzKG0pOwp9fSxnZXRfcmlnaHRUb0xlZnQ6ZnVuY3Rpb24oKXtpZih0aGlzLl9yaWdodFRvTGVmdD09PW51bGwpe3RoaXMuX3JpZ2h0VG9MZWZ0PWIuUmFkTWVudS5fcmVxdWlyZXNSaWdodFRvTGVmdCh0aGlzLmdldF9lbGVtZW50KCkpOwp9cmV0dXJuIHRoaXMuX3JpZ2h0VG9MZWZ0Owp9LHNldF9yaWdodFRvTGVmdDpmdW5jdGlvbihsKXt0aGlzLl9yaWdodFRvTGVmdD1sOwp9LGdldF9zZWxlY3RlZEl0ZW06ZnVuY3Rpb24oKXtpZighdGhpcy5fY2hpbGRDb250cm9sc0NyZWF0ZWQpe3JldHVybiBudWxsOwp9aWYodGhpcy5fc2VsZWN0ZWRJdGVtSW5kZXgpe3JldHVybiB0aGlzLl9maW5kSXRlbUJ5SGllcmFyY2hpY2FsSW5kZXgodGhpcy5fc2VsZWN0ZWRJdGVtSW5kZXgpOwp9cmV0dXJuIG51bGw7Cn0sc2F2ZUNsaWVudFN0YXRlOmZ1bmN0aW9uKCl7dmFyIG09dGhpcy5fbG9nLl9sb2dFbnRyaWVzOwp2YXIgbD17bG9nRW50cmllczptfTsKaWYodGhpcy5fc2VsZWN0ZWRJdGVtSW5kZXgpe2wuc2VsZWN0ZWRJdGVtSW5kZXg9dGhpcy5fc2VsZWN0ZWRJdGVtSW5kZXg7Cn1yZXR1cm4gU3lzLlNlcmlhbGl6YXRpb24uSmF2YVNjcmlwdFNlcmlhbGl6ZXIuc2VyaWFsaXplKGwpOwp9LGNsb3NlOmZ1bmN0aW9uKCl7dmFyIGw9dGhpcy5nZXRfb3BlbmVkSXRlbSgpOwppZihsKXtsLmNsb3NlKCk7Cn19LGRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLnNldF9lbmFibGVkKGZhbHNlKTsKfSxlbmFibGU6ZnVuY3Rpb24oKXt0aGlzLnNldF9lbmFibGVkKHRydWUpOwp9LGRpc2FibGVFdmVudHM6ZnVuY3Rpb24oKXt0aGlzLl9maXJlRXZlbnRzPWZhbHNlOwp9LGVuYWJsZUV2ZW50czpmdW5jdGlvbigpe3RoaXMuX2ZpcmVFdmVudHM9dHJ1ZTsKfSxmb2N1czpmdW5jdGlvbigpe3RoaXMuZ2V0X2VsZW1lbnQoKS5mb2N1cygpOwp9LGZpbmRJdGVtQnlUZXh0OmZ1bmN0aW9uKGwpe3JldHVybiB0aGlzLl9maW5kSXRlbUJ5VGV4dChsKTsKfSxmaW5kSXRlbUJ5VXJsOmZ1bmN0aW9uKGwpe3JldHVybiB0aGlzLl9maW5kSXRlbUJ5VXJsKGwpOwp9LGZpbmRJdGVtQnlBYnNvbHV0ZVVybDpmdW5jdGlvbihsKXtyZXR1cm4gdGhpcy5fZmluZEl0ZW1CeUFic29sdXRlVXJsKGwpOwp9LGZpbmRJdGVtQnlWYWx1ZTpmdW5jdGlvbihsKXtyZXR1cm4gdGhpcy5fZmluZEl0ZW1CeVZhbHVlKGwpOwp9LGZpbmRJdGVtQnlBdHRyaWJ1dGU6ZnVuY3Rpb24obSxsKXtyZXR1cm4gdGhpcy5fZmluZEl0ZW1CeUF0dHJpYnV0ZShtLGwpOwp9LGdldF9hbGxJdGVtczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRBbGxJdGVtcygpOwp9LGdldF9wZXJzaXN0TG9hZE9uRGVtYW5kSXRlbXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGVyc2lzdExvYWRPbkRlbWFuZEl0ZW1zOwp9LHNldF9wZXJzaXN0TG9hZE9uRGVtYW5kSXRlbXM6ZnVuY3Rpb24obCl7dGhpcy5fcGVyc2lzdExvYWRPbkRlbWFuZEl0ZW1zPWw7Cn0sZ2V0X2VuYWJsZU92ZXJsYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5hYmxlT3ZlcmxheTsKfSxzZXRfZW5hYmxlT3ZlcmxheTpmdW5jdGlvbihsKXt0aGlzLl9lbmFibGVPdmVybGF5PWw7Cn0sX2lzTWFpbkVsZW1lbnREZXNjZW5kYW50OmZ1bmN0aW9uKGwpe3JldHVybiAkdGVsZXJpay5pc0Rlc2NlbmRhbnQodGhpcy5nZXRfZWxlbWVudCgpLGwpOwp9LF9jcmVhdGVDaGlsZENvbnRyb2xzOmZ1bmN0aW9uKCl7dGhpcy5fY2hpbGRyZW49bmV3IGIuUmFkTWVudUl0ZW1Db2xsZWN0aW9uKHRoaXMpOwpiLlJhZE1lbnUuX2NyZWF0ZUNoaWxkQ29udHJvbHModGhpcyx0aGlzLl9jaGlsZHJlbik7Cn0sX2NyZWF0ZUNoaWxkTGlzdEVsZW1lbnQ6ZnVuY3Rpb24oKXtpZighdGhpcy5fY2hpbGRMaXN0RWxlbWVudENzc0NsYXNzKXtyZXR1cm47Cn12YXIgbD10aGlzLmdldF9lbGVtZW50KCk7CnZhciBtPWEoIjx1bCBjbGFzcz0nIit0aGlzLl9jaGlsZExpc3RFbGVtZW50Q3NzQ2xhc3MrIic+PC91bD4iKTsKdmFyIG49YShsKS5maW5kKCJkaXYucm1TY3JvbGxXcmFwIik7CmlmKG4ubGVuZ3RoPT0xKXttLmFwcGVuZFRvKG4pOwp9ZWxzZXttLmFwcGVuZFRvKGwpOwp9fSxfZ2V0Q2hpbGRFbGVtZW50czpmdW5jdGlvbigpe3JldHVybiBhKHRoaXMuZ2V0X2NoaWxkTGlzdEVsZW1lbnQoKSkuY2hpbGRyZW4oIi5ybUl0ZW0iKTsKfSxfaW5pdGlhbGl6ZVNjcm9sbGVyOmZ1bmN0aW9uKCl7aWYoIXRoaXMuX2NoaWxkQ29udHJvbHNDcmVhdGVkKXtyZXR1cm4gbnVsbDsKfXZhciBxPXRoaXMuX2dldFNjcm9sbFdyYXBFbGVtZW50KCk7CnZhciBwPXRoaXMuZ2V0X2NoaWxkTGlzdEVsZW1lbnQoKTsKaWYocSYmcCl7dmFyIGw9bnVsbDsKaWYodGhpcy5fc2Nyb2xsZXIpe2w9dGhpcy5fc2Nyb2xsZXIuZ2V0X2N1cnJlbnRQb3NpdGlvbigpOwp0aGlzLl9zY3JvbGxlci5kaXNwb3NlKCk7Cn10aGlzLl9zY3JvbGxlcj1uZXcgYi5NZW51SXRlbVNjcm9sbGVyKHRoaXMuZ2V0X2NoaWxkTGlzdEVsZW1lbnQoKSx0aGlzLl9mbG93KTsKcC5zdHlsZS5kaXNwbGF5PSJibG9jayI7CnZhciBuPXRoaXMuX2Zsb3c9PWIuSXRlbUZsb3cuSG9yaXpvbnRhbDsKaWYobil7Yi5SYWRNZW51Ll9hZGp1c3RMaXN0V2lkdGgodGhpcyk7Cn1lbHNle2IuUmFkTWVudS5fYWRqdXN0Q2hpbGRyZW5XaWR0aCh0aGlzKTsKaWYodGhpcy5nZXRfcmlnaHRUb0xlZnQoKSYmJHRlbGVyaWsuaXNJRSYmcC5maXJzdENoaWxkKXtwLnN0eWxlLndpZHRoPXAuZmlyc3RDaGlsZC5vZmZzZXRXaWR0aCsicHgiOwpwLnBhcmVudE5vZGUuc3R5bGUud2lkdGg9cC5vZmZzZXRXaWR0aCsicHgiOwp9fXRoaXMuX3Njcm9sbGVyLmluaXRpYWxpemUoKTsKdGhpcy5fc2Nyb2xsZXIudXBkYXRlU3RhdGUoKTsKaWYobCE9PW51bGwpe3RoaXMuX3Njcm9sbGVyLnNldF9jdXJyZW50UG9zaXRpb24obCk7Cn1pZih0aGlzLmdldF9yaWdodFRvTGVmdCgpJiZuKXtwLnN0eWxlLmNzc0Zsb2F0PSJsZWZ0IjsKdGhpcy5fc2Nyb2xsZXIuc2Nyb2xsVG9NYXhQb3NpdGlvbigpOwp9aWYobiYmJHRlbGVyaWsuaXNJRTYpe3ZhciBtPXRoaXMuZ2V0X2VsZW1lbnQoKS5vZmZzZXRIZWlnaHQrInB4IjsKdmFyIHI9JHRlbGVyaWsuZ2V0RWxlbWVudEJ5Q2xhc3NOYW1lKHRoaXMuZ2V0X2VsZW1lbnQoKSxjLCJhIil8fCR0ZWxlcmlrLmdldEVsZW1lbnRCeUNsYXNzTmFtZSh0aGlzLmdldF9lbGVtZW50KCksInJtTGVmdEFycm93RGlzYWJsZWQiLCJhIik7CmlmKHIpe3Iuc3R5bGUuaGVpZ2h0PW07Cn12YXIgbz0kdGVsZXJpay5nZXRFbGVtZW50QnlDbGFzc05hbWUodGhpcy5nZXRfZWxlbWVudCgpLGksImEiKXx8JHRlbGVyaWsuZ2V0RWxlbWVudEJ5Q2xhc3NOYW1lKHRoaXMuZ2V0X2VsZW1lbnQoKSwicm1SaWdodEFycm93RGlzYWJsZWQiLCJhIik7CmlmKG8pe28uc3R5bGUuaGVpZ2h0PW07Cn19fX0sX2dldFNjcm9sbFdyYXBFbGVtZW50OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX3Njcm9sbFdyYXBFbGVtZW50KXt2YXIgbD0kdGVsZXJpay5nZXRGaXJzdENoaWxkQnlUYWdOYW1lKHRoaXMuZ2V0X2VsZW1lbnQoKSwiZGl2IiwwKTsKaWYobCYmU3lzLlVJLkRvbUVsZW1lbnQuY29udGFpbnNDc3NDbGFzcyhsLCJybVNjcm9sbFdyYXAiKSl7dGhpcy5fc2Nyb2xsV3JhcEVsZW1lbnQ9bDsKfX1yZXR1cm4gdGhpcy5fc2Nyb2xsV3JhcEVsZW1lbnQ7Cn0sX2NsZWFyU2VsZWN0ZWRJdGVtOmZ1bmN0aW9uKCl7dmFyIGw9dGhpcy5nZXRfc2VsZWN0ZWRJdGVtKCk7CmlmKGwpe2wuc2V0X3NlbGVjdGVkKGZhbHNlKTsKfX0sX3JlZ2lzdGVyU2VsZWN0ZWRJdGVtOmZ1bmN0aW9uKGwpe3RoaXMuX3NlbGVjdGVkSXRlbUluZGV4PWwuX2dldEhpZXJhcmNoaWNhbEluZGV4KCk7CnRoaXMudXBkYXRlQ2xpZW50U3RhdGUoKTsKdGhpcy5fdXBkYXRlVmFsaWRhdGlvbkZpZWxkKGwpOwp9LF91bnJlZ2lzdGVyU2VsZWN0ZWRJdGVtOmZ1bmN0aW9uKGwpe2lmKGwuX2dldEhpZXJhcmNoaWNhbEluZGV4KCkhPXRoaXMuX3NlbGVjdGVkSXRlbUluZGV4KXtyZXR1cm47Cn10aGlzLl9zZWxlY3RlZEl0ZW1JbmRleD1udWxsOwp0aGlzLnVwZGF0ZUNsaWVudFN0YXRlKCk7CnRoaXMuX3VwZGF0ZVZhbGlkYXRpb25GaWVsZCh0aGlzLmdldF9zZWxlY3RlZEl0ZW0oKSk7Cn0sX3VwZGF0ZVZhbGlkYXRpb25GaWVsZDpmdW5jdGlvbihsKXt2YXIgbT0iIjsKaWYobCl7bT1sLmdldF92YWx1ZSgpOwppZihtPT09bnVsbCl7bT1sLmdldF90ZXh0KCk7Cn19dGhpcy5nZXRfZWxlbWVudCgpLnZhbHVlPW07Cn0sX29uTW91c2VPdXQ6ZnVuY3Rpb24obSl7dmFyIG49bS5yYXdFdmVudC5yZWxhdGVkVGFyZ2V0P20ucmF3RXZlbnQucmVsYXRlZFRhcmdldDptLnJhd0V2ZW50LnRvRWxlbWVudDsKaWYoIW4mJiF0aGlzLl9pc01haW5FbGVtZW50RGVzY2VuZGFudChtLnRhcmdldCkpe3ZhciBsPXRoaXM7CnNldFRpbWVvdXQoZnVuY3Rpb24oKXtsLmNsb3NlKCk7Cn0sdGhpcy5nZXRfY29sbGFwc2VEZWxheSgpKTsKfX0sX29uQ2xpY2s6ZnVuY3Rpb24obCl7aWYoIXRoaXMuX2lzTWFpbkVsZW1lbnREZXNjZW5kYW50KGwudGFyZ2V0KSl7dmFyIG09dGhpcy5nZXRfY2xpY2tUb09wZW4oKTsKaWYodGhpcy5fZm9jdXNlZEl0ZW18fG0pe3RoaXMuY2xvc2UoKTsKaWYodGhpcy5nZXRfY2xpY2tUb09wZW4oKSl7dGhpcy5zZXRfY2xpY2tlZChmYWxzZSk7Cn19fX0sX29uUmVzaXplOmZ1bmN0aW9uKCl7fSxfb25JdGVtTW91c2VPdmVyOmZ1bmN0aW9uKG0pe3ZhciBsPXRoaXMuX2V4dHJhY3RJdGVtRnJvbURvbUVsZW1lbnQobS5ldmVudE1hcFRhcmdldCk7CmlmKCFsLmdldF9lbmFibGVkKCkpe3JldHVybiB0cnVlOwp9bC5fcHJldmVudENsb3NlKCk7CmlmKHRoaXMuZ2V0X2NsaWNrVG9PcGVuKCkmJiF0aGlzLmdldF9jbGlja2VkKCkpe3JldHVybiB0cnVlOwp9aWYobC5fc3RhdGU9PWIuUmFkTWVudUl0ZW1TdGF0ZS5PcGVufHxsLl9zdGF0ZT09Yi5SYWRNZW51SXRlbVN0YXRlLkFib3V0VG9PcGVuKXtyZXR1cm4gdHJ1ZTsKfXZhciBuPWwuZ2V0X3BhcmVudCgpOwp2YXIgbz1uLmdldF9vcGVuZWRJdGVtKCk7CmlmKG8mJm8hPWwpe28uX2NsZWFyVGltZW91dCgpOwpvLl9zdGF0ZT1iLlJhZE1lbnVJdGVtU3RhdGUuQWJvdXRUb0Nsb3NlOwpvLl9zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7by5jbG9zZSgpOwpvLl90aW1lb3V0UmVmPW51bGw7Cn0sdGhpcy5nZXRfZXhwYW5kRGVsYXkoKSk7Cn1pZihsLmdldF9pdGVtcygpLmdldF9jb3VudCgpPT0wJiYhbC5faXNXZWJTZXJ2aWNlQ2FsbE5lZWRlZCgpKXtyZXR1cm4gdHJ1ZTsKfXRoaXMuX2xhc3RPcGVuZWRJdGVtPWw7CmwuX3N0YXRlPWIuUmFkTWVudUl0ZW1TdGF0ZS5BYm91dFRvT3BlbjsKbC5fc2V0VGltZW91dChmdW5jdGlvbigpe2wub3BlbigpOwpsLl90aW1lb3V0UmVmPW51bGw7Cn0sdGhpcy5nZXRfZXhwYW5kRGVsYXkoKSk7CnJldHVybiB0cnVlOwp9LF9vbkl0ZW1Nb3VzZU91dDpmdW5jdGlvbihtKXt2YXIgbD10aGlzLl9leHRyYWN0SXRlbUZyb21Eb21FbGVtZW50KG0uZXZlbnRNYXBUYXJnZXQpOwppZihsIT1udWxsKXtpZighbC5nZXRfZW5hYmxlZCgpKXtyZXR1cm4gdHJ1ZTsKfXZhciBwPW0uZXZlbnRNYXBSZWxhdGVkVGFyZ2V0Owp2YXIgbz1sLmdldF9lbGVtZW50KCk7CmlmKCFwfHxvPT1wfHwkdGVsZXJpay5pc0Rlc2NlbmRhbnQobyxwKSl7cmV0dXJuIHRydWU7Cn1pZih0aGlzLl9jaGlsZHJlbkRldGFjaGVkJiYkdGVsZXJpay5pc0Rlc2NlbmRhbnQobC5nZXRfcGFyZW50KCkuX2dldEFuaW1hdGlvbkNvbnRhaW5lcigpLHApKXtyZXR1cm4gdHJ1ZTsKfWlmKHRoaXMuX3Njcm9sbGVyJiZsLmdldF9sZXZlbCgpPjAmJiEkdGVsZXJpay5pc0Rlc2NlbmRhbnQodGhpcy5nZXRfZWxlbWVudCgpLHApKXt2YXIgbj1sOwp3aGlsZShuLmdldF9sZXZlbCgpPjApe249bi5nZXRfcGFyZW50KCk7CmlmKHR5cGVvZiBuLmdldF9sZXZlbD09InVuZGVmaW5lZCIpe2JyZWFrOwp9fXRoaXMuX29uSXRlbU1vdXNlT3V0KHtldmVudE1hcFRhcmdldDpuLmdldF9lbGVtZW50KCksZXZlbnRNYXBSZWxhdGVkVGFyZ2V0OnB9KTsKfWlmKGwuX3N0YXRlPT1iLlJhZE1lbnVJdGVtU3RhdGUuQ2xvc2VkfHxsLl9zdGF0ZT09Yi5SYWRNZW51SXRlbVN0YXRlLkFib3V0VG9DbG9zZSl7cmV0dXJuIHRydWU7Cn1pZihsLl9zdGF0ZT09Yi5SYWRNZW51SXRlbVN0YXRlLkFib3V0VG9PcGVuKXtsLl9jbGVhclRpbWVvdXQoKTsKbC5fc3RhdGU9Yi5SYWRNZW51SXRlbVN0YXRlLkNsb3NlZDsKbC5nZXRfcGFyZW50KCkuX29wZW5lZEl0ZW09bnVsbDsKcmV0dXJuIHRydWU7Cn1pZih0aGlzLmdldF9jbGlja1RvT3BlbigpKXtyZXR1cm4gdHJ1ZTsKfWwuX3N0YXRlPWIuUmFkTWVudUl0ZW1TdGF0ZS5BYm91dFRvQ2xvc2U7CmwuX3NldFRpbWVvdXQoZnVuY3Rpb24oKXtsLmNsb3NlKCk7CmwuX3RpbWVvdXRSZWY9bnVsbDsKfSx0aGlzLmdldF9jb2xsYXBzZURlbGF5KCkpOwpyZXR1cm4gdHJ1ZTsKfX0sX29uSXRlbURyYWdTdGFydDpmdW5jdGlvbihsKXtsLnByZXZlbnREZWZhdWx0KCk7CnJldHVybiBmYWxzZTsKfSxfZ2V0Rmlyc3RDbGlja2FibGVQYXJlbnQ6ZnVuY3Rpb24obixvKXt2YXIgcD1bInNlbGVjdCIsIm9wdGlvbiIsImEiLCJpbnB1dCIsInRleHRhcmVhIiwiYnV0dG9uIiwibGFiZWwiXTsKdmFyIGw9bjsKd2hpbGUobCE9byl7dmFyIG09YS5pbkFycmF5KGwudGFnTmFtZS50b0xvd2VyQ2FzZSgpLHApIT0tMTsKaWYobSl7cmV0dXJuIGw7Cn1sPWwucGFyZW50Tm9kZTsKfXJldHVybiBudWxsOwp9LF9vbkl0ZW1DbGljazpmdW5jdGlvbihtKXtpZighdGhpcy5nZXRfZW5hYmxlZCgpKXskdGVsZXJpay5jYW5jZWxSYXdFdmVudChtKTsKcmV0dXJuIGZhbHNlOwp9dmFyIGw9dGhpcy5fZXh0cmFjdEl0ZW1Gcm9tRG9tRWxlbWVudChtLmV2ZW50TWFwVGFyZ2V0KTsKdmFyIG49dGhpcy5fZ2V0Rmlyc3RDbGlja2FibGVQYXJlbnQobS50YXJnZXQsbC5nZXRfZWxlbWVudCgpKTsKaWYobiYmIWEobikuaGFzQ2xhc3MoZSkpe3JldHVybiBmYWxzZTsKfWlmKGEobS5ldmVudE1hcFRhcmdldCkuaXMoIi5ybUl0ZW0iKSYmbC5nZXRfbGlua0VsZW1lbnQoKSl7cmV0dXJuIGZhbHNlOwp9bC5fdHJhbnNmZXJGb2N1cygpOwpsLl9jbGljayhtKTsKaWYoIWwuX3Nob3VsZE5hdmlnYXRlKCkpeyR0ZWxlcmlrLmNhbmNlbFJhd0V2ZW50KG0pOwp9cmV0dXJuIGZhbHNlOwp9LF9vbkxpbmtNb3VzZU92ZXI6ZnVuY3Rpb24obSl7dmFyIG89bS5ldmVudE1hcFJlbGF0ZWRUYXJnZXQ7CnZhciBsPXRoaXMuX2V4dHJhY3RJdGVtRnJvbURvbUVsZW1lbnQobS5ldmVudE1hcFRhcmdldCk7CmlmKCFsLmdldF9lbmFibGVkKCkpe3JldHVybiB0cnVlOwp9dmFyIG49bC5nZXRfbGlua0VsZW1lbnQoKTsKaWYoIW98fG49PW98fCR0ZWxlcmlrLmlzRGVzY2VuZGFudChuLG8pKXtyZXR1cm4gdHJ1ZTsKfWwuX2hvdmVyZWQ9dHJ1ZTsKbC5fdXBkYXRlSW1hZ2VTcmMoKTsKdGhpcy5fcmFpc2VFdmVudCgibW91c2VPdmVyIixuZXcgYi5SYWRNZW51TW91c2VPdmVyRXZlbnRBcmdzKGwsbSkpOwpyZXR1cm4gdHJ1ZTsKfSxfb25MaW5rTW91c2VPdXQ6ZnVuY3Rpb24obSl7dmFyIG89bS5ldmVudE1hcFJlbGF0ZWRUYXJnZXQ7CnZhciBsPXRoaXMuX2V4dHJhY3RJdGVtRnJvbURvbUVsZW1lbnQobS5ldmVudE1hcFRhcmdldCk7CmlmKCFsLmdldF9lbmFibGVkKCkpe3JldHVybiB0cnVlOwp9dmFyIG49bC5nZXRfbGlua0VsZW1lbnQoKTsKaWYoIW98fCFuKXtyZXR1cm47Cn1pZihuPT1vfHwkdGVsZXJpay5pc0Rlc2NlbmRhbnQobixvKSl7cmV0dXJuIHRydWU7Cn1sLl9ob3ZlcmVkPWZhbHNlOwpsLl91cGRhdGVJbWFnZVNyYygpOwp0aGlzLl9yYWlzZUV2ZW50KCJtb3VzZU91dCIsbmV3IGIuUmFkTWVudU1vdXNlT3V0RXZlbnRBcmdzKGwsbSkpOwpyZXR1cm4gdHJ1ZTsKfSxfb25MaW5rTW91c2VEb3duOmZ1bmN0aW9uKGwpe3ZhciBtPXRoaXMuX2V4dHJhY3RJdGVtRnJvbURvbUVsZW1lbnQobC5ldmVudE1hcFRhcmdldCk7CmlmKCFtLmdldF9lbmFibGVkKCkpe3JldHVybiB0cnVlOwp9bS5fY2xpY2tlZD10cnVlOwptLl91cGRhdGVMaW5rQ2xhc3MoKTsKbS5fdXBkYXRlSW1hZ2VTcmMoKTsKcmV0dXJuIHRydWU7Cn0sX29uTGlua01vdXNlVXA6ZnVuY3Rpb24obCl7dmFyIG09dGhpcy5fZXh0cmFjdEl0ZW1Gcm9tRG9tRWxlbWVudChsLmV2ZW50TWFwVGFyZ2V0KTsKaWYoIW0uZ2V0X2VuYWJsZWQoKSl7cmV0dXJuIHRydWU7Cn1tLl9jbGlja2VkPWZhbHNlOwptLl91cGRhdGVMaW5rQ2xhc3MoKTsKbS5fdXBkYXRlSW1hZ2VTcmMoKTsKcmV0dXJuIHRydWU7Cn0sX29uTGlua0JsdXI6ZnVuY3Rpb24obCl7dmFyIG09dGhpcy5fZXh0cmFjdEl0ZW1Gcm9tRG9tRWxlbWVudChsLmV2ZW50TWFwVGFyZ2V0KTsKaWYoIW0uZ2V0X2VuYWJsZWQoKSl7cmV0dXJuIHRydWU7Cn1tLl9mb2N1c2VkPWZhbHNlOwptLmJsdXIoKTsKcmV0dXJuIHRydWU7Cn0sX29uTGlua0ZvY3VzOmZ1bmN0aW9uKGwpe3ZhciBtPXRoaXMuX2V4dHJhY3RJdGVtRnJvbURvbUVsZW1lbnQobC5ldmVudE1hcFRhcmdldCk7CmlmKCFtLmdldF9lbmFibGVkKCkpe3JldHVybiB0cnVlOwp9bS5fZm9jdXNlZD10cnVlOwptLmZvY3VzKCk7CnJldHVybiB0cnVlOwp9LF9vbkxpbmtLZXlEb3duOmZ1bmN0aW9uKGwpe3ZhciBtPXRoaXMuX2V4dHJhY3RJdGVtRnJvbURvbUVsZW1lbnQobC5ldmVudE1hcFRhcmdldCk7CmlmKCFtLmdldF9lbmFibGVkKCkpe3JldHVybiB0cnVlOwp9cmV0dXJuIG0uX29uS2V5RG93bihsKTsKfSxfZ2V0U2Nyb2xsSXRlbTpmdW5jdGlvbihsKXtpZih0aGlzLl9zY3JvbGxlciYmYShsLnBhcmVudE5vZGUpLmhhc0NsYXNzKCJybVJvb3RHcm91cCIpKXtyZXR1cm4gdGhpczsKfXJldHVybiB0aGlzLl9leHRyYWN0SXRlbUZyb21Eb21FbGVtZW50KGwpOwp9LF9vbkl0ZW1Nb3VzZXdoZWVsOmZ1bmN0aW9uKG0pe3ZhciBwPW0ucmF3RXZlbnQ7CnZhciByPXAud2hlZWxEZWx0YT9wLndoZWVsRGVsdGE6LXAuZGV0YWlsOwp2YXIgbD10aGlzLl9nZXRTY3JvbGxJdGVtKG0uZXZlbnRNYXBUYXJnZXR8fG0udGFyZ2V0KTsKaWYobCl7dmFyIG49bC5nZXRfcGFyZW50KCk7CnZhciBxPW4uX3Njcm9sbGVyOwppZihxKXt2YXIgbz1iLlNjcm9sbGVyU3BlZWQuTW91c2V3aGVlbERlZmF1bHQ7CnEuc2Nyb2xsUmVsYXRpdmUocj4wPy1vOm8pOwptLnByZXZlbnREZWZhdWx0KCk7Cn19fSxfb25Ub3BBcnJvd01vdXNlRG93bjpmdW5jdGlvbihsKXt2YXIgbT10aGlzLl9nZXRTY3JvbGxJdGVtKGwuZXZlbnRNYXBUYXJnZXQpOwptLl9vblNjcm9sbEFycm93TW91c2VEb3duKGIuQXJyb3dQb3NpdGlvbi5Ub3ApOwp9LF9vblRvcEFycm93TW91c2VVcDpmdW5jdGlvbihsKXt2YXIgbT10aGlzLl9nZXRTY3JvbGxJdGVtKGwuZXZlbnRNYXBUYXJnZXQpOwptLl9vblNjcm9sbEFycm93TW91c2VVcChiLkFycm93UG9zaXRpb24uVG9wKTsKfSxfb25Ub3BBcnJvd01vdXNlT3ZlcjpmdW5jdGlvbihsKXt2YXIgbT10aGlzLl9nZXRTY3JvbGxJdGVtKGwuZXZlbnRNYXBUYXJnZXQpOwptLl9vblNjcm9sbEFycm93TW91c2VPdmVyKGIuQXJyb3dQb3NpdGlvbi5Ub3ApOwp9LF9vblRvcEFycm93TW91c2VPdXQ6ZnVuY3Rpb24obCl7dmFyIG09dGhpcy5fZ2V0U2Nyb2xsSXRlbShsLmV2ZW50TWFwVGFyZ2V0KTsKbS5fb25TY3JvbGxBcnJvd01vdXNlT3V0KGIuQXJyb3dQb3NpdGlvbi5Ub3ApOwp9LF9vbkJvdHRvbUFycm93TW91c2VEb3duOmZ1bmN0aW9uKGwpe3ZhciBtPXRoaXMuX2dldFNjcm9sbEl0ZW0obC5ldmVudE1hcFRhcmdldCk7Cm0uX29uU2Nyb2xsQXJyb3dNb3VzZURvd24oYi5BcnJvd1Bvc2l0aW9uLkJvdHRvbSk7Cn0sX29uQm90dG9tQXJyb3dNb3VzZVVwOmZ1bmN0aW9uKGwpe3ZhciBtPXRoaXMuX2dldFNjcm9sbEl0ZW0obC5ldmVudE1hcFRhcmdldCk7Cm0uX29uU2Nyb2xsQXJyb3dNb3VzZVVwKGIuQXJyb3dQb3NpdGlvbi5Cb3R0b20pOwp9LF9vbkJvdHRvbUFycm93TW91c2VPdmVyOmZ1bmN0aW9uKGwpe3ZhciBtPXRoaXMuX2dldFNjcm9sbEl0ZW0obC5ldmVudE1hcFRhcmdldCk7Cm0uX29uU2Nyb2xsQXJyb3dNb3VzZU92ZXIoYi5BcnJvd1Bvc2l0aW9uLkJvdHRvbSk7Cn0sX29uQm90dG9tQXJyb3dNb3VzZU91dDpmdW5jdGlvbihsKXt2YXIgbT10aGlzLl9nZXRTY3JvbGxJdGVtKGwuZXZlbnRNYXBUYXJnZXQpOwptLl9vblNjcm9sbEFycm93TW91c2VPdXQoYi5BcnJvd1Bvc2l0aW9uLkJvdHRvbSk7Cn0sX29uTGVmdEFycm93TW91c2VEb3duOmZ1bmN0aW9uKGwpe3ZhciBtPXRoaXMuX2dldFNjcm9sbEl0ZW0obC5ldmVudE1hcFRhcmdldCk7Cm0uX29uU2Nyb2xsQXJyb3dNb3VzZURvd24oYi5BcnJvd1Bvc2l0aW9uLkxlZnQpOwp9LF9vbkxlZnRBcnJvd01vdXNlVXA6ZnVuY3Rpb24obCl7dmFyIG09dGhpcy5fZ2V0U2Nyb2xsSXRlbShsLmV2ZW50TWFwVGFyZ2V0KTsKbS5fb25TY3JvbGxBcnJvd01vdXNlVXAoYi5BcnJvd1Bvc2l0aW9uLkxlZnQpOwp9LF9vbkxlZnRBcnJvd01vdXNlT3ZlcjpmdW5jdGlvbihsKXt2YXIgbT10aGlzLl9nZXRTY3JvbGxJdGVtKGwuZXZlbnRNYXBUYXJnZXQpOwptLl9vblNjcm9sbEFycm93TW91c2VPdmVyKGIuQXJyb3dQb3NpdGlvbi5MZWZ0KTsKfSxfb25MZWZ0QXJyb3dNb3VzZU91dDpmdW5jdGlvbihsKXt2YXIgbT10aGlzLl9nZXRTY3JvbGxJdGVtKGwuZXZlbnRNYXBUYXJnZXQpOwptLl9vblNjcm9sbEFycm93TW91c2VPdXQoYi5BcnJvd1Bvc2l0aW9uLkxlZnQpOwp9LF9vblJpZ2h0QXJyb3dNb3VzZURvd246ZnVuY3Rpb24obCl7dmFyIG09dGhpcy5fZ2V0U2Nyb2xsSXRlbShsLmV2ZW50TWFwVGFyZ2V0KTsKbS5fb25TY3JvbGxBcnJvd01vdXNlRG93bihiLkFycm93UG9zaXRpb24uUmlnaHQpOwp9LF9vblJpZ2h0QXJyb3dNb3VzZVVwOmZ1bmN0aW9uKGwpe3ZhciBtPXRoaXMuX2dldFNjcm9sbEl0ZW0obC5ldmVudE1hcFRhcmdldCk7Cm0uX29uU2Nyb2xsQXJyb3dNb3VzZVVwKGIuQXJyb3dQb3NpdGlvbi5SaWdodCk7Cn0sX29uUmlnaHRBcnJvd01vdXNlT3ZlcjpmdW5jdGlvbihsKXt2YXIgbT10aGlzLl9nZXRTY3JvbGxJdGVtKGwuZXZlbnRNYXBUYXJnZXQpOwptLl9vblNjcm9sbEFycm93TW91c2VPdmVyKGIuQXJyb3dQb3NpdGlvbi5SaWdodCk7Cn0sX29uUmlnaHRBcnJvd01vdXNlT3V0OmZ1bmN0aW9uKGwpe3ZhciBtPXRoaXMuX2dldFNjcm9sbEl0ZW0obC5ldmVudE1hcFRhcmdldCk7Cm0uX29uU2Nyb2xsQXJyb3dNb3VzZU91dChiLkFycm93UG9zaXRpb24uUmlnaHQpOwp9LF9vblNjcm9sbEFycm93Q2xpY2tlZDpmdW5jdGlvbihsKXtsLnByZXZlbnREZWZhdWx0KCk7Cmwuc3RvcFByb3BhZ2F0aW9uKCk7CnJldHVybiBmYWxzZTsKfSxfb25TY3JvbGxBcnJvd01vdXNlRG93bjpmdW5jdGlvbigpe2lmKCF0aGlzLl9zY3JvbGxlcil7cmV0dXJuOwp9dGhpcy5fc2Nyb2xsZXIuY2hhbmdlU2Nyb2xsU3BlZWQoYi5TY3JvbGxlclNwZWVkLkZhc3QpOwp9LF9vblNjcm9sbEFycm93TW91c2VVcDpmdW5jdGlvbigpe2lmKCF0aGlzLl9zY3JvbGxlcil7cmV0dXJuOwp9dGhpcy5fc2Nyb2xsZXIuY2hhbmdlU2Nyb2xsU3BlZWQoYi5TY3JvbGxlclNwZWVkLlNsb3cpOwp9LF9vblNjcm9sbEFycm93TW91c2VPdmVyOmZ1bmN0aW9uKGwpe2lmKCF0aGlzLl9zY3JvbGxlcil7cmV0dXJuOwp9dmFyIG09MTsKaWYobD09Yi5BcnJvd1Bvc2l0aW9uLlRvcHx8bD09Yi5BcnJvd1Bvc2l0aW9uLkxlZnQpe209LTE7Cn12YXIgbj10aGlzLmdldF9vcGVuZWRJdGVtKCk7CmlmKG4pe24uY2xvc2UoKTsKfXRoaXMuX3Njcm9sbGVyLnN0YXJ0U2Nyb2xsKGIuU2Nyb2xsZXJTcGVlZC5TbG93LG0pOwp9LF9vblNjcm9sbEFycm93TW91c2VPdXQ6ZnVuY3Rpb24oKXtpZighdGhpcy5fc2Nyb2xsZXIpe3JldHVybjsKfXRoaXMuX3Njcm9sbGVyLnN0b3BTY3JvbGwoKTsKfSxfcHVyZ2VFbXB0eUdyb3VwOmZ1bmN0aW9uKGwpe2lmKGw9PXRoaXMmJmwuaGlkZSl7bC5oaWRlKCk7Cn1lbHNle2wuY2xvc2UoKTsKfWIuUmFkTWVudS5fcmVtb3ZlQ2hpbGRMaXN0Q29ybmVycyhsKTsKYi5SYWRNZW51Ll9yZW1vdmVTY3JvbGxXcmFwQ29udGFpbmVyKGwpOwp2YXIgbT0kdGVsZXJpay5nZXRGaXJzdENoaWxkQnlUYWdOYW1lKGwuZ2V0X2VsZW1lbnQoKSwiZGl2IiwwKTsKaWYobC5fb3JpZ2luYWxFeHBhbmRNb2RlKXtsLnNldF9leHBhbmRNb2RlKGwuX29yaWdpbmFsRXhwYW5kTW9kZSk7Cn1pZihsLl9zbGlkZVdyYXBFbGVtZW50KXtpZigkdGVsZXJpay5pc0lFKXtsLl9zbGlkZVdyYXBFbGVtZW50Lm91dGVySFRNTD0iIjsKfWwuX3NsaWRlV3JhcEVsZW1lbnQ9bnVsbDsKbC5fc2Nyb2xsV3JhcEVsZW1lbnQ9bnVsbDsKfWwuX2xpbmtFbGVtZW50PW51bGw7CmwuX2NoaWxkTGlzdEVsZW1lbnQ9bnVsbDsKbC5fYW5pbWF0ZWRFbGVtZW50PW51bGw7CmwuX2FuaW1hdGlvbkNvbnRhaW5lcj1udWxsOwpsLl9pdGVtc0xvYWRlZD1mYWxzZTsKbC5faGFzSXRlbXM9ZmFsc2U7CmlmKGwuX3VwZGF0ZVRleHRFbGVtZW50Q2xhc3Mpe2wuX3VwZGF0ZVRleHRFbGVtZW50Q2xhc3MoKTsKfWlmKHRoaXMuX2VuYWJsZVJvb3RJdGVtU2Nyb2xsKXtsLl9jaGlsZHJlbkRldGFjaGVkPWZhbHNlOwp9aWYobD09dGhpcyl7cmV0dXJuOwp9aWYobC5fc2xpZGUpe2wuX3NsaWRlLmRpc3Bvc2UoKTsKbC5fc2xpZGU9bnVsbDsKfWlmKCR0ZWxlcmlrLmlzSUUmJm0pe20ub3V0ZXJIVE1MPSIiOwp9aWYobSYmbS5wYXJlbnROb2RlKXttLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobSk7Cn1tPW51bGw7Cn0sX2NoaWxkcmVuQ2xlYXJlZDpmdW5jdGlvbihsKXtpZihsIT10aGlzJiYhbC5fZ2V0SGFzSXRlbXMoKSl7cmV0dXJuOwp9dGhpcy5fcHVyZ2VFbXB0eUdyb3VwKGwpOwpiLlJhZE1lbnUuY2FsbEJhc2VNZXRob2QodGhpcywiX2NoaWxkcmVuQ2xlYXJlZCIsW2xdKTsKfSxfY2hpbGRJbnNlcnRpbmc6ZnVuY3Rpb24obSxsLG4pe2IuUmFkTWVudS5jYWxsQmFzZU1ldGhvZCh0aGlzLCJfY2hpbGRJbnNlcnRpbmciLFttLGwsbl0pOwppZighbi5fY2hpbGRDb250cm9sc0NyZWF0ZWQpe3JldHVybjsKfXRoaXMuX2JhY2t1cENsaWVudFN0YXRlKCk7Cn0sX2NoaWxkSW5zZXJ0ZWQ6ZnVuY3Rpb24obSxsLG4pe3RoaXMuX3Jlc3RvcmVDbGllbnRTdGF0ZSgpOwppZihuLl9zZXRIYXNJdGVtcyl7bi5fc2V0SGFzSXRlbXModHJ1ZSk7Cn1iLlJhZE1lbnUuY2FsbEJhc2VNZXRob2QodGhpcywiX2NoaWxkSW5zZXJ0ZWQiLFttLGwsbl0pOwppZihuLl91cGRhdGVUZXh0RWxlbWVudENsYXNzKXtuLl91cGRhdGVUZXh0RWxlbWVudENsYXNzKCk7Cn1pZihuLl9zdGF0ZSYmbi5fc3RhdGU9PWIuUmFkTWVudUl0ZW1TdGF0ZS5PcGVuKXtpZihsLl9nZXRXaWR0aCgpPjApe2IuUmFkTWVudS5fYWRqdXN0Q2hpbGRyZW5XaWR0aChuKTsKfW4uX3VwZGF0ZUNvbHVtbldyYXBTaXplKCk7Cn1pZihuPT10aGlzJiZ0aGlzLl9lbmFibGVSb290SXRlbVNjcm9sbCl7dGhpcy5faW5pdGlhbGl6ZVNjcm9sbGVyKCk7Cn19LF9hdHRhY2hDaGlsZEl0ZW06ZnVuY3Rpb24obSxsLHApe2lmKHA9PXRoaXN8fCFwLl9oYXNNdWx0aXBsZUNvbHVtbnMoKSl7Yi5SYWRNZW51LmNhbGxCYXNlTWV0aG9kKHRoaXMsIl9hdHRhY2hDaGlsZEl0ZW0iLFttLGwscF0pOwpyZXR1cm47Cn1pZighcC5nZXRfY2hpbGRMaXN0RWxlbWVudCgpKXtwLl9jcmVhdGVDaGlsZExpc3RFbGVtZW50KCk7Cn12YXIgbj1tLmdldF9uZXh0U2libGluZygpOwppZihuKXt2YXIgcT1uLmdldF9lbGVtZW50KCk7CnEucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobCxxKTsKfWVsc2V7dmFyIG89cC5fZ2V0Q29sdW1uRm9ySXRlbShtKTsKYShvKS5jaGlsZHJlbigiLnJtR3JvdXAiKS5hcHBlbmQobCk7CnAuX3JlY2FsY3VsYXRlQ29sdW1ucygpOwp9fSxfY2hpbGRSZW1vdmluZzpmdW5jdGlvbihsKXtsLnNldF9zZWxlY3RlZChmYWxzZSk7CmwuX2NhY2hlRG9tUHJvcGVydGllcygpOwp0aGlzLl9iYWNrdXBDbGllbnRTdGF0ZSgpOwpiLlJhZE1lbnUuY2FsbEJhc2VNZXRob2QodGhpcywiX2NoaWxkUmVtb3ZpbmciLFtsXSk7Cn0sX2NoaWxkUmVtb3ZlZDpmdW5jdGlvbihsLG0pe3RoaXMuX3Jlc3RvcmVDbGllbnRTdGF0ZSgpOwpsLmdldF90ZXh0KCk7CnZhciBuPWwuZ2V0X2VsZW1lbnQoKTsKaWYobS5nZXRfaXRlbXMoKS5nZXRfY291bnQoKT09MCl7dGhpcy5fcHVyZ2VFbXB0eUdyb3VwKG0pOwp9ZWxzZXtpZigkdGVsZXJpay5pc0lFKXtuLm91dGVySFRNTD0iIjsKfWlmKG4ucGFyZW50Tm9kZSl7bi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG4pOwp9bj1udWxsOwp9Yi5SYWRNZW51LmNhbGxCYXNlTWV0aG9kKHRoaXMsIl9jaGlsZFJlbW92ZWQiLFtsLG1dKTsKaWYobS5fc3RhdGUmJm0uX3N0YXRlPT1iLlJhZE1lbnVJdGVtU3RhdGUuT3Blbil7Yi5SYWRNZW51Ll9hZGp1c3RDaGlsZHJlbldpZHRoKG0sdHJ1ZSk7Cm0uX3VwZGF0ZUNvbHVtbldyYXBTaXplKCk7Cn1pZihtPT10aGlzJiZ0aGlzLl9lbmFibGVSb290SXRlbVNjcm9sbCl7dGhpcy5faW5pdGlhbGl6ZVNjcm9sbGVyKCk7Cn1iLlJhZE1lbnUuX3VwZGF0ZUNoaWxkcmVuUG9zaXRpb25DbGFzcyhtKTsKfSxfYmFja3VwQ2xpZW50U3RhdGU6ZnVuY3Rpb24oKXt0aGlzLl9iYWNrdXBTZWxlY3RlZEl0ZW09dGhpcy5nZXRfc2VsZWN0ZWRJdGVtKCk7Cn0sX3Jlc3RvcmVDbGllbnRTdGF0ZTpmdW5jdGlvbigpe2lmKHRoaXMuX2JhY2t1cFNlbGVjdGVkSXRlbSl7dGhpcy5fcmVnaXN0ZXJTZWxlY3RlZEl0ZW0odGhpcy5fYmFja3VwU2VsZWN0ZWRJdGVtKTsKfX0sX2dldEV4dGVuZGVkSXRlbUNsaWNraW5nRXZlbnRBcmdzOmZ1bmN0aW9uKGwpe3JldHVybiBsOwp9LF9nZXRFeHRlbmRlZEl0ZW1DbGlja2VkRXZlbnRBcmdzOmZ1bmN0aW9uKGwpe3JldHVybiBsOwp9LF9pbmNyZW1lbnRaSW5kZXg6ZnVuY3Rpb24obSl7aWYodGhpcy5fekluZGV4SW5jcmVtZW50RGVwdGg9PTApe3ZhciBsPXRoaXMuZ2V0X2VsZW1lbnQoKTsKbC5zdHlsZS56SW5kZXg9dGhpcy5fb3JpZ2luYWxaSW5kZXgrbTsKfXRoaXMuX3pJbmRleEluY3JlbWVudERlcHRoKys7Cn0sX3Jlc3RvcmVaSW5kZXg6ZnVuY3Rpb24oKXtpZih0aGlzLl96SW5kZXhJbmNyZW1lbnREZXB0aD4wKXt0aGlzLl96SW5kZXhJbmNyZW1lbnREZXB0aC0tOwp9aWYodGhpcy5fekluZGV4SW5jcmVtZW50RGVwdGg9PTApe3ZhciBsPXRoaXMuZ2V0X2VsZW1lbnQoKTsKbC5zdHlsZS56SW5kZXg9dGhpcy5fb3JpZ2luYWxaSW5kZXg7Cn19LF9nZXRSdGxDbGFzc05hbWU6ZnVuY3Rpb24oKXtyZXR1cm4iUmFkTWVudV9ydGwiOwp9LF9nZXRNYWluRWxlbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldF9lbGVtZW50KCk7Cn0sX2luaXRSaWdodFRvTGVmdDpmdW5jdGlvbigpe3ZhciBtPXRoaXMuX2dldE1haW5FbGVtZW50KCk7Cm0uZGlyPSJsdHIiOwppZihtLmNsYXNzTmFtZS5pbmRleE9mKCJSYWRNZW51X3J0bCIpPDB8fG0uY2xhc3NOYW1lLmluZGV4T2YoIlJhZE1lbnVfQ29udGV4dF9ydGwiKTwwKXttLmNsYXNzTmFtZT1TdHJpbmcuZm9ybWF0KCJ7MH0gezF9IixtLmNsYXNzTmFtZSx0aGlzLl9nZXRSdGxDbGFzc05hbWUoKSk7CmlmKHRoaXMuX3NraW4pe20uY2xhc3NOYW1lPVN0cmluZy5mb3JtYXQoInswfSBSYWRNZW51X3sxfV9ydGwiLG0uY2xhc3NOYW1lLHRoaXMuX3NraW4pOwp9fWZvcih2YXIgcT0wOwpxPHRoaXMuZ2V0X2l0ZW1zKCkuZ2V0X2NvdW50KCk7CnErKyl7dmFyIG49dGhpcy5nZXRfaXRlbXMoKS5nZXRJdGVtKHEpOwp2YXIgcz1uLmdldF9pbWFnZUVsZW1lbnQoKTsKdmFyIHA9bi5nZXRfbGlua0VsZW1lbnQoKTsKdmFyIGw9YShwKTsKaWYocyYmcCl7cy5zdHlsZS5zdHlsZUZsb2F0PSJsZWZ0IjsKcy5zdHlsZS5jc3NGbG9hdD0ibGVmdCI7CmlmKCR0ZWxlcmlrLmlzSUUpe3Muc3R5bGUuZGlzcGxheT0ibm9uZSI7CnZhciByPSR0ZWxlcmlrLnF1aXJrc01vZGU/bC5pbm5lcldpZHRoKCk6bC53aWR0aCgpOwpzLnN0eWxlLmRpc3BsYXk9ImJsb2NrIjsKdmFyIG89JHRlbGVyaWsucXVpcmtzTW9kZT9sLmlubmVyV2lkdGgoKTpsLndpZHRoKCk7CnAuc3R5bGUud2lkdGg9cj09bz9yK2Eocykud2lkdGgoKTpvOwp9ZWxzZXtwLnN0eWxlLndpZHRoPWwud2lkdGgoKTsKfXMuc3R5bGUuc3R5bGVGbG9hdD0icmlnaHQiOwpzLnN0eWxlLmNzc0Zsb2F0PSJyaWdodCI7Cn19fSxfcG9zdGJhY2s6ZnVuY3Rpb24obSl7aWYoIXRoaXMuX3Bvc3RCYWNrUmVmZXJlbmNlKXtyZXR1cm47Cn12YXIgbD10aGlzLl9wb3N0QmFja1JlZmVyZW5jZS5yZXBsYWNlKCJhcmd1bWVudHMiLG0pOwpldmFsKGwpOwp9LF9yYWlzZUV2ZW50OmZ1bmN0aW9uKG0sbCl7aWYodGhpcy5fZmlyZUV2ZW50cyl7dGhpcy5yYWlzZUV2ZW50KG0sbCk7Cn19LF9pbml0aWFsaXplV2ViU2VydmljZUxvYWRlcjpmdW5jdGlvbigpe3ZhciBsPXRoaXMuZ2V0X3dlYlNlcnZpY2VTZXR0aW5ncygpOwppZihsLmdldF9pc09EYXRhKCkpe3RoaXMuX3dlYlNlcnZpY2VMb2FkZXI9bmV3IGIuTmF2aWdhdGlvbkNvbnRyb2xPRGF0YUxvYWRlcih0aGlzLmdldF93ZWJTZXJ2aWNlU2V0dGluZ3MoKSxmdW5jdGlvbihtKXtpZihtLmxlbmd0aD4wKXtyZXR1cm4gYi5NZW51SXRlbUV4cGFuZE1vZGUuV2ViU2VydmljZTsKfWVsc2V7cmV0dXJuIGIuTWVudUl0ZW1FeHBhbmRNb2RlLkNsaWVudFNpZGU7Cn19KTsKfWVsc2V7dGhpcy5fd2ViU2VydmljZUxvYWRlcj1uZXcgYi5XZWJTZXJ2aWNlTG9hZGVyKHRoaXMuZ2V0X3dlYlNlcnZpY2VTZXR0aW5ncygpKTsKfXRoaXMuX3dlYlNlcnZpY2VMb2FkZXIuYWRkX2xvYWRpbmdTdGFydGVkKEZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5fb25JdGVtTG9hZGluZ1N0YXJ0ZWQpKTsKdGhpcy5fd2ViU2VydmljZUxvYWRlci5hZGRfbG9hZGluZ1N1Y2Nlc3MoRnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vbkl0ZW1Mb2FkaW5nU3VjY2VzcykpOwp0aGlzLl93ZWJTZXJ2aWNlTG9hZGVyLmFkZF9sb2FkaW5nRXJyb3IoRnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vbkl0ZW1Mb2FkaW5nRXJyb3IpKTsKfSxfbG9hZENoaWxkcmVuRnJvbVdlYlNlcnZpY2U6ZnVuY3Rpb24obCl7aWYoIXRoaXMuX3dlYlNlcnZpY2VMb2FkZXIpe3RoaXMuX2luaXRpYWxpemVXZWJTZXJ2aWNlTG9hZGVyKCk7Cn12YXIgbz17fTsKdmFyIG49bmV3IGIuUmFkTWVudUl0ZW1Qb3B1bGF0aW5nRXZlbnRBcmdzKGwsbyk7CnRoaXMuX3JhaXNlRXZlbnQoIml0ZW1Qb3B1bGF0aW5nIixuKTsKaWYobi5nZXRfY2FuY2VsKCkpe3JldHVybjsKfXZhciBwPXtUZXh0OmwuZ2V0X3RleHQoKSxWYWx1ZTpsLmdldF92YWx1ZSgpLEV4cGFuZE1vZGU6bC5nZXRfZXhwYW5kTW9kZSgpfTsKaWYobC5nZXRfYXR0cmlidXRlcygpLmdldF9jb3VudCgpPjApe3AuQXR0cmlidXRlcz1sLmdldF9hdHRyaWJ1dGVzKCkuX2RhdGE7Cn12YXIgbT17aXRlbTpwLGNvbnRleHQ6b307CmlmKHRoaXMuZ2V0X3dlYlNlcnZpY2VTZXR0aW5ncygpLmdldF9pc1djZigpKXttLmNvbnRleHQ9dGhpcy5fd2ViU2VydmljZUxvYWRlci5fc2VyaWFsaXplRGljdGlvbmFyeUFzS2V5VmFsdWVQYWlycyhtLmNvbnRleHQpOwppZihtLml0ZW0uQXR0cmlidXRlcyl7bS5pdGVtLkF0dHJpYnV0ZXM9dGhpcy5fd2ViU2VydmljZUxvYWRlci5fc2VyaWFsaXplRGljdGlvbmFyeUFzS2V5VmFsdWVQYWlycyhtLml0ZW0uQXR0cmlidXRlcyk7Cn19ZWxzZXtpZih0aGlzLmdldF9vZGF0YUNsaWVudFNldHRpbmdzKCkpe3RoaXMuX29uRGF0YU5lZWRlZChsKTsKcmV0dXJuOwp9fXRoaXMuX3dlYlNlcnZpY2VMb2FkZXIubG9hZERhdGEobSxsKTsKfSxfb25JdGVtTG9hZGluZ1N0YXJ0ZWQ6ZnVuY3Rpb24obCxuKXt2YXIgbT1uLmdldF9jb250ZXh0KCk7Cm0uX29uQ2hpbGRyZW5Mb2FkaW5nKCk7Cn0sX29uSXRlbUxvYWRpbmdTdWNjZXNzOmZ1bmN0aW9uKHQsbCl7dmFyIHU9bC5nZXRfZGF0YSgpOwp2YXIgbj1sLmdldF9jb250ZXh0KCk7CnZhciBtPW4uZ2V0X2l0ZW1zKCk7CnZhciBxPXRoaXMuZ2V0X3dlYlNlcnZpY2VTZXR0aW5ncygpLmdldF9pc1djZigpOwpmb3Iocj0wOwpyPHUubGVuZ3RoOwpyKyspe3ZhciBwPXVbcl07CnZhciBvPW5ldyBiLlJhZE1lbnVJdGVtKCk7Cm8uX2xvYWRGcm9tRGljdGlvbmFyeShwLHEpOwpvLl9yZW5kZXJlZENsaWVudFRlbXBsYXRlPWIuVGVtcGxhdGVSZW5kZXJlci5yZW5kZXJUZW1wbGF0ZShwLHRoaXMsbyk7CmlmKG8uZ2V0X25hdmlnYXRlVXJsKCk9PT0iIil7by5zZXRfbmF2aWdhdGVVcmwoIiMiKTsKfW0uYWRkKG8pOwp9aWYobi5fb25DaGlsZHJlbkxvYWRlZCl7bi5fb25DaGlsZHJlbkxvYWRlZCgpOwp9aWYodGhpcy5nZXRfcGVyc2lzdExvYWRPbkRlbWFuZEl0ZW1zKCkpe3RoaXMudHJhY2tDaGFuZ2VzKCk7CmlmKG4uc2V0X2V4cGFuZE1vZGUpe24uc2V0X2V4cGFuZE1vZGUoYi5NZW51SXRlbUV4cGFuZE1vZGUuQ2xpZW50U2lkZSk7Cn12YXIgcz1tLmdldF9jb3VudCgpOwpmb3IodmFyIHI9MDsKcjxzOwpyKyspe3RoaXMuX2xvZy5sb2dJbnNlcnQobS5nZXRJdGVtKHIpKTsKfXRoaXMuY29tbWl0Q2hhbmdlcygpOwp9aWYoYShuLmdldF9lbGVtZW50KCkpLmlzKCIucm1JdGVtIikpe3ZhciB2PW5ldyBiLlJhZE1lbnVJdGVtUG9wdWxhdGVkRXZlbnRBcmdzKG4pOwp0aGlzLl9yYWlzZUV2ZW50KCJpdGVtUG9wdWxhdGVkIix2KTsKfWVsc2V7YS5yYWlzZUNvbnRyb2xFdmVudCh0aGlzLCJtZW51UG9wdWxhdGVkIix7fSk7Cn19LF9vbkl0ZW1Mb2FkaW5nRXJyb3I6ZnVuY3Rpb24obCxwKXt2YXIgbz1wLmdldF9tZXNzYWdlKCk7CnZhciBtPXAuZ2V0X2NvbnRleHQoKTsKaWYobS5fb25DaGlsZHJlbkxvYWRpbmdFcnJvcil7bS5fb25DaGlsZHJlbkxvYWRpbmdFcnJvcigpOwp9dmFyIG49bmV3IGIuUmFkTWVudUl0ZW1Qb3B1bGF0aW9uRmFpbGVkRXZlbnRBcmdzKG0sbyk7CnRoaXMuX3JhaXNlRXZlbnQoIml0ZW1Qb3B1bGF0aW9uRmFpbGVkIixuKTsKaWYobi5nZXRfY2FuY2VsKCkpe3JldHVybjsKfWFsZXJ0KG8pOwp9LF9hZGp1c3RSb290SXRlbVdpZHRoOmZ1bmN0aW9uKCl7Yi5SYWRNZW51Ll9hZGp1c3RSb290SXRlbVdpZHRoKHRoaXMuZ2V0X2lkKCksdGhpcy5nZXRfY2hpbGRMaXN0RWxlbWVudCgpKTsKfX07CmEucmVnaXN0ZXJDb250cm9sUHJvcGVydGllcyhiLlJhZE1lbnUse2NsaWNrZWQ6ZmFsc2UsZGF0YUJpbmRpbmdzOm51bGwsb2RhdGFDbGllbnRTZXR0aW5nczpudWxsLGVuYWJsZVJvb3RJdGVtU2Nyb2xsOmZhbHNlLGVuYWJsZVJvdW5kZWRDb3JuZXJzOmZhbHNlLGVuYWJsZVNoYWRvd3M6ZmFsc2UsZW5hYmxlSW1hZ2VTcHJpdGVzOmZhbHNlLGNsaWVudFRlbXBsYXRlOm51bGwsbG9hZGluZ1RlbXBsYXRlOiIiLGVuYWJsZVNjcmVlbkJvdW5kYXJ5RGV0ZWN0aW9uOnRydWUsZW5hYmxlQXV0b1Njcm9sbDpmYWxzZSxlbmFibGVTZWxlY3Rpb246dHJ1ZSxhdXRvU2Nyb2xsTWluaW11bUhlaWdodDo1MCxhdXRvU2Nyb2xsTWluaW11bVdpZHRoOjUwLGNsaWNrVG9PcGVuOmZhbHNlLGNvbGxhcHNlRGVsYXk6NTAwLGV4cGFuZERlbGF5OjEwfSk7CmEucmVnaXN0ZXJDb250cm9sRXZlbnRzKGIuUmFkTWVudSxbImxvYWQiLCJtZW51UG9wdWxhdGluZyIsIm1lbnVQb3B1bGF0ZWQiLCJpdGVtRm9jdXMiLCJpdGVtQmx1ciIsIml0ZW1PcGVuaW5nIiwiaXRlbU9wZW5lZCIsIml0ZW1DbG9zaW5nIiwiaXRlbUNsb3NlZCIsIml0ZW1Qb3B1bGF0aW5nIiwiaXRlbVBvcHVsYXRlZCIsIml0ZW1Qb3B1bGF0aW9uRmFpbGVkIiwidGVtcGxhdGVEYXRhQm91bmQiLCJtb3VzZU92ZXIiLCJtb3VzZU91dCIsIml0ZW1DbGlja2VkIiwiaXRlbUNsaWNraW5nIl0pOwpiLlJhZE1lbnUucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuUmFkTWVudSIsYi5Db250cm9sSXRlbUNvbnRhaW5lcik7Cn0pKCk7CihmdW5jdGlvbih2KXtUeXBlLnJlZ2lzdGVyTmFtZXNwYWNlKCJUZWxlcmlrLldlYi5VSSIpOwp2YXIgZj1UZWxlcmlrLldlYi5VSSxxPVRlbGVyaWsuV2ViLlN0cmluZ0J1aWxkZXI7CnYucmVnaXN0ZXJFbnVtKGYsIlJhZE1lbnVJdGVtU3RhdGUiLHtDbG9zZWQ6MCxPcGVuOjEsQWJvdXRUb0Nsb3NlOjIsQWJvdXRUb09wZW46M30pOwp2LnJlZ2lzdGVyRW51bShmLCJNZW51SXRlbUV4cGFuZE1vZGUiLHtDbGllbnRTaWRlOjAsV2ViU2VydmljZToxfSk7CnZhciBiPSJybUdyb3VwIixlPSJybU11bHRpQ29sdW1uIixuPSJybU11bHRpR3JvdXAiLHM9InJtR3JvdXBDb2x1bW4iLGQ9InJtRmlyc3RHcm91cENvbHVtbiIsYz0icm1TY3JvbGxXcmFwIixpPSJybUxldmVsIix3PSJybUhvcml6b250YWwiLGc9InJtVmVydGljYWwiLGs9InJtTGluayIsaD0icm1Sb290TGluayIsdT0icm1JbWFnZU9ubHkiLGE9InJtTGVmdEltYWdlIixtPSJybVRleHQiLHA9InJtRGlzYWJsZWQiLG89InJtRXhwYW5kZWQiLHI9InJtRm9jdXNlZCIsdD0icm1TZWxlY3RlZCIsbD0iIixqPSJybUNsaWNrZWQiOwpmLlJhZE1lbnVJdGVtPWZ1bmN0aW9uKCl7Zi5SYWRNZW51SXRlbS5pbml0aWFsaXplQmFzZSh0aGlzKTsKdGhpcy5fekluZGV4U3RlcD0xMDAwOwp0aGlzLl9kZWZhdWx0U2Nyb2xsU2l6ZT0xNjsKdGhpcy5fbWVudT1udWxsOwp0aGlzLl9ncm91cFNldHRpbmdzPW5ldyBmLlJhZE1lbnVJdGVtR3JvdXBTZXR0aW5ncyh7fSk7CnRoaXMuX2ltYWdlVXJsPW51bGw7CnRoaXMuX2VuYWJsZUltYWdlU3ByaXRlPW51bGw7CnRoaXMuX2Zsb3c9bnVsbDsKdGhpcy5fb3BlbmVkSXRlbT1udWxsOwp0aGlzLl90aW1lb3V0UmVmPW51bGw7CnRoaXMuX2ZvY3VzZWQ9ZmFsc2U7CnRoaXMuX2NsaWNrZWQ9ZmFsc2U7CnRoaXMuX2hvdmVyZWQ9ZmFsc2U7CnRoaXMuX2lzSW1hZ2VPbmx5PW51bGw7CnRoaXMuX2l0ZW1zTG9hZGVkPWZhbHNlOwp0aGlzLl9pdGVtc0xvYWRpbmc9ZmFsc2U7CnRoaXMuX2FkanVzdFNpYmxpbmdzV2lkdGhPblNob3c9ZmFsc2U7CnRoaXMuX3N0YXRlPWYuUmFkTWVudUl0ZW1TdGF0ZS5DbG9zZWQ7CnRoaXMuX2xpbmtFbGVtZW50PW51bGw7CnRoaXMuX3RlbXBsYXRlRWxlbWVudD1udWxsOwp0aGlzLl9pbWFnZUVsZW1lbnQ9bnVsbDsKdGhpcy5fY2hpbGRMaXN0RWxlbWVudD1udWxsOwp0aGlzLl9zY3JvbGxXcmFwRWxlbWVudD1udWxsOwp0aGlzLl9zbGlkZVdyYXBFbGVtZW50PW51bGw7CnRoaXMuX2FuaW1hdGVkRWxlbWVudD1udWxsOwp0aGlzLl9hbmltYXRpb25Db250YWluZXI9bnVsbDsKdGhpcy5fY2hpbGRyZW5EZXRhY2hlZD1mYWxzZTsKdGhpcy5fYXV0b1Njcm9sbEFjdGl2ZT1mYWxzZTsKdGhpcy5fYW5pbWF0aW9uQ29udGFpbmVyT3JpZ2luYWxTaXplPW51bGw7CnRoaXMuX2NvbGxhcHNlQW5pbWF0aW9uRW5kZWREZWxlZ2F0ZT1udWxsOwp0aGlzLl9leHBhbmRBbmltYXRpb25FbmRlZERlbGVnYXRlPW51bGw7CnRoaXMuX3NsaWRlPW51bGw7CnRoaXMuX3Njcm9sbGVyPW51bGw7CnRoaXMuX3N0eWxlQ3NzVGV4dD1udWxsOwp0aGlzLl9oYXNJdGVtcz1udWxsOwp9OwpmLlJhZE1lbnVJdGVtLnByb3RvdHlwZT17X2luaXRpYWxpemU6ZnVuY3Rpb24oeix4KXtmLlJhZE1lbnVJdGVtLmNhbGxCYXNlTWV0aG9kKHRoaXMsIl9pbml0aWFsaXplIixbeix4XSk7CnZhciB5PXRoaXMuZ2V0X21lbnUoKTsKdGhpcy5fZ3JvdXBTZXR0aW5ncz1uZXcgZi5SYWRNZW51SXRlbUdyb3VwU2V0dGluZ3Moei5ncm91cFNldHRpbmdzfHx7fSx5LmdldF9kZWZhdWx0R3JvdXBTZXR0aW5ncygpKTsKdGhpcy5faW5pdGlhbGl6ZUFuaW1hdGlvbigpOwp0aGlzLl9jbGVhck5hdmlnYXRlVXJsKCk7CnRoaXMuX3VwZGF0ZVRleHRFbGVtZW50Q2xhc3MoKTsKdGhpcy5fcmVuZGVyQWNjZXNzS2V5KCk7CnRoaXMuX29yaWdpbmFsRXhwYW5kTW9kZT10aGlzLmdldF9leHBhbmRNb2RlKCk7Cn0sX2Rpc3Bvc2U6ZnVuY3Rpb24oKXtmLlJhZE1lbnVJdGVtLmNhbGxCYXNlTWV0aG9kKHRoaXMsIl9kaXNwb3NlIik7CmlmKHRoaXMuX2NvbGxhcHNlQW5pbWF0aW9uRW5kZWREZWxlZ2F0ZSl7aWYodGhpcy5fc2xpZGUpe3RoaXMuX3NsaWRlLnJlbW92ZV9jb2xsYXBzZUFuaW1hdGlvbkVuZGVkKHRoaXMuX2NvbGxhcHNlQW5pbWF0aW9uRW5kZWREZWxlZ2F0ZSk7Cn10aGlzLl9jb2xsYXBzZUFuaW1hdGlvbkVuZGVkRGVsZWdhdGU9bnVsbDsKfWlmKHRoaXMuX2V4cGFuZEFuaW1hdGlvbkVuZGVkRGVsZWdhdGUpe2lmKHRoaXMuX3NsaWRlKXt0aGlzLl9zbGlkZS5yZW1vdmVfY29sbGFwc2VBbmltYXRpb25FbmRlZCh0aGlzLl9leHBhbmRBbmltYXRpb25FbmRlZERlbGVnYXRlKTsKfXRoaXMuX2V4cGFuZEFuaW1hdGlvbkVuZGVkRGVsZWdhdGU9bnVsbDsKfWlmKHRoaXMuX3NsaWRlKXt0aGlzLl9zbGlkZS5kaXNwb3NlKCk7CnRoaXMuX3NsaWRlPW51bGw7Cn1pZih0aGlzLl9zY3JvbGxlcil7dGhpcy5fc2Nyb2xsZXIuZGlzcG9zZSgpOwp0aGlzLl9zY3JvbGxlcj1udWxsOwp9dmFyIHg9dGhpcy5fc2xpZGVXcmFwRWxlbWVudDsKaWYoeCl7eC5faXRlbT1udWxsOwp4Ll9pdGVtVHlwZU5hbWU9bnVsbDsKfXRoaXMuX2NoaWxkTGlzdEVsZW1lbnQ9bnVsbDsKdGhpcy5fbGlua0VsZW1lbnQ9bnVsbDsKdGhpcy5faW1hZ2VFbGVtZW50PW51bGw7CnRoaXMuX3NsaWRlV3JhcEVsZW1lbnQ9bnVsbDsKdGhpcy5fc2Nyb2xsV3JhcEVsZW1lbnQ9bnVsbDsKdGhpcy5fYW5pbWF0ZWRFbGVtZW50PW51bGw7CnRoaXMuX2NsZWFyVGltZW91dCgpOwp9LF9pbml0aWFsaXplUmVuZGVyZWRJdGVtOmZ1bmN0aW9uKCl7Zi5SYWRNZW51SXRlbS5jYWxsQmFzZU1ldGhvZCh0aGlzLCJfaW5pdGlhbGl6ZVJlbmRlcmVkSXRlbSIpOwp0aGlzLl9pbml0aWFsaXplQW5pbWF0aW9uKCk7CnRoaXMuX2NsZWFyTmF2aWdhdGVVcmwoKTsKdGhpcy5fdXBkYXRlVGV4dEVsZW1lbnRDbGFzcygpOwp0aGlzLl91cGRhdGVMaW5rQ2xhc3MoKTsKdGhpcy5fcmVuZGVyQWNjZXNzS2V5KCk7CmYuUmFkTWVudS5fdXBkYXRlQ2hpbGRyZW5Qb3NpdGlvbkNsYXNzKHRoaXMuZ2V0X3BhcmVudCgpKTsKZi5SYWRNZW51Ll91cGRhdGVDaGlsZHJlblBvc2l0aW9uQ2xhc3ModGhpcyk7Cn0sZ2V0X2xpbmtFbGVtZW50OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX2xpbmtFbGVtZW50KXt0aGlzLl9saW5rRWxlbWVudD0kdGVsZXJpay5nZXRGaXJzdENoaWxkQnlUYWdOYW1lKHRoaXMuZ2V0X2VsZW1lbnQoKSwiYSIsMCk7Cn1yZXR1cm4gdGhpcy5fbGlua0VsZW1lbnQ7Cn0sZ2V0X3RlbXBsYXRlRWxlbWVudDpmdW5jdGlvbigpe2lmKCF0aGlzLl90ZW1wbGF0ZUVsZW1lbnQpe3ZhciB4PXYodGhpcy5nZXRfZWxlbWVudCgpKS5jaGlsZHJlbigiZGl2LiIrbSk7CmlmKHgubGVuZ3RoKXt0aGlzLl90ZW1wbGF0ZUVsZW1lbnQ9eFswXTsKfX1yZXR1cm4gdGhpcy5fdGVtcGxhdGVFbGVtZW50Owp9LGdldF9jaGlsZExpc3RFbGVtZW50OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX2NoaWxkTGlzdEVsZW1lbnQpe3ZhciB6PXRoaXMuX2dldFNsaWRlV3JhcEVsZW1lbnQoKTsKaWYoeil7dmFyIHk9ejsKdmFyIHg9dGhpcy5fZ2V0U2Nyb2xsV3JhcEVsZW1lbnQoKTsKaWYoeCl7eT14Owp9dGhpcy5fY2hpbGRMaXN0RWxlbWVudD0kdGVsZXJpay5nZXRGaXJzdENoaWxkQnlUYWdOYW1lKHksInVsIiwwKTsKfX1yZXR1cm4gdGhpcy5fY2hpbGRMaXN0RWxlbWVudDsKfSxnZXRfaW1hZ2VFbGVtZW50OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX2ltYWdlRWxlbWVudCl7dmFyIHk9dGhpcy5nZXRfbGlua0VsZW1lbnQoKTsKdmFyIHg9dGhpcy5nZXRfZWxlbWVudCgpOwp2YXIgej10aGlzLmdldF9lbmFibGVJbWFnZVNwcml0ZSgpPyJzcGFuIjoiaW1nIjsKdGhpcy5faW1hZ2VFbGVtZW50PSR0ZWxlcmlrLmdldEZpcnN0Q2hpbGRCeVRhZ05hbWUoeXx8eCx6LDApOwp9cmV0dXJuIHRoaXMuX2ltYWdlRWxlbWVudDsKfSxnZXRfdGV4dEVsZW1lbnQ6ZnVuY3Rpb24oKXt2YXIgeD10aGlzLmdldF9saW5rRWxlbWVudCgpOwppZih4KXtyZXR1cm4gJHRlbGVyaWsuZ2V0Q2hpbGRCeUNsYXNzTmFtZSh4LG0sMCk7Cn1lbHNle3JldHVybiBudWxsOwp9fSxnZXRfbWVudTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRDb250cm9sKCk7Cn0sZ2V0X2l0ZW1zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldENoaWxkcmVuKCk7Cn0sc2V0X3RleHQ6ZnVuY3Rpb24oeCl7Zi5SYWRNZW51SXRlbS5jYWxsQmFzZU1ldGhvZCh0aGlzLCJzZXRfdGV4dCIsW3hdKTsKaWYodGhpcy5fc3RhdGUhPWYuUmFkTWVudUl0ZW1TdGF0ZS5DbG9zZWQpe3RoaXMuX2NsZWFyV2lkdGgoKTsKdGhpcy5fc2V0V2lkdGgodGhpcy5fZ2V0V2lkdGgoKSsicHgiKTsKfWVsc2V7aWYodGhpcy5fZ2V0UGFyZW50RmxvdygpPT1mLkl0ZW1GbG93LlZlcnRpY2FsKXt0aGlzLl9hZGp1c3RTaWJsaW5nc1dpZHRoT25TaG93PXRydWU7Cn19dGhpcy5fdXBkYXRlTGlua0NsYXNzKCk7Cn0sZ2V0X25hdmlnYXRlVXJsOmZ1bmN0aW9uKCl7dmFyIHg9dGhpcy5nZXRfbGlua0VsZW1lbnQoKTsKaWYoIXRoaXMuZ2V0X2VuYWJsZWQoKSYmeCl7cmV0dXJuIHYoeCkuZGF0YSgiaHJlZiIpOwp9ZWxzZXtyZXR1cm4gdGhpcy5fZ2V0TmF2aWdhdGVVcmwoKTsKfX0sc2V0X25hdmlnYXRlVXJsOmZ1bmN0aW9uKHgpe3RoaXMuX3Byb3BlcnRpZXMuc2V0VmFsdWUoIm5hdmlnYXRlVXJsIix4LHRydWUpOwppZih0aGlzLmdldF9saW5rRWxlbWVudCgpKXt0aGlzLmdldF9saW5rRWxlbWVudCgpLmhyZWY9eDsKfXRoaXMuX2NsZWFyTmF2aWdhdGVVcmwoKTsKfSxnZXRfdGFyZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Byb3BlcnRpZXMuZ2V0VmFsdWUoInRhcmdldCIsbnVsbCk7Cn0sc2V0X3RhcmdldDpmdW5jdGlvbih4KXt0aGlzLl9wcm9wZXJ0aWVzLnNldFZhbHVlKCJ0YXJnZXQiLHgpOwppZih0aGlzLmdldF9saW5rRWxlbWVudCgpKXt0aGlzLmdldF9saW5rRWxlbWVudCgpLnRhcmdldD14Owp9fSxnZXRfZ3JvdXBTZXR0aW5nczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ncm91cFNldHRpbmdzOwp9LHNldF9ncm91cFNldHRpbmdzOmZ1bmN0aW9uKHgpe3RoaXMuX2dyb3VwU2V0dGluZ3M9eDsKfSxnZXRfaXNPcGVuOmZ1bmN0aW9uKCl7aWYodGhpcy5nZXRfcGFyZW50KCkpe3JldHVybiB0aGlzLmdldF9wYXJlbnQoKS5nZXRfb3BlbmVkSXRlbSgpPT10aGlzOwp9cmV0dXJuIGZhbHNlOwp9LF9nZXROZXh0SXRlbTpmdW5jdGlvbigpe3ZhciB4PXRoaXMuZ2V0X3BhcmVudCgpLmdldF9pdGVtcygpOwp2YXIgeT10aGlzLmdldF9pbmRleCgpOwppZih5PT14LmdldF9jb3VudCgpLTEpe3JldHVybiB4LmdldEl0ZW0oMCk7Cn1yZXR1cm4geC5nZXRJdGVtKHkrMSk7Cn0sX2dldFByZXZpb3VzSXRlbTpmdW5jdGlvbigpe3ZhciB4PXRoaXMuZ2V0X3BhcmVudCgpLmdldF9pdGVtcygpOwp2YXIgeT10aGlzLmdldF9pbmRleCgpOwppZih5PT0wKXtyZXR1cm4geC5nZXRJdGVtKHguZ2V0X2NvdW50KCktMSk7Cn1yZXR1cm4geC5nZXRJdGVtKHktMSk7Cn0sX2ZvY3VzOmZ1bmN0aW9uKHgpe3RoaXMuX3NldEZvY3VzZWQodHJ1ZSx4KTsKfSxfYmx1cjpmdW5jdGlvbih4KXt0aGlzLl9zZXRGb2N1c2VkKGZhbHNlLHgpOwp9LF9zZXRGb2N1c2VkOmZ1bmN0aW9uKHkseCl7aWYoeSl7dGhpcy5fZG9Gb2N1cyh4KTsKfWVsc2V7dGhpcy5fZG9CbHVyKHgpOwp9dGhpcy5fZm9jdXNlZD15Owp0aGlzLl91cGRhdGVMaW5rQ2xhc3MoKTsKfSxfb3BlbjpmdW5jdGlvbih4KXt2YXIgeT10aGlzLmdldF9tZW51KCk7CnZhciB6PW5ldyBmLlJhZE1lbnVJdGVtT3BlbmluZ0V2ZW50QXJncyh0aGlzLHgpOwp5Ll9yYWlzZUV2ZW50KCJpdGVtT3BlbmluZyIseik7CmlmKHouZ2V0X2NhbmNlbCgpKXtyZXR1cm47Cn1pZih0aGlzLl9pc1dlYlNlcnZpY2VDYWxsTmVlZGVkKCkpe3RoaXMuX2xvYWRDaGlsZHJlbkZyb21XZWJTZXJ2aWNlKCk7CnJldHVybjsKfXRoaXMuX2RvT3Blbih4KTsKfSxfY2xvc2U6ZnVuY3Rpb24oeCl7aWYodGhpcy5nZXRfaXNTZXBhcmF0b3IoKXx8dGhpcy5fc3RhdGU9PWYuUmFkTWVudUl0ZW1TdGF0ZS5DbG9zZWQpe3JldHVybjsKfXZhciBBPW5ldyBmLlJhZE1lbnVJdGVtQ2xvc2luZ0V2ZW50QXJncyh0aGlzLHgpOwp0aGlzLmdldF9tZW51KCkuX3JhaXNlRXZlbnQoIml0ZW1DbG9zaW5nIixBKTsKaWYoQS5nZXRfY2FuY2VsKCkpe3JldHVybjsKfWlmKHRoaXMuX29wZW5lZEl0ZW0pe3RoaXMuX29wZW5lZEl0ZW0uX2Nsb3NlKHgpOwp9dmFyIHk9dGhpcy5nZXRfcGFyZW50KCk7CnkuX29wZW5lZEl0ZW09bnVsbDsKaWYoIXRoaXMuX2dldEFuaW1hdGlvbkNvbnRhaW5lcigpKXtyZXR1cm47Cn10aGlzLl9zdGF0ZT1mLlJhZE1lbnVJdGVtU3RhdGUuQ2xvc2VkOwp2YXIgej10aGlzLmdldF9tZW51KCk7CmlmKHRoaXMuZ2V0X2xldmVsKCk9PTApe3ouX2Fib3V0VG9Db2xsYXBzZT10cnVlOwp9aWYoIXRoaXMuX2dldElzSW1hZ2VPbmx5KCkpe3RoaXMuZ2V0X2VsZW1lbnQoKS5zdHlsZS56SW5kZXg9MDsKfXRoaXMuX3NsaWRlLmNvbGxhcHNlKCk7CnRoaXMuX3VwZGF0ZUxpbmtDbGFzcygpOwp0aGlzLl91cGRhdGVJbWFnZVNyYygpOwp2YXIgQj1uZXcgZi5SYWRNZW51SXRlbUNsb3NlZEV2ZW50QXJncyh0aGlzLHgpOwp0aGlzLmdldF9tZW51KCkuX3JhaXNlRXZlbnQoIml0ZW1DbG9zZWQiLEIpOwp0aGlzLl9jbG9zZUNoaWxkcmVuKHgpOwp9LGdldF9uZXh0SXRlbTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldF9uZXh0U2libGluZygpOwp9LGdldF9wcmV2aW91c0l0ZW06ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRfcHJldmlvdXNTaWJsaW5nKCk7Cn0sZ2V0X2ZvY3VzZWRJdGVtOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZvY3VzZWRJdGVtOwp9LGdldF9pc1NlcGFyYXRvcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wcm9wZXJ0aWVzLmdldFZhbHVlKCJpc1NlcGFyYXRvciIsZmFsc2UpOwp9LHNldF9pc1NlcGFyYXRvcjpmdW5jdGlvbih4KXt0aGlzLl9wcm9wZXJ0aWVzLnNldFZhbHVlKCJpc1NlcGFyYXRvciIseCx0cnVlKTsKfSxnZXRfb3BlbmVkSXRlbTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcGVuZWRJdGVtOwp9LGdldF90ZW1wbGF0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvcGVydGllcy5nZXRWYWx1ZSgidGVtcGxhdGVkIixmYWxzZSk9PXRydWU7Cn0sX2FwcGx5Q3NzQ2xhc3M6ZnVuY3Rpb24oKXt0aGlzLl91cGRhdGVMaW5rQ2xhc3MoKTsKfSxnZXRfZm9jdXNlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9mb2N1c2VkOwp9LHNldF9mb2N1c2VkOmZ1bmN0aW9uKHgpe3RoaXMuX3NldEZvY3VzZWQoeCk7Cn0sZ2V0X3NlbGVjdGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Byb3BlcnRpZXMuZ2V0VmFsdWUoInNlbGVjdGVkIixmYWxzZSk9PXRydWU7Cn0sc2V0X3NlbGVjdGVkOmZ1bmN0aW9uKHkpe2lmKCF0aGlzLmdldF9lbmFibGVkKCkmJnkpe3JldHVybjsKfWlmKHRoaXMuZ2V0X3NlbGVjdGVkKCk9PXkpe3JldHVybjsKfXRoaXMuX3Byb3BlcnRpZXMuc2V0VmFsdWUoInNlbGVjdGVkIix5KTsKdmFyIHg9dGhpcy5nZXRfbWVudSgpOwppZigheCl7cmV0dXJuOwp9aWYoeSl7eC5fY2xlYXJTZWxlY3RlZEl0ZW0oKTsKeC5fcmVnaXN0ZXJTZWxlY3RlZEl0ZW0odGhpcyk7Cn1lbHNle3guX3VucmVnaXN0ZXJTZWxlY3RlZEl0ZW0odGhpcyk7Cn10aGlzLl91cGRhdGVJbWFnZVNyYygpOwp0aGlzLl91cGRhdGVMaW5rQ2xhc3MoKTsKfSxnZXRfaG92ZXJlZEltYWdlVXJsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Byb3BlcnRpZXMuZ2V0VmFsdWUoImhvdmVyZWRJbWFnZVVybCIsbnVsbCk7Cn0sc2V0X2hvdmVyZWRJbWFnZVVybDpmdW5jdGlvbih4KXt0aGlzLl9wcm9wZXJ0aWVzLnNldFZhbHVlKCJob3ZlcmVkSW1hZ2VVcmwiLHgsdHJ1ZSk7CnRoaXMuX3VwZGF0ZUltYWdlU3JjKCk7Cn0sZ2V0X2NsaWNrZWRJbWFnZVVybDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wcm9wZXJ0aWVzLmdldFZhbHVlKCJjbGlja2VkSW1hZ2VVcmwiLG51bGwpOwp9LHNldF9jbGlja2VkSW1hZ2VVcmw6ZnVuY3Rpb24oeCl7dGhpcy5fcHJvcGVydGllcy5zZXRWYWx1ZSgiY2xpY2tlZEltYWdlVXJsIix4LHRydWUpOwp0aGlzLl91cGRhdGVJbWFnZVNyYygpOwp9LGdldF9zZWxlY3RlZEltYWdlVXJsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Byb3BlcnRpZXMuZ2V0VmFsdWUoInNlbGVjdGVkSW1hZ2VVcmwiLG51bGwpOwp9LHNldF9zZWxlY3RlZEltYWdlVXJsOmZ1bmN0aW9uKHgpe3RoaXMuX3Byb3BlcnRpZXMuc2V0VmFsdWUoInNlbGVjdGVkSW1hZ2VVcmwiLHgsdHJ1ZSk7CnRoaXMuX3VwZGF0ZUltYWdlU3JjKCk7Cn0sZ2V0X2ltYWdlVXJsOmZ1bmN0aW9uKCl7aWYodGhpcy5faW1hZ2VVcmwpe3JldHVybiB0aGlzLl9pbWFnZVVybDsKfWlmKHRoaXMuX2ltYWdlVXJsPXRoaXMuX3Byb3BlcnRpZXMuZ2V0VmFsdWUoImltYWdlVXJsIixudWxsKSl7cmV0dXJuIHRoaXMuX2ltYWdlVXJsOwp9dGhpcy5faW1hZ2VVcmw9dGhpcy5fZ2V0Q3VycmVudEltYWdlVXJsKCk7CnJldHVybiB0aGlzLl9pbWFnZVVybDsKfSxfZ2V0Q3VycmVudEltYWdlVXJsOmZ1bmN0aW9uKCl7dmFyIHg9bnVsbDsKdmFyIHk9dGhpcy5nZXRfaW1hZ2VFbGVtZW50KCk7CmlmKHkpe3g9eS5zcmM7Cn1yZXR1cm4geDsKfSxzZXRfaW1hZ2VVcmw6ZnVuY3Rpb24oeCl7dGhpcy5faW1hZ2VVcmw9eDsKdGhpcy5fcHJvcGVydGllcy5zZXRWYWx1ZSgiaW1hZ2VVcmwiLHgsdHJ1ZSk7CmlmKCF4KXt2KHRoaXMuZ2V0X2ltYWdlRWxlbWVudCgpKS5yZW1vdmUoKTsKdGhpcy5faW1hZ2VFbGVtZW50PW51bGw7CnJldHVybjsKfXRoaXMuX3VwZGF0ZUltYWdlU3JjKCk7Cn0sc2V0X3Zpc2libGU6ZnVuY3Rpb24oRCl7dmFyIHo9dGhpcy5nZXRfdmlzaWJsZSgpIT1EOwppZigheil7cmV0dXJuOwp9Zi5SYWRNZW51SXRlbS5jYWxsQmFzZU1ldGhvZCh0aGlzLCJzZXRfdmlzaWJsZSIsW0RdKTsKaWYodGhpcy5fZ2V0UGFyZW50RmxvdygpPT1mLkl0ZW1GbG93LlZlcnRpY2FsKXt0aGlzLl9hZGp1c3RTaWJsaW5nc1dpZHRoT25TaG93PXRydWU7Cn10aGlzLl9jbGVhcldpZHRoKCk7CnZhciBFPUQ/IiI6Im5vbmUiOwp2YXIgeD10aGlzLmdldF9saW5rRWxlbWVudCgpOwp2YXIgeT10aGlzLmdldF90ZXh0RWxlbWVudCgpOwp2YXIgQTsKaWYoeCl7QT14Owp9ZWxzZXtpZih5KXtBPXk7Cn19aWYodGhpcy5nZXRfaXNTZXBhcmF0b3IoKXx8dGhpcy5nZXRfdGVtcGxhdGVkKCkpe0E9dGhpcy5nZXRfZWxlbWVudCgpLmNoaWxkTm9kZXNbMF07Cn1BLnN0eWxlLmRpc3BsYXk9RTsKaWYodGhpcy5nZXRfdmlzaWJsZSgpKXt0aGlzLmdldF9lbGVtZW50KCkuc3R5bGUuY3NzVGV4dD10aGlzLl9zdHlsZUNzc1RleHQ7Cn1lbHNle3RoaXMuX3N0eWxlQ3NzVGV4dD10aGlzLmdldF9lbGVtZW50KCkuc3R5bGUuY3NzVGV4dDsKdGhpcy5nZXRfZWxlbWVudCgpLnN0eWxlLmNzc1RleHQ9InBhZGRpbmc6MHB4O21hcmdpbjowcHg7aGVpZ2h0OjBweDtvdmVyZmxvdzpoaWRkZW47IjsKfXZhciBDPXRoaXMuX2dldFBhcmVudEZsb3coKTsKaWYoQz09Zi5JdGVtRmxvdy5WZXJ0aWNhbCl7aWYoIUQpe3RoaXMuX2NsZWFyU2libGluZ3NXaWR0aCgpOwp9dmFyIEI9dGhpcy5nZXRfcGFyZW50KCk7CmlmKEIuZ2V0X2VsZW1lbnQoKS5vZmZzZXRXaWR0aD4wKXtmLlJhZE1lbnUuX2FkanVzdENoaWxkcmVuV2lkdGgoQik7Cn19fSxnZXRfZXhwYW5kZWRJbWFnZVVybDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wcm9wZXJ0aWVzLmdldFZhbHVlKCJleHBhbmRlZEltYWdlVXJsIixudWxsKTsKfSxzZXRfZXhwYW5kZWRJbWFnZVVybDpmdW5jdGlvbih4KXt0aGlzLl9wcm9wZXJ0aWVzLnNldFZhbHVlKCJleHBhbmRlZEltYWdlVXJsIix4LHRydWUpOwp0aGlzLl91cGRhdGVJbWFnZVNyYygpOwp9LGdldF9kaXNhYmxlZEltYWdlVXJsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Byb3BlcnRpZXMuZ2V0VmFsdWUoImRpc2FibGVkSW1hZ2VVcmwiLG51bGwpOwp9LHNldF9kaXNhYmxlZEltYWdlVXJsOmZ1bmN0aW9uKHgpe3RoaXMuX3Byb3BlcnRpZXMuc2V0VmFsdWUoImRpc2FibGVkSW1hZ2VVcmwiLHgsdHJ1ZSk7CnRoaXMuX3VwZGF0ZUltYWdlU3JjKCk7Cn0sZ2V0X2Rpc2FibGVkQ3NzQ2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvcGVydGllcy5nZXRWYWx1ZSgiZGlzYWJsZWRDc3NDbGFzcyIscCk7Cn0sc2V0X2Rpc2FibGVkQ3NzQ2xhc3M6ZnVuY3Rpb24oeCl7dGhpcy5fcHJvcGVydGllcy5zZXRWYWx1ZSgiZGlzYWJsZWRDc3NDbGFzcyIseCx0cnVlKTsKdGhpcy5fdXBkYXRlTGlua0NsYXNzKCk7Cn0sZ2V0X2V4cGFuZGVkQ3NzQ2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvcGVydGllcy5nZXRWYWx1ZSgiZXhwYW5kZWRDc3NDbGFzcyIsbyk7Cn0sc2V0X2V4cGFuZGVkQ3NzQ2xhc3M6ZnVuY3Rpb24oeCl7dGhpcy5fcHJvcGVydGllcy5zZXRWYWx1ZSgiZXhwYW5kZWRDc3NDbGFzcyIseCx0cnVlKTsKdGhpcy5fdXBkYXRlTGlua0NsYXNzKCk7Cn0sZ2V0X2ZvY3VzZWRDc3NDbGFzczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wcm9wZXJ0aWVzLmdldFZhbHVlKCJmb2N1c2VkQ3NzQ2xhc3MiLHIpOwp9LHNldF9mb2N1c2VkQ3NzQ2xhc3M6ZnVuY3Rpb24oeCl7dGhpcy5fcHJvcGVydGllcy5zZXRWYWx1ZSgiZm9jdXNlZENzc0NsYXNzIix4LHRydWUpOwp0aGlzLl91cGRhdGVMaW5rQ2xhc3MoKTsKfSxnZXRfc2VsZWN0ZWRDc3NDbGFzczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wcm9wZXJ0aWVzLmdldFZhbHVlKCJzZWxlY3RlZENzc0NsYXNzIix0KTsKfSxzZXRfc2VsZWN0ZWRDc3NDbGFzczpmdW5jdGlvbih4KXt0aGlzLl9wcm9wZXJ0aWVzLnNldFZhbHVlKCJzZWxlY3RlZENzc0NsYXNzIix4LHRydWUpOwp0aGlzLl91cGRhdGVMaW5rQ2xhc3MoKTsKfSxnZXRfY2xpY2tlZENzc0NsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Byb3BlcnRpZXMuZ2V0VmFsdWUoImNsaWNrZWRDc3NDbGFzcyIsaik7Cn0sc2V0X2NsaWNrZWRDc3NDbGFzczpmdW5jdGlvbih4KXt0aGlzLl9wcm9wZXJ0aWVzLnNldFZhbHVlKCJjbGlja2VkQ3NzQ2xhc3MiLHgsdHJ1ZSk7CnRoaXMuX3VwZGF0ZUxpbmtDbGFzcygpOwp9LGdldF9vdXRlckNzc0NsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Byb3BlcnRpZXMuZ2V0VmFsdWUoIm91dGVyQ3NzQ2xhc3MiLGwpOwp9LHNldF9vdXRlckNzc0NsYXNzOmZ1bmN0aW9uKHgpe3ZhciB5PXRoaXMuZ2V0X291dGVyQ3NzQ2xhc3MoKTsKdGhpcy5fcHJvcGVydGllcy5zZXRWYWx1ZSgib3V0ZXJDc3NDbGFzcyIseCx0cnVlKTsKdGhpcy5fdXBkYXRlSXRlbUNsYXNzKHkseCk7Cn0sZ2V0X3Bvc3RCYWNrOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Byb3BlcnRpZXMuZ2V0VmFsdWUoInBvc3RCYWNrIix0cnVlKT09dHJ1ZTsKfSxzZXRfcG9zdEJhY2s6ZnVuY3Rpb24oeCl7dGhpcy5fcHJvcGVydGllcy5zZXRWYWx1ZSgicG9zdEJhY2siLHgpOwp9LGdldF9leHBhbmRNb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Byb3BlcnRpZXMuZ2V0VmFsdWUoImV4cGFuZE1vZGUiLGYuTWVudUl0ZW1FeHBhbmRNb2RlLkNsaWVudFNpZGUpOwp9LHNldF9leHBhbmRNb2RlOmZ1bmN0aW9uKHgpe3RoaXMuX3Byb3BlcnRpZXMuc2V0VmFsdWUoImV4cGFuZE1vZGUiLHgsdHJ1ZSk7Cn0sc2V0X2VuYWJsZWQ6ZnVuY3Rpb24oeCl7Zi5SYWRNZW51SXRlbS5jYWxsQmFzZU1ldGhvZCh0aGlzLCJzZXRfZW5hYmxlZCIsW3hdKTsKdGhpcy5fdXBkYXRlTGlua0NsYXNzKCk7CnRoaXMuX3VwZGF0ZUltYWdlU3JjKCk7CmlmKHgpe3RoaXMuX3Jlc3RvcmVOYXZpZ2F0ZVVybCgpOwp9ZWxzZXt0aGlzLl9jbGVhck5hdmlnYXRlVXJsKCk7Cn19LHNldF9lbmFibGVJbWFnZVNwcml0ZTpmdW5jdGlvbih4KXt0aGlzLl9wcm9wZXJ0aWVzLnNldFZhbHVlKCJlbmFibGVJbWFnZVNwcml0ZSIseCk7CnRoaXMuX2VuYWJsZUltYWdlU3ByaXRlPXg7Cn0sZ2V0X2VuYWJsZUltYWdlU3ByaXRlOmZ1bmN0aW9uKCl7aWYodGhpcy5fZW5hYmxlSW1hZ2VTcHJpdGU9PT1udWxsKXt2YXIgeD10aGlzLmdldF9tZW51KCk7CnZhciB5PXRoaXMuX3Byb3BlcnRpZXMuZ2V0VmFsdWUoImVuYWJsZUltYWdlU3ByaXRlIixudWxsKTsKaWYoeCE9bnVsbCYmeT09PW51bGwpe3RoaXMuX2VuYWJsZUltYWdlU3ByaXRlPXguX2VuYWJsZUltYWdlU3ByaXRlczsKfWVsc2V7dGhpcy5fZW5hYmxlSW1hZ2VTcHJpdGU9eXx8ZmFsc2U7Cn19cmV0dXJuIHRoaXMuX2VuYWJsZUltYWdlU3ByaXRlOwp9LGdldF9sZXZlbDpmdW5jdGlvbigpe3ZhciB4PXRoaXMuZ2V0X3BhcmVudCgpOwp2YXIgeT0wOwp3aGlsZSh4KXtpZihmLkNvbnRyb2xJdGVtQ29udGFpbmVyLmlzSW5zdGFuY2VPZlR5cGUoeCl8fGYuUmFkTWVudS5pc0luc3RhbmNlT2ZUeXBlKHgpKXtyZXR1cm4geTsKfXkrKzsKeD14LmdldF9wYXJlbnQoKTsKfXJldHVybiB5Owp9LGdldF9jbGllbnRUZW1wbGF0ZTpmdW5jdGlvbigpe2lmKHRoaXMuX2NsaWVudFRlbXBsYXRlKXtyZXR1cm4gdGhpcy5fY2xpZW50VGVtcGxhdGU7Cn1lbHNle2lmKHRoaXMuZ2V0X21lbnUoKSl7cmV0dXJuIHRoaXMuZ2V0X21lbnUoKS5nZXRfY2xpZW50VGVtcGxhdGUoKTsKfWVsc2V7cmV0dXJuIG51bGw7Cn19fSxzZXRfY2xpZW50VGVtcGxhdGU6ZnVuY3Rpb24oeCl7dGhpcy5fY2xpZW50VGVtcGxhdGU9eDsKfSxvcGVuOmZ1bmN0aW9uKCl7dGhpcy5fb3BlbihudWxsKTsKfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMuX2Nsb3NlKG51bGwpOwp9LGhpZGU6ZnVuY3Rpb24oKXt0aGlzLnNldF92aXNpYmxlKGZhbHNlKTsKfSxzaG93OmZ1bmN0aW9uKCl7dGhpcy5zZXRfdmlzaWJsZSh0cnVlKTsKfSxmb2N1czpmdW5jdGlvbigpe3RoaXMuX3NldEZvY3VzZWQodHJ1ZSxudWxsKTsKfSxibHVyOmZ1bmN0aW9uKCl7dGhpcy5fYmx1cihudWxsKTsKfSxmb2N1c0ZpcnN0Q2hpbGQ6ZnVuY3Rpb24oeSl7dmFyIHo9dGhpcy5nZXRfaXRlbXMoKTsKaWYoei5nZXRfY291bnQoKT09MCl7cmV0dXJuOwp9dmFyIHg9ei5nZXRJdGVtKDApOwp2YXIgQT14Owp3aGlsZSgheC5fY2FuRm9jdXMoKSl7eD14Ll9nZXROZXh0SXRlbSgpOwppZih4PT1BKXtyZXR1cm47Cn19eC5fdHJhbnNmZXJGb2N1cyh5fHxudWxsKTsKfSxmb2N1c0xhc3RDaGlsZDpmdW5jdGlvbih5KXt2YXIgej10aGlzLmdldF9pdGVtcygpOwppZih6LmdldF9jb3VudCgpPT0wKXtyZXR1cm47Cn12YXIgeD16LmdldEl0ZW0oei5nZXRfY291bnQoKS0xKTsKdmFyIEE9eDsKd2hpbGUoIXguX2NhbkZvY3VzKCkpe3g9eC5fZ2V0UHJldmlvdXNJdGVtKCk7CmlmKHg9PUEpe3JldHVybjsKfX14Ll90cmFuc2ZlckZvY3VzKHl8fG51bGwpOwp9LGZvY3VzTmV4dEl0ZW06ZnVuY3Rpb24oeCl7dmFyIHk9dGhpcy5fZ2V0TmV4dEl0ZW0oKTsKd2hpbGUoIXkuX2NhbkZvY3VzKCkpe3k9eS5fZ2V0TmV4dEl0ZW0oKTsKfXkuX3RyYW5zZmVyRm9jdXMoeHx8bnVsbCk7Cn0sZm9jdXNQcmV2aW91c0l0ZW06ZnVuY3Rpb24oeCl7dmFyIHk9dGhpcy5fZ2V0UHJldmlvdXNJdGVtKCk7CndoaWxlKCF5Ll9jYW5Gb2N1cygpKXt5PXkuX2dldFByZXZpb3VzSXRlbSgpOwp9eS5fdHJhbnNmZXJGb2N1cyh4fHxudWxsKTsKfSxzZWxlY3Q6ZnVuY3Rpb24oKXt0aGlzLnNldF9zZWxlY3RlZCh0cnVlKTsKdGhpcy5jbGljaygpOwp9LHVuc2VsZWN0OmZ1bmN0aW9uKCl7dGhpcy5zZXRfc2VsZWN0ZWQoZmFsc2UpOwp9LGRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLnNldF9lbmFibGVkKGZhbHNlKTsKfSxlbmFibGU6ZnVuY3Rpb24oKXt0aGlzLnNldF9lbmFibGVkKHRydWUpOwp9LGNsaWNrOmZ1bmN0aW9uKCl7dGhpcy5fY2xpY2sobnVsbCk7Cn0sc2Nyb2xsSW50b1ZpZXc6ZnVuY3Rpb24oKXt2YXIgeT10aGlzLmdldF9wYXJlbnQoKTsKaWYoIXkpe3JldHVybjsKfXZhciBMPXkuX2dldFNjcm9sbFdyYXBFbGVtZW50KCk7CmlmKCFMKXtyZXR1cm47Cn12YXIgRj15Ll9zY3JvbGxlcjsKaWYoIUYpe3JldHVybjsKfXZhciBLPSh5Ll9mbG93IT09dW5kZWZpbmVkJiZ5Ll9mbG93IT09bnVsbCk/eS5fZmxvdzp5LmdldF9ncm91cFNldHRpbmdzKCkuZ2V0X2Zsb3coKTsKdmFyIHo9Sz09Zi5JdGVtRmxvdy5WZXJ0aWNhbDsKTFt6PyJzY3JvbGxUb3AiOiJzY3JvbGxMZWZ0Il09MDsKdmFyIE09eS5nZXRfY2hpbGRMaXN0RWxlbWVudCgpOwp2YXIgST16PyJvZmZzZXRUb3AiOiJvZmZzZXRMZWZ0IjsKdmFyIE49ej8ib2Zmc2V0SGVpZ2h0Ijoib2Zmc2V0V2lkdGgiOwp2YXIgRz12KFt5Ll9zY3JvbGxlci5fZGVjQXJyb3cseS5fc2Nyb2xsZXIuX2luY0Fycm93XSk7CnZhciBBPXo/Ry5maXJzdCgpLmhlaWdodCgpOkcuZmlyc3QoKS53aWR0aCgpOwp2YXIgRT16P0cubGFzdCgpLmhlaWdodCgpOkcubGFzdCgpLndpZHRoKCk7CnZhciBCPS1NW0ldOwp2YXIgeD1MW05dLUU7CnZhciBDPUIrTFtOXTsKdmFyIEo9dGhpcy5nZXRfZWxlbWVudCgpW0ldOwp2YXIgRD10aGlzLmdldF9lbGVtZW50KClbTl07CnZhciBIPUorRDsKaWYoSjxCK0F8fEg+Qy1FKXtpZihCLUo+SC1DKXtGLnNldF9jdXJyZW50UG9zaXRpb24oSi1BKTsKfWVsc2V7Ri5zZXRfY3VycmVudFBvc2l0aW9uKEoteCtEKTsKfX19LGJpbmRUZW1wbGF0ZTpmdW5jdGlvbih4KXtpZigheCl7eD10aGlzLl9leHRyYWN0RGF0YUl0ZW0oKTsKfXRoaXMuX3JlbmRlcmVkQ2xpZW50VGVtcGxhdGU9Zi5UZW1wbGF0ZVJlbmRlcmVyLnJlbmRlclRlbXBsYXRlKHgsdGhpcy5nZXRfbWVudSgpLHRoaXMpOwppZih0aGlzLmdldF9lbGVtZW50KCkpe3RoaXMuX2FwcGx5VGVtcGxhdGUoKTsKfX0sX2RldGVybWluZUNzc0NsYXNzOmZ1bmN0aW9uKCl7aWYodGhpcy5nZXRfaXNTZXBhcmF0b3IoKSl7cmV0dXJuInJtSXRlbSBybVNlcGFyYXRvciI7Cn1yZXR1cm4icm1JdGVtIjsKfSxfcmVuZGVySW1hZ2U6ZnVuY3Rpb24oQil7dmFyIEE9dGhpcy5nZXRfZW5hYmxlSW1hZ2VTcHJpdGUoKTsKdmFyIHk9QT8ic3BhbiI6ImltZyI7CnZhciB6PUE/IiAiOiIgYWx0PScnIHNyYz0nIit0aGlzLmdldF9pbWFnZVVybCgpKyInICI7CnZhciB4PW5ldyBxKEIpLmFwcGVuZCgiPCIseSx6KS5hcHBlbmQoImNsYXNzPSciLGEsIicgIik7CmlmKCF0aGlzLmdldF9lbmFibGVkKCkpe3guYXBwZW5kKCJkaXNhYmxlZD0nZGlzYWJsZWQnIik7Cn1pZihBKXt4LmFwcGVuZCgiPjwvc3Bhbj4iKTsKfWVsc2V7eC5hcHBlbmQoIi8+Iik7Cn1yZXR1cm4gQjsKfSxfcmVuZGVyUHJlbG9hZEltYWdlczpmdW5jdGlvbigpe3ZhciB6PVt0aGlzLmdldF9pbWFnZVVybCgpLHRoaXMuZ2V0X2hvdmVyZWRJbWFnZVVybCgpLHRoaXMuZ2V0X2V4cGFuZGVkSW1hZ2VVcmwoKSx0aGlzLmdldF9kaXNhYmxlZEltYWdlVXJsKCksdGhpcy5nZXRfY2xpY2tlZEltYWdlVXJsKCksdGhpcy5nZXRfc2VsZWN0ZWRJbWFnZVVybCgpXTsKZm9yKHZhciB4PTA7Cng8ei5sZW5ndGg7CngrKyl7dmFyIHk9elt4XTsKaWYoeSl7Zi5SYWRNZW51Ll9wcmVsb2FkSW1hZ2UoeSk7Cn19fSxfcmVuZGVyTGluazpmdW5jdGlvbihCKXtpZih0aGlzLmdldF9pc1NlcGFyYXRvcigpKXtyZXR1cm47Cn12YXIgQT0iIyI7CnZhciB5PXRoaXMuZ2V0X25hdmlnYXRlVXJsKCk7CmlmKHkmJnkhPSIjIil7QT15Owp9dmFyIHg9bmV3IHEoQik7CnguYXBwZW5kKCI8YSBocmVmPSciLEEsIicgIik7CnZhciB6PXRoaXMuZ2V0X3RhcmdldCgpOwppZih6KXt4LmFwcGVuZCgidGFyZ2V0PSciLHosIicgIik7Cn14LmFwcGVuZCgiY2xhc3M9JyIsaywiICIpOwppZih0aGlzLmdldF90ZXh0KCk9PSIiJiYhdih0aGlzLmdldF90ZXh0RWxlbWVudCgpKS5jaGlsZHJlbigpLmxlbmd0aCl7eC5hcHBlbmQoIiAiK3UpOwp9aWYodGhpcy5faXNSb290TGluaygpKXt4LmFwcGVuZCgiICIraCk7Cn1pZighdGhpcy5nZXRfZW5hYmxlZCgpKXt4LmFwcGVuZChwKTsKfXguYXBwZW5kKCInPiIpOwp9LF9yZW5kZXJDaGlsZEl0ZW1zOmZ1bmN0aW9uKHgseSl7dmFyIEI9dGhpcy5nZXRfaXRlbXMoKS50b0FycmF5KCk7CmlmKCF5JiZCLmxlbmd0aD09MCl7cmV0dXJuOwp9dmFyIHo9bmV3IHEoeCk7CnouYXBwZW5kKCI8ZGl2IGNsYXNzPSdybVNsaWRlJz4iKTsKaWYodGhpcy5fZ2V0U2hvdWxkUmVuZGVyU2Nyb2xsV3JhcCgpKXt0aGlzLl9yZW5kZXJTY3JvbGxXcmFwKHopOwp9dmFyIEE9dGhpcy5fZ2V0R3JvdXBDc3NDbGFzcygpOwppZih0aGlzLl9oYXNNdWx0aXBsZUNvbHVtbnMoKSl7dGhpcy5fcmVuZGVyQ29sdW1ucyh6LEIsQSx5KTsKfWVsc2V7dGhpcy5fcmVuZGVyQ2hpbGRHcm91cCh6LEIsQSx5KTsKfWlmKHRoaXMuX2dldFNob3VsZFJlbmRlclNjcm9sbFdyYXAoKSl7ei5hcHBlbmQoIjwvZGl2PiIpOwp9ei5hcHBlbmQoIjwvZGl2PiIpOwp9LF9yZW5kZXJTY3JvbGxXcmFwOmZ1bmN0aW9uKHgpe3guYXBwZW5kKCI8ZGl2IGNsYXNzPSciKS5hcHBlbmQoYywiICIsYiwiICIpLmFwcGVuZChpLHRoaXMuX2dldEdyb3VwTGV2ZWxDc3NDbGFzcygpKS5hcHBlbmQoIicgc3R5bGU9JyIpOwp2YXIgeT10aGlzLmdldF9ncm91cFNldHRpbmdzKCk7CnZhciBBPXkuZ2V0X3dpZHRoKCk7CmlmKEEpe3guYXBwZW5kKCJ3aWR0aCA6IixBLCI7Iik7Cn12YXIgej15LmdldF9oZWlnaHQoKTsKaWYoeil7eC5hcHBlbmQoImhlaWdodCA6Iix6LCI7Iik7Cn14LmFwcGVuZCgiJz4iKTsKfSxfcmVuZGVyQ29sdW1uczpmdW5jdGlvbih4LEcseixIKXt4LmFwcGVuZCgiPHVsIGNsYXNzPSciLGUsIic+Iik7CnZhciBJPXRoaXMuZ2V0X2dyb3VwU2V0dGluZ3MoKTsKdmFyIHk9SS5nZXRfcmVwZWF0Q29sdW1ucygpOwp2YXIgQj1IPzA6TWF0aC5taW4oeSxHLmxlbmd0aCk7CnZhciBEPUkuZ2V0X3JlcGVhdERpcmVjdGlvbigpOwpmb3IodmFyIEE9MDsKQTxCOwpBKyspe3ZhciBDPSIiOwppZihBPT0wKXtDPSIgIitkOwp9eC5hcHBlbmQoIjxsaSBjbGFzcz0nIixzLEMsIic+Iik7CnZhciBFPUQ9PWYuTWVudVJlcGVhdERpcmVjdGlvbi5WZXJ0aWNhbD90aGlzLl9nZXRSb3dJdGVtcyhBLHksRyk6dGhpcy5fZ2V0Q29sdW1uSXRlbXMoQSx5LEcpOwp2YXIgRj16KyIgIituOwp0aGlzLl9yZW5kZXJDaGlsZEdyb3VwKHgsRSxGKTsKeC5hcHBlbmQoIjwvbGk+Iik7Cn14LmFwcGVuZCgiPC91bD4iKTsKfSxfcmVuZGVyQ2hpbGRHcm91cDpmdW5jdGlvbih4LEEseix5KXt4LmFwcGVuZCgiPHVsIGNsYXNzPSciLHosIic+Iik7CmlmKCF5KXt2LmVhY2goQSxmdW5jdGlvbigpe3RoaXMuX3JlbmRlcih4LmdldF9idWZmZXIoKSk7Cn0pOwp9eC5hcHBlbmQoIjwvdWw+Iik7Cn0sX2dldEdyb3VwTGV2ZWxDc3NDbGFzczpmdW5jdGlvbigpe3JldHVybiBpKyh0aGlzLmdldF9sZXZlbCgpKzEpOwp9LF9nZXRHcm91cENzc0NsYXNzOmZ1bmN0aW9uKCl7dmFyIHg9bmV3IHEoKTsKeC5hcHBlbmQodGhpcy5fZ2V0Rmxvd0Nzc0NsYXNzKCkpOwppZighdGhpcy5fZ2V0U2hvdWxkUmVuZGVyU2Nyb2xsV3JhcCgpKXt4LmFwcGVuZCgiICIsYiwiICIsdGhpcy5fZ2V0R3JvdXBMZXZlbENzc0NsYXNzKCkpOwp9cmV0dXJuIHgudG9TdHJpbmcoKTsKfSxfZ2V0Um93SXRlbXM6ZnVuY3Rpb24oQix6LEQpe3ZhciB4PVtdOwpmb3IodmFyIEE9MDsKQTx6OwpBKyspe3hbQV09W107Cn12YXIgeT1mdW5jdGlvbigpe2Zvcih2YXIgRj14Lmxlbmd0aC0xOwpGPjA7CkYtLSl7dmFyIEU9eFtGXTsKdmFyIEc9eFtGLTFdOwppZihFLmxlbmd0aD09Ry5sZW5ndGgpe3JldHVybjsKfUcucHVzaChFLnNoaWZ0KCkpOwp9fTsKdmFyIEM9eFt6LTFdOwp2LmVhY2goRCxmdW5jdGlvbigpe0MucHVzaCh0aGlzKTsKeSgpOwp9KTsKcmV0dXJuIHhbQl07Cn0sX2dldENvbHVtbkl0ZW1zOmZ1bmN0aW9uKHkseixDKXt2YXIgQT1bXTsKdmFyIHg9MDsKZm9yKHZhciBCPTA7CkI8Qy5sZW5ndGg7CkIrKyl7aWYoeD09eSl7QS5wdXNoKENbQl0pOwp9eD0oeCsxKSV6Owp9cmV0dXJuIEE7Cn0sX2V4dHJhY3REYXRhSXRlbTpmdW5jdGlvbigpe3JldHVybntUZXh0OnRoaXMuZ2V0X3RleHQoKSxWYWx1ZTp0aGlzLmdldF92YWx1ZSgpLEltYWdlVXJsOnRoaXMuZ2V0X2ltYWdlVXJsKCksU2VsZWN0ZWRJbWFnZVVybDp0aGlzLmdldF9zZWxlY3RlZEltYWdlVXJsKCksQ2xpZWNrZWRJbWFnZVVybDp0aGlzLmdldF9jbGlja2VkSW1hZ2VVcmwoKSxEaXNhYmxlZEltYWdlVXJsOnRoaXMuZ2V0X2Rpc2FibGVkSW1hZ2VVcmwoKSxFeHBhbmRlZEltYWdlVXJsOnRoaXMuZ2V0X2V4cGFuZGVkSW1hZ2VVcmwoKSxFeHBhbmRlZEltYWdlVXJsOnRoaXMuZ2V0X2hvdmVyZWRJbWFnZVVybCgpLEF0dHJpYnV0ZXM6dGhpcy5nZXRfYXR0cmlidXRlcygpLl9kYXRhfTsKfSxfYXBwbHlUZW1wbGF0ZTpmdW5jdGlvbigpe2lmKCF0aGlzLl9yZW5kZXJlZENsaWVudFRlbXBsYXRlKXtyZXR1cm47Cn12YXIgeD0iPGRpdiBjbGFzcz0ncm1UZXh0Jz4iK3RoaXMuX3JlbmRlcmVkQ2xpZW50VGVtcGxhdGUrIjwvZGl2PiI7CnYoImEucm1MaW5rIix0aGlzLl9lbGVtZW50KS5yZXBsYWNlV2l0aCh4KTsKdih0aGlzLl9lbGVtZW50KS5hZGRDbGFzcygicm1UZW1wbGF0ZSIpOwp9LF9kb09wZW46ZnVuY3Rpb24oeSl7dmFyIHo9dGhpcy5nZXRfbWVudSgpOwppZih0aGlzLmdldF9pdGVtcygpLmdldF9jb3VudCgpPT0wKXtyZXR1cm47Cn10aGlzLl9lbnN1cmVDaGlsZENvbnRyb2xzKCk7CnZhciBCPXRoaXMuZ2V0X3BhcmVudCgpOwp6Ll9hYm91dFRvQ29sbGFwc2U9ZmFsc2U7CmlmKEIhPXomJkIuX3N0YXRlIT1mLlJhZE1lbnVJdGVtU3RhdGUuT3Blbil7Qi5fb3Blbih5KTsKfXZhciBDPXRoaXMuX2dldEFuaW1hdGlvbkNvbnRhaW5lcigpOwppZighQyl7cmV0dXJuOwp9Qi5fb3BlbmVkSXRlbT10aGlzOwp0aGlzLl9zdGF0ZT1mLlJhZE1lbnVJdGVtU3RhdGUuT3BlbjsKdGhpcy5fZW5zdXJlUm91bmRlZENvcm5lcnMoKTsKdGhpcy5fZW5zdXJlU2hhZG93cygpOwpmLlJhZE1lbnUuX2Vuc3VyZUNvcm5lcnMoeix0aGlzKTsKdmFyIEE9dGhpcy5nZXRfY2hpbGRMaXN0RWxlbWVudCgpOwpBLnN0eWxlLmRpc3BsYXk9ImJsb2NrIjsKaWYoJHRlbGVyaWsuaXNPcGVyYSYmKHouZ2V0X2VuYWJsZVJvdW5kZWRDb3JuZXJzKCl8fHouZ2V0X2VuYWJsZVNoYWRvd3MoKSkpe0Euc3R5bGUucG9zaXRpb249ImFic29sdXRlIjsKfWlmKCEkdGVsZXJpay5pc0lFNyYmISR0ZWxlcmlrLmlzSUU2KXtDLnN0eWxlLnZpc2liaWxpdHk9ImhpZGRlbiI7Cn10aGlzLl91cGRhdGVDb2x1bW5XcmFwU2l6ZSgpOwp0aGlzLl9zbGlkZS51cGRhdGVTaXplKCk7CnRoaXMuX2ZpeFNsaWRlU2l6ZSgpOwp0aGlzLl9zbGlkZS5zaG93KCk7CmlmKHRoaXMuX2dyb3VwU2V0dGluZ3MuZ2V0X2Zsb3coKT09Zi5JdGVtRmxvdy5WZXJ0aWNhbCl7Zi5SYWRNZW51Ll9hZGp1c3RDaGlsZHJlbldpZHRoKHRoaXMpOwp9ZWxzZXtmLlJhZE1lbnUuX2FkanVzdExpc3RXaWR0aCh0aGlzKTsKfWlmKHRoaXMuX2FkanVzdFNpYmxpbmdzV2lkdGhPblNob3cpe3RoaXMuX2FkanVzdFNpYmxpbmdzV2lkdGgoKTsKdGhpcy5fYWRqdXN0U2libGluZ3NXaWR0aE9uU2hvdz1mYWxzZTsKfXRoaXMuX3VwZGF0ZUNoaWxkTGlzdFdpZHRoKCk7CnRoaXMuX3VwZGF0ZUNvbHVtbldyYXBTaXplKCk7CnRoaXMuX3Jlc2V0QW5pbWF0ZWRFbGVtZW50UG9zaXRpb24oKTsKdGhpcy5fc2xpZGUuc2V0X2RpcmVjdGlvbih0aGlzLl9nZXRTbGlkZURpcmVjdGlvbigpKTsKdGhpcy5fc2xpZGUuc2V0X2FuaW1hdGVkRWxlbWVudCh0aGlzLl9nZXRBbmltYXRlZEVsZW1lbnQoKSk7CnRoaXMuX3NsaWRlLnVwZGF0ZVNpemUoKTsKdGhpcy5fZml4U2xpZGVTaXplKCk7CnRoaXMuX3Bvc2l0aW9uQ2hpbGRDb250YWluZXIoKTsKdGhpcy5fdXBkYXRlU2Nyb2xsV3JhcFNpemUoKTsKQz10aGlzLl9nZXRBbmltYXRpb25Db250YWluZXIoKTsKaWYodGhpcy5fc2Nyb2xsZXImJiF0aGlzLl9hdXRvU2Nyb2xsQWN0aXZlJiYhdGhpcy5fZml0c1dpbmRvdygpKXt0aGlzLl91cGRhdGVTY3JvbGxTaXplKCk7CnRoaXMuX3Bvc2l0aW9uQ2hpbGRDb250YWluZXIoKTsKfUMuc3R5bGUudmlzaWJpbGl0eT0idmlzaWJsZSI7CnRoaXMuZ2V0X2VsZW1lbnQoKS5zdHlsZS56SW5kZXg9Qi5nZXRfaXRlbXMoKS5nZXRfY291bnQoKS10aGlzLmdldF9pbmRleCgpOwpDLnN0eWxlLnpJbmRleD1CLmdldF9pdGVtcygpLmdldF9jb3VudCgpKzE7CnouX2luY3JlbWVudFpJbmRleCh0aGlzLl96SW5kZXhTdGVwKTsKaWYodGhpcy5fc2Nyb2xsZXIpe3RoaXMuX3Njcm9sbGVyLnVwZGF0ZVN0YXRlKCk7CmlmKHRoaXMuZ2V0X21lbnUoKS5nZXRfcmlnaHRUb0xlZnQoKSYmdGhpcy5fZ3JvdXBTZXR0aW5ncy5nZXRfZmxvdygpPT1mLkl0ZW1GbG93Lkhvcml6b250YWwpe3RoaXMuZ2V0X2NoaWxkTGlzdEVsZW1lbnQoKS5zdHlsZS5jc3NGbG9hdD0ibGVmdCI7CnRoaXMuX3Njcm9sbGVyLnNjcm9sbFRvTWF4UG9zaXRpb24oKTsKfX10aGlzLl91cGRhdGVDb2x1bW5XcmFwU2l6ZSgpOwp0aGlzLl9zbGlkZS51cGRhdGVTaXplKCk7CnRoaXMuX2ZpeFNsaWRlU2l6ZSgpOwp0aGlzLl9zbGlkZS5leHBhbmQoKTsKdGhpcy5fdXBkYXRlTGlua0NsYXNzKCk7CnRoaXMuX3VwZGF0ZUltYWdlU3JjKCk7CnZhciB4PW5ldyBmLlJhZE1lbnVJdGVtT3BlbmVkRXZlbnRBcmdzKHRoaXMseSk7CnRoaXMuZ2V0X21lbnUoKS5fcmFpc2VFdmVudCgiaXRlbU9wZW5lZCIseCk7Cn0sX2ZpeFNsaWRlU2l6ZTpmdW5jdGlvbigpe3ZhciBBPXRoaXMuX3NsaWRlLmdldF9lbGVtZW50KCk7CmlmKCR0ZWxlcmlrLnF1aXJrc01vZGUpe0Euc3R5bGUud2lkdGg9cGFyc2VJbnQoQS5vZmZzZXRXaWR0aCwxMCkrcGFyc2VJbnQoJHRlbGVyaWsuZ2V0Q3VycmVudFN0eWxlKEEsInBhZGRpbmdMZWZ0IiksMTApK3BhcnNlSW50KCR0ZWxlcmlrLmdldEN1cnJlbnRTdHlsZShBLCJwYWRkaW5nUmlnaHQiKSwxMCk7CkEuc3R5bGUuaGVpZ2h0PXBhcnNlSW50KEEub2Zmc2V0SGVpZ2h0LDEwKStwYXJzZUludCgkdGVsZXJpay5nZXRDdXJyZW50U3R5bGUoQSwicGFkZGluZ1RvcCIpLDEwKStwYXJzZUludCgkdGVsZXJpay5nZXRDdXJyZW50U3R5bGUoQSwicGFkZGluZ0JvdHRvbSIpLDEwKTsKfWlmKCR0ZWxlcmlrLmlzSUU2JiZ0aGlzLmdldF9tZW51KCkuZ2V0X2VuYWJsZVJvdW5kZWRDb3JuZXJzKCkpe3ZhciB5PXRoaXMuX3NsaWRlLl9vdmVybGF5LmdldF9lbGVtZW50KCk7CnZhciB4PXRoaXMuX3NsaWRlLl9vdmVybGF5Ll90YXJnZXRFbGVtZW50Owp2YXIgQj12KEEpLmZpbmQoIi5ybVRvcFJpZ2h0Iikubm90KCIucm1Ub3BTaGFkb3dSaWdodCIpLndpZHRoKCk7CnZhciB6PXYoQSkuZmluZCgiLnJtQm90dG9tTGVmdCIpLm5vdCgiLnJtQm90dG9tU2hhZG93TGVmdCIpLmhlaWdodCgpOwpzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7eS5zdHlsZS53aWR0aD0ocGFyc2VJbnQoeC5vZmZzZXRXaWR0aCwxMCkrQikrInB4IjsKeS5zdHlsZS5oZWlnaHQ9KHBhcnNlSW50KHgub2Zmc2V0SGVpZ2h0LDEwKSt6KSsicHgiOwp9LDApOwp9fSxfdXBkYXRlQ2hpbGRMaXN0V2lkdGg6ZnVuY3Rpb24oKXt2YXIgeD10aGlzLmdldF9tZW51KCk7CmlmKHRoaXMuX2dyb3VwU2V0dGluZ3MuZ2V0X2Zsb3coKT09Zi5JdGVtRmxvdy5WZXJ0aWNhbCYmeC5nZXRfcmlnaHRUb0xlZnQoKSYmJHRlbGVyaWsuaXNJRSl7dmFyIHk9dGhpcy5nZXRfY2hpbGRMaXN0RWxlbWVudCgpOwp2YXIgej12KHkpLmNoaWxkcmVuKCIucm1JdGVtIikuZ2V0KDApOwppZih6KXt5LnN0eWxlLndpZHRoPXoub2Zmc2V0V2lkdGgrInB4IjsKfX19LF9zaG91bGRJbml0aWFsaXplQ2hpbGQ6ZnVuY3Rpb24oKXtyZXR1cm4gdHJ1ZTsKfSxfY3JlYXRlQ2hpbGRMaXN0RWxlbWVudDpmdW5jdGlvbigpe3ZhciB5PVtdOwp0aGlzLl9yZW5kZXJDaGlsZEl0ZW1zKHksdHJ1ZSk7CnZhciB4PXYoeS5qb2luKCIiKSk7CnYodGhpcy5nZXRfZWxlbWVudCgpKS5hcHBlbmQoeCk7CnRoaXMuX2luaXRpYWxpemVBbmltYXRpb24oKTsKdGhpcy5fdXBkYXRlVGV4dEVsZW1lbnRDbGFzcygpOwppZih0aGlzLl9nZXRTaG91bGRSZW5kZXJTY3JvbGxXcmFwKCkpe3RoaXMuX2luaXRpYWxpemVTY3JvbGxlcigpOwp9cmV0dXJuIHg7Cn0sX2dldENvbHVtbkZvckl0ZW06ZnVuY3Rpb24oeSl7aWYoIXRoaXMuX2hhc011bHRpcGxlQ29sdW1ucygpKXtyZXR1cm4gbnVsbDsKfXZhciB6PXRoaXMuZ2V0X2NoaWxkTGlzdEVsZW1lbnQoKTsKdmFyIEI9dih6KS5jaGlsZHJlbigiLnJtR3JvdXBDb2x1bW4iKTsKdmFyIEM9dGhpcy5nZXRfZ3JvdXBTZXR0aW5ncygpOwp2YXIgeD1DLmdldF9yZXBlYXRDb2x1bW5zKCk7CmlmKEIubGVuZ3RoPHgpe3JldHVybiB0aGlzLl9jcmVhdGVFbXB0eUNvbHVtbigpOwp9dmFyIEE9eS5nZXRfaW5kZXgoKTsKaWYoQy5nZXRfcmVwZWF0RGlyZWN0aW9uKCk9PWYuTWVudVJlcGVhdERpcmVjdGlvbi5Ib3Jpem9udGFsKXtyZXR1cm4gQltBJXhdOwp9ZWxzZXtyZXR1cm4gQltCLmxlbmd0aC0xXTsKfX0sX3JlY2FsY3VsYXRlQ29sdW1uczpmdW5jdGlvbigpe2lmKHRoaXMuZ2V0X2dyb3VwU2V0dGluZ3MoKS5nZXRfcmVwZWF0RGlyZWN0aW9uKCk9PWYuTWVudVJlcGVhdERpcmVjdGlvbi5Ib3Jpem9udGFsKXtyZXR1cm47Cn12YXIgeT10aGlzLmdldF9jaGlsZExpc3RFbGVtZW50KCk7CnZhciBCPXYoeSkuY2hpbGRyZW4oIi5ybUdyb3VwQ29sdW1uIik7CmZvcih2YXIgeD1CLmxlbmd0aC0xOwp4PjA7CngtLSl7dmFyIEE9Qlt4XTsKdmFyIHo9Qlt4LTFdOwppZih0aGlzLl9nZXRDb2x1bW5JdGVtQ291bnQoeik9PXRoaXMuX2dldENvbHVtbkl0ZW1Db3VudChBKSl7cmV0dXJuOwp9dih6KS5jaGlsZHJlbigiLnJtR3JvdXAiKS5hcHBlbmQodihBKS5jaGlsZHJlbigiLnJtR3JvdXAiKS5jaGlsZHJlbigiLnJtSXRlbSIpLmVxKDApKTsKfX0sX2dldENvbHVtbkl0ZW1Db3VudDpmdW5jdGlvbih4KXtyZXR1cm4gdih4KS5jaGlsZHJlbigiLnJtR3JvdXAiKS5jaGlsZHJlbigiLnJtSXRlbSIpLmxlbmd0aDsKfSxfY3JlYXRlRW1wdHlDb2x1bW46ZnVuY3Rpb24oKXt2YXIgej10aGlzLl9nZXRHcm91cENzc0NsYXNzKCk7CnZhciB4PW5ldyBxKCk7CnguYXBwZW5kKCI8bGkgY2xhc3M9JyIscywiJz4iKTsKdGhpcy5fcmVuZGVyQ2hpbGRHcm91cCh4LFtdLHopOwp4LmFwcGVuZCgiPC9saT4iKTsKdmFyIHk9dih4LnRvU3RyaW5nKCkpOwp2KHRoaXMuZ2V0X2NoaWxkTGlzdEVsZW1lbnQoKSkuYXBwZW5kKHkpOwpyZXR1cm4geTsKfSxfaGFzTXVsdGlwbGVDb2x1bW5zOmZ1bmN0aW9uKCl7dmFyIHk9dGhpcy5nZXRfZ3JvdXBTZXR0aW5ncygpOwp2YXIgeD15LmdldF9yZXBlYXRDb2x1bW5zKCk7CmlmKHg9PTEpe3g9dGhpcy5nZXRfbWVudSgpLmdldF9kZWZhdWx0R3JvdXBTZXR0aW5ncygpLmdldF9yZXBlYXRDb2x1bW5zKCk7Cn1yZXR1cm4geD4xOwp9LF9nZXRTaG91bGRSZW5kZXJTY3JvbGxXcmFwOmZ1bmN0aW9uKCl7aWYodGhpcy5faGFzTXVsdGlwbGVDb2x1bW5zKCkpe3JldHVybiBmYWxzZTsKfXZhciB5PXRoaXMuZ2V0X2dyb3VwU2V0dGluZ3MoKTsKdmFyIHg9dGhpcy5nZXRfbWVudSgpLmdldF9kZWZhdWx0R3JvdXBTZXR0aW5ncygpOwp2YXIgQT15LmdldF93aWR0aCgpOwppZighQSl7QT14LmdldF93aWR0aCgpOwp9dmFyIHo9eS5nZXRfaGVpZ2h0KCk7CmlmKCF6KXt6PXguZ2V0X2hlaWdodCgpOwp9cmV0dXJuIEF8fHo7Cn0sX2dldENoaWxkRWxlbWVudHM6ZnVuY3Rpb24oKXt2YXIgej12KHRoaXMuZ2V0X2NoaWxkTGlzdEVsZW1lbnQoKSk7CmlmKHouaXMoIi5ybU11bHRpQ29sdW1uIikpe3ZhciBDPXYoeikuZmluZCgiPiAucm1Hcm91cENvbHVtbiA+IHVsID4gLnJtSXRlbSIpOwp2YXIgRT10aGlzLmdldF9ncm91cFNldHRpbmdzKCk7CnZhciBBPUUuZ2V0X3JlcGVhdERpcmVjdGlvbigpOwp2YXIgeD1FLmdldF9yZXBlYXRDb2x1bW5zKCk7CmlmKHg9PTF8fEE9PWYuTWVudVJlcGVhdERpcmVjdGlvbi5WZXJ0aWNhbCl7cmV0dXJuIEM7Cn12YXIgRD1bXTsKdmFyIHk9TWF0aC5jZWlsKEMubGVuZ3RoL3gpOwpmb3IodmFyIEI9MDsKQjx5OwpCKyspe0MuZmlsdGVyKCIucm1JdGVtOm50aC1jaGlsZCgiKyhCKzEpKyIpIikuZWFjaChmdW5jdGlvbigpe0FycmF5LmFkZChELHRoaXMpOwp9KTsKfXJldHVybiBEOwp9ZWxzZXtyZXR1cm4gei5jaGlsZHJlbigiLnJtSXRlbSIpOwp9fSxfdXBkYXRlQ29sdW1uV3JhcFNpemU6ZnVuY3Rpb24oKXt2YXIgej12KHRoaXMuZ2V0X2NoaWxkTGlzdEVsZW1lbnQoKSk7CmlmKCF6LmlzKCIucm1NdWx0aUNvbHVtbiIpKXtyZXR1cm47Cn12YXIgeT0wOwp2YXIgeD0wOwp2KHopLmNoaWxkcmVuKCIucm1Hcm91cENvbHVtbiIpLmNoaWxkcmVuKCIucm1Hcm91cCIpLmVhY2goZnVuY3Rpb24oKXt5Kz10aGlzLm9mZnNldFdpZHRoOwp4PU1hdGgubWF4KHRoaXMub2Zmc2V0SGVpZ2h0LHgpOwp9KTsKaWYoeT09MHx8eD09MCl7cmV0dXJuOwp9aWYoJHRlbGVyaWsucXVpcmtzTW9kZSl7eSs9KHouY3NzKCJib3JkZXItbGVmdC1zdHlsZSIpIT0ibm9uZSI/cGFyc2VJbnQoei5jc3MoImJvcmRlci1sZWZ0LXdpZHRoIiksMTApOjApKyh6LmNzcygiYm9yZGVyLXJpZ2h0LXN0eWxlIikhPSJub25lIj9wYXJzZUludCh6LmNzcygiYm9yZGVyLXJpZ2h0LXdpZHRoIiksMTApOjApOwp9ei5jc3MoIndpZHRoIix5KyJweCIpLmNzcygiaGVpZ2h0Iix4KyJweCIpOwp9LF9jcmVhdGVJdGVtQ29sbGVjdGlvbjpmdW5jdGlvbigpe3ZhciB4PW5ldyBmLlJhZE1lbnVJdGVtQ29sbGVjdGlvbih0aGlzKTsKZi5SYWRNZW51Ll9jcmVhdGVDaGlsZENvbnRyb2xzKHRoaXMseCk7CnJldHVybiB4Owp9LF9nZXRTbGlkZVdyYXBFbGVtZW50OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX3NsaWRlV3JhcEVsZW1lbnQpe3ZhciB5PXRoaXMuZ2V0X2VsZW1lbnQoKTsKaWYoeSl7dmFyIHg9dih5KS5jaGlsZHJlbigiLnJtU2xpZGUiKTsKaWYoeC5sZW5ndGg9PTEpe3RoaXMuX3NsaWRlV3JhcEVsZW1lbnQ9eC5nZXQoMCk7Cn19fXJldHVybiB0aGlzLl9zbGlkZVdyYXBFbGVtZW50Owp9LF9nZXRTY3JvbGxXcmFwRWxlbWVudDpmdW5jdGlvbigpe2lmKCF0aGlzLl9zY3JvbGxXcmFwRWxlbWVudCl7dmFyIHg9dGhpcy5fZ2V0U2xpZGVXcmFwRWxlbWVudCgpOwppZih4KXt0aGlzLl9zY3JvbGxXcmFwRWxlbWVudD0kdGVsZXJpay5nZXRGaXJzdENoaWxkQnlUYWdOYW1lKHgsImRpdiIsMCk7Cn19cmV0dXJuIHRoaXMuX3Njcm9sbFdyYXBFbGVtZW50Owp9LF9nZXRBbmltYXRpb25Db250YWluZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0U2xpZGVXcmFwRWxlbWVudCgpOwp9LF9nZXRBbmltYXRlZEVsZW1lbnQ6ZnVuY3Rpb24oKXtpZighdGhpcy5fYW5pbWF0ZWRFbGVtZW50KXt0aGlzLl9hbmltYXRlZEVsZW1lbnQ9dGhpcy5fZ2V0U2Nyb2xsV3JhcEVsZW1lbnQoKXx8dGhpcy5nZXRfY2hpbGRMaXN0RWxlbWVudCgpOwp9cmV0dXJuIHRoaXMuX2FuaW1hdGVkRWxlbWVudDsKfSxfZGV0ZXJtaW5lRXhwYW5kRGlyZWN0aW9uOmZ1bmN0aW9uKCl7dmFyIHk9dGhpcy5nZXRfZ3JvdXBTZXR0aW5ncygpOwppZih5LmdldF9leHBhbmREaXJlY3Rpb24oKSE9Zi5FeHBhbmREaXJlY3Rpb24uQXV0byl7cmV0dXJuOwp9dmFyIHg9dGhpcy5fZ2V0UGFyZW50RmxvdygpOwppZih4PT1mLkl0ZW1GbG93LlZlcnRpY2FsKXtpZih0aGlzLmdldF9tZW51KCkuZ2V0X3JpZ2h0VG9MZWZ0KCkpe3kuc2V0X2V4cGFuZERpcmVjdGlvbihmLkV4cGFuZERpcmVjdGlvbi5MZWZ0KTsKfWVsc2V7eS5zZXRfZXhwYW5kRGlyZWN0aW9uKGYuRXhwYW5kRGlyZWN0aW9uLlJpZ2h0KTsKfX1lbHNle3kuc2V0X2V4cGFuZERpcmVjdGlvbihmLkV4cGFuZERpcmVjdGlvbi5Eb3duKTsKfX0sX2dldFNsaWRlRGlyZWN0aW9uOmZ1bmN0aW9uKCl7dmFyIHg9dGhpcy5nZXRfZ3JvdXBTZXR0aW5ncygpLmdldF9leHBhbmREaXJlY3Rpb24oKTsKaWYoeD09Zi5FeHBhbmREaXJlY3Rpb24uQXV0byl7cmV0dXJuIG51bGw7Cn1yZXR1cm4geDsKfSxfZ2V0UGFyZW50RmxvdzpmdW5jdGlvbigpe3ZhciB4PXRoaXMuZ2V0X3BhcmVudCgpOwppZigheCl7cmV0dXJuIG51bGw7Cn1pZih4PT10aGlzLmdldF9tZW51KCkpe3JldHVybiB4Ll9mbG93Owp9ZWxzZXtyZXR1cm4geC5nZXRfZ3JvdXBTZXR0aW5ncygpLmdldF9mbG93KCk7Cn19LF9pbml0aWFsaXplQW5pbWF0aW9uOmZ1bmN0aW9uKCl7dGhpcy5fZGV0ZXJtaW5lRXhwYW5kRGlyZWN0aW9uKCk7CnZhciB4PXRoaXMuX2dldEFuaW1hdGVkRWxlbWVudCgpOwppZih4KXt2YXIgeT10aGlzLmdldF9tZW51KCk7CnRoaXMuX3NsaWRlPW5ldyBmLmpTbGlkZSh4LHkuZ2V0X2V4cGFuZEFuaW1hdGlvbigpLHkuZ2V0X2NvbGxhcHNlQW5pbWF0aW9uKCkseS5nZXRfZW5hYmxlT3ZlcmxheSgpKTsKdGhpcy5fc2xpZGUuaW5pdGlhbGl6ZSgpOwp0aGlzLl9zbGlkZS5zZXRfZGlyZWN0aW9uKHRoaXMuX2dldFNsaWRlRGlyZWN0aW9uKCkpOwp0aGlzLl9jb2xsYXBzZUFuaW1hdGlvbkVuZGVkRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vbkNvbGxhcHNlQW5pbWF0aW9uRW5kZWQpOwp0aGlzLl9zbGlkZS5hZGRfY29sbGFwc2VBbmltYXRpb25FbmRlZCh0aGlzLl9jb2xsYXBzZUFuaW1hdGlvbkVuZGVkRGVsZWdhdGUpOwp0aGlzLl9leHBhbmRBbmltYXRpb25FbmRlZERlbGVnYXRlPUZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5fb25FeHBhbmRBbmltYXRpb25FbmRlZCk7CnRoaXMuX3NsaWRlLmFkZF9leHBhbmRBbmltYXRpb25FbmRlZCh0aGlzLl9leHBhbmRBbmltYXRpb25FbmRlZERlbGVnYXRlKTsKfX0sX2dldEhhc0l0ZW1zOmZ1bmN0aW9uKCl7aWYodGhpcy5faGFzSXRlbXM9PT1udWxsKXt0aGlzLl9oYXNJdGVtcz10aGlzLmdldF9pdGVtRGF0YSgpJiZ0aGlzLmdldF9pdGVtRGF0YSgpLmxlbmd0aD4wOwp9cmV0dXJuIHRoaXMuX2hhc0l0ZW1zOwp9LF9zZXRIYXNJdGVtczpmdW5jdGlvbih4KXt0aGlzLl9oYXNJdGVtcz14Owp9LF9jbGVhck5hdmlnYXRlVXJsOmZ1bmN0aW9uKCl7dmFyIHg9dGhpcy5nZXRfbGlua0VsZW1lbnQoKTsKaWYoIXgpe3JldHVybjsKfWlmKCF0aGlzLmdldF9lbmFibGVkKCkmJnguaHJlZil7dih4KS5kYXRhKCJocmVmIix0aGlzLl9nZXROYXZpZ2F0ZVVybCgpKTsKdih4KS5yZW1vdmVBdHRyKCJocmVmIik7Cn19LF9yZXN0b3JlTmF2aWdhdGVVcmw6ZnVuY3Rpb24oKXt2YXIgeD10aGlzLmdldF9saW5rRWxlbWVudCgpOwppZigheCl7cmV0dXJuOwp9dmFyIHk9dih4KS5kYXRhKCJocmVmIik7CmlmKHRoaXMuZ2V0X2VuYWJsZWQoKSYmeSl7eC5ocmVmPXk7Cn19LF91cGRhdGVUZXh0RWxlbWVudENsYXNzOmZ1bmN0aW9uKCl7dmFyIHk9dGhpcy5nZXRfdGV4dEVsZW1lbnQoKTsKaWYoIXkpe3JldHVybjsKfXZhciB4PW07CmlmKHRoaXMuX2dldEhhc0l0ZW1zKCl8fHRoaXMuZ2V0X2V4cGFuZE1vZGUoKT09Zi5NZW51SXRlbUV4cGFuZE1vZGUuV2ViU2VydmljZSl7eCs9IiAiK3RoaXMuX2dldEV4cGFuZENsYXNzTmFtZSgpOwp9eS5jbGFzc05hbWU9eDsKfSxfb25Db2xsYXBzZUFuaW1hdGlvbkVuZGVkOmZ1bmN0aW9uKCl7dmFyIHg9dGhpcy5nZXRfbWVudSgpOwp0aGlzLmdldF9lbGVtZW50KCkuc3R5bGUuekluZGV4PTA7CnguX3Jlc3RvcmVaSW5kZXgoKTsKaWYodGhpcy5nZXRfbGV2ZWwoKT09MCYmeC5nZXRfcmlnaHRUb0xlZnQoKSl7dmFyIHk9eC5nZXRfZWxlbWVudCgpOwp5LnN0eWxlLmNzc1RleHQ9eS5zdHlsZS5jc3NUZXh0Owp9fSxfb25FeHBhbmRBbmltYXRpb25FbmRlZDpmdW5jdGlvbigpe3RoaXMuX2ZpeFNsaWRlU2l6ZSgpOwp9LF9pbml0aWFsaXplU2Nyb2xsZXI6ZnVuY3Rpb24oKXt2YXIgeD10aGlzLl9nZXRTY3JvbGxXcmFwRWxlbWVudCgpOwppZih4KXt0aGlzLl9zY3JvbGxlcj1uZXcgZi5NZW51SXRlbVNjcm9sbGVyKHRoaXMuZ2V0X2NoaWxkTGlzdEVsZW1lbnQoKSx0aGlzLmdldF9ncm91cFNldHRpbmdzKCkuZ2V0X2Zsb3coKSk7CnRoaXMuX3Njcm9sbGVyLmluaXRpYWxpemUoKTsKfX0sX2lzQXV0b1Njcm9sbFBvc3NpYmxlOmZ1bmN0aW9uKCl7dmFyIHk9dGhpcy5nZXRfbWVudSgpOwp2YXIgeD10aGlzLl9nZXRNYXhpbXVtRXhwYW5kU2l6ZSgpOwp2YXIgej10aGlzLl9nZXRBbmltYXRpb25Db250YWluZXIoKTsKaWYodGhpcy5nZXRfZ3JvdXBTZXR0aW5ncygpLmdldF9mbG93KCk9PWYuSXRlbUZsb3cuVmVydGljYWwpe3JldHVybih5LmdldF9hdXRvU2Nyb2xsTWluaW11bUhlaWdodCgpPHgmJng8PXoub2Zmc2V0SGVpZ2h0KTsKfWVsc2V7cmV0dXJuKHkuZ2V0X2F1dG9TY3JvbGxNaW5pbXVtV2lkdGgoKTx4JiZ4PD16Lm9mZnNldFdpZHRoKTsKfX0sX2ZpdHNXaW5kb3c6ZnVuY3Rpb24oKXt2YXIgeD10aGlzLl9nZXRNYXhpbXVtRXhwYW5kU2l6ZSgpOwp2YXIgeT10aGlzLl9nZXRBbmltYXRpb25Db250YWluZXIoKTsKaWYodGhpcy5nZXRfZ3JvdXBTZXR0aW5ncygpLmdldF9mbG93KCk9PWYuSXRlbUZsb3cuVmVydGljYWwpe3JldHVybiB5Lm9mZnNldEhlaWdodDw9eDsKfXJldHVybiB5Lm9mZnNldFdpZHRoPD14Owp9LF9nZXRNYXhpbXVtRXhwYW5kU2l6ZTpmdW5jdGlvbigpe3ZhciBCPXRoaXMuX3NsaWRlLmdldF9kaXJlY3Rpb24oKTsKdmFyIHg9Zi5SYWRNZW51Ll9nZXRWaWV3UG9ydFNpemUoKTsKdmFyIEM9dGhpcy5fZ2V0QW5pbWF0aW9uQ29udGFpbmVyKCk7CnZhciBBPSR0ZWxlcmlrLmdldExvY2F0aW9uKEMpOwppZih0aGlzLmdldF9ncm91cFNldHRpbmdzKCkuZ2V0X2Zsb3coKT09Zi5JdGVtRmxvdy5WZXJ0aWNhbCl7dmFyIHo7CmlmKEI9PWYuRXhwYW5kRGlyZWN0aW9uLlVwKXt6PUMub2Zmc2V0SGVpZ2h0K0EueTsKfWVsc2V7ej14LmhlaWdodC1BLnktdGhpcy5fZGVmYXVsdFNjcm9sbFNpemU7Cn1yZXR1cm4gTWF0aC5taW4oeix4LmhlaWdodC10aGlzLl9kZWZhdWx0U2Nyb2xsU2l6ZSk7Cn12YXIgeTsKaWYoQj09Zi5FeHBhbmREaXJlY3Rpb24uTGVmdCl7eT1BLng7Cn1lbHNle3k9eC53aWR0aC1BLng7Cn1yZXR1cm4gTWF0aC5taW4oeSx4LndpZHRoKTsKfSxfc2F2ZUFuaW1hdGlvbkNvbnRhaW5lclNpemU6ZnVuY3Rpb24oKXt2YXIgej10aGlzLl9nZXRBbmltYXRpb25Db250YWluZXIoKTsKdmFyIHg9ei5vZmZzZXRIZWlnaHQ7CnZhciB5PXoub2Zmc2V0V2lkdGg7CnRoaXMuX2FuaW1hdGlvbkNvbnRhaW5lck9yaWdpbmFsU2l6ZT17fTsKdGhpcy5fYW5pbWF0aW9uQ29udGFpbmVyT3JpZ2luYWxTaXplLmhlaWdodD14Owp0aGlzLl9hbmltYXRpb25Db250YWluZXJPcmlnaW5hbFNpemUud2lkdGg9eTsKfSxfcmVzdG9yZUFuaW1hdGlvbkNvbnRhaW5lclNpemU6ZnVuY3Rpb24oKXtpZih0aGlzLl9hbmltYXRpb25Db250YWluZXJPcmlnaW5hbFNpemUpe3ZhciB4PXRoaXMuX2dldEFuaW1hdGlvbkNvbnRhaW5lcigpOwp4LnN0eWxlLmhlaWdodD10aGlzLl9hbmltYXRpb25Db250YWluZXJPcmlnaW5hbFNpemUuaGVpZ2h0KyJweCI7Cnguc3R5bGUud2lkdGg9dGhpcy5fYW5pbWF0aW9uQ29udGFpbmVyT3JpZ2luYWxTaXplLndpZHRoKyJweCI7CnRoaXMuX2FuaW1hdGlvbkNvbnRhaW5lck9yaWdpbmFsU2l6ZT1udWxsOwp9fSxfaW5pdGlhbGl6ZUF1dG9TY3JvbGw6ZnVuY3Rpb24oKXt0aGlzLl9yZW1vdmVDaGlsZExpc3RDb3JuZXJzKCk7CnRoaXMuX2J1aWxkU2Nyb2xsV3JhcCgpOwp0aGlzLl9pbml0aWFsaXplU2Nyb2xsZXIoKTsKdGhpcy5fYW5pbWF0ZWRFbGVtZW50PW51bGw7CnRoaXMuX3Njcm9sbFdyYXBFbGVtZW50PW51bGw7CnRoaXMuX3NsaWRlLnNldF9hbmltYXRlZEVsZW1lbnQodGhpcy5fZ2V0QW5pbWF0ZWRFbGVtZW50KCkpOwp0aGlzLl9lbnN1cmVSb3VuZGVkQ29ybmVycygpOwp0aGlzLl9lbnN1cmVTaGFkb3dzKCk7Cn0sX3JlbW92ZUF1dG9TY3JvbGw6ZnVuY3Rpb24oKXt0aGlzLl9yZW1vdmVTY3JvbGxXcmFwQ29udGFpbmVyKCk7CnZhciBDPXRoaXMuZ2V0X2l0ZW1zKCk7CnZhciBBPUMuZ2V0X2NvdW50KCk7CmZvcih2YXIgQj0wOwpCPEE7CkIrKyl7Qy5nZXRJdGVtKEIpLl9yZW1vdmVBdXRvU2Nyb2xsKCk7Cn10aGlzLl9hdHRhY2hDaGlsZHJlbigpOwppZighdGhpcy5fc2Nyb2xsZXIpe3JldHVybjsKfXRoaXMuX3Njcm9sbGVyLmRpc3Bvc2UoKTsKdGhpcy5fc2Nyb2xsZXI9bnVsbDsKdmFyIHk9dGhpcy5fZ2V0U2xpZGVXcmFwRWxlbWVudCgpOwp2YXIgej10aGlzLmdldF9jaGlsZExpc3RFbGVtZW50KCk7CnZhciB4PXRoaXMuX2dldFNjcm9sbFdyYXBFbGVtZW50KCk7CnkuYXBwZW5kQ2hpbGQoeik7CnkucmVtb3ZlQ2hpbGQoeCk7CnouY2xhc3NOYW1lPVN0cmluZy5mb3JtYXQoInswfSB7MX0gezJ9ezN9Iix0aGlzLl9nZXRGbG93Q3NzQ2xhc3MoKSxiLGksdGhpcy5nZXRfbGV2ZWwoKSk7CnRoaXMuX2FuaW1hdGVkRWxlbWVudD1udWxsOwp0aGlzLl9zY3JvbGxXcmFwRWxlbWVudD1udWxsOwp0aGlzLl9zbGlkZS5zZXRfYW5pbWF0ZWRFbGVtZW50KHRoaXMuX2dldEFuaW1hdGVkRWxlbWVudCgpKTsKdGhpcy5fc2xpZGUudXBkYXRlU2l6ZSgpOwp0aGlzLl9lbnN1cmVSb3VuZGVkQ29ybmVycygpOwp0aGlzLl9lbnN1cmVTaGFkb3dzKCk7Cn0sX3VwZGF0ZVNjcm9sbFNpemU6ZnVuY3Rpb24oKXt2YXIgej10aGlzLl9zbGlkZS5nZXRfZGlyZWN0aW9uKCk7CnZhciB4PXRoaXMuX2dldEFuaW1hdGlvbkNvbnRhaW5lcigpOwp2YXIgQT10aGlzLl9nZXRTY3JvbGxXcmFwRWxlbWVudCgpOwpBLnN0eWxlLmhlaWdodD0iIjsKQS5zdHlsZS53aWR0aD0iIjsKdmFyIHk9dGhpcy5fZ2V0TWF4aW11bUV4cGFuZFNpemUoKTsKaWYodGhpcy5nZXRfZ3JvdXBTZXR0aW5ncygpLmdldF9mbG93KCk9PWYuSXRlbUZsb3cuVmVydGljYWwpeyR0ZWxlcmlrLnNldFNpemUoQSx7aGVpZ2h0Onksd2lkdGg6cGFyc2VJbnQoeC5zdHlsZS53aWR0aCl9KTsKaWYoej09Zi5FeHBhbmREaXJlY3Rpb24uVXApe3guc3R5bGUudG9wPS15KyJweCI7Cn19ZWxzZXskdGVsZXJpay5zZXRTaXplKEEse3dpZHRoOnksaGVpZ2h0OnBhcnNlSW50KHguc3R5bGUuaGVpZ2h0KX0pOwp9dGhpcy5fc2xpZGUudXBkYXRlU2l6ZSgpOwp0aGlzLl9zY3JvbGxlci5yZXNldFN0YXRlKCk7Cn0sX2J1aWxkU2Nyb2xsV3JhcDpmdW5jdGlvbigpe3ZhciB4PXRoaXMuX2dldFNsaWRlV3JhcEVsZW1lbnQoKTsKdmFyIHo9dGhpcy5nZXRfY2hpbGRMaXN0RWxlbWVudCgpOwp2YXIgeT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKeS5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiOwp5LnN0eWxlLm92ZXJmbG93PSJoaWRkZW4iOwp6LmNsYXNzTmFtZT10aGlzLl9nZXRGbG93Q3NzQ2xhc3MoKTsKeS5jbGFzc05hbWU9U3RyaW5nLmZvcm1hdCgiezB9IHsxfSB7Mn17M30iLGMsYixpLHRoaXMuZ2V0X2xldmVsKCkpOwp5LmFwcGVuZENoaWxkKHopOwp4LmFwcGVuZENoaWxkKHkpOwp9LF91cGRhdGVTY3JvbGxXcmFwU2l6ZTpmdW5jdGlvbigpe3ZhciB5PXRoaXMuX2dldFNjcm9sbFdyYXBFbGVtZW50KCk7CnZhciB4PXRoaXMuZ2V0X2NoaWxkTGlzdEVsZW1lbnQoKTsKaWYoIXkpe3JldHVybjsKfWlmKCF5LnN0eWxlLmhlaWdodCl7eS5zdHlsZS5oZWlnaHQ9eC5vZmZzZXRIZWlnaHQrInB4IjsKfWlmKHRoaXMuZ2V0X2dyb3VwU2V0dGluZ3MoKS5nZXRfZmxvdygpPT1mLkl0ZW1GbG93LlZlcnRpY2FsKXt5LnN0eWxlLndpZHRoPXgub2Zmc2V0V2lkdGgrInB4IjsKfX0sX2dldFdpZHRoOmZ1bmN0aW9uKCl7dmFyIHg9dGhpcy5nZXRfbGlua0VsZW1lbnQoKTsKaWYoeCl7cmV0dXJuIHgub2Zmc2V0V2lkdGg7Cn1lbHNle3JldHVybiB0aGlzLmdldF9lbGVtZW50KCkub2Zmc2V0V2lkdGg7Cn19LF9zZXRXaWR0aDpmdW5jdGlvbihDKXt2YXIgRD10aGlzLmdldF9saW5rRWxlbWVudCgpOwppZighRCl7RD10aGlzLmdldF9lbGVtZW50KCk7Cn1pZighRCl7cmV0dXJuOwp9aWYoJHRlbGVyaWsuaXNPcGVyYSl7dGhpcy5nZXRfZWxlbWVudCgpLnN0eWxlLmNzc0Zsb2F0PSJub25lIjsKfXZhciBBPXBhcnNlSW50KEMpOwppZihpc05hTihBKSl7RC5zdHlsZS53aWR0aD1DOwppZigkdGVsZXJpay5pc0lFNil7RC5zdHlsZS5jc3NUZXh0PUQuc3R5bGUuY3NzVGV4dDsKfXJldHVybjsKfXZhciB6PUE7CnZhciB4PSR0ZWxlcmlrLmdldFBhZGRpbmdCb3goRCkuaG9yaXpvbnRhbDsKdmFyIEI9JHRlbGVyaWsuZ2V0Qm9yZGVyQm94KEQpLmhvcml6b250YWw7CnotPXgrQjsKaWYoejw9MCl7cmV0dXJuOwp9dmFyIHk9RC5zdHlsZS53aWR0aDsKaWYoIXl8fHohPXkpe0Quc3R5bGUud2lkdGg9eisicHgiOwp9fSxfY2xlYXJXaWR0aDpmdW5jdGlvbigpe3RoaXMuX3NldFdpZHRoKCJhdXRvIik7Cn0sX2dldERhdGE6ZnVuY3Rpb24oKXt2YXIgeD1mLlJhZE1lbnVJdGVtLmNhbGxCYXNlTWV0aG9kKHRoaXMsIl9nZXREYXRhIik7CnZhciB5PXRoaXMuZ2V0X25hdmlnYXRlVXJsKCk7CmlmKHkmJnkhPSIjIiYmKGxvY2F0aW9uLmhyZWYrIiMiIT09eSkpe3gubmF2aWdhdGVVcmw9eTsKfWlmKHRoaXMuZ2V0X2ltYWdlVXJsKCkhPT1udWxsKXt4LmltYWdlVXJsPXRoaXMuZ2V0X2ltYWdlVXJsKCk7Cn1yZXR1cm4geDsKfSxfbG9hZEZyb21EaWN0aW9uYXJ5OmZ1bmN0aW9uKHksQyl7dmFyIHo9e307CmZvcih2YXIgQiBpbiB5KXtpZihCPT09Il9fdHlwZSJ8fEI9PT0iQXR0cmlidXRlcyIpe2NvbnRpbnVlOwp9dmFyIHg9Qi5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKStCLnN1YnN0cigxKTsKdmFyIEE9eVtCXTsKaWYoQT09PW51bGx8fEE9PT0iIil7Y29udGludWU7Cn16W3hdPUE7Cn10aGlzLl9wcm9wZXJ0aWVzLmxvYWQoeik7CmlmKHkuQXR0cmlidXRlcyl7dGhpcy5nZXRfYXR0cmlidXRlcygpLl9sb2FkKHkuQXR0cmlidXRlcyxDKTsKfX0sX3JlcGxhY2VDc3NDbGFzczpmdW5jdGlvbih4LHkseil7eC5jbGFzc05hbWU9eC5jbGFzc05hbWUucmVwbGFjZSh5LHopOwp9LF9zZXRDaGlsZENvbnRhaW5lclBvc2l0aW9uOmZ1bmN0aW9uKHksRCl7dmFyIEY9dGhpcy5fZ2V0QW5pbWF0aW9uQ29udGFpbmVyKCk7CnZhciBCPXRoaXMuZ2V0X3BhcmVudCgpOwp2YXIgQT1udWxsOwppZihCLl9nZXRTY3JvbGxXcmFwRWxlbWVudCl7QT1CLl9nZXRTY3JvbGxXcmFwRWxlbWVudCgpOwp9aWYoQSl7dGhpcy5fZGV0YWNoQ2hpbGRyZW4oKTsKdmFyIHo9dGhpcy5nZXRfZWxlbWVudCgpOwpEKz16Lm9mZnNldFRvcDsKeSs9ei5vZmZzZXRMZWZ0Owp2YXIgQz1CLmdldF9jaGlsZExpc3RFbGVtZW50KCk7CnZhciBFPXBhcnNlSW50KEMuc3R5bGUudG9wKTsKaWYoaXNOYU4oRSkpe0U9MDsKfWlmKHRoaXMuZ2V0X2dyb3VwU2V0dGluZ3MoKS5nZXRfb2Zmc2V0WSgpPT0wKXtEKz1FOwp9dmFyIHg9cGFyc2VJbnQoQy5zdHlsZS5sZWZ0KTsKaWYoaXNOYU4oeCkpe3g9MDsKfWlmKHRoaXMuZ2V0X2dyb3VwU2V0dGluZ3MoKS5nZXRfb2Zmc2V0WCgpPT0wKXt5Kz14OwppZih0aGlzLl9nZXRQYXJlbnRGbG93KCk9PWYuSXRlbUZsb3cuSG9yaXpvbnRhbCl7eT1NYXRoLm1heCh5LDApOwp9fX1GLnN0eWxlLmxlZnQ9KHkrdGhpcy5nZXRfZ3JvdXBTZXR0aW5ncygpLmdldF9vZmZzZXRYKCkpKyJweCI7CkYuc3R5bGUudG9wPShEK3RoaXMuZ2V0X2dyb3VwU2V0dGluZ3MoKS5nZXRfb2Zmc2V0WSgpKSsicHgiOwp9LF9kZXRhY2hDaGlsZHJlbjpmdW5jdGlvbigpe2lmKHRoaXMuX2NoaWxkcmVuRGV0YWNoZWQpe3JldHVybjsKfXZhciB5PXRoaXMuZ2V0X3BhcmVudCgpOwp2YXIgeDsKaWYodGhpcy5nZXRfbGV2ZWwoKT09MCYmeS5nZXRfZW5hYmxlUm9vdEl0ZW1TY3JvbGwoKSl7dmFyIHo9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CnouY2xhc3NOYW1lPSJybUhvcml6b250YWwgcm1Sb290R3JvdXAiOwppZih5LmdldF9lbmFibGVSb3VuZGVkQ29ybmVycygpKXt6LmNsYXNzTmFtZSs9IiBybVJvdW5kZWRDb3JuZXJzIjsKfWlmKHkuZ2V0X2VuYWJsZVNoYWRvd3MoKSl7ei5jbGFzc05hbWUrPSIgcm1TaGFkb3dzIjsKfXouc3R5bGUucG9zaXRpb249ImFic29sdXRlIjsKei5zdHlsZS5oZWlnaHQ9IjBweCI7Cnouc3R5bGUud2lkdGg9IjBweCI7Cnouc3R5bGUudmlzaWJpbGl0eT0iaGlkZGVuIjsKei5zdHlsZS5sZWZ0PSIwcHgiOwppZih5LmdldF9yaWdodFRvTGVmdCgpKXt6LnN0eWxlLmNzc0Zsb2F0PSJyaWdodCI7Cn12YXIgQT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKQS5jbGFzc05hbWU9YjsKQS5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiOwp5LmdldF9lbGVtZW50KCkuYXBwZW5kQ2hpbGQoeik7CnouYXBwZW5kQ2hpbGQoQSk7CmlmKCR0ZWxlcmlrLmlzSUUpe3ouc3R5bGUuY3NzVGV4dD16LnN0eWxlLmNzc1RleHQ7Cn14PUE7Cn1lbHNle3g9eS5fZ2V0QW5pbWF0aW9uQ29udGFpbmVyKCk7Cn12YXIgQj10aGlzLl9nZXRBbmltYXRpb25Db250YWluZXIoKTsKeC5hcHBlbmRDaGlsZChCKTsKdGhpcy5fY2hpbGRyZW5EZXRhY2hlZD10cnVlOwpCLl9pdGVtPXRoaXM7CkIuX2l0ZW1UeXBlTmFtZT1PYmplY3QuZ2V0VHlwZU5hbWUodGhpcyk7Cn0sX2NhY2hlRG9tUHJvcGVydGllczpmdW5jdGlvbigpe3RoaXMuZ2V0X2Rpc2FibGVkSW1hZ2VVcmwoKTsKdGhpcy5nZXRfZXhwYW5kZWRJbWFnZVVybCgpOwp0aGlzLmdldF9ob3ZlcmVkSW1hZ2VVcmwoKTsKdGhpcy5nZXRfc2VsZWN0ZWRJbWFnZVVybCgpOwp0aGlzLmdldF9pbWFnZVVybCgpOwp0aGlzLmdldF90ZXh0KCk7CnRoaXMuZ2V0X25hdmlnYXRlVXJsKCk7CnRoaXMuZ2V0X3RhcmdldCgpOwpmb3IodmFyIHg9MDsKeDx0aGlzLmdldF9pdGVtcygpLmdldF9jb3VudCgpOwp4Kyspe3RoaXMuZ2V0X2l0ZW1zKCkuZ2V0SXRlbSh4KS5fY2FjaGVEb21Qcm9wZXJ0aWVzKCk7Cn19LF9hdHRhY2hDaGlsZHJlbjpmdW5jdGlvbigpe2lmKHRoaXMuX2NoaWxkcmVuRGV0YWNoZWQpe3ZhciB4PXRoaXMuZ2V0X2VsZW1lbnQoKTsKeC5hcHBlbmRDaGlsZCh0aGlzLl9nZXRBbmltYXRpb25Db250YWluZXIoKSk7CnRoaXMuX2NoaWxkcmVuRGV0YWNoZWQ9ZmFsc2U7Cn19LF9yZXNldEFuaW1hdGVkRWxlbWVudFBvc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIHg9dGhpcy5fZ2V0QW5pbWF0ZWRFbGVtZW50KCk7Cnguc3R5bGUudG9wPSIwcHgiOwp4LnN0eWxlLmxlZnQ9IjBweCI7Cn0sX3Bvc2l0aW9uQ2hpbGRDb250YWluZXI6ZnVuY3Rpb24oKXtpZighdGhpcy5fYXV0b1Njcm9sbEFjdGl2ZSl7dGhpcy5fc2F2ZUFuaW1hdGlvbkNvbnRhaW5lclNpemUoKTsKfXZhciBDPXRoaXMuX3Bvc2l0aW9uQ2hpbGRDb250YWluZXJCYXNpYygpOwp2YXIgeT1DLmxlZnQ7CnZhciBFPUMudG9wOwp2YXIgQj10aGlzLmdldF9tZW51KCk7CnZhciBGPUIuZ2V0X2VuYWJsZUF1dG9TY3JvbGwoKTsKdmFyIEE9Qi5nZXRfZW5hYmxlU2NyZWVuQm91bmRhcnlEZXRlY3Rpb24oKTsKdmFyIHo9ZmFsc2U7CmlmKEYpe2lmKCF0aGlzLl9hcHBseUF1dG9TY3JvbGwoeSxFKSl7aWYodGhpcy5fYXV0b1Njcm9sbEFjdGl2ZSl7dGhpcy5fcmVtb3ZlQXV0b1Njcm9sbCgpOwp0aGlzLl9hdXRvU2Nyb2xsQWN0aXZlPWZhbHNlOwp0aGlzLl9yZXN0b3JlQW5pbWF0aW9uQ29udGFpbmVyU2l6ZSgpOwpDPXRoaXMuX3Bvc2l0aW9uQ2hpbGRDb250YWluZXJCYXNpYygpOwp5PUMubGVmdDsKRT1DLnRvcDsKfWlmKEEpe3ZhciBEPXRoaXMuX2FkanVzdEZvclNjcmVlbkJvdW5kYXJpZXMoeSxFKTsKej10cnVlOwp0aGlzLl9hcHBseUF1dG9TY3JvbGwoRC5hZGp1c3RlZExlZnQsRC5hZGp1c3RlZFRvcCk7Cn19aWYodGhpcy5fYXV0b1Njcm9sbEFjdGl2ZSl7dGhpcy5fdXBkYXRlU2Nyb2xsU2l6ZSgpOwp9fWlmKEEmJiF6KXt0aGlzLl9hZGp1c3RGb3JTY3JlZW5Cb3VuZGFyaWVzKHksRSk7Cn12YXIgeD10aGlzLmdldF90ZXh0RWxlbWVudCgpOwppZih4KXt4LmNsYXNzTmFtZT1tKyIgIit0aGlzLl9nZXRFeHBhbmRDbGFzc05hbWUoKTsKfX0sX3Bvc2l0aW9uQ2hpbGRDb250YWluZXJCYXNpYzpmdW5jdGlvbigpe3ZhciBFPTA7CnZhciB5PTA7CnZhciBBPXRoaXMuZ2V0X2VsZW1lbnQoKTsKdmFyIHg9QS5vZmZzZXRIZWlnaHQ7CnZhciBGPUEub2Zmc2V0V2lkdGg7CnZhciBEPXRoaXMuX2dldEFuaW1hdGlvbkNvbnRhaW5lcigpOwp2YXIgQz1ELm9mZnNldEhlaWdodDsKdmFyIEc9RC5vZmZzZXRXaWR0aDsKdmFyIHo9dGhpcy5nZXRfZ3JvdXBTZXR0aW5ncygpLmdldF9leHBhbmREaXJlY3Rpb24oKTsKc3dpdGNoKHope2Nhc2UgZi5FeHBhbmREaXJlY3Rpb24uVXA6RT0tQzsKYnJlYWs7CmNhc2UgZi5FeHBhbmREaXJlY3Rpb24uRG93bjpFPXg7CmJyZWFrOwpjYXNlIGYuRXhwYW5kRGlyZWN0aW9uLkxlZnQ6eT0tRzsKYnJlYWs7CmNhc2UgZi5FeHBhbmREaXJlY3Rpb24uUmlnaHQ6eT1GOwpicmVhazsKfXZhciBCPXRoaXMuZ2V0X21lbnUoKTsKaWYoQi5nZXRfcmlnaHRUb0xlZnQoKSYmdGhpcy5nZXRfbGV2ZWwoKT09MCl7eT1GLUc7CmlmKHRoaXMuX2dldFBhcmVudEZsb3coKT09Zi5JdGVtRmxvdy5WZXJ0aWNhbCl7eS09RjsKfX10aGlzLl9zZXRDaGlsZENvbnRhaW5lclBvc2l0aW9uKHksRSk7CnJldHVybntsZWZ0OnksdG9wOkV9Owp9LF9hcHBseUF1dG9TY3JvbGw6ZnVuY3Rpb24oeCx5KXtpZih0aGlzLl9pc0F1dG9TY3JvbGxQb3NzaWJsZSgpKXtpZighdGhpcy5fc2Nyb2xsZXIpe3RoaXMuX2luaXRpYWxpemVBdXRvU2Nyb2xsKCk7CnRoaXMuX2F1dG9TY3JvbGxBY3RpdmU9dHJ1ZTsKdGhpcy5fc2V0Q2hpbGRDb250YWluZXJQb3NpdGlvbih4LHkpOwp9cmV0dXJuIHRydWU7Cn1yZXR1cm4gZmFsc2U7Cn0sX2FkanVzdEZvclNjcmVlbkJvdW5kYXJpZXM6ZnVuY3Rpb24oRixCKXt2YXIgUD10aGlzLl9nZXRBbmltYXRpb25Db250YWluZXIoKTsKdmFyIHk9UC5vZmZzZXRIZWlnaHQ7CnZhciB6PVAub2Zmc2V0V2lkdGg7CnZhciBBPXRoaXMuZ2V0X2VsZW1lbnQoKTsKdmFyIEg9QS5vZmZzZXRIZWlnaHQ7CnZhciBNPUEub2Zmc2V0V2lkdGg7CnZhciBMPXRoaXMuZ2V0X2dyb3VwU2V0dGluZ3MoKS5nZXRfZXhwYW5kRGlyZWN0aW9uKCk7CnZhciBKPUw7CnZhciBJPWYuUmFkTWVudS5fZ2V0Vmlld1BvcnRTaXplKCk7CnZhciBPPXYoKS5zY3JvbGxUb3AoKTsKdmFyIEM9JHRlbGVyaWsuZ2V0TG9jYXRpb24oUCk7CnZhciBRPSR0ZWxlcmlrLmdldExvY2F0aW9uKEEpOwp2YXIgSz1JLndpZHRoLVEueC1BLm9mZnNldFdpZHRoOwp2YXIgRT1RLng7CnZhciBSPUkuaGVpZ2h0LVEueS1BLm9mZnNldEhlaWdodDsKdmFyIEc9US55LU87CnN3aXRjaChMKXtjYXNlIGYuRXhwYW5kRGlyZWN0aW9uLlVwOmlmKCR0ZWxlcmlrLmVsZW1lbnRPdmVyZmxvd3NUb3AoUCxDKXx8KEMueTxPJiZSPkcpKXtKPWYuRXhwYW5kRGlyZWN0aW9uLkRvd247CkI9SDsKfWJyZWFrOwpjYXNlIGYuRXhwYW5kRGlyZWN0aW9uLkRvd246aWYoJHRlbGVyaWsuZWxlbWVudE92ZXJmbG93c0JvdHRvbShJLFAsQykpe2lmKFEueT5QLm9mZnNldEhlaWdodCl7Sj1mLkV4cGFuZERpcmVjdGlvbi5VcDsKQj0teTsKfX1icmVhazsKY2FzZSBmLkV4cGFuZERpcmVjdGlvbi5MZWZ0OmlmKEMueDx2KGRvY3VtZW50KS5zY3JvbGxMZWZ0KCkpe2lmKEs+RSl7Sj1mLkV4cGFuZERpcmVjdGlvbi5SaWdodDsKRj1NOwp9fWJyZWFrOwpjYXNlIGYuRXhwYW5kRGlyZWN0aW9uLlJpZ2h0OmlmKCR0ZWxlcmlrLmVsZW1lbnRPdmVyZmxvd3NSaWdodChJLFAsQykpe2lmKEU+Syl7Sj1mLkV4cGFuZERpcmVjdGlvbi5MZWZ0OwpGPS16Owp9fWJyZWFrOwp9c3dpdGNoKEope2Nhc2UgZi5FeHBhbmREaXJlY3Rpb24uRG93bjpjYXNlIGYuRXhwYW5kRGlyZWN0aW9uLlVwOmlmKCR0ZWxlcmlrLmVsZW1lbnRPdmVyZmxvd3NSaWdodChJLFApKXt2YXIgeD1JLndpZHRoLShDLngreik7CnZhciBEPXRoaXMuZ2V0X21lbnUoKTsKaWYoRC5nZXRfcmlnaHRUb0xlZnQoKSYmdGhpcy5nZXRfbGV2ZWwoKT09MCl7Ris9eDsKfWVsc2V7Rj14Owp9fWJyZWFrOwpjYXNlIGYuRXhwYW5kRGlyZWN0aW9uLkxlZnQ6Y2FzZSBmLkV4cGFuZERpcmVjdGlvbi5SaWdodDppZigkdGVsZXJpay5lbGVtZW50T3ZlcmZsb3dzQm90dG9tKEksUCkpe3ZhciBOPU1hdGgubWluKHksSS5oZWlnaHQpOwpCPUkuaGVpZ2h0LShDLnkrTiktdGhpcy5fZGVmYXVsdFNjcm9sbFNpemU7Cn1icmVhazsKfXRoaXMuX3NldENoaWxkQ29udGFpbmVyUG9zaXRpb24oRixCKTsKdGhpcy5fc2xpZGUuc2V0X2RpcmVjdGlvbihKKTsKcmV0dXJue2FkanVzdGVkTGVmdDpGLGFkanVzdGVkVG9wOkJ9Owp9LF9jbG9zZUNoaWxkcmVuOmZ1bmN0aW9uKHkpe3ZhciB6PXRoaXMuZ2V0X2l0ZW1zKCk7CmZvcih2YXIgQT0wOwpBPHouZ2V0X2NvdW50KCk7CkErKyl7dmFyIEI9ei5nZXRJdGVtKEEpOwpCLl9zdG9wQW5pbWF0aW9uKCk7CkIuX2Nsb3NlKHkpOwp9dmFyIHg9dGhpcy5nZXRfZm9jdXNlZEl0ZW0oKTsKaWYoeCYmei5nZXRfY291bnQoKSl7eC5nZXRfbGlua0VsZW1lbnQoKS5ibHVyKCk7Cn19LF9zdG9wQW5pbWF0aW9uOmZ1bmN0aW9uKCl7aWYodGhpcy5fc2xpZGUpe3RoaXMuX3NsaWRlLl9zdG9wQW5pbWF0aW9uKCk7Cn19LF9wcmV2ZW50Q2xvc2U6ZnVuY3Rpb24oKXt2YXIgeD10aGlzLmdldF9wYXJlbnQoKTsKaWYodGhpcy5fc3RhdGU9PWYuUmFkTWVudUl0ZW1TdGF0ZS5BYm91dFRvQ2xvc2Upe3RoaXMuX2NsZWFyVGltZW91dCgpOwp0aGlzLl9zdGF0ZT1mLlJhZE1lbnVJdGVtU3RhdGUuT3BlbjsKeC5fb3BlbmVkSXRlbT10aGlzOwp9aWYoeC5fcHJldmVudENsb3NlKXt4Ll9wcmV2ZW50Q2xvc2UoKTsKfX0sX3NldFRpbWVvdXQ6ZnVuY3Rpb24oeCx5KXt0aGlzLl90aW1lb3V0UmVmPXNldFRpbWVvdXQoeCx5KTsKfSxfY2xlYXJUaW1lb3V0OmZ1bmN0aW9uKCl7aWYodGhpcy5fdGltZW91dFJlZil7Y2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVvdXRSZWYpOwp0aGlzLl90aW1lb3V0UmVmPW51bGw7Cn19LF9nZXRFeHBhbmRDbGFzc05hbWU6ZnVuY3Rpb24oKXtyZXR1cm4icm1FeHBhbmQiK3RoaXMuX2dldEV4cGFuZENsYXNzKCk7Cn0sX2dldEV4cGFuZENsYXNzOmZ1bmN0aW9uKCl7dmFyIHg9dGhpcy5fZ2V0U2xpZGVEaXJlY3Rpb24oKTsKc3dpdGNoKHgpe2Nhc2UgZi5qU2xpZGVEaXJlY3Rpb24uVXA6cmV0dXJuIlRvcCI7CmNhc2UgZi5qU2xpZGVEaXJlY3Rpb24uRG93bjpyZXR1cm4iRG93biI7CmNhc2UgZi5qU2xpZGVEaXJlY3Rpb24uTGVmdDpyZXR1cm4iTGVmdCI7CmNhc2UgZi5qU2xpZGVEaXJlY3Rpb24uUmlnaHQ6cmV0dXJuIlJpZ2h0IjsKfX0sX3VwZGF0ZUxpbmtDbGFzczpmdW5jdGlvbigpe2lmKHRoaXMuZ2V0X2lzU2VwYXJhdG9yKCkpe3JldHVybjsKfXZhciB6PSIiOwppZighdGhpcy5nZXRfdGVtcGxhdGVkKCkpe3o9azsKdmFyIHg9dGhpcy5nZXRfY3NzQ2xhc3MoKTsKaWYoeCl7eis9IiAiK3g7Cn1pZih0aGlzLmdldF90ZXh0KCk9PSIiJiYhdih0aGlzLmdldF90ZXh0RWxlbWVudCgpKS5jaGlsZHJlbigpLmxlbmd0aCl7eis9IiAiK3U7Cn1pZih0aGlzLl9pc1Jvb3RMaW5rKCkpe3orPSIgIitoOwp9aWYodGhpcy5nZXRfZm9jdXNlZCgpJiYhdGhpcy5nZXRfdGVtcGxhdGVkKCkpe3orPSIgIit0aGlzLmdldF9mb2N1c2VkQ3NzQ2xhc3MoKTsKfXZhciBBPXRoaXMuZ2V0X21lbnUoKTsKaWYodGhpcy5nZXRfc2VsZWN0ZWQoKSYmKCFBfHxBLmdldF9lbmFibGVTZWxlY3Rpb24oKSkpe3orPSIgIit0aGlzLmdldF9zZWxlY3RlZENzc0NsYXNzKCk7Cn1pZih0aGlzLl9jbGlja2VkKXt6Kz0iICIrdGhpcy5nZXRfY2xpY2tlZENzc0NsYXNzKCk7Cn19ZWxzZXt6Kz0iICIrbTsKfWlmKHRoaXMuX3N0YXRlPT1mLlJhZE1lbnVJdGVtU3RhdGUuT3Blbil7eis9IiAiK3RoaXMuZ2V0X2V4cGFuZGVkQ3NzQ2xhc3MoKTsKfWlmKCF0aGlzLmdldF9lbmFibGVkKCkpe3orPSIgIitwKyIgIit0aGlzLmdldF9kaXNhYmxlZENzc0NsYXNzKCk7Cn12YXIgeT10aGlzLmdldF90ZW1wbGF0ZWQoKT90aGlzLmdldF90ZW1wbGF0ZUVsZW1lbnQoKTp0aGlzLmdldF9saW5rRWxlbWVudCgpOwppZih5KXt5LmNsYXNzTmFtZT16Owp9fSxfdXBkYXRlSXRlbUNsYXNzOmZ1bmN0aW9uKHgseSl7dmFyIHo9dih0aGlzLmdldF9lbGVtZW50KCkpOwppZih6Lmxlbmd0aCl7aWYoeCYmei5oYXNDbGFzcyh4KSl7ei5yZW1vdmVDbGFzcyh4KTsKfWlmKHkpe3ouYWRkQ2xhc3MoeSk7Cn19fSxfdXBkYXRlSW1hZ2VTcmM6ZnVuY3Rpb24oKXt2YXIgeD10aGlzLmdldF9pbWFnZVVybCgpOwppZih0aGlzLl9ob3ZlcmVkJiZ0aGlzLmdldF9ob3ZlcmVkSW1hZ2VVcmwoKSl7eD10aGlzLmdldF9ob3ZlcmVkSW1hZ2VVcmwoKTsKfWlmKHRoaXMuX3N0YXRlPT1mLlJhZE1lbnVJdGVtU3RhdGUuT3BlbiYmdGhpcy5nZXRfZXhwYW5kZWRJbWFnZVVybCgpKXt4PXRoaXMuZ2V0X2V4cGFuZGVkSW1hZ2VVcmwoKTsKfWlmKCF0aGlzLmdldF9lbmFibGVkKCkmJnRoaXMuZ2V0X2Rpc2FibGVkSW1hZ2VVcmwoKSl7eD10aGlzLmdldF9kaXNhYmxlZEltYWdlVXJsKCk7Cn1pZih0aGlzLl9jbGlja2VkJiZ0aGlzLmdldF9jbGlja2VkSW1hZ2VVcmwoKSl7eD10aGlzLmdldF9jbGlja2VkSW1hZ2VVcmwoKTsKfWlmKHRoaXMuZ2V0X3NlbGVjdGVkKCkmJnRoaXMuZ2V0X3NlbGVjdGVkSW1hZ2VVcmwoKSl7eD10aGlzLmdldF9zZWxlY3RlZEltYWdlVXJsKCk7Cn1pZih4JiZ0aGlzLmdldF9lbGVtZW50KCkpe3ZhciB5PXRoaXMuZ2V0X2ltYWdlRWxlbWVudCgpOwppZigheSl7eT10aGlzLl9jcmVhdGVJbWFnZUVsZW1lbnQoKTsKfXg9eC5yZXBsYWNlKC8mYW1wOy9pZywiJiIpOwppZih4IT15LnNyYyl7eS5zcmM9eDsKfX19LF9jcmVhdGVJbWFnZUVsZW1lbnQ6ZnVuY3Rpb24oKXt2YXIgeD10aGlzLmdldF9lbmFibGVJbWFnZVNwcml0ZSgpPyJzcGFuIjoiaW1nIjsKdGhpcy5faW1hZ2VFbGVtZW50PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoeCk7CnRoaXMuX2ltYWdlRWxlbWVudC5jbGFzc05hbWU9YTsKaWYoIXRoaXMuZ2V0X2VuYWJsZWQoKSl7dGhpcy5faW1hZ2VFbGVtZW50LmRpc2FibGVkPSJkaXNhYmxlZCI7Cn12YXIgeT10aGlzLmdldF9saW5rRWxlbWVudCgpfHx0aGlzLmdldF9lbGVtZW50KCk7CmlmKHkuZmlyc3RDaGlsZCl7eS5pbnNlcnRCZWZvcmUodGhpcy5faW1hZ2VFbGVtZW50LHkuZmlyc3RDaGlsZCk7Cn1lbHNle3kuYXBwZW5kQ2hpbGQodGhpcy5faW1hZ2VFbGVtZW50KTsKfXJldHVybiB0aGlzLl9pbWFnZUVsZW1lbnQ7Cn0sX2NsaWNrOmZ1bmN0aW9uKHgpe2lmKCF0aGlzLmdldF9lbmFibGVkKCkpe3JldHVybjsKfXZhciB6PXRoaXMuZ2V0X21lbnUoKTsKdmFyIEI9ei5fZ2V0RXh0ZW5kZWRJdGVtQ2xpY2tpbmdFdmVudEFyZ3MobmV3IGYuUmFkTWVudUl0ZW1DbGlja2luZ0V2ZW50QXJncyh0aGlzLHgpKTsKei5fcmFpc2VFdmVudCgiaXRlbUNsaWNraW5nIixCKTsKaWYoQi5nZXRfY2FuY2VsKCkpe2lmKHgmJngucHJldmVudERlZmF1bHQpe3gucHJldmVudERlZmF1bHQoKTsKfXJldHVybjsKfWlmKHouZ2V0X2NsaWNrVG9PcGVuKCkmJnRoaXMuZ2V0X2xldmVsKCk9PTApe3ZhciB5PXouZ2V0X29wZW5lZEl0ZW0oKTsKaWYoeSYmeSE9dGhpcyl7eS5fY2xvc2UoeCk7Cn1pZih6Ll9jbGlja2VkJiYoISR0ZWxlcmlrLmlzQmxhY2tCZXJyeTQmJiEkdGVsZXJpay5pc0JsYWNrQmVycnk1KSl7dGhpcy5fY2xvc2UoeCk7Cn1lbHNle3RoaXMuX29wZW4oeCk7Cn16Ll9jbGlja2VkPSF6Ll9jbGlja2VkOwp9dmFyIEE9ei5fZ2V0RXh0ZW5kZWRJdGVtQ2xpY2tlZEV2ZW50QXJncyhuZXcgZi5SYWRNZW51SXRlbUNsaWNrZWRFdmVudEFyZ3ModGhpcyx4KSk7CnouX3JhaXNlRXZlbnQoIml0ZW1DbGlja2VkIixBKTsKaWYodGhpcy5fc2hvdWxkTmF2aWdhdGUoKSl7cmV0dXJuOwp9dGhpcy5zZXRfc2VsZWN0ZWQodHJ1ZSk7CmlmKHRoaXMuX3Nob3VsZFBvc3RCYWNrKCkpe3ouX3Bvc3RiYWNrKHRoaXMuX2dldEhpZXJhcmNoaWNhbEluZGV4KCkpOwp9fSxfc2hvdWxkUG9zdEJhY2s6ZnVuY3Rpb24oKXtpZighdGhpcy5nZXRfbWVudSgpKXtyZXR1cm4gZmFsc2U7Cn1yZXR1cm4gdGhpcy5nZXRfcG9zdEJhY2soKSYmdGhpcy5nZXRfbWVudSgpLl9wb3N0QmFja1JlZmVyZW5jZTsKfSxfY2FuRm9jdXM6ZnVuY3Rpb24oKXtyZXR1cm4oIXRoaXMuZ2V0X2lzU2VwYXJhdG9yKCkpJiZ0aGlzLmdldF9lbmFibGVkKCkmJnRoaXMuZ2V0X3Zpc2libGUoKTsKfSxfY2xlYXJTaWJsaW5nc1dpZHRoOmZ1bmN0aW9uKCl7dmFyIHk9dGhpcy5nZXRfcGFyZW50KCk7CnZhciB6PXkuZ2V0X2l0ZW1zKCk7CmZvcih2YXIgQT0wOwpBPHouZ2V0X2NvdW50KCk7CkErKyl7dmFyIHg9ei5nZXRJdGVtKEEpOwppZih4IT10aGlzKXt2YXIgQj14LmdldF9saW5rRWxlbWVudCgpOwppZihCKXtCLnN0eWxlLndpZHRoPSJhdXRvIjsKfX1pZigkdGVsZXJpay5pc1NhZmFyaSl7eS5nZXRfY2hpbGRMaXN0RWxlbWVudCgpLnN0eWxlLndpZHRoPSJhdXRvIjsKfX19LF9kb0ZvY3VzOmZ1bmN0aW9uKHkpe2lmKCF0aGlzLl9jYW5Gb2N1cygpKXtyZXR1cm47Cn10aGlzLl9lbnN1cmVDaGlsZENvbnRyb2xzKCk7CnZhciB6PXRoaXMuZ2V0X3BhcmVudCgpOwp2YXIgQj16LmdldF9vcGVuZWRJdGVtKCk7CmlmKEImJkIhPXRoaXMpe0IuX2Nsb3NlKHkpOwp9aWYoei5fc3RhdGUhPWYuUmFkTWVudUl0ZW1TdGF0ZS5PcGVuJiZ6Lm9wZW4pe3ouX29wZW4oeSk7Cn16Ll9mb2N1c2VkSXRlbT10aGlzOwp2YXIgQT10aGlzLmdldF9tZW51KCk7CkEuX2ZvY3VzZWRJdGVtPXRoaXM7CnZhciB4PXRoaXMuZ2V0X2xpbmtFbGVtZW50KCk7CmlmKCF0aGlzLmdldF9mb2N1c2VkKCkmJngpe3guZm9jdXMoKTsKfXRoaXMuc2Nyb2xsSW50b1ZpZXcoKTsKdGhpcy5nZXRfbWVudSgpLl9yYWlzZUV2ZW50KCJpdGVtRm9jdXMiLG5ldyBmLlJhZE1lbnVJdGVtRm9jdXNFdmVudEFyZ3ModGhpcyx5KSk7Cn0sX2RvQmx1cjpmdW5jdGlvbih5KXtpZih0aGlzLmdldF9pc1NlcGFyYXRvcigpKXtyZXR1cm47Cn12YXIgeD10aGlzLmdldF9saW5rRWxlbWVudCgpOwppZih0aGlzLmdldF9mb2N1c2VkKCkmJngpe3guYmx1cigpOwp9dGhpcy5nZXRfcGFyZW50KCkuX2ZvY3VzZWRJdGVtPW51bGw7CnZhciB6PXRoaXMuZ2V0X21lbnUoKTsKdmFyIEE9dGhpczsKd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtpZih6Ll9mb2N1c2VkSXRlbT09QSl7ei5fZm9jdXNlZEl0ZW09bnVsbDsKfX0sMTAwKTsKdGhpcy5nZXRfbWVudSgpLl9yYWlzZUV2ZW50KCJpdGVtQmx1ciIsbmV3IGYuUmFkTWVudUl0ZW1CbHVyRXZlbnRBcmdzKHRoaXMseSkpOwp9LF9jcmVhdGVDaGlsZENvbnRyb2xzOmZ1bmN0aW9uKCl7Zi5SYWRNZW51SXRlbS5jYWxsQmFzZU1ldGhvZCh0aGlzLCJfY3JlYXRlQ2hpbGRDb250cm9scyIpOwp0aGlzLl9pbml0aWFsaXplU2Nyb2xsZXIoKTsKfSxfb25TY3JvbGxBcnJvd01vdXNlRG93bjpmdW5jdGlvbigpe2lmKCF0aGlzLl9zY3JvbGxlcil7cmV0dXJuOwp9dGhpcy5fc2Nyb2xsZXIuY2hhbmdlU2Nyb2xsU3BlZWQoZi5TY3JvbGxlclNwZWVkLkZhc3QpOwp9LF9vblNjcm9sbEFycm93TW91c2VVcDpmdW5jdGlvbigpe2lmKCF0aGlzLl9zY3JvbGxlcil7cmV0dXJuOwp9dGhpcy5fc2Nyb2xsZXIuY2hhbmdlU2Nyb2xsU3BlZWQoZi5TY3JvbGxlclNwZWVkLlNsb3cpOwp9LF9vblNjcm9sbEFycm93TW91c2VPdmVyOmZ1bmN0aW9uKHgpe2lmKCF0aGlzLl9zY3JvbGxlcil7cmV0dXJuOwp9dmFyIHk9MTsKaWYoeD09Zi5BcnJvd1Bvc2l0aW9uLlRvcHx8eD09Zi5BcnJvd1Bvc2l0aW9uLkxlZnQpe3k9LTE7Cn12YXIgej10aGlzLmdldF9vcGVuZWRJdGVtKCk7CmlmKHope3ouY2xvc2UoKTsKfXRoaXMuX3Njcm9sbGVyLnN0YXJ0U2Nyb2xsKGYuU2Nyb2xsZXJTcGVlZC5TbG93LHkpOwp9LF9vblNjcm9sbEFycm93TW91c2VPdXQ6ZnVuY3Rpb24oKXtpZighdGhpcy5fc2Nyb2xsZXIpe3JldHVybjsKfXRoaXMuX3Njcm9sbGVyLnN0b3BTY3JvbGwoKTsKfSxfb25LZXlEb3duOmZ1bmN0aW9uKHgpe3ZhciB5PXgua2V5Q29kZT94LmtleUNvZGU6eC5yYXdFdmVudC5rZXlDb2RlOwp2YXIgej10aGlzLmdldF9tZW51KCkuZ2V0X3JpZ2h0VG9MZWZ0KCk7CnN3aXRjaCh5KXtjYXNlIFN5cy5VSS5LZXkudXA6aWYoIXope3RoaXMuX29uS2V5Ym9hcmRVcCh4KTsKfWVsc2V7dGhpcy5fb25LZXlib2FyZERvd24oeCk7Cn1icmVhazsKY2FzZSBTeXMuVUkuS2V5LmRvd246aWYoIXope3RoaXMuX29uS2V5Ym9hcmREb3duKHgpOwp9ZWxzZXt0aGlzLl9vbktleWJvYXJkVXAoeCk7Cn1icmVhazsKY2FzZSBTeXMuVUkuS2V5LmxlZnQ6aWYoIXope3RoaXMuX29uS2V5Ym9hcmRMZWZ0KHgpOwp9ZWxzZXt0aGlzLl9vbktleWJvYXJkUmlnaHQoeCk7Cn1icmVhazsKY2FzZSBTeXMuVUkuS2V5LnJpZ2h0OmlmKCF6KXt0aGlzLl9vbktleWJvYXJkUmlnaHQoeCk7Cn1lbHNle3RoaXMuX29uS2V5Ym9hcmRMZWZ0KHgpOwp9YnJlYWs7CmNhc2UgU3lzLlVJLktleS5lc2M6dGhpcy5fb25LZXlib2FyZEVzYyh4KTsKYnJlYWs7CmRlZmF1bHQ6cmV0dXJuIHRydWU7Cn14LnByZXZlbnREZWZhdWx0KCk7CnJldHVybiBmYWxzZTsKfSxfb25LZXlib2FyZFVwOmZ1bmN0aW9uKHgpe3ZhciB5PXRoaXMuX2dldFBhcmVudEZsb3coKTsKaWYoeT09Zi5JdGVtRmxvdy5WZXJ0aWNhbCl7dGhpcy5mb2N1c1ByZXZpb3VzSXRlbSh4KTsKfWVsc2V7dGhpcy5mb2N1c0xhc3RDaGlsZCh4KTsKfX0sX29uS2V5Ym9hcmREb3duOmZ1bmN0aW9uKHgpe3ZhciB5PXRoaXMuX2dldFBhcmVudEZsb3coKTsKaWYoeT09Zi5JdGVtRmxvdy5WZXJ0aWNhbCl7dGhpcy5mb2N1c05leHRJdGVtKHgpOwp9ZWxzZXt0aGlzLmZvY3VzRmlyc3RDaGlsZCh4KTsKfX0sX29uS2V5Ym9hcmRMZWZ0OmZ1bmN0aW9uKHgpe3ZhciB6PXRoaXMuX2dldFBhcmVudEZsb3coKTsKaWYoej09Zi5JdGVtRmxvdy5Ib3Jpem9udGFsKXt0aGlzLmZvY3VzUHJldmlvdXNJdGVtKHgpOwpyZXR1cm47Cn12YXIgQj10aGlzLmdldF9pdGVtcygpOwp2YXIgRD10aGlzLmdldF9ncm91cFNldHRpbmdzKCk7CmlmKEIuZ2V0X2NvdW50KCk+MCYmRC5nZXRfZXhwYW5kRGlyZWN0aW9uKCk9PWYuRXhwYW5kRGlyZWN0aW9uLkxlZnQpe3RoaXMuZm9jdXNGaXJzdENoaWxkKHgpOwpyZXR1cm47Cn12YXIgeT10aGlzLmdldF9wYXJlbnQoKTsKdmFyIEE9bnVsbDsKaWYoeS5nZXRfZ3JvdXBTZXR0aW5ncyl7QT15LmdldF9ncm91cFNldHRpbmdzKCk7Cn1pZihBJiZBLmdldF9leHBhbmREaXJlY3Rpb24oKT09Zi5FeHBhbmREaXJlY3Rpb24uUmlnaHQpe3kuX3RyYW5zZmVyRm9jdXMoeCk7CnJldHVybjsKfXZhciBDPXRoaXMuZ2V0X21lbnUoKS5nZXRfb3BlbmVkSXRlbSgpOwppZihDKXtDLmZvY3VzUHJldmlvdXNJdGVtKHgpOwp9fSxfb25LZXlib2FyZFJpZ2h0OmZ1bmN0aW9uKHgpe3ZhciB6PXRoaXMuX2dldFBhcmVudEZsb3coKTsKaWYoej09Zi5JdGVtRmxvdy5Ib3Jpem9udGFsKXt0aGlzLmZvY3VzTmV4dEl0ZW0oeCk7CnJldHVybjsKfXZhciBCPXRoaXMuZ2V0X2l0ZW1zKCk7CnZhciBEPXRoaXMuZ2V0X2dyb3VwU2V0dGluZ3MoKTsKaWYoQi5nZXRfY291bnQoKT4wJiZELmdldF9leHBhbmREaXJlY3Rpb24oKT09Zi5FeHBhbmREaXJlY3Rpb24uUmlnaHQpe3RoaXMuZm9jdXNGaXJzdENoaWxkKHgpOwpyZXR1cm47Cn12YXIgeT10aGlzLmdldF9wYXJlbnQoKTsKdmFyIEE9bnVsbDsKaWYoeS5nZXRfZ3JvdXBTZXR0aW5ncyl7QT15LmdldF9ncm91cFNldHRpbmdzKCk7Cn1pZihBJiZBLmdldF9leHBhbmREaXJlY3Rpb24oKT09Zi5FeHBhbmREaXJlY3Rpb24uTGVmdCl7eS5fdHJhbnNmZXJGb2N1cygpOwpyZXR1cm47Cn12YXIgQz10aGlzLmdldF9tZW51KCkuZ2V0X29wZW5lZEl0ZW0oKTsKaWYoQyl7Qy5mb2N1c05leHRJdGVtKHgpOwp9fSxfb25LZXlib2FyZEVzYzpmdW5jdGlvbih4KXt2YXIgeT10aGlzLmdldF9wYXJlbnQoKTsKdmFyIHo9dGhpcy5nZXRfbWVudSgpOwppZih5PT16KXt0aGlzLl9ibHVyKHgpOwp9ZWxzZXt5Ll9jbG9zZSh4KTsKeS5fdHJhbnNmZXJGb2N1cyh4KTsKfX0sX3RyYW5zZmVyRm9jdXM6ZnVuY3Rpb24oeSl7dGhpcy5fZW5zdXJlQ2hpbGRDb250cm9scygpOwp2YXIgej10aGlzLmdldF9wYXJlbnQoKTsKdmFyIEE9ei5nZXRfb3BlbmVkSXRlbSgpOwppZihBJiZBIT10aGlzKXtBLl9jbG9zZSh5KTsKfWlmKHouX3N0YXRlIT1mLlJhZE1lbnVJdGVtU3RhdGUuT3BlbiYmei5vcGVuKXt6Ll9vcGVuKHkpOwp9dmFyIHg9dGhpcy5nZXRfbGlua0VsZW1lbnQoKTsKaWYoeCl7eC5mb2N1cyh5fHxudWxsKTsKfX0sX3JlbmRlcjpmdW5jdGlvbih4KXtpZih0aGlzLl9yZW5kZXJlZENsaWVudFRlbXBsYXRlKXt0aGlzLl9yZW5kZXJDbGllbnRUZW1wbGF0ZSh4KTsKfWVsc2V7eFt4Lmxlbmd0aF09IjxsaSBjbGFzcz0nIit0aGlzLl9kZXRlcm1pbmVDc3NDbGFzcygpKyInPiI7CnRoaXMuX3JlbmRlckxpbmsoeCk7CmlmKHRoaXMuZ2V0X2ltYWdlVXJsKCl8fHRoaXMuZ2V0X2VuYWJsZUltYWdlU3ByaXRlKCkpe3RoaXMuX3JlbmRlckltYWdlKHgpOwp9eFt4Lmxlbmd0aF09IjxzcGFuIGNsYXNzPSciK20rIic+IjsKeFt4Lmxlbmd0aF09dGhpcy5nZXRfdGV4dCgpOwp4W3gubGVuZ3RoXT0iPC9zcGFuPjwvYT4iOwp0aGlzLl9yZW5kZXJDaGlsZEl0ZW1zKHgpOwppZih0aGlzLmdldF9tZW51KCkuX2VuYWJsZUl0ZW1JbWFnZXNQcmVsb2FkaW5nKXt0aGlzLl9yZW5kZXJQcmVsb2FkSW1hZ2VzKHgpOwp9eFt4Lmxlbmd0aF09IjwvbGk+IjsKfX0sX3JlbmRlckNsaWVudFRlbXBsYXRlOmZ1bmN0aW9uKHgpe3hbeC5sZW5ndGhdPSI8bGkgY2xhc3M9JyIrdGhpcy5fZGV0ZXJtaW5lQ3NzQ2xhc3MoKSsiIHJtVGVtcGxhdGUnPiI7CnhbeC5sZW5ndGhdPSI8ZGl2IGNsYXNzPSciK20rIic+IjsKeFt4Lmxlbmd0aF09dGhpcy5fcmVuZGVyZWRDbGllbnRUZW1wbGF0ZTsKeFt4Lmxlbmd0aF09IjwvZGl2PjwvbGk+IjsKfSxfcmVuZGVyQWNjZXNzS2V5OmZ1bmN0aW9uKCl7aWYodGhpcy5nZXRfaXNTZXBhcmF0b3IoKXx8dGhpcy5nZXRfdGVtcGxhdGVkKCkpe3JldHVybjsKfXZhciB4PXRoaXMuZ2V0X2xpbmtFbGVtZW50KCk7CmlmKCF4KXtyZXR1cm47Cn12YXIgeT10aGlzLmdldF9saW5rRWxlbWVudCgpLmFjY2Vzc0tleS50b0xvd2VyQ2FzZSgpOwppZigheSl7cmV0dXJuOwp9dmFyIHo9dGhpcy5nZXRfdGV4dEVsZW1lbnQoKTsKdmFyIEI9ei5pbm5lckhUTUw7CnZhciBBPUIudG9Mb3dlckNhc2UoKS5pbmRleE9mKHkpOwppZihCLnRvTG93ZXJDYXNlKCkuaW5kZXhPZigiPHU+IikhPS0xKXtyZXR1cm47Cn1pZihBPT0tMSl7cmV0dXJuOwp9ei5pbm5lckhUTUw9Qi5zdWJzdHIoMCxBKSsiPHU+IitCLnN1YnN0cihBLDEpKyI8L3U+IitCLnN1YnN0cihBKzEsQi5sZW5ndGgpOwp9LF9nZXRJc0ltYWdlT25seTpmdW5jdGlvbigpe2lmKHRoaXMuX2lzSW1hZ2VPbmx5PT09bnVsbCl7dGhpcy5faXNJbWFnZU9ubHk9dGhpcy5nZXRfaW1hZ2VFbGVtZW50KCkhPW51bGw7Cn1yZXR1cm4gdGhpcy5faXNJbWFnZU9ubHk7Cn0sX2dldEZsb3dDc3NDbGFzczpmdW5jdGlvbigpe2lmKHRoaXMuZ2V0X2dyb3VwU2V0dGluZ3MoKS5nZXRfZmxvdygpPT1mLkl0ZW1GbG93LlZlcnRpY2FsKXtyZXR1cm4gZzsKfWVsc2V7cmV0dXJuIHc7Cn19LF9pc1dlYlNlcnZpY2VDYWxsTmVlZGVkOmZ1bmN0aW9uKCl7aWYodGhpcy5faXRlbXNMb2FkaW5nKXtyZXR1cm4gZmFsc2U7Cn1yZXR1cm4oIXRoaXMuX2l0ZW1zTG9hZGVkJiZ0aGlzLmdldF9leHBhbmRNb2RlKCk9PWYuTWVudUl0ZW1FeHBhbmRNb2RlLldlYlNlcnZpY2UpOwp9LF9jcmVhdGVMb2FkaW5nSXRlbTpmdW5jdGlvbigpe3ZhciB4PXRoaXMuZ2V0X21lbnUoKS5nZXRfbG9hZGluZ1RlbXBsYXRlKCk7CmlmKHg9PT0iIil7cmV0dXJuOwp9dmFyIHk9bmV3IGYuUmFkTWVudUl0ZW0oKTsKdGhpcy5nZXRfaXRlbXMoKS5hZGQoeSk7Cnkuc2V0X3RleHQoeCk7Cn0sX3JlbW92ZUxvYWRpbmdJdGVtOmZ1bmN0aW9uKCl7aWYodGhpcy5nZXRfbWVudSgpLmdldF9sb2FkaW5nVGVtcGxhdGUoKT09PSIiKXtyZXR1cm47Cn12YXIgeD10aGlzLmdldF9pdGVtcygpLmdldEl0ZW0oMCk7CnRoaXMuZ2V0X2l0ZW1zKCkucmVtb3ZlKHgpOwp9LF9sb2FkQ2hpbGRyZW5Gcm9tV2ViU2VydmljZTpmdW5jdGlvbigpe3RoaXMuZ2V0X21lbnUoKS5fbG9hZENoaWxkcmVuRnJvbVdlYlNlcnZpY2UodGhpcyk7Cn0sX29uQ2hpbGRyZW5Mb2FkaW5nOmZ1bmN0aW9uKCl7dGhpcy5faXRlbXNMb2FkaW5nPXRydWU7CnRoaXMuX2NyZWF0ZUxvYWRpbmdJdGVtKCk7CnRoaXMuX2RvT3BlbihudWxsKTsKfSxfb25DaGlsZHJlbkxvYWRlZDpmdW5jdGlvbigpe3RoaXMuX3JlbW92ZUxvYWRpbmdJdGVtKCk7CnRoaXMuX2l0ZW1zTG9hZGVkPXRydWU7CnRoaXMuX2l0ZW1zTG9hZGluZz1mYWxzZTsKaWYodGhpcy5nZXRfaXRlbXMoKS5nZXRfY291bnQoKT4wKXt0aGlzLl91cGRhdGVDb2x1bW5XcmFwU2l6ZSgpOwp0aGlzLl9zbGlkZS51cGRhdGVTaXplKCk7CnZhciB4PXYodGhpcy5nZXRfZWxlbWVudCgpKS5oYXNDbGFzcygicm1UZW1wbGF0ZSIpOwppZih0aGlzLl9ob3ZlcmVkfHx4KXt0aGlzLl9kb09wZW4obnVsbCk7Cn19fSxfb25DaGlsZHJlbkxvYWRpbmdFcnJvcjpmdW5jdGlvbigpe3RoaXMuX2Nsb3NlKG51bGwpOwp0aGlzLl9yZW1vdmVMb2FkaW5nSXRlbSgpOwp0aGlzLl9pdGVtc0xvYWRlZD1mYWxzZTsKdGhpcy5faXRlbXNMb2FkaW5nPWZhbHNlOwp9LF9hZGp1c3RTaWJsaW5nc1dpZHRoOmZ1bmN0aW9uKHkpe3ZhciB4PXRoaXMuZ2V0X3BhcmVudCgpOwppZih4KXt0aGlzLl9jbGVhclNpYmxpbmdzV2lkdGgoKTsKZi5SYWRNZW51Ll9hZGp1c3RDaGlsZHJlbldpZHRoKHgseSk7Cn19LF9yZW1vdmVDaGlsZExpc3RDb3JuZXJzOmZ1bmN0aW9uKCl7dmFyIHg9dGhpcy5nZXRfbWVudSgpOwppZih4JiYoeC5nZXRfZW5hYmxlUm91bmRlZENvcm5lcnMoKXx8eC5nZXRfZW5hYmxlU2hhZG93cygpKSl7Zi5SYWRNZW51Ll9yZW1vdmVDaGlsZExpc3RDb3JuZXJzKHRoaXMpOwp9fSxfcmVtb3ZlU2Nyb2xsV3JhcENvbnRhaW5lcjpmdW5jdGlvbigpe3ZhciB4PXRoaXMuZ2V0X21lbnUoKTsKaWYoeCYmKCh4LmdldF9lbmFibGVSb3VuZGVkQ29ybmVycygpJiZ0aGlzLl9yb3VuZGVkQ29ybmVyc1JlbmRlcmVkKXx8KHguZ2V0X2VuYWJsZVNoYWRvd3MoKSYmdGhpcy5fc2hhZG93c1JlbmRlcmVkKSkpe2YuUmFkTWVudS5fcmVtb3ZlU2Nyb2xsV3JhcENvbnRhaW5lcih0aGlzKTsKfX0sX2Vuc3VyZVJvdW5kZWRDb3JuZXJzOmZ1bmN0aW9uKCl7aWYodGhpcy5fcm91bmRlZENvcm5lcnNSZW5kZXJlZCl7cmV0dXJuOwp9dmFyIHg9dGhpcy5nZXRfbWVudSgpOwppZih4JiZ4LmdldF9lbmFibGVSb3VuZGVkQ29ybmVycygpKXt0aGlzLl9yb3VuZGVkQ29ybmVyc1JlbmRlcmVkPXRydWU7CmYuUmFkTWVudS5fcmVuZGVyQ29ybmVyRWxlbWVudHModGhpcyk7Cn19LF9lbnN1cmVTaGFkb3dzOmZ1bmN0aW9uKCl7aWYodGhpcy5fc2hhZG93c1JlbmRlcmVkKXtyZXR1cm47Cn12YXIgeD10aGlzLmdldF9tZW51KCk7CmlmKHgmJnguZ2V0X2VuYWJsZVNoYWRvd3MoKSl7dGhpcy5fc2hhZG93c1JlbmRlcmVkPXRydWU7CmYuUmFkTWVudS5fcmVuZGVyQ29ybmVyRWxlbWVudHModGhpcywic2hhZG93Iik7Cn19LF9pc1Jvb3RMaW5rOmZ1bmN0aW9uKCl7aWYodGhpcy5nZXRfbWVudSgpKXtpZih0aGlzLmdldF9sZXZlbCgpPjApe3JldHVybiBmYWxzZTsKfWlmKCJnZXRfY29udGV4dE1lbnVFbGVtZW50IiBpbiB0aGlzLmdldF9tZW51KCkpe3JldHVybiBmYWxzZTsKfXJldHVybiB0cnVlOwp9fX07CmYuUmFkTWVudUl0ZW0ucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuUmFkTWVudUl0ZW0iLGYuQ29udHJvbEl0ZW0pOwp9KSgkdGVsZXJpay4kKTsKVHlwZS5yZWdpc3Rlck5hbWVzcGFjZSgiVGVsZXJpay5XZWIuVUkiKTsKVGVsZXJpay5XZWIuVUkuUmFkTWVudUl0ZW1Db2xsZWN0aW9uPWZ1bmN0aW9uKGEpe1RlbGVyaWsuV2ViLlVJLlJhZE1lbnVJdGVtQ29sbGVjdGlvbi5pbml0aWFsaXplQmFzZSh0aGlzLFthXSk7Cn07ClRlbGVyaWsuV2ViLlVJLlJhZE1lbnVJdGVtQ29sbGVjdGlvbi5wcm90b3R5cGU9e307ClRlbGVyaWsuV2ViLlVJLlJhZE1lbnVJdGVtQ29sbGVjdGlvbi5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5SYWRNZW51SXRlbUNvbGxlY3Rpb24iLFRlbGVyaWsuV2ViLlVJLkNvbnRyb2xJdGVtQ29sbGVjdGlvbik7ClR5cGUucmVnaXN0ZXJOYW1lc3BhY2UoIlRlbGVyaWsuV2ViLlVJIik7CihmdW5jdGlvbigpe3ZhciBhPSR0ZWxlcmlrLiQsYj1UZWxlcmlrLldlYi5VSTsKYS5yZWdpc3RlckVudW0oYiwiSXRlbUZsb3ciLHtWZXJ0aWNhbDowLEhvcml6b250YWw6MX0pOwphLnJlZ2lzdGVyRW51bShiLCJFeHBhbmREaXJlY3Rpb24iLHtBdXRvOjAsVXA6MSxEb3duOjIsTGVmdDozLFJpZ2h0OjR9KTsKYS5yZWdpc3RlckVudW0oYiwiTWVudVJlcGVhdERpcmVjdGlvbiIse1ZlcnRpY2FsOjAsSG9yaXpvbnRhbDoxfSk7CmIuUmFkTWVudUl0ZW1Hcm91cFNldHRpbmdzPWZ1bmN0aW9uKGQsYyl7aWYoYyl7Zm9yKHZhciBlIGluIGMpe3RoaXNbZV09Y1tlXTsKfX1mb3IodmFyIGUgaW4gZCl7dmFyIGY9dGhpc1sic2V0XyIrZV07CmlmKGYpe2YuY2FsbCh0aGlzLGRbZV0pOwp9fX07CmEucmVnaXN0ZXJDb250cm9sUHJvcGVydGllcyhiLlJhZE1lbnVJdGVtR3JvdXBTZXR0aW5ncyx7ZmxvdzpiLkl0ZW1GbG93LlZlcnRpY2FsLGV4cGFuZERpcmVjdGlvbjpiLkV4cGFuZERpcmVjdGlvbi5BdXRvLG9mZnNldFg6MCxvZmZzZXRZOjAsd2lkdGg6bnVsbCxoZWlnaHQ6bnVsbCxyZXBlYXREaXJlY3Rpb246Yi5NZW51UmVwZWF0RGlyZWN0aW9uLlZlcnRpY2FsLHJlcGVhdENvbHVtbnM6MX0pOwpiLlJhZE1lbnVJdGVtR3JvdXBTZXR0aW5ncy5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5SYWRNZW51SXRlbUdyb3VwU2V0dGluZ3MiKTsKfSkoKTsKKGZ1bmN0aW9uKCl7dmFyIGE9JHRlbGVyaWsuJDsKdmFyIGI9VGVsZXJpay5XZWIuVUk7CmIuTWVudUl0ZW1TY3JvbGxlcj1mdW5jdGlvbihkLGMpe3RoaXMuX2xlZnRBcnJvd0Nzc0NsYXNzPSJybUxlZnRBcnJvdyI7CnRoaXMuX3JpZ2h0QXJyb3dDc3NDbGFzcz0icm1SaWdodEFycm93IjsKdGhpcy5fdG9wQXJyb3dDc3NDbGFzcz0icm1Ub3BBcnJvdyI7CnRoaXMuX2JvdHRvbUFycm93Q3NzQ2xhc3M9InJtQm90dG9tQXJyb3ciOwp0aGlzLl9sZWZ0QXJyb3dEaXNhYmxlZENzc0NsYXNzPSJybUxlZnRBcnJvd0Rpc2FibGVkIjsKdGhpcy5fcmlnaHRBcnJvd0Rpc2FibGVkQ3NzQ2xhc3M9InJtUmlnaHRBcnJvd0Rpc2FibGVkIjsKdGhpcy5fdG9wQXJyb3dEaXNhYmxlZENzc0NsYXNzPSJybVRvcEFycm93RGlzYWJsZWQiOwp0aGlzLl9ib3R0b21BcnJvd0Rpc2FibGVkQ3NzQ2xhc3M9InJtQm90dG9tQXJyb3dEaXNhYmxlZCI7CnRoaXMuX2Fycm93c1pJbmRleD0yMDAwOwp0aGlzLl9zY3JvbGxlcj1udWxsOwp0aGlzLl9jaGlsZExpc3RFbGVtZW50PWQ7CnRoaXMuX3Njcm9sbEVsZW1lbnQ9bnVsbDsKdGhpcy5fb3JpZW50YXRpb249bnVsbDsKdGhpcy5fbWluU2Nyb2xsUG9zaXRpb249bnVsbDsKdGhpcy5faXRlbUZsb3c9YzsKdGhpcy5fc2Nyb2xsZXJQb3NpdGlvbkNoYW5nZWREZWxlZ2F0ZT1udWxsOwp0aGlzLl9kZWNBcnJvdz1udWxsOwp0aGlzLl9pbmNBcnJvdz1udWxsOwp0aGlzLl9ydGw9Yi5SYWRNZW51Ll9yZXF1aXJlc1JpZ2h0VG9MZWZ0KGQpOwp9OwpiLk1lbnVJdGVtU2Nyb2xsZXIucHJvdG90eXBlPXtpbml0aWFsaXplOmZ1bmN0aW9uKCl7dGhpcy5fY2hpbGRMaXN0RWxlbWVudC5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiOwp0aGlzLl9zY3JvbGxFbGVtZW50PXRoaXMuX2NoaWxkTGlzdEVsZW1lbnQucGFyZW50Tm9kZTsKdGhpcy5fb3JpZW50YXRpb249Yi5TY3JvbGxlck9yaWVudGF0aW9uLkhvcml6b250YWw7CmlmKHRoaXMuX2l0ZW1GbG93PT1iLkl0ZW1GbG93LlZlcnRpY2FsKXt0aGlzLl9vcmllbnRhdGlvbj1iLlNjcm9sbGVyT3JpZW50YXRpb24uVmVydGljYWw7Cn10aGlzLl9zY3JvbGxlcj1uZXcgYi5TY3JvbGxlcih0aGlzLl9jaGlsZExpc3RFbGVtZW50LHRoaXMuX3Njcm9sbEVsZW1lbnQsdGhpcy5fb3JpZW50YXRpb24pOwp0aGlzLl9zY3JvbGxlci5pbml0aWFsaXplKCk7CnRoaXMuX2NyZWF0ZUFycm93cygpOwp0aGlzLl9zY3JvbGxlci5yZXNldFN0YXRlKCk7CnRoaXMuX3Njcm9sbGVyUG9zaXRpb25DaGFuZ2VkRGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9vblNjcm9sbGVyUG9zaXRpb25DaGFuZ2VkKTsKdGhpcy5fc2Nyb2xsZXIuYWRkX3Bvc2l0aW9uQ2hhbmdlZCh0aGlzLl9zY3JvbGxlclBvc2l0aW9uQ2hhbmdlZERlbGVnYXRlKTsKfSxkaXNwb3NlOmZ1bmN0aW9uKCl7aWYodGhpcy5fc2Nyb2xsZXIpe3RoaXMuX3Njcm9sbGVyLmRpc3Bvc2UoKTsKdGhpcy5fc2Nyb2xsZXI9bnVsbDsKdmFyIGM9YSh0aGlzLl9kZWNBcnJvdykuYWRkKGEodGhpcy5faW5jQXJyb3cpKTsKaWYoJHRlbGVyaWsuaXNJRSl7Yy51bmJpbmQoIi5tZW51U2Nyb2xsZXIiKTsKfWMucmVtb3ZlKCk7Cn10aGlzLl9zY3JvbGxlclBvc2l0aW9uQ2hhbmdlZERlbGVnYXRlPW51bGw7Cn0sdXBkYXRlU3RhdGU6ZnVuY3Rpb24oKXt0aGlzLl91cGRhdGVTY3JvbGxpbmdMaW1pdHMoKTsKdGhpcy5fdXBkYXRlQXJyb3dzKCk7Cn0scmVzZXRTdGF0ZTpmdW5jdGlvbigpe3RoaXMuX3Njcm9sbGVyLnJlc2V0U3RhdGUoKTsKfSxzdGFydFNjcm9sbDpmdW5jdGlvbihjLGQpe3RoaXMuX3Njcm9sbGVyLnN0YXJ0U2Nyb2xsKGMsZCk7Cn0sY2hhbmdlU2Nyb2xsU3BlZWQ6ZnVuY3Rpb24oYyl7dGhpcy5fc2Nyb2xsZXIuY2hhbmdlU2Nyb2xsU3BlZWQoYyk7Cn0sc3RvcFNjcm9sbDpmdW5jdGlvbigpe3RoaXMuX3Njcm9sbGVyLnN0b3BTY3JvbGwoKTsKfSxzY3JvbGxUb01heFBvc2l0aW9uOmZ1bmN0aW9uKCl7dGhpcy5fc2Nyb2xsZXIuc2Nyb2xsVG9NYXhQb3NpdGlvbigpOwp9LHNjcm9sbFJlbGF0aXZlOmZ1bmN0aW9uKGMpe3RoaXMuc2V0X2N1cnJlbnRQb3NpdGlvbih0aGlzLmdldF9jdXJyZW50UG9zaXRpb24oKStjKTsKfSxnZXRfY3VycmVudFBvc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Njcm9sbGVyLl9jdXJyZW50UG9zaXRpb247Cn0sc2V0X2N1cnJlbnRQb3NpdGlvbjpmdW5jdGlvbihjKXt0aGlzLl9zY3JvbGxlci5fc2Nyb2xsVG8oTWF0aC5tYXgoTWF0aC5taW4odGhpcy5fc2Nyb2xsZXIuX21heFBvc2l0aW9uLGMpLHRoaXMuX3Njcm9sbGVyLl9taW5Qb3NpdGlvbikpOwp9LF9jcmVhdGVBcnJvd3M6ZnVuY3Rpb24oKXt0aGlzLl9kZWNBcnJvdz10aGlzLl9jcmVhdGVBcnJvd0RvbUVsZW1lbnQoKTsKdGhpcy5faW5jQXJyb3c9dGhpcy5fY3JlYXRlQXJyb3dEb21FbGVtZW50KCk7CmlmKHRoaXMuX29yaWVudGF0aW9uPT1iLlNjcm9sbGVyT3JpZW50YXRpb24uVmVydGljYWwpe3RoaXMuX2RlY0Fycm93LnN0eWxlLmxlZnQ9IjBweCI7CnRoaXMuX2RlY0Fycm93LnN0eWxlLnRvcD0iMHB4IjsKdGhpcy5faW5jQXJyb3cuc3R5bGUubGVmdD0iMHB4IjsKdGhpcy5faW5jQXJyb3cuc3R5bGUuYm90dG9tPSIwcHgiOwp9ZWxzZXt0aGlzLl9kZWNBcnJvdy5zdHlsZS50b3A9IjBweCI7CnRoaXMuX2RlY0Fycm93LnN0eWxlLmxlZnQ9Ii0xcHgiOwp0aGlzLl9pbmNBcnJvdy5zdHlsZS50b3A9IjBweCI7CnRoaXMuX2luY0Fycm93LnN0eWxlLnJpZ2h0PSItMXB4IjsKfX0sX2NyZWF0ZUFycm93RG9tRWxlbWVudDpmdW5jdGlvbigpe3ZhciBjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTsKYy5ocmVmPSIjIjsKYy5zdHlsZS56SW5kZXg9dGhpcy5fYXJyb3dzWkluZGV4OwpjLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCImbmJzcDsiKSk7CmlmKCR0ZWxlcmlrLmlzSUUpe2EoYykuYmluZCgiZHJhZ3N0YXJ0Lm1lbnVTY3JvbGxlciIsZnVuY3Rpb24oKXtyZXR1cm4gZmFsc2U7Cn0pOwp9dGhpcy5fc2Nyb2xsRWxlbWVudC5hcHBlbmRDaGlsZChjKTsKcmV0dXJuIGM7Cn0sX3VwZGF0ZUFycm93czpmdW5jdGlvbigpe3ZhciBjPXRoaXMuX3Njcm9sbGVyLmlzQXRNaW5Qb3NpdGlvbigpOwp2YXIgZD10aGlzLl9zY3JvbGxlci5pc0F0TWF4UG9zaXRpb24oKTsKaWYoYyl7dGhpcy5fZGVjQXJyb3cuZGlzYWJsZWQ9ImRpc2FibGVkIjsKdGhpcy5fc2V0RWxlbWVudENzc0NsYXNzKHRoaXMuX2RlY0Fycm93LHRoaXMuX2dldERlY0Fycm93Q3NzQ2xhc3MoZmFsc2UpKTsKfWVsc2V7dGhpcy5fZGVjQXJyb3cuZGlzYWJsZWQ9IiI7CnRoaXMuX3NldEVsZW1lbnRDc3NDbGFzcyh0aGlzLl9kZWNBcnJvdyx0aGlzLl9nZXREZWNBcnJvd0Nzc0NsYXNzKHRydWUpKTsKfWlmKGQpe3RoaXMuX2luY0Fycm93LmRpc2FibGVkPSJkaXNhYmxlZCI7CnRoaXMuX3NldEVsZW1lbnRDc3NDbGFzcyh0aGlzLl9pbmNBcnJvdyx0aGlzLl9nZXRJbmNBcnJvd0Nzc0NsYXNzKGZhbHNlKSk7Cn1lbHNle3RoaXMuX2luY0Fycm93LmRpc2FibGVkPSIiOwp0aGlzLl9zZXRFbGVtZW50Q3NzQ2xhc3ModGhpcy5faW5jQXJyb3csdGhpcy5fZ2V0SW5jQXJyb3dDc3NDbGFzcyh0cnVlKSk7Cn19LF91cGRhdGVTY3JvbGxpbmdMaW1pdHM6ZnVuY3Rpb24oKXt2YXIgYz0wOwp2YXIgZj0wOwp2YXIgZD0wOwppZih0aGlzLl9vcmllbnRhdGlvbj09Yi5TY3JvbGxlck9yaWVudGF0aW9uLlZlcnRpY2FsKXtjPXRoaXMuX2NoaWxkTGlzdEVsZW1lbnQub2Zmc2V0SGVpZ2h0LXRoaXMuX3Njcm9sbEVsZW1lbnQub2Zmc2V0SGVpZ2h0OwpmPXRoaXMuX2RlY0Fycm93Lm9mZnNldEhlaWdodDsKZD10aGlzLl9pbmNBcnJvdy5vZmZzZXRIZWlnaHQ7Cn1lbHNle2M9dGhpcy5fY2hpbGRMaXN0RWxlbWVudC5vZmZzZXRXaWR0aC10aGlzLl9zY3JvbGxFbGVtZW50Lm9mZnNldFdpZHRoOwpmPXRoaXMuX2RlY0Fycm93Lm9mZnNldFdpZHRoOwpkPXRoaXMuX2luY0Fycm93Lm9mZnNldFdpZHRoOwp9dmFyIGU9MDsKdmFyIGc9YzsKaWYodGhpcy5fcnRsJiYkdGVsZXJpay5pc0lFOCl7ZT0tYzsKZz0wOwp9dGhpcy5fc2Nyb2xsZXIuc2V0U2Nyb2xsaW5nTGltaXRzKGUsZyk7Cn0sX2dldERlY0Fycm93Q3NzQ2xhc3M6ZnVuY3Rpb24oYyl7aWYodGhpcy5fb3JpZW50YXRpb249PWIuU2Nyb2xsZXJPcmllbnRhdGlvbi5WZXJ0aWNhbCl7cmV0dXJuIGM/dGhpcy5fdG9wQXJyb3dDc3NDbGFzczp0aGlzLl90b3BBcnJvd0Rpc2FibGVkQ3NzQ2xhc3M7Cn1lbHNle3JldHVybiBjP3RoaXMuX2xlZnRBcnJvd0Nzc0NsYXNzOnRoaXMuX2xlZnRBcnJvd0Rpc2FibGVkQ3NzQ2xhc3M7Cn19LF9nZXRJbmNBcnJvd0Nzc0NsYXNzOmZ1bmN0aW9uKGMpe2lmKHRoaXMuX29yaWVudGF0aW9uPT1iLlNjcm9sbGVyT3JpZW50YXRpb24uVmVydGljYWwpe3JldHVybiBjP3RoaXMuX2JvdHRvbUFycm93Q3NzQ2xhc3M6dGhpcy5fYm90dG9tQXJyb3dEaXNhYmxlZENzc0NsYXNzOwp9ZWxzZXtyZXR1cm4gYz90aGlzLl9yaWdodEFycm93Q3NzQ2xhc3M6dGhpcy5fcmlnaHRBcnJvd0Rpc2FibGVkQ3NzQ2xhc3M7Cn19LF9zZXRFbGVtZW50Q3NzQ2xhc3M6ZnVuY3Rpb24oYyxlKXt2YXIgZD1jLmNsYXNzTmFtZTsKaWYoZCE9ZSl7Yy5jbGFzc05hbWU9ZTsKfX0sX29uU2Nyb2xsZXJQb3NpdGlvbkNoYW5nZWQ6ZnVuY3Rpb24oYyxkKXt0aGlzLl91cGRhdGVBcnJvd3MoKTsKfX07CmIuTWVudUl0ZW1TY3JvbGxlci5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5NZW51SXRlbVNjcm9sbGVyIixudWxsLFN5cy5JRGlzcG9zYWJsZSk7Cn0pKCk7Cg0KLyogRU5EIFRlbGVyaWsuV2ViLlVJLk1lbnUuUmFkTWVudVNjcmlwdHMuanMgKi8NCi8qIFNUQVJUIFRlbGVyaWsuV2ViLlVJLk1lbnUuQ29udGV4dE1lbnUuUmFkQ29udGV4dE1lbnVTY3JpcHRzLmpzICovDQpUZWxlcmlrLldlYi5VSS5SYWRDb250ZXh0TWVudUV2ZW50QXJncz1mdW5jdGlvbihhKXtUZWxlcmlrLldlYi5VSS5SYWRDb250ZXh0TWVudUV2ZW50QXJncy5pbml0aWFsaXplQmFzZSh0aGlzKTsKdGhpcy5fZG9tRXZlbnQ9YXx8bnVsbDsKfTsKVGVsZXJpay5XZWIuVUkuUmFkQ29udGV4dE1lbnVFdmVudEFyZ3MucHJvdG90eXBlPXtnZXRfZG9tRXZlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZG9tRXZlbnQ7Cn19OwpUZWxlcmlrLldlYi5VSS5SYWRDb250ZXh0TWVudUV2ZW50QXJncy5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5SYWRDb250ZXh0TWVudUV2ZW50QXJncyIsU3lzLkV2ZW50QXJncyk7ClRlbGVyaWsuV2ViLlVJLlJhZENvbnRleHRNZW51U2hvd25FdmVudEFyZ3M9ZnVuY3Rpb24oYixhKXtUZWxlcmlrLldlYi5VSS5SYWRDb250ZXh0TWVudVNob3duRXZlbnRBcmdzLmluaXRpYWxpemVCYXNlKHRoaXMpOwp0aGlzLl90YXJnZXRFbGVtZW50PWI7CnRoaXMuX2RvbUV2ZW50PWF8fG51bGw7Cn07ClRlbGVyaWsuV2ViLlVJLlJhZENvbnRleHRNZW51U2hvd25FdmVudEFyZ3MucHJvdG90eXBlPXtnZXRfdGFyZ2V0RWxlbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90YXJnZXRFbGVtZW50Owp9LGdldF9kb21FdmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kb21FdmVudDsKfX07ClRlbGVyaWsuV2ViLlVJLlJhZENvbnRleHRNZW51U2hvd25FdmVudEFyZ3MucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuUmFkQ29udGV4dE1lbnVTaG93bkV2ZW50QXJncyIsU3lzLkV2ZW50QXJncyk7ClRlbGVyaWsuV2ViLlVJLlJhZENvbnRleHRNZW51Q2FuY2VsRXZlbnRBcmdzPWZ1bmN0aW9uKGIsYSl7VGVsZXJpay5XZWIuVUkuUmFkQ29udGV4dE1lbnVDYW5jZWxFdmVudEFyZ3MuaW5pdGlhbGl6ZUJhc2UodGhpcyk7CnRoaXMuX3RhcmdldEVsZW1lbnQ9YjsKdGhpcy5fZG9tRXZlbnQ9YTsKfTsKVGVsZXJpay5XZWIuVUkuUmFkQ29udGV4dE1lbnVDYW5jZWxFdmVudEFyZ3MucHJvdG90eXBlPXtnZXRfdGFyZ2V0RWxlbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90YXJnZXRFbGVtZW50Owp9LGdldF9kb21FdmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kb21FdmVudDsKfX07ClRlbGVyaWsuV2ViLlVJLlJhZENvbnRleHRNZW51Q2FuY2VsRXZlbnRBcmdzLnJlZ2lzdGVyQ2xhc3MoIlRlbGVyaWsuV2ViLlVJLlJhZENvbnRleHRNZW51Q2FuY2VsRXZlbnRBcmdzIixTeXMuQ2FuY2VsRXZlbnRBcmdzKTsKVGVsZXJpay5XZWIuVUkuUmFkQ29udGV4dE1lbnVTaG93aW5nRXZlbnRBcmdzPWZ1bmN0aW9uKGIsYSl7VGVsZXJpay5XZWIuVUkuUmFkQ29udGV4dE1lbnVTaG93aW5nRXZlbnRBcmdzLmluaXRpYWxpemVCYXNlKHRoaXMsW2IsYV0pOwp9OwpUZWxlcmlrLldlYi5VSS5SYWRDb250ZXh0TWVudVNob3dpbmdFdmVudEFyZ3MucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuUmFkQ29udGV4dE1lbnVTaG93aW5nRXZlbnRBcmdzIixUZWxlcmlrLldlYi5VSS5SYWRDb250ZXh0TWVudUNhbmNlbEV2ZW50QXJncyk7ClRlbGVyaWsuV2ViLlVJLlJhZENvbnRleHRNZW51SXRlbUV2ZW50QXJncz1mdW5jdGlvbihhLGMsYil7VGVsZXJpay5XZWIuVUkuUmFkQ29udGV4dE1lbnVJdGVtRXZlbnRBcmdzLmluaXRpYWxpemVCYXNlKHRoaXMsW2EsYl0pOwp0aGlzLl90YXJnZXRFbGVtZW50PWM7Cn07ClRlbGVyaWsuV2ViLlVJLlJhZENvbnRleHRNZW51SXRlbUV2ZW50QXJncy5wcm90b3R5cGU9e2dldF90YXJnZXRFbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RhcmdldEVsZW1lbnQ7Cn19OwpUZWxlcmlrLldlYi5VSS5SYWRDb250ZXh0TWVudUl0ZW1FdmVudEFyZ3MucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuUmFkQ29udGV4dE1lbnVJdGVtRXZlbnRBcmdzIixUZWxlcmlrLldlYi5VSS5SYWRNZW51SXRlbUV2ZW50QXJncyk7ClRlbGVyaWsuV2ViLlVJLlJhZENvbnRleHRNZW51SXRlbUNhbmNlbEV2ZW50QXJncz1mdW5jdGlvbihhLGMsYil7VGVsZXJpay5XZWIuVUkuUmFkQ29udGV4dE1lbnVJdGVtQ2FuY2VsRXZlbnRBcmdzLmluaXRpYWxpemVCYXNlKHRoaXMsW2EsYl0pOwp0aGlzLl90YXJnZXRFbGVtZW50PWM7Cn07ClRlbGVyaWsuV2ViLlVJLlJhZENvbnRleHRNZW51SXRlbUNhbmNlbEV2ZW50QXJncy5wcm90b3R5cGU9e2dldF90YXJnZXRFbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RhcmdldEVsZW1lbnQ7Cn19OwpUZWxlcmlrLldlYi5VSS5SYWRDb250ZXh0TWVudUl0ZW1DYW5jZWxFdmVudEFyZ3MucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuUmFkQ29udGV4dE1lbnVJdGVtQ2FuY2VsRXZlbnRBcmdzIixUZWxlcmlrLldlYi5VSS5SYWRNZW51SXRlbUNhbmNlbEV2ZW50QXJncyk7CihmdW5jdGlvbigpe3ZhciBhPSR0ZWxlcmlrLiQ7CnZhciBiPVRlbGVyaWsuV2ViLlVJOwpUeXBlLnJlZ2lzdGVyTmFtZXNwYWNlKCJUZWxlcmlrLldlYi5VSSIpOwpiLkNvbnRleHRNZW51VGFyZ2V0VHlwZT1mdW5jdGlvbigpe3Rocm93IEVycm9yLm5vdEltcGxlbWVudGVkKCk7Cn07CmIuQ29udGV4dE1lbnVUYXJnZXRUeXBlLnByb3RvdHlwZT17Q29udHJvbDowLEVsZW1lbnQ6MSxUYWdOYW1lOjIsRG9jdW1lbnQ6M307CmIuQ29udGV4dE1lbnVUYXJnZXRUeXBlLnJlZ2lzdGVyRW51bSgiVGVsZXJpay5XZWIuVUkuQ29udGV4dE1lbnVUYXJnZXRUeXBlIik7CmIuUmFkQ29udGV4dE1lbnU9ZnVuY3Rpb24oYyl7Yi5SYWRDb250ZXh0TWVudS5pbml0aWFsaXplQmFzZSh0aGlzLFtjXSk7CnRoaXMuX2VuYWJsZVNlbGVjdGlvbj1mYWxzZTsKdGhpcy5fdGFyZ2V0cz1bXTsKdGhpcy5fdGFyZ2V0RWxlbWVudHM9bnVsbDsKdGhpcy5fc2hvd249ZmFsc2U7CnRoaXMuX3Njcm9sbFdyYXBFbGVtZW50PW51bGw7CnRoaXMuX3Njcm9sbGVyPW51bGw7CnRoaXMuX2FuaW1hdGVkRWxlbWVudD1udWxsOwp0aGlzLl9zbGlkZT1udWxsOwp0aGlzLl9jb2xsYXBzZUFuaW1hdGlvbkVuZGVkRGVsZWdhdGU9bnVsbDsKdGhpcy5fZGV0YWNoZWQ9ZmFsc2U7CnRoaXMuX2N1cnJlbnRUYXJnZXQ9bnVsbDsKdGhpcy5fZmxvdz1iLkl0ZW1GbG93LlZlcnRpY2FsOwp9OwpiLlJhZENvbnRleHRNZW51LmNvbnRleHRNZW51cz17fTsKYi5SYWRDb250ZXh0TWVudS5oaWRlQWxsPWZ1bmN0aW9uKCl7Zm9yKHZhciBjIGluIGIuUmFkQ29udGV4dE1lbnUuY29udGV4dE1lbnVzKXtiLlJhZENvbnRleHRNZW51LmNvbnRleHRNZW51c1tjXS5oaWRlKCk7Cn19OwpiLlJhZENvbnRleHRNZW51Ll9nZXRBbGxIaWRkZW49ZnVuY3Rpb24oKXtmb3IodmFyIGMgaW4gYi5SYWRDb250ZXh0TWVudS5jb250ZXh0TWVudXMpe2lmKGIuUmFkQ29udGV4dE1lbnUuY29udGV4dE1lbnVzW2NdLl9zaG93bil7cmV0dXJuIGZhbHNlOwp9fXJldHVybiB0cnVlOwp9OwpiLlJhZENvbnRleHRNZW51LnByb3RvdHlwZT17aW5pdGlhbGl6ZTpmdW5jdGlvbigpe3RoaXMuZ2V0X2VsZW1lbnQoKS5zdHlsZS5kaXNwbGF5PSJibG9jayI7CnRoaXMuZ2V0X2VsZW1lbnQoKS5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iOwp0aGlzLl9nZXRDb250ZXh0TWVudUVsZW1lbnQoKS5zdHlsZS5kaXNwbGF5PSJibG9jayI7CnRoaXMuX2dldENvbnRleHRNZW51RWxlbWVudCgpLnN0eWxlLnZpc2liaWxpdHk9ImhpZGRlbiI7CmIuUmFkQ29udGV4dE1lbnUuY2FsbEJhc2VNZXRob2QodGhpcywiaW5pdGlhbGl6ZSIpOwp0aGlzLl9nZXRDb250ZXh0TWVudUVsZW1lbnQoKS5zdHlsZS5kaXNwbGF5PSJub25lIjsKdGhpcy5fZ2V0Q29udGV4dE1lbnVFbGVtZW50KCkuc3R5bGUudmlzaWJpbGl0eT0idmlzaWJsZSI7CnRoaXMuX2dldENvbnRleHRNZW51RWxlbWVudCgpLmlkPXRoaXMuZ2V0X2lkKCkrIl9kZXRhY2hlZCI7CnRoaXMuZ2V0X2VsZW1lbnQoKS5zdHlsZS5kaXNwbGF5PSJub25lIjsKdGhpcy5nZXRfZWxlbWVudCgpLnN0eWxlLnZpc2liaWxpdHk9InZpc2libGUiOwp0aGlzLl9nZXRDb250ZXh0TWVudUVsZW1lbnQoKS5zdHlsZS56SW5kZXg9dGhpcy5fb3JpZ2luYWxaSW5kZXg7CmlmKCF0aGlzLmdldF9jaGlsZExpc3RFbGVtZW50KCkpe3RoaXMuX2NyZWF0ZUNoaWxkTGlzdEVsZW1lbnQoKTsKfXRoaXMuZ2V0X2NoaWxkTGlzdEVsZW1lbnQoKS5zdHlsZS5jc3NGbG9hdD0ibGVmdCI7CmIuUmFkQ29udGV4dE1lbnUuY29udGV4dE1lbnVzW3RoaXMuZ2V0X2lkKCldPXRoaXM7CnRoaXMuX2VsZW1lbnRDb250ZXh0TWVudT1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX2VsZW1lbnRDb250ZXh0TWVudSk7CnRoaXMuX2F0dGFjaFNob3dIYW5kbGVycygpOwp0aGlzLl9kb2N1bWVudENsaWNrSGFuZGxlcj1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX2RvY3VtZW50Q2xpY2tIYW5kbGVyKTsKJHRlbGVyaWsuYWRkSGFuZGxlcihkb2N1bWVudCwiY2xpY2siLHRoaXMuX2RvY3VtZW50Q2xpY2tIYW5kbGVyKTsKdGhpcy5faXRlbUNsaWNrZWRIYW5kbGVyPUZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5faXRlbUNsaWNrZWRIYW5kbGVyKTsKdGhpcy5hZGRfaXRlbUNsaWNrZWQodGhpcy5faXRlbUNsaWNrZWRIYW5kbGVyKTsKdGhpcy5faW5pdGlhbGl6ZUFuaW1hdGlvbigpOwp0aGlzLl9pbml0aWFsaXplU2Nyb2xsZXIoKTsKfSxkaXNwb3NlOmZ1bmN0aW9uKCl7aWYodGhpcy5fZGV0YWNoZWQpe3RoaXMuYXR0YWNoQ29udGV4dE1lbnUoKTsKfSR0ZWxlcmlrLnJlbW92ZUhhbmRsZXIoZG9jdW1lbnQsImNsaWNrIix0aGlzLl9kb2N1bWVudENsaWNrSGFuZGxlcik7CmlmKFN5cyYmU3lzLldlYkZvcm1zKXt2YXIgYz1TeXMuV2ViRm9ybXMuUGFnZVJlcXVlc3RNYW5hZ2VyLmdldEluc3RhbmNlKCk7CmlmKGMmJmMuZ2V0X2lzSW5Bc3luY1Bvc3RCYWNrKCkpeyR0ZWxlcmlrLmRpc3Bvc2VFbGVtZW50KHRoaXMuX2dldENvbnRleHRNZW51RWxlbWVudCgpKTsKfX10aGlzLl9kZXRhY2hTaG93SGFuZGxlcnMoKTsKdGhpcy5fdGFyZ2V0RWxlbWVudHM9bnVsbDsKdGhpcy5fY29udGV4dE1lbnVFbGVtZW50PW51bGw7CmlmKHRoaXMuX2NvbGxhcHNlQW5pbWF0aW9uRW5kZWREZWxlZ2F0ZSl7aWYodGhpcy5fc2xpZGUpe3RoaXMuX3NsaWRlLnJlbW92ZV9jb2xsYXBzZUFuaW1hdGlvbkVuZGVkKHRoaXMuX2NvbGxhcHNlQW5pbWF0aW9uRW5kZWREZWxlZ2F0ZSk7Cn10aGlzLl9jb2xsYXBzZUFuaW1hdGlvbkVuZGVkRGVsZWdhdGU9bnVsbDsKfWlmKHRoaXMuX3NsaWRlKXt0aGlzLl9zbGlkZS5kaXNwb3NlKCk7CnRoaXMuX3NsaWRlPW51bGw7Cn1pZih0aGlzLl9zY3JvbGxlcil7dGhpcy5fc2Nyb2xsZXIuZGlzcG9zZSgpOwp0aGlzLl9zY3JvbGxlcj1udWxsOwp9ZGVsZXRlIFRlbGVyaWsuV2ViLlVJLlJhZENvbnRleHRNZW51LmNvbnRleHRNZW51c1t0aGlzLmdldF9pZCgpXTsKYi5SYWRDb250ZXh0TWVudS5jYWxsQmFzZU1ldGhvZCh0aGlzLCJkaXNwb3NlIik7Cn0scmVwYWludDpmdW5jdGlvbigpe2IuUmFkTWVudS5fYWRqdXN0Um9vdEl0ZW1XaWR0aCh0aGlzLmdldF9pZCgpLHRoaXMuZ2V0X2NoaWxkTGlzdEVsZW1lbnQoKSk7Cn0sYWRkVGFyZ2V0RWxlbWVudDpmdW5jdGlvbihkKXtpZihkKXt0aGlzLl9hZGRUYXJnZXRFbGVtZW50KGQpOwp2YXIgYz0kdGVsZXJpay5pc09wZXJhJiYhKCJvbmNvbnRleHRtZW51IiBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpPyJtb3VzZWRvd24iOiJjb250ZXh0bWVudSI7CiR0ZWxlcmlrLmFkZEhhbmRsZXIoZCxjLHRoaXMuX2VsZW1lbnRDb250ZXh0TWVudSk7Cn19LHJlbW92ZVRhcmdldEVsZW1lbnQ6ZnVuY3Rpb24oZCl7aWYoIWQpe3JldHVybjsKfXZhciBjPSR0ZWxlcmlrLmlzT3BlcmEmJiEoIm9uY29udGV4dG1lbnUiIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCk/Im1vdXNlZG93biI6ImNvbnRleHRtZW51IjsKaWYoQXJyYXkucmVtb3ZlKHRoaXMuX3RhcmdldEVsZW1lbnRzLGQpKXskdGVsZXJpay5yZW1vdmVIYW5kbGVyKGQsYyx0aGlzLl9lbGVtZW50Q29udGV4dE1lbnUpOwp9fSxfY3JlYXRlQ2hpbGRMaXN0RWxlbWVudDpmdW5jdGlvbigpe3ZhciBjPXRoaXMuX2dldENvbnRleHRNZW51RWxlbWVudCgpOwp2YXIgZT1hKCJkaXYucm1TY3JvbGxXcmFwIixjKTsKaWYodGhpcy5fY2hpbGRMaXN0RWxlbWVudENzc0NsYXNzPT1udWxsKXtpZihlLmxlbmd0aD09MSl7dGhpcy5fY2hpbGRMaXN0RWxlbWVudENzc0NsYXNzPSJybUFjdGl2ZSBybVZlcnRpY2FsIjsKfWVsc2V7dGhpcy5fY2hpbGRMaXN0RWxlbWVudENzc0NsYXNzPSJybUFjdGl2ZSBybVZlcnRpY2FsIHJtR3JvdXAgcm1MZXZlbDEiOwp9fWlmKCF0aGlzLl9jaGlsZExpc3RFbGVtZW50Q3NzQ2xhc3Mpe3JldHVybjsKfXZhciBkPWEoIjx1bCBjbGFzcz0nIit0aGlzLl9jaGlsZExpc3RFbGVtZW50Q3NzQ2xhc3MrIic+PC91bD4iKTsKaWYoZS5sZW5ndGg9PTEpe2QuYXBwZW5kVG8oZSk7Cn1lbHNle2QuYXBwZW5kVG8oYyk7Cn19LF9pbml0aWFsaXplRXZlbnRNYXA6ZnVuY3Rpb24oKXt0aGlzLl9ldmVudE1hcC5pbml0aWFsaXplKHRoaXMsdGhpcy5fZ2V0Q29udGV4dE1lbnVFbGVtZW50KCkpOwp9LF9jaGlsZEluc2VydGVkOmZ1bmN0aW9uKGQsYyxlKXtiLlJhZENvbnRleHRNZW51LmNhbGxCYXNlTWV0aG9kKHRoaXMsIl9jaGlsZEluc2VydGVkIixbZCxjLGVdKTsKaWYoZS5fc2hvd24pe2lmKGMuX2dldFdpZHRoKCk+MHx8Yy5nZXRfaXNTZXBhcmF0b3IoKSl7Yi5SYWRNZW51Ll9hZGp1c3RDaGlsZHJlbldpZHRoKGUpOwp9fX0sX2F0dGFjaFNob3dIYW5kbGVyczpmdW5jdGlvbigpe3ZhciBjPSR0ZWxlcmlrLmlzT3BlcmEmJiEoIm9uY29udGV4dG1lbnUiIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCk/Im1vdXNlZG93biI6ImNvbnRleHRtZW51IjsKdmFyIGQ9dGhpcy5fZ2V0VGFyZ2V0RWxlbWVudHMoKTsKZm9yKHZhciBlPTA7CmU8ZC5sZW5ndGg7CmUrKyl7JHRlbGVyaWsuYWRkSGFuZGxlcihkW2VdLGMsdGhpcy5fZWxlbWVudENvbnRleHRNZW51KTsKfSR0ZWxlcmlrLmFkZEhhbmRsZXIodGhpcy5fZ2V0Q29udGV4dE1lbnVFbGVtZW50KCksYyx0aGlzLl9lbGVtZW50Q29udGV4dE1lbnUpOwp9LF9kZXRhY2hTaG93SGFuZGxlcnM6ZnVuY3Rpb24oKXt2YXIgYz0kdGVsZXJpay5pc09wZXJhJiYhKCJvbmNvbnRleHRtZW51IiBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpPyJtb3VzZWRvd24iOiJjb250ZXh0bWVudSI7CnZhciBlPXRoaXMuX2dldFRhcmdldEVsZW1lbnRzKCk7CmZvcih2YXIgZj0wOwpmPGUubGVuZ3RoOwpmKyspe3ZhciBnPWVbZl07CnRyeXskdGVsZXJpay5yZW1vdmVIYW5kbGVyKGcsYyx0aGlzLl9lbGVtZW50Q29udGV4dE1lbnUpOwp9Y2F0Y2goZCl7fX10cnl7JHRlbGVyaWsucmVtb3ZlSGFuZGxlcih0aGlzLl9nZXRDb250ZXh0TWVudUVsZW1lbnQoKSxjLHRoaXMuX2VsZW1lbnRDb250ZXh0TWVudSk7Cn1jYXRjaChkKXt9fSxfZG9jdW1lbnRDbGlja0hhbmRsZXI6ZnVuY3Rpb24oYyl7dmFyIGQ9dGhpcy5fZ2V0Q29udGV4dE1lbnVFbGVtZW50KCk7CmlmKCEkdGVsZXJpay5pc0Rlc2NlbmRhbnQoZCxjLnRhcmdldCkpe3RoaXMuY2xvc2UoKTsKdGhpcy5fY2xpY2tlZD1mYWxzZTsKdGhpcy5faGlkZShjKTsKfX0sX2l0ZW1DbGlja2VkSGFuZGxlcjpmdW5jdGlvbihjLGQpe2lmKCF0aGlzLmdldF9jbGlja1RvT3BlbigpKXt0aGlzLl9oaWRlKGQuZ2V0X2RvbUV2ZW50KCkpOwp9fSxfaW5pdGlhbGl6ZUFuaW1hdGlvbjpmdW5jdGlvbigpe3ZhciBjPXRoaXMuX2dldEFuaW1hdGVkRWxlbWVudCgpOwppZihjKXt0aGlzLl9zbGlkZT1uZXcgYi5qU2xpZGUoYyx0aGlzLmdldF9leHBhbmRBbmltYXRpb24oKSx0aGlzLmdldF9jb2xsYXBzZUFuaW1hdGlvbigpLHRoaXMuZ2V0X2VuYWJsZU92ZXJsYXkoKSk7CnRoaXMuX3NsaWRlLmluaXRpYWxpemUoKTsKdGhpcy5fc2xpZGUuc2V0X2RpcmVjdGlvbih0aGlzLl9nZXRTbGlkZURpcmVjdGlvbigpKTsKdGhpcy5fY29sbGFwc2VBbmltYXRpb25FbmRlZERlbGVnYXRlPUZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5fb25Db2xsYXBzZUFuaW1hdGlvbkVuZGVkKTsKdGhpcy5fc2xpZGUuYWRkX2NvbGxhcHNlQW5pbWF0aW9uRW5kZWQodGhpcy5fY29sbGFwc2VBbmltYXRpb25FbmRlZERlbGVnYXRlKTsKdGhpcy5fZXhwYW5kQW5pbWF0aW9uU3RhcnRlZERlbGVnYXRlPUZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5fb25FeHBhbmRBbmltYXRpb25TdGFydGVkKTsKdGhpcy5fc2xpZGUuYWRkX2V4cGFuZEFuaW1hdGlvblN0YXJ0ZWQodGhpcy5fZXhwYW5kQW5pbWF0aW9uU3RhcnRlZERlbGVnYXRlKTsKdGhpcy5fZXhwYW5kQW5pbWF0aW9uRW5kZWREZWxlZ2F0ZT1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX29uRXhwYW5kQW5pbWF0aW9uRW5kZWQpOwp0aGlzLl9zbGlkZS5hZGRfZXhwYW5kQW5pbWF0aW9uRW5kZWQodGhpcy5fZXhwYW5kQW5pbWF0aW9uRW5kZWREZWxlZ2F0ZSk7Cn19LF9nZXRSdGxDbGFzc05hbWU6ZnVuY3Rpb24oKXt2YXIgYz1iLlJhZENvbnRleHRNZW51LmNhbGxCYXNlTWV0aG9kKHRoaXMsIl9nZXRSdGxDbGFzc05hbWUiKTsKYys9IiBSYWRNZW51X0NvbnRleHRfcnRsIjsKaWYodGhpcy5fc2tpbil7Yys9IiBSYWRNZW51XyIrdGhpcy5fc2tpbisiX0NvbnRleHRfcnRsIjsKfXJldHVybiBjOwp9LF9nZXRNYWluRWxlbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRDb250ZXh0TWVudUVsZW1lbnQoKTsKfSxfZ2V0U2xpZGVEaXJlY3Rpb246ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmdldF9kZWZhdWx0R3JvdXBTZXR0aW5ncygpLmdldF9leHBhbmREaXJlY3Rpb24oKTsKaWYoYz09Yi5FeHBhbmREaXJlY3Rpb24uQXV0byl7cmV0dXJuIGIuRXhwYW5kRGlyZWN0aW9uLkRvd247Cn1yZXR1cm4gYzsKfSxfZ2V0U2Nyb2xsV3JhcEVsZW1lbnQ6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLl9nZXRDb250ZXh0TWVudUVsZW1lbnQoKTsKaWYoIXRoaXMuX3Njcm9sbFdyYXBFbGVtZW50KXtpZih0aGlzLmdldF9kZWZhdWx0R3JvdXBTZXR0aW5ncygpLmdldF9oZWlnaHQoKXx8dGhpcy5nZXRfZGVmYXVsdEdyb3VwU2V0dGluZ3MoKS5nZXRfd2lkdGgoKSl7dGhpcy5fc2Nyb2xsV3JhcEVsZW1lbnQ9JHRlbGVyaWsuZ2V0Rmlyc3RDaGlsZEJ5VGFnTmFtZShjLCJkaXYiLDApOwp9fXJldHVybiB0aGlzLl9zY3JvbGxXcmFwRWxlbWVudDsKfSxfZ2V0QW5pbWF0ZWRFbGVtZW50OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX2FuaW1hdGVkRWxlbWVudCl7dGhpcy5fYW5pbWF0ZWRFbGVtZW50PXRoaXMuX2dldFNjcm9sbFdyYXBFbGVtZW50KCl8fHRoaXMuZ2V0X2NoaWxkTGlzdEVsZW1lbnQoKTsKfXJldHVybiB0aGlzLl9hbmltYXRlZEVsZW1lbnQ7Cn0sX29uRXhwYW5kQW5pbWF0aW9uRW5kZWQ6ZnVuY3Rpb24oKXt9LF9vbkV4cGFuZEFuaW1hdGlvblN0YXJ0ZWQ6ZnVuY3Rpb24oKXt9LF9vbkNvbGxhcHNlQW5pbWF0aW9uRW5kZWQ6ZnVuY3Rpb24oKXt0aGlzLl9yZXN0b3JlWkluZGV4KCk7Cn0sX2dldFRhcmdldEVsZW1lbnRzOmZ1bmN0aW9uKCl7aWYodGhpcy5fdGFyZ2V0RWxlbWVudHM9PW51bGwpe3RoaXMuX3RhcmdldEVsZW1lbnRzPVtdOwpmb3IodmFyIGM9MDsKYzx0aGlzLl90YXJnZXRzLmxlbmd0aDsKYysrKXt0aGlzLl9hZGRUYXJnZXRFbGVtZW50cyh0aGlzLl90YXJnZXRzW2NdKTsKfX1yZXR1cm4gdGhpcy5fdGFyZ2V0RWxlbWVudHM7Cn0sX2FkZFRhcmdldEVsZW1lbnRzOmZ1bmN0aW9uKGMpe3N3aXRjaChjLnR5cGUpe2Nhc2UgYi5Db250ZXh0TWVudVRhcmdldFR5cGUuRG9jdW1lbnQ6dGhpcy5fYWRkVGFyZ2V0RWxlbWVudChkb2N1bWVudCk7CmJyZWFrOwpjYXNlIGIuQ29udGV4dE1lbnVUYXJnZXRUeXBlLkNvbnRyb2w6Y2FzZSBiLkNvbnRleHRNZW51VGFyZ2V0VHlwZS5FbGVtZW50OnRoaXMuX2FkZFRhcmdldEVsZW1lbnQoJGdldChjLmlkKSk7CmJyZWFrOwpjYXNlIGIuQ29udGV4dE1lbnVUYXJnZXRUeXBlLlRhZ05hbWU6dmFyIGU9ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYy50YWdOYW1lKTsKZm9yKHZhciBkPTA7CmQ8ZS5sZW5ndGg7CmQrKyl7dGhpcy5fYWRkVGFyZ2V0RWxlbWVudChlW2RdKTsKfWJyZWFrOwp9fSxfYWRkVGFyZ2V0RWxlbWVudDpmdW5jdGlvbihjKXtpZihjKXt0aGlzLl90YXJnZXRFbGVtZW50c1t0aGlzLl90YXJnZXRFbGVtZW50cy5sZW5ndGhdPWM7Cn19LF9hZGp1c3RQb3NpdGlvbkZvclNjcmVlbkJvdW5kYXJpZXM6ZnVuY3Rpb24oZSxmKXt2YXIgYz1iLlJhZE1lbnUuX2dldFZpZXdQb3J0U2l6ZSgpOwp2YXIgZD10aGlzLl9nZXRDb250ZXh0TWVudUVsZW1lbnQoKTsKZj1NYXRoLm1pbihmLGMuaGVpZ2h0LWQub2Zmc2V0SGVpZ2h0KTsKaWYodGhpcy5nZXRfcmlnaHRUb0xlZnQoKSl7ZT1NYXRoLm1heCgwLGUpOwp9ZWxzZXtlPU1hdGgubWluKGUsYy53aWR0aC1kLm9mZnNldFdpZHRoKTsKfWlmKGlzTmFOKGUpKXtlPTA7Cn1pZihpc05hTihmKSl7Zj0wOwp9dGhpcy5fZ2V0Q29udGV4dE1lbnVFbGVtZW50KCkuc3R5bGUubGVmdD1lKyJweCI7CnRoaXMuX2dldENvbnRleHRNZW51RWxlbWVudCgpLnN0eWxlLnRvcD1mKyJweCI7Cn0sX2RldGFjaDpmdW5jdGlvbigpe2lmKCEkdGVsZXJpay5pc0lFfHxkb2N1bWVudC5yZWFkeVN0YXRlPT0iY29tcGxldGUifHxkb2N1bWVudC5yZWFkeVN0YXRlPT0iaW50ZXJhY3RpdmUiKXt2YXIgYz1mYWxzZTsKaWYoYXJndW1lbnRzWzBdKXt2YXIgZD0kdGVsZXJpay4kKGFyZ3VtZW50c1swXS50YXJnZXR8fGFyZ3VtZW50c1swXS5zcmNFbGVtZW50KS5wYXJlbnRzKCJmb3JtIik7CmM9ZFtkLmxlbmd0aC0xXTsKfWlmKCFjKXtjPWRvY3VtZW50LmZvcm1zWzBdOwp9dGhpcy5fZ2V0Q29udGV4dE1lbnVFbGVtZW50KCkucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLl9nZXRDb250ZXh0TWVudUVsZW1lbnQoKSk7CnZhciBlPWN8fGRvY3VtZW50LmJvZHk7CmUuaW5zZXJ0QmVmb3JlKHRoaXMuX2dldENvbnRleHRNZW51RWxlbWVudCgpLGUuZmlyc3RDaGlsZCk7CnRoaXMuX2RldGFjaGVkPXRydWU7Cn19LF9nZXRDb250ZXh0TWVudUVsZW1lbnQ6ZnVuY3Rpb24oKXtpZighdGhpcy5fY29udGV4dE1lbnVFbGVtZW50KXt0aGlzLl9jb250ZXh0TWVudUVsZW1lbnQ9JHRlbGVyaWsuZ2V0Rmlyc3RDaGlsZEJ5VGFnTmFtZSh0aGlzLmdldF9lbGVtZW50KCksImRpdiIsMCk7Cn1yZXR1cm4gdGhpcy5fY29udGV4dE1lbnVFbGVtZW50Owp9LF9pc01haW5FbGVtZW50RGVzY2VuZGFudDpmdW5jdGlvbihjKXtyZXR1cm4gJHRlbGVyaWsuaXNEZXNjZW5kYW50KHRoaXMuX2dldENvbnRleHRNZW51RWxlbWVudCgpLGMpOwp9LGF0dGFjaENvbnRleHRNZW51OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX2RldGFjaGVkKXtyZXR1cm47Cn10aGlzLl9nZXRDb250ZXh0TWVudUVsZW1lbnQoKS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuX2dldENvbnRleHRNZW51RWxlbWVudCgpKTsKdGhpcy5nZXRfZWxlbWVudCgpLmluc2VydEJlZm9yZSh0aGlzLl9nZXRDb250ZXh0TWVudUVsZW1lbnQoKSwkZ2V0KHRoaXMuZ2V0X2NsaWVudFN0YXRlRmllbGRJRCgpKSk7CnRoaXMuX2RldGFjaGVkPWZhbHNlOwp9LF9nZXRFeHRlbmRlZEl0ZW1DbGlja2luZ0V2ZW50QXJnczpmdW5jdGlvbihjKXtyZXR1cm4gbmV3IGIuUmFkQ29udGV4dE1lbnVJdGVtQ2FuY2VsRXZlbnRBcmdzKGMuZ2V0X2l0ZW0oKSx0aGlzLl90YXJnZXRFbGVtZW50LGMuZ2V0X2RvbUV2ZW50KCkpOwp9LF9nZXRFeHRlbmRlZEl0ZW1DbGlja2VkRXZlbnRBcmdzOmZ1bmN0aW9uKGMpe3JldHVybiBuZXcgYi5SYWRDb250ZXh0TWVudUl0ZW1FdmVudEFyZ3MoYy5nZXRfaXRlbSgpLHRoaXMuX3RhcmdldEVsZW1lbnQsYy5nZXRfZG9tRXZlbnQoKSk7Cn0sX3VwZGF0ZVNjcm9sbFdyYXBTaXplOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5fZ2V0U2Nyb2xsV3JhcEVsZW1lbnQoKTsKdmFyIGM9dGhpcy5nZXRfY2hpbGRMaXN0RWxlbWVudCgpOwppZighZCl7cmV0dXJuOwp9aWYoIWQuc3R5bGUuaGVpZ2h0KXtkLnN0eWxlLmhlaWdodD1jLm9mZnNldEhlaWdodCsicHgiOwp9ZC5zdHlsZS53aWR0aD1jLm9mZnNldFdpZHRoKyJweCI7Cn0sX2dldEFuaW1hdGlvbkNvbnRhaW5lcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRDb250ZXh0TWVudUVsZW1lbnQoKTsKfSxfaW5pdGlhbGl6ZVNjcm9sbGVyOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5fZ2V0U2Nyb2xsV3JhcEVsZW1lbnQoKTsKaWYoYyl7aWYodGhpcy5fc2Nyb2xsZXIpe3RoaXMuX3Njcm9sbGVyLmRpc3Bvc2UoKTsKfXRoaXMuX3Njcm9sbGVyPW5ldyBiLk1lbnVJdGVtU2Nyb2xsZXIodGhpcy5nZXRfY2hpbGRMaXN0RWxlbWVudCgpLGIuSXRlbUZsb3cuVmVydGljYWwpOwp0aGlzLl9zY3JvbGxlci5pbml0aWFsaXplKCk7Cn19LF9hZGp1c3RSb290SXRlbXNXaWR0aE9uU2hvdzpmdW5jdGlvbigpe3ZhciBkPXRoaXMuZ2V0X2l0ZW1zKCk7CnZhciBmPWQuZ2V0X2NvdW50KCk7CmZvcih2YXIgZT0wOwplPGY7CmUrKyl7dmFyIGM9ZC5nZXRJdGVtKGUpOwppZihjLl9hZGp1c3RTaWJsaW5nc1dpZHRoT25TaG93KXtjLl9hZGp1c3RTaWJsaW5nc1dpZHRoKCk7CmMuX2FkanVzdFNpYmxpbmdzV2lkdGhPblNob3c9ZmFsc2U7CnJldHVybjsKfX19LF9vblRvcEFycm93TW91c2VEb3duOmZ1bmN0aW9uKGMpe3ZhciBkPXRoaXMuX2V4dHJhY3RJdGVtRnJvbURvbUVsZW1lbnQoYy5ldmVudE1hcFRhcmdldCk7CmlmKGQhPW51bGwpe2IuUmFkQ29udGV4dE1lbnUuY2FsbEJhc2VNZXRob2QodGhpcywiX29uVG9wQXJyb3dNb3VzZURvd24iLFtjXSk7CnJldHVybjsKfXRoaXMuX29uU2Nyb2xsQXJyb3dNb3VzZURvd24oYi5BcnJvd1Bvc2l0aW9uLlRvcCk7Cn0sX29uVG9wQXJyb3dNb3VzZVVwOmZ1bmN0aW9uKGMpe3ZhciBkPXRoaXMuX2V4dHJhY3RJdGVtRnJvbURvbUVsZW1lbnQoYy5ldmVudE1hcFRhcmdldCk7CmlmKGQhPW51bGwpe2IuUmFkQ29udGV4dE1lbnUuY2FsbEJhc2VNZXRob2QodGhpcywiX29uVG9wQXJyb3dNb3VzZURvd24iLFtjXSk7CnJldHVybjsKfXRoaXMuX29uU2Nyb2xsQXJyb3dNb3VzZVVwKGIuQXJyb3dQb3NpdGlvbi5Ub3ApOwp9LF9vblRvcEFycm93TW91c2VPdmVyOmZ1bmN0aW9uKGMpe3ZhciBkPXRoaXMuX2V4dHJhY3RJdGVtRnJvbURvbUVsZW1lbnQoYy5ldmVudE1hcFRhcmdldCk7CmlmKGQhPW51bGwpe2IuUmFkQ29udGV4dE1lbnUuY2FsbEJhc2VNZXRob2QodGhpcywiX29uVG9wQXJyb3dNb3VzZU92ZXIiLFtjXSk7CnJldHVybjsKfXRoaXMuX29uU2Nyb2xsQXJyb3dNb3VzZU92ZXIoYi5BcnJvd1Bvc2l0aW9uLlRvcCk7Cn0sX29uVG9wQXJyb3dNb3VzZU91dDpmdW5jdGlvbihjKXt2YXIgZD10aGlzLl9leHRyYWN0SXRlbUZyb21Eb21FbGVtZW50KGMuZXZlbnRNYXBUYXJnZXQpOwppZihkIT1udWxsKXtiLlJhZENvbnRleHRNZW51LmNhbGxCYXNlTWV0aG9kKHRoaXMsIl9vblRvcEFycm93TW91c2VPdXQiLFtjXSk7CnJldHVybjsKfXRoaXMuX29uU2Nyb2xsQXJyb3dNb3VzZU91dChiLkFycm93UG9zaXRpb24uVG9wKTsKfSxfb25Cb3R0b21BcnJvd01vdXNlRG93bjpmdW5jdGlvbihjKXt2YXIgZD10aGlzLl9leHRyYWN0SXRlbUZyb21Eb21FbGVtZW50KGMuZXZlbnRNYXBUYXJnZXQpOwppZihkIT1udWxsKXtiLlJhZENvbnRleHRNZW51LmNhbGxCYXNlTWV0aG9kKHRoaXMsIl9vbkJvdHRvbUFycm93TW91c2VEb3duIixbY10pOwpyZXR1cm47Cn10aGlzLl9vblNjcm9sbEFycm93TW91c2VEb3duKGIuQXJyb3dQb3NpdGlvbi5Cb3R0b20pOwp9LF9vbkJvdHRvbUFycm93TW91c2VVcDpmdW5jdGlvbihjKXt2YXIgZD10aGlzLl9leHRyYWN0SXRlbUZyb21Eb21FbGVtZW50KGMuZXZlbnRNYXBUYXJnZXQpOwppZihkIT1udWxsKXtiLlJhZENvbnRleHRNZW51LmNhbGxCYXNlTWV0aG9kKHRoaXMsIl9vbkJvdHRvbUFycm93TW91c2VVcCIsW2NdKTsKcmV0dXJuOwp9dGhpcy5fb25TY3JvbGxBcnJvd01vdXNlVXAoYi5BcnJvd1Bvc2l0aW9uLkJvdHRvbSk7Cn0sX29uQm90dG9tQXJyb3dNb3VzZU92ZXI6ZnVuY3Rpb24oYyl7dmFyIGQ9dGhpcy5fZXh0cmFjdEl0ZW1Gcm9tRG9tRWxlbWVudChjLmV2ZW50TWFwVGFyZ2V0KTsKaWYoZCE9bnVsbCl7Yi5SYWRDb250ZXh0TWVudS5jYWxsQmFzZU1ldGhvZCh0aGlzLCJfb25Cb3R0b21BcnJvd01vdXNlT3ZlciIsW2NdKTsKcmV0dXJuOwp9dGhpcy5fb25TY3JvbGxBcnJvd01vdXNlT3ZlcihiLkFycm93UG9zaXRpb24uQm90dG9tKTsKfSxfb25Cb3R0b21BcnJvd01vdXNlT3V0OmZ1bmN0aW9uKGMpe3ZhciBkPXRoaXMuX2V4dHJhY3RJdGVtRnJvbURvbUVsZW1lbnQoYy5ldmVudE1hcFRhcmdldCk7CmlmKGQhPW51bGwpe2IuUmFkQ29udGV4dE1lbnUuY2FsbEJhc2VNZXRob2QodGhpcywiX29uQm90dG9tQXJyb3dNb3VzZU91dCIsW2NdKTsKcmV0dXJuOwp9dGhpcy5fb25TY3JvbGxBcnJvd01vdXNlT3V0KGIuQXJyb3dQb3NpdGlvbi5Cb3R0b20pOwp9LF9vbkxlZnRBcnJvd01vdXNlRG93bjpmdW5jdGlvbihjKXt2YXIgZD10aGlzLl9leHRyYWN0SXRlbUZyb21Eb21FbGVtZW50KGMuZXZlbnRNYXBUYXJnZXQpOwppZihkIT1udWxsKXtiLlJhZENvbnRleHRNZW51LmNhbGxCYXNlTWV0aG9kKHRoaXMsIl9vbkxlZnRBcnJvd01vdXNlRG93biIsW2NdKTsKcmV0dXJuOwp9dGhpcy5fb25TY3JvbGxBcnJvd01vdXNlRG93bihiLkFycm93UG9zaXRpb24uTGVmdCk7Cn0sX29uTGVmdEFycm93TW91c2VVcDpmdW5jdGlvbihjKXt2YXIgZD10aGlzLl9leHRyYWN0SXRlbUZyb21Eb21FbGVtZW50KGMuZXZlbnRNYXBUYXJnZXQpOwppZihkIT1udWxsKXtiLlJhZENvbnRleHRNZW51LmNhbGxCYXNlTWV0aG9kKHRoaXMsIl9vbkxlZnRBcnJvd01vdXNlVXAiLFtjXSk7CnJldHVybjsKfXRoaXMuX29uU2Nyb2xsQXJyb3dNb3VzZVVwKGIuQXJyb3dQb3NpdGlvbi5MZWZ0KTsKfSxfb25MZWZ0QXJyb3dNb3VzZU92ZXI6ZnVuY3Rpb24oYyl7dmFyIGQ9dGhpcy5fZXh0cmFjdEl0ZW1Gcm9tRG9tRWxlbWVudChjLmV2ZW50TWFwVGFyZ2V0KTsKaWYoZCE9bnVsbCl7Yi5SYWRDb250ZXh0TWVudS5jYWxsQmFzZU1ldGhvZCh0aGlzLCJfb25MZWZ0QXJyb3dNb3VzZU92ZXIiLFtjXSk7CnJldHVybjsKfXRoaXMuX29uU2Nyb2xsQXJyb3dNb3VzZU92ZXIoYi5BcnJvd1Bvc2l0aW9uLkxlZnQpOwp9LF9vbkxlZnRBcnJvd01vdXNlT3V0OmZ1bmN0aW9uKGMpe3ZhciBkPXRoaXMuX2V4dHJhY3RJdGVtRnJvbURvbUVsZW1lbnQoYy5ldmVudE1hcFRhcmdldCk7CmlmKGQhPW51bGwpe2IuUmFkQ29udGV4dE1lbnUuY2FsbEJhc2VNZXRob2QodGhpcywiX29uTGVmdEFycm93TW91c2VPdXQiLFtjXSk7CnJldHVybjsKfXRoaXMuX29uU2Nyb2xsQXJyb3dNb3VzZU91dChiLkFycm93UG9zaXRpb24uTGVmdCk7Cn0sX29uUmlnaHRBcnJvd01vdXNlRG93bjpmdW5jdGlvbihjKXt2YXIgZD10aGlzLl9leHRyYWN0SXRlbUZyb21Eb21FbGVtZW50KGMuZXZlbnRNYXBUYXJnZXQpOwppZihkIT1udWxsKXtiLlJhZENvbnRleHRNZW51LmNhbGxCYXNlTWV0aG9kKHRoaXMsIl9vblJpZ2h0QXJyb3dNb3VzZURvd24iLFtjXSk7CnJldHVybjsKfXRoaXMuX29uU2Nyb2xsQXJyb3dNb3VzZURvd24oYi5BcnJvd1Bvc2l0aW9uLlJpZ2h0KTsKfSxfb25SaWdodEFycm93TW91c2VVcDpmdW5jdGlvbihjKXt2YXIgZD10aGlzLl9leHRyYWN0SXRlbUZyb21Eb21FbGVtZW50KGMuZXZlbnRNYXBUYXJnZXQpOwppZihkIT1udWxsKXtiLlJhZENvbnRleHRNZW51LmNhbGxCYXNlTWV0aG9kKHRoaXMsIl9vblJpZ2h0QXJyb3dNb3VzZVVwIixbY10pOwpyZXR1cm47Cn10aGlzLl9vblNjcm9sbEFycm93TW91c2VVcChiLkFycm93UG9zaXRpb24uUmlnaHQpOwp9LF9vblJpZ2h0QXJyb3dNb3VzZU92ZXI6ZnVuY3Rpb24oYyl7dmFyIGQ9dGhpcy5fZXh0cmFjdEl0ZW1Gcm9tRG9tRWxlbWVudChjLmV2ZW50TWFwVGFyZ2V0KTsKaWYoZCE9bnVsbCl7Yi5SYWRDb250ZXh0TWVudS5jYWxsQmFzZU1ldGhvZCh0aGlzLCJfb25SaWdodEFycm93TW91c2VPdmVyIixbY10pOwpyZXR1cm47Cn10aGlzLl9vblNjcm9sbEFycm93TW91c2VPdmVyKGIuQXJyb3dQb3NpdGlvbi5SaWdodCk7Cn0sX29uUmlnaHRBcnJvd01vdXNlT3V0OmZ1bmN0aW9uKGMpe3ZhciBkPXRoaXMuX2V4dHJhY3RJdGVtRnJvbURvbUVsZW1lbnQoYy5ldmVudE1hcFRhcmdldCk7CmlmKGQhPW51bGwpe2IuUmFkQ29udGV4dE1lbnUuY2FsbEJhc2VNZXRob2QodGhpcywiX29uUmlnaHRBcnJvd01vdXNlT3V0IixbY10pOwpyZXR1cm47Cn10aGlzLl9vblNjcm9sbEFycm93TW91c2VPdXQoYi5BcnJvd1Bvc2l0aW9uLlJpZ2h0KTsKfSxfb25TY3JvbGxBcnJvd01vdXNlRG93bjpmdW5jdGlvbigpe2lmKCF0aGlzLl9zY3JvbGxlcil7cmV0dXJuOwp9dGhpcy5fc2Nyb2xsZXIuY2hhbmdlU2Nyb2xsU3BlZWQoYi5TY3JvbGxlclNwZWVkLkZhc3QpOwp9LF9vblNjcm9sbEFycm93TW91c2VVcDpmdW5jdGlvbigpe2lmKCF0aGlzLl9zY3JvbGxlcil7cmV0dXJuOwp9dGhpcy5fc2Nyb2xsZXIuY2hhbmdlU2Nyb2xsU3BlZWQoYi5TY3JvbGxlclNwZWVkLlNsb3cpOwp9LF9vblNjcm9sbEFycm93TW91c2VPdmVyOmZ1bmN0aW9uKGQpe2lmKCF0aGlzLl9zY3JvbGxlcil7cmV0dXJuOwp9dmFyIGM9MTsKaWYoZD09Yi5BcnJvd1Bvc2l0aW9uLlRvcHx8ZD09Yi5BcnJvd1Bvc2l0aW9uLkxlZnQpe2M9LTE7Cn10aGlzLl9zY3JvbGxlci5zdGFydFNjcm9sbChiLlNjcm9sbGVyU3BlZWQuU2xvdyxjKTsKfSxfb25TY3JvbGxBcnJvd01vdXNlT3V0OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX3Njcm9sbGVyKXtyZXR1cm47Cn10aGlzLl9zY3JvbGxlci5zdG9wU2Nyb2xsKCk7Cn0sX2VsZW1lbnRDb250ZXh0TWVudTpmdW5jdGlvbihjKXtpZigkdGVsZXJpay5pc0Rlc2NlbmRhbnRPclNlbGYodGhpcy5fZ2V0Q29udGV4dE1lbnVFbGVtZW50KCksYy50YXJnZXQpKXskdGVsZXJpay5jYW5jZWxSYXdFdmVudChjKTsKcmV0dXJuIGZhbHNlOwp9aWYoJHRlbGVyaWsuaXNPcGVyYSYmISgib25jb250ZXh0bWVudSIgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSl7aWYoYy5idXR0b24hPTIpe3JldHVybjsKfX10aGlzLnNob3coYyk7Cn0sX3Nob3dBdDpmdW5jdGlvbihkLGYsYyl7Yi5SYWRDb250ZXh0TWVudS5oaWRlQWxsKCk7CmlmKCFiLlJhZENvbnRleHRNZW51Ll9nZXRBbGxIaWRkZW4oKSl7cmV0dXJuOwp9dGhpcy5fc2hvd249dHJ1ZTsKdGhpcy5fZW5zdXJlUm91bmRlZENvcm5lcnMoKTsKdGhpcy5fZW5zdXJlU2hhZG93cygpOwpiLlJhZE1lbnUuX2Vuc3VyZUNvcm5lcnModGhpcyx0aGlzKTsKaWYoIXRoaXMuX2RldGFjaGVkKXt0aGlzLl9kZXRhY2goYyk7CmlmKHRoaXMuX3JpZ2h0VG9MZWZ0JiYkdGVsZXJpay5pc0lFNil7dGhpcy5fZ2V0Q29udGV4dE1lbnVFbGVtZW50KCkuZGlyPSJydGwiOwp9dGhpcy5fZ2V0Q29udGV4dE1lbnVFbGVtZW50KCkuc3R5bGUudmlzaWJpbGl0eT0iaGlkZGVuIjsKdGhpcy5fZ2V0Q29udGV4dE1lbnVFbGVtZW50KCkuc3R5bGUuZGlzcGxheT0iYmxvY2siOwp0aGlzLnJlcGFpbnQoKTsKfXRoaXMuX3NsaWRlLnNob3coKTsKdGhpcy5fYWRqdXN0Um9vdEl0ZW1zV2lkdGhPblNob3coKTsKdGhpcy5fdXBkYXRlU2Nyb2xsV3JhcFNpemUoKTsKdGhpcy5fc2xpZGUudXBkYXRlU2l6ZSgpOwppZih0aGlzLl9yaWdodFRvTGVmdCl7ZC09dGhpcy5fZ2V0Q29udGV4dE1lbnVFbGVtZW50KCkub2Zmc2V0V2lkdGg7Cn10aGlzLl9nZXRDb250ZXh0TWVudUVsZW1lbnQoKS5zdHlsZS5sZWZ0PWQrInB4IjsKdGhpcy5fZ2V0Q29udGV4dE1lbnVFbGVtZW50KCkuc3R5bGUudG9wPWYrInB4IjsKaWYodGhpcy5nZXRfZW5hYmxlU2NyZWVuQm91bmRhcnlEZXRlY3Rpb24oKSl7dGhpcy5fYWRqdXN0UG9zaXRpb25Gb3JTY3JlZW5Cb3VuZGFyaWVzKGQsZik7Cn1pZih0aGlzLl9zY3JvbGxlcil7dGhpcy5fc2Nyb2xsZXIudXBkYXRlU3RhdGUoKTsKfXRoaXMuX2dldENvbnRleHRNZW51RWxlbWVudCgpLnN0eWxlLnZpc2liaWxpdHk9InZpc2libGUiOwp0aGlzLl9zbGlkZS5leHBhbmQoKTsKdGhpcy5yYWlzZV9zaG93bihuZXcgYi5SYWRDb250ZXh0TWVudVNob3duRXZlbnRBcmdzKHRoaXMuX3RhcmdldEVsZW1lbnQsY3x8bnVsbCkpOwp9LF9oaWRlOmZ1bmN0aW9uKGMpe2lmKCF0aGlzLl9zaG93bil7cmV0dXJuOwp9dmFyIGQ9bmV3IGIuUmFkQ29udGV4dE1lbnVDYW5jZWxFdmVudEFyZ3ModGhpcy5fdGFyZ2V0RWxlbWVudCxjfHxudWxsKTsKdGhpcy5yYWlzZV9oaWRpbmcoZCk7CmlmKGQuZ2V0X2NhbmNlbCgpKXtyZXR1cm47Cn10aGlzLl9zaG93bj1mYWxzZTsKdGhpcy5fc2xpZGUuY29sbGFwc2UoKTsKdGhpcy5yYWlzZV9oaWRkZW4obmV3IGIuUmFkQ29udGV4dE1lbnVFdmVudEFyZ3MoY3x8bnVsbCkpOwp0aGlzLl90YXJnZXRFbGVtZW50PW51bGw7CnRoaXMuX2NsaWNrZWQ9ZmFsc2U7CmlmKHRoaXMuX2ZvY3VzZWRJdGVtKXt0aGlzLl9mb2N1c2VkSXRlbS5fZG9CbHVyKCk7Cn12YXIgZj10aGlzLmdldF9vcGVuZWRJdGVtKCk7CmlmKGYpe2YuY2xvc2UoKTsKfX0sX2FkanVzdFJvb3RJdGVtV2lkdGg6ZnVuY3Rpb24oKXt9LF9lbnN1cmVSb3VuZGVkQ29ybmVyczpmdW5jdGlvbigpe2lmKHRoaXMuX3JvdW5kZWRDb3JuZXJzUmVuZGVyZWQpe3JldHVybjsKfWlmKHRoaXMuZ2V0X2VuYWJsZVJvdW5kZWRDb3JuZXJzKCkpe3RoaXMuX3JvdW5kZWRDb3JuZXJzUmVuZGVyZWQ9dHJ1ZTsKYi5SYWRNZW51Ll9yZW5kZXJDb3JuZXJFbGVtZW50cyh0aGlzKTsKfX0sX2Vuc3VyZVNoYWRvd3M6ZnVuY3Rpb24oKXtpZih0aGlzLl9zaGFkb3dzUmVuZGVyZWQpe3JldHVybjsKfWlmKHRoaXMuZ2V0X2VuYWJsZVNoYWRvd3MoKSl7dGhpcy5fc2hhZG93c1JlbmRlcmVkPXRydWU7CmIuUmFkTWVudS5fcmVuZGVyQ29ybmVyRWxlbWVudHModGhpcywic2hhZG93Iik7Cn19LGdldF9jaGlsZExpc3RFbGVtZW50OmZ1bmN0aW9uKCl7aWYodGhpcy5fZ2V0U2Nyb2xsV3JhcEVsZW1lbnQoKSl7dGhpcy5fY2hpbGRMaXN0RWxlbWVudD0kdGVsZXJpay5nZXRGaXJzdENoaWxkQnlUYWdOYW1lKHRoaXMuX2dldFNjcm9sbFdyYXBFbGVtZW50KCksInVsIiwwKTsKfWlmKCF0aGlzLl9jaGlsZExpc3RFbGVtZW50KXt0aGlzLl9jaGlsZExpc3RFbGVtZW50PSR0ZWxlcmlrLmdldEZpcnN0Q2hpbGRCeVRhZ05hbWUodGhpcy5fZ2V0Q29udGV4dE1lbnVFbGVtZW50KCksInVsIiwwKTsKfXJldHVybiB0aGlzLl9jaGlsZExpc3RFbGVtZW50Owp9LHNldF90YXJnZXRzOmZ1bmN0aW9uKGMpe3RoaXMuX3RhcmdldHM9YzsKfSxnZXRfdGFyZ2V0czpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90YXJnZXRzOwp9LGdldF9jb250ZXh0TWVudUVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0Q29udGV4dE1lbnVFbGVtZW50KCk7Cn0sc2hvdzpmdW5jdGlvbihkKXtpZih0aGlzLl9zaG93bil7dGhpcy5faGlkZSgpOwp9aWYoZC50YXJnZXQpe3RoaXMuX3RhcmdldEVsZW1lbnQ9ZC50YXJnZXQ7Cn1lbHNle2lmKGQuc3JjRWxlbWVudCl7dGhpcy5fdGFyZ2V0RWxlbWVudD1kLnNyY0VsZW1lbnQ7Cn19dmFyIGc9bmV3IGIuUmFkQ29udGV4dE1lbnVTaG93aW5nRXZlbnRBcmdzKHRoaXMuX3RhcmdldEVsZW1lbnR8fG51bGwsZHx8bnVsbCk7CnRoaXMucmFpc2Vfc2hvd2luZyhnKTsKaWYoZy5nZXRfY2FuY2VsKCkpe3JldHVybjsKfXZhciBmPSR0ZWxlcmlrLmdldFRvdWNoRXZlbnRMb2NhdGlvbihkKTsKdmFyIGM9JHRlbGVyaWsuaXNUb3VjaERldmljZT97bGVmdDpmLngsdG9wOmYueX06JHRlbGVyaWsuZ2V0RG9jdW1lbnRSZWxhdGl2ZUN1cnNvclBvc2l0aW9uKGQpOwp0aGlzLl9zaG93QXQoYy5sZWZ0LGMudG9wLGQpOwokdGVsZXJpay5jYW5jZWxSYXdFdmVudChkKTsKfSxzaG93QXQ6ZnVuY3Rpb24oZCxlKXt2YXIgYz1uZXcgYi5SYWRDb250ZXh0TWVudVNob3dpbmdFdmVudEFyZ3MoKTsKdGhpcy5yYWlzZV9zaG93aW5nKGMpOwppZihjLmdldF9jYW5jZWwoKSl7cmV0dXJuOwp9dGhpcy5fc2hvd0F0KGQsZSxudWxsKTsKfSxoaWRlOmZ1bmN0aW9uKCl7dGhpcy5faGlkZShudWxsKTsKfSxhZGRfc2hvd2luZzpmdW5jdGlvbihjKXt0aGlzLmdldF9ldmVudHMoKS5hZGRIYW5kbGVyKCJzaG93aW5nIixjKTsKfSxyZW1vdmVfc2hvd2luZzpmdW5jdGlvbihjKXt0aGlzLmdldF9ldmVudHMoKS5yZW1vdmVIYW5kbGVyKCJzaG93aW5nIixjKTsKfSxyYWlzZV9zaG93aW5nOmZ1bmN0aW9uKGMpe2lmKHRoaXMuX2ZpcmVFdmVudHMpe3RoaXMucmFpc2VFdmVudCgic2hvd2luZyIsYyk7Cn19LHJhaXNlX2hpZGluZzpmdW5jdGlvbihjKXtpZih0aGlzLl9maXJlRXZlbnRzKXt0aGlzLnJhaXNlRXZlbnQoImhpZGluZyIsYyk7Cn19LGFkZF9zaG93bjpmdW5jdGlvbihjKXt0aGlzLmdldF9ldmVudHMoKS5hZGRIYW5kbGVyKCJzaG93biIsYyk7Cn0scmVtb3ZlX3Nob3duOmZ1bmN0aW9uKGMpe3RoaXMuZ2V0X2V2ZW50cygpLnJlbW92ZUhhbmRsZXIoInNob3duIixjKTsKfSxyYWlzZV9zaG93bjpmdW5jdGlvbihjKXtpZih0aGlzLl9maXJlRXZlbnRzKXt0aGlzLnJhaXNlRXZlbnQoInNob3duIixjKTsKfX0sYWRkX2hpZGluZzpmdW5jdGlvbihjKXt0aGlzLmdldF9ldmVudHMoKS5hZGRIYW5kbGVyKCJoaWRpbmciLGMpOwp9LHJlbW92ZV9oaWRpbmc6ZnVuY3Rpb24oYyl7dGhpcy5nZXRfZXZlbnRzKCkucmVtb3ZlSGFuZGxlcigiaGlkaW5nIixjKTsKfSxhZGRfaGlkZGVuOmZ1bmN0aW9uKGMpe3RoaXMuZ2V0X2V2ZW50cygpLmFkZEhhbmRsZXIoImhpZGRlbiIsYyk7Cn0scmVtb3ZlX2hpZGRlbjpmdW5jdGlvbihjKXt0aGlzLmdldF9ldmVudHMoKS5yZW1vdmVIYW5kbGVyKCJoaWRkZW4iLGMpOwp9LHJhaXNlX2hpZGRlbjpmdW5jdGlvbihjKXtpZih0aGlzLl9maXJlRXZlbnRzKXt0aGlzLnJhaXNlRXZlbnQoImhpZGRlbiIsYyk7Cn19fTsKYi5SYWRDb250ZXh0TWVudS5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5SYWRDb250ZXh0TWVudSIsYi5SYWRNZW51KTsKfSkoKTsKDQovKiBFTkQgVGVsZXJpay5XZWIuVUkuTWVudS5Db250ZXh0TWVudS5SYWRDb250ZXh0TWVudVNjcmlwdHMuanMgKi8NCi8qIFNUQVJUIFRlbGVyaWsuV2ViLlVJLkJ1dHRvbi5SYWRCdXR0b24uanMgKi8NClR5cGUucmVnaXN0ZXJOYW1lc3BhY2UoIlRlbGVyaWsuV2ViLlVJIik7CihmdW5jdGlvbigpeyR0ZWxlcmlrLnRvQnV0dG9uPWZ1bmN0aW9uKGMpe3JldHVybiBjOwp9OwokdGVsZXJpay5maW5kQnV0dG9uPSRmaW5kOwp2YXIgYT0kdGVsZXJpay4kOwp2YXIgYj1UZWxlcmlrLldlYi5VSTsKYS5yZWdpc3RlckVudW0oYiwiUmFkQnV0dG9uVHlwZSIse1N0YW5kYXJkQnV0dG9uOjAsTGlua0J1dHRvbjoxLFRvZ2dsZUJ1dHRvbjoyfSk7CmEucmVnaXN0ZXJFbnVtKGIsIkJ1dHRvblRvZ2dsZVR5cGUiLHtOb25lOjAsQ2hlY2tCb3g6MSxSYWRpbzoyLEN1c3RvbVRvZ2dsZTozfSk7CmIuUmFkQnV0dG9uRXZlbnRBcmdzPWZ1bmN0aW9uKGUsYyxkKXtiLlJhZEJ1dHRvbkV2ZW50QXJncy5pbml0aWFsaXplQmFzZSh0aGlzKTsKdGhpcy5fY29tbWFuZE5hbWU9ZTsKdGhpcy5fY29tbWFuZEFyZ3VtZW50PWM7CnRoaXMuX3NwbGl0QnV0dG9uQ2xpY2s9ZDsKfTsKYi5SYWRCdXR0b25FdmVudEFyZ3MucHJvdG90eXBlPXtnZXRfY29tbWFuZE5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29tbWFuZE5hbWU7Cn0sc2V0X2NvbW1hbmROYW1lOmZ1bmN0aW9uKGMpe3RoaXMuX2NvbW1hbmROYW1lPWM7Cn0sZ2V0X2NvbW1hbmRBcmd1bWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb21tYW5kQXJndW1lbnQ7Cn0sc2V0X2NvbW1hbmRBcmd1bWVudDpmdW5jdGlvbihjKXt0aGlzLl9jb21tYW5kQXJndW1lbnQ9YzsKfSxJc1NwbGl0QnV0dG9uQ2xpY2s6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3BsaXRCdXR0b25DbGljazsKfX07CmIuUmFkQnV0dG9uRXZlbnRBcmdzLnJlZ2lzdGVyQ2xhc3MoIlRlbGVyaWsuV2ViLlVJLlJhZEJ1dHRvbkV2ZW50QXJncyIsU3lzLkV2ZW50QXJncyk7CmIuUmFkQnV0dG9uQ2hlY2tlZEV2ZW50QXJncz1mdW5jdGlvbihmLGQsZSxjKXtiLlJhZEJ1dHRvbkNoZWNrZWRFdmVudEFyZ3MuaW5pdGlhbGl6ZUJhc2UodGhpcyk7CnRoaXMuc2V0X2NvbW1hbmROYW1lKGYpOwp0aGlzLnNldF9jb21tYW5kQXJndW1lbnQoZCk7CnRoaXMuX2NoZWNrZWQ9ZTsKdGhpcy5fdG9nZ2xlVHlwZT1jOwp9OwpiLlJhZEJ1dHRvbkNoZWNrZWRFdmVudEFyZ3MucHJvdG90eXBlPXtnZXRfY2hlY2tlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGVja2VkOwp9LHNldF9jaGVja2VkOmZ1bmN0aW9uKGMpe3RoaXMuX2NoZWNrZWQ9YzsKfSxnZXRfdG9nZ2xlVHlwZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90b2dnbGVUeXBlOwp9LHNldF90b2dnbGVUeXBlOmZ1bmN0aW9uKGMpe3RoaXMuX3RvZ2dsZVR5cGU9YzsKfX07CmIuUmFkQnV0dG9uQ2hlY2tlZEV2ZW50QXJncy5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5SYWRCdXR0b25DaGVja2VkRXZlbnRBcmdzIixiLlJhZEJ1dHRvbkV2ZW50QXJncyk7CmIuUmFkQnV0dG9uVG9nZ2xlU3RhdGVFdmVudEFyZ3M9ZnVuY3Rpb24oZyxkLGYsYyxlKXtiLlJhZEJ1dHRvblRvZ2dsZVN0YXRlRXZlbnRBcmdzLmluaXRpYWxpemVCYXNlKHRoaXMpOwp0aGlzLnNldF9jb21tYW5kTmFtZShnKTsKdGhpcy5zZXRfY29tbWFuZEFyZ3VtZW50KGQpOwp0aGlzLnNldF9jaGVja2VkKGYpOwp0aGlzLnNldF90b2dnbGVUeXBlKGMpOwp0aGlzLl9jdXJyZW50VG9nZ2xlU3RhdGU9ZTsKfTsKYi5SYWRCdXR0b25Ub2dnbGVTdGF0ZUV2ZW50QXJncy5wcm90b3R5cGU9e2dldF9jdXJyZW50VG9nZ2xlU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3VycmVudFRvZ2dsZVN0YXRlOwp9LHNldF9jdXJyZW50VG9nZ2xlU3RhdGU6ZnVuY3Rpb24oYyl7dGhpcy5fY3VycmVudFRvZ2dsZVN0YXRlPWM7Cn19OwpiLlJhZEJ1dHRvblRvZ2dsZVN0YXRlRXZlbnRBcmdzLnJlZ2lzdGVyQ2xhc3MoIlRlbGVyaWsuV2ViLlVJLlJhZEJ1dHRvblRvZ2dsZVN0YXRlRXZlbnRBcmdzIixiLlJhZEJ1dHRvbkNoZWNrZWRFdmVudEFyZ3MpOwpiLlJhZEJ1dHRvbkNhbmNlbEV2ZW50QXJncz1mdW5jdGlvbihjLGQpe2IuUmFkQnV0dG9uQ2FuY2VsRXZlbnRBcmdzLmluaXRpYWxpemVCYXNlKHRoaXMpOwp0aGlzLl9jb21tYW5kTmFtZT1jOwp0aGlzLl9jb21tYW5kQXJndW1lbnQ9ZDsKfTsKYi5SYWRCdXR0b25DYW5jZWxFdmVudEFyZ3MucHJvdG90eXBlPXtnZXRfY29tbWFuZE5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29tbWFuZE5hbWU7Cn0sc2V0X2NvbW1hbmROYW1lOmZ1bmN0aW9uKGMpe3RoaXMuX2NvbW1hbmROYW1lPWM7Cn0sZ2V0X2NvbW1hbmRBcmd1bWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb21tYW5kQXJndW1lbnQ7Cn0sc2V0X2NvbW1hbmRBcmd1bWVudDpmdW5jdGlvbihjKXt0aGlzLl9jb21tYW5kQXJndW1lbnQ9YzsKfSxnZXRfaXNQYWdlVmFsaWQ6ZnVuY3Rpb24oKXtpZih0eXBlb2YoUGFnZV9Jc1ZhbGlkKT09PSJ1bmRlZmluZWQiKXtyZXR1cm4gdHJ1ZTsKfXJldHVybiBQYWdlX0lzVmFsaWQ7Cn19OwpiLlJhZEJ1dHRvbkNhbmNlbEV2ZW50QXJncy5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5SYWRCdXR0b25DYW5jZWxFdmVudEFyZ3MiLFN5cy5DYW5jZWxFdmVudEFyZ3MpOwpiLlJhZEJ1dHRvbkNoZWNrZWRDYW5jZWxFdmVudEFyZ3M9ZnVuY3Rpb24oZSxjLGQpe2IuUmFkQnV0dG9uQ2hlY2tlZENhbmNlbEV2ZW50QXJncy5pbml0aWFsaXplQmFzZSh0aGlzKTsKdGhpcy5zZXRfY29tbWFuZE5hbWUoZSk7CnRoaXMuc2V0X2NvbW1hbmRBcmd1bWVudChjKTsKdGhpcy5fdG9nZ2xlVHlwZT1kOwp9OwpiLlJhZEJ1dHRvbkNoZWNrZWRDYW5jZWxFdmVudEFyZ3MucHJvdG90eXBlPXtnZXRfdG9nZ2xlVHlwZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90b2dnbGVUeXBlOwp9LHNldF90b2dnbGVUeXBlOmZ1bmN0aW9uKGMpe3RoaXMuX3RvZ2dsZVR5cGU9YzsKfX07CmIuUmFkQnV0dG9uQ2hlY2tlZENhbmNlbEV2ZW50QXJncy5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5SYWRCdXR0b25DaGVja2VkQ2FuY2VsRXZlbnRBcmdzIixiLlJhZEJ1dHRvbkNhbmNlbEV2ZW50QXJncyk7CmIuUmFkQnV0dG9uVG9nZ2xlU3RhdGVDYW5jZWxFdmVudEFyZ3M9ZnVuY3Rpb24oZixjLGUsZCl7Yi5SYWRCdXR0b25Ub2dnbGVTdGF0ZUNhbmNlbEV2ZW50QXJncy5pbml0aWFsaXplQmFzZSh0aGlzKTsKdGhpcy5zZXRfY29tbWFuZE5hbWUoZik7CnRoaXMuc2V0X2NvbW1hbmRBcmd1bWVudChjKTsKdGhpcy5zZXRfdG9nZ2xlVHlwZShlKTsKdGhpcy5fY3VycmVudFRvZ2dsZVN0YXRlPWQ7Cn07CmIuUmFkQnV0dG9uVG9nZ2xlU3RhdGVDYW5jZWxFdmVudEFyZ3MucHJvdG90eXBlPXtnZXRfY3VycmVudFRvZ2dsZVN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2N1cnJlbnRUb2dnbGVTdGF0ZTsKfSxzZXRfY3VycmVudFRvZ2dsZVN0YXRlOmZ1bmN0aW9uKGMpe3RoaXMuX2N1cnJlbnRUb2dnbGVTdGF0ZT1jOwp9fTsKYi5SYWRCdXR0b25Ub2dnbGVTdGF0ZUNhbmNlbEV2ZW50QXJncy5yZWdpc3RlckNsYXNzKCJUZWxlcmlrLldlYi5VSS5SYWRCdXR0b25Ub2dnbGVTdGF0ZUNhbmNlbEV2ZW50QXJncyIsYi5SYWRCdXR0b25DaGVja2VkQ2FuY2VsRXZlbnRBcmdzKTsKYi5SYWRCdXR0b25Ub2dnbGVTdGF0ZT1mdW5jdGlvbihkLGMpe3RoaXMuX2luZGV4PWQ7CnRoaXMuX2F0dHJpYnV0ZXM9YzsKfTsKYi5SYWRCdXR0b25Ub2dnbGVTdGF0ZS5wcm90b3R5cGU9e2dldF9pbmRleDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbmRleDsKfSxzZXRfaW5kZXg6ZnVuY3Rpb24oYyl7dGhpcy5faW5kZXg9YzsKfSxfZ2V0UHJvcGVydHk6ZnVuY3Rpb24oYyl7dmFyIGQ9dGhpcy5fYXR0cmlidXRlc1tjXTsKaWYoZCl7cmV0dXJuIGQ7Cn1yZXR1cm4gbnVsbDsKfSxnZXRfdGV4dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRQcm9wZXJ0eSgidGV4dCIpOwp9LGdldF92YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRQcm9wZXJ0eSgidmFsdWUiKTsKfSxnZXRfY3NzQ2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0UHJvcGVydHkoImNzc0NsYXNzIik7Cn0sZ2V0X2hvdmVyZWRDc3NDbGFzczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRQcm9wZXJ0eSgiaG92ZXJlZENzc0NsYXNzIik7Cn0sZ2V0X3ByZXNzZWRDc3NDbGFzczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRQcm9wZXJ0eSgicHJlc3NlZENzc0NsYXNzIik7Cn0sZ2V0X2hlaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRQcm9wZXJ0eSgiaGVpZ2h0Iik7Cn0sZ2V0X3dpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldFByb3BlcnR5KCJ3aWR0aCIpOwp9LGdldF9wcmltYXJ5SWNvbkNzc0NsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldFByb3BlcnR5KCJwcmltYXJ5SWNvbkNzc0NsYXNzIik7Cn0sZ2V0X3ByaW1hcnlJY29uVXJsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldFByb3BlcnR5KCJwcmltYXJ5SWNvblVybCIpOwp9LGdldF9wcmltYXJ5SG92ZXJlZEljb25Vcmw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0UHJvcGVydHkoInByaW1hcnlIb3ZlcmVkSWNvblVybCIpOwp9LGdldF9wcmltYXJ5UHJlc3NlZEljb25Vcmw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0UHJvcGVydHkoInByaW1hcnlQcmVzc2VkSWNvblVybCIpOwp9LGdldF9wcmltYXJ5SWNvbkhlaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRQcm9wZXJ0eSgicHJpbWFyeUljb25IZWlnaHQiKTsKfSxnZXRfcHJpbWFyeUljb25XaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRQcm9wZXJ0eSgicHJpbWFyeUljb25XaWR0aCIpOwp9LGdldF9wcmltYXJ5SWNvblRvcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRQcm9wZXJ0eSgicHJpbWFyeUljb25Ub3AiKTsKfSxnZXRfcHJpbWFyeUljb25MZWZ0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldFByb3BlcnR5KCJwcmltYXJ5SWNvbkxlZnQiKTsKfSxnZXRfcHJpbWFyeUljb25Cb3R0b206ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0UHJvcGVydHkoInByaW1hcnlJY29uQm90dG9tIik7Cn0sZ2V0X3ByaW1hcnlJY29uUmlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0UHJvcGVydHkoInByaW1hcnlJY29uUmlnaHQiKTsKfSxnZXRfc2Vjb25kYXJ5SWNvbkNzc0NsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldFByb3BlcnR5KCJzZWNvbmRhcnlJY29uQ3NzQ2xhc3MiKTsKfSxnZXRfc2Vjb25kYXJ5SWNvblVybDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRQcm9wZXJ0eSgic2Vjb25kYXJ5SWNvblVybCIpOwp9LGdldF9zZWNvbmRhcnlIb3ZlcmVkSWNvblVybDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRQcm9wZXJ0eSgic2Vjb25kYXJ5SG92ZXJlZEljb25VcmwiKTsKfSxnZXRfc2Vjb25kYXJ5UHJlc3NlZEljb25Vcmw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0UHJvcGVydHkoInNlY29uZGFyeVByZXNzZWRJY29uVXJsIik7Cn0sZ2V0X3NlY29uZGFyeUljb25IZWlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0UHJvcGVydHkoInNlY29uZGFyeUljb25IZWlnaHQiKTsKfSxnZXRfc2Vjb25kYXJ5SWNvbldpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldFByb3BlcnR5KCJzZWNvbmRhcnlJY29uV2lkdGgiKTsKfSxnZXRfc2Vjb25kYXJ5SWNvblRvcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRQcm9wZXJ0eSgic2Vjb25kYXJ5SWNvblRvcCIpOwp9LGdldF9zZWNvbmRhcnlJY29uTGVmdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRQcm9wZXJ0eSgic2Vjb25kYXJ5SWNvbkxlZnQiKTsKfSxnZXRfc2Vjb25kYXJ5SWNvbkJvdHRvbTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRQcm9wZXJ0eSgic2Vjb25kYXJ5SWNvbkJvdHRvbSIpOwp9LGdldF9zZWNvbmRhcnlJY29uUmlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0UHJvcGVydHkoInNlY29uZGFyeUljb25SaWdodCIpOwp9LGdldF9pc0JhY2tncm91bmRJbWFnZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRQcm9wZXJ0eSgiaXNCYWNrZ3JvdW5kSW1hZ2UiKTsKfSxnZXRfaW1hZ2VVcmw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0UHJvcGVydHkoImltYWdlVXJsIik7Cn0sZ2V0X2hvdmVyZWRJbWFnZVVybDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRQcm9wZXJ0eSgiaG92ZXJlZEltYWdlVXJsIik7Cn0sZ2V0X3ByZXNzZWRJbWFnZVVybDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRQcm9wZXJ0eSgicHJlc3NlZEltYWdlVXJsIik7Cn19OwpiLlJhZEJ1dHRvblRvZ2dsZVN0YXRlLnJlZ2lzdGVyQ2xhc3MoIlRlbGVyaWsuV2ViLlVJLlJhZEJ1dHRvblRvZ2dsZVN0YXRlIik7CmIuUmFkQnV0dG9uUmFkaW9CdXR0b25zPXt9OwpiLnJlZ2lzdGVyUmFkQnV0dG9uPWZ1bmN0aW9uKGMpe3ZhciBkPWMuZ2V0X3VuaXF1ZUdyb3VwTmFtZSgpOwppZihkJiZiLkJ1dHRvblRvZ2dsZVR5cGUuUmFkaW89PWMuZ2V0X3RvZ2dsZVR5cGUoKSl7aWYoIXRoaXMuUmFkQnV0dG9uUmFkaW9CdXR0b25zW2RdKXt0aGlzLlJhZEJ1dHRvblJhZGlvQnV0dG9uc1tkXT1bXTsKQXJyYXkuYWRkKHRoaXMuUmFkQnV0dG9uUmFkaW9CdXR0b25zW2RdLGMpOwp9ZWxzZXtpZighQXJyYXkuY29udGFpbnModGhpcy5SYWRCdXR0b25SYWRpb0J1dHRvbnNbZF0sYykpe0FycmF5LmFkZCh0aGlzLlJhZEJ1dHRvblJhZGlvQnV0dG9uc1tkXSxjKTsKfX19fTsKYi51bnJlZ2lzdGVyUmFkQnV0dG9uPWZ1bmN0aW9uKGMpe3ZhciBkPWMuZ2V0X3VuaXF1ZUdyb3VwTmFtZSgpOwppZihkJiZ0aGlzLlJhZEJ1dHRvblJhZGlvQnV0dG9uc1tkXSl7QXJyYXkucmVtb3ZlKHRoaXMuUmFkQnV0dG9uUmFkaW9CdXR0b25zW2RdLGMpOwp9fTsKYi5SYWRCdXR0b249ZnVuY3Rpb24oYyl7Yi5SYWRCdXR0b24uaW5pdGlhbGl6ZUJhc2UodGhpcyxbY10pOwp0aGlzLl9jbGlja0RlbGVnYXRlPW51bGw7CnRoaXMuX3Bvc3RCYWNrUmVmZXJlbmNlPW51bGw7CnRoaXMuX2VuYWJsZWQ9dHJ1ZTsKdGhpcy5fcmVhZE9ubHk9ZmFsc2U7CnRoaXMuX3JlYWRPbmx5Q3NzQ2xhc3M9IiI7CnRoaXMuX3ZhbHVlPSIiOwp0aGlzLl90ZXh0PSIiOwp0aGlzLl90b29sVGlwPSIiOwp0aGlzLl9jaGVja2VkPWZhbHNlOwp0aGlzLl90YXJnZXQ9IiI7CnRoaXMuX25hdmlnYXRlVXJsPSIiOwp0aGlzLl9wcmltYXJ5SWNvbkVsZW1lbnQ9bnVsbDsKdGhpcy5fc2Vjb25kYXJ5SWNvbkVsZW1lbnQ9bnVsbDsKdGhpcy5fdGV4dEVsZW1lbnQ9bnVsbDsKdGhpcy5fc2hvdWxkRmlyZU1vdXNlT3Zlcj10cnVlOwp0aGlzLl9zaG91bGRGaXJlQWNjZXNzS2V5PXRydWU7CnRoaXMuX2lzSW1hZ2VCdXR0b249bnVsbDsKdGhpcy5fY29tbWFuZE5hbWU9IiI7CnRoaXMuX2NvbW1hbmRBcmd1bWVudD0iIjsKdGhpcy5fYXV0b1Bvc3RCYWNrPXRydWU7CnRoaXMudmFsaWRhdGlvblJlc3VsdD10cnVlOwp0aGlzLl90b2dnbGVTdGF0ZXM9W107CnRoaXMuX3NlbGVjdGVkVG9nZ2xlU3RhdGVJbmRleD0wOwp9OwpiLlJhZEJ1dHRvbi5wcm90b3R5cGU9e2luaXRpYWxpemU6ZnVuY3Rpb24oKXtiLlJhZEJ1dHRvbi5jYWxsQmFzZU1ldGhvZCh0aGlzLCJpbml0aWFsaXplIik7CnRoaXMuX3NldFJpZ2h0VG9MZWZ0KCk7CnRoaXMuX2F0dGFjaENsaWNrRXZlbnQodHJ1ZSk7CmlmKHRoaXMuZ2V0X2VuYWJsZWQoKSYmIXRoaXMuZ2V0X3JlYWRPbmx5KCkpe3RoaXMuX2F0dGFjaEV2ZW50cyh0cnVlKTsKfXRoaXMuX2luaXRIVE1MKCk7CnRoaXMuX2NyZWF0ZVRvZ2dsZVN0YXRlcygpOwppZih0aGlzLmdldF9jaGVja2VkKCkpe3RoaXMuY2xlYXJDaGVja2VkUmFkaW9zKHRoaXMuZ2V0X3VuaXF1ZUdyb3VwTmFtZSgpKTsKfWIucmVnaXN0ZXJSYWRCdXR0b24odGhpcyk7CnZhciBjPXRoaXM7CnNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgZD1jLmdldF90ZXh0RWxlbWVudCgpOwppZihjLklzSW5wdXRUeXBlU3VibWl0KCkpe2Quc2V0QXR0cmlidXRlKCJuYW1lIixjLmdldF91bmlxdWVJRCgpKTsKfWMuX3JlcXVlc3RJY29ucygpOwpjLl9yZXF1ZXN0SW1hZ2VEYXRhKCk7CmMuX3JlcXVlc3RUb2dnbGVTdGF0ZUltYWdlcygpOwp9LDApOwp0aGlzLl9jcmVhdGVDbGlja01ldGhvZCgpOwp0aGlzLnJhaXNlRXZlbnQoImxvYWQiLFN5cy5FdmVudEFyZ3MuRW1wdHkpOwp9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLl9hdHRhY2hDbGlja0V2ZW50KGZhbHNlKTsKaWYodGhpcy5nZXRfZW5hYmxlZCgpJiYhdGhpcy5nZXRfcmVhZE9ubHkoKSl7dGhpcy5fYXR0YWNoRXZlbnRzKGZhbHNlKTsKfXRoaXMuX2Rpc3Bvc2VUb2dnbGVTdGF0ZXMoKTsKYi51bnJlZ2lzdGVyUmFkQnV0dG9uKHRoaXMpOwpiLlJhZEJ1dHRvbi5jYWxsQmFzZU1ldGhvZCh0aGlzLCJkaXNwb3NlIik7Cn0scmVwYWludDpmdW5jdGlvbigpe30sX3NldFRleHQ6ZnVuY3Rpb24oZSl7aWYoIWUpe2U9IiI7Cn12YXIgYz10aGlzLmdldF90ZXh0RWxlbWVudCgpOwp2YXIgZD1jLnRhZ05hbWUudG9Mb3dlckNhc2UoKTsKaWYoZD09ImlucHV0Iil7Yy5zZXRBdHRyaWJ1dGUoInZhbHVlIixlKTsKfWVsc2V7aWYoZD09InNwYW4iKXtjLmlubmVySFRNTD1lOwp9fX0sX3NldFRvb2xUaXA6ZnVuY3Rpb24oYyl7dGhpcy5nZXRfZWxlbWVudCgpLnNldEF0dHJpYnV0ZSgidGl0bGUiLGMpOwp9LF9pbml0SFRNTDpmdW5jdGlvbigpe3ZhciBjPXRoaXMuZ2V0X2VsZW1lbnQoKTsKdmFyIGQ9dGhpcy5nZXRfZW5hYmxlZCgpOwp2YXIgZT10aGlzLmdldF90ZXh0RWxlbWVudCgpOwp2YXIgZj1mYWxzZTsKdGhpcy5fc2V0VGFyZ2V0KHRoaXMuZ2V0X3RhcmdldCgpKTsKaWYoIWQpe2Uuc2V0QXR0cmlidXRlKCJkaXNhYmxlZCIsImRpc2FibGVkIik7CmMuc2V0QXR0cmlidXRlKCJkaXNhYmxlZCIsImRpc2FibGVkIik7Cn1pZihlLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09ImlucHV0Iil7ZS50YWJJbmRleD0tMTsKfWVsc2V7Zj10cnVlOwp9aWYoJHRlbGVyaWsuaXNJRSl7aWYoZiYmYy5hY2Nlc3NLZXkpe2UuYWNjZXNzS2V5PWMuYWNjZXNzS2V5OwplLnRhYkluZGV4PSItMSI7CmMuYWNjZXNzS2V5PSIiOwppZih0aGlzLklzSW1hZ2VCdXR0b24oKSl7ZS5zdHlsZS5kaXNwbGF5PSJpbmxpbmUtYmxvY2siOwp9fX19LF9jcmVhdGVUb2dnbGVTdGF0ZXM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldF90b2dnbGVTdGF0ZXNEYXRhKCk7CnZhciBjPWUubGVuZ3RoOwpmb3IodmFyIGQ9MDsKZDxjOwpkKyspe3ZhciBmPW5ldyBiLlJhZEJ1dHRvblRvZ2dsZVN0YXRlKGQsZVtkXSk7CnRoaXMuZ2V0X3RvZ2dsZVN0YXRlcygpW2RdPWY7Cn19LF9kaXNwb3NlVG9nZ2xlU3RhdGVzOmZ1bmN0aW9uKCl7dGhpcy5zZXRfdG9nZ2xlU3RhdGVzKG51bGwpOwp9LF9zZXRSaWdodFRvTGVmdDpmdW5jdGlvbigpe3ZhciBkPW51bGw7CnZhciBjPXRoaXMuZ2V0X2VsZW1lbnQoKTsKaWYoYyl7ZD0kdGVsZXJpay5pc1JpZ2h0VG9MZWZ0KGMpOwp9dGhpcy5faXNSaWdodFRvTGVmdD1kOwppZihkJiZiLlJhZEJ1dHRvblR5cGUuVG9nZ2xlQnV0dG9uPT10aGlzLmdldF9idXR0b25UeXBlKCkmJihiLkJ1dHRvblRvZ2dsZVR5cGUuUmFkaW89PXRoaXMuZ2V0X3RvZ2dsZVR5cGUoKXx8Yi5CdXR0b25Ub2dnbGVUeXBlLkNoZWNrQm94PT10aGlzLmdldF90b2dnbGVUeXBlKCkpKXt0aGlzLl9hZGRDc3NDbGFzcyhjLCJyYlJ0bCIpOwp9fSxfYXR0YWNoRXZlbnRzOmZ1bmN0aW9uKGMpe3ZhciBlPXRoaXMuZ2V0X2VsZW1lbnQoKTsKaWYobnVsbD09ZSl7cmV0dXJuOwp9dmFyIGQ7CmlmKGMhPWZhbHNlKXt0aGlzLl9tb3VzZU92ZXJEZWxlZ2F0ZT1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX21vdXNlT3Zlcik7CnRoaXMuX21vdXNlT3V0RGVsZWdhdGU9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyx0aGlzLl9tb3VzZU91dCk7CnRoaXMuX21vdXNlRG93bkRlbGVnYXRlPUZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5fbW91c2VEb3duKTsKdGhpcy5fZm9jdXNEZWxlZ2F0ZT1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX2ZvY3VzKTsKJGFkZEhhbmRsZXIoZSwibW91c2VvdmVyIix0aGlzLl9tb3VzZU92ZXJEZWxlZ2F0ZSk7CiRhZGRIYW5kbGVyKGUsIm1vdXNlb3V0Iix0aGlzLl9tb3VzZU91dERlbGVnYXRlKTsKJGFkZEhhbmRsZXIoZSwibW91c2Vkb3duIix0aGlzLl9tb3VzZURvd25EZWxlZ2F0ZSk7CiRhZGRIYW5kbGVyKGUsImZvY3VzIix0aGlzLl9mb2N1c0RlbGVnYXRlKTsKdGhpcy5fa2V5VXBEZWxlZ2F0ZT1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX2tleVVwKTsKJGFkZEhhbmRsZXIoZSwia2V5dXAiLHRoaXMuX2tleVVwRGVsZWdhdGUpOwp0aGlzLl9rZXlQcmVzc0RlbGVnYXRlPUZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5fa2V5UHJlc3MpOwokYWRkSGFuZGxlcihlLCJrZXlwcmVzcyIsdGhpcy5fa2V5UHJlc3NEZWxlZ2F0ZSk7CmQ9dGhpcy5nZXRfdGV4dEVsZW1lbnQoKTsKaWYoZC50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJpbnB1dCIpe3RoaXMuX2lucHV0UHJlc3NEZWxlZ2F0ZT1GdW5jdGlvbi5jcmVhdGVEZWxlZ2F0ZSh0aGlzLHRoaXMuX2lucHV0S2V5UHJlc3MpOwokYWRkSGFuZGxlcihkLCJrZXlwcmVzcyIsdGhpcy5faW5wdXRQcmVzc0RlbGVnYXRlKTsKfWVsc2V7aWYoJHRlbGVyaWsuaXNJRSYmZS5hY2Nlc3NLZXkpe3RoaXMuX3NwYW5Gb2N1c0RlbGVnYXRlPUZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5fZm9jdXNUZXh0U3Bhbik7CiRhZGRIYW5kbGVyKGQsImZvY3VzIix0aGlzLl9zcGFuRm9jdXNEZWxlZ2F0ZSk7Cn19fWVsc2V7JHJlbW92ZUhhbmRsZXIoZSwibW91c2VvdmVyIix0aGlzLl9tb3VzZU92ZXJEZWxlZ2F0ZSk7CiRyZW1vdmVIYW5kbGVyKGUsIm1vdXNlb3V0Iix0aGlzLl9tb3VzZU91dERlbGVnYXRlKTsKJHJlbW92ZUhhbmRsZXIoZSwibW91c2Vkb3duIix0aGlzLl9tb3VzZURvd25EZWxlZ2F0ZSk7CiRyZW1vdmVIYW5kbGVyKGUsImZvY3VzIix0aGlzLl9mb2N1c0RlbGVnYXRlKTsKdGhpcy5fbW91c2VPdmVyRGVsZWdhdGU9bnVsbDsKdGhpcy5fbW91c2VPdXREZWxlZ2F0ZT1udWxsOwp0aGlzLl9tb3VzZURvd25EZWxlZ2F0ZT1udWxsOwp0aGlzLl9mb2N1c0RlbGVnYXRlPW51bGw7CiRyZW1vdmVIYW5kbGVyKGUsImtleXVwIix0aGlzLl9rZXlVcERlbGVnYXRlKTsKdGhpcy5fa2V5VXBEZWxlZ2F0ZT1udWxsOwokcmVtb3ZlSGFuZGxlcihlLCJrZXlwcmVzcyIsdGhpcy5fa2V5UHJlc3NEZWxlZ2F0ZSk7CnRoaXMuX2tleVByZXNzRGVsZWdhdGU9bnVsbDsKZD10aGlzLmdldF90ZXh0RWxlbWVudCgpOwppZihkLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09ImlucHV0Iil7JHJlbW92ZUhhbmRsZXIoZCwia2V5cHJlc3MiLHRoaXMuX2lucHV0UHJlc3NEZWxlZ2F0ZSk7CnRoaXMuX2lucHV0UHJlc3NEZWxlZ2F0ZT1udWxsOwp9ZWxzZXtpZigkdGVsZXJpay5pc0lFJiZlLmFjY2Vzc0tleSl7JHJlbW92ZUhhbmRsZXIoZCwiZm9jdXMiLHRoaXMuX3NwYW5Gb2N1c0RlbGVnYXRlKTsKdGhpcy5fc3BhbkZvY3VzRGVsZWdhdGU9bnVsbDsKfX19fSxfYXR0YWNoQ2xpY2tFdmVudDpmdW5jdGlvbihjKXt2YXIgZD10aGlzLmdldF9lbGVtZW50KCk7CmlmKG51bGw9PWQpe3JldHVybjsKfWlmKGMhPWZhbHNlKXt0aGlzLl9jbGlja0RlbGVnYXRlPUZ1bmN0aW9uLmNyZWF0ZURlbGVnYXRlKHRoaXMsdGhpcy5fbW91c2VDbGlja0hhbmRsZXIpOwokYWRkSGFuZGxlcihkLCJjbGljayIsdGhpcy5fY2xpY2tEZWxlZ2F0ZSk7Cn1lbHNleyRyZW1vdmVIYW5kbGVyKGQsImNsaWNrIix0aGlzLl9jbGlja0RlbGVnYXRlKTsKdGhpcy5fY2xpY2tEZWxlZ2F0ZT1udWxsOwp9fSxfZm9jdXM6ZnVuY3Rpb24oYyl7fSxfZm9jdXNUZXh0U3BhbjpmdW5jdGlvbihjKXt0cnl7dGhpcy5mb2N1cygpOwp9Y2F0Y2goZCl7cmV0dXJuOwp9aWYoIXRoaXMuX3Nob3VsZEZpcmVBY2Nlc3NLZXkpe3JldHVybjsKfWlmKHRoaXMuZ2V0X3RvZ2dsZVR5cGUoKT09Yi5CdXR0b25Ub2dnbGVUeXBlLk5vbmUpe3RoaXMuX3ByaXZhdGVDbGljayhmYWxzZSx0cnVlKTsKfWVsc2V7aWYodGhpcy5fcmFpc2VDbGlja2luZ0FuZFZhbGlkYXRlKCkpe3JldHVybiBmYWxzZTsKfXRoaXMuX3RvZ2dsZVN0YXRlKG51bGwpOwp0aGlzLmNsaWNrKCk7Cn19LF9rZXlVcDpmdW5jdGlvbihkKXt0aGlzLl90b2dnbGVTdGF0ZUNoYW5nZWQ9ZmFsc2U7CnZhciBjPWQucmF3RXZlbnQ7CnZhciBmPW51bGw7CmlmKCR0ZWxlcmlrLmlzSUUpe2Y9Yy5rZXlDb2RlOwp9ZWxzZXtmPWMud2hpY2g7Cn1pZihmPT0zMil7dGhpcy5fcHJpdmF0ZUNsaWNrKGZhbHNlLGZhbHNlKTsKfX0sX2tleVByZXNzOmZ1bmN0aW9uKGQpe3ZhciBjPWQucmF3RXZlbnQ7CnZhciBmPW51bGw7CmlmKCR0ZWxlcmlrLmlzSUUpe2Y9Yy5rZXlDb2RlOwp9ZWxzZXtmPWMud2hpY2g7Cn1pZihmPT0zMil7aWYoIXRoaXMuX3RvZ2dsZVN0YXRlQ2hhbmdlZCl7dGhpcy5fdG9nZ2xlU3RhdGVDaGFuZ2VkPXRydWU7CmlmKHRoaXMuX3JhaXNlQ2xpY2tpbmdBbmRWYWxpZGF0ZSgpKXskdGVsZXJpay5jYW5jZWxSYXdFdmVudChjKTsKcmV0dXJuIGZhbHNlOwp9dGhpcy5fdG9nZ2xlU3RhdGUoZCk7Cn0kdGVsZXJpay5jYW5jZWxSYXdFdmVudChjKTsKcmV0dXJuIGZhbHNlOwp9fSxfaW5wdXRLZXlQcmVzczpmdW5jdGlvbihkKXt2YXIgYz1kLnJhd0V2ZW50Owp2YXIgZj1udWxsOwppZigkdGVsZXJpay5pc0lFKXtmPWMua2V5Q29kZTsKfWVsc2V7Zj1jLndoaWNoOwp9aWYoZj09MzIpeyR0ZWxlcmlrLmNhbmNlbFJhd0V2ZW50KGMpOwpyZXR1cm4gZmFsc2U7Cn19LF9tb3VzZU92ZXI6ZnVuY3Rpb24oZSl7aWYodGhpcy5fc2hvdWxkRmlyZU1vdXNlT3Zlcil7dmFyIGM9dGhpcy5nZXRfZWxlbWVudCgpOwp0aGlzLl9tYXJrQ3NzQ2xhc3MoYyx0aGlzLmdldF9ob3ZlcmVkQ3NzQ2xhc3MoKSx0aGlzLmdldF9jc3NDbGFzcygpLGZhbHNlLGZhbHNlKTsKdmFyIGQ9dGhpcy5nZXRfaWNvbkRhdGEoKTsKdmFyIGY9dGhpcy5nZXRfaW1hZ2VEYXRhKCk7CmlmKHRoaXMuZ2V0X3RvZ2dsZVR5cGUoKT09Yi5CdXR0b25Ub2dnbGVUeXBlLk5vbmUpe3RoaXMuX21hcmtJbWFnZVN0YXRlKHRoaXMuZ2V0X3ByaW1hcnlJY29uRWxlbWVudCgpLGQucHJpbWFyeUhvdmVyZWRJY29uVXJsKTsKdGhpcy5fbWFya0ltYWdlU3RhdGUodGhpcy5nZXRfc2Vjb25kYXJ5SWNvbkVsZW1lbnQoKSxkLnNlY29uZGFyeUhvdmVyZWRJY29uVXJsKTsKaWYodGhpcy5Jc0ltYWdlQnV0dG9uKCkpe3RoaXMuX21hcmtJbWFnZVN0YXRlKGMsZi5ob3ZlcmVkSW1hZ2VVcmwpOwp9fWVsc2V7dmFyIGc9dGhpcy5nZXRfc2VsZWN0ZWRUb2dnbGVTdGF0ZSgpOwppZihnKXt0aGlzLl9tYXJrQ3NzQ2xhc3MoYyxnLmdldF9ob3ZlcmVkQ3NzQ2xhc3MoKSxnLmdldF9jc3NDbGFzcygpLGZhbHNlLGZhbHNlKTsKdGhpcy5fbWFya0ltYWdlU3RhdGUodGhpcy5nZXRfcHJpbWFyeUljb25FbGVtZW50KCksZy5nZXRfcHJpbWFyeUhvdmVyZWRJY29uVXJsKCkpOwp0aGlzLl9tYXJrSW1hZ2VTdGF0ZSh0aGlzLmdldF9zZWNvbmRhcnlJY29uRWxlbWVudCgpLGcuZ2V0X3NlY29uZGFyeUhvdmVyZWRJY29uVXJsKCkpOwp0aGlzLl9tYXJrSW1hZ2VTdGF0ZShjLGcuZ2V0X2hvdmVyZWRJbWFnZVVybCgpKTsKfX10aGlzLl9zaG91bGRGaXJlTW91c2VPdmVyPWZhbHNlOwp0aGlzLl9yYWlzZUV2ZW50KCJtb3VzZU92ZXIiLGZhbHNlKTsKfX0sX21vdXNlT3V0OmZ1bmN0aW9uKGcpe3ZhciBlPXRoaXMuZ2V0X2VsZW1lbnQoKTsKdmFyIGQ9dGhpcy5faXNNb3VzZU92ZXJFbGVtZW50KGUsZyk7CmlmKCFkKXt0aGlzLl9tYXJrQ3NzQ2xhc3MoZSx0aGlzLmdldF9jc3NDbGFzcygpLHRoaXMuZ2V0X2hvdmVyZWRDc3NDbGFzcygpLGZhbHNlLHRydWUpOwp2YXIgYz10aGlzLmdldF9pY29uRGF0YSgpOwp2YXIgaD10aGlzLmdldF9pbWFnZURhdGEoKTsKaWYodGhpcy5nZXRfdG9nZ2xlVHlwZSgpPT1iLkJ1dHRvblRvZ2dsZVR5cGUuTm9uZSl7dGhpcy5fY2xlYXJJbWFnZVN0YXRlKHRoaXMuZ2V0X3ByaW1hcnlJY29uRWxlbWVudCgpLGMucHJpbWFyeUljb25VcmwsbnVsbCxmYWxzZSxmYWxzZSk7CnRoaXMuX2NsZWFySW1hZ2VTdGF0ZSh0aGlzLmdldF9zZWNvbmRhcnlJY29uRWxlbWVudCgpLGMuc2Vjb25kYXJ5SWNvblVybCxudWxsLGZhbHNlLGZhbHNlKTsKaWYodGhpcy5Jc0ltYWdlQnV0dG9uKCkpe3RoaXMuX2NsZWFySW1hZ2VTdGF0ZShlLGguaW1hZ2VVcmwsbnVsbCxmYWxzZSxmYWxzZSk7Cn19ZWxzZXt2YXIgZj10aGlzLmdldF9zZWxlY3RlZFRvZ2dsZVN0YXRlKCk7CmlmKGYpe3RoaXMuX21hcmtDc3NDbGFzcyhlLGYuZ2V0X2Nzc0NsYXNzKCksZi5nZXRfaG92ZXJlZENzc0NsYXNzKCksZmFsc2UsdHJ1ZSk7CnRoaXMuX2NsZWFySW1hZ2VTdGF0ZSh0aGlzLmdldF9wcmltYXJ5SWNvbkVsZW1lbnQoKSxmLmdldF9wcmltYXJ5SWNvblVybCgpLG51bGwsZmFsc2UsZmFsc2UpOwp0aGlzLl9jbGVhckltYWdlU3RhdGUodGhpcy5nZXRfc2Vjb25kYXJ5SWNvbkVsZW1lbnQoKSxmLmdldF9zZWNvbmRhcnlJY29uVXJsKCksbnVsbCxmYWxzZSxmYWxzZSk7CnRoaXMuX2NsZWFySW1hZ2VTdGF0ZShlLGYuZ2V0X2ltYWdlVXJsKCksbnVsbCxmYWxzZSxmYWxzZSk7Cn19dGhpcy5fc2hvdWxkRmlyZU1vdXNlT3Zlcj10cnVlOwp0aGlzLl9yYWlzZUV2ZW50KCJtb3VzZU91dCIsZmFsc2UpOwp9fSxfbW91c2VDbGlja0hhbmRsZXI6ZnVuY3Rpb24oZil7aWYoIXRoaXMuZ2V0X2VuYWJsZWQoKXx8dGhpcy5nZXRfcmVhZE9ubHkoKSl7JHRlbGVyaWsuY2FuY2VsUmF3RXZlbnQoZi5yYXdFdmVudCk7CnJldHVybiBmYWxzZTsKfWlmKHRoaXMuX3JhaXNlQ2xpY2tpbmdBbmRWYWxpZGF0ZSgpfHx0aGlzLmdldF9lbGVtZW50KCkuZ2V0QXR0cmlidXRlKCJyd09wZW5lciIpKXt0aGlzLl9tb3VzZVVwKGYpOwokdGVsZXJpay5jYW5jZWxSYXdFdmVudChmLnJhd0V2ZW50KTsKcmV0dXJuIGZhbHNlOwp9dGhpcy5fdG9nZ2xlU3RhdGUoZik7CnRoaXMuX2lzU3BsaXRCdXR0b25DbGljaz1mYWxzZTsKdGhpcy5fc3BsaXRCdXR0b25Bcmd1bWVudD0iIjsKaWYodGhpcy5nZXRfZW5hYmxlU3BsaXRCdXR0b24oKSl7dmFyIGc9Zi50YXJnZXQ/Zi50YXJnZXQ6Zi5zcmNFbGVtZW50OwppZih0aGlzLl9jb250YWluc0Nzc0NsYXNzKGcsInJiU3BsaXRSaWdodCIpfHx0aGlzLl9jb250YWluc0Nzc0NsYXNzKGcsInJiU3BsaXRMZWZ0Iikpe3RoaXMuX2lzU3BsaXRCdXR0b25DbGljaz10cnVlOwp0aGlzLl9zcGxpdEJ1dHRvbkFyZ3VtZW50PSJ0cnVlIjsKfX10aGlzLl9yYWlzZUNsaWNrZWQoKTsKdGhpcy5fbW91c2VVcChmKTsKdmFyIGM9U3lzLldlYkZvcm1zP1N5cy5XZWJGb3Jtcy5QYWdlUmVxdWVzdE1hbmFnZXIuZ2V0SW5zdGFuY2UoKTpudWxsOwppZihjKXtjLl9hY3RpdmVEZWZhdWx0QnV0dG9uQ2xpY2tlZD10cnVlOwp9dmFyIGU9dGhpcy5fcG9zdGJhY2soZik7CmlmKGMpe2MuX2FjdGl2ZURlZmF1bHRCdXR0b25DbGlja2VkPWZhbHNlOwp9c2V0VGltZW91dChmdW5jdGlvbigpe1BhZ2VfQmxvY2tTdWJtaXQ9ZmFsc2U7Cn0sMCk7CmlmKCR0ZWxlcmlrLmlzSUU2JiYoIXRoaXMuSXNJbnB1dFR5cGVTdWJtaXQoKXx8dGhpcy5fY2xpY2tFbGVtZW50VGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSE9ImlucHV0Iikpe3ZhciBkPXRoaXMuZ2V0X25hdmlnYXRlVXJsKCkmJnRoaXMuZ2V0X2J1dHRvblR5cGUoKT09Yi5SYWRCdXR0b25UeXBlLkxpbmtCdXR0b247CmlmKCFkKXskdGVsZXJpay5jYW5jZWxSYXdFdmVudChmLnJhd0V2ZW50KTsKfX1yZXR1cm4gZTsKfSxfbW91c2VEb3duOmZ1bmN0aW9uKGkpe3RoaXMuX3Nob3VsZEZpcmVNb3VzZU92ZXI9ZmFsc2U7CnRoaXMuX3Nob3VsZEZpcmVBY2Nlc3NLZXk9ZmFsc2U7CnZhciBoPWkudGFyZ2V0P2kudGFyZ2V0Omkuc3JjRWxlbWVudDsKdGhpcy5fY2xpY2tFbGVtZW50VGFyZ2V0PWg7CnZhciBlPXRoaXMuZ2V0X2VsZW1lbnQoKTsKdmFyIGY9dGhpcy5fY29udGFpbnNDc3NDbGFzcyhlLHRoaXMuZ2V0X2hvdmVyZWRDc3NDbGFzcygpKT90aGlzLmdldF9ob3ZlcmVkQ3NzQ2xhc3MoKTp0aGlzLmdldF9jc3NDbGFzcygpOwp0aGlzLl9tYXJrQ3NzQ2xhc3MoZSx0aGlzLmdldF9wcmVzc2VkQ3NzQ2xhc3MoKSxmLGZhbHNlLGZhbHNlKTsKaWYoKCR0ZWxlcmlrLmlzSUV8fCR0ZWxlcmlrLmlzT3BlcmEpJiZ0aGlzLmdldF9idXR0b25UeXBlKCk9PWIuUmFkQnV0dG9uVHlwZS5TdGFuZGFyZEJ1dHRvbiYmKHRoaXMuX2NvbnRhaW5zQ3NzQ2xhc3MoZSwicmJTa2lubmVkQnV0dG9uIil8fHRoaXMuX2NvbnRhaW5zQ3NzQ2xhc3MoZSwicmJWZXJ0aWNhbEJ1dHRvbiIpKSl7dGhpcy5fYWRkQ3NzQ2xhc3MoZSwicmJQcmVzc2VkQnV0dG9uIik7CmlmKCR0ZWxlcmlrLmlzSUU4JiZoLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09ImlucHV0Iil7aWYodGhpcy5faXNSaWdodFRvTGVmdCl7dGhpcy5fYWRkQ3NzQ2xhc3MoZSwicmJQcmVzc2VkSUU4UnRsIik7Cn1lbHNle3RoaXMuX2FkZENzc0NsYXNzKGUsInJiUHJlc3NlZElFOCIpOwp9fX12YXIgYz10aGlzLmdldF9pY29uRGF0YSgpOwp2YXIgaj10aGlzLmdldF9pbWFnZURhdGEoKTsKaWYodGhpcy5nZXRfdG9nZ2xlVHlwZSgpPT1iLkJ1dHRvblRvZ2dsZVR5cGUuTm9uZSl7dGhpcy5fbWFya0ltYWdlU3RhdGUodGhpcy5nZXRfcHJpbWFyeUljb25FbGVtZW50KCksYy5wcmltYXJ5UHJlc3NlZEljb25VcmwpOwp0aGlzLl9tYXJrSW1hZ2VTdGF0ZSh0aGlzLmdldF9zZWNvbmRhcnlJY29uRWxlbWVudCgpLGMuc2Vjb25kYXJ5UHJlc3NlZEljb25VcmwpOwppZih0aGlzLklzSW1hZ2VCdXR0b24oKSl7dGhpcy5fbWFya0ltYWdlU3RhdGUoZSxqLnByZXNzZWRJbWFnZVVybCk7Cn19ZWxzZXt2YXIgZD10aGlzLmdldF9zZWxlY3RlZFRvZ2dsZVN0YXRlKCk7CmlmKGQpe3ZhciBnPXRoaXMuX2NvbnRhaW5zQ3NzQ2xhc3MoZSxkLmdldF9ob3ZlcmVkQ3NzQ2xhc3MoKSk/ZC5nZXRfaG92ZXJlZENzc0NsYXNzKCk6ZC5nZXRfY3NzQ2xhc3MoKTsKdGhpcy5fbWFya0Nzc0NsYXNzKGUsZC5nZXRfcHJlc3NlZENzc0NsYXNzKCksZyxmYWxzZSxmYWxzZSk7CnRoaXMuX21hcmtJbWFnZVN0YXRlKHRoaXMuZ2V0X3ByaW1hcnlJY29uRWxlbWVudCgpLGQuZ2V0X3ByaW1hcnlQcmVzc2VkSWNvblVybCgpKTsKdGhpcy5fbWFya0ltYWdlU3RhdGUodGhpcy5nZXRfc2Vjb25kYXJ5SWNvbkVsZW1lbnQoKSxkLmdldF9zZWNvbmRhcnlQcmVzc2VkSWNvblVybCgpKTsKdGhpcy5fbWFya0ltYWdlU3RhdGUoZSxkLmdldF9wcmVzc2VkSW1hZ2VVcmwoKSk7Cn19fSxfbW91c2VVcDpmdW5jdGlvbihqKXt0aGlzLl9zaG91bGRGaXJlTW91c2VPdmVyPXRydWU7CnZhciBkPXRoaXM7CndpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZC5fc2hvdWxkRmlyZUFjY2Vzc0tleT10cnVlOwp9LDApOwp2YXIgZj10aGlzLmdldF9lbGVtZW50KCk7CnZhciBlPXRoaXMuX2lzTW91c2VPdmVyRWxlbWVudCh0aGlzLmdldF9lbGVtZW50KCksaik7CnZhciBjPShlJiZ0aGlzLmdldF9ob3ZlcmVkQ3NzQ2xhc3MoKSk/dGhpcy5nZXRfaG92ZXJlZENzc0NsYXNzKCk6dGhpcy5nZXRfY3NzQ2xhc3MoKTsKdGhpcy5fbWFya0Nzc0NsYXNzKGYsYyx0aGlzLmdldF9wcmVzc2VkQ3NzQ2xhc3MoKSx0cnVlLHRydWUpOwppZigkdGVsZXJpay5pc0lFfHwkdGVsZXJpay5pc09wZXJhKXt0aGlzLl9yZW1vdmVDc3NDbGFzcyhmLCJyYlByZXNzZWRCdXR0b24iKTsKaWYoJHRlbGVyaWsuaXNJRTgpe3RoaXMuX3JlbW92ZUNzc0NsYXNzKGYsInJiUHJlc3NlZElFOFJ0bCIpOwp0aGlzLl9yZW1vdmVDc3NDbGFzcyhmLCJyYlByZXNzZWRJRTgiKTsKfX12YXIgaT10aGlzLmdldF9pY29uRGF0YSgpOwp2YXIgaz10aGlzLmdldF9pbWFnZURhdGEoKTsKaWYodGhpcy5nZXRfdG9nZ2xlVHlwZSgpPT1iLkJ1dHRvblRvZ2dsZVR5cGUuTm9uZSl7dGhpcy5fY2xlYXJJbWFnZVN0YXRlKHRoaXMuZ2V0X3ByaW1hcnlJY29uRWxlbWVudCgpLGkucHJpbWFyeUljb25VcmwsaS5wcmltYXJ5SG92ZXJlZEljb25VcmwsZSx0cnVlKTsKdGhpcy5fY2xlYXJJbWFnZVN0YXRlKHRoaXMuZ2V0X3NlY29uZGFyeUljb25FbGVtZW50KCksaS5zZWNvbmRhcnlJY29uVXJsLGkuc2Vjb25kYXJ5SG92ZXJlZEljb25VcmwsZSx0cnVlKTsKaWYodGhpcy5Jc0ltYWdlQnV0dG9uKCkpe3RoaXMuX2NsZWFySW1hZ2VTdGF0ZShmLGsuaW1hZ2VVcmwsay5ob3ZlcmVkSW1hZ2VVcmwsZSx0cnVlKTsKfX1lbHNle3ZhciBoPXRoaXMuZ2V0X3NlbGVjdGVkVG9nZ2xlU3RhdGUoKTsKaWYoaCl7dmFyIGc9KGUmJmguZ2V0X2hvdmVyZWRDc3NDbGFzcygpKT9oLmdldF9ob3ZlcmVkQ3NzQ2xhc3MoKTpoLmdldF9jc3NDbGFzcygpOwp0aGlzLl9tYXJrQ3NzQ2xhc3MoZixnLGguZ2V0X3ByZXNzZWRDc3NDbGFzcygpLHRydWUsdHJ1ZSk7CnRoaXMuX2NsZWFySW1hZ2VTdGF0ZSh0aGlzLmdldF9wcmltYXJ5SWNvbkVsZW1lbnQoKSxoLmdldF9wcmltYXJ5SWNvblVybCgpLGguZ2V0X3ByaW1hcnlIb3ZlcmVkSWNvblVybCgpLGUsdHJ1ZSk7CnRoaXMuX2NsZWFySW1hZ2VTdGF0ZSh0aGlzLmdldF9zZWNvbmRhcnlJY29uRWxlbWVudCgpLGguZ2V0X3NlY29uZGFyeUljb25VcmwoKSxoLmdldF9zZWNvbmRhcnlIb3ZlcmVkSWNvblVybCgpLGUsdHJ1ZSk7CnRoaXMuX2NsZWFySW1hZ2VTdGF0ZShmLGguZ2V0X2ltYWdlVXJsKCksaC5nZXRfaG92ZXJlZEltYWdlVXJsKCksZSx0cnVlKTsKfX19LF9pc01vdXNlT3ZlckVsZW1lbnQ6ZnVuY3Rpb24oYyxkKXt2YXIgZz0kdGVsZXJpay5nZXRCb3VuZHMoYyk7CnZhciBmPSR0ZWxlcmlrLmdldERvY3VtZW50UmVsYXRpdmVDdXJzb3JQb3NpdGlvbihkKTsKZy54Kz0yOwpnLnkrPTI7Cmcud2lkdGgtPTQ7CmcuaGVpZ2h0LT00OwpyZXR1cm4gJHRlbGVyaWsuY29udGFpbnNQb2ludChnLGYubGVmdCxmLnRvcCk7Cn0sX3Bvc3RiYWNrOmZ1bmN0aW9uKGQpe2lmKCF0aGlzLmdldF9hdXRvUG9zdEJhY2soKSl7aWYodGhpcy5nZXRfYnV0dG9uVHlwZSgpPT1iLlJhZEJ1dHRvblR5cGUuU3RhbmRhcmRCdXR0b258fCF0aGlzLmdldF9uYXZpZ2F0ZVVybCgpKXskdGVsZXJpay5jYW5jZWxSYXdFdmVudChkLnJhd0V2ZW50KTsKcmV0dXJuIGZhbHNlOwp9cmV0dXJuIHRydWU7Cn1pZighdGhpcy5nZXRfbmF2aWdhdGVVcmwoKSl7dGhpcy5nZXRfZWxlbWVudCgpLnJlbW92ZUF0dHJpYnV0ZSgidGFyZ2V0Iik7Cn10aGlzLl9jbGlja0VsZW1lbnRUYXJnZXQ9bnVsbDsKaWYodGhpcy5Jc0lucHV0VHlwZVN1Ym1pdCgpKXt0aGlzLl9jbGlja0VsZW1lbnRUYXJnZXQ9ZC50YXJnZXQ/ZC50YXJnZXQ6ZC5zcmNFbGVtZW50Owp9aWYoIXRoaXMuX3Bvc3RCYWNrUmVmZXJlbmNlKXtpZih0aGlzLklzSW5wdXRUeXBlU3VibWl0KCkpe2lmKHRoaXMuX2lzU3BsaXRCdXR0b25DbGlja3x8dGhpcy5fY2xpY2tFbGVtZW50VGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSE9ImlucHV0Iil7X19kb1Bvc3RCYWNrKHRoaXMuZ2V0X3VuaXF1ZUlEKCksdGhpcy5fc3BsaXRCdXR0b25Bcmd1bWVudCk7Cn1yZXR1cm4gdHJ1ZTsKfWVsc2V7X19kb1Bvc3RCYWNrKHRoaXMuZ2V0X3VuaXF1ZUlEKCksdGhpcy5fc3BsaXRCdXR0b25Bcmd1bWVudCk7CnJldHVybiB0cnVlOwp9fXZhciBjPXRoaXMuX3Bvc3RCYWNrUmVmZXJlbmNlLnJlcGxhY2UoIldlYkZvcm1fRG9Qb3N0QmFja1dpdGhPcHRpb25zIiwidGhpcy5XZWJGb3JtX0RvUG9zdEJhY2tXaXRoT3B0aW9ucyIpOwpjPWMucmVwbGFjZSgiUmFkQnV0dG9uRXZlbnRBcmd1bWVudHMiLHRoaXMuX3NwbGl0QnV0dG9uQXJndW1lbnQpOwpldmFsKGMpOwp9LF92YWxpZGF0ZTpmdW5jdGlvbihjKXt0aGlzLnZhbGlkYXRpb25SZXN1bHQ9dHJ1ZTsKaWYodHlwZW9mKFBhZ2VfQ2xpZW50VmFsaWRhdGUpPT0iZnVuY3Rpb24iKXt0aGlzLnZhbGlkYXRpb25SZXN1bHQ9UGFnZV9DbGllbnRWYWxpZGF0ZShjKTsKfX0sV2ViRm9ybV9Eb1Bvc3RCYWNrV2l0aE9wdGlvbnM6ZnVuY3Rpb24oZil7dmFyIGQ9dGhpcy52YWxpZGF0aW9uUmVzdWx0OwppZihkKXtpZigodHlwZW9mKGYuYWN0aW9uVXJsKSE9InVuZGVmaW5lZCIpJiYoZi5hY3Rpb25VcmwhPW51bGwpJiYoZi5hY3Rpb25VcmwubGVuZ3RoPjApKXt0aGVGb3JtLmFjdGlvbj1mLmFjdGlvblVybDsKfWlmKGYudHJhY2tGb2N1cyl7dmFyIGM9dGhlRm9ybS5lbGVtZW50cy5fX0xBU1RGT0NVUzsKaWYoKHR5cGVvZihjKSE9InVuZGVmaW5lZCIpJiYoYyE9bnVsbCkpe2lmKHR5cGVvZihkb2N1bWVudC5hY3RpdmVFbGVtZW50KT09InVuZGVmaW5lZCIpe2MudmFsdWU9Zi5ldmVudFRhcmdldDsKfWVsc2V7dmFyIGU9ZG9jdW1lbnQuYWN0aXZlRWxlbWVudDsKaWYoKHR5cGVvZihlKSE9InVuZGVmaW5lZCIpJiYoZSE9bnVsbCkpe2lmKCh0eXBlb2YoZS5pZCkhPSJ1bmRlZmluZWQiKSYmKGUuaWQhPW51bGwpJiYoZS5pZC5sZW5ndGg+MCkpe2MudmFsdWU9ZS5pZDsKfWVsc2V7aWYodHlwZW9mKGUubmFtZSkhPSJ1bmRlZmluZWQiKXtjLnZhbHVlPWUubmFtZTsKfX19fX19fWlmKGYuY2xpZW50U3VibWl0fHwodGhpcy5fY2xpY2tFbGVtZW50VGFyZ2V0JiZ0aGlzLl9jbGlja0VsZW1lbnRUYXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpIT0iaW5wdXQiKSl7X19kb1Bvc3RCYWNrKGYuZXZlbnRUYXJnZXQsZi5ldmVudEFyZ3VtZW50KTsKfX0sX3RvZ2dsZVN0YXRlOmZ1bmN0aW9uKGUpe3ZhciBmPXRoaXMuZ2V0X3RvZ2dsZVR5cGUoKTsKdmFyIGQ9dGhpcy5nZXRfY2hlY2tlZCgpOwp2YXIgYzsKaWYoZj09Yi5CdXR0b25Ub2dnbGVUeXBlLlJhZGlvKXtpZihkKXtyZXR1cm47Cn1lbHNle2M9dGhpcy5fcmFpc2VFdmVudCgiY2hlY2tlZENoYW5naW5nIix0cnVlKTsKaWYoYyl7aWYoZSl7JHRlbGVyaWsuY2FuY2VsUmF3RXZlbnQoZS5yYXdFdmVudCk7Cn1yZXR1cm4gZmFsc2U7Cn10aGlzLmNsZWFyQ2hlY2tlZFJhZGlvcyh0aGlzLmdldF91bmlxdWVHcm91cE5hbWUoKSk7CnRoaXMuc2V0X2NoZWNrZWQoIWQpOwp9fWVsc2V7aWYoZj09Yi5CdXR0b25Ub2dnbGVUeXBlLkNoZWNrQm94KXtjPXRoaXMuX3JhaXNlRXZlbnQoImNoZWNrZWRDaGFuZ2luZyIsdHJ1ZSk7CmlmKGMpe2lmKGUpeyR0ZWxlcmlrLmNhbmNlbFJhd0V2ZW50KGUucmF3RXZlbnQpOwp9cmV0dXJuIGZhbHNlOwp9dGhpcy5zZXRfY2hlY2tlZCghZCk7Cn1lbHNle2lmKGY9PWIuQnV0dG9uVG9nZ2xlVHlwZS5DdXN0b21Ub2dnbGUpe2lmKHRoaXMuZ2V0X3RvZ2dsZVN0YXRlcygpLmxlbmd0aD4wKXtjPXRoaXMuX3JhaXNlRXZlbnQoInRvZ2dsZVN0YXRlQ2hhbmdpbmciLHRydWUpOwppZihjKXtpZihlKXskdGVsZXJpay5jYW5jZWxSYXdFdmVudChlLnJhd0V2ZW50KTsKfXJldHVybiBmYWxzZTsKfX10aGlzLl9zZXRUb2dnbGVTdGF0ZSgpOwp9fX19LF9zZXRUb2dnbGVTdGF0ZTpmdW5jdGlvbigpe3ZhciBjPXRoaXMuZ2V0X3RvZ2dsZVN0YXRlcygpLmxlbmd0aDsKaWYoYz4wKXt2YXIgZT10aGlzLmdldF9zZWxlY3RlZFRvZ2dsZVN0YXRlSW5kZXgoKTsKdmFyIGQ9ZSsxOwppZihkPT1jKXtkPTA7Cn10aGlzLnNldF9zZWxlY3RlZFRvZ2dsZVN0YXRlSW5kZXgoZCk7Cn19LGNsZWFyQ2hlY2tlZFJhZGlvczpmdW5jdGlvbihjKXt2YXIgZj1iLlJhZEJ1dHRvblJhZGlvQnV0dG9uc1tjXTsKaWYoZil7dmFyIGQ9Zi5sZW5ndGg7CmZvcih2YXIgZT0wOwplPGQ7CmUrKyl7ZltlXS5zZXRfY2hlY2tlZChmYWxzZSk7Cn19fSxfYXBwbHlDQmFuZFJhZGlvUHJvcHM6ZnVuY3Rpb24oZSl7dmFyIGY9dGhpcy5nZXRfdG9nZ2xlVHlwZSgpOwp2YXIgaT10aGlzLmdldF9idXR0b25UeXBlKCk7CnZhciBlPXRoaXMuZ2V0X2NoZWNrZWQoKTsKdmFyIGc9dGhpcy5nZXRfcHJpbWFyeUljb25FbGVtZW50KCk7CnZhciBoPXRoaXMuZ2V0X2VsZW1lbnQoKTsKdmFyIGQ9KGY9PWIuQnV0dG9uVG9nZ2xlVHlwZS5SYWRpb3x8Zj09Yi5CdXR0b25Ub2dnbGVUeXBlLkNoZWNrQm94KTsKaWYoaT09Yi5SYWRCdXR0b25UeXBlLlRvZ2dsZUJ1dHRvbil7aWYoZj09Yi5CdXR0b25Ub2dnbGVUeXBlLlJhZGlvKXtpZihlKXt0aGlzLl9zd2l0Y2hDc3NDbGFzc2VzKGcsInJiVG9nZ2xlUmFkaW9DaGVja2VkIiwicmJUb2dnbGVSYWRpbyIpOwp9ZWxzZXt0aGlzLl9zd2l0Y2hDc3NDbGFzc2VzKGcsInJiVG9nZ2xlUmFkaW8iLCJyYlRvZ2dsZVJhZGlvQ2hlY2tlZCIpOwp9fWVsc2V7aWYoZj09Yi5CdXR0b25Ub2dnbGVUeXBlLkNoZWNrQm94KXtpZihlKXt0aGlzLl9zd2l0Y2hDc3NDbGFzc2VzKGcsInJiVG9nZ2xlQ2hlY2tib3hDaGVja2VkIiwicmJUb2dnbGVDaGVja2JveCIpOwp9ZWxzZXt0aGlzLl9zd2l0Y2hDc3NDbGFzc2VzKGcsInJiVG9nZ2xlQ2hlY2tib3giLCJyYlRvZ2dsZUNoZWNrYm94Q2hlY2tlZCIpOwp9fX19aWYoZCl7dmFyIGM9IXRoaXMuSXNJbWFnZUJ1dHRvbigpOwppZihlJiZjKXtzd2l0Y2godGhpcy5nZXRfYnV0dG9uVHlwZSgpKXtjYXNlIGIuUmFkQnV0dG9uVHlwZS5TdGFuZGFyZEJ1dHRvbjppZihTeXMuVUkuRG9tRWxlbWVudC5jb250YWluc0Nzc0NsYXNzKGgsInJiU2tpbm5lZEJ1dHRvbiIpKXt0aGlzLl9hZGRDc3NDbGFzcyhoLCJyYlNraW5uZWRCdXR0b25DaGVja2VkIik7Cn1lbHNle3RoaXMuX2FkZENzc0NsYXNzKGgsInJiVmVydGljYWxCdXR0b25DaGVja2VkIik7Cn1icmVhazsKY2FzZSBiLlJhZEJ1dHRvblR5cGUuTGlua0J1dHRvbjp0aGlzLl9hZGRDc3NDbGFzcyhoLCJyYkxpbmtCdXR0b25DaGVja2VkIik7CmJyZWFrOwp9fWVsc2V7c3dpdGNoKHRoaXMuZ2V0X2J1dHRvblR5cGUoKSl7Y2FzZSBiLlJhZEJ1dHRvblR5cGUuU3RhbmRhcmRCdXR0b246dGhpcy5fcmVtb3ZlQ3NzQ2xhc3MoaCwicmJTa2lubmVkQnV0dG9uQ2hlY2tlZCIpOwp0aGlzLl9yZW1vdmVDc3NDbGFzcyhoLCJyYlZlcnRpY2FsQnV0dG9uQ2hlY2tlZCIpOwpicmVhazsKY2FzZSBiLlJhZEJ1dHRvblR5cGUuTGlua0J1dHRvbjp0aGlzLl9yZW1vdmVDc3NDbGFzcyhoLCJyYkxpbmtCdXR0b25DaGVja2VkIik7CmJyZWFrOwp9fX19LF9hcHBseVRvZ2dsZVByb3BlcnRpZXM6ZnVuY3Rpb24oZSl7dmFyIGY9dGhpcy5nZXRfdG9nZ2xlU3RhdGVzKClbZV07CnZhciBsPXRoaXMuZ2V0X3NlbGVjdGVkVG9nZ2xlU3RhdGUoKTsKdmFyIGc9dGhpcy5nZXRfZWxlbWVudCgpOwp2YXIgaD10aGlzLmdldF9wcmltYXJ5SWNvbkVsZW1lbnQoKTsKdmFyIG09dGhpcy5nZXRfc2Vjb25kYXJ5SWNvbkVsZW1lbnQoKTsKdmFyIGM9dGhpcy5nZXRfaWNvbkRhdGEoKTsKaWYobC5nZXRfdGV4dCgpKXt0aGlzLl9zZXRUZXh0KGwuZ2V0X3RleHQoKSk7Cn1lbHNle3RoaXMuX3NldFRleHQodGhpcy5nZXRfdGV4dCgpKTsKfXRoaXMuX3JlbW92ZUNzc0NsYXNzKGcsZi5nZXRfY3NzQ2xhc3MoKSk7CnRoaXMuX3JlbW92ZUNzc0NsYXNzKGcsZi5nZXRfaG92ZXJlZENzc0NsYXNzKCkpOwp0aGlzLl9yZW1vdmVDc3NDbGFzcyhnLGYuZ2V0X3ByZXNzZWRDc3NDbGFzcygpKTsKdGhpcy5fYWRkQ3NzQ2xhc3MoZyxsLmdldF9jc3NDbGFzcygpKTsKdGhpcy5fc2V0U2l6ZShnLGwuZ2V0X3dpZHRoKCksbC5nZXRfaGVpZ2h0KCksdGhpcy5nZXRfd2lkdGgoKSx0aGlzLmdldF9oZWlnaHQoKSx0cnVlKTsKdGhpcy5fcmVtb3ZlQ3NzQ2xhc3MoaCxmLmdldF9wcmltYXJ5SWNvbkNzc0NsYXNzKCkpOwp0aGlzLl9hZGRDc3NDbGFzcyhoLGwuZ2V0X3ByaW1hcnlJY29uQ3NzQ2xhc3MoKSk7CnZhciBrPWwuZ2V0X3ByaW1hcnlJY29uVXJsKCk/bC5nZXRfcHJpbWFyeUljb25VcmwoKTpjLnByaW1hcnlJY29uVXJsOwp0aGlzLl9tYXJrSW1hZ2VTdGF0ZShoLGspOwp0aGlzLl9zZXRTaXplKGgsbC5nZXRfcHJpbWFyeUljb25XaWR0aCgpLGwuZ2V0X3ByaW1hcnlJY29uSGVpZ2h0KCksYy5wcmltYXJ5V2lkdGgsYy5wcmltYXJ5SGVpZ2h0KTsKdGhpcy5fc2V0Q29vcmRpbmF0ZXMoaCxsLmdldF9wcmltYXJ5SWNvblRvcCgpLGwuZ2V0X3ByaW1hcnlJY29uTGVmdCgpLGwuZ2V0X3ByaW1hcnlJY29uQm90dG9tKCksbC5nZXRfcHJpbWFyeUljb25SaWdodCgpLG51bGwsbnVsbCxudWxsLG51bGwpOwp0aGlzLl9yZW1vdmVDc3NDbGFzcyhtLGYuZ2V0X3NlY29uZGFyeUljb25Dc3NDbGFzcygpKTsKdGhpcy5fYWRkQ3NzQ2xhc3MobSxsLmdldF9zZWNvbmRhcnlJY29uQ3NzQ2xhc3MoKSk7CnZhciBpPWwuZ2V0X3NlY29uZGFyeUljb25VcmwoKT9sLmdldF9zZWNvbmRhcnlJY29uVXJsKCk6Yy5zZWNvbmRhcnlJY29uVXJsOwp0aGlzLl9tYXJrSW1hZ2VTdGF0ZShtLGkpOwp0aGlzLl9zZXRTaXplKG0sbC5nZXRfc2Vjb25kYXJ5SWNvbldpZHRoKCksbC5nZXRfc2Vjb25kYXJ5SWNvbkhlaWdodCgpLGMuc2Vjb25kYXJ5V2lkdGgsYy5zZWNvbmRhcnlIZWlnaHQpOwp0aGlzLl9zZXRDb29yZGluYXRlcyhtLGwuZ2V0X3NlY29uZGFyeUljb25Ub3AoKSxsLmdldF9zZWNvbmRhcnlJY29uTGVmdCgpLGwuZ2V0X3NlY29uZGFyeUljb25Cb3R0b20oKSxsLmdldF9zZWNvbmRhcnlJY29uUmlnaHQoKSxudWxsLG51bGwsbnVsbCxudWxsKTsKdmFyIGQ9bC5nZXRfaW1hZ2VVcmwoKT9sLmdldF9pbWFnZVVybCgpOnRoaXMuZ2V0X2ltYWdlRGF0YSgpLmltYWdlVXJsOwp0aGlzLl9tYXJrSW1hZ2VTdGF0ZShnLGQpOwp2YXIgaj0oIWwuZ2V0X2lzQmFja2dyb3VuZEltYWdlKCkmJmQpOwppZih0aGlzLklzSW1hZ2VCdXR0b24oKSl7dGhpcy5fc2hvd0hpZGVFbGVtZW50cyhoLG0sdGhpcy5nZXRfdGV4dEVsZW1lbnQoKSxqLHRoaXMuZ2V0X2hlaWdodCgpKTsKfX0sX3Nob3dIaWRlRWxlbWVudHM6ZnVuY3Rpb24oZSxjLGQsZyxmKXtpZighZyl7dGhpcy5fcmVtb3ZlQ3NzQ2xhc3MoZSwicmJIaWRlRWxlbWVudCIpOwp0aGlzLl9yZW1vdmVDc3NDbGFzcyhjLCJyYkhpZGVFbGVtZW50Iik7CnRoaXMuX3JlbW92ZUNzc0NsYXNzKGQsInJiSGlkZUVsZW1lbnQiKTsKaWYoZiYmZCl7ZC5zdHlsZS5saW5lSGVpZ2h0PWY7Cn19ZWxzZXt0aGlzLl9hZGRDc3NDbGFzcyhlLCJyYkhpZGVFbGVtZW50Iik7CnRoaXMuX2FkZENzc0NsYXNzKGMsInJiSGlkZUVsZW1lbnQiKTsKdGhpcy5fYWRkQ3NzQ2xhc3MoZCwicmJIaWRlRWxlbWVudCIpOwp9fSxfbWFya0Nzc0NsYXNzOmZ1bmN0aW9uKGMsZixkLGUsZyl7aWYoZSYmdGhpcy5nZXRfYXV0b1Bvc3RCYWNrKCkpe3RoaXMuX3JlbW92ZUNzc0NsYXNzKGMsZCk7CnJldHVybjsKfXRoaXMuX2FkZENzc0NsYXNzKGMsZik7CmlmKGcpe3RoaXMuX3JlbW92ZUNzc0NsYXNzKGMsZCk7Cn19LF9zd2l0Y2hDc3NDbGFzc2VzOmZ1bmN0aW9uKGMsZSxkKXtpZihlKXt0aGlzLl9hZGRDc3NDbGFzcyhjLGUpOwp0aGlzLl9yZW1vdmVDc3NDbGFzcyhjLGQpOwp9fSxfYWRkQ3NzQ2xhc3M6ZnVuY3Rpb24oZCxjKXtpZihkJiZjKXthKGQpLmFkZENsYXNzKGMpOwp9fSxfcmVtb3ZlQ3NzQ2xhc3M6ZnVuY3Rpb24oZCxjKXtpZihkJiZjKXtTeXMuVUkuRG9tRWxlbWVudC5yZW1vdmVDc3NDbGFzcyhkLGMpOwp9fSxfY29udGFpbnNDc3NDbGFzczpmdW5jdGlvbihkLGMpe2lmKGQmJmMpe3JldHVybiBTeXMuVUkuRG9tRWxlbWVudC5jb250YWluc0Nzc0NsYXNzKGQsYyk7Cn1lbHNle3JldHVybiBmYWxzZTsKfX0sX21hcmtJbWFnZVN0YXRlOmZ1bmN0aW9uKGQsYyl7aWYoZCYmYyl7dGhpcy5fc2V0QmFja2dyb3VuZEltYWdlKGQsYyk7Cn19LF9jbGVhckltYWdlU3RhdGU6ZnVuY3Rpb24oZixkLGMsZSxnKXtpZihnJiZ0aGlzLmdldF9hdXRvUG9zdEJhY2soKSYmdGhpcy52YWxpZGF0aW9uUmVzdWx0KXtyZXR1cm47Cn12YXIgaD1jP3RydWU6ZmFsc2U7CmlmKGYpe2lmKGgmJmUpe3RoaXMuX3NldEJhY2tncm91bmRJbWFnZShmLGMpOwpyZXR1cm47Cn1pZihkKXt0aGlzLl9zZXRCYWNrZ3JvdW5kSW1hZ2UoZixkKTsKfX19LF9zZXRCYWNrZ3JvdW5kSW1hZ2U6ZnVuY3Rpb24oZCxjKXtkLnN0eWxlLmJhY2tncm91bmRJbWFnZT0idXJsKCciK2MrIicpIjsKfSxfc2V0U2l6ZTpmdW5jdGlvbihlLGcsaCxmLGMsaSl7dmFyIGQ9KGd8fGYpP3RydWU6ZmFsc2U7CnRoaXMuX3NldFNpemVJbm5lckVsZW1lbnRzKGQsaSk7CmlmKGcpe2Uuc3R5bGUud2lkdGg9ZzsKfWVsc2V7aWYoZil7ZS5zdHlsZS53aWR0aD1mOwp9ZWxzZXtpZihlKXtlLnN0eWxlLndpZHRoPSIiOwp9fX1pZihoKXtlLnN0eWxlLmhlaWdodD1oOwp9ZWxzZXtpZihjKXtlLnN0eWxlLmhlaWdodD1jOwp9ZWxzZXtpZihlKXtlLnN0eWxlLmhlaWdodD0iIjsKfX19aWYoaSl7aWYodGhpcy5nZXRfYnV0dG9uVHlwZSgpIT1iLlJhZEJ1dHRvblR5cGUuU3RhbmRhcmRCdXR0b24pe2Uuc3R5bGUubGluZUhlaWdodD1lLnN0eWxlLmhlaWdodDsKfWVsc2V7dmFyIGg9ZS5zdHlsZS5oZWlnaHQ7CmlmKGguaW5kZXhPZigiJSIpIT0tMSl7dGhpcy5nZXRfdGV4dEVsZW1lbnQoKS5zdHlsZS5oZWlnaHQ9IjEwMCUiOwp9ZWxzZXt0aGlzLmdldF90ZXh0RWxlbWVudCgpLnN0eWxlLmhlaWdodD1oOwp9fX19LF9zZXRTaXplSW5uZXJFbGVtZW50czpmdW5jdGlvbihkLGUpe3ZhciBjPXRoaXMuZ2V0X3RleHRFbGVtZW50KCk7CmlmKGUpe2lmKGQpe2Muc3R5bGUud2lkdGg9IjEwMCUiOwppZih0aGlzLmdldF9idXR0b25UeXBlKCk9PWIuUmFkQnV0dG9uVHlwZS5TdGFuZGFyZEJ1dHRvbiYmIXRoaXMuX2NvbnRhaW5zQ3NzQ2xhc3ModGhpcy5nZXRfZWxlbWVudCgpLCJyYk5hdGl2ZUJ1dHRvbiIpKXtjLnN0eWxlLnBhZGRpbmdMZWZ0PSI0cHgiOwp9ZWxzZXtjLnN0eWxlLnBhZGRpbmdMZWZ0PSIwIjsKfWMuc3R5bGUucGFkZGluZ1JpZ2h0PSIwIjsKfWVsc2V7Yy5zdHlsZS53aWR0aD0iIjsKYy5zdHlsZS5wYWRkaW5nPSIiOwp9fX0sX3NldENvb3JkaW5hdGVzOmZ1bmN0aW9uKGUsaSxjLGYsayxoLGQsaixnKXtpZihpKXtlLnN0eWxlLnRvcD1pOwp9ZWxzZXtpZihoKXtlLnN0eWxlLnRvcD1oOwp9fWlmKGMpe2Uuc3R5bGUubGVmdD1jOwp9ZWxzZXtpZihkKXtlLnN0eWxlLmxlZnQ9ZDsKfX1pZihmKXtlLnN0eWxlLmJvdHRvbT1mOwp9ZWxzZXtpZihqKXtlLnN0eWxlLmJvdHRvbT1qOwp9fWlmKGspe2Uuc3R5bGUucmlnaHQ9azsKfWVsc2V7aWYoZyl7ZS5zdHlsZS5yaWdodD1nOwp9fX0sX3NldFRhcmdldDpmdW5jdGlvbihjKXtpZih0aGlzLmdldF9idXR0b25UeXBlKCk9PWIuUmFkQnV0dG9uVHlwZS5MaW5rQnV0dG9uJiZ0aGlzLmdldF90YXJnZXQoKSl7dGhpcy5nZXRfZWxlbWVudCgpLnNldEF0dHJpYnV0ZSgidGFyZ2V0IixjKTsKfX0sX3NldE5hdmlnYXRlVXJsOmZ1bmN0aW9uKGMpe2lmKHRoaXMuZ2V0X2J1dHRvblR5cGUoKT09Yi5SYWRCdXR0b25UeXBlLkxpbmtCdXR0b24pe3RoaXMuZ2V0X2VsZW1lbnQoKS5zZXRBdHRyaWJ1dGUoImhyZWYiLGMpOwp9fSxfcmVxdWVzdEljb25zOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5nZXRfaWNvbkRhdGEoKTsKdmFyIGc9Yy5wcmltYXJ5SWNvblVybDsKdmFyIGQ9Yy5wcmltYXJ5SG92ZXJlZEljb25Vcmw7CnZhciBoPWMucHJpbWFyeVByZXNzZWRJY29uVXJsOwppZihnIT1kKXt0aGlzLl9yZXF1ZXN0SW1hZ2UoZCk7Cn1pZihnIT1oJiZkIT1oKXt0aGlzLl9yZXF1ZXN0SW1hZ2UoaCk7Cn12YXIgaT1jLnNlY29uZGFyeUljb25Vcmw7CnZhciBlPWMuc2Vjb25kYXJ5SG92ZXJlZEljb25Vcmw7CnZhciBmPWMuc2Vjb25kYXJ5UHJlc3NlZEljb25Vcmw7CmlmKGkhPWUpe3RoaXMuX3JlcXVlc3RJbWFnZShlKTsKfWlmKGkhPWYmJmUhPWYpe3RoaXMuX3JlcXVlc3RJbWFnZShmKTsKfX0sX3JlcXVlc3RJbWFnZURhdGE6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmdldF9pbWFnZURhdGEoKTsKdmFyIGY9Yy5pbWFnZVVybDsKdmFyIGU9Yy5ob3ZlcmVkSW1hZ2VVcmw7CnZhciBkPWMucHJlc3NlZEltYWdlVXJsOwppZihmIT1lKXt0aGlzLl9yZXF1ZXN0SW1hZ2UoZSk7Cn1pZihmIT1kJiZlIT1kKXt0aGlzLl9yZXF1ZXN0SW1hZ2UoZCk7Cn19LF9yZXF1ZXN0VG9nZ2xlU3RhdGVJbWFnZXM6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmdldF90b2dnbGVTdGF0ZXMoKTsKdmFyIGo9Yy5sZW5ndGg7CmZvcih2YXIgcD0wOwpwPGo7CnArKyl7dmFyIGw9Y1twXTsKdmFyIGQ9bC5nZXRfcHJpbWFyeUljb25VcmwoKTsKdmFyIG09bC5nZXRfcHJpbWFyeUhvdmVyZWRJY29uVXJsKCk7CnZhciBoPWwuZ2V0X3ByaW1hcnlQcmVzc2VkSWNvblVybCgpOwp0aGlzLl9yZXF1ZXN0SW1hZ2UoZCk7CmlmKGQhPW0pe3RoaXMuX3JlcXVlc3RJbWFnZShtKTsKfWlmKGQhPWgmJm0hPWgpe3RoaXMuX3JlcXVlc3RJbWFnZShoKTsKfXZhciBlPWwuZ2V0X3NlY29uZGFyeUljb25VcmwoKTsKdmFyIGc9bC5nZXRfc2Vjb25kYXJ5SG92ZXJlZEljb25VcmwoKTsKdmFyIG49bC5nZXRfc2Vjb25kYXJ5UHJlc3NlZEljb25VcmwoKTsKdGhpcy5fcmVxdWVzdEltYWdlKGUpOwppZihlIT1nKXt0aGlzLl9yZXF1ZXN0SW1hZ2UoZyk7Cn1pZihlIT1uJiZnIT1uKXt0aGlzLl9yZXF1ZXN0SW1hZ2Uobik7Cn12YXIgbz1sLmdldF9pbWFnZVVybCgpOwp2YXIgaz1sLmdldF9ob3ZlcmVkSW1hZ2VVcmwoKTsKdmFyIGY9bC5nZXRfcHJlc3NlZEltYWdlVXJsKCk7CnRoaXMuX3JlcXVlc3RJbWFnZShvKTsKaWYobyE9ayl7dGhpcy5fcmVxdWVzdEltYWdlKGspOwp9aWYobyE9ZiYmayE9Zil7dGhpcy5fcmVxdWVzdEltYWdlKGYpOwp9fX0sX3JlcXVlc3RJbWFnZTpmdW5jdGlvbihjKXtpZihjKXt2YXIgZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbWciKTsKZC5zZXRBdHRyaWJ1dGUoInNyYyIsYyk7CmQuc2V0QXR0cmlidXRlKCJhbHQiLCIiKTsKdGhpcy5fYWRkQ3NzQ2xhc3MoZCwicmJIaWRkZW5JbWFnZXMiKTsKdGhpcy5nZXRfZWxlbWVudCgpLmFwcGVuZENoaWxkKGQpOwp9fSxfcmFpc2VFdmVudDpmdW5jdGlvbihjLGYpe3ZhciBnPXRoaXMuZ2V0X2NvbW1hbmROYW1lKCk7CnZhciBkPXRoaXMuZ2V0X2NvbW1hbmRBcmd1bWVudCgpOwp2YXIgZT1udWxsOwppZihmKXtzd2l0Y2goYyl7Y2FzZSJjaGVja2VkQ2hhbmdpbmciOmU9bmV3IGIuUmFkQnV0dG9uQ2hlY2tlZENhbmNlbEV2ZW50QXJncyhnLGQsdGhpcy5nZXRfdG9nZ2xlVHlwZSgpKTsKYnJlYWs7CmNhc2UidG9nZ2xlU3RhdGVDaGFuZ2luZyI6ZT1uZXcgYi5SYWRCdXR0b25Ub2dnbGVTdGF0ZUNhbmNlbEV2ZW50QXJncyhnLGQsdGhpcy5nZXRfdG9nZ2xlVHlwZSgpLHRoaXMuZ2V0X3NlbGVjdGVkVG9nZ2xlU3RhdGUoKSk7CmJyZWFrOwpkZWZhdWx0OmU9bmV3IGIuUmFkQnV0dG9uQ2FuY2VsRXZlbnRBcmdzKGcsZCk7Cn10aGlzLnJhaXNlRXZlbnQoYyxlKTsKaWYoZS5nZXRfY2FuY2VsJiZlLmdldF9jYW5jZWwoKSl7cmV0dXJuIHRydWU7Cn1lbHNle3JldHVybiBmYWxzZTsKfX1lbHNle3N3aXRjaChjKXtjYXNlImNoZWNrZWRDaGFuZ2VkIjplPW5ldyBiLlJhZEJ1dHRvbkNoZWNrZWRFdmVudEFyZ3MoZyxkLHRoaXMuZ2V0X2NoZWNrZWQoKSx0aGlzLmdldF90b2dnbGVUeXBlKCkpOwpicmVhazsKY2FzZSJ0b2dnbGVTdGF0ZUNoYW5nZWQiOmU9bmV3IGIuUmFkQnV0dG9uVG9nZ2xlU3RhdGVFdmVudEFyZ3MoZyxkLHRoaXMuZ2V0X2NoZWNrZWQoKSx0aGlzLmdldF90b2dnbGVUeXBlKCksdGhpcy5nZXRfc2VsZWN0ZWRUb2dnbGVTdGF0ZSgpKTsKYnJlYWs7CmRlZmF1bHQ6ZT1uZXcgYi5SYWRCdXR0b25FdmVudEFyZ3MoZyxkLHRoaXMuX2lzU3BsaXRCdXR0b25DbGljayk7Cn10aGlzLnJhaXNlRXZlbnQoYyxlKTsKcmV0dXJuIGZhbHNlOwp9fSxfc2V0RW5hYmxlZDpmdW5jdGlvbihjKXtpZihjKXt0aGlzLl9hdHRhY2hFdmVudHModHJ1ZSk7Cn1lbHNle3RoaXMuX2F0dGFjaEV2ZW50cyhmYWxzZSk7Cn19LF9jcmVhdGVDbGlja01ldGhvZDpmdW5jdGlvbigpe3ZhciBjPXRoaXMuZ2V0X2VsZW1lbnQoKTsKaWYodHlwZW9mKGMuY2xpY2spPT0idW5kZWZpbmVkInx8JHRlbGVyaWsuaXNJRTYpe2MuY2xpY2s9RnVuY3Rpb24uY3JlYXRlRGVsZWdhdGUodGhpcyxmdW5jdGlvbigpe2lmKCF0aGlzLmdldF9lbmFibGVkKCl8fHRoaXMuZ2V0X3JlYWRPbmx5KCkpe3JldHVybiBmYWxzZTsKfXRoaXMuX3RvZ2dsZVN0YXRlKGZhbHNlKTsKdGhpcy5fcHJpdmF0ZUNsaWNrKHRydWUsdHJ1ZSk7Cn0pOwp9fSxfcmFpc2VDbGlja2luZ0FuZFZhbGlkYXRlOmZ1bmN0aW9uKGQpe3ZhciBjPXRoaXMuX3Bvc3RCYWNrUmVmZXJlbmNlOwp2YXIgZT1udWxsOwppZihjLmluZGV4T2YoIm5ldyBXZWJGb3JtX1Bvc3RCYWNrT3B0aW9ucygiKSE9LTEpe2U9ZXZhbChjLnN1YnN0cmluZyhjLmluZGV4T2YoIm5ldyBXZWJGb3JtX1Bvc3RCYWNrT3B0aW9ucygiKSxjLmxlbmd0aC0xKSk7Cn1pZihlJiZlLnZhbGlkYXRpb24pe3RoaXMuX3ZhbGlkYXRlKGUudmFsaWRhdGlvbkdyb3VwKTsKfWlmKGQpe3JldHVybiBmYWxzZTsKfXJldHVybiB0aGlzLl9yYWlzZUV2ZW50KCJjbGlja2luZyIsdHJ1ZSk7Cn0sX3JhaXNlQ2xpY2tlZDpmdW5jdGlvbigpe3RoaXMuX3NpbmdsZUNsaWNrQ29uZmlnKCk7CnRoaXMuX3JhaXNlRXZlbnQoImNsaWNrZWQiLGZhbHNlKTsKfSxfc2luZ2xlQ2xpY2tDb25maWc6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLmdldF9zaW5nbGVDbGljaygpOwppZihkKXt2YXIgYz10aGlzLmdldF9zaW5nbGVDbGlja1RleHQoKTsKaWYoYyl7dGhpcy5fc2V0VGV4dChjKTsKfXRoaXMuc2V0X2VuYWJsZWQoZmFsc2UpOwp9fSxlbmFibGVBZnRlclNpbmdsZUNsaWNrOmZ1bmN0aW9uKCl7dGhpcy5zZXRfZW5hYmxlZCh0cnVlKTsKdmFyIGM9dGhpcy5nZXRfc2VsZWN0ZWRUb2dnbGVTdGF0ZSgpOwp2YXIgZD1jP2MuZ2V0X3RleHQoKTp0aGlzLmdldF90ZXh0KCk7CnRoaXMuX3NldFRleHQoZCk7Cn0sZm9jdXM6ZnVuY3Rpb24oKXtpZighdGhpcy5nZXRfZW5hYmxlZCgpfHx0aGlzLmdldF9yZWFkT25seSgpKXtyZXR1cm4gZmFsc2U7Cn12YXIgYz10aGlzLmdldF9lbGVtZW50KCk7CmMuZm9jdXMoKTsKfSxjbGljazpmdW5jdGlvbihjLGQpe3JldHVybiB0aGlzLl9wcml2YXRlQ2xpY2soZCxjKTsKfSxfcHJpdmF0ZUNsaWNrOmZ1bmN0aW9uKGUsZil7aWYoIXRoaXMuZ2V0X2VuYWJsZWQoKXx8dGhpcy5nZXRfcmVhZE9ubHkoKSl7cmV0dXJuIGZhbHNlOwp9aWYodGhpcy5fcmFpc2VDbGlja2luZ0FuZFZhbGlkYXRlKCFmKSl7cmV0dXJuIGZhbHNlOwp9dGhpcy5fcmFpc2VDbGlja2VkKCk7CmlmKCF0aGlzLmdldF9hdXRvUG9zdEJhY2soKSl7c2V0VGltZW91dChmdW5jdGlvbigpe1BhZ2VfQmxvY2tTdWJtaXQ9ZmFsc2U7Cn0sMCk7CnJldHVybiBmYWxzZTsKfXZhciBjPW51bGw7CmlmKGUpe2M9U3lzLldlYkZvcm1zP1N5cy5XZWJGb3Jtcy5QYWdlUmVxdWVzdE1hbmFnZXIuZ2V0SW5zdGFuY2UoKTpudWxsOwppZihjKXtjLl9hY3RpdmVEZWZhdWx0QnV0dG9uQ2xpY2tlZD10cnVlOwp9fWlmKHRoaXMuX3Bvc3RCYWNrUmVmZXJlbmNlKXt0aGlzLl9jbGlja0VsZW1lbnRUYXJnZXQ9dGhpcy5nZXRfZWxlbWVudCgpOwp2YXIgZD10aGlzLl9wb3N0QmFja1JlZmVyZW5jZS5yZXBsYWNlKCJXZWJGb3JtX0RvUG9zdEJhY2tXaXRoT3B0aW9ucyIsInRoaXMuV2ViRm9ybV9Eb1Bvc3RCYWNrV2l0aE9wdGlvbnMiKTsKZXZhbChkKTsKfWVsc2V7X19kb1Bvc3RCYWNrKHRoaXMuZ2V0X3VuaXF1ZUlEKCksIiIpOwp9aWYoYyl7Yy5fYWN0aXZlRGVmYXVsdEJ1dHRvbkNsaWNrZWQ9ZmFsc2U7Cn1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7UGFnZV9CbG9ja1N1Ym1pdD1mYWxzZTsKfSwwKTsKcmV0dXJuIHRydWU7Cn0sZ2V0X2VuYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5hYmxlZDsKfSxzZXRfZW5hYmxlZDpmdW5jdGlvbihnKXt2YXIgYz10aGlzLl9lbmFibGVkIT1nOwp0aGlzLl9lbmFibGVkPWc7CmlmKHRoaXMuZ2V0X2lzSW5pdGlhbGl6ZWQoKSYmYyl7aWYoIXRoaXMuZ2V0X3JlYWRPbmx5KCkpe3RoaXMuX3NldEVuYWJsZWQoZyk7Cn12YXIgZD10aGlzLmdldF90ZXh0RWxlbWVudCgpOwp2YXIgZj10aGlzLmdldF9lbGVtZW50KCk7CnZhciBlPXRoaXMuZ2V0X2ltYWdlRGF0YSgpOwppZihnKXt0aGlzLl9yZW1vdmVDc3NDbGFzcyhmLCJyYkRpc2FibGVkIik7CnRoaXMuX3JlbW92ZUNzc0NsYXNzKGYsdGhpcy5nZXRfZGlzYWJsZWRDc3NDbGFzcygpKTsKZC5yZW1vdmVBdHRyaWJ1dGUoImRpc2FibGVkIik7CmYucmVtb3ZlQXR0cmlidXRlKCJkaXNhYmxlZCIpOwppZihlJiZlLmltYWdlVXJsKXt0aGlzLl9zZXRCYWNrZ3JvdW5kSW1hZ2UoZixlLmltYWdlVXJsKTsKfX1lbHNle3RoaXMuX2FkZENzc0NsYXNzKGYsInJiRGlzYWJsZWQiKTsKdGhpcy5fYWRkQ3NzQ2xhc3MoZix0aGlzLmdldF9kaXNhYmxlZENzc0NsYXNzKCkpOwpkLnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCJkaXNhYmxlZCIpOwpmLnNldEF0dHJpYnV0ZSgiZGlzYWJsZWQiLCJkaXNhYmxlZCIpOwppZihlJiZlLmRpc2FibGVkSW1hZ2VVcmwpe3RoaXMuX3NldEJhY2tncm91bmRJbWFnZShmLGUuZGlzYWJsZWRJbWFnZVVybCk7Cn19fX0sZ2V0X3JlYWRPbmx5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlYWRPbmx5Owp9LHNldF9yZWFkT25seTpmdW5jdGlvbihmKXt2YXIgYz10aGlzLl9yZWFkT25seSE9ZjsKdGhpcy5fcmVhZE9ubHk9ZjsKaWYodGhpcy5nZXRfaXNJbml0aWFsaXplZCgpJiZjKXt2YXIgZT10aGlzLmdldF9lbGVtZW50KCk7CnZhciBkPXRoaXMuZ2V0X3JlYWRPbmx5Q3NzQ2xhc3MoKTsKaWYoZil7dGhpcy5fYWRkQ3NzQ2xhc3MoZSxkKTsKfWVsc2V7dGhpcy5fcmVtb3ZlQ3NzQ2xhc3MoZSxkKTsKfWlmKHRoaXMuZ2V0X2VuYWJsZWQoKSl7dGhpcy5fc2V0RW5hYmxlZCghZik7Cn10aGlzLnVwZGF0ZUNsaWVudFN0YXRlKCk7Cn19LGdldF9yZWFkT25seUNzc0NsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlYWRPbmx5Q3NzQ2xhc3M7Cn0sc2V0X3JlYWRPbmx5Q3NzQ2xhc3M6ZnVuY3Rpb24oZSl7dmFyIGQ9dGhpcy5fcmVhZE9ubHlDc3NDbGFzczsKdGhpcy5fcmVhZE9ubHlDc3NDbGFzcz1lOwppZih0aGlzLmdldF9pc0luaXRpYWxpemVkKCkpe3ZhciBjPXRoaXMuZ2V0X2VsZW1lbnQoKTsKdGhpcy5fcmVtb3ZlQ3NzQ2xhc3MoYyxkKTsKaWYodGhpcy5nZXRfcmVhZE9ubHkoKSl7dGhpcy5fYWRkQ3NzQ2xhc3MoYyxlKTsKfX19LGdldF90ZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RleHQ7Cn0sc2V0X3RleHQ6ZnVuY3Rpb24oYyl7dmFyIGQ9dGhpcy5fdGV4dCE9YzsKdGhpcy5fdGV4dD1jOwppZih0aGlzLmdldF9pc0luaXRpYWxpemVkKCkmJmQpe3RoaXMuX3NldFRleHQoYyk7CnRoaXMudXBkYXRlQ2xpZW50U3RhdGUoKTsKfX0sZ2V0X3ZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3ZhbHVlOwp9LHNldF92YWx1ZTpmdW5jdGlvbihjKXtpZih0aGlzLl92YWx1ZSE9Yyl7dGhpcy5fdmFsdWU9YzsKdGhpcy51cGRhdGVDbGllbnRTdGF0ZSgpOwp9fSxnZXRfdG9vbFRpcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90b29sVGlwOwp9LHNldF90b29sVGlwOmZ1bmN0aW9uKGMpe3ZhciBkPXRoaXMuX3Rvb2xUaXAhPWM7CnRoaXMuX3Rvb2xUaXA9YzsKaWYodGhpcy5nZXRfaXNJbml0aWFsaXplZCgpJiZkKXt0aGlzLl9zZXRUb29sVGlwKGMpOwp9fSxnZXRfY2hlY2tlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGVja2VkOwp9LHNldF9jaGVja2VkOmZ1bmN0aW9uKGMpe3ZhciBkPXRoaXMuX2NoZWNrZWQhPWM7CnRoaXMuX2NoZWNrZWQ9YzsKaWYodGhpcy5nZXRfaXNJbml0aWFsaXplZCgpJiZkKXt0aGlzLl9hcHBseUNCYW5kUmFkaW9Qcm9wcyhjKTsKdGhpcy5fc2V0VG9nZ2xlU3RhdGUoKTsKdGhpcy5fcmFpc2VFdmVudCgiY2hlY2tlZENoYW5nZWQiLGZhbHNlKTsKdGhpcy51cGRhdGVDbGllbnRTdGF0ZSgpOwp9fSxnZXRfdGFyZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RhcmdldDsKfSxzZXRfdGFyZ2V0OmZ1bmN0aW9uKGMpe3ZhciBkPXRoaXMuX3RhcmdldCE9YzsKdGhpcy5fdGFyZ2V0PWM7CmlmKHRoaXMuZ2V0X2lzSW5pdGlhbGl6ZWQoKSYmZCl7dGhpcy5fc2V0VGFyZ2V0KGMpOwp0aGlzLnVwZGF0ZUNsaWVudFN0YXRlKCk7Cn19LGdldF9uYXZpZ2F0ZVVybDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9uYXZpZ2F0ZVVybDsKfSxzZXRfbmF2aWdhdGVVcmw6ZnVuY3Rpb24oYyl7dmFyIGQ9dGhpcy5fbmF2aWdhdGVVcmwhPWM7CnRoaXMuX25hdmlnYXRlVXJsPWM7CmlmKHRoaXMuZ2V0X2lzSW5pdGlhbGl6ZWQoKSYmZCl7dGhpcy5fc2V0TmF2aWdhdGVVcmwoYyk7CnRoaXMudXBkYXRlQ2xpZW50U3RhdGUoKTsKfX0sZ2V0X3ByaW1hcnlJY29uRWxlbWVudDpmdW5jdGlvbigpe2lmKCF0aGlzLl9wcmltYXJ5SWNvbkVsZW1lbnQpe3RoaXMuX3ByaW1hcnlJY29uRWxlbWVudD0kdGVsZXJpay5nZXRFbGVtZW50QnlDbGFzc05hbWUodGhpcy5nZXRfZWxlbWVudCgpLCJyYlByaW1hcnlJY29uIiwic3BhbiIpOwp9cmV0dXJuIHRoaXMuX3ByaW1hcnlJY29uRWxlbWVudDsKfSxnZXRfc2Vjb25kYXJ5SWNvbkVsZW1lbnQ6ZnVuY3Rpb24oKXtpZighdGhpcy5fc2Vjb25kYXJ5SWNvbkVsZW1lbnQpe3RoaXMuX3NlY29uZGFyeUljb25FbGVtZW50PSR0ZWxlcmlrLmdldEVsZW1lbnRCeUNsYXNzTmFtZSh0aGlzLmdldF9lbGVtZW50KCksInJiU2Vjb25kYXJ5SWNvbiIsInNwYW4iKTsKfXJldHVybiB0aGlzLl9zZWNvbmRhcnlJY29uRWxlbWVudDsKfSxnZXRfdGV4dEVsZW1lbnQ6ZnVuY3Rpb24oKXtpZighdGhpcy5fdGV4dEVsZW1lbnQpe3ZhciBjPXRoaXMuZ2V0X2VsZW1lbnQoKTsKdGhpcy5fdGV4dEVsZW1lbnQ9JHRlbGVyaWsuZ2V0RWxlbWVudEJ5Q2xhc3NOYW1lKGMsInJiVGV4dCIsInNwYW4iKTsKaWYoIXRoaXMuX3RleHRFbGVtZW50KXt0aGlzLl90ZXh0RWxlbWVudD1jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJpbnB1dCIpWzBdOwp9fXJldHVybiB0aGlzLl90ZXh0RWxlbWVudDsKfSxnZXRfY29tbWFuZE5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29tbWFuZE5hbWU7Cn0sc2V0X2NvbW1hbmROYW1lOmZ1bmN0aW9uKGMpe3ZhciBkPXRoaXMuX2NvbW1hbmROYW1lIT1jOwp0aGlzLl9jb21tYW5kTmFtZT1jOwppZih0aGlzLmdldF9pc0luaXRpYWxpemVkKCkmJmQpe3RoaXMudXBkYXRlQ2xpZW50U3RhdGUoKTsKfX0sZ2V0X2NvbW1hbmRBcmd1bWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb21tYW5kQXJndW1lbnQ7Cn0sc2V0X2NvbW1hbmRBcmd1bWVudDpmdW5jdGlvbihjKXt2YXIgZD10aGlzLl9jb21tYW5kQXJndW1lbnQhPWM7CnRoaXMuX2NvbW1hbmRBcmd1bWVudD1jOwppZih0aGlzLmdldF9pc0luaXRpYWxpemVkKCkmJmQpe3RoaXMudXBkYXRlQ2xpZW50U3RhdGUoKTsKfX0sZ2V0X2F1dG9Qb3N0QmFjazpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hdXRvUG9zdEJhY2s7Cn0sc2V0X2F1dG9Qb3N0QmFjazpmdW5jdGlvbihjKXt2YXIgZD10aGlzLl9hdXRvUG9zdEJhY2shPWM7CnRoaXMuX2F1dG9Qb3N0QmFjaz1jOwppZih0aGlzLmdldF9pc0luaXRpYWxpemVkKCkmJmQpe3RoaXMudXBkYXRlQ2xpZW50U3RhdGUoKTsKfX0sZ2V0X3NlbGVjdGVkVG9nZ2xlU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRfdG9nZ2xlU3RhdGVzKClbdGhpcy5nZXRfc2VsZWN0ZWRUb2dnbGVTdGF0ZUluZGV4KCldOwp9LGdldF9zZWxlY3RlZFRvZ2dsZVN0YXRlSW5kZXg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2VsZWN0ZWRUb2dnbGVTdGF0ZUluZGV4Owp9LHNldF9zZWxlY3RlZFRvZ2dsZVN0YXRlSW5kZXg6ZnVuY3Rpb24oZil7dmFyIGU9dGhpcy5nZXRfaXNJbml0aWFsaXplZCgpOwppZighZXx8KGY+PTAmJmY8dGhpcy5nZXRfdG9nZ2xlU3RhdGVzKCkubGVuZ3RoKSl7dmFyIGQ9dGhpcy5fc2VsZWN0ZWRUb2dnbGVTdGF0ZUluZGV4Owp2YXIgYz1kIT1mOwp0aGlzLl9zZWxlY3RlZFRvZ2dsZVN0YXRlSW5kZXg9ZjsKaWYodGhpcy5nZXRfaXNJbml0aWFsaXplZCgpJiZjKXt0aGlzLl9hcHBseVRvZ2dsZVByb3BlcnRpZXMoZCk7CnRoaXMuX3JhaXNlRXZlbnQoInRvZ2dsZVN0YXRlQ2hhbmdlZCIsZmFsc2UpOwp0aGlzLnVwZGF0ZUNsaWVudFN0YXRlKCk7Cn19fSxJc0ltYWdlQnV0dG9uOmZ1bmN0aW9uKCl7aWYodGhpcy5faXNJbWFnZUJ1dHRvbj09bnVsbCl7dGhpcy5faXNJbWFnZUJ1dHRvbj1TeXMuVUkuRG9tRWxlbWVudC5jb250YWluc0Nzc0NsYXNzKHRoaXMuZ2V0X2VsZW1lbnQoKSwicmJJbWFnZUJ1dHRvbiIpOwp9cmV0dXJuIHRoaXMuX2lzSW1hZ2VCdXR0b247Cn0sSXNJbnB1dFR5cGVTdWJtaXQ6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmdldF9lbGVtZW50KCkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImlucHV0IilbMF07CnZhciBkPWM/Yy5nZXRBdHRyaWJ1dGUoInR5cGUiKToiZmFsc2UiOwppZihkPT0ic3VibWl0Iil7cmV0dXJuIHRydWU7Cn1lbHNle3JldHVybiBmYWxzZTsKfX0sc2F2ZUNsaWVudFN0YXRlOmZ1bmN0aW9uKCl7dmFyIGM9WyJ0ZXh0IiwidmFsdWUiLCJjaGVja2VkIiwidGFyZ2V0IiwibmF2aWdhdGVVcmwiLCJjb21tYW5kTmFtZSIsImNvbW1hbmRBcmd1bWVudCIsImF1dG9Qb3N0QmFjayIsInNlbGVjdGVkVG9nZ2xlU3RhdGVJbmRleCIsInJlYWRPbmx5Il07CnZhciBlPXt9Owp2YXIgZD1jLmxlbmd0aDsKZm9yKHZhciBmPTA7CmY8ZDsKZisrKXt2YXIgZz1jW2ZdOwplW2ddPXRoaXNbImdldF8iK2ddKCk7Cn1yZXR1cm4gU3lzLlNlcmlhbGl6YXRpb24uSmF2YVNjcmlwdFNlcmlhbGl6ZXIuc2VyaWFsaXplKGUpOwp9LGdldF90b2dnbGVTdGF0ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdG9nZ2xlU3RhdGVzOwp9LHNldF90b2dnbGVTdGF0ZXM6ZnVuY3Rpb24oYyl7dGhpcy5fdG9nZ2xlU3RhdGVzPWM7Cn19OwphLnJlZ2lzdGVyQ29udHJvbFByb3BlcnRpZXMoYi5SYWRCdXR0b24se3VuaXF1ZUlEOm51bGwsYnV0dG9uVHlwZTpiLlJhZEJ1dHRvblR5cGUuU3RhbmRhcmRCdXR0b24sdG9nZ2xlVHlwZTpiLkJ1dHRvblRvZ2dsZVR5cGUuTm9uZSxpY29uRGF0YTp7fSxpbWFnZURhdGE6e30sdG9nZ2xlU3RhdGVzRGF0YTpbXSxjc3NDbGFzczoiIixkaXNhYmxlZENzc0NsYXNzOiIiLGhvdmVyZWRDc3NDbGFzczoiIixwcmVzc2VkQ3NzQ2xhc3M6IiIsZ3JvdXBOYW1lOiIiLHVuaXF1ZUdyb3VwTmFtZToiIixoZWlnaHQ6bnVsbCx3aWR0aDpudWxsLGVuYWJsZVNwbGl0QnV0dG9uOmZhbHNlLHNpbmdsZUNsaWNrOmZhbHNlLHNpbmdsZUNsaWNrVGV4dDoiIn0pOwphLnJlZ2lzdGVyQ29udHJvbEV2ZW50cyhiLlJhZEJ1dHRvbixbImxvYWQiLCJjbGlja2luZyIsImNsaWNrZWQiLCJtb3VzZU92ZXIiLCJtb3VzZU91dCIsImNoZWNrZWRDaGFuZ2luZyIsImNoZWNrZWRDaGFuZ2VkIiwidG9nZ2xlU3RhdGVDaGFuZ2luZyIsInRvZ2dsZVN0YXRlQ2hhbmdlZCJdKTsKYi5SYWRCdXR0b24ucmVnaXN0ZXJDbGFzcygiVGVsZXJpay5XZWIuVUkuUmFkQnV0dG9uIixiLlJhZFdlYkNvbnRyb2wpOwp9KSgpOwoNCi8qIEVORCBUZWxlcmlrLldlYi5VSS5CdXR0b24uUmFkQnV0dG9uLmpzICovDQppZih0eXBlb2YoU3lzKSE9PSd1bmRlZmluZWQnKVN5cy5BcHBsaWNhdGlvbi5ub3RpZnlTY3JpcHRMb2FkZWQoKTsNCihmdW5jdGlvbigpIHsNCiAgICBmdW5jdGlvbiBsb2FkSGFuZGxlcigpIHsNCiAgICAgICAgdmFyIGhmID0gJGdldCgnUmFkU2NyaXB0TWFuYWdlcjFfVFNNJyk7DQogICAgICAgIGlmICghaGYpIHJldHVybjsNCiAgICAgICAgaWYgKCFoZi5fUlNNX2luaXQpIHsgaGYuX1JTTV9pbml0ID0gdHJ1ZTsgaGYudmFsdWUgPSAnJzsgfQ0KICAgICAgICBoZi52YWx1ZSArPSAnOztTeXN0ZW0uV2ViLkV4dGVuc2lvbnMsIFZlcnNpb249NC4wLjAuMCwgQ3VsdHVyZT1uZXV0cmFsLCBQdWJsaWNLZXlUb2tlbj0zMWJmMzg1NmFkMzY0ZTM1OmVuLVVTOmI3NTg1MjU0LTQ5NWUtNDMxMS05NTQ1LTFmOTEwMjQ3YWNhNTplYTU5N2Q0YjpiMjUzNzhkMjtUZWxlcmlrLldlYi5VSSwgVmVyc2lvbj0yMDEyLjMuMTAxNi40MCwgQ3VsdHVyZT1uZXV0cmFsLCBQdWJsaWNLZXlUb2tlbj0xMjFmYWU3ODE2NWJhM2Q0OmVuLVVTOmVlZGMwYThkLTQ4YjgtNDZiOC1hNjk5LWRlNjZiNGJkZWYxZToxNmU0ZTdjZDpmNzY0NTUwOToyNGVlMWJiYToxOTYyMDg3NTo4NzRmOGVhMjpmNDYxOTVkMzo0OTBhOWQ0ZTpiZDhmODVlNDo4NjUyNmJhNzplZDE2Y2JkYzo1ODM2NjAyOToyMDAzZDBiODoxZTc3MTMyNjphYTI4OGUyZDplMzMwNTE4YjpjODYxOGU0MTplNGY4ZjI4OTo3MTY1Zjc0JzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgU3lzLkFwcGxpY2F0aW9uLnJlbW92ZV9sb2FkKGxvYWRIYW5kbGVyKTsNCiAgICB9Ow0KICAgIFN5cy5BcHBsaWNhdGlvbi5hZGRfbG9hZChsb2FkSGFuZGxlcik7DQp9KSgpOw0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="103" hostname="nopc.shaft.com" path="/Images/AddRecord.gif" url="http://nopc.shaft.com/Images/AddRecord.gif" ip="10.10.10.53" port="80" client_ip="192.168.0.24" client_port="16337" connectionId="1908" origin="HTML" encodingType="ANSI" ordinal="5" startDateTime="2019-01-04T16:15:53.766+05:30" startTime="26889" endTime="27084" blockedTime="0" dnsTime="0" connectTime="0" sendTime="0" waitTime="0" receiveTime="0" sslNegotiateTime="0" responseBodySize="0">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="Referer" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cDovL25vcGMuc2hhZnQuY29tL0VtcGxveWVlRGV0YWlscy5hc3B4</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzcxLjAuMzU3OC45OCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Host" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm9wYy5zaGFmdC5jb20=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cookie" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QVNQLk5FVF9TZXNzaW9uSWQ9MjN0bmxyMjA1Y2RxZWdxbmxtZWZ0Ynlo</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIC9JbWFnZXMvQWRkUmVjb3JkLmdpZiBIVFRQLzEuMQ0KUmVmZXJlcjogaHR0cDovL25vcGMuc2hhZnQuY29tL0VtcGxveWVlRGV0YWlscy5hc3B4DQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC45DQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvNzEuMC4zNTc4Ljk4IFNhZmFyaS81MzcuMzYNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0OiAqLyoNCkNvbm5lY3Rpb246IEtlZXAtQWxpdmUNCkhvc3Q6IG5vcGMuc2hhZnQuY29tDQpDb29raWU6IEFTUC5ORVRfU2Vzc2lvbklkPTIzdG5scjIwNWNkcWVncW5sbWVmdGJ5aA0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="ASP.NET_SessionId" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>MjN0bmxyMjA1Y2RxZWdxbmxtZWZ0Ynlo</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>640</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Content-Type" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aW1hZ2UvZ2lm</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Last-Modified" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW9uLCAwMyBPY3QgMjAxNiAwNzo0MTowMCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ETag" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IjA0ZTI4N2M0OTFkZDIxOjAi</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Server" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TWljcm9zb2Z0LUlJUy8xMC4w</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Powered-By" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QVNQLk5FVA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RnJpLCAwNCBKYW4gMjAxOSAxMDo0NjoxOSBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NjQw</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IGltYWdlL2dpZg0KTGFzdC1Nb2RpZmllZDogTW9uLCAwMyBPY3QgMjAxNiAwNzo0MTowMCBHTVQNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpFVGFnOiAiMDRlMjg3YzQ5MWRkMjE6MCINClNlcnZlcjogTWljcm9zb2Z0LUlJUy8xMC4wDQpYLVBvd2VyZWQtQnk6IEFTUC5ORVQNCkRhdGU6IEZyaSwgMDQgSmFuIDIwMTkgMTA6NDY6MTkgR01UDQpDb250ZW50LUxlbmd0aDogNjQwDQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0lGODlhEAAQAOZ/AIKbpk6LZkSOMkKFWjl7TVuMomWQo6isqlOPaaWopZatnFWRaVWRalGOaFCNaFCNZ325PCt2RF2NopqlqVqVam6uOaurq0+MZ6iqq3q3O4adp06MZ0+NZ1+Oo0yRP2iga0F+VDSBLlqUaWWdbEyRPWmNc6eqqUeNPDqATTiBNyd1MWyhcVmVY2ifbDF/LoaajGmcYUqQOjJ7SUyPSmqrOaOoo4Scp1qaSHaYf2efbFaaO06SPkyTM1mUa2ioP6mtqkWLO0aMO1CXM3SzOm2VcEiEWEyKVjaAOHedgD2IMJ6woSh2OC56OHabdS19L0aMQD2GOGGabY6hjYSihIibjXKmciBwL1iTaXCvOlyWbE6MaD17UHSobT+CV5+mqilyQWOlNy51RUqSMzt8Tz15TxlrLVeSaVOQZ1GWOVSSYEiJSXKZezJ8OGadbyh4MS97NFmeNk6SPTB3Rk2VNGyPdlubRoXAPlOZNFabNlqYQ3u4O5KnmEGCn1eLov///0CCnyH5BAEAAH8ALAAAAAAQABAAAAfdgH+Cf3wFABgYAAV8g419CXRkBGMgOCZ9jX8GVF9dHBsbHAMRewaDHS8RAQFaDggLDQ0yChKECWEXAQ4Nfn5ZFCJXKAd/EiUDFwhmDL1RLTkjaUh9GlsPuww9vW0rVVUfRgAmcmcIvefnXE9sE14EFGfo6B4CRxMaRSxLZVYqvVBASOiYo8aGhDVuXCQR86ZXECwVaAgh0ofPDyYhBNxJ0SsOBD0VYtQQ1EGBEwFw0JzY4cNOBjxTagkyoGQGDzBDIGSgkUeKKUcHpsC4UQdGkwSYMhEyZMGCIkaDAgEAOw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="104" hostname="nopc.shaft.com" path="/Images/Delete.gif" url="http://nopc.shaft.com/Images/Delete.gif" ip="10.10.10.53" port="80" client_ip="192.168.0.24" client_port="16331" connectionId="1888" origin="HTML" encodingType="ANSI" ordinal="6" startDateTime="2019-01-04T16:15:53.782+05:30" startTime="26914" endTime="27080" blockedTime="0" dnsTime="0" connectTime="0" sendTime="0" waitTime="0" receiveTime="0" sslNegotiateTime="0" responseBodySize="0">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="Referer" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cDovL25vcGMuc2hhZnQuY29tL0VtcGxveWVlRGV0YWlscy5hc3B4</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzcxLjAuMzU3OC45OCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Host" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm9wYy5zaGFmdC5jb20=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cookie" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QVNQLk5FVF9TZXNzaW9uSWQ9MjN0bmxyMjA1Y2RxZWdxbmxtZWZ0Ynlo</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIC9JbWFnZXMvRGVsZXRlLmdpZiBIVFRQLzEuMQ0KUmVmZXJlcjogaHR0cDovL25vcGMuc2hhZnQuY29tL0VtcGxveWVlRGV0YWlscy5hc3B4DQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC45DQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvNzEuMC4zNTc4Ljk4IFNhZmFyaS81MzcuMzYNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0OiAqLyoNCkNvbm5lY3Rpb246IEtlZXAtQWxpdmUNCkhvc3Q6IG5vcGMuc2hhZnQuY29tDQpDb29raWU6IEFTUC5ORVRfU2Vzc2lvbklkPTIzdG5scjIwNWNkcWVncW5sbWVmdGJ5aA0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="ASP.NET_SessionId" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>MjN0bmxyMjA1Y2RxZWdxbmxtZWZ0Ynlo</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>328</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Content-Type" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aW1hZ2UvZ2lm</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Last-Modified" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW9uLCAwMyBPY3QgMjAxNiAwNzo0MTowMCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ETag" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IjA0ZTI4N2M0OTFkZDIxOjAi</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Server" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TWljcm9zb2Z0LUlJUy8xMC4w</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Powered-By" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QVNQLk5FVA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RnJpLCAwNCBKYW4gMjAxOSAxMDo0NjoxOSBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MzI4</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IGltYWdlL2dpZg0KTGFzdC1Nb2RpZmllZDogTW9uLCAwMyBPY3QgMjAxNiAwNzo0MTowMCBHTVQNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpFVGFnOiAiMDRlMjg3YzQ5MWRkMjE6MCINClNlcnZlcjogTWljcm9zb2Z0LUlJUy8xMC4wDQpYLVBvd2VyZWQtQnk6IEFTUC5ORVQNCkRhdGU6IEZyaSwgMDQgSmFuIDIwMTkgMTA6NDY6MTkgR01UDQpDb250ZW50LUxlbmd0aDogMzI4DQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0lGODlhEAAQANUyAMK4m9rUw4+EZ/Px7GtmWX52YGplWJKHaF5bU1RST46EZ1JRTol/ZdbPvHhxXnlyXmJeVU9OTcvDqndwXXFrW2xnWWRgVouBZU1NTXZvXcG4m3tzX2lkV+Tg0+Ldz1lXUW9qWnNtXFxaU311YOjk2Yh+ZIV8Y1dVUH93YIuBZoJ5YmVhVsnAp6mee+7r40xMTKiZcf///////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAADIALAAAAAAQABAAAAZlQJlwSCwaZYpL6Tg8CFKwGGz0yBgFsEAsEIB5YYQiw6QqbCYhUIWzMqJiAxfJ44UcHVJXiwUDiI4UeXswGidHBoJ8AAtHFol9EUcIjwAvRx+UlkYJMXAdDRIvmkYYoqajTKmqR0EAOw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="105" hostname="nopc.shaft.com" path="/Icons/edit-icon.gif" url="http://nopc.shaft.com/Icons/edit-icon.gif" ip="10.10.10.53" port="80" client_ip="192.168.0.24" client_port="16334" connectionId="1876" origin="HTML" encodingType="ANSI" ordinal="7" startDateTime="2019-01-04T16:15:53.804+05:30" startTime="26934" endTime="27077" blockedTime="0" dnsTime="0" connectTime="0" sendTime="0" waitTime="0" receiveTime="0" sslNegotiateTime="0" responseBodySize="0">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="Referer" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cDovL25vcGMuc2hhZnQuY29tL0VtcGxveWVlRGV0YWlscy5hc3B4</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzcxLjAuMzU3OC45OCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Host" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm9wYy5zaGFmdC5jb20=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cookie" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QVNQLk5FVF9TZXNzaW9uSWQ9MjN0bmxyMjA1Y2RxZWdxbmxtZWZ0Ynlo</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIC9JY29ucy9lZGl0LWljb24uZ2lmIEhUVFAvMS4xDQpSZWZlcmVyOiBodHRwOi8vbm9wYy5zaGFmdC5jb20vRW1wbG95ZWVEZXRhaWxzLmFzcHgNCkFjY2VwdC1MYW5ndWFnZTogZW4tVVMsZW47cT0wLjkNClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS83MS4wLjM1NzguOTggU2FmYXJpLzUzNy4zNg0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpBY2NlcHQ6ICovKg0KQ29ubmVjdGlvbjogS2VlcC1BbGl2ZQ0KSG9zdDogbm9wYy5zaGFmdC5jb20NCkNvb2tpZTogQVNQLk5FVF9TZXNzaW9uSWQ9MjN0bmxyMjA1Y2RxZWdxbmxtZWZ0YnloDQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="ASP.NET_SessionId" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>MjN0bmxyMjA1Y2RxZWdxbmxtZWZ0Ynlo</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>307</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Content-Type" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aW1hZ2UvZ2lm</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Last-Modified" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW9uLCAwMyBPY3QgMjAxNiAwNzo0MDo1MiBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ETag" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IjA5YTYzNzc0OTFkZDIxOjAi</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Server" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TWljcm9zb2Z0LUlJUy8xMC4w</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Powered-By" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QVNQLk5FVA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RnJpLCAwNCBKYW4gMjAxOSAxMDo0NjoxOSBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MzA3</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IGltYWdlL2dpZg0KTGFzdC1Nb2RpZmllZDogTW9uLCAwMyBPY3QgMjAxNiAwNzo0MDo1MiBHTVQNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpFVGFnOiAiMDlhNjM3NzQ5MWRkMjE6MCINClNlcnZlcjogTWljcm9zb2Z0LUlJUy8xMC4wDQpYLVBvd2VyZWQtQnk6IEFTUC5ORVQNCkRhdGU6IEZyaSwgMDQgSmFuIDIwMTkgMTA6NDY6MTkgR01UDQpDb250ZW50LUxlbmd0aDogMzA3DQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0lGODlhDgAOANU7AOm1HdDAcOm0HfjdpLBnDqNVC9zIYbt3FaJTC20/P/bFFKwpKfTDFpOTkuMiIrZlDXpERKRYC7BjDalUEPjIEWZPOtS3Qs+/c7dsC/Xknt/c3N6/QNvIY/zivNTQ0KpgDK+XZ7FlDOq3HtzJYK8hIfHfk+FCQuTJT4+PjtXEY865e+7bhIE8PKxhDXg8PKJRDLFAQB8bF7wxMb2yhIBiR93XwO27HOXOXbxyC+/EbP///////wAAAAAAAAAAAAAAACH5BAEAADsALAAAAAAOAA4AAAZQwJ1wSNxBYMVkQuZYJIcoDcnEeu5mOp3HZR1ZarqG1bChHEBWzkmBI1hTNwbmYw2sbKGI9VISSQpWKhkALQhWOwMCDy+HFR05E4c7MTSSQkEAOw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
      </HTTPResponse>
    </HTTPTask>
    <HTTPTask id="106" hostname="nopc.shaft.com" path="/Images/deleteRecordBtn.gif" url="http://nopc.shaft.com/Images/deleteRecordBtn.gif" ip="10.10.10.53" port="80" client_ip="192.168.0.24" client_port="16335" connectionId="1828" origin="HTML" encodingType="ANSI" ordinal="8" startDateTime="2019-01-04T16:15:53.951+05:30" startTime="27075" endTime="27391" blockedTime="0" dnsTime="0" connectTime="0" sendTime="0" waitTime="0" receiveTime="0" sslNegotiateTime="0" responseBodySize="0">
      <HTTPRequest method="GET">
        <HTTPHeaders>
          <HTTPHeaderEntity name="Referer" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aHR0cDovL25vcGMuc2hhZnQuY29tL0VtcGxveWVlRGV0YWlscy5hc3B4</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Language" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZW4tVVMsZW47cT0wLjk=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="User-Agent" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzcxLjAuMzU3OC45OCBTYWZhcmkvNTM3LjM2</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Encoding" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ki8q</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Connection" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Host" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>bm9wYy5zaGFmdC5jb20=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Cookie" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QVNQLk5FVF9TZXNzaW9uSWQ9MjN0bmxyMjA1Y2RxZWdxbmxtZWZ0Ynlo</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>R0VUIC9JbWFnZXMvZGVsZXRlUmVjb3JkQnRuLmdpZiBIVFRQLzEuMQ0KUmVmZXJlcjogaHR0cDovL25vcGMuc2hhZnQuY29tL0VtcGxveWVlRGV0YWlscy5hc3B4DQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLVVTLGVuO3E9MC45DQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvNzEuMC4zNTc4Ljk4IFNhZmFyaS81MzcuMzYNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KQWNjZXB0OiAqLyoNCkNvbm5lY3Rpb246IEtlZXAtQWxpdmUNCkhvc3Q6IG5vcGMuc2hhZnQuY29tDQpDb29raWU6IEFTUC5ORVRfU2Vzc2lvbklkPTIzdG5scjIwNWNkcWVncW5sbWVmdGJ5aA0KDQo=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
          <HTTPCookies>
            <HTTPHeaderEntity name="ASP.NET_SessionId" index="0">
              <HTTPDataSet>
                <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                  <ActualData>MjN0bmxyMjA1Y2RxZWdxbmxtZWZ0Ynlo</ActualData>
                </HTTPData>
              </HTTPDataSet>
              <IsExternalData>false</IsExternalData>
            </HTTPHeaderEntity>
          </HTTPCookies>
        </HTTPHeaders>
      </HTTPRequest>
      <HTTPResponse>
        <contentLenght>325</contentLenght>
        <HTTPHeaders>
          <HTTPHeaderEntity name="Content-Type" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>aW1hZ2UvZ2lm</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Last-Modified" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TW9uLCAwMyBPY3QgMjAxNiAwNzo0MTowMCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Accept-Ranges" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>Ynl0ZXM=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ETag" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>IjA0ZTI4N2M0OTFkZDIxOjAi</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Server" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>TWljcm9zb2Z0LUlJUy8xMC4w</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="X-Powered-By" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>QVNQLk5FVA==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Date" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>RnJpLCAwNCBKYW4gMjAxOSAxMDo0NjoyMCBHTVQ=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Content-Length" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MzI1</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPAllHeaders>
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IGltYWdlL2dpZg0KTGFzdC1Nb2RpZmllZDogTW9uLCAwMyBPY3QgMjAxNiAwNzo0MTowMCBHTVQNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpFVGFnOiAiMDRlMjg3YzQ5MWRkMjE6MCINClNlcnZlcjogTWljcm9zb2Z0LUlJUy8xMC4wDQpYLVBvd2VyZWQtQnk6IEFTUC5ORVQNCkRhdGU6IEZyaSwgMDQgSmFuIDIwMTkgMTA6NDY6MjAgR01UDQpDb250ZW50LUxlbmd0aDogMzI1DQoNCg==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPAllHeaders>
        </HTTPHeaders>
        <HTTPBody>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0lGODlhDQAPANUyANrUw/Px7I+EZ09OTX93YGtmWX52YF5bU1xaU2lkV2JeVeLdz3tzX3lyXol/ZYJ5YnhxXtbPvHdwXXFrW8G4m4uBZo6EZ2VhVouBZW9qWpKHaFJRTuTg02plWHNtXIV8Y1dVUHZvXYh+ZGRgVujk2WxnWX11YMvDqlRST1lXUU1NTcK4m8nAp6mee+7r40xMTKiZcf///////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAADIALAAAAAANAA8AAAZiQJlwSCwOLRiRUaYRVGAxmKkRGgpggBgAAOvCCkLH52FgSDyZUuIyJMQCLtKiqyBCoq4WC7ZCECd4ejAUIEQdgXsrG0QjiHwDRAeOKy9EKZOVQygxbxwRJy+ZQyqhpaJLRkEAOw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPBody>
      </HTTPResponse>
    </HTTPTask>
  </HTTPTask>
</HTTPSnapshot>